window.__require=function e(t,o,n){function r(a,c){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({ATHomeScreen:[function(t,o,n){"use strict";cc._RF.push(o,"95524X7kNlAIq9SCxxMsi2z","ATHomeScreen");var r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../NanoGameCore/GameFramework/Scripts/BuildConfig"),a=t("../NanoGameCore/Services/Platform/Platform"),c=cc._decorator,s=c.ccclass,l=(c.property,function(){function t(){}var o;return o=t,t.isValidOrigin=function(){try{return!!window.top.location.href}catch(e){return!1}},t.gotoNano=function(){var e=i.NgcBuildConfig.gameClientURL;-1==i.NgcBuildConfig.gameClientURL.indexOf("?")?e+="?A2HS=true":e+="&A2HS=true",cc.sys.openURL(e)},t.getGameUrl=function(){var e=a.NgcPlatform.inst.getPartyLinkBase();return e.replace(/#\w*/g,"")},t.getURLParameter=function(e){var t=o.getGameUrl();console.log("url",t);var n=new URL(t).search;if(null==n||""==n){var r=t.indexOf("?");r>=0&&(n=t.substring(r,t.length))}return cc.log("queryString",n),new URLSearchParams(n).get(e)},t.shouldA2HS=function(){return"true"==o.getURLParameter("A2HS")},t.removeA2HSParameter=function(){if(o.isValidOrigin())try{var t=o.getGameUrl();t.indexOf("&A2HS=true")>=0?t=t.replace("&A2HS=true",""):t.indexOf("A2HS=true")>=0&&(t=t.replace("A2HS=true","")),window.history.pushState({},document.title,t)}catch(e){cc.warn(e)}},o=r([s],t)}());n.default=l,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/Services/Platform/Platform":"Platform"}],AdsManager_impl:[function(e,t,o){"use strict";cc._RF.push(t,"08e10f30eZCdqhW2DkZA4Xt","AdsManager_impl");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../../Scripts/SoundManager"),a=e("../../../Services/Ads/Ads"),c=e("../../../Services/Telemetry/Telemetry"),s=e("../BuildConfig"),l=e("../NgcScreenManager"),u=e("../NgcSoundManager"),p=e("../NgcUserInfo"),d=e("./NgcAdsManager"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(e,t,o,n,r,s){if(-1===d.default.inst.getAllowedPointcut().indexOf(e))return r&&r(),void(s&&s(!1,0));if(a.NgcAds.inst){if(!a.NgcAds.inst.adsIsAvailable(t))return r&&r(),void(s&&s(!1,0));switch(t){case a.AdsType.Banner:cc.log("AdsManager","Show Ads Banner",e),a.NgcAds.inst.isBannerShowing&&this.hide(d.default.lastBannerPointcutID),l.default.inst&&l.default.inst.showBanner(),d.default.lastBannerPointcutID=e,d.default.showBannerTimeStamp=Date.now(),c.NgcTelemetry.inst.LogEvent_GameAdsRequest(!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.Banner,e),a.NgcAds.inst.showAds(a.AdsType.Banner,null,null),c.NgcTelemetry.inst.LogEvent_GameAdsStart(p.default.numberOfAdsWatched,p.default.numberAdsSession,!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.Banner,e);break;case a.AdsType.Interstitial:cc.log("AdsManager","Show Ads Interstitial",e);var f=Date.now(),h=f;switch(e){case d.NgcPointcuts.interPreGame:c.NgcTelemetry.inst.LogEvent_OnboardingPreR2InterRequest({adsProvider:a.NgcAds.inst.getName()})}c.NgcTelemetry.inst.LogEvent_GameAdsRequest(!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.Interstitial,e),a.NgcAds.inst.showAds(a.AdsType.Interstitial,function(t){switch(r&&r(),t||(i.default.inst.useSound=!1,i.default.inst.stopAllSFX(),u.NgcSoundManager.inst.stopMusic()),p.default.updateAdsInfo(),e){case d.NgcPointcuts.interPreGame:c.NgcTelemetry.inst.LogEvent_OnboardingPreR2InterStart({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-f})}h=Date.now(),c.NgcTelemetry.inst.LogEvent_GameAdsStart(p.default.numberOfAdsWatched,p.default.numberAdsSession,!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.Interstitial,e)},function(t,o){switch(t||p.default.updateAdsInfo(),i.default.inst.useSound=!0,0==u.NgcSoundManager.inst.resumeLastPlayedMusic()&&i.default.inst.playStartScreenMusic(),s&&s(t,o),e){case d.NgcPointcuts.interPreGame:c.NgcTelemetry.inst.LogEvent_OnboardingPreR2InterEnd({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-h})}c.NgcTelemetry.inst.LogEvent_GameAdsStop("null",0,t?1:0,a.NgcAds.inst.getName(),a.AdsType.Interstitial,o,null,e,!t)});break;case a.AdsType.VideoReward:cc.log("AdsManager","Show Ads VideoReward",e);var g=Date.now(),y=g;switch(e){case d.NgcPointcuts.videoDaily:c.NgcTelemetry.inst.LogEvent_OnboardingDailyVideoRequest({adsProvider:a.NgcAds.inst.getName()});break;case d.NgcPointcuts.videoRewardDialog:c.NgcTelemetry.inst.LogEvent_OnboardingClaim2xVideoRequest({adsProvider:a.NgcAds.inst.getName()})}c.NgcTelemetry.inst.LogEvent_GameAdsRequest(!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.VideoReward,e),a.NgcAds.inst.showAds(a.AdsType.VideoReward,function(t){switch(r&&r(),t||(i.default.inst.useSound=!1,i.default.inst.stopAllSFX(),u.NgcSoundManager.inst.stopMusic()),p.default.updateAdsInfo(),y=Date.now(),e){case d.NgcPointcuts.videoDaily:c.NgcTelemetry.inst.LogEvent_OnboardingDailyVideoStart({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-g});break;case d.NgcPointcuts.videoRewardDialog:c.NgcTelemetry.inst.LogEvent_OnboardingClaim2xVideoStart({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-g})}c.NgcTelemetry.inst.LogEvent_GameAdsStart(p.default.numberOfAdsWatched,p.default.numberAdsSession,!0,o,n,a.NgcAds.inst.getName(),a.AdsType.VideoReward,e)},function(t,r){switch(t||p.default.updateAdsInfo(),i.default.inst.useSound=!0,0==u.NgcSoundManager.inst.resumeLastPlayedMusic()&&i.default.inst.playStartScreenMusic(),s&&s(t,r),e){case d.NgcPointcuts.videoDaily:c.NgcTelemetry.inst.LogEvent_OnboardingDailyVideoEnd({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-y,checker:t});break;case d.NgcPointcuts.videoRewardDialog:c.NgcTelemetry.inst.LogEvent_OnboardingClaim2xVideoEnd({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-y})}c.NgcTelemetry.inst.LogEvent_GameAdsStop(o,n,t?1:0,a.NgcAds.inst.getName(),a.AdsType.VideoReward,r,0,e,!t)})}}},t.prototype.hide=function(e,t){switch(void 0===e&&(e=null),void 0===t&&(t=a.AdsType.Banner),t){case a.AdsType.Banner:if(s.NgcBuildConfig.offlineMode){l.default.inst&&l.default.inst.hideBanner();break}if(this.hasAds(a.AdsType.Banner)){if(e){if(e!=d.default.lastBannerPointcutID)return}else e=d.default.lastBannerPointcutID;if(cc.log("AdsManager","Hide Banner",e),a.NgcAds.inst.isBannerShowing){l.default.inst&&l.default.inst.hideBanner();var o=Date.now()-d.default.showBannerTimeStamp;a.NgcAds.inst.isBannerShowing&&c.NgcTelemetry.inst.LogEvent_GameAdsStop(null,null,1,a.NgcAds.inst.getName(),a.AdsType.Banner,o,0,e),a.NgcAds.inst.hideAds(a.AdsType.Banner)}}break;case a.AdsType.Interstitial:case a.AdsType.VideoReward:}},t.prototype.hasAds=function(e){if(a.NgcAds.inst)switch(e){case a.AdsType.Banner:return a.NgcAds.inst.adsIsAvailable(a.AdsType.Banner);case a.AdsType.Interstitial:return a.NgcAds.inst.adsIsAvailable(a.AdsType.Interstitial);case a.AdsType.VideoReward:return a.NgcAds.inst.adsIsAvailable(a.AdsType.VideoReward)}return!1},t}(d.default);o.default=f,cc._RF.pop()},{"../../../../Scripts/SoundManager":"SoundManager","../../../Services/Ads/Ads":"Ads","../../../Services/Telemetry/Telemetry":"Telemetry","../BuildConfig":"BuildConfig","../NgcScreenManager":"NgcScreenManager","../NgcSoundManager":"NgcSoundManager","../NgcUserInfo":"NgcUserInfo","./NgcAdsManager":"NgcAdsManager"}],AdsSkinItem:[function(t,o,n){"use strict";cc._RF.push(o,"5f3d4D4EM5N6pd97dLvrouz","AdsSkinItem");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),u=t("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),p=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),d=t("../../../NanoGameCore/Services/Ads/Ads"),f=t("../../../NanoGameCore/Services/GameShop/GameShop"),h=t("../../../NanoGameCore/Services/Inventory/Inventory"),g=t("../../Dialog/InsufficientDialog/InsufficientDialog"),y=t("../../Dialog/RewardAnimationDialog/RewardAnimationDialog"),m=t("../../Tracking/TrackingManager"),_=t("../../UserInfo"),v=t("../../Utils/ConstConfig"),S=t("../CarProgressController"),N=t("../CarSkinSelecter"),b=t("./CarSkinItem"),C=cc._decorator,P=C.ccclass,I=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isBought=!1,t._isProgressCompleted=!1,t}return i(t,e),t.prototype.init=function(t,o,n,r){e.prototype.init.call(this,t,o,n,null),this.itemID=f.NgcGameShop.inst.getItems(r)[0].itemID,this.bundleID=r},t.prototype.btnWatchAdsOnClicked=function(){var e,t;return c(this,void 0,void 0,function(){var o,n,r=this;return s(this,function(i){switch(i.label){case 0:return cc.log("Clicked to watch ads bundle: "+this.bundleID),(null===(e=u.default.inst)||void 0===e?void 0:e.hasAds(d.AdsType.VideoReward))?(null===(t=u.default.inst)||void 0===t||t.show(u.NgcPointcuts.videoShopReward+this.bundleID,d.AdsType.VideoReward,this.bundleID,1,null,function(e){e&&r.requestAdsWatched()}),[3,3]):[3,1];case 1:return[4,l.NgcDialogManager.createDialog(g.default.dialogType,g.default.urlPrefab,g.default.bundleName)];case 2:return o=i.sent(),(n=o.getComponent(g.default)).init(p.NgcLocalizedManager.t("ADS_COOLDOWN").text),n.show(),[2];case 3:return[2]}})})},t.prototype.requestAdsWatched=function(){var e=this;f.NgcGameShop.inst.buyBundle(this.bundleID+"_ads",function(t,o){if(t)cc.log("GAME SHOP: Request to buy "+e.bundleID+"_ads failed: "+t);else{cc.log("GAME SHOP: Request to buy "+e.bundleID+"_ads success "+o);var n,r,i=f.NgcGameShop.inst.getItems(e.bundleID)[0],a=f.NgcGameShop.inst.getPrices(e.bundleID)[0].value;h.NgcInventory.inst.objectTypeTable[i.itemID],h.NgcInventory.inst.forceFetchInventory().then(function(){_.UserInfo.updateInventoryWithPlatform().then(function(){e.updateProgressionUI(!0),n=_.UserInfo.skinProgresses,r=+n[i.itemID+"_ads"],m.default.getInst().LogEvent_CarUnlockProgression(i.itemID,r,a,"Main menu shop Ad",_.UserInfo.curCoin)})})}})},t.prototype.requestBuyCarKin=function(){var e=this;f.NgcGameShop.inst.buyBundle(this.bundleID,function(t,o){if(t)cc.log("GAME SHOP: Request to buy "+e.bundleID+" failed: "+t);else{var n=e,r=f.NgcGameShop.inst.getPrices(e.bundleID)[0],i=f.NgcGameShop.inst.getItems(e.bundleID)[0],a=h.NgcInventory.inst.objectTypeTable[i.itemID].type===v.ConstConfig.INVENTORY.TYPE.CURRENCY;cc.log("GAME SHOP: Request to buy "+e.bundleID+" success "+o),h.NgcInventory.inst.forceFetchInventory().then(function(){_.UserInfo.updateInventoryWithPlatform().then(function(){return c(e,void 0,void 0,function(){var e,t,o;return s(this,function(c){switch(c.label){case 0:return n._isProgressCompleted?[4,l.NgcDialogManager.createDialog(y.default.dialogType,y.default.urlPrefab,y.default.bundleName)]:[3,2];case 1:e=c.sent(),(t=e.getComponent(y.default)).initWithCarReward(N.default.getSpriteFrameFromID(i.itemID)),t.show(),n.updateBoughtItemUI(),_.UserInfo.curSkin=f.NgcGameShop.inst.getItems(n.bundleID)[0].itemID,c.label=2;case 2:return n._isBought=!0,o={type:"null",itemPurchaseID:i.itemID,itemPurchaseValue:i.count,itemSpentID:r.currency,itemSpentValue:r.value,purchaseNumber:1,starsBalance:_.UserInfo.curStars,coinsBalance:_.UserInfo.curCoin,isConsumable:a},m.default.getInst().LogEvent_BuyItem(o.type,o.itemPurchaseID,o.itemPurchaseValue,o.purchaseNumber,o.coinsBalance,o.starsBalance,o.itemSpentID,o.itemSpentValue,o.isConsumable),[2]}})})})})}})},t.prototype.updateProgressionUI=function(e){var t=this,o=f.NgcGameShop.inst.getItems(this.bundleID)[0],n=+_.UserInfo.skinProgresses[o.itemID+"_ads"],r=f.NgcGameShop.inst.getPrices(this.bundleID)[0].value;null!==n&&(n>=r&&this.requestBuyCarKin(),this.currentOption.emit("progressed",n,r,e,function(){t._isBought&&t.updateBoughtItemUI(),t._isProgressCompleted=!0}))},t.prototype.updateBoughtItemUI=function(){this.currentOption.active=!1,this.carSelectToggle.node.active=!1,this.carSelectToggle.isChecked=!0,this.lockedIcon.active=!1,this._isBought=!0},t.prototype.show=function(){if(this._isBought)this.currentOption.active=!1,this.carSelectToggle.node.active=!1,this.updateToggleUI(),this.lockedIcon.active=!1;else{this.currentOption.active=!0;var e=void 0;e=this.currentOption.getComponent(S.default);var t=new cc.Component.EventHandler;t.target=this.node,t.component="AdsSkinItem",t.handler="btnWatchAdsOnClicked",e.btnWatchADs.clickEvents.length=0,e.btnWatchADs.clickEvents.push(t),this.updateProgressionUI(!1),this.lockedIcon.active=!0}},t.prototype.hide=function(){this.carSelectToggle.node.active=!1,this.currentOption.active=!1},a([P],t)}(b.default));n.default=I,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/GameShop/GameShop":"GameShop","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../Dialog/InsufficientDialog/InsufficientDialog":"InsufficientDialog","../../Dialog/RewardAnimationDialog/RewardAnimationDialog":"RewardAnimationDialog","../../Tracking/TrackingManager":"TrackingManager","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../CarProgressController":"CarProgressController","../CarSkinSelecter":"CarSkinSelecter","./CarSkinItem":"CarSkinItem"}],Ads_impl_GameDistributionSrv:[function(e,t,o){"use strict";cc._RF.push(t,"47e76YRSeNLHJmxzV3DcARa","Ads_impl_GameDistributionSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../GameFramework/Scripts/NgcScreenManager"),c=e("./Ads"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameCanvas=null,t.adsLoaded=!1,t.adContainer=null,t.adDisplayContainer=null,t.adsLoader=null,t.adsManager=null,t.googleModuleAvailAble=!0,t.callbackAfterPlayVideo=null,t.callbackBeforePlayVideo=null,t.startShowVideoAdsFn=null,t.banner=null,t._interStitialCanShow=!1,t._videoRewardCanShow=!1,t.timeOutFn=null,t}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("NgcAds_impl_GameDistribution pre-initialized")})},t.prototype._getName=function(){return"GameDistribution"},t.prototype._init=function(){return this.showBannerElement(!0),new Promise(function(e){e("NgcAds_impl_GameDistribution initialized")})},t.prototype.showBannerElement=function(e){void 0===e&&(e=!1),this.banner=document.getElementById("canvas-ad"),this.banner&&(this.banner.style.zIndex=e?"1":"-1")},t.prototype._preCacheAds=function(){return!0},t.prototype._adsIsAvailable=function(e){switch(e){case c.AdsType.Banner:case c.AdsType.Interstitial:return!0;case c.AdsType.VideoReward:return!this.waitingNewVideo}return!0},t.prototype._showAds=function(e,t,o){switch(e){case c.AdsType.Banner:t&&t(),this.showBanner(),o&&o();break;case c.AdsType.Interstitial:this.showInterstitial(t,o);break;case c.AdsType.VideoReward:this.showVideoRewards(t,o)}},t.prototype._hideAds=function(e,t){switch(e){case c.AdsType.Banner:this.hideBanner();break;case c.AdsType.Interstitial:case c.AdsType.VideoReward:}t&&t()},t.prototype.showBanner=function(){return this.showBannerElement(!0),this.GDShowDisplayAd(),this.isBannerShowing=!0,this.isBannerShowing},t.prototype.hideBanner=function(){return this.showBannerElement(!1),a.default.inst.topBannerIsActive=this.isBannerShowing=!1,this.isBannerShowing},t.prototype.showInterstitial=function(e,t){var o=Date.now();e(),window.showGDInterstitial=!0,window.onGDAdsComplete=function(){var e=Date.now()-o;t(!0,e),window.onGDAdsComplete=null,window.showGDInterstitial=null},window.onGDAdsError=function(e){if("303"!==e&&"400"!==e){var n=Date.now()-o;t(!1,n),window.onGDAdsError=null,window.showGDInterstitial=null}},this.GDShowInterstitialAd()},t.prototype._targetingPersonalAds=function(){},t.prototype.showVideoRewards=function(e,t){var o=Date.now();e(),window.showGDVideoReward=!0,window.onGDAdsError=function(){var e=Date.now()-o;t(!1,e),window.onGDAdsError=null,window.onGDAdsComplete=null,window.showGDVideoReward=null},window.onGDAdsComplete=function(){var e=Date.now()-o;t(!0,e),window.onGDAdsComplete=null,window.showGDVideoReward=null},this.GDShowRewardedAd()},t.prototype._waitVideoRewardReady=function(){this.waitingNewVideo=!1},t.prototype.GDShowInterstitialAd=function(){try{window.gdsdk.showAd()}catch(e){cc.warn("Can't show ad",e)}},t.prototype.GDShowRewardedAd=function(){try{window.gdsdk.showAd("rewarded")}catch(e){cc.warn("Can't show ad reward",e)}},t.prototype.GDShowDisplayAd=function(){try{window.gdsdk.showAd("display",{containerId:"canvas-ad"}).then(function(){return cc.log("Successfully show ads")}).catch(function(e){return console.info(e)})}catch(e){cc.warn("Can't show ad reward",e)}},i([l],t)}(c.NgcAds));o.default=u,cc._RF.pop()},{"../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","./Ads":"Ads"}],Ads:[function(e,t,o){"use strict";cc._RF.push(t,"b7f48MdGpdP3IpcBPwwphIa","Ads");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcAds=o.AdsType=void 0;var a=e("../Service"),c=e("../Platform/Platform"),s=cc._decorator,l=s.ccclass;s.property,function(e){e[e.Banner=0]="Banner",e[e.Interstitial=1]="Interstitial",e[e.VideoReward=2]="VideoReward"}(o.AdsType||(o.AdsType={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBannerShowing=!1,t.waitingNewVideo=!1,t.timeStartWaitNewVideo=null,t}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.preCacheAds=function(e){this._preCacheAds(e)},t.prototype.adsIsAvailable=function(e){return!c.NgcPlatform.isOfflineMode()&&this._adsIsAvailable(e)},t.prototype.showAds=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null),this._showAds(e,t,o)},t.prototype.targetingPersonalAds=function(e){this._targetingPersonalAds(e)},t.prototype.hideAds=function(e,t){void 0===t&&(t=null),this._hideAds(e,t)},t.prototype.waitVideoRewardReady=function(){this._waitVideoRewardReady()},t.prototype.start=function(){},t.prototype.isFakeAdsPlatform=function(){return!1},t.srvInstances=[],t.inst=null,i([l],t)}(a.NgcService);o.NgcAds=u,cc._RF.pop()},{"../Platform/Platform":"Platform","../Service":"Service"}],AsbLog:[function(e,t,o){"use strict";cc._RF.push(t,"b0bf1Mk2kVN9K7Mt6+VgKiy","AsbLog");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.LogLevel=void 0;var i,a=cc._decorator,c=a.ccclass;a.property,function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(i=o.LogLevel||(o.LogLevel={}));var s=function(){function e(){this._logs=[],this._ccLogF=null,this._ccWarnF=null,this._ccErrorF=null,this._downloadElement=null,this._downloadEvent=null}var t;return t=e,Object.defineProperty(e,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),e.prototype.setupHook=function(e){switch(this.resetHook(),e){case i.Info:this.hookCcLog();case i.Warning:this.hookCcWarn();case i.Error:this.hookCcError()}cc.warn("AsbLog doesn't support substitutions!")},e.prototype.resetHook=function(){this._ccLogF&&(cc.log=this._ccLogF,this._ccLogF=null),this._ccWarnF&&(cc.log=this._ccWarnF,this._ccWarnF=null),this._ccErrorF&&(cc.log=this._ccErrorF,this._ccErrorF=null)},e.prototype.hookCcLog=function(){var e=this;this._ccLogF=cc.log,cc.log=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];e._logs.push("I/ "+(new Date).getTime().toLocaleString()+" "+t+"\n"),e._ccLogF.apply(e,r([t],o))}},e.prototype.hookCcWarn=function(){var e=this;this._ccWarnF=cc.warn,cc.warn=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];e._logs.push("W/ "+(new Date).getTime().toLocaleString()+" "+t+"\n"),e._ccWarnF.apply(e,r([t],o))}},e.prototype.hookCcError=function(){var e=this;this._ccErrorF=cc.error,cc.error=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];e._logs.push("E/ "+(new Date).getTime().toLocaleString()+" "+t+"'\n'"),e._ccErrorF.apply(e,r([t],o))}},e.prototype.flush=function(){this._logs=[]},e.prototype.setupSaving=function(){this._downloadEvent=document.createEvent("MouseEvents"),this._downloadElement=document.createElement("a"),this._downloadEvent.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null)},e.prototype.save=function(e){void 0===e&&(e=null),this.setupSaving();var t=new Blob(this._logs,{type:"text/text"});this._downloadElement.href=window.URL.createObjectURL(t),this._downloadElement.download=e||"log.txt",this._downloadElement.dataset.downloadurl=["text/text",this._downloadElement.download,this._downloadElement.href].join(":"),this._downloadElement.dispatchEvent(this._downloadEvent)},e._inst=null,t=n([c],e)}();o.default=s,cc._RF.pop()},{}],AssetPreloader:[function(e,t,o){"use strict";cc._RF.push(t,"3d5d8xf1ORBX4c8fKY3yTFz","AssetPreloader");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configFile=null,t}return r(t,e),t.prototype.start=function(){},i([s],t.prototype,"configFile",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],AutoTest:[function(e,t,o){"use strict";cc._RF.push(t,"f157eYJaLxAXLNoorhqgjW+","AutoTest");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../globals"),c=e("./Screens/StartScreen/StartMain"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isTestRunning=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("Can only have one AutoTest object"):o.inst=this},t.run=function(){o.inst?o.inst.runTest():console.error("Missing AutoTest object")},t.prototype.runTest=function(){this.isTestRunning?console.error("Test already running"):(this.isTestRunning=!0,this.scheduleOnce(function(){c.default.inst.playerClickedStart()},3))},t.prototype.start=function(){},t.prototype.update=function(){},t.inst=null,o=i([l],t)}(cc.Component));o.default=u,a.default.AutoTest=u,cc._RF.pop()},{"../globals":"globals","./Screens/StartScreen/StartMain":"StartMain"}],BackgroundAdapter:[function(e,t,o){"use strict";cc._RF.push(t,"60510Wixv5Pnqx47c74C+mG","BackgroundAdapter");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){cc.sys.isMobile?window.addEventListener("resize",this.onResized.bind(this)):cc.view.on("canvas-resize",this.onResized,this),this.onResized()},t.prototype.onResized=function(){var e=Math.min(cc.view.getFrameSize().width/this.node.width,cc.view.getFrameSize().height/this.node.height),t=this.node.width*e,o=cc.view.getFrameSize().width/t,n=Math.max(cc.view.getFrameSize().width/this.node.width,cc.view.getFrameSize().height/this.node.height);o=n<1?o:Math.min(o,n),this.node.scaleY=this.node.scaleX=o},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],BadConnectionNotification:[function(e,t,o){"use strict";cc._RF.push(t,"cc8c1yHvwNOCqAGDj7biarD","BadConnectionNotification");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=1,t.to=2,t.cycleTimeSec=1,t}return r(t,e),t.prototype.start=function(){cc.tween(this.node).repeatForever(cc.tween(this.node).to(1,{opacity:100}).to(1,{opacity:100}).to(1,{opacity:255}).to(1,{opacity:255}).to(1,{opacity:100}).to(1,{opacity:255})).start()},i([s],t.prototype,"from",void 0),i([s],t.prototype,"to",void 0),i([s],t.prototype,"cycleTimeSec",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],BigDay:[function(e,t,o){"use strict";cc._RF.push(t,"4b0fewk7HNAibRnnkQyZwKD","BigDay");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBigDay=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.today=null,t.tomorrow=null,t.other=null,t.items=null,t.specialReward=null,t.specialIcon=null,t.dayLabel=null,t.timeRemaining=null,t.multiNum=null,t.itemIcon=null,t.timeUntilClaim=0,t.curTime=0,t}return r(t,e),i([l(cc.Node)],t.prototype,"today",void 0),i([l(cc.Node)],t.prototype,"tomorrow",void 0),i([l(cc.Node)],t.prototype,"other",void 0),i([l(cc.Node)],t.prototype,"items",void 0),i([l(cc.Node)],t.prototype,"specialReward",void 0),i([l(cc.Sprite)],t.prototype,"specialIcon",void 0),i([l(a.NgcLabelLocalized)],t.prototype,"dayLabel",void 0),i([l(cc.Label)],t.prototype,"timeRemaining",void 0),i([l(cc.Label)],t.prototype,"multiNum",void 0),i([l(cc.Sprite)],t.prototype,"itemIcon",void 0),i([s],t)}(cc.Component);o.NgcBigDay=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],BlendAnimBase:[function(e,t,o){"use strict";cc._RF.push(t,"fb3b34j3I9HWKoeocsxk7lJ","BlendAnimBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),c=e("./Utils/ConstConfig"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.allAnims=[],t.skin="",t.queuedSkin=null,t}var o;return r(t,e),o=t,t.prototype.idle=function(){},t.prototype.getSkin=function(){return this.skin},t.prototype.queueSkin=function(e){this.queuedSkin=e},t.prototype.setSkinByName=function(e){this.getSkeleton().setSkin(e),this.skin=e},t.prototype.findSkinIndexByName=function(e){for(var t=0,o=0,n=this.getSkeleton().skeletonData.getRuntimeData(!0).skins;o<n.length;o++){if(n[o].name==e)return t;t++}return-1},t.prototype.getSkinNameByIndex=function(e){return e<0||e>=c.ConstConfig.PARAMS.SKINS.length?(console.error("Invalid skin index"),""):c.ConstConfig.PARAMS.SKINS[e]},t.prototype.setSkinByIndex=function(e){if(!(e<0||e>=this.getNumSkins())){for(var t=0,o=0,n=this.getSkeleton().skeletonData.getRuntimeData(!0).skins;o<n.length;o++){var r=n[o];if(t==e)return this.setSkinByName(r.name),r.name;t++}return""}},t.prototype.setRandomSkin=function(){this.setSkinByIndex(a.NgcNetUtils.RandomRange(1,this.getNumSkins()-1,!0))},t.prototype.getNumSkins=function(){return c.ConstConfig.PARAMS.SKINS.length},t.prototype.playAnim=function(e){this.getSkeleton().setAnimation(0,e.name,e.loop)},t.prototype.getSkeleton=function(){return this.skeleton?this.skeleton:(this.skeleton=this.node.getComponent(sp.Skeleton),this.skeleton)},t.prototype.init=function(e){this.mixFlatAnimArray(e)},t.prototype.onLoad=function(){var e=this.flattenAllAnims();this.init(e)},t.prototype.start=function(){},t.prototype.flattenAllAnims=function(){for(var e=[],t=0;t<this.allAnims.length;t++)for(var o=this.allAnims[t],n=0;n<o.length;n++)e.push(o[n]);return e},t.prototype.mixFlatAnimArray=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)this.getSkeleton().setMix(e[t],e[n],o.defaultBlendTimeSec),this.getSkeleton().setMix(e[n],e[t],o.defaultBlendTimeSec)},t.prototype.update=function(){this.queuedSkin&&(this.setSkinByName(this.queuedSkin),this.queuedSkin=null)},t.defaultBlendTimeSec=.1,o=i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","./Utils/ConstConfig":"ConstConfig"}],BlindLabel:[function(e,t,o){"use strict";cc._RF.push(t,"9e0a7yr5ANNl7Cr0faOoNs+","BlindLabel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.lastUpdate=0,t.tempStr="",t}return r(t,e),t.prototype.start=function(){this.label=this.node.getComponent(cc.Label),this.lastUpdate=Date.now(),this.tempStr=this.label.string},t.prototype.update=function(){Date.now()-this.lastUpdate>400&&(this.blind=!this.blind,this.blindText(this.blind),this.lastUpdate=Date.now())},t.prototype.blindText=function(){this.label.string=this.blind?this.tempStr:""},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],BlindNode:[function(e,t,o){"use strict";cc._RF.push(t,"e3eb7yltRlDoI34hmnKJD7B","BlindNode");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.lastUpdate=0,t.isBlind=!0,t.blindValue=0,t.duration=400,t.is50PercentBlind=!1,t.isIncreaseMode=!0,t.MAX_OPACITY=255,t.HALF_OPACITY=127.5,t.STEP_CHANGE=3,t}return r(t,e),t.prototype.start=function(){this.lastUpdate=Date.now(),this.is50PercentBlind&&(this.isIncreaseMode=!0,this.node.opacity=this.HALF_OPACITY)},t.prototype.update=function(){this.isBlind&&(this.is50PercentBlind?this.isIncreaseMode?(this.node.opacity+=this.STEP_CHANGE,this.node.opacity>=this.MAX_OPACITY&&(this.isIncreaseMode=!1)):(this.node.opacity-=this.STEP_CHANGE,this.node.opacity<=this.HALF_OPACITY&&(this.isIncreaseMode=!0)):Date.now()-this.lastUpdate>this.duration&&(this._blind=!this._blind,this.blind(this._blind),this.lastUpdate=Date.now()))},t.prototype.blind=function(){this.node.opacity=this._blind?this.MAX_OPACITY:this.blindValue},t.prototype.startBlind=function(e){this.isBlind=e,this.isBlind||(this.node.opacity=this.MAX_OPACITY)},t.prototype.setBlindOpacity=function(e){this.blindValue=e},t.prototype.setBlindDuration=function(e){this.duration=e},i([s],t.prototype,"isBlind",void 0),i([s],t.prototype,"duration",void 0),i([s],t.prototype,"is50PercentBlind",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],BoosterUI:[function(e,t,o){"use strict";cc._RF.push(t,"5c4078qwbdF1bYvjuOI+a5b","BoosterUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.boosterType=void 0;var a,c=e("../../NanoGameCore/Core/Utils"),s=e("../../NanoGameCore/Services/Inventory/Inventory"),l=e("../Screens/StartScreen/StartMain"),u=e("../Tracking/TrackingManager"),p=e("../UserInfo"),d=e("../Utils/ConstConfig"),f=cc._decorator,h=f.ccclass,g=f.property;(function(e){e[e.none=0]="none",e[e.magnet=1]="magnet",e[e.gold=2]="gold",e[e.electro=3]="electro"})(a=o.boosterType||(o.boosterType={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.activatedHelmet=null,t.activatedArmor=null,t.activatedMask=null,t.shockHelmetSpriteFrame=null,t.shockArmorSpriteFrame=null,t.shockMaskSpriteFrame=null,t.magnetHelmetSpriteFrame=null,t.magnetArmorSpriteFrame=null,t.magnetMaskSpriteFrame=null,t.bronzeHelmetSpriteFrame=null,t.bronzeArmorSpriteFrame=null,t.bronzeMaskSpriteFrame=null,t.magnetAnim=null,t.goldAnim=null,t.electroAnim=null,t.boosterFX=null,t.button=null,t.SHOCK_WEIGHT=0,t.MAGNET_WEIGHT=50,t.BRONZE_WEIGHT=50,t.RABBID_HEAD_OFFSET=cc.v2(50,50),t.RABBIT_ARMOR_OFFSET=cc.v2(26,-42),t.RABBIT_MASK_OFFSET=cc.v2(57,-12),t.ROLLING_SPEED_DEFAULT=6,t.curActivatedBooster=a.none,t.rollingSpeed=t.ROLLING_SPEED_DEFAULT,t.scrollContentChildOffset=0,t.isSlotMachineWorking=!1,t}return r(t,e),t.prototype.start=function(){cc.tween(this.activatedHelmet).repeatForever(cc.tween(this.activatedHelmet).to(.3,{angle:360}).to(0,{angle:0})).start(),cc.tween(this.activatedArmor).repeatForever(cc.tween(this.activatedArmor).to(.3,{angle:360}).to(0,{angle:0})).start(),cc.tween(this.activatedMask).repeatForever(cc.tween(this.activatedMask).to(.3,{angle:360}).to(0,{angle:0})).start(),this.setActiveOfItems(!1),this.boosterFX.active=this.curActivatedBooster!=a.none,this.scrollContentChildOffset=this.scrollView.content.children[0].getContentSize().height+this.scrollView.content.getComponent(cc.Layout).spacingY},t.prototype.rolling=function(){this.scrollView.node.on("scroll-ended",this.rollingFromBottomToTop,this),this.scrollView.scrollToTop(.01,!1)},t.prototype.rollingFromBottomToTop=function(){this.scrollView.scrollToBottom(0,!0),this.scrollView.scrollToTop(this.rollingSpeed,!1)},t.prototype.onDisable=function(){this.scrollView.node.off("scroll-ended",this.rollingFromBottomToTop,this)},t.prototype.onEnable=function(){this.rolling(),this.activatedArmor.setPosition(0,0),this.activatedHelmet.setPosition(0,0),this.activatedMask.setPosition(0,0),this.boosterFX.active=!1},t.prototype.getRandomBooster=function(){var e=Math.round(Math.random()*(this.SHOCK_WEIGHT+this.BRONZE_WEIGHT+this.MAGNET_WEIGHT)+1);return e<=this.SHOCK_WEIGHT?a.electro:e<=this.MAGNET_WEIGHT+this.SHOCK_WEIGHT?a.magnet:a.gold},t.prototype.triggerBooster=function(e,t,o){var n=this;if(void 0===t&&(t=!1),void 0===o&&(o=null),!this.isSlotMachineWorking){o||(o=this.getRandomBooster());var r,i,f,h,g=0;this.curActivatedBooster=o,o==a.electro?(r=d.ConstConfig.PARAMS.BOOSTER_SKIN.ELECTRIC,i=this.shockHelmetSpriteFrame,f=this.shockArmorSpriteFrame,h=this.shockMaskSpriteFrame,g=0):o==a.magnet?(i=this.magnetHelmetSpriteFrame,f=this.magnetArmorSpriteFrame,h=this.magnetMaskSpriteFrame,r=d.ConstConfig.PARAMS.BOOSTER_SKIN.MAGNET,g=2*this.scrollContentChildOffset):(i=this.bronzeHelmetSpriteFrame,f=this.bronzeArmorSpriteFrame,h=this.bronzeMaskSpriteFrame,r=d.ConstConfig.PARAMS.BOOSTER_SKIN.SHIELD,g=this.scrollContentChildOffset),t||(l.default.inst.curStar-=d.ConstConfig.PARAMS.BOOSTER_PRICE,u.default.inst.LogEvent_BuyItem(c.Utils.enumToString(a,this.curActivatedBooster),c.Utils.enumToString(a,this.curActivatedBooster),1,1,p.UserInfo.curCoin,p.UserInfo.curStars,d.ConstConfig.STAR,d.ConstConfig.PARAMS.BOOSTER_PRICE,!0));var y={itemID:d.ConstConfig.INVENTORY.ITEM_ID.STAR,count:t?0:-d.ConstConfig.PARAMS.BOOSTER_PRICE},m={itemID:c.Utils.enumToString(a,this.curActivatedBooster),count:1};s.NgcInventory.inst.addItemList([y,m],function(e,t){e?cc.log("[BoosterUI] 'addItemList callback ERR = "+e):cc.log("[BoosterUI] 'addItemList callback success res = "+t)}),p.UserInfo.curBooster=this.curActivatedBooster,this.isSlotMachineWorking=!0,this.scrollView.scrollToTop(.01,!1),this.rollingSpeed=.3,this.scheduleOnce(function(){n.scrollView.stopAutoScroll();var t=n.boosterFX.getComponent(cc.Animation);n.scrollView.setContentPosition(cc.v2(n.scrollView.content.x,g)),n.activatedHelmet.getComponent(cc.Sprite).spriteFrame=i,n.activatedArmor.getComponent(cc.Sprite).spriteFrame=f,n.activatedMask.getComponent(cc.Sprite).spriteFrame=h,n.button.interactable=!1;var o=e.add(n.RABBID_HEAD_OFFSET),a=e.add(n.RABBIT_MASK_OFFSET),c=e.add(n.RABBIT_ARMOR_OFFSET);n.scheduleOnce(function(){n.setActiveOfItems(!0),cc.tween(n.activatedHelmet).to(.5,{position:cc.v3(n.activatedHelmet.parent.convertToNodeSpaceAR(o))}).call(function(){n.activatedHelmet.active=!1,n.button.interactable=!0,n.activatedHelmet.setPosition(0,0),l.default.inst.rabbidAnim.setSkinByName(r),n.boosterFX.active=!0,n.boosterFX.scale=1,n.boosterFX.angle=0,n.boosterFX.opacity=255,t.play(t.getClips()[n.curActivatedBooster-1].name),n.rollingSpeed=n.ROLLING_SPEED_DEFAULT,n.scrollView.scrollToTop(n.rollingSpeed,!1),n.isSlotMachineWorking=!1}).start(),cc.tween(n.activatedArmor).to(.5,{position:cc.v3(n.activatedArmor.parent.convertToNodeSpaceAR(c))}).call(function(){n.activatedArmor.active=!1,n.activatedArmor.setPosition(0,0)}).start(),cc.tween(n.activatedMask).to(.5,{position:cc.v3(n.activatedMask.parent.convertToNodeSpaceAR(a))}).call(function(){n.activatedMask.active=!1,n.activatedMask.setPosition(0,0)}).start()},.2)},1.5)}},t.prototype.setActiveOfItems=function(e){this.activatedHelmet.active=e,this.activatedArmor.active=e,this.activatedMask.active=e},i([g(cc.ScrollView)],t.prototype,"scrollView",void 0),i([g(cc.Node)],t.prototype,"activatedHelmet",void 0),i([g(cc.Node)],t.prototype,"activatedArmor",void 0),i([g(cc.Node)],t.prototype,"activatedMask",void 0),i([g(cc.SpriteFrame)],t.prototype,"shockHelmetSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"shockArmorSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"shockMaskSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"magnetHelmetSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"magnetArmorSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"magnetMaskSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"bronzeHelmetSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"bronzeArmorSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"bronzeMaskSpriteFrame",void 0),i([g(cc.AnimationClip)],t.prototype,"magnetAnim",void 0),i([g(cc.AnimationClip)],t.prototype,"goldAnim",void 0),i([g(cc.AnimationClip)],t.prototype,"electroAnim",void 0),i([g(cc.Node)],t.prototype,"boosterFX",void 0),i([g(cc.Button)],t.prototype,"button",void 0),i([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../Screens/StartScreen/StartMain":"StartMain","../Tracking/TrackingManager":"TrackingManager","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig"}],Bot:[function(e,t,o){"use strict";cc._RF.push(t,"082b05blcBJ9Y6kVYs/K9Im","Bot");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.MIN_ANGLE=o.BOTMETHOD=void 0;var a,c=e("./CarBase"),s=e("../Maps/PathManager"),l=e("./PlayerController"),u=e("../Utils/Util"),p=e("../../globals"),d=e("../Config"),f=e("../GroupCollision/GroupCollisionManager"),h=e("../Utils/ConstConfig"),g=cc._decorator,y=g.ccclass,m=g.property;(function(e){e[e.NONE=0]="NONE",e[e.ANGLE=1]="ANGLE",e[e.COLLIDER=2]="COLLIDER",e[e.RAYCAST=3]="RAYCAST"})(a=o.BOTMETHOD||(o.BOTMETHOD={})),o.MIN_ANGLE=10;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchTime=0,t.oneLoop=!1,t.currentFrame=0,t.resolveContactFirst=!1,t.needtapRight=!1,t.needtapLeft=!1,t.isHeadContact=!1,t._method=a.ANGLE,t.Sensor=100,t.widthSensor=30,t.debug=!1,t.graphics=null,t._newCheckPoint=cc.Vec2.ZERO,t.lastPostBot=cc.Vec2.ZERO,t.numberFrameSamePos=0,t._botBatch=l.BOT_BATCH.Easy,t.forceTapWhenCollision=!1,t}return r(t,e),t.prototype._setBotMethod=function(e){this._method=e},Object.defineProperty(t.prototype,"botBatch",{get:function(){return this._botBatch},set:function(e){this._botBatch=e,this.loadBotBatchParameter(e)},enumerable:!1,configurable:!0}),t.prototype.start=function(){if(this.widthSensor=u.default.randomFromTo(30,this.widthSensor),0==this._AI_intelligence){var t=u.default.randomFromTo(30,90);this.setIntelligence(t)}this.node.zIndex=h.ConstConfig.BOT_ZINDEX,d.default.OFFLINE_MODE&&this.chooseRandomSkin(),e.prototype.start.call(this)},t.prototype.update=function(t){if(p.default.Game.inst.hasRaceStarted()&&this._startRace&&!this.HasStopped()){if(s.default.getInst().isDone()&&(e.prototype.update.call(this,t),this._method==a.ANGLE)){var n=this.node.angle%360,r=this.angleOfNextPoint(),i=c.CarDirection.NONE,l=u.default.rotationAngleFromTo(n,r,this.InterpolateAngular(t)),d=l[0],f=l[1];i=d>f?c.CarDirection.RIGHT:d<f?c.CarDirection.LEFT:c.CarDirection.NONE;var h=360-Math.abs(Math.ceil(Math.abs(r))+Math.floor(Math.abs(this.node.angle)));(Math.abs(Math.abs(r)-Math.abs(this.node.angle))<o.MIN_ANGLE||Math.abs(h)<o.MIN_ANGLE)&&!this.forceTapWhenCollision&&(i=c.CarDirection.NONE),i==c.CarDirection.LEFT||this.needtapLeft?this.tapLeft():i==c.CarDirection.RIGHT||this.needtapRight?this.tapRight():this.tapIdle()}this.isLocallyControlledBot()&&(this._finishedRace||0==this.currentLapStartTimestamp||(this.getWorldPosition().sub(this.lastPostBot).mag()<.1?this.numberFrameSamePos++:(this.lastPostBot=this.getWorldPosition(),this.numberFrameSamePos=0),20==this.numberFrameSamePos&&(this.setCarSate(c.CarState.REPOSITION),this.numberFrameSamePos=0)))}else this.updateNamePosition()},t.prototype.onBeginContact=function(t,o,n){e.prototype.onBeginContact.call(this,t,o,n),n.name==f.GroupCollision.ROAD&&(this.forceTapWhenCollision=!0)},t.prototype.onEndContact=function(t,o,n){e.prototype.onEndContact.call(this,t,o,n),n.name==f.GroupCollision.ROAD&&(this.forceTapWhenCollision=!1)},t.prototype.calculateTouchTime=function(e){var t=Math.abs(this.angleOfNextPoint()-this.getAngularVelocity())/this.InterpolateAngular(e);this.touchTime=Math.ceil(t)},t.prototype.NextPoint=function(){return this._newCheckPoint},t.prototype.angleOfNextPoint=function(){var e=cc.v2(this.getWorldPosition()).sub(this.NextPoint()),t=Math.atan2(e.y,e.x);return(cc.misc.radiansToDegrees(t)+90)%360},t.prototype.drawSensorLine=function(){},t.prototype.onCheckPoint=function(t,o,n){this.ranDomCheckpoint(n),e.prototype.onCheckPoint.call(this,t,o,n)},t.prototype.ranDomCheckpoint=function(e){var t=e.x+u.default.randomFromTo(-e.z*Math.cos(cc.misc.degreesToRadians(this._AI_intelligence)),e.z*Math.cos(cc.misc.degreesToRadians(this._AI_intelligence))),o=e.y+u.default.randomFromTo(-e.z*Math.cos(cc.misc.degreesToRadians(this._AI_intelligence)),e.z*Math.cos(cc.misc.degreesToRadians(this._AI_intelligence))),n=cc.v2(t,o);this._newCheckPoint=n},t.prototype.isLocallyControlledBot=function(){return!0},t.AI_RATE=60/14,t.INTELLIGENCE=70,i([m],t.prototype,"Sensor",void 0),i([m],t.prototype,"widthSensor",void 0),i([m],t.prototype,"debug",void 0),i([y],t)}(c.default);o.default=_,cc._RF.pop()},{"../../globals":"globals","../Config":"Config","../GroupCollision/GroupCollisionManager":"GroupCollisionManager","../Maps/PathManager":"PathManager","../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util","./CarBase":"CarBase","./PlayerController":"PlayerController"}],BuildConfig:[function(e,t,o){"use strict";cc._RF.push(t,"a3c26DUjBdO/py9pJ58vSjj","BuildConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBuildConfig=void 0,o.NgcBuildConfig={buildVersionName:"20221115.88.66.Gamedistribution",offlineMode:!1,platformGameID:"TMB",buildPlatform:"GameDistribution",uplayGenomeId:"6691bada-62d3-4c10-a058-e8e258c307fc",gameClientURL:"https://uat.nano.ubisoft.com/l1nv54nd53845714n/TrackManiaBlitz/index.html",shortGameClientURL:"uat.nano.ubisoft.com/?gameID=TMB",serverSplitting:!1,useNgcServer:!1,alwaysOfferFreeRevive:!1,enabledDebugMode:!1,gameServerURL:"wss://tm-gameserver.nano.ubisoft.com:1338",tuningDataURL:"",versionValidURL:"",deploymentEnvironment:"Live",SDK:{FacebookSrv:{appID:322672265443395,secret:""},NanoSrv:{url:"https://services.nano.ubisoft.com"},UplaySrv:{urlConnect:"https://connect.ubisoft.com",env:"PROD"}},services:{NavBar:{shareButton:!1,backToAppButton:!1,settingButton:!0,abountButton:!0,howtoPlayButton:!0,moreGamesButton:!1,currentGamesButton:!1,likeUsButton:!1,loginButton:!1,addToHomeButton:!1,languageButton:!0,controlButton:!1,cookieButton:!1,shareUrl:"https://nano.ubisoft.com/TrackManiaBlitz/index.html?share=true",shareDescription:"Take on the fastest drivers in the world for the ultimate speed challenge!",shareGameName:"TrackMania Blitz"},Ads:{adInPlayBannerID1:"nano-ubisoft-com_728x90",subID:"TMBNano",bannerHeight:100,timeWaitNewVideo:30},PWF:{mandatoryLogIn:!1,active:!0},Tips:{bundles:"Game_Tip_Texture"},ShareMe:{facebook:!0,twitter:!0,email:!0}}},cc._RF.pop()},{}],BundleAsset:[function(e,t,o){"use strict";cc._RF.push(t,"57a8eJYSkBFLJtQk8h3J0G5","BundleAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BundleAsset=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundUnselected=null,t.backgroundSelected=null,t}return r(t,e),i([s(cc.SpriteFrame)],t.prototype,"backgroundUnselected",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundSelected",void 0),i([c],t)}(cc.Component);o.BundleAsset=l,cc._RF.pop()},{}],Bundle:[function(e,t,o){"use strict";cc._RF.push(t,"dbf3cbUs+NIEaq/YmepHEbz","Bundle");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Bundle=void 0;var a=e("../../../../Core/ResizableComponent"),c=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../../GameFramework/Scripts/NgcShopManager"),u=e("../AssetComponent/BundleAsset"),p=e("../ItemPool"),d=e("./ItemShop"),f=cc._decorator,h=f.ccclass,g=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.bundleName=null,t.promoteTag=null,t.timeContainer=null,t.itemContainer=null,t.itemContainerLayout=null,t.timeExpired=null,t.fullCost=null,t.fullCostCurrencyIcon=null,t.actualCost=null,t.actualCostCurrencyIcon=null,t.reducePercent=null,t.coinSpriteFrame=null,t.starSpriteFrame=null,t._bundleAsset=null,t._displayingItemInfoList=[],t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._bundleAsset=this.node.getComponent(u.BundleAsset),this.updateBackground()},t.prototype.childUpdateInfo=function(){var e=this.ItemInfo;this.bundleName.setLocalizedText(e.bundleName),this.promoteTag.setLocalizedText(e.xValue),this.fullCost.string=e.fullCost.value.toString(),this.fullCostCurrencyIcon.spriteFrame="coin"===e.fullCost.currency?this.coinSpriteFrame:this.starSpriteFrame,this.actualCost.string=this._itemInfo.price.value.toString(),this.actualCostCurrencyIcon.spriteFrame="coin"===e.price.currency?this.coinSpriteFrame:this.starSpriteFrame,this.actualCost.node.opacity=l.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)<this._itemInfo.price.value?100:255,this.reducePercent.string=e.promoTag.toString()+"%",this.setTimeExpired(),this.updateItems()},t.prototype.childSelect=function(){this.updateBackground()},Object.defineProperty(t.prototype,"ItemInfo",{get:function(){return this._itemInfo},enumerable:!1,configurable:!0}),t.prototype.updateBackground=function(){this.background.spriteFrame=this._isSelected?this._bundleAsset.backgroundSelected:this._bundleAsset.backgroundUnselected},t.prototype.setTimeExpired=function(){this.schedule(this.timerCountDown,1,cc.macro.REPEAT_FOREVER),this.timerCountDown()},t.prototype.timerCountDown=function(){var e=this._itemInfo,t=Date.parse(e.timer)-(new Date).getTime(),o=new Date(t),n=Math.floor(t/864e5),r=o.getHours(),i="0"+o.getMinutes(),a="0"+o.getSeconds();this.timeExpired.string=n.toString()+(n>1?" Days ":" Day ")+r+":"+i.substr(-2)+":"+a.substr(-2),t<0&&l.NgcShopManager.getInstance().checkRemoveEliminatedBundle()},t.prototype.isNewItemList=function(){for(var e=function(e){if(-1==t._displayingItemInfoList.findIndex(function(t){return t.itemID===e}))return{value:!0}},t=this,o=0,n=this.ItemInfo.itemIDs;o<n.length;o++){var r=e(n[o]);if("object"==typeof r)return r.value}return!1},t.prototype.updateItems=function(){this.isNewItemList()&&(this.removeOldItems(),this.addNewItems())},t.prototype.removeOldItems=function(){this.itemContainerLayout.node.children.forEach(function(e){p.NgcItemPool.inst.putShopItem(e)}),this.itemContainerLayout.node.removeAllChildren()},t.prototype.addNewItems=function(){var e=this;this._displayingItemInfoList=[],this.ItemInfo.itemIDs.map(function(e){return s.NgcItemInfoManager.getInstance().getSingleItemInfo(e)}).forEach(function(t){var o=p.NgcItemPool.inst.getSingleItem(t.displayType);e.itemContainerLayout.node.addChild(o);var n=o.getComponent(d.ItemShop);n.Interactable=!1;var r={};Object.assign(r,t),r.isBought=!0,r.itemStatusType=s.NgcItemStatusType.Unlock,n.updateInfo(r),e._displayingItemInfoList.push(r)})},t.prototype.resize=function(e){a.ResizableComponent.getResizableComponent(this.node).baseSize.x=this.node.x=0,a.ResizableComponent.resizeNodeByWidth(this.node,e),this.resizeItems()},t.prototype.resizeItems=function(){var e=this.itemContainerLayout.node.children[0].getComponent(a.ResizableComponent).baseSize.width,t=this.itemContainerLayout.node.children[0].getComponent(a.ResizableComponent).baseSize.height,o=this.itemContainerLayout,n=this.itemContainerLayout.node.children.length,r=this.itemContainer.height,i=(this.itemContainer.width-o.paddingLeft-o.paddingRight-(n-1)*o.spacingX)/n;if(i/e*t<=r){var c=Math.floor(i);this.itemContainerLayout.node.children.forEach(function(e){return a.ResizableComponent.resizeNodeByWidth(e,c)})}else{var s=Math.floor(r);this.itemContainerLayout.node.children.forEach(function(e){return a.ResizableComponent.resizeNodeByHeight(e,s)})}},i([g(cc.Sprite)],t.prototype,"background",void 0),i([g(c.NgcLabelLocalized)],t.prototype,"bundleName",void 0),i([g(c.NgcLabelLocalized)],t.prototype,"promoteTag",void 0),i([g(cc.Node)],t.prototype,"timeContainer",void 0),i([g(cc.Node)],t.prototype,"itemContainer",void 0),i([g(cc.Layout)],t.prototype,"itemContainerLayout",void 0),i([g(cc.Label)],t.prototype,"timeExpired",void 0),i([g(cc.Label)],t.prototype,"fullCost",void 0),i([g(cc.Sprite)],t.prototype,"fullCostCurrencyIcon",void 0),i([g(cc.Label)],t.prototype,"actualCost",void 0),i([g(cc.Sprite)],t.prototype,"actualCostCurrencyIcon",void 0),i([g(cc.Label)],t.prototype,"reducePercent",void 0),i([g(cc.SpriteFrame)],t.prototype,"coinSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"starSpriteFrame",void 0),i([h],t)}(d.ItemShop);o.Bundle=y,cc._RF.pop()},{"../../../../Core/ResizableComponent":"ResizableComponent","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../AssetComponent/BundleAsset":"BundleAsset","../ItemPool":"ItemPool","./ItemShop":"ItemShop"}],ButtonEventInput:[function(e,t,o){"use strict";cc._RF.push(t,"82942CevwlPR4Ikqg5bzYi7","ButtonEventInput");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../globals"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){},t.prototype.enableNitroforPlayer=function(){a.default.PlayerController.inst.getLocalPlayer()&&a.default.PlayerController.inst.getLocalPlayer().enableBoost()},t.prototype.followCameraToOthers=function(){a.default.PlayerController.inst.followCameraToOthers()},t.prototype.restartGame=function(){a.default.Main.inst.reload()},i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../globals":"globals"}],BuyGoldDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c4ccbULQd5CH7r8IT7olQws","BuyGoldDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.content=null,t}return r(t,e),t.prototype.init=function(e){this.titleLabel.string=e},t.prototype.closeOnClick=function(){this.hide()},i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Node)],t.prototype,"content",void 0),i([s],t)}(a.NgcDialogBase);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase"}],1:[function(){},{}],2:[function(t,o){var n,r,i=o.exports={};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function l(t){if(r===clearTimeout)return clearTimeout(t);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:c}catch(e){r=c}})();var u,p=[],d=!1,f=-1;function h(){d&&u&&(d=!1,u.length?p=u.concat(p):f=-1,p.length&&g())}function g(){if(!d){var e=s(h);d=!0;for(var t=p.length;t;){for(u=p,p=[];++f<t;)u&&u[f].run();f=-1,t=p.length}u=null,d=!1,l(e)}}function y(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];p.push(new y(e,t)),1!==p.length||d||s(g)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],3:[function(e,t){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}},{}],4:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],5:[function(e,t,o){(function(t,n){var r=/%[sdj%]/g;o.format=function(e){if(!N(e)){for(var t=[],o=0;o<arguments.length;o++)t.push(c(arguments[o]));return t.join(" ")}o=1;for(var n=arguments,i=n.length,a=String(e).replace(r,function(e){if("%%"===e)return"%";if(o>=i)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(t){return"[Circular]"}default:return e}}),s=n[o];o<i;s=n[++o])v(s)||!P(s)?a+=" "+s:a+=" "+c(s);return a},o.deprecate=function(e,r){if(b(n.process))return function(){return o.deprecate(e,r).apply(this,arguments)};if(!0===t.noDeprecation)return e;var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var i,a={};function c(e,t){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(t)?n.showHidden=t:t&&o._extend(n,t),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),p(n,e,n.depth)}function s(e,t){var o=c.styles[t];return o?"\x1b["+c.colors[o][0]+"m"+e+"\x1b["+c.colors[o][1]+"m":e}function l(e){return e}function u(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function p(e,t,n){if(e.customInspect&&t&&T(t.inspect)&&t.inspect!==o.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return N(r)||(r=p(e,r,n)),r}var i=d(e,t);if(i)return i;var a=Object.keys(t),c=u(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),w(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(t);if(0===a.length){if(T(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(C(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(I(t))return e.stylize(Date.prototype.toString.call(t),"date");if(w(t))return f(t)}var l,_="",v=!1,S=["{","}"];return m(t)&&(v=!0,S=["[","]"]),T(t)&&(_=" [Function"+(t.name?": "+t.name:"")+"]"),C(t)&&(_=" "+RegExp.prototype.toString.call(t)),I(t)&&(_=" "+Date.prototype.toUTCString.call(t)),w(t)&&(_=" "+f(t)),0!==a.length||v&&0!=t.length?n<0?C(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=v?h(e,t,n,c,a):a.map(function(o){return g(e,t,n,c,o,v)}),e.seen.pop(),y(l,_,S)):S[0]+_+S[1]}function d(e,t){if(b(t))return e.stylize("undefined","undefined");if(N(t)){var o="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(o,"string")}return S(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,o,n,r){for(var i=[],a=0,c=t.length;a<c;++a)D(t,String(a))?i.push(g(e,t,o,n,String(a),!0)):i.push("");return r.forEach(function(r){r.match(/^\d+$/)||i.push(g(e,t,o,n,r,!0))}),i}function g(e,t,o,n,r,i){var a,c,s;if((s=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?c=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(c=e.stylize("[Setter]","special")),D(n,r)||(a="["+r+"]"),c||(e.seen.indexOf(s.value)<0?(c=v(o)?p(e,s.value,null):p(e,s.value,o-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+c.split("\n").map(function(e){return"   "+e}).join("\n")):c=e.stylize("[Circular]","special")),b(a)){if(i&&r.match(/^\d+$/))return c;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+c}function y(e,t,o){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?o[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+o[1]:o[0]+t+" "+e.join(", ")+" "+o[1]}function m(e){return Array.isArray(e)}function _(e){return"boolean"==typeof e}function v(e){return null===e}function S(e){return"number"==typeof e}function N(e){return"string"==typeof e}function b(e){return void 0===e}function C(e){return P(e)&&"[object RegExp]"===O(e)}function P(e){return"object"==typeof e&&null!==e}function I(e){return P(e)&&"[object Date]"===O(e)}function w(e){return P(e)&&("[object Error]"===O(e)||e instanceof Error)}function T(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function R(e){return e<10?"0"+e.toString(10):e.toString(10)}o.debuglog=function(e){if(b(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var n=t.pid;a[e]=function(){var t=o.format.apply(o,arguments);console.error("%s %d: %s",e,n,t)}}else a[e]=function(){};return a[e]},o.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.isArray=m,o.isBoolean=_,o.isNull=v,o.isNullOrUndefined=function(e){return null==e},o.isNumber=S,o.isString=N,o.isSymbol=function(e){return"symbol"==typeof e},o.isUndefined=b,o.isRegExp=C,o.isObject=P,o.isDate=I,o.isError=w,o.isFunction=T,o.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},o.isBuffer=e("./support/isBuffer");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}o.log=function(){console.log("%s - %s",A(),o.format.apply(o,arguments))},o.inherits=e("inherits"),o._extend=function(e,t){if(!t||!P(t))return e;for(var o=Object.keys(t),n=o.length;n--;)e[o[n]]=t[o[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":4,_process:2,inherits:3}],CCGIFTest:[function(t,o,n){"use strict";cc._RF.push(o,"95292FzWddAUopOS5LSKBKW","CCGIFTest");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.CCGIFTest=void 0;var l=t("./CCGIF"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gifImage=null,t}return i(t,e),t.prototype.start=function(){return c(this,void 0,void 0,function(){return s(this,function(){return cc.find("Canvas/loading").active=!0,cc.find("Canvas/btnPlay").active=!1,cc.find("Canvas/loading").active=!1,cc.find("Canvas/btnPlay").active=!0,console.debug("preload success"),[2]})})},t.prototype.onLoad=function(){this.gifImage.getComponent(l.default).loadUrl("https://nanoservices-storage.s3.ap-south-1.amazonaws.com/NGC/1636532242433-UnE.gif")},a([d(cc.Node)],t.prototype,"gifImage",void 0),a([p],t)}(cc.Component);n.CCGIFTest=f,cc._RF.pop()},{"./CCGIF":"CCGIF"}],CCGIF:[function(t,o,n){"use strict";cc._RF.push(o,"c0ff5NcIN5BPITgP1IQiCbP","CCGIF");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("./GIF"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.path="",t.delays=[],t.frames=[],t.frameIdx=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.preload=function(){return c(this,void 0,void 0,function(){var e=this;return s(this,function(){return l.GIFCache.getInstance(),[2,new Promise(function(t,o){cc.resources.load(e.path,function(n,r){console.log(n,r),n?o(n):(e.delays=r._nativeAsset.delays.map(function(e){return e/100}),e.frames=r._nativeAsset.spriteFrames,t())})})]})})},t.prototype.loadUrl=function(e,t,o){var n=this;this.gifSp=e,this.gifSp.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.gifSp.node.setContentSize(152,152),l.GIFCache.getInstance(),console.log("@@@@ load loadUrl ",t),cc.assetManager.loadAny({url:t},function(e,r){console.log(e,r),e||(n.delays=r.delays.map(function(e){return e/100}),n.frames=r.spriteFrames,console.log("@@@@ .play ",t),o&&o(),n.play(!0))})},t.prototype.play=function(e,t){var o=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),t||this.stop(),this.frames.length){if(this.frameIdx>=this.frames.length&&(this.frameIdx=0,!e))return;this.gifSp.spriteFrame=this.frames[this.frameIdx],this.scheduleOnce(function(){o.play(e,!0)},this.delays[this.frameIdx]),this.frameIdx++}},t.prototype.stop=function(){this.frameIdx=0,this.unscheduleAllCallbacks()},a([d(cc.String)],t.prototype,"path",void 0),a([p],t)}(cc.Component);n.default=f,cc._RF.pop()},{"./GIF":"GIF"}],CONSTANTS:[function(e,t,o){"use strict";cc._RF.push(t,"ded84qp1pxDWZW97OXieGnS","CONSTANTS"),Object.defineProperty(o,"__esModule",{value:!0}),o.NGC_CONSTANTS=void 0,o.NGC_CONSTANTS={LOCALIZATION_LANG:{ARABIC:cc.sys.LANGUAGE_ARABIC,BULGARIAN:cc.sys.LANGUAGE_BULGARIAN,CHINESE:cc.sys.LANGUAGE_CHINESE,DUTCH:cc.sys.LANGUAGE_DUTCH,ENGLISH:cc.sys.LANGUAGE_ENGLISH,FRENCH:cc.sys.LANGUAGE_FRENCH,GERMAN:cc.sys.LANGUAGE_GERMAN,HUNGARIAN:cc.sys.LANGUAGE_HUNGARIAN,ITALIAN:cc.sys.LANGUAGE_ITALIAN,JAPANESE:cc.sys.LANGUAGE_JAPANESE,KOREAN:cc.sys.LANGUAGE_KOREAN,NORWEGIAN:cc.sys.LANGUAGE_NORWEGIAN,POLISH:cc.sys.LANGUAGE_POLISH,PORTUGUESE:cc.sys.LANGUAGE_PORTUGUESE,ROMANIAN:cc.sys.LANGUAGE_ROMANIAN,RUSSIAN:cc.sys.LANGUAGE_RUSSIAN,SPANISH:cc.sys.LANGUAGE_SPANISH,TURKISH:cc.sys.LANGUAGE_TURKISH,UKRAINIAN:cc.sys.LANGUAGE_UKRAINIAN,UNKNOWN:cc.sys.LANGUAGE_UNKNOWN,VIETNAM:"vn"},LEADER_BOARD_UI_URL:{leaderBoardUIPrefab:"CrossFeature/Prefabs/LeaderBoard/LeaderBoardUI",leaderBoardUIPCPrefab:"CrossFeature/Prefabs/LeaderBoard/LeaderBoardUI_PC"},LOCALIZATION_JSON_URL:"Json/Localization/Localization",INVENTORY:{TYPE:{CURRENCY:"currency",EQUIPPABLE:"equippable",COMSUMABLE:"consumable"},CATEGORY:{SOFT_CURRENCY:"sort_currency",HEAD:"head",BODY:"body",FACE:"face",BOOSTER:"booster"},ITEM_ID:{COIN:"coin",STAR:"star",MAGNET:"magnet",GOLD:"gold",ELECTRO:"electro"}}},cc._RF.pop()},{}],CameraHelper:[function(e,t,o){"use strict";cc._RF.push(t,"1f81ccUni5CcZTGMTQ10cvc","CameraHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../globals"),c=cc._decorator,s=c.ccclass,l=c.requireComponent,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.myCameraOb=null,t.screenHeight=0,t.screenWidth=0,t.topOfScreenInWorldUnits=0,t.bottomOfScreenInWorldUnits=0,t.leftOfScreenInWorldUnits=0,t.rightOfScreenInWorldUnits=0,t}return r(t,e),t.prototype.onLoad=function(){this.myCameraOb=this.node.getComponent(cc.Camera),this.myCameraOb||console.error("MISSING CAMERA")},t.prototype.recalc=function(){this.screenHeight=a.default.Main.inst.mainCanvas.node.height,this.screenWidth=a.default.Main.inst.mainCanvas.node.width;var e=cc.v2(this.screenWidth,this.screenHeight),t=cc.v2(0,0),o=this.myCameraOb.getScreenToWorldPoint(e);this.topOfScreenInWorldUnits=o.y,this.rightOfScreenInWorldUnits=o.x;var n=this.myCameraOb.getScreenToWorldPoint(t);this.bottomOfScreenInWorldUnits=n.y,this.leftOfScreenInWorldUnits=n.x},t.prototype.start=function(){},t.prototype.update=function(){this.recalc()},i([l(cc.Camera)],t.prototype,"onLoad",null),i([s],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../globals":"globals"}],CanvasBG:[function(e,t,o){"use strict";cc._RF.push(t,"f9ba6oPHixExrvGOiMpaP9E","CanvasBG");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){var e=this.node.getComponent(cc.Widget);if(e||(e=this.node.addComponent(cc.Widget)),e&&e.enabled){var t=cc.find("Canvas");e.target=t,e.isAlignBottom=!0,e.isAlignRight=!0,e.isAlignTop=!0,e.isAlignLeft=!0,e.top=0,e.bottom=0,e.left=0,e.right=0,e.updateAlignment()}},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],CarAnim:[function(e,t,o){"use strict";cc._RF.push(t,"2e569JkZ81K6bvBZHAFT1LV","CarAnim");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../BlendAnimBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.idleAnims=["idle"],t.landAnims=["hitland"],t.runAnims=["run"],t.runAnimsVfxGlow=["run_VFXglow"],t.jumpDownAnims=["jump_down"],t.jumpUpAnims=["jump"],t.jumpAirAnims=["jump_air"],t.turnleftAnims=["turn_left"],t.turnleftVfxGlowAnims=["turn_left_VFXglow"],t.turnrightAnims=["turn_right"],t.turnrightVfxGlowAnims=["turn_right_VFXglow"],t.turnRightToIdleVfxGlowAnims=["turn_right to idle_VFXglow"],t.turnRightToIdleAnims=["turn_right to idle"],t.turnrLeftToIdleVfxGlowAnims=["turn_left to idle_VFXglow"],t.turnrLeftToIdleAnims=["turn_left to idle"],t.rampUpAnims=["rampup"],t.rampDownAnims=["rampdown"],t.curSkin=null,t.turboMode=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){if(this.allAnims=[this.idleAnims,this.runAnims,this.runAnims,this.jumpUpAnims,this.jumpAirAnims,this.jumpDownAnims,this.landAnims,this.runAnimsVfxGlow,this.turnRightToIdleVfxGlowAnims,this.turnleftVfxGlowAnims,this.turnrLeftToIdleVfxGlowAnims,this.turnrightVfxGlowAnims],e.prototype.onLoad.call(this),0==o.allSkinNames.length)for(var t=this.getNumSkins(),n=0;n<t;n++)o.allSkinNames.push(this.getSkinNameByIndex(n))},t.prototype.getWorldPosition=function(){return cc.v2(this.node.parent.convertToWorldSpaceAR(this.node.position))},t.prototype.changeSkin=function(e){this.skeleton&&this.skeleton.setSkin(e)},t.prototype.setAlpha=function(e){this.node.opacity=e},t.prototype.getAlpha=function(){return this.node.opacity},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.idle=function(){this.setTimeScale(1),this.skeleton.setAnimation(0,this.idleAnims[0],!0)},t.prototype.run=function(){this.setTimeScale(1),this.turboMode?this.skeleton.setAnimation(0,this.runAnimsVfxGlow[0],!0):this.skeleton.setAnimation(0,this.runAnims[0],!0)},t.prototype.jumUp=function(e){this.setTimeScale(e),this.skeleton.setAnimation(0,this.jumpUpAnims[0],!1)},t.prototype.jumpDown=function(){this.skeleton.setAnimation(0,this.jumpDownAnims[0],!1)},t.prototype.onAir=function(){this.skeleton.setAnimation(0,this.jumpAirAnims[0],!1)},t.prototype.onHitLand=function(){this.skeleton.setAnimation(0,this.landAnims[0],!1)},t.prototype.turnLeft=function(){this.turboMode?this.skeleton.setAnimation(0,this.turnleftVfxGlowAnims[0],!1):this.skeleton.setAnimation(0,this.turnleftAnims[0],!1)},t.prototype.turnRight=function(){this.turboMode?this.skeleton.setAnimation(0,this.turnrightVfxGlowAnims[0],!1):this.skeleton.setAnimation(0,this.turnrightAnims[0],!1)},t.prototype.turnRightToIdle=function(){this.turboMode?this.skeleton.setAnimation(0,this.turnRightToIdleVfxGlowAnims[0],!1):this.skeleton.setAnimation(0,this.turnRightToIdleAnims[0],!1)},t.prototype.turnLeftToIdle=function(){this.turboMode?this.skeleton.setAnimation(0,this.turnrLeftToIdleVfxGlowAnims[0],!1):this.skeleton.setAnimation(0,this.turnrLeftToIdleAnims[0],!1)},t.prototype.rampUp=function(){this.skeleton.setAnimation(0,this.rampUpAnims[0],!1)},t.prototype.rampDown=function(){this.skeleton.setAnimation(0,this.rampDownAnims[0],!1)},t.prototype.setTimeScale=function(e){this.skeleton.timeScale=e},t.prototype.setTurboMode=function(e){this.turboMode=e},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(){this.queuedSkin&&("string"==typeof this.queuedSkin||this.queuedSkin,this.curSkin=this.queuedSkin,this.queuedSkin=null)},t.allSkinNames=[],o=i([s],t)}(a.default));o.default=l,cc._RF.pop()},{"../BlendAnimBase":"BlendAnimBase"}],CarBase:[function(e,t,o){"use strict";cc._RF.push(t,"4e0a5F0QnZOeJVsqhWQXUtQ","CarBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CarGear=o.CarOnRampState=o.BatchGroup=o.CarAnimationState=o.CarState=o.CONTROLTYPE=o.CarDirection=void 0;var c,s,l,u,p,d,f,h=e("../../globals"),g=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),y=e("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),m=e("../CarSelector/CarSkinSelecter"),_=e("../Config"),v=e("../EngineSound"),S=e("../FTUE/FTUEManager"),N=e("../Game"),b=e("../GameCamera"),C=e("../Gate"),P=e("../GroupCollision/GroupCollisionManager"),I=e("../League/LeagueManager"),w=e("../Main"),T=e("../Maps/CheckPoint"),O=e("../Maps/DrawMap"),R=e("../Maps/PathManager"),E=e("../Network/NetClient"),A=e("../Network/protos/tmb"),D=e("../PhysicsManager"),k=e("../PlayerName"),L=e("../Sharder/Turbo"),B=e("../SoundChannel"),M=e("../SoundManager"),F=e("../TrackElements/LoopTriggerAnimation"),G=e("../Tracking/TrackingManager"),U=e("../TuningData"),x=e("../UI/LapInfor"),j=e("../UserInfo"),H=e("../Utils/ConstConfig"),z=e("../Utils/Util"),W=e("./CarAnim"),V=e("./CarParameters"),K=e("./PlayerController"),Y=cc._decorator,q=Y.ccclass,J=Y.property;(function(e){e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT"})(c=o.CarDirection||(o.CarDirection={})),function(e){e[e.LEFT_RIGHT=0]="LEFT_RIGHT",e[e.WHEEL_CONTROL=1]="WHEEL_CONTROL",e[e.SWIPE=2]="SWIPE"}(s=o.CONTROLTYPE||(o.CONTROLTYPE={})),function(e){e[e.IDLE=0]="IDLE",e[e.STOP=1]="STOP",e[e.ACCELERATION=2]="ACCELERATION",e[e.AUTO_CORRECT_WAY=3]="AUTO_CORRECT_WAY",e[e.RUNING=4]="RUNING",e[e.NITRO=5]="NITRO",e[e.DEACCELERATION=6]="DEACCELERATION",e[e.ACCELERATION_OFF_ROAD=7]="ACCELERATION_OFF_ROAD",e[e.REPOSITION=8]="REPOSITION",e[e.BOT_FTUE=9]="BOT_FTUE"}(l=o.CarState||(o.CarState={})),function(e){e[e.IDLE=0]="IDLE",e[e.RUNING=1]="RUNING",e[e.JUMP_UP=2]="JUMP_UP",e[e.JUMP_DOWN=3]="JUMP_DOWN",e[e.JUMP_ONAIR=4]="JUMP_ONAIR",e[e.JUMP_HITLAND=5]="JUMP_HITLAND",e[e.TURN_LEFT=6]="TURN_LEFT",e[e.TURN_RIGHT=7]="TURN_RIGHT",e[e.TURN_LEFT_TO_IDLE=8]="TURN_LEFT_TO_IDLE",e[e.TURN_RIGHT_TO_IDLE=9]="TURN_RIGHT_TO_IDLE",e[e.RAMP_DOWN=10]="RAMP_DOWN",e[e.RAMP_UP=11]="RAMP_UP"}(u=o.CarAnimationState||(o.CarAnimationState={})),function(e){e[e.BATCH_1=0]="BATCH_1",e[e.BATCH_2=1]="BATCH_2",e[e.BATCH_3=2]="BATCH_3",e[e.BATCH_4=3]="BATCH_4",e[e.BATCH_5=4]="BATCH_5"}(p=o.BatchGroup||(o.BatchGroup={})),function(e){e[e.IDLE=0]="IDLE",e[e.RAMP_UP=1]="RAMP_UP",e[e.RAMP_DOWN=2]="RAMP_DOWN"}(d=o.CarOnRampState||(o.CarOnRampState={})),function(e){e[e.N=0]="N",e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE"}(f=o.CarGear||(o.CarGear={}));var X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._canBeSpectated=!0,t.animation=null,t._cheatNitro=!1,t._speedForce=0,t._angularForce=0,t._controlType=s.LEFT_RIGHT,t._currentCheckPointIndex=-1,t._nextCheckPointPos=cc.Vec2.ZERO,t._currentLap=0,t._distanceNextCheckPoint=0,t.currentLapStartTimestamp=0,t.bestLapTime=0,t.currentLapTime=0,t.raceTime=0,t.raceStartTimestamp=0,t.raceStopTimestamp=0,t.pausedRaceTime=0,t.lapStopTimeStamp=0,t._carAnimationState=u.RUNING,t._rampCarState=d.IDLE,t._isStopped=!1,t._finishedRace=!1,t._followHuman=!1,t.rank=0,t.CarContainer="CarContainer",t.CarContainerLower="CarContainerLower",t._direction=c.NONE,t.name_prefab=null,t.tire_one=null,t.tire_two=null,t.tire_three=null,t.tire_four=null,t.skidmarks=null,t.speedVFX=null,t.turboVFX=null,t.speedVFXPrefab=null,t.turboVFXPrefab=null,t._lostControlValue=1,t._driftFactor=0,t._playername="",t._country="",t.netID="",t._gear=f.N,t._gearRatio=0,t._startRace=!1,t.onEnterCollider=!1,t.driftPrintArr=[],t._currentDriftID=0,t._currentTimeWrongWay=0,t._ignoreColliderGroup="",t._isJumping=!1,t.isSkipAllCollider=!1,t.isSlowing=!1,t._batchGroup=p.BATCH_1,t._startPoint=cc.Vec2.ZERO,t.isSpeedingUp=!1,t._markedKicked=!1,t.JUMP_UP_ANIMATION_DURATION=.67,t.JUMP_AIR_ANIMATION_DURATION=1.5,t.JUMP_DOWN_ANIMATION_DURATION=.93,t.HIT_LAND_ANIMATION_DURATION=.67,t.ALL_JUMP_ANIMATION_DURATION=3.77,t.BEST_JUMP_SCALE_TIME=2.5,t.isLooping=!1,t.isZooming=!1,t.jumpTimeScale=1,t.isPushingBack=!1,t.parentPlayerNameNode=null,t.isStartTurbo=!1,t.isStopTurbo=!1,t.firstTimeDecreaseSpeed=!0,t.wrongWayCounter=0,t.LapsInfo={l_1_time:null,l_1_pos:null,l_2_time:null,l_2_pos:null,l_3_time:null,l_3_pos:null},t._optimizeVFX=!0,t._currBotBatch=null,t.botOwnerNetID="",t._dtTime=1/60,t.useSpecialTurbo=!0,t.USE_FAKE_PHYSIC=!1,t._wheel_base=132,t._steering_angle=30,t._velocity=cc.Vec2.ZERO,t._steer_direction=0,t._firction=-.9,t._drag=-.0015,t._enginePower=800,t._acceleration=cc.Vec2.ZERO,t._traction_fast=.2,t._traction_slow=.05,t._slip_speed=400,t._braking=-450,t._max_speed_reverse=250,t.REDUCE_SPEED=10,t.needUpdateForce=!0,t.useDTforTurning=!1,t.isDrift=!1,t._forceStopDrawSkidmark=!1,t.distance=0,t.distanceHasGone=0,t._hasFinishedALap=!1,t._tempLap=0,t._needCorrectCarWay=!1,t._reachStartLine=!1,t._changeParentForName=!1,t._skinID="",t._isDisconnected=!1,t.nextCurStateMsgID=0,t._isMobile=!1,t._isKickOut=!1,t._kickLap=-1,t._isDangerous=!1,t._isWarnigIcon=!1,t._AI_intelligence=0,t._startPointIndex=-1,t._isSpied=!1,t}return r(t,e),t.prototype.isFinishGameplay=function(){return this.HasStopped()},t.prototype.isRealHuman=function(){return this.netID.indexOf(":")<0},t.prototype.getNetID=function(){return this.netID},t.prototype.getCountryFlag=function(){return this.getCountryFlagFrame()},t.prototype.setLeader=function(e){this._isLeader=e},t.prototype.setAbleToSpectate=function(e){this._canBeSpectated=e},t.prototype.getTotalScore=function(){return 0},t.prototype.setWorldPosition=function(){},t.prototype.onLoad=function(){K.default.getInst().AddPlayer(this),this.engineSound=this.node.getComponent(v.default),this._turboType=m.CAR_TURBO_TYPE.NA},t.prototype.start=function(){var e=this;if(this.slowRate=N.SlowMode.NORMAL,this._parameter=i({},V.default.inst),this._rgbody=this.node.getComponent(cc.RigidBody),this.USE_FAKE_PHYSIC&&(this._rgbody.linearDamping=0,this._rgbody.angularDamping=0),this._speedForce=0,this._angularForce=this._parameter.TORQUE_SPEED_MAX,this.torforce=this._parameter.TORQUE_SPEED_MIN,this.lastVelocityAcc=this.getVelocity(),this.lastPostAcc=this.getWorldPosition(),this.node.on("CheckPoint",this.onCheckPoint.bind(this)),this.node.on("FinishLap",this.onFinishLap.bind(this)),this.node.on("WrongWay",this.onWrongWay.bind(this)),this.node.on("RightWay",this.onRightWay.bind(this)),this._optimizeVFX){this.speedVFX&&this.speedVFX.destroy(),this.turboVFX&&this.turboVFX.destroy();var t=cc.instantiate(this.speedVFXPrefab);t&&(t.parent=this.node.parent,t.name="VFX_Speed",t.position=this.node.position,this.speedVFX=t.getChildByName("vfxSpeed"),t.zIndex=H.ConstConfig.TURBO_ZINDEX);var o=cc.instantiate(this.turboVFXPrefab);if(o){this._turboComp=o.getComponent(L.default);var n=m.CAR_TURBO_TYPE.NA;m.default.s_allCarSkins.forEach(function(t){if(t.carID==e._skinID){n=t.carTurboType,e._turboComp.setMat(n),o.parent=e.node.parent,n==m.CAR_TURBO_TYPE.NA?e.turboVFX=o.getChildByName("vfxTurbo_default"):e.turboVFX=o.getChildByName("Turbo_Base");var r=t.carColor,i=null!=r&&""!=r;if(n==m.CAR_TURBO_TYPE.STREAK){var a=e.turboVFX.getChildByName("MS_Akira").getComponent(cc.MotionStreak);if(a)if(i){var c=r+"3B",s=e.isLocalHuman()?r:c;a.color=(new cc.Color).fromHEX(s)}else e.isLocalHuman()||a.color.setA(.23)}else if(n==m.CAR_TURBO_TYPE.NA||n==m.CAR_TURBO_TYPE.BLAZE||n==m.CAR_TURBO_TYPE.BLAZESPARKLE||n==m.CAR_TURBO_TYPE.SHOCKS)i&&(e.turboVFX.color=(new cc.Color).fromHEX(r));else if(n==m.CAR_TURBO_TYPE.SPARKLE){var l=e.turboVFX.getChildByName("Sparkle_Particles");l&&(u=l.getComponent(cc.ParticleSystem))&&i&&(u.startColor=(new cc.Color).fromHEX(r),u.endColor=(new cc.Color).fromHEX(r))}else if(n==m.CAR_TURBO_TYPE.HEART){var u,p=e.turboVFX.getChildByName("Heart_Particles");p&&(u=p.getComponent(cc.ParticleSystem))&&i&&(u.startColor=(new cc.Color).fromHEX(r),u.endColor=(new cc.Color).fromHEX(r))}}}),this.isLocalHuman()||(this.turboVFX.opacity=this.node.opacity),o.position=this.node.position,o.name="VFX_Turbo_"+this.getPlayerName(),o.zIndex=H.ConstConfig.VFX_ZINDEX}}this.setCarSate(l.IDLE),this._gearRatio=this._parameter.CAR_ACCELERATION_SPEED_GEAR_1,this.node.on("gameStarted",function(){});var r=this;if(this.node.on("raceStarted",function(){r._startRace=!0,r.setCarSate(l.ACCELERATION)},this),this.skidmarks)for(var a=0;a<1;a++)if(null==this.driftPrintArr[a]){var c=cc.instantiate(this.skidmarks),s=cc.instantiate(this.skidmarks);this.node.parent.addChild(c),this.node.parent.addChild(s),c.zIndex=cc.macro.MIN_ZINDEX,s.zIndex=cc.macro.MIN_ZINDEX,this.driftPrintArr[a]={right:c,left:s,using:!1,dlcp:s.getComponent(cc.MotionStreak),drcp:c.getComponent(cc.MotionStreak)}}if(this.playSound(M.AudioClips.spawnCar_sfx,!1),this.isLocalHuman(),null!==this._currBotBatch){var u=I.default.getSelectTrack().trackTier;this.overrideCarParameter(3*u+this._currBotBatch)}},t.prototype.getName=function(){return this.getPlayerName()},t.prototype.loadBotBatchParameter=function(e){this._currBotBatch=e},t.prototype.overrideCarParameter=function(e){var t=U.default.inst.getGameParameters().botParams[e];this._parameter.CAR_ACCELERATION_SPEED_GEAR_1=t.accelerationSpeedGear1,this._parameter.CAR_ACCELERATION_SPEED_GEAR_2=t.accelerationSpeedGear2,this._parameter.CAR_ACCELERATION_SPEED_GEAR_3=t.accelerationSpeedGear3,this._parameter.CAR_ACCELERATION_SPEED_GEAR_4=t.accelerationSpeedGear4,this._parameter.CAR_ACCELERATION_SPEED_GEAR_5=t.accelerationSpeedGear5,this._parameter.TORQUE_SPEED_MAX=t.torqueSpeedMax,this._parameter.TORQUE_SPEED_MIN=t.torqueSpeedMin,this._parameter.TORQUE_SPEED_RATE_SWIPE=t.torqueSpeedRateSwipe,this._parameter.TORQUE_SPEED_RATE_TAP=t.torqueSpeedRateTap,this._parameter.TORQUE_SPEED_RATE_WHEEL=t.torqueSpeedRateWheel,this._parameter.DRIFT_FACTOR_SLIPPY=t.driftFactorSlippy,this._parameter.DRIFT_FACTOR_STICKY=t.driftFactorSticky,this._parameter.MAX_STICKY_VELOCITY=t.maxStickVelocity,this._parameter.RIGHT_VELOCITY_MAGNITUDE=t.rightVelocityMagnitude,this._parameter.CAR_MASS=t.carMass,this._angularForce=this._parameter.TORQUE_SPEED_MAX,this.torforce=this._parameter.TORQUE_SPEED_MIN,this._gearRatio=this._parameter.CAR_ACCELERATION_SPEED_GEAR_1},t.prototype.update=function(e){(E.default.inst.isConnected()||g.NgcBuildConfig.offlineMode)&&(this._startPoint.equals(cc.Vec2.ZERO)&&(this._startPoint=cc.v2(this.node.position)),!this.HasStopped()&&this._startRace&&(0==this.currentLapStartTimestamp&&(this.currentLapStartTimestamp=Date.now()),0==this.raceStartTimestamp&&(this.pausedRaceTime=0,this.raceStartTimestamp=Date.now()),this.isLooping?this.stopSound(M.AudioClips.driftCar_sfx):(this.updateCarState(e),this.USE_FAKE_PHYSIC?this.fake2DMovement(this._speedForce,e):this.applyMovement(this._speedForce,e))),this.curVelocityAcc=new cc.Vec2((this.getVelocity().x-this.lastVelocityAcc.x)/e,(this.getVelocity().y-this.lastVelocityAcc.y)/e),this.lastVelocityAcc=new cc.Vec2(this.getVelocity().x,this.getVelocity().y),this.lastPostAcc=this.getWorldPosition(),this._dtTime=e)},t.prototype.lateUpdate=function(e){this.updateNamePosition(),this.updateCarVfx(e)},t.prototype.updateCarVfx=function(e){if(this.speedVFX&&this.turboVFX){var t=this._speedForce;if(this._optimizeVFX&&(this.speedVFX.parent.position=this.node.position,this.turboVFX.parent.position=this.node.position,this.speedVFX.parent.angle=this.node.angle,this.turboVFX.parent.angle=this.node.angle),t>this._parameter.MIN_SPEED_TRIGGER_VFX_SPEED){0==this.speedVFX.opacity&&(this.speedVFX.opacity=255,this.speedVFX.active=!0);var o=this._parameter.MAX_SPEED_TRIGGER_VFX_SPEED-this._parameter.MIN_SPEED_TRIGGER_VFX_SPEED,n=cc.misc.clampf(t-this._parameter.MIN_SPEED_TRIGGER_VFX_SPEED,0,o);this.speedVFX.opacity=255/o*n}else this.speedVFX.opacity=0,this.speedVFX.active=!1;if(this._turboType!=m.CAR_TURBO_TYPE.NA)this.isStartTurbo&&(this.turboVFX.active&&(this.turboVFX.active=!0),this.turboVFX.scaleY=2,this.turboVFX.scaleY>=2&&(this.isStartTurbo=!1)),this.isStopTurbo&&(this.turboVFX.scaleY-=15*e,this.turboVFX.scaleY<=0&&(this.isStopTurbo=!1,this.turboVFX.active=!1));else{this.isStartTurbo&&(this.turboVFX.scaleY+=15*e,this.turboVFX.scaleY>=2&&(this.isStartTurbo=!1)),this.isStopTurbo&&(this.turboVFX.scaleY-=40*e,this.turboVFX.scaleY<=0&&(this.isStopTurbo=!1));var r=cc.misc.clampf(this.turboVFX.scaleY,0,2);r!=this.turboVFX.scaleY&&(this.turboVFX.scaleY=r,r>0?this.turboVFX.active||(this.turboVFX.active=!0):this.turboVFX.active&&(this.turboVFX.active=!1))}}},t.prototype.updateCarState=function(e){if(S.default.inst&&this.isLocalHuman()){var t=this.getDistance(),o=function(e,t){return e-100<t&&t<e+100};S.default.inst.curStep==S.FTUE_STEP.REACH_TURN_1&&o(S.TURN_DISTANCE.TURN_1_END,t)&&S.default.inst.finishStep(S.FTUE_STEP.REACH_TURN_1),S.default.inst.curStep==S.FTUE_STEP.REACH_TURN_2&&o(S.TURN_DISTANCE.TURN_2_END,t)&&S.default.inst.finishStep(S.FTUE_STEP.REACH_TURN_2),S.default.inst.curStep==S.FTUE_STEP.REACH_TURN_3&&o(S.TURN_DISTANCE.TURN_3_END,t)&&S.default.inst.finishStep(S.FTUE_STEP.REACH_TURN_3),S.default.inst.curStep==S.FTUE_STEP.REACH_TURN_4&&o(S.TURN_DISTANCE.TURN_4_END,t)&&S.default.inst.finishStep(S.FTUE_STEP.REACH_TURN_4)}switch(this.updateGear(),this._carState){case l.STOP:this._isStopped=!0;break;case l.ACCELERATION:var n=this._parameter.CAR_MAX_SPEED;this.isGodMode()&&(n+=this._parameter.CAR_MAX_SPEED/2),this._speedForce<n?(0==this._speedForce&&(this._speedForce=1),this._speedForce=cc.misc.lerp(this._speedForce,n,this._gearRatio*e*100)):(this._speedForce=n,this.setCarSate(l.RUNING));break;case l.ACCELERATION_OFF_ROAD:this._speedForce<this._parameter.CAR_MAX_SPEED?(0==this._speedForce&&(this._speedForce=1),this._speedForce=cc.misc.lerp(this._speedForce,this._parameter.CAR_MAX_SPEED,this._gearRatio*e*100)):this._speedForce=this._parameter.CAR_MAX_SPEED;break;case l.DEACCELERATION:if(this._speedForce>0){var r=this._gearRatio*e*100*this._parameter.DEACCELERATION_RATIO;this.HasStopped()&&(r=100*this._parameter.CAR_ACCELERATION_SPEED_GEAR_1),this._speedForce=cc.misc.lerp(this._speedForce,-1e3,r)}else this._speedForce=0,this.HasStopped()&&this.setCarSate(l.STOP);break;case l.RUNING:this._speedForce<this._parameter.CAR_MAX_SPEED&&this.setCarSate(l.ACCELERATION);break;case l.BOT_FTUE:var i=K.default.inst.getLocalPlayer();this.getDistance()>i.getDistance()-200?this.firstTimeDecreaseSpeed?(this._speedForce-=200,this._speedForce<0&&(this._speedForce=0,this.firstTimeDecreaseSpeed=!1)):this._speedForce=0:this.getDistance()<i.getDistance()-200&&this._speedForce<this._parameter.CAR_MAX_SPEED&&(this.firstTimeDecreaseSpeed=!1,this._speedForce+=200);case l.AUTO_CORRECT_WAY:this.setAngularVelocity(-this.getAngularVelocity()),this.setCarSate(l.RUNING)}},t.prototype.fake2DMovement=function(e,t){e=this._enginePower;var o=cc.misc.degreesToRadians(this.node.angle+90),n=cc.v2(Math.cos(o),Math.sin(o)).normalize();this.getInput(e,n,t),this.calculate_steering(n,o,t),this.apply_friction(),this._velocity=this._velocity.add(this._acceleration.mul(t)),cc.v2(this.node.position),this._rgbody.linearVelocity=this._velocity},t.prototype.getInput=function(e,t){var o=0;this._direction==c.LEFT?o=1:this._direction==c.RIGHT&&(o=-1),this._acceleration=t.mul(e),this._steer_direction=o*cc.misc.degreesToRadians(this._steering_angle)},t.prototype.calculate_steering=function(e,t,o){var n=this.getWorldPosition().sub(e.mul(this._wheel_base/2)),r=this.getWorldPosition().add(e.mul(this._wheel_base/2));n=n.add(e.mul(this._acceleration.mag()*o));var i=(r=r.add(cc.v2(Math.cos(t+this._steer_direction),Math.sin(t+this._steer_direction)).mul(this._acceleration.mag()*o))).sub(n).normalize(),a=this._traction_fast;this._velocity.mag()>this._slip_speed&&(a=this._traction_slow);var c=i.dot(this._velocity.normalize());c>0?this._velocity=this._velocity.lerp(i.mul(this._velocity.mag()),a):c<0&&(this._velocity=i.mul(Math.min(this._velocity.mag(),this._max_speed_reverse)).mul(-1)),this.node.angle=cc.misc.radiansToDegrees(Math.atan2(i.y,i.x))-90},t.prototype.apply_friction=function(){this._velocity.mag();var e=this._velocity.mul(this._firction),t=this._velocity.mul(this._velocity.mag()*this._drag);this._acceleration=this._acceleration.add(t).add(e)},t.prototype.applyMovement=function(e,t){this.rightVelocity().mag()>this._parameter.MAX_STICKY_VELOCITY&&this.torforce>=this._parameter.TORQUE_SPEED_MAX-this._parameter.TORQUE_SPEED_MIN?(this._driftFactor=this._parameter.DRIFT_FACTOR_SLIPPY,this._driftFactor<this._parameter.DRIFT_FACTOR_SLIPPY&&(this._driftFactor+=.01)):this._driftFactor>this._parameter.DRIFT_FACTOR_STICKY&&(this._driftFactor-=.01);var o=this.rightVelocity().mul(this._driftFactor);this._rgbody.linearVelocity=this.forwardVelocity().add(o);var n=cc.Vec2.ZERO;if(D.USSE_ACCUMULATOR){var r=e*(1/60)*4;n=this.getWorldVector(cc.Vec2.UP).mul(r)}else n=this.getWorldVector(cc.Vec2.UP).mul(e*t*3);this._rgbody.applyForce(n,cc.v2(this._rgbody.getWorldCenter()),!0),this.applyDirection(t,o.mag())},t.prototype.setSpeed=function(e,t){this._speedForce=e,this._gearRatio=t},t.prototype.isJumping=function(){return this._isJumping},t.prototype.getAngularVelocity=function(){return this._rgbody.angularVelocity},t.prototype.getVelocity=function(){return this._rgbody.linearVelocity},t.prototype.setVelocity=function(e){this._rgbody.linearVelocity=e},t.prototype.getSpeed=function(){var e;if(e=this.isLooping?this.lastVelocity.mag():this._rgbody?this._rgbody.linearVelocity.mag():0,this.USE_FAKE_PHYSIC)return this._velocity.mag();if(D.USSE_ACCUMULATOR)return e;var t=N.default.inst.getFPS(N.FPS.AVERAGE);return 0==t&&(t=60),e*(t/60)/4},t.prototype.getGear=function(){return this._gear},t.prototype.setGear=function(e){this._gear=e},t.prototype.setAngularVelocity=function(e){this._isJumping||this.isLooping?this._rgbody.angularVelocity=0:this._rgbody.angularVelocity=e},t.prototype.setControlType=function(e){this._controlType=e},t.prototype.setCarSate=function(e){if(this._carState!=e&&this._carState!=l.BOT_FTUE)switch(this._carState=e,this._carState){case l.IDLE:break;case l.STOP:this.animation.idle();break;case l.RUNING:case l.NITRO:case l.ACCELERATION:case l.DEACCELERATION:if(this._carAnimationState!=u.RUNING)break;break;case l.ACCELERATION_OFF_ROAD:var t=this._parameter.NITRO_DECREASE_DECELERATION_PAD;this.isLocalHuman();var o=this.getBoostBaseBatch();this._speedForce-=this._speedForce*o*t/100;break;case l.REPOSITION:this.node.setPosition(this.node.parent.convertToNodeSpaceAR(this.lastCheckPointPos)),this.isLocalHuman()&&h.default.GameCamera.inst.node.emit("resetNearTrackPoint");var n=this._nextCheckPointPos.sub(cc.v2(this.lastCheckPointPos)),r=Math.atan2(n.x,n.y),i=cc.misc.radiansToDegrees(r);this.node.angle=-i,this.setCarSate(l.ACCELERATION)}},t.prototype.getCarState=function(){return this._carState},t.prototype.increaseTorforce=function(){return this._direction==c.NONE?this.torforce=this._parameter.TORQUE_SPEED_MIN:this.torforce<this._angularForce&&(this._controlType==s.LEFT_RIGHT?this.torforce+=this._parameter.TORQUE_SPEED_RATE_TAP:this._controlType==s.SWIPE?this.torforce+=this._parameter.TORQUE_SPEED_RATE_SWIPE:this._controlType==s.WHEEL_CONTROL&&(this.torforce+=this._parameter.TORQUE_SPEED_RATE_WHEEL)),this.torforce},t.prototype.applyDirection=function(e,t){var o=this.increaseTorforce()*(this._direction==c.LEFT?-1:this._direction==c.RIGHT?1:0)*this._lostControlValue;this.setAngularVelocity(o),this.applyDriftPrint(o,t,e)},t.prototype.InterpolateAngular=function(e){return this.increaseTorforce()*e},t.prototype.applyDriftPrint=function(e,t){var o=this;if(this.tire_one.angle=.2*-e,this.tire_two.angle=.2*-e,Math.abs(t)>2*this._parameter.RIGHT_VELOCITY_MAGNITUDE&&!this._forceStopDrawSkidmark&&!this.isLooping?(this.isDrift=!0,this.playSound(M.AudioClips.driftCar_sfx,!1)):(this.isDrift=!1,this.stopSound(M.AudioClips.driftCar_sfx)),this.isDrift&&!this.isLocalHuman()){var n=w.Main.inst.fps>45;this.isDrift=n}if(this.skidmarks)if(this.isDrift)null!=this.driftPrintArr[this._currentDriftID]&&(this.driftPrintArr[this._currentDriftID].using||(this.driftPrintArr[this._currentDriftID].dlcp.reset(),this.driftPrintArr[this._currentDriftID].drcp.reset(),this.driftPrintArr[this._currentDriftID].left.active=!0,this.driftPrintArr[this._currentDriftID].right.active=!0),this.driftPrintArr[this._currentDriftID].right.position=this.node.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.tire_four.position)),this.driftPrintArr[this._currentDriftID].left.position=this.node.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.tire_three.position)),this.driftPrintArr[this._currentDriftID].right.angle=-this.node.angle,this.driftPrintArr[this._currentDriftID].left.angle=-this.node.angle,this.driftPrintArr[this._currentDriftID].using=!0);else if(null!=this.driftPrintArr[this._currentDriftID]&&this.driftPrintArr[this._currentDriftID].using&&(this.driftPrintArr[this._currentDriftID].using=!1,(this.driftPrintArr[this._currentDriftID].left.active||this.driftPrintArr[this._currentDriftID].right.active)&&this.scheduleOnce(function(){o.driftPrintArr[o._currentDriftID].left.active=!1,o.driftPrintArr[o._currentDriftID].right.active=!1},.5),this._currentDriftID++,1==this._currentDriftID)){this._currentDriftID=0;for(var r=0,i=this.driftPrintArr;r<i.length;r++)i[r].using=!1}},t.prototype.forwardVelocity=function(){var e=this.getWorldVector(cc.Vec2.UP);return e.mul(cc.Vec2.dot(this._rgbody.linearVelocity,e))},t.prototype.rightVelocity=function(){var e=this.getWorldVector(cc.Vec2.RIGHT);return e.mul(cc.Vec2.dot(this._rgbody.linearVelocity,e))},t.prototype.getWorldVector=function(e){var t=cc.Vec2.ZERO;return this._rgbody.getWorldVector(e,t),t},t.prototype.setDirection=function(e,t){void 0===t&&(t=!0),this.isLooping&&c.NONE,this._direction==e||this._isJumping||(t&&(e==c.LEFT?this.setCarAnimState(u.TURN_LEFT):e==c.RIGHT?this.setCarAnimState(u.TURN_RIGHT):this._lastDirection==c.LEFT?this.setCarAnimState(u.TURN_LEFT_TO_IDLE):this._lastDirection==c.RIGHT?this.setCarAnimState(u.TURN_RIGHT_TO_IDLE):this.setCarAnimState(u.IDLE),this._lastDirection=e),this._direction=e)},t.prototype.setJumpAction=function(e){e?this.startJumpUp():this.startJumpDown()},t.prototype.startJumpUp=function(){var e=this;this._isJumping||(this._isJumping=!0,this._speedForce+=this._speedForce*this._parameter.JUMP_BONUS_SPEED_PERCENT/100,this._parameter.CAR_ANIM_DEFAULT_SPEED,this._speedForce,this.jumpTimeScale=1*this.BEST_JUMP_SCALE_TIME,this.playSound(M.AudioClips.jumpCar_sfx),(this.isLocalHuman()||this.isSpied())&&this.engineSound&&this.engineSound.setEngineVolume(this.engineSound.getMaxVolume()/2),this.setCarAnimState(u.JUMP_UP),this.scheduleOnce(function(){e._isJumping&&e.forceStopJump()},(this.ALL_JUMP_ANIMATION_DURATION-this.HIT_LAND_ANIMATION_DURATION)/this.BEST_JUMP_SCALE_TIME*1))},t.prototype.forceStopJump=function(){this.setCarAnimState(u.RUNING),this.setCarSate(l.RUNING),this.engineSound&&this.engineSound.setEngineVolume(this.engineSound.getMaxVolume()),this._isJumping=!1,this._rampCarState=d.IDLE,this.playSound(M.AudioClips.onLand)},t.prototype.startJumpDown=function(){var e=this;0!=this._isJumping&&(this.setCarAnimState(u.JUMP_DOWN),this.scheduleOnce(function(){e.setCarAnimState(u.JUMP_HITLAND),e._isJumping=!1,e.scheduleOnce(function(){e.setCarAnimState(u.RUNING)},e.HIT_LAND_ANIMATION_DURATION)},this.JUMP_DOWN_ANIMATION_DURATION))},t.prototype.updateGear=function(){this.getSpeed()<30?(this._gear=f.ONE,this._gearRatio=this._parameter.CAR_ACCELERATION_SPEED_GEAR_1):this.getSpeed()<100?(this._gear=f.TWO,this._gearRatio=this._parameter.CAR_ACCELERATION_SPEED_GEAR_2):this.getSpeed()<150?(this._gear=f.THREE,this._gearRatio=this._parameter.CAR_ACCELERATION_SPEED_GEAR_3):this.getSpeed()<200?(this._gear=f.FOUR,this._gearRatio=this._parameter.CAR_ACCELERATION_SPEED_GEAR_4):(this._gear=f.FIVE,this._gearRatio=this._parameter.CAR_ACCELERATION_SPEED_GEAR_5)},t.prototype.setCarAnimState=function(e){if(this._carAnimationState!=e)switch(this._carAnimationState=e,this._carAnimationState){case u.IDLE:this.animation.idle();break;case u.RUNING:this.animation.run();break;case u.JUMP_DOWN:this.animation.jumpDown();break;case u.JUMP_UP:this.animation.jumUp(this.jumpTimeScale),this.jumpTimeScale=1;break;case u.JUMP_ONAIR:this.animation.onAir();break;case u.JUMP_HITLAND:this.animation.onHitLand();break;case u.TURN_LEFT:this.animation.turnLeft();break;case u.TURN_RIGHT:this.animation.turnRight();break;case u.TURN_LEFT_TO_IDLE:this.animation.turnLeftToIdle();break;case u.TURN_RIGHT_TO_IDLE:this.animation.turnRightToIdle();break;case u.RAMP_UP:this.animation.rampUp();break;case u.RAMP_DOWN:this.animation.rampDown()}},t.prototype.getDirection=function(){return this._direction},t.prototype.setLostControl=function(e){this._lostControlValue=e},t.prototype.getWorldPosition=function(){return this._worldPos=cc.v2(this.node.parent.convertToWorldSpaceAR(this.node.position)),this._worldPos},t.prototype.onCheckPoint=function(e,t,o){this.HasStopped()||this._hasFinishedALap||(this._currentCheckPointIndex=e,this.lastCheckPointPos=this._nextCheckPointPos,this.lastCheckPointPos.equals(cc.Vec2.ZERO)&&(this.lastCheckPointPos=cc.v2(o)),this._nextCheckPointPos=cc.v2(o),-1==e&&(e=0),this.distance=this._currentLap*R.default.getInst().getRoadDistance()+R.default.getInst().getDistanceAtPoint(e))},t.prototype.getDistance=function(){return this.HasStopped()?(this._finishedRace&&(this.distanceHasGone=this._currentLap*R.default.getInst().getRoadDistance()),this.distanceHasGone):(this.distanceHasGone=Math.round(this.distance+R.default.getInst().calcDistanceFromPosToCheckPoint(cc.v2(this.node.position),this._currentCheckPointIndex)),this.distanceHasGone)},t.prototype.getDistanceInterpolation=function(){return this.getDistance()},t.prototype.getDIstanceLastPoint=function(){return this.lastCheckPointPos&&this._reachStartLine?Math.abs(this.getWorldPosition().sub(this.lastCheckPointPos).mag()):0},t.prototype.onFinishLap=function(e){this._hasFinishedALap=!0,this._tempLap=e},t.prototype.onCompleteRace=function(){if(cc.log(this.getPlayerName()+"STOPPED"),this.isLocalHuman()){var e=j.UserInfo.curFTUEStep;e==S.FTUE_STEP.FINISH_1ST_MAP_FTUE?(S.default.inst&&S.default.inst.finishStep(e),G.default.getInst().LogEvent_FTUE_FinishedTut01(),j.UserInfo.curFTUEStep=S.FTUE_STEP.FINISHED_ALL_FTUE):e==S.FTUE_STEP.FINISH_2ND_MAP_FTUE&&(j.UserInfo.curFTUEStep=S.FTUE_STEP.REWARD_2ND_MAP,G.default.getInst().LogEvent_FTUE_FinishedTut02())}this.stop(),(this.isLocalHuman()||this.isLocallyControlledBot())&&E.default.inst.sendLocalPlayerGameState(),this.raceStopTimestamp=Date.now(),this._finishedRace=!0,this.playSound(M.AudioClips.finishRace_sfx,!1,!0)},t.prototype.carCompletedALap=function(){if(this._hasFinishedALap){this._hasFinishedALap=!1,this._currentLap=this._tempLap,this._currentCheckPointIndex=-1,this.lapStopTimeStamp=Date.now();var e=this.getTimeCurrentLap(),t=K.default.inst.findPlayerIndexByNetID(this.netID)+1;switch(this._currentLap){case 1:this.LapsInfo.l_1_time=e,this.LapsInfo.l_1_pos=t;break;case 2:this.LapsInfo.l_2_time=e,this.LapsInfo.l_2_pos=t;break;case 3:this.LapsInfo.l_3_time=e,this.LapsInfo.l_3_pos=t}if(this.isLocalHuman()){cc.log("LAP OVER");var o={lapNumberTime:e/1e3,lapNumber:this._currentLap,lapNumberPosition:t,mapID:I.default.getSelectTrack().trackID,roundID:N.default.inst.curGameNetID,carID:this._skinID,leagueID:I.default.getSelectTrack().trackTier};G.default.getInst().LogEvent_LapCompleted(o)}if((this.bestLapTime>e||0==this.bestLapTime)&&(this.bestLapTime=e,this.isLocalHuman())){var n=H.ConstConfig.SAVE_KEY.BEST_TIME_LAP+O.default.getMap(),r=j.UserInfo.getNumValue(n);(0==r||r>e)&&j.UserInfo.setNumValue(e,n)}this.currentLapStartTimestamp=0,this._currentLap==x.default.__maxLap-1&&this.isLocalHuman()&&setTimeout(function(){O.default.inst.node.emit("gate",C.default.GATE_FINISH)},5e3),1==this._currentLap&&this.isLocalHuman()&&w.Main.inst.isFTUE()&&S.default.inst.getCurrentStep()==S.FTUE_STEP.FINISHED_LAP_1&&S.default.inst.finishStep(S.FTUE_STEP.FINISHED_LAP_1),2==this._currentLap&&this.isLocalHuman()&&w.Main.inst.isFTUE()&&S.default.inst.getCurrentStep()==S.FTUE_STEP.FINISHED_LAP_2&&S.default.inst.finishStep(S.FTUE_STEP.FINISHED_LAP_2),this._currentLap<x.default.__maxLap?this.isMarkedAsKick()||this.playSound(M.AudioClips.finishLap_sfx):this.onCompleteRace()}},t.prototype.onWrongWay=function(){Date.now()-this._currentTimeWrongWay>=this._parameter.WRONG_WAY_CATCH_UP_DURATION&&this.isLocalHuman()&&!this.HasStopped()&&(cc.log("NeedCatchUpCode"),this._currentTimeWrongWay=Date.now(),this.setVelocity(cc.Vec2.ZERO),this.setAngularVelocity(0),this._speedForce=0,this.setCarSate(l.REPOSITION),this.node.getComponent(T.default).resetWrongWayCounter(),this.wrongWayCounter++)},t.prototype.getWrongWayNumber=function(){return this.wrongWayCounter},t.prototype.onRightWay=function(){this._currentTimeWrongWay=Date.now()},t.prototype.getCurrentCheckPointIndex=function(){return this._currentCheckPointIndex},t.prototype.getNextPointPosition=function(){return this._nextCheckPointPos},t.prototype.enableBoost=function(){},t.prototype.onCollisionEnter=function(e,t){var o=this;if(!this.HasStopped())if(e.node.group==P.GroupCollision.FINISHLINE&&this._hasFinishedALap)this.carCompletedALap();else{if(e.node.group==P.GroupCollision.FINISHLINE&&!this._reachStartLine)return this._reachStartLine=!0,void(this.isLocalHuman()&&S.default.inst.finishStep(S.FTUE_STEP.REACH_GATE));if(e.node.group==P.GroupCollision.JUMP){var n=this._parameter.MIN_TARGET_GEAR_JUMP;0==e.tag?this.getGear()>=n?this.startJumpUp():(this._rampCarState=d.RAMP_DOWN,this.setCarAnimState(u.RAMP_DOWN)):1==e.tag?this.getGear()<=n&&(this.isSkipAllCollider=!1):this._rampCarState==d.IDLE?(this.setCarAnimState(u.RAMP_UP),this._rampCarState=d.RAMP_UP):this._rampCarState==d.RAMP_DOWN&&(this.setCarAnimState(u.RUNING),this._rampCarState=d.IDLE)}if(e.node.group==P.GroupCollision.CHANGE_GROUP&&!this.onEnterCollider){var r=t.node.parent.parent,i=void 0;_.default.MAP_PREFAB?(this._ignoreColliderGroup=e.tag.toString(),i=2==e.tag?r.getChildByName(this.CarContainer):r.getChildByName(this.CarContainerLower)):(this._ignoreColliderGroup=e.node.name,i=e.node.name==P.CollisionName.ROAD_2?r.getChildByName(this.CarContainer):r.getChildByName(this.CarContainerLower)),this.setParentNode(i),this.onEnterCollider=!0}if(this.isJumping()||(e.tag==P.GroupCollisionTag.SPEED_DOWN&&this.playSound(M.AudioClips.slow_sfx,!1),e.tag!=P.GroupCollisionTag.NITRO||this.isSpeedingUp||this.playSound(M.AudioClips.accel_sfx,!1,!0)),e.node.group==P.GroupCollision.LOOP)if(0!=e.tag||this.isLooping||1!=t.tag)2==e.tag&&this.isLocalHuman()&&(cc.log("Collide with Zoom"),this.isZooming?(h.default.GameCamera.inst.node.emit("callUnZoomCamera"),this.isZooming=!1):(h.default.GameCamera.inst.node.emit("callZoomCamera",this._parameter.CARMERA_ZOOM_IN_LOOP),this.isZooming=!0));else{var a=e.node.parent.angle,c=90==Math.abs(a)||270==Math.abs(a),s=e.node.getChildByName("loop"),l=e.node.convertToWorldSpaceAR(s.getPosition()),p=cc.v2(l.x,l.y),f=this.node.position.x-p.x,g=this.node.position.y-p.y;l=c?cc.v2(l.x,l.y+g):cc.v2(l.x+f,l.y);var y=e.node.getChildByName("des"),m=e.node.convertToWorldSpaceAR(y.getPosition());m=c?cc.v2(m.x,m.y+g):cc.v2(m.x+f,m.y);var v=e.node.getChildByName("end"),N=e.node.convertToWorldSpaceAR(v.getPosition());N=c?cc.v2(N.x,N.y+g):cc.v2(N.x+f,N.y),this.lastVelocity=this.getVelocity(),this.lastAngularVelocity=this.getAngularVelocity(),this.setVelocity(cc.v2(0,0)),this.setAngularVelocity(0),this.isLooping=!0;var C=e.node.getComponent(F.default),I=C.getOutAngle();this._forceStopDrawSkidmark=!0,this.scheduleOnce(function(){o.playSound(M.AudioClips.loop_sfx,!1,!0)},1);var w=this._parameter.CAR_MAX_SPEED/this._speedForce;w=cc.misc.clampf(w,.5,2),this.isLocalHuman()&&(C.playAnim(3*w),S.default.inst&&S.default.inst.curStep<S.FTUE_STEP.FINISHED_LAP_1&&S.default.inst.finishStep(S.FTUE_STEP.REACH_LOOP));var T=cc.sequence(cc.moveTo(w,l),cc.moveTo(w,m),cc.callFunc(function(){o.node.angle=I+a},this),cc.moveTo(w,N),cc.callFunc(function(){o.isLooping=!1,o.setVelocity(o.lastVelocity),o.setAngularVelocity(o.lastAngularVelocity),o._forceStopDrawSkidmark=!1,o.isLocalHuman()&&b.default.inst.resetNearTrackPoint()},this));this.node.runAction(T)}}},t.prototype.onCollisionStay=function(e){if(!this.HasStopped()){if(e.tag==P.GroupCollisionTag.NITRO&&!this.isSpeedingUp){this._speedForce<this._parameter.NITRO_INCREASE_ACCELERATION_SPEED_DEFAULT&&(this._speedForce=this._parameter.NITRO_INCREASE_ACCELERATION_SPEED_DEFAULT),this.isLocalHuman();var t=this.getBoostBaseBatch();this._carState!=l.BOT_FTUE&&(this._speedForce+=this._speedForce*t*this._parameter.NITRO_INCREASE_ACCELERATION_PAD_PERCENT/100,this._speedForce=cc.misc.clampf(this._speedForce,0,this._parameter.MAX_SPEED_WITH_NITRO)),this.isSpeedingUp=!0,this.isStartTurbo=!0,this.animation.setTurboMode(!0)}this.isGodMode()||e.tag==P.GroupCollisionTag.SPEED_DOWN&&(this._isJumping||this.isSlowing||(this.isSlowing=!0,this.setCarSate(l.ACCELERATION_OFF_ROAD)))}},t.prototype.onCollisionExit=function(e){var t=this;this.stopEarnNitroEffect(),this.HasStopped()||(e.tag==P.GroupCollisionTag.NITRO&&(this.setCarSate(l.ACCELERATION),this.isSpeedingUp=!1,this.scheduleOnce(function(){t.isSpeedingUp||(t.isStopTurbo=!0,t.animation.setTurboMode(!1))},1)),e.tag==P.GroupCollisionTag.SPEED_DOWN&&(this.setCarSate(l.ACCELERATION),this.isSlowing=!1,this.stopSound(M.AudioClips.slow_sfx)),e.node.group==P.GroupCollision.CHANGE_GROUP&&(this.onEnterCollider=!1))},t.prototype.onBeginContact=function(e,t,o){if(!this.HasStopped()&&(_.default.MAP_PREFAB?(o.tag.toString()==this._ignoreColliderGroup||this.isLooping)&&(e.disabled=!0):(o.node.group==this._ignoreColliderGroup||this.isLooping)&&(e.disabled=!0),!this.isGodMode()))return o.node.group!=P.GroupCollision.ROAD||e.disabled?void 0:(this.playSound(M.AudioClips.collideCar_sfx,!1,!0),this._isJumping&&this.forceStopJump(),this.getCarState()!=l.NITRO&&this.setCarSate(l.DEACCELERATION),void(this._forceStopDrawSkidmark=!0))},t.prototype.onEndContact=function(e,t,o){if(!this.HasStopped()&&o.node.group==P.GroupCollision.ROAD&&!e.disabled){if(4==t.tag||5==t.tag){var n=this._parameter.NITRO_DECREASE_DECELERATION_PAD;this._speedForce-=this._speedForce*n/100}this.getCarState()!=l.NITRO&&this.setCarSate(l.ACCELERATION);var r=this;this.scheduleOnce(function(){r._forceStopDrawSkidmark=!1},.3)}},t.prototype.showEarnNitroEffect=function(){},t.prototype.stopEarnNitroEffect=function(){},t.prototype.setBotOwnerNetID=function(e){this.botOwnerNetID=e},t.prototype.setCountry=function(e){this._country=e},t.prototype.setCountryFlagFrame=function(e){this._countryFlag=e},t.prototype.getCountryFlagFrame=function(){return this._countryFlag},t.prototype.setPlayerName=function(e,t,o){var n=e.split("|"),r=n[0],i=n[1];this._playername=r,this._nameNode||(this._nameNode=cc.instantiate(this.name_prefab),this._nameNode.parent=this.getParentPlayerNameNode());var a=this._nameNode.getComponent(k.default),c=y.NgcCountryFlagsManager.inst.getFlagSpriteFrame(i);a.setName(c,r+t,this.isLocalHuman(),o),this._nameNode.name=r,this.updateNamePosition(),this.setCountry(i),this.setCountryFlagFrame(c),this.setDangerous(!1),this.setWarnning(!1)},t.prototype.hiddenCarUI=function(){this._nameNode&&(this._nameNode.emit("hide"),this.animation.node.active=!1,this.speedVFX.active=!1,this.turboVFX.active=!1)},t.prototype.changeName=function(e){this._nameNode||(this._nameNode=cc.instantiate(this.name_prefab),this._nameNode.parent=this.getParentPlayerNameNode()),this._nameNode.getComponent(k.default).changeName(!1,e),this._playername=e},t.prototype.updateNamePosition=function(){if(this._nameNode){this._changeParentForName||(this._nameCompent||(this._nameCompent=this._nameNode.getComponent(k.default)),this._nameLabelNode||(this._nameLabelNode=this._nameCompent.getLabel()),this._nameLabelNode.parent=this.getParentPlayerNameNode(),this._nameLabelNode.zIndex=cc.macro.MAX_ZINDEX,this._changeParentForName=!0);var e=this.getWorldPosition();this._nameNode.position=this._nameNode.parent.convertToNodeSpaceAR(cc.v3(e.x,e.y-this.node.height*this.node.scaleX/2-15,0)),this._changeParentForName&&(this._nameLabelNode.position=this._nameNode.position)}},t.prototype.getPlayerName=function(){return this._playername},t.prototype.setPlayerID=function(e){this.netID=e},t.prototype.getPlayerID=function(){return this.netID},t.prototype.getDistanceNextPoint=function(){return cc.Vec2.distance(this.getWorldPosition(),this.getNextPointPosition())},t.prototype.getTimeCurrentLap=function(){return 0==this.bestLapTime||this.HasStopped()?this.currentLapTime:this.currentLapTime=Math.ceil(Date.now()-this.currentLapStartTimestamp-w.Main.inst.getSleepingTime())},t.prototype.stop=function(){this.setCarSate(l.DEACCELERATION)},t.prototype.HasStopped=function(){return this.isKickOut()||this.HasFinished()},t.prototype.HasFinished=function(){return this._finishedRace},t.prototype.getCurrentLap=function(){return this._currentLap},t.prototype.changeCarSkin=function(e){-1==H.ConstConfig.PARAMS.SKINS.indexOf(e)&&(e=H.ConstConfig.PARAMS.SKINS[0]),this._skinID=e,null!=this.animation&&this.animation.changeSkin(e)},t.prototype.chooseRandomSkin=function(){var e=z.default.randomFromTo(0,H.ConstConfig.PARAMS.SKINS.length-1);return H.ConstConfig.PARAMS.SKINS[e]},t.prototype.isLocallyControlledBot=function(){return!1},t.prototype.isLocalHuman=function(){return!1},t.prototype.isGodMode=function(){return!1},t.prototype.isRemote=function(){return!1},t.prototype.getCurStateData=function(){var e=A.PlayerState.create({stateMsgID:this.nextCurStateMsgID,netID:this.netID,pos:{x:parseFloat(this.getWorldPosition().x.toFixed(3)),y:parseFloat(this.getWorldPosition().y.toFixed(3))},veloc:{x:parseFloat(this.getVelocity().x.toFixed(3)),y:parseFloat(this.getVelocity().y.toFixed(3))},loop:this.isLooping,speed:this._speedForce,angle:parseFloat((this.node.angle%360).toFixed(3)),totalTime:this.getTotalRaceTime(),lap:this._currentLap,Cpoint:this._currentCheckPointIndex,FRace:this._finishedRace,stop:this.HasStopped(),timeLap:this.getCurrentLapTime(),fardistance:this.getDistance()});return this.nextCurStateMsgID++,e},Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile},set:function(e){this._isMobile=e},enumerable:!1,configurable:!0}),t.prototype.getOwner=function(){return K.default.inst.getLocalPlayer().getPlayerName()},t.prototype.setSlowMode=function(e){this.slowRate=e,this.pausedRaceTime=this.getTotalRaceTime(),this.raceStartTimestamp=Date.now()},t.prototype.cheatTime=function(){this.raceTime=18e4},t.prototype.getTotalTimeRace=function(){return Date.now()-this.raceStartTimestamp},t.prototype.kickPlayer=function(){this._nameNode.getComponent(k.default).kickout(),this.raceStopTimestamp=Date.now(),this._isKickOut=!0,this.playSound(M.AudioClips.eliminate_sfx)},t.prototype.isKickOut=function(){return this._isKickOut},t.prototype.tapRight=function(){N.default.inst.isDisableControl()||this.setDirection(c.RIGHT)},t.prototype.tapLeft=function(){N.default.inst.isDisableControl()||this.setDirection(c.LEFT)},t.prototype.tapIdle=function(){this.setDirection(c.NONE)},t.prototype.markedAsKick=function(){this._markedKicked=!0},t.prototype.isMarkedAsKick=function(){return this._markedKicked},t.prototype.setNameColor=function(e){this._nameNode||(this._nameNode=cc.instantiate(this.name_prefab),this._nameNode.parent=this.getParentPlayerNameNode()),this._nameNode.getComponent(k.default).setColor(e)},t.prototype.playSound=function(e,t,o,n){if(void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===n&&(n=B.FADE.NA),this.isLocalHuman()||this.isSpied())return M.default.inst.playSFX(e,t,o,n)},t.prototype.stopSound=function(e){(this.isLocalHuman()||this.isSpied())&&M.default.inst.stopSFX(e)},t.prototype.isPlaying=function(e){return!(!this.isLocalHuman()&&!this.isSpied())&&M.default.inst.isPlayingSFX(e)},t.prototype.stopAllSFX=function(){if(this.isLocalHuman()||this.isSpied()){M.default.inst.stopAllSFX();for(var e=0;e<=M.AudioClips.warning_sfx;e++)M.default.inst.stopSFXByChannel(e)}},t.prototype.setParentNode=function(e){this.node.parent=e,this._optimizeVFX&&(this.speedVFX.parent.parent=e,this.turboVFX.parent.parent=e)},t.prototype.setKickedLap=function(e){this._kickLap=e},t.prototype.isDangerous=function(){return this._isDangerous},t.prototype.setDangerous=function(e){this._isDangerous!=e&&(this._isDangerous=e,this._nameNode.getComponent(k.default).setDangerous(e))},t.prototype.setWarnning=function(e){this._isWarnigIcon!=e&&(this._isWarnigIcon=e,this._nameNode.getComponent(k.default).setWarnning(e))},t.prototype.setBatchGroup=function(e){this._batchGroup=e},t.prototype.getBatchGroup=function(){return this._batchGroup},t.prototype.getBoostBaseBatch=function(){return this._parameter.BOOST_BASE_BATCH[this._batchGroup]},t.prototype.getSlowBaseBatch=function(){return this._parameter.SLOW_BASE_BATCH[this._batchGroup]},t.prototype.enableFollowHuman=function(e){this._followHuman=e},t.prototype.isFollowHuman=function(){return this._followHuman},t.prototype.setIntelligence=function(e){this._AI_intelligence=e},t.prototype.setParentPlayerNameNode=function(e){this.parentPlayerNameNode=e},t.prototype.getParentPlayerNameNode=function(){return this.parentPlayerNameNode},t.prototype.setStartPointIndex=function(e){this._startPointIndex=e},t.prototype.getStartPointIndex=function(){return this._startPointIndex},t.prototype.hasDisconnected=function(){return!1},t.prototype.enableBot=function(){},t.prototype.isSpied=function(){return this._isSpied},t.prototype.setSpied=function(e){this._isSpied&&!e&&(this.stopAllSFX(),this.engineSound&&this.engineSound.stopEngineSound()),this._isSpied=e},t.prototype.isARemoteBot=function(){return!1},t.prototype.getCarSkin=function(){return this._skinID},t.prototype.getTotalRaceTime=function(){return((this.HasStopped()?this.raceStopTimestamp:Date.now())-this.raceStartTimestamp)/this.slowRate+this.pausedRaceTime},t.prototype.getCurrentLapTime=function(){return this.lapStopTimeStamp-this.currentLapStartTimestamp},t.prototype.getBestLapTime=function(){return this.bestLapTime},a([J(W.default)],t.prototype,"animation",void 0),a([J(cc.Boolean)],t.prototype,"_cheatNitro",void 0),a([J(cc.Prefab)],t.prototype,"name_prefab",void 0),a([J(cc.Node)],t.prototype,"tire_one",void 0),a([J(cc.Node)],t.prototype,"tire_two",void 0),a([J(cc.Node)],t.prototype,"tire_three",void 0),a([J(cc.Node)],t.prototype,"tire_four",void 0),a([J(cc.Prefab)],t.prototype,"skidmarks",void 0),a([J(cc.Node)],t.prototype,"speedVFX",void 0),a([J(cc.Node)],t.prototype,"turboVFX",void 0),a([J(cc.Prefab)],t.prototype,"speedVFXPrefab",void 0),a([J(cc.Prefab)],t.prototype,"turboVFXPrefab",void 0),a([q],t)}(cc.Component);o.default=X,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../globals":"globals","../CarSelector/CarSkinSelecter":"CarSkinSelecter","../Config":"Config","../EngineSound":"EngineSound","../FTUE/FTUEManager":"FTUEManager","../Game":"Game","../GameCamera":"GameCamera","../Gate":"Gate","../GroupCollision/GroupCollisionManager":"GroupCollisionManager","../League/LeagueManager":"LeagueManager","../Main":"Main","../Maps/CheckPoint":"CheckPoint","../Maps/DrawMap":"DrawMap","../Maps/PathManager":"PathManager","../Network/NetClient":"NetClient","../Network/protos/tmb":"tmb","../PhysicsManager":"PhysicsManager","../PlayerName":"PlayerName","../Sharder/Turbo":"Turbo","../SoundChannel":"SoundChannel","../SoundManager":"SoundManager","../TrackElements/LoopTriggerAnimation":"LoopTriggerAnimation","../Tracking/TrackingManager":"TrackingManager","../TuningData":"TuningData","../UI/LapInfor":"LapInfor","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util","./CarAnim":"CarAnim","./CarParameters":"CarParameters","./PlayerController":"PlayerController"}],CarCheckPointInterface:[function(e,t,o){"use strict";cc._RF.push(t,"d4bb0WZ2tBCCrCsv+TEb7gv","CarCheckPointInterface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],CarParameters:[function(e,t,o){"use strict";cc._RF.push(t,"176a2IXVeNFzKoFHcoOTYie","CarParameters");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../TuningData"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MAX_NITRO_VALUE=200,t.MAX_SPEED_WITH_NITRO=2e4,t.NITRO_INCREASE_ACCELERATION_PAD=200,t.NITRO_INCREASE_ACCELERATION_PAD_PERCENT=50,t.NITRO_INCREASE_ACCELERATION_SPEED_DEFAULT=15e3,t.NITRO_DECREASE_DECELERATION_PAD=50,t.JUMP_BONUS_SPEED_PERCENT=20,t.NITRO_EARN_RATE=2,t.NITRO_REDUCE_RATE=2,t.NITRO_ACCELEARTOR_SPEED_RATE=.05,t.NITRO_DEACCELEARTOR_SPEED_RATE=.05,t.CAR_MAX_SPEED=15e3,t.CAR_ACCELERATION_SPEED_GEAR_1=.05,t.CAR_ACCELERATION_SPEED_GEAR_2=.01,t.CAR_ACCELERATION_SPEED_GEAR_3=.005,t.CAR_ACCELERATION_SPEED_GEAR_4=.001,t.CAR_ACCELERATION_SPEED_GEAR_5=1e-4,t.TORQUE_SPEED_MAX=7e3,t.TORQUE_SPEED_MIN=3e3,t.TORQUE_SPEED_RATE_TAP=6,t.TORQUE_SPEED_RATE_SWIPE=12,t.TORQUE_SPEED_RATE_WHEEL=18,t.DRIFT_FACTOR_STICKY=.2,t.DRIFT_FACTOR_SLIPPY=.94,t.MAX_STICKY_VELOCITY=10,t.RIGHT_VELOCITY_MAGNITUDE=150,t.CAR_MASS=200,t.CAMERA_ZOOM_EFFECT=!0,t.CAMERA_SHAKE_EFFECT=!0,t._cheatNitro=!1,t.SLIDE_ON_OIL_OBTACLES=5,t.CAR_ANIM_DEFAULT_SPEED=2e4,t.CARMERA_ZOOM_IN_LOOP=.65,t.SLIDE_DEFAULT=1,t.MIN_TARGET_GEAR_JUMP=2e4,t.BOOST_BASE_BATCH=[],t.SLOW_BASE_BATCH=[],t.WRONG_WAY_CATCH_UP_DURATION=2e3,t.MIN_SPEED_TRIGGER_VFX_SPEED=220,t.MAX_SPEED_TRIGGER_VFX_SPEED=260,t.DEACCELERATION_RATIO=1,t.oneRequest=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){},t.prototype.parseCarParameter=function(){var e=a.default.inst.getGameParameters().carParams;this.MAX_NITRO_VALUE=e.maxNitroValue,this.MAX_SPEED_WITH_NITRO=e.maxSpeedNitro,this.NITRO_INCREASE_ACCELERATION_PAD=e.increaseAccelerationPad,this.NITRO_INCREASE_ACCELERATION_PAD_PERCENT=e.increaseAccelerationPadPercent,this.NITRO_INCREASE_ACCELERATION_SPEED_DEFAULT=e.increaseAccelerationSpeedDefault,this.NITRO_DECREASE_DECELERATION_PAD=e.decreaseDecelerationPad,this.JUMP_BONUS_SPEED_PERCENT=e.jumpBonusSpeedPercent,this.NITRO_EARN_RATE=e.nitroEarnRate,this.NITRO_REDUCE_RATE=e.nitroReduceRate,this.NITRO_ACCELEARTOR_SPEED_RATE=e.nitroAccelerationSpeedRate,this.NITRO_DEACCELEARTOR_SPEED_RATE=e.nitroDecelerationSpeedRate,this.CAR_MAX_SPEED=e.carMaxSpeed,this.MIN_SPEED_TRIGGER_VFX_SPEED=this.CAR_MAX_SPEED,this.MAX_SPEED_TRIGGER_VFX_SPEED=this.CAR_MAX_SPEED,this.CAR_ACCELERATION_SPEED_GEAR_1=e.accelerationSpeedGear1,this.CAR_ACCELERATION_SPEED_GEAR_2=e.accelerationSpeedGear2,this.CAR_ACCELERATION_SPEED_GEAR_3=e.accelerationSpeedGear3,this.CAR_ACCELERATION_SPEED_GEAR_4=e.accelerationSpeedGear4,this.CAR_ACCELERATION_SPEED_GEAR_5=e.accelerationSpeedGear5,this.TORQUE_SPEED_MAX=e.torqueSpeedMax,this.TORQUE_SPEED_MIN=e.torqueSpeedMin,this.TORQUE_SPEED_RATE_TAP=e.torqueSpeedRateTap,this.TORQUE_SPEED_RATE_SWIPE=e.torqueSpeedRateSwipe,this.TORQUE_SPEED_RATE_WHEEL=e.torqueSpeedRateWheel,this.DRIFT_FACTOR_STICKY=e.driftFactorSticky,this.DRIFT_FACTOR_SLIPPY=e.driftFactorSlippy,this.MAX_STICKY_VELOCITY=e.maxStickVelocity,this.RIGHT_VELOCITY_MAGNITUDE=e.rightVelocityMagnitude,this.CAR_MASS=e.carMass,this.CAMERA_ZOOM_EFFECT=e.enableZoomEffect,this.CAMERA_SHAKE_EFFECT=e.enableShakeEffect,this.SLIDE_ON_OIL_OBTACLES=e.slideOnOil,this.SLIDE_DEFAULT=e.slideDefault,this.CAR_ANIM_DEFAULT_SPEED=e.carAnimDefaultSpeed,this.CARMERA_ZOOM_IN_LOOP=e.carmeraZoomInLoop,this.MIN_TARGET_GEAR_JUMP=e.minTargetGearJump,this.BOOST_BASE_BATCH=e.boostBaseBatch,this.SLOW_BASE_BATCH=e.slowBaseBatch,this.WRONG_WAY_CATCH_UP_DURATION=e.wrongWayCatchupDuration,this.DEACCELERATION_RATIO=e.deaccelerationRatio},t.prototype.update=function(){!this.oneRequest&&a.default.inst&&a.default.isLoaded()&&(this.parseCarParameter(),this.oneRequest=!0)},i([l({tooltip:"Max Nitro Value that a car can have"})],t.prototype,"MAX_NITRO_VALUE",void 0),i([l({tooltip:"Max Speed of Car when using Nitro boost - Must be larger than CAR_MAX_SPEED"})],t.prototype,"MAX_SPEED_WITH_NITRO",void 0),i([l({tooltip:"Nitro Value increase each time you enter Accleration PAD"})],t.prototype,"NITRO_INCREASE_ACCELERATION_PAD",void 0),i([l({tooltip:"The speed you will boosted if you enter Boost Pad"})],t.prototype,"NITRO_INCREASE_ACCELERATION_PAD_PERCENT",void 0),i([l({tooltip:"The X speed you will have change on the boost PAD"})],t.prototype,"NITRO_INCREASE_ACCELERATION_SPEED_DEFAULT",void 0),i([l({tooltip:"Nitro Value PERCENT decrease each time you enter Deceleration PAD"})],t.prototype,"NITRO_DECREASE_DECELERATION_PAD",void 0),i([l({tooltip:"Bonus speed when you Jump"})],t.prototype,"JUMP_BONUS_SPEED_PERCENT",void 0),i([l({tooltip:"How fast of Nitro bar will be recharged"})],t.prototype,"NITRO_EARN_RATE",void 0),i([l({tooltip:"How fast of Nitro bar will be empty - When car is using Nitro"})],t.prototype,"NITRO_REDUCE_RATE",void 0),i([l,l({tooltip:"How fast of car speed when using Nitro boost"})],t.prototype,"NITRO_ACCELEARTOR_SPEED_RATE",void 0),i([l({tooltip:"How slow of car speed when Car has finished using Nitro, change to normal speed"})],t.prototype,"NITRO_DEACCELEARTOR_SPEED_RATE",void 0),i([l,l({tooltip:"Max Speed of Car"})],t.prototype,"CAR_MAX_SPEED",void 0),i([l({tooltip:"Acceleration of Gear 1"})],t.prototype,"CAR_ACCELERATION_SPEED_GEAR_1",void 0),i([l({tooltip:"Acceleration of Gear 2"})],t.prototype,"CAR_ACCELERATION_SPEED_GEAR_2",void 0),i([l({tooltip:"Acceleration of Gear 3"})],t.prototype,"CAR_ACCELERATION_SPEED_GEAR_3",void 0),i([l({tooltip:"Acceleration of Gear 4"})],t.prototype,"CAR_ACCELERATION_SPEED_GEAR_4",void 0),i([l({tooltip:"Acceleration of Gear 5"})],t.prototype,"CAR_ACCELERATION_SPEED_GEAR_5",void 0),i([l({tooltip:"Max anguar force - For car turing"}),l],t.prototype,"TORQUE_SPEED_MAX",void 0),i([l({tooltip:"Min anguar force - For car turing - Car stops but still can be turned (roation)"})],t.prototype,"TORQUE_SPEED_MIN",void 0),i([l({tooltip:"for TAP Control: speed of rotation increase when changing car"})],t.prototype,"TORQUE_SPEED_RATE_TAP",void 0),i([l({tooltip:"for SWIPE Control :speed of rotation increase when changing car"})],t.prototype,"TORQUE_SPEED_RATE_SWIPE",void 0),i([l({tooltip:"for WHEEL Control: speed of rotation increase when changing car"})],t.prototype,"TORQUE_SPEED_RATE_WHEEL",void 0),i([l({min:0,max:1,tooltip:"Min 0.0 - Max 1 : Must be less than DRIFT_FACTOR_SLIPPY value"})],t.prototype,"DRIFT_FACTOR_STICKY",void 0),i([l({min:.2,max:1,tooltip:"Min 0.0 - Max 1 : Increase drift felling"})],t.prototype,"DRIFT_FACTOR_SLIPPY",void 0),i([l({tooltip:"Magnitude of right velocity"})],t.prototype,"MAX_STICKY_VELOCITY",void 0),i([l({tooltip:"Condition of skidmark appears, car is moved to right when turning in high speed"})],t.prototype,"RIGHT_VELOCITY_MAGNITUDE",void 0),i([l({tooltip:"Car Mass, when car is turning, speed will decrease by Car Mas"})],t.prototype,"CAR_MASS",void 0),i([l({tooltip:"Camera Zoom Effect"})],t.prototype,"CAMERA_ZOOM_EFFECT",void 0),i([l({tooltip:"Camera Shake Effect"})],t.prototype,"CAMERA_SHAKE_EFFECT",void 0),i([l(cc.Boolean)],t.prototype,"_cheatNitro",void 0),i([l({tooltip:"Obtacle slide number"})],t.prototype,"SLIDE_ON_OIL_OBTACLES",void 0),i([l({tooltip:"Default speed to play full Jump animation with timescale = 1"})],t.prototype,"CAR_ANIM_DEFAULT_SPEED",void 0),i([l({tooltip:"Default speed to play full Jump animation with timescale = 1"})],t.prototype,"MIN_TARGET_GEAR_JUMP",void 0),o=i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../TuningData":"TuningData"}],CarProgressController:[function(e,t,o){"use strict";cc._RF.push(t,"fd4b55U4CBNo5LO+wrVpTb0","CarProgressController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.btnWatchADs=null,t.progressLabel=null,t._progressCompletedCB=null,t.loadedPercent=null,t}return r(t,e),t.prototype.onLoad=function(){this.node.on("progressed",this.onProgressed,this),this.loadedPercent=0},t.prototype.update=function(e){this.progressBar.progress<this.loadedPercent&&(this.progressBar.progress=Math.min(this.progressBar.progress+.5*e,this.loadedPercent)),this.progressBar.progress>this.loadedPercent&&(this.progressBar.progress=Math.max(this.progressBar.progress-.5*e,this.loadedPercent)),this._progressCompletedCB&&100==Math.round(100*this.progressBar.progress)&&(this._progressCompletedCB(),this._progressCompletedCB=null)},t.prototype.onProgressed=function(e,t,o,n){o||(this.progressBar.progress=e/t),this.loadedPercent=e/t,this.progressLabel.string=e+"/"+t,n&&(this._progressCompletedCB=n)},i([l(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([l(cc.Button)],t.prototype,"btnWatchADs",void 0),i([l(a.NgcLabelLocalized)],t.prototype,"progressLabel",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],CarSkinItem:[function(e,t,o){"use strict";cc._RF.push(t,"d74acyhPo9KlIpsCKm5FyJx","CarSkinItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../UserInfo"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.tapToPlay=null,t.currentOption=null,t.lockedIcon=null,t.carSelectToggle=null,t}return r(t,e),t.prototype.init=function(e,t,o){this.sprite=this.node.getChildByName("Skin").getComponent(cc.Sprite),this.sprite.spriteFrame=e,this.tapToPlay=t,this.currentOption=o},t.prototype.updateToggleUI=function(){a.UserInfo.curSkin===this.itemID?this.carSelectToggle.isChecked=!0:this.carSelectToggle.isChecked=!1},i([l(cc.Sprite)],t.prototype,"sprite",void 0),i([l(cc.Node)],t.prototype,"tapToPlay",void 0),i([l(cc.Node)],t.prototype,"currentOption",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../UserInfo":"UserInfo"}],CarSkinSelecter:[function(t,o,n){"use strict";cc._RF.push(o,"4b386+SyJZDn74/UM6tCNa5","CarSkinSelecter");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.CAR_TURBO_NUM=n.CAR_TURBO_TYPE=n.CAR_PODIUM_TYPE=void 0;var l,u,p=t("../Utils/ConstConfig"),d=t("../UserInfo"),f=t("../SoundManager"),h=t("./CarItems/CarSkinItem"),g=t("./CarItems/OwnedSkinItem"),y=t("../SpecialOffer/SpecialOffer"),m=t("./HaloTimeShader"),_=t("../ReScaleObject"),v=t("../../NanoGameCore/Core/nCSV"),S=t("../../NanoGameCore/Services/GameShop/GameShop"),N=t("../../NanoGameCore/Services/Inventory/Inventory"),b=t("../Main"),C=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),P=cc._decorator,I=P.ccclass,w=P.property;(function(e){e[e.GROUP_1=0]="GROUP_1",e[e.GROUP_2=1]="GROUP_2",e[e.GROUP_3=2]="GROUP_3",e[e.GROUP_4=3]="GROUP_4",e[e.GROUP_5=4]="GROUP_5"})(n.CAR_PODIUM_TYPE||(n.CAR_PODIUM_TYPE={})),function(e){e.NA="NA",e.STREAK="Streak",e.HEART="Heart",e.BLAZE="Blaze",e.BLAZESPARKLE="BlazeSparkle",e.SPARKLE="Sparkle",e.SHOCKS="Shocks"}(l=n.CAR_TURBO_TYPE||(n.CAR_TURBO_TYPE={})),function(e){e[e.SPARKLE=0]="SPARKLE",e[e.HEART=1]="HEART",e[e.BLAZE=2]="BLAZE",e[e.BLAZESPARKLE=3]="BLAZESPARKLE",e[e.SHOCKS=4]="SHOCKS",e[e.NA=5]="NA",e[e.STREAK=6]="STREAK"}(u=n.CAR_TURBO_NUM||(n.CAR_TURBO_NUM={}));var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skinItem=null,t.contentNode=null,t.scrollView=null,t.earnByDailyRewardNode=null,t.earnByOfferNode=null,t.earnByCoinNode=null,t.earnByAdsNode=null,t.tapToPlayNode=null,t.lockedIcon=null,t.loadingIcon=null,t.turbos=[],t.haloFrontSpr=null,t.haloBackSpr=null,t.haloSquarePS=[],t.Materials_Halo=[],t.matDissolve=[],t.carSelectToggle=null,t.skinIDList=[],t._ownedCarTextures={},t._curPageIndex=0,t._curOption=null,t.isNeedReload=!1,t._carSkinItemList=[],t._timeClick=0,t._DELAY_TIME=600,t._startSize=0,t._endSize=0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){return c(this,void 0,void 0,function(){return s(this,function(){return o.inst=this,[2]})})},t.init=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return 0!=o._allCarTextures.length||b.Main.inst.isFTUE()?[3,2]:[4,o.loadCarTable()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.loadCarTable=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return C.NgcBuildConfig.offlineMode?o.finishedLoadCarSkins?[3,2]:[4,new Promise(function(e){cc.resources.load(p.ConstConfig.CAR_SKINS_TABLE,cc.TextAsset,function(t,n){if(t||!n)cc.log(t);else{cc.log(n);var r=v.nCSV.parseTable(n.text);o.parse(r)}e()})})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.parse=function(e){o.finishedLoadCarSkins||(e.forEach(function(e){if(e.itemID){var t={carID:e.itemID,carGroup:e.podiumType,carTurboType:e.turbo,carSpriteUrl:e.picture,carSprite:null,carColor:e.color};o.s_allCarSkins.push(t)}}),o.loadTexture())},t.prototype.start=function(){this.node.on("onSelect",this.onSelect),this.disableHaloEffect(),o.finishedLoadCarSkins&&this.loadDisplaySkins()},t.loadTexture=function(){return c(this,void 0,void 0,function(){var e,t,n;return s(this,function(r){switch(r.label){case 0:return o.useAtlas?[4,new Promise(function(e){cc.resources.load(p.ConstConfig.CAR_TEXTURE_ATLAS_FILE,cc.SpriteAtlas,function(t,n){if(t)return cc.log("er",t),void cc.log("spriteAtlas",n);for(var r=0;r<o.s_allCarSkins.length;r++){var i=o.s_allCarSkins[r];if(""!=i.carSpriteUrl){var a=n.getSpriteFrame(i.carID);o._allCarTextures[i.carID]=a}}e()})})]:[3,2];case 1:return r.sent(),[3,6];case 2:e=function(e){var n,r;return s(this,function(i){switch(i.label){case 0:return n=t.s_allCarSkins[e],""==(r=n.carSpriteUrl)?[2,"continue"]:[4,new Promise(function(e){cc.resources.load(r,cc.SpriteFrame,function(t,r){t?cc.error(t):(o._allCarTextures[n.carID]=r,e())})})];case 1:return i.sent(),[2]}})},t=this,n=0,r.label=3;case 3:return n<this.s_allCarSkins.length?[5,e(n)]:[3,6];case 4:r.sent(),r.label=5;case 5:return n++,[3,3];case 6:return o.finishedLoadCarSkins=!0,[2]}})})},t.prototype.loadDisplaySkins=function(){cc.error("Load"),C.NgcBuildConfig.offlineMode||y.default.inst.init(),this.addLockedItem(),this.addOwnedItem(),this.scrollToCurrentSkin()},t.prototype.addLockedItem=function(){var e,t;for(var n in d.UserInfo.ownedSkins,S.NgcGameShop.inst.shopTable){var r=void 0,i=void 0;e=S.NgcGameShop.inst.getItems(n)[0],t=N.NgcInventory.inst.objectTypeTable[e.itemID],this.skinIDList.indexOf(e.itemID)>-1||t.type===p.ConstConfig.INVENTORY.TYPE.EQUIPPABLE&&((r=(i=cc.instantiate(this.skinItem)).addComponent(g.default)).init(o._allCarTextures[e.itemID],null,this.tapToPlayNode,e.itemID),r.lockedIcon=this.lockedIcon,r.carSelectToggle=this.carSelectToggle,this.scrollView.addPage(i),this.skinIDList.push(e.itemID),this._carSkinItemList.push(r))}},t.prototype.addOwnedItem=function(){for(var e=d.UserInfo.ownedSkins,t=0;t<e.length;t++)if(null==this._ownedCarTextures[e[t]]&&(this._ownedCarTextures[e[t]]=o._allCarTextures[e[t]]),!(this.skinIDList.indexOf(e[t])>-1)){var n=cc.instantiate(this.skinItem);this.scrollView.addPage(n);var r=n.addComponent(g.default);r.init(this._ownedCarTextures[e[t]],null,this.tapToPlayNode,e[t]),r.lockedIcon=this.lockedIcon,r.carSelectToggle=this.carSelectToggle,this.skinIDList.push(e[t]),this._carSkinItemList.push(r)}},t.prototype.reset=function(){this.skinIDList.length=0,this._carSkinItemList.length=0,this.scrollView.removeAllPages(),this._ownedCarTextures={},this.hideAllOptions(),this.loadDisplaySkins(),C.NgcBuildConfig.offlineMode||y.default.inst.init(!0)},t.prototype.scrollToCurrentSkin=function(){var e=d.UserInfo.curSkin,t=this.skinIDList.indexOf(e);if(this.scrollView){this._carSkinItemList[this._curPageIndex].hide(),this._carSkinItemList[t].show(),this._curPageIndex=t,this.scrollView.scrollToPage(t,0),this.scrollView.setCurrentPageIndex(t);var n=null;o.s_allCarSkins.forEach(function(t){t.carID==e&&(n=t)}),this.showHaloEffect(n)}},t.prototype.onCarToggle=function(e){if(e.isChecked){var t=d.UserInfo.ownedSkins;this._curPageIndex=this.scrollView.getCurrentPageIndex();var o=this.skinIDList[this._curPageIndex];t.indexOf(o)>-1&&(d.UserInfo.curSkin=o)}else e.isChecked=!0},t.prototype.onCarSelect=function(e){var t=this;this._curPageIndex=e.getCurrentPageIndex();var n=this.skinIDList[this._curPageIndex];if(cc.log(n),f.default.inst.playSFX(f.AudioClips.selectMenu_sfx),e.getPages().forEach(function(e,o){o==t._curPageIndex?e.opacity=255:e.opacity=0}),!b.Main.inst.isFTUE()){var r=null;o.s_allCarSkins.forEach(function(e){e.carID==n&&(r=e)}),this.showHaloEffect(r)}},t.prototype.onSelect=function(){},t.prototype.onLeft=function(){if(Date.now()-this._timeClick>this._DELAY_TIME&&(this._timeClick=Date.now(),0!=this.scrollView.getPages().length)){var e=this._curPageIndex-1;this._carSkinItemList[this._curPageIndex].hide(),e<0&&(e=this.scrollView.getPages().length-1),this._curPageIndex=e,this._carSkinItemList[e].show(),this.scrollView.scrollToPage(e,.01)}},t.prototype.onRight=function(){if(Date.now()-this._timeClick>this._DELAY_TIME&&(this._timeClick=Date.now(),0!=this.scrollView.getPages().length)){var e=this._curPageIndex+1;this._carSkinItemList[this._curPageIndex].hide(),e>=this.scrollView.getPages().length&&(e=0),this._carSkinItemList[e].show(),this._curPageIndex=e,this.scrollView.scrollToPage(e,.01)}},t.prototype.update=function(){this.isNeedReload&&(this.loadDisplaySkins(),this.isNeedReload=!1)},t.getSpriteFrameFromID=function(e){return o._allCarTextures[e]},t.prototype.updateBoughtItem=function(e){var t=this.skinIDList.indexOf(e);if(t>-1){this._carSkinItemList[t].updateBoughtItemUI(),d.UserInfo.curSkin=e;var o=t;this.scrollView&&(this._carSkinItemList[this._curPageIndex].hide(),this._carSkinItemList[o].show(),this._curPageIndex=o,this.scrollView.scrollToPage(o,0),this.scrollView.setCurrentPageIndex(o))}},t.prototype.hideAllOptions=function(){this.earnByOfferNode.active=!1,this.earnByCoinNode.active=!1,this.earnByAdsNode.active=!1,this.lockedIcon.active=!1,this.carSelectToggle.node.active=!1},t.prototype.disableHaloEffect=function(){this.haloBackSpr.node.active=!1,this.haloFrontSpr.node.active=!1,this.turbos.forEach(function(e){e&&(e.active=!1)}),this.haloSquarePS.forEach(function(e){e&&(e.node.active=!1)})},t.prototype.showHaloEffect=function(e){var t=this,o=this.scrollView.getPages()[this.scrollView.getCurrentPageIndex()].getComponent(h.default);cc.log("#Skin Select",e);var n=e.carGroup-1,r=e.carTurboType,i=o.sprite.node.getComponent(m.default);i||(i=o.sprite.node.addComponent(m.default)),i.play(this.matDissolve[n],!1);var a=this.convertTuboType2num(r);this.haloBackSpr.node.active=!0,this.haloFrontSpr.node.active=!0,this.haloBackSpr.node.getComponent(m.default).play(this.Materials_Halo[n]),this.haloFrontSpr.node.getComponent(m.default).play(this.Materials_Halo[n]),this.turbos.forEach(function(o,n){if(o){o.active=!1;var i=o.getComponent(m.default);i&&i.stop(),n==a&&t.scheduleOnce(function(){o.getComponentsInChildren(cc.ParticleSystem).forEach(function(t){r!=l.HEART&&r!=l.SPARKLE||e.carColor&&(t.startColor=(new cc.Color).fromHEX(e.carColor),t.endColor=(new cc.Color).fromHEX(e.carColor)),t.resetSystem()}),i&&i.play(),e.carColor&&(o.color=(new cc.Color).fromHEX(e.carColor)),o.active=!0},.5)}}),this.haloSquarePS.forEach(function(e,o){e&&(o==n?(e.node.active=!0,0==t._startSize&&(t._startSize=e.startSize),0==t._endSize&&(t._endSize=e.endSize),e.startSize=t._startSize*_.default.inst.currentScale,e.endSize=t._endSize*_.default.inst.currentScale,e.resetSystem()):e.node.active=!1)})},t.prototype.convertTuboType2num=function(e){return cc.log("#type",e),e==l.BLAZE?u.BLAZE:e==l.BLAZESPARKLE?u.BLAZESPARKLE:e==l.SHOCKS?u.SHOCKS:e==l.HEART?u.HEART:e==l.SPARKLE?u.SPARKLE:e==l.NA?u.NA:e==l.STREAK?u.STREAK:void 0},t.s_allCarSkins=[],t._allCarTextures=[],t.inst=null,t.finishedLoadCarSkins=!1,t.useAtlas=!0,a([w(cc.Prefab)],t.prototype,"skinItem",void 0),a([w(cc.Node)],t.prototype,"contentNode",void 0),a([w(cc.PageView)],t.prototype,"scrollView",void 0),a([w(cc.Node)],t.prototype,"earnByDailyRewardNode",void 0),a([w(cc.Node)],t.prototype,"earnByOfferNode",void 0),a([w(cc.Node)],t.prototype,"earnByCoinNode",void 0),a([w(cc.Node)],t.prototype,"earnByAdsNode",void 0),a([w(cc.Node)],t.prototype,"lockedIcon",void 0),a([w(cc.Node)],t.prototype,"loadingIcon",void 0),a([w(cc.Node)],t.prototype,"turbos",void 0),a([w(cc.Sprite)],t.prototype,"haloFrontSpr",void 0),a([w(cc.Sprite)],t.prototype,"haloBackSpr",void 0),a([w(cc.ParticleSystem)],t.prototype,"haloSquarePS",void 0),a([w(cc.Material)],t.prototype,"Materials_Halo",void 0),a([w(cc.Material)],t.prototype,"matDissolve",void 0),a([w(cc.Toggle)],t.prototype,"carSelectToggle",void 0),o=a([I],t)}(cc.Component);n.default=T,cc._RF.pop()},{"../../NanoGameCore/Core/nCSV":"nCSV","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/Services/GameShop/GameShop":"GameShop","../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../Main":"Main","../ReScaleObject":"ReScaleObject","../SoundManager":"SoundManager","../SpecialOffer/SpecialOffer":"SpecialOffer","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig","./CarItems/CarSkinItem":"CarSkinItem","./CarItems/OwnedSkinItem":"OwnedSkinItem","./HaloTimeShader":"HaloTimeShader"}],CheckPoint:[function(e,t,o){"use strict";cc._RF.push(t,"d76ad8mLstHvpvbTrb6FMnW","CheckPoint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./PathManager"),c=e("../Utils/Util"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentPointIndex=-1,t.lastPointIndex=-1,t.currentLap=0,t.needToSendFirstPoint=!1,t.lastDistanceDelayFrame=0,t.currentDelayFrame=0,t.isWrongWay=!1,t.wrongWayCounter=0,t.maxFrameToWrongWayTrigger=60,t.lastDistance=0,t.isLocal=!1,t}return r(t,e),t.prototype.start=function(){},t.prototype.update=function(){if(a.default.getInst().isDone()){var e=cc.v2(this.node.parent.convertToWorldSpaceAR(this.node.position));this.needToSendFirstPoint||-1!=this.currentPointIndex||(this.node.emit("CheckPoint",this.currentPointIndex,this.lastPointIndex,this.NextPoint()),this.needToSendFirstPoint=!0);var t=0,o=this.NextPointIDList();if(-1!=(t=a.default.getInst().isEnterPoint(e,o))){this.lastPointIndex=this.currentPointIndex,this.currentPointIndex=t;var n=this.NextPointIDList();if(o.length>1){var r=cc.Vec2.distance(e,cc.v2(a.default.getInst().get(n[0])));t=cc.Vec2.distance(e,cc.v2(a.default.getInst().get(n[1])))>r?n[0]:n[1]}else t=n[0];t=n[c.default.randomFromTo(0,n.length-1)];var i=a.default.getInst().get(t);this.node.emit("CheckPoint",this.currentPointIndex,this.lastPointIndex,i),this.currentPointIndex==a.default.getInst().getAll().length-1&&(this.currentPointIndex=-1,this.currentLap++,this.node.emit("FinishLap",this.currentLap))}var s=cc.v2(a.default.inst.get(o[0])),l=cc.Vec2.distance(e,s);l>this.lastDistance?this.wrongWayCounter++:this.wrongWayCounter--,this.wrongWayCounter=cc.misc.clampf(this.wrongWayCounter,0,this.maxFrameToWrongWayTrigger),this.lastDistance=l,this.wrongWayCounter==this.maxFrameToWrongWayTrigger?(this.isWrongWay=!0,this.node.emit("WrongWay")):0==this.wrongWayCounter&&(this.isWrongWay=!1,this.node.emit("RightWay"))}},t.prototype.resetWrongWayCounter=function(){this.wrongWayCounter=0},t.prototype.NextPoint=function(){return a.default.getInst().get(this.currentPointIndex+1)},t.prototype.NextPointIDList=function(){return a.default.getInst().getNextAblePointList(this.currentPointIndex)},t.prototype.isCurrentPointFork=function(){return a.default.getInst().isCurrentPointFork(this.currentPointIndex)},i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../Utils/Util":"Util","./PathManager":"PathManager"}],CoinSkinItem:[function(t,o,n){"use strict";cc._RF.push(o,"a5475sbp91E1LzV03aqRcqM","CoinSkinItem");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),u=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),p=t("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),d=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),f=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),h=t("../../../NanoGameCore/Services/Ads/Ads"),g=t("../../../NanoGameCore/Services/GameShop/GameShop"),y=t("../../../NanoGameCore/Services/Inventory/Inventory"),m=t("../../Dialog/GetMoreCoinDialog/GetMoreCoinDialog"),_=t("../../Dialog/InsufficientDialog/InsufficientDialog"),v=t("../../Dialog/RewardAnimationDialog/RewardAnimationDialog"),S=t("../../Tracking/TrackingManager"),N=t("../../UserInfo"),b=t("../../Utils/ConstConfig"),C=t("../CarSkinSelecter"),P=t("./CarSkinItem"),I=cc._decorator,w=I.ccclass,T=(I.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isLock=!0,t}return i(t,e),t.prototype.init=function(t,o,n,r){e.prototype.init.call(this,t,o,n,null),this.bundleID=r,this.itemID=g.NgcGameShop.inst.getItems(this.bundleID)[0].itemID,this._loadingNode=this.currentOption.getChildByName("loading_icon"),this._priceNode=this.currentOption.getChildByName("PriceLayout"),this._loadingTween=cc.tween(this._loadingNode).by(.5,{angle:-90}).repeatForever()},t.prototype.btnBuyOnClicked=function(){var e;return c(this,void 0,void 0,function(){var t,o,n,r,i,a;return s(this,function(c){switch(c.label){case 0:return g.NgcGameShop.inst.getPrices(this.bundleID)[0].value>N.UserInfo.curCoin?(t=null===(e=p.default.inst)||void 0===e?void 0:e.hasAds(h.AdsType.VideoReward),o=N.UserInfo.getNumValue(b.ConstConfig.SAVE_KEY.TIME_WATCH_ADS_GET_MORE),n=Date.now()-o>=3e5,t&&n?[4,l.NgcDialogManager.createDialog(m.default.dialogType,m.default.urlPrefab,"")]:[3,2]):[3,5];case 1:return i=c.sent(),a=i.getComponent(m.default),r=b.ConstConfig.NEC_BONUS,a.init(r,function(){},function(){N.UserInfo.addCoin(b.ConstConfig.CURRENCY.SOURCE.NOT_ENOUGH,r)}),a.show(),[3,4];case 2:return[4,l.NgcDialogManager.createDialog(_.default.dialogType,_.default.urlPrefab,"")];case 3:i=c.sent(),(a=i.getComponent(_.default)).init(f.NgcLocalizedManager.t("TMB_NOT_ENOUGH_COIN").text),a.show(),c.label=4;case 4:return[3,6];case 5:this.requestBuySkin(),c.label=6;case 6:return[2]}})})},t.prototype.requestBuySkin=function(){var e=this;this.enableLoading(!0),g.NgcGameShop.inst.buyBundle(this.bundleID,function(t,o){return c(e,void 0,void 0,function(){var e,n,r,i=this;return s(this,function(a){switch(a.label){case 0:return t?(cc.log("GAME SHOP: Request to buy "+this.bundleID+" failed: "+t),[4,l.NgcDialogManager.createDialog(u.NgcNoticeDialog.dialogType,u.NgcNoticeDialog.urlPrefab,u.NgcNoticeDialog.bundleName)]):[3,2];case 1:return a.sent().getComponent(u.NgcNoticeDialog).init(f.NgcLocalizedManager.t("TMB_ERROR").text,f.NgcLocalizedManager.t("TMB_TRANSACTION_FAILED").text,null,null),this.enableLoading(!1),[2];case 2:return cc.log("GAME SHOP: Request to buy "+this.bundleID+" success "+o),e=g.NgcGameShop.inst.getPrices(this.bundleID)[0],n=g.NgcGameShop.inst.getItems(this.bundleID)[0],r=y.NgcInventory.inst.objectTypeTable[n.itemID].type===b.ConstConfig.INVENTORY.TYPE.CURRENCY,y.NgcInventory.inst.forceFetchInventory().then(function(){N.UserInfo.updateInventoryWithPlatform().then(function(){return c(i,void 0,void 0,function(){var t,o,i;return s(this,function(a){switch(a.label){case 0:return[4,l.NgcDialogManager.createDialog(v.default.dialogType,v.default.urlPrefab,"")];case 1:return t=a.sent(),(o=t.getComponent(v.default)).initWithCarReward(C.default.getSpriteFrameFromID(n.itemID)),o.show(),N.UserInfo.curSkin=n.itemID,this.updateBoughtItemUI(),S.default.getInst().LogEvent_CurrencyExpense(b.ConstConfig.CURRENCY.SOURCE.CAR_PURCHASE,e.value,N.UserInfo.curCoin),i={type:"null",itemPurchaseID:n.itemID,itemPurchaseValue:n.count,itemSpentID:e.currency,itemSpentValue:e.value,purchaseNumber:1,starsBalance:N.UserInfo.curStars,coinsBalance:N.UserInfo.curCoin,isConsumable:r},S.default.getInst().LogEvent_BuyItem(i.type,i.itemPurchaseID,i.itemPurchaseValue,i.purchaseNumber,i.coinsBalance,i.starsBalance,i.itemSpentID,i.itemSpentValue,i.isConsumable),S.default.getInst().LogEvent_CarUnlockProgression(n.itemID,1,1,"Shop: Soft currency",N.UserInfo.curCoin),[2]}})})})}),[2]}})})})},t.prototype.updateBoughtItemUI=function(){this.enableLoading(!1),this.currentOption.active=!1,this.lockedIcon.active=!1,this.carSelectToggle.node.active=!1,this.carSelectToggle.isChecked=!0,this._isLock=!1},t.prototype.show=function(){if(this._isLock){this.currentOption.active=!0;var e=void 0,t=void 0;(e=this.currentOption.children[1].children[1])&&(t=e.getComponent(d.NgcLabelLocalized)),t&&(t.string=g.NgcGameShop.inst.getPrices(this.bundleID)[0].value.toString());var o=this.currentOption.getComponent(cc.Button),n=new cc.Component.EventHandler;n.target=this.node,n.component="CoinSkinItem",n.handler="btnBuyOnClicked",o.clickEvents.length=0,o.clickEvents.push(n),this.lockedIcon.active=!0}else this.currentOption.active=!1,this.carSelectToggle.node.active=!1,this.updateToggleUI(),this.lockedIcon.active=!1},t.prototype.hide=function(){this.carSelectToggle.node.active=!1,this.currentOption.active=!1},t.prototype.enableLoading=function(e){e?(this._loadingNode.active=!0,this._loadingTween.start(),this._priceNode.active=!1,this.currentOption.getComponent(cc.Button).enabled=!1):(this._loadingNode.active=!1,this._loadingTween.stop(),this._priceNode.active=!0,this.currentOption.getComponent(cc.Button).enabled=!0)},a([w],t)}(P.default));n.default=T,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/GameShop/GameShop":"GameShop","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../Dialog/GetMoreCoinDialog/GetMoreCoinDialog":"GetMoreCoinDialog","../../Dialog/InsufficientDialog/InsufficientDialog":"InsufficientDialog","../../Dialog/RewardAnimationDialog/RewardAnimationDialog":"RewardAnimationDialog","../../Tracking/TrackingManager":"TrackingManager","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../CarSkinSelecter":"CarSkinSelecter","./CarSkinItem":"CarSkinItem"}],ConfigAutogen:[function(e,t,o){"use strict";cc._RF.push(t,"ab99cHFx/lHIqVSKW0IRAfs","ConfigAutogen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return r(t,e),t.prototype.start=function(){},i([s(cc.Label)],t.prototype,"label",void 0),i([s],t.prototype,"text",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Config:[function(e,t,o){"use strict";cc._RF.push(t,"2908d3CUA1ESITMYRpy/vnj","Config");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.OFFLINE_MODE=a.NgcBuildConfig.offlineMode,t.USE_3D_CAR=!1,t.VERSION=a.NgcBuildConfig.buildVersionName,t.GAMESIZE="18.02 MB",t.CAMERA_FOLLOW=!1,t.MAP_PREFAB=!0,t.IS_FTUE=!0,i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig"}],ConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c3b71RnuDZLvKDpTIM4R2bE","ConfirmDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.content=null,t._callBackOk=null,t._callBackClose=null,t.listItem=[],t}return r(t,e),t.prototype.init=function(e,t,o,n){var r=this;this._callBackOk=o,this._callBackClose=n,this.listItem=t,this.content.removeAllChildren(),this.listItem.length>0&&this.listItem.forEach(function(e){cc.instantiate(e).parent=r.content}),this.titleLabel.string=e},t.prototype.okOnClick=function(){this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){"function"==typeof this._callBackClose&&this._callBackClose(),this.hide()},i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Node)],t.prototype,"content",void 0),i([s],t)}(a.NgcDialogBase);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase"}],ConstConfig:[function(e,t,o){"use strict";cc._RF.push(t,"81007HJ4aNIy64xPOXXbO+j","ConstConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.ConstConfig=void 0,o.ConstConfig={CROSS_PROMOTION:{GAME_NAME:"dunkshot",JSON_CONFIG_URL:"https://umc-static-content.upaidui.com/crosspromotion/cp_config.json",PREFAB_URL:{CROSS_PROM:"Prefabs/CrossPromotion/CrossSection",POPUP_PROM:"Prefabs/CrossPromotion/PopupSection",MARQUEE_PROM:"Prefabs/CrossPromotion/MarqueeSection",HIGHLIGHTED_PROM:"Prefabs/CrossPromotion/HighlightedSection"}},GROUP_NODE:{FIXED_POS_UI:"FixedPosUI"},TRACKING:{ITEM_NONE:"none",POINTCUT:{BANNER_MAINMENU:"banner_mainmenu",BANNER_SHOP:"banner_shop",BANNER_LEADERBOARD:"banner_leaderboard",BANNER_POSITIONBOARD:"banner_positionboard",BANNER_REWARD:"banner_reward",BANNER_PARTYROOM:"banner_partyroom",BANNER_LOADING:"banner_loading",BANNER_GAME:"banner_game",BANNER_REVIVE:"banner_revive",INTER_PREGAME:"inter_pregame",VIDEO_BOOSTER:"video_booster",VIDEO_MULTIPLY:"video_multiply",VIDEO_DAILY2X:"video_daily2x",VIDEO_SHOP:"video_shop",VIDEO_RIVIVE:"video_revive"}},SUBPACKAGE_NAME:{AUDIO:"01_Audio",FONTS:"09_Fonts",TEXTURE:"05_Texture",PREFABS:"02_Prefabs",SPINE:"Spine",EFFECT:"Effect",Anims:"Anims",dialog_realprize:"02_dialog_realprize"},SCENE:{GAME_SCENE:"GameScene",LOADING_SCENE:"LoadingScene"},PARAMS:{TIME_INVULNERABLE:15,SKINS:["carN10","car02a","car10a","car01a","car12a","car03a","car04a","car06a","car13a","car07a","car16a","car05a","car17a","car09a","car08a","car19a","car15a","carF01","carF02","carF03","carF04","carF05","carF06","carF07","carF08","carF09","carF10","car18a","car11a","car14a"],HAT_SLOTS:["acc_1","4_head"],DRESS_SLOTS:["5_body","5_hand_R","5_hand_L","5_leg_R","5_leg_L","L_sholder"],GLASSES_SLOTS:["acc_2","acc_3","acc_4","go_1"],SOUND_RADIUS:400,SOUND_MAX_VOLUME:.8,DEFAULT_COIN:100,FIX_SCREEN:cc.v2(640,960),URL_CHECK_COUNTRY:"https://www.cloudflare.com/cdn-cgi/trace",POS_EMOJI:cc.v2(50,50),SECRET_KEY:"123321",COIN_BONUS_VIDEO_REWARD:50},DEFAULT_FTUE_FLOW:"A",VFX_ZINDEX:50,BOT_ZINDEX:51,PALYER_ZINDEX:52,TURBO_ZINDEX:53,DIALOG_URLS:{NoticeDialog:"Prefabs/Dialogs/NoticeDialog",YesNoDialog:"Prefabs/Dialogs/YesNoDialog",ConfirmDialog:"Prefabs/Dialogs/ConfirmDialog",SelectionDialog:"Prefabs/Dialogs/SelectionDialog",TextboxDialog:"Prefabs/Dialogs/TextboxDialog",BuyGoldDialog:"Prefabs/Dialogs/BuyGoldDialog",LeaderBoardDialog:"Prefabs/Dialogs/LeaderBoardDialog",OptionDialog:"Prefabs/Dialogs/OptionDialog",SelectLanguageDialog:"Prefabs/Dialogs/SelectLanguage",ParamsDebugDialog:"Prefabs/Dialogs/ParamsDebugDialog",AlreadyActivatedBoosterDialog:"Prefabs/Dialogs/AlreadyActivatedBoosterDialog",MessageDialog:"Prefabs/Dialogs/MessageDialog",ShareDialog:"Prefabs/Dialogs/ShareDialog",RewardDialog:"Prefabs/Dialogs/RewardDialog",ConflictDialog:"Prefabs/Dialogs/ConflictDialog",RewardAnimationDialog:"Prefabs/Dialogs/RewardAnimationDialog",SelectControlDialog:"Prefabs/Dialogs/SelectControlDialog",GetMoreCoinDialog:"Prefabs/Dialogs/GetMoreCoinDialog",InsufficientDialog:"Prefabs/Dialogs/InsufficientDialog"},DEBUG_PREFAB:"Prefabs/Debug/DebugUI",SAVE_KEY:{MAP:"MAP_TMB",RANK:"RANK_TMB",BEST_TOTAL_TIME:"BEST_TOTAL_TIME_TMB",BEST_TIME_LAP:"BEST_TIME_LAP_TMB",PLAYEDMAP:"PLAYEDMAP_TMB",COUNTRY:"COUNTRY_TMB",RANK_PERCENT_COUNTRY:"RANK_WORL_WIDE_TMB",UNLOCKED_MAP:"UNLOCK_MAP_TMB",SECRET_KEY:"secretKey",CUR_BOOSTER:"CUR_BOOSTER_TMB",CUR_FACEBOOK_ID:"CUR_FACEBOOK_ID_TMB",CUR_SOCIAL_ID:"CUR_SOCIAL_ID_TMB",CUR_AVATAR_URL:"CUR_AVATAR_URL_TMB",CUR_OFFER:"CUR_OFFER_TMB",FACEBOOK_ACCESS_TOKEN:"FACEBOOK_ACCESS_TOKEN_TMB",GAME_RUNNING_SESSION:"GAME_RUNNING_SESSION_TMB",NUMBER_OF_ADS_WATCHED:"NUMBER_OF_ADS_WATCHED_TMB",NUMBER_OF_ADS_SESSION:"NUMBER_OF_ADS_SESSION_TMB",TIME_WATCH_ADS_GET_MORE:"TIME_WATCH_ADS_GET_MORE_TMB",BOUGHT_ADS_ITEM_TIMESTAMP:"BOUGHT_ADS_ITEM_TIMESTAMP_TMB",INTERSTITIAL_ADS_TIMESTAMP:"INTERSTITIAL_ADS_TIMESTAMP_TMB",SPECIAL_OFFER_ADS_TIMESTAMP:"SPECIAL_OFFER_ADS_TIMESTAMP_TMB",SPECIAL_OFFER_REFRESH_TIMESTAMP:"SPECIAL_OFFER_REFRESH_TIMESTAMP",IS_LOCAL_CLEAR:"IS_LOCAL_CLEAR_TMB",GAME_VERSION:"GAME_VERSION_TMB",A2HS:"isA2HS_TMB",UPDATE_SAVE_KEY_RETROFIT:"UPDATE_SAVE_KEY_RETROFIT",IS_ALREADY_CHANGED_NAME:"isAlreadyChangedName"},LEADER_BOARD_UI_URL:{leaderBoardUIPrefab:"CrossFeature/Prefabs/LeaderBoard/LeaderBoardUI",leaderBoardUIPCPrefab:"CrossFeature/Prefabs/LeaderBoard/LeaderBoardUI_PC"},POWERSCORE_TABLE:"Text/PowerScoreTable",CURRENCY_TABLE:"Text/Currency",MAP_TABLE:"Text/Map",CAR_SKINS_TABLE:"Text/CarIsometric",MAP_PREFAB_FOLDER:"Prefabs/map",MAP_PREFAB_FOLDER_FTUE:"FTUE/Prefabs/map",CAR_TEXTURE_FOLDER:"Texture/CarIsometric",CAR_TEXTURE_ATLAS_FILE:"Texture/CarIsometric/carIsometric",COIN:"COIN_TMB",STAR:"STAR_TMB",BEST_SCORE:"BEST_SCORE_TMB",POWER_SCORE:"POWER_SCORE_TMB",FTUE:"FTUE_TMB",FIRSTTIME_CLICKPLAY:"FIRSTTIME_CLICKPLAY_TMB",TOTAL_SESSIONS:"TOTAL_SESSIONS_TMB",IS_DAILYREWARD_ALREADY_SHOW:"IS_DAILYREWARD_ALREADY_SHOW_TMB",IS_ALREADY_UPDATE_OLD_BEST_SCORE:"IS_ALREADY_UPDATE_OLD_BEST_SCORE",IS_HARD_RESET_DATA:"IS_HARD_RESET_DATA",NUMBER_OF_ADS_WATCHED:"NUMBER_OF_ADS_WATCHED",NUMBER_OF_ADS_SESSION:"NUMBER_OF_ADS_SESSION",SKIN:"SKIN_TMB",FTUE_STEP:"FTUE_STEP_TMB",ITEMS_BOUGHT:"ITEMS_BOUGHT_TMB",MUSIC_OFF:"MUSIC_OFF_TMB",SOUND_OFF:"SOUND_OFF_TMB",USER_NAME_LOCAL:"USER_NAME_LOCAL_TMB",TOTAL_TIME_SPENT:"TOTAL_TIME_SPENT_TMB",CUR_BOOSTER:"CUR_BOOSTER_TMB",CONTROL_TYPE:"CONTROL_TYPE_TMB",OWNED_SKIN:"OWNED_SKIN_TMB",IN_PROGRESS_SKIN:"IN_PROGRESS_SKIN",LIST_OWNED_SKIN:["carN10"],CUR_LOCALIZATION_LANG:"CUR_LOCALIZATION_LANG_TMB",FACEBOOK_ACCESS_TOKEN:"FACEBOOK_ACCESS_TOKEN",LOCALIZATION_JSON_URL:"Json/Localization/Localization",SECRET_KEY:"secretKey",LOCALIZATION_LANG:{ARABIC:cc.sys.LANGUAGE_ARABIC,BULGARIAN:cc.sys.LANGUAGE_BULGARIAN,CHINESE:cc.sys.LANGUAGE_CHINESE,DUTCH:cc.sys.LANGUAGE_DUTCH,ENGLISH:cc.sys.LANGUAGE_ENGLISH,FRENCH:cc.sys.LANGUAGE_FRENCH,GERMAN:cc.sys.LANGUAGE_GERMAN,HUNGARIAN:cc.sys.LANGUAGE_HUNGARIAN,ITALIAN:cc.sys.LANGUAGE_ITALIAN,JAPANESE:cc.sys.LANGUAGE_JAPANESE,KOREAN:cc.sys.LANGUAGE_KOREAN,NORWEGIAN:cc.sys.LANGUAGE_NORWEGIAN,POLISH:cc.sys.LANGUAGE_POLISH,PORTUGUESE:cc.sys.LANGUAGE_PORTUGUESE,ROMANIAN:cc.sys.LANGUAGE_ROMANIAN,RUSSIAN:cc.sys.LANGUAGE_RUSSIAN,SPANISH:cc.sys.LANGUAGE_SPANISH,TURKISH:cc.sys.LANGUAGE_TURKISH,UKRAINIAN:cc.sys.LANGUAGE_UKRAINIAN,UNKNOWN:cc.sys.LANGUAGE_UNKNOWN,VIETNAM:"vn"},INVENTORY:{TYPE:{CURRENCY:"currency",EQUIPPABLE:"equippable",COMSUMABLE:"consumable"},CATEGORY:{SOFT_CURRENCY:"sort_currency",ADS_COUNTER:"ads_counter"},ITEM_ID:{COIN:"coin",STAR:"star"},EARN_BY:{SPECIAL:"special",ADS:"ads",DAILY_REWARD:"daily_reward",COIN:"coin"}},SHOP:{UNLOCK_ITEM_PRICE:100},MAX_LENGTH_NAME:9,MIN_PARTY_ROOM_PLAYERS:2,MAX_PARTY_ROOM_PLAYER:15,CURRENCY:{SOURCE:{GAME_END:"Game end",NOT_ENOUGH:"Not enough currency ad pointcut",GAME_END_MULTIPLY:"End of game multiply reward ad pointcut",DAILY_REWARD:"Daily reward ad pointcut",SPECIAL_OFFER:"Special Offer ad pointcut",GAME_START:"Game start",CAR_PURCHASE:"Car purchase"}},NEC_BONUS:250},cc._RF.pop()},{}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"bfe15/HTW9Cp4KMR9RZl5px","Const");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.GROUP_GROUND=2,t.CHECKPOINT_CIRCEL_RADIUS=190,t.TOTAL_OFFLINE_PLAYER=15,t.NOUPDATE_BOTSWITCH_DELAY_MS=1e3,i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],ControlHint:[function(e,t,o){"use strict";cc._RF.push(t,"d5d21cMgbtJJoH9cHOH5T9p","ControlHint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tapHint=null,t.spaceHint=null,t}return r(t,e),t.prototype.start=function(){var e=cc.sys.isMobile;this.tapHint.active=e,this.spaceHint.active=!e;var t=e?this.tapHint:this.spaceHint;cc.tween(t).delay(3).to(7,{opacity:0}).call(function(){t.active=!1}).start()},i([s(cc.Node)],t.prototype,"tapHint",void 0),i([s(cc.Node)],t.prototype,"spaceHint",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ControlPad:[function(e,t,o){"use strict";cc._RF.push(t,"38e79KPtvVCnpgpJnJnYW8N","ControlPad");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Main"),c=e("./Player/CarBase"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backGround=null,t.ball=null,t}return r(t,e),t.prototype.reset=function(){this.ball.x=0},t.prototype.updatePos=function(e){this.ball.x=230*e/90},t.prototype.update=function(){var e=a.Main.inst.getLocalPlayer();e&&null==e.controlPadNode&&e.controlType==c.CONTROLTYPE.SWIPE&&(cc.log("SWIPE MAPPED LOCAL"),e.controlPadNode=this.node)},i([u(cc.Node)],t.prototype,"backGround",void 0),i([u(cc.Node)],t.prototype,"ball",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Main":"Main","./Player/CarBase":"CarBase"}],Countdown:[function(e,t,o){"use strict";cc._RF.push(t,"6ed1dNbx45PH6g8UOhGHkdD","Countdown");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Game"),c=e("./Player/Player"),s=e("./Tracking/TrackingManager"),l=e("./League/LeagueManager"),u=e("./Player/PlayerController"),p=e("./Main"),d=e("./UserInfo"),f=e("./FTUE/FTUEManager"),h=e("./SoundManager"),g=e("./Maps/DrawMap"),y=e("./Gate"),m=e("./UI/LapInfor"),_=cc._decorator,v=_.ccclass,S=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.homeScale=1,t.ignoreUpdate=!1,t.gameQueueStartTS=0,t.lastStep=-1,t.timeOut=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,1==a.default.inst.isFirstUpdateFromServer&&(this.gameQueueStartTS=Date.now())},t.prototype.reset=function(){null!=this.timeOut&&clearTimeout(this.timeOut),this.ignoreUpdate=!1,this.lastStep=-1},t.prototype.displayBasedOnGameClock=function(e){var t=this,o=Math.floor((4-a.START_GAME_TIMEOUT+e)/a.default.COUNTDOWN_INTERVAL_SEC);console.log("#quy gameClockSec",e),o>4||!g.default.inst||g.default.inst&&!g.default.inst.hasGateComponent()||this.lastStep==o||-1==this.lastStep&&0!=o||(0==o?(this.lastStep,g.default.inst.node.emit("gate",o)):1==o?g.default.inst.node.emit("gate",o):2==o?g.default.inst.node.emit("gate",o):3==o&&(g.default.inst.node.emit("gate",o),3!=this.lastStep&&(a.default.inst.node.emit("go"),this.timeOut=setTimeout(function(){g.default.inst.node.emit("gate",y.default.GATE_RACING),t.ignoreUpdate=!0,cc.log("set time ount = true")},5e3))),this.setStepCount(o))},t.prototype.setStepCount=function(e){if(!(this.lastStep==e||e>=4)){if(this.lastStep=e,3==e)if(h.default.inst.playSFX(h.AudioClips.go_sfx,!1,!0),d.UserInfo.curFTUEStep<f.FTUE_STEP.FINISHED_ALL_FTUE){var t={roundID:a.default.inst.curGameNetID,humanPlayersInGame:u.default.inst.getRealPlayers(),currentFPS:p.Main.inst.fps,roundTime:(Date.now()-this.gameQueueStartTS)/1e3,carID:c.default.localPlayer._skinID,mapID:l.default.getSelectTrack().trackID,leagueID:l.default.getSelectTrack().trackTier,itemSpentID:"coin",itemSpentValue:0};s.default.getInst().LogEvent_PlayerClickedStartGame(t)}else t={roundID:a.default.inst.curGameNetID,humanPlayersInGame:u.default.inst.getRealPlayers(),currentFPS:p.Main.inst.fps,roundTime:(Date.now()-this.gameQueueStartTS)/1e3,carID:c.default.localPlayer._skinID,mapID:l.default.getSelectTrack().trackID,leagueID:l.default.getSelectTrack().trackTier,itemSpentID:"coin",itemSpentValue:l.default.inst.getCurLeague().entryFee},s.default.getInst().LogEvent_PlayerClickedStartGame(t);else h.default.inst.playSFX(h.AudioClips.countdown_sfx,!1,!0);m.default.inst.playTrackCarAnimation(!1,e)}},t.prototype.setHomeScale=function(){},t.prototype.start=function(){},t.prototype.update=function(){if(!this.ignoreUpdate&&!a.default.inst.hasRaceStarted()){var e=a.default.inst.getTotalGameTime();e<=a.START_GAME_TIMEOUT&&e>=a.START_GAME_TIMEOUT-5&&this.displayBasedOnGameClock(e)}},t.inst=null,o=i([v],t)}(cc.Component));o.default=S,cc._RF.pop()},{"./FTUE/FTUEManager":"FTUEManager","./Game":"Game","./Gate":"Gate","./League/LeagueManager":"LeagueManager","./Main":"Main","./Maps/DrawMap":"DrawMap","./Player/Player":"Player","./Player/PlayerController":"PlayerController","./SoundManager":"SoundManager","./Tracking/TrackingManager":"TrackingManager","./UI/LapInfor":"LapInfor","./UserInfo":"UserInfo"}],CountryFlagsManager:[function(e,t,o){"use strict";cc._RF.push(t,"e71bbwOSCZKxp7FQ1DVnUpo","CountryFlagsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcCountryFlagsManager=void 0;var a=e("../../Core/Utils"),c=e("./BuildConfig"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countriesFlagSpriteFrame=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this)},t.getLocalCountry=function(){var e=this;c.NgcBuildConfig.offlineMode||a.Utils.getHttp(this.url_check_country,{},function(t,o){t?console.error(t):e.setLocalCountry(o)})},t.setOnGetContryCompletedCallback=function(e){this.callBack=e},t.prototype.getFlagSpriteFrame=function(e){return e?(e=e.toUpperCase(),"CN"===o.localCountry&&["TW","HK","MO"].indexOf(e)>=0&&(e="CN"),e=e.toLowerCase(),this.countriesFlagSpriteFrame.getSpriteFrame(e)):null},t.prototype.getCountryCodes=function(){return a.Utils.getKeys(this.countriesFlagSpriteFrame._spriteFrames)},t.prototype.getRandomCountryCode=function(){return a.Utils.randomArr(this.getCountryCodes())},t.prototype.getRandomFlagSpriteFrame=function(){return a.Utils.randomArr(this.countriesFlagSpriteFrame.getSpriteFrames())},t.setLocalCountry=function(e){var t=e.split("\n");for(var o in t)if(t[o].indexOf("loc=")>=0){var n=t[o].replace("loc=","");n=n.toLowerCase(),this.localCountry=n}this.onGetCountryCompleted()},t.onGetCountryCompleted=function(){this.callBack&&this.callBack()},t.inst=null,t.localCountry="",t.callBack=null,t.url_check_country="https://www.cloudflare.com/cdn-cgi/trace",i([u(cc.SpriteAtlas)],t.prototype,"countriesFlagSpriteFrame",void 0),o=i([l],t)}(cc.Component);o.NgcCountryFlagsManager=p,cc._RF.pop()},{"../../Core/Utils":"Utils","./BuildConfig":"BuildConfig"}],CrossPromotionManager:[function(e,t,o){"use strict";cc._RF.push(t,"0f312rGpBVPHbFNYdxwOdkA","CrossPromotionManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/Util"),r=e("../Utils/ConstConfig"),i=e("./CrossSection"),a=e("./PopupSection"),c=e("./MarqueeSection"),s=e("./HighlightedSection"),l=function(){function e(){this.promGamesData={}}return e.getInstance=function(){return e.instance||(e.instance=new e,e.instance.init()),e.instance},e.prototype.init=function(){e.instance.crossSectionPrefab||cc.resources.load(r.ConstConfig.CROSS_PROMOTION.PREFAB_URL.CROSS_PROM,function(t,o){e.instance.crossSectionPrefab=o}),cc.resources.load(r.ConstConfig.CROSS_PROMOTION.PREFAB_URL.POPUP_PROM,function(t,o){e.instance.popupSectionPrefab=o}),cc.resources.load(r.ConstConfig.CROSS_PROMOTION.PREFAB_URL.MARQUEE_PROM,function(t,o){e.instance.marqueeSectionPrefab=o}),cc.resources.load(r.ConstConfig.CROSS_PROMOTION.PREFAB_URL.HIGHLIGHTED_PROM,function(t,o){e.instance.highlightedSectionPrefab=o})},e.prototype.loadJsonInfo=function(e){var t=this;cc.resources.load(r.ConstConfig.CROSS_PROMOTION.JSON_CONFIG_URL,function(o,i){t.configInfo=i,t.popupList=i.popup[r.ConstConfig.CROSS_PROMOTION.GAME_NAME],t.crossList=i.cross[r.ConstConfig.CROSS_PROMOTION.GAME_NAME],t.marqeeList=i.marquee[r.ConstConfig.CROSS_PROMOTION.GAME_NAME],t.highlightedList=i.highlighted[r.ConstConfig.CROSS_PROMOTION.GAME_NAME],t.allGameList=t.popupList,t.allGameList=n.default.union_arrays(t.allGameList,t.crossList),t.allGameList=n.default.union_arrays(t.allGameList,t.marqeeList),t.allGameList=n.default.union_arrays(t.allGameList,t.highlightedList),t.allGameList.forEach(function(e){t.promGamesData[e]={info:null,spriteFrames:{loaded:0,icon:null,qrcode:null,anim:[]}},t.promGamesData[e].info=i[e]}),e()})},e.prototype.loadAssetPromoteGame=function(e){var t=this;if(0==t.promGamesData[e].spriteFrames.loaded){t.promGamesData[e].spriteFrames.loaded=0;var o=t.promGamesData[e].info.frames+this.promGamesData[e].info.icon;cc.resources.load(o,function(o,n){t.promGamesData[e].spriteFrames.icon=new cc.SpriteFrame(n),t.promGamesData[e].spriteFrames.loaded+=1});var n=t.promGamesData[e].info.frames+this.promGamesData[e].info.qrcode;cc.resources.load(n,function(o,n){t.promGamesData[e].spriteFrames.qrcode=new cc.SpriteFrame(n),t.promGamesData[e].spriteFrames.loaded+=1}),t.promGamesData[e].spriteFrames.anim=[];for(var r=0;r<t.promGamesData[e].info.count;r++)t.promGamesData[e].spriteFrames.anim.push(null);var i=function(o){var n=t.promGamesData[e].info.frames+t.promGamesData[e].info.name+(o<10?"0":"")+o+t.promGamesData[e].info.ext;cc.loader.load(n,function(n,r){t.promGamesData[e].spriteFrames.anim[o]=new cc.SpriteFrame(r),t.promGamesData[e].spriteFrames.loaded+=1})};for(r=0;r<t.promGamesData[e].info.count;r++)i(r)}return this.promGamesData[e]},e.prototype.loadAssetPromoteAllGame=function(){var e=this;this.allGameList.forEach(function(t){e.loadAssetPromoteGame(t)})},e.prototype.createCrossSection=function(e){var t=this.loadAssetPromoteGame(e);if(t.info.count+2>t.spriteFrames.loaded)return console.log("spriteFrame of "+e+" is loading..."),null;var o=cc.instantiate(this.crossSectionPrefab).getComponent(i.default);return o.init(t),o},e.prototype.openCrossSectionPromote=function(e,t){e||(e=n.default.randomArr(this.crossList));var o=this.createCrossSection(e);return o&&(o.setCallBack(function(){}),o.show(t)),o},e.prototype.openPopupSectionPromote=function(e,t){if(this.popupSectionPrefab){e||(e=n.default.randomArr(this.crossList));var o=cc.instantiate(this.popupSectionPrefab).getComponent(a.default);o.popupInfo="Made by Ubisoft:";var r=this.openCrossSectionPromote(e,o.content);r&&(r.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,r.node.width=r.node.height=o.content.width,r.setCallBack(function(){})),o.show(t)}},e.prototype.openMarqueeSectionPromote=function(){var e=this;if(this.marqueeSectionPrefab){var t=cc.instantiate(this.marqueeSectionPrefab).getComponent(c.default);this.marqeeList.forEach(function(o){var n=e.openCrossSectionPromote(o,t.content);n&&(n.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,n.node.width=n.node.height=t.tmpNode.width,n.setCallBack(function(){}))}),t.show()}},e.prototype.openHighlightedSectionPromote=function(){var e=this;if(this.highlightedSectionPrefab){var t=cc.instantiate(this.highlightedSectionPrefab).getComponent(s.default);this.highlightedList.forEach(function(o){var n=e.loadAssetPromoteGame(o),r=cc.instantiate(e.crossSectionPrefab),a=r.getComponent(i.default);a.gameName=n.info.displayName.zh,a.initIcon(n),r.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,r.width=r.height=t.tmpNode.width,a.setCallBack(function(){}),a.show(t.content)}),t.show()}},e}();o.default=l,cc._RF.pop()},{"../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util","./CrossSection":"CrossSection","./HighlightedSection":"HighlightedSection","./MarqueeSection":"MarqueeSection","./PopupSection":"PopupSection"}],CrossSection:[function(e,t,o){"use strict";cc._RF.push(t,"0a8c2eO5/JCoLj87J+pfP6Y","CrossSection");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Utils/Util"),c=e("../Utils/ConstConfig"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t.iconSprite=null,t.QrSprite=null,t.gameNameLb=null,t}return r(t,e),Object.defineProperty(t.prototype,"gameName",{get:function(){return this._gameName},set:function(e){this._gameName=e,this.gameNameLb.string=e},enumerable:!1,configurable:!0}),t.prototype.start=function(){},t.prototype.init=function(e){if(this.gameName=e.info.displayName.zh,this.QrSprite.spriteFrame=e.spriteFrames.qrcode,e.spriteFrames.anim.length>0){var t=cc.AnimationClip.createWithSpriteFrames(e.spriteFrames.anim,10);t.name="run",t.wrapMode=cc.WrapMode.Loop,this.animation.addClip(t),this.animation.play("run")}else this.initIcon(e)},t.prototype.initIcon=function(e){this.QrSprite.spriteFrame=e.spriteFrames.qrcode,this.iconSprite.spriteFrame=e.spriteFrames.icon,this.iconSprite.node.active=!0},t.prototype.onClick=function(){this._callBack&&this._callBack(),this.showQR()},t.prototype.show=function(e){e||(e=cc.find("Canvas")),this.node.parent=e,this.node.setPosition(0,0),a.default.showPopup(this.node)},t.prototype.setCallBack=function(e){this._callBack=e},t.prototype.hide=function(){this.node.destroy()},t.prototype.showQR=function(){this.QrSprite.node.parent=cc.find("Canvas"),this.QrSprite.node.active=!0,this.QrSprite.node.group=c.ConstConfig.GROUP_NODE.FIXED_POS_UI},t.prototype.hideQR=function(){this.QrSprite.node.active=!1},i([u(cc.Animation)],t.prototype,"animation",void 0),i([u(cc.Sprite)],t.prototype,"iconSprite",void 0),i([u(cc.Sprite)],t.prototype,"QrSprite",void 0),i([u(cc.Label)],t.prototype,"gameNameLb",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util"}],CrownRoadComp:[function(e,t,o){"use strict";cc._RF.push(t,"cb2aahf0LNJfIWUi8p1tQWe","CrownRoadComp");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.crownRoadUIParent=null,t.crownRoadUIPrefab=null,t}return r(t,e),t.prototype.start=function(){cc.instantiate(this.crownRoadUIPrefab).parent=this.crownRoadUIParent},i([s(cc.Node)],t.prototype,"crownRoadUIParent",void 0),i([s(cc.Prefab)],t.prototype,"crownRoadUIPrefab",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],CrownRoadItem:[function(t,o,n){"use strict";cc._RF.push(o,"a44141OfgROxazS0dmyJl/c","CrownRoadItem");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcCrownRoadItem=void 0;var c=t("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=t("../../../Services/Inventory/Inventory"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardIcon=null,e.rewardNumberLabel=null,e.checkIconNode=null,e.defaultItemSpriteFrame=null,e.dimColor=new cc.Color(150,150,150),e.glowNode=null,e.rewardItemID=null,e.rankNumber=null,e}return i(o,t),o.prototype.start=function(){this.checkIconNode.active=!1},o.prototype.setDimStatus=function(e){void 0===e&&(e=!0),e=!this.rankNumber&&e,this.rewardIcon.color=e?this.dimColor:cc.color(255,255,255),this.rewardNumberLabel.node.color=e?this.dimColor:cc.color(255,255,255),this.checkIconNode.active=e},o.prototype.setRewardItem=function(t,o,n,r,i){var a=this;void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=!1);var c=null;try{c=s.NgcInventory.inst.objectTypeTable[t].picture,cc.loader.loadRes(c,cc.SpriteFrame,function(e,t){a.rewardIcon.getComponent(cc.Sprite).spriteFrame=e?a.defaultItemSpriteFrame:t})}catch(e){this.rewardIcon.getComponent(cc.Sprite).spriteFrame=this.defaultItemSpriteFrame}null!==n&&(this.rewardIcon.scale=n),null!==o&&o>1?(this.rewardNumberLabel.node.opacity=i?0:255,this.setRewardNumber(o)):this.rewardNumberLabel.node.opacity=0,this.rewardItemID=t,this.rankNumber=r},o.prototype.emptyNextReward=function(){this.rewardIcon.getComponent(cc.Sprite).spriteFrame=null,this.rewardNumberLabel.node.opacity=0,this.rewardItemID=null,this.rankNumber=null},o.prototype.setRewardNumber=function(e){this.rewardNumberLabel.string="x"+e},a([p(cc.Node)],o.prototype,"rewardIcon",void 0),a([p(c.NgcLabelLocalized)],o.prototype,"rewardNumberLabel",void 0),a([p(cc.Node)],o.prototype,"checkIconNode",void 0),a([p(cc.SpriteFrame)],o.prototype,"defaultItemSpriteFrame",void 0),a([p(cc.Color)],o.prototype,"dimColor",void 0),a([p(cc.Node)],o.prototype,"glowNode",void 0),a([u],o)}(cc.Component);n.NgcCrownRoadItem=d,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../Services/Inventory/Inventory":"Inventory"}],CrownRoadManager:[function(t,o,n){"use strict";cc._RF.push(o,"f84d7w85X1OPYX6iiD3XdHZ","CrownRoadManager");var r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../Core/nCSV"),a=t("../../../Core/Utils"),c=t("../../../GameFramework/Scripts/BuildConfig"),s=t("../../../SDK/Nano/NanoSrv"),l=t("../../../Services/Inventory/Inventory"),u=t("../../../Services/Platform/Platform"),p=t("../../../Services/Telemetry/Telemetry"),d=t("../../GameMode/Script/GameModeManager"),f=cc._decorator,h=f.ccclass,g=(f.property,function(){function t(){this.CROWN_BALANCING_PATH="Text/crownBalancing.csv",this.CROWN_REWARDS_PATH="Text/crownRewards.csv",this.crownRank=1,this.rewardData=null,this.balancingData=null,this.loadingTimeout=null,this.fetchDataFromServer(this.onLoadingDataCompleted.bind(this))}var o;return o=t,t.init=function(){o.inst?console.warn("NgcCrownRoadManager was initialized!!"):c.NgcBuildConfig.offlineMode||(o.inst=new o)},t.isInitialized=function(){var e=o.inst;return!!e&&l.NgcInventory.inst&&Object.keys(l.NgcInventory.inst.objectTypeTable).length>0&&e.rewardData&&e.balancingData},t.prototype.onLoadingDataCompleted=function(e,t){var n=this;"rewards"===e&&(this.rewardData={},t.forEach(function(e){if(0!==e.milestone.length){var t=null;e.itemID.match(/crownRank(\d+)/i)&&(t=parseInt(RegExp.$1)),n.rewardData[e.milestone]=[e.itemID,parseInt(e.quantity),t,e.label]}}),o.getCrownRoadData(function(e){o.inst.getRewardsBaseOnPoint(e.crownRank)})),"balancing"===e&&(this.balancingData={},t.forEach(function(e){var t;if(0!==(null===(t=e.crownRank)||void 0===t?void 0:t.length)){var o={};for(var r in e)"crownRank"!==r&&(o[r]=parseInt(e[r]));n.balancingData[e.crownRank]=o}}))},t.prototype.getRewardsBaseOnPoint=function(e,t){void 0===t&&(t=!1);var o=0,n=null,r=null;for(var i in this.rewardData){var a=parseInt(i);if(t?e<=a:e<a)return n=this.rewardData[i],[{point:o,reward:this.rewardData[o]},{point:a,reward:n},r];null!==this.rewardData[i][2]&&(this.crownRank=this.rewardData[i][2],r={point:a,reward:this.rewardData[i]}),o=a}return null},t.prototype.fetchDataFromServer=function(t){var o=this;if(u.NgcPlatform.isOfflineMode())cc.loader.loadRes(this.CROWN_REWARDS_PATH,function(e,n){if(!e&&n.text){var r=i.nCSV.parseTable(n.text);t("rewards",r)}else t("Failed to get data from url "+o.CROWN_REWARDS_PATH,null)}),cc.loader.loadRes(this.CROWN_BALANCING_PATH,function(e,n){if(!e&&n.text){var r=i.nCSV.parseTable(n.text);t("balancing",r)}else t("Failed to get data from url "+o.CROWN_BALANCING_PATH,null)});else{clearTimeout(this.loadingTimeout);try{var n=s.default.inst.getCurGameInfo().crownRoad;t("rewards",n.rewardTable),this.balancingData={}}catch(e){this.loadingTimeout=setTimeout(function(){o.fetchDataFromServer(t)},100)}}},t.updateRank=function(e,t){var o={rank:e};d.NgcGameModeManager.inst.selectedModeId&&(o.gameMode=d.NgcGameModeManager.inst.selectedModeId),s.default.inst.servicePost("/crownroad/updaterank",JSON.stringify(o),function(e,o){e||(a.Utils.log("Successfully update rank!",o),t&&t(JSON.parse(o).data))})},t.checkReward=function(e,t){var o={rank:e};d.NgcGameModeManager.inst.selectedModeId&&(o.gameMode=d.NgcGameModeManager.inst.selectedModeId),s.default.inst.servicePost("/crownroad/checkreward",JSON.stringify(o),function(e,o){e||(a.Utils.log("Successfully check crown reward",o),t&&t(JSON.parse(o).data))})},t.getCrownRoadData=function(e){s.default.inst.serviceGet("/playerdata",null,function(t,n){if(!t){var r=JSON.parse(n).data.crownRoad||{crownRank:0,highestRank:0,milestone:[]};o.crownRoadData=r,e&&e(r)}})},t.setGameRoundOverExtraParams=function(){p.NgcTelemetry.inst.setGameRoundOverExtraParam({NGC:!0})},t.sendGameOverTracking=function(e,t){var n=o.inst.crownRank;o.inst.getRewardsBaseOnPoint(e);var r=o.inst.crownRank;a.Utils.log(e,n);var i="Maintained";r>n&&(i="Promoted"),r<n&&(i="Demoted"),o.setGameRoundOverExtraParams(),p.NgcTelemetry.inst.LogEvent_GameRoundOver({crownRank:r,crownEarnings:t,crownResult:i})},t.inst=null,t.crownRoadUIInst=null,t.crownRoadData=null,t.playerRank=0,o=r([h],t)}());n.default=g,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../Core/nCSV":"nCSV","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../GameMode/Script/GameModeManager":"GameModeManager"}],CrownRoadMilestoneItem:[function(e,t,o){"use strict";cc._RF.push(t,"6bbb0z+kLxIKLBqWOuKAgjb","CrownRoadMilestoneItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcMilestoneItem=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankBG=null,t.rankPointLabel=null,t.rewardBG=null,t.rewardIcon=null,t.rewardNumberLabel=null,t.rewardNameLabel=null,t.checkIconNode=null,t.defaultItemSpriteFrame=null,t}return r(t,e),t.prototype.setRewardNumber=function(e){var t="";e>1&&(t="x"+e),this.rewardNumberLabel.string=t},t.prototype.setRewardName=function(e){e?c.NgcLocalizedManager.setTextKey(this.rewardNumberLabel,e):this.rewardNumberLabel.node.active=!1},i([u(cc.Node)],t.prototype,"rankBG",void 0),i([u(a.NgcLabelLocalized)],t.prototype,"rankPointLabel",void 0),i([u(cc.Node)],t.prototype,"rewardBG",void 0),i([u(cc.Node)],t.prototype,"rewardIcon",void 0),i([u(a.NgcLabelLocalized)],t.prototype,"rewardNumberLabel",void 0),i([u(a.NgcLabelLocalized)],t.prototype,"rewardNameLabel",void 0),i([u(cc.Node)],t.prototype,"checkIconNode",void 0),i([u(cc.SpriteFrame)],t.prototype,"defaultItemSpriteFrame",void 0),i([l],t)}(cc.Component);o.NgcMilestoneItem=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],CrownRoadProgressionDialog:[function(t,o,n){"use strict";cc._RF.push(o,"3cd60SaUBhHraLYv6vTdXdC","CrownRoadProgressionDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcCrownRoadProgressionDialog=void 0;var c=t("../../../Core/Utils"),s=t("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=t("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=t("../../../Services/Inventory/Inventory"),p=t("../../Dialogs/Script/DialogBase"),d=t("./CrownRoadManager"),f=t("./CrownRoadMilestoneItem"),h=t("./CrownRoadUI"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.NO_RANK_TITLE_KEY="CRD_NORANK",e.milestoneItem=null,e.scrollView=null,e.progressBarBG=null,e.progressBar=null,e.backProgressBar=null,e.currentMarker=null,e.currentRankLabel=null,e.currentRankSprite=null,e.normalItemScale=1,e.rankItemScale=.75,e.customScaleTable=[],e.markerPointLabel=null,e.scaleHashTable=null,e.isLoading=!1,e.filesNeedToBeLoaded=0,e}return i(o,t),o.prototype.onLoad=function(){this.markerPointLabel=this.currentMarker.getComponentInChildren(s.NgcLabelLocalized),this.milestoneItem.active=!1,this.scaleTableToHashTable()},o.prototype.scaleTableToHashTable=function(){if(this.scaleHashTable)return this.scaleHashTable;var e={};return this.customScaleTable.forEach(function(t){return e[t.itemID]=t.scale}),this.scaleHashTable=e,e},o.prototype.getUnitLength=function(e){var t=Number.POSITIVE_INFINITY,o=null;for(var n in e){if(null!==o){var r=parseInt(n)-o;r<t&&(t=r)}o=parseInt(n)}return t},o.prototype.calculateContentHeight=function(e,t,o,n,r,i){var a=0,c=null;for(var s in e){if(c)if(parseInt(s)>=r&&i){var l=1.25;l=1,a+=this.milestoneItem.height+t*l,n[s]=l}else l=(parseInt(s)-c)/o,l=1,a+=this.milestoneItem.height+t*l,n[s]=l;else n[s]=1,a+=this.milestoneItem.height;c=s}return a},o.prototype.getMaxRewardMilestonePoint=function(e){var t=Number.NEGATIVE_INFINITY;for(var o in e)parseInt(o)>t&&(t=parseInt(o));return t},o.prototype.update=function(){this.updateLoading()},o.prototype.updateLoading=function(){this.isLoading&&this.filesNeedToBeLoaded<=0&&(this.isLoading=!1,cc.tween(this.scrollView.node).to(.5,{opacity:255}).start())},o.prototype.hide=function(){t.prototype.hide.call(this,this.onHideCB)},o.prototype.init=function(t,o,n,r,i){var a=this;if(cc.sys.isMobile){var s=this.dialogNode.getComponent(cc.Widget);s.enabled=!0,s.top=60,s.bottom=60,s.isAlignBottom=!0,s.updateAlignment(),s.enabled=!1,this.scrollView.getComponent(cc.Widget).updateAlignment()}this.onHideCB=i,this.isLoading=!0,this.filesNeedToBeLoaded=0,this.scrollView.node.opacity=0,o<=t&&(o=t,this.backProgressBar.active=!1);var p={};for(var h in d.default.inst.rewardData)p[h]=d.default.inst.rewardData[h];void 0===p[0]&&(p[0]=[null,null,null]);var g=this.getMaxRewardMilestonePoint(p),y=!1;t>g&&(p[t]=[null,null],g=t,y=!0),o>g&&(p[o]=[null,null]);var m=this.getUnitLength(p),_=this.milestoneItem.height/2+30,v={},S=this.calculateContentHeight(p,30,m,v,g,y)+_;this.scrollView.content.height=S;var N,b,C=null,P=null,I=null,w=0,T={},O=u.NgcInventory.inst.objectTypeTable,R=function(n){var i=p[n][0],s=p[n][1],l=p[n][3],u=cc.instantiate(E.milestoneItem),d=u.getComponent(f.NgcMilestoneItem),h=d.rewardBG.parent;if(h.active=!1,d.rankBG.active=!1,d.rewardBG.active=!1,d.checkIconNode.active=!1,T[n]=u,u.active=!0,I?(u.y=I+u.height+30*v[n],I=u.y):(u.y=-S+_,I=u.y),d.rankPointLabel.string=n,null!==i){h.active=!0,0===s?(l=O[i].displayName,d.rankBG.active=!0,d.rewardIcon.getComponent(cc.Widget)):(d.rewardBG.active=!0,d.checkIconNode.active=!!r[n]),s>1?d.setRewardNumber(s):d.setRewardName(l);var g=E.scaleHashTable[i]||(0===s?E.rankItemScale:E.normalItemScale);d.rewardIcon.scale=g;var y=null;try{y=O[i].picture,E.filesNeedToBeLoaded+=1,cc.loader.loadRes(y,cc.SpriteFrame,function(e,t){a.filesNeedToBeLoaded-=1,d.rewardIcon.getComponent(cc.Sprite).spriteFrame=e?d.defaultItemSpriteFrame:t})}catch(e){d.rewardIcon.getComponent(cc.Sprite).spriteFrame=d.defaultItemSpriteFrame}}if(E.scrollView.content.addChild(u),!C&&parseInt(n)>=t){var m=(t-w)/(parseInt(n)-w),N=Math.abs(c.Utils.getWorldPos(T[n]).y-c.Utils.getWorldPos(T[w]).y);C=c.Utils.getWorldPos(T[w]).y+m*N}!P&&parseInt(n)>=o&&(m=(o-w)/(parseInt(n)-w),N=Math.abs(c.Utils.getWorldPos(T[n]).y-c.Utils.getWorldPos(T[w]).y),P=c.Utils.getWorldPos(T[w]).y+m*N),w=parseInt(n)},E=this;for(var A in p)R(A);N=c.Utils.getWorldPos(T[0]).y,this.progressBar.height=Math.abs(C-N)+0,this.progressBar.anchorY=0,this.progressBar.y=-this.scrollView.content.height+_-0,this.backProgressBar.height=Math.abs(P-N)+0,this.backProgressBar.anchorY=0,this.backProgressBar.y=-this.scrollView.content.height+_-0,b=c.Utils.getWorldPos(T[w]).y,this.progressBarBG.height=Math.abs(b-N)+0,this.progressBarBG.anchorY=0,this.progressBarBG.y=-this.scrollView.content.height+_-0,this.currentMarker.parent=null,this.currentMarker.parent=this.scrollView.content,this.currentMarker.y=-this.scrollView.content.height+this.progressBar.height-0+_,this.markerPointLabel.string=t.toString();var D=cc.v2(0,-this.currentMarker.y);D.y-=this.scrollView.node.height/2,this.scrollView.scrollToOffset(D,0),n?(l.NgcLocalizedManager.setTextKey(this.currentRankLabel,n.displayName),cc.loader.loadRes(n.picture,cc.SpriteFrame,function(e,t){e||(a.currentRankSprite.spriteFrame=t)})):(this.currentRankSprite.node.active=!1,l.NgcLocalizedManager.setTextKey(this.currentRankLabel,this.NO_RANK_TITLE_KEY))},o.urlPrefab="CrownRoadProgressionDialog",o.bundleName="02_crown_road",o.dialogType="CrownRoadProgressionDialog",a([m(cc.Node)],o.prototype,"milestoneItem",void 0),a([m(cc.ScrollView)],o.prototype,"scrollView",void 0),a([m(cc.Node)],o.prototype,"progressBarBG",void 0),a([m(cc.Node)],o.prototype,"progressBar",void 0),a([m(cc.Node)],o.prototype,"backProgressBar",void 0),a([m(cc.Node)],o.prototype,"currentMarker",void 0),a([m(s.NgcLabelLocalized)],o.prototype,"currentRankLabel",void 0),a([m(cc.Sprite)],o.prototype,"currentRankSprite",void 0),a([m()],o.prototype,"normalItemScale",void 0),a([m()],o.prototype,"rankItemScale",void 0),a([m([h.CrownRoadItemScalable])],o.prototype,"customScaleTable",void 0),a([y],o)}(p.NgcDialogBase);n.NgcCrownRoadProgressionDialog=_,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../Services/Inventory/Inventory":"Inventory","../../Dialogs/Script/DialogBase":"DialogBase","./CrownRoadManager":"CrownRoadManager","./CrownRoadMilestoneItem":"CrownRoadMilestoneItem","./CrownRoadUI":"CrownRoadUI"}],CrownRoadUI:[function(t,o,n){"use strict";cc._RF.push(o,"10dffqe9PpL1591LwUViE8d","CrownRoadUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},l=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.CrownRoadItemScalable=void 0;var u=t("../../../../Scripts/UserInfo"),p=t("../../../Core/Utils"),d=t("../../../GameFramework/Scripts/Localized/LabelLocalized"),f=t("../../../GameFramework/Scripts/NgcScreenManager"),h=t("../../../GameFramework/Scripts/NgcShopManager"),g=t("../../../Services/Inventory/Inventory"),y=t("../../../Services/Platform/Platform"),m=t("../../../Services/Telemetry/Telemetry"),_=t("../../DeliveryReward/Script/DeliveryRewardAnimation"),v=t("../../Dialogs/Script/NgcDialogManager"),S=t("../../GameMode/Script/GameModeManager"),N=t("../../LuckyBooster/Script/NgcLuckyBoosterManager"),b=t("./CrownRoadItem"),C=t("./CrownRoadManager"),P=t("./CrownRoadProgressionDialog"),I=cc._decorator,w=I.ccclass,T=I.property,O=function(){function e(){this.itemID="",this.scale=1}return c([T()],e.prototype,"itemID",void 0),c([T()],e.prototype,"scale",void 0),c([w("CrownRoadScalable")],e)}();n.CrownRoadItemScalable=O;var R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.crownItem=null,t.currentRankNode=null,t.crownNumberLabel=null,t.positiveColor=cc.color(134,227,60),t.negativeColor=cc.color(255,97,97),t.crownIconNode=null,t.crownFlyTargetNode=null,t.normalItemScale=1,t.rankItemScale=.35,t.customScaleTable=[],t.needRefresh=!1,t.downRank=!1,t.scaleHashTable=null,t.canShowUI=!1,t.lastPoint=0,t.currentPoint=0,t.highestPoint=0,t.RANK_UP_TEXT_KEY="CRD_RANK_UP",t.PROGRESS_TWEEN_DURATION=.85,t.devButtons=null,t.lastTouchStatus=void 0,t.currentRankItemID=null,t.unlockAnimationCB=null,t.customRewardAnimationFunc={},t.DELAY_BEFORE_TWEEN=.45,t.lastRankItem=null,t.unlockedMilestones={},t.lastUnlockedMilestones={},t.progressUIClicked=!1,t.afterRewardCallback=null,t.crownDisplayTargetNode=null,t}return i(t,e),t.prototype.onLoad=function(){this.devButtons=this.node.getChildByName("DevButtons")},t.prototype.start=function(){C.default.crownRoadUIInst=this,this.scaleTableToHashTable(),this.node.opacity=0,this.progressBar.progress=0,this.devButtons.active=!0,this.addCustomRewardAnimation("game_mode_unlock",this.unlockGameModeAnimation.bind(this)),cc.systemEvent.on("refreshCrownRoad",this.onSocialCallBack.bind(this))},t.prototype.onSocialCallBack=function(){var e=this;this.unlockedMilestones={},this.lastUnlockedMilestones={},this.getCurrentPoint(function(){e.lastPoint=e.currentPoint,e.updateUI()})},t.prototype.lateUpdate=function(){this.checkShowUI()},t.prototype.checkRefreshUI=function(){var e=this;this.needRefresh&&(this.lastTouchStatus=f.default.inst.currentTouchStatus(),f.default.inst.setTouchStatus(!1),this.getCurrentPoint(function(){e.currentPoint>e.lastPoint&&e.playCrownFlyingAnimation(),e.updateUI()}),this.needRefresh=!1)},t.prototype.checkShowUI=function(){var e=this;this.canShowUI||C.default.isInitialized()&&(y.NgcPlatform.isOfflineMode()||(this.getCurrentPoint(function(){cc.tween(e.node).to(.25,{opacity:255}).start(),e.lastPoint=e.currentPoint,e.lastUnlockedMilestones=a({},e.unlockedMilestones),e.updateUI()}),this.canShowUI=!0))},t.prototype.getCurrentRankData=function(){if(this.currentRankItemID){var e=g.NgcInventory.inst.objectTypeTable[this.currentRankItemID];return{picture:e.picture,displayName:e.displayName}}return null},t.prototype.updateUI=function(e){var t=this,o=void 0===e?{}:e,n=o.included,r=void 0!==n&&n,i=o.animate,c=void 0!==i&&i;o.recursive,this.currentPoint<0&&(this.currentPoint=0);var p=this.currentPoint;p<this.lastPoint&&(r=!1),p<this.lastPoint&&(this.lastPoint=p);var d=C.default.inst.getRewardsBaseOnPoint(this.lastPoint,r),f=!1,y=1,v=0,S=0;if(d){v=d[0].point,S=d[1].point,d[0].reward;var b=d[1].reward,P=d[2]?d[2].reward:null;P&&(this.currentRankItemID=P[0],this.setCurrentRank(this.currentRankItemID,c)),y=(p-v)/(S-v);var I=null!==b[2],w=!I&&!!this.lastUnlockedMilestones[S];this.lastUnlockedMilestones[S]=this.unlockedMilestones[S],this.setNextReward(b[0],b[1],w,b[2],c)}else f=!0,this.crownItem.emptyNextReward();if(p===this.lastPoint||f)return this.crownNumberLabel.string=p.toString(),this.progressBar.progress=y,this.onAfterRewardAnimation(),void(this.lastUnlockedMilestones=a({},this.unlockedMilestones));var T=this.DELAY_BEFORE_TWEEN,O=this.PROGRESS_TWEEN_DURATION;if(p<this.lastPoint&&(p<v?this.lastPoint==v?(this.lastPoint-=1,this.scheduleOnce(function(){t.progressBar.progress=1,t.updateUI({included:!1,animate:!0,recursive:!0})},T+.05)):(y=0,this.playProgressBarFillAnimation(y,O,T,function(){t.lastPoint=v,t.progressBar.progress=1,t.updateUI({included:!1,animate:!0,recursive:!0})})):this.playProgressBarFillAnimation(y,O,T,function(){t.lastPoint=p,t.onAfterRewardAnimation()})),p>this.lastPoint)if(p>=S){y=1;var R=function(){t.lastPoint=S,t.updateUI({included:!1,animate:!0,recursive:!0})};this.tweenCrownNumber(this.lastPoint,S),this.playProgressBarFillAnimation(y,O,T,this.playClaimRewardAnimation.bind(this,function(){if(!1===w){m.NgcTelemetry.inst.LogEvent_PlayerCrownRewardCollect({itemRewardID:b[0],itemRewardValue:Math.max(b[1],1)});var e=t.crownItem.glowNode.scale;t.crownItem.glowNode.scale=0,t.crownItem.glowNode.opacity=0,t.crownItem.glowNode.active=!0,t.node.getComponent(cc.Animation).play(),t.unlockAnimationCB=function(){t.scheduleOnce(function(){t.crownItem.glowNode.active=!1,t.crownItem.glowNode.scale=e},1),t.hasCustomRewardAnimation(b[0])?t.playCustomRewardAnimation(b[0],R.bind(t)):cc.tween(t.crownItem.node).to(.25,{opacity:0}).call(function(){var e=g.NgcInventory.inst.objectTypeTable[b[0]],o="equippable"===e.type;e.category,g.NgcInventory.inst.forceFetchInventory(function(){return s(t,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,u.UserInfo.updateInventoryWithPlatform()];case 1:return e.sent(),_.default.inst.showRewardAnimation({itemID:b[0],count:b[1]},function(){h.NgcShopManager.getInstance().updateBoughtItem(b[0]),N.NgcLuckyBoosterManager.getInstance().applyBooster(),N.NgcLuckyBoosterManager.getInstance().checkBoosterUI(),R()},o,I?this.RANK_UP_TEXT_KEY:null),[2]}})})})}).start()}}else R()}))}else this.tweenCrownNumber(this.lastPoint,p),this.playProgressBarFillAnimation(y,O,T,function(){t.lastPoint=p,t.onAfterRewardAnimation()})},t.prototype.onUnlockAnimationCompleted=function(){this.unlockAnimationCB&&this.unlockAnimationCB()},t.prototype.addCustomRewardAnimation=function(e,t){this.customRewardAnimationFunc[e]=t},t.prototype.hasCustomRewardAnimation=function(e){return!!this.customRewardAnimationFunc[e]},t.prototype.playCustomRewardAnimation=function(e,t){this.customRewardAnimationFunc[e]&&this.customRewardAnimationFunc[e](t)},t.prototype.unlockGameModeAnimation=function(e){var t=this,o=S.NgcGameModeManager.inst.lockIconNode(),n=this.crownItem.node.parent.convertToNodeSpaceAR(p.Utils.getWorldPos(o)),r=cc.v2(this.crownItem.node.position),i=cc.v2(r.x+60,r.y),a=cc.v2(n.x+60,r.y);cc.tween(this.crownItem.node).delay(.6).to(.15,{opacity:0,scale:1}).start(),p.Utils.tweenNodeToNode(this.crownItem.node,o,cc.v2(0,0),null,.75,"quartInOut",!0,i,a).call(function(){t.crownItem.node.setPosition(r),S.NgcGameModeManager.inst.playUnlockAnimation(.01,function(){S.NgcGameModeManager.inst.unlock(),e()})}).start()},t.prototype.tweenCrownNumber=function(e,t){var o=this,n=this.DELAY_BEFORE_TWEEN,r=this.PROGRESS_TWEEN_DURATION,i=e<=t?this.positiveColor:this.negativeColor,a=20/Math.abs(t-e)*80;a=Math.max(80,Math.min(a,20)),Math.abs(t-e)<5&&(a=300),cc.tween(this.node).delay(n).call(function(){p.Utils.tweenNumber(e,t,r,function(e,t){o.crownNumberLabel.string=e.toString(),t?(o.crownNumberLabel.node.color=cc.color(255,255,255),cc.tween(o.crownNumberLabel.node).to(.25,{scale:1}).start()):(o.crownNumberLabel.node.color=i,o.crownNumberLabel.node.scale=1+Math.abs(.25*Math.cos(Date.now()/a)))}).start()}).start()},t.prototype.onAfterRewardAnimation=function(){void 0!==this.lastTouchStatus&&(f.default.inst.setTouchStatus(!0),this.lastTouchStatus=void 0),this.afterRewardCallback&&this.afterRewardCallback()},t.prototype.playProgressBarFillAnimation=function(e,t,o,n){cc.tween(this.progressBar).delay(o).to(t,{progress:e},{easing:"cubicInOut"}).call(function(){n&&n()}).start()},t.prototype.playClaimRewardAnimation=function(e){this.progressBar.progress=0,e&&e()},t.prototype.setCurrentRank=function(e,t){if(void 0===t&&(t=!1),this.lastRankItem!==e){this.lastRankItem=e;var o=this.currentRankNode.getComponentInChildren(cc.Sprite),n=g.NgcInventory.inst.objectTypeTable[e].picture;cc.loader.loadRes(n,cc.SpriteFrame,function(e,t){e||(o.spriteFrame=t)});var r=this.scaleHashTable[e]||this.rankItemScale;if(o.node.scale=r,t){var i=o.node.scale;o.node.scale=0,cc.tween(o.node).to(.25,{scale:i}).start()}}},t.prototype.setNextReward=function(e,t,o,n,r){var i,a=this;void 0===r&&(r=!1),r&&(this.crownItem.node.originY=null!==(i=this.crownItem.node.originY)&&void 0!==i?i:this.crownItem.node.y,this.crownItem.node.y-=10,this.crownItem.node.opacity=0,this.crownItem.node.scale=0,this.crownItem.rewardNumberLabel.node.opacity=0,cc.tween(this.crownItem.node).to(.35,{y:this.crownItem.node.originY+10,opacity:255,scale:1.15}).to(.15,{y:this.crownItem.node.originY,scale:.73}).to(.05,{scale:1}).delay(.1).call(function(){t>1&&cc.tween(a.crownItem.rewardNumberLabel.node).to(.2,{opacity:255}).start()}).start());var c=this.scaleHashTable[e]||(null!==n?this.rankItemScale:this.normalItemScale);this.crownItem.setRewardItem(e,t,c,n,r),this.crownItem.setDimStatus(o)},t.prototype.scaleTableToHashTable=function(){if(this.scaleHashTable)return this.scaleHashTable;var e={};return this.customScaleTable.forEach(function(t){return e[t.itemID]=t.scale}),this.scaleHashTable=e,e},t.prototype.onDebugClick=function(e,t){var o,n=this;o="0"===t?1:32,f.default.inst.setTouchStatus(!1),C.default.updateRank(o,function(){n.needRefresh=!0,n.checkRefreshUI()})},t.prototype.getCurrentPoint=function(e){var t=this;C.default.getCrownRoadData(function(o){return s(t,void 0,void 0,function(){var t=this;return l(this,function(){return this.currentPoint=o.crownRank,this.highestPoint=o.highestRank,o.milestone.forEach(function(e){t.unlockedMilestones[e]=!0}),e&&e(this.currentPoint),[2]})})})},t.prototype.onProgressBarClick=function(){return s(this,void 0,void 0,function(){var e,t,o=this;return l(this,function(n){switch(n.label){case 0:return this.canShowUI?this.progressUIClicked?[2]:(this.progressUIClicked=!0,[4,v.NgcDialogManager.createDialog(P.NgcCrownRoadProgressionDialog.dialogType,P.NgcCrownRoadProgressionDialog.urlPrefab,P.NgcCrownRoadProgressionDialog.bundleName)]):[2];case 1:return e=n.sent(),(t=e.getComponent(P.NgcCrownRoadProgressionDialog)).init(this.currentPoint,this.highestPoint,this.getCurrentRankData(),this.unlockedMilestones,function(){o.progressUIClicked=!1}),t.show(),[2]}})})},t.prototype.setAfterRewardCallback=function(e){this.afterRewardCallback=e},t.prototype.setCrownDisplayTarget=function(e){this.crownDisplayTargetNode=e},t.prototype.playCrownFlyingAnimation=function(){for(var e=this,t=function(){var t=cc.instantiate(o.crownIconNode),r=1+.75*Math.random();t.scale=r,t.parent=o.crownFlyTargetNode,p.Utils.setWorldPos(t,p.Utils.getWorldPos(o.crownDisplayTargetNode));var i=t.position,a=o.crownIconNode.position,c=cc.v2(i.x-100,i.y+15),s=cc.v2(a.x-100,a.y-15);c.x-=Math.floor(50*Math.random()),setTimeout(function(){var o=e.PROGRESS_TWEEN_DURATION;cc.tween(t).to(o/2,{scale:r}).to(o/2,{scale:1}).start(),cc.tween(e.crownIconNode).delay(o-.25).to(.1,{scale:1.65}).to(.1,{scale:1}).start(),p.Utils.tweenNodeToNode(t,e.crownIconNode,cc.v2(0,0),null,o,"quartInOut",!0,c,s).call(function(){t.destroy()}).start()},110*n)},o=this,n=0;n<4;n++)t()},c([T(cc.ProgressBar)],t.prototype,"progressBar",void 0),c([T(b.NgcCrownRoadItem)],t.prototype,"crownItem",void 0),c([T(cc.Node)],t.prototype,"currentRankNode",void 0),c([T(d.NgcLabelLocalized)],t.prototype,"crownNumberLabel",void 0),c([T(cc.Color)],t.prototype,"positiveColor",void 0),c([T(cc.Color)],t.prototype,"negativeColor",void 0),c([T(cc.Node)],t.prototype,"crownIconNode",void 0),c([T(cc.Node)],t.prototype,"crownFlyTargetNode",void 0),c([T()],t.prototype,"normalItemScale",void 0),c([T()],t.prototype,"rankItemScale",void 0),c([T([O])],t.prototype,"customScaleTable",void 0),c([w],t)}(cc.Component);n.default=R,cc._RF.pop()},{"../../../../Scripts/UserInfo":"UserInfo","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../GameMode/Script/GameModeManager":"GameModeManager","../../LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","./CrownRoadItem":"CrownRoadItem","./CrownRoadManager":"CrownRoadManager","./CrownRoadProgressionDialog":"CrownRoadProgressionDialog"}],Currency:[function(t,o,n){"use strict";cc._RF.push(o,"a90f1qiyeFIQ7Lm0WGAUVj1","Currency");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.TIERS=void 0;var l,u=t("../../NanoGameCore/Core/nCSV"),p=t("../../NanoGameCore/Core/Utils"),d=t("../Utils/ConstConfig"),f=cc._decorator,h=f.ccclass;f.property,function(e){e[e.Bronze=0]="Bronze",e[e.Silver=1]="Silver",e[e.Gold=2]="Gold",e[e.Platinum=3]="Platinum",e[e.Diamond=4]="Diamond",e[e.Length=5]="Length"}(l=n.TIERS||(n.TIERS={}));var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return i(t,e),o=t,t.prototype.onLoad=function(){return c(this,void 0,void 0,function(){return s(this,function(){return o.inst=this,[2]})})},t.loadTable=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return o.isLoaded?[3,2]:[4,new Promise(function(e){cc.resources.load(d.ConstConfig.CURRENCY_TABLE,cc.TextAsset,function(t,n){t||!n?cc.log(t):(cc.log(n),o.parse(n.text,!0),o.isLoaded=!0),e()})})];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.getTier=function(e){for(var t=0;t<l.Length;t++)if(e<this.getLeagueFee(t))return t-1;return l.Length-1},t.parse=function(e,t){if(t)this._leagueRewards=u.nCSV.parseTable(e),this._leagueFees=u.nCSV.parseParameters(e);else{var n=e;"string"==typeof e&&(n=JSON.parse(e)),this._leagueFees=n.data.params,this._leagueRewards=n.data.table,o.isLoaded=!0}},t.getLeagueFee=function(e){if(o._leagueFees){var t=p.Utils.enumToString(l,e);return parseInt(o._leagueFees[t])}return null},t.getLeagueReward=function(e,t){if(o._leagueRewards){e-=1;var n=o._leagueRewards[e];if(n){var r=p.Utils.enumToString(l,t);return parseInt(n[r])}}return null},t._leagueFees={},t._leagueRewards=[],t.isLoaded=!1,o=a([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../../NanoGameCore/Core/nCSV":"nCSV","../Utils/ConstConfig":"ConstConfig"}],CusDailyRewardUI:[function(t,o,n){"use strict";cc._RF.push(o,"5a929cbR1NCfJ2yQfoAbxwJ","CusDailyRewardUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l,u=t("../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager"),p=t("../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardUI"),d=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),f=t("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),h=t("../../../NanoGameCore/Services/DailyReward/DailyReward"),g=t("../../../NanoGameCore/Services/Inventory/Inventory"),y=t("../../../NanoGameCore/Services/Telemetry/Telemetry"),m=t("../../../Scripts/CarSelector/CarSkinSelecter"),_=t("../../../Scripts/Dialog/RewardAnimationDialog/RewardAnimationDialog"),v=t("../../../Scripts/Screens/StartScreen/StartMain"),S=t("../../../Scripts/Tracking/TrackingManager"),N=t("../../../Scripts/UserInfo"),b=t("../../../Scripts/Utils/ConstConfig"),C=cc._decorator,P=C.ccclass;C.property,function(e){e[e.today=0]="today",e[e.tomorrow=1]="tomorrow",e[e.other=2]="other",e[e.claimed=3]="claimed"}(l||(l={}));var I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.clamReward=function(e){return void 0===e&&(e=!1),c(this,void 0,void 0,function(){var t,o,n=this;return s(this,function(r){switch(r.label){case 0:return f.NgcNavBarManager.inst.showAllNavBar(!0),v.default.inst.loadingNode.active=!0,u.NgcDailyRewardManager.inst.getDailyRewardUINode().active=!1,[4,d.NgcDialogManager.createDialog(_.default.dialogType,_.default.urlPrefab,"")];case 1:return(t=r.sent()).active=!1,o=t.getComponent(_.default),h.NgcDailyReward.inst.checkIn(e,function(t,r){return c(n,void 0,void 0,function(){var n,i,a,l=this;return s(this,function(p){switch(p.label){case 0:return t?(console.warn("Error doing daily checkin"),[3,4]):[3,1];case 1:return console.log("Daily checkin result: "+JSON.stringify(r)),[4,g.NgcInventory.inst.forceFetchInventory().then(function(){N.UserInfo.updateInventoryWithPlatform().then(function(){if(r[0]&&r[0].details.itemID){var e=g.NgcInventory.inst.objectTypeTable[r[0].details.itemID];e.type===b.ConstConfig.INVENTORY.TYPE.EQUIPPABLE&&(m.default.inst.updateBoughtItem(e.itemID),S.default.inst.LogEvent_CarUnlockProgression(e.itemID,1,1,"Daily Reward system",N.UserInfo.curCoin))}})})];case 2:return p.sent(),e?[3,4]:[4,u.NgcDailyRewardManager.inst.updateInventory()];case 3:p.sent(),p.label=4;case 4:v.default.inst.loadingNode.active=!1;try{n={multiplierOffer:e?2:1,itemRewardID:r[0].details.itemID,itemRewardValue:r[0].details.count,stepID:this.curStateResult.curStep,viewedAd:e},y.NgcTelemetry.inst.LogEvent_DailyLoginReward(n),r[0].details.itemID&&(i=g.NgcInventory.inst.objectTypeTable[r[0].details.itemID],r[0].details.itemID==b.ConstConfig.INVENTORY.ITEM_ID.COIN?(a=r[0].details.count,e?o&&(o.init(a,_.COIN_ANI_TYPE.DOUBLE,function(){return c(l,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,u.NgcDailyRewardManager.inst.updateInventory()];case 1:return e.sent(),S.default.inst.LogEvent_CurrencyIncome(b.ConstConfig.CURRENCY.SOURCE.DAILY_REWARD,a,N.UserInfo.curCoin),[2]}})})}),o.show()):(o.init(a,_.COIN_ANI_TYPE.SIMPLE,function(){return c(l,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,u.NgcDailyRewardManager.inst.updateInventory()];case 1:return e.sent(),S.default.inst.LogEvent_CurrencyIncome(b.ConstConfig.CURRENCY.SOURCE.DAILY_REWARD,a,N.UserInfo.curCoin),[2]}})})}),o.show())):i.type==b.ConstConfig.INVENTORY.TYPE.EQUIPPABLE&&(o.initWithCarReward(m.default.getSpriteFrameFromID(i.itemID)),o.show()))}catch(t){cc.warn(t)}return this.isAlreadyShow||(N.UserInfo.isDailyRewardAlreadyShow=!0,this.isAlreadyShow=!0,this.uploadDailyRewardIsAlreadyFirstShow()),[2]}})})}),[2]}})})},a([P],t)}(p.NgcDailyRewardUI);n.default=I,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager":"DailyRewardManager","../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardUI":"DailyRewardUI","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/Services/DailyReward/DailyReward":"DailyReward","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../../Scripts/CarSelector/CarSkinSelecter":"CarSkinSelecter","../../../Scripts/Dialog/RewardAnimationDialog/RewardAnimationDialog":"RewardAnimationDialog","../../../Scripts/Screens/StartScreen/StartMain":"StartMain","../../../Scripts/Tracking/TrackingManager":"TrackingManager","../../../Scripts/UserInfo":"UserInfo","../../../Scripts/Utils/ConstConfig":"ConstConfig"}],CusNavBarConflictDialog:[function(t,o,n){"use strict";cc._RF.push(o,"ec66diuLBpARYNo/zVvEBnT","CusNavBarConflictDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../League/LeagueManager"),u=t("../../Utils/Util"),p=t("../../../NanoGameCore/SDK/SDK"),d=t("../../UserInfo"),f=t("../../../NanoGameCore/Services/Social/Social"),h=t("../../../NanoGameCore/Services/Leaderboard/Leaderboard"),g=t("../../Screens/StartScreen/StartMain"),y=t("../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager"),m=t("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConflictDialog"),_=cc._decorator,v=_.ccclass,S=(_.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.updateUserConflictInfo=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r,i,a,c,m,_,v;return s(this,function(s){switch(s.label){case 0:return y.NgcDailyRewardManager.inst.isDailyRewardActive()&&(y.NgcDailyRewardManager.inst.getDailyRewardUINode().active=!1),this.localSave.lbScore.string=u.default.msToTime(l.default.inst.getBestScore()),this.localSave.coins.string=""+d.UserInfo.curCoin,this.localSave.stars.string=""+d.UserInfo.curStars,e=p.NgcSDK.getCurTime(),t=new Date(e),this.localSave.time.string=t.getUTCDate()+"/"+(t.getUTCMonth()+1)+"/"+t.getUTCFullYear()+" "+t.getUTCHours()+":"+t.getUTCMinutes()+":"+t.getUTCSeconds(),(o=f.NgcSocial.inst.getConflictedData()).hasOwnProperty("playerData")?((n=o.playerData).hasOwnProperty("modified")&&(r=parseInt(n.modified),i=new Date(r),this.cloudSave.time.string=i.getUTCDate()+"/"+(i.getUTCMonth()+1)+"/"+i.getUTCFullYear()+" "+i.getUTCHours()+":"+i.getUTCMinutes()+":"+i.getUTCSeconds()),[4,l.default.inst.loadTopLeague(o.id)]):[3,3];case 1:return a=s.sent(),c=null,a&&(c=a.map(function(e){return e.score?e.score:l.default.leagueTracks.find(function(t){return t.trackID==e.leagueName}).trackDefaultTime}).reduce(function(e,t){return e+t},0),m=this._callBackOk,this._callBackOk=function(e){cc.error("debug continuation hack",a),e||l.default.inst.initData(a),m(e)}),console.log("[NavBarConflictDialog] `updateUserConflictInfo` - Data has no _bestScore. Start get score alltime"),[4,h.NgcLeaderboard.inst.getPlayerRank(o.id,h.TimeFilterType.AllTime,h.PopulationFilterType.Worldwide,h.SORT_ORDER.ASC)];case 2:return _=s.sent(),console.log("[NavBarConflictDialog] `updateUserConflictInfo` - Score alltime = "+_.score),_&&null!==c&&0!=c?(_.score=c,console.log("debug got bestScore from cloud",_.score),this.cloudSave.lbScore.string=u.default.msToTime(_.score),n._bestScore=_.score,g.default.inst.uploadBestScore(n._bestScore)):this.cloudSave.lbScore.string=u.default.msToTime(l.default.inst.getBestScore()),n.hasOwnProperty("inventory")&&((v=n.inventory).hasOwnProperty("star")&&(this.cloudSave.stars.string=v.star.count),v.hasOwnProperty("coin")?this.cloudSave.coins.string=v.coin.count:this.cloudSave.coins.string="0"),[3,4];case 3:console.log("[ConflictDialog] `updateUserConflictInfo` - 'playerData' property NOT FOUND"),s.label=4;case 4:return[2]}})})},t.urlPrefab="CusNavBarConflictDialog",t.bundleName="CusNavBarConflictDialog",t.dialogType="CusNavBarConflictDialog",a([v],t)}(m.NavBarConflicttDialog));n.default=S,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager":"DailyRewardManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConflictDialog":"NavBarConflictDialog","../../../NanoGameCore/SDK/SDK":"SDK","../../../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../../../NanoGameCore/Services/Social/Social":"Social","../../League/LeagueManager":"LeagueManager","../../Screens/StartScreen/StartMain":"StartMain","../../UserInfo":"UserInfo","../../Utils/Util":"Util"}],CusNavBarSettingsDialog:[function(t,o,n){"use strict";cc._RF.push(o,"8cb1f2F0R5Gx4rVZJa9KNEa","CusNavBarSettingsDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),u=t("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSettingsDialog"),p=t("../../../Scripts/Dialog/SelectControlDialog/SelectControlDialog"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controlBtn=null,t}return i(t,e),t.prototype.onSelectControlButtonClick=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,l.NgcDialogManager.createDialog(p.default.dialogType,p.default.urlPrefab,p.default.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(p.default)).init(),t.show(),[2]}})})},a([h(cc.Node)],t.prototype,"controlBtn",void 0),a([f],t)}(u.NgcNavBarSettingsDialog);n.default=g,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSettingsDialog":"NavBarSettingsDialog","../../../Scripts/Dialog/SelectControlDialog/SelectControlDialog":"SelectControlDialog"}],CustomButtonControl:[function(e,t,o){"use strict";cc._RF.push(t,"a88edDnH3BBkbRrNLN4e7I+","CustomButtonControl");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Player/PlayerController"),c=e("./Player/CarBase"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.action=c.CarDirection.NONE,t.defaultOpacity=255,t.isButtonOnly=!1,t.isWheel=!1,t.wheelControlNode=null,t}return r(t,e),t.prototype.start=function(){this.isButtonOnly||(this.hightlight=this.node.getChildByName("highlight"),this.normal=this.node.getChildByName("normal"),this.normal.opacity=this.defaultOpacity,this.hightlight.active=!1,this.normal.active=!0);var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){e.isWheel?e.touchStartPos=t.getLocation():(e.action==c.CarDirection.LEFT?a.default.inst.getLocalPlayer().tapLeft():e.action==c.CarDirection.RIGHT&&a.default.inst.getLocalPlayer().tapRight(),e.isButtonOnly||(e.hightlight.active=!0,e.normal.opacity=255))}),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.isWheel||(a.default.inst.getLocalPlayer().tapIdle(),e.isButtonOnly||(e.hightlight.active=!1,e.normal.opacity=e.defaultOpacity))}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.isWheel||a.default.inst.getLocalPlayer().tapIdle()}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(e.isWheel){var o=t.getLocation();if(o.x<e.touchStartPos.x||o.y>e.touchStartPos.y)return;var n=o.sub(cc.v2(e.touchStartPos)),r=Math.atan2(n.x,n.y),i=cc.misc.radiansToDegrees(r);cc.log(i),e.wheelControlNode.angle=-i,i>=45&&o.x>e.touchStartPos.x+50&&(e.action==c.CarDirection.LEFT?a.default.inst.getLocalPlayer().tapLeft():e.action==c.CarDirection.RIGHT&&a.default.inst.getLocalPlayer().tapRight(),e.scheduleOnce(function(){a.default.inst.getLocalPlayer().tapIdle()},.5))}})},t.prototype.update=function(){},i([u({type:cc.Enum(c.CarDirection)})],t.prototype,"action",void 0),i([u],t.prototype,"isButtonOnly",void 0),i([u],t.prototype,"isWheel",void 0),i([u(cc.Node)],t.prototype,"wheelControlNode",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Player/CarBase":"CarBase","./Player/PlayerController":"PlayerController"}],CustomControl:[function(e,t,o){"use strict";cc._RF.push(t,"51215HSd8lARKV7ZZwjuw5K","CustomControl");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ControlType=void 0;var a,c=e("./Main"),s=e("./Player/CarBase"),l=e("./UserInfo"),u=e("./SteeringWheel"),p=e("./EmoteUIPosition"),d=e("./FTUE/FTUEManager"),f=cc._decorator,h=f.ccclass,g=f.property;(function(e){e[e.UNDEFINED=-1]="UNDEFINED",e[e.CENTER=0]="CENTER",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.DIAGONAL_LEFT=3]="DIAGONAL_LEFT",e[e.DIAGONAL_RIGHT=4]="DIAGONAL_RIGHT",e[e.STEERING_WHEEL_LEFT=5]="STEERING_WHEEL_LEFT",e[e.STEERING_WHEEL_RIGHT=6]="STEERING_WHEEL_RIGHT",e[e.STEERING_WHEEL_FREE=7]="STEERING_WHEEL_FREE",e[e.CONTROL_PAD=8]="CONTROL_PAD"})(a=o.ControlType||(o.ControlType={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.control_Left=null,t.control_Right=null,t.control_Center=null,t.control_left_diagonal=null,t.control_right_diagonal=null,t.control_steering_wheel_right=null,t.control_steering_wheel_left=null,t.control_steering_wheel_free=null,t.control_control_pad=null,t._currentType=-1,t._isWheelFreeStyle=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"isWheelFreeStyle",{get:function(){return this._isWheelFreeStyle},set:function(e){this._isWheelFreeStyle=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){},t.prototype.init=function(){cc.log("Get Current COntrol type from User Info "+l.UserInfo.controlType),this.reset(),this.show(l.UserInfo.controlType)},t.prototype.show=function(e){if(this._currentType!=e&&!(l.UserInfo.curFTUEStep<=d.FTUE_STEP.REQUIRE_INPUT)){this.reset(),this._currentType=e;var t=s.CONTROLTYPE.LEFT_RIGHT,o=c.Main.inst.getLocalPlayer();switch(e){case a.LEFT:this.control_Left.active=!0;break;case a.RIGHT:this.control_Right.active=!0;break;case a.CENTER:this.control_Center.active=!0;break;case a.DIAGONAL_LEFT:this.control_left_diagonal.active=!0;break;case a.DIAGONAL_RIGHT:this.control_right_diagonal.active=!0;break;case a.STEERING_WHEEL_RIGHT:this.control_steering_wheel_right.active=!0,t=s.CONTROLTYPE.WHEEL_CONTROL,this.isWheelFreeStyle=!1;break;case a.STEERING_WHEEL_LEFT:this.control_steering_wheel_left.active=!0,t=s.CONTROLTYPE.WHEEL_CONTROL,this.isWheelFreeStyle=!1;break;case a.STEERING_WHEEL_FREE:this.control_steering_wheel_free.active=!0,o&&(this.control_steering_wheel_free.angle=o.node.angle),t=s.CONTROLTYPE.WHEEL_CONTROL,this.isWheelFreeStyle=!0;break;case a.CONTROL_PAD:this.control_control_pad.active=!0,t=s.CONTROLTYPE.SWIPE}o&&c.Main.inst.getLocalPlayer().changeControlType(t),c.Main.inst.isFTUE()||p.default.inst,l.UserInfo.controlType=e}},t.prototype.reset=function(){this.control_Left.active=!1,this.control_Right.active=!1,this.control_Center.active=!1,this.control_left_diagonal.active=!1,this.control_right_diagonal.active=!1,this.control_steering_wheel_left.active=!1,this.control_steering_wheel_right.active=!1,this.control_steering_wheel_free.active=!1,this.control_control_pad.active=!1,this._currentType=-1,this.control_steering_wheel_left.getComponent(u.default).reset(),this.control_steering_wheel_right.getComponent(u.default).reset(),this.control_steering_wheel_free.getComponent(u.default).reset()},t.inst=null,i([g(cc.Node)],t.prototype,"control_Left",void 0),i([g(cc.Node)],t.prototype,"control_Right",void 0),i([g(cc.Node)],t.prototype,"control_Center",void 0),i([g(cc.Node)],t.prototype,"control_left_diagonal",void 0),i([g(cc.Node)],t.prototype,"control_right_diagonal",void 0),i([g(cc.Node)],t.prototype,"control_steering_wheel_right",void 0),i([g(cc.Node)],t.prototype,"control_steering_wheel_left",void 0),i([g(cc.Node)],t.prototype,"control_steering_wheel_free",void 0),i([g(cc.Node)],t.prototype,"control_control_pad",void 0),o=i([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"./EmoteUIPosition":"EmoteUIPosition","./FTUE/FTUEManager":"FTUEManager","./Main":"Main","./Player/CarBase":"CarBase","./SteeringWheel":"SteeringWheel","./UserInfo":"UserInfo"}],6:[function(e,t){"use strict";t.exports=function(e,t){for(var o=new Array(arguments.length-1),n=0,r=2,i=!0;r<arguments.length;)o[n++]=arguments[r++];return new Promise(function(r,a){o[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),o=0;o<t.length;)t[o++]=arguments[o];r.apply(null,t)}};try{e.apply(t||null,o)}catch(c){i&&(i=!1,a(c))}})}},{}],7:[function(e,t,o){"use strict";var n=o;n.length=function(e){var t=e.length;if(!t)return 0;for(var o=0;--t%4>1&&"="===e.charAt(t);)++o;return Math.ceil(3*e.length)/4-o};for(var r=new Array(64),i=new Array(123),a=0;a<64;)i[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(e,t,o){for(var n,i=null,a=[],c=0,s=0;t<o;){var l=e[t++];switch(s){case 0:a[c++]=r[l>>2],n=(3&l)<<4,s=1;break;case 1:a[c++]=r[n|l>>4],n=(15&l)<<2,s=2;break;case 2:a[c++]=r[n|l>>6],a[c++]=r[63&l],s=0}c>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),c=0)}return s&&(a[c++]=r[n],a[c++]=61,1===s&&(a[c++]=61)),i?(c&&i.push(String.fromCharCode.apply(String,a.slice(0,c))),i.join("")):String.fromCharCode.apply(String,a.slice(0,c))},n.decode=function(e,t,o){for(var n,r=o,a=0,c=0;c<e.length;){var s=e.charCodeAt(c++);if(61===s&&a>1)break;if(void 0===(s=i[s]))throw Error("invalid encoding");switch(a){case 0:n=s,a=1;break;case 1:t[o++]=n<<2|(48&s)>>4,n=s,a=2;break;case 2:t[o++]=(15&n)<<4|(60&s)>>2,n=s,a=3;break;case 3:t[o++]=(3&n)<<6|s,a=0}}if(1===a)throw Error("invalid encoding");return o-r},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],8:[function(e,t){"use strict";function o(){this._listeners={}}t.exports=o,o.prototype.on=function(e,t,o){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:o||this}),this},o.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var o=this._listeners[e],n=0;n<o.length;)o[n].fn===t?o.splice(n,1):++n;return this},o.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var o=[],n=1;n<arguments.length;)o.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,o)}return this}},{}],9:[function(e,t){"use strict";function o(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),o=new Uint8Array(t.buffer),n=128===o[3];function r(e,n,r){t[0]=e,n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3]}function i(e,n,r){t[0]=e,n[r]=o[3],n[r+1]=o[2],n[r+2]=o[1],n[r+3]=o[0]}function a(e,n){return o[0]=e[n],o[1]=e[n+1],o[2]=e[n+2],o[3]=e[n+3],t[0]}function c(e,n){return o[3]=e[n],o[2]=e[n+1],o[1]=e[n+2],o[0]=e[n+3],t[0]}e.writeFloatLE=n?r:i,e.writeFloatBE=n?i:r,e.readFloatLE=n?a:c,e.readFloatBE=n?c:a}():function(){function t(e,t,o,n){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,o,n);else if(isNaN(t))e(2143289344,o,n);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,o,n);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,o,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((r<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,o,n)}}function o(e,t,o){var n=e(t,o),r=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:r*(1/0):0===i?1401298464324817e-60*r*a:r*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=o.bind(null,i),e.readFloatBE=o.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),o=new Uint8Array(t.buffer),n=128===o[7];function r(e,n,r){t[0]=e,n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3],n[r+4]=o[4],n[r+5]=o[5],n[r+6]=o[6],n[r+7]=o[7]}function i(e,n,r){t[0]=e,n[r]=o[7],n[r+1]=o[6],n[r+2]=o[5],n[r+3]=o[4],n[r+4]=o[3],n[r+5]=o[2],n[r+6]=o[1],n[r+7]=o[0]}function a(e,n){return o[0]=e[n],o[1]=e[n+1],o[2]=e[n+2],o[3]=e[n+3],o[4]=e[n+4],o[5]=e[n+5],o[6]=e[n+6],o[7]=e[n+7],t[0]}function c(e,n){return o[7]=e[n],o[6]=e[n+1],o[5]=e[n+2],o[4]=e[n+3],o[3]=e[n+4],o[2]=e[n+5],o[1]=e[n+6],o[0]=e[n+7],t[0]}e.writeDoubleLE=n?r:i,e.writeDoubleBE=n?i:r,e.readDoubleLE=n?a:c,e.readDoubleBE=n?c:a}():function(){function t(e,t,o,n,r,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,r,i+t),e(1/n>0?0:2147483648,r,i+o);else if(isNaN(n))e(0,r,i+t),e(2146959360,r,i+o);else if(n>17976931348623157e292)e(0,r,i+t),e((a<<31|2146435072)>>>0,r,i+o);else{var c;if(n<22250738585072014e-324)e((c=n/5e-324)>>>0,r,i+t),e((a<<31|c/4294967296)>>>0,r,i+o);else{var s=Math.floor(Math.log(n)/Math.LN2);1024===s&&(s=1023),e(4503599627370496*(c=n*Math.pow(2,-s))>>>0,r,i+t),e((a<<31|s+1023<<20|1048576*c&1048575)>>>0,r,i+o)}}}function o(e,t,o,n,r){var i=e(n,r+t),a=e(n,r+o),c=2*(a>>31)+1,s=a>>>20&2047,l=4294967296*(1048575&a)+i;return 2047===s?l?NaN:c*(1/0):0===s?5e-324*c*l:c*Math.pow(2,s-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=o.bind(null,i,0,4),e.readDoubleBE=o.bind(null,a,4,0)}(),e}function n(e,t,o){t[o]=255&e,t[o+1]=e>>>8&255,t[o+2]=e>>>16&255,t[o+3]=e>>>24}function r(e,t,o){t[o]=e>>>24,t[o+1]=e>>>16&255,t[o+2]=e>>>8&255,t[o+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=o(o)},{}],10:[function(require,module,exports){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],11:[function(e,t){"use strict";t.exports=function(e,t,o){var n=o||8192,r=n>>>1,i=null,a=n;return function(o){if(o<1||o>r)return e(o);a+o>n&&(i=e(n),a=0);var c=t.call(i,a,a+=o);return 7&a&&(a=1+(7|a)),c}}},{}],12:[function(e,t,o){"use strict";var n=o;n.length=function(e){for(var t=0,o=0,n=0;n<e.length;++n)(o=e.charCodeAt(n))<128?t+=1:o<2048?t+=2:55296==(64512&o)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,o){if(o-t<1)return"";for(var n,r=null,i=[],a=0;t<o;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,i)),a=0);return r?(a&&r.push(String.fromCharCode.apply(String,i.slice(0,a))),r.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(e,t,o){for(var n,r,i=o,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[o++]=n:n<2048?(t[o++]=n>>6|192,t[o++]=63&n|128):55296==(64512&n)&&56320==(64512&(r=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&r),++a,t[o++]=n>>18|240,t[o++]=n>>12&63|128,t[o++]=n>>6&63|128,t[o++]=63&n|128):(t[o++]=n>>12|224,t[o++]=n>>6&63|128,t[o++]=63&n|128);return o-i}},{}],13:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.BlockCipher,n=t.algo,r=[],i=[],a=[],c=[],s=[],l=[],u=[],p=[],d=[],f=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var o=0,n=0;for(t=0;t<256;t++){var h=n^n<<1^n<<2^n<<3^n<<4;h=h>>>8^255&h^99,r[o]=h,i[h]=o;var g=e[o],y=e[g],m=e[y],_=257*e[h]^16843008*h;a[o]=_<<24|_>>>8,c[o]=_<<16|_>>>16,s[o]=_<<8|_>>>24,l[o]=_,_=16843009*m^65537*y^257*g^16843008*o,u[h]=_<<24|_>>>8,p[h]=_<<16|_>>>16,d[h]=_<<8|_>>>24,f[h]=_,o?(o=g^e[e[e[m^g]]],n^=e[e[n]]):o=n=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=o.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,o=e.sigBytes/4,n=4*((this._nRounds=o+6)+1),i=this._keySchedule=[],a=0;a<n;a++)a<o?i[a]=t[a]:(l=i[a-1],a%o?o>6&&a%o==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=h[a/o|0]<<24),i[a]=i[a-o]^l);for(var c=this._invKeySchedule=[],s=0;s<n;s++){if(a=n-s,s%4)var l=i[a];else l=i[a-4];c[s]=s<4||a<=4?l:u[r[l>>>24]]^p[r[l>>>16&255]]^d[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,c,s,l,r)},decryptBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,u,p,d,f,i),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,n,r,i,a,c){for(var s=this._nRounds,l=e[t]^o[0],u=e[t+1]^o[1],p=e[t+2]^o[2],d=e[t+3]^o[3],f=4,h=1;h<s;h++){var g=n[l>>>24]^r[u>>>16&255]^i[p>>>8&255]^a[255&d]^o[f++],y=n[u>>>24]^r[p>>>16&255]^i[d>>>8&255]^a[255&l]^o[f++],m=n[p>>>24]^r[d>>>16&255]^i[l>>>8&255]^a[255&u]^o[f++],_=n[d>>>24]^r[l>>>16&255]^i[u>>>8&255]^a[255&p]^o[f++];l=g,u=y,p=m,d=_}g=(c[l>>>24]<<24|c[u>>>16&255]<<16|c[p>>>8&255]<<8|c[255&d])^o[f++],y=(c[u>>>24]<<24|c[p>>>16&255]<<16|c[d>>>8&255]<<8|c[255&l])^o[f++],m=(c[p>>>24]<<24|c[d>>>16&255]<<16|c[l>>>8&255]<<8|c[255&u])^o[f++],_=(c[d>>>24]<<24|c[l>>>16&255]<<16|c[u>>>8&255]<<8|c[255&p])^o[f++],e[t]=g,e[t+1]=y,e[t+2]=m,e[t+3]=_},keySize:8});t.AES=o._createHelper(g)}(),e.AES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15,"./enc-base64":16,"./evpkdf":19,"./md5":24}],14:[function(e,t,o){var n;n=function(e){e.lib.Cipher||function(t){var o=e,n=o.lib,r=n.Base,i=n.WordArray,a=n.BufferedBlockAlgorithm,c=o.enc,s=(c.Utf8,c.Base64),l=o.algo.EvpKDF,u=n.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:m}return function(t){return{encrypt:function(o,n,r){return e(n).encrypt(t,o,n,r)},decrypt:function(o,n,r){return e(n).decrypt(t,o,n,r)}}}}()}),p=(n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),o.mode={}),d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=p.CBC=function(){var e=d.extend();function o(e,o,n){var r,i=this._iv;i?(r=i,this._iv=t):r=this._prevBlock;for(var a=0;a<n;a++)e[o+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),o.call(this,e,t,r),this._prevBlock=i}}),e}(),h=(o.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,n=o-e.sigBytes%o,r=n<<24|n<<16|n<<8|n,a=[],c=0;c<n;c+=4)a.push(r);var s=i.create(a,n);e.concat(s)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:h}),reset:function(){var e;u.reset.call(this);var t=this.cfg,o=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,o&&o.words):(this._mode=e.call(n,this,o&&o.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,o=e.salt;return(o?i.create([1398893684,1701076831]).concat(o).concat(t):t).toString(s)},parse:function(e){var t,o=s.parse(e),n=o.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=i.create(n.slice(2,4)),n.splice(0,4),o.sigBytes-=16),g.create({ciphertext:o,salt:t})}},m=n.SerializableCipher=r.extend({cfg:r.extend({format:y}),encrypt:function(e,t,o,n){n=this.cfg.extend(n);var r=e.createEncryptor(o,n),i=r.finalize(t),a=r.cfg;return g.create({ciphertext:i,key:o,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,o,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(o,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(o.kdf={}).OpenSSL={execute:function(e,t,o,n){n||(n=i.random(8));var r=l.create({keySize:t+o}).compute(e,n),a=i.create(r.words.slice(t),4*o);return r.sigBytes=4*t,g.create({key:r,iv:a,salt:n})}},v=n.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:_}),encrypt:function(e,t,o,n){var r=(n=this.cfg.extend(n)).kdf.execute(o,e.keySize,e.ivSize);n.iv=r.iv;var i=m.encrypt.call(this,e,t,r.key,n);return i.mixIn(r),i},decrypt:function(e,t,o,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(o,e.keySize,e.ivSize,t.salt);return n.iv=r.iv,m.decrypt.call(this,e,t,r.key,n)}})}()},"object"==typeof o?t.exports=o=n(e("./core"),e("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],n):n(this.CryptoJS)},{"./core":15,"./evpkdf":19}],15:[function(t,o,n){(function(r){var i;i=function(){var o=o||function(o){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r&&r.crypto&&(n=r.crypto),!n&&"function"==typeof t)try{n=t("crypto")}catch(m){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(m){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(m){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),c={},s=c.lib={},l=s.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,o=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<r;i++){var a=o[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=a<<24-(n+i)%4*8}else for(var c=0;c<r;c+=4)t[n+c>>>2]=o[c>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=o.ceil(t/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],o=0;o<e;o+=4)t.push(i());return new u.init(t,e)}}),p=c.enc={},d=p.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n+=2)o[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new u.init(o,t/2)}},f=p.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n++)o[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new u.init(o,t)}},h=p.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},g=s.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t,n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,c=i/(4*a),s=(c=e?o.ceil(c):o.max((0|c)-this._minBufferSize,0))*a,l=o.min(4*s,i);if(s){for(var p=0;p<s;p+=a)this._doProcessBlock(r,p);t=r.splice(0,s),n.sigBytes-=l}return new u.init(t,l)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=(s.Hasher=g.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new y.HMAC.init(e,o).finalize(t)}}}),c.algo={});return c}(Math);return o},"object"==typeof n?o.exports=n=i():"function"==typeof define&&define.amd?define([],i):this.CryptoJS=i()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:1}],16:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray;function n(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var c=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=c<<24-i%4*8,i++}return o.create(r,i)}t.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,n=this._map;e.clamp();for(var r=[],i=0;i<o;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<o;c++)r.push(n.charAt(a>>>6*(3-c)&63));var s=n.charAt(64);if(s)for(;r.length%4;)r.push(s);return r.join("")},parse:function(e){var t=e.length,o=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<o.length;i++)r[o.charCodeAt(i)]=i}var a=o.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(t=c)}return n(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],17:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray;function n(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var c=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=c<<24-i%4*8,i++}return o.create(r,i)}t.enc.Base64url={stringify:function(e,t=!0){var o=e.words,n=e.sigBytes,r=t?this._safe_map:this._map;e.clamp();for(var i=[],a=0;a<n;a+=3)for(var c=(o[a>>>2]>>>24-a%4*8&255)<<16|(o[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|o[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)i.push(r.charAt(c>>>6*(3-s)&63));var l=r.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e,t=!0){var o=e.length,r=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<r.length;a++)i[r.charCodeAt(a)]=a}var c=r.charAt(64);if(c){var s=e.indexOf(c);-1!==s&&(o=s)}return n(e,o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],18:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray,n=t.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r+=2){var i=t[r>>>2]>>>16-r%4*8&65535;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return o.create(n,2*t)}},n.Utf16LE={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],i=0;i<o;i+=2){var a=r(t[i>>>2]>>>16-i%4*8&65535);n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>1]|=r(e.charCodeAt(i)<<16-i%2*16);return o.create(n,2*t)}}}(),e.enc.Utf16},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],19:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,c;return n=(o=(t=e).lib).Base,r=o.WordArray,a=(i=t.algo).MD5,c=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o,n=this.cfg,i=n.hasher.create(),a=r.create(),c=a.words,s=n.keySize,l=n.iterations;c.length<s;){o&&i.update(o),o=i.update(e).finalize(t),i.reset();for(var u=1;u<l;u++)o=i.finalize(o),i.reset();a.concat(o)}return a.sigBytes=4*s,a}}),t.EvpKDF=function(e,t,o){return c.create(o).compute(e,t)},e.EvpKDF},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(this.CryptoJS)},{"./core":15,"./hmac":21,"./sha1":40}],20:[function(e,t,o){var n;n=function(e){var t,o,n;return o=(t=e).lib.CipherParams,n=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var t=n.parse(e);return o.create({ciphertext:t})}},e.format.Hex},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],21:[function(e,t,o){var n;n=function(e){var t,o,n;o=(t=e).lib.Base,n=t.enc.Utf8,t.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var o=e.blockSize,r=4*o;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),c=i.words,s=a.words,l=0;l<o;l++)c[l]^=1549556828,s[l]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,o=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(o))}})},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],22:[function(e,t,o){var n;n=function(e){return e},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core"),e("./lib-typedarrays"),e("./enc-utf16"),e("./enc-base64"),e("./enc-base64url"),e("./md5"),e("./sha1"),e("./sha256"),e("./sha224"),e("./sha512"),e("./sha384"),e("./sha3"),e("./ripemd160"),e("./hmac"),e("./pbkdf2"),e("./evpkdf"),e("./cipher-core"),e("./mode-cfb"),e("./mode-ctr"),e("./mode-ctr-gladman"),e("./mode-ofb"),e("./mode-ecb"),e("./pad-ansix923"),e("./pad-iso10126"),e("./pad-iso97971"),e("./pad-zeropadding"),e("./pad-nopadding"),e("./format-hex"),e("./aes"),e("./tripledes"),e("./rc4"),e("./rabbit"),e("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],n):this.CryptoJS=n(this.CryptoJS)},{"./aes":13,"./cipher-core":14,"./core":15,"./enc-base64":16,"./enc-base64url":17,"./enc-utf16":18,"./evpkdf":19,"./format-hex":20,"./hmac":21,"./lib-typedarrays":23,"./md5":24,"./mode-cfb":25,"./mode-ctr":27,"./mode-ctr-gladman":26,"./mode-ecb":28,"./mode-ofb":29,"./pad-ansix923":30,"./pad-iso10126":31,"./pad-iso97971":32,"./pad-nopadding":33,"./pad-zeropadding":34,"./pbkdf2":35,"./rabbit":37,"./rabbit-legacy":36,"./rc4":38,"./ripemd160":39,"./sha1":40,"./sha224":41,"./sha256":42,"./sha3":43,"./sha384":44,"./sha512":45,"./tripledes":46,"./x64-core":47}],23:[function(e,t,o){var n;n=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,o=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;o.call(this,n,t)}else o.apply(this,arguments)}).prototype=t}}(),e.lib.WordArray},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],24:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,i=n.Hasher,a=o.algo,c=[];(function(){for(var e=0;e<64;e++)c[e]=4294967296*t.abs(t.sin(e+1))|0})();var s=a.MD5=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var n=t+o,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i=this._hash.words,a=e[t+0],s=e[t+1],f=e[t+2],h=e[t+3],g=e[t+4],y=e[t+5],m=e[t+6],_=e[t+7],v=e[t+8],S=e[t+9],N=e[t+10],b=e[t+11],C=e[t+12],P=e[t+13],I=e[t+14],w=e[t+15],T=i[0],O=i[1],R=i[2],E=i[3];T=l(T,O,R,E,a,7,c[0]),E=l(E,T,O,R,s,12,c[1]),R=l(R,E,T,O,f,17,c[2]),O=l(O,R,E,T,h,22,c[3]),T=l(T,O,R,E,g,7,c[4]),E=l(E,T,O,R,y,12,c[5]),R=l(R,E,T,O,m,17,c[6]),O=l(O,R,E,T,_,22,c[7]),T=l(T,O,R,E,v,7,c[8]),E=l(E,T,O,R,S,12,c[9]),R=l(R,E,T,O,N,17,c[10]),O=l(O,R,E,T,b,22,c[11]),T=l(T,O,R,E,C,7,c[12]),E=l(E,T,O,R,P,12,c[13]),R=l(R,E,T,O,I,17,c[14]),T=u(T,O=l(O,R,E,T,w,22,c[15]),R,E,s,5,c[16]),E=u(E,T,O,R,m,9,c[17]),R=u(R,E,T,O,b,14,c[18]),O=u(O,R,E,T,a,20,c[19]),T=u(T,O,R,E,y,5,c[20]),E=u(E,T,O,R,N,9,c[21]),R=u(R,E,T,O,w,14,c[22]),O=u(O,R,E,T,g,20,c[23]),T=u(T,O,R,E,S,5,c[24]),E=u(E,T,O,R,I,9,c[25]),R=u(R,E,T,O,h,14,c[26]),O=u(O,R,E,T,v,20,c[27]),T=u(T,O,R,E,P,5,c[28]),E=u(E,T,O,R,f,9,c[29]),R=u(R,E,T,O,_,14,c[30]),T=p(T,O=u(O,R,E,T,C,20,c[31]),R,E,y,4,c[32]),E=p(E,T,O,R,v,11,c[33]),R=p(R,E,T,O,b,16,c[34]),O=p(O,R,E,T,I,23,c[35]),T=p(T,O,R,E,s,4,c[36]),E=p(E,T,O,R,g,11,c[37]),R=p(R,E,T,O,_,16,c[38]),O=p(O,R,E,T,N,23,c[39]),T=p(T,O,R,E,P,4,c[40]),E=p(E,T,O,R,a,11,c[41]),R=p(R,E,T,O,h,16,c[42]),O=p(O,R,E,T,m,23,c[43]),T=p(T,O,R,E,S,4,c[44]),E=p(E,T,O,R,C,11,c[45]),R=p(R,E,T,O,w,16,c[46]),T=d(T,O=p(O,R,E,T,f,23,c[47]),R,E,a,6,c[48]),E=d(E,T,O,R,_,10,c[49]),R=d(R,E,T,O,I,15,c[50]),O=d(O,R,E,T,y,21,c[51]),T=d(T,O,R,E,C,6,c[52]),E=d(E,T,O,R,h,10,c[53]),R=d(R,E,T,O,N,15,c[54]),O=d(O,R,E,T,s,21,c[55]),T=d(T,O,R,E,v,6,c[56]),E=d(E,T,O,R,w,10,c[57]),R=d(R,E,T,O,m,15,c[58]),O=d(O,R,E,T,P,21,c[59]),T=d(T,O,R,E,g,6,c[60]),E=d(E,T,O,R,b,10,c[61]),R=d(R,E,T,O,f,15,c[62]),O=d(O,R,E,T,S,21,c[63]),i[0]=i[0]+T|0,i[1]=i[1]+O|0,i[2]=i[2]+R|0,i[3]=i[3]+E|0},_doFinalize:function(){var e=this._data,o=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;o[r>>>5]|=128<<24-r%32;var i=t.floor(n/4294967296),a=n;o[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),o[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(o.length+1),this._process();for(var c=this._hash,s=c.words,l=0;l<4;l++){var u=s[l];s[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return c},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,o,n,r,i,a){var c=e+(t&o|~t&n)+r+a;return(c<<i|c>>>32-i)+t}function u(e,t,o,n,r,i,a){var c=e+(t&n|o&~n)+r+a;return(c<<i|c>>>32-i)+t}function p(e,t,o,n,r,i,a){var c=e+(t^o^n)+r+a;return(c<<i|c>>>32-i)+t}function d(e,t,o,n,r,i,a){var c=e+(o^(t|~n))+r+a;return(c<<i|c>>>32-i)+t}o.MD5=i._createHelper(s),o.HmacMD5=i._createHmacHelper(s)}(Math),e.MD5},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],25:[function(e,t,o){var n;n=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function o(e,t,o,n){var r,i=this._iv;i?(r=i.slice(0),this._iv=void 0):r=this._prevBlock,n.encryptBlock(r,0);for(var a=0;a<o;a++)e[t+a]^=r[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r,n),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);o.call(this,e,t,r,n),this._prevBlock=i}}),t}(),e.mode.CFB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],26:[function(e,t,o){var n;n=function(e){return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function o(e){if(255==(e>>24&255)){var t=e>>16&255,o=e>>8&255,n=255&e;255===t?(t=0,255===o?(o=0,255===n?n=0:++n):++o):++t,e=0,e+=t<<16,e+=o<<8,e+=n}else e+=1<<24;return e}function n(e){return 0===(e[0]=o(e[0]))&&(e[1]=o(e[1])),e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,r=o.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0),n(a);var c=a.slice(0);o.encryptBlock(c,0);for(var s=0;s<r;s++)e[t+s]^=c[s]}});return t.Decryptor=r,t}(),e.mode.CTRGladman},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],27:[function(e,t,o){var n;n=function(e){var t,o;return e.mode.CTR=(o=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,r=this._iv,i=this._counter;r&&(i=this._counter=r.slice(0),this._iv=void 0);var a=i.slice(0);o.encryptBlock(a,0),i[n-1]=i[n-1]+1|0;for(var c=0;c<n;c++)e[t+c]^=a[c]}}),t.Decryptor=o,t),e.mode.CTR},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],28:[function(e,t,o){var n;n=function(e){var t;return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],29:[function(e,t,o){var n;n=function(e){var t,o;return e.mode.OFB=(o=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,r=this._iv,i=this._keystream;r&&(i=this._keystream=r.slice(0),this._iv=void 0),o.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}}),t.Decryptor=o,t),e.mode.OFB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],30:[function(e,t,o){var n;n=function(e){return e.pad.AnsiX923={pad:function(e,t){var o=e.sigBytes,n=4*t,r=n-o%n,i=o+r-1;e.clamp(),e.words[i>>>2]|=r<<24-i%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],31:[function(e,t,o){var n;n=function(e){return e.pad.Iso10126={pad:function(t,o){var n=4*o,r=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],32:[function(e,t,o){var n;n=function(e){return e.pad.Iso97971={pad:function(t,o){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,o)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],33:[function(e,t,o){var n;n=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],34:[function(e,t,o){var n;n=function(e){return e.pad.ZeroPadding={pad:function(e,t){var o=4*t;e.clamp(),e.sigBytes+=o-(e.sigBytes%o||o)},unpad:function(e){var t=e.words,o=e.sigBytes-1;for(o=e.sigBytes-1;o>=0;o--)if(t[o>>>2]>>>24-o%4*8&255){e.sigBytes=o+1;break}}},e.pad.ZeroPadding},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15}],35:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,c,s;return n=(o=(t=e).lib).Base,r=o.WordArray,a=(i=t.algo).SHA1,c=i.HMAC,s=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,n=c.create(o.hasher,e),i=r.create(),a=r.create([1]),s=i.words,l=a.words,u=o.keySize,p=o.iterations;s.length<u;){var d=n.update(t).finalize(a);n.reset();for(var f=d.words,h=f.length,g=d,y=1;y<p;y++){g=n.finalize(g),n.reset();for(var m=g.words,_=0;_<h;_++)f[_]^=m[_]}i.concat(d),l[0]++}return i.sigBytes=4*u,i}}),t.PBKDF2=function(e,t,o){return s.create(o).compute(e,t)},e.PBKDF2},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(this.CryptoJS)},{"./core":15,"./hmac":21,"./sha1":40}],36:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.StreamCipher,n=t.algo,r=[],i=[],a=[],c=n.RabbitLegacy=o.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)s.call(this);for(r=0;r<8;r++)n[r]^=o[r+4&7];if(t){var i=t.words,a=i[0],c=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),p=l>>>16|4294901760&u,d=u<<16|65535&l;for(n[0]^=l,n[1]^=p,n[2]^=u,n[3]^=d,n[4]^=l,n[5]^=p,n[6]^=u,n[7]^=d,r=0;r<4;r++)s.call(this)}},_doProcessBlock:function(e,t){var o=this._X;s.call(this),r[0]=o[0]^o[5]>>>16^o[3]<<16,r[1]=o[2]^o[7]>>>16^o[5]<<16,r[2]=o[4]^o[1]>>>16^o[7]<<16,r[3]=o[6]^o[3]>>>16^o[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,o=0;o<8;o++)i[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,o=0;o<8;o++){var n=e[o]+t[o],r=65535&n,c=n>>>16,s=((r*r>>>17)+r*c>>>15)+c*c,l=((4294901760&n)*n|0)+((65535&n)*n|0);a[o]=s^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=o._createHelper(c)}(),e.RabbitLegacy},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15,"./enc-base64":16,"./evpkdf":19,"./md5":24}],37:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.StreamCipher,n=t.algo,r=[],i=[],a=[],c=n.Rabbit=o.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,o=0;o<4;o++)e[o]=16711935&(e[o]<<8|e[o]>>>24)|4278255360&(e[o]<<24|e[o]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,o=0;o<4;o++)s.call(this);for(o=0;o<8;o++)r[o]^=n[o+4&7];if(t){var i=t.words,a=i[0],c=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),p=l>>>16|4294901760&u,d=u<<16|65535&l;for(r[0]^=l,r[1]^=p,r[2]^=u,r[3]^=d,r[4]^=l,r[5]^=p,r[6]^=u,r[7]^=d,o=0;o<4;o++)s.call(this)}},_doProcessBlock:function(e,t){var o=this._X;s.call(this),r[0]=o[0]^o[5]>>>16^o[3]<<16,r[1]=o[2]^o[7]>>>16^o[5]<<16,r[2]=o[4]^o[1]>>>16^o[7]<<16,r[3]=o[6]^o[3]>>>16^o[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,o=0;o<8;o++)i[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,o=0;o<8;o++){var n=e[o]+t[o],r=65535&n,c=n>>>16,s=((r*r>>>17)+r*c>>>15)+c*c,l=((4294901760&n)*n|0)+((65535&n)*n|0);a[o]=s^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=o._createHelper(c)}(),e.Rabbit},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15,"./enc-base64":16,"./evpkdf":19,"./md5":24}],38:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.StreamCipher,n=t.algo,r=n.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,o=e.sigBytes,n=this._S=[],r=0;r<256;r++)n[r]=r;r=0;for(var i=0;r<256;r++){var a=r%o,c=t[a>>>2]>>>24-a%4*8&255;i=(i+n[r]+c)%256;var s=n[r];n[r]=n[i],n[i]=s}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,o=this._j,n=0,r=0;r<4;r++){o=(o+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[o],e[o]=i,n|=e[(e[t]+e[o])%256]<<24-8*r}return this._i=t,this._j=o,n}t.RC4=o._createHelper(r);var a=n.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});t.RC4Drop=o._createHelper(a)}(),e.RC4},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15,"./enc-base64":16,"./evpkdf":19,"./md5":24}],39:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib,n=o.WordArray,r=o.Hasher,i=t.algo,a=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=n.create([0,1518500249,1859775393,2400959708,2840853838]),p=n.create([1352829926,1548603684,1836072691,2053994217,0]),d=i.RIPEMD160=r.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var n=t+o,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i,d,v,S,N,b,C,P,I,w,T,O=this._hash.words,R=u.words,E=p.words,A=a.words,D=c.words,k=s.words,L=l.words;for(b=i=O[0],C=d=O[1],P=v=O[2],I=S=O[3],w=N=O[4],o=0;o<80;o+=1)T=i+e[t+A[o]]|0,T+=o<16?f(d,v,S)+R[0]:o<32?h(d,v,S)+R[1]:o<48?g(d,v,S)+R[2]:o<64?y(d,v,S)+R[3]:m(d,v,S)+R[4],T=(T=_(T|=0,k[o]))+N|0,i=N,N=S,S=_(v,10),v=d,d=T,T=b+e[t+D[o]]|0,T+=o<16?m(C,P,I)+E[0]:o<32?y(C,P,I)+E[1]:o<48?g(C,P,I)+E[2]:o<64?h(C,P,I)+E[3]:f(C,P,I)+E[4],T=(T=_(T|=0,L[o]))+w|0,b=w,w=I,I=_(P,10),P=C,C=T;T=O[1]+v+I|0,O[1]=O[2]+S+w|0,O[2]=O[3]+N+b|0,O[3]=O[4]+i+C|0,O[4]=O[0]+d+P|0,O[0]=T},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,i=r.words,a=0;a<5;a++){var c=i[a];i[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return r},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,o){return e^t^o}function h(e,t,o){return e&t|~e&o}function g(e,t,o){return(e|~t)^o}function y(e,t,o){return e&o|t&~o}function m(e,t,o){return e^(t|~o)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=r._createHelper(d),t.HmacRIPEMD160=r._createHmacHelper(d)}(Math),e.RIPEMD160},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],40:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,c;return o=(t=e).lib,n=o.WordArray,r=o.Hasher,i=t.algo,a=[],c=i.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],i=o[2],c=o[3],s=o[4],l=0;l<80;l++){if(l<16)a[l]=0|e[t+l];else{var u=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=u<<1|u>>>31}var p=(n<<5|n>>>27)+s+a[l];p+=l<20?1518500249+(r&i|~r&c):l<40?1859775393+(r^i^c):l<60?(r&i|r&c|i&c)-1894007588:(r^i^c)-899497514,s=c,c=i,i=r<<30|r>>>2,r=n,n=p}o[0]=o[0]+n|0,o[1]=o[1]+r|0,o[2]=o[2]+i|0,o[3]=o[3]+c|0,o[4]=o[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(o/4294967296),t[15+(n+64>>>9<<4)]=o,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=r._createHelper(c),t.HmacSHA1=r._createHmacHelper(c),e.SHA1},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],41:[function(e,t,o){var n;n=function(e){var t,o,n,r,i;return o=(t=e).lib.WordArray,n=t.algo,r=n.SHA256,i=n.SHA224=r.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=r._createHelper(i),t.HmacSHA224=r._createHmacHelper(i),e.SHA224},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha256")):"function"==typeof define&&define.amd?define(["./core","./sha256"],n):n(this.CryptoJS)},{"./core":15,"./sha256":42}],42:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,i=n.Hasher,a=o.algo,c=[],s=[];(function(){function e(e){for(var o=t.sqrt(e),n=2;n<=o;n++)if(!(e%n))return!1;return!0}function o(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)e(n)&&(r<8&&(c[r]=o(t.pow(n,.5))),s[r]=o(t.pow(n,1/3)),r++),n++})();var l=[],u=a.SHA256=i.extend({_doReset:function(){this._hash=new r.init(c.slice(0))},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],i=o[2],a=o[3],c=o[4],u=o[5],p=o[6],d=o[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var h=l[f-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,y=l[f-2],m=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=g+l[f-7]+m+l[f-16]}var _=n&r^n&i^r&i,v=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),S=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&p)+s[f]+l[f];d=p,p=u,u=c,c=a+S|0,a=i,i=r,r=n,n=S+(v+_)|0}o[0]=o[0]+n|0,o[1]=o[1]+r|0,o[2]=o[2]+i|0,o[3]=o[3]+a|0,o[4]=o[4]+c|0,o[5]=o[5]+u|0,o[6]=o[6]+p|0,o[7]=o[7]+d|0},_doFinalize:function(){var e=this._data,o=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return o[r>>>5]|=128<<24-r%32,o[14+(r+64>>>9<<4)]=t.floor(n/4294967296),o[15+(r+64>>>9<<4)]=n,e.sigBytes=4*o.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});o.SHA256=i._createHelper(u),o.HmacSHA256=i._createHmacHelper(u)}(Math),e.SHA256},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],43:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,i=n.Hasher,a=o.x64.Word,c=o.algo,s=[],l=[],u=[];(function(){for(var e=1,t=0,o=0;o<24;o++){s[e+5*t]=(o+1)*(o+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,i=0;i<24;i++){for(var c=0,p=0,d=0;d<7;d++){if(1&r){var f=(1<<d)-1;f<32?p^=1<<f:c^=1<<f-32}128&r?r=r<<1^113:r<<=1}u[i]=a.create(c,p)}})();var p=[];(function(){for(var e=0;e<25;e++)p[e]=a.create()})();var d=c.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var o=this._state,n=this.blockSize/2,r=0;r<n;r++){var i=e[t+2*r],a=e[t+2*r+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(O=o[r]).high^=a,O.low^=i}for(var c=0;c<24;c++){for(var d=0;d<5;d++){for(var f=0,h=0,g=0;g<5;g++)f^=(O=o[d+5*g]).high,h^=O.low;var y=p[d];y.high=f,y.low=h}for(d=0;d<5;d++){var m=p[(d+4)%5],_=p[(d+1)%5],v=_.high,S=_.low;for(f=m.high^(v<<1|S>>>31),h=m.low^(S<<1|v>>>31),g=0;g<5;g++)(O=o[d+5*g]).high^=f,O.low^=h}for(var N=1;N<25;N++){var b=(O=o[N]).high,C=O.low,P=s[N];P<32?(f=b<<P|C>>>32-P,h=C<<P|b>>>32-P):(f=C<<P-32|b>>>64-P,h=b<<P-32|C>>>64-P);var I=p[l[N]];I.high=f,I.low=h}var w=p[0],T=o[0];for(w.high=T.high,w.low=T.low,d=0;d<5;d++)for(g=0;g<5;g++){var O=o[N=d+5*g],R=p[N],E=p[(d+1)%5+5*g],A=p[(d+2)%5+5*g];O.high=R.high^~E.high&A.high,O.low=R.low^~E.low&A.low}O=o[0];var D=u[c];O.high^=D.high,O.low^=D.low}},_doFinalize:function(){var e=this._data,o=e.words,n=(this._nDataBytes,8*e.sigBytes),i=32*this.blockSize;o[n>>>5]|=1<<24-n%32,o[(t.ceil((n+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*o.length,this._process();for(var a=this._state,c=this.cfg.outputLength/8,s=c/8,l=[],u=0;u<s;u++){var p=a[u],d=p.high,f=p.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(d)}return new r.init(l,c)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),o=0;o<25;o++)t[o]=t[o].clone();return e}});o.SHA3=i._createHelper(d),o.HmacSHA3=i._createHmacHelper(d)}(Math),e.SHA3},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":15,"./x64-core":47}],44:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,c;return o=(t=e).x64,n=o.Word,r=o.WordArray,i=t.algo,a=i.SHA512,c=i.SHA384=a.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=a._createHelper(c),t.HmacSHA384=a._createHmacHelper(c),e.SHA384},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core"),e("./sha512")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./sha512"],n):n(this.CryptoJS)},{"./core":15,"./sha512":45,"./x64-core":47}],45:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.Hasher,n=t.x64,r=n.Word,i=n.WordArray,a=t.algo;function c(){return r.create.apply(r,arguments)}var s=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],l=[];(function(){for(var e=0;e<80;e++)l[e]=c()})();var u=a.SHA512=o.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],i=o[2],a=o[3],c=o[4],u=o[5],p=o[6],d=o[7],f=n.high,h=n.low,g=r.high,y=r.low,m=i.high,_=i.low,v=a.high,S=a.low,N=c.high,b=c.low,C=u.high,P=u.low,I=p.high,w=p.low,T=d.high,O=d.low,R=f,E=h,A=g,D=y,k=m,L=_,B=v,M=S,F=N,G=b,U=C,x=P,j=I,H=w,z=T,W=O,V=0;V<80;V++){var K,Y,q=l[V];if(V<16)Y=q.high=0|e[t+2*V],K=q.low=0|e[t+2*V+1];else{var J=l[V-15],X=J.high,Z=J.low,Q=(X>>>1|Z<<31)^(X>>>8|Z<<24)^X>>>7,$=(Z>>>1|X<<31)^(Z>>>8|X<<24)^(Z>>>7|X<<25),ee=l[V-2],te=ee.high,oe=ee.low,ne=(te>>>19|oe<<13)^(te<<3|oe>>>29)^te>>>6,re=(oe>>>19|te<<13)^(oe<<3|te>>>29)^(oe>>>6|te<<26),ie=l[V-7],ae=ie.high,ce=ie.low,se=l[V-16],le=se.high,ue=se.low;Y=(Y=(Y=Q+ae+((K=$+ce)>>>0<$>>>0?1:0))+ne+((K+=re)>>>0<re>>>0?1:0))+le+((K+=ue)>>>0<ue>>>0?1:0),q.high=Y,q.low=K}var pe,de=F&U^~F&j,fe=G&x^~G&H,he=R&A^R&k^A&k,ge=E&D^E&L^D&L,ye=(R>>>28|E<<4)^(R<<30|E>>>2)^(R<<25|E>>>7),me=(E>>>28|R<<4)^(E<<30|R>>>2)^(E<<25|R>>>7),_e=(F>>>14|G<<18)^(F>>>18|G<<14)^(F<<23|G>>>9),ve=(G>>>14|F<<18)^(G>>>18|F<<14)^(G<<23|F>>>9),Se=s[V],Ne=Se.high,be=Se.low,Ce=z+_e+((pe=W+ve)>>>0<W>>>0?1:0),Pe=me+ge;z=j,W=H,j=U,H=x,U=F,x=G,F=B+(Ce=(Ce=(Ce=Ce+de+((pe+=fe)>>>0<fe>>>0?1:0))+Ne+((pe+=be)>>>0<be>>>0?1:0))+Y+((pe+=K)>>>0<K>>>0?1:0))+((G=M+pe|0)>>>0<M>>>0?1:0)|0,B=k,M=L,k=A,L=D,A=R,D=E,R=Ce+(ye+he+(Pe>>>0<me>>>0?1:0))+((E=pe+Pe|0)>>>0<pe>>>0?1:0)|0}h=n.low=h+E,n.high=f+R+(h>>>0<E>>>0?1:0),y=r.low=y+D,r.high=g+A+(y>>>0<D>>>0?1:0),_=i.low=_+L,i.high=m+k+(_>>>0<L>>>0?1:0),S=a.low=S+M,a.high=v+B+(S>>>0<M>>>0?1:0),b=c.low=b+G,c.high=N+F+(b>>>0<G>>>0?1:0),P=u.low=P+x,u.high=C+U+(P>>>0<x>>>0?1:0),w=p.low=w+H,p.high=I+j+(w>>>0<H>>>0?1:0),O=d.low=O+W,d.high=T+z+(O>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(o/4294967296),t[31+(n+128>>>10<<5)]=o,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=o._createHelper(u),t.HmacSHA512=o._createHmacHelper(u)}(),e.SHA512},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":15,"./x64-core":47}],46:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib,n=o.WordArray,r=o.BlockCipher,i=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],s=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=i.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],o=0;o<56;o++){var n=a[o]-1;t[o]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],i=0;i<16;i++){var l=r[i]=[],u=s[i];for(o=0;o<24;o++)l[o/6|0]|=t[(c[o]-1+u)%28]<<31-o%6,l[4+(o/6|0)]|=t[28+(c[o+24]-1+u)%28]<<31-o%6;for(l[0]=l[0]<<1|l[0]>>>31,o=1;o<7;o++)l[o]=l[o]>>>4*(o-1)+3;l[7]=l[7]<<5|l[7]>>>27}var p=this._invSubKeys=[];for(o=0;o<16;o++)p[o]=r[15-o]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,o){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=o[n],i=this._lBlock,a=this._rBlock,c=0,s=0;s<8;s++)c|=l[s][((a^r[s])&u[s])>>>0];this._lBlock=a,this._rBlock=i^c}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var o=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=o,this._lBlock^=o<<e}function f(e,t){var o=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=o,this._rBlock^=o<<e}t.DES=r._createHelper(p);var h=i.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),o=e.length<4?e.slice(0,2):e.slice(2,4),r=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=p.createEncryptor(n.create(t)),this._des2=p.createEncryptor(n.create(o)),this._des3=p.createEncryptor(n.create(r))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=r._createHelper(h)}(),e.TripleDES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":14,"./core":15,"./enc-base64":16,"./evpkdf":19,"./md5":24}],47:[function(e,t,o){var n;n=function(e){var t,o,n,r,i;return o=(t=e).lib,n=o.Base,r=o.WordArray,(i=t.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,o=[],n=0;n<t;n++){var i=e[n];o.push(i.high),o.push(i.low)}return r.create(o,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),o=t.length,r=0;r<o;r++)t[r]=t[r].clone();return e}}),e},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":15}],48:[function(e,t){"use strict";var o={single_source_shortest_paths:function(e,t,n){var r={},i={};i[t]=0;var a,c,s,l,u,p,d,f=o.PriorityQueue.make();for(f.push(t,0);!f.empty();)for(s in c=(a=f.pop()).value,l=a.cost,u=e[c]||{})u.hasOwnProperty(s)&&(p=l+u[s],d=i[s],(void 0===i[s]||d>p)&&(i[s]=p,f.push(s,p),r[s]=c));if(void 0!==n&&void 0===i[n]){var h=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(h)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var o=[],n=t;n;)o.push(n),e[n],n=e[n];return o.reverse(),o},find_path:function(e,t,n){var r=o.single_source_shortest_paths(e,t,n);return o.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t,n=o.PriorityQueue,r={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r.queue=[],r.sorter=e.sorter||n.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var o={value:e,cost:t};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};void 0!==t&&(t.exports=o)},{}],49:[function(e,t){"use strict";t.exports=function(e){for(var t=[],o=e.length,n=0;n<o;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319&&o>n+1){var i=e.charCodeAt(n+1);i>=56320&&i<=57343&&(r=1024*(r-55296)+i-56320+65536,n+=1)}r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<55296||r>=57344&&r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=65536&&r<=1114111?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},{}],50:[function(e,t){"use strict";var o=e("./lib/js-yaml.js");t.exports=o},{"./lib/js-yaml.js":51}],51:[function(e,t){"use strict";var o=e("./js-yaml/loader"),n=e("./js-yaml/dumper");function r(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}t.exports.Type=e("./js-yaml/type"),t.exports.Schema=e("./js-yaml/schema"),t.exports.FAILSAFE_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.JSON_SCHEMA=e("./js-yaml/schema/json"),t.exports.CORE_SCHEMA=e("./js-yaml/schema/core"),t.exports.DEFAULT_SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_FULL_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.load=o.load,t.exports.loadAll=o.loadAll,t.exports.safeLoad=o.safeLoad,t.exports.safeLoadAll=o.safeLoadAll,t.exports.dump=n.dump,t.exports.safeDump=n.safeDump,t.exports.YAMLException=e("./js-yaml/exception"),t.exports.MINIMAL_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.scan=r("scan"),t.exports.parse=r("parse"),t.exports.compose=r("compose"),t.exports.addConstructor=r("addConstructor")},{"./js-yaml/dumper":53,"./js-yaml/exception":54,"./js-yaml/loader":55,"./js-yaml/schema":57,"./js-yaml/schema/core":58,"./js-yaml/schema/default_full":59,"./js-yaml/schema/default_safe":60,"./js-yaml/schema/failsafe":61,"./js-yaml/schema/json":62,"./js-yaml/type":63}],52:[function(e,t){"use strict";function o(e){return null==e}t.exports.isNothing=o,t.exports.isObject=function(e){return"object"==typeof e&&null!==e},t.exports.toArray=function(e){return Array.isArray(e)?e:o(e)?[]:[e]},t.exports.repeat=function(e,t){var o,n="";for(o=0;o<t;o+=1)n+=e;return n},t.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},t.exports.extend=function(e,t){var o,n,r,i;if(t)for(o=0,n=(i=Object.keys(t)).length;o<n;o+=1)e[r=i[o]]=t[r];return e}},{}],53:[function(e,t){"use strict";var o=e("./common"),n=e("./exception"),r=e("./schema/default_full"),i=e("./schema/default_safe"),a=Object.prototype.toString,c=Object.prototype.hasOwnProperty,s=9,l=10,u=13,p=32,d=33,f=34,h=35,g=37,y=38,m=39,_=42,v=44,S=45,N=58,b=61,C=62,P=63,I=64,w=91,T=93,O=96,R=123,E=124,A=125,D={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},k=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function L(e,t){var o,n,r,i,a,s,l;if(null===t)return{};for(o={},r=0,i=(n=Object.keys(t)).length;r<i;r+=1)a=n[r],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=e.compiledTypeMap.fallback[a])&&c.call(l.styleAliases,s)&&(s=l.styleAliases[s]),o[a]=s;return o}function B(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else{if(!(e<=4294967295))throw new n("code point within a string may not be greater than 0xFFFFFFFF");r="U",i=8}return"\\"+r+o.repeat("0",i-t.length)+t}function M(e){this.schema=e.schema||r,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=o.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=L(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function F(e,t){for(var n,r=o.repeat(" ",t),i=0,a=-1,c="",s=e.length;i<s;)-1===(a=e.indexOf("\n",i))?(n=e.slice(i),i=s):(n=e.slice(i,a+1),i=a+1),n.length&&"\n"!==n&&(c+=r),c+=n;return c}function G(e,t){return"\n"+o.repeat(" ",e.indent*t)}function U(e,t){var o,n;for(o=0,n=e.implicitTypes.length;o<n;o+=1)if(e.implicitTypes[o].resolve(t))return!0;return!1}function x(e){return e===p||e===s}function j(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function H(e){return j(e)&&!x(e)&&65279!==e&&e!==u&&e!==l}function z(e,t){return j(e)&&65279!==e&&e!==v&&e!==w&&e!==T&&e!==R&&e!==A&&e!==N&&(e!==h||t&&H(t))}function W(e){return/^\n* /.test(e)}var V=1,K=2,Y=3,q=4,J=5;function X(e,t,o,n,r){var i,a,c,s,u=!1,p=!1,D=-1!==n,k=-1,L=j(s=e.charCodeAt(0))&&65279!==s&&!x(s)&&s!==S&&s!==P&&s!==N&&s!==v&&s!==w&&s!==T&&s!==R&&s!==A&&s!==h&&s!==y&&s!==_&&s!==d&&s!==E&&s!==b&&s!==C&&s!==m&&s!==f&&s!==g&&s!==I&&s!==O&&!x(e.charCodeAt(e.length-1));if(t)for(i=0;i<e.length;i++){if(!j(a=e.charCodeAt(i)))return J;c=i>0?e.charCodeAt(i-1):null,L=L&&z(a,c)}else{for(i=0;i<e.length;i++){if((a=e.charCodeAt(i))===l)u=!0,D&&(p=p||i-k-1>n&&" "!==e[k+1],k=i);else if(!j(a))return J;c=i>0?e.charCodeAt(i-1):null,L=L&&z(a,c)}p=p||D&&i-k-1>n&&" "!==e[k+1]}return u||p?o>9&&W(e)?J:p?q:Y:L&&!r(e)?V:K}function Z(e,t,o,r){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==k.indexOf(t))return"'"+t+"'";var i=e.indent*Math.max(1,o),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),c=r||e.flowLevel>-1&&o>=e.flowLevel;switch(X(t,c,e.indent,a,function(t){return U(e,t)})){case V:return t;case K:return"'"+t.replace(/'/g,"''")+"'";case Y:return"|"+Q(t,e.indent)+$(F(t,i));case q:return">"+Q(t,e.indent)+$(F(ee(t,a),i));case J:return'"'+oe(t)+'"';default:throw new n("impossible error: invalid scalar style")}}()}function Q(e,t){var o=W(e)?String(t):"",n="\n"===e[e.length-1];return o+(!n||"\n"!==e[e.length-2]&&"\n"!==e?n?"":"-":"+")+"\n"}function $(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function ee(e,t){for(var o,n,r,i=/(\n+)([^\n]*)/g,a=(o=-1!==(o=e.indexOf("\n"))?o:e.length,i.lastIndex=o,te(e.slice(0,o),t)),c="\n"===e[0]||" "===e[0];r=i.exec(e);){var s=r[1],l=r[2];n=" "===l[0],a+=s+(c||n||""===l?"":"\n")+te(l,t),c=n}return a}function te(e,t){if(""===e||" "===e[0])return e;for(var o,n,r=/ [^ ]/g,i=0,a=0,c=0,s="";o=r.exec(e);)(c=o.index)-i>t&&(n=a>i?a:c,s+="\n"+e.slice(i,n),i=n+1),a=c;return s+="\n",e.length-i>t&&a>i?s+=e.slice(i,a)+"\n"+e.slice(a+1):s+=e.slice(i),s.slice(1)}function oe(e){for(var t,o,n,r="",i=0;i<e.length;i++)(t=e.charCodeAt(i))>=55296&&t<=56319&&(o=e.charCodeAt(i+1))>=56320&&o<=57343?(r+=B(1024*(t-55296)+o-56320+65536),i++):r+=!(n=D[t])&&j(t)?e[i]:n||B(t);return r}function ne(e,t,o){var n,r,i="",a=e.tag;for(n=0,r=o.length;n<r;n+=1)se(e,t,o[n],!1,!1)&&(0!==n&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=a,e.dump="["+i+"]"}function re(e,t,o,n){var r,i,a="",c=e.tag;for(r=0,i=o.length;r<i;r+=1)se(e,t+1,o[r],!0,!0)&&(n&&0===r||(a+=G(e,t)),e.dump&&l===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=c,e.dump=a||"[]"}function ie(e,t,o){var n,r,i,a,c,s="",l=e.tag,u=Object.keys(o);for(n=0,r=u.length;n<r;n+=1)c="",0!==n&&(c+=", "),e.condenseFlow&&(c+='"'),a=o[i=u[n]],se(e,t,i,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),se(e,t,a,!1,!1)&&(s+=c+=e.dump));e.tag=l,e.dump="{"+s+"}"}function ae(e,t,o,r){var i,a,c,s,u,p,d="",f=e.tag,h=Object.keys(o);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new n("sortKeys must be a boolean or a function");for(i=0,a=h.length;i<a;i+=1)p="",r&&0===i||(p+=G(e,t)),s=o[c=h[i]],se(e,t+1,c,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&l===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,u&&(p+=G(e,t)),se(e,t+1,s,!0,u)&&(e.dump&&l===e.dump.charCodeAt(0)?p+=":":p+=": ",d+=p+=e.dump));e.tag=f,e.dump=d||"{}"}function ce(e,t,o){var r,i,s,l,u,p;for(s=0,l=(i=o?e.explicitTypes:e.implicitTypes).length;s<l;s+=1)if(((u=i[s]).instanceOf||u.predicate)&&(!u.instanceOf||"object"==typeof t&&t instanceof u.instanceOf)&&(!u.predicate||u.predicate(t))){if(e.tag=o?u.tag:"?",u.represent){if(p=e.styleMap[u.tag]||u.defaultStyle,"[object Function]"===a.call(u.represent))r=u.represent(t,p);else{if(!c.call(u.represent,p))throw new n("!<"+u.tag+'> tag resolver accepts not "'+p+'" style');r=u.represent[p](t,p)}e.dump=r}return!0}return!1}function se(e,t,o,r,i,c){e.tag=null,e.dump=o,ce(e,o,!1)||ce(e,o,!0);var s=a.call(e.dump);r&&(r=e.flowLevel<0||e.flowLevel>t);var l,u,p="[object Object]"===s||"[object Array]"===s;if(p&&(u=-1!==(l=e.duplicates.indexOf(o))),(null!==e.tag&&"?"!==e.tag||u||2!==e.indent&&t>0)&&(i=!1),u&&e.usedDuplicates[l])e.dump="*ref_"+l;else{if(p&&u&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),"[object Object]"===s)r&&0!==Object.keys(e.dump).length?(ae(e,t,e.dump,i),u&&(e.dump="&ref_"+l+e.dump)):(ie(e,t,e.dump),u&&(e.dump="&ref_"+l+" "+e.dump));else if("[object Array]"===s){var d=e.noArrayIndent&&t>0?t-1:t;r&&0!==e.dump.length?(re(e,d,e.dump,i),u&&(e.dump="&ref_"+l+e.dump)):(ne(e,d,e.dump),u&&(e.dump="&ref_"+l+" "+e.dump))}else{if("[object String]"!==s){if(e.skipInvalid)return!1;throw new n("unacceptable kind of an object to dump "+s)}"?"!==e.tag&&Z(e,e.dump,t,c)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function le(e,t){var o,n,r=[],i=[];for(ue(e,r,i),o=0,n=i.length;o<n;o+=1)t.duplicates.push(r[i[o]]);t.usedDuplicates=new Array(n)}function ue(e,t,o){var n,r,i;if(null!==e&&"object"==typeof e)if(-1!==(r=t.indexOf(e)))-1===o.indexOf(r)&&o.push(r);else if(t.push(e),Array.isArray(e))for(r=0,i=e.length;r<i;r+=1)ue(e[r],t,o);else for(r=0,i=(n=Object.keys(e)).length;r<i;r+=1)ue(e[n[r]],t,o)}function pe(e,t){var o=new M(t=t||{});return o.noRefs||le(e,o),se(o,0,e,!0,!0)?o.dump+"\n":""}t.exports.dump=pe,t.exports.safeDump=function(e,t){return pe(e,o.extend({schema:i},t))}},{"./common":52,"./exception":54,"./schema/default_full":59,"./schema/default_safe":60}],54:[function(e,t){"use strict";function o(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},t.exports=o},{}],55:[function(e,t){"use strict";var o=e("./common"),n=e("./exception"),r=e("./mark"),i=e("./schema/default_safe"),a=e("./schema/default_full"),c=Object.prototype.hasOwnProperty,s=1,l=2,u=3,p=4,d=1,f=2,h=3,g=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y=/[\x85\u2028\u2029]/,m=/[,\[\]\{\}]/,_=/^(?:!|!!|![a-z\-]+!)$/i,v=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function S(e){return Object.prototype.toString.call(e)}function N(e){return 10===e||13===e}function b(e){return 9===e||32===e}function C(e){return 9===e||32===e||10===e||13===e}function P(e){return 44===e||91===e||93===e||123===e||125===e}function I(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function w(e){return 48===e?"\0":97===e?"\x07":98===e?"\b":116===e?"\t":9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"\x1b":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?"\xa0":76===e?"\u2028":80===e?"\u2029":""}function T(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var O=new Array(256),R=new Array(256),E=0;E<256;E++)O[E]=w(E)?1:0,R[E]=w(E);function A(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||a,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function D(e,t){return new n(t,new r(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function k(e,t){throw D(e,t)}function L(e,t){e.onWarning&&e.onWarning.call(null,D(e,t))}var B={YAML:function(e,t,o){var n,r,i;null!==e.version&&k(e,"duplication of %YAML directive"),1!==o.length&&k(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(o[0]))&&k(e,"ill-formed argument of the YAML directive"),r=parseInt(n[1],10),i=parseInt(n[2],10),1!==r&&k(e,"unacceptable YAML version of the document"),e.version=o[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&L(e,"unsupported YAML version of the document")},TAG:function(e,t,o){var n,r;2!==o.length&&k(e,"TAG directive accepts exactly two arguments"),n=o[0],r=o[1],_.test(n)||k(e,"ill-formed tag handle (first argument) of the TAG directive"),c.call(e.tagMap,n)&&k(e,'there is a previously declared suffix for "'+n+'" tag handle'),v.test(r)||k(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=r}};function M(e,t,o,n){var r,i,a,c;if(t<o){if(c=e.input.slice(t,o),n)for(r=0,i=c.length;r<i;r+=1)9===(a=c.charCodeAt(r))||32<=a&&a<=1114111||k(e,"expected valid JSON character");else g.test(c)&&k(e,"the stream contains non-printable characters");e.result+=c}}function F(e,t,n,r){var i,a,s,l;for(o.isObject(n)||k(e,"cannot merge mappings; the provided source object is unacceptable"),s=0,l=(i=Object.keys(n)).length;s<l;s+=1)a=i[s],c.call(t,a)||(t[a]=n[a],r[a]=!0)}function G(e,t,o,n,r,i,a,s){var l,u;if(Array.isArray(r))for(l=0,u=(r=Array.prototype.slice.call(r)).length;l<u;l+=1)Array.isArray(r[l])&&k(e,"nested arrays are not supported inside keys"),"object"==typeof r&&"[object Object]"===S(r[l])&&(r[l]="[object Object]");if("object"==typeof r&&"[object Object]"===S(r)&&(r="[object Object]"),r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)F(e,t,i[l],o);else F(e,t,i,o);else e.json||c.call(o,r)||!c.call(t,r)||(e.line=a||e.line,e.position=s||e.position,k(e,"duplicated mapping key")),t[r]=i,delete o[r];return t}function U(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):k(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function x(e,t,o){for(var n=0,r=e.input.charCodeAt(e.position);0!==r;){for(;b(r);)r=e.input.charCodeAt(++e.position);if(t&&35===r)do{r=e.input.charCodeAt(++e.position)}while(10!==r&&13!==r&&0!==r);if(!N(r))break;for(U(e),r=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position)}return-1!==o&&0!==n&&e.lineIndent<o&&L(e,"deficient indentation"),n}function j(e){var t,o=e.position;return!(45!==(t=e.input.charCodeAt(o))&&46!==t||t!==e.input.charCodeAt(o+1)||t!==e.input.charCodeAt(o+2)||(o+=3,0!==(t=e.input.charCodeAt(o))&&!C(t)))}function H(e,t){1===t?e.result+=" ":t>1&&(e.result+=o.repeat("\n",t-1))}function z(e,t,o){var n,r,i,a,c,s,l,u,p=e.kind,d=e.result;if(C(u=e.input.charCodeAt(e.position))||P(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(C(n=e.input.charCodeAt(e.position+1))||o&&P(n)))return!1;for(e.kind="scalar",e.result="",r=i=e.position,a=!1;0!==u;){if(58===u){if(C(n=e.input.charCodeAt(e.position+1))||o&&P(n))break}else if(35===u){if(C(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&j(e)||o&&P(u))break;if(N(u)){if(c=e.line,s=e.lineStart,l=e.lineIndent,x(e,!1,-1),e.lineIndent>=t){a=!0,u=e.input.charCodeAt(e.position);continue}e.position=i,e.line=c,e.lineStart=s,e.lineIndent=l;break}}a&&(M(e,r,i,!1),H(e,e.line-c),r=i=e.position,a=!1),b(u)||(i=e.position+1),u=e.input.charCodeAt(++e.position)}return M(e,r,i,!1),!!e.result||(e.kind=p,e.result=d,!1)}function W(e,t){var o,n,r;if(39!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(o=e.input.charCodeAt(e.position));)if(39===o){if(M(e,n,e.position,!0),39!==(o=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,r=e.position}else N(o)?(M(e,n,r,!0),H(e,x(e,!1,t)),n=r=e.position):e.position===e.lineStart&&j(e)?k(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);k(e,"unexpected end of the stream within a single quoted scalar")}function V(e,t){var o,n,r,i,a,c,s;if(34!==(c=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,o=n=e.position;0!==(c=e.input.charCodeAt(e.position));){if(34===c)return M(e,o,e.position,!0),e.position++,!0;if(92===c){if(M(e,o,e.position,!0),N(c=e.input.charCodeAt(++e.position)))x(e,!1,t);else if(c<256&&O[c])e.result+=R[c],e.position++;else if((a=120===(s=c)?2:117===s?4:85===s?8:0)>0){for(r=a,i=0;r>0;r--)(a=I(c=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+a:k(e,"expected hexadecimal character");e.result+=T(i),e.position++}else k(e,"unknown escape sequence");o=n=e.position}else N(c)?(M(e,o,n,!0),H(e,x(e,!1,t)),o=n=e.position):e.position===e.lineStart&&j(e)?k(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}k(e,"unexpected end of the stream within a double quoted scalar")}function K(e,t){var o,n,r,i,a,c,l,u,p,d,f=!0,h=e.tag,g=e.anchor,y={};if(91===(d=e.input.charCodeAt(e.position)))r=93,c=!1,n=[];else{if(123!==d)return!1;r=125,c=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),d=e.input.charCodeAt(++e.position);0!==d;){if(x(e,!0,t),(d=e.input.charCodeAt(e.position))===r)return e.position++,e.tag=h,e.anchor=g,e.kind=c?"mapping":"sequence",e.result=n,!0;f||k(e,"missed comma between flow collection entries"),p=null,i=a=!1,63===d&&C(e.input.charCodeAt(e.position+1))&&(i=a=!0,e.position++,x(e,!0,t)),o=e.line,$(e,t,s,!1,!0),u=e.tag,l=e.result,x(e,!0,t),d=e.input.charCodeAt(e.position),!a&&e.line!==o||58!==d||(i=!0,d=e.input.charCodeAt(++e.position),x(e,!0,t),$(e,t,s,!1,!0),p=e.result),c?G(e,n,y,u,l,p):i?n.push(G(e,null,y,u,l,p)):n.push(l),x(e,!0,t),44===(d=e.input.charCodeAt(e.position))?(f=!0,d=e.input.charCodeAt(++e.position)):f=!1}k(e,"unexpected end of the stream within a flow collection")}function Y(e,t){var n,r,i,a,c,s=d,l=!1,u=!1,p=t,g=0,y=!1;if(124===(a=e.input.charCodeAt(e.position)))r=!1;else{if(62!==a)return!1;r=!0}for(e.kind="scalar",e.result="";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)d===s?s=43===a?h:f:k(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(c=a)&&c<=57?c-48:-1)>=0))break;0===i?k(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?k(e,"repeat of an indentation width identifier"):(p=t+i-1,u=!0)}if(b(a)){do{a=e.input.charCodeAt(++e.position)}while(b(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!N(a)&&0!==a)}for(;0!==a;){for(U(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!u||e.lineIndent<p)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!u&&e.lineIndent>p&&(p=e.lineIndent),N(a))g++;else{if(e.lineIndent<p){s===h?e.result+=o.repeat("\n",l?1+g:g):s===d&&l&&(e.result+="\n");break}for(r?b(a)?(y=!0,e.result+=o.repeat("\n",l?1+g:g)):y?(y=!1,e.result+=o.repeat("\n",g+1)):0===g?l&&(e.result+=" "):e.result+=o.repeat("\n",g):e.result+=o.repeat("\n",l?1+g:g),l=!0,u=!0,g=0,n=e.position;!N(a)&&0!==a;)a=e.input.charCodeAt(++e.position);M(e,n,e.position,!1)}}return!0}function q(e,t){var o,n,r=e.tag,i=e.anchor,a=[],c=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),n=e.input.charCodeAt(e.position);0!==n&&45===n&&C(e.input.charCodeAt(e.position+1));)if(c=!0,e.position++,x(e,!0,-1)&&e.lineIndent<=t)a.push(null),n=e.input.charCodeAt(e.position);else if(o=e.line,$(e,t,u,!1,!0),a.push(e.result),x(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===o||e.lineIndent>t)&&0!==n)k(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!c&&(e.tag=r,e.anchor=i,e.kind="sequence",e.result=a,!0)}function J(e,t,o){var n,r,i,a,c,s=e.tag,u=e.anchor,d={},f={},h=null,g=null,y=null,m=!1,_=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),c=e.input.charCodeAt(e.position);0!==c;){if(n=e.input.charCodeAt(e.position+1),i=e.line,a=e.position,63!==c&&58!==c||!C(n)){if(!$(e,o,l,!1,!0))break;if(e.line===i){for(c=e.input.charCodeAt(e.position);b(c);)c=e.input.charCodeAt(++e.position);if(58===c)C(c=e.input.charCodeAt(++e.position))||k(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(G(e,d,f,h,g,null),h=g=y=null),_=!0,m=!1,r=!1,h=e.tag,g=e.result;else{if(!_)return e.tag=s,e.anchor=u,!0;k(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!_)return e.tag=s,e.anchor=u,!0;k(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(m&&(G(e,d,f,h,g,null),h=g=y=null),_=!0,m=!0,r=!0):m?(m=!1,r=!0):k(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=n;if((e.line===i||e.lineIndent>t)&&($(e,t,p,!0,r)&&(m?g=e.result:y=e.result),m||(G(e,d,f,h,g,y,i,a),h=g=y=null),x(e,!0,-1),c=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==c)k(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&G(e,d,f,h,g,null),_&&(e.tag=s,e.anchor=u,e.kind="mapping",e.result=d),_}function X(e){var t,o,n,r,i=!1,a=!1;if(33!==(r=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&k(e,"duplication of a tag property"),60===(r=e.input.charCodeAt(++e.position))?(i=!0,r=e.input.charCodeAt(++e.position)):33===r?(a=!0,o="!!",r=e.input.charCodeAt(++e.position)):o="!",t=e.position,i){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&62!==r);e.position<e.length?(n=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):k(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==r&&!C(r);)33===r&&(a?k(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),_.test(o)||k(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),m.test(n)&&k(e,"tag suffix cannot contain flow indicator characters")}return n&&!v.test(n)&&k(e,"tag name cannot contain such characters: "+n),i?e.tag=n:c.call(e.tagMap,o)?e.tag=e.tagMap[o]+n:"!"===o?e.tag="!"+n:"!!"===o?e.tag="tag:yaml.org,2002:"+n:k(e,'undeclared tag handle "'+o+'"'),!0}function Z(e){var t,o;if(38!==(o=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&k(e,"duplication of an anchor property"),o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!C(o)&&!P(o);)o=e.input.charCodeAt(++e.position);return e.position===t&&k(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Q(e){var t,o,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!C(n)&&!P(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&k(e,"name of an alias node must contain at least one character"),o=e.input.slice(t,e.position),c.call(e.anchorMap,o)||k(e,'unidentified alias "'+o+'"'),e.result=e.anchorMap[o],x(e,!0,-1),!0}function $(e,t,o,n,r){var i,a,d,f,h,g,y,m,_=1,v=!1,S=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=a=d=p===o||u===o,n&&x(e,!0,-1)&&(v=!0,e.lineIndent>t?_=1:e.lineIndent===t?_=0:e.lineIndent<t&&(_=-1)),1===_)for(;X(e)||Z(e);)x(e,!0,-1)?(v=!0,d=i,e.lineIndent>t?_=1:e.lineIndent===t?_=0:e.lineIndent<t&&(_=-1)):d=!1;if(d&&(d=v||r),1!==_&&p!==o||(y=s===o||l===o?t:t+1,m=e.position-e.lineStart,1===_?d&&(q(e,m)||J(e,m,y))||K(e,y)?S=!0:(a&&Y(e,y)||W(e,y)||V(e,y)?S=!0:Q(e)?(S=!0,null===e.tag&&null===e.anchor||k(e,"alias node should not have any properties")):z(e,y,s===o)&&(S=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===_&&(S=d&&q(e,m))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&k(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,h=e.implicitTypes.length;f<h;f+=1)if((g=e.implicitTypes[f]).resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else c.call(e.typeMap[e.kind||"fallback"],e.tag)?(g=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&g.kind!==e.kind&&k(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result)?(e.result=g.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):k(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):k(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||S}function ee(e){var t,o,n,r,i=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(r=e.input.charCodeAt(e.position))&&(x(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==r));){for(a=!0,r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!C(r);)r=e.input.charCodeAt(++e.position);for(n=[],(o=e.input.slice(t,e.position)).length<1&&k(e,"directive name must not be less than one character in length");0!==r;){for(;b(r);)r=e.input.charCodeAt(++e.position);if(35===r){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&!N(r));break}if(N(r))break;for(t=e.position;0!==r&&!C(r);)r=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==r&&U(e),c.call(B,o)?B[o](e,o,n):L(e,'unknown document directive "'+o+'"')}x(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,x(e,!0,-1)):a&&k(e,"directives end mark is expected"),$(e,e.lineIndent-1,p,!1,!0),x(e,!0,-1),e.checkLineBreaks&&y.test(e.input.slice(i,e.position))&&L(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&j(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,x(e,!0,-1)):e.position<e.length-1&&k(e,"end of the stream or a document separator is expected")}function te(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var o=new A(e,t),n=e.indexOf("\0");for(-1!==n&&(o.position=n,k(o,"null byte is not allowed in input")),o.input+="\0";32===o.input.charCodeAt(o.position);)o.lineIndent+=1,o.position+=1;for(;o.position<o.length-1;)ee(o);return o.documents}function oe(e,t,o){null!==t&&"object"==typeof t&&void 0===o&&(o=t,t=null);var n=te(e,o);if("function"!=typeof t)return n;for(var r=0,i=n.length;r<i;r+=1)t(n[r])}function ne(e,t){var o=te(e,t);if(0!==o.length){if(1===o.length)return o[0];throw new n("expected a single document in the stream, but found more")}}t.exports.loadAll=oe,t.exports.load=ne,t.exports.safeLoadAll=function(e,t,n){return"object"==typeof t&&null!==t&&void 0===n&&(n=t,t=null),oe(e,t,o.extend({schema:i},n))},t.exports.safeLoad=function(e,t){return ne(e,o.extend({schema:i},t))}},{"./common":52,"./exception":54,"./mark":56,"./schema/default_full":59,"./schema/default_safe":60}],56:[function(e,t){"use strict";var o=e("./common");function n(e,t,o,n,r){this.name=e,this.buffer=t,this.position=o,this.line=n,this.column=r}n.prototype.getSnippet=function(e,t){var n,r,i,a,c;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",r=this.position;r>0&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>t/2-1){n=" ... ",r+=5;break}for(i="",a=this.position;a<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(a));)if((a+=1)-this.position>t/2-1){i=" ... ",a-=5;break}return c=this.buffer.slice(r,a),o.repeat(" ",e)+n+c+i+"\n"+o.repeat(" ",e+this.position-r+n.length)+"^"},n.prototype.toString=function(e){var t,o="";return this.name&&(o+='in "'+this.name+'" '),o+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(o+=":\n"+t),o},t.exports=n},{"./common":52}],57:[function(e,t){"use strict";var o=e("./common"),n=e("./exception"),r=e("./type");function i(e,t,o){var n=[];return e.include.forEach(function(e){o=i(e,t,o)}),e[t].forEach(function(e){o.forEach(function(t,o){t.tag===e.tag&&t.kind===e.kind&&n.push(o)}),o.push(e)}),o.filter(function(e,t){return-1===n.indexOf(t)})}function a(){var e,t,o={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){o[e.kind][e.tag]=o.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return o}function c(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new n("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=i(this,"implicit",[]),this.compiledExplicit=i(this,"explicit",[]),this.compiledTypeMap=a(this.compiledImplicit,this.compiledExplicit)}c.DEFAULT=null,c.create=function(){var e,t;switch(arguments.length){case 1:e=c.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new n("Wrong number of arguments for Schema.create function")}if(e=o.toArray(e),t=o.toArray(t),!e.every(function(e){return e instanceof c}))throw new n("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof r}))throw new n("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new c({include:e,explicit:t})},t.exports=c},{"./common":52,"./exception":54,"./type":63}],58:[function(e,t){"use strict";var o=e("../schema");t.exports=new o({include:[e("./json")]})},{"../schema":57,"./json":62}],59:[function(e,t){"use strict";var o=e("../schema");t.exports=o.DEFAULT=new o({include:[e("./default_safe")],explicit:[e("../type/js/undefined"),e("../type/js/regexp"),e("../type/js/function")]})},{"../schema":57,"../type/js/function":68,"../type/js/regexp":69,"../type/js/undefined":70,"./default_safe":60}],60:[function(e,t){"use strict";var o=e("../schema");t.exports=new o({include:[e("./core")],implicit:[e("../type/timestamp"),e("../type/merge")],explicit:[e("../type/binary"),e("../type/omap"),e("../type/pairs"),e("../type/set")]})},{"../schema":57,"../type/binary":64,"../type/merge":72,"../type/omap":74,"../type/pairs":75,"../type/set":77,"../type/timestamp":79,"./core":58}],61:[function(e,t){"use strict";var o=e("../schema");t.exports=new o({explicit:[e("../type/str"),e("../type/seq"),e("../type/map")]})},{"../schema":57,"../type/map":71,"../type/seq":76,"../type/str":78}],62:[function(e,t){"use strict";var o=e("../schema");t.exports=new o({include:[e("./failsafe")],implicit:[e("../type/null"),e("../type/bool"),e("../type/int"),e("../type/float")]})},{"../schema":57,"../type/bool":65,"../type/float":66,"../type/int":67,"../type/null":73,"./failsafe":61}],63:[function(e,t){"use strict";var o=e("./exception"),n=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],r=["scalar","sequence","mapping"];t.exports=function(e,t){var i,a;if(t=t||{},Object.keys(t).forEach(function(t){if(-1===n.indexOf(t))throw new o('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(i=t.styleAliases||null,a={},null!==i&&Object.keys(i).forEach(function(e){i[e].forEach(function(t){a[String(t)]=e})}),a),-1===r.indexOf(this.kind))throw new o('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},{"./exception":54}],64:[function(e,t){"use strict";var o;try{o=e("buffer").Buffer}catch(i){}var n=e("../type"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";t.exports=new n("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,o,n=0,i=e.length,a=r;for(o=0;o<i;o++)if(!((t=a.indexOf(e.charAt(o)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,n,i=e.replace(/[\r\n=]/g,""),a=i.length,c=r,s=0,l=[];for(t=0;t<a;t++)t%4==0&&t&&(l.push(s>>16&255),l.push(s>>8&255),l.push(255&s)),s=s<<6|c.indexOf(i.charAt(t));return 0==(n=a%4*6)?(l.push(s>>16&255),l.push(s>>8&255),l.push(255&s)):18===n?(l.push(s>>10&255),l.push(s>>2&255)):12===n&&l.push(s>>4&255),o?o.from?o.from(l):new o(l):l},predicate:function(e){return o&&o.isBuffer(e)},represent:function(e){var t,o,n="",i=0,a=e.length,c=r;for(t=0;t<a;t++)t%3==0&&t&&(n+=c[i>>18&63],n+=c[i>>12&63],n+=c[i>>6&63],n+=c[63&i]),i=(i<<8)+e[t];return 0==(o=a%3)?(n+=c[i>>18&63],n+=c[i>>12&63],n+=c[i>>6&63],n+=c[63&i]):2===o?(n+=c[i>>10&63],n+=c[i>>4&63],n+=c[i<<2&63],n+=c[64]):1===o&&(n+=c[i>>2&63],n+=c[i<<4&63],n+=c[64],n+=c[64]),n}})},{"../type":63}],65:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},{"../type":63}],66:[function(e,t){"use strict";var o=e("../common"),n=e("../type"),r=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),i=/^[-+]?[0-9]+e/;t.exports=new n("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!r.test(e)||"_"===e[e.length-1])},construct:function(e){var t,o,n,r;return o="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,r=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===o?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(e){r.unshift(parseFloat(e,10))}),t=0,n=1,r.forEach(function(e){t+=e*n,n*=60}),o*t):o*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||o.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(o.isNegativeZero(e))return"-0.0";return n=e.toString(10),i.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})},{"../common":52,"../type":63}],67:[function(e,t){"use strict";var o=e("../common"),n=e("../type");function r(e){return 48<=e&&e<=55}function i(e){return 48<=e&&e<=57}t.exports=new n("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,o,n=e.length,a=0,c=!1;if(!n)return!1;if("-"!==(t=e[a])&&"+"!==t||(t=e[++a]),"0"===t){if(a+1===n)return!0;if("b"===(t=e[++a])){for(a++;a<n;a++)if("_"!==(t=e[a])){if("0"!==t&&"1"!==t)return!1;c=!0}return c&&"_"!==t}if("x"===t){for(a++;a<n;a++)if("_"!==(t=e[a])){if(!(48<=(o=e.charCodeAt(a))&&o<=57||65<=o&&o<=70||97<=o&&o<=102))return!1;c=!0}return c&&"_"!==t}for(;a<n;a++)if("_"!==(t=e[a])){if(!r(e.charCodeAt(a)))return!1;c=!0}return c&&"_"!==t}if("_"===t)return!1;for(;a<n;a++)if("_"!==(t=e[a])){if(":"===t)break;if(!i(e.charCodeAt(a)))return!1;c=!0}return!(!c||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(a)))},construct:function(e){var t,o,n=e,r=1,i=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?r*parseInt(n.slice(2),2):"x"===n[1]?r*parseInt(n,16):r*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach(function(e){i.unshift(parseInt(e,10))}),n=0,o=1,i.forEach(function(e){n+=e*o,o*=60}),r*n):r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!o.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},{"../common":52,"../type":63}],68:[function(e,t){"use strict";var o;try{o=e("esprima")}catch(r){"undefined"!=typeof window&&(o=window.esprima)}var n=e("../../type");t.exports=new n("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",n=o.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(r){return!1}},construct:function(e){var t,n="("+e+")",r=o.parse(n,{range:!0}),i=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"ArrowFunctionExpression"!==r.body[0].expression.type&&"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(e){i.push(e.name)}),t=r.body[0].expression.body.range,"BlockStatement"===r.body[0].expression.body.type?new Function(i,n.slice(t[0]+1,t[1]-1)):new Function(i,"return "+n.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},{"../../type":63}],69:[function(e,t){"use strict";var o=e("../../type");t.exports=new o("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,o=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(o&&(n=o[1]),n.length>3)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,o=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(o&&(n=o[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},{"../../type":63}],70:[function(e,t){"use strict";var o=e("../../type");t.exports=new o("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},{"../../type":63}],71:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},{"../type":63}],72:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},{"../type":63}],73:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},{"../type":63}],74:[function(e,t){"use strict";var o=e("../type"),n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;t.exports=new o("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,o,i,a,c,s=[],l=e;for(t=0,o=l.length;t<o;t+=1){if(i=l[t],c=!1,"[object Object]"!==r.call(i))return!1;for(a in i)if(n.call(i,a)){if(c)return!1;c=!0}if(!c)return!1;if(-1!==s.indexOf(a))return!1;s.push(a)}return!0},construct:function(e){return null!==e?e:[]}})},{"../type":63}],75:[function(e,t){"use strict";var o=e("../type"),n=Object.prototype.toString;t.exports=new o("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,o,r,i,a,c=e;for(a=new Array(c.length),t=0,o=c.length;t<o;t+=1){if(r=c[t],"[object Object]"!==n.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;a[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,o,n,r,i,a=e;for(i=new Array(a.length),t=0,o=a.length;t<o;t+=1)n=a[t],r=Object.keys(n),i[t]=[r[0],n[r[0]]];return i}})},{"../type":63}],76:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},{"../type":63}],77:[function(e,t){"use strict";var o=e("../type"),n=Object.prototype.hasOwnProperty;t.exports=new o("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,o=e;for(t in o)if(n.call(o,t)&&null!==o[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},{"../type":63}],78:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},{"../type":63}],79:[function(e,t){"use strict";var o=e("../type"),n=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),r=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");t.exports=new o("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==n.exec(e)||null!==r.exec(e))},construct:function(e){var t,o,i,a,c,s,l,u,p=0,d=null;if(null===(t=n.exec(e))&&(t=r.exec(e)),null===t)throw new Error("Date resolve error");if(o=+t[1],i=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(o,i,a));if(c=+t[4],s=+t[5],l=+t[6],t[7]){for(p=t[7].slice(0,3);p.length<3;)p+="0";p=+p}return t[9]&&(d=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(d=-d)),u=new Date(Date.UTC(o,i,a,c,s,l,p)),d&&u.setTime(u.getTime()-d),u},instanceOf:Date,represent:function(e){return e.toISOString()}})},{"../type":63}],80:[function(t,o,n){var r,i;r="undefined"!=typeof self?self:this,i=function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,o){return new e(new Uint8ClampedArray(t*o),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height||!this.data[t*this.width+e])},e.prototype.set=function(e,t,o){this.data[t*this.width+e]=o?1:0},e.prototype.setRegion=function(e,t,o,n,r){for(var i=t;i<t+n;i++)for(var a=e;a<e+o;a++)this.set(a,i,!!r)},e}();t.BitMatrix=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(2);t.addOrSubtractGF=function(e,t){return e^t};var r=function(){function e(e,t,o){this.primitive=e,this.size=t,this.generatorBase=o,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var r=1,i=0;i<this.size;i++)this.expTable[i]=r,(r*=2)>=this.size&&(r=(r^this.primitive)&this.size-1);for(i=0;i<this.size-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new n.default(this,Uint8ClampedArray.from([0])),this.one=new n.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("Invalid monomial degree less than 0");if(0===t)return this.zero;var o=new Uint8ClampedArray(e+1);return o[0]=t,new n.default(this,o)},e.prototype.log=function(e){if(0===e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}();t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),r=function(){function e(e,t){if(0===t.length)throw new Error("No coefficients.");this.field=e;var o=t.length;if(o>1&&0===t[0]){for(var n=1;n<o&&0===t[n];)n++;if(n===o)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(o-n);for(var r=0;r<this.coefficients.length;r++)this.coefficients[r]=t[n+r]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var o;if(this.isZero())return t;if(t.isZero())return this;var r=this.coefficients,i=t.coefficients;r.length>i.length&&(r=(o=[i,r])[0],i=o[1]);for(var a=new Uint8ClampedArray(i.length),c=i.length-r.length,s=0;s<c;s++)a[s]=i[s];for(s=c;s<i.length;s++)a[s]=n.addOrSubtractGF(r[s-c],i[s]);return new e(this.field,a)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var o=this.coefficients.length,n=new Uint8ClampedArray(o),r=0;r<o;r++)n[r]=this.field.multiply(this.coefficients[r],t);return new e(this.field,n)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var o=this.coefficients,r=o.length,i=t.coefficients,a=i.length,c=new Uint8ClampedArray(r+a-1),s=0;s<r;s++)for(var l=o[s],u=0;u<a;u++)c[s+u]=n.addOrSubtractGF(c[s+u],this.field.multiply(l,i[u]));return new e(this.field,c)},e.prototype.multiplyByMonomial=function(t,o){if(t<0)throw new Error("Invalid degree less than 0");if(0===o)return this.field.zero;for(var n=this.coefficients.length,r=new Uint8ClampedArray(n+t),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],o);return new e(this.field,r)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var o=this.coefficients.length;if(1===e)return this.coefficients.forEach(function(e){t=n.addOrSubtractGF(t,e)}),t;t=this.coefficients[0];for(var r=1;r<o;r++)t=n.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[r]);return t},e}();t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(4),r=o(5),i=o(11),a=o(12);function c(e){var t=a.locate(e);if(!t)return null;for(var o=0,n=t;o<n.length;o++){var c=n[o],s=i.extract(e,c),l=r.decode(s.matrix);if(l)return{binaryData:l.bytes,data:l.text,chunks:l.chunks,version:l.version,location:{topRightCorner:s.mappingFunction(c.dimension,0),topLeftCorner:s.mappingFunction(0,0),bottomRightCorner:s.mappingFunction(c.dimension,c.dimension),bottomLeftCorner:s.mappingFunction(0,c.dimension),topRightFinderPattern:c.topRight,topLeftFinderPattern:c.topLeft,bottomLeftFinderPattern:c.bottomLeft,bottomRightAlignmentPattern:c.alignmentPattern}}}return null}var s={inversionAttempts:"attemptBoth"};function l(e,t,o,r){void 0===r&&(r={});var i=s;Object.keys(i||{}).forEach(function(e){i[e]=r[e]||i[e]});var a="attemptBoth"===i.inversionAttempts||"invertFirst"===i.inversionAttempts,l="onlyInvert"===i.inversionAttempts||"invertFirst"===i.inversionAttempts,u=n.binarize(e,t,o,a),p=u.binarized,d=u.inverted,f=c(l?d:p);return f||"attemptBoth"!==i.inversionAttempts&&"invertFirst"!==i.inversionAttempts||(f=c(l?p:d)),f}l.default=l,t.default=l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0);function r(e,t,o){return e<t?t:e>o?o:e}var i=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,o){this.data[t*this.width+e]=o},e}();t.binarize=function(e,t,o,a){if(e.length!==t*o*4)throw new Error("Malformed data passed to binarizer.");for(var c=new i(t,o),s=0;s<t;s++)for(var l=0;l<o;l++){var u=e[4*(l*t+s)+0],p=e[4*(l*t+s)+1],d=e[4*(l*t+s)+2];c.set(s,l,.2126*u+.7152*p+.0722*d)}for(var f=Math.ceil(t/8),h=Math.ceil(o/8),g=new i(f,h),y=0;y<h;y++)for(var m=0;m<f;m++){var _=0,v=1/0,S=0;for(l=0;l<8;l++)for(s=0;s<8;s++){var N=c.get(8*m+s,8*y+l);_+=N,v=Math.min(v,N),S=Math.max(S,N)}var b=_/Math.pow(8,2);if(S-v<=24&&(b=v/2,y>0&&m>0)){var C=(g.get(m,y-1)+2*g.get(m-1,y)+g.get(m-1,y-1))/4;v<C&&(b=C)}g.set(m,y,b)}var P=n.BitMatrix.createEmpty(t,o),I=null;for(a&&(I=n.BitMatrix.createEmpty(t,o)),y=0;y<h;y++)for(m=0;m<f;m++){for(var w=r(m,2,f-3),T=r(y,2,h-3),O=(_=0,-2);O<=2;O++)for(var R=-2;R<=2;R++)_+=g.get(w+O,T+R);var E=_/25;for(O=0;O<8;O++)for(R=0;R<8;R++){s=8*m+O,l=8*y+R;var A=c.get(s,l);P.set(s,l,A<=E),a&&I.set(s,l,!(A<=E))}}return a?{binarized:P,inverted:I}:{binarized:P}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(6),i=o(9),a=o(10);function c(e,t){for(var o=e^t,n=0;o;)n++,o&=o-1;return n}function s(e,t){return t<<1|e}var l=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],u=[function(e){return(e.y+e.x)%2==0},function(e){return e.y%2==0},function(e){return e.x%3==0},function(e){return(e.y+e.x)%3==0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2==0},function(e){return e.x*e.y%2+e.x*e.y%3==0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2==0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2==0}];function p(e){var t=17+4*e.versionNumber,o=n.BitMatrix.createEmpty(t,t);o.setRegion(0,0,9,9,!0),o.setRegion(t-8,0,8,9,!0),o.setRegion(0,t-8,9,8,!0);for(var r=0,i=e.alignmentPatternCenters;r<i.length;r++)for(var a=i[r],c=0,s=e.alignmentPatternCenters;c<s.length;c++){var l=s[c];6===a&&6===l||6===a&&l===t-7||a===t-7&&6===l||o.setRegion(a-2,l-2,5,5,!0)}return o.setRegion(6,9,1,t-17,!0),o.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(o.setRegion(t-11,0,3,6,!0),o.setRegion(0,t-11,6,3,!0)),o}function d(e,t,o){for(var n=u[o.dataMask],r=e.height,i=p(t),a=[],c=0,l=0,d=!0,f=r-1;f>0;f-=2){6===f&&f--;for(var h=0;h<r;h++)for(var g=d?r-1-h:h,y=0;y<2;y++){var m=f-y;if(!i.get(m,g)){l++;var _=e.get(m,g);n({y:g,x:m})&&(_=!_),c=s(_,c),8===l&&(a.push(c),l=0,c=0)}}d=!d}return a}function f(e){var t=e.height,o=Math.floor((t-17)/4);if(o<=6)return a.VERSIONS[o-1];for(var n=0,r=5;r>=0;r--)for(var i=t-9;i>=t-11;i--)n=s(e.get(i,r),n);var l=0;for(i=5;i>=0;i--)for(r=t-9;r>=t-11;r--)l=s(e.get(i,r),l);for(var u,p=1/0,d=0,f=a.VERSIONS;d<f.length;d++){var h=f[d];if(h.infoBits===n||h.infoBits===l)return h;var g=c(n,h.infoBits);g<p&&(u=h,p=g),(g=c(l,h.infoBits))<p&&(u=h,p=g)}return p<=3?u:void 0}function h(e){for(var t=0,o=0;o<=8;o++)6!==o&&(t=s(e.get(o,8),t));for(var n=7;n>=0;n--)6!==n&&(t=s(e.get(8,n),t));var r=e.height,i=0;for(n=r-1;n>=r-7;n--)i=s(e.get(8,n),i);for(o=r-8;o<r;o++)i=s(e.get(o,8),i);for(var a=1/0,u=null,p=0,d=l;p<d.length;p++){var f=d[p],h=f.bits,g=f.formatInfo;if(h===t||h===i)return g;var y=c(t,h);y<a&&(u=g,a=y),t!==i&&(y=c(i,h))<a&&(u=g,a=y)}return a<=3?u:null}function g(e,t,o){var n=t.errorCorrectionLevels[o],r=[],i=0;if(n.ecBlocks.forEach(function(e){for(var t=0;t<e.numBlocks;t++)r.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),i+=e.dataCodewordsPerBlock+n.ecCodewordsPerBlock}),e.length<i)return null;e=e.slice(0,i);for(var a=n.ecBlocks[0].dataCodewordsPerBlock,c=0;c<a;c++)for(var s=0,l=r;s<l.length;s++)l[s].codewords.push(e.shift());if(n.ecBlocks.length>1){var u=n.ecBlocks[0].numBlocks,p=n.ecBlocks[1].numBlocks;for(c=0;c<p;c++)r[u+c].codewords.push(e.shift())}for(;e.length>0;)for(var d=0,f=r;d<f.length;d++)f[d].codewords.push(e.shift());return r}function y(e){var t=f(e);if(!t)return null;var o=h(e);if(!o)return null;var n=g(d(e,t,o),t,o.errorCorrectionLevel);if(!n)return null;for(var a=n.reduce(function(e,t){return e+t.numDataCodewords},0),c=new Uint8ClampedArray(a),s=0,l=0,u=n;l<u.length;l++){var p=u[l],y=i.decode(p.codewords,p.codewords.length-p.numDataCodewords);if(!y)return null;for(var m=0;m<p.numDataCodewords;m++)c[s++]=y[m]}try{return r.decode(c,t.versionNumber)}catch(_){return null}}t.decode=function(e){if(null==e)return null;var t=y(e);if(t)return t;for(var o=0;o<e.width;o++)for(var n=o+1;n<e.height;n++)e.get(o,n)!==e.get(n,o)&&(e.set(o,n,!e.get(o,n)),e.set(n,o,!e.get(n,o)));return y(e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,i=o(7),a=o(8);function c(e,t){for(var o=[],n="",r=[10,12,14][t],i=e.readBits(r);i>=3;){if((l=e.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var a=Math.floor(l/100),c=Math.floor(l/10)%10,s=l%10;o.push(48+a,48+c,48+s),n+=a.toString()+c.toString()+s.toString(),i-=3}if(2===i){if((l=e.readBits(7))>=100)throw new Error("Invalid numeric value above 99");a=Math.floor(l/10),c=l%10,o.push(48+a,48+c),n+=a.toString()+c.toString()}else if(1===i){var l;if((l=e.readBits(4))>=10)throw new Error("Invalid numeric value above 9");o.push(48+l),n+=l.toString()}return{bytes:o,text:n}}(function(e){e.Numeric="numeric",e.Alphanumeric="alphanumeric",e.Byte="byte",e.Kanji="kanji",e.ECI="eci"})(n=t.Mode||(t.Mode={})),function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI"}(r||(r={}));var s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(e,t){for(var o=[],n="",r=[9,11,13][t],i=e.readBits(r);i>=2;){var a=e.readBits(11),c=Math.floor(a/45),l=a%45;o.push(s[c].charCodeAt(0),s[l].charCodeAt(0)),n+=s[c]+s[l],i-=2}return 1===i&&(c=e.readBits(6),o.push(s[c].charCodeAt(0)),n+=s[c]),{bytes:o,text:n}}function u(e,t){for(var o=[],n="",r=[8,16,16][t],i=e.readBits(r),a=0;a<i;a++){var c=e.readBits(8);o.push(c)}try{n+=decodeURIComponent(o.map(function(e){return"%"+("0"+e.toString(16)).substr(-2)}).join(""))}catch(s){}return{bytes:o,text:n}}function p(e,t){for(var o=[],n="",r=[8,10,12][t],i=e.readBits(r),c=0;c<i;c++){var s=e.readBits(13),l=Math.floor(s/192)<<8|s%192;l+=l<7936?33088:49472,o.push(l>>8,255&l),n+=String.fromCharCode(a.shiftJISTable[l])}return{bytes:o,text:n}}t.decode=function(e,t){for(var o,a,s,d,f=new i.BitStream(e),h=t<=9?0:t<=26?1:2,g={text:"",bytes:[],chunks:[],version:t};f.available()>=4;){var y=f.readBits(4);if(y===r.Terminator)return g;if(y===r.ECI)0===f.readBits(1)?g.chunks.push({type:n.ECI,assignmentNumber:f.readBits(7)}):0===f.readBits(1)?g.chunks.push({type:n.ECI,assignmentNumber:f.readBits(14)}):0===f.readBits(1)?g.chunks.push({type:n.ECI,assignmentNumber:f.readBits(21)}):g.chunks.push({type:n.ECI,assignmentNumber:-1});else if(y===r.Numeric){var m=c(f,h);g.text+=m.text,(o=g.bytes).push.apply(o,m.bytes),g.chunks.push({type:n.Numeric,text:m.text})}else if(y===r.Alphanumeric){var _=l(f,h);g.text+=_.text,(a=g.bytes).push.apply(a,_.bytes),g.chunks.push({type:n.Alphanumeric,text:_.text})}else if(y===r.Byte){var v=u(f,h);g.text+=v.text,(s=g.bytes).push.apply(s,v.bytes),g.chunks.push({type:n.Byte,bytes:v.bytes,text:v.text})}else if(y===r.Kanji){var S=p(f,h);g.text+=S.text,(d=g.bytes).push.apply(d,S.bytes),g.chunks.push({type:n.Kanji,bytes:S.bytes,text:S.text})}}if(0===f.available()||0===f.readBits(f.available()))return g}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var o=8-this.bitOffset,n=e<o?e:o,r=255>>8-n<<(i=o-n);t=(this.bytes[this.byteOffset]&r)>>i,e-=n,this.bitOffset+=n,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;var i;e>0&&(r=255>>(i=8-e)<<i,t=t<<e|(this.bytes[this.byteOffset]&r)>>i,this.bitOffset+=e)}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),r=o(2);function i(e,t,o,n){var r;t.degree()<o.degree()&&(t=(r=[o,t])[0],o=r[1]);for(var i=t,a=o,c=e.zero,s=e.one;a.degree()>=n/2;){var l=i,u=c;if(c=s,(i=a).isZero())return null;a=l;for(var p=e.zero,d=i.getCoefficient(i.degree()),f=e.inverse(d);a.degree()>=i.degree()&&!a.isZero();){var h=a.degree()-i.degree(),g=e.multiply(a.getCoefficient(a.degree()),f);p=p.addOrSubtract(e.buildMonomial(h,g)),a=a.addOrSubtract(i.multiplyByMonomial(h,g))}if(s=p.multiplyPoly(c).addOrSubtract(u),a.degree()>=i.degree())return null}var y=s.getCoefficient(0);if(0===y)return null;var m=e.inverse(y);return[s.multiply(m),a.multiply(m)]}function a(e,t){var o=t.degree();if(1===o)return[t.getCoefficient(1)];for(var n=new Array(o),r=0,i=1;i<e.size&&r<o;i++)0===t.evaluateAt(i)&&(n[r]=e.inverse(i),r++);return r!==o?null:n}function c(e,t,o){for(var r=o.length,i=new Array(r),a=0;a<r;a++){for(var c=e.inverse(o[a]),s=1,l=0;l<r;l++)a!==l&&(s=e.multiply(s,n.addOrSubtractGF(1,e.multiply(o[l],c))));i[a]=e.multiply(t.evaluateAt(c),e.inverse(s)),0!==e.generatorBase&&(i[a]=e.multiply(i[a],c))}return i}t.decode=function(e,t){var o=new Uint8ClampedArray(e.length);o.set(e);for(var s=new n.default(285,256,0),l=new r.default(s,o),u=new Uint8ClampedArray(t),p=!1,d=0;d<t;d++){var f=l.evaluateAt(s.exp(d+s.generatorBase));u[u.length-1-d]=f,0!==f&&(p=!0)}if(!p)return o;var h=new r.default(s,u),g=i(s,s.buildMonomial(t,1),h,t);if(null===g)return null;var y=a(s,g[0]);if(null==y)return null;for(var m=c(s,g[1],y),_=0;_<y.length;_++){var v=o.length-1-s.log(y[_]);if(v<0)return null;o[v]=n.addOrSubtractGF(o[v],m[_])}return o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0);function r(e,t,o,n){var r=e.x-t.x+o.x-n.x,i=e.y-t.y+o.y-n.y;if(0===r&&0===i)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:o.x-t.x,a22:o.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var a=t.x-o.x,c=n.x-o.x,s=t.y-o.y,l=n.y-o.y,u=a*l-c*s,p=(r*l-c*i)/u,d=(a*i-r*s)/u;return{a11:t.x-e.x+p*t.x,a12:t.y-e.y+p*t.y,a13:p,a21:n.x-e.x+d*n.x,a22:n.y-e.y+d*n.y,a23:d,a31:e.x,a32:e.y,a33:1}}function i(e,t,o,n){var i=r(e,t,o,n);return{a11:i.a22*i.a33-i.a23*i.a32,a12:i.a13*i.a32-i.a12*i.a33,a13:i.a12*i.a23-i.a13*i.a22,a21:i.a23*i.a31-i.a21*i.a33,a22:i.a11*i.a33-i.a13*i.a31,a23:i.a13*i.a21-i.a11*i.a23,a31:i.a21*i.a32-i.a22*i.a31,a32:i.a12*i.a31-i.a11*i.a32,a33:i.a11*i.a22-i.a12*i.a21}}t.extract=function(e,t){for(var o,a,c=(a=i({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),{a11:(o=r(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft)).a11*a.a11+o.a21*a.a12+o.a31*a.a13,a12:o.a12*a.a11+o.a22*a.a12+o.a32*a.a13,a13:o.a13*a.a11+o.a23*a.a12+o.a33*a.a13,a21:o.a11*a.a21+o.a21*a.a22+o.a31*a.a23,a22:o.a12*a.a21+o.a22*a.a22+o.a32*a.a23,a23:o.a13*a.a21+o.a23*a.a22+o.a33*a.a23,a31:o.a11*a.a31+o.a21*a.a32+o.a31*a.a33,a32:o.a12*a.a31+o.a22*a.a32+o.a32*a.a33,a33:o.a13*a.a31+o.a23*a.a32+o.a33*a.a33}),s=n.BitMatrix.createEmpty(t.dimension,t.dimension),l=function(e,t){var o=c.a13*e+c.a23*t+c.a33;return{x:(c.a11*e+c.a21*t+c.a31)/o,y:(c.a12*e+c.a22*t+c.a32)/o}},u=0;u<t.dimension;u++)for(var p=0;p<t.dimension;p++){var d=l(p+.5,u+.5);s.set(p,u,e.get(Math.floor(d.x),Math.floor(d.y)))}return{matrix:s,mappingFunction:l}}},function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function r(e){return e.reduce(function(e,t){return e+t})}function i(e,t,o){var r,i,a,c,s,l,u,p=n(e,t),d=n(t,o),f=n(e,o);return d>=p&&d>=f?(s=(r=[t,e,o])[0],l=r[1],u=r[2]):f>=d&&f>=p?(s=(i=[e,t,o])[0],l=i[1],u=i[2]):(s=(a=[e,o,t])[0],l=a[1],u=a[2]),(u.x-l.x)*(s.y-l.y)-(u.y-l.y)*(s.x-l.x)<0&&(s=(c=[u,s])[0],u=c[1]),{bottomLeft:s,topLeft:l,topRight:u}}function a(e,t,o,i){var a=(r(s(e,o,i,5))/7+r(s(e,t,i,5))/7+r(s(o,e,i,5))/7+r(s(t,e,i,5))/7)/4;if(a<1)throw new Error("Invalid module size");var c=Math.round(n(e,t)/a),l=Math.round(n(e,o)/a),u=Math.floor((c+l)/2)+7;switch(u%4){case 0:u++;break;case 2:u--}return{dimension:u,moduleSize:a}}function c(e,t,o,r){var i,a,c,s,l=[{x:Math.floor(e.x),y:Math.floor(e.y)}],u=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);u?(i=Math.floor(e.y),a=Math.floor(e.x),c=Math.floor(t.y),s=Math.floor(t.x)):(i=Math.floor(e.x),a=Math.floor(e.y),c=Math.floor(t.x),s=Math.floor(t.y));for(var p=Math.abs(c-i),d=Math.abs(s-a),f=Math.floor(-p/2),h=i<c?1:-1,g=a<s?1:-1,y=!0,m=i,_=a;m!==c+h;m+=h){var v=u?_:m,S=u?m:_;if(o.get(v,S)!==y&&(y=!y,l.push({x:v,y:S}),l.length===r+1))break;if((f+=d)>0){if(_===s)break;_+=g,f-=p}}for(var N=[],b=0;b<r;b++)l[b]&&l[b+1]?N.push(n(l[b],l[b+1])):N.push(0);return N}function s(e,t,o,n){var r,i=t.y-e.y,a=t.x-e.x,s=c(e,t,o,Math.ceil(n/2)),l=c(e,{x:e.x-a,y:e.y-i},o,Math.ceil(n/2)),u=s.shift()+l.shift()-1;return(r=l.concat(u)).concat.apply(r,s)}function l(e,t){var o=r(e)/r(t),n=0;return t.forEach(function(t,r){n+=Math.pow(e[r]-t*o,2)}),{averageSize:o,error:n}}function u(e,t,o){try{var n=s(e,{x:-1,y:e.y},o,t.length),r=s(e,{x:e.x,y:-1},o,t.length),i=s(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},o,t.length),a=s(e,{x:Math.min(o.width,e.x+e.y)+1,y:Math.min(o.height,e.y+e.x)+1},o,t.length),c=l(n,t),u=l(r,t),p=l(i,t),d=l(a,t),f=Math.sqrt(c.error*c.error+u.error*u.error+p.error*p.error+d.error*d.error),h=(c.averageSize+u.averageSize+p.averageSize+d.averageSize)/4;return f+(Math.pow(c.averageSize-h,2)+Math.pow(u.averageSize-h,2)+Math.pow(p.averageSize-h,2)+Math.pow(d.averageSize-h,2))/h}catch(g){return 1/0}}function p(e,t){for(var o=Math.round(t.x);e.get(o,Math.round(t.y));)o--;for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n++;for(var r=(o+n)/2,i=Math.round(t.y);e.get(Math.round(r),i);)i--;for(var a=Math.round(t.y);e.get(Math.round(r),a);)a++;return{x:r,y:(i+a)/2}}function d(t,o,i,c,s){var l,p,d;try{p=(l=a(c,i,s,t)).dimension,d=l.moduleSize}catch(e){return null}var f=i.x-c.x+s.x,h=i.y-c.y+s.y,g=(n(c,s)+n(c,i))/2/d,y=1-3/g,m={x:c.x+y*(f-c.x),y:c.y+y*(h-c.y)},_=o.map(function(e){var o=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,i=(e.top.y+e.bottom.y+1)/2;if(t.get(Math.floor(o),Math.floor(i)))return r([e.top.endX-e.top.startX,e.bottom.endX-e.bottom.startX,e.bottom.y-e.top.y+1]),{x:o,y:i,score:u({x:Math.floor(o),y:Math.floor(i)},[1,1,1],t)+n({x:o,y:i},m)}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});return{alignmentPattern:g>=15&&_.length?_[0]:m,dimension:p}}o.locate=function(e){for(var t=[],o=[],n=[],a=[],c=function(i){for(var c=0,s=!1,l=[0,0,0,0,0],u=function(t){var n=e.get(t,i);if(n===s)c++;else{l=[l[1],l[2],l[3],l[4],c],c=1,s=n;var u=r(l)/7,p=Math.abs(l[0]-u)<u&&Math.abs(l[1]-u)<u&&Math.abs(l[2]-3*u)<3*u&&Math.abs(l[3]-u)<u&&Math.abs(l[4]-u)<u&&!n,d=r(l.slice(-3))/3,f=Math.abs(l[2]-d)<d&&Math.abs(l[3]-d)<d&&Math.abs(l[4]-d)<d&&n;if(p){var h=t-l[3]-l[4],g=h-l[2],y={startX:g,endX:h,y:i};(m=o.filter(function(e){return g>=e.bottom.startX&&g<=e.bottom.endX||h>=e.bottom.startX&&g<=e.bottom.endX||g<=e.bottom.startX&&h>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?m[0].bottom=y:o.push({top:y,bottom:y})}if(f){var m,_=t-l[4],v=_-l[3];y={startX:v,y:i,endX:_},(m=a.filter(function(e){return v>=e.bottom.startX&&v<=e.bottom.endX||_>=e.bottom.startX&&v<=e.bottom.endX||v<=e.bottom.startX&&_>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?m[0].bottom=y:a.push({top:y,bottom:y})}}},p=-1;p<=e.width;p++)u(p);t.push.apply(t,o.filter(function(e){return e.bottom.y!==i&&e.bottom.y-e.top.y>=2})),o=o.filter(function(e){return e.bottom.y===i}),n.push.apply(n,a.filter(function(e){return e.bottom.y!==i})),a=a.filter(function(e){return e.bottom.y===i})},s=0;s<=e.height;s++)c(s);t.push.apply(t,o.filter(function(e){return e.bottom.y-e.top.y>=2})),n.push.apply(n,a);var l=t.filter(function(e){return e.bottom.y-e.top.y>=2}).map(function(t){var o=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,n=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(o),Math.round(n))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],a=r(i)/i.length;return{score:u({x:Math.round(o),y:Math.round(n)},[1,1,3,1,1],e),x:o,y:n,size:a}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score}).map(function(e,t,o){if(t>4)return null;var n=o.filter(function(e,o){return t!==o}).map(function(t){return{x:t.x,y:t.y,score:t.score+Math.pow(t.size-e.size,2)/e.size,size:t.size}}).sort(function(e,t){return e.score-t.score});if(n.length<2)return null;var r=e.score+n[0].score+n[1].score;return{points:[e].concat(n.slice(0,2)),score:r}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});if(0===l.length)return null;var f=i(l[0].points[0],l[0].points[1],l[0].points[2]),h=f.topRight,g=f.topLeft,y=f.bottomLeft,m=d(e,n,h,g,y),_=[];m&&_.push({alignmentPattern:{x:m.alignmentPattern.x,y:m.alignmentPattern.y},bottomLeft:{x:y.x,y:y.y},dimension:m.dimension,topLeft:{x:g.x,y:g.y},topRight:{x:h.x,y:h.y}});var v=p(e,h),S=p(e,g),N=p(e,y),b=d(e,n,v,S,N);return b&&_.push({alignmentPattern:{x:b.alignmentPattern.x,y:b.alignmentPattern.y},bottomLeft:{x:N.x,y:N.y},topLeft:{x:S.x,y:S.y},topRight:{x:v.x,y:v.y},dimension:b.dimension}),0===_.length?null:_}}]).default},"object"==typeof n&&"object"==typeof o?o.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof n?n.jsQR=i():r.jsQR=i()},{}],81:[function(t,o){o.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,o){this.low=0|e,this.high=0|t,this.unsigned=!!o}function i(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var a={},c={};function s(e,t){var o,n,r;return t?(r=0<=(e>>>=0)&&e<256)&&(n=c[e])?n:(o=u(e,(0|e)<0?-1:0,!0),r&&(c[e]=o),o):(r=-128<=(e|=0)&&e<128)&&(n=a[e])?n:(o=u(e,e<0?-1:0,!1),r&&(a[e]=o),o)}function l(e,t){if(isNaN(e))return t?v:_;if(t){if(e<0)return v;if(e>=g)return P}else{if(e<=-y)return I;if(e+1>=y)return C}return e<0?l(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,o){return new r(e,t,o)}r.fromInt=s,r.fromNumber=l,r.fromBits=u;var p=Math.pow;function d(e,t,o){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return _;if("number"==typeof t?(o=t,t=!1):t=!!t,(o=o||10)<2||36<o)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,o).neg();for(var r=l(p(o,8)),i=_,a=0;a<e.length;a+=8){var c=Math.min(8,e.length-a),s=parseInt(e.substring(a,a+c),o);if(c<8){var u=l(p(o,c));i=i.mul(u).add(l(s))}else i=(i=i.mul(r)).add(l(s))}return i.unsigned=t,i}function f(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=f;var h=4294967296,g=h*h,y=g/2,m=s(1<<24),_=s(0);r.ZERO=_;var v=s(0,!0);r.UZERO=v;var S=s(1);r.ONE=S;var N=s(1,!0);r.UONE=N;var b=s(-1);r.NEG_ONE=b;var C=u(-1,2147483647,!1);r.MAX_VALUE=C;var P=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=P;var I=u(0,-2147483648,!1);r.MIN_VALUE=I;var w=r.prototype;w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},w.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var t=l(e),o=this.div(t),n=o.mul(t).sub(this);return o.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=l(p(e,6),this.unsigned),i=this,a="";;){var c=i.div(r),s=(i.sub(c.mul(r)).toInt()>>>0).toString(e);if((i=c).isZero())return s+a;for(;s.length<6;)s="0"+s;a=""+s+a}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},w.isZero=function(){return 0===this.high&&0===this.low},w.eqz=w.isZero,w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||this.high>=0},w.isOdd=function(){return 1==(1&this.low)},w.isEven=function(){return 0==(1&this.low)},w.equals=function(e){return i(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},w.eq=w.equals,w.notEquals=function(e){return!this.eq(e)},w.neq=w.notEquals,w.ne=w.notEquals,w.lessThan=function(e){return this.comp(e)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(e){return this.comp(e)<=0},w.lte=w.lessThanOrEqual,w.le=w.lessThanOrEqual,w.greaterThan=function(e){return this.comp(e)>0},w.gt=w.greaterThan,w.greaterThanOrEqual=function(e){return this.comp(e)>=0},w.gte=w.greaterThanOrEqual,w.ge=w.greaterThanOrEqual,w.compare=function(e){if(i(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),o=e.isNegative();return t&&!o?-1:!t&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(S)},w.neg=w.negate,w.add=function(e){i(e)||(e=f(e));var t=this.high>>>16,o=65535&this.high,n=this.low>>>16,r=65535&this.low,a=e.high>>>16,c=65535&e.high,s=e.low>>>16,l=0,p=0,d=0,h=0;return d+=(h+=r+(65535&e.low))>>>16,p+=(d+=n+s)>>>16,l+=(p+=o+c)>>>16,l+=t+a,u((d&=65535)<<16|(h&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},w.subtract=function(e){return i(e)||(e=f(e)),this.add(e.neg())},w.sub=w.subtract,w.multiply=function(e){if(this.isZero())return _;if(i(e)||(e=f(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return _;if(this.eq(I))return e.isOdd()?I:_;if(e.eq(I))return this.isOdd()?I:_;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,o=65535&this.high,r=this.low>>>16,a=65535&this.low,c=e.high>>>16,s=65535&e.high,p=e.low>>>16,d=65535&e.low,h=0,g=0,y=0,v=0;return y+=(v+=a*d)>>>16,g+=(y+=r*d)>>>16,y&=65535,g+=(y+=a*p)>>>16,h+=(g+=o*d)>>>16,g&=65535,h+=(g+=r*p)>>>16,g&=65535,h+=(g+=a*s)>>>16,h+=t*d+o*p+r*s+a*c,u((y&=65535)<<16|(v&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},w.mul=w.multiply,w.divide=function(e){if(i(e)||(e=f(e)),e.isZero())throw Error("division by zero");var t,o,r;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:_;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return N;r=v}else{if(this.eq(I))return e.eq(S)||e.eq(b)?I:e.eq(I)?S:(t=this.shr(1).div(e).shl(1)).eq(_)?e.isNegative()?S:b:(o=this.sub(e.mul(t)),r=t.add(o.div(e)));if(e.eq(I))return this.unsigned?v:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=_}for(o=this;o.gte(e);){t=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),c=a<=48?1:p(2,a-48),s=l(t),d=s.mul(e);d.isNegative()||d.gt(o);)d=(s=l(t-=c,this.unsigned)).mul(e);s.isZero()&&(s=S),r=r.add(s),o=o.sub(d)}return r},w.div=w.divide,w.modulo=function(e){return i(e)||(e=f(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},w.mod=w.modulo,w.rem=w.modulo,w.not=function(){return u(~this.low,~this.high,this.unsigned)},w.and=function(e){return i(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},w.or=function(e){return i(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},w.xor=function(e){return i(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},w.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},w.shru=w.shiftRightUnsigned,w.shr_u=w.shiftRightUnsigned,w.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},w.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},w.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,o){return o?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},{}],82:[function(e,t){"use strict";t.exports=e("./src/index-minimal")},{"./src/index-minimal":83}],83:[function(e,t,o){"use strict";var n=o;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e("./writer"),n.BufferWriter=e("./writer_buffer"),n.Reader=e("./reader"),n.BufferReader=e("./reader_buffer"),n.util=e("./util/minimal"),n.rpc=e("./rpc"),n.roots=e("./roots"),n.configure=r,r()},{"./reader":84,"./reader_buffer":85,"./roots":86,"./rpc":87,"./util/minimal":90,"./writer":91,"./writer_buffer":92}],84:[function(e,t){"use strict";t.exports=c;var o,n=e("./util/minimal"),r=n.LongBits,i=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var s,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return n.Buffer?function(e){return(c.create=function(e){return n.Buffer.isBuffer(e)?new o(e):l(e)})(e)}:l};function p(){var e=new r(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new r(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(s=4294967295,function(){if(s=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return s;if(s=(s|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return s;if(s=(s|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return s;if(s=(s|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return s;if(s=(s|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return s;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return s}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,o=this.pos+e;if(o>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,o):t===o?new this.buf.constructor(0):this._slice.call(this.buf,t,o)},c.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){o=e,c.create=u(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{"./util/minimal":90}],85:[function(e,t){"use strict";t.exports=r;var o=e("./reader");(r.prototype=Object.create(o.prototype)).constructor=r;var n=e("./util/minimal");function r(e){o.call(this,e)}r._configure=function(){n.Buffer&&(r.prototype._slice=n.Buffer.prototype.slice)},r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},r._configure()},{"./reader":84,"./util/minimal":90}],86:[function(e,t){"use strict";t.exports={}},{}],87:[function(e,t,o){"use strict";o.Service=e("./rpc/service")},{"./rpc/service":88}],88:[function(e,t){"use strict";t.exports=n;var o=e("../util/minimal");function n(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,n,r,i,a){if(!i)throw TypeError("request must be specified");var c=this;if(!a)return o.asPromise(e,c,t,n,r,i);if(c.rpcImpl)try{return c.rpcImpl(t,n[c.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(e,o){if(e)return c.emit("error",e,t),a(e);if(null!==o){if(!(o instanceof r))try{o=r[c.responseDelimited?"decodeDelimited":"decode"](o)}catch(e){return c.emit("error",e,t),a(e)}return c.emit("data",o,t),a(null,o)}c.end(!0)})}catch(s){return c.emit("error",s,t),void setTimeout(function(){a(s)},0)}else setTimeout(function(){a(Error("already ended"))},0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{"../util/minimal":90}],89:[function(e,t){"use strict";t.exports=n;var o=e("../util/minimal");function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var i=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return r;var t=e<0;t&&(e=-e);var o=e>>>0,i=(e-o)/4294967296>>>0;return t&&(i=~i>>>0,o=~o>>>0,++o>4294967295&&(o=0,++i>4294967295&&(i=0))),new n(o,i)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):r},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,o=~this.hi>>>0;return t||(o=o+1>>>0),-(t+4294967296*o)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===i?r:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return 0===o?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:o<128?9:10}},{"../util/minimal":90}],90:[function(t,o,n){(function(o){"use strict";var r=n;function i(e,t,o){for(var n=Object.keys(t),r=0;r<n.length;++r)void 0!==e[n[r]]&&o||(e[n[r]]=t[n[r]]);return e}function a(e){function t(e,o){if(!(this instanceof t))return new t(e,o);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),o&&i(this,o)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=t("@protobufjs/aspromise"),r.base64=t("@protobufjs/base64"),r.EventEmitter=t("@protobufjs/eventemitter"),r.float=t("@protobufjs/float"),r.inquire=t("@protobufjs/inquire"),r.utf8=t("@protobufjs/utf8"),r.pool=t("@protobufjs/pool"),r.LongBits=t("./longbits"),r.isNode=Boolean(void 0!==o&&o&&o.process&&o.process.versions&&o.process.versions.node),r.global=r.isNode&&o||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var o=e[t];return!(null==o||!e.hasOwnProperty(t))&&("object"!=typeof o||(Array.isArray(o)?o.length:Object.keys(o).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var o=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(o.lo,o.hi,t):o.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=a,r.ProtocolError=a("ProtocolError"),r.oneOfGetter=function(e){for(var t={},o=0;o<e.length;++o)t[e[o]]=1;return function(){for(var e=Object.keys(this),o=e.length-1;o>-1;--o)if(1===t[e[o]]&&void 0!==this[e[o]]&&null!==this[e[o]])return e[o]}},r.oneOfSetter=function(e){return function(t){for(var o=0;o<e.length;++o)e[o]!==t&&delete this[e[o]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,o){return new e(t,o)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./longbits":89,"@protobufjs/aspromise":6,"@protobufjs/base64":7,"@protobufjs/eventemitter":8,"@protobufjs/float":9,"@protobufjs/inquire":10,"@protobufjs/pool":11,"@protobufjs/utf8":12}],91:[function(e,t){"use strict";t.exports=u;var o,n=e("./util/minimal"),r=n.LongBits,i=n.base64,a=n.utf8;function c(e,t,o){this.fn=e,this.len=t,this.next=void 0,this.val=o}function s(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new c(s,0,0),this.tail=this.head,this.states=null}var p=function(){return n.Buffer?function(){return(u.create=function(){return new o})()}:function(){return new u}};function d(e,t,o){t[o]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,o){for(;e.hi;)t[o++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[o++]=127&e.lo|128,e.lo=e.lo>>>7;t[o++]=e.lo}function g(e,t,o){t[o]=255&e,t[o+1]=e>>>8&255,t[o+2]=e>>>16&255,t[o+3]=e>>>24}u.create=p(),u.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(u.alloc=n.pool(u.alloc,n.Array.prototype.subarray)),u.prototype._push=function(e,t,o){return this.tail=this.tail.next=new c(e,t,o),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,o){for(;e>127;)t[o++]=127&e|128,e>>>=7;t[o]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(h,10,r.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=r.from(e);return this._push(h,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=r.from(e).zzEncode();return this._push(h,t.length(),t)},u.prototype.bool=function(e){return this._push(d,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=r.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var y=n.Array.prototype.set?function(e,t,o){t.set(e,o)}:function(e,t,o){for(var n=0;n<e.length;++n)t[o+n]=e[n]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(n.isString(e)){var o=u.alloc(t=i.length(e));i.decode(e,o,0),e=o}return this.uint32(t)._push(y,t,e)},u.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(d,1,0)},u.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(s,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(s,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,o=this.len;return this.reset().uint32(o),o&&(this.tail.next=e.next,this.tail=t,this.len+=o),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),o=0;e;)e.fn(e.val,t,o),o+=e.len,e=e.next;return t},u._configure=function(e){o=e,u.create=p(),o._configure()}},{"./util/minimal":90}],92:[function(e,t){"use strict";t.exports=r;var o=e("./writer");(r.prototype=Object.create(o.prototype)).constructor=r;var n=e("./util/minimal");function r(){o.call(this)}function i(e,t,o){e.length<40?n.utf8.write(e,t,o):t.utf8Write?t.utf8Write(e,o):t.write(e,o)}r._configure=function(){r.alloc=n._Buffer_allocUnsafe,r.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,o){t.set(e,o)}:function(e,t,o){if(e.copy)e.copy(t,o,0,e.length);else for(var n=0;n<e.length;)t[o++]=e[n++]}},r.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(r.writeBytesBuffer,t,e),this},r.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},r._configure()},{"./util/minimal":90,"./writer":91}],93:[function(t,o,n){const r=t("./can-promise"),i=t("./core/qrcode"),a=t("./renderer/canvas"),c=t("./renderer/svg-tag.js");function s(t,o,n,a,c){const s=[].slice.call(arguments,1),l=s.length,u="function"==typeof s[l-1];if(!u&&!r())throw new Error("Callback required as last argument");if(!u){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=o,o=a=void 0):2!==l||o.getContext||(a=n,n=o,o=void 0),new Promise(function(r,c){try{const s=i.create(n,a);r(t(s,o,a))}catch(e){c(e)}})}if(l<2)throw new Error("Too few arguments provided");2===l?(c=n,n=o,o=a=void 0):3===l&&(o.getContext&&void 0===c?(c=a,a=void 0):(c=a,a=n,n=o,o=void 0));try{const r=i.create(n,a);c(null,t(r,o,a))}catch(e){c(e)}}n.create=i.create,n.toCanvas=s.bind(null,a.render),n.toDataURL=s.bind(null,a.renderToDataURL),n.toString=s.bind(null,function(e,t,o){return c.render(e,o)})},{"./can-promise":94,"./core/qrcode":110,"./renderer/canvas":117,"./renderer/svg-tag.js":118}],94:[function(e,t){t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},{}],95:[function(e,t,o){const n=e("./utils").getSymbolSize;o.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,o=n(e),r=145===o?26:2*Math.ceil((o-13)/(2*t-2)),i=[o-7];for(let n=1;n<t-1;n++)i[n]=i[n-1]-r;return i.push(6),i.reverse()},o.getPositions=function(e){const t=[],n=o.getRowColCoords(e),r=n.length;for(let o=0;o<r;o++)for(let e=0;e<r;e++)0===o&&0===e||0===o&&e===r-1||o===r-1&&0===e||t.push([n[o],n[e]]);return t}},{"./utils":114}],96:[function(e,t){const o=e("./mode"),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(e){this.mode=o.ALPHANUMERIC,this.data=e}r.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let o=45*n.indexOf(this.data[t]);o+=n.indexOf(this.data[t+1]),e.put(o,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},t.exports=r},{"./mode":107}],97:[function(e,t){function o(){this.buffer=[],this.length=0}o.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let o=0;o<t;o++)this.putBit(1==(e>>>t-o-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=o},{}],98:[function(e,t){function o(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}o.prototype.set=function(e,t,o,n){const r=e*this.size+t;this.data[r]=o,n&&(this.reservedBit[r]=!0)},o.prototype.get=function(e,t){return this.data[e*this.size+t]},o.prototype.xor=function(e,t,o){this.data[e*this.size+t]^=o},o.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},t.exports=o},{}],99:[function(e,t){const o=e("encode-utf8"),n=e("./mode");function r(e){this.mode=n.BYTE,this.data=new Uint8Array(o(e))}r.getBitsLength=function(e){return 8*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){for(let t=0,o=this.data.length;t<o;t++)e.put(this.data[t],8)},t.exports=r},{"./mode":107,"encode-utf8":49}],100:[function(e,t,o){const n=e("./error-correction-level"),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];o.getBlocksCount=function(e,t){switch(t){case n.L:return r[4*(e-1)+0];case n.M:return r[4*(e-1)+1];case n.Q:return r[4*(e-1)+2];case n.H:return r[4*(e-1)+3];default:return}},o.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return i[4*(e-1)+0];case n.M:return i[4*(e-1)+1];case n.Q:return i[4*(e-1)+2];case n.H:return i[4*(e-1)+3];default:return}}},{"./error-correction-level":101}],101:[function(t,o,n){function r(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+e)}}n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2},n.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},n.from=function(t,o){if(n.isValid(t))return t;try{return r(t)}catch(e){return o}}},{}],102:[function(e,t,o){const n=e("./utils").getSymbolSize;o.getPositions=function(e){const t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},{"./utils":114}],103:[function(e,t,o){const n=e("./utils"),r=n.getBCHDigit(1335);o.getEncodedBits=function(e,t){const o=e.bit<<3|t;let i=o<<10;for(;n.getBCHDigit(i)-r>=0;)i^=1335<<n.getBCHDigit(i)-r;return 21522^(o<<10|i)}},{"./utils":114}],104:[function(e,t,o){const n=new Uint8Array(512),r=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,256&(e<<=1)&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]})(),o.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},o.exp=function(e){return n[e]},o.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},{}],105:[function(e,t){const o=e("./mode"),n=e("./utils");function r(e){this.mode=o.KANJI,this.data=e}r.getBitsLength=function(e){return 13*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let o=n.toSJIS(this.data[t]);if(o>=33088&&o<=40956)o-=33088;else{if(!(o>=57408&&o<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");o-=49472}o=192*(o>>>8&255)+(255&o),e.put(o,13)}},t.exports=r},{"./mode":107,"./utils":114}],106:[function(e,t,o){o.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(e,t,n){switch(e){case o.Patterns.PATTERN000:return(t+n)%2==0;case o.Patterns.PATTERN001:return t%2==0;case o.Patterns.PATTERN010:return n%3==0;case o.Patterns.PATTERN011:return(t+n)%3==0;case o.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case o.Patterns.PATTERN101:return t*n%2+t*n%3==0;case o.Patterns.PATTERN110:return(t*n%2+t*n%3)%2==0;case o.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}o.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},o.from=function(e){return o.isValid(e)?parseInt(e,10):void 0},o.getPenaltyN1=function(e){const t=e.size;let o=0,n=0,r=0,i=null,a=null;for(let c=0;c<t;c++){n=r=0,i=a=null;for(let s=0;s<t;s++){let t=e.get(c,s);t===i?n++:(n>=5&&(o+=n-5+3),i=t,n=1),(t=e.get(s,c))===a?r++:(r>=5&&(o+=r-5+3),a=t,r=1)}n>=5&&(o+=n-5+3),r>=5&&(o+=r-5+3)}return o},o.getPenaltyN2=function(e){const t=e.size;let o=0;for(let n=0;n<t-1;n++)for(let r=0;r<t-1;r++){const t=e.get(n,r)+e.get(n,r+1)+e.get(n+1,r)+e.get(n+1,r+1);4!==t&&0!==t||o++}return 3*o},o.getPenaltyN3=function(e){const t=e.size;let o=0,n=0,r=0;for(let i=0;i<t;i++){n=r=0;for(let a=0;a<t;a++)n=n<<1&2047|e.get(i,a),a>=10&&(1488===n||93===n)&&o++,r=r<<1&2047|e.get(a,i),a>=10&&(1488===r||93===r)&&o++}return 40*o},o.getPenaltyN4=function(e){let t=0;const o=e.data.length;for(let n=0;n<o;n++)t+=e.data[n];return 10*Math.abs(Math.ceil(100*t/o/5)-10)},o.applyMask=function(e,t){const o=t.size;for(let r=0;r<o;r++)for(let i=0;i<o;i++)t.isReserved(i,r)||t.xor(i,r,n(e,i,r))},o.getBestMask=function(e,t){const n=Object.keys(o.Patterns).length;let r=0,i=1/0;for(let a=0;a<n;a++){t(a),o.applyMask(a,e);const n=o.getPenaltyN1(e)+o.getPenaltyN2(e)+o.getPenaltyN3(e)+o.getPenaltyN4(e);o.applyMask(a,e),n<i&&(i=n,r=a)}return r}},{}],107:[function(t,o,n){const r=t("./version-check"),i=t("./regex");function a(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+e)}}n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},n.getBestModeForData=function(e){return i.testNumeric(e)?n.NUMERIC:i.testAlphanumeric(e)?n.ALPHANUMERIC:i.testKanji(e)?n.KANJI:n.BYTE},n.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},n.isValid=function(e){return e&&e.bit&&e.ccBits},n.from=function(t,o){if(n.isValid(t))return t;try{return a(t)}catch(e){return o}}},{"./regex":112,"./version-check":115}],108:[function(e,t){const o=e("./mode");function n(e){this.mode=o.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t,o,n;for(t=0;t+3<=this.data.length;t+=3)o=this.data.substr(t,3),n=parseInt(o,10),e.put(n,10);const r=this.data.length-t;r>0&&(o=this.data.substr(t),n=parseInt(o,10),e.put(n,3*r+1))},t.exports=n},{"./mode":107}],109:[function(e,t,o){const n=e("./galois-field");o.mul=function(e,t){const o=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++)o[r+i]^=n.mul(e[r],t[i]);return o},o.mod=function(e,t){let o=new Uint8Array(e);for(;o.length-t.length>=0;){const e=o[0];for(let i=0;i<t.length;i++)o[i]^=n.mul(t[i],e);let r=0;for(;r<o.length&&0===o[r];)r++;o=o.slice(r)}return o},o.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=o.mul(t,new Uint8Array([1,n.exp(r)]));return t}},{"./galois-field":104}],110:[function(e,t,o){const n=e("./utils"),r=e("./error-correction-level"),i=e("./bit-buffer"),a=e("./bit-matrix"),c=e("./alignment-pattern"),s=e("./finder-pattern"),l=e("./mask-pattern"),u=e("./error-correction-code"),p=e("./reed-solomon-encoder"),d=e("./version"),f=e("./format-info"),h=e("./mode"),g=e("./segments");function y(e,t){const o=e.size,n=s.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],i=n[r][1];for(let n=-1;n<=7;n++)if(!(t+n<=-1||o<=t+n))for(let r=-1;r<=7;r++)i+r<=-1||o<=i+r||(n>=0&&n<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===n||6===n)||n>=2&&n<=4&&r>=2&&r<=4?e.set(t+n,i+r,!0,!0):e.set(t+n,i+r,!1,!0))}}function m(e){const t=e.size;for(let o=8;o<t-8;o++){const t=o%2==0;e.set(o,6,t,!0),e.set(6,o,t,!0)}}function _(e,t){const o=c.getPositions(t);for(let n=0;n<o.length;n++){const t=o[n][0],r=o[n][1];for(let o=-2;o<=2;o++)for(let n=-2;n<=2;n++)-2===o||2===o||-2===n||2===n||0===o&&0===n?e.set(t+o,r+n,!0,!0):e.set(t+o,r+n,!1,!0)}}function v(e,t){const o=e.size,n=d.getEncodedBits(t);let r,i,a;for(let c=0;c<18;c++)r=Math.floor(c/3),i=c%3+o-8-3,a=1==(n>>c&1),e.set(r,i,a,!0),e.set(i,r,a,!0)}function S(e,t,o){const n=e.size,r=f.getEncodedBits(t,o);let i,a;for(i=0;i<15;i++)a=1==(r>>i&1),i<6?e.set(i,8,a,!0):i<8?e.set(i+1,8,a,!0):e.set(n-15+i,8,a,!0),i<8?e.set(8,n-i-1,a,!0):i<9?e.set(8,15-i-1+1,a,!0):e.set(8,15-i-1,a,!0);e.set(n-8,8,1,!0)}function N(e,t){const o=e.size;let n=-1,r=o-1,i=7,a=0;for(let c=o-1;c>0;c-=2)for(6===c&&c--;;){for(let o=0;o<2;o++)if(!e.isReserved(r,c-o)){let n=!1;a<t.length&&(n=1==(t[a]>>>i&1)),e.set(r,c-o,n),-1==--i&&(a++,i=7)}if((r+=n)<0||o<=r){r-=n,n=-n;break}}}function b(e,t,o){const r=new i;o.forEach(function(t){r.put(t.mode.bit,4),r.put(t.getLength(),h.getCharCountIndicator(t.mode,e)),t.write(r)});const a=8*(n.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const c=(a-r.getLengthInBits())/8;for(let n=0;n<c;n++)r.put(n%2?17:236,8);return C(r,e,t)}function C(e,t,o){const r=n.getSymbolTotalCodewords(t),i=r-u.getTotalCodewordsCount(t,o),a=u.getBlocksCount(t,o),c=a-r%a,s=Math.floor(r/a),l=Math.floor(i/a),d=l+1,f=s-l,h=new p(f);let g=0;const y=new Array(a),m=new Array(a);let _=0;const v=new Uint8Array(e.buffer);for(let n=0;n<a;n++){const e=n<c?l:d;y[n]=v.slice(g,g+e),m[n]=h.encode(y[n]),g+=e,_=Math.max(_,e)}const S=new Uint8Array(r);let N,b,C=0;for(N=0;N<_;N++)for(b=0;b<a;b++)N<y[b].length&&(S[C++]=y[b][N]);for(N=0;N<f;N++)for(b=0;b<a;b++)S[C++]=m[b][N];return S}function P(e,t,o,r){let i;if(Array.isArray(e))i=g.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let n=t;if(!n){const t=g.rawSplit(e);n=d.getBestVersionForData(t,o)}i=g.fromString(e,n||40)}}const c=d.getBestVersionForData(i,o);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<c)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+c+".\n")}else t=c;const s=b(t,o,i),u=n.getSymbolSize(t),p=new a(u);return y(p,t),m(p),_(p,t),S(p,o,0),t>=7&&v(p,t),N(p,s),isNaN(r)&&(r=l.getBestMask(p,S.bind(null,p,o))),l.applyMask(r,p),S(p,o,r),{modules:p,version:t,errorCorrectionLevel:o,maskPattern:r,segments:i}}o.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let o,i,a=r.M;return void 0!==t&&(a=r.from(t.errorCorrectionLevel,r.M),o=d.from(t.version),i=l.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),P(e,o,a,i)}},{"./alignment-pattern":95,"./bit-buffer":97,"./bit-matrix":98,"./error-correction-code":100,"./error-correction-level":101,"./finder-pattern":102,"./format-info":103,"./mask-pattern":106,"./mode":107,"./reed-solomon-encoder":111,"./segments":113,"./utils":114,"./version":116}],111:[function(e,t){const o=e("./polynomial");function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(e){this.degree=e,this.genPoly=o.generateECPolynomial(this.degree)},n.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=o.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(n,r),e}return n},t.exports=n},{"./polynomial":109}],112:[function(e,t,o){let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";o.KANJI=new RegExp(n,"g"),o.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),o.BYTE=new RegExp(r,"g"),o.NUMERIC=new RegExp("[0-9]+","g"),o.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const i=new RegExp("^"+n+"$"),a=new RegExp("^[0-9]+$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");o.testKanji=function(e){return i.test(e)},o.testNumeric=function(e){return a.test(e)},o.testAlphanumeric=function(e){return c.test(e)}},{}],113:[function(e,t,o){const n=e("./mode"),r=e("./numeric-data"),i=e("./alphanumeric-data"),a=e("./byte-data"),c=e("./kanji-data"),s=e("./regex"),l=e("./utils"),u=e("dijkstrajs");function p(e){return unescape(encodeURIComponent(e)).length}function d(e,t,o){const n=[];let r;for(;null!==(r=e.exec(o));)n.push({data:r[0],index:r.index,mode:t,length:r[0].length});return n}function f(e){const t=d(s.NUMERIC,n.NUMERIC,e),o=d(s.ALPHANUMERIC,n.ALPHANUMERIC,e);let r,i;return l.isKanjiModeEnabled()?(r=d(s.BYTE,n.BYTE,e),i=d(s.KANJI,n.KANJI,e)):(r=d(s.BYTE_KANJI,n.BYTE,e),i=[]),t.concat(o,r,i).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function h(e,t){switch(t){case n.NUMERIC:return r.getBitsLength(e);case n.ALPHANUMERIC:return i.getBitsLength(e);case n.KANJI:return c.getBitsLength(e);case n.BYTE:return a.getBitsLength(e)}}function g(e){return e.reduce(function(e,t){const o=e.length-1>=0?e[e.length-1]:null;return o&&o.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function y(e){const t=[];for(let o=0;o<e.length;o++){const r=e[o];switch(r.mode){case n.NUMERIC:t.push([r,{data:r.data,mode:n.ALPHANUMERIC,length:r.length},{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.ALPHANUMERIC:t.push([r,{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.KANJI:t.push([r,{data:r.data,mode:n.BYTE,length:p(r.data)}]);break;case n.BYTE:t.push([{data:r.data,mode:n.BYTE,length:p(r.data)}])}}return t}function m(e,t){const o={},r={start:{}};let i=["start"];for(let a=0;a<e.length;a++){const c=e[a],s=[];for(let e=0;e<c.length;e++){const l=c[e],u=""+a+e;s.push(u),o[u]={node:l,lastCount:0},r[u]={};for(let e=0;e<i.length;e++){const a=i[e];o[a]&&o[a].node.mode===l.mode?(r[a][u]=h(o[a].lastCount+l.length,l.mode)-h(o[a].lastCount,l.mode),o[a].lastCount+=l.length):(o[a]&&(o[a].lastCount=l.length),r[a][u]=h(l.length,l.mode)+4+n.getCharCountIndicator(l.mode,t))}}i=s}for(let n=0;n<i.length;n++)r[i[n]].end=0;return{map:r,table:o}}function _(e,t){let o;const s=n.getBestModeForData(e);if((o=n.from(t,s))!==n.BYTE&&o.bit<s.bit)throw new Error('"'+e+'" cannot be encoded with mode '+n.toString(o)+".\n Suggested mode is: "+n.toString(s));switch(o!==n.KANJI||l.isKanjiModeEnabled()||(o=n.BYTE),o){case n.NUMERIC:return new r(e);case n.ALPHANUMERIC:return new i(e);case n.KANJI:return new c(e);case n.BYTE:return new a(e)}}o.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(_(t,null)):t.data&&e.push(_(t.data,t.mode)),e},[])},o.fromString=function(e,t){const n=m(y(f(e,l.isKanjiModeEnabled())),t),r=u.find_path(n.map,"start","end"),i=[];for(let o=1;o<r.length-1;o++)i.push(n.table[r[o]].node);return o.fromArray(g(i))},o.rawSplit=function(e){return o.fromArray(f(e,l.isKanjiModeEnabled()))}},{"./alphanumeric-data":96,"./byte-data":99,"./kanji-data":105,"./mode":107,"./numeric-data":108,"./regex":112,"./utils":114,dijkstrajs:48}],114:[function(e,t,o){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];o.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},o.getSymbolTotalCodewords=function(e){return r[e]},o.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},o.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},o.isKanjiModeEnabled=function(){return void 0!==n},o.toSJIS=function(e){return n(e)}},{}],115:[function(e,t,o){o.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},{}],116:[function(e,t,o){const n=e("./utils"),r=e("./error-correction-code"),i=e("./error-correction-level"),a=e("./mode"),c=e("./version-check"),s=n.getBCHDigit(7973);function l(e,t,n){for(let r=1;r<=40;r++)if(t<=o.getCapacity(r,n,e))return r}function u(e,t){return a.getCharCountIndicator(e,t)+4}function p(e,t){let o=0;return e.forEach(function(e){const n=u(e.mode,t);o+=n+e.getBitsLength()}),o}function d(e,t){for(let n=1;n<=40;n++)if(p(e,n)<=o.getCapacity(n,t,a.MIXED))return n}o.from=function(e,t){return c.isValid(e)?parseInt(e,10):t},o.getCapacity=function(e,t,o){if(!c.isValid(e))throw new Error("Invalid QR Code version");void 0===o&&(o=a.BYTE);const i=8*(n.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t));if(o===a.MIXED)return i;const s=i-u(o,e);switch(o){case a.NUMERIC:return Math.floor(s/10*3);case a.ALPHANUMERIC:return Math.floor(s/11*2);case a.KANJI:return Math.floor(s/13);case a.BYTE:default:return Math.floor(s/8)}},o.getBestVersionForData=function(e,t){let o;const n=i.from(t,i.M);if(Array.isArray(e)){if(e.length>1)return d(e,n);if(0===e.length)return 1;o=e[0]}else o=e;return l(o.mode,o.getLength(),n)},o.getEncodedBits=function(e){if(!c.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-s>=0;)t^=7973<<n.getBCHDigit(t)-s;return e<<12|t}},{"./error-correction-code":100,"./error-correction-level":101,"./mode":107,"./utils":114,"./version-check":115}],117:[function(t,o,n){const r=t("./utils");function i(e,t,o){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=o,t.width=o,t.style.height=o+"px",t.style.width=o+"px"}function a(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}n.render=function(e,t,o){let n=o,c=t;void 0!==n||t&&t.getContext||(n=t,t=void 0),t||(c=a()),n=r.getOptions(n);const s=r.getImageWidth(e.modules.size,n),l=c.getContext("2d"),u=l.createImageData(s,s);return r.qrToImageData(u.data,e,n),i(l,c,s),l.putImageData(u,0,0),c},n.renderToDataURL=function(e,t,o){let r=o;void 0!==r||t&&t.getContext||(r=t,t=void 0),r||(r={});const i=n.render(e,t,r),a=r.type||"image/png",c=r.rendererOpts||{};return i.toDataURL(a,c.quality)}},{"./utils":119}],118:[function(e,t,o){const n=e("./utils");function r(e,t){const o=e.a/255,n=t+'="'+e.hex+'"';return o<1?n+" "+t+'-opacity="'+o.toFixed(2).slice(1)+'"':n}function i(e,t,o){let n=e+t;return void 0!==o&&(n+=" "+o),n}function a(e,t,o){let n="",r=0,a=!1,c=0;for(let s=0;s<e.length;s++){const l=Math.floor(s%t),u=Math.floor(s/t);l||a||(a=!0),e[s]?(c++,s>0&&l>0&&e[s-1]||(n+=a?i("M",l+o,.5+u+o):i("m",r,0),r=0,a=!1),l+1<t&&e[s+1]||(n+=i("h",c),c=0)):r++}return n}o.render=function(e,t,o){const i=n.getOptions(t),c=e.modules.size,s=e.modules.data,l=c+2*i.margin,u=i.color.light.a?"<path "+r(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",p="<path "+r(i.color.dark,"stroke")+' d="'+a(s,c,i.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+u+p+"</svg>\n";return"function"==typeof o&&o(null,f),f}},{"./utils":119}],119:[function(e,t,o){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const o=parseInt(t.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:255&o,hex:"#"+t.slice(0,6).join("")}}o.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,o=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:o,scale:o?4:r,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},o.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},o.getImageWidth=function(e,t){const n=o.getScale(e,t);return Math.floor((e+2*t.margin)*n)},o.qrToImageData=function(e,t,n){const r=t.modules.size,i=t.modules.data,a=o.getScale(r,n),c=Math.floor((r+2*n.margin)*a),s=n.margin*a,l=[n.color.light,n.color.dark];for(let o=0;o<c;o++)for(let t=0;t<c;t++){let u=4*(o*c+t),p=n.color.light;o>=s&&t>=s&&o<c-s&&t<c-s&&(p=l[i[Math.floor((o-s)/a)*r+Math.floor((t-s)/a)]?1:0]),e[u++]=p.r,e[u++]=p.g,e[u++]=p.b,e[u]=p.a}}},{}],120:[function(e,t,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.SimpleCrypto=void 0;var r=e("crypto-js"),i=function(){function e(e){if(void 0===e)throw new Error("SimpleCrypto object MUST BE initialised with a SECRET KEY.");this._dataBuffer="",this._encoder=r.enc.Utf8,this._secret=(0,r.SHA3)("string"==typeof e?e:e.toString()),this._keySize=256,this._iterations=100}return e.sanitiseData=function(e){if(null==e)throw new Error("There is no data provided. Process halted.");var t="object"==typeof e?JSON.stringify(e):"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e.toString():null;if(null===t)throw new Error("Invalid data type. Only object, string, number and boolean data types are allowed.");return t},e.transform=function(e){if("true"===e.toLowerCase()||"false"===e.toLowerCase())return"true"===e.toLowerCase();try{return JSON.parse(e)}catch(t){return/^-?[\d.]+(?:e-?\d+)?$/.test(e)&&!isNaN(parseFloat(e))?parseFloat(e):e}},Object.defineProperty(e,"encoders",{get:function(){return n({Default:r.enc.Utf8},r.enc)},enumerable:!1,configurable:!0}),e.generateRandom=function(e,t){void 0===e&&(e=128),void 0===t&&(t=!1);var o=r.lib.WordArray.random(e/8);return t?o:o.toString()},e.generateRandomString=function(t){return void 0===t&&(t=128),e.generateRandom(t,!1)},e.generateRandomWordArray=function(t){return void 0===t&&(t=128),e.generateRandom(t,!0)},e.prototype._decrypt=function(){if(this._dataBuffer.length<=64)throw new Error("Invalid cipher text. Decryption halted.");var t=r.enc.Hex.parse(this._dataBuffer.substr(0,32)),o=r.enc.Hex.parse(this._dataBuffer.substr(32,32)),n=this._dataBuffer.substring(64,this._dataBuffer.length-64),i=(0,r.PBKDF2)(this._secret.toString(),t,{keySize:this._keySize/32,iterations:this._iterations}),a=this._dataBuffer.substring(this._dataBuffer.length-64),c=this._dataBuffer.substring(0,this._dataBuffer.length-64);if(a!=(0,r.HmacSHA256)(c,i).toString())throw new Error("Invalid encrypted text received. Decryption halted.");var s=r.AES.decrypt(n,i,{iv:o,padding:r.pad.Pkcs7,mode:r.mode.CBC});return e.transform(s.toString(e.encoders.Default))},e.prototype._encrypt=function(){var t=e.generateRandom(128,!0),o=e.generateRandom(128,!0),n=(0,r.PBKDF2)(this._secret.toString(),t,{keySize:this._keySize/32,iterations:this._iterations}),i=r.AES.encrypt(this._dataBuffer,n,{iv:o,padding:r.pad.Pkcs7,mode:r.mode.CBC}),a=t.toString()+o.toString()+i.toString();return a+(0,r.HmacSHA256)(a,n).toString()},e.prototype.decrypt=function(e,t,o){var n=this,r=function(e){"boolean"!=typeof e&&n.setEncoder(e)};try{return void 0!==e&&this.update(e),void 0!==t&&r(t),void 0!==o&&r(o),this._decrypt()}catch(i){throw i}},e.prototype.encrypt=function(e){try{return void 0!==e&&this.update(e),this._encrypt()}catch(t){throw t}},e.prototype.decryptObject=function(e){return this.update(e).decrypt()},e.prototype.encryptObject=function(e){return this.update(e).encrypt()},e.prototype.append=function(t){try{return this._dataBuffer=this._dataBuffer+e.sanitiseData(t),this}catch(o){throw o}},e.prototype.update=function(t){try{return this._dataBuffer=e.sanitiseData(t),this}catch(o){throw o}},e.prototype.setEncoder=function(e){return this._encoder=e,this},e.prototype.setSecret=function(e){return this._secret=(0,r.SHA3)("string"==typeof e?e:e.toString()),this},e}();o.SimpleCrypto=i,o.default=i},{"crypto-js":129}],121:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.BlockCipher,n=t.algo,r=[],i=[],a=[],c=[],s=[],l=[],u=[],p=[],d=[],f=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var o=0,n=0;for(t=0;t<256;t++){var h=n^n<<1^n<<2^n<<3^n<<4;h=h>>>8^255&h^99,r[o]=h,i[h]=o;var g=e[o],y=e[g],m=e[y],_=257*e[h]^16843008*h;a[o]=_<<24|_>>>8,c[o]=_<<16|_>>>16,s[o]=_<<8|_>>>24,l[o]=_,_=16843009*m^65537*y^257*g^16843008*o,u[h]=_<<24|_>>>8,p[h]=_<<16|_>>>16,d[h]=_<<8|_>>>24,f[h]=_,o?(o=g^e[e[e[m^g]]],n^=e[e[n]]):o=n=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=o.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,o=e.sigBytes/4,n=4*((this._nRounds=o+6)+1),i=this._keySchedule=[],a=0;a<n;a++)if(a<o)i[a]=t[a];else{var c=i[a-1];a%o?o>6&&a%o==4&&(c=r[c>>>24]<<24|r[c>>>16&255]<<16|r[c>>>8&255]<<8|r[255&c]):(c=r[(c=c<<8|c>>>24)>>>24]<<24|r[c>>>16&255]<<16|r[c>>>8&255]<<8|r[255&c],c^=h[a/o|0]<<24),i[a]=i[a-o]^c}for(var s=this._invKeySchedule=[],l=0;l<n;l++)a=n-l,c=l%4?i[a]:i[a-4],s[l]=l<4||a<=4?c:u[r[c>>>24]]^p[r[c>>>16&255]]^d[r[c>>>8&255]]^f[r[255&c]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,c,s,l,r)},decryptBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,u,p,d,f,i),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,n,r,i,a,c){for(var s=this._nRounds,l=e[t]^o[0],u=e[t+1]^o[1],p=e[t+2]^o[2],d=e[t+3]^o[3],f=4,h=1;h<s;h++){var g=n[l>>>24]^r[u>>>16&255]^i[p>>>8&255]^a[255&d]^o[f++],y=n[u>>>24]^r[p>>>16&255]^i[d>>>8&255]^a[255&l]^o[f++],m=n[p>>>24]^r[d>>>16&255]^i[l>>>8&255]^a[255&u]^o[f++],_=n[d>>>24]^r[l>>>16&255]^i[u>>>8&255]^a[255&p]^o[f++];l=g,u=y,p=m,d=_}g=(c[l>>>24]<<24|c[u>>>16&255]<<16|c[p>>>8&255]<<8|c[255&d])^o[f++],y=(c[u>>>24]<<24|c[p>>>16&255]<<16|c[d>>>8&255]<<8|c[255&l])^o[f++],m=(c[p>>>24]<<24|c[d>>>16&255]<<16|c[l>>>8&255]<<8|c[255&u])^o[f++],_=(c[d>>>24]<<24|c[l>>>16&255]<<16|c[u>>>8&255]<<8|c[255&p])^o[f++],e[t]=g,e[t+1]=y,e[t+2]=m,e[t+3]=_},keySize:8});t.AES=o._createHelper(g)}(),e.AES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":122,"./core":123,"./enc-base64":124,"./evpkdf":126,"./md5":131}],122:[function(e,t,o){var n;n=function(e){e.lib.Cipher||function(t){var o=e,n=o.lib,r=n.Base,i=n.WordArray,a=n.BufferedBlockAlgorithm,c=o.enc,s=(c.Utf8,c.Base64),l=o.algo.EvpKDF,u=n.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:m}return function(t){return{encrypt:function(o,n,r){return e(n).encrypt(t,o,n,r)},decrypt:function(o,n,r){return e(n).decrypt(t,o,n,r)}}}}()}),p=(n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),o.mode={}),d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=p.CBC=function(){var e=d.extend();function o(e,o,n){var r=this._iv;if(r){var i=r;this._iv=t}else i=this._prevBlock;for(var a=0;a<n;a++)e[o+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),o.call(this,e,t,r),this._prevBlock=i}}),e}(),h=(o.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,n=o-e.sigBytes%o,r=n<<24|n<<16|n<<8|n,a=[],c=0;c<n;c+=4)a.push(r);var s=i.create(a,n);e.concat(s)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:h}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,o=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=o.createEncryptor;else n=o.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(o,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,o=e.salt;if(o)var n=i.create([1398893684,1701076831]).concat(o).concat(t);else n=t;return n.toString(s)},parse:function(e){var t=s.parse(e),o=t.words;if(1398893684==o[0]&&1701076831==o[1]){var n=i.create(o.slice(2,4));o.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:n})}},m=n.SerializableCipher=r.extend({cfg:r.extend({format:y}),encrypt:function(e,t,o,n){n=this.cfg.extend(n);var r=e.createEncryptor(o,n),i=r.finalize(t),a=r.cfg;return g.create({ciphertext:i,key:o,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,o,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(o,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(o.kdf={}).OpenSSL={execute:function(e,t,o,n){n||(n=i.random(8));var r=l.create({keySize:t+o}).compute(e,n),a=i.create(r.words.slice(t),4*o);return r.sigBytes=4*t,g.create({key:r,iv:a,salt:n})}},v=n.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:_}),encrypt:function(e,t,o,n){var r=(n=this.cfg.extend(n)).kdf.execute(o,e.keySize,e.ivSize);n.iv=r.iv;var i=m.encrypt.call(this,e,t,r.key,n);return i.mixIn(r),i},decrypt:function(e,t,o,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(o,e.keySize,e.ivSize,t.salt);return n.iv=r.iv,m.decrypt.call(this,e,t,r.key,n)}})}()},"object"==typeof o?t.exports=o=n(e("./core"),e("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],n):n(this.CryptoJS)},{"./core":123,"./evpkdf":126}],123:[function(t,o,n){var r;r=function(){var t=t||function(t){var o=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),n={},r=n.lib={},i=r.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,o=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<r;i++){var a=o[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=a<<24-(n+i)%4*8}else for(i=0;i<r;i+=4)t[n+i>>>2]=o[i>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,o=this.sigBytes;e[o>>>2]&=4294967295<<32-o%4*8,e.length=t.ceil(o/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var o,n=[],r=function(e){e=e;var o=987654321,n=4294967295;return function(){var r=((o=36969*(65535&o)+(o>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n;return r/=4294967296,(r+=.5)*(t.random()>.5?1:-1)}},i=0;i<e;i+=4){var c=r(4294967296*(o||t.random()));o=987654071*c(),n.push(4294967296*c()|0)}return new a.init(n,e)}}),c=n.enc={},s=c.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n+=2)o[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new a.init(o,t/2)}},l=c.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n++)o[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new a.init(o,t)}},u=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},p=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var o=this._data,n=o.words,r=o.sigBytes,i=this.blockSize,c=r/(4*i),s=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*i,l=t.min(4*s,r);if(s){for(var u=0;u<s;u+=i)this._doProcessBlock(n,u);var p=n.splice(0,s);o.sigBytes-=l}return new a.init(p,l)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(r.Hasher=p.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new d.HMAC.init(e,o).finalize(t)}}}),n.algo={});return n}(Math);return t},"object"==typeof n?o.exports=n=r():"function"==typeof define&&define.amd?define([],r):this.CryptoJS=r()},{}],124:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray;function n(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var c=n[e.charCodeAt(a-1)]<<a%4*2,s=n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=(c|s)<<24-i%4*8,i++}return o.create(r,i)}t.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,n=this._map;e.clamp();for(var r=[],i=0;i<o;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<o;c++)r.push(n.charAt(a>>>6*(3-c)&63));var s=n.charAt(64);if(s)for(;r.length%4;)r.push(s);return r.join("")},parse:function(e){var t=e.length,o=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<o.length;i++)r[o.charCodeAt(i)]=i}var a=o.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(t=c)}return n(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":123}],125:[function(e,t,o){arguments[4][18][0].apply(o,arguments)},{"./core":123,dup:18}],126:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,c;return n=(o=(t=e).lib).Base,r=o.WordArray,a=(i=t.algo).MD5,c=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,n=o.hasher.create(),i=r.create(),a=i.words,c=o.keySize,s=o.iterations;a.length<c;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var u=1;u<s;u++)l=n.finalize(l),n.reset();i.concat(l)}return i.sigBytes=4*c,i}}),t.EvpKDF=function(e,t,o){return c.create(o).compute(e,t)},e.EvpKDF},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(this.CryptoJS)},{"./core":123,"./hmac":128,"./sha1":147}],127:[function(e,t,o){arguments[4][20][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,dup:20}],128:[function(e,t,o){arguments[4][21][0].apply(o,arguments)},{"./core":123,dup:21}],129:[function(e,t,o){var n;n=function(e){return e},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core"),e("./lib-typedarrays"),e("./enc-utf16"),e("./enc-base64"),e("./md5"),e("./sha1"),e("./sha256"),e("./sha224"),e("./sha512"),e("./sha384"),e("./sha3"),e("./ripemd160"),e("./hmac"),e("./pbkdf2"),e("./evpkdf"),e("./cipher-core"),e("./mode-cfb"),e("./mode-ctr"),e("./mode-ctr-gladman"),e("./mode-ofb"),e("./mode-ecb"),e("./pad-ansix923"),e("./pad-iso10126"),e("./pad-iso97971"),e("./pad-zeropadding"),e("./pad-nopadding"),e("./format-hex"),e("./aes"),e("./tripledes"),e("./rc4"),e("./rabbit"),e("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],n):this.CryptoJS=n(this.CryptoJS)},{"./aes":121,"./cipher-core":122,"./core":123,"./enc-base64":124,"./enc-utf16":125,"./evpkdf":126,"./format-hex":127,"./hmac":128,"./lib-typedarrays":130,"./md5":131,"./mode-cfb":132,"./mode-ctr":134,"./mode-ctr-gladman":133,"./mode-ecb":135,"./mode-ofb":136,"./pad-ansix923":137,"./pad-iso10126":138,"./pad-iso97971":139,"./pad-nopadding":140,"./pad-zeropadding":141,"./pbkdf2":142,"./rabbit":144,"./rabbit-legacy":143,"./rc4":145,"./ripemd160":146,"./sha1":147,"./sha224":148,"./sha256":149,"./sha3":150,"./sha384":151,"./sha512":152,"./tripledes":153,"./x64-core":154}],130:[function(e,t,o){arguments[4][23][0].apply(o,arguments)},{"./core":123,dup:23}],131:[function(e,t,o){arguments[4][24][0].apply(o,arguments)},{"./core":123,dup:24}],132:[function(e,t,o){var n;n=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function o(e,t,o,n){var r=this._iv;if(r){var i=r.slice(0);this._iv=void 0}else i=this._prevBlock;n.encryptBlock(i,0);for(var a=0;a<o;a++)e[t+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r,n),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);o.call(this,e,t,r,n),this._prevBlock=i}}),t}(),e.mode.CFB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":122,"./core":123}],133:[function(e,t,o){arguments[4][26][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,dup:26}],134:[function(e,t,o){arguments[4][27][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,dup:27}],135:[function(e,t,o){arguments[4][28][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,dup:28}],136:[function(e,t,o){arguments[4][29][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,dup:29}],137:[function(e,t,o){arguments[4][30][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,dup:30}],138:[function(e,t,o){arguments[4][31][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,dup:31}],139:[function(e,t,o){arguments[4][32][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,dup:32}],140:[function(e,t,o){arguments[4][33][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,dup:33}],141:[function(e,t,o){var n;n=function(e){return e.pad.ZeroPadding={pad:function(e,t){var o=4*t;e.clamp(),e.sigBytes+=o-(e.sigBytes%o||o)},unpad:function(e){for(var t=e.words,o=e.sigBytes-1;!(t[o>>>2]>>>24-o%4*8&255);)o--;e.sigBytes=o+1}},e.pad.ZeroPadding},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":122,"./core":123}],142:[function(e,t,o){arguments[4][35][0].apply(o,arguments)},{"./core":123,"./hmac":128,"./sha1":147,dup:35}],143:[function(e,t,o){arguments[4][36][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,"./enc-base64":124,"./evpkdf":126,"./md5":131,dup:36}],144:[function(e,t,o){arguments[4][37][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,"./enc-base64":124,"./evpkdf":126,"./md5":131,dup:37}],145:[function(e,t,o){arguments[4][38][0].apply(o,arguments)},{"./cipher-core":122,"./core":123,"./enc-base64":124,"./evpkdf":126,"./md5":131,dup:38}],146:[function(e,t,o){arguments[4][39][0].apply(o,arguments)},{"./core":123,dup:39}],147:[function(e,t,o){arguments[4][40][0].apply(o,arguments)},{"./core":123,dup:40}],148:[function(e,t,o){arguments[4][41][0].apply(o,arguments)},{"./core":123,"./sha256":149,dup:41}],149:[function(e,t,o){arguments[4][42][0].apply(o,arguments)},{"./core":123,dup:42}],150:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,i=n.Hasher,a=o.x64.Word,c=o.algo,s=[],l=[],u=[];(function(){for(var e=1,t=0,o=0;o<24;o++){s[e+5*t]=(o+1)*(o+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,i=0;i<24;i++){for(var c=0,p=0,d=0;d<7;d++){if(1&r){var f=(1<<d)-1;f<32?p^=1<<f:c^=1<<f-32}128&r?r=r<<1^113:r<<=1}u[i]=a.create(c,p)}})();var p=[];(function(){for(var e=0;e<25;e++)p[e]=a.create()})();var d=c.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var o=this._state,n=this.blockSize/2,r=0;r<n;r++){var i=e[t+2*r],a=e[t+2*r+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(O=o[r]).high^=a,O.low^=i}for(var c=0;c<24;c++){for(var d=0;d<5;d++){for(var f=0,h=0,g=0;g<5;g++)f^=(O=o[d+5*g]).high,h^=O.low;var y=p[d];y.high=f,y.low=h}for(d=0;d<5;d++){var m=p[(d+4)%5],_=p[(d+1)%5],v=_.high,S=_.low;for(f=m.high^(v<<1|S>>>31),h=m.low^(S<<1|v>>>31),g=0;g<5;g++)(O=o[d+5*g]).high^=f,O.low^=h}for(var N=1;N<25;N++){var b=(O=o[N]).high,C=O.low,P=s[N];P<32?(f=b<<P|C>>>32-P,h=C<<P|b>>>32-P):(f=C<<P-32|b>>>64-P,h=b<<P-32|C>>>64-P);var I=p[l[N]];I.high=f,I.low=h}var w=p[0],T=o[0];for(w.high=T.high,w.low=T.low,d=0;d<5;d++)for(g=0;g<5;g++){var O=o[N=d+5*g],R=p[N],E=p[(d+1)%5+5*g],A=p[(d+2)%5+5*g];O.high=R.high^~E.high&A.high,O.low=R.low^~E.low&A.low}O=o[0];var D=u[c];O.high^=D.high,O.low^=D.low}},_doFinalize:function(){var e=this._data,o=e.words,n=(this._nDataBytes,8*e.sigBytes),i=32*this.blockSize;o[n>>>5]|=1<<24-n%32,o[(t.ceil((n+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*o.length,this._process();for(var a=this._state,c=this.cfg.outputLength/8,s=c/8,l=[],u=0;u<s;u++){var p=a[u],d=p.high,f=p.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(d)}return new r.init(l,c)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),o=0;o<25;o++)t[o]=t[o].clone();return e}});o.SHA3=i._createHelper(d),o.HmacSHA3=i._createHmacHelper(d)}(Math),e.SHA3},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":123,"./x64-core":154}],151:[function(e,t,o){arguments[4][44][0].apply(o,arguments)},{"./core":123,"./sha512":152,"./x64-core":154,dup:44}],152:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.Hasher,n=t.x64,r=n.Word,i=n.WordArray,a=t.algo;function c(){return r.create.apply(r,arguments)}var s=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],l=[];(function(){for(var e=0;e<80;e++)l[e]=c()})();var u=a.SHA512=o.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],i=o[2],a=o[3],c=o[4],u=o[5],p=o[6],d=o[7],f=n.high,h=n.low,g=r.high,y=r.low,m=i.high,_=i.low,v=a.high,S=a.low,N=c.high,b=c.low,C=u.high,P=u.low,I=p.high,w=p.low,T=d.high,O=d.low,R=f,E=h,A=g,D=y,k=m,L=_,B=v,M=S,F=N,G=b,U=C,x=P,j=I,H=w,z=T,W=O,V=0;V<80;V++){var K=l[V];if(V<16)var Y=K.high=0|e[t+2*V],q=K.low=0|e[t+2*V+1];else{var J=l[V-15],X=J.high,Z=J.low,Q=(X>>>1|Z<<31)^(X>>>8|Z<<24)^X>>>7,$=(Z>>>1|X<<31)^(Z>>>8|X<<24)^(Z>>>7|X<<25),ee=l[V-2],te=ee.high,oe=ee.low,ne=(te>>>19|oe<<13)^(te<<3|oe>>>29)^te>>>6,re=(oe>>>19|te<<13)^(oe<<3|te>>>29)^(oe>>>6|te<<26),ie=l[V-7],ae=ie.high,ce=ie.low,se=l[V-16],le=se.high,ue=se.low;Y=(Y=(Y=Q+ae+((q=$+ce)>>>0<$>>>0?1:0))+ne+((q+=re)>>>0<re>>>0?1:0))+le+((q+=ue)>>>0<ue>>>0?1:0),K.high=Y,K.low=q}var pe,de=F&U^~F&j,fe=G&x^~G&H,he=R&A^R&k^A&k,ge=E&D^E&L^D&L,ye=(R>>>28|E<<4)^(R<<30|E>>>2)^(R<<25|E>>>7),me=(E>>>28|R<<4)^(E<<30|R>>>2)^(E<<25|R>>>7),_e=(F>>>14|G<<18)^(F>>>18|G<<14)^(F<<23|G>>>9),ve=(G>>>14|F<<18)^(G>>>18|F<<14)^(G<<23|F>>>9),Se=s[V],Ne=Se.high,be=Se.low,Ce=z+_e+((pe=W+ve)>>>0<W>>>0?1:0),Pe=me+ge;z=j,W=H,j=U,H=x,U=F,x=G,F=B+(Ce=(Ce=(Ce=Ce+de+((pe+=fe)>>>0<fe>>>0?1:0))+Ne+((pe+=be)>>>0<be>>>0?1:0))+Y+((pe+=q)>>>0<q>>>0?1:0))+((G=M+pe|0)>>>0<M>>>0?1:0)|0,B=k,M=L,k=A,L=D,A=R,D=E,R=Ce+(ye+he+(Pe>>>0<me>>>0?1:0))+((E=pe+Pe|0)>>>0<pe>>>0?1:0)|0}h=n.low=h+E,n.high=f+R+(h>>>0<E>>>0?1:0),y=r.low=y+D,r.high=g+A+(y>>>0<D>>>0?1:0),_=i.low=_+L,i.high=m+k+(_>>>0<L>>>0?1:0),S=a.low=S+M,a.high=v+B+(S>>>0<M>>>0?1:0),b=c.low=b+G,c.high=N+F+(b>>>0<G>>>0?1:0),P=u.low=P+x,u.high=C+U+(P>>>0<x>>>0?1:0),w=p.low=w+H,p.high=I+j+(w>>>0<H>>>0?1:0),O=d.low=O+W,d.high=T+z+(O>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(o/4294967296),t[31+(n+128>>>10<<5)]=o,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=o._createHelper(u),t.HmacSHA512=o._createHmacHelper(u)}(),e.SHA512},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":123,"./x64-core":154}],153:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib,n=o.WordArray,r=o.BlockCipher,i=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],s=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=i.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],o=0;o<56;o++){var n=a[o]-1;t[o]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],i=0;i<16;i++){var l=r[i]=[],u=s[i];for(o=0;o<24;o++)l[o/6|0]|=t[(c[o]-1+u)%28]<<31-o%6,l[4+(o/6|0)]|=t[28+(c[o+24]-1+u)%28]<<31-o%6;for(l[0]=l[0]<<1|l[0]>>>31,o=1;o<7;o++)l[o]=l[o]>>>4*(o-1)+3;l[7]=l[7]<<5|l[7]>>>27}var p=this._invSubKeys=[];for(o=0;o<16;o++)p[o]=r[15-o]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,o){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=o[n],i=this._lBlock,a=this._rBlock,c=0,s=0;s<8;s++)c|=l[s][((a^r[s])&u[s])>>>0];this._lBlock=a,this._rBlock=i^c}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var o=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=o,this._lBlock^=o<<e}function f(e,t){var o=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=o,this._rBlock^=o<<e}t.DES=r._createHelper(p);var h=i.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=p.createEncryptor(n.create(e.slice(0,2))),this._des2=p.createEncryptor(n.create(e.slice(2,4))),this._des3=p.createEncryptor(n.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=r._createHelper(h)}(),e.TripleDES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":122,"./core":123,"./enc-base64":124,"./evpkdf":126,"./md5":131}],154:[function(e,t,o){arguments[4][47][0].apply(o,arguments)},{"./core":123,dup:47}],155:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(o,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(o,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(o,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(o,"NIL",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(o,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(o,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(o,"parse",{enumerable:!0,get:function(){return p.default}});var n=d(e("./v1.js")),r=d(e("./v3.js")),i=d(e("./v4.js")),a=d(e("./v5.js")),c=d(e("./nil.js")),s=d(e("./version.js")),l=d(e("./validate.js")),u=d(e("./stringify.js")),p=d(e("./parse.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":157,"./parse.js":158,"./stringify.js":162,"./v1.js":163,"./v3.js":164,"./v4.js":166,"./v5.js":167,"./validate.js":168,"./version.js":169}],156:[function(e,t,o){"use strict";function n(e){const t=[],o=32*e.length;for(let n=0;n<o;n+=8){const o=e[n>>5]>>>n%32&255,r=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);t.push(r)}return t}function r(e){return 15+(e+64>>>9<<4)}function i(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let o=1732584193,n=-271733879,i=-1732584194,a=271733878;for(let r=0;r<e.length;r+=16){const t=o,s=n,f=i,h=a;o=l(o,n,i,a,e[r],7,-680876936),a=l(a,o,n,i,e[r+1],12,-389564586),i=l(i,a,o,n,e[r+2],17,606105819),n=l(n,i,a,o,e[r+3],22,-1044525330),o=l(o,n,i,a,e[r+4],7,-176418897),a=l(a,o,n,i,e[r+5],12,1200080426),i=l(i,a,o,n,e[r+6],17,-1473231341),n=l(n,i,a,o,e[r+7],22,-45705983),o=l(o,n,i,a,e[r+8],7,1770035416),a=l(a,o,n,i,e[r+9],12,-1958414417),i=l(i,a,o,n,e[r+10],17,-42063),n=l(n,i,a,o,e[r+11],22,-1990404162),o=l(o,n,i,a,e[r+12],7,1804603682),a=l(a,o,n,i,e[r+13],12,-40341101),i=l(i,a,o,n,e[r+14],17,-1502002290),o=u(o,n=l(n,i,a,o,e[r+15],22,1236535329),i,a,e[r+1],5,-165796510),a=u(a,o,n,i,e[r+6],9,-1069501632),i=u(i,a,o,n,e[r+11],14,643717713),n=u(n,i,a,o,e[r],20,-373897302),o=u(o,n,i,a,e[r+5],5,-701558691),a=u(a,o,n,i,e[r+10],9,38016083),i=u(i,a,o,n,e[r+15],14,-660478335),n=u(n,i,a,o,e[r+4],20,-405537848),o=u(o,n,i,a,e[r+9],5,568446438),a=u(a,o,n,i,e[r+14],9,-1019803690),i=u(i,a,o,n,e[r+3],14,-187363961),n=u(n,i,a,o,e[r+8],20,1163531501),o=u(o,n,i,a,e[r+13],5,-1444681467),a=u(a,o,n,i,e[r+2],9,-51403784),i=u(i,a,o,n,e[r+7],14,1735328473),o=p(o,n=u(n,i,a,o,e[r+12],20,-1926607734),i,a,e[r+5],4,-378558),a=p(a,o,n,i,e[r+8],11,-2022574463),i=p(i,a,o,n,e[r+11],16,1839030562),n=p(n,i,a,o,e[r+14],23,-35309556),o=p(o,n,i,a,e[r+1],4,-1530992060),a=p(a,o,n,i,e[r+4],11,1272893353),i=p(i,a,o,n,e[r+7],16,-155497632),n=p(n,i,a,o,e[r+10],23,-1094730640),o=p(o,n,i,a,e[r+13],4,681279174),a=p(a,o,n,i,e[r],11,-358537222),i=p(i,a,o,n,e[r+3],16,-722521979),n=p(n,i,a,o,e[r+6],23,76029189),o=p(o,n,i,a,e[r+9],4,-640364487),a=p(a,o,n,i,e[r+12],11,-421815835),i=p(i,a,o,n,e[r+15],16,530742520),o=d(o,n=p(n,i,a,o,e[r+2],23,-995338651),i,a,e[r],6,-198630844),a=d(a,o,n,i,e[r+7],10,1126891415),i=d(i,a,o,n,e[r+14],15,-1416354905),n=d(n,i,a,o,e[r+5],21,-57434055),o=d(o,n,i,a,e[r+12],6,1700485571),a=d(a,o,n,i,e[r+3],10,-1894986606),i=d(i,a,o,n,e[r+10],15,-1051523),n=d(n,i,a,o,e[r+1],21,-2054922799),o=d(o,n,i,a,e[r+8],6,1873313359),a=d(a,o,n,i,e[r+15],10,-30611744),i=d(i,a,o,n,e[r+6],15,-1560198380),n=d(n,i,a,o,e[r+13],21,1309151649),o=d(o,n,i,a,e[r+4],6,-145523070),a=d(a,o,n,i,e[r+11],10,-1120210379),i=d(i,a,o,n,e[r+2],15,718787259),n=d(n,i,a,o,e[r+9],21,-343485551),o=c(o,t),n=c(n,s),i=c(i,f),a=c(a,h)}return[o,n,i,a]}function a(e){if(0===e.length)return[];const t=8*e.length,o=new Uint32Array(r(t));for(let n=0;n<t;n+=8)o[n>>5]|=(255&e[n/8])<<n%32;return o}function c(e,t){const o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function s(e,t,o,n,r,i){return c((a=c(c(t,e),c(n,i)))<<(s=r)|a>>>32-s,o);var a,s}function l(e,t,o,n,r,i,a){return s(t&o|~t&n,e,t,r,i,a)}function u(e,t,o,n,r,i,a){return s(t&n|o&~n,e,t,r,i,a)}function p(e,t,o,n,r,i,a){return s(t^o^n,e,t,r,i,a)}function d(e,t,o,n,r,i,a){return s(o^(t|~n),e,t,r,i,a)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;o.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let o=0;o<t.length;++o)e[o]=t.charCodeAt(o)}return n(i(a(e),8*e.length))}},{}],157:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default="00000000-0000-0000-0000-000000000000"},{}],158:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./validate.js"))&&n.__esModule?n:{default:n};o.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const o=new Uint8Array(16);return o[0]=(t=parseInt(e.slice(0,8),16))>>>24,o[1]=t>>>16&255,o[2]=t>>>8&255,o[3]=255&t,o[4]=(t=parseInt(e.slice(9,13),16))>>>8,o[5]=255&t,o[6]=(t=parseInt(e.slice(14,18),16))>>>8,o[7]=255&t,o[8]=(t=parseInt(e.slice(19,23),16))>>>8,o[9]=255&t,o[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,o[11]=t/4294967296&255,o[12]=t>>>24&255,o[13]=t>>>16&255,o[14]=t>>>8&255,o[15]=255&t,o}},{"./validate.js":168}],159:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],160:[function(e,t,o){"use strict";let n;Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},{}],161:[function(e,t,o){"use strict";function n(e,t,o,n){switch(e){case 0:return t&o^~t&n;case 1:return t^o^n;case 2:return t&o^t&n^o&n;case 3:return t^o^n}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;o.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let o=0;o<t.length;++o)e.push(t.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),c=new Array(a);for(let n=0;n<a;++n){const t=new Uint32Array(16);for(let o=0;o<16;++o)t[o]=e[64*n+4*o]<<24|e[64*n+4*o+1]<<16|e[64*n+4*o+2]<<8|e[64*n+4*o+3];c[n]=t}c[a-1][14]=8*(e.length-1)/Math.pow(2,32),c[a-1][14]=Math.floor(c[a-1][14]),c[a-1][15]=8*(e.length-1)&4294967295;for(let s=0;s<a;++s){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=c[s][t];for(let t=16;t<80;++t)e[t]=r(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let i=o[0],a=o[1],l=o[2],u=o[3],p=o[4];for(let o=0;o<80;++o){const c=Math.floor(o/20),s=r(i,5)+n(c,a,l,u)+p+t[c]+e[o]>>>0;p=u,u=l,l=r(a,30)>>>0,a=i,i=s}o[0]=o[0]+i>>>0,o[1]=o[1]+a>>>0,o[2]=o[2]+l>>>0,o[3]=o[3]+u>>>0,o[4]=o[4]+p>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},{}],162:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let a=0;a<256;++a)i.push((a+256).toString(16).substr(1));o.default=function(e,t=0){const o=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,r.default)(o))throw TypeError("Stringified UUID is invalid");return o}},{"./validate.js":168}],163:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("./rng.js")),r=i(e("./stringify.js"));function i(e){return e&&e.__esModule?e:{default:e}}let a,c,s=0,l=0;o.default=function(e,t,o){let i=t&&o||0;const u=t||new Array(16);let p=(e=e||{}).node||a,d=void 0!==e.clockseq?e.clockseq:c;if(null==p||null==d){const t=e.random||(e.rng||n.default)();null==p&&(p=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=c=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:l+1;const g=f-s+(h-l)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||f>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,l=h,c=d;const y=(1e4*(268435455&(f+=122192928e5))+h)%4294967296;u[i++]=y>>>24&255,u[i++]=y>>>16&255,u[i++]=y>>>8&255,u[i++]=255&y;const m=f/4294967296*1e4&268435455;u[i++]=m>>>8&255,u[i++]=255&m,u[i++]=m>>>24&15|16,u[i++]=m>>>16&255,u[i++]=d>>>8|128,u[i++]=255&d;for(let n=0;n<6;++n)u[i+n]=p[n];return t||(0,r.default)(u)}},{"./rng.js":160,"./stringify.js":162}],164:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("./v35.js")),r=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,r.default);o.default=a},{"./md5.js":156,"./v35.js":165}],165:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t,o){function i(e,i,c,s){if("string"==typeof e&&(e=a(e)),"string"==typeof i&&(i=(0,r.default)(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(i),l.set(e,i.length),(l=o(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,c){s=s||0;for(let e=0;e<16;++e)c[s+e]=l[e];return c}return(0,n.default)(l)}try{i.name=e}catch(l){}return i.DNS=c,i.URL=s,i},o.URL=o.DNS=void 0;var n=i(e("./stringify.js")),r=i(e("./parse.js"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e=unescape(encodeURIComponent(e));const t=[];for(let o=0;o<e.length;++o)t.push(e.charCodeAt(o));return t}const c="6ba7b810-9dad-11d1-80b4-00c04fd430c8";o.DNS=c;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";o.URL=s},{"./parse.js":158,"./stringify.js":162}],166:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("./rng.js")),r=i(e("./stringify.js"));function i(e){return e&&e.__esModule?e:{default:e}}o.default=function(e,t,o){const i=(e=e||{}).random||(e.rng||n.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){o=o||0;for(let e=0;e<16;++e)t[o+e]=i[e];return t}return(0,r.default)(i)}},{"./rng.js":160,"./stringify.js":162}],167:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("./v35.js")),r=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,r.default);o.default=a},{"./sha1.js":161,"./v35.js":165}],168:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./regex.js"))&&n.__esModule?n:{default:n};o.default=function(e){return"string"==typeof e&&r.default.test(e)}},{"./regex.js":159}],169:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./validate.js"))&&n.__esModule?n:{default:n};o.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},{"./validate.js":168}],170:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.jsonSchema=o.fromString=o.empty=o.isUuid=o.regex=o.uuid=void 0;const n=e("util"),r=e("uuid"),i={v4:/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,v5:/(?:^[a-f0-9]{8}-[a-f0-9]{4}-5[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u};o.regex=i;const a={v4:{type:"string",pattern:i.v4.toString().slice(1,-2)},v5:{type:"string",pattern:i.v5.toString().slice(1,-2)}};o.jsonSchema=a;const c=n.deprecate(()=>r.v4(),"uuidv4() is deprecated. Use v4() from the uuid module instead.");o.uuid=c;const s=n.deprecate(e=>r.validate(e)&&(4===r.version(e)||5===r.version(e)),"isUuid() is deprecated. Use validate() from the uuid module instead.");o.isUuid=s;const l=n.deprecate(()=>r.NIL,"empty() is deprecated. Use NIL from the uuid module instead.");o.empty=l;const u=n.deprecate((e,t="bb5d0ffa-9a4c-4d7c-8fc2-0a7d2220ba45")=>r.v5(e,t),"fromString() is deprecated. Use v5() from the uuid module instead.");o.fromString=u},{util:5,uuid:155}],DailyBoosterUI:[function(t,o,n){"use strict";cc._RF.push(o,"7c425wh2DlHHKRE8OQiO73J","DailyBoosterUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../GameFramework/Scripts/BuildConfig"),u=t("../../../GameFramework/Scripts/NgcMain"),p=t("../../../Services/Ads/Ads"),d=t("../../../Services/Inventory/Inventory"),f=t("../../Dialogs/Script/MessageDialog/MessageDialog"),h=t("../../Dialogs/Script/NgcDialogManager"),g=t("../../OfflineMode/OfflineMode"),y=t("./NgcBoosterItem"),m=t("./NgcBoosterScroll"),_=t("./NgcLuckyBoosterManager"),v=cc._decorator,S=v.ccclass,N=v.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollingArea=null,t.boosterScroll=null,t.spinButton=null,t.boosterLabel=null,t.inGameLabel=null,t.useBoosterItem=null,t.messageDialog=null,t.messageTargetNode=null,t._posX=0,t._useBoosterItemPos=null,t._isPlayingAnimation=!1,t}return i(t,e),t.prototype.onLoad=function(){_.NgcLuckyBoosterManager.getInstance().init(this),this.createMessageTargetNode(),this.initUseBoosterItem(),this.node.opacity=0,this._posX=this.node.width/2},t.prototype.start=function(){if(this.spinButton.node.parent.children[1]){if(l.NgcBuildConfig.offlineMode||p.NgcAds.inst.isFakeAdsPlatform()){var e=d.NgcInventory.inst.objectTypeTable[_.NO_ADS_SPIN_CURRENCY].picture;console.log(d.NgcInventory.inst.objectTypeTable);var t=this.spinButton.node.children[0],o=t.getComponentInChildren(cc.Sprite),n=t.getComponentInChildren(cc.Label);cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e||(o.spriteFrame=t,o.node.scale=.5)}),n.node.active=!0,p.NgcAds.inst.isFakeAdsPlatform()&&(n.string=""+_.NO_ADS_SPIN_CURRENCY_NUMBER),l.NgcBuildConfig.offlineMode&&(n.string=g.OfflineMode.Config.DailyBoosterPrice.toString())}}else console.error("NGC: Please merge new LuckyBooster.")},t.prototype.update=function(e){this.boosterScroll.update(e)},t.prototype.createMessageTargetNode=function(){this.messageTargetNode=new cc.Node,cc.find("Canvas").addChild(this.messageTargetNode)},t.prototype.initUseBoosterItem=function(){this.useBoosterItem.node.opacity=0,this._useBoosterItemPos=this.useBoosterItem.node.position},t.prototype.onSpinButtonClick=function(){this._isPlayingAnimation||_.NgcLuckyBoosterManager.getInstance().onSpinButtonClick()},t.prototype.enableInGameText=function(e){this.spinButton.node.active=!e,this.boosterLabel.active=!e,this.inGameLabel.active=e},t.prototype.moveBoosterToCharacter=function(e,t){var o=this;this._isPlayingAnimation=!0,this.useBoosterItem.ImageSprite=e,this.useBoosterItem.node.opacity=255,this.useBoosterItem.node.x=this._useBoosterItemPos.x,this.useBoosterItem.node.y=this._useBoosterItemPos.y;var n=u.NgcMain.inst.getWorldPosOfMainCharacter(),r=this.useBoosterItem.node.convertToWorldSpaceAR(cc.v2(0,0)),i=cc.v2(n.x-r.x,n.y-r.y);cc.tween(this.useBoosterItem.node).to(.6,{x:this.useBoosterItem.node.x+i.x,y:this.useBoosterItem.node.y+i.y},{easing:"quartInOut"}).call(function(){o.useBoosterItem.node.opacity=0,t&&t(),o._isPlayingAnimation=!1}).start()},t.prototype.showLuckyBoosterMessage=function(e){return c(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return this.messageDialog&&this.messageDialog.isValid&&this.messageDialog.destroy(),[4,h.NgcDialogManager.createDialog(f.NgcMessageDialog.dialogType,f.NgcMessageDialog.urlPrefab,f.NgcMessageDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(f.NgcMessageDialog)).init(e,!0),this.messageDialog=o.node,o.show(null,this.messageTargetNode,null,null),[2]}})})},t.prototype.hide=function(){var e=this;this._isPlayingAnimation=!0;var t=this._posX-this.node.width;this.node.x=this._posX,cc.tween(this.node).parallel(cc.tween().to(.15,{scaleX:1.6}).to(.15,{scaleX:1},{easing:"cubicInOut"}),cc.tween().delay(.15).to(.15,{x:t},{easing:"cubicIn"})).call(function(){e.node.opacity=0,e._isPlayingAnimation=!1}).start()},t.prototype.show=function(){var e=this;this._isPlayingAnimation=!0;var t=this._posX;this.node.opacity=255,this.node.x=this._posX-this.node.width,cc.tween(this.node).parallel(cc.tween().to(.15,{x:t},{easing:"cubicOut"}),cc.tween().to(.15,{scaleX:1.6}).to(.15,{scaleX:1},{easing:"cubicOut"})).call(function(){e._isPlayingAnimation=!1}).start()},a([N(cc.Node)],t.prototype,"scrollingArea",void 0),a([N(m.NgcBoosterScroll)],t.prototype,"boosterScroll",void 0),a([N(cc.Button)],t.prototype,"spinButton",void 0),a([N(cc.Node)],t.prototype,"boosterLabel",void 0),a([N(cc.Node)],t.prototype,"inGameLabel",void 0),a([N(y.default)],t.prototype,"useBoosterItem",void 0),a([S],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../Services/Ads/Ads":"Ads","../../../Services/Inventory/Inventory":"Inventory","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../OfflineMode/OfflineMode":"OfflineMode","./NgcBoosterItem":"NgcBoosterItem","./NgcBoosterScroll":"NgcBoosterScroll","./NgcLuckyBoosterManager":"NgcLuckyBoosterManager"}],DailyRewardManager:[function(t,o,n){"use strict";cc._RF.push(o,"02890RvpgFHr71sZ83Cp+P0","DailyRewardManager");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcDailyRewardManager=void 0;var l=t("../../../GameFramework/Scripts/BuildConfig"),u=t("../../../GameFramework/Scripts/NgcMain"),p=t("../../../GameFramework/Scripts/NgcShopManager"),d=t("../../../GameFramework/Scripts/NgcUserInfo"),f=t("../../../SDK/Nano/NanoSrv"),h=t("../../../Services/DailyReward/DailyReward"),g=t("../../DeliveryReward/Script/DeliveryRewardAnimation"),y=t("../../NavBar/Script/NavBarManager"),m=t("../../OfflineMode/OfflineMode"),_=t("./DailyRewardUI"),v=cc._decorator,S=v.ccclass,N=v.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dailyRewardUIPrefab=null,t.dailyRewardUI=null,t.isDailyRewardAlreadyShow=!1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){o.inst.initDailyReward()},t.prototype.initDailyReward=function(){o.inst.dailyRewardUI=cc.instantiate(this.dailyRewardUIPrefab),o.inst.dailyRewardUI.parent=this.node,o.inst.getDailyRewardUIComponent().firstInit(),o.inst.dailyRewardUI.active=!1},t.prototype.getDailyRewardUINode=function(){return o.inst.dailyRewardUI},t.prototype.getDailyRewardUIComponent=function(){return o.inst.dailyRewardUI.getComponent(_.NgcDailyRewardUI)},t.prototype.isDailyRewardActive=function(){return o.inst.getDailyRewardUINode().active},t.prototype.updateInventory=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,u.NgcMain.inst.updateUserInfo()];case 1:return e.sent(),[2]}})})},t.prototype.checkReward=function(){return c(this,void 0,void 0,function(){var e,t,n,r=this;return s(this,function(i){switch(i.label){case 0:return 0==Object.keys(h.NgcDailyReward.inst.rewardSchedule).length?(cc.warn("Calling checkReward but rewardSchedule has yet to load"),[2]):(e=o.inst.getDailyRewardUIComponent(),t=!0,f.default.inst._getTotalSessions()<=1&&(t=d.default.totalRoundCount>=parseInt(h.NgcDailyReward.inst.parameters.firstSessionRunsBeforeDisplay)),l.NgcBuildConfig.offlineMode&&(t=m.OfflineMode.GetTotalRoundCount()>=m.OfflineMode.Config.RoundBeforeFirstDailyReward),cc.log("OfflineMode.GetTotalRoundCount()",m.OfflineMode.GetTotalRoundCount()),(t=t&&u.NgcMain.inst.appState!==u.AppState.Game)?[4,h.NgcDailyReward.inst.peekCurState()]:[2]);case 1:return(n=i.sent()).canClaim||1==parseInt(n.curStep)?e.initUI(h.NgcDailyReward.inst.rewardSchedule,n).then(function(){y.NgcNavBarManager.inst.showAllNavBar(!1),o.inst.getDailyRewardUINode().getComponent(_.NgcDailyRewardUI).show()}).finally(function(){r.dailyRewardLoadFinish()}):this.dailyRewardLoadFinish(),[2]}})})},t.prototype.dailyRewardLoadFinish=function(){},t.prototype.showClaimRewardAnimation=function(e){g.default.inst.showRewardAnimation(e,function(){p.NgcShopManager.getInstance().updateBoughtItem(e.itemID)},!0)},t.inst=null,a([N(cc.Prefab)],t.prototype,"dailyRewardUIPrefab",void 0),o=a([S],t)}(cc.Component);n.NgcDailyRewardManager=b,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/DailyReward/DailyReward":"DailyReward","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../NavBar/Script/NavBarManager":"NavBarManager","../../OfflineMode/OfflineMode":"OfflineMode","./DailyRewardUI":"DailyRewardUI"}],DailyRewardSkinItem:[function(e,t,o){"use strict";cc._RF.push(t,"6e79ae5NoFAIp2SfEW5/WQc","DailyRewardSkinItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/Services/GameShop/GameShop"),c=e("./CarSkinItem"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isLock=!0,t}return r(t,e),t.prototype.init=function(t,o,n,r){e.prototype.init.call(this,t,o,n,null),this.itemID=a.NgcGameShop.inst.getItems(r)[0].itemID},t.prototype.show=function(){this.isLock?(this.currentOption.active=!0,this.lockedIcon.active=!0):(this.currentOption.active=!1,this.carSelectToggle.node.active=!1,this.lockedIcon.active=!1,this.updateToggleUI())},t.prototype.hide=function(){this.carSelectToggle.node.active=!1,this.currentOption.active=!1},t.prototype.updateBoughtItemUI=function(){this.currentOption.active=!1,this.isLock=!1,this.lockedIcon.active=!1,this.carSelectToggle.node.active=!1,this.carSelectToggle.isChecked=!0},i([l],t)}(c.default));o.default=u,cc._RF.pop()},{"../../../NanoGameCore/Services/GameShop/GameShop":"GameShop","./CarSkinItem":"CarSkinItem"}],DailyRewardUI:[function(t,o,n){"use strict";cc._RF.push(o,"40df3B3TgROXpui1ApnlzGq","DailyRewardUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcDailyRewardUI=void 0;var l,u=t("../../../../Scripts/CarSelector/CarSkinSelecter"),p=t("../../../../Scripts/Dialog/RewardAnimationDialog/RewardAnimationDialog"),d=t("../../../../Scripts/Tracking/TrackingManager"),f=t("../../../../Scripts/UserInfo"),h=t("../../../../Scripts/Utils/ConstConfig"),g=t("../../../GameFramework/Scripts/Ads/NgcAdsManager"),y=t("../../../GameFramework/Scripts/BuildConfig"),m=t("../../../GameFramework/Scripts/CONSTANTS"),_=t("../../../GameFramework/Scripts/Localized/LabelLocalized"),v=t("../../../GameFramework/Scripts/Localized/LocalizedManager"),S=t("../../../GameFramework/Scripts/NgcUserInfo"),N=t("../../../SDK/Nano/NanoSrv"),b=t("../../../Services/Ads/Ads"),C=t("../../../Services/DailyReward/DailyReward"),P=t("../../../Services/Inventory/Inventory"),I=t("../../../Services/Platform/Platform"),w=t("../../../Services/Telemetry/Telemetry"),T=t("../../Dialogs/Script/DialogBase"),O=t("../../Dialogs/Script/MessageDialog/MessageDialog"),R=t("../../Dialogs/Script/NgcDialogManager"),E=t("../../NavBar/Script/NavBarManager"),A=t("./BigDay"),D=t("./DailyRewardManager"),k=t("./Day"),L=cc._decorator,B=L.ccclass,M=L.property;(function(e){e[e.today=0]="today",e[e.tomorrow=1]="tomorrow",e[e.other=2]="other",e[e.claimed=3]="claimed"})(l||(l={}));var F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.smallDays=null,t.bigRewards=null,t.day=null,t.iconVideo=null,t.subClaimNowLabel=null,t.claimButtonLabel=null,t.mainLayout=null,t.videoAdsBtn=null,t.flashLightAnim=null,t.DAILYREWARD_TEXTURE_PATH="Texture/DailyReward/",t.SMALL_DAY_COUNT=6,t.SKIN_SCALE=.5,t.SKIN_TOP_ALIGN=0,t.curStateResult=null,t.rewardSchedule_=null,t.rewardIsCurrency=!0,t.todayRewardInfo=null,t._isAlreadyClaimed=!1,t._isAlreadyClicked=!1,t}return i(t,e),t.prototype.show=function(){this._isAlreadyClaimed=!1,this._isAlreadyClicked=!1,e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this,function(){},!1)},t.prototype.firstInit=function(){for(var e=0;e<this.SMALL_DAY_COUNT;e++)cc.instantiate(this.day).parent=this.smallDays},t.prototype.initUI=function(e,t){return c(this,void 0,void 0,function(){var o,n,r,i,a,c,u,p,d,f,h=this;return s(this,function(s){switch(s.label){case 0:this.rewardSchedule_=e,this.curStateResult=t,o=this.smallDays,n=parseInt(t.curStep),r=n%7,i=Math.floor(n/7),0===r&&i>0&&(i-=1),a=0,s.label=1;case 1:return a<o.childrenCount?(void 0,c=0==r?l.claimed:a==r-1?l.today:a==r?l.tomorrow:a<r-1?l.claimed:l.other,u=e[a+1+7*i+""],(p=o.children[a].getComponent(k.NgcDay)).dayLabel.subText=" "+(a+1),p.dayLabel.setLocalizedText("DLR_DAY"),p.timeRemaining.node.active=!1,[4,this.updateDayStatus(p,c,u)]):[3,4];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:return d=6==r?l.tomorrow:0==r?l.today:l.other,f=this.bigRewards.getComponent(A.NgcBigDay),[4,this.updateBigDayStatus(f,d,e[7*i+7])];case 5:return s.sent(),this.subClaimNowLabel.node.active=!0,this.subClaimNowLabel.node.opacity=0,this.subClaimNowLabel.node.getComponent(cc.Button).interactable=!1,this.flashLightAnim.active=this.iconVideo.active=g.default.inst&&g.default.inst.isAdsPoincutAvailable(g.NgcPointcuts.videoDaily,b.AdsType.VideoReward)&&this.rewardIsCurrency,b.NgcAds.inst&&b.NgcAds.inst.isFakeAdsPlatform()&&(this.flashLightAnim.active=!1,this.iconVideo.active=!1),this.iconVideo.active?(this.claimButtonLabel.getComponent(_.NgcLabelLocalized).subText=" x2",this.claimButtonLabel.getComponent(_.NgcLabelLocalized).setLocalizedText("DLR_CLAIM"),setTimeout(function(){cc.tween(h.subClaimNowLabel.node).to(1,{opacity:255}).call(function(){h.subClaimNowLabel.node.getComponent(cc.Button).interactable=!0}).start()},2e3)):(this.claimButtonLabel.getComponent(_.NgcLabelLocalized).subText="",this.claimButtonLabel.getComponent(_.NgcLabelLocalized).setLocalizedText("DLR_CLAIM"),this.subClaimNowLabel.node.active=!1),[2]}})})},t.prototype.updateDayStatus=function(e,t,o){var n=this;return e.today.active=t===l.today,e.tomorrow.active=t===l.tomorrow,e.other.active=t===l.other||t===l.claimed,e.item.active=t!==l.claimed,e.claimed.active=t===l.claimed,new Promise(function(r){var i=n.getRewardInFunctionString(o.reward);if(null===i)return n.todayRewardInfo=null,console.log("[DailyRewardUI] `updateDayStatus` - Reward not FOUND"),void r();if(P.NgcInventory.inst.objectTypeTable[i.itemID]){switch(t===l.today&&(n.todayRewardInfo=i,n.rewardIsCurrency=P.NgcInventory.inst.objectTypeTable[i.itemID].type==m.NGC_CONSTANTS.INVENTORY.TYPE.CURRENCY),e.itemCount.string=i.count,P.NgcInventory.inst.objectTypeTable[i.itemID].type){case m.NGC_CONSTANTS.INVENTORY.TYPE.EQUIPPABLE:e.itemIcon.node.scale=n.SKIN_SCALE,e.itemIcon.spriteFrame=u.default.getSpriteFrameFromID(i.itemID),e.itemIcon.sizeMode=cc.Sprite.SizeMode.TRIMMED;break;case m.NGC_CONSTANTS.INVENTORY.TYPE.COMSUMABLE:e.itemCount.getComponent(_.NgcLabelLocalized).setLocalizedText("DAILY_REWARD_BOOSTER")}r()}else console.log("[DailyRewardUI] `updateDayStatus` rewardInfo.itemID = "+i.itemID+" not found")})},t.prototype.updateBigDayStatus=function(e,t,o){var n=this;return e.today.active=t===l.today,e.tomorrow.active=t===l.tomorrow,e.other.active=t===l.other,e.dayLabel.subText=" 7",e.dayLabel.setLocalizedText("DLR_DAY"),e.timeRemaining.node.active=!1,e.items.active=!0,e.specialReward.active=!1,new Promise(function(r){try{e.items.children[1].active=!1,e.items.children[2].active=!1;var i=e.itemIcon,a=e.multiNum,c=n.getRewardInFunctionString(o.reward);if(null===c)return console.log("[DailyRewardUI] `updateDayStatus` - Reward not FOUND"),void r();a.string="x"+c.count,t===l.today&&(n.rewardIsCurrency=P.NgcInventory.inst.objectTypeTable[c.itemID].type==m.NGC_CONSTANTS.INVENTORY.TYPE.CURRENCY),P.NgcInventory.inst.objectTypeTable[c.itemID].type==h.ConstConfig.INVENTORY.TYPE.EQUIPPABLE?(i.spriteFrame=u.default.getSpriteFrameFromID(c.itemID),a.enabled=!1):(P.NgcInventory.inst.objectTypeTable[c.itemID].type,m.NGC_CONSTANTS.INVENTORY.TYPE.CURRENCY),r()}catch(s){return console.log(s.message),void r()}})},t.prototype.onButtonClaimClick=function(e,t){return c(this,void 0,void 0,function(){var o,n,r,i,a,c=this;return s(this,function(s){switch(s.label){case 0:return this._isAlreadyClicked?[2]:this._isAlreadyClaimed?[2]:window.isAdsBlocked?[4,R.NgcDialogManager.showAdsReminderMsg(this.claimButtonLabel.node)]:[3,2];case 1:return s.sent(),[2];case 2:return this._isAlreadyClicked=!0,"ads"==t&&this.iconVideo.active&&b.NgcAds.inst?b.NgcAds.inst.waitingNewVideo?(o=y.NgcBuildConfig.services.Ads.timeWaitNewVideo-(Date.now()-b.NgcAds.inst.timeStartWaitNewVideo)/1e3,o=Math.round(o),[4,R.NgcDialogManager.createDialog(O.NgcMessageDialog.dialogType,O.NgcMessageDialog.urlPrefab,O.NgcMessageDialog.bundleName)]):[3,4]:[3,5];case 3:return n=s.sent(),(r=n.getComponent(O.NgcMessageDialog)).init(null),v.NgcLocalizedManager.setTextKey(r.labelLocalized,"ADS_COOLDOWN",[o.toString()],["xx"]),r.show(null,e.target,null,null),this._isAlreadyClicked=!1,[2];case 4:return S.default.updateAdsInfo(),i=null,a=null,this.todayRewardInfo&&(i=this.todayRewardInfo.itemID,a=parseInt(this.todayRewardInfo.count)),g.default.inst.show(g.NgcPointcuts.videoDaily,b.AdsType.VideoReward,i,a,null,function(e){e&&c.claimReward(!0),c._isAlreadyClicked=!1}),[3,6];case 5:this.claimReward(!1),s.label=6;case 6:return[2]}})})},t.prototype.claimReward=function(e){return void 0===e&&(e=!1),c(this,void 0,void 0,function(){var t,o,n,r,i;return s(this,function(a){switch(a.label){case 0:return this._isAlreadyClaimed=!0,t=this,E.NgcNavBarManager.inst.showAllNavBar(!0),[4,R.NgcDialogManager.createDialog(p.default.dialogType,p.default.urlPrefab,"")];case 1:return(o=a.sent()).active=!1,o.getComponent(p.default),[4,C.NgcDailyReward.inst.checkIn(e)];case 2:return(n=a.sent()).hasOwnProperty("data")&&(n=n.data),console.log("Daily checkin result: "+JSON.stringify(n)),[4,P.NgcInventory.inst.forceFetchInventory()];case 3:return a.sent(),f.UserInfo.updateInventoryWithPlatform().then(function(){if(n[0]&&n[0].details.itemID){var e=P.NgcInventory.inst.objectTypeTable[n[0].details.itemID];e.type===h.ConstConfig.INVENTORY.TYPE.EQUIPPABLE&&(u.default.inst.updateBoughtItem(e.itemID),d.default.inst.LogEvent_CarUnlockProgression(e.itemID,1,1,"Daily Reward system",f.UserInfo.curCoin))}}),[4,D.NgcDailyRewardManager.inst.updateInventory()];case 4:return a.sent(),r={itemID:n&&n[0]?n[0].details.itemID:void 0,count:parseInt(n&&n[0]?n[0].details.count:void 0)},i={multiplierOffer:1,itemRewardID:r.itemID,itemRewardValue:r.count,stepID:t.curStateResult.curStep,ViewedAd:e},t.hide(),w.NgcTelemetry.inst.LogEvent_DailyLoginReward(i),w.NgcTelemetry.inst.LogEvent_OnboardingDailyloginCollected(i),D.NgcDailyRewardManager.inst.isDailyRewardAlreadyShow||(D.NgcDailyRewardManager.inst.isDailyRewardAlreadyShow=!0,t.uploadDailyRewardIsAlreadyFirstShow()),D.NgcDailyRewardManager.inst.showClaimRewardAnimation(r),I.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_DLRCLAIM:{viewedAd:e}}),"*"),[2]}})})},t.prototype.getRewardInFunctionString=function(e){if(e.match(/get-item\((.+)\)/i)){var t=RegExp.$1.split(",").map(function(e){return e.trim()});return{itemID:t[0],count:t[1]}}return null},t.prototype.uploadDailyRewardIsAlreadyFirstShow=function(){N.default.inst.servicePost("/playerdata",JSON.stringify({_isAlreadyFirstShow:!0}),function(e){e||console.log("update _isAlreadyFirstShow success")})},t.prototype.onKeyDown=function(){},a([M(cc.Node)],t.prototype,"smallDays",void 0),a([M(cc.Node)],t.prototype,"bigRewards",void 0),a([M(cc.Prefab)],t.prototype,"day",void 0),a([M(cc.Node)],t.prototype,"iconVideo",void 0),a([M(cc.Label)],t.prototype,"subClaimNowLabel",void 0),a([M(cc.Label)],t.prototype,"claimButtonLabel",void 0),a([M(cc.Node)],t.prototype,"mainLayout",void 0),a([M(cc.Node)],t.prototype,"videoAdsBtn",void 0),a([M(cc.Node)],t.prototype,"flashLightAnim",void 0),a([B],t)}(T.NgcDialogBase);n.NgcDailyRewardUI=F,cc._RF.pop()},{"../../../../Scripts/CarSelector/CarSkinSelecter":"CarSkinSelecter","../../../../Scripts/Dialog/RewardAnimationDialog/RewardAnimationDialog":"RewardAnimationDialog","../../../../Scripts/Tracking/TrackingManager":"TrackingManager","../../../../Scripts/UserInfo":"UserInfo","../../../../Scripts/Utils/ConstConfig":"ConstConfig","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CONSTANTS":"CONSTANTS","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/DailyReward/DailyReward":"DailyReward","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/DialogBase":"DialogBase","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NavBar/Script/NavBarManager":"NavBarManager","./BigDay":"BigDay","./DailyRewardManager":"DailyRewardManager","./Day":"Day"}],DailyReward_impl_NanoSrv:[function(t,o,n){"use strict";cc._RF.push(o,"ca80aOqYohIUbokXQYRwk5w","DailyReward_impl_NanoSrv");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../Core/Utils"),u=t("../../GameFramework/Scripts/BuildConfig"),p=t("../../SDK/Nano/NanoSrv"),d=t("./DailyReward"),f=t("../../../NanoGameCore/SDK/SDK"),h=t("../../Services/Inventory/Inventory"),g=t("../Platform/Platform"),y=t("../../GameFramework/Scripts/NgcUserInfo"),m=t("../../CrossFeatures/OfflineMode/OfflineMode"),_=cc._decorator,v=_.ccclass,S=(_.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getName=function(){return"NgcDailyReward_impl_NanoSrv"},t.prototype.onLogin=function(e){var t=this,o=function(t){var o=t[0],n=t[1];return e(o?null:"Error parsing daily rewards table",o?n:null)};if(u.NgcBuildConfig.offlineMode)l.LoadAsset("offline:text/daily-reward").then(function(e){return o(t.initRewardScheduleFromCSV(e.text))});else{var n=p.default.inst.getCurGameInfo().dailyRewardTableByCohort[p.default.inst._getCohort()];l.Utils.getHttp(n,null,function(e,n){o(t.initRewardScheduleFromCSV(n))})}},t.prototype.do_cmd_GetItem=function(e,t,o){if(2==e.length){var n=e[0],r=parseInt(e[1]),i=1;t&&t.hasOwnProperty("multiplier")&&(i=parseFloat(t.multiplier));var a=r*i,c=null;if(t&&t.hasOwnProperty("itemSubsitution")&&(c=t.itemSubsitution),c){var s=c(n,r);n=s.itemID,r=s.quantity}t.simulated?o(null,{action:"get-item",details:{itemID:n,count:a}}):h.NgcInventory.inst.addItem(n,a,function(e,t){e?o(e,null):o(null,{action:"get-item",details:t})})}else o("get-item requires 2 args",null)},t.prototype.processCommandSingle=function(e,t,o){var n=l.Utils.parseFunctionCallString(e);if(null!=n){var r=n[0];n.shift();var i={};switch(t.hasOwnProperty(r)&&(i=t[r]),t.simulated&&(i.simulated=!0),r){case"get-item":this.do_cmd_GetItem(n,i,function(e,t){o(e,t)})}}else o("Failed to process string "+e,null)},t.prototype.processCommandListTopAndRecurse=function(e,t,o,n){var r=this,i=e[0];e.shift(),this.processCommandSingle(i,o,function(i,a){i?n(i,null):(t.push(a),e.length>0?r.processCommandListTopAndRecurse(e,t,o,n):n(null,t))})},t.prototype.processCommandSetString=function(e,t,o){var n=e.split("&");n.forEach(function(e,t,o){o[t]=e.trim()}),this.processCommandListTopAndRecurse(n,[],t,o)},t.prototype.getAdsMultiplier=function(){var e=y.default.offlineDailyReward;return e?e.curAdsRewardFactor:this.parameters.adsRewardFactorBase},t.prototype.keymangle=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},t.prototype.getCurStep=function(){var e=y.default.offlineDailyReward;return e?e.curStep:this.firstStepID},t.prototype.getElapsedTimeInCurCycleSec=function(){var e=y.default.offlineDailyReward;return e?(f.NgcSDK.getCurTime()-e.curStepStartDate)/1e3:0},t.prototype.getFreeTimeOnResetFailMS=function(){return 36e5*this.parameters.freeHoursOnResetFail},t.prototype._peekCurState=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r,i,a;return s(this,function(c){switch(c.label){case 0:return this.rewardSchedule,u.NgcBuildConfig.offlineMode?[3,2]:(e="/dailyRewards/peekCurState",u.NgcBuildConfig.enabledDebugMode&&(e=l.Utils.addQuery(e,"devTimeOffsetMin="+p.default.inst.devTimeOffsetMinutes.toString())),[4,p.default.inst.serviceGetAsync(e,null)]);case 1:return t=c.sent(),[2,JSON.parse(t).data];case 2:return o=m.OfflineMode.GetDailyRewardState(),n=o.curStep,r=f.NgcSDK.getCurTime()-o.curStepStartDate,i={},m.__DEV_DAILY_REWARD__&&(r=864e5+1),r>1728e5?(console.log("offline over 2 day"),a=this.rewardSchedule[n],i={canClaim:!0,curStep:a.ifFailGotoStep,timeUntilClaim:864e5-this.getFreeTimeOnResetFailMS()/1e3},m.OfflineMode.SetDailyRewardState({curStep:a.ifFailGotoStep,curStepStartDate:f.NgcSDK.getCurTime()})):r>864e5?(console.log("offline daily reward"),i={canClaim:!0,curStep:n,timeUntilClaim:-(1728e5-r)}):(console.log("offline nothing to claim"),i={canClaim:!1,curStep:n,timeUntilClaim:864e5-r}),[2,i]}})})},t.prototype.failCycle=function(){var e=this.getCurStep(),t={curStep:this.rewardSchedule[e].ifFailGotoStep,curStepStartDate:f.NgcSDK.getCurTime()-this.getFreeTimeOnResetFailMS(),curAdsRewardFactor:this.getAdsMultiplier()};return y.default.offlineDailyReward=t,t},t.prototype.doItemSubstitution=function(e,t){var o={itemID:e,quantity:t},n=h.NgcInventory.inst.objectTypeTable[e];if(!n)return console.warn("Item ID "+e+"not found"),o;if("equippable"!=n.type)return o;if(!this.parameters.defaultRewardIfAlreadyOwned)return o;var r=l.Utils.parseFunctionCallString(this.parameters.defaultRewardIfAlreadyOwned);return r&&"get-item"==r[0]?o={itemID:r[1],quantity:parseInt(r[2])}:(console.warn("Error parsing replacement reward"),o)},t.prototype._checkin=function(e){return c(this,void 0,Promise,function(){var t,o,n,r,i,a,c,d,h,g;return s(this,function(s){switch(s.label){case 0:return u.NgcBuildConfig.offlineMode?[3,2]:(t="/dailyRewards/checkin",e&&(t+="?adView=true"),u.NgcBuildConfig.enabledDebugMode&&(t=l.Utils.addQuery(t,"devTimeOffsetMin="+p.default.inst.devTimeOffsetMinutes.toString())),[4,p.default.inst.servicePostAsync(t,"{}")]);case 1:return o=s.sent(),[2,JSON.parse(o)];case 2:return[4,m.OfflineMode.GetDailyRewardState()];case 3:for(n=s.sent(),r=this.rewardSchedule[n.curStep],m.OfflineMode.SetDailyRewardState({curStep:r.ifPassGotoStep,curStepStartDate:f.NgcSDK.getCurTime()}),i=r.reward.split("&"),a=function(){var e=h.substr(0,h.indexOf("(")),t=h.replace(e,"").replace("(","").replace(")","").split(","),o=t[0],n=t[1],r=o.trim(),i=n.trim();return m.OfflineMode.UpdateItem(r,parseFloat(i)),{value:new Promise(function(e){e([{details:{itemID:r,count:i}}])})}},c=0,d=i;c<d.length;c++)if(h=d[c],"object"==typeof(g=a()))return[2,g.value];return[2,[]]}})})},t.prototype._preInit=function(){return new Promise(function(e){e("DailyReward_impl_Nano pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("DailyReward_impl_Nano initialized")})},t.prototype._getRewardForStep=function(e,t,o){if(g.NgcPlatform.isOfflineMode){var n=this.rewardSchedule[e],r={simulated:!0};t&&(r["get-item"]={multiplier:this.getAdsMultiplier(),itemSubsitution:this.doItemSubstitution}),this.processCommandSetString(n.reward,r,function(e,t){e?o(e,null):o(null,t)})}else{var i="/dailyRewards/getRewardForStep";i+="?adView="+t,i+="&stepID="+e,u.NgcBuildConfig.enabledDebugMode&&(i=l.Utils.addQuery(i,"devTimeOffsetMin="+p.default.inst.devTimeOffsetMinutes.toString())),p.default.inst.serviceGet(i,null,function(e,t){e?o(e,null):o(null,JSON.parse(t).data)})}},a([v],t)}(d.NgcDailyReward));n.default=S,cc._RF.pop()},{"../../../NanoGameCore/SDK/SDK":"SDK","../../Core/Utils":"Utils","../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/Inventory/Inventory":"Inventory","../Platform/Platform":"Platform","./DailyReward":"DailyReward"}],DailyReward:[function(t,o,n){"use strict";cc._RF.push(o,"4bf07Ie9j5OvYV4NC6UsKYT","DailyReward");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcDailyReward=void 0;var l=t("../../Core/nCSV"),u=t("../Service"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardSchedule={},t.parameters={},t.firstStepID=null,t}return i(t,e),t.prototype.peekCurState=function(){return c(this,void 0,void 0,function(){return s(this,function(){return[2,this._peekCurState()]})})},t.prototype.checkIn=function(e){return c(this,void 0,Promise,function(){return s(this,function(){return[2,this._checkin(e)]})})},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.getRewardForStep=function(e,t,o){this._getRewardForStep(e,t,function(e,t){o(e,t)})},t.prototype.getFirstStep=function(){return this.rewardSchedule[this.firstStepID]},t.prototype.getTotalSteps=function(){return Object.keys(this.rewardSchedule).length},t.prototype.getNextStep=function(e){var t=this.rewardSchedule[e];return this.rewardSchedule[t.ifPassGotoStep]},t.prototype.initRewardScheduleFromTableAndParams=function(e,t){if(!e)return!1;var o=this;return this.rewardSchedule={},e.forEach(function(e){var t=e.stepID;o.firstStepID||(o.firstStepID=t),o.rewardSchedule.hasOwnProperty(t)?console.warn("Duplicate step ID: "+t):o.rewardSchedule[t]=e}),this.parameters=t,!0},t.prototype.initRewardScheduleFromCSV=function(e){var t=l.nCSV.parseTable(e),o=l.nCSV.parseParameters(e);return[this.initRewardScheduleFromTableAndParams(t,o),t]},t.srvInstances=[],t.inst=null,a([d],t)}(u.NgcService));n.NgcDailyReward=f,cc._RF.pop()},{"../../Core/nCSV":"nCSV","../Service":"Service"}],Day:[function(e,t,o){"use strict";cc._RF.push(t,"c00a4u6jDVC/IBhYpNkB3lk","Day");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDay=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.today=null,t.tomorrow=null,t.other=null,t.item=null,t.claimed=null,t.itemIcon=null,t.itemCount=null,t.dayLabel=null,t.timeRemaining=null,t.timeUntilClaim=0,t.curTime=0,t}return r(t,e),i([l(cc.Node)],t.prototype,"today",void 0),i([l(cc.Node)],t.prototype,"tomorrow",void 0),i([l(cc.Node)],t.prototype,"other",void 0),i([l(cc.Node)],t.prototype,"item",void 0),i([l(cc.Node)],t.prototype,"claimed",void 0),i([l(cc.Sprite)],t.prototype,"itemIcon",void 0),i([l(cc.Label)],t.prototype,"itemCount",void 0),i([l(a.NgcLabelLocalized)],t.prototype,"dayLabel",void 0),i([l(cc.Label)],t.prototype,"timeRemaining",void 0),i([s],t)}(cc.Component);o.NgcDay=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],DebugLog:[function(e,t,o){"use strict";cc._RF.push(t,"2e117PJg2VLXY28jta9/1aT","DebugLog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.displayLines=10,t.textLines=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("More than one debug log!!"):o.inst=this},t.prototype.addLine=function(e){this.textLines.length>=this.displayLines&&this.textLines.splice(0,1),this.textLines.push(e);var t="",o=0;this.textLines.forEach(function(e){o>0&&(t+="\n"),t+=e,o++}),this.label.string=t},t.log=function(e){o.inst&&o.inst.addLine(e)},t.prototype.start=function(){},t.prototype.update=function(){},t.inst=null,i([s(cc.Label)],t.prototype,"label",void 0),i([s],t.prototype,"displayLines",void 0),o=i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],DebugUI:[function(t,o,n){"use strict";cc._RF.push(o,"7c93cFV6ORFtZRIn4xNB4Nr","DebugUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),u=t("../CustomControl"),p=t("../DebugUtils"),d=t("../FTUE/FTUEManager"),f=t("../Game"),h=t("../GameCamera"),g=t("../Main"),y=t("../Player/PlayerController"),m=t("../UserInfo"),_=t("./GameUI"),v=cc._decorator,S=v.ccclass,N=v.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pwScore=null,t.COIN_HACK=1e4,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){},t.prototype.closeDebugUI=function(){this.node.active=!1},t.prototype.showDebugUI=function(){l.NgcBuildConfig.enabledDebugMode&&(this.node.active=!0)},t.prototype.showDebugLog=function(e){cc.log(e.isChecked),_.default.inst.enableResultLog(e.isChecked)},t.prototype.enabledGodMode=function(e){cc.log(e.isChecked),f.default.inst.enabledGodMode(e.isChecked)},t.prototype.enabledCollision=function(e){cc.log(e.isChecked),h.default.inst.enableCollision(e.isChecked)},t.prototype.restartGame=function(){this.closeDebugUI(),g.Main.inst.reload()},t.prototype.changeControlType=function(e,t){cc.log("Change control"+e.checkEvents[0].customEventData),cc.log("Change custom"+t),"0"==e.checkEvents[0].customEventData?u.default.inst.show(u.ControlType.CENTER):"1"==e.checkEvents[0].customEventData?u.default.inst.show(u.ControlType.LEFT):"2"==e.checkEvents[0].customEventData?u.default.inst.show(u.ControlType.RIGHT):"3"==e.checkEvents[0].customEventData?u.default.inst.show(u.ControlType.DIAGONAL_LEFT):"4"==e.checkEvents[0].customEventData?u.default.inst.show(u.ControlType.DIAGONAL_RIGHT):"5"==e.checkEvents[0].customEventData?u.default.inst.show(u.ControlType.STEERING_WHEEL_LEFT):"6"==e.checkEvents[0].customEventData?u.default.inst.show(u.ControlType.STEERING_WHEEL_RIGHT):"7"==e.checkEvents[0].customEventData?u.default.inst.show(u.ControlType.STEERING_WHEEL_FREE):"8"==e.checkEvents[0].customEventData&&u.default.inst.show(u.ControlType.CONTROL_PAD)},t.prototype.resetFTUE=function(){m.UserInfo.curFTUEStep=d.FTUE_STEP.REACH_START_ZONE},t.prototype.hideHub=function(e){_.default.inst.hideAllUI(!e.isChecked)},t.prototype.unLockedAllMap=function(){},t.prototype.addPowerScore=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,m.UserInfo.addCoin("Cheat version",this.COIN_HACK)];case 1:return e.sent(),cc.log("Where I am"),this.pwScore.string="Coin = "+m.UserInfo.curCoin,[2]}})})},t.prototype.minusPowerScore=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return e=this.COIN_HACK,m.UserInfo.curCoin<this.COIN_HACK&&(e=m.UserInfo.curCoin),0==e?[2]:[4,m.UserInfo.addCoin("Cheat version",-e)];case 1:return t.sent(),this.pwScore.string="Coin = "+m.UserInfo.curCoin,[2]}})})},t.prototype.onEnable=function(){this.pwScore&&(this.pwScore.string="Coin = "+m.UserInfo.curCoin)},t.prototype.showDailyReward=function(){this.closeDebugUI()},t.prototype.cheatFinishRace=function(){this.skipFTUE()},t.prototype.skipFTUE=function(){l.NgcBuildConfig.enabledDebugMode&&(m.UserInfo.curFTUEStep<d.FTUE_STEP.REWARD_2ND_MAP&&(m.UserInfo.curFTUEStep=d.FTUE_STEP.FINISHED_ALL_FTUE),f.default.inst.enableControl(!0),y.default.inst.cheatFinishRace())},t.prototype.showPing=function(e){e.isChecked?p.default.inst.showPing(!0):p.default.inst.showPing(!1)},a([N(cc.Label)],t.prototype,"pwScore",void 0),o=a([S],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../CustomControl":"CustomControl","../DebugUtils":"DebugUtils","../FTUE/FTUEManager":"FTUEManager","../Game":"Game","../GameCamera":"GameCamera","../Main":"Main","../Player/PlayerController":"PlayerController","../UserInfo":"UserInfo","./GameUI":"GameUI"}],DebugUtils:[function(e,t,o){"use strict";cc._RF.push(t,"1397f/t059NIYUFQvxib44K","DebugUtils");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.debugMarkerPointPrefab=null,t.debugInfoCtner=null,t.pingLb=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){a.NgcBuildConfig.enabledDebugMode&&this.showPing(!0),o.inst?console.warn("Too many DebugUtils singletons in scene"):o.inst=this},t.prototype.start=function(){},t.prototype.addDebugMarkerPoint=function(e,t,o){void 0===o&&(o="")},t.prototype.showPing=function(){},t.prototype.updatePing=function(){},t.inst=null,i([l(cc.Prefab)],t.prototype,"debugMarkerPointPrefab",void 0),i([l(cc.Node)],t.prototype,"debugInfoCtner",void 0),i([l(cc.Label)],t.prototype,"pingLb",void 0),o=i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig"}],Debug:[function(e,t,o){"use strict";cc._RF.push(t,"9937aBGvqtBLrKB8UQ12yEd","Debug");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return r(t,e),t.prototype.start=function(){},i([s(cc.Label)],t.prototype,"label",void 0),i([s],t.prototype,"text",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Delegate:[function(e,t,o){"use strict";cc._RF.push(t,"e7155A5sQxDgpKkwBPBLPEu","Delegate"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._fa=[]}return e.prototype.add=function(e){this._fa.indexOf(e)<0&&this._fa.push(e)},e.prototype.del=function(e){var t=this._fa.indexOf(e,0);t>-1&&this._fa.splice(t,1)},e.prototype.call=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(var n=this._fa.length-1;n>=0;n--)(e=this._fa)[n].apply(e,t)},e}();o.default=n,cc._RF.pop()},{}],DeliveryRewardAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"d293aIeI4lDFIYQoOeRTuRG","DeliveryRewardAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../DailyReward/Script/RewardClaimAnimation"),c=e("../../EndGameFlow/Reward/RewardUI"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardAnimation=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?cc.error("There are already have NgcTechMessages!!! inst"):(o.inst=this,c.NgcEndGameRewardDialog.deliveryRewardInst=this)},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.showRewardAnimation=function(e,t,o,n){void 0===t&&(t=function(){}),void 0===o&&(o=!1),void 0===n&&(n=null);var r=cc.instantiate(this.rewardAnimation),i=r.getComponent(a.NgcRewardClaimAnimation);r.parent=this.node,i.setCustomText(n),i.showClaimRewardAnimation(e,function(){t&&t(),r.parent=null,r.destroy()},o)},t.inst=null,i([u(cc.Prefab)],t.prototype,"rewardAnimation",void 0),o=i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../DailyReward/Script/RewardClaimAnimation":"RewardClaimAnimation","../../EndGameFlow/Reward/RewardUI":"RewardUI"}],DialogBase:[function(t,o,n){"use strict";cc._RF.push(o,"05130mDBq5OJq4t7OUUVtKh","DialogBase");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcDialogBase=n.DIALOG_OPEN_TYPE=void 0;var c,s=t("../../../Core/Utils"),l=t("../../../GameFramework/Scripts/Ads/NgcAdsManager"),u=t("../../../GameFramework/Scripts/NgcScreenManager"),p=t("../../../Services/Ads/Ads"),d=cc._decorator,f=d.ccclass,h=d.property,g=d.menu;(function(e){e[e.BOUNCE_CENTER=0]="BOUNCE_CENTER",e[e.SLIDE_UP=1]="SLIDE_UP"})(c=n.DIALOG_OPEN_TYPE||(n.DIALOG_OPEN_TYPE={}));var y=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogUsingNode=null,e.bgUsingNode=null,e._dialogNodePosition=null,e._outBottomNodePosition=null,e._dWidget=null,e.isHandleKeyDown=!0,e.DEFAULT_SCREEN_SIZE=cc.v2(640,960),e.dialogNode=null,e.dialogOpenType=c.BOUNCE_CENTER,e.dimBackground=null,e.currentScale=1,e._hasResized=!1,e.defaultDialogContentWidth=0,e.needScaledBGNodes=[],e.isShowingBanner=!1,e}var n;return i(o,t),n=o,Object.defineProperty(o,"hasDialogShowing",{get:function(){return n.dialogStacks.length>0},enumerable:!1,configurable:!0}),o.prototype.checkShowBanner=function(e){var t,o;l.default.inst&&l.default.inst.isAdsPoincutAvailable(e,p.AdsType.Banner)?(null===(t=l.default.inst)||void 0===t||t.showBanner(e),this.resizeWidget(!1)):null===(o=l.default.inst)||void 0===o||o.hide()},o.prototype.resizeWidget=function(e,t,o){void 0===e&&(e=!1),void 0===t&&(t=.75),void 0===o&&(o=!1);var n=this.node.getComponent(cc.Widget),r=u.default.inst.TopBannerWidget.node.height;if(0!==r&&n)if(n.top=r,n.updateAlignment(),e){this.node.scale*=t;var i=this.node.getChildByName("Blank");if(this.bgUsingNode=this.dimBackground||i,this.bgUsingNode&&o){var a=this.bgUsingNode.getComponent(cc.Widget);a&&(a.updateAlignment(),a.enabled=!1,this.bgUsingNode.scale*=1+t)}}else this.node.getComponentsInChildren(cc.Widget).forEach(function(e){return e.enabled&&e.updateAlignment()}),this.isShowingBanner=!0,i=this.node.getChildByName("Blank"),this.bgUsingNode=this.dimBackground||i,this.needScaledBGNodes.concat([this.bgUsingNode]).forEach(function(e){var t=e.getComponent(cc.Widget);if(t){var o=u.default.inst.getTopBarHeight();t.top=-o,t.updateAlignment()}})},o.prototype.show=function(e){var t=this,o=cc.find("Canvas"),n=e||o,r=this.node.getChildByName("Blank");this.bgUsingNode=this.dimBackground||r;var i=this.bgUsingNode.getComponent(cc.Widget);i.target=o,i&&(i.left=i.right=i.top=i.bottom=0,i.updateAlignment());var a=this.node.getChildByName("Dialog");this.dialogUsingNode=this.dialogNode||a,this.node.active=!0,this.node.parent=n,this.node.setPosition(cc.v2(0,0)),this._dialogNodePosition=cc.v2(this.dialogUsingNode.position);var c=this.dialogUsingNode.scale,l=this.node.parent.getContentSize(),u=80;this._dWidget=this.dialogUsingNode.getComponent(cc.Widget),this._dWidget&&this._dWidget.enabled&&(u=this._dWidget.left);var p=this.defaultDialogContentWidth||this.dialogUsingNode.getContentSize().width;if(s.Utils.log(this.node.name,p+u,u,l),p+u>l.width&&!this._hasResized){var d=l.width/(p+u);this.dialogUsingNode.scale*=d,c=this.dialogUsingNode.scale,this._hasResized=!0}cc.view.setResizeCallback(function(){t.rescale()}),this.showPopup(this.dialogUsingNode,c),cc.sys.isNative&&this.isHandleKeyDown&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},o.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:this.handleBackKey()}},o.prototype.handleBackKey=function(){console.log("[dialogbase] handleBackKey");var e=n.dialogStacks.length;e>0&&n.dialogStacks[e-1]==this&&this.hide()},o.prototype.hide=function(e,t){var o=this;void 0===e&&(e=null),void 0===t&&(t=!0),this.isHandleKeyDown&&cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);var r=function(){o.node.active=!1,t?(cc.view.setResizeCallback(null),o.node.destroy()):o.dialogUsingNode.scale=o.dialogUsingNode.scale/.9,e&&e(),cc.js.array.remove(n.dialogStacks,o)};if(this.dialogUsingNode&&this.dialogUsingNode.active){switch(this.dialogOpenType){case c.BOUNCE_CENTER:var i=.9*this.dialogUsingNode.scale;cc.tween(this.dialogUsingNode).to(.125,{scale:i}).call(r).start();break;case c.SLIDE_UP:cc.tween(this.dialogUsingNode).to(.25,{position:this._outBottomNodePosition,opacity:255},{easing:"circIn"}).call(r).start()}cc.tween(this.bgUsingNode).to(.25,{opacity:0}).start()}else r()},o.prototype.showPopup=function(e,t){void 0===t&&(t=null);var o=t||1;switch(this.dialogOpenType){case c.BOUNCE_CENTER:e.scale=.9*o,e.opacity=0,this.bgUsingNode.opacity=0,cc.tween(e).to(.25,{scale:o,opacity:255},{easing:"backOut"}).start(),cc.tween(this.bgUsingNode).to(.25,{opacity:150}).start();break;case c.SLIDE_UP:var r=s.Utils.getWorldPos(e),i=-(r.y+e.height/2),a=this._dialogNodePosition.y+i;if(this._outBottomNodePosition=cc.v2(this._dialogNodePosition.x,a),e.setPosition(this._outBottomNodePosition),this._dWidget&&this._dWidget.enabled&&(this._dWidget.enabled=!1,this._dWidget.isAlignBottom)){var l=this._dWidget.bottom+e.scale*e.parent.scale*e.height/2,u=cc.v2(r.x,l);s.Utils.setWorldPos(e,u),this._dialogNodePosition=e.getPosition()}e.setPosition(this._outBottomNodePosition),cc.tween(e).to(.25,{position:this._dialogNodePosition},{easing:"circOut"}).start()}n.dialogStacks.push(this)},o.prototype.rescale=function(){try{var t=Math.min(1,cc.winSize.width/cc.winSize.height*this.DEFAULT_SCREEN_SIZE.y/this.DEFAULT_SCREEN_SIZE.x);this.node.scale*=t/this.currentScale,this.currentScale=t}catch(e){}},o.urlPrefab="",o.bundleName="",o.dialogType="",o.dialogStacks=[],a([h(cc.Node)],o.prototype,"dialogNode",void 0),a([h({type:cc.Enum(c)})],o.prototype,"dialogOpenType",void 0),a([h(cc.Node)],o.prototype,"dimBackground",void 0),a([h()],o.prototype,"defaultDialogContentWidth",void 0),a([h([cc.Node])],o.prototype,"needScaledBGNodes",void 0),n=a([f,g("NGC/Dialog/DialogBase")],o)}(cc.Component);n.NgcDialogBase=y,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../Services/Ads/Ads":"Ads"}],DialogOnSceneBase:[function(t,o,n){"use strict";cc._RF.push(o,"8ba85P4OrtI3rJJUmsu9Rnt","DialogOnSceneBase");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcDialogOnSceneBase=n.DIALOG_OPEN_TYPE=void 0;var c,s=cc._decorator,l=s.ccclass,u=s.property,p=s.menu;(function(e){e[e.BOUNCE_CENTER=0]="BOUNCE_CENTER",e[e.SLIDE_UP=1]="SLIDE_UP"})(c=n.DIALOG_OPEN_TYPE||(n.DIALOG_OPEN_TYPE={}));var d=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogUsingNode=null,e.bgUsingNode=null,e._dialogNodePosition=null,e._outBottomNodePosition=null,e._dWidget=null,e.DEFAULT_SCREEN_SIZE=cc.v2(640,960),e.dialogNode=null,e.dialogOpenType=c.BOUNCE_CENTER,e.dimBackground=null,e.currentScale=1,e._hasResized=!1,e}return i(o,t),o.prototype.onLoad=function(){var e=this.node.getChildByName("Dialog");this.dialogUsingNode=this.dialogNode||e},o.prototype.start=function(){this.show()},o.prototype.show=function(e){var t=cc.find("Canvas"),o=e||t,n=this.dialogUsingNode.scale,r=o.getContentSize();console.log("current parentSize ",r),console.log("current this.dialogUsingNode size ",this.dialogUsingNode.getContentSize());var i=80;if(this._dWidget=this.dialogUsingNode.getComponent(cc.Widget),this._dWidget&&this._dWidget.enabled&&(i=this._dWidget.left),this.dialogUsingNode.getContentSize().width+i>r.width&&!this._hasResized){var a=r.width/(this.dialogUsingNode.getContentSize().width+i);this.dialogUsingNode.scale*=a,n=this.dialogUsingNode.scale,this._hasResized=!0}console.log("after scaleFinal ",n)},o.prototype.rescale=function(){try{var t=Math.min(1,cc.winSize.width/cc.winSize.height*this.DEFAULT_SCREEN_SIZE.y/this.DEFAULT_SCREEN_SIZE.x);this.node.scale*=t/this.currentScale,this.currentScale=t}catch(e){}},o.urlPrefab="",o.bundleName="",o.dialogType="",o.dialogStacks=[],a([u(cc.Node)],o.prototype,"dialogNode",void 0),a([u({type:cc.Enum(c)})],o.prototype,"dialogOpenType",void 0),a([u(cc.Node)],o.prototype,"dimBackground",void 0),a([l,p("NGC/Dialog/DialogOnScene")],o)}(cc.Component);n.NgcDialogOnSceneBase=d,cc._RF.pop()},{}],DigitCountUp:[function(e,t,o){"use strict";cc._RF.push(t,"ed528sK4rdMU6+heZIJuZT0","DigitCountUp");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.fromNum=0,t.toNum=0,t.totaltime=0,t.prefix=!1,t.counter=0,t.audioCountNumberId=0,t.isCountDone=!1,t.callbackFunc=null,t.onCompleteFunc=null,t}return r(t,e),t.prototype.reset=function(){this.label.string="",this.isCountDone=!0},t.prototype.countFrom=function(e,t,o,n){o<=0?console.error("invalid time"):(this.fromNum=e,this.toNum=t,this.totaltime=o,this.counter=0,this.callbackFunc=n,this.isCountDone=!1)},t.prototype.start=function(){},t.prototype.onComplete=function(e){this.onCompleteFunc=e},t.prototype.update=function(e){if(!this.isCountDone){this.counter+=e;var t=this.counter/this.totaltime;t>1&&(t=1,this.onCompleteFunc&&(this.onCompleteFunc(),this.onCompleteFunc=null),this.isCountDone=!0),this.callbackFunc&&this.callbackFunc(t);var o=this.toNum-this.fromNum,n=this.fromNum+o*t;this.prefix&&n>0?this.label.string="+"+n.toFixed(0):this.label.string=n.toFixed(0)}},i([s(cc.Label)],t.prototype,"label",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],DrawMap:[function(t,o,n){"use strict";cc._RF.push(o,"387cc026tBKGp0WYkHpLNkh","DrawMap");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LAYERTYPE=void 0;var l,u=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),p=t("../Game"),d=t("../GameCamera"),f=t("../Gate"),h=t("../GroupCollision/GroupCollisionManager"),g=t("../Main"),y=t("../ObjectRender"),m=t("../StartPoint"),_=t("../UI/GameUI"),v=t("../Utils/ConstConfig"),S=t("../Utils/Util"),N=t("./PathManager"),b=cc._decorator,C=b.ccclass,P=b.property,I=["billboards","trees","platforms","platforms (back)"];(function(e){e[e.LAYER=0]="LAYER",e[e.OBJECT=1]="OBJECT"})(l=n.LAYERTYPE||(n.LAYERTYPE={}));var w=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.gatePrefabName="doodad01_start",e.layerName="PlayerName",e.drawCheckPoint=!1,e.shadown=null,e.debugMap=!1,e.grayScaleMaps=[],e.gradientScaleTiers=[],e.TileFlag=cc.Enum({HORIZONTAL:2147483648,VERTICAL:1073741824,DIAGONAL:536870912,FLIPPED_ALL:4026531840,FLIPPED_MASK:268435455}),e._nodeList=[],e._isMapReady=!1,e._JsonFile=null,e._listSprNodes=[],e._layers=[],e._groups=[],e._allLayers=[],e._allNodes=[],e}var n;return i(o,t),n=o,o.prototype.onLoad=function(){n.inst=this,cc.log("#Map Init"),n.loadPrefab(g.Main.inst.isFTUE()),cc.sys.isMobile?window.addEventListener("resize",this.onResize.bind(this)):cc.view.on("canvas-resize",this.onResize,this)},o.prototype.onResize=function(){!p.default.inst.isReadyGo()&&g.Main.inst.IsInGame()&&n.inst.getStartCenterPoint()&&this.scheduleOnce(function(){d.default.inst.setWorldPosition(n.inst.getStartCenterPoint())},.1)},o.getMap=function(){return n.mapLevelName},o.setMap=function(e){n.mapLevelName=e,cc.log("#Map is selected "+e)},o.prototype.start=function(){this.camera,cc.log("#Map Start"),this.registerEventHandlers()},o.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.left:this.camera.node.x-=50;break;case cc.macro.KEY.right:this.camera.node.x+=50;break;case cc.macro.KEY.space:break;case cc.macro.KEY.up:this.camera.node.y+=50;break;case cc.macro.KEY.down:this.camera.node.y-=50}},o.prototype.onKeyUp=function(){},o.loadPrefab=function(e){return void 0===e&&(e=!1),c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return n._loadedFTUE&&n._loadedNonFTUE&&cc.log("We load all map data already"),e?n._loadedFTUE?(cc.log("We Have it _loadedFTUE"),[3,3]):[3,1]:[3,4];case 1:return cc.log("We load loadFTUEPrefab"),[4,n.loadFTUEPrefab()];case 2:t.sent(),t.label=3;case 3:return[3,9];case 4:return n._loadedFTUE?(cc.log("We load loadPrefabNonFTUE"),[4,n.loadPrefabNonFTUE()]):[3,6];case 5:return t.sent(),[3,9];case 6:return n._loadedFTUE||n._loadedNonFTUE?[3,9]:(cc.log("We load loadPrefabNonFTUE & loadFTUEPrefab"),[4,n.loadFTUEPrefab()]);case 7:return t.sent(),[4,n.loadPrefabNonFTUE()];case 8:t.sent(),t.label=9;case 9:return[2]}})})},o.loadPrefabNonFTUE=function(){return c(this,void 0,void 0,function(){return s(this,function(){return n.inst,cc.log("Call Load loadPrefabNonFTUE"),new Promise(function(e){cc.resources.loadDir(v.ConstConfig.MAP_PREFAB_FOLDER,function(t,o){t?cc.error(t):(o.forEach(function(e){n.Prefabs.push(e)}),n._loadedNonFTUE=!0,cc.log(n.Prefabs),e())})}),[2]})})},o.loadFTUEPrefab=function(){return c(this,void 0,void 0,function(){return s(this,function(){return n.inst,cc.log("Call Load loadFTUEPrefab"),new Promise(function(e){cc.resources.loadDir(v.ConstConfig.MAP_PREFAB_FOLDER_FTUE,function(t,o){t?cc.error(t):(o.forEach(function(e){n.Prefabs.push(e)}),n._loadedFTUE=!0,e())})}),[2]})})},o.prototype.onLoadTileMap=function(e,t){return c(this,void 0,void 0,function(){var o,r,i=this;return s(this,function(a){switch(a.label){case 0:return o=this,r=new cc.Node,_.default.inst.mapName&&(u.NgcBuildConfig.enabledDebugMode?_.default.inst.mapName.string=n.getMap():_.default.inst.mapName.node.active=!1),this.grayScaleMaps.forEach(function(t){t.setProperty("gradientTexture",i.gradientScaleTiers[e])}),[4,new Promise(function(e){var i=n.mapLevelName+"_txt";cc.resources.load(i,cc.JsonAsset,function(i,a){var c;if(i)console.log(n.mapLevelName+"_txt doesn't exist. Load tiledMap instead"),o.tiledMap=r.addComponent(cc.TiledMap),cc.resources.load(n.mapLevelName,cc.TiledMapAsset,function(e,t){if(e)cc.error(e);else{cc.log("DrawMap by TILEDMAP"),o.tiledMap.tmxAsset=t;var n=o.tiledMap.getMapSize(),i=o.tiledMap.getTileSize();cc.log(o.tiledMap),c=new cc.Size(n.width*i.width,n.height*i.height),o.setMapSize(c),o.node.removeAllChildren(),o.parsing(o.tiledMap);var a=o.getAllLayers();o.tiledMap.destroy(),r.destroy(),o.drawAll(a)}});else{console.log("DrawMap by Json"),cc.log(a),o._JsonFile=a.json;var s=o._JsonFile.MapSize,l=o._JsonFile.TileSize;c=new cc.Size(s.width*l.width,s.height*l.height),o.setMapSize(c),o.parsing(null),cc.log(o);var u=o.getAllLayers();o.drawAll(u)}o.playerNameNode=new cc.Node,o.playerNameNode.name="PlayerNameNode",o.playerNameNode.group=h.GroupCollision.ROAD,o.playerNameNode.parent=o.node;var p=new cc.Node;p.setAnchorPoint(0,0),p.name="shadow",p.parent=o.node;var d=p.addComponent(cc.Sprite);o.shadown&&"map/track000"==n.getMap()&&(d.spriteFrame=o.shadown,d.srcBlendFactor=cc.macro.BlendFactor.DST_COLOR,d.dstBlendFactor=cc.macro.BlendFactor.ONE_MINUS_SRC_ALPHA,p.width=c.width,p.height=c.height),t&&"function"==typeof t&&t(),e()})})];case 1:return a.sent(),[2]}})})},o.prototype.hasDataJson=function(){return null!=this._JsonFile},o.prototype.getDataJson=function(){return this._JsonFile},o.prototype.InitMap=function(){if(m.default.allStartPoints.length>0){var e=m.default.allStartPoints[0],t=this.node.getChildByName("CarContainer");m.default.allStartPoints.forEach(function(e){e.node.parent=t,e.node.setPosition(t.convertToNodeSpaceAR(e.getWorldPosition())),e.node.zIndex=cc.macro.MIN_ZINDEX}),this._startCenterPoint=e.getWorldPosition(),d.default.inst.setWorldPosition(e.getWorldPosition()),d.default.inst.setZoomIn(1.3),N.default.getInst().sortNearPoint(),this.drawCheckPoint&&n.inst.drawNavigatePoints(this.node)}else cc.log("# Start Point is not innted");this._isMapReady=!0,cc.systemEvent.dispatchEvent(new cc.Event.EventCustom("MATCH_MAKING_DONE",!1))},o.prototype.getStartCenterPoint=function(){return this._startCenterPoint},o.prototype.reset=function(){this._layers=[],this._groups=[],this._nodeList.forEach(function(e){cc.log("destroyed"+e.name),e.destroy()}),this._nodeList=[],this.node.removeAllChildren(),this.tiledMap&&this.node.removeComponent(this.tiledMap),this._isMapReady=!1},o.prototype.isMapReady=function(){return this._isMapReady},o.prototype.parsing=function(e){var t=this;if(this.hasDataJson()){var o=this.getDataJson().layers;o&&o.forEach(function(e){e._type==l.LAYER?t._layers.push(e):e._type==l.OBJECT&&t._groups.push(e)})}else this._layers=e.getLayers(),this._groups=e.getObjectGroups()},o.prototype.drawAll=function(e){return c(this,void 0,void 0,function(){var t,o=this;return s(this,function(){return t=this,e.forEach(function(e){if(t.hasDataJson()){var n=e._name,r=!0;if(cc.sys.isMobile&&I.includes(n)&&(r=!1),r)if(e._type==l.LAYER){var i=o.getLayer(n);o.drawObjectInLayer(i)}else if(e._type==l.OBJECT){var a=o.getGroup(n);o.drawObjectsInGroup(a)}}else n=e.name,r=!0,cc.sys.isMobile&&I.includes(n)&&(r=!1),r&&(e instanceof cc.TMXLayerInfo?(i=o.getLayer(n),o.drawObjectInLayer(i)):e instanceof cc.TMXObjectGroupInfo&&(a=o.getGroup(n),o.drawObjectsInGroup(a)))}),[2]})})},o.prototype.getLayer=function(e){for(var t=0,o=this._layers;t<o.length;t++){var n=o[t];if((this.hasDataJson()?n._name:n.getLayerName())==e)return n}return null},o.prototype.getGroup=function(e){for(var t=0,o=this._groups;t<o.length;t++){var n=o[t];if((this.hasDataJson()?n._name:n.getGroupName())==e)return n}return null},o.prototype.getAllLayers=function(){return this._allLayers&&(this.hasDataJson()?this._allLayers=this.getDataJson().layers:this._allLayers=this.tiledMap._mapInfo.getAllChildren()),this._allLayers},o.prototype.drawObjectInLayer=function(e){if(this.hasDataJson()){var t=e._name;if((l=new cc.Node).name=t,l.active=e._active,l.group=h.GroupCollision.ROAD,l.setAnchorPoint(0,0),!l.active)return;var o=e._layerSize,n=e._tileSize;if(cc.log(t),e._tiles.length>0){var r=this.isFillLayer(e._tiles);if(cc.log("fill"+r),r){var i=e._tiles[0];(u=this.findPrefabNameByID(i))&&(p=this.findPrefabByName(u))&&((d=this.instantiate(p)).parent=l,d.setPosition(0,0),d.group=h.GroupCollision.ROAD,d.getComponent(cc.Sprite).type=cc.Sprite.Type.TILED,d.width=n.width*o.width,d.height=n.height*o.height)}else for(var a=0;a<o.height;a++)for(var c=0;c<o.width;c++){var s=a*c+c;0!=(i=e._tiles[s])&&(u=this.findPrefabNameByID(i))&&(p=this.findPrefabByName(u))&&((d=this.instantiate(p)).parent=l,d.setPosition(n.width*c,n.height*a))}}this.node.addChild(l),this._nodeList.push(l)}else{var l;if(t=e.getLayerName(),(l=new cc.Node).name=t,l.active=e.node.active,l.group=h.GroupCollision.ROAD,l.setAnchorPoint(0,0),!l.active)return;if(o=e.getLayerSize(),n=e.getMapTileSize(),cc.log(t),e._tiles.length>0)if(r=this.isFillLayer(e._tiles),cc.log("fill"+r),r)i=e._tiles[0],(u=this.findPrefabNameByID(i))&&(p=this.findPrefabByName(u))&&((d=this.instantiate(p)).parent=l,d.setPosition(0,0),d.getComponent(cc.Sprite).type=cc.Sprite.Type.TILED,d.width=n.width*o.width,d.height=n.height*o.height);else for(a=0;a<o.height;a++)for(c=0;c<o.width;c++){var u,p,d;s=a*c+c,0!=(i=e._tiles[s])&&(u=this.findPrefabNameByID(i))&&(p=this.findPrefabByName(u))&&((d=this.instantiate(p)).parent=l,d.setPosition(n.width*c,n.height*a))}this.node.addChild(l),this._nodeList.push(l)}},o.prototype.drawObjectsInGroup=function(e){var t=this;if(this.hasDataJson()){var o=e._name,n=new cc.Node;n.name=o,n.group=h.GroupCollision.ROAD,n.setAnchorPoint(0,0),n.active=e._active;var r=e._objects;if(!n.active||0==r.length)return;r.forEach(function(e){var o=e.g,r=(o&t.TileFlag.FLIPPED_MASK)>>>0,i=t.findPrefabNameByID(r),a=e.r,c=e.v;if(null!=i&&""!=i){var s=t.findPrefabByName(i);if(s){var l=t.instantiate(s);l.parent=n,l.active=c,l.setPosition(e.x,e.y),l.setScale(e.w/l.width,e.h/l.height),l.angle=-a,l.setAnchorPoint(0,0),i==t.gatePrefabName&&(t._gate=l),(o&t.TileFlag.HORIZONTAL)>>>0&&t.setFlipX(l,a),(o&t.TileFlag.VERTICAL)>>>0&&t.setFlipY(l,a)}else cc.log("Missing Prefab Name in Prefab folder="+i)}else cc.log("Missing Prefab Name in tsx file")}),n.parent=this.node,this._nodeList.push(n)}else{o=e.getGroupName();var i=new cc.Node;if(i.group=h.GroupCollision.ROAD,i.name=o,i.setAnchorPoint(0,0),i.active=e.node.active,r=e.getObjects(),!i.active||0==r.length)return;r.forEach(function(e){var o=e.gid,n=(o&t.TileFlag.FLIPPED_MASK)>>>0,r=t.findPrefabNameByID(n),a=e.rotation,c=e.visible;if(null!=r&&""!=r){var s=t.findPrefabByName(r);if(s){var l=t.instantiate(s);l.parent=i,l.active=c,l.setPosition(e.x,e.y),l.setScale(e.width/l.width,e.height/l.height),l.angle=-a,l.setAnchorPoint(0,0),r==t.gatePrefabName&&(t._gate=l),(o&t.TileFlag.HORIZONTAL)>>>0&&t.setFlipX(l,a),(o&t.TileFlag.VERTICAL)>>>0&&t.setFlipY(l,a)}else cc.log("Missing Prefab Name in Prefab folder="+r)}else cc.log("Missing Prefab Name in tsx file")}),i.parent=this.node,this._nodeList.push(i)}},o.prototype.findPrefabNameByID=function(e){var t;return(t=this.hasDataJson()?this.getDataJson().proreties[e]:this.tiledMap.getPropertiesForGID(e))&&t.prefabName?t.prefabName:null},o.prototype.findPrefabByName=function(e){for(var t=0;t<n.Prefabs.length;t++){var o=n.Prefabs[t];if(null!=o&&o.name==e)return o}return null},o.prototype.setFlipX=function(e,t){e.setScale(cc.v2(-1,1)),cc.log(e),270==t||-90==t?e.y+=e.width:180==t||-180==t?e.x-=e.width:90==t||-270==t?e.y-=e.width:0!=t&&360!=t||(e.x+=e.width)},o.prototype.setFlipY=function(e,t){e.setScale(cc.v2(1,-1)),270==t||-90==t?e.x-=e.height:180==t||-180==t?e.y-=e.height:90==t||-270==t?e.x+=e.height:0!=t&&360!=t||(e.y+=e.height)},o.prototype.drawNavigatePoints=function(e){var t=new cc.Node;t.parent=e;var o=t.addComponent(cc.Graphics);t.name="DrawingCircle",t.group=h.GroupCollision.ROAD;for(var n=N.default.getInst().getAll(),r=0;r<n.length;r++){var i=n[r],a=new cc.Node;a.addComponent(cc.Label),a.parent=e,a.position=e.convertToNodeSpaceAR(cc.v3(i.x,i.y,0)),a.getComponent(cc.Label).string=""+r,o.circle(a.x,a.y,i.z),o.strokeColor=cc.Color.RED,o.stroke()}},o.prototype.registerEventHandlers=function(){this.node.on("gate",function(t){try{console.log("#quy Call MapController update Gate :"+t);var o=n.inst._gate.getComponent(f.default);console.log("#quy Call MapController update Gate get Compe :",o),n.inst._gate.getComponent(f.default).updateFrame(t)}catch(e){console.log("#quy null Component GAte")}})},o.prototype.hasGateComponent=function(){try{return!!n.inst._gate.getComponent(f.default)}catch(e){return!1}},o.prototype.isFillLayer=function(e){var t=e[0];if(0==t)return!1;for(var o=0,n=e;o<n.length;o++){var r=n[o];if(t!=r&&this.findPrefabNameByID(t)!=this.findPrefabNameByID(r))return!1}return!0},o.prototype.setMapSize=function(e){this.mapSize=e},o.prototype.getMapSize=function(){return this.mapSize},o.prototype.getParentOfName=function(){return this.playerNameNode},o.isLoaded=function(e){return void 0===e&&(e=!1),e?n._loadedFTUE:n._loadedFTUE&&n._loadedNonFTUE},o.prototype.offScreen=function(e){var t=d.default.inst.cameraOb,o=cc.Vec2.ZERO,n=e.getBoundingBoxToWorld();return t.getWorldToScreenPoint(cc.v2(n.x,n.y),o),o.x+3*n.width<0||o.y+3*n.height<0||o.x-3*n.width>d.default.inst.screenWidth||o.y-3*n.height>d.default.inst.screenHeight},o.prototype.isInCamera=function(e){var t=d.default.inst,o=t.getWorldPosition();return!!cc.rect(o.x-t.screenWidth/2,o.y-t.screenHeight/2,t.screenWidth,t.screenHeight).intersects(e.getBoundingBox())},o.prototype.instantiate=function(e){var t=cc.instantiate(e);return t.group=h.GroupCollision.ROAD,S.default.getAllNode(t).forEach(function(e){e.group==h.GroupCollision.DEFAULT&&(e.group=h.GroupCollision.ROAD)}),t.addComponent(y.default),t},o.mapLevelName="rand_track001_env01",o.Prefabs=[],o.inst=null,o._loadedNonFTUE=!1,o._loadedFTUE=!1,a([P(cc.Camera)],o.prototype,"camera",void 0),a([P],o.prototype,"gatePrefabName",void 0),a([P],o.prototype,"layerName",void 0),a([P],o.prototype,"drawCheckPoint",void 0),a([P({type:cc.SpriteFrame})],o.prototype,"shadown",void 0),a([P(cc.Material)],o.prototype,"grayScaleMaps",void 0),a([P(cc.Texture2D)],o.prototype,"gradientScaleTiers",void 0),n=a([C],o)}(cc.Component);n.default=w,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../Game":"Game","../GameCamera":"GameCamera","../Gate":"Gate","../GroupCollision/GroupCollisionManager":"GroupCollisionManager","../Main":"Main","../ObjectRender":"ObjectRender","../StartPoint":"StartPoint","../UI/GameUI":"GameUI","../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util","./PathManager":"PathManager"}],ElinimatedMessageItem:[function(e,t,o){"use strict";cc._RF.push(t,"ab346p0hLxEc4vN6bMChSeN","ElinimatedMessageItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text=null,t._beginTime=0,t._effect=!1,t.autoClose=!0,t}return r(t,e),t.prototype.setText=function(e){this.text.string=e},t.prototype.init=function(e,t){var o=this;this._beginTime=Date.now(),this.text.string=e,this.node.opacity=0;var n=this.node.getSiblingIndex()+1;cc.log("index ",n);var r=this;t?this.scheduleOnce(function(){o.node.opacity=255,o.node.scale=0,cc.tween(r.node).to(.2,{scale:1},{easing:"quintOut"}).to(1,{}).to(.2,{scale:0},{easing:"quintIn"}).call(r.remove.bind(r)).start()},.5+n/2):(this.node.opacity=255,this.node.scale=0,cc.tween(r.node).to(.2,{scale:1},{easing:"quintOut"}).to(1,{}).start())},t.prototype.remove=function(){this.node.destroy()},i([s(cc.RichText)],t.prototype,"text",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],EmojiAnimationHandler:[function(e,t,o){"use strict";cc._RF.push(t,"e7d344kA+tB8JwbGg2Ci3hz","EmojiAnimationHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAnimationFinishedCallback=null,t}return r(t,e),t.prototype.setAnimationFinishedCallback=function(e){this.onAnimationFinishedCallback=e},t.prototype.onEmojiAnimationFinished=function(){this.onAnimationFinishedCallback&&this.onAnimationFinishedCallback()},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],EmojiScrollItem:[function(e,t,o){"use strict";cc._RF.push(t,"38c3agMYBlAaLSPP3IlcCjg","EmojiScrollItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmojiScrollItem=void 0;var a=e("../../../GameFramework/Scripts/NgcSceneManager"),c=e("./Emoji"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerName=null,t.flag=null,t.displayName=null,t.displayFlag=null,t.emojiSkeleton=null,t.bubbleNode=null,t.emotesMgr=null,t.emoji=null,t.emojiComp=null,t}return r(t,e),t.prototype.setEmoji=function(e){this.emojiComp=e,this.emojiComp.node.parent=this.bubbleNode,this.emojiSkeleton=e.node.getComponent(sp.Skeleton)},t.prototype.setEmojiPrefab=function(e){this.emoji=e,this.emojiComp=e.getComponent(c.NgcEmoji),this.emoji.parent=this.bubbleNode,this.emoji.scale=.5,this.emoji.x=0,this.emoji.y=0,this.emojiSkeleton=e.getComponent(sp.Skeleton)},t.prototype.reset=function(e){var t=a.NgcSceneManager.inst.findPlayerByNetID(e.playerNetID),o=a.NgcSceneManager.inst.findPlayerByNetID(e.displayNetID);this.playerName.string=t.getName(),this.flag.spriteFrame=t.getCountryFlag(),null!=o?(this.displayName.string=o.getName(),this.displayFlag.spriteFrame=o.getCountryFlag(),this.displayName.node.active=!0,this.displayFlag.node.active=!0):(this.displayName.string="",this.displayName.node.active=!1,this.displayFlag.node.active=!1),console.log(this.playerName.string+"=>"+this.displayName.string),cc.tween(this.node).to(.2,{opacity:255}).start(),this.collapseWhenAnimationCompleted()},t.prototype.collapseWhenAnimationCompleted=function(){var e=this;this.emojiComp.onFinishedAnimation(function(){cc.tween(e.node).to(.2,{opacity:0}).call(function(){e.emotesMgr.emojiPoolArray[e.emojiComp.prefabID].put(e.emoji),e.emoji.parent=null,e.emoji=null,e.emotesMgr.putScrollItemToPool(e),e.emotesMgr.checkAndShowPanelScrollView()}).start()}.bind(this))},i([u(cc.Label)],t.prototype,"playerName",void 0),i([u(cc.Sprite)],t.prototype,"flag",void 0),i([u(cc.Label)],t.prototype,"displayName",void 0),i([u(cc.Sprite)],t.prototype,"displayFlag",void 0),i([u(sp.Skeleton)],t.prototype,"emojiSkeleton",void 0),i([u(cc.Node)],t.prototype,"bubbleNode",void 0),i([l],t)}(cc.Component);o.NgcEmojiScrollItem=p,cc._RF.pop()},{"../../../GameFramework/Scripts/NgcSceneManager":"NgcSceneManager","./Emoji":"Emoji"}],Emoji:[function(e,t,o){"use strict";cc._RF.push(t,"f4616YXl2JJOoYAOfEabkus","Emoji");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmoji=void 0;var a=e("./EmojiAnimationHandler"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emojiID="",t.emotesMgr=null,t.skeleton=null,t.bubbleNode=null,t.emojiNode=null,t.animationHandler=null,t.isComplete=!1,t}return r(t,e),t.prototype.onLoad=function(){this.skeleton=this.node.getComponent(sp.Skeleton)},t.prototype.update=function(){if(this.bubbleNode){var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());0===this.bubbleNode.anchorX&&(e.x-=this.bubbleNode.width/2),this.bubbleNode.setPosition(this.bubbleNode.parent.convertToNodeSpaceAR(e)),this.emojiNode.setPosition(0,0),this.emojiNode.parent=this.bubbleNode.getChildByName("emoji")}},t.prototype.destroyWhenAnimationComplete=function(){var e=this;this.isComplete=!1,this.onFinishedAnimation(function(){e.isComplete||(e.isComplete=!0,e.emotesMgr.putEmojiToPool(e.prefabID,e),cc.tween(e.bubbleNode).to(.1,{scale:.1}).call(function(){e.emotesMgr.putBubbleToPool(e.bubbleNode),e.bubbleNode=null}).start())}.bind(this)),setTimeout(function(){e.destroyAnimation()},3e3)},t.prototype.destroyAnimation=function(){this.isComplete||(this.isComplete=!0,this.emotesMgr.putEmojiToPool(this.prefabID,this),this.bubbleNode&&(this.bubbleNode.scale=.1,this.emotesMgr.putBubbleToPool(this.bubbleNode),this.bubbleNode=null))},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.onFinishedAnimation=function(e){this.animationHandler.setAnimationFinishedCallback(e)},i([l(cc.String)],t.prototype,"emojiID",void 0),i([l(a.default)],t.prototype,"animationHandler",void 0),i([s],t)}(cc.Component);o.NgcEmoji=u,cc._RF.pop()},{"./EmojiAnimationHandler":"EmojiAnimationHandler"}],EmoteUIPosition:[function(e,t,o){"use strict";cc._RF.push(t,"ea247JxbWtEO6PKK50PdQLY","EmoteUIPosition");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/CrossFeatures/Emojis/Script/EmotesUI"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emoteButton=null,t.emoteLogs=null,t.background=null,t.ScrollDead=null,t.ScrollAlive=null,t.emoteUI=null,t.newEmotePosNode=null,t._direction=o.LEFT,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){this._posOfSrollAlive=this.node.convertToWorldSpaceAR(this.ScrollAlive.position),this._posOfSrollDead=this.node.convertToWorldSpaceAR(this.ScrollDead.position)},t.prototype.setDirection=function(){},t.prototype.onResultDialogTrigger=function(e){if(!cc.sys.isMobile)if(e)this._oldEmotePosition||(this._oldEmotePosition=this.node.convertToWorldSpaceAR(this.emoteUI.node.position)),this.emoteUI.node.position=cc.v3(this.node.convertToNodeSpace(cc.v2(this.node.convertToWorldSpaceAR(this.newEmotePosNode.position)))),console.log("#Emoter Change Parent to resuft");else{if(!this._oldEmotePosition)return;this.emoteUI.node.position=cc.v3(this.node.convertToNodeSpace(cc.v2(this._oldEmotePosition))),console.log("#Emoter Rest Emote to old position")}},t.LEFT=2,t.RIGHT=3,i([l(cc.Node)],t.prototype,"emoteButton",void 0),i([l(cc.Node)],t.prototype,"emoteLogs",void 0),i([l(cc.Node)],t.prototype,"background",void 0),i([l(cc.Node)],t.prototype,"ScrollDead",void 0),i([l(cc.Node)],t.prototype,"ScrollAlive",void 0),i([l(a.NgcEmotesUI)],t.prototype,"emoteUI",void 0),i([l(cc.Node)],t.prototype,"newEmotePosNode",void 0),o=i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../NanoGameCore/CrossFeatures/Emojis/Script/EmotesUI":"EmotesUI"}],EmotesManager:[function(e,t,o){"use strict";cc._RF.push(t,"f4132+IwSRFx7V7TiX1kHkA","EmotesManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmotesManager=void 0;var a=e("../../../../globals"),c=e("../../../GameFramework/Scripts/BuildConfig"),s=e("../../../GameFramework/Scripts/Network/NgcNetClient"),l=e("../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),u=e("../../../GameFramework/Scripts/NgcGame"),p=e("../../../Services/Platform/Platform"),d=e("../../../Services/Telemetry/Telemetry"),f=e("../../EndGameFlow/Spectator/Script/SpectatorManager"),h=e("./Emoji"),g=e("./EmojiScrollItem"),y=e("../../../GameFramework/Scripts/NgcMain"),m=cc._decorator,_=m.ccclass,v=m.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emojiPrefabs=[],t.bubblePrefab=null,t.scrollItemPrefab=null,t.parentForEmojis=null,t.parentForBubble=null,t.scaleRatioInGame=.6,t.emojiPoolArray=[],t.bubblePool=null,t.scrollItemPool=null,t.followPlayerEmojis=[],t.deadPanelEmojis=[],t.scrollItemEmojis=[],t.currentEmotesUIInst=null,t.EMOJI_BROADCAST_MESSAGE_TYPE="send_emoji",t.POOL_INIT_SIZE_EACH_EMOJI=5,t.POOL_INIT_SIZE_BUBBLE=20,t.POOL_INIT_SIZE_SCROLL_ITEM=5,t.MAX_EMOJI_SHOW_FOR_DEAD_PLAYERS=5,t.broadcastNetID="",t._allowScrollView=!0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.error("There are more than 1 EmotesManager!!!"),o.inst=this;for(var e=0;e<this.emojiPrefabs.length;e++){for(var t=new cc.NodePool,n=0;n<this.POOL_INIT_SIZE_EACH_EMOJI;n++){var r=cc.instantiate(this.emojiPrefabs[e]);t.put(r)}this.emojiPoolArray.push(t)}for(this.bubblePool=new cc.NodePool,e=0;e<this.POOL_INIT_SIZE_BUBBLE;e++){var i=cc.instantiate(this.bubblePrefab);this.bubblePool.put(i)}for(this.scrollItemPool=new cc.NodePool,e=0;e<this.POOL_INIT_SIZE_SCROLL_ITEM;e++){var a=cc.instantiate(this.scrollItemPrefab);this.scrollItemPool.put(a)}},t.prototype.onDisable=function(){var e=this;this.followPlayerEmojis.forEach(function(t){e.putBubbleToPool(t.bubbleNode),t.bubbleNode=null,e.putEmojiToPool(t.prefabID,t)}),this.scrollItemEmojis.forEach(function(t){e.emojiPoolArray[t.emojiComp.prefabID].put(t.emoji),t.emoji.parent=null,t.emoji=null,e.putScrollItemToPool(t)}),this.followPlayerEmojis=[],this.scrollItemEmojis=[],o.inst.allowScrollView(!0)},t.prototype.start=function(){p.NgcPlatform.isOfflineMode()||(c.NgcBuildConfig.useNgcServer?l.NgcNetClientRefactor.inst.registerForBroadcastMessageType(this.EMOJI_BROADCAST_MESSAGE_TYPE,this.handleBroadCastmessageEmoji_Refactor.bind(this)):s.NgcNetClient.inst.registerForBroadcastMessageType(this.EMOJI_BROADCAST_MESSAGE_TYPE,this.handleBroadcastMessageEmoji)),this.visibleScrollView(!1)},t.prototype.setBroadcastNetID=function(e){this.broadcastNetID=e},t.prototype.handleBroadcastMessageEmoji=function(e){console.log("@@HandleBroadcastMessageEmoji: "),console.log(e);var t=e.payload;t.playerNetID!==s.NgcNetClient.inst.localPlayerNetID&&(o.inst._allowScrollView?!1===o.inst.checkIfScrollEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t):!1===o.inst.checkIfEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t))},t.prototype.handleBroadCastmessageEmoji_Refactor=function(e){cc.log("@@HandleBroadcastMessageEmoji: "),cc.log(e);var t=JSON.parse(e.payload);l.NgcNetClientRefactor.inst.isClientID(e.fromID)||(o.inst._allowScrollView?!1===o.inst.checkIfScrollEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t):!1===o.inst.checkIfEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t))},t.prototype.update=function(){var e=this;this.followPlayerEmojis.forEach(function(t){var o=e._getPlayerEmojiPosByID(t.playerNetID);t.setWorldPosition(o)})},t.prototype.init=function(e){this._getPlayerEmojiPosByID=e.getPlayerEmojiPosByID,this._isPlayerDeadByID=e.checkPlayerIsDeadByID,this.setParentForEmojisAndBubble(e.parentForEmojis,e.parentForBubble),this.checkAndShowPanelScrollView()},t.prototype.sendEmoji=function(e,t){var o;o=p.NgcPlatform.isOfflineMode()?a.default.Game.inst.localPlayerNetID:c.NgcBuildConfig.useNgcServer?y.NgcMain.inst.appState===y.AppState.PartyScreen?l.NgcNetClientRefactor.inst.clientID:l.NgcNetClientRefactor.inst.getCombinedNetID():s.NgcNetClient.inst.localPlayerNetID,this.currentEmotesUIInst.mainButtonClicked();var n={emojiID:t,playerNetID:o,currentDisplayNetID:(c.NgcBuildConfig.useNgcServer?this._isPlayerDeadByID(l.NgcNetClientRefactor.inst.getCombinedNetID()):this._isPlayerDeadByID(s.NgcNetClient.inst.localPlayerNetID))&&this._allowScrollView&&null!=f.NgcSpectatorManager.inst?f.NgcSpectatorManager.inst.currDisplayNetID:"",time:(new Date).getTime(),prefabID:e},r=u.NgcGame.inst?u.NgcGame.inst.curGameNetID:"";""!=this.broadcastNetID&&(r=this.broadcastNetID),p.NgcPlatform.isOfflineMode()||(c.NgcBuildConfig.useNgcServer?l.NgcNetClientRefactor.inst.sendNgcBroadcast(this.EMOJI_BROADCAST_MESSAGE_TYPE,n,o):s.NgcNetClient.inst.broadcastMessage(this.EMOJI_BROADCAST_MESSAGE_TYPE,n,r),d.NgcTelemetry.inst.LogEvent_SendEmoji(t)),this.addEmoji(n)},t.prototype.addEmoji=function(e){if(console.log("@@AddEmoji: "),console.log(e),!1===this._isPlayerDeadByID(e.playerNetID)||!this._allowScrollView){var t=this.getBubbleFromPool(),o=(n=this.getEmojiFromPool(e.prefabID)).getComponent(h.NgcEmoji);t.parent=this.parentForBubble,t.scale=.1,t.anchorX=0,cc.tween(t).to(.1,{scale:1}).start(),n.parent=this.parentForEmojis,n.scale=.1,cc.tween(n).to(.1,{scale:this.scaleRatioInGame}).start(),o.destroyWhenAnimationComplete(),o.prefabID=e.prefabID,o.playerNetID=e.playerNetID,o.emotesMgr=this,o.bubbleNode=t,o.emojiNode=n,this.followPlayerEmojis.push(o)}if(this._allowScrollView){var n;this.visibleScrollView(!0),(n=this.getEmojiFromPool(e.prefabID)).scale=.5,(o=n.getComponent(h.NgcEmoji)).prefabID=e.prefabID,o.playerNetID=e.playerNetID,o.emotesMgr=this,o.bubbleNode=null;var r=this.getScrollItemFromPool(),i=r.getComponent(g.NgcEmojiScrollItem);i.setEmojiPrefab(n);var a={playerNetID:e.playerNetID,displayNetID:e.currentDisplayNetID};i.emotesMgr=this,i.reset(a),this.scrollItemEmojis.push(i);var c=this.currentEmotesUIInst.scrollView;r.parent=c.content,c.scrollToBottom()}},t.prototype.allowScrollView=function(e){this._allowScrollView=e},t.prototype.visibleScrollView=function(e){this.currentEmotesUIInst&&this.currentEmotesUIInst.scrollView&&(this.currentEmotesUIInst.scrollView.node.active=e)},t.prototype.checkAndShowPanelScrollView=function(){this.canShowVisualScollView()?this.visibleScrollView(!0):this.visibleScrollView(!1)},t.prototype.canShowVisualScollView=function(){return this.scrollItemEmojis.length>0},t.prototype.extendEmotesUI=function(e){this.currentEmotesUIInst&&this.currentEmotesUIInst.setExtendEmotes(e)},t.prototype.getEmojiFromPool=function(e){return this.emojiPoolArray[e].size()>0?this.emojiPoolArray[e].get():cc.instantiate(this.emojiPrefabs[e])},t.prototype.putEmojiToPool=function(e,t){this.followPlayerEmojis.forEach(function(e,o,n){e===t&&n.splice(o,1)}),this.emojiPoolArray[e].put(t.node)},t.prototype.getBubbleFromPool=function(){return this.bubblePool.size()>0?this.bubblePool.get():cc.instantiate(this.bubblePrefab)},t.prototype.putBubbleToPool=function(e){this.bubblePool.put(e)},t.prototype.getScrollItemFromPool=function(){return this.scrollItemPool.size()>0?this.scrollItemPool.get():cc.instantiate(this.scrollItemPrefab)},t.prototype.putScrollItemToPool=function(e){this.scrollItemEmojis.forEach(function(t,o,n){t===e&&n.splice(o,1)}),this.scrollItemPool.put(e.node)},t.prototype.checkIfEmojiIsShowingByNetID=function(){return!1},t.prototype.checkIfScrollEmojiIsShowingByNetID=function(){return!1},t.prototype.setParentForEmojisAndBubble=function(e,t){this.parentForEmojis=e,this.parentForBubble=t},t.inst=null,i([v({type:[cc.Prefab]})],t.prototype,"emojiPrefabs",void 0),i([v(cc.Prefab)],t.prototype,"bubblePrefab",void 0),i([v(cc.Prefab)],t.prototype,"scrollItemPrefab",void 0),i([v(cc.Node)],t.prototype,"parentForEmojis",void 0),i([v(cc.Node)],t.prototype,"parentForBubble",void 0),i([v],t.prototype,"scaleRatioInGame",void 0),o=i([_],t)}(cc.Component);o.NgcEmotesManager=S,cc._RF.pop()},{"../../../../globals":"globals","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","./Emoji":"Emoji","./EmojiScrollItem":"EmojiScrollItem"}],EmotesUI:[function(e,t,o){"use strict";cc._RF.push(t,"97b30cIjQdArqrpZr+YtZMk","EmotesUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmotesUI=void 0;var a=e("./Emoji"),c=e("./EmotesManager"),s=e("./nodeAnimInfo"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainButton=null,t.emojisBoard=null,t.background=null,t.backgroundGrey=null,t.scrollView=null,t.scrollContainer=null,t.parentOfEmoji=null,t.sizeOfEmoji=64,t.numberOfLines=1,t.nodeAnim=[],t.closeEventNode=null,t._listOfEmoji=[],t.canPickEmoji=!0,t.DEFAULT_SCALE=.6,t.DOWN_SCALE=.4,t.currentScale=1,t._isShowUp=!0,t}return r(t,e),t.prototype.onLoad=function(){this.numberOfEmojis=c.NgcEmotesManager.inst.emojiPrefabs.length;for(var e=0;e<this.numberOfEmojis;e++){var t=cc.instantiate(c.NgcEmotesManager.inst.emojiPrefabs[e]),o=t.getChildByName("bg");null!=o&&(o.active=!0,t.scale=this.DEFAULT_SCALE),t.parent=this.background,t.active=!0,this._listOfEmoji.push(t)}this.background.active=!0,this.backgroundGrey.active=!1,this.canPickEmoji=!0,this.showHideGreyBG();var n=cc.find("Canvas");this.closeEventNode||(this.closeEventNode=this.node.getChildByName("EmotesEventButtonClose")),this.closeEventNode&&(this.closeEventNode.getComponent(cc.Widget).target=n,this.closeEventNode.getComponent(cc.Widget).updateAlignment(),this.closeEventNode.on("touchend",this.onTapDown,this),this.enableTouchOutSide(!0))},t.prototype.onTapDown=function(){c.NgcEmotesManager.inst.extendEmotesUI(!1)},t.prototype.onEnable=function(){c.NgcEmotesManager.inst.currentEmotesUIInst=this},t.prototype.start=function(){var e,t=this;e=this.numberOfEmojis%this.numberOfLines==0?this.numberOfEmojis/this.numberOfLines:Math.floor(this.numberOfEmojis/this.numberOfLines)+1;for(var o=(this.background.width*this.background.scaleX-this.sizeOfEmoji*e)/2+this.sizeOfEmoji/2,n=(this.background.height*this.background.scaleY-this.sizeOfEmoji*this.numberOfLines)/2+this.sizeOfEmoji/2,r=0;r<this.numberOfLines;r++)for(var i=0;i<e;i++)if(!(r*e+i>this.numberOfEmojis)){var a=cc.v2(o+this.sizeOfEmoji*i,n+this.sizeOfEmoji*r);this._listOfEmoji[r*e+i].setPosition(a.x,a.y)}this.mainButton.node.on(cc.Node.EventType.TOUCH_END,this.mainButtonClicked,this),this._listOfEmoji.forEach(function(e,o){e.children[0].on(cc.Node.EventType.TOUCH_END,function(){t.pickEmoji(o)},t)}),this.reScale(),cc.view.setResizeCallback(function(){t.reScale()})},t.prototype.reScale=function(){},Object.defineProperty(t.prototype,"isShowUp",{get:function(){return this._isShowUp},enumerable:!1,configurable:!0}),t.prototype.mainButtonClicked=function(){var e=this;this.nodeAnim.forEach(function(t){t&&t.animShow(!e._isShowUp)}),this._isShowUp=!this._isShowUp,this.enableTouchOutSide(this._isShowUp),this.showHideGreyBG(),cc.tween(this.mainButton.node).to(.1,{scale:.7}).to(.1,{scale:1}).start()},t.prototype.enableTouchOutSide=function(){this.closeEventNode&&(this.closeEventNode.active=this._isShowUp)},t.prototype.addNodeAnim=function(e){this.nodeAnim.push(e)},t.prototype.setExtendEmotes=function(e){!this._isShowUp!=!e&&this.mainButtonClicked()},t.prototype.pickEmoji=function(e){var t=this;if(this.canPickEmoji){this.canPickEmoji=!1,this.showHideGreyBG(),setTimeout(function(){t.canPickEmoji=!0,t.showHideGreyBG()},3e3);var o=this._listOfEmoji[e].getComponent(a.NgcEmoji).emojiID;c.NgcEmotesManager.inst.sendEmoji(e,o),null!=this._listOfEmoji[e].getChildByName("bg")?cc.tween(this._listOfEmoji[e]).to(.05,{scale:this.DOWN_SCALE}).to(.05,{scale:this.DEFAULT_SCALE}).start():cc.tween(this._listOfEmoji[e]).to(.05,{scale:.7}).to(.05,{scale:1}).start()}},t.prototype.showHideGreyBG=function(){this.backgroundGrey.active=this.background.active&&!this.canPickEmoji},t.prototype.enableEmojisBoard=function(e){this.canPickEmoji=e,this.backgroundGrey.active=this.background.active&&!this.canPickEmoji},i([p(cc.Button)],t.prototype,"mainButton",void 0),i([p(cc.Node)],t.prototype,"emojisBoard",void 0),i([p(cc.Node)],t.prototype,"background",void 0),i([p(cc.Node)],t.prototype,"backgroundGrey",void 0),i([p(cc.ScrollView)],t.prototype,"scrollView",void 0),i([p(cc.Node)],t.prototype,"scrollContainer",void 0),i([p(cc.Node)],t.prototype,"parentOfEmoji",void 0),i([p],t.prototype,"sizeOfEmoji",void 0),i([p],t.prototype,"numberOfLines",void 0),i([p([s.NgcNodeAnimInfo])],t.prototype,"nodeAnim",void 0),i([p(cc.Node)],t.prototype,"closeEventNode",void 0),i([u],t)}(cc.Component);o.NgcEmotesUI=d,cc._RF.pop()},{"./Emoji":"Emoji","./EmotesManager":"EmotesManager","./nodeAnimInfo":"nodeAnimInfo"}],EngineSound:[function(e,t,o){"use strict";cc._RF.push(t,"eae66Dd0DJDHp80jCgUNy6R","EngineSound");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./SoundManager"),c=e("./Player/CarBase"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._currentGear=c.CarGear.N,t._stopSound=!1,t._gearComplete=!1,t}return r(t,e),t.prototype.start=function(){this.carbase=this.getComponent(c.default),(this.carbase.isSpied()||this.carbase.isLocalHuman())&&setTimeout(function(){a.default.inst.playSFX(a.AudioClips.idleCar_sfx,!0)},2e3)},t.prototype.stopEngineSound=function(){this.cnLow&&this.cnLow.stop(),this.cnMid&&this.cnMid.stop(),this.cnFast&&this.cnFast.stop(),this.gearChannel&&this.gearChannel.stop()},t.prototype.setEngineVolume=function(e){this.cnLow&&0!=this.cnLow.getVolume()&&this.cnLow.getVolume()>e&&this.cnLow.setVolume(e),this.cnMid&&0!=this.cnMid.getVolume()&&this.cnMid.getVolume()>e&&this.cnMid.setVolume(e),this.cnFast&&0!=this.cnFast.getVolume()&&this.cnFast.getVolume()>e&&this.cnFast.setVolume(e)},t.prototype.getMaxVolume=function(){return this.cnLow?this.cnLow.getMaxVolume():this.cnMid?this.cnMid.getMaxVolume():this.cnFast?this.cnFast.getMaxVolume():.5},t.prototype.changeGear=function(e){var t=this;if(this._currentGear!=e){a.default.inst.stopSFX(a.AudioClips.idleCar_sfx);var o=this;if(e>this._currentGear)switch(e){case c.CarGear.ONE:this.cnLow&&this.cnLow.stop(),this.cnMid&&this.cnMid.stop(),this.cnFast&&this.cnFast.stop(),this.gearChannel=a.default.inst.playSFX(a.AudioClips.Trans_up_3to3,!1),this._gearComplete=!1,this.gearChannel.onComplete(function(){(o._currentGear=c.CarGear.ONE)&&(o.cnLow=a.default.inst.playSFX(a.AudioClips.engineLow_sfx,!0)),t._gearComplete=!0,cc.log("#gearOne.onComplete(() 1")}),cc.log("#Play GEAR ONE");break;case c.CarGear.TWO:this.cnLow&&this.cnLow.stop(),this.cnMid&&this.cnMid.stop(),this.cnFast&&this.cnFast.stop(),this.gearChannel=a.default.inst.playSFX(a.AudioClips.Trans_up_3to4,!1),this._gearComplete=!1,this.gearChannel.onComplete(function(){o.cnMid=a.default.inst.playSFX(a.AudioClips.engineMid_sfx,!0),t._gearComplete=!0,cc.log("#gearOne.onComplete(() 2")}),cc.log("#Play GEAR TWO");break;case c.CarGear.THREE:this.cnLow&&this.cnLow.stop(),this.cnMid&&this.cnMid.stop(),this.cnFast&&this.cnFast.stop(),this.gearChannel=a.default.inst.playSFX(a.AudioClips.Trans_up_4to5,!1),this._gearComplete=!1,this.gearChannel.onComplete(function(){o.cnFast=a.default.inst.playSFX(a.AudioClips.engineTop_sfx,!0),t._gearComplete=!0,cc.log("#gearOne.onComplete(() 3")}),cc.log("#Play GEAR THREE")}this._currentGear=e}},t.prototype.update=function(){if(a.default.inst.useSound)if(this.carbase.isSpied()||this.carbase.isLocalHuman()){if(this.carbase.HasStopped()&&!this._stopSound)return this.stopEngineSound(),this._stopSound=!0,a.default.inst.playSFX(a.AudioClips.Trans_down_5to4,!1),void cc.log("#Stop engine sound");var e=this.carbase.getSpeed();if(0==e)return;e<=120&&e>0?this.changeGear(c.CarGear.ONE):e<=200&&e>160&&this._gearComplete?this.changeGear(c.CarGear.TWO):e>=240&&this._gearComplete&&this.changeGear(c.CarGear.THREE)}else this.carbase.isSpied()||(this._currentGear=c.CarGear.N)},t.prototype.onComplete=function(){},i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./Player/CarBase":"CarBase","./SoundManager":"SoundManager"}],Event:[function(e,t,o){"use strict";cc._RF.push(t,"9689dTp4eZL/qTekW6cQQL9","Event"),Object.defineProperty(o,"__esModule",{value:!0}),o.emit=void 0,o.emit=function(e,t){e.forEach(function(e){e&&e(t)})},cc._RF.pop()},{}],FTUECamera:[function(e,t,o){"use strict";cc._RF.push(t,"eb218I8fcNNBa5Pc4YW5zbI","FTUECamera");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameCamera"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cameraOb=null,t.gameCamera=null,t}return r(t,e),t.prototype.onLoad=function(){this.gameCamera=a.default.inst.cameraOb,cc.log(this.gameCamera)},t.prototype.update=function(){if(this.gameCamera||(this.gameCamera=a.default.inst.cameraOb,this.gameCamera)){var e=this.gameCamera.node.parent.parent.convertToWorldSpaceAR(this.gameCamera.node.parent.position);this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))}},i([l(cc.Camera)],t.prototype,"cameraOb",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./GameCamera":"GameCamera"}],FTUEManager:[function(e,t,o){"use strict";cc._RF.push(t,"f70e2/MxRpEP4XIphjVZ7jB","FTUEManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TURN_DISTANCE=o.FTUE_STEP=void 0;var a,c=e("../CustomControl"),s=e("../ElinimatedMessageItem"),l=e("../Game"),u=e("../GameCamera"),p=e("../Player/PlayerController"),d=e("../UI/LapInfor"),f=e("../UserInfo"),h=e("../Main"),g=e("../Tracking/TrackingManager"),y=e("../Utils/ConstConfig"),m=e("../../NanoGameCore/Services/Telemetry/Telemetry"),_=e("../UI/GameUI"),v=e("../Network/NetClient"),S=e("../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),N=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),b=cc._decorator,C=b.ccclass,P=b.property;(function(e){e[e.NONE=0]="NONE",e[e.REACH_GATE=1]="REACH_GATE",e[e.SHOW_CONTROL_TIPS=2]="SHOW_CONTROL_TIPS",e[e.REACH_START_ZONE=3]="REACH_START_ZONE",e[e.OPTINAL_INPUT=4]="OPTINAL_INPUT",e[e.REQUIRE_INPUT=5]="REQUIRE_INPUT",e[e.OUT_OF_SLOMO=6]="OUT_OF_SLOMO",e[e.REACH_TURN_1=7]="REACH_TURN_1",e[e.REACH_TURN_1_LOG=8]="REACH_TURN_1_LOG",e[e.REACH_TURN_2=9]="REACH_TURN_2",e[e.REACH_TURN_2_LOG=10]="REACH_TURN_2_LOG",e[e.REACH_LOOP=11]="REACH_LOOP",e[e.REACH_LOOP_LOG=12]="REACH_LOOP_LOG",e[e.REACH_TURN_3=13]="REACH_TURN_3",e[e.REACH_TURN_3_LOG=14]="REACH_TURN_3_LOG",e[e.REACH_TURN_4=15]="REACH_TURN_4",e[e.REACH_TURN_4_LOG=16]="REACH_TURN_4_LOG",e[e.REACH_NEAR_FINISH_LAP_1=17]="REACH_NEAR_FINISH_LAP_1",e[e.FINISHED_LAP_1=18]="FINISHED_LAP_1",e[e.FINISHED_LAP_1_LOG=19]="FINISHED_LAP_1_LOG",e[e.SHOW_ELIMINATED=20]="SHOW_ELIMINATED",e[e.LAP1_TUTORIAL_LOG=21]="LAP1_TUTORIAL_LOG",e[e.SHOW_POSSITION=22]="SHOW_POSSITION",e[e.LAP2_TUTORIAL_LOG=23]="LAP2_TUTORIAL_LOG",e[e.FINISHED_LAP_2=24]="FINISHED_LAP_2",e[e.FINISHED_LAP_2_LOG=25]="FINISHED_LAP_2_LOG",e[e.FINISH_1ST_MAP_FTUE=26]="FINISH_1ST_MAP_FTUE",e[e.FINISHED_LAP_3_LOG=27]="FINISHED_LAP_3_LOG",e[e.FINISH_2ND_MAP_FTUE=28]="FINISH_2ND_MAP_FTUE",e[e.REWARD_2ND_MAP=29]="REWARD_2ND_MAP",e[e.FINISHED_ALL_FTUE_TRIGGER=30]="FINISHED_ALL_FTUE_TRIGGER",e[e.FINISHED_ALL_FTUE=31]="FINISHED_ALL_FTUE"})(a=o.FTUE_STEP||(o.FTUE_STEP={})),function(e){e[e.TURN_1_END=2500]="TURN_1_END",e[e.TURN_2_END=4200]="TURN_2_END",e[e.TURN_3_END=10600]="TURN_3_END",e[e.TURN_4_END=12100]="TURN_4_END"}(o.TURN_DISTANCE||(o.TURN_DISTANCE={}));var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curStep=a.NONE,t.lastStep=a.NONE,t.currentFPS=60,t.isResetedInput=!1,t.flow=null,t.FTUE_UI=null,t.flowEffects=t.initEffects(),t.doneSlowmo=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){var e=this,t=this;cc.systemEvent.on("STOP_SPECTATOR",function(){t.onSpectatorEnd()}),o.inst=this,f.UserInfo.curFTUEStep<=a.FINISH_1ST_MAP_FTUE&&(f.UserInfo.curFTUEStep=a.REACH_START_ZONE),this.curStep=f.UserInfo.curFTUEStep,cc.log("Current FTUE STep ",this.curStep),this.deviceType=cc.sys.isMobile?h.DeviceType.MOBILE:h.DeviceType.PC,g.default.getInst()&&f.UserInfo.controlType==c.ControlType.UNDEFINED&&g.default.getInst().getParameter("control_type").then(function(t){if(t&&t.asString()){switch(console.log("[RemoteConfig] `Control type = ",t.asString()),t.asString()){case"center":f.UserInfo.controlType=c.ControlType.CENTER,console.log("Firebase RemoteConfig : set UserControl = Center");break;case"wheel":f.UserInfo.controlType=c.ControlType.STEERING_WHEEL_FREE,console.log("Firebase RemoteConfig : set UserControl = wheel");break;case"left_right":f.UserInfo.controlType=c.ControlType.DIAGONAL_RIGHT,console.log("Firebase RemoteConfig : set UserControl = left_right")}e.deviceType==h.DeviceType.PC?(g.default.getInst().LogEvent_FireBaseControlType("center"),f.UserInfo.controlType=c.ControlType.CENTER):g.default.getInst().LogEvent_FireBaseControlType(t.asString())}else console.log("[RemoteConfig] `start` test_item_price NOT FOUND in Firebase remote config"),f.UserInfo.controlType=c.ControlType.CENTER}).catch(),this.getFlow()},t.prototype.getFlow=function(){var e=this;if(N.NgcBuildConfig.offlineMode||h.Main.inst.offlineMode()||!g.default.getInst()||m.NgcTelemetry.inst.isPlatformBlocked())this.flow=y.ConstConfig.DEFAULT_FTUE_FLOW;else{var t=m.NgcTelemetry.inst.getFirebaseRemoteConfig().app;console.log("debug telemetry",t),t.installations().getToken(!1).then(function(e){return console.log("debug firebase token",e)}).catch(function(e){return console.log("debug error getting firebase token",e)}),cc.log("debug asking remote config for FTUE flow");var o=function(t){var o=t.asString(),n=Array.from("AB").some(function(e){return e==o});e.flow=n?o:y.ConstConfig.DEFAULT_FTUE_FLOW;var r=n?"debug RemoteConfig sent "+o:"debug RemoteConfig asks to use default FTUE FLOW "+y.ConstConfig.DEFAULT_FTUE_FLOW;console.log(r)}.bind(this);g.default.getInst().getParameter("test_FTUE_flow").then(o).catch()}},t.prototype.reset=function(){f.UserInfo.curFTUEStep<=a.FINISH_1ST_MAP_FTUE&&(f.UserInfo.curFTUEStep=a.REACH_START_ZONE),this.curStep=f.UserInfo.curFTUEStep,this.lastStep=a.NONE,this.doneSlowmo=!1,this.getFlow(),this.deactiveAll(),cc.log("RESET FTUE STEP ",this.curStep),this.deviceType=cc.sys.isMobile?h.DeviceType.MOBILE:h.DeviceType.PC},t.prototype.start=function(){},t.prototype.getChildNodeFromStep=function(e){var t,o=new Map([[c.ControlType.CENTER,"2_CENTER"],[c.ControlType.STEERING_WHEEL_FREE,"2_WHEEL"],[c.ControlType.DIAGONAL_RIGHT,"2_45RIGHT"]]),n="Step"+(null!==(t=new Map([[a.OPTINAL_INPUT,o.get(f.UserInfo.controlType)],[a.SHOW_ELIMINATED,"7"],[a.SHOW_POSSITION,"8"]]).get(e))&&void 0!==t?t:"")+(this.deviceType==h.DeviceType.PC&&cc.sys.os!=cc.sys.OS_IOS&&cc.sys.os!=cc.sys.OS_ANDROID?"_PC":"");return this.FTUE_UI.getChildByName(n)},t.prototype.activeStep=function(e){this.deactiveAll();var t=this.getChildNodeFromStep(e);t&&(t.active=!0,e!=a.SHOW_POSSITION&&(t.opacity=0,cc.tween(t).to(.5,{opacity:255},{easing:"quintIn"}).start()))},t.prototype.deactiveAll=function(){this.FTUE_UI&&this.FTUE_UI.children.forEach(function(e){return e.active=!1})},t.prototype.finishStep=function(e){e==a.SHOW_ELIMINATED&&l.default.inst.kickNodeFTUE.getComponent(s.default).remove();var t=a.REQUIRE_INPUT==e?this.getChildNodeFromStep(a.OPTINAL_INPUT):this.getChildNodeFromStep(e);if(t&&(e!=a.SHOW_ELIMINATED?e!=a.OPTINAL_INPUT&&cc.tween(t).to(.5,{opacity:0},{easing:"quinOut"}).call(function(){t.active=!1}).start():t.active=!1),this.flow){var o=Array.from(this.flowEffects.get(this.flow).keys()),n=o.findIndex(function(t){return t==e});if(-1!=n){var r=o[++n];f.UserInfo.curFTUEStep=r,this.curStep=r,console.log("debug finish step",a[e],"waiting for step",a[r],"to be done")}else console.log("debug skip FTUE step",a[e])}},t.prototype.getCurrentStep=function(){return this.curStep},t.prototype.initEffects=function(){var e=this;return new Map([["A",new Map([[a.NONE,function(){return e.curStep=a.REACH_START_ZONE}],[a.REACH_START_ZONE,function(){return l.default.inst.enableControl(!1)}],[a.OPTINAL_INPUT,function(){u.default.inst.node.emit("setFarDistance",200),l.default.inst.setSlowMotion(l.SlowMode.NORMAL,l.SlowMode.SLOWEST),e.activeStep(e.curStep),l.default.inst.enableControl(!0),e.scheduleOnce(function(){l.default.inst.enableControl(!0)},1),g.default.getInst().LogEvent_FTUE_EnterTurningZone()}],[a.REQUIRE_INPUT,function(){l.default.inst.setSlowMotion(l.SlowMode.SLOWEST,l.SlowMode.FREEZE),g.default.getInst().LogEvent_FTUE_ZoneNoInput()}],[a.OUT_OF_SLOMO,function(){g.default.getInst().LogEvent_FTUE_ControlUnlocked(),l.default.inst.setSlowMotion(l.SlowMode.UNSLOW,l.SlowMode.NORMAL),e.scheduleOnce(function(){u.default.inst.node.emit("setFarDistance",400)},3),l.default.inst.setFTUEonBOT(1),e.finishStep(a.OUT_OF_SLOMO),e.doneSlowmo=!0}],[a.REACH_TURN_1,function(){}],[a.REACH_TURN_1_LOG,function(){g.default.getInst().LogEvent_Onboarding("firstTurn",e.doneSlowmo),e.finishStep(a.REACH_TURN_1_LOG)}],[a.REACH_TURN_2,function(){}],[a.REACH_TURN_2_LOG,function(){g.default.getInst().LogEvent_Onboarding("secondTurn",e.doneSlowmo),e.finishStep(a.REACH_TURN_2_LOG)}],[a.REACH_LOOP,function(){}],[a.REACH_LOOP_LOG,function(){g.default.getInst().LogEvent_Onboarding("loopTurn",e.doneSlowmo),e.finishStep(a.REACH_LOOP_LOG)}],[a.REACH_TURN_3,function(){}],[a.REACH_TURN_3_LOG,function(){g.default.getInst().LogEvent_Onboarding("thirdTurn",e.doneSlowmo),e.finishStep(a.REACH_TURN_3_LOG)}],[a.REACH_TURN_4,function(){}],[a.REACH_TURN_4_LOG,function(){g.default.getInst().LogEvent_Onboarding("fourthTurn",e.doneSlowmo),e.finishStep(a.REACH_TURN_4_LOG)}],[a.REACH_NEAR_FINISH_LAP_1,function(){}],[a.FINISHED_LAP_1,function(){l.default.inst.setSlowMotion(l.SlowMode.NORMAL,l.SlowMode.SLOWEST),u.default.inst.node.emit("setFarDistance",200);var t=p.default.inst.findPlayerIndexByNetID(v.default.inst.localPlayerNetID)+1;g.default.getInst().LogEvent_Onboarding("lap1Reached",e.doneSlowmo,t)}],[a.SHOW_ELIMINATED,function(){l.default.inst.setSlowMotion(l.SlowMode.SLOWEST,l.SlowMode.FREEZE),l.default.inst.kickLastPlayer(),e.scheduleOnce(function(){e.activeStep(e.curStep),e.kickMes=l.default.inst.kickNodeFTUE,e.kickMesPos=e.kickMes.parent.convertToWorldSpaceAR(e.kickMes.position),e.kickMes.parent=e.FTUE_UI,e.kickMes.setPosition(e.FTUE_UI.convertToNodeSpaceAR(e.kickMesPos))},.1)}],[a.SHOW_POSSITION,function(){g.default.getInst().LogEvent_Onboarding("lap1Tutorial1",e.doneSlowmo),e.activeStep(e.curStep),e.posBar=d.default.inst.posBarNode,e.currentPos=e.posBar.parent.convertToWorldSpaceAR(e.posBar.position),e.posBar.parent=e.FTUE_UI,e.posBar.setPosition(e.FTUE_UI.convertToNodeSpaceAR(e.currentPos))}],[a.FINISHED_LAP_2,function(){g.default.getInst().LogEvent_Onboarding("lap1Tutorial2",e.doneSlowmo),l.default.inst.setSlowMotion(l.SlowMode.UNSLOW,l.SlowMode.NORMAL),u.default.inst.node.emit("setFarDistance",400),e.posBar.parent=d.default.inst.node,e.posBar.setPosition(e.posBar.parent.convertToNodeSpaceAR(e.currentPos))}],[a.FINISHED_LAP_2_LOG,function(){var t=p.default.inst.findPlayerIndexByNetID(v.default.inst.localPlayerNetID)+1;g.default.getInst().LogEvent_Onboarding("lap2Reached",e.doneSlowmo,t),e.finishStep(a.FINISHED_LAP_2_LOG)}],[a.FINISH_1ST_MAP_FTUE,function(){}],[a.FINISHED_LAP_3_LOG,function(){var t=p.default.inst.findPlayerIndexByNetID(v.default.inst.localPlayerNetID)+1;g.default.getInst().LogEvent_Onboarding("lap3Reached",e.doneSlowmo,t),e.finishStep(a.FINISHED_LAP_3_LOG)}],[a.FINISHED_ALL_FTUE_TRIGGER,function(){}],[a.FINISHED_ALL_FTUE,function(){}]])],["B",new Map([[a.REACH_GATE,function(){}],[a.SHOW_CONTROL_TIPS,function(){_.default.inst.showControlTips(),e.finishStep(a.SHOW_CONTROL_TIPS)}],[a.REACH_TURN_1,function(){}],[a.REACH_TURN_1_LOG,function(){g.default.getInst().LogEvent_Onboarding("firstTurn",e.doneSlowmo),e.finishStep(a.REACH_TURN_1_LOG)}],[a.REACH_TURN_2,function(){}],[a.REACH_TURN_2_LOG,function(){g.default.getInst().LogEvent_Onboarding("secondTurn",e.doneSlowmo),e.finishStep(a.REACH_TURN_2_LOG)}],[a.REACH_LOOP,function(){}],[a.REACH_LOOP_LOG,function(){g.default.getInst().LogEvent_Onboarding("loopTurn",e.doneSlowmo),e.finishStep(a.REACH_LOOP_LOG)}],[a.REACH_TURN_3,function(){}],[a.REACH_TURN_3_LOG,function(){g.default.getInst().LogEvent_Onboarding("thirdTurn",e.doneSlowmo),e.finishStep(a.REACH_TURN_3_LOG)}],[a.REACH_TURN_4,function(){}],[a.REACH_TURN_4_LOG,function(){g.default.getInst().LogEvent_Onboarding("fourthTurn",e.doneSlowmo),e.finishStep(a.REACH_TURN_4_LOG)}],[a.FINISHED_LAP_1,function(){}],[a.FINISHED_LAP_1_LOG,function(){var t=p.default.inst.findPlayerIndexByNetID(v.default.inst.localPlayerNetID)+1;g.default.getInst().LogEvent_Onboarding("lap1Reached",e.doneSlowmo,t),g.default.getInst().LogEvent_Onboarding("lap1Tutorial1",e.doneSlowmo),g.default.getInst().LogEvent_Onboarding("lap1Tutorial2",e.doneSlowmo),e.finishStep(a.FINISHED_LAP_1_LOG)}],[a.FINISHED_LAP_2,function(){}],[a.FINISHED_LAP_2_LOG,function(){var t=p.default.inst.findPlayerIndexByNetID(v.default.inst.localPlayerNetID)+1;g.default.getInst().LogEvent_Onboarding("lap2Reached",e.doneSlowmo,t),e.finishStep(a.FINISHED_LAP_2_LOG)}],[a.FINISH_1ST_MAP_FTUE,function(){}],[a.FINISHED_LAP_3_LOG,function(){var t=p.default.inst.findPlayerIndexByNetID(v.default.inst.localPlayerNetID)+1;g.default.getInst().LogEvent_Onboarding("lap3Reached",e.doneSlowmo,t),e.finishStep(a.FINISHED_LAP_3_LOG)}],[a.FINISHED_ALL_FTUE_TRIGGER,function(){}],[a.FINISHED_ALL_FTUE,function(){console.log("debug finish all FTUE")}]])]])},t.prototype.updateFTUE_STATE=function(e,t){var o,n;null===(n=null===(o=this.flowEffects.get(t))||void 0===o?void 0:o.get(e))||void 0===n||n.bind(this)()},t.prototype.update=function(){this.curStep>a.FINISHED_ALL_FTUE||(this.curStep==a.REACH_NEAR_FINISH_LAP_1&&p.default.inst.getLocalPlayerAngle()<=-90&&!this.isResetedInput&&(this.isResetedInput=!0,p.default.inst.getLocalPlayer().tapIdle(),c.default.inst.show(f.UserInfo.controlType)),this.curStep!=this.lastStep&&h.Main.inst.isFTUE()&&this.flow&&(this.updateFTUE_STATE(this.curStep,this.flow),this.lastStep=this.curStep))},t.prototype.chooseLeft=function(){this.inputHandedness(!0)},t.prototype.chooseRight=function(){this.inputHandedness(!1)},t.prototype.inputHandedness=function(e){var t="Left";e?f.UserInfo.controlType=c.ControlType.DIAGONAL_LEFT:(f.UserInfo.controlType=c.ControlType.DIAGONAL_RIGHT,t="Right");var o=this.getChildNodeFromStep(a.REACH_START_ZONE);o&&(o.active=!1),g.default.getInst().LogEvent_FTUE_Handedness(t)},t.prototype.onSpectatorEnd=function(){h.Main.inst.isFTUE()&&!m.NgcTelemetry.inst.isPlatformBlocked()&&(console.log("debug on spectator end"),m.NgcTelemetry.inst.LogEvent_OnboardingGameSpectatorEnd({checker:this.doneSlowmo,finalPositionInActionPhase:p.default.inst.findPlayerIndexByNetID(v.default.inst.localPlayerNetID)+1}))},t.prototype.onRewardDialogInteract=function(e){if(!h.Main.inst.isFTUE()||m.NgcTelemetry.inst.isPlatformBlocked())return S.default.totalSessions+=1,void h.Main.inst.disableFTUE();console.log("debug on reward interact"),m.NgcTelemetry.inst.LogEvent_OnboardingGameRoundOverClicked({checker:this.doneSlowmo,finalPositionInActionPhase:p.default.inst.findPlayerIndexByNetID(v.default.inst.localPlayerNetID)+1,multiplierOffer:e}),S.default.totalSessions+=1,h.Main.inst.disableFTUE()},t.prototype.onGameRoundOver=function(){h.Main.inst.isFTUE()&&!m.NgcTelemetry.inst.isPlatformBlocked()&&(console.log("debug on game round over"),m.NgcTelemetry.inst.LogEvent_OnboardingGameRoundOver({checker:this.doneSlowmo,finalPositionInActionPhase:p.default.inst.findPlayerIndexByNetID(v.default.inst.localPlayerNetID)+1}))},t.inst=null,i([P(cc.Node)],t.prototype,"FTUE_UI",void 0),o=i([C],t)}(cc.Component);o.default=I,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../CustomControl":"CustomControl","../ElinimatedMessageItem":"ElinimatedMessageItem","../Game":"Game","../GameCamera":"GameCamera","../Main":"Main","../Network/NetClient":"NetClient","../Player/PlayerController":"PlayerController","../Tracking/TrackingManager":"TrackingManager","../UI/GameUI":"GameUI","../UI/LapInfor":"LapInfor","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig"}],FTUE_ControlUI:[function(e,t,o){"use strict";cc._RF.push(t,"d0e01aaRFtFP6S+vYMxO28b","FTUE_ControlUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./FTUEManager"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){}),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.dismiss()}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(){}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(){e.dismiss()})},t.prototype.onKeyDown=function(){this.dismiss()},t.prototype.dismiss=function(){var e=a.default.inst.getCurrentStep();e!=a.FTUE_STEP.SHOW_ELIMINATED&&e!=a.FTUE_STEP.SHOW_POSSITION||a.default.inst.finishStep(e)},t.prototype.update=function(){},i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./FTUEManager":"FTUEManager"}],FXManager:[function(e,t,o){"use strict";cc._RF.push(t,"4d1d0+e02xKlI2DQR0rzB87","FXManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.endSmokeFX=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("More than one FXManager!!!"):o.inst=this},t.prototype.doSingleShotSpineFX=function(e,t){if(e){var o=cc.instantiate(e);o.parent=this.node,o.setPosition(o.parent.convertToNodeSpaceAR(t));var n=o.getComponent(sp.Skeleton);n?n.setCompleteListener(function(){o.destroy(),cc.log("Destroyed FX")}):console.error("Prefab is not a spine animated fx")}else console.warn("Missing FX")},t.prototype.start=function(){},t.inst=null,i([s(cc.Prefab)],t.prototype,"endSmokeFX",void 0),o=i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FakeNames:[function(e,t,o){"use strict";cc._RF.push(t,"815fen3LpdOSYfphX7Rvb1S","FakeNames");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fakeNamesList=null,t.nameTable={},t.tempFlatlist=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this,this.fakeNamesList&&this.parseInputFile())},t.prototype.allocRandomPerson=function(){var e=this.tempFlatlist.length,t=a.NgcNetUtils.RandomRange(0,e-1,!0),o=this.tempFlatlist[t];return this.tempFlatlist.splice(t,1),o},t.prototype.initFlatList=function(){var e=this;this.tempFlatlist=[],Object.keys(this.nameTable).forEach(function(t){var o=e.nameTable[t],n=o.maleNames,r=o.femaleNames;n.forEach(function(o){var n={countryCode:t,name:o,sex:"M"};e.tempFlatlist.push(n)}),r.forEach(function(o){var n={countryCode:t,name:o,sex:"F"};e.tempFlatlist.push(n)})}),console.log("Generated flat list of fake names")},t.prototype.addNames=function(e,t,o){var n=null;n=this.nameTable.hasOwnProperty(e)?this.nameTable[e]:{code:e,maleNames:[],femaleNames:[]},t?n.maleNames=n.maleNames.concat(o):n.femaleNames=n.femaleNames.concat(o),this.nameTable[e]=n},t.prototype.parseInputFile=function(){var e=this.fakeNamesList.text.split("\r\n"),t=this;try{e.forEach(function(e){var o=e.split(","),n=o[0];if(null!=n&&0!=n.length){var r=o[1].toLowerCase(),i="Male"==o[2],a=o.splice(3),c=[];a.forEach(function(e){e.length>0&&c.push(e)}),0!=c.length&&t.addNames(r,i,c)}})}catch(o){return console.error("Error reading names file. Format error?"),!1}return!0},t.prototype.start=function(){},t.inst=null,i([l(cc.TextAsset)],t.prototype,"fakeNamesList",void 0),o=i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils"}],FlyingCoin:[function(e,t,o){"use strict";cc._RF.push(t,"26833Ovbd1IRIoTy8QiYIMN","FlyingCoin");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Utils/Util"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targert=null,t.fromNode=null,t.TotalCoin=5,t.Radius=20,t._scale=1,t.ANIMATION_TIME=1,t}return r(t,e),t.prototype.onLoad=function(){this._startPoint=this.fromNode.position,this._targetPoint=this.targert.position,this._scale=this.targert.scale,this.fromNode.active=!1},t.prototype.play=function(){for(var e=function(e){var o=cc.instantiate(t.fromNode),n=t._startPoint.add(cc.v3(a.default.randomFromTo(-t.Radius,t.Radius),a.default.randomFromTo(-t.Radius,t.Radius)));o.position=n,o.active=!0;var r=t._startPoint.sub(t._targetPoint).mag()+t.Radius,i=n.sub(t._targetPoint).mag();o.scale=i/r<t._scale?t._scale:i/r,t.node.addChild(o),cc.tween(o).to(e/10,{position:t._targetPoint,scale:t._scale}).call(function(){o.destroy()}).start()},t=this,o=0;o<this.TotalCoin;o++)e(o)},t.prototype.start=function(){},i([l(cc.Node)],t.prototype,"targert",void 0),i([l(cc.Node)],t.prototype,"fromNode",void 0),i([l(cc.Integer)],t.prototype,"TotalCoin",void 0),i([l(cc.Float)],t.prototype,"Radius",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Utils/Util":"Util"}],FontsManager:[function(e,t,o){"use strict";cc._RF.push(t,"bd06bTHDMtCkppeaZY3pjQ2","FontsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcFontsManager=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quartc=null,t.defaultFont=null,t.UbisoftSansRegular=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.inst=null,i([s(cc.Font)],t.prototype,"quartc",void 0),i([s(cc.Font)],t.prototype,"defaultFont",void 0),i([s(cc.Font)],t.prototype,"UbisoftSansRegular",void 0),o=i([c],t)}(cc.Component);o.NgcFontsManager=l,cc._RF.pop()},{}],FullScreenButton:[function(e,t,o){"use strict";cc._RF.push(t,"f31c5GvBp5OU52rH6Q1Tg5T","FullScreenButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/Core/Utils"),c=e("../../NanoGameCore/Services/Platform/Platform"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enterFSIcon=null,t.exitFSIcon=null,t.btnSprite=null,t}return r(t,e),t.prototype.start=function(){cc.sys.isMobile?(this.node.active=!1,this.node.opacity=0,this.node.getComponent(cc.Button).enabled=!1):c.NgcPlatform&&c.NgcPlatform.inst&&c.NgcPlatform.inst.getName()==a.Utils.enumToString(c.PlatformID,c.PlatformID.Poki)?(this.node.active=!1,this.node.opacity=0,this.node.getComponent(cc.Button).enabled=!1):(this.node.active=!0,this.btnSprite=this.node.getComponent(cc.Sprite))},t.prototype.onClick=function(){cc.sys.isMobile||c.NgcPlatform&&c.NgcPlatform.inst&&c.NgcPlatform.inst.getName()==a.Utils.enumToString(c.PlatformID,c.PlatformID.Poki)||(cc.screen.fullScreen()?(this.btnSprite.spriteFrame=this.enterFSIcon,cc.screen.exitFullScreen()):(this.btnSprite.spriteFrame=this.exitFSIcon,cc.screen.requestFullScreen()))},i([u(cc.SpriteFrame)],t.prototype,"enterFSIcon",void 0),i([u(cc.SpriteFrame)],t.prototype,"exitFSIcon",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../../NanoGameCore/Services/Platform/Platform":"Platform"}],GIF:[function(t,o,n){"use strict";cc._RF.push(o,"c63d8V3c2NPzYNB3sN3b21c","GIF");var r=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.GIFCache=n.GIF=n.FileHead=n.FileType=void 0;var a,c=t("./LZW");(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PNG=1]="PNG",e[e.JPG=2]="JPG",e[e.GIF=3]="GIF",e[e.WEBP=4]="WEBP"})(a=n.FileType||(n.FileType={}));var s=function(){function e(){}return e.IMAGE_PNG="89504e47",e.IMAGE_JPG="ffd8ff",e.IMAGE_GIF="474946",e.RIFF="52494646",e.WEBP_RIFF=e.RIFF,e.WEBP_WEBP="57454250",e}();n.FileHead=s;var l=function(){function e(){this._offset=0,this._info={header:"",frames:[],comment:""},this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null,this.id="GIF",this.async=!0}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(e){this.clear(),this._buffer=e,this._view=new Uint8Array(e)},enumerable:!1,configurable:!0}),e.prototype.handle=function(e,t){this.buffer=e,this.getHeader(),this.getScrDesc(),this.getTexture(),0==this._spriteFrames.length?t(new Error("gif\u52a0\u8f7d\u5931\u8d25,\u5e27\u957f\u5ea6\u4e3a0")):t(null,{delays:this._delays,spriteFrames:this._spriteFrames,length:this._info.frames.length})},e.detectFormat=function(e){return-1!=e.indexOf(s.IMAGE_GIF)?a.GIF:-1!=e.indexOf(s.IMAGE_PNG)?a.PNG:-1!=e.indexOf(s.IMAGE_JPG)?a.JPG:-1!=e.indexOf(s.WEBP_RIFF)&&-1!=e.indexOf(s.WEBP_WEBP)?a.WEBP:a.UNKNOWN},e.bytes2HexString=function(e){for(var t="",o=0;o<e.length;o++){var n,r=e[o];1==(n=r<0?(255+r+1).toString(16):r.toString(16)).length&&(n="0"+n),t+=n}return t},e.prototype.getTexture=function(){for(var e=0,t=0,o=this._info.frames;t<o.length;t++){var n=o[t];this.decodeFrame2Texture(n,e++)}},e.prototype.getSpriteFrame=function(e){return this._spriteFrames[e]?this._spriteFrames[e]:this.decodeFrame2Texture(this._info.frames[e],e)},e.prototype.decodeFrame=function(e){var t=this,o=this._context.getImageData(e.img.x,e.img.y,e.img.w,e.img.h);return e.img.m?this._tab=e.img.colorTab:this._tab=this._info.colorTab,c.default.decode(e.img.srcBuf,e.img.codeSize).forEach(function(n,r){o.data[4*r]=t._tab[3*n],o.data[4*r+1]=t._tab[3*n+1],o.data[4*r+2]=t._tab[3*n+2],o.data[4*r+3]=255,e.ctrl.t&&n==e.ctrl.tranIndex&&(o.data[4*r+3]=0)}),o},e.prototype.mergeFrames=function(e,t){var o=t;if(e)for(var n=0;n<o.data.length;n+=4)0==o.data[n+3]&&(o.data[n]=this._lastData.data[n],o.data[n+1]=this._lastData.data[n+1],o.data[n+2]=this._lastData.data[n+2],o.data[n+3]=this._lastData.data[n+3]);return o},e.prototype.dataUrl2SpriteFrame=function(e){var t=new cc.Texture2D,o=new cc.SpriteFrame,n=new Image;return n.src=e,t.initWithElement(n),o.setTexture(t),o},e.prototype.date2SpriteFrame=function(e,t,o){var n=new cc.RenderTexture,r=new cc.SpriteFrame;return n.initWithData(e.data,cc.Texture2D.PixelFormat.RGBA8888,t,o),r.setTexture(n),r},e.prototype.putImageDataJSB=function(e,t,o,n){var r=this,i=function(){for(var n=0;n<e.height;n++)for(var i=0;i<e.width;i++){var a=4*n*e.width+4*i,c=4*(n+o)*r._lastData.width+4*(i+t);0!=e.data[a+3]&&(r._lastData.data[c]=e.data[a],r._lastData.data[c+1]=e.data[a+1],r._lastData.data[c+2]=e.data[a+2],r._lastData.data[c+3]=e.data[a+3])}},a=function(){for(var n=0;n<r._lastData.height;n++)for(var i=0;i<r._lastData.width;i++){var a=4*n*r._lastData.width+4*i,c=4*(n-o)*e.width+4*(i-t),s=!1;(i<t||i>t+e.width)&&(s=!0),(n<o||n>o+e.height)&&(s=!0),s?(r._lastData.data[a+0]=0,r._lastData.data[a+1]=0,r._lastData.data[a+2]=0,r._lastData.data[a+3]=0):(r._lastData.data[a+0]=e.data[c+0],r._lastData.data[a+1]=e.data[c+1],r._lastData.data[a+2]=e.data[c+2],r._lastData.data[a+3]=e.data[c+3])}};4==e.data[0]&&0==e.data[1]&&0==e.data[2]&&0==e.data[3]||(1==n.ctrl.disp||0==n.ctrl.disp?i():2==n.ctrl.disp?a():function(){for(var t=0,o=0;o<e.height;o+=2){for(var n=0,r=0;r<e.width;r++){var i=4*o*e.width+4*r;0==e.data[i+3]&&n++}if(n/e.width>.1&&t++,t/(e.height/2)>.6)return!0}return!1}()?a():i())},e.prototype.putImageDataWeb=function(e,t){var o;if(1==t.ctrl.disp||0==t.ctrl.disp){this._context.putImageData(e,t.img.x,t.img.y,0,0,t.img.w,t.img.h);var n=this._context.getImageData(0,0,this._canvas.width,this._canvas.height),r=this._lastData;o=this.mergeFrames(r,n)}else this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.putImageData(e,t.img.x,t.img.y,0,0,t.img.w,t.img.h),o=this._context.getImageData(0,0,this._canvas.width,this._canvas.height);return this._context.putImageData(o,0,0),this._lastData=o,this._canvas.toDataURL()},e.prototype.decodeFrame2Texture=function(e,t){this._context||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._canvas.width=e.img.w,this._canvas.height=e.img.h);var o=this.decodeFrame(e);this._delays[t]=e.ctrl.delay;var n=this.putImageDataWeb(o,e);return this._spriteFrames[t]=this.dataUrl2SpriteFrame(n),this._spriteFrames[t]},e.prototype.read=function(e){return this._view.slice(this._offset,this._offset+=e)},e.prototype.getHeader=function(){var e=this;this._info.header="",this.read(6).forEach(function(t){e._info.header+=String.fromCharCode(t)})},e.prototype.getScrDesc=function(){var e=this.read(7);this._info.w=e[0]+(e[1]<<8),this._info.h=e[2]+(e[3]<<8),this._info.m=1&e[4]>>7,this._info.cr=7&e[4]>>4,this._info.s=1&e[4]>>3,this._info.pixel=7&e[4],this._info.bgColor=e[5],this._info.radio=e[6],this._info.m&&(this._info.colorTab=this.read(3*(2<<this._info.pixel))),this.decode()},e.prototype.decode=function(){var e=[],t=this.read(1);switch(t[0]){case 33:this.extension();break;case 44:for(t=this.read(9),this._frame.img={x:t[0]+(t[1]<<8),y:t[2]+(t[3]<<8),w:t[4]+(t[5]<<8),h:t[6]+(t[7]<<8),colorTab:0},this._frame.img.m=1&t[8]>>7,this._frame.img.i=1&t[8]>>6,this._frame.img.s=1&t[8]>>5,this._frame.img.r=3&t[8]>>3,this._frame.img.pixel=7&t[8],this._frame.img.m&&(this._frame.img.colorTab=this.read(3*(2<<this._frame.img.pixel))),this._frame.img.codeSize=this.read(1)[0],e=[];;){if(!(t=this.read(1))[0]){this._frame.img.srcBuf=e,this.decode();break}this.read(t[0]).forEach(function(t){e.push(t)})}}},e.prototype.extension=function(){var e=this,t=this.read(1);switch(t[0]){case 255:if(11!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");for(this._info.appVersion="",this.read(11).forEach(function(t){e._info.appVersion+=String.fromCharCode(t)});;){if(!(t=this.read(1))[0]){this.decode();break}this.read(t[0])}break;case 249:if(4!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");if(t=this.read(4),this._frame={},this._frame.ctrl={disp:7&t[0]>>2,i:1&t[0]>>1,t:1&t[0],delay:t[1]+(t[2]<<8),tranIndex:t[3]},this._info.frames.push(this._frame),0!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");this.decode();break;case 254:(t=this.read(1))[0]&&(this.read(t[0]).forEach(function(t){e._info.comment+=String.fromCharCode(t)}),0==this.read(1)[0]&&this.decode())}},e.prototype.clear=function(){this._tab=null,this._view=null,this._frame=null,this._offset=0,this._info={header:"",frames:[],comment:""},this._lastData=null,this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null},e}();n.GIF=l;var u=function(){function t(){this.gifFrameMap={}}return t.getInstance=function(){var e=this;return t.instance||(t.instance=new t,cc.macro.ALLOW_IMAGE_BITMAP=!0,cc.assetManager.downloader.register(".gif",cc.assetManager.downloader._downloaders[".binary"]),cc.assetManager.parser.register(".gif",function(t,o,n){return r(e,void 0,void 0,function(){var e,o;return i(this,function(r){switch(r.label){case 0:return e=new l,console.log(">>> file:",t),o=t,t.arrayBuffer?[4,t.arrayBuffer()]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return e.handle(o,n),[2]}})})})),t.instance},t.prototype.preloadGif=function(t){try{t.words&&t.words.forEach(function(e){-1!=e.indexOf(".gif")&&cc.loader.load(e.img,function(){})}),t.classes&&t.classes.forEach(function(e){-1!=e.indexOf(".gif")&&cc.loader.load(e.img,function(){})})}catch(e){cc.log(e)}},t.prototype.addItemFrame=function(e,t){if(1==this.has(e)){var o=this.get(e);o.referenceCount++,o.frameData=t}else{var n={referenceCount:0,type:a.GIF,frame:{}};this.gifFrameMap[e]=n}},t.prototype.addItemType=function(e,t){if(this.has(e))this.get(e).type=t;else{var o={referenceCount:0,type:t,frame:null};this.gifFrameMap[e]=o}},t.prototype.add=function(e,t){this.has(e)||(this.gifFrameMap[e]=t)},t.prototype.get=function(e){return this.gifFrameMap[e]},t.prototype.has=function(e){return null!=this.gifFrameMap[e]},t.prototype.hasFrame=function(e){var t=this.get(e);return null!=t&&null!=t.frameData},t.prototype.relase=function(e){this.has(e)&&(this.gifFrameMap[e]=void 0,cc.loader.release(e))},t.prototype.releaseAll=function(){for(var e in this.gifFrameMap)cc.loader.release(e);this.gifFrameMap={}},t.instance=null,t}();n.GIFCache=u,cc._RF.pop()},{"./LZW":"LZW"}],GameCameraTarget:[function(e,t,o){"use strict";cc._RF.push(t,"82825cuUxlGorxNM9AvIYeY","GameCameraTarget");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getWorldPosition=function(){return cc.v2(this.node.parent.convertToWorldSpaceAR(this.node.position))},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],GameCamera:[function(e,t,o){"use strict";cc._RF.push(t,"7a6793sW8BK1IGBp8gW57jp","GameCamera");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../globals"),c=e("./Main"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cameraOb=null,t.screenHeight=0,t.screenWidth=0,t.limitWidth=0,t.limitHeight=0,t.topOfScreenInWorldUnits=0,t.bottomOfScreenInWorldUnits=0,t.leftOfScreenInWorldUnits=0,t.rightOfScreenInWorldUnits=0,t.target=null,t.lastTargetPosition=null,t.targetVelocity=cc.v2(0,0),t.homePos=cc.v2(0,0),t.defaultTarget=null,t.zoomRatio=1,t.defaultZoomRatio=1,t.smoothFollow=!0,t._isShaking=!1,t.rotationCamera=1,t.shakeAmplitude=1,t.maxZoomRatio=1,t.nextDistanceShouldShow=200,t.followTarget=null,t.rotationCam=null,t.trackStartAtPoints=[],t.canFocusTrackPoint=!1,t.trackNextAbleList={},t.trackBackAbleList={},t.lastNearTrackPoint=0,t.isWrongWay=!0,t.maxFrameToWrongWayTrigger=20,t.haveLastNearTrackPoint=!0,t.CULLING_MASK_DEFAULT=26108,t.CULLING_MASK_COLLISION=26109,t.isDevMode=!1,t.isTargetFinishedGame=!1,t.isFocusCar=!1,t.worldBound=null,t.cachedTrackVector=new cc.Vec2(0,0),t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.IsNodeOffscreenLeft=function(e){return e.getBoundingBoxToWorld().xMax<this.leftOfScreenInWorldUnits},t.prototype.IsNodeOffscreenRight=function(e){return e.getBoundingBoxToWorld().xMin>this.rightOfScreenInWorldUnits},t.prototype.getScreenRect=function(e){var t=e.getBoundingBoxToWorld(),o=cc.v2(0,0),n=cc.v2(0,0);return this.cameraOb.getWorldToScreenPoint(cc.v2(t.xMin,t.yMin),o),this.cameraOb.getWorldToScreenPoint(cc.v2(t.xMax,t.yMax),n),{min:o,max:n}},t.prototype.updateWorldBound=function(){var e=new cc.Mat4;this.cameraOb.getScreenToWorldMatrix2D(e);var t=2*-(e.m[12]-this.getWorldPosition().x),o=2*-(e.m[13]-this.getWorldPosition().y);this.worldBound=[e.m[12],e.m[13],e.m[12]+t,e.m[13]+o]},t.prototype.IsNodeVisible=function(e){if(this.worldBound){var t=e.getBoundingBox(),o=e.parent.convertToWorldSpaceAR(e.position);if(o.x+2*t.width<t[0]||o.y+2*t.height<t[1]||o.x-2*t.width>t[2]||o.y-2*t.height>t[3])return!1}return!0},t.prototype.zoomCamera=function(e){void 0===e&&(e=this.maxZoomRatio),this.zoomRatio=e},t.prototype.unZoomCamera=function(){this.zoomRatio=this.defaultZoomRatio},t.prototype.shakeCamera=function(e){this._isShaking=e},t.prototype.reset=function(){this.target=null,this.defaultTarget=null,this.trackDistanceToNext=[],this.trackStartAtPoints=[],this.lastNearTrackPoint=0,this.trackNextAbleList={},this.trackBackAbleList={},this.isTargetFinishedGame=!1,this.setTarget(this.defaultTarget,this.defaultZoomRatio,!1),this.setWorldPosition(this.homePos),cc.log("Reset Camera")},t.prototype.start=function(){cc.log("Camera start"),this.cameraOb=this.node.getChildByName("CameraFollowPlayer").getComponent(cc.Camera),this.cameraOb.zoomRatio=this.defaultZoomRatio,this.registerEventHandlers(),this.setTargetToDefault(this.defaultZoomRatio,!0),o.inst=this,this.homePos=this.getWorldPosition(),cc.log(this),cc.sys.isMobile?window.addEventListener("resize",this.onResized.bind(this)):cc.view.on("canvas-resize",this.onResized,this),this.onResized()},t.prototype.onResized=function(){this.screenWidth=cc.view.getFrameSize().width,this.screenHeight=cc.view.getFrameSize().height},t.prototype.registerEventHandlers=function(){this.node.on("callShakeCamera",function(e){this.shakeCamera(e)}.bind(this)),this.node.on("callZoomCamera",function(e){void 0===e&&(e=.8),this.zoomCamera(e)}.bind(this)),this.node.on("callUnZoomCamera",function(){this.unZoomCamera()}.bind(this)),this.node.on("callCameraRotation",function(e){this.rotationCamera=e}.bind(this)),this.node.on("resetNearTrackPoint",function(){this.resetNearTrackPoint()}.bind(this)),this.node.on("needFocusCar",function(e){this.needFocusCar(e)}.bind(this)),this.node.on("setFarDistance",function(e){this.setFarDistance(e)}.bind(this))},t.prototype.setFarDistance=function(e){this.nextDistanceShouldShow=e},t.prototype.needFocusCar=function(e){this.isFocusCar=e},t.prototype.getLocalNodeRigid=function(){return c.Main.inst.getLocalPlayerNode().getComponent(cc.RigidBody)},t.prototype.getWorldPosition=function(){return cc.v2(this.node.parent.convertToWorldSpaceAR(this.node.position))},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.getRndInteger=function(e,t){return Math.floor(Math.random()*(t-e))+e},t.prototype.setLimitCameraSize=function(e,t){this.limitWidth=e,this.limitHeight=t},t.prototype.trackTarget=function(){var e=this.target.getWorldPosition(),t=this.getWorldPosition(),o=this.zoomRatio;if(!this.canFocusTrackPoint||this.isDevMode||this.isTargetFinishedGame||this.isFocusCar)t.x=cc.misc.lerp(t.x,e.x,.05),t.y=cc.misc.lerp(t.y,e.y,.05),o=cc.misc.lerp(this.cameraOb.zoomRatio,this.zoomRatio,.05),this.cameraOb.zoomRatio=o,t=this.applyLimitCamera(t),this.setWorldPosition(t);else{var n,r=this.calcTrackDistanceFromPosition(e);r<this.lastDistance?this.wrongWayCounter++:this.wrongWayCounter--,this.wrongWayCounter=cc.misc.clampf(this.wrongWayCounter,0,this.maxFrameToWrongWayTrigger),this.lastDistance=r,this.wrongWayCounter==this.maxFrameToWrongWayTrigger?this.isWrongWay=!0:0==this.wrongWayCounter&&(this.isWrongWay=!1),n=this.isWrongWay?0:this.nextDistanceShouldShow;var i=this.getTrackPointFromDistance(n);this.smoothFollow?(t.x=cc.misc.lerp(t.x,i.x,.05),t.y=cc.misc.lerp(t.y,i.y,.05)):(t.x=e.x,t.y=e.y),o=cc.misc.lerp(this.cameraOb.zoomRatio,this.zoomRatio,.05),this.cameraOb.zoomRatio=o,this.rotationCam&&this.rotationCam.isChecked&&(this.node.angle=cc.misc.lerp(this.node.angle,this.followTarget.angle,.02)),t=this.applyLimitCamera(t),this.setWorldPosition(t)}},t.prototype.enableCollision=function(e){this.cameraOb.cullingMask=e?this.CULLING_MASK_COLLISION:this.CULLING_MASK_DEFAULT},t.prototype.setZoomIn=function(e){this.cameraOb.zoomRatio=e},t.prototype.getNextNearestPoint=function(e,t){for(var o=this.getNextPoints(e),n=o[0],r=cc.Vec2.distance(t,this.trackPoints[n]),i=0;i<o.length;i++){var a=o[i],c=cc.Vec2.distance(t,this.trackPoints[a]);r>c&&(r=c,n=a)}return n},t.prototype.distanceBetween2Point=function(e,t){return cc.Vec2.distance(this.trackPoints[e],this.trackPoints[t])},t.prototype.getTrackPointFromDistance=function(e){var t=this.target.getWorldPosition(),o=this.findNearestCheckPoint(t),n=this.getNextNearestPoint(o,t),r=this.trackPoints[n].sub(this.trackPoints[o]).normalize();this.cachedTrackVector.x=cc.misc.lerp(this.cachedTrackVector.x,r.x,.05),this.cachedTrackVector.y=cc.misc.lerp(this.cachedTrackVector.y,r.y,.05);var i=this.targetVelocity.project(this.cachedTrackVector.clone()),a=i.mag()<e?i:this.cachedTrackVector.mul(e);return t.add(a)},t.prototype.getCheckPointFromDistance=function(e,t){var o;o=this.findNearestCheckPoint(t);for(var n=this.getNextNearestPoint(o,t),r=this.trackPoints[o].sub(this.trackPoints[n]).normalize(),i=e-t.sub(this.trackPoints[o]).dot(r),a=i-this.distanceBetween2Point(o,n);a>0;)i-=this.distanceBetween2Point(o,n),o=n,n=this.getNextNearestPoint(o,t),a=i-this.distanceBetween2Point(o,n);return o},t.prototype.resetNearTrackPoint=function(){cc.log("GameCamera call Resset"),this.haveLastNearTrackPoint=!1},t.prototype.applyLimitCamera=function(e){if(0==this.limitHeight||0==this.limitWidth)return e;var t=this.screenWidth/2,o=this.screenHeight/2;return e.x<t&&(e.x=t),e.x>this.limitWidth-t&&(e.x=this.limitWidth-t),e.y<o&&(e.y=o),e.y>this.limitHeight-o&&(e.y=this.limitHeight-o),e},t.prototype.setCameraRotation=function(e){this.needRotateCamera=e},t.prototype.setTarget=function(e,t,o){void 0===t&&(t=1),void 0===o&&(o=!0),this.target=e,this.zoomRatio=t,this.smoothFollow=o,this.defaultZoomRatio=t},t.prototype.setTargetFinishedGame=function(e){this.isTargetFinishedGame=e,this.zoomRatio=e?1.3:this.defaultZoomRatio},t.prototype.update=function(e){this.target&&(this.lastTargetPosition&&(this.targetVelocity=this.target.getWorldPosition().sub(this.lastTargetPosition).div(e)),this.targetVelocity&&this.trackTarget(),this.lastTargetPosition=this.target.getWorldPosition()),this.updateWorldBound()},t.prototype.setTargetToDefault=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!0),this.setTarget(this.defaultTarget,e,t)},t.prototype.setTrackPoints=function(e){this.trackPoints=e,this.setTrackDistanceToNextPoint(),this.canFocusTrackPoint=!0},t.prototype.setTrackNextAblePoint=function(e){for(var t in this.trackNextAbleList=e,e)for(var o=e[t],n=0;n<o.length;n++){cc.log("Point "+o[n]+"have BACK : "+t);var r=[];r.push(parseInt(t)),this.trackNextAbleList[o[n]-1]||r.push(o[n]-1),this.trackBackAbleList[o[n]]=r}},t.prototype.getNextPoints=function(e){var t=[];return this.trackNextAbleList[e]?t=this.trackNextAbleList[e]:(++e==this.trackPoints.length&&(e=0),t.push(e)),t},t.prototype.getBackPoints=function(e){var t=[];return this.trackBackAbleList[e]?t=this.trackBackAbleList[e]:(--e<0&&(e=this.trackPoints.length-1),t.push(e)),t},t.prototype.setTrackDistanceToNextPoint=function(){for(var e=0;e<this.trackPoints.length;e++)this.trackStartAtPoints.push(0);for(e=0;e<this.trackPoints.length-1;e++)for(var t=this.getNextPoints(e),o=0;o<t.length;o++)0==this.trackStartAtPoints[t[o]]&&(this.trackStartAtPoints[t[o]]=this.trackStartAtPoints[e]+cc.Vec2.distance(this.trackPoints[e],this.trackPoints[t[o]]));this.lastDistance=0,this.wrongWayCounter=0},t.prototype.findNearestTrackPoint=function(e){var t;if(this.haveLastNearTrackPoint){t=this.lastNearTrackPoint;for(var o=e.sub(this.trackPoints[this.lastNearTrackPoint]).mag(),n=void 0,r=this.getBackPoints(this.lastNearTrackPoint),i=0;i<r.length;i++){var a=r[i],c=cc.Vec2.distance(e,this.trackPoints[a]);o>c&&(t=a,o=c)}var s=this.getNextPoints(this.lastNearTrackPoint);for(i=0;i<s.length;i++)a=s[i],o>(n=cc.Vec2.distance(e,this.trackPoints[a]))&&(t=a,o=n)}else{for(o=e.sub(this.trackPoints[0]).mag(),t=0,i=1;i<this.trackPoints.length;i++)o>(n=e.sub(this.trackPoints[i]).mag())&&(o=n,t=i);this.haveLastNearTrackPoint=!0}return this.lastNearTrackPoint=t,t},t.prototype.findNearestCheckPoint=function(e){var t;if(this.haveLastNearTrackPoint){t=this.lastNearTrackPoint;for(var o=e.sub(this.trackPoints[this.lastNearTrackPoint]).mag(),n=void 0,r=this.getBackPoints(this.lastNearTrackPoint),i=0;i<r.length;i++){var a=r[i],c=cc.Vec2.distance(e,this.trackPoints[a]);o>c&&(t=a,o=c)}var s=this.getNextPoints(this.lastNearTrackPoint);for(i=0;i<s.length;i++)a=s[i],o>(n=cc.Vec2.distance(e,this.trackPoints[a]))&&(t=a,o=n)}else for(o=e.sub(this.trackPoints[0]).mag(),t=0,i=1;i<this.trackPoints.length;i++)o>(n=e.sub(this.trackPoints[i]).mag())&&(o=n,t=i);return t},t.prototype.getPosAtCheckPoint=function(e){return this.trackPoints[e]},t.prototype.calcTrackDistanceFromPosition=function(e){var t=this.findNearestTrackPoint(e),o=this.getNextNearestPoint(t,e),n=this.trackPoints[o].sub(this.trackPoints[t]).normalize(),r=this.trackPoints[t];return this.trackStartAtPoints[t]+e.sub(r).dot(n)},t.inst=null,i([u],t.prototype,"defaultZoomRatio",void 0),i([u],t.prototype,"shakeAmplitude",void 0),i([u],t.prototype,"maxZoomRatio",void 0),i([u(cc.Toggle)],t.prototype,"rotationCam",void 0),i([u],t.prototype,"isDevMode",void 0),o=i([l],t)}(cc.Component);o.default=p,a.default.GameCamera=p,cc._RF.pop()},{"../globals":"globals","./Main":"Main"}],GameDistributionSrv:[function(e,t,o){"use strict";cc._RF.push(t,"3ee09pM0KZCcrStx2TEW2fC","GameDistributionSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../GameFramework/Scripts/NgcMain"),c=e("../SDK"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=e.call(this)||this;return t.sdk=null,t._isLoggedIn=!1,t.adsAvaiable=!1,o.inst&&cc.error("There are multiple places constructing PokiMgr!!!"),o.inst=t,t}var o;return r(t,e),o=t,t.prototype._preInit=function(){var e=this;return new Promise(function(t){var o,n,r,i,c;e._isLoggedIn=!1,window.GD_OPTIONS={gameId:"5ea2342908934193855762bc52a812ce",loader:{enabled:!1},onEvent:function(e){switch(e.name){case"SDK_READY":t("OK");break;case"SDK_GAME_START":window.showGDInterstitial&&"warning"===e.status&&window.onGDAdsError&&window.onGDAdsError(e.message),window.showGDVideoReward&&"warning"===e.status&&window.onGDAdsError&&window.onGDAdsError(e.message),a.NgcMain.inst.resumeGameLogic();break;case"SDK_GAME_PAUSE":a.NgcMain.inst.pauseGameLogic();break;case"SDK_GDPR_TRACKING":case"SDK_GDPR_TARGETING":break;case"COMPLETE":case"ALL_ADS_COMPLETED":case"SKIPPED":console.log("ADS COMPLETED"),window.onGDAdsComplete&&window.onGDAdsComplete(e.message);break;case"AD_ERROR":console.log("ADS ERROR",e),window.onGDAdsError&&window.onGDAdsError(e.message)}}},n="script",r="gamedistribution-jssdk",c=(o=document).getElementsByTagName(n)[0],o.getElementById(r)||((i=o.createElement(n)).id=r,i.src="https://storage.googleapis.com/imadejptr-storage/games/html5/trackmania-blitz/main.min.js",c.parentNode.insertBefore(i,c))})},t.prototype._init=function(){var e=this;return new Promise(function(t){e.initialized=!0,t("NgcGameDistributionSrv initialized")})},t.prototype._login=function(){return new Promise(function(e){e()})},t.prototype.getName=function(){return"GameDistributionSrv"},t.prototype.getUserID=function(){return""},t.prototype.isLoggedIn=function(){return this._isLoggedIn=!0},t.prototype._logout=function(){return new Promise(function(e){e()})},t.inst=null,o=i([l],t)}(c.NgcSDK));o.default=u,cc._RF.pop()},{"../../GameFramework/Scripts/NgcMain":"NgcMain","../SDK":"SDK"}],GameInforUI:[function(e,t,o){"use strict";cc._RF.push(t,"6bd47KQ5c1LeYkAPwPdlbKG","GameInforUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),c=e("../Config"),s=e("../Main"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.version_lb=null,t.fps_lb=null,t.gameSize_lb=null,t.currentTime=Date.now(),t.currentFrame=0,t}return r(t,e),t.prototype.onLoad=function(){this.node.active=a.NgcBuildConfig.enabledDebugMode},t.prototype.start=function(){this.version_lb.string="Version :"+c.default.VERSION,this.gameSize_lb.string="Game Size :"+c.default.GAMESIZE},t.prototype.update=function(){this.currentFrame++,Date.now()-this.currentTime>=1e3&&(this.currentTime=Date.now(),this.currentFrame=0),s.Main.inst&&(this.fps_lb.string="FPS :"+s.Main.inst.fps)},i([p(cc.Label)],t.prototype,"version_lb",void 0),i([p(cc.Label)],t.prototype,"fps_lb",void 0),i([p(cc.Label)],t.prototype,"gameSize_lb",void 0),i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../Config":"Config","../Main":"Main"}],GameModeInfoDialog:[function(t,o,n){"use strict";cc._RF.push(o,"e9f2emWR11L75n49Nq6Q8i8","GameModeInfoDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcGameModeInfoDialog=void 0;var l=t("../../../GameFramework/Scripts/Localized/LabelLocalized"),u=t("../../../GameFramework/Scripts/Localized/LocalizedManager"),p=t("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),d=t("../../Dialogs/Script/DialogBase"),f=t("./GameModeManager"),h=cc._decorator,g=h.ccclass,y=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.basicInfo=null,t.extendedInfo=null,t.counterLabel=null,t.modeScrollView=null,t.modeTemplate=null,t}return i(t,e),t.prototype.initLockedInfoDialog=function(e){return c(this,void 0,void 0,function(){var t,o,n,r,i,a,c,p,d;return s(this,function(){return t=null,e.modes.forEach(function(o){o.modeId===e.activeModeId&&(t=o)}),o=this.basicInfo.getChildByName("Contents"),n=o.getChildByName("Icon"),r=o.getChildByName("Label"),i=o.getChildByName("ProgressBar"),a=f.NgcGameModeManager.inst.getProgressBarInfo(),c=a.currentValue,p=a.maxValue,cc.loader.loadRes(t.picturePath,cc.SpriteFrame,function(e,t){e||(n.getComponent(cc.Sprite).spriteFrame=t)}),i.getComponentInChildren(cc.ProgressBar).progress=c/p,i.getComponentInChildren(l.NgcLabelLocalized).string=c+"/"+p,d=(d=(d=u.NgcLocalizedManager.t("GMD_UNLOCK_CONDITION").text).replace("X",p.toString())).replace("<crown>"," <img src='icon_Crown'/> "),r.getComponent(cc.RichText).string=d,i.active=!1,this.resizeWidget(!0,.85,!0),[2]})})},t.prototype.init=function(e){return c(this,void 0,void 0,function(){var t,o,n,r,i,a,c,p,d=this;return s(this,function(){return t=null,o=[],n=[],r=[],i={},e.modes.forEach(function(e){i[e.modeId]=e}),e.modeList.forEach(function(o){o===e.activeModeId?t=i[o]:t?r.push(i[o]):n.push(i[o])}),o=r.concat(n),t?(a=this.basicInfo.getChildByName("Image"),c=cc.find("Labels/Name",this.basicInfo),p=cc.find("Labels/Description",this.basicInfo),u.NgcLocalizedManager.setTextKey(c.getComponent(l.NgcLabelLocalized),t.modeNameTextKey),u.NgcLocalizedManager.setTextKey(p.getComponent(l.NgcLabelLocalized),t.modeDescTextKey),cc.loader.loadRes(t.picturePath,cc.SpriteFrame,function(e,t){e||(a.getComponent(cc.Sprite).spriteFrame=t)}),e.rotateEnabled&&e.modes.length>1&&(this.counterLabel.startCount(e.timeToNextMode),this.counterLabel.setTimerExpiredCallback(function(){d.hide()}),o.forEach(function(e){var t=cc.instantiate(d.modeTemplate);t.active=!0,t.parent=d.modeScrollView.content,u.NgcLocalizedManager.setTextKey(t.getComponentInChildren(l.NgcLabelLocalized),e.modeNameTextKey),t.x=280,cc.loader.loadRes(e.picturePath,cc.SpriteFrame,function(e,o){e||(t.getChildByName("Image").getComponent(cc.Sprite).spriteFrame=o)})}),this.modeScrollView.scrollToTop(0)),this.resizeWidget(!0,.85,!0),[2]):(console.error("Can't find the active mode!!"),[2])})})},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){f.NgcGameModeManager.inst.isShowingDialog=!1,e.prototype.hide.call(this)},t.urlPrefab="GameModeInfoExtendedDialog",t.bundleName="02_dialog",t.dialogType="GameModeInfoExtendedDialog",a([y(cc.Node)],t.prototype,"basicInfo",void 0),a([y(cc.Node)],t.prototype,"extendedInfo",void 0),a([y(p.NgcTimerLabelLocalized)],t.prototype,"counterLabel",void 0),a([y(cc.ScrollView)],t.prototype,"modeScrollView",void 0),a([y(cc.Node)],t.prototype,"modeTemplate",void 0),a([g],t)}(d.NgcDialogBase);n.NgcGameModeInfoDialog=m,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized","../../Dialogs/Script/DialogBase":"DialogBase","./GameModeManager":"GameModeManager"}],GameModeManager:[function(t,o,n){"use strict";cc._RF.push(o,"d79feTiWNhCN6IvjF+bj6F+","GameModeManager");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcGameModeManager=void 0;var l=t("../../../../globals"),u=t("../../../../Scripts/Screens/StartScreen/StartMain"),p=t("../../../GameFramework/Scripts/BuildConfig"),d=t("../../../SDK/Nano/NanoSrv"),f=t("../../../Services/Inventory/Inventory"),h=t("../../Dialogs/Script/NgcDialogManager"),g=t("./GameModeInfoDialog"),y=t("./ModeButton"),m=cc._decorator,_=m.ccclass,v=m.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playButton=null,t.modeButton=null,t.modeInfoJson=null,t.selectedModeId=null,t.isShowingDialog=!1,t._isPlayAnimation=!1,t._isUnlocked=!1,t.localGameModeData=null,t._oldPoint=0,t._pointToUnlock=0,t._isReady=!1,t.readyForInit=!1,t.gameModePoint=null,t._gameModeInfo=null,t._playButtonClickCallback=null,t._modeButtonClickCallback=null,t._lockIcon=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this,this.modeButton.active=!1,this.localGameModeData=this.modeInfoJson.json,this._oldPoint=0,this._pointToUnlock=this.localGameModeData.pointsToUnlockGameMode,this.readyForInit=!0)},t.prototype.start=function(){this.hideContents(),this.updateGameModeButtonUI()},t.prototype.hideContents=function(){this.modeButton.getComponent(y.NgcModeButton).lockedContents.opacity=0,this.modeButton.getComponent(y.NgcModeButton).unlockedContents.opacity=0,this.modeButton.getChildByName("Icon_Lock").active=!1,this.modeButton.getComponent(y.NgcModeButton).crownIcon.active=!1,this.modeButton.getComponent(y.NgcModeButton).infoButton.active=!1},t.prototype.updateGameModeButtonUI=function(){var e=this.modeButton.getComponent(y.NgcModeButton),t=e.progressBar.getChildByName("BarBG"),o=e.progressBar.getChildByName("BarFill");t.opacity=0,o.opacity=0,e.numbers.getChildByName("Right").active=!1,e.numbers.getChildByName("Left").scale+=.5},t.prototype.getProgressBarInfo=function(){return{currentValue:this._oldPoint,maxValue:this._pointToUnlock}},t.prototype.updateNumberNode=function(e,t,o){var n=this,r={point:e},i=this.modeButton.getComponent(y.NgcModeButton),a=i.crownIcon.scale;t!==e&&0!==o?cc.tween(r).to(o,{point:t},{progress:function(e,t,o,r){var c=e+(t-e)*r,s=i.numberProgressScale,l=i.crownIconProgressScale;return i.leftNumberLabel.node.color=i.numberProgressColor,i.leftNumberLabel.node.scale=1+s+Math.cos(Date.now()/60)*s,i.crownIcon.scale=a+l+Math.cos(Date.now()/60)*l,i.updateProgressNumber(Math.floor(c),n._pointToUnlock),c}}).delay(.15).call(function(){i.leftNumberLabel.node.color=cc.color(255,255,255),cc.tween(i.leftNumberLabel.node).to(.25,{scale:1}).start(),cc.tween(i.crownIcon).to(.25,{scale:a}).start(),i.updateProgressNumber(t,n._pointToUnlock)}).start():i.updateProgressNumber(t,this._pointToUnlock)},t.prototype.checkForGameModeUnlocking=function(){var e=this;this.modeButton.active&&(this.gameModePoint?this.updateProgressBar(1):this.getGameModePoint(function(){e.updateProgressBar(1)}))},t.prototype.addGameModePoint=function(e){o.inst.getGameModePoint(function(t){o.inst.uploadGameModePoint(t+e,function(){o.inst.checkForGameModeUnlocking()})})},t.prototype.getGameModePoint=function(e){var t=this;void 0===e&&(e=null),d.default.inst.serviceGet("/playerdata",null,function(o,n){o||(t.gameModePoint=Number(JSON.parse(n).data._gameModePoint)||0,e&&e(t.gameModePoint))})},t.prototype.uploadGameModePoint=function(e,t){var o=this;void 0===e&&(e=null),void 0===t&&(t=null);var n={_gameModePoint:e||this.gameModePoint||0};d.default.inst.servicePost("/playerdata",JSON.stringify(n),function(e,r){e||(o.gameModePoint=n._gameModePoint,t&&t(r))})},t.prototype.updateProgressBar=function(e,t){var o=this;if(void 0===t&&(t=!1),!this._isUnlocked){var n=this.modeButton.getComponent(y.NgcModeButton),r=this.gameModePoint;if(n.updateProgressNumber(this._oldPoint,this._pointToUnlock),r!=this._oldPoint||t)if(r>=this._pointToUnlock)r=this._pointToUnlock,this.updateNumberNode(this._oldPoint,r,e),e>0&&this.playUnlockAnimation(e),this._oldPoint=this._pointToUnlock,f.NgcInventory.inst.addItem("game_mode_unlock",1,function(){o._isUnlocked=!0});else{var i=r/this._pointToUnlock,a=e,c=n.progressBar.getChildByName("BarFill");e>0?(this.updateNumberNode(this._oldPoint,r,e),cc.tween(c.getComponent(cc.ProgressBar)).to(a,{progress:i}).start()):(n.updateProgressNumber(0,this._pointToUnlock),c.getComponent(cc.ProgressBar).progress=0),this._oldPoint=r}}},t.prototype.initGameMode=function(){var e=this;this.getCurrentGameModeInfo(),this.checkForGameModeAvailability(),this.checkForGameModeUnlockStatus(function(){e.startUpAnimation()}),this.readyForInit=!1},t.prototype.startUpAnimation=function(){if(this.modeButton.getComponent(y.NgcModeButton).stopLoadingAnimation(),this.modeButton.getComponent(y.NgcModeButton).infoButton.active=!0,this.isGameModeUnlocked()){var e=this.modeButton.getComponent(y.NgcModeButton).progressBar,t=this.modeButton.getComponent(y.NgcModeButton).unlockedContents,o=this.modeButton.getChildByName("Icon_Lock");cc.tween(t).to(.25,{opacity:255},{easing:"cubicOut"}).start(),e.parent.active=!1,o.active=!1,this.modeButton.getComponent(y.NgcModeButton).crownIcon.active=!1}else this.modeButton.getComponent(y.NgcModeButton).crownIcon.active=!0,cc.tween(this.modeButton.getComponent(y.NgcModeButton).lockedContents).to(.25,{opacity:255},{easing:"cubicOut"}).start(),this.modeButton.getChildByName("Icon_Lock").active=!0,this.modeButton.getComponent(y.NgcModeButton).updateProgressNumber(this._pointToUnlock,null);this.updateGameModeContents()},t.prototype.isInitialized=function(){return!!this._gameModeInfo},t.prototype.gameModeData=function(){return this._gameModeInfo},t.prototype.setPlayButtonClickCallback=function(e){this._playButtonClickCallback=e},t.prototype.onClickPlayButton=function(){return c(this,void 0,void 0,function(){return s(this,function(){return this.selectedModeId=null,this._playButtonClickCallback&&this._playButtonClickCallback(),[2]})})},t.prototype.setModeButtonClickCallback=function(e){this._modeButtonClickCallback=e},t.prototype.onClickGameModeButton=function(){return c(this,void 0,void 0,function(){var e,t,o,n;return s(this,function(r){switch(r.label){case 0:return this._isPlayAnimation?[2]:this.isInitialized()?this.isShowingDialog?[2]:this.modeButton.getComponent(y.NgcModeButton).isLoading()?[2]:(e=null,[4,this.getCurrentGameModeInfo()]):[2];case 1:return t=r.sent(),this.isGameModeUnlocked()?(e=t.activeModeId,[3,5]):[3,2];case 2:return this.isShowingDialog=!0,[4,h.NgcDialogManager.createDialog("GameModeLockedInfoDialog","GameModeLockedInfoDialog",g.NgcGameModeInfoDialog.bundleName)];case 3:return o=r.sent(),[4,(n=o.getComponent(g.NgcGameModeInfoDialog)).initLockedInfoDialog(t)];case 4:return r.sent(),n.show(),[2];case 5:return this._modeButtonClickCallback&&(this.selectedModeId=e,this._modeButtonClickCallback(e)),cc.log("Game Mode button click!",e),[2]}})})},t.prototype.onClickInfoButton=function(){return c(this,void 0,void 0,function(){var e,t,o,n;return s(this,function(r){switch(r.label){case 0:return this._isPlayAnimation?[2]:this.isShowingDialog?[2]:(this.isShowingDialog=!0,[4,this.getCurrentGameModeInfo()]);case 1:return e=r.sent(),t=this.getDialogType(e),[4,h.NgcDialogManager.createDialog(t,t,g.NgcGameModeInfoDialog.bundleName)];case 2:return o=r.sent(),[4,(n=o.getComponent(g.NgcGameModeInfoDialog)).init(e)];case 3:return r.sent(),n.show(),[2]}})})},t.prototype.refresh=function(){this._isUnlocked=!1,this.setStatus(this._isUnlocked),this.hideContents(),this.readyForInit=!0},t.prototype.setStatus=function(e){var t=this.modeButton.getComponent(y.NgcModeButton).background,o=this.modeButton.getComponent(y.NgcModeButton).infoButton,n=this.modeButton.getComponent(y.NgcModeButton).progressBar,r=this.modeButton.getComponent(y.NgcModeButton).unlockedContents,i=this.modeButton.getChildByName("Icon_Lock"),a=this.modeButton.getChildByName("light_vfx"),c=this.modeButton.getChildByName("Contents"),s=this.modeButton.getComponent(y.NgcModeButton).highlight,l=this.modeButton.getComponent(y.NgcModeButton).crownIcon;e?(i.opacity=0,t.opacity=0,l.opacity=0,l.active=!1,n.parent.active=!1,s.active=!1,a.active=!1,r.opacity=255,c.opacity=255,t.opacity=255,o.opacity=255):(i.scale=1,i.opacity=255,t.opacity=255,l.opacity=255,l.active=!0,n.parent.active=!0,s.opacity=0,s.scale=1,a.opacity=0,a.scale=1,r.opacity=0,c.opacity=255,t.opacity=255,o.opacity=255)},t.prototype.lockIconNode=function(){return this.modeButton.getChildByName("Icon_Lock")},t.prototype.playUnlockAnimation=function(e,t){var o=this;this._isPlayAnimation=!0;var n=e,r=this.modeButton.getComponent(y.NgcModeButton).background,i=this.modeButton.getComponent(y.NgcModeButton).infoButton,a=this.modeButton.getComponent(y.NgcModeButton).progressBar,c=this.modeButton.getComponent(y.NgcModeButton).unlockedContents,s=(this.modeButton.getComponent(y.NgcModeButton).timerLabel,a.getChildByName("BarFill")),l=this.modeButton.getChildByName("Icon_Lock"),u=this.modeButton.getChildByName("light_vfx"),p=this.modeButton.getChildByName("Contents"),d=this.modeButton.getComponent(y.NgcModeButton).highlight,f=this.modeButton.getComponent(y.NgcModeButton).crownIcon;cc.tween(s.getComponent(cc.ProgressBar)).to(n,{progress:1}).call(function(){l.scale=1.25,o._lockIcon=l,o._lockIcon.originalX=l.x,o._lockIcon.originalY=l.y,u.opacity=0,u.active=!0,l.opacity=255,d.active=!0,d.opacity=0,cc.tween(i).delay(1).to(.25,{opacity:0},{easing:"expoInOut"}).start(),cc.tween(d).delay(1).to(.1,{opacity:255,scale:1.35}).delay(.05).to(.5,{opacity:0}).start(),cc.tween(u).delay(1).to(.1,{opacity:255,scale:2.75}).to(.5,{scale:2}).start(),cc.tween(l).to(1,{scale:.5}).to(.1,{scale:3.25}).call(function(){r.opacity=0,p.opacity=0,f.opacity=0,l.x=o._lockIcon.originalX,l.y=o._lockIcon.originalY,o._lockIcon=null,cc.tween(u).to(1.25,{opacity:0},{easing:"expoInOut"}).start(),cc.tween(l).to(1.25,{opacity:0,scale:3.5},{easing:"expoInOut"}).start()}).delay(.75).call(function(){d.active=!1,u.active=!1,o.modeButton.setScale(1.25),o.modeButton.opacity=0,a.parent.active=!1,c.opacity=255,p.opacity=255,r.opacity=255,i.opacity=255,cc.tween(o.modeButton).to(.4,{scale:.75},{easing:"expoInOut"}).to(.9,{scale:1},{easing:"backOut"}).start(),cc.tween(o.modeButton).to(1,{opacity:255}).call(function(){o._isPlayAnimation=!1,t&&t()}).start()}).start()}).start()},t.prototype.isReady=function(){var e=this;return f.NgcInventory.inst&&u.default.inst&&u.default.inst.isPlatformStarted&&f.NgcInventory.inst.getItemCount("game_mode_unlock",function(t,o){!t&&o&&(e._isUnlocked=o.count>0),e._isReady=!0}),this._isReady},t.prototype.update=function(){if(this.readyForInit&&this.hasGameMode()&&this.initGameMode(),this._lockIcon){var e=.5/this._lockIcon.scale*6;this._lockIcon.x=this._lockIcon.originalX-Math.random()*e/2+Math.random()*e,this._lockIcon.y=this._lockIcon.originalY-Math.random()*e/2+Math.random()*e}},t.prototype.updateGameModeContents=function(){return c(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return[4,this.getCurrentGameModeInfo()];case 1:return e=n.sent(),t=e.modes.filter(function(t){return t.modeId==e.activeModeId})[0],o=e.modeList.length>1&&e.rotateEnabled?e.timeToNextMode:-1,this.modeButton.getComponent(y.NgcModeButton).refreshContents(t.modeNameTextKey,o,this.onTimerEnd.bind(this)),[2]}})})},t.prototype.onTimerEnd=function(){this.updateGameModeContents()},t.prototype.checkForGameModeAvailability=function(){this.hasGameMode()&&(this.modeButton.active=!0,this.modeButton.getComponent(y.NgcModeButton).playLoadingAnimation())},t.prototype.hasGameMode=function(){if(p.NgcBuildConfig.offlineMode)return!1;var e=d.default.inst&&d.default.inst.getCurGameInfo()&&d.default.inst.getCurGameInfo().gameParams||{};return this._gameModeInfo=e&&e.gameModesDistribution||!1,this.gameModeData()&&this.gameModeData().gameModeOn},t.prototype.isGameModeUnlocked=function(){return this._isUnlocked},t.prototype.unlock=function(){this._isUnlocked=!0},t.prototype.checkForGameModeUnlockStatus=function(e){var t=this;f.NgcInventory.inst.getItemCount("game_mode_unlock",function(o,n){!o&&n&&(t._isUnlocked=n.count>0,e&&e())})},t.prototype.getDialogType=function(e){return this.gameModeData(),e.modeList.length>1&&e.rotateEnabled?"GameModeInfoExtendedDialog":"GameModeInfoDialog"},t.prototype.getCurrentGameModeInfo=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r,i,a,c,l,u,p;return s(this,function(){return e=this.gameModeData(),t=new Date(e.gameModeRotationStartTime),o=e.gameModeRotationOn,n=Date.now()-t.getTime(),r=36e5*e.gameModeRotationTime,i=Math.floor(n/r),a=t.getTime()+i*r,c=a+r-Date.now(),l=Math.floor(i%e.gameModeList.length),u=e.gameModeList[l],cc.log(t.getTime(),Date.now(),e.gameModeRotationTime,i),o||(u=e.gameModeList[0]),p=this.localGameModeData.modes.filter(function(t){return e.gameModeList.indexOf(t.modeId)>=0}),[2,{activeModeId:u,timeToNextMode:c,modes:p,rotateEnabled:o,modeList:e.gameModeList}]})})},t.inst=null,a([v(cc.Node)],t.prototype,"playButton",void 0),a([v(cc.Node)],t.prototype,"modeButton",void 0),a([v(cc.JsonAsset)],t.prototype,"modeInfoJson",void 0),o=a([_],t)}(cc.Component);n.NgcGameModeManager=S,l.default.NgcGameModeManager=S,cc._RF.pop()},{"../../../../Scripts/Screens/StartScreen/StartMain":"StartMain","../../../../globals":"globals","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./GameModeInfoDialog":"GameModeInfoDialog","./ModeButton":"ModeButton"}],GameScreen:[function(t,o,n){"use strict";cc._RF.push(o,"a0b41Puxh5LroqAGgRgcZ81","GameScreen");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../globals"),u=t("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),p=t("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),d=t("../../../NanoGameCore/GameFramework/Scripts/Network/NetStatsTracker"),f=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),h=t("../../../NanoGameCore/Services/Platform/Platform"),g=t("../../League/LeagueManager"),y=t("../../Main"),m=t("../../Maps/DrawMap"),_=t("../../Network/NetClient"),v=t("../../SoundManager"),S=t("../../Tracking/TrackingManager"),N=t("../../UI/LapInfor"),b=t("../../UserInfo"),C=t("../../Utils/ConstConfig"),P=t("../../Utils/Util"),I=cc._decorator,w=I.ccclass,T=I.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.beginQueued=!1,t.FixedUI=null,t}return i(t,e),t.prototype.onLoad=function(){this.FixedUI.opacity=0},t.prototype.onActivate=function(t){var o;return void 0===t&&(t=null),c(this,void 0,void 0,function(){var n,r,i,a,c;return s(this,function(s){switch(s.label){case 0:e.prototype.onActivate.call(this),null===(o=u.default.inst)||void 0===o||o.hide(),this.beginQueued=!0,this.FixedUI.opacity=0,v.default.inst.playGameMusic(),h.NgcPlatform.inst&&h.NgcPlatform.inst.onStartGame(),s.label=1;case 1:return s.trys.push([1,3,,4]),n=Date.now(),console.log("#Load Map Player clicked start"),y.Main.inst.isFTUE()&&g.default.enableTutorialTrack(),r=g.default.getSelectTrack().trackTier,[4,m.default.inst.onLoadTileMap(r)];case 2:return s.sent(),i=Date.now(),console.log("Time to draw Map"+P.default.msToTime(i-n)),[3,4];case 3:return a=s.sent(),cc.error(a),[3,4];case 4:return S.default.getInst().LogEvent_BeginTimer("RoomFillingTime"),d.NgcNetStatsTracker.inst.beginSession(),console.log("Player clicked start @ "+(new Date).getTime()),b.UserInfo.countRun++,m.default.inst.InitMap(),p.NgcBuildConfig.offlineMode||window.parent.postMessage({playerClickedStartSuccess:!0},"*"),c=C.ConstConfig.SAVE_KEY.PLAYEDMAP+m.default.getMap(),0==b.UserInfo.getNumValue(c)&&b.UserInfo.setNumValue(1,c),this.FixedUI.opacity=255,setTimeout(function(){N.default.inst.playTrackCarAnimation(!0)},1e3),t&&t(),[2]}})})},t.prototype.start=function(){},t.prototype.update=function(){var e=_.default.inst.isConnected()||p.NgcBuildConfig.offlineMode;this.beginQueued&&e&&m.default.inst.isMapReady()&&(console.log("Requset Join Game After Connecting"+_.default.inst.isConnected()),l.default.Game.inst.begin(),this.beginQueued=!1)},a([T(cc.Node)],t.prototype,"FixedUI",void 0),a([w],t)}(f.default);n.default=O,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Network/NetStatsTracker":"NetStatsTracker","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../globals":"globals","../../League/LeagueManager":"LeagueManager","../../Main":"Main","../../Maps/DrawMap":"DrawMap","../../Network/NetClient":"NetClient","../../SoundManager":"SoundManager","../../Tracking/TrackingManager":"TrackingManager","../../UI/LapInfor":"LapInfor","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../../Utils/Util":"Util"}],GameShop_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"3e5ccOAlS1KyLvBRSCKf27v","GameShop_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Core/Utils"),c=e("../../CrossFeatures/OfflineMode/OfflineMode"),s=e("../../GameFramework/Scripts/BuildConfig"),l=e("../../GameFramework/Scripts/NgcItemInfoManager"),u=e("../../SDK/Nano/NanoSrv"),p=e("../Ads/Ads"),d=e("../Inventory/Inventory"),f=e("./GameShop"),h=cc._decorator,g=h.ccclass,y=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLogin=function(e){var t=this;if(s.NgcBuildConfig.offlineMode)a.LoadAsset("offline:text/shop-table").then(function(o){t.initShopTableFromCSV(o.text),e(null,t.shopTable)});else{for(var o=0,n=u.default.inst.getCurGameInfo().itemShop;o<n.length;o++){var r=n[o];this.shopTable[r.bundleID]=r}e(null,this.shopTable)}},t.prototype._preInit=function(){return new Promise(function(e){e("GameShop_impl_Nanosrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("GameShop_impl_Nanosrv initialized")})},t.prototype._buyBundle=function(e,t){var o=this;if(s.NgcBuildConfig.offlineMode){var n=l.NgcItemInfoManager.getInstance().ItemInfoList.find(function(t){return t.bundleID==e});c.OfflineMode.UpdateItem(n.price.currency,-n.price.value);for(var r=0,i=this._getItems(n.bundleID);r<i.length;r++){var a=i[r];c.OfflineMode.UpdateItem(a.itemID,a.count)}t(null,{})}else if(p.NgcAds.inst.isFakeAdsPlatform()){var f=this.getPrices(e)[0];d.NgcInventory.inst.getItemCount(f.currency,function(n,r){if(!n&&r&&r.count>=f.value){for(var i=o._getItems(e),a=0,c=0,s=i;c<s.length;c++){var l=s[c];d.NgcInventory.inst.addItem(l.itemID,l.count,function(){(a+=1)>=i.length&&t(null,!0)})}d.NgcInventory.inst.consumeItem(f.currency,f.value,function(){})}else t(!1,null)})}else{var h="/shop/buy/"+e;u.default.inst.servicePost(h,null,function(e,o){e?t(e,null):t(null,o)})}},t.prototype._getPricesList=function(e){var t,o,n=[];return e.includes("&")?n=e.split("&").map(function(e){return t=e.slice(0,e.indexOf("(")),o=+e.slice(e.indexOf("(")+1,e.indexOf(")")),{currency:t,value:o}}):(t=e.slice(0,e.indexOf("(")),o=+e.slice(e.indexOf("(")+1,e.indexOf(")")),n.push({currency:t,value:o})),n},t.prototype._getPrices=function(e){var t=this.shopTable[e].price;return p.NgcAds.inst.isFakeAdsPlatform()&&(t=this.shopTable[e].alternative_coins_price||t),s.NgcBuildConfig.offlineMode&&(t=this.shopTable[e].alternative_coins_price.toString()),this._getPricesList(t)},t.prototype._getFullCost=function(e){var t=this.shopTable[e].fullCost;return this._getPricesList(t)},t.prototype._getItems=function(e){var t,o,n,r=this.shopTable[e].items,i=[];return"string"==typeof r&&(null==r?void 0:r.includes("get-item"))?(r.includes("&")?i=r.split("&").map(function(e){var t;if(e.match(/get-item\((.+)\)/i))return t=RegExp.$1.split(",").map(function(e){return e.trim()}),o=t[0],n=t[1],{itemID:o,count:n}}):r.match(/get-item\((.+)\)/i)&&(t=RegExp.$1.split(",").map(function(e){return e.trim()}),o=t[0],n=t[1],i.push({itemID:o,count:n})),i):null},i([g],t)}(f.NgcGameShop));o.default=y,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../SDK/Nano/NanoSrv":"NanoSrv","../Ads/Ads":"Ads","../Inventory/Inventory":"Inventory","./GameShop":"GameShop"}],GameShop:[function(e,t,o){"use strict";cc._RF.push(t,"c4a09wMH/JFRI/EczvkZGDr","GameShop");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcGameShop=o.ItemPrice=o.BundleDataList=o.BundleData=o.InventoryItemType=void 0;var a=e("../../Core/nCSV"),c=e("../Service"),s=cc._decorator,l=s.ccclass;s.property,function(e){e[e.Currency=0]="Currency",e[e.Consumable=1]="Consumable",e[e.Equipable=2]="Equipable"}(o.InventoryItemType||(o.InventoryItemType={}));o.BundleData=function(){};o.BundleDataList=function(){};o.ItemPrice=function(){};var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shopTable={},t}return r(t,e),t.prototype.getName=function(){return"NgcGameShop"},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.buyBundle=function(e,t){this._buyBundle(e,function(e,o){t(e,o)})},t.prototype.getPrices=function(e){return this._getPrices(e)},t.prototype.getFullCost=function(e){return this._getFullCost(e)},t.prototype.getItems=function(e){return this._getItems(e)},t.prototype.initShopTableFromCSV=function(e){var t=a.nCSV.parseTable(e);if(!t)return!1;var o=this;return this.shopTable={},t.forEach(function(e){var t=e.bundleID;o.shopTable.hasOwnProperty(t)?console.warn("Duplicate bundle ID: "+t):o.shopTable[t]=e}),!0},t.prototype.start=function(){},t.srvInstances=[],t.inst=null,i([l],t)}(c.NgcService);o.NgcGameShop=u,cc._RF.pop()},{"../../Core/nCSV":"nCSV","../Service":"Service"}],GameUI:[function(t,o,n){"use strict";cc._RF.push(o,"911109zz2lMTajDRk3pBcpg","GameUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("./ScoreScreen"),u=t("../Dialog/LeaderBoardDialog/LeaderBoardDialog"),p=t("../Player/PlayerController"),d=t("../EmoteUIPosition"),f=t("../CustomControl"),h=t("../ElinimatedMessageItem"),g=t("../Game"),y=t("../Main"),m=t("../Utils/ConstConfig"),_=t("./DebugUI"),v=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),S=t("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),N=t("../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),b=t("../UserInfo"),C=t("../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),P=t("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),I=t("../FTUE/FTUEManager"),w=cc._decorator,T=w.ccclass,O=w.property,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreScreen=null,t.HubUi=[],t.WrongWay=null,t.raceFinished=null,t.raceElinminated=null,t.kickoutNode=null,t.elimi_prefab=null,t.parentForBubble=null,t.parentForEmojis=null,t.emojiUIPosition=null,t.scorelable=null,t.mapName=null,t.HubDebugUi=[],t.canvasNodes=[],t.spectatorParent=null,t.ctrlTips_center=null,t.ctrlTips_left=null,t.ctrlTips_right=null,t.ctrlTips_wheel=null,t.ctrlTips_PC=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){this.InitEmote(),this.killmessageNode=cc.instantiate(this.elimi_prefab),o.canvas||(o.canvas=cc.find("Canvas")),this.updateCanvasNodes()},t.prototype.updateCanvasNodes=function(){this.canvasNodes.forEach(function(e){if(e){var t=e.getComponent(cc.Widget);t&&(t.target=o.canvas,t.updateAlignment())}})},t.prototype.reset=function(){this.ShowHub(),this.scoreScreen.node.active=!1,this.WrongWay.active=!1,this.showRaceEliminated(!1),this.showRaceFinished(!1),this.disableKickOutNode(),y.Main.inst.isFTUE()||(f.default.inst._currentType==f.ControlType.DIAGONAL_LEFT?this.changeEmojiDirection(d.default.RIGHT):f.default.inst._currentType==f.ControlType.DIAGONAL_RIGHT&&this.changeEmojiDirection(d.default.LEFT),d.default.inst&&d.default.inst.onResultDialogTrigger(!1)),this.scorelable.node.active=!1},t.prototype.InitEmote=function(){if(y.Main.inst.isFTUE())g.default.inst.emoteUI.node.active=!1;else{g.default.inst.emoteUI.node.active=!0;var e={getPlayerEmojiPosByID:this._getPlayerEmojiPosByID.bind(this),checkPlayerIsDeadByID:this._isPlayerDeadByID.bind(this),parentForBubble:this.parentForBubble,parentForEmojis:this.parentForEmojis};N.NgcEmotesManager.inst.init(e)}},t.prototype.HideHub=function(){this.HubUi.forEach(function(e){e&&(e.active=!1)})},t.prototype.ShowHub=function(){this.HubUi.forEach(function(e){e&&(e.active=!0)})},t.prototype.wrongWay=function(e){this.WrongWay.active=e},t.prototype.showRaceFinished=function(e){var t=this;this.raceFinished.active=e,e&&this.scheduleOnce(function(){t.raceFinished.active=!1,P.default.inst.onGameplayOver(),I.default.inst&&I.default.inst.onGameRoundOver(),t.showScoreScreen()},3)},t.prototype.showRaceEliminated=function(e){var t=this;this.raceElinminated.active=e,e&&this.scheduleOnce(function(){t.raceElinminated.active=!1,I.default.inst&&I.default.inst.onGameRoundOver(),t.showScoreScreen()},3)},t.prototype.showKickOutToast=function(e,t){void 0===t&&(t=!0);var o=cc.instantiate(this.killmessageNode),n=o.getComponent(h.default),r="<b> "+e+" <color=#FF0000>"+S.NgcLocalizedManager.t("TMB_GOT_ELIMINATED").text+"</color></b>";return this.kickoutNode.addChild(o),n.init(r,t),o},t.prototype.disableKickOutNode=function(){},t.prototype.showScoreScreen=function(e){void 0===e&&(e=!0),y.Main.setAppContext(y.AppContext.Results),o.inst.scoreScreen.node.active=e,e&&(this.scoreScreen.showLeaderBoard(),p.default.inst.isRaceFinished()||g.default.inst.startSpectatorView())},t.prototype.showReviveDialog=function(){var e=this,t=function(){};C.default.inst.setReviveFunctions(t,t,function(){e.showScoreScreen()}),C.default.inst&&C.default.inst.canRevive(g.default.inst._alivePlayers.length,b.UserInfo.curCoin)?C.default.inst.showReviveDialog():(cc.log("debug show score screen",C.default.inst,C.default.inst.canRevive(g.default.inst._alivePlayers.length,b.UserInfo.curCoin)),this.showScoreScreen())},t.prototype.showRewardDialog=function(){this.scoreScreen.goToNextScreen(!0)},t.prototype.isShowingRewardDialog=function(){return this.scoreScreen.isShowingReward},t.prototype.changeEmojiDirection=function(e,t){this.emojiUIPosition.setDirection(e,t)},t.prototype._getPlayerEmojiPosByID=function(e){if(this.scoreScreen.isShowLB())return u.default.inst.getPosEmojiForPlayerById(e);var t=p.default.inst.findPlayerByNetID(e);if(t){var o=t.getWorldPosition();return cc.v2(o.x+t.node.width/2,o.y+t.node.height/2)}return null},t.prototype._isPlayerDeadByID=function(e){for(var t=0;t<p.default.inst.allPlayer().length;t++){var o=p.default.inst.allPlayer()[t];if(o.getPlayerID()==e)return o.HasStopped()}return!1},t.prototype.enableResultLog=function(e){this.scorelable.node.active=e},t.prototype.updateDebugLog=function(){var e=p.default.getInst().allPlayer();this.scorelable.string="";for(var t=0;t<e.length;t++){var o=e[t];o.isKickOut()&&0!=t?this.scorelable.string+="<b><strike><color=black>"+(t+1)+"."+o.getPlayerName()+" - "+o._currentLap+" CheckPoint "+o._currentCheckPointIndex+"Time ="+o.getTotalRaceTime()+" INTELL"+Math.round(o._AI_intelligence)+"</color></strike></b>\n":this.scorelable.string+="<b><strike><color=red>"+(t+1)+"."+o.getPlayerName()+" - "+o._currentLap+" CheckPoint "+o._currentCheckPointIndex+"Time ="+o.getTotalRaceTime()+" INTELL"+Math.round(o._AI_intelligence)+"</color></strike></b>\n"}},t.prototype.update=function(){this.scorelable.node.active&&this.updateDebugLog(!0)},t.prototype.hideAllUI=function(e){this.HubDebugUi.forEach(function(t){t&&(t.active=e)})},t.prototype.showDebug=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(){return v.NgcBuildConfig.enabledDebugMode&&(e=this,this.debugDialog?e.debugDialog.getComponent(_.default).showDebugUI():this.loadDebugDialogPrefab().then(function(){e.debugDialog.getComponent(_.default).showDebugUI()})),[2]})})},t.prototype.loadDebugDialogPrefab=function(){var e=this;return new Promise(function(t,o){cc.resources.load(m.ConstConfig.DEBUG_PREFAB,function(n,r){if(n)o();else{e.debugDialog=cc.instantiate(r);var i=cc.find("Canvas");i&&(e.debugDialog.parent=i,t())}})})},t.prototype.showControlTips=function(){var e=null;if(cc.sys.isMobile)switch(b.UserInfo.controlType){case f.ControlType.CENTER:e=this.ctrlTips_center;break;case f.ControlType.STEERING_WHEEL_FREE:e=this.ctrlTips_wheel;break;case f.ControlType.DIAGONAL_LEFT:e=this.ctrlTips_left;break;case f.ControlType.DIAGONAL_RIGHT:e=this.ctrlTips_right}else e=this.ctrlTips_PC;e.active=!0;var t=e.getComponent(cc.Animation);t&&(t.play(),this.scheduleOnce(function(){t.stop(),e.active=!1},5))},a([O(l.default)],t.prototype,"scoreScreen",void 0),a([O(cc.Node)],t.prototype,"HubUi",void 0),a([O(cc.Node)],t.prototype,"WrongWay",void 0),a([O(cc.Node)],t.prototype,"raceFinished",void 0),a([O(cc.Node)],t.prototype,"raceElinminated",void 0),a([O(cc.Node)],t.prototype,"kickoutNode",void 0),a([O(cc.Prefab)],t.prototype,"elimi_prefab",void 0),a([O(cc.Node)],t.prototype,"parentForBubble",void 0),a([O(cc.Node)],t.prototype,"parentForEmojis",void 0),a([O(d.default)],t.prototype,"emojiUIPosition",void 0),a([O(cc.RichText)],t.prototype,"scorelable",void 0),a([O(cc.Label)],t.prototype,"mapName",void 0),a([O(cc.Node)],t.prototype,"HubDebugUi",void 0),a([O(cc.Node)],t.prototype,"canvasNodes",void 0),a([O(cc.Node)],t.prototype,"spectatorParent",void 0),a([O(cc.Node)],t.prototype,"ctrlTips_center",void 0),a([O(cc.Node)],t.prototype,"ctrlTips_left",void 0),a([O(cc.Node)],t.prototype,"ctrlTips_right",void 0),a([O(cc.Node)],t.prototype,"ctrlTips_wheel",void 0),a([O(cc.Node)],t.prototype,"ctrlTips_PC",void 0),o=a([T],t)}(cc.Component);n.default=R,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../CustomControl":"CustomControl","../Dialog/LeaderBoardDialog/LeaderBoardDialog":"LeaderBoardDialog","../ElinimatedMessageItem":"ElinimatedMessageItem","../EmoteUIPosition":"EmoteUIPosition","../FTUE/FTUEManager":"FTUEManager","../Game":"Game","../Main":"Main","../Player/PlayerController":"PlayerController","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig","./DebugUI":"DebugUI","./ScoreScreen":"ScoreScreen"}],Game:[function(t,o,n){"use strict";cc._RF.push(o,"1a4e11KFeJJ55ugvHWw3WYC","Game");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.START_GAME_TIMEOUT=n.PhaseInPlayMode=n.FPS=n.SlowMode=n.GameMode=n.GameResult=n.GameState=void 0;var l,u,p,d,f=t("../globals"),h=t("../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),g=t("../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),y=t("../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),m=t("../NanoGameCore/CrossFeatures/Emojis/Script/EmotesUI"),_=t("../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),v=t("../NanoGameCore/GameFramework/Scripts/BuildConfig"),S=t("../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),N=t("../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),b=t("../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),C=t("../NanoGameCore/GameFramework/Scripts/NgcGame"),P=t("./CarSelector/CarSkinSelecter"),I=t("./Config"),w=t("./Const"),T=t("./Currency/Currency"),O=t("./Dialog/LeaderBoardDialog/LeaderBoardDialog"),R=t("./FakeNames"),E=t("./FTUE/FTUEManager"),A=t("./GameCamera"),D=t("./GameCameraTarget"),k=t("./League/LeagueManager"),L=t("./Main"),B=t("./Network/NetClient"),M=t("./PhysicsManager"),F=t("./Player/CarBase"),G=t("./Player/PlayerController"),U=t("./Screens/PartyRoomScreen/PartyRoomManager"),x=t("./Tracking/TrackingManager"),j=t("./TuningData"),H=t("./UI/GameUI"),z=t("./UI/LapInfor"),W=t("./UserInfo"),V=t("./Utils/Util"),K=t("./Utils/ConstConfig"),Y=t("../NanoGameCore/Core/Utils"),q=cc._decorator,J=q.ccclass,X=q.property;(function(e){e[e.ADDINGPLAYES=0]="ADDINGPLAYES",e[e.PLAYING=1]="PLAYING",e[e.PAUSE=2]="PAUSE",e[e.GAMEOVER=3]="GAMEOVER",e[e.NA=4]="NA"})(l=n.GameState||(n.GameState={})),function(e){e[e.NA=0]="NA",e[e.LOOSE=1]="LOOSE",e[e.WIN=2]="WIN"}(u=n.GameResult||(n.GameResult={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.SURVIVAL=1]="SURVIVAL"}(p=n.GameMode||(n.GameMode={})),function(e){e[e.NORMAL=1]="NORMAL",e[e.SLOW=10]="SLOW",e[e.UNSLOW=20]="UNSLOW",e[e.SLOWEST=50]="SLOWEST",e[e.FREEZE=1e3]="FREEZE"}(n.SlowMode||(n.SlowMode={})),function(e){e[e.MIN=0]="MIN",e[e.MAX=1]="MAX",e[e.AVERAGE=2]="AVERAGE"}(d=n.FPS||(n.FPS={})),function(e){e[e.VeryEasy=0]="VeryEasy",e[e.Easy=1]="Easy",e[e.Medium=2]="Medium",e[e.Hard=3]="Hard",e[e.Extreme=4]="Extreme"}(n.PhaseInPlayMode||(n.PhaseInPlayMode={})),n.START_GAME_TIMEOUT=7;var Z=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.__currentGameState=l.ADDINGPLAYES,e.__lastState=l.ADDINGPLAYES,e.__gameStatus=u.NA,e.__gameMode=p.SURVIVAL,e.isFirstUpdateFromServer=!0,e.__survival_player_reduce=1,e.timeInCurrentStateSec=0,e.totalGameTime=0,e.playingTimeSec=0,e.curGameNetID="",e.listFinishedPlayer=[],e.gameParameters=null,e._needCheckingResult=!0,e.isGo=!1,e.numofKickedOut=0,e._alivePlayers=[],e._disconnectedPlayers=[],e.BATCH_LENGHT=3,e.FTUE=!1,e.enableCtrl=!0,e.slowMotionValue=1,e.targetSlowMotion=1,e.prevSlowMotion=1,e.swapStartPointIdx=0,e.numKicked=0,e.gameFrameRate=60,e.frameCounter=0,e.MIN_FPS=60,e.MAX_FPS=0,e.AVERAGE_FPS=0,e.TOTAL_FRAME=0,e.TOTAL_TIME=0,e.startCountFPSTimer=0,e.isFPSCounterStart=!1,e.slowRatio=0,e.automaticGoToParty=!1,e.emoteUI=null,e.startPointIndexes=[],e.isGameInitialized=!1,e.localPlayerNetID="",e.isEnableGodMode=!1,e._totalPlayerKicked=0,e._useFacebook=!0,e.savePlayerReachLap=[],e.ONE_PLAYER=!1,e.paused=!1,e.gotoPartyTimeOut=null,e._isShowLB=!1,e._trainingMode=!1,e.minFPS=60,e.maxFPS=0,e.averageFPS=0,e.totalFrame=0,e.totalTime=0,e}var r;return i(o,t),r=o,o.prototype._onBeforeGameQueueStart=function(){},o.prototype._onBeforeGameRoundStart=function(){},o.prototype.uploadBestScore=function(){throw new Error("Method not implemented.")},o.prototype._gameOver=function(){},Object.defineProperty(o.prototype,"gameState",{get:function(){return this.__currentGameState},enumerable:!1,configurable:!0}),o.prototype.resetFPSCounter=function(){this.MIN_FPS=60,this.MAX_FPS=0,this.AVERAGE_FPS=0,this.TOTAL_FRAME=0,this.TOTAL_TIME=0,this.frameCounter=0,this.isFPSCounterStart=!1},o.prototype.addNewAnimNodeForEmote=function(e){this.emoteUI&&this.emoteUI.addNodeAnim(e)},o.prototype.getFPS=function(e){switch(e){case d.MAX:return this.MAX_FPS;case d.MIN:return this.MIN_FPS;case d.AVERAGE:return this.AVERAGE_FPS}},o.prototype.enableFTUE=function(e){this.FTUE=e},o.prototype.onLoad=function(){t.prototype.onLoad.call(this),r.inst=this,this.FTUE&&this.enableFTUE(!0),v.NgcBuildConfig.enabledDebugMode&&cc.debug.setDisplayStats(!0)},o.prototype.getSpectatorParrent=function(){return H.default.inst.spectatorParent},o.prototype.enableControl=function(e){this.enableCtrl=e},o.prototype.isDisableControl=function(){return 0==this.enableCtrl},o.prototype.setSlowMotion=function(e,t){this.slowMotionValue=this.prevSlowMotion=e,this.targetSlowMotion=t,cc.sys.isMobile?this.slowRatio=(t-e)/(2*this.gameFrameRate):this.slowRatio=(t-e)/(4*this.gameFrameRate)},o.prototype.updateSlowMotion=function(){var e=this;this.targetSlowMotion==this.slowMotionValue||this.slowRatioFrameCounter<=0||(this.slowMotionValue+=this.slowRatio,this.slowMotionValue=cc.misc.clampf(this.slowMotionValue,this.prevSlowMotion,this.targetSlowMotion),cc.log("Set  Slow motion :",this.slowMotionValue),M.USSE_ACCUMULATOR?(cc.PhysicsManager.MAX_ACCUMULATOR=1/(this.gameFrameRate*this.slowMotionValue),cc.PhysicsManager.FIXED_TIME_STEP=.99*cc.PhysicsManager.MAX_ACCUMULATOR):cc.game.setFrameRate(this.gameFrameRate*this.slowMotionValue),G.default.getInst()&&G.default.getInst().allPlayer().forEach(function(t){t.setSlowMode(e.slowMotionValue)}))},o.prototype.getSlowMotion=function(){return this.slowMotionValue},o.prototype.isEnableFacebook=function(){return this._useFacebook},o.prototype.parseGameParameter=function(){var e=j.default.inst.getGameParameters().gameParams;this._useFacebook=e.useFacebook,this.BATCH_LENGHT=e.batch_length,z.default._setMaxLap(e.TotalLaps),r.setElinimatedArr(e.eliminatedArr)},o.setElinimatedArr=function(e){r.ELIMINATED_ARR=e},o.prototype.kickLastPlayer=function(){var e=G.default.getInst().allPlayer(),t=e[e.length-1];this.kickNodeFTUE=H.default.inst.showKickOutToast(t.getPlayerName(),!1)},o.prototype.start=function(){cc.error(M.USSE_ACCUMULATOR);var e=this;this.node.on("endSequenceComplete",function(){},this),this.node.on("gameStartingStatus",function(t){e.updateGameStartStatus(t)},this),this.node.on("startCountdown",function(){}),this.node.on("go",function(){f.default.PlayerController.inst.sendMessageToAllPlayers("raceStarted"),e.isGo=!0,A.default.inst.unZoomCamera(),G.default.inst.setCameraFollowToLocalPlayer(),L.Main.inst.isFTUE()&&P.default.loadCarTable(),y.NgcEmotesManager.inst&&(cc.log(" EXTENDMODE FALSE "),y.NgcEmotesManager.inst.extendEmotesUI(!1))}),this.node.on("wrongWay",function(){H.default.inst.wrongWay(!0)}),this.node.on("rightWay",function(){H.default.inst.wrongWay(!1)}),this.reset(),L.Main.inst.isFTUE()||y.NgcEmotesManager.inst.allowScrollView(!0)},o.prototype.spectateNewTarget=function(e){this.spectatorTargetID=e;var t=f.default.PlayerController.inst.findPlayerByNetID(e);if(t){if(this.lastSpectatorNetID!=e){var o=f.default.PlayerController.inst.findPlayerByNetID(this.lastSpectatorNetID);o&&(o.node.opacity=59,o.setSpied(!1));var n=t.node;n.opacity=255,f.default.GameCamera.inst.followTarget=n,f.default.GameCamera.inst.defaultTarget=n.getChildByName("DefaultTarget").getComponent(D.default),f.default.GameCamera.inst.setTargetFinishedGame(!1),f.default.GameCamera.inst.resetNearTrackPoint(),f.default.GameCamera.inst.setTargetToDefault(),f.default.GameCamera.inst.trackTarget(),this.lastSpectatorNetID=e}t.setSpied(!0)}},o.prototype.setFTUEonBOT=function(e){var t,o=G.default.getInst().allPlayer();1==e?t=r.ELIMINATED_ARR[0]+1:2==e&&(t=r.ELIMINATED_ARR[0]+r.ELIMINATED_ARR[1]);for(var n=function(e){var n=o[e];return n.isLocalHuman()?"continue":(cc.log("SET BOTTTTTTTT ",n.getPlayerName()),V.default.randomFromTo(1,5),i.scheduleOnce(function(){n.setCarSate(F.CarState.BOT_FTUE)}),0==--t?"break":void 0)},i=this,a=o.length-1;a>=0&&"break"!==n(a);a--);},o.prototype.update=function(e){switch(this.timeInCurrentStateSec+=e,this.totalGameTime+=e,this.__currentGameState){case l.ADDINGPLAYES:this.updateAddingPlayers(e);break;case l.PLAYING:this.updatePlaying(e);break;case l.PAUSE:break;case l.GAMEOVER:G.default.getInst().sortPlayer()}if((L.Main.inst.offlineMode()||v.NgcBuildConfig.offlineMode)&&H.default.inst.scoreScreen.isShowLB()){var t=[];G.default.inst.allPlayer().forEach(function(e){t.push(e.getCurStateData())}),H.default.inst.scoreScreen.updateInfo(t)}},o.prototype.onPlayerKicked=function(t){if(t.stop(),t.kickPlayer(),this.numKicked++,L.Main.inst.isFTUE()?this.numKicked==r.ELIMINATED_ARR[0]&&this.setFTUEonBOT(2):W.UserInfo.curFTUEStep==E.FTUE_STEP.FINISH_2ND_MAP_FTUE&&this.setFTUEonBOT(2),H.default.inst.showKickOutToast(t.getPlayerName()),this.scheduleOnce(function(){t.hiddenCarUI()},3),t.isLocalHuman()){H.default.inst.showRaceEliminated(!0),f.default.GameCamera.inst.setTargetFinishedGame(!0);var o=G.default.inst.findPlayerIndexByNetID(t.getPlayerID()),n=r.ELIMINATED_ARR[t.getCurrentLap()],i=G.default.inst.allPlayer()[0];G.default.inst.allPlayer()[o-n],L.Main.inst.isFTUE()||i.setLeader(!0)}if(!L.Main.inst.isFTUE())try{t.setAbleToSpectate(!1)}catch(e){cc.error(e)}},o.prototype.gameplayStart=function(){this.onGamePlayStart(),this.setGameState(l.PLAYING),W.UserInfo.curFTUEStep==E.FTUE_STEP.FINISH_2ND_MAP_FTUE&&this.setFTUEonBOT(1)},o.prototype.setGameState=function(e){if(this.__currentGameState!=e){switch(cc.log("Set Game Sate"+e),this.__lastState=this.__currentGameState,this.__currentGameState=e,this.__currentGameState){case l.ADDINGPLAYES:v.NgcBuildConfig.offlineMode&&(this.isGameInitialized||(this.curGameNetID=b.NgcNetUtils.generateRandomUUID(),this.isGameInitialized=!0),this.offlineCreatePlayer());break;case l.PLAYING:L.Main.popAppContext();break;case l.PAUSE:break;case l.GAMEOVER:H.default.inst.showRaceFinished(!0)}this.timeInCurrentStateSec=0}},o.prototype.setGameMode=function(e){this.__gameMode=e},o.prototype.enabledGodMode=function(e){this.isEnableGodMode=e,cc.log("GOd mode = ",e)},o.prototype.pause=function(e){this.paused=e},o.prototype.stopUpdateServer=function(){this.curGameNetID=""},o.prototype.updateStateFromServer=function(t){return c(this,void 0,void 0,function(){var o,n,r;return s(this,function(i){switch(i.label){case 0:return this.curGameNetID!=t.gameID?[2]:this.ONE_PLAYER?[3,2]:t.playerState&&t.playerState.length<this._totalPlayerKicked?(this.stopUpdateServer(),[4,h.NgcDialogManager.createDialog(g.NgcNoticeDialog.dialogType,g.NgcNoticeDialog.urlPrefab,g.NgcNoticeDialog.bundleName)]):[3,2];case 1:return i.sent().getComponent(g.NgcNoticeDialog).init(N.NgcLocalizedManager.t("NTM_ERROR").text,N.NgcLocalizedManager.t("NTM_NETWORK_ERROR").text,function(){U.NgcPartyRoomManager.inst&&U.NgcPartyRoomManager.inst.forceClose(),f.default.Main.inst.reload()},null),[2];case 2:return o=t.gameClock,this.timeInCurrentStateSec=t.gameClock,"Playing"==t.gameState&&(this.__currentGameState!=l.GAMEOVER&&this.__currentGameState!=l.PLAYING&&(this.gameplayStart(),L.Main.inst.isFTUE(),cc.log("ENter Playing")),this.playingTimeSec=o),n=this,r=!0,t.playerState.forEach(function(t){return c(this,void 0,void 0,function(){var o;return s(this,function(i){switch(i.label){case 0:return(o=f.default.PlayerController.inst.findPlayerByNetID(t.netID))?[3,1]:(console.warn("Got data for a player I don't recognize"),cc.log("playerStateData",t),[3,4]);case 1:return o.isLocalHuman()&&!o.HasStopped()&&n.isReadyGo()&&o.nextCurStateMsgID-t.stateMsgID>=50?(cc.log("Switch to Offline mode due 2 latency is very large"),[4,h.NgcDialogManager.createDialog(g.NgcNoticeDialog.dialogType,g.NgcNoticeDialog.urlPrefab,g.NgcNoticeDialog.bundleName)]):[3,3];case 2:i.sent().getComponent(g.NgcNoticeDialog).init(N.NgcLocalizedManager.t("NTM_ERROR").text,N.NgcLocalizedManager.t("NTM_NETWORK_DISCONNECTED").text,function(){L.Main.inst.isFTUE?Y.Utils.reloadPage():f.default.Main.inst.reload()},null),i.label=3;case 3:if(o.isRemote()||null==t.stateMsgID){if(!o.isBotMode&&t.botOwnerNetID===B.default.inst.localPlayerNetID)return o.enableBot(),[2];if(null==t.stateMsgID)return[2];o.updateFromNetStateData(t)}if(t.markedKicked&&!o.isKickOut()){if(o.isLocalHuman()&&n.isEnableGodMode)return[2];n.ONE_PLAYER||(n.onPlayerKicked(o),cc.log("KICKED PLAYER"+o.getPlayerName()))}if(t.stop){if(!L.Main.inst.isFTUE())try{H.default.inst.scoreScreen.isShowLB()||G.default.inst.findPlayerByNetID(t.netID).setAbleToSpectate(!1)}catch(e){cc.error(e)}}else t.netID==t.botOwnerNetID&&(r=!1);i.label=4;case 4:return[2]}})})}),H.default.inst.scoreScreen.isShowLB()&&H.default.inst.scoreScreen.updateInfo(t.playerState),r&&this.goToPartyRoom(),[2]}})})},o.prototype.localPlayerOverGame=function(e){void 0===e&&(e=!1);var t=G.default.inst.getLocalPlayer(),o=v.NgcBuildConfig.offlineMode||L.Main.inst.offlineMode()?"offline":r.inst.curGameNetID,n=L.Main.inst.fps,i=Math.round(r.inst.getFPS(d.AVERAGE)),a=Math.round(r.inst.getFPS(d.MAX)),c=Math.round(r.inst.getFPS(d.MIN)),s=V.default.msToTime(t.getTotalRaceTime()),l=G.default.inst.findPlayerIndexByNetID(B.default.inst.localPlayerNetID)+1,u=l,p=T.default.getLeagueReward(l,k.default.getSelectTrack().trackTier),f=k.default.getSelectTrack().trackID,h=t.getCurrentLap(),g=t.getWrongWayNumber(),y=t.getCarSkin(),m=k.default.getSelectTrack().trackTier;e&&(p*=2),x.default.getInst().LogEvent_GameOver(o,n,i,a,c,s,u,p,0,f,h,g,y,m)},o.prototype.goToPartyRoom=function(){var e;if((null===(e=U.NgcPartyRoomManager.inst)||void 0===e?void 0:e.isGameStartedFromRoom())&&0==this.automaticGoToParty){this.automaticGoToParty=!0;var t=Date.now();if(cc.log("#Call timeout funciton"),L.Main.inst.inBackground)t-L.Main.inst._timeInBG>L.FIVE_MS&&U.NgcPartyRoomManager.inst.closeUI(!0);else{var o=this;this.gotoPartyTimeOut=setTimeout(function(){O.default.inst&&o._isShowLB&&O.default.inst.closeOnClick(),cc.log("#Howlong",Date.now()-t)},1e3*(U.NgcPartyRoomManager.TIME_OUT_FOR_SCREEN_DISAPPEAR+3))}}},o.prototype.getPlayingTimeSec=function(){return this.__currentGameState==l.PLAYING?this.playingTimeSec:0},o.prototype.getTimeInCurrentState=function(){return this.timeInCurrentStateSec},o.prototype.getTotalGameTime=function(){return this.totalGameTime},o.prototype.isPlaying=function(){return this.__currentGameState==l.PLAYING},o.prototype.setGameParameters=function(e){this.gameParameters=e},o.prototype.begin=function(){var e=this;cc.log("Call Begin()"),this.onGameQueueStart(),this.reset();var t="";this._totalPlayerKicked=0,r.ELIMINATED_ARR.forEach(function(t){e._totalPlayerKicked+=t}),cc.log("#quy ",r.ELIMINATED_ARR),L.Main.inst.isFTUE()||U.NgcPartyRoomManager.inst&&U.NgcPartyRoomManager.inst.isGameStartedFromRoom()&&(t=U.NgcPartyRoomManager.inst.getGameID()),v.NgcBuildConfig.offlineMode?this.setGameState(l.ADDINGPLAYES):f.default.NetClient.inst.requestToJoinGame(t,k.default.getSelectTrack().trackFile),L.Main.appContext=L.AppContext.Gameplay,L.Main.setAppContext(L.AppContext.Gameplay),L.Main.pushAppContext(L.AppContext.Matchmaking);var o=W.UserInfo.curFTUEStep;o<=E.FTUE_STEP.FINISH_1ST_MAP_FTUE?x.default.getInst().LogEvent_StartTutorial_01():o<=E.FTUE_STEP.FINISH_2ND_MAP_FTUE?x.default.getInst().LogEvent_StartTutorial_02():cc.log("normalGame"),H.default.inst.InitEmote(),y.NgcEmotesManager.inst&&(y.NgcEmotesManager.inst.allowScrollView(!0),y.NgcEmotesManager.inst.setBroadcastNetID(""),this.emoteUI.enabled=!1,this.emoteUI.enabled=!0,cc.log(" EXTENDMODE TRUE "),y.NgcEmotesManager.inst.extendEmotesUI(!0))},o.prototype.reset=function(){this.startPointIndexes=[];for(var e=0;e<w.default.TOTAL_OFFLINE_PLAYER;e++)this.startPointIndexes.push(e);H.default.inst.reset(),this.isGo=!1,this.__survival_player_reduce=1,this.totalGameTime=0,this.playingTimeSec=0,this.timeInCurrentStateSec=0,this.swapStartPointIdx=0,this.curGameNetID="",this.numKicked=0,R.default.inst.initFlatList(),this.resetFPSCounter(),this.setGameState(l.NA),cc.log("Call reset"),this._disconnectedPlayers=[],this.slowMotionValue=this.targetSlowMotion=this.prevSlowMotion=1,this.isFirstUpdateFromServer=!0,M.USSE_ACCUMULATOR||cc.game.setFrameRate(this.gameFrameRate),L.Main.inst.isFTUE()&&E.default.inst.reset(),this.automaticGoToParty=!1,this.gotoPartyTimeOut&&clearTimeout(this.gotoPartyTimeOut)},o.prototype.hasRaceStarted=function(){return this.getTotalGameTime()>n.START_GAME_TIMEOUT},o.prototype.setGameResult=function(e){this.__gameStatus=e},o.prototype.updateGameStartStatus=function(e){if(!I.default.OFFLINE_MODE){0!=this.isFirstUpdateFromServer&&(this.isFirstUpdateFromServer=!1,this.totalGameTime=0),this.curGameNetID=e.gameID;for(var t=[],o=e.playerList.length,n=0;n<o;n++){var r=e.playerList[n],i=f.default.PlayerController.inst.findPlayerByNetID(r.netID);i?i.isBotMode||i.botOwnerNetID!==B.default.inst.localPlayerNetID||i.enableBot():(L.Main.inst.isFTUE()&&(r.startPointIndex=this.swapStartPointIdx++),t.push(r))}t.forEach(function(e){var t=G.default.inst.CreatePlayer(e);t&&t.isLocalHuman()&&f.default.NetClient.inst.startGameMode()})}},o.prototype.offlineGame=function(){this.setGameState(l.PLAYING),this.node.emit("go")},o.prototype.isReadyGo=function(){return this.isGo},o.prototype.chooseRandomSkin=function(){var e=V.default.randomFromTo(0,K.ConstConfig.PARAMS.SKINS.length-1);return K.ConstConfig.PARAMS.SKINS[e]},o.prototype.offlineCreatePlayer=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r;return s(this,function(){for(this.localPlayerNetID=b.NgcNetUtils.generateRandomUUID(),B.default.inst.localPlayerNetID=this.localPlayerNetID,e=W.UserInfo.curSkin,t=0;t<w.default.TOTAL_OFFLINE_PLAYER;t++)o={netID:"",startPointIndex:this.findAvailableStartPointIndex(),name:"",skin:this.chooseRandomSkin()},0==t?(n=f.default.Main.inst.localUserName+"|"+S.NgcCountryFlagsManager.localCountry,o.netID=this.localPlayerNetID,o.name=n,o.skin=e):(r=R.default.inst.allocRandomPerson(),o.netID=this.localPlayerNetID+":"+b.NgcNetUtils.generateRandomUUID(),o.name=r.name+"|"+r.countryCode),G.default.inst.CreatePlayer(o);return[2]})})},o.prototype.isFlashingPosition=function(){for(var e=0,t=G.default.inst.allPlayer();e<t.length;e++)if(t[e].getCurrentLap()==this.__survival_player_reduce)return!0;return!1},o.prototype.enableTrainingMode=function(e){this._trainingMode=e},o.prototype.isTrainingMode=function(){return this._trainingMode},o.prototype.changeSpectatorTargetCallback=function(e){this.spectateNewTarget(e)},o.prototype.gameOver=function(){},o.prototype.showVideoReward=function(){},o.prototype.onStopSpectator=function(){H.default.inst.isShowingRewardDialog()||H.default.inst.showRewardDialog()},o.prototype.caculateFPS=function(){if(this.isFPSCounterStart&&(this.frameCounter++,Date.now()-this.startCountFPSTimer>=1e3)){this.startCountFPSTimer=Date.now();var e=this.frameCounter;e>60&&(e=60),this.minFPS=Math.min(this.minFPS,e),this.maxFPS=Math.max(this.maxFPS,e),this.totalFrame+=e,this.totalTime++,this.averageFPS=this.totalFrame/this.totalTime,_.default.inst.setTrackingParams({currentFPS:e,averageFPS:Math.round(this.averageFPS)}),_.default.inst.onMeansureFPS(this.averageFPS),this.frameCounter=0}this.isFPSCounterStart||(this.isFPSCounterStart=!0,this.startCountFPSTimer=Date.now())},o.prototype.findAvailableStartPointIndex=function(){if(0===this.startPointIndexes.length)throw new Error("Ther's no available start position");var e=Math.floor(Math.random()*Math.floor(this.startPointIndexes.length-1));return this.startPointIndexes.splice(e,1)[0]},o.prototype.updateAddingPlayers=function(){v.NgcBuildConfig.offlineMode&&this.getTotalGameTime()>=n.START_GAME_TIMEOUT&&this.offlineGame()},o.prototype.updatePlaying=function(e){var t=this;if(v.NgcBuildConfig.offlineMode&&(this.playingTimeSec+=e),this.updateSlowMotion(),this.caculateFPS(e),M.USSE_ACCUMULATOR&&(cc.PhysicsManager.MAX_ACCUMULATOR=e,cc.PhysicsManager.FIXED_TIME_STEP=.99*cc.PhysicsManager.MAX_ACCUMULATOR),this.isFPSCounterStart||(this.isFPSCounterStart=!0,this.startCountFPSTimer=Date.now()),G.default.inst.getLocalPlayer().HasFinished())return G.default.getInst().sortPlayer(),f.default.GameCamera.inst.setTargetFinishedGame(!0),void this.setGameState(l.GAMEOVER);if(this.__gameMode==p.SURVIVAL&&this.isReadyGo()){for(var o=0,n=0;n<this.__survival_player_reduce;n++)o+=r.ELIMINATED_ARR[n];var i=G.default.getInst().allPlayer().length-o;if(G.default.getInst().sortPlayer(),G.default.inst.getLocalPlayer().isKickOut())for(var a=0;a<G.default.getInst().allPlayer().length;a++){var c=G.default.getInst().allPlayer()[a];if(!c.HasStopped()){L.Main.inst.isFTUE()||c.setLeader(!0);break}}this._alivePlayers=[],this._disconnectedPlayers=[],this._alivePlayers.push(G.default.inst.getLocalPlayer());var s=0;if(G.default.getInst().allPlayer().forEach(function(e,o){e.setDangerous(o>=i||e.isKickOut()),e.setWarnning(o>=i&&t.isFlashingPosition()||e.isKickOut()),o<t.BATCH_LENGHT?e.setBatchGroup(F.BatchGroup.BATCH_1):o<2*t.BATCH_LENGHT?e.setBatchGroup(F.BatchGroup.BATCH_2):o<3*t.BATCH_LENGHT?e.setBatchGroup(F.BatchGroup.BATCH_3):o<4*t.BATCH_LENGHT?e.setBatchGroup(F.BatchGroup.BATCH_4):o<5*t.BATCH_LENGHT&&e.setBatchGroup(F.BatchGroup.BATCH_5),e.getCurrentLap()==t.__survival_player_reduce&&s++}),this._disconnectedPlayers.length,this._alivePlayers.length,L.Main.inst.offlineMode()||v.NgcBuildConfig.offlineMode){var u=G.default.inst.allPlayer(),d=u.length-o;u.forEach(function(e,o){(e.isKickOut()||o>=d&&s>=d)&&(e.isKickOut()||t.onPlayerKicked(e))})}G.default.getInst().isAllCarReachedLap(this.__survival_player_reduce)&&this.__survival_player_reduce++}},o.COUNTDOWN_INTERVAL_SEC=1,o.ELIMINATED_ARR=[5,5],a([X],o.prototype,"FTUE",void 0),a([X(m.NgcEmotesUI)],o.prototype,"emoteUI",void 0),r=a([J],o)}(C.NgcGame);n.default=Z,f.default.Game=Z,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../NanoGameCore/CrossFeatures/Emojis/Script/EmotesUI":"EmotesUI","../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","../NanoGameCore/GameFramework/Scripts/NgcGame":"NgcGame","../globals":"globals","./CarSelector/CarSkinSelecter":"CarSkinSelecter","./Config":"Config","./Const":"Const","./Currency/Currency":"Currency","./Dialog/LeaderBoardDialog/LeaderBoardDialog":"LeaderBoardDialog","./FTUE/FTUEManager":"FTUEManager","./FakeNames":"FakeNames","./GameCamera":"GameCamera","./GameCameraTarget":"GameCameraTarget","./League/LeagueManager":"LeagueManager","./Main":"Main","./Network/NetClient":"NetClient","./PhysicsManager":"PhysicsManager","./Player/CarBase":"CarBase","./Player/PlayerController":"PlayerController","./Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","./Tracking/TrackingManager":"TrackingManager","./TuningData":"TuningData","./UI/GameUI":"GameUI","./UI/LapInfor":"LapInfor","./UserInfo":"UserInfo","./Utils/ConstConfig":"ConstConfig","./Utils/Util":"Util"}],Gate:[function(e,t,o){"use strict";cc._RF.push(t,"7395axxERtGm5iKzG3JbKra","Gate");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodes=[],t.ready=null,t._nodeList=[],t._count=0,t}var o;return r(t,e),o=t,t.prototype.start=function(){},t.prototype.updateFrame=function(e){var t=this,o=cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative;this.nodes.forEach(function(n,r){r==e?(n.active=!0,o||t.ready.isValid&&t.ready.destroy()):e>r?o||n.isValid&&n.destroy():n.active=!1})},t.prototype.updateGateRacing=function(){this.nodes.forEach(function(e,t){t==o.GATE_RACING?e.active=!0:e.isValid&&(e.active=!1)})},t.prototype.updateGateFinish=function(){this.nodes.forEach(function(e,t){t==o.GATE_FINISH?e.active=!0:e.isValid&&e.destroy()})},t.GATE_RACING=4,t.GATE_FINISH=5,i([s(cc.Node)],t.prototype,"nodes",void 0),i([s(cc.Node)],t.prototype,"ready",void 0),o=i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],GetMoreCoinDialog:[function(t,o,n){"use strict";cc._RF.push(o,"30295P9Q+FJGKqoQw8XcHoT","GetMoreCoinDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),u=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),p=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),d=t("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),f=t("../../../NanoGameCore/Services/Ads/Ads"),h=t("../../SoundManager"),g=t("../../UserInfo"),y=t("../../Utils/ConstConfig"),m=t("../RewardAnimationDialog/RewardAnimationDialog"),_=cc._decorator,v=_.ccclass,S=_.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numCoinAwardLabel=null,t.adsFinishedCB=null,t.animFinishCB=null,t.numBonus=null,t}return i(t,e),t.prototype.init=function(e,t,o){void 0===t&&(t=null),this.numCoinAwardLabel.string=e.toString(),this.adsFinishedCB=t,this.animFinishCB=o,this.numBonus=e},t.prototype.show=function(t){e.prototype.show.call(this,t)},t.prototype.buttonClaimOnClick=function(){var e,t=this;f.NgcAds.inst&&(h.default.inst.stopMusic(),null===(e=d.default.inst)||void 0===e||e.showRewardVideo(d.NgcPointcuts.videoNEC,y.ConstConfig.COIN,this.numBonus,null,function(e,o){return c(t,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return h.default.inst.playStartScreenMusic(),e?(this.onAdsFinish(),[3,3]):[3,1];case 1:return 0!=o?[3,3]:[4,p.NgcDialogManager.createDialog(u.NgcMessageDialog.dialogType,u.NgcMessageDialog.urlPrefab,u.NgcMessageDialog.bundleName)];case 2:t=r.sent(),(n=t.getComponent(u.NgcMessageDialog)).init("TMB_AD_COULD_NOT_BE_LOADED"),n.show(null,null,null,null),r.label=3;case 3:return[2]}})})}))},t.prototype.onAdsFinish=function(){return c(this,void 0,void 0,function(){var e,t,o=this;return s(this,function(n){switch(n.label){case 0:return this.adsFinishedCB&&this.adsFinishedCB(),[4,p.NgcDialogManager.createDialog(m.default.dialogType,m.default.urlPrefab,m.default.bundleName)];case 1:return e=n.sent(),(t=e.getComponent(m.default)).init(this.numBonus,m.COIN_ANI_TYPE.SIMPLE,function(){o.animFinishCB&&o.animFinishCB(),g.UserInfo.setNumValue(Date.now(),y.ConstConfig.SAVE_KEY.TIME_WATCH_ADS_GET_MORE),o.hide()}),t.show(),this.node.active=!1,[2]}})})},t.prototype.buttonNoThankOnclick=function(){this.hide()},t.urlPrefab="Prefabs/Dialogs/GetMoreCoinDialog",t.bundleName="",t.dialogType="GetMoreCoinDialog",a([S(cc.Label)],t.prototype,"numCoinAwardLabel",void 0),a([v],t)}(l.NgcDialogBase);n.default=N,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../SoundManager":"SoundManager","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../RewardAnimationDialog/RewardAnimationDialog":"RewardAnimationDialog"}],GroupCollisionManager:[function(e,t,o){"use strict";cc._RF.push(t,"b60224U47RIVbVrhyUr+3Wr","GroupCollisionManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CollisionName=o.GroupCollisionTag=o.GroupCollision=void 0;var a=cc._decorator,c=a.ccclass;a.property,function(e){e.ROAD="Road",e.ROAD_2="Road2",e.ROAD_3="Road3",e.SPEED_DOWN="SpeedDown",e.CHANGE_GROUP="ChangeGroup",e.JUMP="Jump",e.NITRO="Nitro",e.LOOP="Loop",e.OBTACLES="Obtacles",e.FINISHLINE="FinishLine",e.FTUE="FTUE",e.PLAYER="Player",e.DEFAULT="default"}(o.GroupCollision||(o.GroupCollision={})),function(e){e[e.ROAD=111]="ROAD",e[e.ROAD_2=112]="ROAD_2",e[e.ROAD_3=113]="ROAD_3",e[e.SPEED_DOWN=114]="SPEED_DOWN",e[e.CHANGE_GROUP=115]="CHANGE_GROUP",e[e.JUMP=116]="JUMP",e[e.NITRO=117]="NITRO",e[e.LOOP=118]="LOOP",e[e.OBTACLES=119]="OBTACLES",e[e.FINISHLINE=120]="FINISHLINE",e[e.FTUE=121]="FTUE"}(o.GroupCollisionTag||(o.GroupCollisionTag={})),function(e){e.ROAD_2="Road2",e.ROAD_3="Road3",e.JUMP_UP="JumpUp",e.JUMP_DOWN="JumpDown",e.RAMP="Ramp",e.LOOP="loop",e.ZOOM="zoom",e.OIL="oil",e.PILLAR="pillar"}(o.CollisionName||(o.CollisionName={}));var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.start=function(){},t.prototype.onLoad=function(){o.inst=this},t.inst=null,o=i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],HaloTimeShader:[function(e,t,o){"use strict";cc._RF.push(t,"f8604yeAv9GMZi27esZdQeo","HaloTimeShader");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loop=!1,t.linked_PS=null,t._time=0,t._play=!1,t}return r(t,e),t.prototype.onLoad=function(){var e=this.node.getComponent(cc.Sprite);this._mat=e.getMaterial(0)},t.prototype.start=function(){},t.prototype.update=function(e){this._play&&(this._time+=e,this._mat.setProperty("deltaTime",this._time))},t.prototype.play=function(e,t){var o=this;if(void 0===e&&(e=null),void 0===t&&(t=!1),e){var n=this.node.getComponent(cc.Sprite);this._mat=n.setMaterial(0,e)}this._play=!0,this._time=0,this.linked_PS&&(this.linked_PS.node.active=!1,this.scheduleOnce(function(){o.linked_PS.node.active=!0,o.linked_PS.resetSystem()},.5))},t.prototype.stop=function(){this._play=!1,this._time=0,this._mat&&this._mat.setProperty("deltaTime",this._time)},i([s],t.prototype,"loop",void 0),i([s(cc.ParticleSystem)],t.prototype,"linked_PS",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],HighlightedSection:[function(e,t,o){"use strict";cc._RF.push(t,"5c57bNNUshA/o5BK/eUgPbx","HighlightedSection");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./SectionBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./SectionBase":"SectionBase"}],ImprovedNetClient:[function(t,o,n){"use strict";cc._RF.push(o,"59b8fBZ5hxPtIqVvYN6hC2S","ImprovedNetClient");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../globals"),u=t("../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor"),p=t("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),d=t("../UserInfo"),f=t("../../NanoGameCore/Services/Platform/Platform"),h=t("../FakeNames"),g=t("../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface"),y=t("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),m=cc._decorator,_=m.ccclass,v=m.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNetworkErr=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.inst?cc.error("More than one NetClient!!"):(o.inst=this,o.GAME_UPDATE_TIME_MS=200,e.prototype.onLoad.call(this))},t.prototype.onOpen=function(){var e=this;this.setOnDisconnectedListener(function(t){return c(e,void 0,void 0,function(){return s(this,function(){switch(t){case g.DisconnectReason.Server:y.default.showNetworkDisconnect();break;case g.DisconnectReason.ForcedByClient:console.log("force by client")}return[2]})})})},t.prototype.onError=function(){return c(this,void 0,void 0,function(){return s(this,function(){return l.default.Game.inst&&l.default.Game.inst.pause(!0),[2]})})},t.prototype.onClose=function(){return c(this,void 0,void 0,function(){return s(this,function(){return l.default.Game.inst&&l.default.Game.inst.pause(!0),[2]})})},t.prototype.onMessageFromServer=function(){},t.prototype.onServerRoomInit=function(){this.schedule(this.sendLocalPlayerGameState,u.NgcNetClientRefactor.GAME_UPDATE_TIME_MS/1e3)},t.prototype.onServerOrderCreateBot=function(){h.default.inst.allocRandomPerson()},t.prototype.onServerFullGameState=function(){f.NgcPlatform.isOfflineMode()},t.prototype.onServerGameStartingStatus=function(){f.NgcPlatform.isOfflineMode()},t.prototype.joinGame=function(){var e=l.default.Main.inst.localUserName;e&&""!=e||(e=l.default.Main.inst.createFakeName());var t=e+"|"+(null==p.NgcCountryFlagsManager.localCountry?"us":p.NgcCountryFlagsManager.localCountry),o=d.UserInfo.curSkin;this.sendJoinGameMessage("rwr_gameroom",{name:t,skin:o},{})},t.prototype.sendLocalPlayerGameState=function(){if(this.isConnected()){var e=l.default.PlayerController.inst.getAllLocallyControlledPlayers(),t=[];e.forEach(function(e){var o=e.getCurStateData();t.push(o)})}},t.prototype._onPreExitGame=function(){console.log("** EXITING GAME *** "),this.stopGameMode()},t.prototype.stopGameMode=function(){this.unschedule(this.sendLocalPlayerGameState)},t.inst=null,a([v(cc.SpriteFrame)],t.prototype,"iconNetworkErr",void 0),o=a([_],t)}(u.NgcNetClientRefactor);n.default=S,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface":"NetworkInterface","../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../NanoGameCore/Services/Platform/Platform":"Platform","../../globals":"globals","../FakeNames":"FakeNames","../UserInfo":"UserInfo"}],Input:[function(e,t,o){"use strict";cc._RF.push(t,"560d0U5KOlJNoo9wP8PALpv","Input");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),c=e("./Main"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){},t.prototype.tapUp=function(e){var t=c.Main.inst.getLocalPlayer();t&&t.tapUp(e)},t.prototype.tapDown=function(e){var t=c.Main.inst.getLocalPlayer(),o=this.node.convertToNodeSpaceAR(cc.v2(e.getLocationX(),e.getLocationY())).x<0;t&&t.tapDown(e,o),a.default.inst.onPlayerInput()},t.prototype.tapMove=function(e){var t=c.Main.inst.getLocalPlayer();t&&t.tapMove(e)},t.prototype.tapCancel=function(e){var t=c.Main.inst.getLocalPlayer();t&&t.tapMove(e)},t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.tapDown(e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.tapUp(e)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){this.tapMove(e)},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){this.tapCancel(e)},this)},i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","./Main":"Main"}],InsufficientDialog:[function(e,t,o){"use strict";cc._RF.push(t,"857356Khi5MKJgrjoSuDM8F","InsufficientDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),c=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return r(t,e),t.prototype.init=function(e){this.label.string=e},t.prototype.OkOnClick=function(){},t.prototype.show=function(){var t=this;e.prototype.show.call(this),this.node.opacity=255,this.scheduleOnce(function(){cc.tween(t.node).to(.5,{opacity:0}).call(function(){t.hide()}).start()},.5)},t.urlPrefab="Prefabs/Dialogs/InsufficientDialog",t.bundleName="",t.dialogType="InsufficientDialog",i([u(c.NgcLabelLocalized)],t.prototype,"label",void 0),i([l],t)}(a.NgcDialogBase);o.default=p,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],InteractionButtonAsset:[function(e,t,o){"use strict";cc._RF.push(t,"88cd9BbMlpPMpk6KR5mg947","InteractionButtonAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionButtonAsset=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundDefault=null,t.backgroundDisable=null,t.backgroundAds=null,t}return r(t,e),i([s(cc.SpriteFrame)],t.prototype,"backgroundDefault",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundDisable",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundAds",void 0),i([c],t)}(cc.Component);o.NgcInteractionButtonAsset=l,cc._RF.pop()},{}],InteractionButton:[function(e,t,o){"use strict";cc._RF.push(t,"5a647qrmBlKJJ8sU2sq2U/h","InteractionButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionButton=void 0;var a=e("../../../Core/ResizableComponent"),c=e("../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../GameFramework/Scripts/NgcShopManager"),l=e("./AssetComponent/InteractionButtonAsset"),u=e("./IteractionContent/InteractionContent"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.adsFlashAnimation=null,t.contentListNode=null,t._interactionButtonAsset=null,t._button=null,t._item=null,t._contentList=[],t._currentContent=null,t._showHideAnimQueue=[],t._isPlayingAnim=!1,t}return r(t,e),t.prototype.onLoad=function(){this._interactionButtonAsset=this.node.getComponent(l.NgcInteractionButtonAsset),this._button=this.node.getComponent(cc.Button),this.initContentList()},t.prototype.initContentList=function(){var e=this;this.contentListNode.children.forEach(function(t){t.active=!1,e._contentList.push(t.getComponent(u.NgcInteractionContent))}),this._contentList.sort(function(e,t){return e.getType()-t.getType()})},Object.defineProperty(t.prototype,"Visible",{set:function(e){this._showHideAnimQueue.push(e),this.checkAnimationQueue()},enumerable:!1,configurable:!0}),t.prototype.resize=function(){a.ResizableComponent.resizeNodeByHeight(this.node,.7*this.node.parent.height)},t.prototype.updateItemInfo=function(e){this._item=e||this._item,this._item&&(this.updateContent(this._item),this.determineBackground(this._item.itemStatusType),this._button.interactable=this._currentContent.Interactive,this.resize())},t.prototype.updateContent=function(e){this._currentContent&&(this._currentContent.node.active=!1);var t=this._contentList[e.itemStatusType];t.updateInfo(e),t.node.active=!0,this._currentContent=t},t.prototype.determineBackground=function(e){if(e===c.NgcItemStatusType.WatchAds)return this.background.spriteFrame=this._interactionButtonAsset.backgroundAds,void(this.EnableAdsFlash=!0);this.background.spriteFrame=this._currentContent.Interactive?this._interactionButtonAsset.backgroundDefault:null,this.EnableAdsFlash=!1},t.prototype.checkAnimationQueue=function(){!this._isPlayingAnim&&this._showHideAnimQueue.length>0&&(this._showHideAnimQueue.shift()?this.playShowAnimation():this.playHideAnimation())},t.prototype.playHideAnimation=function(){var e=this;this._isPlayingAnim=!0;var t=this.node.parent;cc.tween(t).to(.15,{y:-t.height},{easing:"backOut"}).call(function(){e._isPlayingAnim=!1,e.checkAnimationQueue()}).start()},t.prototype.playShowAnimation=function(){var e=this;this.node.parent.opacity=255,this._isPlayingAnim=!0;var t=this.node.parent;cc.tween(t).to(.15,{y:0},{easing:"backOut"}).call(function(){e._isPlayingAnim=!1,e.checkAnimationQueue()}).start()},Object.defineProperty(t.prototype,"EnableAdsFlash",{set:function(e){this.adsFlashAnimation.node.active=e,e?this.adsFlashAnimation.play():this.adsFlashAnimation.stop()},enumerable:!1,configurable:!0}),t.prototype.buyItem=function(){s.NgcShopManager.getInstance().buyItem(this._item)},t.prototype.watchAds=function(){s.NgcShopManager.getInstance().watchAds(this._item)},t.prototype.equipItem=function(){s.NgcShopManager.getInstance().equipItem(this._item.itemID)},t.prototype.onClicked=function(){switch(this._item.itemStatusType){case c.NgcItemStatusType.Currency:case c.NgcItemStatusType.Bundle:case c.NgcItemStatusType.Achievement:this.buyItem();break;case c.NgcItemStatusType.WatchAds:this.watchAds();break;case c.NgcItemStatusType.Unlock:this.equipItem()}},i([f(cc.Sprite)],t.prototype,"background",void 0),i([f(cc.Animation)],t.prototype,"adsFlashAnimation",void 0),i([f(cc.Node)],t.prototype,"contentListNode",void 0),i([d],t)}(cc.Component);o.NgcInteractionButton=h,cc._RF.pop()},{"../../../Core/ResizableComponent":"ResizableComponent","../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./AssetComponent/InteractionButtonAsset":"InteractionButtonAsset","./IteractionContent/InteractionContent":"InteractionContent"}],InteractionContentBundle:[function(e,t,o){"use strict";cc._RF.push(t,"8daa2HoYftJ7LckwISt4hRy","InteractionContentBundle");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentBundle=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../../GameFramework/Scripts/NgcShopManager"),s=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t.coinIcon=null,t.startIcon=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Bundle},t.prototype.updateInfo=function(e){this.price.string=e.price.value.toString();var t=this.isEnable(e);this.price.node.opacity=t?255:100,this.coinIcon.active="coin"===e.price.currency,this.startIcon.active="star"===e.price.currency,this._interactive=t},t.prototype.isEnable=function(e){return c.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)>=e.price.value},i([p(cc.Label)],t.prototype,"price",void 0),i([p(cc.Node)],t.prototype,"coinIcon",void 0),i([p(cc.Node)],t.prototype,"startIcon",void 0),i([u],t)}(s.NgcInteractionContent);o.NgcInteractionContentBundle=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./InteractionContent":"InteractionContent"}],InteractionContentEquipped:[function(e,t,o){"use strict";cc._RF.push(t,"8b7191mfeBKZIiOtdD06dyX","InteractionContentEquipped");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentEquipped=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.Equipped},t.prototype.updateInfo=function(){this.title.node.color=new cc.Color(0,0,0),this._interactive=!1},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcInteractionContent);o.NgcInteractionContentEquipped=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"88d61oIeV5JqJ+Vp28OjOVT","InteractionContentPurchaseAchievement");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseAchievement=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../../Services/Inventory/Inventory"),u=e("./InteractionContent"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.Achievement},t.prototype.updateInfo=function(e){var t=this;l.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){if(!o&&n){var r=e.price.value,i=n.count<r?n.count:r;r==i?(c.NgcLocalizedManager.setTextKey(t.title,"ITS_BUTTON_CLAIM"),t._interactive=!0):(t.title.string=i+"/"+r+" m",t._interactive=!1)}})},i([f(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([d],t)}(u.NgcInteractionContent);o.NgcInteractionContentPurchaseAchievement=h,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../Services/Inventory/Inventory":"Inventory","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseComingSoon:[function(e,t,o){"use strict";cc._RF.push(t,"4c1bcNoO6dMgJqp5RzRfOJi","InteractionContentPurchaseComingSoon");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseComingSoon=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.ComingSoon},t.prototype.updateInfo=function(){this._interactive=!1},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseComingSoon=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseCrownRoad:[function(e,t,o){"use strict";cc._RF.push(t,"d3589eTYmJIYYKZnTUTSGxP","InteractionContentPurchaseCrownRoad");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseCrownRoad=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.CrownRoad},t.prototype.updateInfo=function(){this._interactive=!1},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseCrownRoad=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseCurrency:[function(e,t,o){"use strict";cc._RF.push(t,"40d67q9LGhKUJaG0YrrtSCL","InteractionContentPurchaseCurrency");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseCurrency=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../../GameFramework/Scripts/NgcShopManager"),s=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t.coinIcon=null,t.startIcon=null,t.buyLBNode=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Currency},t.prototype.updateInfo=function(e){this.price.string=e.price.value.toString();var t=c.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)>=e.price.value;this.coinIcon.active="coin"===e.price.currency,this.startIcon.active="star"===e.price.currency,console.log("debug enoughToBuy",t);var o=t?255:100,n=t?new cc.Color(255,255,255):new cc.Color(0,0,0);this.buyLBNode.opacity=o,this.price.node.opacity=o,this.price.node.color=n,this.buyLBNode.color=n,this._interactive=t},i([p(cc.Label)],t.prototype,"price",void 0),i([p(cc.Node)],t.prototype,"coinIcon",void 0),i([p(cc.Node)],t.prototype,"startIcon",void 0),i([p(cc.Node)],t.prototype,"buyLBNode",void 0),i([u],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseCurrency=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseDailyReward:[function(e,t,o){"use strict";cc._RF.push(t,"4a4f3UOmAdJNYYWxvuqlIdT","InteractionContentPurchaseDailyReward");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseDailyReward=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.DailyReward},t.prototype.updateInfo=function(){this._interactive=!1},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseDailyReward=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseIAP:[function(e,t,o){"use strict";cc._RF.push(t,"67c0a57SBFNbrHiRCWnHMlE","InteractionContentPurchaseIAP");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseIAP=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.IAP},t.prototype.updateInfo=function(){this.price.string="200$"},i([u(cc.Label)],t.prototype,"price",void 0),i([l],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseIAP=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseLoginSocial:[function(e,t,o){"use strict";cc._RF.push(t,"9a2d5aGXB1LIaDOm9BqzjWy","InteractionContentPurchaseLoginSocial");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseLoginSocial=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.LikeSocial},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseLoginSocial=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseSpecialOffer:[function(e,t,o){"use strict";cc._RF.push(t,"93ccdkXUXlKf6J6F6DsI40q","InteractionContentPurchaseSpecialOffer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseSpecialOffer=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.SpecialOffer},t.prototype.updateInfo=function(){this._interactive=!1},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseSpecialOffer=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseWatchAds:[function(e,t,o){"use strict";cc._RF.push(t,"e3130ZG9pRMJoiNaioLQuDy","InteractionContentPurchaseWatchAds");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseWatchAds=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.steps=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.WatchAds},t.prototype.updateInfo=function(){},i([u(cc.Label)],t.prototype,"steps",void 0),i([l],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseWatchAds=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentUnlock:[function(e,t,o){"use strict";cc._RF.push(t,"8b10eZATGNAkYSAk/lQLQol","InteractionContentUnlock");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentUnlock=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Unlock},t.prototype.updateInfo=function(){},i([l],t)}(c.NgcInteractionContent));o.NgcInteractionContentUnlock=u,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContent:[function(e,t,o){"use strict";cc._RF.push(t,"c3854EqAgBFBKH7l5drKr/0","InteractionContent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContent=void 0;var a=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._interactive=!0,t}return r(t,e),Object.defineProperty(t.prototype,"Interactive",{get:function(){return this._interactive},enumerable:!1,configurable:!0}),i([a],t)}(cc.Component);o.NgcInteractionContent=c,cc._RF.pop()},{}],Inventory_impl_NanoSrv:[function(t,o,n){"use strict";cc._RF.push(o,"9557bLlAZxENZWGkaMObAx3","Inventory_impl_NanoSrv");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../Core/Utils"),u=t("../../GameFramework/Scripts/BuildConfig"),p=t("../../SDK/Nano/NanoSrv"),d=t("./Inventory"),f=t("../Platform/Platform"),h=t("../../GameFramework/Scripts/NgcUserInfo"),g=t("../../CrossFeatures/OfflineMode/OfflineMode"),y=cc._decorator,m=y.ccclass,_=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ITEM_TABLE_PATH="Text/itemTable.csv",t.needToRefetch=!0,t}return i(t,e),t.prototype.onLogin=function(e){var t=this,o=this;if(u.NgcBuildConfig.offlineMode)l.LoadAsset("offline:text/item-table").then(function(o){t.initTypeTableFromCSV(o.text),t._fetchInventory(function(){e(null,"OK")})});else{var n=p.default.inst.getCurGameInfo().itemTableURL;l.Utils.getHttp(n,null,function(t,r){t?e("Failed to get inventory table from url "+n,null):o.initTypeTableFromCSV(r)?o._fetchInventory(function(t){t?e(t,null):e(null,"OK")}):e("Error parsing inventory table",null)})}},t.prototype._preInit=function(){return new Promise(function(e){e("Inventory_impl_Nanosrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("Inventory_impl_Nanosrv initialized")})},t.prototype.keymangle=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},t.prototype._fetchInventory=function(e){var t=this;f.NgcPlatform.isOfflineMode()?(this.needToRefetch=!1,this.ownedItems=g.OfflineMode.GetInventory(),e(null,this.ownedItems)):p.default.inst.serviceGet("/player/getinventory",null,function(o,n){o?e(o,null):(t.ownedItems=JSON.parse(n).data,t.needToRefetch=!1,e(null,t.ownedItems))})},t.prototype.getItemCountFromLocalData=function(e){var t;return(null===(t=this.ownedItems)||void 0===t?void 0:t.hasOwnProperty(e))?this.ownedItems[e]:{itemID:e,count:0}},t.prototype._getItemCount=function(e,t){var o=this;this.needToRefetch?this._fetchInventory(function(n){n?t(n,null):t(null,o.getItemCountFromLocalData(e))}):t(null,this.getItemCountFromLocalData(e))},t.prototype._addItem=function(e,t,o){if(f.NgcPlatform.isOfflineMode()){g.OfflineMode.UpdateItem(e,t),this.ownedItems=g.OfflineMode.GetInventory();var n={data:this.ownedItems};this.needToRefetch=!1,o(null,JSON.stringify(n))}else{var r={itemList:[{itemID:e,count:t}]},i=JSON.stringify(r),a=this;p.default.inst.servicePost("/player/addInventory",i,function(e,t){e?o(e,null):(a.ownedItems=JSON.parse(t).data,a.needToRefetch=!1,o(null,t))})}},t.prototype._localGetItemCount=function(e){return this.ownedItems.hasOwnProperty(e)?this.ownedItems[e].count:(console.warn("Item does not exist: "+e),0)},t.prototype._addItemList=function(e,t){if(f.NgcPlatform.isOfflineMode())r=this,e.forEach(function(e){r._addItem(e.itemID,e.count,function(e,o){e?t(e,null):(r.needToRefetch=!1,t(null,o))})});else{var o={itemList:e},n=JSON.stringify(o),r=this;p.default.inst.servicePost("/player/addInventory",n,function(e,o){e?t(e,null):(r.ownedItems=JSON.parse(o).data,r.needToRefetch=!1,t(null,o))})}},t.prototype._consumeItem=function(e,t,o){this._addItem(e,-t,o)},t.prototype._readInventoryFromStorage=function(e){if(!f.NgcPlatform.isOfflineMode())throw new Error("Method not implemented.");var t=h.default.offlineInventory;this.ownedItems=t||{},e(null,this.ownedItems)},t.prototype._writeInventoryToStorage=function(e){if(!f.NgcPlatform.isOfflineMode())throw new Error("Method not implemented.");h.default.offlineInventory=this.ownedItems,e(null,this.ownedItems)},t.prototype._forceFetchInventory=function(e){return c(this,void 0,void 0,function(){var t=this;return s(this,function(o){switch(o.label){case 0:return[4,new Promise(function(o){t._fetchInventory(function(t,n){o(),e&&e(t,n)})})];case 1:return o.sent(),[2]}})})},t.prototype.start=function(){},a([m],t)}(d.NgcInventory));n.default=_,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../SDK/Nano/NanoSrv":"NanoSrv","../Platform/Platform":"Platform","./Inventory":"Inventory"}],Inventory:[function(t,o,n){"use strict";cc._RF.push(o,"b2b56qAhd5Iv5lI3YPXg199","Inventory");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcInventory=n.InventoryCurrencyType=n.InventoryItemType=void 0;var l=t("../../Core/nCSV"),u=t("../Service"),p=cc._decorator,d=p.ccclass;p.property,function(e){e[e.Currency=0]="Currency",e[e.Consumable=1]="Consumable",e[e.Equipable=2]="Equipable"}(n.InventoryItemType||(n.InventoryItemType={})),function(e){e[e.soft_currency=0]="soft_currency",e[e.ads_currency=1]="ads_currency",e[e.achievement_currency=2]="achievement_currency",e[e.like_social_currency=3]="like_social_currency",e[e.iap_currency=4]="iap_currency",e[e.daily_login_currency=5]="daily_login_currency",e[e.crown_road_currency=6]="crown_road_currency",e[e.coming_soon_currency=7]="coming_soon_currency"}(n.InventoryCurrencyType||(n.InventoryCurrencyType={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.objectTypeTable={},t.ownedItems={},t}return i(t,e),t.prototype.getName=function(){return"NgcInventory"},t.prototype.isValidItemID=function(e){return this.objectTypeTable.hasOwnProperty(e)},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.getItemCount=function(e,t){this._getItemCount(e,t)},t.prototype.addItem=function(e,t,o){return this._addItem(e,t,function(e,t){o(e,t)})},t.prototype.addItemList=function(e,t){return this._addItemList(e,function(e,o){t(e,o)})},t.prototype.consumeItem=function(e,t,o){this._consumeItem(e,t,function(e,t){o(e,t)})},t.prototype.readInventoryFromStorage=function(e){this._readInventoryFromStorage(function(t,o){e(t,o)})},t.prototype.forceFetchInventory=function(e){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this._forceFetchInventory(e)];case 1:return t.sent(),[2]}})})},t.prototype.writeInventoryToStorage=function(e){this._writeInventoryToStorage(function(t,o){e(t,o)})},t.prototype.initTypeTableFromCSV=function(e){var t=l.nCSV.parseTable(e);if(!t)return!1;var o=this;return this.objectTypeTable={},t.forEach(function(e){var t=e.itemID;o.objectTypeTable.hasOwnProperty(t)?console.warn("Duplicate object ID: "+t):o.objectTypeTable[t]=e}),!0},t.prototype.start=function(){},t.srvInstances=[],t.inst=null,a([d],t)}(u.NgcService);n.NgcInventory=f,cc._RF.pop()},{"../../Core/nCSV":"nCSV","../Service":"Service"}],ItemCategory:[function(e,t,o){"use strict";cc._RF.push(t,"37ec4Hh559EzYbrYbfTROs3","ItemCategory");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemCategory=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cateName=null,t}return r(t,e),t.prototype.updateNameByKey=function(e){this.cateName.setLocalizedText(e)},i([l(a.NgcLabelLocalized)],t.prototype,"cateName",void 0),i([s],t)}(cc.Component);o.ItemCategory=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],ItemContainer:[function(e,t,o){"use strict";cc._RF.push(t,"76051ZLlU1L36MNK1lN1mpc","ItemContainer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemContainer=void 0;var a,c=e("../../../Core/ResizableComponent"),s=e("../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../GameFramework/Scripts/NgcShopManager"),u=e("./InteractionButton"),p=e("./ItemCategory"),d=e("./ItemPool"),f=e("./ItemShop/Bundle"),h=e("./ItemShop/ItemShop"),g=e("./ItemShop/SingleItem"),y=e("./ItemTab"),m=cc._decorator,_=m.ccclass,v=m.property;(function(e){e[e.None=0]="None",e[e.GenerateUpcomingItemInfo=1]="GenerateUpcomingItemInfo",e[e.AddItem=2]="AddItem",e[e.RemoveOldItem=3]="RemoveOldItem",e[e.AddSpaceNode=4]="AddSpaceNode",e[e.End=5]="End"})(a||(a={}));var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabContainerWidget=null,t.tabContent=null,t.container=null,t.scrollView=null,t.loadingOverlay=null,t.loadingIcon=null,t.content=null,t.interactionButtonContainer=null,t.interactionButtonPrefab=null,t.itemTabPrefab=null,t.singleItemPrefab=[],t.bundlePrefab=null,t.purchaseMethodPrefab=[],t.category=null,t.leftArrow=null,t.rightArrow=null,t.leftLimit=null,t.rightLimit=null,t._itemStructure=null,t._selectedTabNameKey="",t._tabList=[],t._selectedBundleIdInTab={},t._selectedItem=null,t._displayingItemShop=[],t._upcomingItemInfoOfNewTab=[],t._currentFindItemID=0,t._updateTabContentState=a.None,t._interactionButton=null,t._numberOfItemInRow=4,t._tabScrollView=null,t}return r(t,e),t.prototype.onLoad=function(){(new d.NgcItemPool).init(this.singleItemPrefab,this.bundlePrefab,this.purchaseMethodPrefab,this.category),this.tabContainerWidget.left=this.tabContainerWidget.right=0,cc.view.on("canvas-resize",this.resize.bind(this)),this.interactionButtonContainer.opacity=0,this.leftArrow.opacity=0,this.rightArrow.opacity=0,this.leftArrow.getComponent(cc.Button).interactable=!1,this.rightArrow.getComponent(cc.Button).interactable=!1,cc.sys.isMobile?(this.leftArrow.active=!1,this.rightArrow.active=!1):(this.leftLimit.active=!0,this.rightLimit.active=!0),this._tabScrollView=this.tabContainerWidget.getComponent(cc.ScrollView)},t.prototype.update=function(){switch(this._updateTabContentState){case a.None:break;case a.GenerateUpcomingItemInfo:this.setUpNewTabContent();break;case a.RemoveOldItem:this.removeItemOfOldTab();break;case a.AddItem:this.addItem();break;case a.AddSpaceNode:this.addSpaceNode();break;case a.End:this.endUpdateTab()}},t.prototype.init=function(e){this._itemStructure=e,this.initInteractionButton(),this.initTabScroll(),this.resize()},t.prototype.updateItemStructure=function(e){this._itemStructure=e,e.tabs.length<this._tabList.length?(this.initTabScroll(),this.resize()):this.updateItemInSelectedTab()},Object.defineProperty(t.prototype,"ContentWidth",{get:function(){return this.container.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ContentHeight",{get:function(){return this.container.height-this.interactionButtonContainer.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsLoading",{set:function(e){this.loadingOverlay.active=e,this.scrollView.opacity=e?0:255,this.scrollView.getComponent(cc.ScrollView).verticalScrollBar.node.active=!e,e?this.loadingIcon.play():this.loadingIcon.stop()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SelectedTab",{get:function(){return this._selectedTabNameKey},set:function(e){var t=this.getTabByNameKey(this._selectedTabNameKey);t&&(t.Selected=!1);var o=this.getTabByNameKey(e);o||(o=this._tabList[0],e=this._tabList[0].TabNameKey),o.Selected=!0,this._selectedTabNameKey=e,this.updateItemInSelectedTab(),this.scrollToTab(this._tabList.indexOf(o))},enumerable:!1,configurable:!0}),t.prototype.reselectCurrentTab=function(){this.SelectedTab=this._selectedTabNameKey},Object.defineProperty(t.prototype,"SelectedItem",{get:function(){return this._selectedItem},set:function(e){this._selectedItem&&(this._selectedItem.Selected=!1,this._interactionButton.Visible=!1),this._selectedItem=e,this._selectedItem&&(this._selectedItem.Selected=!0,this._interactionButton.updateItemInfo(e.ItemInfo),this._interactionButton.Visible=!0,this._selectedBundleIdInTab[this._selectedTabNameKey]=this.SelectedItem.ItemInfo.bundleID,e instanceof g.SingleItem&&l.NgcShopManager.getInstance().previewItem(e.ItemInfo.itemID))},enumerable:!1,configurable:!0}),t.prototype.getTabByNameKey=function(e){return this._tabList.find(function(t){return t.TabNameKey===e})},t.prototype.getTabInfoByNameKey=function(e){return this._itemStructure.tabs.find(function(t){return t.tabNameKey===e})},t.prototype.determineSelectedItemInNewTab=function(){for(var e=this._displayingItemShop[0],t=0;t<this._displayingItemShop.length;t++){var o=this._displayingItemShop[t];if(o.ItemInfo.itemStatusType===s.NgcItemStatusType.Equipped&&(e=o),o.ItemInfo.bundleID===this._selectedBundleIdInTab[this._selectedTabNameKey]){e=o;break}}return e},t.prototype.setNumberOfItemInRow=function(e){this._numberOfItemInRow=e,this.resize()},t.prototype.onTabClicked=function(e){this.SelectedTab=e},t.prototype.onItemClick=function(e){this.SelectedItem=e},t.prototype.onArrowButtonClick=function(e,t){var o=this._tabList.indexOf(this.getTabByNameKey(this.SelectedTab));switch(t){case"right":o=o===this._tabList.length-1?0:o+1,this.SelectedTab=this._tabList[o].TabNameKey;break;case"left":o=0===o?this._tabList.length-1:o-1,this.SelectedTab=this._tabList[o].TabNameKey}this.scrollToTab(o,.1)},t.prototype.canScrollTab=function(){return this._itemStructure.tabs.length>=4},t.prototype.scrollToTab=function(e,t){if(void 0===t&&(t=.25),e===this._tabList.length-1?this.rightArrow.getComponent(cc.Button).interactable&&(this.rightArrow.getComponent(cc.Button).interactable=!1,cc.tween(this.rightArrow).to(t,{opacity:0}).start()):0==this.rightArrow.getComponent(cc.Button).interactable&&(this.rightArrow.getComponent(cc.Button).interactable=!0,cc.tween(this.rightArrow).to(t,{opacity:255}).start()),0===e?this.leftArrow.getComponent(cc.Button).interactable&&(this.leftArrow.getComponent(cc.Button).interactable=!1,cc.tween(this.leftArrow).to(t,{opacity:0}).start()):0==this.leftArrow.getComponent(cc.Button).interactable&&(this.leftArrow.getComponent(cc.Button).interactable=!0,cc.tween(this.leftArrow).to(t,{opacity:255}).start()),this.canScrollTab()){var o=this._tabList[e].node;this._tabScrollView.scrollTo(cc.v2(o.x,o.y),t)}},t.prototype.refresh=function(){this.refeshDisplayingItems(),this.refreshTab()},t.prototype.refeshDisplayingItems=function(){this._displayingItemShop.forEach(function(e){e.updateInfo()}),this.resizeItemContainer(),this._interactionButton.updateItemInfo()},t.prototype.refreshTab=function(){for(var e=0;e<this._tabList.length;e++)this._tabList[e].HasBrandNewItem=this._itemStructure.tabs[e].hasBrandNewItem},t.prototype.initInteractionButton=function(){if(!this._interactionButton){var e=cc.instantiate(this.interactionButtonPrefab);this.interactionButtonContainer.addChild(e),this._interactionButton=e.getComponent(u.NgcInteractionButton)}},t.prototype.initTabScroll=function(){var e=this;this.tabContent.children.length>0&&(this._tabList=[],this.tabContent.children.forEach(function(e){return e.destroy()})),this._itemStructure.tabs.length<4&&(this.leftArrow.active=!1,this.rightArrow.active=!1),this._itemStructure.tabs.forEach(function(t,o){var n=cc.instantiate(e.itemTabPrefab);e.tabContent.addChild(n);var r=n.getComponent(y.NgcItemTab);r.init(t.tabNameKey,o,t.hasBrandNewItem,e),e._tabList.push(r)}),this.SelectedTab=this._selectedTabNameKey,this._interactionButton.Visible=!1},t.prototype.updateItemInSelectedTab=function(){this._updateTabContentState=a.GenerateUpcomingItemInfo},t.prototype.setUpNewTabContent=function(){var e=this;this.IsLoading=!0,this.SelectedItem=null;var t=this.getTabInfoByNameKey(this._selectedTabNameKey);this._upcomingItemInfoOfNewTab=[],t.categories.forEach(function(t){e._upcomingItemInfoOfNewTab.push(t),t.items.forEach(function(t){return e._upcomingItemInfoOfNewTab.push(t)})}),this._currentFindItemID=0,this._displayingItemShop=[],this._updateTabContentState=a.RemoveOldItem},t.prototype.removeItemOfOldTab=function(){this.content.children.forEach(function(e){return d.NgcItemPool.inst.putShopItem(e)});var e=this.content.children.pop();e&&e.destroy(),this.content.removeAllChildren(),this._updateTabContentState=a.AddItem},t.prototype.addItem=function(){if(this._upcomingItemInfoOfNewTab[this._currentFindItemID]instanceof l.NgcItemCategoryInfo){var e=this._upcomingItemInfoOfNewTab[this._currentFindItemID];if(e.shouldDisplay){var t=d.NgcItemPool.inst.getShopItem(p.ItemCategory);this.pushUINode(t),t.getComponent(p.ItemCategory).updateNameByKey(e.cateNameKey)}}else if(this._upcomingItemInfoOfNewTab[this._currentFindItemID]instanceof s.NgcItemInfo){var o=this._upcomingItemInfoOfNewTab[this._currentFindItemID],n=d.NgcItemPool.inst.getShopItem(o.isBundle?f.Bundle:g.SingleItem,o.displayType);this.pushUINode(n);var r=n.getComponent(h.ItemShop);r.Interactable=!0,r.updateInfo(o),r.setItemContainer(this),this._displayingItemShop.push(r)}this._currentFindItemID++,this._currentFindItemID==this._upcomingItemInfoOfNewTab.length&&(this._updateTabContentState=a.AddSpaceNode)},t.prototype.pushUINode=function(e){this.content.addChild(e),c.ResizableComponent.getResizableComponent(e)},t.prototype.addSpaceNode=function(){var e=new cc.Node;e.width=this.container.width,e.height=.15*this.container.height,this.pushUINode(e),this._updateTabContentState=a.End},t.prototype.endUpdateTab=function(){this.resizeItemContainer(),this.IsLoading=!1,this.SelectedItem=this.determineSelectedItemInNewTab(),this._updateTabContentState=a.None},t.prototype.resizeTabContainer=function(){if(0!=this.tabContent.children.length){var e=this.tabContent.getComponent(cc.Widget),t=this.tabContent.getComponent(cc.Layout),o=this._itemStructure.tabs.length;this.tabContent.children[0].width*o+t.spacingX*(o-1)<=this.ContentWidth-0?(e.isAlignHorizontalCenter=!0,e.isAlignLeft=!1,this.leftLimit.active=!1,this.rightLimit.active=!1):(e.isAlignHorizontalCenter=!1,e.isAlignLeft=!0,e.left=0,this.tabContainerWidget.getComponent(cc.ScrollView).scrollToLeft(.1)),this.leftLimit.x=this.tabContainerWidget.node.x-this.tabContainerWidget.node.width/2,this.rightLimit.x=this.tabContainerWidget.node.x+this.tabContainerWidget.node.width/2,e.updateAlignment()}},t.prototype.onTabSlide=function(){},t.prototype.lateUpdate=function(){this.checkForLimitVisibility()},t.prototype.checkForLimitVisibility=function(){var e=this._tabScrollView.getScrollOffset(),t=this._tabScrollView.getMaxScrollOffset();this.leftLimit.opacity=Math.round(e.x)<0?255:0,this.rightLimit.opacity=Math.round(-e.x)<t.x-0?255:0},t.prototype.resizeItemContainer=function(){var e=this.ContentWidth,t=this.content.getComponent(cc.Layout),o=e-t.paddingLeft-t.paddingRight,n=(e-t.paddingLeft-t.paddingRight-(this._numberOfItemInRow-1)*t.spacingX)/this._numberOfItemInRow;this.content.children.forEach(function(r){var i=r.getComponent(g.SingleItem),a=r.getComponent(f.Bundle);i?i.resizeBaseOnWidth(n):a?a.resize(e-t.paddingLeft-t.paddingRight):r.width=o})},t.prototype.resizeInteractionButton=function(){this._interactionButton&&this._interactionButton.resize()},t.prototype.resizeContent=function(){this.resizeTabContainer(),this.resizeItemContainer()},t.prototype.resize=function(){var e=this;setTimeout(function(){e.resizeContent()},50)},i([v(cc.Widget)],t.prototype,"tabContainerWidget",void 0),i([v(cc.Node)],t.prototype,"tabContent",void 0),i([v(cc.Node)],t.prototype,"container",void 0),i([v(cc.Node)],t.prototype,"scrollView",void 0),i([v(cc.Node)],t.prototype,"loadingOverlay",void 0),i([v(cc.Animation)],t.prototype,"loadingIcon",void 0),i([v(cc.Node)],t.prototype,"content",void 0),i([v(cc.Node)],t.prototype,"interactionButtonContainer",void 0),i([v(cc.Prefab)],t.prototype,"interactionButtonPrefab",void 0),i([v(cc.Prefab)],t.prototype,"itemTabPrefab",void 0),i([v(cc.Prefab)],t.prototype,"singleItemPrefab",void 0),i([v(cc.Prefab)],t.prototype,"bundlePrefab",void 0),i([v(cc.Prefab)],t.prototype,"purchaseMethodPrefab",void 0),i([v(cc.Prefab)],t.prototype,"category",void 0),i([v(cc.Node)],t.prototype,"leftArrow",void 0),i([v(cc.Node)],t.prototype,"rightArrow",void 0),i([v(cc.Node)],t.prototype,"leftLimit",void 0),i([v(cc.Node)],t.prototype,"rightLimit",void 0),i([_],t)}(cc.Component);o.ItemContainer=S,cc._RF.pop()},{"../../../Core/ResizableComponent":"ResizableComponent","../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./InteractionButton":"InteractionButton","./ItemCategory":"ItemCategory","./ItemPool":"ItemPool","./ItemShop/Bundle":"Bundle","./ItemShop/ItemShop":"ItemShop","./ItemShop/SingleItem":"SingleItem","./ItemTab":"ItemTab"}],ItemLeaderBoard:[function(e,t,o){"use strict";cc._RF.push(t,"e0fcaRa+eVIlLT6AokgdfZG","ItemLeaderBoard");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Divide=void 0;var a,c=e("../../Utils/Util"),s=e("../../Player/PlayerController"),l=e("../../CarSelector/CarSkinSelecter"),u=e("../../Utils/ConstConfig"),p=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),d=cc._decorator,f=d.ccclass,h=d.property;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.ALL=2]="ALL"})(a=o.Divide||(o.Divide={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLb=null,t.rankLb=null,t.scoreLb=null,t.lableShadow=null,t.avatar=null,t.deadIcon=null,t.bgSf=[],t.bgSprite=null,t.dividdeUp=null,t.dividdeDown=null,t.flag=null,t.platformIcon=null,t.unknowAvatorFrame=null,t.knownBG=null,t.platformTexture=[],t._lap=0,t._checkPoint=0,t._distance=0,t._isKickedOut=!1,t._finishedRace=!1,t._totalTime=0,t._bestTime=0,t._farDistance=0,t._isLocalPlayer=!1,t.skinCycle=0,t.netID="",t.botOwnerNetID="",t._hasStopped=!1,t._lastPlatformIcon=-1,t.currentScore=0,t}return r(t,e),Object.defineProperty(t.prototype,"playername",{get:function(){return this._name},set:function(e){this.deadIcon||e.length>u.ConstConfig.MAX_LENGTH_NAME&&(e=e.substring(0,u.ConstConfig.MAX_LENGTH_NAME),e+="..."),this._name=e,this.nameLb.string=this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this._score},set:function(e){this._score=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rank",{get:function(){return this._rank},set:function(e){this._rank=e,this.rankLb&&(this.rankLb.string=this._rank+"")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skin",{get:function(){return this._skin},set:function(e){this._skin!=e&&(this._skin=e,this.avatar.spriteFrame=l.default.getSpriteFrameFromID(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLocalPlayer",{get:function(){return this._isLocalPlayer},set:function(e){this._isLocalPlayer!=e&&(this._isLocalPlayer=e,this.bgSprite.spriteFrame=e?this.bgSf[1]:this.bgSf[0])},enumerable:!1,configurable:!0}),t.prototype.start=function(){},t.prototype.setInfo=function(e,t){void 0===t&&(t=!1);var o=s.default.inst.findPlayerByNetID(e.netID);if(this.playername=o.getPlayerName(),this.botOwnerNetID=e.botOwnerNetID,this.rankLb&&(this.rank=e.rank,void 0===e.rank&&(this.rank=this.node.getSiblingIndex()+1)),this._totalTime=e.totalTime,this._lap=e.lap,this._checkPoint=e.Cpoint,this._farDistance=e.fardistance,this.platformIcon.spriteFrame){var n=o.isMobile;cc.sys.isMobile&&(n=!0);var r;(r=n?t?2:3:t?0:1)!=this._lastPlatformIcon&&(this._lastPlatformIcon=r,this.platformIcon.spriteFrame=this.platformTexture[this._lastPlatformIcon])}this.netID!=e.netID&&(this.skin=o.getCarSkin()),o&&(this.flag.spriteFrame=o.getCountryFlagFrame()),this.netID=e.netID,this.isLocalPlayer=t,this._isKickedOut=e.markedKicked,this._finishedRace=e.FRace,this._hasStopped=e.stop;var i=this._isKickedOut||this._hasStopped||o&&o.HasStopped();if(this.deadIcon&&(this.deadIcon.active=!1),t?(this.scoreLb.node.color=cc.Color.BLACK,this.nameLb.node.color=cc.Color.BLACK,this.rankLb&&(this.rankLb.node.color=cc.Color.BLACK)):(this.scoreLb.node.color=cc.Color.WHITE,this.nameLb.node.color=cc.Color.WHITE,this.rankLb&&(this.rankLb.node.color=cc.Color.WHITE)),this.scoreLb.node.active=i,this.flag.node.active=i,this.avatar.node.active=i,this.unknowAvatorFrame&&(this.unknowAvatorFrame.active=!i),this.knownBG&&(this.knownBG.active=i),!i){var a=cc.Color.BLACK;this.nameLb.string=p.NgcLocalizedManager.t("TMB_RACING_ALERT").text,this.nameLb.node.color=a.fromHEX("#BEBDBD")}},t.prototype.update=function(){this.currentScore!=this._totalTime&&(this.currentScore=cc.misc.lerp(this.currentScore,this._totalTime,.6),this.scoreLb.string=c.default.msToTime(this.currentScore))},t.prototype.enableRender=function(){this.bgSprite.node.opacity=255},t.prototype.disAbleRender=function(){this.bgSprite.node.opacity=0},t.prototype.enabletDivide=function(e){if(this.dividdeUp&&this.dividdeDown)switch(e){case a.ALL:this.dividdeUp.active=!0,this.dividdeDown.active=!0;break;case a.TOP:this.dividdeUp.active=!0,this.dividdeDown.active=!1;break;case a.BOTTOM:this.dividdeUp.active=!1,this.dividdeDown.active=!0}},i([h(cc.Label)],t.prototype,"nameLb",void 0),i([h(cc.Label)],t.prototype,"rankLb",void 0),i([h(cc.Label)],t.prototype,"scoreLb",void 0),i([h(cc.LabelShadow)],t.prototype,"lableShadow",void 0),i([h(cc.Sprite)],t.prototype,"avatar",void 0),i([h(cc.Node)],t.prototype,"deadIcon",void 0),i([h(cc.SpriteFrame)],t.prototype,"bgSf",void 0),i([h(cc.Sprite)],t.prototype,"bgSprite",void 0),i([h(cc.Node)],t.prototype,"dividdeUp",void 0),i([h(cc.Node)],t.prototype,"dividdeDown",void 0),i([h(cc.Sprite)],t.prototype,"flag",void 0),i([h(cc.Sprite)],t.prototype,"platformIcon",void 0),i([h(cc.Node)],t.prototype,"unknowAvatorFrame",void 0),i([h(cc.Node)],t.prototype,"knownBG",void 0),i([h({type:cc.SpriteFrame})],t.prototype,"platformTexture",void 0),i([f],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../CarSelector/CarSkinSelecter":"CarSkinSelecter","../../Player/PlayerController":"PlayerController","../../Utils/ConstConfig":"ConstConfig","../../Utils/Util":"Util"}],ItemPool:[function(e,t,o){"use strict";cc._RF.push(t,"28257Mw7ClODIcf6yaiRs7z","ItemPool"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemPool=void 0;var n=e("./ItemCategory"),r=e("./ItemShop/Bundle"),i=e("./ItemShop/SingleItem"),a=e("./ItemStatus/ItemStatus"),c=function(){function e(){this._singleItemPool={},this._purchaseMethodPool={},this._singleItemPrefab={},this._purchaseMethodPrefab={},this._singleItemDefaultType=null,e.inst=this}return e.prototype.init=function(e,t,o,n){var r=this;e.forEach(function(e){var t=cc.instantiate(e),o=t.getComponent(i.SingleItem).getDisplayType();r._singleItemPool[o]=new cc.NodePool,r._singleItemPool[o].put(t),r._singleItemPrefab[o]=e,null==r._singleItemDefaultType&&(r._singleItemDefaultType=o)}),this._bundlePrefab=t,this._bundlePool=new cc.NodePool,o.forEach(function(e){var t=cc.instantiate(e),o=t.getComponent(a.NgcItemStatus).getType().toString();r._purchaseMethodPool[o]=new cc.NodePool,r._purchaseMethodPool[o].put(t),r._purchaseMethodPrefab[o]=e}),this._catePrefab=n,this._catePool=new cc.NodePool},e.prototype.getSingleItem=function(e){this._singleItemPool[e]||(e=this._singleItemDefaultType);var t=this._singleItemPool[e].get();return t||(t=cc.instantiate(this._singleItemPrefab[e])),t},e.prototype.putSingleItem=function(e){var t=e.getComponent(i.SingleItem).getDisplayType();this._singleItemPool[t].put(e)},e.prototype.getBundle=function(){var e=this._bundlePool.get();return e||(e=cc.instantiate(this._bundlePrefab)),e},e.prototype.putBundle=function(e){this._bundlePool.put(e)},e.prototype.getItemStatus=function(e){var t=e.toString(),o=this._purchaseMethodPool[t].get();return o||(o=cc.instantiate(this._purchaseMethodPrefab[t])),o},e.prototype.putItemStatus=function(e){var t=e.getComponent(a.NgcItemStatus).getType();this._purchaseMethodPool[t].put(e)},e.prototype.getCate=function(){var e=this._catePool.get();return e||(e=cc.instantiate(this._catePrefab)),e},e.prototype.putCate=function(e){this._catePool.put(e)},e.prototype.putShopItem=function(e){e.getComponent(i.SingleItem)?this.putSingleItem(e):e.getComponent(r.Bundle)?this.putBundle(e):e.getComponent(n.ItemCategory)&&this.putCate(e)},e.prototype.getShopItem=function(e,t){switch(e){case i.SingleItem:return this.getSingleItem(t);case r.Bundle:return this.getBundle();case n.ItemCategory:return this.getCate()}},e.inst=null,e}();o.NgcItemPool=c,cc._RF.pop()},{"./ItemCategory":"ItemCategory","./ItemShop/Bundle":"Bundle","./ItemShop/SingleItem":"SingleItem","./ItemStatus/ItemStatus":"ItemStatus"}],ItemSelectLanguage:[function(e,t,o){"use strict";cc._RF.push(t,"8b87fyON8tIYaTUVf90nI+y","ItemSelectLanguage");var n,r,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemSelectLanguage=void 0,function(e){e[e.Hat=0]="Hat",e[e.Glasses=1]="Glasses",e[e.Dress=2]="Dress"}(r||(r={}));var c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameItem="",t.codeItem="",t.boder=null,t.Icon=null,t.languageLb=null,t.callBackFn=null,t}return i(t,e),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.boder.node.active=e},enumerable:!1,configurable:!0}),t.prototype.start=function(){},t.prototype.setInfo=function(e,t,o,n,r){var i=this;cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e||(i.Icon.spriteFrame=t)}),this.nameItem=t,this.languageLb.string=t,this.codeItem=o,this.isSelected=n,this.callBackFn=r},t.prototype.onClick=function(){this.isSelected||(this.isSelected=!0,this.callBackFn&&this.callBackFn(this.codeItem))},a([l],t.prototype,"nameItem",void 0),a([l],t.prototype,"codeItem",void 0),a([l(cc.Sprite)],t.prototype,"boder",void 0),a([l(cc.Sprite)],t.prototype,"Icon",void 0),a([l(cc.Label)],t.prototype,"languageLb",void 0),a([s],t)}(cc.Component);o.NgcItemSelectLanguage=u,cc._RF.pop()},{}],ItemShop:[function(e,t,o){"use strict";cc._RF.push(t,"95c2bsHVOhDWZFCRqCNAfnH","ItemShop");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemShop=void 0;var a=e("../../../../Core/ResizableComponent"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../GameFramework/Scripts/NgcShopManager"),l=e("../../../../Services/Telemetry/Telemetry"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._itemContainer=null,t._button=null,t._isSelected=!1,t._itemInfo=null,t}return r(t,e),t.prototype.onLoad=function(){this.setupButton()},t.prototype.setupButton=function(){this._button=this.addComponent(cc.Button),this._button.interactable=!0,this._button.transition=cc.Button.Transition.NONE;var e=new cc.Component.EventHandler;e.target=this.node,e.component="ItemShop",e.handler="onClicked",this._button.clickEvents.push(e)},t.prototype.updateInfo=function(e){e&&(this._itemInfo=e),this.childUpdateInfo()},t.prototype.setItemContainer=function(e){this._itemContainer=e},Object.defineProperty(t.prototype,"Interactable",{set:function(e){this._button.interactable=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Selected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.childSelect()},enumerable:!1,configurable:!0}),t.prototype.trackItemClick=function(){var e=this._itemInfo instanceof c.NgcSingleItemInfo?this._itemInfo.itemID:this._itemInfo.bundleID,t=s.NgcShopManager.getInstance().increaseItemClickCounter(e);l.NgcTelemetry.inst.LogEvent_ShopItemViewed({itemID:e,checker:t,itemType:this._itemInfo.category})},t.prototype.resizeBaseOnWidth=function(e){e=Math.floor(e),a.ResizableComponent.resizeNodeByWidth(this.node,e)},t.prototype.onClicked=function(){this.Selected||(this._itemContainer.onItemClick(this),this.trackItemClick())},i([p],t)}(cc.Component));o.ItemShop=d,cc._RF.pop()},{"../../../../Core/ResizableComponent":"ResizableComponent","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../../Services/Telemetry/Telemetry":"Telemetry"}],ItemStatusEquipped:[function(e,t,o){"use strict";cc._RF.push(t,"bf958GiHCpNpYZ9RbWwLowE","ItemStatusEquipped");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemStatusEquipped=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.Equipped},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcItemStatus);o.NgcItemStatusEquipped=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],ItemStatusUnlock:[function(e,t,o){"use strict";cc._RF.push(t,"7389fSzjzlNzLQExIUlQ5WM","ItemStatusUnlock");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemStatusUnlock=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Unlock},t.prototype.updateInfo=function(){},i([l],t)}(c.NgcItemStatus));o.NgcItemStatusUnlock=u,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],ItemStatus:[function(e,t,o){"use strict";cc._RF.push(t,"9b1d6JG7jZJca5whIILJXLK","ItemStatus");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemStatus=void 0;var a=e("../ItemPool"),c=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.updateItemStatusForNode=function(e,t){var n=t.itemStatusType;0==e.children.length&&o.addItemStatus(e,n);var r=e.children[0],i=r.getComponent(o);i.getType()!=n&&(r.removeFromParent(),a.NgcItemPool.inst.putItemStatus(r),i=o.addItemStatus(e,n)),i.updateInfo(t)},t.addItemStatus=function(e,t){var n=a.NgcItemPool.inst.getItemStatus(t);return e.addChild(n),n.getComponent(o)},o=i([c],t)}(cc.Component);o.NgcItemStatus=s,cc._RF.pop()},{"../ItemPool":"ItemPool"}],ItemTabAsset:[function(e,t,o){"use strict";cc._RF.push(t,"58331YkpD5FBLzw5GHKBkHp","ItemTabAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemTabAsset=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundSelected=null,t.backgroundUnselected=null,t.backgroundBrandNewItemSelected=null,t.backgroundBrandNewItemUnselected=null,t.tabImageList=[],t.flashAnimation=null,t}return r(t,e),Object.defineProperty(t.prototype,"EnableFlash",{set:function(e){this.flashAnimation.node.active=e,e?this.flashAnimation.play():this.flashAnimation.stop()},enumerable:!1,configurable:!0}),i([s(cc.SpriteFrame)],t.prototype,"backgroundSelected",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundUnselected",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundBrandNewItemSelected",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundBrandNewItemUnselected",void 0),i([s(cc.SpriteFrame)],t.prototype,"tabImageList",void 0),i([s(cc.Animation)],t.prototype,"flashAnimation",void 0),i([c],t)}(cc.Component);o.NgcItemTabAsset=l,cc._RF.pop()},{}],ItemTab:[function(e,t,o){"use strict";cc._RF.push(t,"2d221Zo6eJKQ7IBVMXIuRFj","ItemTab");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemTab=o.NgcTabType=void 0;var a,c=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("./AssetComponent/ItemTabAsset");(function(e){e[e.BOTH_IMAGE_AND_NAME=0]="BOTH_IMAGE_AND_NAME",e[e.IMAGE=1]="IMAGE",e[e.NAME=2]="NAME"})(a=o.NgcTabType||(o.NgcTabType={}));var l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.tabImage=null,t.tabName=null,t._itemTabAsset=null,t._isSelected=!1,t._hasBrandNewItem=!1,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===r&&(r=a.BOTH_IMAGE_AND_NAME),this.tabName.getComponent(c.NgcLabelLocalized).setLocalizedText(e),this._tabNameKey=e,this._tabId=t,this._hasBrandNewItem=o,this._itemContainer=n,this._itemTabAsset=this.node.getComponent(s.NgcItemTabAsset),this.updateBackground(),this.updateImage()},Object.defineProperty(t.prototype,"TabNameKey",{get:function(){return this._tabNameKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Selected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.updateBackground()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HasBrandNewItem",{set:function(e){this._hasBrandNewItem=e,this.updateBackground()},enumerable:!1,configurable:!0}),t.prototype.setTabType=function(e){this.tabImage.active=e==a.IMAGE||e==a.BOTH_IMAGE_AND_NAME,this.tabName.active=e==a.NAME||e==a.BOTH_IMAGE_AND_NAME},t.prototype.updateBackground=function(){this.updateNormalBackground(),this.updateBrandNewBackground()},t.prototype.updateNormalBackground=function(){this.background.spriteFrame=this._isSelected?this._itemTabAsset.backgroundSelected:this._itemTabAsset.backgroundUnselected,this._isSelected?this.tabName.color=(new cc.Color).fromHEX("#F39200"):this.tabName.color=(new cc.Color).fromHEX("#0B8BB1")},t.prototype.updateBrandNewBackground=function(){this._hasBrandNewItem&&(this.background.spriteFrame=this._isSelected?this._itemTabAsset.backgroundBrandNewItemSelected:this._itemTabAsset.backgroundBrandNewItemUnselected,this.tabName.color=(new cc.Color).fromHEX("#F39200")),this._itemTabAsset.EnableFlash=this._hasBrandNewItem},t.prototype.updateImage=function(){this.tabImage.getComponent(cc.Sprite).spriteFrame=this._itemTabAsset.tabImageList[this._tabId]},t.prototype.onTabClicked=function(){this._itemContainer.onTabClicked(this._tabNameKey)},i([p(cc.Sprite)],t.prototype,"background",void 0),i([p(cc.Node)],t.prototype,"tabImage",void 0),i([p(cc.Node)],t.prototype,"tabName",void 0),i([u],t)}(cc.Component);o.NgcItemTab=d,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","./AssetComponent/ItemTabAsset":"ItemTabAsset"}],Item:[function(e,t,o){"use strict";cc._RF.push(t,"1e3f8mJOGtPc4DWXQek3nyb","Item");var n,r,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.Hat=0]="Hat",e[e.Glasses=1]="Glasses",e[e.Dress=2]="Dress"}(r||(r={}));var c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameItem="",t.skinName="",t.id=0,t.boder=null,t.Icon=null,t.lockIcon=null,t.PriceLb=null,t.SelectedNode=null,t.boderFrame=[],t.callBackFn=null,t.itemType=r.Hat,t}return i(t,e),Object.defineProperty(t.prototype,"isBought",{get:function(){return this._isBought},set:function(e){this._isBought=e,this.PriceLb.node.parent.active=!this._isBought,this.lockIcon.node.active=!this._isBought,this._isBought||(this.isUsing=!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUsing",{get:function(){return this._isUsing},set:function(e){this._isUsing=e,this.SelectedNode.active=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"price",{get:function(){return this._price},set:function(e){this._price=e,this.PriceLb.string=this._price+""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemTypeAsString",{get:function(){return r[this.itemType]},enumerable:!1,configurable:!0}),t.prototype.start=function(){},t.prototype.setInfo=function(e,t,o,n,r,i,a,c){this.itemType=e,this.Icon.spriteFrame=t,this.nameItem=o,this.price=r,this.isUsing=a,this.isBought=r<=0||i,this.callBackFn=c,this.skinName=n},t.prototype.onClick=function(){this.isUsing||this.isBought&&this.callBackFn(this)},a([l],t.prototype,"nameItem",void 0),a([l],t.prototype,"skinName",void 0),a([l(cc.Sprite)],t.prototype,"boder",void 0),a([l(cc.Sprite)],t.prototype,"Icon",void 0),a([l(cc.Sprite)],t.prototype,"lockIcon",void 0),a([l(cc.Label)],t.prototype,"PriceLb",void 0),a([l(cc.Node)],t.prototype,"SelectedNode",void 0),a([l(cc.SpriteFrame)],t.prototype,"boderFrame",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],JumpTriggerPoint:[function(e,t,o){"use strict";cc._RF.push(t,"f0d65L7k6JMvrzjqkxkghoi","JumpTriggerPoint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="",t.targetGear=1,t}return r(t,e),t.prototype.initTriggerPoint=function(e,t){this.type=e,this.targetGear=t},t.prototype.onLoad=function(){},t.prototype.start=function(){},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],LB_UserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"62201MiZEJNgYR0t8ucKFBI","LB_UserInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLB_UserInfo=void 0;var a=e("../../../Services/Platform/Platform"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankNumber=null,t.avatar=null,t.avatarUrl=null,t.flag=null,t.userName=null,t.userScore=null,t.mobileIcon=null,t.desktopIcon=null,t.bg2=null,t.needToSaveNode=null,t.userNameNeedToSave=null,t.isLocalUser=!1,t}return r(t,e),t.prototype.start=function(){},t.prototype.setNeedToSave=function(e){this.needToSaveNode&&this.userNameNeedToSave&&(a.NgcPlatform.inst&&a.NgcPlatform.inst.getPlatformID()===a.PlatformID.Poki||(a.NgcPlatform.inst&&a.NgcPlatform.inst.getPlatformID()===a.PlatformID.GameDistribution&&(e=!1),this.needToSaveNode.active=e,this.userName.node.active=!e,e&&(this.userNameNeedToSave.string=this.userName.string)))},i([l(cc.Label)],t.prototype,"rankNumber",void 0),i([l(cc.Sprite)],t.prototype,"avatar",void 0),i([l(cc.Sprite)],t.prototype,"flag",void 0),i([l(cc.Label)],t.prototype,"userName",void 0),i([l(cc.Label)],t.prototype,"userScore",void 0),i([l(cc.Node)],t.prototype,"mobileIcon",void 0),i([l(cc.Node)],t.prototype,"desktopIcon",void 0),i([l(cc.Node)],t.prototype,"bg2",void 0),i([l(cc.Node)],t.prototype,"needToSaveNode",void 0),i([l(cc.Label)],t.prototype,"userNameNeedToSave",void 0),i([s],t)}(cc.Component);o.NgcLB_UserInfo=u,cc._RF.pop()},{"../../../Services/Platform/Platform":"Platform"}],LZW:[function(e,t,o){"use strict";cc._RF.push(t,"5cab8dReeBFuaCLXz0Dd68F","LZW"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.decode=function(e,t){var o=1<<t,n=o+1,r=t+1,i=[],a=0;function c(){var e;for(i=[],r=t+1,e=0;e<o;e++)i[e]=[e];i[o]=[],i[n]=null}function s(t){var o,n=0;for(o=0;o<t;o++)e[a>>3]&1<<(7&a)&&(n|=1<<o),a++;return n}return function(){for(var e,t,a=[];;)if(t=e,(e=s(r))!=o){if(e==n)break;if(e<i.length)t!==o&&i.push(i[t].concat(i[e][0]));else{if(e!==i.length)throw new Error("LZW\u89e3\u6790\u51fa\u9519");i.push(i[t].concat(i[t][0]))}a.push.apply(a,i[e]),i.length===1<<r&&r<12&&r++}else c();return a}()},e}();o.default=n,cc._RF.pop()},{}],LabelLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"2c05eDz1T9GTKFZFdcH0OUu","LabelLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLabelLocalized=void 0;var a=e("./LocalizedManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=c.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textKey="",t.extraParamComponents=[],t.extraParams=null,t.defaultFont=null,t.subText="",t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.NgcLocalizedManager.labelLocalizeds.push(this)},t.prototype.start=function(){this.updateString()},t.prototype.setExtraParams=function(e){this.extraParams=e},t.prototype.setExtraComponents=function(e){this.extraParamComponents=e},t.prototype.applyExtraParams=function(){if(this.extraParams&&0!==this.extraParamComponents.length)for(var e=0;e<this.extraParamComponents.length;e++){var t=this.extraParams[e],o=this.extraParamComponents[e];this.string=this.string.replace(o,t)}},t.prototype.updateString=function(){if(this.textKey){var e=a.NgcLocalizedManager.t(this.textKey);""!=e.text&&(this.string=e.text,this.applyExtraParams(),this.subText&&(this.string+=this.subText))}},t.prototype.setLocalizedText=function(e){this.textKey=e,this.updateString()},i([l],t.prototype,"textKey",void 0),i([l({type:[cc.String]})],t.prototype,"extraParamComponents",void 0),i([l(cc.Font)],t.prototype,"defaultFont",void 0),i([s,u("NGC/LocalizedLabel")],t)}(cc.Label);o.NgcLabelLocalized=p,cc._RF.pop()},{"./LocalizedManager":"LocalizedManager"}],LapInfor:[function(t,o,n){"use strict";cc._RF.push(o,"9c8fcYEbTpIOZ/Ng73fhf/x","LapInfor");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Player/PlayerController"),s=t("../Utils/Util"),l=t("../Game"),u=t("../SoundManager"),p=t("./PositionBar"),d=t("../Utils/ConstConfig"),f=t("../UserInfo"),h=t("../Network/NetClient"),g=t("../League/LeagueManager"),y=t("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),m=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),_=cc._decorator,v=_.ccclass,S=_.property,N=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.scorelable=null,e.SpeedInfor_speed=null,e.lapbl=null,e.timelb=null,e.curentPos=null,e.curentPosPrefix=null,e.totalPos=null,e.posNode=null,e.trackcard_top=null,e.trackcard_center=null,e.trackcard_bottom=null,e.trackcard_lapLB=null,e.trackcard_racersLB=null,e.trackcard_lastracersLB=null,e.trackcard_bestTimeLB=null,e.trackcard_mapname=null,e.trackcard_tier=null,e.HubTop=null,e.posBarNode=null,e.tierIconList=[],e.lastPlayerIsDangerous=!1,e._hubStartPos=cc.Vec3.ZERO,e._hubTargetPos=cc.Vec3.ZERO,e.debug=!1,e._b=!1,e._startPointTrackCard=cc.Vec3.ZERO,e._targetPointTrackCard=cc.Vec3.ZERO,e}var n;return i(o,t),n=o,o.prototype.onLoad=function(){n.inst=this},o.prototype.start=function(){this._targetPointTrackCard=this.trackcard_top.position,this._startPointTrackCard=this._targetPointTrackCard.sub(cc.v3(this.trackcard_top.width,0,0)),this._hubStartPos=cc.v3(this.HubTop.x-this.HubTop.width,this.HubTop.y),this._hubTargetPos=this.HubTop.position,this.reset()},o.prototype.onDisable=function(){cc.error("--------------")},o.prototype.reset=function(){this.curentPosPrefix.node.color=cc.Color.WHITE,this.curentPos.node.color=cc.Color.WHITE,this.curentPos.string="--",this.totalPos.string="/--",this.posNode.emit("reset",!1),p.default.inst&&p.default.inst.reset(),this.initTrackCard()},o.prototype.initTrackCard=function(){try{this.trackcard_bottom.position=cc.v3(this._startPointTrackCard.x,this.trackcard_bottom.position.y,0),this.trackcard_top.position=cc.v3(this._startPointTrackCard.x,this.trackcard_top.position.y,0),this.trackcard_center.position=cc.v3(this._startPointTrackCard.x,this.trackcard_center.position.y,0),this.trackcard_bottom.opacity=0,this.trackcard_top.opacity=0,this.trackcard_center.opacity=0,this.HubTop.position=this._hubStartPos,this.HubTop.opacity=0}catch(e){cc.warn(e)}},o.prototype.update=function(){if(null!=c.default.getInst().getLocalPlayer()&&(h.default.inst.isConnected()||m.NgcBuildConfig.offlineMode)){var e=c.default.getInst().allPlayer();this.updatePositionInfor(e),this.updateTimeInfor(e),this.updateLapInfor(e),this.updateSpeedBoard()}},o.prototype.updateSpeedBoard=function(){this.SpeedInfor_speed.string=Math.floor(c.default.getInst().getLocalPlayer().getSpeed()).toString()},o.prototype.updatePositionInfor=function(e){if(l.default.inst.isReadyGo()){c.default.getInst().getLocalPlayer().HasStopped()&&u.default.inst.isPlayingSFX(u.AudioClips.warning_sfx)&&u.default.inst.stopSFX(u.AudioClips.warning_sfx),c.default.getInst().getLocalPlayer().isKickOut()&&(this.curentPosPrefix.node.color=cc.Color.RED,this.curentPos.node.color=cc.Color.RED),this.totalPos.node.active=!0,this.curentPos.node.active=!0,this.curentPosPrefix.node.active=!0;for(var t=0,o=0;o<e.length;o++)c.default.getInst().getLocalPlayer().getPlayerID()==e[o].getPlayerID()&&(t=o+1);var n=c.default.getInst().getLocalPlayer().isDangerous(),r=l.default.inst.isFlashingPosition();c.default.getInst().getLocalPlayer().HasStopped()||(this.totalPos.string="/"+c.default.inst.getLivePlayer().length.toString(),n?(this.posNode.emit("changePos",!0,r),r&&u.default.inst.playSFX(u.AudioClips.warning_sfx,!0)):(this.posNode.emit("changePos",!1),u.default.inst.isPlayingSFX(u.AudioClips.warning_sfx)&&u.default.inst.stopSFX(u.AudioClips.warning_sfx))),this.curentPos.string=t.toString(),this.lastPlayerIsDangerous=n}else this.curentPosPrefix.node.active=!1,this.curentPos.node.color=cc.Color.WHITE},o.prototype.changePos=function(){this._b=!this._b,this.posNode.emit("changePos",this._b)},o.prototype.updateLapInfor=function(){if(!c.default.getInst().getLocalPlayer().isKickOut()){var e=c.default.getInst().getLocalPlayer()._currentLap+1;e>n.__maxLap&&(e=n.__maxLap),this.lapbl.string=e+"/"+n.__maxLap.toString()}},o.prototype.updateTimeInfor=function(){if(!c.default.getInst().getLocalPlayer().isKickOut()){var e=c.default.getInst().getLocalPlayer().getTotalRaceTime();this.timelb.string=s.default.msToTime(e)}},o._setMaxLap=function(e){this.__maxLap=e},o.prototype.showLeaderboard=function(e){this.debug=e.isChecked},o.prototype.playTrackCarAnimation=function(e,t){var o=this,r=this;if(e){this.initTrackCard();var i=0;l.default.ELIMINATED_ARR.forEach(function(e){i+=e}),this.trackcard_mapname.string=g.default.getSelectTrack().trackName,this.trackcard_racersLB.string="15 "+y.NgcLocalizedManager.t("TMB_RACERS").text;var a=d.ConstConfig.SAVE_KEY.BEST_TIME_LAP+g.default.getSelectTrack().trackFile,c=f.UserInfo.getNumValue(a);this.trackcard_bestTimeLB.string=s.default.msToTime(c),this.trackcard_tier.spriteFrame=this.tierIconList[g.default.getSelectTrack().trackTier],this.trackcard_lastracersLB.string=i+" "+y.NgcLocalizedManager.t("TMB_LAST_RACER").text,this.trackcard_lapLB.string=n.__maxLap+" "+y.NgcLocalizedManager.t("TMB_LAPS").text,this.trackcard_bottom.opacity=255,this.trackcard_top.opacity=255,this.trackcard_center.opacity=255,cc.tween(this.trackcard_top).to(.5,{x:this._targetPointTrackCard.x},{easing:"quintOut"}).start(),cc.tween(r.trackcard_center).to(.6,{x:r._targetPointTrackCard.x},{easing:"quintOut"}).start(),cc.tween(r.trackcard_bottom).to(.7,{x:r._targetPointTrackCard.x},{easing:"quintOut"}).start()}else null!=t?(cc.log("Step"+t),0==t?cc.tween(r.trackcard_bottom).to(.5,{x:r._startPointTrackCard.x},{easing:"quintIn"}).start():1==t?cc.tween(r.trackcard_center).to(.5,{x:r._startPointTrackCard.x},{easing:"quintIn"}).start():2==t&&cc.tween(r.trackcard_top).to(.5,{x:r._startPointTrackCard.x},{easing:"quintIn"}).call(function(){r.HubTop.opacity=255,r.trackcard_bottom.opacity=0,r.trackcard_top.opacity=0,r.trackcard_center.opacity=0,r.HubTop.opacity=255,cc.log("this.HubTop"+o.HubTop.x),cc.tween(r.HubTop).to(1,{position:r._hubTargetPos},{easing:"quintOut"}).start()}).start()):(cc.log("Hide ALL"),cc.tween(r.trackcard_bottom).to(.5,{x:r._startPointTrackCard.x},{easing:"quintIn"}).start(),cc.tween(r.trackcard_center).to(.6,{x:r._startPointTrackCard.x},{easing:"quintIn"}).start(),cc.tween(r.trackcard_top).to(.7,{x:r._startPointTrackCard.x},{easing:"quintIn"}).call(function(){r.HubTop.opacity=255,r.trackcard_bottom.opacity=0,r.trackcard_top.opacity=0,r.trackcard_center.opacity=0,r.HubTop.opacity=255,cc.log("this.HubTop"+o.HubTop.x),cc.tween(r.HubTop).to(1,{position:r._hubTargetPos},{easing:"quintOut"}).start()}).start())},o.__maxLap=3,a([S(cc.RichText)],o.prototype,"scorelable",void 0),a([S(cc.Label)],o.prototype,"SpeedInfor_speed",void 0),a([S(cc.Label)],o.prototype,"lapbl",void 0),a([S(cc.Label)],o.prototype,"timelb",void 0),a([S(cc.Label)],o.prototype,"curentPos",void 0),a([S(cc.Label)],o.prototype,"curentPosPrefix",void 0),a([S(cc.Label)],o.prototype,"totalPos",void 0),a([S(cc.Node)],o.prototype,"posNode",void 0),a([S(cc.Node)],o.prototype,"trackcard_top",void 0),a([S(cc.Node)],o.prototype,"trackcard_center",void 0),a([S(cc.Node)],o.prototype,"trackcard_bottom",void 0),a([S(cc.Label)],o.prototype,"trackcard_lapLB",void 0),a([S(cc.Label)],o.prototype,"trackcard_racersLB",void 0),a([S(cc.Label)],o.prototype,"trackcard_lastracersLB",void 0),a([S(cc.Label)],o.prototype,"trackcard_bestTimeLB",void 0),a([S(cc.Label)],o.prototype,"trackcard_mapname",void 0),a([S(cc.Sprite)],o.prototype,"trackcard_tier",void 0),a([S(cc.Node)],o.prototype,"HubTop",void 0),a([S(cc.Node)],o.prototype,"posBarNode",void 0),a([S({type:cc.SpriteFrame})],o.prototype,"tierIconList",void 0),n=a([v],o)}(cc.Component);n.default=N,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../Game":"Game","../League/LeagueManager":"LeagueManager","../Network/NetClient":"NetClient","../Player/PlayerController":"PlayerController","../SoundManager":"SoundManager","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util","./PositionBar":"PositionBar"}],LeaderBoardDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c596fBQ+MJFA4KusJ+5/IFE","LeaderBoardDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.PositionLocal=o.LeadboardType=void 0;var a,c=e("../../Utils/Util"),s=e("./ItemLeaderBoard"),l=e("../../Utils/ConstConfig"),u=e("../../Main"),p=e("../../Player/PlayerController"),d=e("../../PoolNodesManager"),f=e("../../UserInfo"),h=e("../../SoundManager"),g=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),y=e("../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),m=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),_=e("../../../NanoGameCore/Services/Ads/Ads"),v=e("../../../NanoGameCore/Services/Leaderboard/Leaderboard"),S=e("../../Currency/Currency"),N=e("../../League/LeagueManager"),b=e("../../Maps/DrawMap"),C=e("../../Screens/StartScreen/StartMain"),P=e("../../Tracking/TrackingManager"),I=e("../../../globals"),w=e("../../Game"),T=e("../../Network/NetClient"),O=e("../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),R=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),E=cc._decorator,A=E.ccclass,D=E.property;(function(e){e[e.Friends=0]="Friends",e[e.Local=1]="Local",e[e.World=2]="World",e[e.CurGame=3]="CurGame"})(o.LeadboardType||(o.LeadboardType={})),function(e){e[e.AboveTop=0]="AboveTop",e[e.InBoard=1]="InBoard",e[e.BelowBottom=2]="BelowBottom"}(a=o.PositionLocal||(o.PositionLocal={}));var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.itemPrefab=null,t._callBackClose=null,t.rabbid=null,t.scrollView=null,t.okBtn=null,t.totalItems=1,t.localIndex=1,t.localItem=null,t.topItem=null,t.bottomItem=null,t.parentForEmojis=null,t.parentForBubble=null,t.rankUser=null,t.totalTimeUser=null,t.bestTimeUser=null,t.dialogBG=null,t.listItem=[],t.topItems=[],t._localPlayerRank=1,t.isAllPlayerFinish=!1,t.isAllRealPlayerFinish=!1,t.stopUpdateInfor=!1,t.pushScoreToLB=!1,t.callAutoSkip=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"posOfLocalItem",{get:function(){return this._posOfLocalItem},set:function(e){if(this._posOfLocalItem!=e)switch(this._posOfLocalItem=e,e){case a.AboveTop:cc.tween(this.topItem.node).to(.1,{opacity:255}).start(),cc.tween(this.bottomItem.node).to(.1,{opacity:0}).start();break;case a.BelowBottom:cc.tween(this.bottomItem.node).to(.1,{opacity:255}).start(),cc.tween(this.topItem.node).to(.1,{opacity:0}).start();break;case a.InBoard:cc.tween(this.topItem.node).to(.1,{opacity:0}).start(),cc.tween(this.bottomItem.node).to(.1,{opacity:0}).start()}},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst=this,cc.sys.isMobile||cc.view.on("canvas-resize",this.onResized,this)},t.prototype.start=function(){p.default.inst.allPlayer().forEach(function(e,t){e.isKickOut(),0==t?e.setLeader(!0):e.setLeader(!1)}),h.default.inst.stopAllSFX(),h.default.inst.playSFX(h.AudioClips.expandMenu_sfx)},t.prototype.init=function(e,t,o){var n=[];p.default.inst.allPlayer().forEach(function(e){n.push(e.getCurStateData())}),this.isAllRealPlayerFinish=!1,this.isAllPlayerFinish=!1,this.callAutoSkip=!1,this._callBackClose=o,this.initData(n),this.updateInfo(n),I.default.Game.inst.leaderBoard=this,u.Main.inst.isFTUE()||y.NgcEmotesManager.inst.allowScrollView(!1),cc.log("#init leaderboard dialog")},t.prototype.updateScore=function(e){void 0===e&&(e=0);var t=p.default.inst.getLocalPlayer();if(t.HasStopped()){this._localPlayerRank<=3&&h.default.inst.playSFX(h.AudioClips.medal_sfx);var o=l.ConstConfig.SAVE_KEY.RANK+b.default.getMap(),n=f.UserInfo.getNumValue(o);if((0==n||n>this._localPlayerRank)&&f.UserInfo.setNumValue(this._localPlayerRank,o),t.HasFinished()){var r=f.UserInfo.getNumValue(l.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+b.default.getMap()),i=t.getTotalRaceTime();if((0==r||r>i)&&i>15e3){f.UserInfo.setNumValue(i,l.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+b.default.getMap());var a=N.default.getSelectTrack().trackID;R.NgcBuildConfig.offlineMode||(v.NgcLeaderboard.inst.uploadLeaugeScore(a,i,"LT"),cc.log("Leaderboard","Update best score for TRACK"));var c=N.default.inst.getBestScore();(c<f.UserInfo.bestScore||0==f.UserInfo.bestScore)&&c>=45e4&&(f.UserInfo.bestScore=c,v.NgcLeaderboard.inst.uploadScore(f.UserInfo.bestScore,"LT"),O.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().reloadFilter(),C.default.inst.uploadBestScore(f.UserInfo.bestScore))}}}},t.prototype.onEnable=function(){u.Main.inst.isFTUE()||(this.parentForEmojis&&this.parentForBubble&&(y.NgcEmotesManager.inst.setParentForEmojisAndBubble(this.parentForEmojis,this.parentForBubble),cc.log("#Change parent")),y.NgcEmotesManager.inst.allowScrollView(!1)),cc.log("#Enable leaderboard"),h.default.inst.stopAllSFX(),h.default.inst.playSFX(h.AudioClips.expandMenu_sfx)},t.prototype.onDisable=function(){if(u.Main.inst.isFTUE()){var e=p.default.inst.getLocalPlayer(),t=R.NgcBuildConfig.offlineMode||u.Main.inst.offlineMode()?"offline":w.default.inst.curGameNetID,o=u.Main.inst.fps,n=Math.round(w.default.inst.getFPS(w.FPS.AVERAGE)),r=Math.round(w.default.inst.getFPS(w.FPS.MAX)),i=Math.round(w.default.inst.getFPS(w.FPS.MIN)),a=c.default.msToTime(e.getTotalRaceTime()),s=p.default.inst.findPlayerIndexByNetID(T.default.inst.localPlayerNetID)+1,l=e.getCurrentLap(),d=e.getWrongWayNumber(),f=e.getCarSkin(),h=N.default.getSelectTrack().trackTier;P.default.getInst().LogEvent_GameOver(t,o,n,r,i,a,s,0,0,"track000",l,d,f,h)}u.Main.inst.isFTUE()||y.NgcEmotesManager.inst.allowScrollView(!0),cc.log("#onDisable leaderboard")},t.prototype.convertToScore=function(e,t){return 1e6*e+100*(t+1)},t.prototype.closeOnClick=function(){var e;h.default.inst.playSound(h.AudioClips.confirmMenu_sfx),P.default.getInst().LogEvent_EndTimer("LeaderboardTime",!0),null===(e=m.default.inst)||void 0===e||e.hide(m.NgcPointcuts.bannerRewardVideo),this.reset(),this.hide(),this._callBackClose&&this._callBackClose()},t.prototype.hide=function(){this.node.active=!1,this.pushScoreToLB=!1},t.prototype.reset=function(){this.node.active=!1,this.pushScoreToLB=!1,this.stopUpdateInfor=!1,this.listItem.forEach(function(e){d.default.inst.itemsLeaderboard.put(e.node)}),this.isAllRealPlayerFinish=!1,this.isAllPlayerFinish=!1,this.listItem=[]},t.prototype.show=function(t){var o,n;this.node.active=!0,(null===(o=m.default.inst)||void 0===o?void 0:o.hasAds(_.AdsType.Banner))&&(null===(n=m.default.inst)||void 0===n||n.showBanner(m.NgcPointcuts.bannerRewardVideo),this.onResized()),e.prototype.show.call(this,t)},Object.defineProperty(t.prototype,"active",{set:function(){},enumerable:!1,configurable:!0}),t.prototype.initData=function(e){var t=this;c.default.clearChild(this.content),e.forEach(function(e,o){var n=d.default.inst.getNodeFromPool(d.PoolNodeId.ItemLeaderBoard);n||(n=cc.instantiate(t.itemPrefab));var r=n.getComponent(s.default);n.parent=t.content,r.setInfo(e,p.default.inst.getLocalPlayer().netID==e.netID),t.listItem.push(r),p.default.inst.getLocalPlayer().netID==e.netID&&(t.topItem.setInfo(r,!0),t.bottomItem.setInfo(r,!0)),o<3&&t.topItems[o].setInfo(e,!0)}),this.totalItems=this.listItem.length},t.prototype.findItemByNetID=function(e){for(var t=0,o=this.listItem;t<o.length;t++){var n=o[t];if(n.netID==e)return n}return null},t.prototype.updateInfo=function(e){var t=this;if(this.listItem){e.forEach(function(e){var o=t.findItemByNetID(e.netID);if(o){var n=p.default.inst.getLocalPlayer().netID==o.netID;o.setInfo(e,n),n&&(t.topItem.setInfo(e,!0),t.bottomItem.setInfo(e,!0),t.localItem=o.node)}}),this.listItem.sort(function(e,t){if(e._isKickedOut&&!t._isKickedOut)return 1;if(!e._isKickedOut&&t._isKickedOut)return-1;var o=e._farDistance-t._farDistance;if(o<0)return 1;if(o>0)return-1;if(e._hasStopped&&t._hasStopped&&e._lap==t._lap){var n=t._totalTime-e._totalTime;if(n>0)return-1;if(n<0)return 1}return 0});var o=0;if(this.isAllRealPlayerFinish=!0,this.listItem.forEach(function(n,r){n.rank=r+1,n.netID==p.default.inst.getLocalPlayer().netID&&(t.topItem.rank=t.bottomItem.rank=r+1,t._localPlayerRank=r+1),r<3?(e.forEach(function(e){if(n.netID==e.netID){var o=p.default.inst.getLocalPlayer().netID==n.netID;t.topItems[r].setInfo(e,o),t.topItems[r].rank=r+1}}),n.node.active=!1):n.node.active=!0,n._hasStopped?o++:n.netID==n.botOwnerNetID&&(t.isAllRealPlayerFinish=!1),n.node.setSiblingIndex(r+1)}),o==this.listItem.length&&(this.isAllPlayerFinish=!0),this.stopUpdateInfor=!0,!this.pushScoreToLB&&!u.Main.inst.isFTUE()){var n=N.default.getSelectTrack().trackTier;this.listItem.forEach(function(e){e.powerScoreTier=n}),this.updateScore(S.default.getLeagueReward(this._localPlayerRank,n)),this.pushScoreToLB=!0}}},t.prototype.update=function(){var e=this;if(I.default.Main.getScreenOrientation()==u.ScreenOrientation.Portrait&&this.node.scale!=cc.winSize.width/l.ConstConfig.PARAMS.FIX_SCREEN.x){var t=cc.winSize.width/l.ConstConfig.PARAMS.FIX_SCREEN.x;this.node.height=cc.winSize.height/t,this.node.scale=cc.winSize.width/l.ConstConfig.PARAMS.FIX_SCREEN.x}if(this.listItem.forEach(function(t,o){c.default.getWorldPos(t.node).y-t.node.height>c.default.getWorldPos(e.topItem.node).y?t.disAbleRender():c.default.getWorldPos(t.node).y+t.node.height<c.default.getWorldPos(e.bottomItem.node).y?t.disAbleRender():t.enableRender(),0==o?t.enabletDivide(s.Divide.BOTTOM):o==e.listItem.length-1?t.enabletDivide(s.Divide.TOP):t.enabletDivide(s.Divide.ALL)}),this.localItem){var o=!1;this.topItems.forEach(function(e){e.netID==p.default.getInst().getLocalPlayer().netID&&(o=!0)}),c.default.getWorldPos(this.localItem).y>c.default.getWorldPos(this.topItem.node).y&&!o?this.posOfLocalItem=a.AboveTop:c.default.getWorldPos(this.localItem).y<c.default.getWorldPos(this.bottomItem.node).y&&!o?this.posOfLocalItem=a.BelowBottom:this.posOfLocalItem=a.InBoard}},t.prototype.getPosEmojiForPlayerById=function(e){var t=this,o=cc.v2(0,0);return this.listItem.forEach(function(n,r){if(n.netID==e&&(o=r<3?c.default.getWorldPos(t.topItems[r].avatar.node):c.default.getWorldPos(n.avatar.node),p.default.inst.getLocalPlayer().netID==e))switch(t.posOfLocalItem,t.posOfLocalItem){case a.AboveTop:o=c.default.getWorldPos(t.topItem.avatar.node);break;case a.BelowBottom:o=c.default.getWorldPos(t.bottomItem.avatar.node)}}),o.addSelf(l.ConstConfig.PARAMS.POS_EMOJI),o},t.prototype.onResized=function(){if(!u.Main.inst.activeAlgin&&_.NgcAds.inst&&_.NgcAds.inst.isBannerShowing){var e=cc.view.getDesignResolutionSize(),t=Math.min(1,cc.winSize.width/cc.winSize.height*e.height/e.width),o=cc.view.getFrameSize().height/cc.winSize.height;this.node.getComponent(cc.Widget).top=100/o*t,this.dialogBG.getComponent(cc.Widget).top=-100-100/o}},t.prototype.onKeyDown=function(){},t.urlPrefab="Prefabs/Dialogs/LeaderBoardDialog",t.bundleName="",t.dialogType="LeaderBoardDialog",i([D(cc.Node)],t.prototype,"content",void 0),i([D(cc.Prefab)],t.prototype,"itemPrefab",void 0),i([D(sp.SkeletonData)],t.prototype,"rabbid",void 0),i([D(cc.ScrollView)],t.prototype,"scrollView",void 0),i([D(cc.Node)],t.prototype,"okBtn",void 0),i([D(s.default)],t.prototype,"topItem",void 0),i([D(s.default)],t.prototype,"bottomItem",void 0),i([D(cc.Node)],t.prototype,"parentForEmojis",void 0),i([D(cc.Node)],t.prototype,"parentForBubble",void 0),i([D(cc.Label)],t.prototype,"rankUser",void 0),i([D(cc.Label)],t.prototype,"totalTimeUser",void 0),i([D(cc.Label)],t.prototype,"bestTimeUser",void 0),i([D(cc.Node)],t.prototype,"dialogBG",void 0),i([D(s.default)],t.prototype,"topItems",void 0),o=i([A],t)}(g.NgcDialogBase);o.default=k,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../../../globals":"globals","../../Currency/Currency":"Currency","../../Game":"Game","../../League/LeagueManager":"LeagueManager","../../Main":"Main","../../Maps/DrawMap":"DrawMap","../../Network/NetClient":"NetClient","../../Player/PlayerController":"PlayerController","../../PoolNodesManager":"PoolNodesManager","../../Screens/StartScreen/StartMain":"StartMain","../../SoundManager":"SoundManager","../../Tracking/TrackingManager":"TrackingManager","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../../Utils/Util":"Util","./ItemLeaderBoard":"ItemLeaderBoard"}],LeaderBoardManager:[function(t,o,n){"use strict";cc._RF.push(o,"489f4n7v/pBUoO+IjSuk509","LeaderBoardManager");var r=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcLeaderboardManager=n.LeaderboardInitStatus=void 0;var a,c=t("../../../../Scripts/Screens/LeaderBoardScreen/LeaderBoardUI"),s=t("../../../GameFramework/Scripts/Ads/NgcAdsManager"),l=t("../../../GameFramework/Scripts/BuildConfig"),u=t("../../../GameFramework/Scripts/CountryFlagsManager"),p=t("../../../GameFramework/Scripts/NgcMain"),d=t("../../../GameFramework/Scripts/NgcUserInfo"),f=t("../../../SDK/Nano/NanoSrv"),h=t("../../../Services/Ads/Ads"),g=t("../../../Services/Leaderboard/Leaderboard"),y=t("../../../Services/Leaderboard/Leaderboard_impl_NanoSrv"),m=t("../../../Services/Platform/Platform");(function(e){e[e.NotInitialized=0]="NotInitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(a=n.LeaderboardInitStatus||(n.LeaderboardInitStatus={}));var _=function(){function e(){this.leaderBoardUIPrefab=null,this.leaderBoardUINode=null,this.baseUserData=null,this.initStatus=a.NotInitialized,this.allTimeBestScore=null,this.spriteFramesUrlCache=[],this.sortOrder=g.SORT_ORDER.DESC}return Object.defineProperty(e,"inst",{get:function(){return null!==e.inst_&&void 0!==e.inst_||(e.inst_=new e),e.inst_},enumerable:!1,configurable:!0}),e.prototype.setOrder=function(e){this.sortOrder=e},e.prototype.init=function(t){return r(this,void 0,void 0,function(){return i(this,function(){return e.inst.isInitalized()?[2]:(this.leaderBoardUINode=t.node,e.inst.initStatus=a.Initialized,cc.systemEvent.on("refreshLDB",this.onNanoSrvResetCallback.bind(this)),[2])})})},e.prototype.showLB=function(){e.inst.getLeaderBoardUIComponent().updateContent()&&(e.inst.getLeaderBoardUIComponent().show(),p.NgcMain.setAppContext(p.AppContext.Leaderboard))},e.prototype.checkShowBanner=function(){var e,t;s.default.inst.isAdsPoincutAvailable(s.NgcPointcuts.bannerLeaderboard,h.AdsType.Banner)?null===(e=s.default.inst)||void 0===e||e.showBanner(s.NgcPointcuts.bannerLeaderboard):null===(t=s.default.inst)||void 0===t||t.hide()},e.prototype.hideLB=function(){e.inst.leaderBoardUINode.active=!1},e.prototype.getLeaderBoardUIComponent=function(){return e.inst.leaderBoardUINode?e.inst.leaderBoardUINode.getComponent(c.NgcLeaderboardUI):null},e.prototype.getTop50=function(t,o){return r(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,e.inst.getLeaderBoarData(0,50,t,o)];case 1:return[2,n.sent()]}})})},e.prototype.getTop100=function(t,o){return r(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,e.inst.getLeaderBoarData(0,100,t,o)];case 1:return[2,n.sent()]}})})},e.prototype.getLocalPlayerRank=function(e,t){return r(this,void 0,void 0,function(){var o,n;return i(this,function(r){switch(r.label){case 0:return m.NgcPlatform.isOfflineMode()?[2,null]:[4,g.NgcLeaderboard.inst.getLocalPlayerRank(e,t,this.sortOrder)];case 1:return(o=r.sent())&&1==o.status?((n=o.data).country&&(n.country=n.country.toUpperCase()),[2,n]):[2,null]}})})},e.prototype.getLeaderBoarData=function(e,t,o,n){var a;return r(this,void 0,void 0,function(){var r,c;return i(this,function(i){switch(i.label){case 0:return(r=new g.RequestLeaderboard).numRecords=t,r.populationFilter=n,r.timeFilter=o,r.position=e,r.order=this.sortOrder,[4,null===(a=g.NgcLeaderboard.inst)||void 0===a?void 0:a.loadData(r)];case 1:return(c=i.sent())&&1==c.status?[2,c.data]:[2,null]}})})},e.prototype.getNearLocalPlayer=function(e,t,o,n){return void 0===n&&(n=g.SORT_ORDER.DESC),r(this,void 0,void 0,function(){var r;return i(this,function(i){switch(i.label){case 0:return m.NgcPlatform.isOfflineMode()?[2,null]:[4,g.NgcLeaderboard.inst.getNearLocalPlayer(e,t,n,o)];case 1:return(r=i.sent())&&1==r.status?[2,r.data]:[2,null]}})})},e.prototype.getLocalUserData=function(){return r(this,void 0,Promise,function(){var e,t;return i(this,function(o){switch(o.label){case 0:return m.NgcPlatform.isOfflineMode()?[2,null]:(e={},t={},[4,new Promise(function(o,n){f.default.inst.servicePost("/user/login",JSON.stringify(e),function(e,r){if(e)n();else{var i=JSON.parse(r);i?(t.avatar=i.avatar,t.country=i.country?i.country.toUpperCase():null,t.devicetype=i.deviceType,t.name=i.name,t.playerId=i.id,t.socialId=i.socialId,console.log("Get local user info success"),o()):(console.log("Parse Json failed"),n())}})})]);case 1:return o.sent(),[2,t]}})})},e.prototype.isInitalized=function(){return e.inst.initStatus===a.Initialized},e.prototype.isInitalizing=function(){return e.inst.initStatus===a.Initializing},e.prototype.checkOldBestScore=function(){return r(this,void 0,void 0,function(){var t,o,n,r,a,c;return i(this,function(i){switch(i.label){case 0:return m.NgcPlatform.isOfflineMode()?[2,null]:[4,e.inst.getAllTimeBestScore()];case 1:if(t=i.sent(),o=p.NgcMain.inst.getBestScore(),t){if(t===o)return[2];p.NgcMain.inst.setBestScore(t)}return n="/leaderboard/"+l.NgcBuildConfig.platformGameID+"/"+f.default.inst.userID+"/updatescore",r={score:p.NgcMain.inst.getBestScore(),country:u.NgcCountryFlagsManager.localCountry,deviceType:cc.sys.isMobile?y.DeviceType.MOBILE:y.DeviceType.PC,time:"alltime"},f.default.inst.servicePost(n,JSON.stringify(r),function(e){e||console.log("update old best score to alltime LB success")}),a="/playerdata/"+l.NgcBuildConfig.platformGameID+"/"+f.default.inst.userID,c={_bestScore:p.NgcMain.inst.getBestScore()},f.default.inst.servicePost(a,JSON.stringify(c),function(e){e||console.log("update old _best score success")}),[2]}})})},e.prototype.getAllTimeLocalData=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,e.inst.getLocalPlayerRank(g.TimeFilterType.AllTime,g.PopulationFilterType.Worldwide).catch(function(){console.log("[LeaderboardManager] `getAllTimeLocalData` Can not get local player rank")})];case 1:return[2,t.sent()]}})})},e.prototype.getAllTimeBestScore=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return m.NgcPlatform.isOfflineMode()?[2,null]:[4,this.getAllTimeLocalData()];case 1:return(e=t.sent())&&e.hasOwnProperty("score")?[2,parseInt(e.score)]:[2,null]}})})},e.prototype.getPercentOfBeatPlayers=function(){return r(this,void 0,void 0,function(){var e,t,o;return i(this,function(n){switch(n.label){case 0:return[4,this.getAllTimeLocalData()];case 1:return(e=n.sent())&&e.hasOwnProperty("rank")&&e.hasOwnProperty("minRank")?null===e.rank||null===e.minRank?[2,null]:(t=parseInt(e.rank),o=parseInt(e.minRank),[2,Math.round((o-t)/o*100)]):[2,null]}})})},e.prototype.loadSpriteFrameFromURL=function(t){return new Promise(function(o,n){if(t){var r=e.inst.spriteFramesUrlCache.find(function(e){return e.url===t});r?o(r.spriteFrame):cc.loader.load({url:t,type:"jpg"},function(i,a){if(i)n(i);else{var c=new cc.SpriteFrame(a);r={url:t,spriteFrame:c},e.inst.spriteFramesUrlCache.push(r),o(c)}})}else n("[Util] `loadSpriteFrameFromURL` urlJPG = "+t)})},e.prototype.onNanoSrvResetCallback=function(){var t;g.NgcLeaderboard.inst.clearCacheRequestData(),(null===(t=e.inst)||void 0===t?void 0:t.getLeaderBoardUIComponent())&&(e.inst.getLeaderBoardUIComponent().reloadFilter(),e.inst.getLeaderBoardUIComponent().setLoginStatus(d.default.isUserLogined()))},e.inst_=null,e}();n.NgcLeaderboardManager=_,cc._RF.pop()},{"../../../../Scripts/Screens/LeaderBoardScreen/LeaderBoardUI":"LeaderBoardUI","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Leaderboard/Leaderboard":"Leaderboard","../../../Services/Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","../../../Services/Platform/Platform":"Platform"}],LeaderBoardUI:[function(t,o,n){"use strict";cc._RF.push(o,"309begZN9xPZJLdrsJQ9cVK","LeaderBoardUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcLeaderboardUI=void 0;var l,u,p,d,f=t("../../../NanoGameCore/Core/Utils"),h=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),g=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),y=t("../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LB_UserInfo"),m=t("../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),_=t("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),v=t("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog"),S=t("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),N=t("../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),b=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),C=t("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),P=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),I=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),w=t("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),T=t("../../../NanoGameCore/SDK/Nano/NanoSrv"),O=t("../../../NanoGameCore/Services/Leaderboard/Leaderboard"),R=t("../../../NanoGameCore/Services/Leaderboard/Leaderboard_impl_NanoSrv"),E=t("../../../NanoGameCore/Services/Platform/Platform"),A=t("../../../NanoGameCore/Services/Social/Social"),D=t("../../../NanoGameCore/Services/Telemetry/Telemetry"),k=t("../../ScreenManager"),L=t("../../Utils/Util"),B=cc._decorator,M=B.ccclass,F=B.property;(function(e){e[e.TopEdge=0]="TopEdge",e[e.Middle=1]="Middle",e[e.BottomEdge=2]="BottomEdge"})(l||(l={})),function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal",e[e.none=2]="none"}(u||(u={})),function(e){e[e.none=0]="none",e[e.left=1]="left",e[e.right=2]="right"}(p||(p={})),function(e){e[e.AboveTop=0]="AboveTop",e[e.InBoard=1]="InBoard",e[e.BelowBottom=2]="BelowBottom"}(d||(d={}));var G=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeFilterTogglerContainer=null,e.dailyButtonChecked=null,e.dailyButtonUnchecked=null,e.weeklyButtonChecked=null,e.weeklyButtonUnchecked=null,e.allTimeButtonChecked=null,e.allTimeButtonUnchecked=null,e.friendsButtonChecked=null,e.friendsButtonUnchecked=null,e.countryButtonChecked=null,e.countryButtonUnchecked=null,e.worldwideButtonChecked=null,e.worldwideButtonUnchecked=null,e.firstRank=null,e.firstRankHighlight=null,e.secondRank=null,e.secondRankHighlight=null,e.thirdRank=null,e.thirdRankHighlight=null,e.scrollView=null,e.scrollContent=null,e.topKeeper=null,e.bottomKeeper=null,e.top3Container=null,e.lb_userInfoPrefab=null,e.lb_infoBoardPrefab=null,e.lb_loadingBoardPrefab=null,e.mouseEventSensorNode=null,e.mouseEventSensorCheckSwipeNode=null,e.backToTopBtnNode=null,e.loginNode=null,e.inviteNode=null,e.arrowPointingNode=null,e.profile_background_1st=null,e.profile_background_2nd=null,e.profile_background_3rd=null,e.profile_background_blank_top=null,e.profile_background_blank=null,e.blockInput=null,e.loadingTop=null,e.backBtn=null,e.topKeeper_PC=null,e.botKeeper_PC=null,e.middleKeeper_PC=null,e.playerRankingNode=null,e.lb_infoBoardNode=null,e.lb_loadingBoardNode=null,e.listTopData=null,e.localUserData=null,e.localUserInfo=null,e.posOfLocalItem=null,e.isMouseDown=!1,e.isScrollContentOnTop=!1,e.scrollViewSizeStatus=l.BottomEdge,e.rankTheEndOfContent=0,e.touchStartPos=null,e.touchStartOnTop3Pos=null,e.currentScale=1,e.curTimeFilter=O.TimeFilterType.AllTime,e.curPopulationFilter=O.PopulationFilterType.Worldwide,e.hasMoreEntryToAdd=!0,e.scrollContentKeepPos=null,e.isAdsBannersEnabled=!1,e.typeSwipe=u.none,e.isLocalUserAlreadyLogin=!1,e.shareDialog=null,e.isMouseDragDown=!1,e.DISTANCE_NEXT=700,e.DEFAULT_SCREEN_SIZE=cc.v2(640,960),e.SCROLL_VIEW_BOTTOM_EDGE=463,e.SCROLL_VIEW_TOP_EDGE=200,e.NUMBER_MORE_ENTRY=50,e.BG_LOCAL_USER_HEX_COLER="#92CBFF",e.MAX_NAME_LENGTH=12,e.SWIPE_MIN_LENGHT=100,e.DISTANCE_TO_SHOW_BACK_TO_TOP_BUTTON=100,e.needRefreshLeaderboard=!0,e._isRefreshing=!1,e}return i(o,t),o.prototype.onLoad=function(){this.DISTANCE_NEXT=cc.sys.isMobile?700:902,this.DEFAULT_SCREEN_SIZE=cc.sys.isMobile?cc.v2(640,960):cc.v2(1920,1080),this.initLeaderboardManager()},o.prototype.onActivate=function(){D.NgcTelemetry.inst.LogEvent_EnterScreen("Leaderboard")},o.prototype.onResume=function(){D.NgcTelemetry.inst.LogEvent_EnterScreen("Leaderboard"),this.refreshFilter()},o.prototype.start=function(){var e;this.mouseEventSensorNode.active=!1,this.scrollViewSizeStatus=l.BottomEdge,this.backToTopBtnNode.active=!1,this.topKeeper.getComponent(y.NgcLB_UserInfo).isLocalUser=!0,this.bottomKeeper.getComponent(y.NgcLB_UserInfo).isLocalUser=!0,cc.sys.isMobile||(this.topKeeper_PC.active=this.topKeeper.active,this.topKeeper_PC.opacity=0,this.botKeeper_PC.active=this.bottomKeeper.active,this.botKeeper_PC.opacity=0,this.middleKeeper_PC.active=!0,this.middleKeeper_PC.opacity=0),this.setLoginStatus(w.default.isUserLogined()),A.NgcSocial.inst||(this.loginNode.active=!1),w.default.facebookAccessToken;var t=null===(e=T.default.inst)||void 0===e?void 0:e.getCurSocialInfo(),o=A.SocialType.None,n=!1;t&&("uplay"===t.platform||"ubiconnect"===t.platform?o=A.SocialType.Uplay:"facebook"===t.platform&&(o=A.SocialType.Facebook),o!=A.SocialType.None&&(A.NgcSocial.inst=A.NgcSocial.getSrvInstance(o),n=!0,console.log("Already Logged with ",t.platform))),n&&this.isLocalUserAlreadyLogin&&A.NgcSocial.inst&&A.NgcSocial.inst.fetchInfoWithAccessToken(w.default.socialId).then(function(){A.NgcSocial.inst.sendFriendListToServer(),w.default.localUserName!=A.NgcSocial.inst.getFormatName()&&(w.default.localUserName=C.NgcMain.inst.localUserName=A.NgcSocial.inst.getFormatName(),A.NgcSocial.inst.sendNameToServer()),w.default.avatarUrl!=A.NgcSocial.inst.getProfilePictureUrl()&&(w.default.avatarUrl=A.NgcSocial.inst.getProfilePictureUrl(),A.NgcSocial.inst.sendAvatarToServer())},function(){A.NgcSocial.inst.reLogin()}),this.backBtn.node.active=!I.default.inst.tabBarIsActive,this.scrollView.originX=this.scrollView.x,this.top3Container.originX=this.top3Container.x,this.topKeeper.originX=this.topKeeper.x,this.bottomKeeper.originX=this.bottomKeeper.x,this.firstRankHighlight.opacity=0,this.secondRankHighlight.opacity=0,this.thirdRankHighlight.opacity=0,E.NgcPlatform.inst&&(this.loginNode.parent.active=E.NgcPlatform.inst.getPlatformID()!==E.PlatformID.Poki,E.NgcPlatform.inst.getPlatformID()===E.PlatformID.GameDistribution&&(this.friendsButtonChecked.parent.active=!1,this.loginNode.parent.active=!1))},o.prototype.update=function(){this.checkLocalPosition(),this.isScrollContentOnTop=this.scrollContent.y<=1e-4,cc.sys.isMobile||this.updateKeeperPC()},o.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},o.prototype.initLeaderboardManager=function(){m.NgcLeaderboardManager.inst.initStatus=m.LeaderboardInitStatus.Initializing,m.NgcLeaderboardManager.inst.init(this).catch(function(e){console.warn(e),m.NgcLeaderboardManager.inst.initStatus=m.LeaderboardInitStatus.NotInitialized}).finally(function(){m.NgcLeaderboardManager.inst.isInitalized()?m.NgcLeaderboardManager.inst.showLB():m.NgcLeaderboardManager.inst.initStatus=m.LeaderboardInitStatus.NotInitialized})},o.prototype.switchTimeBased=function(){var e=this.dailyButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.dailyButtonChecked.active=e,this.dailyButtonUnchecked.active=!e;var t=this.weeklyButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.weeklyButtonChecked.active=t,this.weeklyButtonUnchecked.active=!t;var o=this.allTimeButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.allTimeButtonChecked.active=o,this.allTimeButtonUnchecked.active=!o,e?this.curTimeFilter=O.TimeFilterType.Daily:t?this.curTimeFilter=O.TimeFilterType.Weekly:o&&(this.curTimeFilter=O.TimeFilterType.AllTime),this.reloadFilter()},o.prototype.switchPopulationBased=function(){var e=this.friendsButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.friendsButtonChecked.active=e,this.friendsButtonUnchecked.active=!e;var t=this.countryButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.countryButtonChecked.active=t,this.countryButtonUnchecked.active=!t;var o=this.worldwideButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.worldwideButtonChecked.active=o,this.worldwideButtonUnchecked.active=!o,e?this.curPopulationFilter=O.PopulationFilterType.Friends:t?this.curPopulationFilter=O.PopulationFilterType.Country:o&&(this.curPopulationFilter=O.PopulationFilterType.Worldwide),this.reloadFilter()},o.prototype.scrollEvents=function(){this.scrollView.getComponent(cc.ScrollView).inertia=this.scrollViewSizeStatus!==l.Middle&&this.typeSwipe!==u.horizontal,this.updateItemRenderInScrollView(),this.isUserScrollToTheEnd()&&(this.refreshFilter(),console.log("@@@@ SCROLL EVENT")),this.setBackToTopButtonEnable(this.scrollContent.y>=this.DISTANCE_TO_SHOW_BACK_TO_TOP_BUTTON)},o.prototype.show=function(){var e=this;this.node.active=!0,this.reScale(),cc.view.setResizeCallback(function(){e.reScale()}),this.scheduleOnce(function(){e.reScale()},.5)},o.prototype.checkLocalPosition=function(){if(!this.isWithoutContentData()){if(this.isLocalUserInTop3())return this.topKeeper.opacity=this.scrollViewSizeStatus===l.TopEdge?255:0,void(this.bottomKeeper.opacity=0);if(!this.isLocalUserInContent())return this.bottomKeeper.opacity=255,void(this.topKeeper.opacity=0);f.Utils.getWorldPos(this.localUserInfo).y>f.Utils.getWorldPos(this.topKeeper).y?this.posOfLocalItem=d.AboveTop:f.Utils.getWorldPos(this.localUserInfo).y<f.Utils.getWorldPos(this.bottomKeeper).y?this.posOfLocalItem=d.BelowBottom:this.posOfLocalItem=d.InBoard,this.topKeeper.opacity=this.posOfLocalItem===d.AboveTop?255:0,this.bottomKeeper.opacity=this.posOfLocalItem===d.BelowBottom?255:0}},o.prototype.updateScrollViewSize=function(e){if(this.typeSwipe!=u.horizontal&&0!==e&&(!(e>0)||this.isScrollContentOnTop||this.scrollViewSizeStatus!==l.TopEdge)&&!(this.scrollViewSizeStatus===l.BottomEdge&&e>0||this.scrollViewSizeStatus===l.TopEdge&&e<0||this.isUserScrollToTheEnd()&&e<0)){var t=this.playerRankingNode.getComponent(cc.Widget);t.top+=e,t.top=cc.misc.clampf(this.SCROLL_VIEW_TOP_EDGE,this.SCROLL_VIEW_BOTTOM_EDGE,t.top),this.playerRankingNode.getComponentsInChildren(cc.Widget).forEach(function(e){return e.updateAlignment()}),this.updateScrollViewSizeStatus(),e>0&&this.isScrollContentOnTop?this.scrollView.getComponent(cc.ScrollView).scrollToTop(0):this.scrollView.getComponent(cc.ScrollView).setContentPosition(this.scrollContentKeepPos)}},o.prototype.updateTopAndBotKeeper=function(){var e=this.topKeeper.getComponent(y.NgcLB_UserInfo);e.userName.string=this.localUserData.name?this.localUserData.name:"Guest",e.rankNumber.string=this.localUserData.rank?""+this.localUserData.rank:"---";var t=N.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this.localUserData.country);if(null!=t&&(e.flag.spriteFrame=t),e.userScore.string=(this.localUserData.score?L.default.msToTime(this.localUserData.score):"---")+"",e.desktopIcon.active=this.localUserData.devicetype===R.DeviceType.PC,e.mobileIcon.active=this.localUserData.devicetype===R.DeviceType.MOBILE,!this.isLocalUserInTop3()){var o=this.bottomKeeper.getComponent(y.NgcLB_UserInfo);null!=t&&(o.flag.spriteFrame=t),o.userName.string=this.localUserData.name?this.localUserData.name:"Guest",o.rankNumber.string=this.localUserData.rank?""+this.localUserData.rank:"---",o.userScore.string=(this.localUserData.score?L.default.msToTime(this.localUserData.score):"---")+"",o.desktopIcon.active=this.localUserData.devicetype===R.DeviceType.PC,o.mobileIcon.active=this.localUserData.devicetype===R.DeviceType.MOBILE,o.avatarUrl=this.localUserData.avatar,o.avatarUrl?m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(o.avatarUrl).then(function(e){o.avatar.spriteFrame=e},function(e){console.log(e)}):o.avatar.spriteFrame=this.profile_background_blank}e.avatarUrl=this.localUserData.avatar,e.avatarUrl?m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(e.avatarUrl).then(function(t){e.avatar.spriteFrame=t},function(e){console.log(e)}):e.avatar.spriteFrame=this.profile_background_blank},o.prototype.changeViewSizeByMouse=function(e){if(this.isMouseDown){var t=Math.abs(e.getDeltaY())<2*Math.abs(e.getDeltaX())/3;if(this.typeSwipe==u.none&&(this.typeSwipe=t?u.horizontal:u.vertical),this.typeSwipe==u.horizontal);else if(this.typeSwipe==u.vertical){var o=e.getDeltaY();this.updateScrollViewSize(-o),o<0&&(this.isMouseDragDown=!0)}}},o.prototype.isUserScrollToTheEnd=function(){if(this.scrollContent.childrenCount<=1)return!0;var e=this.scrollContent.children[this.scrollContent.childrenCount-1],t=f.Utils.getWorldPos(e),o=f.Utils.getWorldPos(this.scrollView),n=t.y-e.height*e.anchorY,r=o.y-this.scrollView.height*this.scrollView.anchorY;return Math.ceil(n)>=Math.ceil(r)},o.prototype.isItemInCurrentView=function(e){var t=f.Utils.getWorldPos(e),o=f.Utils.getWorldPos(this.scrollView),n=t.y+e.height*(1-e.anchorY),r=t.y-e.height*e.anchorY,i=o.y+this.scrollView.height*(1-this.scrollView.anchorY);return!(n<o.y-this.scrollView.height*this.scrollView.anchorY||r>i)},o.prototype.updateContent=function(){return c(this,void 0,Promise,function(){var e,t,o,n,r,i,a;return s(this,function(){if(!this.listTopData)return[2,!1];if(!this.localUserData)return console.log("[LeaderboardUI] `updateContent` this.localUserData = NULL"),[2,!1];if(e=f.Utils.enumToString(O.TimeFilterType,this.curTimeFilter),t=f.Utils.enumToString(O.PopulationFilterType,this.curPopulationFilter),D.NgcTelemetry.inst.LogEvent_InfoLeaderboard({rankBalance:this.localUserData.rank,leaderboardContext:e,leaderboardCategory:t}),this.lb_loadingBoardNode&&this.removeLoadingBoard(),this.lb_infoBoardNode=null,this.resetAvatarTop3(),this.checkArrowPointLoginIconDisplay(),this.isWithoutContentData())return this.updateContentWithoutData(),this.scrollContent.removeAllChildren(),this.addInviteInfoBoard(),[2,!0];for(null==this.localUserData.score&&(this.localUserData.rank=null),this.scrollContent.removeAllChildren(),this.localUserInfo=null,o=this.listTopData,this.secondRank.opacity=0,this.thirdRank.opacity=0,n=0,r=o;n<r.length;n++)null!==(i=r[n]).rank?(a=null,1===i.rank?a=this.firstRank:2===i.rank?(this.secondRank.opacity=255,a=this.secondRank):3===i.rank?(this.thirdRank.opacity=255,a=this.thirdRank):(a=cc.instantiate(this.lb_userInfoPrefab)).parent=this.scrollContent,this.applyUserDataToNode(i,a)):console.log("[LeaderboardUI] `updateContent` - Rank = null");return console.log("@@ Local user rank ",this.localUserData.rank),o.length>3&&(this.localUserData.rank>99||!this.localUserData.rank)&&(cc.instantiate(this.lb_userInfoPrefab).parent=this.scrollContent),this.rankTheEndOfContent<this.NUMBER_MORE_ENTRY&&this.addInviteInfoBoard(),this.firstRankHighlight.active=1===this.localUserData.rank,this.secondRankHighlight.active=2===this.localUserData.rank,this.thirdRankHighlight.active=3===this.localUserData.rank,this.updateTopAndBotKeeper(),this.checkLocalPosition(),this.updateItemRenderInScrollView(),this.backToTopBtnNode.active=!1,this.updateLocalUserLoginInfo(this.isLocalUserAlreadyLogin),[2,!0]})})},o.prototype.updateContentWithoutData=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(){return 0==this.listTopData.length&&(this.secondRank.opacity=0,this.thirdRank.opacity=0,this.bottomKeeper.opacity=0,(e=this.firstRank.getComponent(y.NgcLB_UserInfo)).userName.string=this.localUserData.name?this.localUserData.name:"Guest",e.userScore.string=(this.localUserData.score?L.default.msToTime(this.localUserData.score):"---")+"",null!=(t=N.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this.localUserData.country))&&(e.flag.spriteFrame=t),e.avatarUrl=this.localUserData.avatar,e.isLocalUser=!0,this.firstRankHighlight.active=!0,this.topKeeper.opacity=0,this.bottomKeeper.opacity=0),[2]})})},o.prototype.reloadFilter=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return this.setBlockInput(!0),this.scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.localUserInfo=null,this.hasMoreEntryToAdd=!0,this.rankTheEndOfContent=0,e=this,[4,m.NgcLeaderboardManager.inst.getTop100(this.curTimeFilter,this.curPopulationFilter)];case 1:return e.listTopData=o.sent(),t=this,[4,m.NgcLeaderboardManager.inst.getLocalPlayerRank(this.curTimeFilter,this.curPopulationFilter)];case 2:return t.localUserData=o.sent(),this.updateContent(),[4,this.loadTop3UserAvatar()];case 3:return o.sent(),this.setBlockInput(!1),[2]}})})},o.prototype.refreshFilter=function(){var e;return c(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return this._isRefreshing?[2]:(this._isRefreshing=!0,null===(e=O.NgcLeaderboard.inst)||void 0===e||e.clearCacheRequestData(),this.setBlockInput(!0),this.localUserInfo=null,this.hasMoreEntryToAdd=!0,this.rankTheEndOfContent=0,t=this,[4,m.NgcLeaderboardManager.inst.getTop100(this.curTimeFilter,this.curPopulationFilter)]);case 1:return t.listTopData=n.sent(),o=this,[4,m.NgcLeaderboardManager.inst.getLocalPlayerRank(this.curTimeFilter,this.curPopulationFilter)];case 2:return o.localUserData=n.sent(),this.updateContent(),[4,this.loadTop3UserAvatar()];case 3:return n.sent(),this.setBlockInput(!1),this._isRefreshing=!1,[2]}})})},o.prototype.isWithoutContentData=function(){return null===this.listTopData||0==this.listTopData.length},o.prototype.addInviteInfoBoard=function(){if(null===this.lb_loadingBoardNode){switch(this.lb_infoBoardNode=cc.instantiate(this.lb_infoBoardPrefab),S.NgcBuildConfig.buildPlatform){case"POKI":case"GameDistribution":this.lb_infoBoardNode.active=!1;break;default:var e=this.isLocalUserAlreadyLogin?"LDB_INVITE_BOARD_INFO":"LDB_LOGIN_BOARD_INFO";this.lb_infoBoardNode.getComponentInChildren(b.NgcLabelLocalized).setLocalizedText(e)}this.lb_infoBoardNode.parent=this.scrollContent}},o.prototype.addLoadingBoard=function(){this.lb_loadingBoardNode=cc.instantiate(this.lb_loadingBoardPrefab),this.lb_loadingBoardNode.parent=this.scrollContent},o.prototype.removeLoadingBoard=function(){var e=this;if(this.scrollContent.childrenCount>0){var t=this.scrollContent.children.findIndex(function(t){return t===e.lb_loadingBoardNode});t>0&&(this.scrollContent.children.splice(t,1),this.lb_loadingBoardNode=null)}},o.prototype.applyUserDataToNode=function(e,t){return c(this,void 0,void 0,function(){var o,n,r;return s(this,function(){return null===(o=t.getComponent(y.NgcLB_UserInfo))?[2]:(o.rankNumber&&(o.rankNumber.string=""+e.rank),o.userName.string=e.name?e.name:"Guest",e.socialId||e.avatar?o.userName.string=w.default.correctNameFormat(o.userName.string):o.userName.string=this.reduceNameLenght(o.userName.string),o.userScore.string=(e.score?L.default.msToTime(e.score):"---")+"",null!=(n=N.NgcCountryFlagsManager.inst.getFlagSpriteFrame(e.country))&&(o.flag.spriteFrame=n),o.isLocalUser=e.rank===this.localUserData.rank,e.rank===this.localUserData.rank&&(this.localUserInfo=t,o.bg2&&(o.bg2.color=o.bg2.color.fromHEX(this.BG_LOCAL_USER_HEX_COLER)),o.userName.string=this.localUserData.name?this.localUserData.name:"Guest",r=N.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this.localUserData.country),o.flag.node.active=null!=r,null!=r&&(o.flag.spriteFrame=r),o.setNeedToSave(!this.isLocalUserAlreadyLogin),cc.sys.isMobile||this.middleKeeper_PC.getComponent(y.NgcLB_UserInfo).setNeedToSave(!this.isLocalUserAlreadyLogin)),o.avatarUrl=e.avatar,o.avatarUrl&&m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(o.avatarUrl).then(function(e){o.avatar.spriteFrame=e},function(e){console.log(e)}),o.desktopIcon&&o.mobileIcon&&(o.desktopIcon.active=e.devicetype===R.DeviceType.PC,o.mobileIcon.active=e.devicetype===R.DeviceType.MOBILE),this.rankTheEndOfContent=Math.max(e.rank,this.rankTheEndOfContent),[2])})})},o.prototype.isLocalUserInTop3=function(){return!(!this.localUserData||!this.localUserData.rank)&&this.localUserData.rank<=3},o.prototype.isLocalUserHasNotRank=function(){return null===this.localUserData.rank},o.prototype.isLocalUserInContent=function(){return null!=this.localUserInfo},o.prototype.reduceNameLenght=function(e){return e.length>this.MAX_NAME_LENGTH&&(e=e.slice(0,this.MAX_NAME_LENGTH-3)+"..."),e},o.prototype.reScale=function(){try{var t=Math.min(1,cc.winSize.width/cc.winSize.height*this.DEFAULT_SCREEN_SIZE.y/this.DEFAULT_SCREEN_SIZE.x);this.node.scale*=t/this.currentScale,this.currentScale=t,this.resizeContent()}catch(e){cc.warn(e)}},o.prototype.isLocalUserExisted=function(){return null!==this.localUserInfo},o.prototype.onButtonTopKeeperClicked=function(){this.isMouseDown=!1,null!==this.localUserData.rank&&void 0!==this.localUserData&&(this.scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.scrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(this.localUserInfo.x,-this.localUserInfo.y)))},o.prototype.updateScrollViewSizeStatus=function(){var e=this.playerRankingNode.getComponent(cc.Widget);e.top===this.SCROLL_VIEW_BOTTOM_EDGE?this.scrollViewSizeStatus=l.BottomEdge:e.top===this.SCROLL_VIEW_TOP_EDGE?this.scrollViewSizeStatus=l.TopEdge:this.scrollViewSizeStatus=l.Middle},o.prototype.updateItemRenderInScrollView=function(){var e=this;this.scrollContent.getComponent(cc.Layout).updateLayout(),this.scrollContent.children.forEach(function(t){t.opacity=e.isItemInCurrentView(t)?255:0})},o.prototype.onInviteButtonOnClick=function(){return c(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return this.shareDialog&&this.shareDialog.isValid?[2]:E.NgcPlatform.isRunFromApp()?(e=S.NgcBuildConfig.services.NavBar.shareUrl+"&origin=native",E.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:"native",link:e}}),"*"),w.default.sharedGame_NavBar=!0,[2]):[4,g.NgcDialogManager.createDialog(v.NgcNavBarShareDialog.dialogType,v.NgcNavBarShareDialog.urlPrefab,v.NgcNavBarShareDialog.bundleName)];case 1:return t=n.sent(),o=t.getComponent(v.NgcNavBarShareDialog),this.shareDialog=o.node,o.init(o.show()),[2]}})})},o.prototype.onLoginButtonOnClick=function(e){return c(this,void 0,void 0,function(){var t,o,n;return s(this,function(r){switch(r.label){case 0:return E.NgcPlatform.inst&&"Poki"==E.NgcPlatform.inst.getName()?[4,g.NgcDialogManager.createDialog(h.NgcMessageDialog.dialogType,h.NgcMessageDialog.urlPrefab,h.NgcMessageDialog.bundleName)]:[3,2];case 1:return t=r.sent(),(o=t.getComponent(h.NgcMessageDialog)).init("NGG_NOT_AVAILABLE_ON_THIS_WEB"),n=cc.sys.isMobile?20:null,o.show(null,e.target,null,n,.6),[2];case 2:return _.NgcNavBarManager.inst&&_.NgcNavBarManager.inst.logInOnClick(),[2]}})})},o.prototype.onButtonBackClick=function(){k.default.inst.goToStartScreen()},o.prototype.onButtonBackToTopClick=function(){this.scrollView.getComponent(cc.ScrollView).scrollToTop(.3),this.updateScrollViewSizeStatus()},o.prototype.setBackToTopButtonEnable=function(e){var t=this;!0===e&&!0===this.backToTopBtnNode.active||(!0===e&&!1===this.backToTopBtnNode.active&&(this.backToTopBtnNode.active=e,cc.Tween.stopAllByTarget(this.backToTopBtnNode),cc.tween(this.backToTopBtnNode).to(.3,{opacity:255}).start()),!1===e&&!0===this.backToTopBtnNode.active&&255===this.backToTopBtnNode.opacity&&(cc.Tween.stopAllByTarget(this.backToTopBtnNode),cc.tween(this.backToTopBtnNode).to(.3,{opacity:0}).call(function(){t.backToTopBtnNode.active=!1}).start()))},o.prototype.updateLocalUserLoginInfo=function(e){this.topKeeper.getComponent(y.NgcLB_UserInfo).setNeedToSave(!e),this.bottomKeeper.getComponent(y.NgcLB_UserInfo).setNeedToSave(!e),cc.sys.isMobile||(this.topKeeper_PC.getComponent(y.NgcLB_UserInfo).setNeedToSave(!e),this.botKeeper_PC.getComponent(y.NgcLB_UserInfo).setNeedToSave(!e),this.middleKeeper_PC.getComponent(y.NgcLB_UserInfo).setNeedToSave(!e))},o.prototype.updateContentFacebookProfile=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(){return A.NgcSocial.inst?(e=this.mouseEventSensorNode.parent,t=this.localUserData.avatar=A.NgcSocial.inst.getProfilePictureUrl(),m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(t).then(function(t){e.getComponentsInChildren(y.NgcLB_UserInfo).forEach(function(e){e.isLocalUser&&(e.avatar.spriteFrame=t,e.userName.string=w.default.localUserName)})},function(e){console.log(e)}),[2]):[2]})})},o.prototype.resetAvatarTop3=function(){this.firstRank.getComponent(y.NgcLB_UserInfo).avatar.spriteFrame=this.profile_background_blank_top,this.secondRank.getComponent(y.NgcLB_UserInfo).avatar.spriteFrame=this.profile_background_blank_top,this.thirdRank.getComponent(y.NgcLB_UserInfo).avatar.spriteFrame=this.profile_background_blank_top},o.prototype.setLoginStatus=function(e){if(E.NgcPlatform.isRunFromApp()){if(this.arrowPointingNode.opacity=0,!w.default.isUserLogined())return this.isLocalUserAlreadyLogin=!1,this.loginNode.active=!1,this.inviteNode.active=!1,void this.updateLocalUserLoginInfo(this.isLocalUserAlreadyLogin);e=!0}this.isLocalUserAlreadyLogin=e,this.loginNode.active=!this.isLocalUserAlreadyLogin,this.inviteNode.active=this.isLocalUserAlreadyLogin,this.updateLocalUserLoginInfo(this.isLocalUserAlreadyLogin)},o.prototype.setBlockInput=function(e){this.blockInput.active=e,this.loadingTop.active=e},o.prototype.loadTop3UserAvatar=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r;return s(this,function(i){switch(i.label){case 0:e=[this.firstRank.getComponent(y.NgcLB_UserInfo),this.secondRank.getComponent(y.NgcLB_UserInfo),this.thirdRank.getComponent(y.NgcLB_UserInfo)],t=function(e){return s(this,function(t){switch(t.label){case 0:return e.avatarUrl?[4,new Promise(function(t){m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(e.avatarUrl).then(function(t){e.avatar.spriteFrame=t},function(e){console.log(e)}).finally(function(){t()})})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},o=0,n=e,i.label=1;case 1:return o<n.length?(r=n[o],[5,t(r)]):[3,4];case 2:i.sent(),i.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},o.prototype.checkArrowPointLoginIconDisplay=function(){this.isLocalUserAlreadyLogin?this.arrowPointingNode.active=!1:this.arrowPointingNode.active=this.isWithoutContentData()||1===this.listTopData.length&&1===this.localUserData.rank},o.prototype.updateKeeperPC=function(){function e(e,t){e.rankNumber&&t.rankNumber.string!==e.rankNumber.string&&(t.rankNumber.string=e.rankNumber.string),t.avatar.spriteFrame!==e.avatar.spriteFrame&&(t.avatar.spriteFrame=e.avatar.spriteFrame),t.flag.spriteFrame!==e.flag.spriteFrame&&(t.flag.spriteFrame=e.flag.spriteFrame),t.userName.string!==e.userName.string&&(t.userName.string=e.userName.string,t.userNameNeedToSave.string=t.userName.string),t.userScore.string!==e.userScore.string&&(t.userScore.string=e.userScore.string),t.desktopIcon.active!==e.desktopIcon.active&&(t.desktopIcon.active=e.desktopIcon.active),t.mobileIcon.active!==e.mobileIcon.active&&(t.mobileIcon.active=e.mobileIcon.active)}this.topKeeper_PC.opacity!==this.topKeeper.opacity&&(this.topKeeper_PC.opacity=this.topKeeper.opacity),this.topKeeper_PC.opacity>0&&(e(this.topKeeper.getComponent(y.NgcLB_UserInfo),this.topKeeper_PC.getComponent(y.NgcLB_UserInfo)),f.Utils.setWorldPos(this.topKeeper_PC,f.Utils.getWorldPos(this.topKeeper))),this.botKeeper_PC.opacity!==this.bottomKeeper.opacity&&(this.botKeeper_PC.opacity=this.bottomKeeper.opacity),this.botKeeper_PC.opacity>0&&(e(this.bottomKeeper.getComponent(y.NgcLB_UserInfo),this.botKeeper_PC.getComponent(y.NgcLB_UserInfo)),f.Utils.setWorldPos(this.botKeeper_PC,f.Utils.getWorldPos(this.bottomKeeper))),0!==this.topKeeper.opacity||0!==this.bottomKeeper.opacity||this.isLocalUserInTop3()||this.isWithoutContentData()?this.middleKeeper_PC.opacity=0:this.middleKeeper_PC.opacity=255,this.middleKeeper_PC.opacity>0&&this.localUserInfo&&(e(this.localUserInfo.getComponent(y.NgcLB_UserInfo),this.middleKeeper_PC.getComponent(y.NgcLB_UserInfo)),f.Utils.setWorldPos(this.middleKeeper_PC,f.Utils.getWorldPos(this.localUserInfo)))},o.prototype.resizeContent=function(){},a([F(cc.ToggleContainer)],o.prototype,"timeFilterTogglerContainer",void 0),a([F(cc.Node)],o.prototype,"dailyButtonChecked",void 0),a([F(cc.Node)],o.prototype,"dailyButtonUnchecked",void 0),a([F(cc.Node)],o.prototype,"weeklyButtonChecked",void 0),a([F(cc.Node)],o.prototype,"weeklyButtonUnchecked",void 0),a([F(cc.Node)],o.prototype,"allTimeButtonChecked",void 0),a([F(cc.Node)],o.prototype,"allTimeButtonUnchecked",void 0),a([F(cc.Node)],o.prototype,"friendsButtonChecked",void 0),a([F(cc.Node)],o.prototype,"friendsButtonUnchecked",void 0),a([F(cc.Node)],o.prototype,"countryButtonChecked",void 0),a([F(cc.Node)],o.prototype,"countryButtonUnchecked",void 0),a([F(cc.Node)],o.prototype,"worldwideButtonChecked",void 0),a([F(cc.Node)],o.prototype,"worldwideButtonUnchecked",void 0),a([F(cc.Node)],o.prototype,"firstRank",void 0),a([F(cc.Node)],o.prototype,"firstRankHighlight",void 0),a([F(cc.Node)],o.prototype,"secondRank",void 0),a([F(cc.Node)],o.prototype,"secondRankHighlight",void 0),a([F(cc.Node)],o.prototype,"thirdRank",void 0),a([F(cc.Node)],o.prototype,"thirdRankHighlight",void 0),a([F(cc.Node)],o.prototype,"scrollView",void 0),a([F(cc.Node)],o.prototype,"scrollContent",void 0),a([F(cc.Node)],o.prototype,"topKeeper",void 0),a([F(cc.Node)],o.prototype,"bottomKeeper",void 0),a([F(cc.Node)],o.prototype,"top3Container",void 0),a([F(cc.Prefab)],o.prototype,"lb_userInfoPrefab",void 0),a([F(cc.Prefab)],o.prototype,"lb_infoBoardPrefab",void 0),a([F(cc.Prefab)],o.prototype,"lb_loadingBoardPrefab",void 0),a([F(cc.Node)],o.prototype,"mouseEventSensorNode",void 0),a([F(cc.Node)],o.prototype,"mouseEventSensorCheckSwipeNode",void 0),a([F(cc.Node)],o.prototype,"backToTopBtnNode",void 0),a([F(cc.Node)],o.prototype,"loginNode",void 0),a([F(cc.Node)],o.prototype,"inviteNode",void 0),a([F(cc.Node)],o.prototype,"arrowPointingNode",void 0),a([F(cc.SpriteFrame)],o.prototype,"profile_background_1st",void 0),a([F(cc.SpriteFrame)],o.prototype,"profile_background_2nd",void 0),a([F(cc.SpriteFrame)],o.prototype,"profile_background_3rd",void 0),a([F(cc.SpriteFrame)],o.prototype,"profile_background_blank_top",void 0),a([F(cc.SpriteFrame)],o.prototype,"profile_background_blank",void 0),a([F(cc.Node)],o.prototype,"blockInput",void 0),a([F(cc.Node)],o.prototype,"loadingTop",void 0),a([F(cc.Widget)],o.prototype,"backBtn",void 0),a([F(cc.Node)],o.prototype,"topKeeper_PC",void 0),a([F(cc.Node)],o.prototype,"botKeeper_PC",void 0),a([F(cc.Node)],o.prototype,"middleKeeper_PC",void 0),a([F(cc.Node)],o.prototype,"playerRankingNode",void 0),a([M],o)}(P.default);n.NgcLeaderboardUI=G,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LB_UserInfo":"LB_UserInfo","../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog":"NavBarShareDialog","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../../../NanoGameCore/Services/Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/Social/Social":"Social","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../ScreenManager":"ScreenManager","../../Utils/Util":"Util"}],Leaderboard_impl_NanoSrv:[function(t,o,n){"use strict";cc._RF.push(o,"c7678ne3ZJEGqh5Cxdwda5P","Leaderboard_impl_NanoSrv");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.DeviceType=void 0;var l=t("../../GameFramework/Scripts/BuildConfig"),u=t("../../GameFramework/Scripts/CountryFlagsManager"),p=t("../../SDK/Nano/NanoSrv"),d=t("./Leaderboard"),f=cc._decorator,h=f.ccclass;f.property,n.DeviceType={MOBILE:"Mobile",PC:"PC"};var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype._preInit=function(){return new Promise(function(e){e("Leaderboard_impl_Nanosrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("Leaderboard_impl_Nanosrv initialized")})},t.prototype._preCacheData=function(e){this._loadData(e)},t.prototype._getLocalPlayerRank=function(e){return c(this,void 0,void 0,function(){var t,o,n=this;return s(this,function(r){switch(r.label){case 0:return t={time:e.timeFilter,population:e.populationFilter,reverseOrder:e.order==d.SORT_ORDER.DESC,country:u.NgcCountryFlagsManager.localCountry},o=null,e.timeSent=Date.now(),e.status=d.RequestStatus.Waiting,[4,new Promise(function(e,n){p.default.inst.serviceGet("/leaderboard/info",t,function(t,r){if(t)return o=t,void n();o=JSON.parse(r),e()})}).then(function(){e.status=d.RequestStatus.Responded,e.timeGotData=Date.now(),e.rank=o}).catch(function(){cc.js.array.remove(n.requestLocalRanks,e)})];case 1:return r.sent(),o&&1==o.status?[2,e.rank]:[2,null]}})})},t.prototype._getPlayerRank=function(e,t){return c(this,void 0,void 0,function(){var o,n,r;return s(this,function(i){switch(i.label){case 0:return o="/leaderboard/"+l.NgcBuildConfig.platformGameID+"/"+e+"/info",n={time:t.timeFilter,population:t.populationFilter,country:u.NgcCountryFlagsManager.localCountry},r=null,t.timeSent=Date.now(),t.status=d.RequestStatus.Waiting,[4,new Promise(function(e,t){p.default.inst.serviceGet(o,n,function(o,n){if(o)return r=o,void t();r=JSON.parse(n),e()})}).then(function(){t.status=d.RequestStatus.Responded,t.timeGotData=Date.now(),t.rank=r.data}).catch(function(){})];case 1:return i.sent(),r&&1==r.status?[2,t.rank]:[2,null]}})})},t.prototype._loadData=function(e){return c(this,void 0,void 0,function(){var t,o,n=this;return s(this,function(r){switch(r.label){case 0:return t={offset:e.position,count:e.numRecords,time:e.timeFilter,population:e.populationFilter,reverseOrder:e.order==d.SORT_ORDER.DESC,country:u.NgcCountryFlagsManager.localCountry,playerid:p.default.inst.userID},o=null,e.timeSent=Date.now(),e.status=d.RequestStatus.Waiting,[4,new Promise(function(e,n){p.default.inst.serviceGet("/leaderboard/top",t,function(t,r){if(t)return o=t,void n();o=JSON.parse(r),e()})}).then(function(){e.status=d.RequestStatus.Responded,e.timeGotData=Date.now(),e.result=o}).catch(function(){cc.js.array.remove(n.requestLeaderboards,e)})];case 1:return r.sent(),[2,e.result]}})})},t.prototype._uploadScore=function(e,t){return void 0===e&&(e=0),void 0===t&&(t="GT"),c(this,void 0,void 0,function(){var o,r;return s(this,function(i){switch(i.label){case 0:return o={score:e,option:t,country:u.NgcCountryFlagsManager.localCountry,deviceType:cc.sys.isMobile?n.DeviceType.MOBILE:n.DeviceType.PC},r=null,[4,new Promise(function(e,t){p.default.inst.servicePost("/leaderboard/updatescore",JSON.stringify(o),function(o,n){if(o)return r=o,void t();r=JSON.parse(n),e()})})];case 1:return i.sent(),[2,r]}})})},t.prototype._uploadLeaugeScore=function(e,t,o){return void 0===t&&(t=0),void 0===o&&(o="GT"),c(this,void 0,void 0,function(){var r,i;return s(this,function(a){switch(a.label){case 0:return r={score:t,name:e,option:o,deviceType:cc.sys.isMobile?n.DeviceType.MOBILE:n.DeviceType.PC},i=null,[4,new Promise(function(e,t){p.default.inst.servicePost("/leaderboard/updateleaguescore",JSON.stringify(r),function(o,n){if(o)return i=o,void t();i=JSON.parse(n),e()})})];case 1:return a.sent(),[2,i]}})})},t.prototype._groupAPIRequest=function(e){return c(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return t={listApi:e},o=null,[4,new Promise(function(e,n){p.default.inst.servicePost("/transact",JSON.stringify(t),function(t,r){if(t)return o=t,void n();o=JSON.parse(r),e()})})];case 1:return n.sent(),[2,o]}})})},t.prototype.update=function(){},a([h],t)}(d.NgcLeaderboard);n.default=g,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../SDK/Nano/NanoSrv":"NanoSrv","./Leaderboard":"Leaderboard"}],Leaderboard:[function(t,o,n){"use strict";cc._RF.push(o,"105784w5AlPg7tfcDoUob4Z","Leaderboard");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},c=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcLeaderboard=n.RequestLocalRank=n.RequestLeaderboard=n.SORT_ORDER=n.UpdateMode=n.RequestStatus=n.PopulationFilterType=n.TimeFilterType=void 0;var s,l,u=t("../Service"),p=cc._decorator;p.ccclass,p.property,n.TimeFilterType={Daily:"daily",Weekly:"weekly",Monthly:"monthly",AllTime:"alltime"},n.PopulationFilterType={Friends:"friends",Country:"country",Worldwide:"worldwide"},function(e){e[e.Waiting=0]="Waiting",e[e.Responded=1]="Responded"}(s=n.RequestStatus||(n.RequestStatus={})),function(e){e[e.CHANGE=0]="CHANGE",e[e.LT=1]="LT",e[e.GT=2]="GT"}(n.UpdateMode||(n.UpdateMode={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(l=n.SORT_ORDER||(n.SORT_ORDER={}));var d=function(e,t,o,r,i){void 0===e&&(e=n.TimeFilterType.Daily),void 0===t&&(t=n.PopulationFilterType.Friends),void 0===o&&(o=1),void 0===r&&(r=20),void 0===i&&(i=l.DESC),this.timeFilter=n.TimeFilterType.Daily,this.populationFilter=n.PopulationFilterType.Friends,this.position=null,this.numRecords=20,this.timeSent=0,this.timeGotData=0,this.result=null,this.status=null,this.order=l.DESC,this.timeFilter=e,this.populationFilter=t,this.position=o,this.numRecords=r,this.order=i};n.RequestLeaderboard=d;var f=function(e,t,o){void 0===e&&(e=n.TimeFilterType.Daily),void 0===t&&(t=n.PopulationFilterType.Friends),void 0===o&&(o=l.DESC),this.timeFilter=n.TimeFilterType.Daily,this.populationFilter=n.PopulationFilterType.Friends,this.rank=null,this.timeSent=0,this.timeGotData=0,this.status=null,this.order=l.DESC,this.timeFilter=e,this.populationFilter=t,this.order=o};n.RequestLocalRank=f;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requestLeaderboards=[],t.maxTimeForValidCacheData=60,t.timeTimeOut=10,t.requestLocalRanks=[],t.timeUpdateLocalRank=0,t.defaultTimeFilter=n.TimeFilterType.Daily,t.defaultPopulationFilter=n.PopulationFilterType.Friends,t.defaultPosition=1,t.defaultNumRecords=20,t}return i(t,e),t.prototype.getName=function(){return"Leaderboard"},t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.preCacheData=function(e){void 0===e&&(e=new d),this.requestLbIsAlreadyExist(e)||(this.requestLeaderboards.push(e),this._preCacheData(e),this.getLocalPlayerRank(e.timeFilter,e.populationFilter,e.order))},t.prototype.preCacheAfterGotRespone=function(e){var t=new d;t.numRecords=e.numRecords,t.populationFilter=e.populationFilter,t.timeFilter=e.timeFilter,t.position=e.position+e.numRecords,t.order=e.order,this.preCacheData(t);var o=new d;o.numRecords=e.numRecords,o.populationFilter=e.populationFilter,o.timeFilter=e.timeFilter,o.position=e.position-e.numRecords,o.order=e.order,o.position>=0&&this.preCacheData(o)},t.prototype.loadData=function(e){return void 0===e&&(e=new d),a(this,void 0,void 0,function(){var t,o;return c(this,function(n){switch(n.label){case 0:return(t=this.requestLbIsAlreadyExist(e))?t.status!=s.Responded?[3,1]:(this.preCacheAfterGotRespone(t),[2,t.result]):[3,4];case 1:return[4,this.timeout(100)];case 2:return n.sent(),[4,this.loadData(e)];case 3:return[2,n.sent()];case 4:return this.requestLeaderboards.push(e),[4,this._loadData(e)];case 5:return o=n.sent(),this.preCacheAfterGotRespone(e),[2,o]}})})},t.prototype.getLocalPlayerRank=function(e,t,o){return void 0===o&&(o=l.DESC),a(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:return n=new f(e,t,o),this.requestlocalRankIsAlreadyExist(n)?(n=this.requestlocalRankIsAlreadyExist(n)).status!=s.Responded?[3,1]:[2,n.rank]:[3,4];case 1:return[4,this.timeout(100)];case 2:return r.sent(),[4,this.getLocalPlayerRank(e,t,o)];case 3:return[2,r.sent()];case 4:return this.requestLocalRanks.push(n),[4,this._getLocalPlayerRank(n)];case 5:return[2,r.sent()]}})})},t.prototype.getPlayerRank=function(e,t,o,n){return void 0===n&&(n=l.DESC),a(this,void 0,void 0,function(){var r;return c(this,function(i){switch(i.label){case 0:return r=new f(t,o,n),[4,this._getPlayerRank(e,r)];case 1:return[2,i.sent()]}})})},t.prototype.uploadScore=function(e,t){return void 0===e&&(e=0),void 0===t&&(t="GT"),a(this,void 0,void 0,function(){return c(this,function(o){switch(o.label){case 0:return this.clearCacheRequestData(),[4,this._uploadScore(e,t)];case 1:return[2,o.sent()]}})})},t.prototype.uploadLeaugeScore=function(e,t,o){return void 0===o&&(o="GT"),a(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return this.clearCacheRequestData(),[4,this._uploadLeaugeScore(e,t,o)];case 1:return[2,n.sent()]}})})},t.prototype.groupAPIRequest=function(e){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.clearCacheRequestData(),[4,this._groupAPIRequest(e)];case 1:return[2,t.sent()]}})})},t.prototype.requestLbIsAlreadyExist=function(e){var t=this;void 0===e&&(e=new d);var o=null;return this.requestLeaderboards.forEach(function(n){n.timeFilter!=e.timeFilter||n.populationFilter!=e.populationFilter||n.position!=e.position||n.order!=e.order||n.numRecords!=e.numRecords||(n.status==s.Responded&&Date.now()-n.timeGotData>1e3*t.maxTimeForValidCacheData?cc.js.array.remove(t.requestLeaderboards,n):o=n)}),o},t.prototype.requestlocalRankIsAlreadyExist=function(e){var t=this,o=null;return this.requestLocalRanks.forEach(function(n){n.timeFilter!=e.timeFilter||n.populationFilter!=e.populationFilter||(n.status==s.Responded&&Date.now()-n.timeGotData>1e3*t.maxTimeForValidCacheData?cc.js.array.remove(t.requestLocalRanks,n):o=n)}),o},t.prototype.timeout=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.prototype.start=function(){this.preCacheData()},t.prototype.getTopLeaderboard=function(e,t,o,r){return void 0===e&&(e=n.TimeFilterType.Daily),void 0===t&&(t=n.PopulationFilterType.Friends),void 0===r&&(r=20),a(this,void 0,void 0,function(){var n;return c(this,function(i){switch(i.label){case 0:return this.cacheTopLeaderboardAllFilter(r,o),n=new d(e,t,0,r,o),[4,this.loadData(n)];case 1:return[2,i.sent()]}})})},t.prototype.getNearLocalPlayer=function(e,t,o,r){return void 0===e&&(e=n.TimeFilterType.Daily),void 0===t&&(t=n.PopulationFilterType.Friends),void 0===r&&(r=10),a(this,void 0,void 0,function(){var n,i;return c(this,function(a){switch(a.label){case 0:return[4,this.getLocalPlayerRank(e,t,o)];case 1:return n=a.sent(),i=new d(e,t,Math.max(1,n-r),2*r,o),[4,this.loadData(i)];case 2:return[2,a.sent()]}})})},t.prototype.cacheTopLeaderboardAllFilter=function(e,t){for(var o in void 0===t&&(t=l.DESC),n.TimeFilterType)for(var r in n.PopulationFilterType){var i=new d(n.TimeFilterType[o],n.PopulationFilterType[r],0,e,t);this.loadData(i)}},t.prototype.clearCacheRequestData=function(){this.requestLeaderboards=[],this.requestLocalRanks=[]},t.srvInstances=[],t.inst=null,t}(u.NgcService);n.NgcLeaderboard=h,cc._RF.pop()},{"../Service":"Service"}],LeagueItem:[function(e,t,o){"use strict";cc._RF.push(t,"8aed9GhketIXJnePMYoTCXy","LeagueItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),s=e("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),l=e("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),u=e("../Utils/Util"),p=cc._decorator,d=p.ccclass,f=p.property;(function(e){e[e.NORAML=0]="NORAML",e[e.SELECT=1]="SELECT"})(a||(a={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackNameLb=null,t.personalBestTime=null,t.youBeat=null,t.worldBestTime=null,t.worldFlag=null,t.worldAvatar=null,t.leagueMapIcon=null,t.personalBestGroup=null,t.bg=null,t.bg_resource=[],t}return r(t,e),t.prototype.init=function(e,t){var o=this,n=this;this.infor=e,this.parentNode=t,this.trackNameLb.string=e.leagueTrack.trackName;var r=0!=e.personalBestTime;this.personalBestTime.string=u.default.msToTime(r?e.personalBestTime:e.trackDefaultTime);var i=0==e.worldBestTime?u.default.msToTime(e.trackDefaultTime):u.default.msToTime(e.worldBestTime);if(this.worldBestTime.string=i,this.personalBestGroup.opacity=r?255:100,c.NgcBuildConfig.offlineMode)this.youBeat.node.active=!1;else{var a=l.NgcLocalizedManager.t("TMB_TOP_XX_WORLD").text.replace("XX",e.youBeatPecent.toString());this.youBeat.string=a}e.worldAvatarUrl&&!c.NgcBuildConfig.offlineMode&&u.default.loadSpriteFrameFromURL(e.worldAvatarUrl).then(function(e){o.worldAvatar.spriteFrame=e}).catch(function(){}),e.worldCountry&&(this.worldFlag.spriteFrame=s.NgcCountryFlagsManager.inst.getFlagSpriteFrame(e.worldCountry.toLowerCase())),cc.resources.load(e.leagueTrack.trackThumbnailUrl,cc.SpriteFrame,function(e,t){e?cc.warn(e):n.leagueMapIcon.spriteFrame=t})},t.prototype.onClick=function(){this.parentNode.emit("onLeagueItemClick",this.infor.leagueTrack)},t.prototype.select=function(e){this.bg.spriteFrame=e?this.bg_resource[a.SELECT]:this.bg_resource[a.NORAML]},i([f(cc.Label)],t.prototype,"trackNameLb",void 0),i([f(cc.Label)],t.prototype,"personalBestTime",void 0),i([f(cc.Label)],t.prototype,"youBeat",void 0),i([f(cc.Label)],t.prototype,"worldBestTime",void 0),i([f(cc.Sprite)],t.prototype,"worldFlag",void 0),i([f(cc.Sprite)],t.prototype,"worldAvatar",void 0),i([f(cc.Sprite)],t.prototype,"leagueMapIcon",void 0),i([f(cc.Node)],t.prototype,"personalBestGroup",void 0),i([f(cc.Sprite)],t.prototype,"bg",void 0),i([f(cc.SpriteFrame)],t.prototype,"bg_resource",void 0),i([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../Utils/Util":"Util"}],LeagueManager:[function(t,o,n){"use strict";cc._RF.push(o,"c4ff0ZbnApEcINXqAsqRTpc","LeagueManager");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../NanoGameCore/Core/nCSV"),u=t("../../NanoGameCore/Core/Utils"),p=t("../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),d=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),f=t("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),h=t("../../NanoGameCore/SDK/Nano/NanoSrv"),g=t("../../NanoGameCore/Services/Ads/Ads"),y=t("../../NanoGameCore/Services/Leaderboard/Leaderboard"),m=t("../Currency/Currency"),_=t("../Maps/DrawMap"),v=t("../Screens/StartScreen/StartMain"),S=t("../SoundManager"),N=t("../UserInfo"),b=t("../Utils/ConstConfig"),C=t("../Utils/Util"),P=t("./LeagueUI"),I=cc._decorator,w=I.ccclass,T=I.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leagueUI=null,t.cachedLeagueData=null,t._pagesInfo=[],t._tempBestScore=0,t.lastBestScore=0,t.leagueName=[],t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){var e=this;o.inst=this,0==o.leagueTracks.length?o.loadLeagueTable(function(){cc.log("Load data loadLeagueTable"),e._initPages()}):this._pagesInfo.length},t.prototype.start=function(){},t.loadLeagueTable=function(e){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return d.NgcBuildConfig.offlineMode?[4,m.default.loadTable()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,new Promise(function(t){cc.resources.load(b.ConstConfig.MAP_TABLE,cc.TextAsset,function(n,r){if(n||!r)cc.log(n);else{var i=l.nCSV.parseTable(r.text,!0);i&&i.forEach(function(e){if(e.TrackID){var t={trackID:e.TrackID,trackName:e.TrackName,trackFile:e.TrackFile,trackTier:parseInt(e.Tier),trackDefaultTime:parseInt(e.DefaultTime),trackThumbnailUrl:e.Thumbnail};o.leagueTracks.push(t)}}),e&&"function"==typeof e&&e()}t()})})];case 3:return t.sent(),[2]}})})},t.prototype._initPages=function(){if(m.default.isLoaded&&o.leagueTracks.length>0){this.leagueName=["TMB_BRONZE_LEAGUE","TMB_SILVER_LEAGUE","TMB_GOLD_LEAGUE","TMB_PLATINUM_LEAGUE","TMB_DIAMOND_LEAGUE"];for(var e=0;e<m.TIERS.Length;e++){var t=this._getLeagueItemsByTier(e),n={tier:e,bestCareer:this.getBestScore(e),leagueName:this.leagueName[e],bestReward:m.default.getLeagueReward(1,e),entryFee:m.default.getLeagueFee(e),leagueInforItems:t};this._pagesInfo.push(n)}cc.log("this._pagesInfo",this._pagesInfo)}else cc.error("Need to load Currency first")},t.prototype.getPages=function(){return this._pagesInfo},t.clearCached=function(){o.inst&&(o.inst.cachedLeagueData=null)},t.prototype.show=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return 0==this.getPages().length&&this._initPages(),0==this.getPages().length?[3,3]:(v.default.inst.loadingNode.active=!0,this._tempBestScore==o.inst.getBestScore()&&this.cachedLeagueData?[3,2]:(e=this,[4,this.loadTopLeague()]));case 1:e.cachedLeagueData=t.sent(),t.label=2;case 2:return this.initData(this.cachedLeagueData),this.leagueUI.active=!0,this.leagueUI.getComponent(P.default).init(),v.default.inst.loadingNode.active=!1,[3,4];case 3:this._tempBestScore=null,cc.log("Need to load League Table first"),t.label=4;case 4:return[2]}})})},t.prototype.initData=function(e){0==this.getPages().length&&this._initPages(),this.cachedLeagueData=e,this._pagesInfo.forEach(function(t){t.leagueInforItems.forEach(function(t){for(var o=0,n=e;o<n.length;o++){var r=n[o];if(r.leagueName==t.leagueTrack.trackID){var i=r.rank;i||(i=r.minRank+1),t.youBeatPecent=i;var a=b.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+t.leagueTrack.trackFile;if(t.personalBestTime=r.score||0,d.NgcBuildConfig.offlineMode){var c=N.UserInfo.getNumValue(a);(c<t.personalBestTime||0===t.personalBestTime)&&(t.personalBestTime=c,N.UserInfo.setNumValue(t.personalBestTime,a))}else N.UserInfo.setNumValue(t.personalBestTime,a);r.best&&r.best.playerId&&(t.worldAvatarUrl=r.best.avatar,t.worldBestTime=r.best.score,t.worldCountry=r.best.country),d.NgcBuildConfig.offlineMode&&t.worldBestTime&&t.worldBestTime>t.personalBestTime&&t.personalBestTime>0&&(t.worldBestTime=t.personalBestTime,t.worldCountry=f.NgcCountryFlagsManager.localCountry);break}}})}),this._tempBestScore=this.getBestScore()},t.prototype.hide=function(){this.leagueUI.active=!1},t.prototype.isShow=function(){return this.leagueUI.active},t.prototype._getLeagueItemsByTier=function(e){var t=[];return o.leagueTracks.forEach(function(o){var n=o.trackTier;if(e==n){var r={youBeatPecent:0,leagueTrack:o,personalBestTime:N.UserInfo.getNumValue(b.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+o.trackFile),trackDefaultTime:o.trackDefaultTime,worldBestTime:61234,worldAvatarUrl:null,worldCountry:"vn"};t.push(r)}}),t},t.prototype.randomTrack=function(){var e=C.default.randomFromTo(0,o.leagueTracks.length-1),t=o.leagueTracks[e];return t&&o.setSelectTrack(t),t},t.prototype.setTrackByName=function(e){o.leagueTracks.forEach(function(t){e==t.trackFile&&o.setSelectTrack(t)})},t.setSelectTrack=function(e){o._currTrack=e,_.default.setMap(o._currTrack.trackFile)},t.prototype.getCurLeague=function(){var e=null;return o._currTrack&&this.getPages().forEach(function(t){t.leagueInforItems&&t.leagueInforItems.forEach(function(n){n.leagueTrack.trackID==o._currTrack.trackID&&(e=t)})}),e},t.enableTutorialTrack=function(){o.setSelectTrack(o._tutorialTrack)},t.getSelectTrack=function(){return this._currTrack},t.prototype.getBestScore=function(e){void 0===e&&(e=null);var t=0;return o.leagueTracks.forEach(function(o){var n=N.UserInfo.getNumValue(b.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+o.trackFile);0==n&&(n=o.trackDefaultTime),(null!=e&&e==o.trackTier||null==e)&&(t+=n)}),t},t.prototype.loadTopLeague=function(e){var t;return void 0===e&&(e=h.default.inst.userID),c(this,void 0,void 0,function(){var n,r,i,a;return s(this,function(c){switch(c.label){case 0:return d.NgcBuildConfig.offlineMode?null!==this.cachedLeagueData?[2,this.cachedLeagueData]:[4,u.LoadAsset("Offline/league-data",cc.JsonAsset)]:[3,2];case 1:return r=c.sent(),n=null===(t=r.json)||void 0===t?void 0:t.data,[3,4];case 2:return i=[],o.leagueTracks.forEach(function(t){var o={url:"leaderboard.getRankByName",params:{leagueName:t.trackID,includeTop:!0,reverseOrder:!1,playerId:e}};i.push(o)}),[4,y.NgcLeaderboard.inst.groupAPIRequest(i)];case 3:a=c.sent(),cc.log("_loadTopLeague",a),n=a.data,c.label=4;case 4:return[2,n]}})})},t.prototype.onPlayClick=function(e){var t,o,n=this,r=N.UserInfo.getNumValue(b.ConstConfig.SAVE_KEY.INTERSTITIAL_ADS_TIMESTAMP);Date.now()-r>=12e4&&(null===(t=p.default.inst)||void 0===t?void 0:t.hasAds(g.AdsType.Interstitial))?null===(o=p.default.inst)||void 0===o||o.showInterstitial(p.NgcPointcuts.interstitialMenu,function(){S.default.inst.stopMusic()},function(){N.UserInfo.setNumValue(Date.now(),b.ConstConfig.SAVE_KEY.INTERSTITIAL_ADS_TIMESTAMP),n.enterGame(e)}):this.enterGame(e)},t.prototype.enterGame=function(e){o.setSelectTrack(e),v.default.inst.playerClickedStart(),this.hide()},t.leagueTracks=[],t._tutorialTrack={trackID:"track000",trackName:"000: Stadium",trackFile:"map/track000",trackTier:0,trackDefaultTime:0,trackThumbnailUrl:""},a([T(cc.Node)],t.prototype,"leagueUI",void 0),o=a([w],t)}(cc.Component);n.default=O,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../../NanoGameCore/Core/nCSV":"nCSV","../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../NanoGameCore/Services/Ads/Ads":"Ads","../../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../Currency/Currency":"Currency","../Maps/DrawMap":"DrawMap","../Screens/StartScreen/StartMain":"StartMain","../SoundManager":"SoundManager","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util","./LeagueUI":"LeagueUI"}],LeaguePage:[function(e,t,o){"use strict";cc._RF.push(t,"604e8z1c5ZAPqV6E4VIQsyS","LeaguePage");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),c=e("./LeagueItem"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tierIcon=null,t.tierBg=null,t.tierNameLb=null,t.bestRewardCoinLb=null,t.entryFeedCoinLb=null,t.contentLayout=null,t.tierFrames=[],t.tierBgs=[],t.leagueItemPf=null,t._listItems=[],t}return r(t,e),t.prototype.init=function(e,t,o){var n=this;cc.log("LeaguePageInfo",e),this._info=e,this.tierIcon.spriteFrame=this.tierFrames[e.tier],this.tierBg.spriteFrame=this.tierBgs[e.tier],this.entryFeedCoinLb.string=e.entryFee.toString(),this.bestRewardCoinLb.string=e.bestReward.toString(),this.tierNameLb.setLocalizedText(e.leagueName),e.leagueInforItems.forEach(function(e){var o=cc.instantiate(n.leagueItemPf),r=o.getComponent(c.default);r.init(e,t),n._listItems.push(r),n.contentLayout.node.addChild(o)}),this._leagUIParent=t,this._pageIndex=o},t.prototype.getItems=function(){return this._listItems},t.prototype.onClick=function(){cc.sys.isMobile||this._leagUIParent.emit("onPageClick",this._pageIndex)},i([u(cc.Sprite)],t.prototype,"tierIcon",void 0),i([u(cc.Sprite)],t.prototype,"tierBg",void 0),i([u(a.NgcLabelLocalized)],t.prototype,"tierNameLb",void 0),i([u(cc.Label)],t.prototype,"bestRewardCoinLb",void 0),i([u(cc.Label)],t.prototype,"entryFeedCoinLb",void 0),i([u(cc.Layout)],t.prototype,"contentLayout",void 0),i([u({type:cc.SpriteFrame})],t.prototype,"tierFrames",void 0),i([u({type:cc.SpriteFrame})],t.prototype,"tierBgs",void 0),i([u({type:cc.Prefab})],t.prototype,"leagueItemPf",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","./LeagueItem":"LeagueItem"}],LeagueUI:[function(t,o,n){"use strict";cc._RF.push(o,"e57b3eQU61M2Yv0VeDSyECL","LeagueUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),u=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),p=t("../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),d=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),f=t("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),h=t("../../NanoGameCore/SDK/Nano/NanoSrv"),g=t("../../NanoGameCore/Services/Ads/Ads"),y=t("../Dialog/GetMoreCoinDialog/GetMoreCoinDialog"),m=t("../Dialog/InsufficientDialog/InsufficientDialog"),_=t("../Screens/StartScreen/StartMain"),v=t("../SpecialOffer/SpecialOffer"),S=t("../UserInfo"),N=t("../Utils/ConstConfig"),b=t("../Utils/Util"),C=t("./LeagueManager"),P=t("./LeaguePage"),I=cc._decorator,w=I.ccclass,T=I.property,O=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageView=null,e.pagePf=null,e.bestLb=null,e.leftButton=null,e.rightButton=null,e.playButton=null,e.fadeEffectMat=null,e.materialNode=null,e.mainLayout=null,e.exitNode=null,e._listPages=[],e._distance2Page=0,e._initDone=!1,e._viewH=0,e._leagueTrackSelected=null,e.defaulScreenSize=cc.v2(640,960),e}return i(o,t),o.prototype.start=function(){this.leftButton.active=this.rightButton.active=!cc.sys.isMobile&&!0,this.node.on("onPageClick",this.onPageClick.bind(this)),this.node.on("onLeagueItemClick",this.onLeagueItemClick.bind(this)),cc.sys.isMobile?window.addEventListener("resize",this.onResized.bind(this)):cc.view.on("canvas-resize",this.onResized,this),this._viewH=cc.view.getFrameSize().height},o.prototype.onTheLeft=function(){var e=this.pageView.getCurrentPageIndex();e>0&&(e--,this.pageView.scrollToPage(e,.3))},o.prototype.onTheRight=function(){var e=this.pageView.getCurrentPageIndex();e<this.pageView.getPages().length-1&&(e++,this.pageView.scrollToPage(e,.3))},o.prototype.init=function(){var t=this;for(var o in C.default.inst.getPages().forEach(function(e,o){var n=cc.instantiate(t.pagePf),r=n.getComponent(P.default);r.init(e,t.node,o),t._listPages.push(r),t.pageView.addPage(n)}),cc.log(this.pageView.getPages()),this.pageView.getPages()){var n=parseInt(o);0==n||isNaN(n)||this.pageView.getPages()[n].setScale(.875)}this.pageView.setCurrentPageIndex(0),this.setSelectPage(0),this.scheduleOnce(function(){var o,n,r=t.pageView.getPages()[0];t._distance2Page=r.width,t._centerPos=t.getWp(t.pageView.node),t.bestLb.string=b.default.msToTime(C.default.inst.getBestScore());try{(null===(o=p.default.inst)||void 0===o?void 0:o.hasAds(g.AdsType.Banner))&&(null===(n=p.default.inst)||void 0===n||n.showBanner(p.NgcPointcuts.bannerLeague))}catch(e){cc.warn(e)}t.applyFadeMaterial(),t._initDone=!0,t.onEvent(t.pageView,null,null)},.1),u.NgcNavBarManager.inst.showAllNavBar(!1),this.pageView.node.opacity=0,this.onResized(),cc.tween(this.pageView.node).to(.5,{opacity:255}).start(),cc.log("LeagueUI Init Page")},o.prototype.onResized=function(){var t=this;if(cc.log("Resize call"),this.node.active)try{var o=this.pageView.getCurrentPageIndex();this.pageView.scrollToPage(0,0),this.scheduleOnce(function(){t.pageView.scrollToPage(o,0);var e=t.pageView.getPages()[0];t._distance2Page=e.width,cc.sys.isMobile||(t._distance2Page+=e.width/2.5),t._centerPos=t.getWp(t.pageView.node),t.applyFadeMaterial();var n=cc.view.getFrameSize().height/t._viewH;cc.log("cc.view.getFrameSize().height",n);var r=t.mainLayout.getComponent(cc.Widget);r&&(r.enabled=!1,n>.8&&(n=.8),t.mainLayout.scale=n)},.1)}catch(e){}},o.prototype.applyFadeMaterial=function(){var e=this;if(!cc.sys.isMobile){var t=b.default.getAllNode(this.materialNode);this.fadeEffectMat.setProperty("fadePos",this._centerPos.x),this.fadeEffectMat.setProperty("fadeInfluence",this._distance2Page+100),t.forEach(function(t){var o=t.getComponent(cc.Sprite);o&&o.setMaterial(0,e.fadeEffectMat);var n=t.getComponent(cc.Label);n&&n.setMaterial(0,e.fadeEffectMat)})}},o.prototype.onEnable=function(){},o.prototype.onDisable=function(){var e;this.reset(),null===(e=p.default.inst)||void 0===e||e.hide(p.NgcPointcuts.bannerLeague),this._initDone=!1},o.prototype.hide=function(e){var t,o;d.NgcBuildConfig.offlineMode||(_.default.inst.GIF.active=!1),this.node.active=!1,v.default.inst.refreshOffer(),u.NgcNavBarManager.inst.showAllNavBar(!0),null===(t=p.default.inst)||void 0===t||t.hide(p.NgcPointcuts.bannerLeague),e&&(null===(o=p.default.inst)||void 0===o||o.show(p.NgcPointcuts.bannerMainMenu,g.AdsType.Banner)),_.default.inst.showGIF(!0)},o.prototype.reset=function(){this._listPages.forEach(function(e){e.destroy()}),this._listPages=[],this.pageView&&this.pageView.removeAllPages()},o.prototype.update=function(){if((this.pageView.isScrolling()||this.pageView.isAutoScrolling())&&this._initDone){var e=this.pageView.getPages().length,t=this.pageView.getCurrentPageIndex(),o=null,n=null,r=this.pageView.getPages()[t];if(t<e-1&&(o=this.pageView.getPages()[t+1]),t>0&&(n=this.pageView.getPages()[t-1]),o){var i=this.calculateScale(o);o.setScale(i),o.opacity=this.calculateOpacity(i)}n&&(i=this.calculateScale(n),n.setScale(i),n.opacity=this.calculateOpacity(i)),r&&(i=this.calculateScale(r),r.setScale(i),r.opacity=this.calculateOpacity(i))}},o.prototype.calculateScale=function(e){var t=this.getWp(e),o=.125*Math.abs(Math.round(this._centerPos.x-t.x))/this._distance2Page;return 1-o>.875?1-o:.875},o.prototype.calculateOpacity=function(e){return 150+105*(.125-(1-e))/.125},o.prototype.onEvent=function(e){var t=e.getCurrentPageIndex();C.default.inst.getPages()[t],this.setSelectPage(t),cc.log("onEvent");var o=e.getPages().length;e.getPages().forEach(function(n,r){0==t?r>t+1&&(e.getPages()[r].opacity=0):t==o-1?r<t-1&&(e.getPages()[r].opacity=0):r<t-1?e.getPages()[r].opacity=0:r>t+1&&(e.getPages()[r].opacity=0)})},o.prototype.getWp=function(e){return cc.v2(e.parent.convertToWorldSpaceAR(e.position))},o.prototype.setSelectPage=function(e){this.autoSelectTrack(e),C.default.inst.getPages()[e].entryFee,S.UserInfo.curCoin},o.prototype.onPlayClick=function(){var e;return c(this,void 0,void 0,function(){var t,o,n,r,i,a,u,d,_,v=this;return s(this,function(b){switch(b.label){case 0:return t=this.pageView.getCurrentPageIndex(),(o=C.default.inst.getPages()[t]).entryFee>S.UserInfo.curCoin?(n=null===(e=p.default.inst)||void 0===e?void 0:e.hasAds(g.AdsType.VideoReward),r=S.UserInfo.getNumValue(N.ConstConfig.SAVE_KEY.TIME_WATCH_ADS_GET_MORE),i=Date.now()-r>=3e5,n&&i?[4,l.NgcDialogManager.createDialog(y.default.dialogType,y.default.urlPrefab,"")]:[3,2]):[3,5];case 1:return u=b.sent(),d=u.getComponent(y.default),a=Number(h.default.inst.getCurGameInfo()._custom.NEC)||N.ConstConfig.NEC_BONUS,d.init(a,function(){return c(v,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,S.UserInfo.addCoin(N.ConstConfig.CURRENCY.SOURCE.NOT_ENOUGH,a)];case 1:return e.sent(),[2]}})})},function(){}),d.show(),[3,4];case 2:return[4,l.NgcDialogManager.createDialog(m.default.dialogType,m.default.urlPrefab,"")];case 3:u=b.sent(),(d=u.getComponent(m.default)).init(f.NgcLocalizedManager.t("TMB_NOT_ENOUGH_COIN").text),d.show(),b.label=4;case 4:return[3,7];case 5:return _=-o.entryFee,[4,S.UserInfo.addCoin(N.ConstConfig.CURRENCY.SOURCE.GAME_START,_)];case 6:b.sent(),C.default.inst.onPlayClick(this._leagueTrackSelected),b.label=7;case 7:return[2]}})})},o.prototype.onPageClick=function(e){this.pageView.scrollToPage(e,.3)},o.prototype.onLeagueItemClick=function(e){var t=this,o=this.pageView.getCurrentPageIndex(),n=this._listPages[o];console.log("debug tier",n._info.tier,e.trackTier),n._info.tier==e.trackTier&&this._listPages.forEach(function(o){o.getItems().forEach(function(o){o.infor.leagueTrack.trackID==e.trackID?(o.select(!0),t._leagueTrackSelected=o.infor.leagueTrack):o.select(!1)})})},o.prototype.autoSelectTrack=function(e){var t=this._listPages[e];if(t){var o=t.getItems()[0].infor.leagueTrack;this.onLeagueItemClick(o)}},a([T(cc.PageView)],o.prototype,"pageView",void 0),a([T(cc.Prefab)],o.prototype,"pagePf",void 0),a([T(cc.Label)],o.prototype,"bestLb",void 0),a([T(cc.Node)],o.prototype,"leftButton",void 0),a([T(cc.Node)],o.prototype,"rightButton",void 0),a([T(cc.Node)],o.prototype,"playButton",void 0),a([T(cc.Material)],o.prototype,"fadeEffectMat",void 0),a([T(cc.Node)],o.prototype,"materialNode",void 0),a([T(cc.Node)],o.prototype,"mainLayout",void 0),a([T(cc.Node)],o.prototype,"exitNode",void 0),a([w],o)}(cc.Component);n.default=O,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../NanoGameCore/Services/Ads/Ads":"Ads","../Dialog/GetMoreCoinDialog/GetMoreCoinDialog":"GetMoreCoinDialog","../Dialog/InsufficientDialog/InsufficientDialog":"InsufficientDialog","../Screens/StartScreen/StartMain":"StartMain","../SpecialOffer/SpecialOffer":"SpecialOffer","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util","./LeagueManager":"LeagueManager","./LeaguePage":"LeaguePage"}],LoadingScene:[function(t,o,n){"use strict";cc._RF.push(o,"94075lgEzJGna0vW5bEqDpv","LoadingScene");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager"),u=t("../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadProgressionDialog"),p=t("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),d=t("../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),f=t("../../NanoGameCore/CrossFeatures/EndGameFlow/Result/Script/ResultUI"),h=t("../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/ReviveDialog"),g=t("../../NanoGameCore/CrossFeatures/EndGameFlow/Reward/RewardUI"),y=t("../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager"),m=t("../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeInfoDialog"),_=t("../../NanoGameCore/CrossFeatures/GPDR/Script/NgcGDPR"),v=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarAboutDialog"),S=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConfirmDialog"),N=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConflictDialog"),b=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarEditNameDialog"),C=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarHowToPlayDialog"),P=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarLoginSocialDialog"),I=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSelectLanguageDialog"),w=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSettingsDialog"),T=t("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog"),O=t("../../NanoGameCore/CrossFeatures/OfflineMode/OfflineMode"),R=t("../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog"),E=t("../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog"),A=t("../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog"),D=t("../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeEventRuleDialog"),k=t("../../NanoGameCore/CrossFeatures/Redirection/Script/NgcRedirectionDialog"),L=t("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageNetworkDisconnect"),B=t("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),M=t("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageSupportBrowser"),F=t("../../NanoGameCore/CrossFeatures/Tips/Script/TipManager"),G=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),U=t("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),x=t("../../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),j=t("../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage"),H=t("../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),z=t("../../NanoGameCore/SDK/Nano/NanoSrv"),W=t("../../NanoGameCore/Services/GameShop/GameShop"),V=t("../../NanoGameCore/Services/Inventory/Inventory"),K=t("../../NanoGameCore/Services/PartyRoom/PartyRoom"),Y=t("../../NanoGameCore/Services/Platform/Platform"),q=t("../../NanoGameCore/Services/ServicesMgr"),J=t("../../NanoGameCore/Services/Telemetry/Telemetry"),X=t("../CarSelector/CarSkinSelecter"),Z=t("../Currency/Currency"),Q=t("../Dialog/NavBarConflictDialog/CusNavBarConflictDialog"),$=t("../FTUE/FTUEManager"),ee=t("../League/LeagueManager"),te=t("../Maps/DrawMap"),oe=t("../Screens/PartyRoomScreen/PartyRoomManager"),ne=t("../Screens/StartScreen/StartMain"),re=t("../TuningData"),ie=t("../UserInfo"),ae=t("../Utils/ConstConfig"),ce=cc._decorator,se=ce.ccclass,le=ce.property,ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressLoading=null,t.percentLb=null,t.useFTUE=!1,t.rateForLoadSubpackage=0,t.speedLoadBar=.25,t.gameSceneLoaded=!1,t.loadSubpackagesStartTime=-1,t.loadGameSceneStartTime=-1,t._viewH=0,t._alreadyParseCookie=!1,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"loadedPercent",{get:function(){return this._loadedPercent},set:function(e){Y.NgcPlatform.inst&&(e>=1&&this._loadedPercent<1?Y.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:100},"*"):e>=.75&&this._loadedPercent<.75?Y.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:75},"*"):e>=.5&&this._loadedPercent<.5?Y.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:50},"*"):e>=.25&&this._loadedPercent<.25&&Y.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:25},"*")),this._loadedPercent=e},enumerable:!1,configurable:!0}),t.prototype.updateSave2Retrofit=function(){if(!H.convertToBoolean(j.default.getKey(ae.ConstConfig.SAVE_KEY.UPDATE_SAVE_KEY_RETROFIT,!1,!0))){j.default.setKey(ae.ConstConfig.SAVE_KEY.UPDATE_SAVE_KEY_RETROFIT,!0,!0);var e=ie.UserInfo.readOldUserID();e&&(H.default.userIdKey=e);var t=j.default.getKey(ae.ConstConfig.SAVE_KEY.CUR_SOCIAL_ID,"",!1);if(""!=t){t=t.replace("#",""),H.default.socialId=t;var o=j.default.getKey(ae.ConstConfig.SAVE_KEY.CUR_AVATAR_URL,"",!1);""!=o&&(H.default.avatarUrl=o)}var n=j.default.getKey(ae.ConstConfig.USER_NAME_LOCAL,"",!1);""!=n&&(H.default.localUserName=n);var r=j.default.getKey(ae.ConstConfig.SAVE_KEY.FACEBOOK_ACCESS_TOKEN,"",!1);""!=r&&(H.default.facebookAccessToken=r);var i=j.default.getKey(ae.ConstConfig.TOTAL_SESSIONS,"",!1);""!=i&&(H.default.totalSessions=H.convertToNum(i));var a=H.convertToBoolean(j.default.getKey(ae.ConstConfig.SAVE_KEY.IS_ALREADY_CHANGED_NAME,!1,!1));H.default.changedName=a;var c=j.default.getKey(ae.ConstConfig.SAVE_KEY.SECRET_KEY,"",!1);cc.log("#secretKey old ",c),""!=c&&(H.default.secretKey=c);var s=H.convertToNum(j.default.getKey(ae.ConstConfig.SAVE_KEY.NUMBER_OF_ADS_WATCHED,0,!1));0!=s&&(H.default.numberOfAdsWatched=s);var l=H.convertToNum(j.default.getKey(ae.ConstConfig.SAVE_KEY.NUMBER_OF_ADS_SESSION,0,!1));0!=l&&(H.default.numberAdsSession=l)}},Object.defineProperty(t.prototype,"loadedSubpackage",{get:function(){return this._loadedSubpackage},set:function(e){var t=this;if(this._loadedSubpackage=e,this._loadedSubpackage==Object.keys(ae.ConstConfig.SUBPACKAGE_NAME).length-3?G.NgcBuildConfig.offlineMode?Z.default.loadTable():ee.default.loadLeagueTable(function(){ie.UserInfo.getNumValue(ae.ConstConfig.SAVE_KEY.IS_LOCAL_CLEAR)||(t.clearOldData(),ie.UserInfo.setNumValue(1,ae.ConstConfig.SAVE_KEY.IS_LOCAL_CLEAR))}):this._loadedSubpackage==Object.keys(ae.ConstConfig.SUBPACKAGE_NAME).length-2?(te.default.loadPrefab(this.useFTUE),console.log("#Load Prefab")):this._loadedSubpackage==Object.keys(ae.ConstConfig.SUBPACKAGE_NAME).length-1&&G.NgcBuildConfig.offlineMode&&(X.default.loadCarTable(),console.log("#Load Car Isometric")),this._loadedSubpackage==Object.keys(ae.ConstConfig.SUBPACKAGE_NAME).length){var o={};window.funnel&&(o={totalSec:Date.now()-window.funnel.startTime,clientTimestamp:Date.now(),checker:window.funnel.checker});var n={name:"loading_subpackageLoaded",param:o};window.trackingFunnelEvents.push(n),this.loadGameScene()}},enumerable:!1,configurable:!0}),t.prototype.clearOldData=function(){cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.COIN)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.CONTROL_TYPE)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.STAR)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.BEST_SCORE)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.POWER_SCORE)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.SKIN)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.IS_DAILYREWARD_ALREADY_SHOW)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.ITEMS_BOUGHT)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.OWNED_SKIN)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.SAVE_KEY.MAP)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.SAVE_KEY.RANK_PERCENT_COUNTRY)),null!=ee.default.leagueTracks&&ee.default.leagueTracks.forEach(function(e){cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+e.trackFile)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.SAVE_KEY.BEST_TIME_LAP+e.trackFile)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.SAVE_KEY.PLAYEDMAP+e.trackFile)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.SAVE_KEY.RANK+e.trackFile)),cc.sys.localStorage.removeItem(ie.UserInfo.keymangle(ae.ConstConfig.SAVE_KEY.UNLOCKED_MAP+e.trackFile))})},t.prototype.onLoad=function(){var e;this.updateSave2Retrofit(),cc.sys.isBrowser?null===(e=window.firebaseInfo)||void 0===e||e.firebaseAnalytics.logEvent("first_scene_load_end",{clientTimestamp:Date.now()}):Y.NgcPlatform.isOfflineMode()||(sdkbox.firebase.Analytics.init(),sdkbox.firebase.Analytics.setAnalyticsCollectionEnabled(!0),sdkbox.firebase.Analytics.logEvent("first_scene_load_end",{clientTimestamp:Date.now()}),sdkbox.firebase.Analytics.logEvent("game_start",{acquisitionChannel:"Android",gameVersion:G.NgcBuildConfig.buildVersionName,deploymentEnvironment:G.NgcBuildConfig.deploymentEnvironment,clientTimestamp:Date.now()})),window.trackingFunnelEvents||(window.trackingFunnelEvents=[]),this.useFTUE=ie.UserInfo.curFTUEStep<$.FTUE_STEP.FINISH_2ND_MAP_FTUE},t.prototype.start=function(){return c(this,void 0,void 0,function(){var e,t,n,r;return s(this,function(i){switch(i.label){case 0:return window.loadingGame=!0,J.NgcTelemetry.setGameImportantInfos("coin",["body","head","face"]),o.inst=this,[4,this.initCrossFeatures()];case 1:return i.sent(),console.log("Start platform!"),[4,this.startupPlatform()];case 2:return i.sent(),[4,this.waitForInitStuff()];case 3:return i.sent(),console.log("game info",z.default.inst.getCurGameInfo()),e=z.default.inst.getCurGameInfo()._custom,t=z.default.inst.getCurGameInfo()._custom.Currency,n=z.default.inst.getCurGameInfo()._custom.CarIsometric,re.default.parseData(e),Z.default.parse(t,!1),X.default.parse(n.data.table),V.NgcInventory.inst&&V.NgcInventory.inst.onLogin(function(){}),W.NgcGameShop.inst&&W.NgcGameShop.inst.onLogin(function(e,t){cc.error("SHOP TABLE",t)}),H.default.sessionKey=x.NgcNetUtils.generateRandomUUID()+Date.now().toString(),H.default.sessionKey&&(cc.log("Saving key",H.default.sessionKey),H.default.gameRunningSession=H.default.sessionKey,cc.log("#Getting key",H.default.gameRunningSession),r=JSON.stringify({GAME_FIREBASE_SESSION_TOKEN:H.default.sessionKey}),Y.NgcPlatform.inst&&Y.NgcPlatform.inst.onPostMessage(r,"*")),oe.NgcPartyRoomManager.mustGoToPartyRoom()&&(this.useFTUE=!1,ie.UserInfo.curFTUEStep=$.FTUE_STEP.FINISHED_ALL_FTUE,K.NgcPartyRoom.sendIamComingStatus()),this.preloadAllBasicDialogs(),[2]}})})},t.prototype.initCrossFeatures=function(){console.log("Init cross feature!"),l.default.init();var e=function(e){e&&(H.default.curLanguage=e,U.NgcLocalizedManager.setLanguage(e))};return new Promise(function(t){if(!Y.NgcPlatform.isRunAsIframeOnNano()){var o=Y.NgcPlatform.getLoginDataFromURL();return o&&(H.default.nanoLoginData=o,H.default.userIdKey=o.userId||o.playerId,H.default.secretKey=o.secretKey,H.default.changedName=!1,H.default.localUserName=o.name,H.default.socialId=o.socialId||"",console.log("Linked successfully using URL",o),window.accountURLLinked=!0,e(o.language)),void t("OK")}if(H.default.getNanoUserInfoFromLocalstorage()){window.accountLinked=!0;var n=j.default.getKey("NANO_LANGUAGE",null,!1);e(n)}t("OK")})},t.prototype.waitForInitStuff=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=[],t=new Promise(function(e){V.NgcInventory.inst.onLogin(function(){e()})}),e.push(t),G.NgcBuildConfig.offlineMode?(console.log("Init Offline system"),[4,O.OfflineMode.Init()]):[3,2];case 1:o.sent(),cc.resources.preload("Offline/league-data"),o.label=2;case 2:return[4,Promise.all(e)];case 3:return[2,o.sent()]}})})},t.prototype.loadSubpackage=function(){var e=this;for(var t in this.loadSubpackagesStartTime=(new Date).getTime(),window.funnel&&(Date.now(),window.funnel.startTime,window.funnel.checker),ae.ConstConfig.SUBPACKAGE_NAME)cc.loader.downloader.loadSubpackage(ae.ConstConfig.SUBPACKAGE_NAME[t],function(t){if(t)return console.error(t);e.loadedSubpackage+=1,e.loadedPercent=e.loadedSubpackage/Object.keys(ae.ConstConfig.SUBPACKAGE_NAME).length*e.rateForLoadSubpackage})},t.prototype.loadGameScene=function(){var e=this;this.loadGameSceneStartTime=(new Date).getTime(),window.funnel&&(Date.now(),window.funnel.startTime,window.funnel.checker),Y.NgcPlatform.inst&&Y.NgcPlatform.inst.onGameLoadingStart(),cc.director.preloadScene(ae.ConstConfig.SCENE.GAME_SCENE,function(t,o){e.loadedPercent=e.rateForLoadSubpackage+t/o*(1-e.rateForLoadSubpackage)},function(){cc.sys.isBrowser&&window.parent.postMessage({GameSceneLoaded:!0},"*"),e.gameSceneLoaded=!0})},t.prototype.update=function(e){var t=!0;cc.sys.isBrowser&&(t=0==window.standOnLoadingScreen||null==window.standOnLoadingScreen);var o=_.default.getInstance().isShowingGDPR_Popup();if(!o&&!this._alreadyParseCookie){try{_.default.getInstance().parseCookies()}catch(i){console.warn("Parse cookie error",i)}this._alreadyParseCookie=!0}if(t=t&&!o,this.progressLoading.progress<this.loadedPercent&&t&&(this.progressLoading.progress=Math.min(this.progressLoading.progress+e*this.speedLoadBar,this.loadedPercent),this.percentLb.string=Math.round(100*this.progressLoading.progress)+"%"),t&&q.NgcServicesMgr.isLoggedIn&&this.gameSceneLoaded&&100==Math.round(100*this.progressLoading.progress)){var n={};window.funnel&&(n={totalSec:Date.now()-window.funnel.startTime,clientTimestamp:Date.now(),checker:window.funnel.checker});var r={name:"loading_startsceneLoaded",param:n};if(window.trackingFunnelEvents.push(r),!B.default.checkAndShowUnSupportedBrowser())return;J.NgcTelemetry.inst.sendFunnelEvents(),ne.default.canShowBanner=!1,cc.director.loadScene(ae.ConstConfig.SCENE.GAME_SCENE),Y.NgcPlatform.inst&&Y.NgcPlatform.inst.onGameLoadingFinish(),window.loadingGame=!1,this.gameSceneLoaded=!this.gameSceneLoaded}},t.prototype.nextTip=function(){F.NgcTipManager.inst.nextTip()},t.prototype.startupPlatform=function(){var e=this;return new Promise(function(t,o){q.NgcServicesMgr.preInit(G.NgcBuildConfig).then(function(){var n=q.NgcServicesMgr.initServices(G.NgcBuildConfig);n.then(function(e){console.log("Services Initialization finished: ",e),q.NgcServicesMgr.isInitialized=!0,H.default.totalRoundCount,t()}),n.catch(function(t){return c(e,void 0,void 0,function(){return s(this,function(){return Y.NgcPlatform.isOfflineMode()||(cc.error("Failed to startup platform services: ",t),t&&t.toString().includes("not match")&&ie.UserInfo.resetPrivateData(),B.default.showNetworkDisconnect(),o()),[2]})})}),e.startLoadResource()})})},t.prototype.startLoadResource=function(){this.loadedPercent=0,this.progressLoading.progress=0,this.loadedSubpackage=0,this.loadSubpackage()},t.prototype.preloadAllBasicDialogs=function(){var e=[{type:Q.default.dialogType,url:Q.default.urlPrefab,bundle:Q.default.bundleName},{type:d.NgcNoticeDialog.dialogType,url:d.NgcNoticeDialog.urlPrefab,bundle:d.NgcNoticeDialog.bundleName},{type:S.NgcNavBarConfirmDialog.dialogType,url:S.NgcNavBarConfirmDialog.urlPrefab,bundle:S.NgcNavBarConfirmDialog.bundleName},{type:S.NgcNavBarConfirmDialog.dialogType,url:S.NgcNavBarConfirmDialog.urlPrefab,bundle:S.NgcNavBarConfirmDialog.bundleName},{type:P.NgcNavBarLoginSocialDialog.dialogType,url:P.NgcNavBarLoginSocialDialog.urlPrefab,bundle:P.NgcNavBarLoginSocialDialog.bundleName},{type:R.NgcPartyRoomConfirmDialog.dialogType,url:R.NgcPartyRoomConfirmDialog.urlPrefab,bundle:R.NgcPartyRoomConfirmDialog.bundleName},{type:E.NgcPartyRoomNoticeDialog.dialogType,url:E.NgcPartyRoomNoticeDialog.urlPrefab,bundle:E.NgcPartyRoomNoticeDialog.bundleName},{type:N.NavBarConflicttDialog.dialogType,url:N.NavBarConflicttDialog.urlPrefab,bundle:N.NavBarConflicttDialog.bundleName},{type:C.NgcNavBarHowToPlayDialog.dialogType,url:C.NgcNavBarHowToPlayDialog.urlPrefab,bundle:C.NgcNavBarHowToPlayDialog.bundleName},{type:b.NgcNavBarEditNameDialog.dialogType,url:b.NgcNavBarEditNameDialog.urlPrefab,bundle:b.NgcNavBarEditNameDialog.bundleName},{type:v.NgcNavBarAboutDialog.dialogType,url:v.NgcNavBarAboutDialog.urlPrefab,bundle:v.NgcNavBarAboutDialog.bundleName},{type:w.NgcNavBarSettingsDialog.dialogType,url:w.NgcNavBarSettingsDialog.urlPrefab,bundle:w.NgcNavBarSettingsDialog.bundleName},{type:T.NgcNavBarShareDialog.dialogType,url:T.NgcNavBarShareDialog.urlPrefab,bundle:T.NgcNavBarShareDialog.bundleName},{type:I.NgcNavBarSelectLanguageDialog.dialogType,url:I.NgcNavBarSelectLanguageDialog.urlPrefab,bundle:I.NgcNavBarSelectLanguageDialog.bundleName},{type:"GameModeInfoDialog",url:"GameModeInfoDialog",bundle:m.NgcGameModeInfoDialog.bundleName},{type:"GameModeInfoExtendedDialog",url:"GameModeInfoExtendedDialog",bundle:m.NgcGameModeInfoDialog.bundleName},{type:"GameModeLockedInfoDialog",url:"GameModeLockedInfoDialog",bundle:m.NgcGameModeInfoDialog.bundleName},{type:f.NgcResultUI.dialogType,url:f.NgcResultUI.urlPrefab,bundle:f.NgcResultUI.bundleName},{type:h.default.dialogType,url:h.default.urlPrefab,bundle:h.default.bundleName},{type:g.NgcEndGameRewardDialog.dialogType,url:g.NgcEndGameRewardDialog.urlPrefab,bundle:g.NgcEndGameRewardDialog.bundleName},{type:y.NgcSpectatorManager.dialogType,url:y.NgcSpectatorManager.urlPrefab,bundle:y.NgcSpectatorManager.bundleName},{type:u.NgcCrownRoadProgressionDialog.dialogType,url:u.NgcCrownRoadProgressionDialog.urlPrefab,bundle:u.NgcCrownRoadProgressionDialog.bundleName},{type:A.default.dialogType,url:A.default.urlPrefab,bundle:A.default.bundleName},{type:D.default.dialogType,url:D.default.urlPrefab,bundle:D.default.bundleName},{type:M.default.dialogType,url:M.default.urlPrefab,bundle:M.default.bundleName},{type:L.default.dialogType,url:L.default.urlPrefab,bundle:L.default.bundleName},{type:k.default.dialogType,url:k.default.urlPrefab,bundle:k.default.bundleName}];p.NgcDialogManager.preLoadBunddle(p.NgcDialogManager.LIST_BUNDLE_NAME_PRELOAD),e.forEach(function(e){p.NgcDialogManager.loadDialogPrefab(e.type,e.url,e.bundle)})},a([le(cc.ProgressBar)],t.prototype,"progressLoading",void 0),a([le(cc.Label)],t.prototype,"percentLb",void 0),a([le(cc.Boolean)],t.prototype,"useFTUE",void 0),o=a([se],t)}(cc.Component);n.default=ue,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadProgressionDialog":"CrownRoadProgressionDialog","../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../../NanoGameCore/CrossFeatures/EndGameFlow/Result/Script/ResultUI":"ResultUI","../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/ReviveDialog":"ReviveDialog","../../NanoGameCore/CrossFeatures/EndGameFlow/Reward/RewardUI":"RewardUI","../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","../../NanoGameCore/CrossFeatures/GPDR/Script/NgcGDPR":"NgcGDPR","../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeInfoDialog":"GameModeInfoDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarAboutDialog":"NavBarAboutDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConfirmDialog":"NavBarConfirmDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConflictDialog":"NavBarConflictDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarEditNameDialog":"NavBarEditNameDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarHowToPlayDialog":"NavBarHowToPlayDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarLoginSocialDialog":"NavBarLoginSocialDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSelectLanguageDialog":"NavBarSelectLanguageDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSettingsDialog":"NavBarSettingsDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog":"NavBarShareDialog","../../NanoGameCore/CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog":"PartyRoomConfirmDialog","../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog":"PartyRoomNoticeDialog","../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog":"RealPrizeBuyTicketDialog","../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeEventRuleDialog":"RealPrizeEventRuleDialog","../../NanoGameCore/CrossFeatures/Redirection/Script/NgcRedirectionDialog":"NgcRedirectionDialog","../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageNetworkDisconnect":"TechMessageNetworkDisconnect","../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageSupportBrowser":"TechMessageSupportBrowser","../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../NanoGameCore/CrossFeatures/Tips/Script/TipManager":"TipManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../NanoGameCore/Services/GameShop/GameShop":"GameShop","../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","../../NanoGameCore/Services/Platform/Platform":"Platform","../../NanoGameCore/Services/ServicesMgr":"ServicesMgr","../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../CarSelector/CarSkinSelecter":"CarSkinSelecter","../Currency/Currency":"Currency","../Dialog/NavBarConflictDialog/CusNavBarConflictDialog":"CusNavBarConflictDialog","../FTUE/FTUEManager":"FTUEManager","../League/LeagueManager":"LeagueManager","../Maps/DrawMap":"DrawMap","../Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../Screens/StartScreen/StartMain":"StartMain","../TuningData":"TuningData","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig"}],LocalizationDebugPanel:[function(e,t,o){"use strict";cc._RF.push(t,"73441fPH+dLfqLiRNePy89d","LocalizationDebugPanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./LocalizedManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isShowTextKey=!1,t._currentLangIndex=0,t.showKeyCheckMark=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.onShowTextKey=function(){a.NgcLocalizedManager.isShowTextKey=this.showKeyCheckMark.isChecked},t.prototype.onNextLang=function(){cc.log("onNextLang")},t.prototype.onPrevLang=function(){cc.log("onPrevLang")},i([l(cc.Toggle)],t.prototype,"showKeyCheckMark",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./LocalizedManager":"LocalizedManager"}],LocalizedManager:[function(e,t,o){"use strict";cc._RF.push(t,"c829a7UEexHPbreFD0pnlXS","LocalizedManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLocalizedManager=void 0;var a=e("../../../../globals"),c=e("../BuildConfig"),s=e("../CONSTANTS"),l=e("../NgcLocalStorage"),u=e("../NgcUserInfo"),p=e("./LabelLocalized"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.languageConfig=null,t.ngcLocalizationText=null,t.gameLocalizationText=null,t.showDebugLoc=!1,t.debugPanel=null,t}var o;return r(t,e),o=t,Object.defineProperty(t,"isShowTextKey",{set:function(e){o._isShowTextKey!==e&&(o._isShowTextKey=e,this.updateLanguage())},enumerable:!1,configurable:!0}),t.prototype.getNativeLang=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getNativeLang","()V")},t.prototype.receivedNativeLang=function(e){console.log("SYSTEM_LANG: Get From native ",e),o.nativeLang=e,this.initGameLang(),this.updateFromText(this.ngcLocalizationText),this.updateFromText(this.gameLocalizationText),o.setLanguage(o.curLang)},t.prototype.initGameLang=function(){var e=o.nativeLang||u.default.curLanguage;console.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@curLang ",e);var t=!1;o.langList.forEach(function(n){n.enabled&&(n.code===e||n.extra_code&&-1!=n.extra_code.indexOf(e))&&(o.curLang=n.code,t=!0)}),t||(o.curLang=o.defaultLang)},t.prototype.onLoad=function(){o.defaultLang=c.NgcBuildConfig.defaultLanguage||s.NGC_CONSTANTS.LOCALIZATION_LANG.ENGLISH,this.isAPK=!cc.sys.isBrowser&&cc.sys.os===cc.sys.OS_ANDROID,o.inst&&console.error("More than one NgcLocalizedManager instance"),o.inst=this,o.jsonData=this.languageConfig.json.language_list,o.langList=this.languageConfig.json.language_list,this.isAPK?this.getNativeLang():(this.initGameLang(),this.updateFromText(this.ngcLocalizationText),this.updateFromText(this.gameLocalizationText),o.setLanguage(o.curLang)),this.showDebugLoc&&(cc.instantiate(this.debugPanel).parent=cc.find("Canvas"))},t.setLanguage=function(e){0===e.length||e==o.curLang&&!this.firstTimeInit||(this.firstTimeInit=!1,o.curLang=e,this.curLangDefaultFont=this.curData.default_font,l.default.setKey("GAME_LANGUAGE",e,!1),this.updateLanguage())},t.t=function(e){var t={key:e,text:""};if(this._isShowTextKey)return t.text=e,t;var n=o.tableText[e]||{},r=n[o.curLang]||n[this.defaultLang]||e;return r=r.replace(/\\n/gi,"\n"),t.text=r,t},t.getSpriteFrame=function(e){return this.polymorphic[e]},t.updateLanguage=function(){var e=[];this.labelLocalizeds.forEach(function(t){null!==t.node&&(e.push(t),t.textKey&&t.updateString())}),this.labelLocalizeds=e,this.spriteLocalizeds.forEach(function(e){e.spriteFrameKey&&(e.spriteFrameKey=e.spriteFrameKey)})},t.prototype.updateFromText=function(e){if(!e)return!1;for(var t=e.json,n=0,r=Object.entries(t);n<r.length;n++){var i=r[n],a=i[0],c=i[1];o.tableText[a]=c}},t.setTextKey=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null);var r=e.node.getComponent(p.NgcLabelLocalized);r&&(r.textKey=t,n&&Array.isArray(n)&&r.setExtraComponents(n),o&&Array.isArray(o)&&r.setExtraParams(o),r.updateString())},t.curLang=s.NGC_CONSTANTS.LOCALIZATION_LANG.ENGLISH,t.defaultLang=s.NGC_CONSTANTS.LOCALIZATION_LANG.ENGLISH,t.polymorphic={},t.jsonData=[],t.langList=[],t.curData={},t.curLangDefaultFont=null,t.tableText={},t.nativeLang="",t.inst=null,t._isShowTextKey=!1,t.firstTimeInit=!0,t.labelLocalizeds=[],t.spriteLocalizeds=[],i([h(cc.JsonAsset)],t.prototype,"languageConfig",void 0),i([h(cc.JsonAsset)],t.prototype,"ngcLocalizationText",void 0),i([h(cc.JsonAsset)],t.prototype,"gameLocalizationText",void 0),i([h],t.prototype,"showDebugLoc",void 0),i([h(cc.Prefab)],t.prototype,"debugPanel",void 0),o=i([f],t)}(cc.Component);o.NgcLocalizedManager=g,a.default.NgcLocalizedManager=g,cc._RF.pop()},{"../../../../globals":"globals","../BuildConfig":"BuildConfig","../CONSTANTS":"CONSTANTS","../NgcLocalStorage":"NgcLocalStorage","../NgcUserInfo":"NgcUserInfo","./LabelLocalized":"LabelLocalized"}],LocalizedRichText:[function(e,t,o){"use strict";cc._RF.push(t,"73b89Fk4ENCgLWoqUUiJwBX","LocalizedRichText");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameFramework/Scripts/Localized/LocalizedManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=c.menu,p=function(){function e(){this.extraIdentifier="",this.extraParam="",this.extraKey="",this.color=null,this.fontSize=0,this.bold=!1,this.italic=!1,this.underlined=!1,this.img=""}return i([l(cc.String)],e.prototype,"extraIdentifier",void 0),i([l(cc.String)],e.prototype,"extraParam",void 0),i([l(cc.String)],e.prototype,"extraKey",void 0),i([l(cc.Color)],e.prototype,"color",void 0),i([l(cc.Integer)],e.prototype,"fontSize",void 0),i([l(cc.Boolean)],e.prototype,"bold",void 0),i([l(cc.Boolean)],e.prototype,"italic",void 0),i([l(cc.Boolean)],e.prototype,"underlined",void 0),i([l(cc.String)],e.prototype,"img",void 0),i([s("RichTextCustomStlyeParam")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textKey="",t.extraParamStyles=[],t}return r(t,e),t.prototype.onLoad=function(){a.NgcLocalizedManager.labelLocalizeds.push(this)},t.prototype.start=function(){this.updateString()},t.prototype.applyExtraParams=function(){var e=this;this.extraParamStyles&&this.extraParamStyles.forEach(function(t){var o=t.extraIdentifier,n=a.NgcLocalizedManager.t(t.extraKey).text||t.extraParam||"";n&&t&&(t.color&&(n="<color=#"+t.color.toHEX("#rrggbb")+">"+n+"</color>"),t.bold&&(n="<b>"+n+"</b>"),t.italic&&(n="<i>"+n+"</i>"),t.underlined&&(n="<u>"+n+"</u>"),t.fontSize&&(n="<size="+t.fontSize+">"+n+"</size>"),t.img&&(n="<img='"+t.img+"'>"+n+"</img>"),e.string=e.string.replace(o,n))})},t.prototype.updateString=function(){if(this.textKey){var e=a.NgcLocalizedManager.t(this.textKey);""!=e.text&&(this.string=e.text,this.applyExtraParams())}},t.prototype.setLocalizedText=function(e,t){this.textKey=e,this.extraParamStyles=t,this.updateString()},i([l],t.prototype,"textKey",void 0),i([l({type:[p]})],t.prototype,"extraParamStyles",void 0),i([s,u("NGC/LocalizedRichText")],t)}(cc.RichText);o.default=d,cc._RF.pop()},{"../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],LoopAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"6f5e38bozVFr4k4Whh0Cd7g","LoopAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.LoopAnim=void 0;var a,c=e("../BlendAnimBase"),s=cc._decorator,l=s.ccclass;s.property,function(e){e[e.TopLeftToBot=0]="TopLeftToBot",e[e.TopRightToBot=1]="TopRightToBot",e[e.BotLeftToTop=2]="BotLeftToTop",e[e.BotRightToTop=3]="BotRightToTop"}(a=o.LoopAnim||(o.LoopAnim={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animTopLeftToBot=["1.TopLeftToBot"],t.animTopRightToBot=["4.TopRightToBot"],t.animBotLeftToTop=["2.BotLeftToTop"],t.animBotRightToTop=["3.BotRightToTop"],t.anim=a.BotRightToTop,t}return r(t,e),t.prototype.setAnim=function(e){this.anim=e},t.prototype.onLoad=function(){this.allAnims=[this.animTopLeftToBot,this.animTopRightToBot,this.animBotLeftToTop,this.animBotRightToTop],e.prototype.onLoad.call(this)},t.prototype.setTimeScale=function(e){cc.log("setTimeScale "+e),this.skeleton.timeScale=e},t.prototype.play=function(){this.skeleton.setAnimation(0,this.allAnims[this.anim][0],!1)},t.prototype.start=function(){e.prototype.start.call(this)},i([l],t)}(c.default);o.default=u,cc._RF.pop()},{"../BlendAnimBase":"BlendAnimBase"}],LoopTriggerAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"e074fp7hexO9rJO6tVzVGkI","LoopTriggerAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./LoopAnimation"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t.anim=a.LoopAnim.TopLeftToBot,t.out_direction_angle=0,t.LOOP_ANIM_DURATION=18,t}return r(t,e),t.prototype.playAnim=function(e){this.animation.setTimeScale(this.LOOP_ANIM_DURATION/e),this.animation.setAnim(this.anim),this.animation.play()},t.prototype.getOutAngle=function(){return this.out_direction_angle},i([l(a.default)],t.prototype,"animation",void 0),i([l({type:cc.Enum(a.LoopAnim)})],t.prototype,"anim",void 0),i([l],t.prototype,"out_direction_angle",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./LoopAnimation":"LoopAnimation"}],LoopTrigger:[function(e,t,o){"use strict";cc._RF.push(t,"1ef47HnvxtJK7yxlpIvomqi","LoopTrigger");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initLoopPoint=function(e,t){this.Id=e,this.connectingId=t,cc.log("initLoopPoint ID: "+e),cc.log("initLoopPoint connectingID: "+t)},t.prototype.onLoad=function(){},t.prototype.start=function(){},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],Main:[function(t,o,n){"use strict";cc._RF.push(o,"09d31zgRCBOGr2GG+VEcOFs","Main");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Main=n.FIVE_MS=n.DeviceType=n.ScreenOrientation=n.AppContext=n.AppState=void 0;var l,u,p,d=t("../globals"),f=t("../NanoGameCore/Core/Utils"),h=t("./Screens/PartyRoomScreen/PartyRoomManager"),g=t("../NanoGameCore/GameFramework/Scripts/BuildConfig"),y=t("../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),m=t("../NanoGameCore/GameFramework/Scripts/NgcMain"),_=t("../NanoGameCore/GameFramework/Scripts/ProfanityCheck"),v=t("../NanoGameCore/SDK/Nano/NanoSrv"),S=t("./Network/NetClient"),N=t("./ScreenManager"),b=t("./Screens/StartScreen/StartMain"),C=t("../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),P=t("../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),I=t("../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),w=t("../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager"),T=t("../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),O=t("../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),R=t("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),E=t("../NanoGameCore/Services/Leaderboard/Leaderboard"),A=t("./Countdown"),D=t("./Dialog/LeaderBoardDialog/LeaderBoardDialog"),k=t("./Dialog/SelectControlDialog/SelectControlDialog"),L=t("./FTUE/FTUEManager"),B=t("./Game"),M=t("./GameCamera"),F=t("./Maps/DrawMap"),G=t("./Maps/PathManager"),U=t("./NavigatePoint"),x=t("./Player/PlayerController"),j=t("./ProjectConfig"),H=t("./SoundManager"),z=t("./StartPoint"),W=t("./UI/GameUI"),V=t("./UI/LapInfor"),K=t("./UserInfo"),Y=t("./CarSelector/CarSkinSelecter"),q=t("../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),J=t("./Screens/ShopScreen/Shop"),X=t("../NanoGameCore/Services/Platform/Platform"),Z=cc._decorator,Q=Z.ccclass,$=Z.property;(function(e){e[e.InitSettle=0]="InitSettle",e[e.StartScreen=1]="StartScreen",e[e.ShopScreen=2]="ShopScreen",e[e.Game=3]="Game",e[e.PartyScreen=4]="PartyScreen"})(l=n.AppState||(n.AppState={})),function(e){e[e.NOT_SET=0]="NOT_SET",e[e.Options=1]="Options",e[e.MainMenu=2]="MainMenu",e[e.Matchmaking=3]="Matchmaking",e[e.Gameplay=4]="Gameplay",e[e.Results=5]="Results",e[e.Rewards=6]="Rewards",e[e.Spectator=7]="Spectator",e[e.Leaderboard=8]="Leaderboard",e[e.PartyRoom=9]="PartyRoom",e[e.ItemsShopScreen=10]="ItemsShopScreen"}(u=n.AppContext||(n.AppContext={})),function(e){e[e.Portrait=0]="Portrait",e[e.Landscape=1]="Landscape"}(p=n.ScreenOrientation||(n.ScreenOrientation={})),n.DeviceType={MOBILE:"Mobile",PC:"PC"},n.FIVE_MS=5e3;var ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainCanvas=null,t.debugTextLabel=null,t.timeSinceLoad=0,t.timeInCurrentState=0,t.enabledDebugParams=!1,t.platformGameID="",t.buildVersion="",t.devTimeOffsetHours=0,t.savelogButton=null,t.showdebugButton=null,t.menuPageView=null,t.mainCamera=null,t.devLocalPlayerInvincible=!1,t.frameCounter=0,t.debugDisplayEnabled=!1,t.needUpdateServer=!1,t.appState=l.StartScreen,t.configInfo={},t.activeAlgin=!0,t.platformServicesURL="http://localhost:3000",t.didStartScreen=!1,t.localUserName="",t.localUserSkin="naked",t.inBackground=!1,t._timeInBG=0,t._offlineMode=!1,t.skipReward=!1,t.sleepingTinme=0,t._resetDone=!0,t.hasDoneStartScreen=!1,t.ONE_SECOND=1,t.curTimeDt=1,t._frameFSP=0,t.fps=0,t}var o;return i(t,e),o=t,t.prototype.resolveSocialConflict=function(e){K.UserInfo.resolveConflict(e)},t.prototype.showControlDialog=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,P.NgcDialogManager.createDialog(k.default.dialogType,k.default.urlPrefab,k.default.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(k.default)).init(),t.show(),[2]}})})},t.prototype.getWorldPosOfMainCharacter=function(){return Y.default.inst.node.convertToWorldSpaceAR(cc.v2(10,-40))},t.prototype.onClaimBooster=function(){console.log("debug on claim booster"),K.UserInfo.updateInventoryWithPlatform(),b.default.inst.applyBoosterFX()},t.prototype.uploadBestScore=function(){throw new Error("Method not implemented.")},t.prototype._reset=function(){},t.prototype.isFTUE=function(){return o.FTUE},t.prototype.disableFTUE=function(){o.FTUE=!1},t.prototype.reload=function(){console.log("Main::reload()"),this.reset()},t.prototype.IsInGame=function(){return this.appState==l.Game},t.prototype.getLocalPlayer=function(){return d.default.PlayerController.getInst().getLocalPlayer()||null},t.getAppContext=function(){return 0==o.appContextStack.length?u.NOT_SET:this.appContextStack[this.appContextStack.length-1]},t.getAppContextName=function(){var e=this.getAppContext();return f.Utils.enumToString(u,e)},t.setAppContext=function(e){0!=o.appContextStack.length?this.appContextStack[this.appContextStack.length-1]=e:o.pushAppContext(e)},t.pushAppContext=function(e){o.appContextStack.push(e)},t.prototype.getLocalPlayerNode=function(){if(d.default.PlayerController.inst){var e=d.default.PlayerController.inst.getLocalPlayer();return e?e.node:null}return null},t.prototype.userChangedName=function(e){return c(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return[4,_.NgcProfanityCheck.check(e.string)];case 1:return n.sent().status?[3,3]:(e.string="",[4,P.NgcDialogManager.createDialog(C.NgcMessageDialog.dialogType,C.NgcMessageDialog.urlPrefab,C.NgcMessageDialog.bundleName)]);case 2:return t=n.sent(),(o=t.getComponent(C.NgcMessageDialog)).init("NGG_PROFANITY_NAME_NOTICE"),o.show(null,e.node,null,null),[2];case 3:return R.default.localUserName=this.localUserName=e.string,this.updateNameToNanosrv(),[2]}})})},t.prototype.updateNameToNanosrv=function(){var e=this;if(!g.NgcBuildConfig.offlineMode){var t="";y.NgcCountryFlagsManager.localCountry&&(t=y.NgcCountryFlagsManager.localCountry);var o=function(){console.log("### country = "+t);var o="/profile/"+v.default.inst.userID,r={name:e.localUserName,devicetype:cc.sys.isMobile?n.DeviceType.MOBILE:n.DeviceType.PC,country:t};v.default.inst.servicePost(o,JSON.stringify(r),function(e){e||console.log("Update info success")})};t?o():y.NgcCountryFlagsManager.callBack=function(){t=y.NgcCountryFlagsManager.localCountry,o()}}b.default.inst&&b.default.inst.updateNameBox()},t.prototype.userNameIsValid=function(){var e=!0;return""!=this.localUserName&&this.localUserName||(e=!1),e},t.prototype.getTimeSinceLoad=function(){return this.timeSinceLoad},t.prototype.onLoad=function(){var t=this;this.savelogButton.active=g.NgcBuildConfig.enabledDebugMode,this.showdebugButton.active=g.NgcBuildConfig.enabledDebugMode,e.prototype.onLoad.call(this),o.inst=this,o.FTUE=K.UserInfo.curFTUEStep<L.FTUE_STEP.FINISHED_ALL_FTUE,K.UserInfo.countRun++,R.default.totalSessions++,this.configInfo=j.ProjectConfig[j.ProjectConfig.CUR_VERSION],this.enabledDebugParams=this.configInfo.enabledDebugMode,this.platformGameID=this.configInfo.platformGameID,this.buildVersion=g.NgcBuildConfig.buildVersionName,this.platformServicesURL=this.configInfo.platformServiceURL,this._offlineMode=g.NgcBuildConfig.offlineMode,cc.systemEvent.on("MATCH_MAKING_DONE",function(){t.showTransition()})},t.prototype.offlineMode=function(){return this._offlineMode},t.prototype.switchOnline2Offline=function(){this._offlineMode=!0,x.default.inst.allPlayer().forEach(function(e){e.netID!=S.default.inst.localPlayerNetID&&(e.enableBot(),e.changeName(e.getPlayerName()+"*"))}),h.NgcPartyRoomManager.inst&&h.NgcPartyRoomManager.inst.isGameStartedFromRoom()&&(h.NgcPartyRoomManager.inst.forceClose(),this.skipReward=!0),S.default.inst._exitGame(),B.default.inst&&B.default.inst.stopUpdateServer()},t.prototype.getSleepingTime=function(){return this.sleepingTinme},t.prototype.onAppVisible=function(){return c(this,void 0,void 0,function(){return s(this,function(){return this.inBackground=!1,cc.log("onAppVisible"),[2]})})},t.prototype.isSkipReward=function(){return this.skipReward},t.prototype.onAppHidden=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.inBackground=!0,B.default.inst?this._offlineMode||g.NgcBuildConfig.offlineMode||!this.IsInGame()||X.NgcPlatform.isRunFromApp()?[3,2]:[4,P.NgcDialogManager.createDialog(I.NgcNoticeDialog.dialogType,I.NgcNoticeDialog.urlPrefab,I.NgcNoticeDialog.bundleName)]:[3,2];case 1:e.sent().getComponent(I.NgcNoticeDialog).init(O.NgcLocalizedManager.t("NTM_ERROR").text,O.NgcLocalizedManager.t("NTM_NETWORK_DISCONNECTED").text,function(){o.inst.isFTUE?f.Utils.reloadPage():d.default.Main.inst.reload()},null),e.label=2;case 2:return cc.log("onAppHidden"),this._timeInBG=Date.now(),[2]}})})},t.prototype.registerEventHandlers=function(){var e=this;document.addEventListener("visibilitychange",function(){"visible"==document.visibilityState?e.onAppVisible():"hidden"==document.visibilityState&&e.onAppHidden()}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){var o=e.getLocalPlayerNode();o&&o.emit("keyDown",t)},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(t){var o=e.getLocalPlayerNode();o&&o.emit("keyUp",t),q.default.inst.onPlayerInput()},this),this.node.on(cc.Node.EventType.TOUCH_START,function(e){N.default.inst.node.emit("tapDown",e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){N.default.inst.node.emit("tapUp",e)},this)},t.prototype.isRelease=function(){return!1},t.prototype.enableDebugDisplay=function(e){this.debugDisplayEnabled=e},t.prototype.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},t.prototype.setDebugText=function(e){this.debugTextLabel&&(this.debugTextLabel.string=e)},t.prototype.isResetGameDone=function(){return this._resetDone},t.prototype.reset=function(e){return void 0===e&&(e=!1),c(this,void 0,void 0,function(){var e;return s(this,function(){return this.showTransition(),this._resetDone=!1,this.setState(l.InitSettle),g.NgcBuildConfig.offlineMode||(this._offlineMode=!1),this.sleepingTinme=0,this.skipReward=!1,e=this,S.default.inst.exitGame(),B.default.inst.stopUpdateServer(),H.default.inst.stopAllSFX(),this.scheduleOnce(function(){B.default.inst.reset(),x.default.inst.reset(),z.default.clear(),G.default.getInst().reset(),U.default.reset(),M.default.inst.reset(),F.default.inst.reset(),A.default.inst.reset(),w.NgcSpectatorManager.inst&&w.NgcSpectatorManager.inst.reset(),W.default.inst.reset(),V.default.inst.reset(),D.default.inst&&D.default.inst.reset(),b.default.inst&&b.default.inst.reset(),e._resetDone=!0},1),[2]})})},t.prototype.start=function(){this.registerEventHandlers(),this.setState(l.InitSettle),this.getUrlParameter("autoTest");var e=this.getUrlParameter("name");e&&(this.localUserName=e),T.NgcLeaderboardManager.inst.setOrder(E.SORT_ORDER.ASC)},t.prototype.workState_InitSettle=function(){if(this.timeInCurrentState>.15){if(R.default.localUserName&&""!=R.default.localUserName?this.localUserName=R.default.localUserName:this.createFakeName(),!S.default.inst.isConnected()&&!g.NgcBuildConfig.offlineMode){var e="";h.NgcPartyRoomManager.mustGoToPartyRoom()&&!o.inst.isFTUE()&&(e=h.NgcPartyRoomManager.getServerFromInviteLink()),S.default.inst.startConnectCycle(e)}h.NgcPartyRoomManager.inst&&h.NgcPartyRoomManager.inst.isGameStartedFromRoom()?this.setState(l.PartyScreen):o.inst.isFTUE()?this.setState(l.Game):this.setState(l.StartScreen)}},t.prototype.showTransition=function(){var e;(null===(e=N.default.inst)||void 0===e?void 0:e.transitionNode)&&(N.default.inst.transitionNode.active=!0,N.default.inst.transitionNode.opacity=255,cc.tween(N.default.inst.transitionNode).to(2,{opacity:0}).start())},t.prototype.setState=function(e){if(e!=this.appState){switch(this.appState,this.appState=e,e){case l.StartScreen:N.default.inst.goToStartScreen();break;case l.Game:N.default.inst&&(N.default.inst.transitionNode.opacity=255),N.default.inst.goToGameScreen();break;case l.ShopScreen:N.default.inst.goToShopScreen();break;case l.PartyScreen:N.default.inst.goToPartyScreen()}this.timeInCurrentState=0}},t.prototype.update=function(e){switch(this.timeSinceLoad+=e,this.timeInCurrentState+=e,this.frameCounter++,this.curTimeDt-=e,this._frameFSP++,this.curTimeDt<=0&&(this.curTimeDt=this.ONE_SECOND,this.fps=this._frameFSP,this._frameFSP=0),this.appState){case l.InitSettle:this.workState_InitSettle(e)}},t.getScreenOrientation=function(){return cc.winSize.width<cc.winSize.height?p.Portrait:p.Landscape},t.prototype.updateUserInfo=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return console.log("Overrided for NgcMain"),[4,b.default.inst.updateUserInfo()];case 1:return e.sent(),[2]}})})},t.prototype.setBestScore=function(e){K.UserInfo.setBestScore(e)},t.prototype.getBestScore=function(){return K.UserInfo.bestScore},t.prototype.resumeGameLogic=function(){cc.game.resume()},t.prototype.pauseGameLogic=function(){cc.game.pause()},t.prototype.resetData=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0),K.UserInfo.resetPrivateData(),K.UserInfo.isHardResetData=t,R.default.totalSessions=1,b.default.inst&&(b.default.inst.onPlatformStartCompleted(),b.default.inst.updateNameBox()),J.default.inst&&(J.default.inst.itemLoaded=!1,J.default.inst.loadItems()),e&&e()},t.prototype.showDebug=function(){return c(this,void 0,void 0,function(){return s(this,function(){return W.default.inst.showDebug(),[2]})})},t.inst=null,t.appContext=u.NOT_SET,t.FTUE=!1,a([$(cc.Canvas)],t.prototype,"mainCanvas",void 0),a([$(cc.Label)],t.prototype,"debugTextLabel",void 0),a([$],t.prototype,"enabledDebugParams",void 0),a([$],t.prototype,"platformGameID",void 0),a([$],t.prototype,"devTimeOffsetHours",void 0),a([$(cc.Node)],t.prototype,"savelogButton",void 0),a([$(cc.Node)],t.prototype,"showdebugButton",void 0),a([$(cc.PageView)],t.prototype,"menuPageView",void 0),a([$(cc.Camera)],t.prototype,"mainCamera",void 0),a([$],t.prototype,"devLocalPlayerInvincible",void 0),a([$],t.prototype,"platformServicesURL",void 0),o=a([Q],t)}(m.NgcMain);n.Main=ee,d.default.Main=ee,d.default.AppState=l,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/GameFramework/Scripts/ProfanityCheck":"ProfanityCheck","../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../NanoGameCore/Services/Platform/Platform":"Platform","../globals":"globals","./CarSelector/CarSkinSelecter":"CarSkinSelecter","./Countdown":"Countdown","./Dialog/LeaderBoardDialog/LeaderBoardDialog":"LeaderBoardDialog","./Dialog/SelectControlDialog/SelectControlDialog":"SelectControlDialog","./FTUE/FTUEManager":"FTUEManager","./Game":"Game","./GameCamera":"GameCamera","./Maps/DrawMap":"DrawMap","./Maps/PathManager":"PathManager","./NavigatePoint":"NavigatePoint","./Network/NetClient":"NetClient","./Player/PlayerController":"PlayerController","./ProjectConfig":"ProjectConfig","./ScreenManager":"ScreenManager","./Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","./Screens/ShopScreen/Shop":"Shop","./Screens/StartScreen/StartMain":"StartMain","./SoundManager":"SoundManager","./StartPoint":"StartPoint","./UI/GameUI":"GameUI","./UI/LapInfor":"LapInfor","./UserInfo":"UserInfo"}],MapExporter:[function(t,o,n){"use strict";cc._RF.push(o,"c7ba243iP1KnIIxkESfja+/","MapExporter");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LAYERTYPE=void 0;var l,u=t("../GameCamera"),p=t("../Gate"),d=t("../GroupCollision/GroupCollisionManager"),f=t("../StartPoint"),h=t("./PathManager"),g=cc._decorator,y=g.ccclass,m=g.property;(function(e){e[e.LAYER=0]="LAYER",e[e.OBJECT=1]="OBJECT"})(l=n.LAYERTYPE||(n.LAYERTYPE={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.Mapfile=null,t.drawCheckPoint=!1,t.debugMap=!0,t.LBbutton=null,t.mapLevelName="",t.TileFlag=cc.Enum({HORIZONTAL:2147483648,VERTICAL:1073741824,DIAGONAL:536870912,FLIPPED_ALL:4026531840,FLIPPED_MASK:268435455}),t.Prefabs=[],t._nodeList=[],t._layers=[],t._groups=[],t._allLayers=[],t._json={},t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){this.LBbutton.string="Please Wait",o.inst=this,cc.log("#Map Init"),this.loadPrefab()},t.prototype.getMap=function(){return this.mapLevelName},t.prototype.setMap=function(e){this.mapLevelName=e,cc.log("DrawMAP "+e)},t.prototype.start=function(){this.camera&&(cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)),cc.log("#Map Start"),this.registerEventHandlers()},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.left:this.camera.node.x-=50;break;case cc.macro.KEY.right:this.camera.node.x+=50;break;case cc.macro.KEY.space:break;case cc.macro.KEY.up:this.camera.node.y+=50;break;case cc.macro.KEY.down:this.camera.node.y-=50}},t.prototype.onKeyUp=function(){},t.prototype.loadPrefab=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(){return e=this,cc.log("Call Load Prefab"),new Promise(function(t){cc.log("Call Load Prefab2"),cc.resources.loadDir("Prefabs/map",function(o,n){o?cc.error(o):(cc.log(n),e.Prefabs=n,e.debugMap&&e.onLoadTileMap(),t())})}),[2]})})},t.prototype.onLoadTileMap=function(){return c(this,void 0,void 0,function(){var e,t,o=this;return s(this,function(n){switch(n.label){case 0:return e=this,t=new cc.Node,[4,new Promise(function(n){e.tiledMap=t.addComponent(cc.TiledMap),e.tiledMap.tmxAsset=e.Mapfile,e.setMap(e.Mapfile.name+"_txt");var r=e.tiledMap.getMapSize(),i=e.tiledMap.getTileSize(),a=new cc.Size(r.width*i.width,r.height*i.height);e.setMapSize(a),e.node.removeAllChildren(),e.parsing(e.tiledMap),o.exporter(e.tiledMap);var c=e.getAllLayers();e.tiledMap.destroy(),t.destroy(),e.drawAll(c),e.playerNameNode=new cc.Node,e.playerNameNode.name="PlayerNameNode",e.playerNameNode.parent=e.node,cc.log("#Drawed all Leyer"),e.LBbutton.string="Generate Map",n()})];case 1:return n.sent(),[2]}})})},t.prototype.InitMap=function(){if(f.default.allStartPoints.length>0){var e=f.default.allStartPoints[0],t=this.node.getChildByName("CarContainer");f.default.allStartPoints.forEach(function(e){e.node.parent=t,e.node.setPosition(t.convertToNodeSpaceAR(e.getWorldPosition())),e.node.zIndex=cc.macro.MIN_ZINDEX}),u.default.inst.setWorldPosition(e.getWorldPosition()),u.default.inst.setZoomIn(1.3),h.default.getInst().sortNearPoint(),this.drawCheckPoint&&o.inst.drawNavigatePoints(this.node)}else cc.log("# Start Point is not innted")},t.prototype.reset=function(){this._layers=null,this._groups=null,this._nodeList.forEach(function(e){cc.log("destroyed"+e.name),e.destroy()}),this._nodeList=[],this.node.removeAllChildren(),this.node.removeComponent(this.tiledMap)},t.prototype.parsing=function(e){this._layers=e.getLayers(),this._groups=e.getObjectGroups()},t.prototype.drawAll=function(e){return c(this,void 0,void 0,function(){var t=this;return s(this,function(o){switch(o.label){case 0:return[4,new Promise(function(o){e.forEach(function(e){var n=e.name;if(e instanceof cc.TMXLayerInfo){var r=t.getLayer(n);t.drawObjectInLayer(r)}else if(e instanceof cc.TMXObjectGroupInfo){var i=t.getGroup(n);t.drawObjectsInGroup(i)}o()})})];case 1:return o.sent(),[2]}})})},t.prototype.getLayer=function(e){for(var t=0,o=this._layers;t<o.length;t++){var n=o[t];if(n.getLayerName()==e)return n}return null},t.prototype.getGroup=function(e){for(var t=0,o=this._groups;t<o.length;t++){var n=o[t];if(n.getGroupName()==e)return n}return null},t.prototype.getAllLayers=function(){return this._allLayers&&(this._allLayers=this.tiledMap._mapInfo.getAllChildren()),this._allLayers},t.prototype.drawObjectInLayer=function(e){var t=e.getLayerName(),o=new cc.Node;if(o.name=t,o.active=e.node.active,o.setAnchorPoint(0,0),o.active){var n=e.getLayerSize(),r=e.getMapTileSize();if(cc.log(t),e._tiles.length>0){var i=this.isFillLayer(e._tiles);if(cc.log("fill"+i),i){var a=e._tiles[0];(l=this.findPrefabNameByID(a))&&(u=this.findPerfabByName(l))&&((p=cc.instantiate(u)).parent=o,p.setPosition(0,0),p.getComponent(cc.Sprite).type=cc.Sprite.Type.TILED,p.width=r.width*n.width,p.height=r.height*n.height)}else for(var c=0;c<n.height;c++)for(var s=0;s<n.width;s++){var l,u,p,d=c*s+s;0!=(a=e._tiles[d])&&(l=this.findPrefabNameByID(a))&&(u=this.findPerfabByName(l))&&((p=cc.instantiate(u)).parent=o,p.setPosition(r.width*s,r.height*c))}}this.node.addChild(o),this._nodeList.push(o)}},t.prototype.drawObjectsInGroup=function(e){var t=this,o=e.getGroupName(),n=new cc.Node;n.name=o,n.setAnchorPoint(0,0),n.active=e.node.active;var r=e.getObjects();n.active&&0!=r.length&&(r.forEach(function(e){var o=e.gid,r=(o&t.TileFlag.FLIPPED_MASK)>>>0,i=t.findPrefabNameByID(r),a=e.rotation,c=e.visible;if(null!=i&&""!=i){var s=t.findPerfabByName(i);if(s){var l=cc.instantiate(s);l.parent=n,l.active=c,l.setPosition(e.x,e.y),l.setScale(e.width/l.width,e.height/l.height),l.angle=-a,l.setAnchorPoint(0,0),i==t.gatePrefabName&&(t._gate=l),(o&t.TileFlag.HORIZONTAL)>>>0&&t.setFlipX(l,a),(o&t.TileFlag.VERTICAL)>>>0&&t.setFlipY(l,a)}else cc.log("Missing Prefab Name in Prefab folder="+i)}else cc.log("Missing Prefab Name in tsx file")}),n.parent=this.node,this._nodeList.push(n))},t.prototype.findPrefabNameByID=function(e){var t=this.tiledMap.getPropertiesForGID(e);return t&&t.prefabName?t.prefabName:null},t.prototype.findPerfabByName=function(e){for(var t=0;t<this.Prefabs.length;t++){var o=this.Prefabs[t];if(null!=o&&o.name==e)return o}return null},t.prototype.setFlipX=function(e,t){e.setScale(cc.v2(-1,1)),cc.log(e),270==t||-90==t?e.y+=e.width:180==t||-180==t?e.x-=e.width:90==t||-270==t?e.y-=e.width:0!=t&&360!=t||(e.x+=e.width)},t.prototype.setFlipY=function(e,t){e.setScale(cc.v2(1,-1)),270==t||-90==t?e.x-=e.height:180==t||-180==t?e.y-=e.height:90==t||-270==t?e.x+=e.height:0!=t&&360!=t||(e.y+=e.height)},t.prototype.drawNavigatePoints=function(e){var t=new cc.Node;t.parent=e;var o=t.addComponent(cc.Graphics);t.name="DrawingCircle",t.group=d.GroupCollision.ROAD;for(var n=h.default.getInst().getAll(),r=0;r<n.length;r++){var i=n[r],a=new cc.Node;a.addComponent(cc.Label),a.parent=e,a.position=cc.v3(i.x,i.y,0),a.getComponent(cc.Label).string=""+r,o.circle(i.x,i.y,i.z),o.strokeColor=cc.Color.RED,o.stroke()}},t.prototype.exporter=function(e){var t=this;this._json.proreties=e._tileProperties,this._json.layers=[],this.getAllLayers().forEach(function(e){var o=e.name;if(cc.log("name"+o),e instanceof cc.TMXLayerInfo){var n={},r=t.getLayer(o);n._tileSize=r.getMapTileSize(),n._layerSize=r.getLayerSize(),n._fill=!1,0==r._vertices.length?n._tiles=[]:(n._tiles=[],t.isFillLayer(r._tiles)?(n._fill=!0,n._tiles[0]=r._tiles[0]):r._tiles.forEach(function(e,t){n._tiles[t]=e})),n._type=l.LAYER,n._name=o,n._active=r.node.active,t._json.layers.push(n)}else if(e instanceof cc.TMXObjectGroupInfo){var i={},a=t.getGroup(o),c=a.getGroupName();i._name=c,i._active=a.node.active,i._objects=[],a.getObjects().forEach(function(e){delete e.offset,delete e.id,delete e.type,delete e.name;var t={w:e.width,h:e.height,x:e.x,y:e.y,r:e.rotation,v:e.visible,g:e.gid};i._objects.push(t)}),i._type=l.OBJECT,t._json.layers.push(i)}});var o=this.tiledMap.getMapSize(),n=this.tiledMap.getTileSize();this._json.MapSize=o,this._json.TileSize=n,JSON.stringify(this._json)},t.prototype.download=function(){var e=JSON.stringify(this._json),t=document.createElement("a");t.setAttribute("href","data:application/octet-stream;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",this.getMap()+".json"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},t.prototype.registerEventHandlers=function(){var e=this;this.node.on("gate",function(t){e._gate.getComponent(p.default).updateFrame(t)})},t.prototype.isFillLayer=function(e){var t=e[0];if(0==t)return!1;for(var o=0,n=e;o<n.length;o++){var r=n[o];if(t!=r&&this.findPrefabNameByID(t)!=this.findPrefabNameByID(r))return!1}return!0},t.prototype.reload=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.reset(),[4,this.onLoadTileMap()];case 1:return t.sent(),e=f.default.allStartPoints[0],cc.log(e),[2]}})})},t.prototype.setMapSize=function(e){this.mapSize=e},t.prototype.getMapSize=function(){return this.mapSize},t.prototype.getParentOfName=function(){return this.playerNameNode},t.inst=null,a([m(cc.Camera)],t.prototype,"camera",void 0),a([m(cc.TiledMapAsset)],t.prototype,"Mapfile",void 0),a([m],t.prototype,"drawCheckPoint",void 0),a([m],t.prototype,"debugMap",void 0),a([m(cc.Label)],t.prototype,"LBbutton",void 0),o=a([y],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../GameCamera":"GameCamera","../Gate":"Gate","../GroupCollision/GroupCollisionManager":"GroupCollisionManager","../StartPoint":"StartPoint","./PathManager":"PathManager"}],MapItem:[function(e,t,o){"use strict";cc._RF.push(t,"f36c8kfg3JEfYHILpW4EuH4","MapItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.MAP_STATUS=void 0;var a,c,s=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),l=e("../../UserInfo"),u=e("../../Utils/ConstConfig"),p=cc._decorator,d=p.ccclass,f=p.property;(function(e){e[e.LOCKED=0]="LOCKED",e[e.UNLOCKED=1]="UNLOCKED"})(a=o.MAP_STATUS||(o.MAP_STATUS={})),function(e){e[e.Bronze=0]="Bronze",e[e.Silver=1]="Silver",e[e.Gold=2]="Gold",e[e.Platinum=3]="Platinum",e[e.Diamond=4]="Diamond",e[e.Length=5]="Length"}(c||(c={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unLockedNode=null,t.lockedNode=null,t.title=null,t.frame=null,t.selected=null,t.bgFrames=[],t.bgBox=null,t.tierIcon=null,t.numPS=null,t.bestTime=null,t.bestPostion=null,t.newIcon=null,t._parent=null,t._mapFile="",t._mapName="",t._unlocked=!1,t._thumbnailUrl="",t._maxLap=0,t._unlockPowerSocre=0,t._tier=c.Bronze,t._kickLap=[],t._mapID=0,t.UNLOCKED=0,t.UNLOCKED_NEW=1,t.LOCK=2,t}return r(t,e),t.prototype.setParent=function(e){this._parent=e},t.prototype.onLoad=function(){cc.log("New Map Item Load")},t.prototype.start=function(){},t.prototype.setTitle=function(e){this.title.string=this._mapName=e},t.prototype.setMapFile=function(e){this._mapFile=e},t.prototype.getMapFile=function(){return this._mapFile},t.prototype.setMapFrame=function(e){this._thumbnailUrl=e;var t=this;cc.resources.load(e,cc.SpriteFrame,function(e,o){e?cc.warn(e):t.frame.spriteFrame=o})},t.prototype.getThumbnailUrl=function(){return this._thumbnailUrl},t.prototype.getMapFrame=function(){return this.frame.spriteFrame},t.prototype.getMapName=function(){return this._mapName},t.prototype.isUnlockedMap=function(){return this._unlocked},t.prototype.onClick=function(){this._parent.emit("onMapSelect",this._mapFile)},t.prototype.setSelect=function(){},t.prototype.setMapName=function(e){this._mapName=e},t.prototype.setMaxLap=function(e){this._maxLap=e},t.prototype.setUnlockedPS=function(e){this._unlockPowerSocre=e,this.numPS&&(this.numPS.string=e.toString())},t.prototype.setTier=function(e,t){this._tier=e,t&&(this.tierIcon.spriteFrame=t)},t.prototype.setKickLap=function(e){this._kickLap=e},t.prototype.setMapID=function(e){this._mapID=e},t.prototype.setLockMap=function(e,t){this.lockedNode.active=e,this.unLockedNode.active=!e,this._unlocked=!e,this.node.getComponent(cc.Button).enabled=!e&&s.NgcBuildConfig.enabledDebugMode,this.bgBox.spriteFrame=e?this.bgFrames[this.LOCK]:t?this.bgFrames[this.UNLOCKED_NEW]:this.bgFrames[this.UNLOCKED],this.newIcon.active=!e&&t},t.prototype.setUnlockMap=function(){l.UserInfo.getNumValue(u.ConstConfig.SAVE_KEY.UNLOCKED_MAP+this._mapFile)==a.LOCKED&&(l.UserInfo.setNumValue(a.UNLOCKED,u.ConstConfig.SAVE_KEY.UNLOCKED_MAP+this._mapFile),this.setLockMap(!1,!0))},t.prototype.setRank=function(e){this.bestPostion.string=e},t.prototype.setBestTime=function(e){this.bestTime.string=e},i([f(cc.Node)],t.prototype,"unLockedNode",void 0),i([f(cc.Node)],t.prototype,"lockedNode",void 0),i([f(cc.Label)],t.prototype,"title",void 0),i([f(cc.Sprite)],t.prototype,"frame",void 0),i([f(cc.Node)],t.prototype,"selected",void 0),i([f({type:cc.SpriteFrame})],t.prototype,"bgFrames",void 0),i([f({type:cc.Sprite})],t.prototype,"bgBox",void 0),i([f({type:cc.Sprite})],t.prototype,"tierIcon",void 0),i([f(cc.Label)],t.prototype,"numPS",void 0),i([f(cc.Label)],t.prototype,"bestTime",void 0),i([f(cc.Label)],t.prototype,"bestPostion",void 0),i([f(cc.Node)],t.prototype,"newIcon",void 0),i([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig"}],MarqueeSection:[function(e,t,o){"use strict";cc._RF.push(t,"1cb41JWfrxCBrejUlLGgn0w","MarqueeSection");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./SectionBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./SectionBase":"SectionBase"}],MessageBuilder:[function(e,t,o){"use strict";var n;cc._RF.push(t,"68a772G6VJJUbJR2SYOFoCr","MessageBuilder"),Object.defineProperty(o,"__esModule",{value:!0}),o.MessageBuilder=void 0;var r=e("./Protocol"),i=e("./MessageDefines"),a=e("long");o.MessageBuilder=((n={})[r.Protocol.SERVER_INIT]=function(e){var t=i.Server_Init.create();return t.msgType=r.Protocol.SERVER_INIT,t.clientID=e,i.Server_Init.encode(t).finish()},n[r.Protocol.JOIN_ROOM]=function(e,t,o){void 0===t&&(t={}),void 0===o&&(o={});var n=i.Client_JoinRoom.create();return n.msgType=r.Protocol.JOIN_ROOM,n.roomType=e,n.params=JSON.stringify(t),n.options=JSON.stringify(o),i.Client_JoinRoom.encode(n).finish()},n[r.Protocol.LEAVE_ROOM]=function(){var e=i.Client_LeaveRoom.create();return e.msgType=r.Protocol.LEAVE_ROOM,i.Client_LeaveRoom.encode(e).finish()},n[r.Protocol.PING]=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var o=i.Ping.create();return o.msgType=r.Protocol.PING,o.reqTime=a.fromValue(e),o.resTime=a.fromValue(t),i.Ping.encode(o).finish()},n[r.Protocol.NGC_BROADCAST]=function(e,t,o,n){var a=i.NGC_Broadcast.create();return a.msgType=r.Protocol.NGC_BROADCAST,a.type=e,a.fromID=t,a.payload=JSON.stringify(o),a.timestamp=n,i.NGC_Broadcast.encode(a).finish()},n),cc._RF.pop()},{"./MessageDefines":"MessageDefines","./Protocol":"Protocol",long:81}],MessageDefines:[function(e,t){"use strict";var o;cc._RF.push(t,"21664NSlX9Hs54StsQ6KbXx","MessageDefines"),o=function(e){var t=e.Reader,o=e.Writer,n=e.util,r=e.roots.default||(e.roots.default={});return r.Server_Init=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.clientID="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.clientID&&Object.hasOwnProperty.call(e,"clientID")&&t.uint32(18).string(e.clientID),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.Server_Init;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;case 2:i.clientID=e.string();break;default:e.skipType(7&a)}}return i},e}(),r.Client_JoinRoom=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.roomType="",e.prototype.params="",e.prototype.options="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.roomType&&Object.hasOwnProperty.call(e,"roomType")&&t.uint32(18).string(e.roomType),null!=e.params&&Object.hasOwnProperty.call(e,"params")&&t.uint32(26).string(e.params),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(34).string(e.options),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.Client_JoinRoom;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;case 2:i.roomType=e.string();break;case 3:i.params=e.string();break;case 4:i.options=e.string();break;default:e.skipType(7&a)}}return i},e}(),r.Client_LeaveRoom=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.Client_LeaveRoom;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;default:e.skipType(7&a)}}return i},e}(),r.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.reqTime=n.Long?n.Long.fromBits(0,0,!0):0,e.prototype.resTime=n.Long?n.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.reqTime&&Object.hasOwnProperty.call(e,"reqTime")&&t.uint32(16).uint64(e.reqTime),null!=e.resTime&&Object.hasOwnProperty.call(e,"resTime")&&t.uint32(24).uint64(e.resTime),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.Ping;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;case 2:i.reqTime=e.uint64();break;case 3:i.resTime=e.uint64();break;default:e.skipType(7&a)}}return i},e}(),r.NGC_Broadcast=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.type="",e.prototype.fromID="",e.prototype.payload="",e.prototype.timestamp=n.Long?n.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),null!=e.fromID&&Object.hasOwnProperty.call(e,"fromID")&&t.uint32(26).string(e.fromID),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(34).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(40).uint64(e.timestamp),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.NGC_Broadcast;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;case 2:i.type=e.string();break;case 3:i.fromID=e.string();break;case 4:i.payload=e.string();break;case 5:i.timestamp=e.uint64();break;default:e.skipType(7&a)}}return i},e}(),r},"function"==typeof define&&define.amd?define(["protobufjs/minimal"],o):"function"==typeof e&&"object"==typeof t&&t&&t.exports&&(t.exports=o(e("protobufjs/minimal"))),cc._RF.pop()},{"protobufjs/minimal":82}],MessageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0f009wFhwFLSbriVV856/2W","MessageDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcMessageDialog=void 0;var a=e("../../../../Core/Utils"),c=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../DialogBase"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelLocalized=null,t.background=null,t}return r(t,e),t.prototype.init=function(e,t){void 0===t&&(t=!1),this.labelLocalized.setLocalizedText(e),this.background&&(this.background.active=t)},t.prototype.show=function(e,t,o,n,r){var i=this;e||(e=cc.find("Canvas"));var c,s=this.node.getComponent(cc.Widget);if(null!=o&&(s.isAlignLeft=!0,s.left=o),null!=n&&(s.isAlignRight=!0,s.right=n),this.node.parent=e,r&&(this.node.scale=r),t)c=a.Utils.getWorldPos(t);else{t=e;var l=a.Utils.getWorldPos(e);c=cc.v2(l.x,l.y-e.height/2)}a.Utils.setWorldPos(this.node,c),s.updateAlignment(),this.node.active=!0,this.node.opacity=1,this.node.y=this.node.y+t.height/2+30,cc.tween(this.node).delay(.1).to(0,{opacity:255}).to(1.5,{opacity:0,y:this.node.y+20}).call(function(){i.hide()}).start()},t.urlPrefab="MessageDialog",t.bundleName="02_dialog",t.dialogType="NgcMessageDialog",i([p(c.NgcLabelLocalized)],t.prototype,"labelLocalized",void 0),i([p(cc.Node)],t.prototype,"background",void 0),i([u],t)}(s.NgcDialogBase);o.NgcMessageDialog=d,cc._RF.pop()},{"../../../../Core/Utils":"Utils","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../DialogBase":"DialogBase"}],ModeButton:[function(e,t,o){"use strict";cc._RF.push(t,"85addauUUFO4LeKX2CqxScm","ModeButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcModeButton=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.infoButton=null,t.buttonNameLabel=null,t.progressBar=null,t.progressBarFill=null,t.highlight=null,t.lockedContents=null,t.unlockedContents=null,t.modeNameLabel=null,t.timerLabel=null,t.numbers=null,t.loadingIcon=null,t.crownIcon=null,t.crownIconProgressScale=.025,t.numberProgressScale=.18,t.numberProgressColor=cc.color(255,234,77),t.leftNumberLabel=null,t.rightNumberLabel=null,t}return r(t,e),t.prototype.onLoad=function(){this.leftNumberLabel=this.numbers.getChildByName("Left").getComponent(a.NgcLabelLocalized),this.rightNumberLabel=this.numbers.getChildByName("Right").getComponent(a.NgcLabelLocalized),this.crownIcon.active=!1},t.prototype.playLoadingAnimation=function(){this.loadingIcon.active=!0},t.prototype.update=function(e){this.loadingIcon.active&&(this.loadingIcon.angle-=550*e)},t.prototype.isLoading=function(){return this.loadingIcon.active},t.prototype.stopLoadingAnimation=function(){var e=this;this.loadingIcon.active&&cc.tween(this.loadingIcon).to(.25,{opacity:0},{easing:"cubicOut"}).call(function(){e.loadingIcon.active=!1}).start()},t.prototype.updateProgressNumber=function(e,t){null!=e&&(console.log("PROGRESS: ",e),this.leftNumberLabel.string=e.toString()),null!=t&&(this.rightNumberLabel.string="/"+t.toString())},t.prototype.refreshContents=function(e,t,o){-1!==t?(this.timerLabel.node.parent.active=!0,this.timerLabel.startCount(t),o&&this.timerLabel.setTimerExpiredCallback(o)):this.timerLabel.node.parent.active=!1,c.NgcLocalizedManager.setTextKey(this.modeNameLabel.getComponent(a.NgcLabelLocalized),e)},i([p(cc.Node)],t.prototype,"background",void 0),i([p(cc.Node)],t.prototype,"infoButton",void 0),i([p(cc.Node)],t.prototype,"buttonNameLabel",void 0),i([p(cc.Node)],t.prototype,"progressBar",void 0),i([p(cc.Node)],t.prototype,"progressBarFill",void 0),i([p(cc.Node)],t.prototype,"highlight",void 0),i([p(cc.Node)],t.prototype,"lockedContents",void 0),i([p(cc.Node)],t.prototype,"unlockedContents",void 0),i([p(cc.Node)],t.prototype,"modeNameLabel",void 0),i([p(s.NgcTimerLabelLocalized)],t.prototype,"timerLabel",void 0),i([p(cc.Node)],t.prototype,"numbers",void 0),i([p(cc.Node)],t.prototype,"loadingIcon",void 0),i([p(cc.Node)],t.prototype,"crownIcon",void 0),i([p()],t.prototype,"crownIconProgressScale",void 0),i([p()],t.prototype,"numberProgressScale",void 0),i([p(cc.Color)],t.prototype,"numberProgressColor",void 0),i([u],t)}(cc.Component);o.NgcModeButton=d,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized"}],Move:[function(e,t,o){"use strict";cc._RF.push(t,"aeb1a26J4NBe54QPZnSXukJ","Move");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t}return r(t,e),t.prototype.start=function(){this.camera&&(cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)),this.screenWidth=cc.view.getFrameSize().width,this.screenHeight=cc.view.getFrameSize().height},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.left:this.camera.node.x-=10;break;case cc.macro.KEY.right:this.camera.node.x+=10;break;case cc.macro.KEY.space:break;case cc.macro.KEY.up:this.camera.node.y+=10;break;case cc.macro.KEY.down:this.camera.node.y-=10}cc.log(this.offScreen())},t.prototype.onKeyUp=function(){},t.prototype.offScreen=function(){var e=cc.Vec2.ZERO,t=cc.v2(this.node.parent.convertToWorldSpaceAR(this.node.position)),o=this.node.getBoundingBoxToWorld();return this.camera.getWorldToScreenPoint(cc.v2(o.x,o.y),e),cc.log("bound",o),cc.log("getBoundingBoxToWorld",this.node.getBoundingBoxToWorld()),cc.log("worldpoint"+t),cc.log("screenPoint"+e),cc.log("screenPoint.x + bound.width",e.x+o.width),cc.log(" screenPoint.y + bound.height",e.y+o.height),cc.log("  screenPoint.x - bound.width < this.screenWidth",e.x-o.width<this.screenWidth),cc.log("screenPoint.y - bound.height < this.screenHeight",e.y-o.height<this.screenHeight),e.x+o.width<0||e.y+o.height<0||e.x-o.width>this.screenWidth||e.y-o.height>this.screenHeight},t.prototype.update=function(){},i([s(cc.Camera)],t.prototype,"camera",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],NanoSrv:[function(t,o,n){"use strict";cc._RF.push(o,"ca1f36ei+RPnoyX3d1q/ZmX","NanoSrv");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},c=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.TrackType=void 0;var s,l=t("crypto-js"),u=t("simple-crypto-js"),p=t("../../Core/Utils"),d=t("../../GameFramework/Scripts/BuildConfig"),f=t("../../GameFramework/Scripts/CountryFlagsManager"),h=t("../../GameFramework/Scripts/Network/NetUtils"),g=t("../../GameFramework/Scripts/NgcUserInfo"),y=t("../../Services/Platform/Platform"),m=t("../SDK"),_=cc._decorator;_.ccclass,_.property,function(e){e.Launching="launching",e.GDPR_response="gdpr_response",e.Install_app_click="install_app_click",e.Vignette_interaction="vignette_interaction"}(s=n.TrackType||(n.TrackType={}));var v=function(e){function t(){var o=e.call(this)||this;return o.userID=null,o.gameID=null,o.initialized=!1,o.cryptr=new u.default("pizzataco"),o.loggedIn=!1,o.devTimeOffsetMinutes=0,o.serviceURL="",o.encrypt=!0,o.loginAuthority="",o.uplayInfo={},o.loginData={},o.accessToken=null,o.randomNameDisabled=!1,t.inst&&cc.error("There are multiple places constructing NanoSrv!!!"),t.inst=o,"UAT"!==d.NgcBuildConfig.deploymentEnvironment&&"Dev"!==d.NgcBuildConfig.deploymentEnvironment||(o.encrypt=!1),o}return i(t,e),t.prototype._preInit=function(){var e=this;return new Promise(function(t){e.preInitialized=!0,t("NanoSrv pre-initialized")})},t.prototype._init=function(e){var t=this;return f.NgcCountryFlagsManager.getLocalCountry(),this.serviceURL=e.SDK.NanoSrv.url,this.gameID=e.platformGameID,0==this.serviceURL.length?new Promise(function(e,t){t('"Service url not set (Platform.env init data serviceURL field)"')}):this._readUserID()?(console.log("userID = "+this.userID),new Promise(function(e){t.initialized=!0,e("NanoSrv initialized")})):new Promise(function(e,t){t("NanoSrv Unable to determine or create new user ID")})},t.prototype._login=function(){var e=this;return new Promise(function(t,o){var n=e.getAccessToken();n.catch(function(e){o(e)}),n.then(function(n){e.accessToken=n;var r=p.Utils.getUrlParameter("platform"),i=Intl.DateTimeFormat().resolvedOptions().timeZone,a=-(new Date).getTimezoneOffset()/60,c=i+" UTC"+(a<0?"-":"+")+a,l={from:"game",gameId:e.gameID,type:s.Launching,platform:r||d.NgcBuildConfig.buildPlatform,country:f.NgcCountryFlagsManager.localCountry,deviceType:cc.sys.isMobile?"Mobile":"PC",browser:p.BROWSER_TYPE[p.Utils.getBrowserType()].toLowerCase(),page_url:window.location!=window.parent.location?document.referrer:document.location.href,os:p.OS_TYPE[p.Utils.getOSType()].toLowerCase(),timeZone:c};e.sendTracking(l);var u=JSON.stringify(e.uplayInfo);e.serviceGet("/profile",u,function(n,r){n&&o(n),e.loginData=JSON.parse(r).data,t(r)})})})},t.prototype._getUsername=function(){return"uplay"==this.loginAuthority?this.uplayInfo.name:"Guest"},t.prototype._getCohort=function(){if(null==this.loginData)return"";var e=this.getCurGameData();return e?e.cohort:""},t.prototype.getCurGameData=function(){return null==this.loginData?null:this.loginData.playerData},t.prototype.getCurSocialInfo=function(){return null==this.loginData?null:this.loginData.socialInfo},t.prototype._getTotalSessions=function(){return g.default.totalSessions},t.prototype.isLoggedIn=function(){return!1},t.prototype.getUserID=function(){return""},t.prototype.getName=function(){return"Nano"},t.prototype._createFakeUserID=function(){return"~"+h.NgcNetUtils.generateRandomUUID()},t.prototype._readUserID=function(){return this.userID=g.default.userIdKey,!0},t.setAccessTokenOutOfDateCallback=function(e){t._accessTokenOutOfDateCallback=e},t.prototype.serviceGet=function(e,o,n){var r=this.serviceURL+e,i=this;p.Utils.getHttp(r,o,function(e,o){if(e){console.log("[NanoSrv] `serviceGet` - err = "+e);var r=JSON.parse(e);return r&&"Outofdate"===r.message&&t._accessTokenOutOfDateCallback(),void n(e,null)}if(i.encrypt){var a=l.AES.decrypt(o,l.SHA256(g.default.secretKey).toString(l.enc.Base64)).toString(l.enc.Utf8);n(null,a)}else n(null,o)},this.accessToken)},t.prototype.servicePost=function(e,o,n){if(!y.NgcPlatform.isOfflineMode()){var r=this.serviceURL+e,i=JSON.parse(o);i&&(i.modified=Date.now());var a=l.AES.encrypt(JSON.stringify(i),l.SHA256(g.default.secretKey).toString(l.enc.Base64)).toString(),c=JSON.stringify({enc:a});this.encrypt||(c=o);var s=p.Utils.postHttp(r,c,"application/json",this.accessToken),u=this;s.then(function(e){if(u.encrypt){var t=l.AES.decrypt(e,l.SHA256(g.default.secretKey).toString(l.enc.Base64)).toString(l.enc.Utf8);n(null,t)}else n(null,e)}),s.catch(function(e){e&&"Outofdate"===e.message&&t._accessTokenOutOfDateCallback(),n(e,null)})}},t.prototype.servicePostAsync=function(e,t){return a(this,void 0,Promise,function(){var o=this;return c(this,function(){return[2,new Promise(function(n,r){o.servicePost(e,t,function(e,t){e?r(e):n(t)})})]})})},t.prototype.getCurGameInfo=function(){return this.loginData.gameInfo},t.prototype.getAccessToken=function(){var e=this,t=window.location!=window.parent.location?document.referrer:document.location.href;t=y.NgcPlatform.isRunFromApp()?"":t;var o=p.Utils.getUrlParameter("platform"),n=null,r={playerId:this.userID,gameVersion:d.NgcBuildConfig.buildVersionName,secretKey:g.default.secretKey,gameId:this.gameID,platform:o||d.NgcBuildConfig.buildPlatform,referrerUrl:t,enc:this.encrypt},i=g.default.userAppId;i&&(r.appUserId=i),console.log("@@@@@@@@@@@@ appUserId From NANO APP ",i);var a=JSON.stringify(r);return new Promise(function(t,o){var r=p.Utils.postHttp(e.serviceURL+"/auth/gettoken",a);r.then(function(e){var o=JSON.parse(e);if(o){var r=o.data;n=r.accessToken,t(n)}}),r.catch(function(e){o(e)})})},t.prototype.sendTracking=function(e){if(this.accessToken){var t=this.serviceURL+"/tdata",o=JSON.stringify(e);p.Utils.postHttp(t,o,"application/json",this.accessToken)}},t.prototype.refreshAccessToken=function(){return a(this,void 0,void 0,function(){var e=this;return c(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,o){e.getAccessToken().then(function(o){e.accessToken=o,t()},function(e){o(e)})})];case 1:return t.sent(),[2]}})})},t.prototype.serviceGetAsync=function(e,t){return a(this,void 0,void 0,function(){var o=this;return c(this,function(){return[2,new Promise(function(n,r){o.serviceGet(e,t,function(e,t){e?r(e):n(t)})})]})})},t.prototype._logout=function(){return new Promise(function(e){e()})},t.prototype.resetUserID=function(){var e=this;g.default.resetNgcData();var t=null;return window.accountLinked?(window.blockGameLoading=!0,this.randomNameDisabled=!0,t=new Promise(function(t,o){var n=setTimeout(function(){window.accountLinked&&(g.default.getNanoUserInfoFromLocalstorage(),clearInterval(n),e._init(d.NgcBuildConfig).then(function(){e._login().then(function(){e._onResetCompleted(),t()}).catch(function(){e._onResetFailed(),o()})}).catch(function(){e._onResetFailed(),o()}))},1e3)})):t=new Promise(function(t,o){e._init(d.NgcBuildConfig).then(function(){e._login().then(function(){e._onResetCompleted(),t()}).catch(function(){e._onResetFailed(),o()})}).catch(function(){e._onResetFailed(),o()})}),t},t.prototype._onResetCompleted=function(){t._onResetCompletedCallbacks.forEach(function(e){e&&e()})},t.prototype._onResetFailed=function(){console.error("[NanoSrv] onResetFailed")},t.setOnResetCallback=function(e){t._onResetCompletedCallbacks.includes(e)||t._onResetCompletedCallbacks.push(e)},t.removeOnResetCallback=function(e){cc.js.array.remove(t._onResetCompletedCallbacks,e)},t.inst=null,t._onResetCompletedCallbacks=[],t.LOCAL_STORAGE_USERID_KEY="_linseb",t}(m.NgcSDK);n.default=v,cc._RF.pop()},{"../../Core/Utils":"Utils","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../GameFramework/Scripts/Network/NetUtils":"NetUtils","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../Services/Platform/Platform":"Platform","../SDK":"SDK","crypto-js":22,"simple-crypto-js":120}],NavBarA2HSInstalledNotice:[function(e,t,o){"use strict";cc._RF.push(t,"43d9er40j5DDL0s7yQ6/tg8","NavBarA2HSInstalledNotice");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarA2HSInstalledNotice=void 0;var a=e("./NavBarDialogBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(){var e=this,t=cc.find("Canvas");this.node.parent=t,this.node.active=!0,this.node.setPosition(cc.v2(0,0)),this.node.opacity=0,cc.tween(this.node).to(.5,{opacity:255}).delay(1).to(.5,{opacity:0}).call(function(){e.hide()}).start()},t.prototype.hide=function(){this.node.active=!1,this.node.destroy()},t.urlPrefab="NavBarA2HSInstaledNotice",t.dialogType="NgcNavBarA2HSInstalledNotice",i([s],t)}(a.NgcNavBarDialogBase));o.NgcNavBarA2HSInstalledNotice=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarA2HSNotSupportTotally_Mobile:[function(e,t,o){"use strict";cc._RF.push(t,"dc05fYoAz1IgqolbDoGhHpW","NavBarA2HSNotSupportTotally_Mobile");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarA2HSNotSupportTotally_Mobile=void 0;var a=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("./NavBarA2HSNoticeDialog"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pcBrowser=null,t}return r(t,e),t.prototype.onLoad=function(){this.pcBrowser.string="\u2022 Chrome\n\u2022 Firefox\n\u2022 Internet Explorer\n\u2022 Safari\n"+a.NgcLocalizedManager.t("AHS_CHROMIUM_BASED").text},t.urlPrefab="NavBarA2HSNotSupportTotally_Mobile",t.dialogType="NavBarA2HSNotSupportTotally_Mobile",i([u(cc.Label)],t.prototype,"pcBrowser",void 0),i([l],t)}(c.NgcNavBarA2HSNoticeDialog);o.NavBarA2HSNotSupportTotally_Mobile=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","./NavBarA2HSNoticeDialog":"NavBarA2HSNoticeDialog"}],NavBarA2HSNotSupport_Mobile:[function(e,t,o){"use strict";cc._RF.push(t,"30083oXbRRDR4ew4mHKFzZ5","NavBarA2HSNotSupport_Mobile");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarA2HSNotSupport_Mobile=void 0;var a=e("./NavBarA2HSNoticeDialog"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.urlPrefab="NavBarA2HSNotSupport_Mobile",t.dialogType="NavBarA2HSNotSupport_Mobile",i([s],t)}(a.NgcNavBarA2HSNoticeDialog));o.NavBarA2HSNotSupport_Mobile=l,cc._RF.pop()},{"./NavBarA2HSNoticeDialog":"NavBarA2HSNoticeDialog"}],NavBarA2HSNotSupport_PC:[function(e,t,o){"use strict";cc._RF.push(t,"df6e5eb8tdNKa9nt2E3rhac","NavBarA2HSNotSupport_PC");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarA2HSNotSupport_PC=void 0;var a=e("./NavBarA2HSNoticeDialog"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.urlPrefab="NavBarA2HSNotSupport_PC",t.dialogType="NavBarA2HSNotSupport_PC",i([s],t)}(a.NgcNavBarA2HSNoticeDialog));o.NavBarA2HSNotSupport_PC=l,cc._RF.pop()},{"./NavBarA2HSNoticeDialog":"NavBarA2HSNoticeDialog"}],NavBarA2HSNoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c237dGk8rVLK5Kd+dy465i/","NavBarA2HSNoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarA2HSNoticeDialog=void 0;var a=e("./NavBarDialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.safariNode=null,t.FFnode=null,t.edgeNode=null,t.pcNode=null,t.macNode=null,t}return r(t,e),t.prototype.start=function(){if(cc.sys.isMobile)this.safariNode&&this.FFnode&&this.edgeNode&&(this.safariNode.active=cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI,this.FFnode.active=cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX,this.edgeNode.active=cc.sys.browserType===cc.sys.BROWSER_TYPE_EDGE);else if(this.pcNode&&this.macNode){var e=cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI;this.pcNode.active=cc.sys.os!==cc.sys.OS_OSX||cc.sys.os===cc.sys.OS_OSX&&!e,this.macNode.active=cc.sys.os===cc.sys.OS_OSX&&e}},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NavBarA2HSInstaledNotice",t.dialogType="NgcNavBarA2HSNoticeDialog",i([l(cc.Node)],t.prototype,"safariNode",void 0),i([l(cc.Node)],t.prototype,"FFnode",void 0),i([l(cc.Node)],t.prototype,"edgeNode",void 0),i([l(cc.Node)],t.prototype,"pcNode",void 0),i([l(cc.Node)],t.prototype,"macNode",void 0),i([s],t)}(a.NgcNavBarDialogBase);o.NgcNavBarA2HSNoticeDialog=u,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarAboutDialog:[function(e,t,o){"use strict";cc._RF.push(t,"90482k8tLZBJa7twH0G37fj","NavBarAboutDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarAboutDialog=void 0;var a=e("../../../Core/Utils"),c=e("../../../GameFramework/Scripts/BuildConfig"),s=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/NgcUserInfo"),p=e("../../../NgcVersion"),d=e("../../../SDK/Nano/NanoSrv"),f=e("../../../Services/Platform/Platform"),h=e("./NavBarDialogBase"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.versionLabel=null,t.mainLayout=null,t.supportCode=null,t.PRIVACY_POLICY_URL="https://legal.ubi.com/privacypolicy/",t.TERMS_AND_CONDITIONS_URL="https://legal.ubi.com/termsofuse",t.SUPPORT_CODE_DURATION=25056e5,t}return r(t,e),t.prototype.start=function(){var e="",t=this.mainLayout.node.getChildByName("privacy_policy_button"),o=this.mainLayout.node.getChildByName("terms_and_conditions");f.NgcPlatform.inst&&f.NgcPlatform.inst.getName()==a.Utils.enumToString(f.PlatformID,f.PlatformID.Poki)&&(t.active=!1,o.active=!1),f.NgcPlatform.inst&&f.NgcPlatform.inst.getName()==a.Utils.enumToString(f.PlatformID,f.PlatformID.GameDistribution)&&(e="Game Distribution ",t.active=!1,o.active=!1),f.NgcPlatform.inst&&f.NgcPlatform.inst.getName()==a.Utils.enumToString(f.PlatformID,f.PlatformID.HUZ)&&(t.active=!1,o.active=!1),c.NgcBuildConfig.offlineMode&&(t.active=!1,o.active=!1),f.NgcPlatform.isRunFromApp()&&(t.active=!1,o.active=!1),this.versionLabel.string=c.NgcBuildConfig.buildVersionName+"\n"+e+p.NgcVersionConfig.buildNgcVersion,this.mainLayout.updateLayout(),this.getSupportCode()},t.prototype.getSupportCode=function(){var e=this;if(f.NgcPlatform.isOfflineMode())this.supportCode.opacity=0;else{var t=this.supportCode.getChildByName("left"),o=this.supportCode.getChildByName("right"),n=null,r=null,i=Date.now();if(u.default.supportCode.length>0&&(n=u.default.supportCode.split("|")[0],r=parseInt(u.default.supportCode.split("|")[1])),r&&i-r>=this.SUPPORT_CODE_DURATION&&(n=null),n)return l.NgcLocalizedManager.setTextKey(t.getComponent(s.NgcLabelLocalized),"NGG_SUPPORT_CODE"),void(o.getComponent(s.NgcLabelLocalized).string=n);this.supportCode.opacity=0,d.default.inst.serviceGet("/supportcode",null,function(n,r){if(r){var a=JSON.parse(r).data;u.default.supportCode=a+"|"+i,l.NgcLocalizedManager.setTextKey(t.getComponent(s.NgcLabelLocalized),"NGG_SUPPORT_CODE"),o.getComponent(s.NgcLabelLocalized).string=a,cc.tween(e.supportCode).to(.25,{opacity:255}).start()}else console.log("Cant get support code")})}},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onButtonPrivacyClick=function(){cc.sys.openURL(this.PRIVACY_POLICY_URL)},t.prototype.onButtonTermsAndConditionsClick=function(){cc.sys.openURL(this.TERMS_AND_CONDITIONS_URL)},t.urlPrefab="NavBarAboutDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarAboutDialog",t.savedSupportCode=null,i([m(cc.Label)],t.prototype,"versionLabel",void 0),i([m(cc.Layout)],t.prototype,"mainLayout",void 0),i([m(cc.Node)],t.prototype,"supportCode",void 0),i([y],t)}(h.NgcNavBarDialogBase);o.NgcNavBarAboutDialog=_,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NgcVersion":"NgcVersion","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","./NavBarDialogBase":"NavBarDialogBase"}],NavBarConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d4076QxIzBParflV+seqF4+","NavBarConfirmDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarConfirmDialog=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("./NavBarDialogBase"),s=e("./NavBarManager"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.messageLabel=null,t.headerNode=null,t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===r&&(r=!0),this._callBackOk=o,this._callBackClose=n,this.titleLabel.setLocalizedText(e),this.messageLabel.setLocalizedText(t),this.headerNode.active=r},t.prototype.okOnClick=function(){this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){"function"==typeof this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){s.NgcNavBarManager.inst&&s.NgcNavBarManager.inst.isShowingExit&&(s.NgcNavBarManager.inst.isShowingExit=!1),e.prototype.hide.call(this)},t.urlPrefab="NavBarConfirmDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarConfirmDialog",i([p(a.NgcLabelLocalized)],t.prototype,"titleLabel",void 0),i([p(a.NgcLabelLocalized)],t.prototype,"messageLabel",void 0),i([p(cc.Node)],t.prototype,"headerNode",void 0),i([u],t)}(c.NgcNavBarDialogBase);o.NgcNavBarConfirmDialog=d,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","./NavBarDialogBase":"NavBarDialogBase","./NavBarManager":"NavBarManager"}],NavBarConflictDialog:[function(t,o,n){"use strict";cc._RF.push(o,"7b658de4NVEm5XFbT4JMqze","NavBarConflictDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NavBarConflicttDialog=void 0;var l=t("./NavBarDialogBase"),u=t("./NavBarManager"),p=t("./NavBarUserConflictInfo"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.localSave=null,t.cloudSave=null,t}var o;return i(t,e),o=t,t.prototype.init=function(e){this._callBackOk=e,this.updateUserConflictInfo(),o.instancesQueue.push(this),this.resizeWidget(!0,.75,!0)},t.prototype.localSaveOnClick=function(){this._callBackOk&&this._callBackOk(!0),this.hideNode()},t.prototype.cloudSaveOnClick=function(){this._callBackOk&&this._callBackOk(!1),this.hideNode()},t.prototype.hideNode=function(){cc.js.array.remove(o.instancesQueue,this),this.hide()},t.prototype.updateUserConflictInfo=function(){return c(this,void 0,void 0,function(){return s(this,function(){return u.NgcNavBarManager.inst.updateUserConflictInfoCallback&&u.NgcNavBarManager.inst.updateUserConflictInfoCallback(this.localSave,this.cloudSave),[2]})})},t.staticHide=function(){o.instancesQueue.forEach(function(e){e.node&&e.hide()}),o.instancesQueue=[]},t.urlPrefab="NavBarConflictDialog",t.bundleName="02_dialog_navbar",t.dialogType="NavBarConflicttDialog",t.instancesQueue=[],a([h(p.NgcNavBarUserConflictInfo)],t.prototype,"localSave",void 0),a([h(p.NgcNavBarUserConflictInfo)],t.prototype,"cloudSave",void 0),o=a([f],t)}(l.NgcNavBarDialogBase);n.NavBarConflicttDialog=g,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase","./NavBarManager":"NavBarManager","./NavBarUserConflictInfo":"NavBarUserConflictInfo"}],NavBarDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"db17c5fcRlEA6QEbmErHOrw","NavBarDialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarDialogBase=void 0;var a=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.show=function(t){e.prototype.show.call(this,t),o.enqueStack.push(this)},t.prototype.hide=function(){var t=this;e.prototype.hide.call(this,function(){cc.js.array.remove(o.enqueStack,t)})},t.bundleName="02_dialog_navbar",t.enqueStack=[],o=i([s],t)}(a.NgcDialogBase));o.NgcNavBarDialogBase=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],NavBarEditNameDialog:[function(t,o,n){"use strict";cc._RF.push(o,"32eb8KY1HROqbXo4cM23GoR","NavBarEditNameDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcNavBarEditNameDialog=void 0;var l=t("../../../GameFramework/Scripts/Localized/LabelLocalized"),u=t("../../../GameFramework/Scripts/Localized/LocalizedManager"),p=t("../../../GameFramework/Scripts/NgcMain"),d=t("../../../GameFramework/Scripts/NgcUserInfo"),f=t("../../../GameFramework/Scripts/ProfanityCheck"),h=t("../../../Services/Platform/Platform"),g=t("../../../Services/Telemetry/Telemetry"),y=t("./NavBarDialogBase"),m=cc._decorator,_=m.ccclass,v=m.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grayBGSF=null,t.redBGSF=null,t.nameNotAllowNode=null,t.editBox=null,t.okButton=null,t.loadingNode=null,t.renameSuccessNode=null,t.editBoxAnim=null,t.wrongNameAnimName=null,t.showSuccessName=null,t.hideSuccessName=null,t.isHiding=!1,t.MAX_NAME_LENGTH=12,t.WRONG_PROFANITY_NAME="NAV_NAME_NOT_ALLOW",t.MAX_CHARACTER_REACHED="NAV_MAX_CHARACTER_REACHED",t.NAME_IS_EMPTY="NAV_NAME_IS_EMPTY",t}return i(t,e),t.prototype.start=function(){this.editBox.string=d.default.localUserName,this.nameNotAllowNode.active=!1,this.okButton.interactable=!0,this.editBoxAnim=this.editBox.getComponent(cc.Animation),this.wrongNameAnimName=this.editBoxAnim.defaultClip.name,this.showSuccessName=cc.tween().to(.1,{y:10}).to(.1,{y:20}),this.hideSuccessName=cc.tween().to(.1,{y:10}).to(.1,{y:-120}),this.editBox.maxLength=-1,this.editBox.textLabel.node.color=cc.Color.BLACK,this.editBox.textLabel.enableBold=!1},t.prototype.onEditBoxBegan=function(){var e=this.editBox.placeholderLabel.getComponent(l.NgcLabelLocalized);u.NgcLocalizedManager.setTextKey(e,"NAV_ENTER_NAME_HERE"),cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!1)},t.prototype.onEditBoxEnd=function(){cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!0)},t.prototype.onEditReturn=function(){this.onOkButtonClick()},t.prototype.onTextChanged=function(){this.renameSuccessNode.active=!1,this.editBox.string.length>this.MAX_NAME_LENGTH?(this.editBox.textLabel.string=this.editBox.string=this.editBox.string.substr(0,this.MAX_NAME_LENGTH),this.nameNotAllowNode.getComponent(l.NgcLabelLocalized).setLocalizedText(this.MAX_CHARACTER_REACHED),this.nameNotAllowNode.active=!0,this.editBox.blur()):this.nameNotAllowNode.active=!1,0===this.editBox.string.length?this.okButton.interactable=!1:this.okButton.interactable=!0},t.prototype.onOkButtonClick=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.loadingNode.active=!0,[4,f.NgcProfanityCheck.check(this.editBox.string)];case 1:return e=t.sent(),this.nameNotAllowNode.active=!e.status,this.loadingNode.active=!1,this.okButton.interactable=!1,e.status?0==this.editBox.string.length?(this.nameNotAllowNode.getComponent(l.NgcLabelLocalized).setLocalizedText(this.NAME_IS_EMPTY),this.editBox.backgroundImage=this.redBGSF,this.editBoxAnim.play(this.wrongNameAnimName),[2]):(this.editBox.backgroundImage=this.grayBGSF,d.default.localUserName=p.NgcMain.inst.localUserName=this.editBox.string,d.default.changedName=!0,p.NgcMain.inst.updateNameToNanosrv(),this._callback&&this._callback(d.default.localUserName),g.NgcTelemetry.inst.LogEvent_NameEvent(this.editBox.string),h.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_CHANGENAME:!0}),"*"),this.hide(),[2]):(this.nameNotAllowNode.getComponent(l.NgcLabelLocalized).setLocalizedText(this.WRONG_PROFANITY_NAME),this.editBox.backgroundImage=this.redBGSF,this.editBoxAnim.play(this.wrongNameAnimName),[2])}})})},t.prototype.onChangeNameCB=function(e){this._callback=e},t.prototype.hide=function(){e.prototype.hide.call(this),d.default.changeNameLocation=""},t.prototype.showSuccessText=function(){this.renameSuccessNode.active=!0,this.renameSuccessNode.opacity=0,cc.tween(this.renameSuccessNode).to(.2,{opacity:255}).start()},t.urlPrefab="NavBarEditNameDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarEditNameDialog",a([v(cc.SpriteFrame)],t.prototype,"grayBGSF",void 0),a([v(cc.SpriteFrame)],t.prototype,"redBGSF",void 0),a([v(cc.Node)],t.prototype,"nameNotAllowNode",void 0),a([v(cc.EditBox)],t.prototype,"editBox",void 0),a([v(cc.Button)],t.prototype,"okButton",void 0),a([v(cc.Node)],t.prototype,"loadingNode",void 0),a([v(cc.Node)],t.prototype,"renameSuccessNode",void 0),a([_],t)}(y.NgcNavBarDialogBase);n.NgcNavBarEditNameDialog=S,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../GameFramework/Scripts/ProfanityCheck":"ProfanityCheck","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","./NavBarDialogBase":"NavBarDialogBase"}],NavBarFBBrowserDialog:[function(e,t,o){"use strict";cc._RF.push(t,"45d5bls0C1HbKpwLhaMd7n7","NavBarFBBrowserDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./NavBarDialogBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NavBarFBBrowserDialog",t.dialogType="NgcNavBarFBBrowserDialog",i([s],t)}(a.NgcNavBarDialogBase));o.default=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarFBPagePluginDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d9f2eogqodM5K3wR22A1T4o","NavBarFBPagePluginDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarFBPagePluginDialog=void 0;var a=e("./NavBarDialogBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fbPage=null,t.FACEBOOK_PAGE_IFRAME_SRC="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FUbisoft-Nano-106342894560936&tabs=timeline&width=340&height=500&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=true&appId",t}return r(t,e),t.prototype.start=function(){this.fbPage=document.getElementsByClassName("fb-container")[0];var e=document.getElementById("fbPage-iframe");this.fbPage&&(e.src=this.FACEBOOK_PAGE_IFRAME_SRC,this.fbPage.style.position="absolute",this.fbPage.style.top="50%",this.fbPage.style.left="50%",this.fbPage.style.transform="translate(-50%, -50%)",this.fbPage.style.zIndex="1")},t.prototype.hide=function(){e.prototype.hide.call(this),this.fbPage&&(this.fbPage.style.zIndex="-1")},t.prototype.update=function(){},t.urlPrefab="NavBarFBPagePluginDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarFBPagePluginDialog",i([s],t)}(a.NgcNavBarDialogBase));o.NgcNavBarFBPagePluginDialog=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarGDPRDialog:[function(e,t,o){"use strict";cc._RF.push(t,"4e4c0xCwCJEDIKS+7vH0bh3","NavBarGDPRDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GDPR_STEPS=void 0;var a,c=e("./NavBarDialogBase"),s=cc._decorator,l=s.ccclass,u=s.property;(function(e){e[e.ASK_COOKIES=0]="ASK_COOKIES",e[e.SET_COOKES=1]="SET_COOKES"})(a=o.GDPR_STEPS||(o.GDPR_STEPS={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t._callBackClose=null,t.stepsCookies=[],t.refuseNode=null,t.emoteActions=[],t.imgSprite=null,t}return r(t,e),t.prototype.registryListener=function(){cc.sys.isMobile?(this.refuseNode.on(cc.Node.EventType.TOUCH_START,this.targetRefuse.bind(this)),this.refuseNode.on(cc.Node.EventType.TOUCH_CANCEL,this.unTargetRefuse.bind(this))):(this.refuseNode.on(cc.Node.EventType.MOUSE_MOVE,this.targetRefuse.bind(this)),this.refuseNode.on(cc.Node.EventType.MOUSE_LEAVE,this.unTargetRefuse.bind(this)))},t.prototype.start=function(){this.registryListener()},t.prototype.destroyListener=function(){},t.prototype.targetRefuse=function(){this.onHoldRefuseBtn(!0)},t.prototype.unTargetRefuse=function(){this.onHoldRefuseBtn(!1)},t.prototype.onHoldRefuseBtn=function(e){this.imgSprite.spriteFrame=e?this.emoteActions[1]:this.emoteActions[0]},t.prototype.moveToStep=function(e){this.stepsCookies.forEach(function(e){e.active=!1}),this.stepsCookies[e].active=!0},t.prototype.init=function(e,t){void 0===t&&(t=null),this._callBackOk=e,this._callBackClose=t,this.moveToStep(a.ASK_COOKIES)},t.prototype.okOnClick=function(){cc.log("GDPR  okOnClick"),this.hide()},t.prototype.refuseOnClick=function(){cc.log("GDPR  refuseOnClick"),this.hide()},t.prototype.acceptOnClick=function(){cc.log("GDPR  acceptOnClick"),this.hide()},t.prototype.settingOnClick=function(){cc.log("GDPR  settingOnClick"),this.moveToStep(a.SET_COOKES)},t.prototype.backOnClick=function(){cc.log("GDPR  backOnClick"),this.moveToStep(a.ASK_COOKIES)},t.prototype.hide=function(){this.destroyListener(),e.prototype.hide.call(this)},t.NavBarGPDR_Mobile="NavBarGPDR_Mobile",t.NavBarGPDR_PC="NavBarGPDR_PC",t.dialogType="NgcNavBarGDPRDialog",i([u(cc.Node)],t.prototype,"stepsCookies",void 0),i([u(cc.Node)],t.prototype,"refuseNode",void 0),i([u(cc.SpriteFrame)],t.prototype,"emoteActions",void 0),i([u(cc.Sprite)],t.prototype,"imgSprite",void 0),i([l],t)}(c.NgcNavBarDialogBase);o.default=p,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarHowToPlayDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e6bb2EoDBtE2oIQtEltGAzR","NavBarHowToPlayDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarHowToPlayDialog=void 0;var a=e("../../../GameFramework/Scripts/BuildConfig"),c=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../Tips/Script/TipManager"),l=e("./NavBarDialogBase"),u=e("./NavBarTipItem"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipItem=null,t.scrollView=null,t.tipConfig=null,t.tips=[],t}return r(t,e),t.prototype.start=function(){this.initTips()},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.initTips=function(){this.parseInputConfigFile()&&this.loadTipSpriteFrames()},t.prototype.parseInputConfigFile=function(){var e=this;s.NgcTipManager.staticTipConfig&&(this.tipConfig=s.NgcTipManager.staticTipConfig);var t=this.tipConfig.text.split("\r\n");t.shift();try{t.forEach(function(t){var o=t.split("|"),n=o[0];if(null!=n&&0!=n.length&&""!=n){var r=o[1],i=s.Type_Tip.Both;switch(o[2].toLowerCase()){case"mobile":i=s.Type_Tip.Mobile;break;case"desktop":i=s.Type_Tip.Desktop;break;default:i=s.Type_Tip.Both}if("PIXTEL"!=a.NgcBuildConfig.buildPlatform||"TIP_5"!=r){var c=new s.Tip(i,n,r,null);i==s.Type_Tip.Both?e.tips.push(c):cc.sys.isMobile&&i==s.Type_Tip.Mobile?e.tips.push(c):cc.sys.isMobile||i!=s.Type_Tip.Desktop||e.tips.push(c)}}})}catch(o){return console.error("Error reading configTip file. Format error?"),!1}return!0},t.prototype.loadTipSpriteFrames=function(){var e=this;cc.assetManager.loadBundle(a.NgcBuildConfig.services.Tips.bundles,function(t,o){e.tips.forEach(function(t){o.load(t.imageName,cc.SpriteFrame,function(o,n){if(!o){t.spriteFrame=n;var r=cc.instantiate(e.tipItem),i=r.getComponent(u.NgcNavBarTipItem);i.tipLabel.string=c.NgcLocalizedManager.t(t.textKey).text,i.tipImg.spriteFrame=t.spriteFrame,r.parent=e.scrollView.content}})})})},t.urlPrefab="NavBarHowToPlayDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarHowToPlayDialog",i([f(cc.Prefab)],t.prototype,"tipItem",void 0),i([f(cc.ScrollView)],t.prototype,"scrollView",void 0),i([f(cc.TextAsset)],t.prototype,"tipConfig",void 0),i([d],t)}(l.NgcNavBarDialogBase);o.NgcNavBarHowToPlayDialog=h,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../Tips/Script/TipManager":"TipManager","./NavBarDialogBase":"NavBarDialogBase","./NavBarTipItem":"NavBarTipItem"}],NavBarItemSelectLanguage:[function(e,t,o){"use strict";cc._RF.push(t,"98ef35kBepPoIfUalI8lXq+","NavBarItemSelectLanguage");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarItemSelectLanguage=void 0;var a=e("./NavBarDialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameItem="",t.languageCode="",t.iconCheckSprite=null,t.languageLb=null,t.backGroundNode=null,t.iconChecked=null,t.iconUnchecked=null,t.callBackFn=null,t.COLOR_UNCHECKED="#FFFFFF",t.COLOR_CHECKED="#B4CDE3",t}return r(t,e),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this._isSelected?(this.iconCheckSprite.spriteFrame=this.iconChecked,this.backGroundNode.color=this.backGroundNode.color.fromHEX(this.COLOR_CHECKED)):(this.iconCheckSprite.spriteFrame=this.iconUnchecked,this.backGroundNode.color=this.backGroundNode.color.fromHEX(this.COLOR_UNCHECKED))},enumerable:!1,configurable:!0}),t.prototype.setInfo=function(e,t,o,n,r){this.nameItem=t,this.languageLb.string=t,this.languageCode=o,this.isSelected=n,this.callBackFn=r},t.prototype.onClick=function(){this.isSelected||(this.isSelected=!0,this.callBackFn&&this.callBackFn(this.languageCode))},t.urlPrefab="NavBarItemSelectLanguage",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarItemSelectLanguage",i([l],t.prototype,"nameItem",void 0),i([l],t.prototype,"languageCode",void 0),i([l(cc.Sprite)],t.prototype,"iconCheckSprite",void 0),i([l(cc.Label)],t.prototype,"languageLb",void 0),i([l(cc.Node)],t.prototype,"backGroundNode",void 0),i([l(cc.SpriteFrame)],t.prototype,"iconChecked",void 0),i([l(cc.SpriteFrame)],t.prototype,"iconUnchecked",void 0),i([s],t)}(a.NgcNavBarDialogBase);o.NgcNavBarItemSelectLanguage=u,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarLeaveGameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"2e7f5iSO01Ou7FOix0uwSOa","NavBarLeaveGameDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./NavBarDialogBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callLeave=null,t}var o;return r(t,e),o=t,t.prototype.show=function(){e.prototype.show.call(this),o.isOpening=!0},t.prototype.start=function(){},t.prototype.init=function(e,t){void 0===t&&(t=null),this._callLeave=e},t.prototype.onClickLeaveBtn=function(){window.allowBack=!0,history.back(),this.hide()},t.prototype.onClickCancelBtn=function(){this.hide()},t.prototype.hide=function(){o.isOpening=!1,e.prototype.hide.call(this)},t.NavBarLeaveGame_Mobile="NavBarConfirmLeave_Mobile",t.NavBarLeaveGame_PC="NavBarConfirmLeave_PC",t.dialogType="NgcNavBarLeaveGameDialog",t.isOpening=!1,o=i([s],t)}(a.NgcNavBarDialogBase));o.default=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarLoginSocialDialog:[function(t,o,n){"use strict";cc._RF.push(o,"02bb3l5unNA1JLDDrLH60/p","NavBarLoginSocialDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcNavBarLoginSocialDialog=void 0;var l=t("../../../GameFramework/Scripts/BuildConfig"),u=t("../../../GameFramework/Scripts/NgcMain"),p=t("../../../Services/Leaderboard/Leaderboard"),d=t("../../../Services/Platform/Platform"),f=t("../../../Services/Social/Social"),h=t("../../../Services/Telemetry/Telemetry"),g=t("../../TechMessage/Script/TechMessages"),y=t("./NavBarDialogBase"),m=t("./NavBarManager"),_=cc._decorator,v=_.ccclass,S=_.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fbLogin=null,t.uplayLogin=null,t.isFBLoginOpen=!1,t.isUplayLoginOpen=!1,t}return i(t,e),t.prototype.start=function(){},t.prototype.init=function(e){this._onSocialCallBack=e},t.prototype.show=function(){1!==f.NgcSocial.srvInstances.length?e.prototype.show.call(this):this.onLoginButtonClick(f.NgcSocial.inst.getSocialType())},t.prototype.onFacebookLoginClick=function(){return c(this,void 0,void 0,function(){return s(this,function(){return g.default.showWarningLoginWithWebview()||this.onLoginButtonClick(f.SocialType.Facebook),[2]})})},t.prototype.onUplayLoginClick=function(){return c(this,void 0,void 0,function(){return s(this,function(){return g.default.showWarningLoginWithWebview()||this.onLoginButtonClick(f.SocialType.Uplay),[2]})})},t.prototype.onLoginButtonClick=function(e){return c(this,void 0,void 0,function(){var t,o,n;return s(this,function(r){switch(r.label){case 0:return t=!1,l.NgcBuildConfig.serverSplitting?[4,d.NgcPlatform.inst.isWebLoginPopupOpen()]:[3,2];case 1:o=r.sent(),t=f.NgcSocial.inst&&f.NgcSocial.inst.isLoginPopUpOpen()||o,this.fbLogin.interactable=this.uplayLogin.interactable=!t,r.label=2;case 2:if(!t){if(d.NgcPlatform.inst.isCallbackFromHost=!1,h.NgcTelemetry.inst.LogEvent_LoginAttempt(f.NgcSocial.inst.getName()),f.NgcSocial.inst=f.NgcSocial.getSrvInstance(e),(n=this)._onSocialCallBack(null,"onPreLogin"),f.NgcSocial.inst.login(function(e,t){e?n._onSocialCallBack&&n._onSocialCallBack(e,null):("Conflict"===t?u.NgcMain.inst.resolveSocialConflict(function(e,t){n._onSocialCallBack(e,t),n.onLoginSuccess()}):(n._onSocialCallBack(null,"login"),n.onLoginSuccess()),h.NgcTelemetry.inst.LogEvent_LoginSuccess("fb:"+f.NgcSocial.inst.getSocialID(),{Name:f.NgcSocial.inst.getFormatName(),AvatarUrl:f.NgcSocial.inst.getProfilePictureUrl(),FriendList:f.NgcSocial.inst.getFriendsData()}))}),n._onSocialCallBack)return this.node.active=!1,[2];this.hide()}return[2]}})})},t.prototype.update=function(){if(!l.NgcBuildConfig.serverSplitting){var e=!1;window.parent&&(e=window.parent.ubiWindow&&!window.parent.ubiWindow.closed||window.parent.fbWindow);var t=f.NgcSocial.inst&&f.NgcSocial.inst.isLoginPopUpOpen()||e;this.fbLogin.interactable=this.uplayLogin.interactable=!t}},t.prototype.onButtonCloseClick=function(){this._onSocialCallBack&&this._onSocialCallBack(null,"close"),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onLoginSuccess=function(){m.NgcNavBarManager.inst.updateListEffectBtn(),m.NgcNavBarManager.inst.setNavBarInfo(),p.NgcLeaderboard.inst.clearCacheRequestData(),d.NgcPlatform.inst.onSocialLogInFromGame()},t.urlPrefab="NavBarLoginSocialDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarLoginSocialDialog",t.uplayLoginWindow=null,a([S(cc.Button)],t.prototype,"fbLogin",void 0),a([S(cc.Button)],t.prototype,"uplayLogin",void 0),a([v],t)}(y.NgcNavBarDialogBase);n.NgcNavBarLoginSocialDialog=N,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../Services/Leaderboard/Leaderboard":"Leaderboard","../../../Services/Platform/Platform":"Platform","../../../Services/Social/Social":"Social","../../../Services/Telemetry/Telemetry":"Telemetry","../../TechMessage/Script/TechMessages":"TechMessages","./NavBarDialogBase":"NavBarDialogBase","./NavBarManager":"NavBarManager"}],NavBarManager:[function(t,o,n){"use strict";cc._RF.push(o,"b2e69kLRItBnZ59jZWRHkuQ","NavBarManager");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},l=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcNavBarManager=n.NavBarState=void 0;var u,p,d=t("../../../../globals"),f=t("../../../Core/Utils"),h=t("../../../GameFramework/Scripts/Ads/NgcAdsManager"),g=t("../../../GameFramework/Scripts/BuildConfig"),y=t("../../../GameFramework/Scripts/CountryFlagsManager"),m=t("../../../GameFramework/Scripts/NgcMain"),_=t("../../../GameFramework/Scripts/NgcScreenManager"),v=t("../../../GameFramework/Scripts/NgcUserInfo"),S=t("../../../SDK/Nano/NanoSrv"),N=t("../../../Services/Inventory/Inventory"),b=t("../../../Services/Platform/Platform"),C=t("../../../Services/Social/Social"),P=t("../../../Services/Telemetry/Telemetry"),I=t("../../DailyReward/Script/DailyRewardManager"),w=t("../../Dialogs/Script/MessageDialog/MessageDialog"),T=t("../../Dialogs/Script/NgcDialogManager"),O=t("../../GameMode/Script/GameModeManager"),R=t("./NavBarA2HSInstalledNotice"),E=t("./NavBarA2HSNotSupportTotally_Mobile"),A=t("./NavBarA2HSNotSupport_Mobile"),D=t("./NavBarA2HSNotSupport_PC"),k=t("./NavBarAboutDialog"),L=t("./NavBarConfirmDialog"),B=t("./NavBarDialogBase"),M=t("./NavBarEditNameDialog"),F=t("./NavBarFBBrowserDialog"),G=t("./NavBarFBPagePluginDialog"),U=t("./NavBarHowToPlayDialog"),x=t("./NavBarLoginSocialDialog"),j=t("./NavBarNoticeDialog"),H=t("./NavBarSettingsDialog"),z=t("./NavBarShareDialog"),W=t("./NgcA2HSManager.ts"),V=cc._decorator,K=V.ccclass,Y=V.property;(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(u=n.NavBarState||(n.NavBarState={})),function(e){e[e.Support=0]="Support",e[e.Alternative=1]="Alternative",e[e.NotSupport=2]="NotSupport"}(p||(p={}));var q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.mainContent=null,t.colorBand=null,t.colorAnim=null,t.editNode=null,t.logedInTxtNode=null,t.loginNode=null,t.logOutNode=null,t.layOutNode=null,t.profileNode=null,t.moreGameNode=null,t.userAvatarSprite=null,t.countryFlagSprite=null,t.playerNameLabel=null,t.socialName=null,t.defaultAvatar=null,t.addToHomeIcon=null,t.addToHomeSF_Moblie=null,t.addToHomeSF_PC=null,t.addToHomeMobiletxt=null,t.addToHomePCtxt=null,t.effectMainBtn=null,t.effectA2HSBtn=null,t.effectShareGameBtn=null,t.effectLoginBtn=null,t.addToHomeNode=null,t.shareNode=null,t.currentGamesNode=null,t.likeUsNode=null,t.moreGameSprite=null,t.flashAnims=[],t.navOnOFFButton=null,t.backToAppButton=null,t.NANO_URL="https://nano.ubisoft.com/",t.NANO_FB_PAGE="https://www.facebook.com/UbisoftMobile",t.BRAND_URL="https://rabbids.ubisoft.com/",t.LOG_OUT_TITTLE="NAV_LOG_OUT",t.LOG_OUT_MSG="SNS_LOG_OUT_MSG",t.MoreGameIconUrl="https://nano-storage.s3-us-west-2.amazonaws.com/DEV/RWR/image_more_games.png",t._sendHideAdsTrackerInNavBar=null,t.onNavBarClose=null,t.onNavBarShow=null,t.updateUserConflictInfoCallback=null,t._isFirstTimeCheckA2HS=!0,t._curState=null,t._isMoving=!1,t._xPosMainHide=0,t._xPosMainShow=0,t._xPosButtonsHide=0,t._xPosButtonShow=0,t.listNoticeButtons=[],t._navBtnMoving=!1,t._touchStartTimer=0,t.isShowingExit=!1,t.onSocialCallBack=null,t}var o;return i(t,e),o=t,t.prototype.setOnNavBarCloseCallback=function(e){this.onNavBarClose=e},t.prototype.setOnNavBarShowCallback=function(e){this.onNavBarShow=e},t.prototype.setUpdateConflictInfoCallBack=function(e){this.updateUserConflictInfoCallback=e},t.prototype.setHideAdsTracker=function(e){this._sendHideAdsTrackerInNavBar=e},Object.defineProperty(t.prototype,"curState",{get:function(){return this._curState},set:function(e){var t=this;if(this._curState!=e){this._isMoving=!0;var o=this._xPosMainHide,n=this._xPosButtonsHide,r=0,i=0,a=0,c=[];switch(this.layOutNode.children.forEach(function(e){e.active&&c.push(e)}),e){case u.Hide:o=this._xPosMainHide,n=this._xPosButtonsHide,r=500,i=0,a=.03*c.length,this.effectMainBtn.active=!0;break;case u.Show:this.onNavBarShow&&this.onNavBarShow(),o=this._xPosMainShow,n=this._xPosButtonShow,r=480,i=120,this.effectMainBtn.active=!1}cc.tween(this.mainContent).delay(a).to(.2,{x:o}).call(function(){t._isMoving=!1,e==u.Hide&&t.onNavBarClose&&t.onNavBarClose()}).start(),cc.tween(this.profileNode).to(.25,{x:n}).start(),c.forEach(function(e,t){cc.tween(e).to(.3+.05*t,{x:n}).start()}),this.background.active=!0,cc.tween(this.background).to(.2,{opacity:i}).call(function(){t.background.active=e==u.Show}).start(),this._curState=e,cc.tween(this.effectMainBtn.parent).parallel(cc.tween().to(.1,{scaleX:1.6}).to(.1,{scaleX:1}),cc.tween().to(.3,{x:520}).delay(.2).to(.2,{x:r})).start(),cc.tween(this.colorBand).to(.3,{scaleX:3}).delay(.2).to(.2,{scaleX:1}).start(),this.updateListEffectBtn()}},enumerable:!1,configurable:!0}),t.prototype.isPopUpShowing=function(){return 0!=B.NgcNavBarDialogBase.enqueStack.length},t.prototype.getShowingPopUp=function(){return B.NgcNavBarDialogBase.enqueStack},t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){this.navOnOFFButton||(this.navOnOFFButton=this.mainContent.getChildByName("ButtonOnOffNavBar")),this.navOnOFFButton.on("touchstart",this.onTouchStart.bind(this)),this.navOnOFFButton.on("touchmove",this.onTouchMove.bind(this)),this.navOnOFFButton.on("touchend",this.onTouchEnd.bind(this)),cc.sys.isMobile?window.addEventListener("resize",this.updateOnOffButotnPos.bind(this)):cc.view.on("canvas-resize",this.updateOnOffButotnPos.bind(this),this),this.init(),this.node.active=!1,g.NgcBuildConfig.offlineMode&&f.findNode(this,/scrollview>view>layout$/).children.forEach(function(e){e.active="HowToPlay"==e.name})},t.prototype.onTouchStart=function(){this._navBtnMoving=!1,this._touchStartTimer=Date.now()},t.prototype.onTouchMove=function(e){if(this._curState!==u.Show){var t=this.mainContent.getChildByName("LimitTop"),o=this.mainContent.getChildByName("LimitBottom"),n=f.Utils.getWorldPos(t).y,r=f.Utils.getWorldPos(o).y,i=(e.getLocationX(),e.getLocationY());if(!(i>n||i<r||Date.now()-this._touchStartTimer<100)){var a=this.navOnOFFButton.getComponent(cc.Widget);this._navBtnMoving=!0,a.enabled=!1;var c=f.Utils.getWorldPos(this.navOnOFFButton);f.Utils.setWorldPos(this.navOnOFFButton,cc.v2(c.x,i))}}},t.prototype.onTouchEnd=function(){if(this._navBtnMoving){var e=this.navOnOFFButton.getComponent(cc.Widget);if(e){var t=f.Utils.getWorldPos(this.navOnOFFButton).y,o=cc.find("Canvas");e.top=o.height-(t+this.navOnOFFButton.height/2),e.enabled=!0}}(Date.now()-this._touchStartTimer<100||!this._navBtnMoving)&&this.mainBtnOnClick(),this._navBtnMoving=!1},t.prototype.updateOnOffButotnPos=function(){var e=this.navOnOFFButton.getComponent(cc.Widget);e.target=cc.find("Canvas"),e.top=g.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height+20,e.updateAlignment()},t.prototype.init=function(){var e=this;this.updateOnOffButotnPos(),this.background.opacity=0,this.background.active=!1,this._xPosMainShow=0,this._xPosButtonShow=20,this._xPosMainHide=-this.mainContent.width-this.colorBand.width,this._xPosButtonsHide=this._xPosMainHide,this.mainContent.x=this._xPosMainHide,this._curState=u.Hide,this.layOutNode.children.forEach(function(t){t.x=e._xPosMainHide}),this.colorAnim.scaleY=this.colorBand.height/840,this.applyPlatformType(),this.updateListEffectBtn(),S.default.setOnResetCallback(this.onNanoSrvResetCallback),this.checkAndShowA2HSOnStart(),this.backToAppButton.active=b.NgcPlatform.isRunFromApp(),this.backToAppButton.getComponent(cc.Widget).alignMode=cc.Widget.AlignMode.ALWAYS},t.prototype.onBackToAppButtonClick=function(){return c(this,void 0,void 0,function(){return s(this,function(){return this.curState=u.Hide,this.onBackToAppOK(),[2]})})},t.prototype.onQuitGame=function(){return c(this,void 0,void 0,function(){var e,t,o=this;return s(this,function(n){switch(n.label){case 0:return this.isShowingExit?[2]:[3,1];case 1:return this.isShowingExit=!0,this.curState=u.Hide,[4,T.NgcDialogManager.createDialog(L.NgcNavBarConfirmDialog.dialogType,L.NgcNavBarConfirmDialog.urlPrefab,L.NgcNavBarConfirmDialog.bundleName)];case 2:e=n.sent(),(t=e.getComponent(L.NgcNavBarConfirmDialog)).init("","NAV_QUIT_CONFIRM",function(){console.log("Quit game----OK-"),cc.game.end()},function(){o.isShowingExit=!1},!1),t.dialogNode.height=410,t.show(),n.label=3;case 3:return[2]}})})},t.prototype.onBackToAppOK=function(){b.NgcPlatform.inst&&b.NgcPlatform.inst.onPostMessage(JSON.stringify({CALL_BACK_TO_APP_BUTTON:!0}),"*")},t.prototype.updateRemote=function(){var e=this;S.default.inst&&S.default.inst.loginData&&S.default.inst.loginData.gameInfo.navbar&&(S.default.inst.loginData.gameInfo.navbar.remoteData.forEach(function(t){switch("NANO_URL"==t.LINK_CODE&&(e.NANO_URL=t.LINK),t.LINK_CODE){case"NANO_URL":e.NANO_URL=t.LINK;break;case"RABBID_URL":e.BRAND_URL=t.LINK}}),cc.assetManager.loadRemote(S.default.inst.loginData.gameInfo.navbar.moreGames,cc.SpriteFrame,function(t,o){t&&console.error(t),e.moreGameSprite.spriteFrame=new cc.SpriteFrame(o)}))},t.prototype.mainBtnOnClick=function(){this._isMoving||_.default.inst.isSwitching||(this.curState==u.Show?this.curState=u.Hide:this.curState==u.Hide&&(h.default.inst.hide(),this.setNavBarInfo(),this.curState=u.Show),this.updateListEffectBtn())},t.prototype.setNavBarInfo=function(){var e=this;g.NgcBuildConfig.services.NavBar.loginButton&&C.NgcSocial.inst?(this.loginNode.active=this.editNode.active=!v.default.isUserLogined(),this.logOutNode.active=this.logedInTxtNode.active=v.default.isUserLogined()):this.loginNode.active=this.logOutNode.active=this.logedInTxtNode.active=!1,g.NgcBuildConfig.offlineMode&&(this.loginNode.active=!1),b.NgcPlatform.isRunFromApp()&&(this.loginNode.active=!1,this.logOutNode.active=!1),C.NgcSocial.inst&&v.default.isUserLogined()?(v.default.avatarUrl&&f.Utils.loadSpriteFrameFromURL(v.default.avatarUrl).then(function(t){e.userAvatarSprite.spriteFrame=t}).catch(function(){console.log("Load url: "+v.default.avatarUrl+" - FAILED"),e.userAvatarSprite.spriteFrame=e.defaultAvatar}),this.socialName.string="Uplay"===C.NgcSocial.inst.getName()?"Ubisoft":C.NgcSocial.inst.getName()):this.userAvatarSprite.spriteFrame=this.defaultAvatar,this.playerNameLabel.string=v.default.localUserName,this.countryFlagSprite.spriteFrame=y.NgcCountryFlagsManager.inst.getFlagSpriteFrame(y.NgcCountryFlagsManager.localCountry),this.addToHomeIcon.spriteFrame=cc.sys.isMobile?this.addToHomeSF_Moblie:this.addToHomeSF_PC,this.addToHomeMobiletxt.active=cc.sys.isMobile,this.addToHomePCtxt.active=!this.addToHomeMobiletxt.active},t.prototype.setChangeNameCallBack=function(e){this.onChangeNameCallBack=e},t.prototype.setLoginSocialCallBack=function(e){this.onSocialCallBack=e},t.prototype.invokeOnSocialCallBack=function(e,t){null!=this.onSocialCallBack&&this.onSocialCallBack(e,t),this.onSocialInteraction(e,t),o.inst.updateListEffectBtn()},t.prototype.onSocialInteraction=function(e,t){return c(this,void 0,void 0,function(){return s(this,function(){return"login"!==t&&"logout"!==t||(N.NgcInventory.inst.forceFetchInventory().then(function(){O.NgcGameModeManager.inst.refresh()}),v.default.supportCode="",cc.systemEvent.emit("refreshShop",e,t),cc.systemEvent.emit("refreshCrownRoad",e,t),cc.systemEvent.emit("refreshLDB",e,t),cc.systemEvent.emit("refreshNameBox",e,t)),"login"===t&&I.NgcDailyRewardManager.inst.checkReward(),[2]})})},t.prototype.editOnClick=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return v.default.changeNameLocation="SideBar",this.curState=u.Hide,[4,T.NgcDialogManager.createDialog(M.NgcNavBarEditNameDialog.dialogType,M.NgcNavBarEditNameDialog.urlPrefab,M.NgcNavBarEditNameDialog.bundleName)];case 1:return e=o.sent(),t=e.getComponent(M.NgcNavBarEditNameDialog),this.onChangeNameCallBack&&t.onChangeNameCB(this.onChangeNameCallBack),t.show(),[2]}})})},t.prototype.logInOnClick=function(e){return c(this,void 0,void 0,function(){var t,o,n;return s(this,function(r){switch(r.label){case 0:return g.NgcBuildConfig.services.NavBar.loginButton?(t=this,this.curState=u.Hide,[4,T.NgcDialogManager.createDialog(x.NgcNavBarLoginSocialDialog.dialogType,x.NgcNavBarLoginSocialDialog.urlPrefab,x.NgcNavBarLoginSocialDialog.bundleName)]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return o=r.sent(),(n=o.getComponent(x.NgcNavBarLoginSocialDialog)).init(function(e,o){t.invokeOnSocialCallBack(e,o),null!=o&&"onPreLogin"!=o&&n.hide()}),n.show(),[2]}})})},t.prototype.checkA2HSResult=function(e){switch(e){case"accepted":console.log("User accepted the A2HS prompt"),P.NgcTelemetry.inst.LogEvent_AddToHomeComplete("NavigationBar"),window.deferredPrompt=null,v.default.added_A2HS=!0;break;case"denied":console.log("User dismissed the A2HS prompt");break;case"installed":cc.screen.fullScreen()&&this.showInstalledA2HS()}},t.prototype.showInstalledA2HS=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,T.NgcDialogManager.createDialog(R.NgcNavBarA2HSInstalledNotice.dialogType,R.NgcNavBarA2HSInstalledNotice.urlPrefab,R.NgcNavBarA2HSInstalledNotice.bundleName)];case 1:return e.sent().getComponent(R.NgcNavBarA2HSInstalledNotice).show(),[2]}})})},t.prototype.addToHomeOnClick=function(e){return c(this,void 0,void 0,function(){var t,o,n,r,i,a=this;return s(this,function(l){switch(l.label){case 0:return g.NgcBuildConfig.services.NavBar.addToHomeButton?f.Utils.isRunningWithFacebookApp()?[4,T.NgcDialogManager.createDialog(F.default.dialogType,F.default.urlPrefab,F.default.bundleName)]:[3,2]:(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return(i=l.sent()).getComponent(F.default).show(),[2];case 2:if(t=function(){return c(a,void 0,void 0,function(){var e,t=this;return s(this,function(o){switch(o.label){case 0:return e=function(e){var o="accepted"===e.outcome?"accepted":"denied";t.checkA2HSResult(o)},window.deferredPrompt?(window.deferredPrompt.prompt(),window.deferredPrompt.userChoice.then(e),[3,3]):[3,1];case 1:return[4,T.NgcDialogManager.createDialog(R.NgcNavBarA2HSInstalledNotice.dialogType,R.NgcNavBarA2HSInstalledNotice.urlPrefab,R.NgcNavBarA2HSInstalledNotice.bundleName)];case 2:o.sent().getComponent(R.NgcNavBarA2HSInstalledNotice).show(),o.label=3;case 3:return[2]}})})},this.curState=u.Hide,P.NgcTelemetry.inst.LogEvent_AddToHomeInit("NavigationBar"),o=function(){return c(a,void 0,void 0,function(){return s(this,function(){return b.NgcPlatform.inst.onPostMessage(JSON.stringify({CALL_WEB_A2HS_BUTTON_FUNCTION:!0}),"*"),[2]})})},n=null,r=this.checkA2HSSupport(cc.sys.os,cc.sys.browserType),!cc.sys.isMobile)return[3,9];switch(r){case p.Support:return[3,3];case p.Alternative:return[3,4];case p.NotSupport:return[3,6]}return[3,6];case 3:return t(),[2];case 4:return[4,T.NgcDialogManager.createDialog(A.NavBarA2HSNotSupport_Mobile.dialogType,A.NavBarA2HSNotSupport_Mobile.urlPrefab,A.NavBarA2HSNotSupport_Mobile.bundleName)];case 5:return i=l.sent(),n=i.getComponent(A.NavBarA2HSNotSupport_Mobile),[3,8];case 6:return[4,T.NgcDialogManager.createDialog(E.NavBarA2HSNotSupportTotally_Mobile.dialogType,E.NavBarA2HSNotSupportTotally_Mobile.urlPrefab,E.NavBarA2HSNotSupportTotally_Mobile.bundleName)];case 7:return i=l.sent(),n=i.getComponent(E.NavBarA2HSNotSupportTotally_Mobile),[3,8];case 8:return[3,13];case 9:switch(r){case p.Support:return[3,10];case p.Alternative:case p.NotSupport:return[3,11]}return[3,11];case 10:return b.NgcPlatform.isRunAsIframeOnNano()?o():t(),[2];case 11:return[4,T.NgcDialogManager.createDialog(D.NavBarA2HSNotSupport_PC.dialogType,D.NavBarA2HSNotSupport_PC.urlPrefab,D.NavBarA2HSNotSupport_PC.bundleName)];case 12:return i=l.sent(),n=i.getComponent(D.NavBarA2HSNotSupport_PC),[3,13];case 13:return n.show(),[2]}})})},t.prototype.showNotSupportA2HSPlatformDialog=function(){return c(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=cc.sys.isMobile?j.default.NavBarA2HSRedirectDialog_Mobile:j.default.NavBarA2HSRedirectDialog_PC,[4,T.NgcDialogManager.createDialog(j.default.dialogType,e,j.default.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(j.default)).init(function(){W.default.gotoNano()}),o.show(),[2]}})})},t.prototype.shareOnClick=function(e){return c(this,void 0,void 0,function(){var t,o,n;return s(this,function(r){switch(r.label){case 0:return g.NgcBuildConfig.services.NavBar.shareButton?(this.curState=u.Hide,b.NgcPlatform.isRunFromApp()?(t=g.NgcBuildConfig.services.NavBar.shareUrl+"&origin=native",b.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:"native",link:t}}),"*"),v.default.sharedGame_NavBar=!0,[3,3]):[3,1]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return[4,T.NgcDialogManager.createDialog(z.NgcNavBarShareDialog.dialogType,z.NgcNavBarShareDialog.urlPrefab,z.NgcNavBarShareDialog.bundleName)];case 2:o=r.sent(),(n=o.getComponent(z.NgcNavBarShareDialog)).init("NavigationBar"),n.show(),r.label=3;case 3:return[2]}})})},t.prototype.settingOnClick=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return g.NgcBuildConfig.services.NavBar.settingButton?(this.curState=u.Hide,[4,T.NgcDialogManager.createDialog(H.NgcNavBarSettingsDialog.dialogType,H.NgcNavBarSettingsDialog.urlPrefab,H.NgcNavBarSettingsDialog.bundleName)]):(this.showNotice(event.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return e=o.sent(),(t=e.getComponent(H.NgcNavBarSettingsDialog)).init(),t.show(),[2]}})})},t.prototype.aboutOnClick=function(e){return void 0===e&&(e=null),c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return g.NgcBuildConfig.services.NavBar.abountButton?(this.curState=u.Hide,[4,T.NgcDialogManager.createDialog(k.NgcNavBarAboutDialog.dialogType,k.NgcNavBarAboutDialog.urlPrefab,k.NgcNavBarAboutDialog.bundleName)]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return t.sent().getComponent(k.NgcNavBarAboutDialog).show(),[2]}})})},t.prototype.howToPlayOnClick=function(e){return void 0===e&&(e=null),c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return g.NgcBuildConfig.services.NavBar.howtoPlayButton?(this.curState=u.Hide,[4,T.NgcDialogManager.createDialog(U.NgcNavBarHowToPlayDialog.dialogType,U.NgcNavBarHowToPlayDialog.urlPrefab,U.NgcNavBarHowToPlayDialog.bundleName)]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return t.sent().getComponent(U.NgcNavBarHowToPlayDialog).show(),[2]}})})},t.prototype.currentGamesOnClick=function(e){g.NgcBuildConfig.services.NavBar.currentGamesButton?(this.curState=u.Hide,P.NgcTelemetry.inst.LogEvent_BrandGameInit("NavigationBar"),cc.sys.openURL(this.BRAND_URL)):this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB")},t.prototype.logOutOnClick=function(){return c(this,void 0,void 0,function(){var e,t,o=this;return s(this,function(n){switch(n.label){case 0:return this.curState=u.Hide,[4,T.NgcDialogManager.createDialog(L.NgcNavBarConfirmDialog.dialogType,L.NgcNavBarConfirmDialog.urlPrefab,L.NgcNavBarConfirmDialog.bundleName)];case 1:return e=n.sent(),(t=e.getComponent(L.NgcNavBarConfirmDialog)).init(this.LOG_OUT_TITTLE,this.LOG_OUT_MSG,function(){b.NgcPlatform.inst.isCallbackFromHost=!1,C.NgcSocial.inst.checkLoginStatus().finally(function(){b.NgcPlatform.inst.onSocialLogOutFromGame(),S.default.inst.resetUserID().finally(function(){m.NgcMain.inst.createFakeName(),v.default.setAccountLinkData(),b.NgcPlatform.inst.isLogoutFromGame=!0;try{C.NgcSocial.inst.logout()}catch(e){console.warn(e)}C.NgcSocial.inst.onLogoutSuccesCallback&&C.NgcSocial.inst.onLogoutSuccesCallback(),o.invokeOnSocialCallBack(null,"logout")})})},null),t.show(),[2]}})})},t.prototype.moreGamesOnClick=function(e){g.NgcBuildConfig.services.NavBar.moreGamesButton?(this.curState=u.Hide,P.NgcTelemetry.inst.LogEvent_MoreGameInit("NavigationBar"),cc.sys.openURL(this.NANO_URL)):this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB")},t.prototype.likeUsOnClick=function(e){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return g.NgcBuildConfig.services.NavBar.likeUsButton?(this.curState=u.Hide,P.NgcTelemetry.inst.LogEvent_LikeUsInit("NavigationBar"),[4,T.NgcDialogManager.createDialog(G.NgcNavBarFBPagePluginDialog.dialogType,G.NgcNavBarFBPagePluginDialog.urlPrefab,G.NgcNavBarFBPagePluginDialog.bundleName)]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return t.sent().getComponent(G.NgcNavBarFBPagePluginDialog).show(),[2]}})})},t.prototype.hideNabarOnClick=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.curState=u.Hide,this.updateListEffectBtn()},t.prototype.updateListEffectBtn=function(){this.effectA2HSBtn.active=this.addToHomeNode.active&&!v.default.added_A2HS,this.effectShareGameBtn.active=this.shareNode.active&&!v.default.sharedGame_NavBar;var e=this.loginNode.active&&!v.default.isUserLogined();this.effectMainBtn.active=this.effectA2HSBtn.active||this.effectShareGameBtn.active||e,this.flashAnims.forEach(function(e){e.play("flash")})},t.prototype.update=function(){var e=this.colorBand.height/840;this.colorAnim.scaleY!=e&&(this.colorAnim.scaleY=e)},t.prototype.checkA2HSSupport=function(e,t){console.log("@@@@@@@@@@@@@@@@@ checkA2HSSupport os ",e),console.log("@@@@@@@@@@@@@@@@@ checkA2HSSupport browser ",t),console.log("@@@@@@@@@@@@@@@@@ checkA2HSSupport cc.sys.OS_OSX ",cc.sys.OS_OSX);var o={},n=[cc.sys.OS_WINDOWS,cc.sys.OS_ANDROID,cc.sys.OS_IOS,cc.sys.OS_OSX],r=[cc.sys.BROWSER_TYPE_CHROME,cc.sys.BROWSER_TYPE_FIREFOX,cc.sys.BROWSER_TYPE_EDGE,cc.sys.BROWSER_TYPE_IE,cc.sys.BROWSER_TYPE_OPERA,cc.sys.BROWSER_TYPE_ANDROID];return o=[cc.sys.OS_WINDOWS,cc.sys.OS_ANDROID,cc.sys.OS_IOS,cc.sys.OS_OSX],n.forEach(function(e){return o[e]=l(r)}),o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_CHROME]=p.Support,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_FIREFOX]=p.Alternative,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_SAFARI]=p.Alternative,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_EDGE]=p.Support,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_IE]=p.Alternative,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_OPERA]=p.NotSupport,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_ANDROID]=p.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_CHROME]=p.Support,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_FIREFOX]=p.Alternative,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_SAFARI]=p.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_EDGE]=p.Alternative,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_IE]=p.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_OPERA]=p.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_ANDROID]=p.Alternative,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_CHROME]=p.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_FIREFOX]=p.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_SAFARI]=p.Alternative,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_EDGE]=p.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_IE]=p.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_OPERA]=p.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_ANDROID]=p.NotSupport,o[cc.sys.OS_OSX][cc.sys.BROWSER_TYPE_CHROME]=p.NotSupport,o[cc.sys.OS_OSX][cc.sys.BROWSER_TYPE_FIREFOX]=p.NotSupport,(cc.sys.OS_IOS!==e&&cc.sys.OS_OSX!==e||!["FxiOS","EdgiOS","CriOS"].some(function(e){return navigator.userAgent.includes(e)&&console.log("## browser for Iso name = "+e),navigator.userAgent.includes(e)}))&&o.hasOwnProperty(e)&&o[e].hasOwnProperty(t)?o[e][t]:p.NotSupport},t.prototype.showNotice=function(e,t){return c(this,void 0,void 0,function(){var o,n;return s(this,function(r){switch(r.label){case 0:return[4,T.NgcDialogManager.createDialog(w.NgcMessageDialog.dialogType,w.NgcMessageDialog.urlPrefab,w.NgcMessageDialog.bundleName)];case 1:return o=r.sent(),(n=o.getComponent(w.NgcMessageDialog)).init(t),n.show(null,e,20,null,.6),[2]}})})},t.prototype.checkAndShowA2HSOnStart=function(){W.default.shouldA2HS()&&W.default.isValidOrigin()&&this._isFirstTimeCheckA2HS&&(this.showA2HSDialog(),this._isFirstTimeCheckA2HS=!1)},t.prototype.showA2HSDialog=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r,i=this;return s(this,function(a){switch(a.label){case 0:return e=cc.sys.isMobile?j.default.NavBarA2HSNoticeDialog_Mobile:j.default.NavBarA2HSNoticeDialog_PC,[4,T.NgcDialogManager.createDialog(j.default.dialogType,e,j.default.bundleName)];case 1:return t=a.sent(),o=t.getComponent(j.default),n=function(){i.addToHomeOnClick(null),W.default.removeA2HSParameter()},r=function(){W.default.removeA2HSParameter()},o.init(n.bind(this),r),o.show(),[2]}})})},t.prototype.showAllNavBar=function(e){this.node.active=e},t.prototype.applyPlatformType=function(){null===g.NgcBuildConfig.buildPlatform&&void 0===g.NgcBuildConfig.buildPlatform||(this.loginNode.active=!b.NgcPlatform.isRunFromApp()&&g.NgcBuildConfig.services.NavBar.loginButton&&!!C.NgcSocial.inst,this.addToHomeNode.active=g.NgcBuildConfig.services.NavBar.addToHomeButton&&!b.NgcPlatform.isRunFromApp(),this.shareNode.active=g.NgcBuildConfig.services.NavBar.shareButton,this.moreGameNode.active=g.NgcBuildConfig.services.NavBar.moreGamesButton,this.currentGamesNode.active=g.NgcBuildConfig.services.NavBar.currentGamesButton,this.likeUsNode.active=g.NgcBuildConfig.services.NavBar.likeUsButton)},t.prototype.onNanoSrvResetCallback=function(){o.inst.setNavBarInfo()},t.inst=null,a([Y(cc.Node)],t.prototype,"background",void 0),a([Y(cc.Node)],t.prototype,"mainContent",void 0),a([Y(cc.Node)],t.prototype,"colorBand",void 0),a([Y(cc.Node)],t.prototype,"colorAnim",void 0),a([Y(cc.Node)],t.prototype,"editNode",void 0),a([Y(cc.Node)],t.prototype,"logedInTxtNode",void 0),a([Y(cc.Node)],t.prototype,"loginNode",void 0),a([Y(cc.Node)],t.prototype,"logOutNode",void 0),a([Y(cc.Node)],t.prototype,"layOutNode",void 0),a([Y(cc.Node)],t.prototype,"profileNode",void 0),a([Y(cc.Node)],t.prototype,"moreGameNode",void 0),a([Y(cc.Sprite)],t.prototype,"userAvatarSprite",void 0),a([Y(cc.Sprite)],t.prototype,"countryFlagSprite",void 0),a([Y(cc.Label)],t.prototype,"playerNameLabel",void 0),a([Y(cc.Label)],t.prototype,"socialName",void 0),a([Y(cc.SpriteFrame)],t.prototype,"defaultAvatar",void 0),a([Y(cc.Sprite)],t.prototype,"addToHomeIcon",void 0),a([Y(cc.SpriteFrame)],t.prototype,"addToHomeSF_Moblie",void 0),a([Y(cc.SpriteFrame)],t.prototype,"addToHomeSF_PC",void 0),a([Y(cc.Node)],t.prototype,"addToHomeMobiletxt",void 0),a([Y(cc.Node)],t.prototype,"addToHomePCtxt",void 0),a([Y(cc.Node)],t.prototype,"effectMainBtn",void 0),a([Y(cc.Node)],t.prototype,"effectA2HSBtn",void 0),a([Y(cc.Node)],t.prototype,"effectShareGameBtn",void 0),a([Y(cc.Node)],t.prototype,"effectLoginBtn",void 0),a([Y(cc.Node)],t.prototype,"addToHomeNode",void 0),a([Y(cc.Node)],t.prototype,"shareNode",void 0),a([Y(cc.Node)],t.prototype,"currentGamesNode",void 0),a([Y(cc.Node)],t.prototype,"likeUsNode",void 0),a([Y(cc.Sprite)],t.prototype,"moreGameSprite",void 0),a([Y(cc.Animation)],t.prototype,"flashAnims",void 0),a([Y(cc.Node)],t.prototype,"navOnOFFButton",void 0),a([Y(cc.Node)],t.prototype,"backToAppButton",void 0),o=a([K],t)}(cc.Component);n.NgcNavBarManager=q,d.default.NavBarManager=q,cc._RF.pop()},{"../../../../globals":"globals","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Social/Social":"Social","../../../Services/Telemetry/Telemetry":"Telemetry","../../DailyReward/Script/DailyRewardManager":"DailyRewardManager","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../GameMode/Script/GameModeManager":"GameModeManager","./NavBarA2HSInstalledNotice":"NavBarA2HSInstalledNotice","./NavBarA2HSNotSupportTotally_Mobile":"NavBarA2HSNotSupportTotally_Mobile","./NavBarA2HSNotSupport_Mobile":"NavBarA2HSNotSupport_Mobile","./NavBarA2HSNotSupport_PC":"NavBarA2HSNotSupport_PC","./NavBarAboutDialog":"NavBarAboutDialog","./NavBarConfirmDialog":"NavBarConfirmDialog","./NavBarDialogBase":"NavBarDialogBase","./NavBarEditNameDialog":"NavBarEditNameDialog","./NavBarFBBrowserDialog":"NavBarFBBrowserDialog","./NavBarFBPagePluginDialog":"NavBarFBPagePluginDialog","./NavBarHowToPlayDialog":"NavBarHowToPlayDialog","./NavBarLoginSocialDialog":"NavBarLoginSocialDialog","./NavBarNoticeDialog":"NavBarNoticeDialog","./NavBarSettingsDialog":"NavBarSettingsDialog","./NavBarShareDialog":"NavBarShareDialog","./NgcA2HSManager.ts":"NgcA2HSManager.ts"}],NavBarNoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e1ae6EiznRJEbPkw8P5sFJp","NavBarNoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./NavBarDialogBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t){void 0===t&&(t=null),this._callBackOk=e,this._callBackClose=t},t.prototype.okOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.NavBarA2HSRedirectDialog_Mobile="NavBarA2HSRedirectDialog_Mobile",t.NavBarA2HSRedirectDialog_PC="NavBarA2HSRedirectDialog_PC",t.NavBarA2HSNoticeDialog_Mobile="NavBarA2HSNoticeDialog_Mobile",t.NavBarA2HSNoticeDialog_PC="NavBarA2HSNoticeDialog_PC",t.dialogType="NgcNavBarNoticeDialog",i([s],t)}(a.NgcNavBarDialogBase));o.default=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarSelectLanguageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"02a4d2U3WNEWocgmMDsdhaY","NavBarSelectLanguageDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarSelectLanguageDialog=void 0;var a=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../../GameFramework/Scripts/NgcUserInfo"),s=e("../../../Services/Platform/Platform"),l=e("../../../Services/Telemetry/Telemetry"),u=e("./NavBarDialogBase"),p=e("./NavBarItemSelectLanguage"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.selectedLang="",t.itemPrefab=null,t.content=null,t.items=[],t}return r(t,e),t.prototype.init=function(e){var t=this;this._callBackOk=e;var o=a.NgcLocalizedManager.jsonData;o.sort(function(e,t){return e.name>t.name?1:t.name>e.name?-1:0}),this.selectedLang=a.NgcLocalizedManager.curLang,o.forEach(function(e){if(e.enabled){var o=cc.instantiate(t.itemPrefab);o.parent=t.content;var n=o.getComponent(p.NgcNavBarItemSelectLanguage);n.setInfo(e.flag_url,e.name,e.code,e.code===a.NgcLocalizedManager.curLang||e.extra_code&&-1!=e.extra_code.indexOf(a.NgcLocalizedManager.curLang),function(o){t.selectedLang=o,t.items.forEach(function(t){t.isSelected=t.languageCode==e.code||e.extra_code&&-1!=e.extra_code.indexOf(t.languageCode)})}),t.items.push(n)}})},t.prototype.OkOnClick=function(){this.selectedLang!==c.default.curLanguage&&this.changeLanguageOnClick(this.selectedLang),this.closeOnClick()},t.prototype.closeOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.changeLanguageOnClick=function(e){c.default.curLanguage=e,a.NgcLocalizedManager.setLanguage(e),l.NgcTelemetry.inst.LogEvent_LanguageChanged({languageCode:e});var t={GAME_LANGUAGE_CODE:e};if(window.location!==window.parent.location){var o=JSON.stringify(t);console.log("@@@@@ changeLanguageOnClick msg ",o),s.NgcPlatform.inst&&s.NgcPlatform.inst.onPostMessage(o,"*")}},t.prototype.show=function(){e.prototype.show.call(this),l.NgcTelemetry.inst.LogEvent_EnterScreen("LanguageSelectScreen")},t.prototype.hide=function(){e.prototype.hide.call(this),l.NgcTelemetry.inst.LogEvent_ExitScreen("LanguageSelectScreen")},t.urlPrefab="NavBarSelectLanguageDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarSelectLanguageDialog",i([h(cc.Prefab)],t.prototype,"itemPrefab",void 0),i([h(cc.Node)],t.prototype,"content",void 0),i([f],t)}(u.NgcNavBarDialogBase);o.NgcNavBarSelectLanguageDialog=g,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","./NavBarDialogBase":"NavBarDialogBase","./NavBarItemSelectLanguage":"NavBarItemSelectLanguage"}],NavBarSettingsDialog:[function(t,o,n){"use strict";cc._RF.push(o,"c58635gSO1LnKS1leAZUO0T","NavBarSettingsDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcNavBarSettingsDialog=void 0;var l=t("../../../GameFramework/Scripts/BuildConfig"),u=t("../../../GameFramework/Scripts/Localized/LocalizedManager"),p=t("../../../GameFramework/Scripts/NgcMain"),d=t("../../../GameFramework/Scripts/NgcSoundManager"),f=t("../../../GameFramework/Scripts/NgcUserInfo"),h=t("../../../Services/Platform/Platform"),g=t("../../../Services/Telemetry/Telemetry"),y=t("../../Dialogs/Script/NgcDialogManager"),m=t("./NavBarDialogBase"),_=t("./NavBarSelectLanguageDialog"),v=cc._decorator,S=v.ccclass,N=v.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundSFs=[],t.musicSFs=[],t.soundSprite=null,t.musicSprite=null,t.musicON_OFFLabel=null,t.soundON_OFFLabel=null,t.languageButton=null,t.gdprButton=null,t.controlButton=null,t.forWebNode=null,t}return i(t,e),t.prototype.init=function(){this.musicSprite.spriteFrame=f.default.musicOff?this.musicSFs[1]:this.musicSFs[0],u.NgcLocalizedManager.setTextKey(this.musicON_OFFLabel,f.default.musicOff?"NGG_OFF":"NGG_ON"),this.soundSprite.spriteFrame=f.default.soundOff?this.soundSFs[1]:this.soundSFs[0],u.NgcLocalizedManager.setTextKey(this.soundON_OFFLabel,f.default.soundOff?"NGG_OFF":"NGG_ON"),this.languageButton.active=l.NgcBuildConfig.services.NavBar.languageButton,this.controlButton.active=l.NgcBuildConfig.services.NavBar.controlButton&&cc.sys.isMobile,this.gdprButton.active=l.NgcBuildConfig.services.NavBar.cookieButton,h.NgcPlatform.isRunFromApp()&&(this.forWebNode.active=!1)},t.prototype.soundOnClick=function(){f.default.soundOff=!f.default.soundOff,this.soundSprite.spriteFrame=f.default.soundOff?this.soundSFs[1]:this.soundSFs[0],u.NgcLocalizedManager.setTextKey(this.soundON_OFFLabel,f.default.soundOff?"NGG_OFF":"NGG_ON"),g.NgcTelemetry.inst.LogEvent_SettingInformation({settingID:"soundOff",settingValue:f.default.soundOff})},t.prototype.musicOnClick=function(){f.default.musicOff=!f.default.musicOff,this.musicSprite.spriteFrame=f.default.musicOff?this.musicSFs[1]:this.musicSFs[0],u.NgcLocalizedManager.setTextKey(this.musicON_OFFLabel,f.default.musicOff?"NGG_OFF":"NGG_ON"),d.NgcSoundManager.inst.resumeLastPlayedMusic()||d.NgcSoundManager.inst.playStartScreenMusic(),g.NgcTelemetry.inst.LogEvent_SettingInformation({settingID:"MusicOff",settingValue:f.default.musicOff})},t.prototype.onChangeLanguageButtonClick=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,y.NgcDialogManager.createDialog(_.NgcNavBarSelectLanguageDialog.dialogType,_.NgcNavBarSelectLanguageDialog.urlPrefab,_.NgcNavBarSelectLanguageDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(_.NgcNavBarSelectLanguageDialog)).init(),t.show(),[2]}})})},t.prototype.onChangeControlButtonClick=function(){return c(this,void 0,void 0,function(){return s(this,function(){return p.NgcMain.inst.showControlDialog(),[2]})})},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){g.NgcTelemetry.inst.LogEvent_ExitScreen("OptionsScreen"),e.prototype.hide.call(this)},t.prototype.show=function(){g.NgcTelemetry.inst.LogEvent_EnterScreen("OptionsScreen"),e.prototype.show.call(this)},t.prototype.onSetCookiesBtnClick=function(){setTimeout(function(){window.showCookiesPop()},250),this.hide()},t.urlPrefab="NavBarSettingsDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarSettingsDialog",a([N(cc.SpriteFrame)],t.prototype,"soundSFs",void 0),a([N(cc.SpriteFrame)],t.prototype,"musicSFs",void 0),a([N(cc.Sprite)],t.prototype,"soundSprite",void 0),a([N(cc.Sprite)],t.prototype,"musicSprite",void 0),a([N(cc.Label)],t.prototype,"musicON_OFFLabel",void 0),a([N(cc.Label)],t.prototype,"soundON_OFFLabel",void 0),a([N(cc.Node)],t.prototype,"languageButton",void 0),a([N(cc.Node)],t.prototype,"gdprButton",void 0),a([N(cc.Node)],t.prototype,"controlButton",void 0),a([N(cc.Node)],t.prototype,"forWebNode",void 0),a([S],t)}(m.NgcNavBarDialogBase);n.NgcNavBarSettingsDialog=b,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcSoundManager":"NgcSoundManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./NavBarDialogBase":"NavBarDialogBase","./NavBarSelectLanguageDialog":"NavBarSelectLanguageDialog"}],NavBarShareDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d87968eNOlMhJWnzy9T0m6d","NavBarShareDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarShareDialog=void 0;var a,c=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/NgcUserInfo"),u=e("../../../Services/Platform/Platform"),p=e("../../../Services/Telemetry/Telemetry"),d=e("./NavBarDialogBase"),f=cc._decorator,h=f.ccclass,g=f.property;(function(e){e[e.Native=0]="Native",e[e.Facebook=1]="Facebook",e[e.Email=2]="Email",e[e.Twitter=3]="Twitter"})(a||(a={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alertTextNode=null,t.shareContainer=null,t.context=null,t.DEFAULT_SCREEN_SIZE=cc.v2(640,960),t}return r(t,e),t.prototype.onLoad=function(){this.shareContainer.getChildByName("facebook").active=this.checkShareConfig("facebook"),this.shareContainer.getChildByName("twitter").active=this.checkShareConfig("twitter"),this.shareContainer.getChildByName("email").active=this.checkShareConfig("email")},t.prototype.checkShareConfig=function(e){return!s.NgcBuildConfig.services.ShareMe.hasOwnProperty(e)||s.NgcBuildConfig.services.ShareMe[e]},t.prototype.onButtonFaceBookClick=function(){var e=this,t=s.NgcBuildConfig.services.NavBar.shareUrl+"&origin=facebook",o=encodeURIComponent(t);if(u.NgcPlatform.isRunFromApp())this.postShareMessage("FB",o),p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,c.Utils.enumToString(a,a.Facebook)),l.default.sharedGame_NavBar=!0;else if("undefined"!=typeof FB)p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,c.Utils.enumToString(a,a.Facebook)),FB.ui({method:"share",href:t,display:cc.sys.isMobile?"iframe":"popup"},function(t){t&&(console.log("Share success: post_id = "+t.post_id),p.NgcTelemetry.inst.LogEvent_ShareComplete(e.context,c.Utils.enumToString(a,a.Facebook)),l.default.sharedGame_NavBar=!0)});else{var n="https://www.facebook.com/sharer/sharer.php?u=";n+=o,cc.sys.openURL(n),p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,c.Utils.enumToString(a,a.Facebook)),l.default.sharedGame_NavBar=!0}},t.prototype.onButtonTwitterClick=function(){var e=s.NgcBuildConfig.services.NavBar.shareUrl+"&origin=twitter",t="https://twitter.com/intent/tweet?url="+encodeURIComponent(e)+"&text="+s.NgcBuildConfig.services.NavBar.shareDescription;u.NgcPlatform.isRunFromApp()?this.postShareMessage("TWITTER",t):cc.sys.openURL(t),p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,c.Utils.enumToString(a,a.Twitter)),l.default.sharedGame_NavBar=!0},t.prototype.onButtonEmailClick=function(){var e=s.NgcBuildConfig.services.NavBar.shareUrl+"&origin=mail",t=encodeURIComponent(e),o="mailto:example@website.com?subject=";o+=s.NgcBuildConfig.services.NavBar.shareGameName+"&body=",o+=s.NgcBuildConfig.services.NavBar.shareDescription+" "+t,u.NgcPlatform.isRunFromApp()?this.postShareMessage("EMAIL",o):cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX?cc.sys.openURL(o):window.location.href=o,p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,c.Utils.enumToString(a,a.Email)),l.default.sharedGame_NavBar=!0},t.prototype.onButtonCopyClick=function(){var e=s.NgcBuildConfig.services.NavBar.shareUrl+"&origin=copylink";u.NgcPlatform.isRunFromApp()?this.postShareMessage("COPY_LINK",e):c.Utils.copyToClipboard(e),this.flashAlertNode()},t.prototype.postShareMessage=function(e,t){u.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:e,link:t}}),"*")},t.prototype.flashAlertNode=function(){cc.tween(this.alertTextNode).to(.25,{opacity:255}).delay(1.5).to(.25,{opacity:0}).start()},t.prototype.shareNative=function(){var e=s.NgcBuildConfig.services.NavBar.shareUrl+"&origin=native";navigator.share({url:e}).then(function(){console.log("Share was successful."),l.default.sharedGame_NavBar=!0}).catch(function(e){console.log("Sharing failed",e)})},t.prototype.show=function(){p.NgcTelemetry.inst.LogEvent_ShareInit(this.context),1!=u.NgcPlatform.inst.useOwnSharingMethod()?cc.sys.isMobile&&navigator.share?(this.shareNative(),this.hide()):(navigator.clipboard.writeText(s.NgcBuildConfig.services.NavBar.shareUrl),this.alertTextNode.opacity=255,this.flashAlertNode(),e.prototype.show.call(this)):this.hide()},t.prototype.init=function(e){this.context=e},t.urlPrefab="NavBarShareDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarShareDialog",i([g(cc.Node)],t.prototype,"alertTextNode",void 0),i([g(cc.Node)],t.prototype,"shareContainer",void 0),i([h],t)}(d.NgcNavBarDialogBase);o.NgcNavBarShareDialog=y,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","./NavBarDialogBase":"NavBarDialogBase"}],NavBarTipItem:[function(e,t,o){"use strict";cc._RF.push(t,"b857fF7aWVD+ZWXyWtqVD1z","NavBarTipItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarTipItem=void 0;var a=e("./NavBarDialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipLabel=null,t.tipImg=null,t}return r(t,e),t.urlPrefab="NavBarTipItem",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarTipItem",i([l(cc.Label)],t.prototype,"tipLabel",void 0),i([l(cc.Sprite)],t.prototype,"tipImg",void 0),i([s],t)}(a.NgcNavBarDialogBase);o.NgcNavBarTipItem=u,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarUserConflictInfo:[function(e,t,o){"use strict";cc._RF.push(t,"e662dsdldhArbVHw/hSYA54","NavBarUserConflictInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarUserConflictInfo=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastSave=null,t.time=null,t.lbScore=null,t.coins=null,t.stars=null,t}return r(t,e),t.prototype.start=function(){},t.urlPrefab="NavBarShareDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarShareDialog",i([l(a.NgcLabelLocalized)],t.prototype,"lastSave",void 0),i([l(a.NgcLabelLocalized)],t.prototype,"time",void 0),i([l(cc.Label)],t.prototype,"lbScore",void 0),i([l(cc.Label)],t.prototype,"coins",void 0),i([l(cc.Label)],t.prototype,"stars",void 0),i([s],t)}(cc.Component);o.NgcNavBarUserConflictInfo=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],NavigatePoint:[function(e,t,o){"use strict";cc._RF.push(t,"a86dftyOKpDRad3BMkyFeoj","NavigatePoint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.POINTTYPE=void 0;var a,c=e("./Const"),s=cc._decorator,l=s.ccclass,u=s.property;(function(e){e[e.FIRST=0]="FIRST",e[e.SECOND=1]="SECOND",e[e.UNKNOWN=2]="UNKNOWN",e[e.FORK=3]="FORK",e[e.HASNEXT=4]="HASNEXT"})(a=o.POINTTYPE||(o.POINTTYPE={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.posWS=cc.v2(0,0),t.type=a.UNKNOWN,t.nextPoint=null,t._radius=c.default.CHECKPOINT_CIRCEL_RADIUS,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.navigatePoints.push(this),this.posWS=cc.v2(this.node.parent.convertToWorldSpaceAR(this.node.position));var e=this.node.getComponent(cc.CircleCollider);e&&(this._radius=e.radius,this.node.removeComponent(e))},t.prototype.start=function(){this.node.getComponent(cc.Sprite).enabled=!1,cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative||this.node.destroy()},t.prototype.getWorldPosition=function(){return this.posWS},t.getFirstP=function(){for(var e=0,t=o.navigatePoints;e<t.length;e++){var n=t[e];if(n.type==a.FIRST)return n}return null},t.getSecondP=function(){for(var e=0,t=o.navigatePoints;e<t.length;e++){var n=t[e];if(n.type==a.SECOND)return n}return null},t.getUnknownP=function(){var e=[];return o.navigatePoints.forEach(function(t){t.type==a.UNKNOWN&&e.push(t.getWorldPosition())}),e},t.getUnknownList=function(){var e=[];return o.navigatePoints.forEach(function(t){t.type!=a.UNKNOWN&&t.type!=a.FORK||e.push(t)}),e},t.reset=function(){o.navigatePoints.forEach(function(e){e.destroy()}),o.navigatePoints=[]},t.prototype.getRadius=function(){return this._radius},t.navigatePoints=[],i([u({type:cc.Enum(a)})],t.prototype,"type",void 0),i([u(o)],t.prototype,"nextPoint",void 0),o=i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Const":"Const"}],NetClient:[function(t,o,n){"use strict";cc._RF.push(o,"91abdvgwGxKp6QXoINwcDoE","NetClient");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../Screens/PartyRoomScreen/PartyRoomManager"),u=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),p=t("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),d=t("../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient"),f=t("../../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),h=t("../FakeNames"),g=t("./messages"),y=t("./messages"),m=t("./messagesJson"),_=t("../UserInfo"),v=t("./protos/utils"),S=t("../../NanoGameCore/Services/PartyRoom/PartyRoom"),N=t("../../globals"),b=t("../../NanoGameCore/Services/Platform/Platform"),C=t("../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface"),P=t("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),I=t("./protos/tmb"),w=t("../Utils/Util"),T=t("../Utils/ConstConfig"),O=t("../FTUE/FTUEManager"),R=cc._decorator,E=R.ccclass,A=R.property,D=(u.NgcBuildConfig.gameServerURL,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNetworkErr=null,t.broadcastMessageRoutingTable={},t.OFFLINE=!1,t.partyId=null,t.isEnterPartyRoom=!1,t.connectRetryCount=0,t.connectCycleRunning=!1,t.lastMsgTime=-1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,e.prototype.onLoad.call(this)},t.prototype.startGameMode=function(){this.gameMode||(this.gameMode=!0,this.unschedule(this.sendLocalPlayerGameState),this.schedule(this.sendLocalPlayerGameState,o.GAME_UPDATE_TIME_MS/1e3))},t.prototype.stopGameMode=function(){this.gameMode=!1,this.unschedule(this.sendLocalPlayerGameState)},t.prototype._sendLocalPlayerGameState=function(){if(this.isConnected()){var e=N.default.PlayerController.inst.getAllLocallyControlledBots(),t=[];e.forEach(function(e){var o=e.getCurStateData();t.push(o)});var o=y.ClientMessage_PlayerStateData_Multi(t,N.default.Game.inst.curGameNetID);this._sendWebsocketMessage(I.Client_PlayerStateData.encode(o).finish())}},t.prototype._exitGame=function(){console.log("** EXITING GAME *** ");var e=N.default.Main.inst.getLocalPlayer();if(e&&this.isConnected()){var t=y.ClientMessage_PlayerExitGame(e.netID,N.default.Game.inst.curGameNetID);this._sendWebsocketMessage(I.Client_PlayerExitGame.encode(t).finish())}this.stopGameMode()},t.prototype._sendPing=function(){if(this.connected){var e=f.NgcNetUtils.generateRandomUUID(),t=Date.now(),o=g.ClientMessage_Ping(e,!1);this._sendWebsocketMessage(I.Client_Ping.encode(o).finish()),this.pingLog[e]=t,this.pingsSent++}else console.error("Can't send ping if not connected!")},t.prototype._broadcastMessage=function(e,t,o){var n=m.ClientMessage_BroadcastMessage(this.localPlayerNetID,e,t,o,Date.now());this._sendWebsocketMessage(JSON.stringify(n))},t.prototype._handleMessage_ServerPing=function(e){if(e.pong){var t=e.id,o=this.pingLog[t];if(!o)return void(this.pongLog[t]?console.log("Received duplicate pong!"):console.warn("Received pong for unrecognized ping ID: "+t));this.lastPongTime=Date.now();var n=this.lastPongTime-o;delete this.pingLog[t],this.pongLog[t]=Date.now(),this.pongsRecd++,this.noteLatency(n)}else{var r=g.ClientMessage_Ping(e.id,!0);this._sendWebsocketMessage(I.Client_Ping.encode(r).finish())}},t.prototype._handleMessage_ServerFullGameState=function(e){N.default.Game.inst.updateStateFromServer(e)},t.prototype._handleMessage_ServerGameStartingStatus=function(e){N.default.Game.inst.node.emit("gameStartingStatus",e),N.default.Game.inst.setGameParameters(e.gameParameters),this.setServerTime(e.serverTime)},t.prototype._handleMessage_ServerOrderCreateBot=function(){var e=w.default.randomFromTo(0,T.ConstConfig.PARAMS.SKINS.length-1),t=T.ConstConfig.PARAMS.SKINS[e],o=h.default.inst.allocRandomPerson();o||(o={name:"Andrew",countryCode:"us"});var n=o.name+"|"+o.countryCode;this.requestToHostBot(n,t)},t.prototype._requestToHostBot=function(e,t){if(this.connected){console.log("Requesting to host a bot for the game...");var o=this.localPlayerNetID+":"+f.NgcNetUtils.generateRandomUUID(),n=g.ClientMessage_RequestJoinGame(N.default.Game.inst.curGameNetID,this.mapName,e,o,t,this.localPlayerNetID,null,cc.sys.isMobile);this._sendWebsocketMessage(I.Client_RequestJoinGame.encode(n).finish())}else console.warn("Not connected to server- can't join")},t.prototype._requestToJoinGame=function(e,t){var o=this;if(void 0===e&&(e="-1"),void 0===t&&(t=""),this.connected){console.log("Requesting to join game..."+e),_.UserInfo.curFTUEStep>O.FTUE_STEP.FINISH_1ST_MAP_FTUE?this.mapName=t:this.mapName=t+this.localPlayerNetID;var n=N.default.Main.inst.localUserName+"|"+p.NgcCountryFlagsManager.localCountry,r=_.UserInfo.curSkin,i=g.ClientMessage_RequestJoinGame(e,this.mapName,n,this.localPlayerNetID,r,null,N.default.Game.ELIMINATED_ARR,cc.sys.isMobile);this._sendWebsocketMessage(I.Client_RequestJoinGame.encode(i).finish())}else this.connectCycleRunning?this.scheduleOnce(function(){o.requestToJoinGame(e)},.1):console.warn("Not connected to server- can't join")},t.prototype.cancelConnectCycle=function(){this.connectCycleRunning&&(this.unschedule(this.connectCycleFunc),this.connectCycleRunning=!1)},t.prototype.connectCycleFunc=function(){if(this.connected)return console.log("Connected to server!"),void this.cancelConnectCycle();this.connectRetryCount++,this.tryConnectToServer()},t.prototype.startConnectCycle=function(e){void 0===e&&(e=""),this.isConnected()||this.connectCycleRunning||u.NgcBuildConfig.useNgcServer||(console.log("Start connect cycle"),l.NgcPartyRoomManager.mustGoToPartyRoom()&&(e=l.NgcPartyRoomManager.getServerFromInviteLink()),this.cancelConnectCycle(),this.connectRetryCount=0,this.tryConnectToServer(e),this.schedule(this.connectCycleFunc,o.CONNECT_RETRY_TIME_SEC),this.connectCycleRunning=!0)},t.prototype._onDisconnect=function(){return c(this,void 0,void 0,function(){return s(this,function(){return console.log("Disconnected from server"),this.connected=!1,this.unschedule(this.sendPing),N.default.Game.inst&&N.default.Game.inst.pause(!0),[2]})})},t.prototype._onError=function(){return c(this,void 0,void 0,function(){return s(this,function(){return console.log("Disconnected from server"),this.connected=!1,this.unschedule(this.sendPing),N.default.Game.inst.pause(!0),P.default.showNetworkDisconnect(),[2]})})},t.prototype._onConnect=function(){var e=this;this.localPlayerNetID=f.NgcNetUtils.generateRandomUUID(),console.log("Connected! my random netID is "+this.localPlayerNetID),this.connected=!0,this.schedule(this.sendPing,o.PING_TIME_MS/1e3),this.setOnDisconnectedListener(function(t){return c(e,void 0,void 0,function(){return s(this,function(){switch(t){case C.DisconnectReason.Server:P.default.showNetworkDisconnect();break;case C.DisconnectReason.ForcedByClient:}return[2]})})});var t=this;this.webSocket.onmessage=function(e){t.messagesRecd++,t.lastMsgTime=Date.now();var o=t;if(b.NgcPlatform.inst.isSocketMessageUsingArrayBuffer())e.data instanceof ArrayBuffer?(o.checkNoneJsonMessageData(e.data),N.default.Main.inst.inBackground):o.checkJsonMessageData(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){var e=this.result;o.checkNoneJsonMessageData(e)},n.readAsArrayBuffer(e.data),N.default.Main.inst.inBackground}else o.checkJsonMessageData(e.data)},t.webSocket.onclose=function(e){t.onDisconnect(e)},t.webSocket.onerror=function(e){t.onError(e)}},t.prototype.checkNoneJsonMessageData=function(e){var t=new Uint8Array(e);switch(v.GetMessageType(t)){case I.MessageType.SERVER_GAMESTARTINGSTATUS:this.handleMessage_ServerGameStartingStatus(I.Server_GameStartingStatus.decode(t));break;case I.MessageType.SERVER_FULLGAMESTATE:this.handleMessage_ServerFullGameState(I.Server_FullGameState.decode(t));break;case I.MessageType.SERVER_ORDERCREATEBOT:this.handleMessage_ServerOrderCreateBot(I.Server_OrderCreateBot.decode(t));break;case I.MessageType.SERVER_PING:this.handleMessage_ServerPing(I.Server_Ping.decode(t))}},t.prototype.checkJsonMessageData=function(e){var t=JSON.parse(e);switch(console.log("OnMessage: "+e),t.message){case m.MessageType.ServerBroadcastMessage:case m.MessageType.ServerBroadcastTechMessage:this.handleMessage_ServerBroadcastMessage(t)}S.NgcPartyRoom.inst&&S.NgcPartyRoom.inst.updateMessage(t),N.default.Main.inst.inBackground},t.prototype._tryConnectToServer=function(e,t){void 0===e&&(e=null);var o=this.serverAddress;null!=e&&""!=e&&(o=e),this.webSocket=new WebSocket(o,[]),console.log("Trying to connect to server @ "+o);var n=this;this.webSocket.onopen=function(){n.onConnect(),t&&t()},this.webSocket.onerror=function(e){console.log("ConnectError: ",JSON.stringify(e))},n.webSocket.onclose=function(e){console.log("ConnectClose: ",JSON.stringify(e))}},t.prototype.start=function(){},t.prototype.update=function(){this.timeSinceLastMsg=Date.now()-this.lastMsgTime,this.timeSinceLastPong=Date.now()-this.lastPongTime},t.PING_TIME_MS=1e3,t.GAME_UPDATE_TIME_MS=100,t.inst=null,t.CONNECT_RETRY_TIME_SEC=3,t.CONNECT_RETRY_MAX_COUNT=15,a([A(cc.SpriteFrame)],t.prototype,"iconNetworkErr",void 0),a([A],t.prototype,"OFFLINE",void 0),o=a([E],t)}(d.NgcNetClient));n.default=D,N.default.NetClient=D,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface":"NetworkInterface","../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","../../NanoGameCore/Services/Platform/Platform":"Platform","../../globals":"globals","../FTUE/FTUEManager":"FTUEManager","../FakeNames":"FakeNames","../Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util","./messages":"messages","./messagesJson":"messagesJson","./protos/tmb":"tmb","./protos/utils":"utils"}],NetLatencyDisplay:[function(e,t,o){"use strict";cc._RF.push(t,"81f7avbkJBEhZzrIFYvZFjy","NetLatencyDisplay");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Network/NetClient"),c=e("../Main"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.latencyLabel=null,t.timeSinceLastMessageLabel=null,t.timeSinceLastPongLabel=null,t.pingsSentLabel=null,t.pongsRecdLabel=null,t.messagesRecdLabel=null,t}return r(t,e),t.prototype.start=function(){this.turnOn(!1)},t.prototype.turnOn=function(e){this.container.active=e},t.prototype.monitorEnableDisable=function(){c.Main.inst.debugDisplayEnabled?this.container.active||this.turnOn(!0):this.latencyLabel.enabled&&this.turnOn(!1)},t.prototype.update=function(){this.monitorEnableDisable(),this.latencyLabel.string=a.default.inst.averageLatencyMS.toFixed(1),this.timeSinceLastMessageLabel.string=a.default.inst.timeSinceLastMsg.toFixed(1),this.timeSinceLastPongLabel.string=a.default.inst.timeSinceLastMsg.toFixed(1),this.pingsSentLabel.string=a.default.inst.pingsSent.toString(),this.pongsRecdLabel.string=a.default.inst.pongsRecd.toString(),this.messagesRecdLabel.string=a.default.inst.messagesRecd.toString()},i([u(cc.Node)],t.prototype,"container",void 0),i([u(cc.Label)],t.prototype,"latencyLabel",void 0),i([u(cc.Label)],t.prototype,"timeSinceLastMessageLabel",void 0),i([u(cc.Label)],t.prototype,"timeSinceLastPongLabel",void 0),i([u(cc.Label)],t.prototype,"pingsSentLabel",void 0),i([u(cc.Label)],t.prototype,"pongsRecdLabel",void 0),i([u(cc.Label)],t.prototype,"messagesRecdLabel",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Main":"Main","../Network/NetClient":"NetClient"}],NetStatsTracker:[function(e,t,o){"use strict";cc._RF.push(t,"d6847EbSKRHWJB78F33hRkq","NetStatsTracker");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetStatsTracker=void 0;var a=e("../../../Services/Telemetry/Telemetry"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sessionStarted=!1,t.timeBetweenRemoteUpdates_Total=0,t.timeBetweenRemoteUpdates_NumSamples=0,t.oldRemoteDataReceived=0,t.pingRoundTrip_TotalTime=0,t.pingRoundTrip_NumSamples=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.warn("Already a netstats tracker!"):o.inst=this},t.prototype.resetAll=function(){this.timeBetweenRemoteUpdates_Total=0,this.timeBetweenRemoteUpdates_NumSamples=0,this.oldRemoteDataReceived=0,this.pingRoundTrip_TotalTime=0,this.pingRoundTrip_NumSamples=0},t.prototype.reportPingRoundtripTime=function(e){this.pingRoundTrip_TotalTime+=e,this.pingRoundTrip_NumSamples++},t.prototype.reportOldRemoteDataReceived=function(){this.oldRemoteDataReceived++},t.prototype.reportTimeBetweenRemoteUpdates=function(e){this.timeBetweenRemoteUpdates_NumSamples++,this.timeBetweenRemoteUpdates_Total+=e},t.prototype.beginSession=function(){this.sessionStarted&&console.warn("NetStatsTrackers: beginSession() called without first seeing endSession()"),this.resetAll(),this.sessionStarted=!0},t.prototype.endSession=function(){var e={averageTimeBetweenRemoteUpdatesMS:this.timeBetweenRemoteUpdates_Total/(this.timeBetweenRemoteUpdates_NumSamples+1),avergePingRoundTripTimeMS:this.pingRoundTrip_TotalTime/(this.pingRoundTrip_NumSamples+1),oldRemoteDataReceived:this.oldRemoteDataReceived};a.NgcTelemetry.inst.LogEvent_ReportNetStats(e),this.sessionStarted=!1},t.prototype.start=function(){},t.inst=null,o=i([s],t)}(cc.Component));o.NgcNetStatsTracker=l,cc._RF.pop()},{"../../../Services/Telemetry/Telemetry":"Telemetry"}],NetUtils:[function(e,t,o){"use strict";cc._RF.push(t,"a9a03K+BxBM/LvKMOa7Ew/2","NetUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetUtils=void 0;var n=function(){function e(){}return e.SetRandomSeed=function(t){e.randomSeed=t},e.generateRandomUUID=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},e.RandomRange=function(e,t,o){void 0===o&&(o=!1);var n=t-e,r=e+Math.random()*n;return o&&(r=Math.round(r)),r},e.randomSeed=305419896,e}();o.NgcNetUtils=n,cc._RF.pop()},{}],NetworkInterface:[function(e,t,o){"use strict";cc._RF.push(t,"e82f8eFuq9JRLlZLxj0h+iz","NetworkInterface"),Object.defineProperty(o,"__esModule",{value:!0}),o.DisconnectReason=void 0,function(e){e[e.Server=0]="Server",e[e.ForcedByClient=1]="ForcedByClient",e[e.OpenNewConnection=2]="OpenNewConnection"}(o.DisconnectReason||(o.DisconnectReason={})),cc._RF.pop()},{}],"NgcA2HSManager.ts":[function(t,o,n){"use strict";cc._RF.push(o,"742d86H7tBPP4YC24ldmC+L","NgcA2HSManager.ts");var r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../GameFramework/Scripts/BuildConfig"),a=t("../../../Services/Platform/Platform"),c=cc._decorator,s=c.ccclass,l=(c.property,function(){function t(){}var o;return o=t,t.isValidOrigin=function(){try{return!!window.top.location.href}catch(e){return!1}},t.gotoNano=function(){var e=i.NgcBuildConfig.gameClientURL;-1==i.NgcBuildConfig.gameClientURL.indexOf("?")?e+="?A2HS=true":e+="&A2HS=true",cc.sys.openURL(e)},t.getGameUrl=function(){var e=a.NgcPlatform.inst.getPartyLinkBase();return e.replace(/#\w*/g,"")},t.getURLParameter=function(e){var t=o.getGameUrl();console.log("url",t);var n=new URL(t).search;if(null==n||""==n){var r=t.indexOf("?");r>=0&&(n=t.substring(r,t.length))}return cc.log("queryString",n),new URLSearchParams(n).get(e)},t.shouldA2HS=function(){var e;return(null===(e=a.NgcPlatform.inst)||void 0===e?void 0:e.getPlatformID())!=a.PlatformID.Android&&"true"==o.getURLParameter("A2HS")},t.removeA2HSParameter=function(){if(o.isValidOrigin())try{var t=o.getGameUrl();t.indexOf("&A2HS=true")>=0?t=t.replace("&A2HS=true",""):t.indexOf("A2HS=true")>=0&&(t=t.replace("A2HS=true","")),window.history.pushState({},document.title,t)}catch(e){cc.warn(e)}},o=r([s],t)}());n.default=l,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../Services/Platform/Platform":"Platform"}],NgcAchievementHelper:[function(e,t,o){"use strict";cc._RF.push(t,"16b429Q5XROo7TybJ+bLR88","NgcAchievementHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcAchievementHelper=void 0;var n=e("../../../Services/Inventory/Inventory"),r=function(){function e(){this._achievementMaxValueList={},this._addAchievementRequestQueue=[],this._isAddingAchievement=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.updateAchievementMaxValue=function(e,t){this._achievementMaxValueList[e]=t},e.prototype.addTo=function(e,t){var o=this;this._achievementMaxValueList[e]&&n.NgcInventory.inst.getItemCount(e,function(n,r){if(!n&&r){var i=Math.min(t,o._achievementMaxValueList[e])-r.count;i>0&&o.addItem(e,i)}})},e.prototype.addMore=function(e,t){var o=this;this._achievementMaxValueList[e]&&n.NgcInventory.inst.getItemCount(e,function(n,r){if(!n&&r){var i=o._achievementMaxValueList[e]-r.count,a=Math.min(t,i);a>0&&o.addItem(e,a)}})},e.prototype.addItem=function(e,t){var o={itemID:e,count:t};this._addAchievementRequestQueue.push(o),this.checkToSendAddItem()},e.prototype.checkToSendAddItem=function(){var e=this;if(0==this._isAddingAchievement&&this._addAchievementRequestQueue.length>0){this._isAddingAchievement=!0;var t=[];this._addAchievementRequestQueue.forEach(function(e){return t.push(e)}),this._addAchievementRequestQueue=[],n.NgcInventory.inst.addItemList(t,function(){e._isAddingAchievement=!1,e.checkToSendAddItem()})}},e._instance=null,e}();o.NgcAchievementHelper=r,cc._RF.pop()},{"../../../Services/Inventory/Inventory":"Inventory"}],NgcAdsManager:[function(e,t,o){"use strict";cc._RF.push(t,"7b4a4QYLitORLDTHDie5ot/","NgcAdsManager");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPointcuts=void 0;var r=e("../../../SDK/Nano/NanoSrv"),i=e("../../../Services/Ads/Ads"),a=cc._decorator,c=a.ccclass;a.property,function(e){e.bannerLeaderboard="banner_leaderboard",e.bannerPartyRoom="banner_partyroom",e.bannerRewardVideo="banner_reward_video",e.bannerMainMenu="banner_mainmenu",e.bannerLoading="banner_loading",e.bannerShop="banner_shop",e.bannerRealPrize="banner_realPrize",e.bannerRevive="banner_revive",e.bannerResult="banner_result",e.bannerSpectator="banner_spectator",e.videoDaily="video_daily2x",e.videoShopReward="video_shop",e.videoRewardDialog="video_reward_dialog",e.videoMainmenuReward="video_mainmenu_reward",e.videoReviveDialog="video_revive_dialog",e.videoLuckybooster="video_luckybooster",e.interstitialMenu="interstitial_menu",e.interPreGame="inter_pregame",e.videoSpecialOffer="video_specialOffer",e.videoNEC="video_NEC",e.bannerLeague="banner_league"}(o.NgcPointcuts||(o.NgcPointcuts={}));var s=function(){function e(){this.alllowedPointcuts=[],this._isReceivedAdsConfig=!1}var t;return t=e,Object.defineProperty(e,"inst",{get:function(){return t._inst||cc.error("YOU SHOULD NEW INSTACE OF NgcAdsManager WHEN SERVICE IS INITED"),t._inst},set:function(e){t._inst=e},enumerable:!1,configurable:!0}),e.prototype.getAllowedPointcut=function(){return this._isReceivedAdsConfig?this.alllowedPointcuts||[]:this._getAdsConfig()},e.prototype.isAdsPoincutAvailable=function(e,t){var o=this.getAllowedPointcut();return!!o&&-1!==o.indexOf(e)&&i.NgcAds.inst&&i.NgcAds.inst.adsIsAvailable(t)},e.prototype._getAdsConfig=function(){var e,t=null===(e=r.default.inst.getCurGameInfo())||void 0===e?void 0:e.adsPointcut;if(!t)return[];cc.log("@@@@@AdsConfig ",t);var o=this,n=function(e){Object.keys(e).forEach(function(t){e[t]&&o.alllowedPointcuts.push(t)})};return n(t.banner_poincut||{}),n(t.video_poincut||{}),n(t.interstitial_poincut||{}),cc.log("this.alllowedPointcuts ",this.alllowedPointcuts),this._isReceivedAdsConfig=!0,this.alllowedPointcuts||[]},e.prototype.showBanner=function(e,t,o){this.show(e,i.AdsType.Banner,null,null,t,o)},e.prototype.showInterstitial=function(e,t,o){this.show(e,i.AdsType.Interstitial,null,null,t,o)},e.prototype.showRewardVideo=function(e,t,o,n,r){this.show(e,i.AdsType.VideoReward,t,o,n,r)},e.showBannerTimeStamp=0,t=n([c],e)}();o.default=s,cc._RF.pop()},{"../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads"}],NgcBoosterItem:[function(e,t,o){"use strict";cc._RF.push(t,"2285aWUi7xKKYcxny+b2ue3","NgcBoosterItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Core/ResizableComponent"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.image=null,t._index=0,t._boosterItemList=[],t}return r(t,e),t.prototype.onLoad=function(){var e=a.ResizableComponent.getResizableComponent(this.image.node);e.baseSize&&(e.baseSize.designWidth=this.image.node.width,e.baseSize.designHeight=this.image.node.height)},t.prototype.setBoosterItemList=function(e){this._boosterItemList=e},Object.defineProperty(t.prototype,"Index",{get:function(){return this._index},set:function(e){this._index=e,this.ImageSprite=this._boosterItemList[this._index%this._boosterItemList.length].spriteFrame},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ImageSprite",{set:function(e){this.image.spriteFrame=e;var t=a.ResizableComponent.getResizableComponent(this.image.node);t.baseSize&&(t.baseSize.width=this.image.node.width,t.baseSize.height=this.image.node.height),a.ResizableComponent.resizeNodeByWidth(this.image.node,this.image.node.width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.node.y},set:function(e){this.node.y=e},enumerable:!1,configurable:!0}),i([l(cc.Sprite)],t.prototype,"image",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Core/ResizableComponent":"ResizableComponent"}],NgcBoosterScroll:[function(e,t,o){"use strict";cc._RF.push(t,"efcd2ug45JEg5Km+/9hBmQn","NgcBoosterScroll");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterScroll=o.SpinDirection=void 0;var a,c=e("./NgcBoosterItem"),s=cc._decorator,l=s.ccclass,u=s.property;(function(e){e[e.UP=1]="UP",e[e.DOWN=-1]="DOWN"})(a=o.SpinDirection||(o.SpinDirection={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t._boosterItemList=[],t._spinDirection=a.DOWN,t._isInitalized=!1,t._isRunningNormal=!1,t._onSpinFinishCallback=null,t._duration=3,t._moveSpeed=100,t._spinFast=!1,t}return r(t,e),t.prototype.update=function(e){this._isRunningNormal?this.move(100*e*this._spinDirection):this._spinFast&&this.move(e*this._moveSpeed*this._spinDirection)},Object.defineProperty(t.prototype,"spinFast",{set:function(e){this._spinFast=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RunNormal",{set:function(e){this._isRunningNormal=e},enumerable:!1,configurable:!0}),t.prototype.init=function(e,t){void 0===t&&(t=a.DOWN),this._boosterItemList=e,this._spinDirection=t,this.item1.node.width=this.node.width,this.item1.node.height=this.node.height,this.item1.y=0,this.item1.setBoosterItemList(this._boosterItemList),this.item1.Index=0,this.item2.node.width=this.node.width,this.item2.node.height=this.node.height,this.item2.y=this.node.height,this.item2.setBoosterItemList(this._boosterItemList),this.item2.Index=1,this._isInitalized=!0},t.prototype.displaySpinAnimation=function(e,t,o,n){var r=this._boosterItemList.findIndex(function(t){return t.itemID==e});this._duration=o,this._onSpinFinishCallback=n;var i=this._boosterItemList.length*this.node.height,c=this.item1.y+this.node.height*(r-this.item1.Index),s=(this._spinDirection==a.DOWN?c>=0?-c:-(i+c):c<=0?-c:i-c)+t*i*this._spinDirection;this.startSpinning(s)},t.prototype.startSpinning=function(e){this._lastY=0,cc.tween({y:0}).to(this._duration,{y:e},{progress:this.spinUpdate.bind(this),easing:"cubicOut"}).call(this.onSpinFinish.bind(this)).start()},t.prototype.onSpinFinish=function(){this._onSpinFinishCallback&&(this._onSpinFinishCallback(),this._onSpinFinishCallback=null)},t.prototype.spinUpdate=function(e,t,o,n){var r=e+(t-e)*n,i=r-this._lastY;this._lastY=r,this.move(i)},t.prototype.move=function(e){if(0!=this._isInitalized){var t=Math.floor(Math.abs(e/(2*this.node.height)));t>0&&(this.item1.Index=e>0?this.getPreviousIndexOfItem(this.item1.Index,t):this.getNextIndexOfItem(this.item1.Index,t),this.item2.Index=e>0?this.getPreviousIndexOfItem(this.item2.Index,t):this.getNextIndexOfItem(this.item2.Index,t)),e%=2*this.node.height,this.moveItem(this.item1,e),this.moveItem(this.item2,e)}},t.prototype.moveItem=function(e,t){if(e.y+=t,e.y>=this.node.height){var o=e.y-this.node.height;e.y=-this.node.height+o,e.Index=this.getPreviousIndexOfItem(e.Index,1)}e.y<=-this.node.height&&(o=e.y+this.node.height,e.y=this.node.height+o,e.Index=this.getNextIndexOfItem(e.Index,1))},t.prototype.getNextIndexOfItem=function(e,t){return(e+2*t)%this._boosterItemList.length},t.prototype.getPreviousIndexOfItem=function(e,t){var o=(e-2*t)%this._boosterItemList.length;return o>=0?o:this._boosterItemList.length+o},i([u(c.default)],t.prototype,"item1",void 0),i([u(c.default)],t.prototype,"item2",void 0),i([l],t)}(cc.Component);o.NgcBoosterScroll=p,cc._RF.pop()},{"./NgcBoosterItem":"NgcBoosterItem"}],NgcBoosterTypeHelper:[function(e,t,o){"use strict";cc._RF.push(t,"9cc4ahhoK1IrKOC/ZbgTf6r","NgcBoosterTypeHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterTypeHelper=o.BoosterUseType=void 0,function(e){e[e.IN_GAME=0]="IN_GAME",e[e.IN_MAIN_MENU=1]="IN_MAIN_MENU"}(o.BoosterUseType||(o.BoosterUseType={}));o.NgcBoosterTypeHelper=function(e){this.luckyBoosterManager=null,this.luckyBoosterManager=e},cc._RF.pop()},{}],NgcBoosterTypeInGameHelper:[function(e,t,o){"use strict";cc._RF.push(t,"cbb0dwKBQhJK6kwroi41S0T","NgcBoosterTypeInGameHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterTypeInGameHelper=void 0;var i=e("./NgcBoosterTypeHelper"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return i.BoosterUseType.IN_GAME},t.prototype.canRunNormal=function(){return""===this.luckyBoosterManager.AvailableBooster},t.prototype.checkShowBooster=function(){this.luckyBoosterManager.LuckyBoosterInfo.enable&&this.luckyBoosterManager.DailyBoosterUI.show()},t.prototype.checkDisplayUseBoosterInGame=function(){""!=this.luckyBoosterManager.AvailableBooster?this.luckyBoosterManager.enableUseBoosterInGame(!0):this.luckyBoosterManager.enableUseBoosterInGame(!1)},t.prototype.checkPlayAnimationMoveBoosterToCharacter=function(e,t){t&&t()},t}(i.NgcBoosterTypeHelper);o.NgcBoosterTypeInGameHelper=a,cc._RF.pop()},{"./NgcBoosterTypeHelper":"NgcBoosterTypeHelper"}],NgcBoosterTypeInMainMenuHelper:[function(e,t,o){"use strict";cc._RF.push(t,"83d59IEbuNMqp3rFFn+5h/t","NgcBoosterTypeInMainMenuHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterTypeInMainMenuHelper=void 0;var i=e("../../../../../Scripts/UserInfo"),a=e("./NgcBoosterTypeHelper"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return a.BoosterUseType.IN_MAIN_MENU},t.prototype.canRunNormal=function(){return!0},t.prototype.checkShowBooster=function(){this.luckyBoosterManager.LuckyBoosterInfo.enable&&""==this.luckyBoosterManager.AvailableBooster&&this.extraBoosterShowCondition()?this.luckyBoosterManager.DailyBoosterUI.show():this.luckyBoosterManager.DailyBoosterUI.hide()},t.prototype.extraBoosterShowCondition=function(){return!i.UserInfo.curBooster},t.prototype.checkDisplayUseBoosterInGame=function(){this.luckyBoosterManager.enableUseBoosterInGame(!1)},t.prototype.checkPlayAnimationMoveBoosterToCharacter=function(e,t){this.luckyBoosterManager.DailyBoosterUI.moveBoosterToCharacter(e,t)},t}(a.NgcBoosterTypeHelper);o.NgcBoosterTypeInMainMenuHelper=c,cc._RF.pop()},{"../../../../../Scripts/UserInfo":"UserInfo","./NgcBoosterTypeHelper":"NgcBoosterTypeHelper"}],NgcDialogManager:[function(t,o,n){"use strict";cc._RF.push(o,"f6569DlbhZGC4eUKorNVw66","NgcDialogManager");var r=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcDialogManager=void 0;var a=t("../../../Core/Utils"),c=t("./DialogBase"),s=t("./MessageDialog/MessageDialog"),l=function(){function e(){}return e.loadDialogPrefab=function(t,o,n){return r(this,void 0,void 0,function(){var c=this;return i(this,function(){return[2,n?new Promise(function(s,l){return r(c,void 0,void 0,function(){var r,c;return i(this,function(i){switch(i.label){case 0:return e.dialogPrefabs[t]&&s(),r=function(n){n.load(o,cc.Prefab,function(o,n){o?l():(e.dialogPrefabs[t]=n,s())})},[4,a.Utils.loadBundle(n)];case 1:return(c=i.sent())&&r(c),[2]}})})}):new Promise(function(n,r){e.dialogPrefabs[t]&&n(),cc.log("urlPrefab",o),cc.resources.load(o,cc.Prefab,function(o,i){if(o)return cc.error(o.message||o),void r();e.dialogPrefabs[t]=i,n()})})]})})},e.preLoadBunddle=function(e){var t=this;e.forEach(function(e){return r(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,a.Utils.loadBundle(e)];case 1:return t.sent(),[2]}})})})},e.createDialog=function(t,o,n,a){return r(this,void 0,void 0,function(){var r;return i(this,function(i){switch(i.label){case 0:return a||(a=cc.find("Canvas")),e.dialogPrefabs[t]?[3,2]:[4,this.loadDialogPrefab(t,o,n)];case 1:i.sent(),i.label=2;case 2:return(r=cc.instantiate(e.dialogPrefabs[t])).parent=a,[2,r]}})})},e.hasPopUpShowing=function(){return c.NgcDialogBase.dialogStacks.length>0},e.getShowingPopUps=function(){return c.NgcDialogBase.dialogStacks},e.destroyAllPopUps=function(){c.NgcDialogBase.dialogStacks.forEach(function(e){e&&e.hide()})},e.showAdsReminderMsg=function(t){return r(this,void 0,void 0,function(){var o,n;return i(this,function(r){switch(r.label){case 0:return[4,e.createDialog(s.NgcMessageDialog.dialogType,s.NgcMessageDialog.urlPrefab,s.NgcMessageDialog.bundleName)];case 1:return o=r.sent(),(n=o.getComponent(s.NgcMessageDialog)).init("ADB_REMINDER"),n.show(null,t,null,null),[2]}})})},e.showNotEnoughCurrencyMsg=function(t){return r(this,void 0,void 0,function(){var o,n;return i(this,function(r){switch(r.label){case 0:return[4,e.createDialog(s.NgcMessageDialog.dialogType,s.NgcMessageDialog.urlPrefab,s.NgcMessageDialog.bundleName)];case 1:return o=r.sent(),(n=o.getComponent(s.NgcMessageDialog)).init("ITS_NOT_ENOUGH_COINS"),n.show(null,t,null,null),[2]}})})},e.dialogPrefabs={},e.LIST_BUNDLE_NAME_PRELOAD=["02_dialog","02_dialog_navbar","02_dialog_PWF","02_dialog_realprize","03_end_game_flow","02_crown_road","05_Texture"],e}();n.NgcDialogManager=l,cc._RF.pop()},{"../../../Core/Utils":"Utils","./DialogBase":"DialogBase","./MessageDialog/MessageDialog":"MessageDialog"}],NgcGDPR:[function(e,t,o){"use strict";cc._RF.push(t,"a729bwpczVNILVPUVfrjfXr","NgcGDPR"),Object.defineProperty(o,"__esModule",{value:!0}),o.COOKIE_CONSENT=void 0;var n=e("../../../SDK/Nano/NanoSrv"),r=e("../../../Services/Ads/Ads"),i=e("../../../Services/Platform/Platform"),a=e("../../../Services/Telemetry/Telemetry");(function(e){e[e.ADS_COOKIE_ENABLE=0]="ADS_COOKIE_ENABLE",e[e.TRACKING_COOKIE_ENABLE=1]="TRACKING_COOKIE_ENABLE"})(o.COOKIE_CONSENT||(o.COOKIE_CONSENT={}));var c=function(){function e(){}return e.getInstance=function(){return e._inst||(e._inst=new e),window.GDPRCallback=e._inst.GDPRCallback.bind(this),e._inst},e.prototype.isShowingGDPR_Popup=function(){return i.NgcPlatform.isRunAsIframeOnNano()?!!window.parent.isShowingGDPR:!!window.isShowingGDPR},e.prototype.parseCookies=function(){var e,t=null===(e=window.parseCookies)||void 0===e?void 0:e.call(window);this.GDPRCallback(!!t.ads,!!t.analytic)},e.prototype.getCookie=function(){},e.prototype.GDPRCallback=function(t,o){var i=setInterval(function(){if(a.NgcTelemetry.inst&&r.NgcAds.inst){if(a.NgcTelemetry.inst.isActive=o,r.NgcAds.inst.targetingPersonalAds(t),window.trackingGDPRNeeded&&!e.trackingSent){e.trackingSent=!0;var c=Intl.DateTimeFormat().resolvedOptions().timeZone,s=-(new Date).getTimezoneOffset()/60,l=c+" UTC"+(s<0?"-":"+")+s,u={from:"game",type:n.TrackType.GDPR_response,response_tracking_cookie:a.NgcTelemetry.inst.isActive,timeZone:l};n.default.inst.sendTracking(u)}clearInterval(i)}},100)},e._inst=null,e.trackingSent=!1,e}();o.default=c,cc._RF.pop()},{"../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry"}],NgcGameCamera:[function(e,t,o){"use strict";cc._RF.push(t,"e10d4QHwOZEJ5uxK/JBwE2N","NgcGameCamera");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.setTarget=function(e,t,o){void 0===t&&(t=1),void 0===o&&(o=!0)},t.inst=null,o=i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],NgcGame:[function(t,o,n){"use strict";cc._RF.push(o,"7b81eCNf0xEy7QBd3egNZU1","NgcGame");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcGame=void 0;var l=t("../../../globals"),u=t("../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),p=t("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),d=t("../../CrossFeatures/EndGameFlow/Result/Script/ResultUI"),f=t("../../CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),h=t("../../CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager"),g=t("../../CrossFeatures/TechMessage/Script/TechMessages"),y=t("../../Services/Platform/Platform"),m=t("../../Services/Telemetry/Telemetry"),_=t("./Ads/NgcAdsManager"),v=t("./BuildConfig"),S=t("./Network/NetUtils"),N=t("./NgcGameCamera"),b=t("./NgcMain"),C=t("./NgcSceneManager"),P=t("./NgcScreenManager"),I=t("./NgcUserInfo"),w=cc._decorator,T=w.ccclass,O=(w.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curGameNetID="",t.paused=!1,t.forcedExit=!0,t}var o;return i(t,e),o=t,t.prototype.pause=function(e){this.paused=e},t.prototype.onLoad=function(){null==o.inst?(o.inst=this,this.subscribeEvents()):console.error("More than one Game inst created")},t.prototype.onGameQueueStart=function(){this._onBeforeGameQueueStart(),u.NgcPartyRoomManager.inst.isGameStartedFromRoom()||o.generateRoundID(),m.NgcTelemetry.inst.LogEvent_GameQueueStart()},t.prototype.onGamePlayStart=function(){this._onBeforeGameRoundStart(),m.NgcTelemetry.inst.LogEvent_GameRoundStart(),g.default.inst.onGamePlayStart()},t.generateRoundID=function(){o.roundID=S.NgcNetUtils.generateRandomUUID()},t.prototype.subscribeEvents=function(){var e=this;this.node.on("changeSpectatorTarget",function(t){return e.changeSpectatorTargetCallback(t)}),this.node.on("startSpectator",this.onStartSpectator.bind(this)),this.node.on("stopSpectator",this.onStopSpectator.bind(this))},t.prototype.changeSpectatorTargetCallback=function(e){var t=C.NgcSceneManager.inst.findPlayerByNetID(e);N.default.inst.setTarget(t,1,!0)},t.prototype.onStartSpectator=function(){},t.prototype.onStopSpectator=function(){},t.prototype.gameOver=function(){this.forcedExit=!1,this.startSpectatorView(),this.showResult(),v.NgcBuildConfig.offlineMode&&l.default.OfflineMode.CleanLuckyBooster(),this._gameOver()},t.prototype.showRevive=function(){},t.prototype.addScoresToResultScreen=function(){},t.prototype.showResult=function(){return c(this,void 0,void 0,function(){var e,t=this;return s(this,function(){return e=function(){h.NgcSpectatorManager.inst.startSpectator()},p.NgcDialogManager.createDialog(d.NgcResultUI.dialogType,d.NgcResultUI.urlPrefab,d.NgcResultUI.bundleName).then(function(o){var n=o.getComponent(d.NgcResultUI);t.addScoresToResultScreen(n),n.init(function(){var o,n;(null===(o=f.default.inst)||void 0===o?void 0:o.isOfferAccepted())&&!(null===(n=f.default.inst)||void 0===n?void 0:n.tookFreeOffered)?_.default.inst.showRewardVideo(_.NgcPointcuts.videoReviveDialog,null,null,null,function(o){return c(t,void 0,void 0,function(){return s(this,function(){return f.default.inst.reviveAdsStatus=o,e(),[2]})})}):(f.default.inst.tookFreeOffered=!1,e())}),n.show()}),[2]})})},t.prototype.startSpectatorView=function(){var e=this;p.NgcDialogManager.createDialog(h.NgcSpectatorManager.dialogType,h.NgcSpectatorManager.urlPrefab,h.NgcSpectatorManager.bundleName).then(function(){h.NgcSpectatorManager.inst.show(e.getSpectatorParrent()),h.NgcSpectatorManager.inst.startView()})},t.prototype.saveAllProgression=function(){this.wrongAdsLogic()||(this.uploadBestScore(),I.default.uploadTotalRoundCount(),y.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_FINISHGAMEPLAY:!0}),"*"))},t.prototype.canSkipToPartyRoom=function(){return l.default.PlayerController.inst.isRealPlayerFinishGame()},t.prototype.wrongAdsLogic=function(){return f.default.inst.isOfferAccepted()&&!f.default.inst.reviveAdsStatus},t.prototype.setEndGameRewards=function(){},t.prototype.onSkipRewardScreen=function(){this.saveAllProgression(),P.default.inst.startFadeOut(.25,function(){b.NgcMain.inst.reset(),setTimeout(function(){P.default.inst.startFadeIn(.25)},250)})},t.prototype.showRewardScreen=function(){p.NgcDialogManager.createDialog("VideoRewardDialog","VideoRewardDialog","03_end_game_flow").then(function(e){var t=e.getComponent("VideoRewardDialog");t.init(function(){b.NgcMain.inst.reset()}),t.show()})},t.inst=null,t.roundID=null,o=a([T],t)}(cc.Component));n.NgcGame=O,cc._RF.pop()},{"../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../globals":"globals","../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../CrossFeatures/EndGameFlow/Result/Script/ResultUI":"ResultUI","../../CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../../CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../Services/Platform/Platform":"Platform","../../Services/Telemetry/Telemetry":"Telemetry","./Ads/NgcAdsManager":"NgcAdsManager","./BuildConfig":"BuildConfig","./Network/NetUtils":"NetUtils","./NgcGameCamera":"NgcGameCamera","./NgcMain":"NgcMain","./NgcSceneManager":"NgcSceneManager","./NgcScreenManager":"NgcScreenManager","./NgcUserInfo":"NgcUserInfo"}],NgcItemInfoManager:[function(e,t,o){"use strict";cc._RF.push(t,"5a628yMIEFGcKe3yJoOn0Kc","NgcItemInfoManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemInfoManager=o.NgcBundleInfo=o.NgcSingleItemInfo=o.NgcItemInfo=o.NgcItemStatusType=void 0;var i,a=e("../../../Scripts/CarSelector/CarSkinSelecter"),c=e("../../../Scripts/Utils/ConstConfig"),s=e("../../Core/Delegate"),l=e("../../Core/Utils"),u=e("../../CrossFeatures/ItemShop/Script/NgcAchievementHelper"),p=e("../../SDK/Nano/NanoSrv"),d=e("../../Services/GameShop/GameShop"),f=e("../../Services/Inventory/Inventory"),h=e("./BuildConfig"),g=e("./NgcLocalStorage"),y=e("./NgcShopManager");(function(e){e[e.Currency=0]="Currency",e[e.IAP=1]="IAP",e[e.Achievement=2]="Achievement",e[e.WatchAds=3]="WatchAds",e[e.DailyReward=4]="DailyReward",e[e.LikeSocial=5]="LikeSocial",e[e.Unlock=6]="Unlock",e[e.Equipped=7]="Equipped",e[e.Bundle=8]="Bundle",e[e.SpecialOffer=9]="SpecialOffer",e[e.CrownRoad=10]="CrownRoad",e[e.ComingSoon=11]="ComingSoon",e[e.None=12]="None"})(i=o.NgcItemStatusType||(o.NgcItemStatusType={}));var m=function(){};o.NgcItemInfo=m;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(m);o.NgcSingleItemInfo=_;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(m);o.NgcBundleInfo=v;var S=function(){function e(){this._tableItemList=null,this._bundelDataList=null,this._itemSpriteFrameList=null,this._itemInfoList=[],this._singleItemInfoList=[],this._boughtItemIDs=[],this._isStartedLoading=!1,this._finishLoadingCallbackList=new s.default}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"isStartedLoading",{set:function(e){this._isStartedLoading=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsFinishLoading",{get:function(){return!!this._tableItemList&&!!this._bundelDataList&&!!this._itemSpriteFrameList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ItemInfoList",{get:function(){return this._itemInfoList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ItemSpriteFrameList",{get:function(){return this._itemSpriteFrameList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BoughtItemIDs",{get:function(){return this._boughtItemIDs},enumerable:!1,configurable:!0}),e.prototype.registerFinishLoadingCallback=function(e){this._finishLoadingCallbackList.add(e)},e.prototype.deleteFinishLoadingCallback=function(e){this._finishLoadingCallbackList.del(e)},e.prototype.updateEquippedItem=function(e){var t=this.getSingleItemInfo(e);return t&&(t.itemStatusType=i.Equipped,this.saveEquippedItemInfoList()),t},e.prototype.updateUnequippedItem=function(e){var t=this.getSingleItemInfo(e);return t&&(t.itemStatusType=i.Unlock,this.saveEquippedItemInfoList()),t},e.prototype.updateEquippedItemList=function(e){e=e.filter(function(e){return null!=e}),this._singleItemInfoList.forEach(function(t){var o=e.find(function(e){return e===t.itemID});t.itemStatusType=o?i.Equipped:t.itemStatusType===i.Equipped?i.Unlock:t.itemStatusType}),this.saveEquippedItemInfoList()},e.prototype.updateBoughtItem=function(e){var t=this.getSingleItemInfo(e);return t&&(t.isBought=!0,t.itemStatusType=i.Unlock,this._boughtItemIDs.push(t.itemID)),t},e.prototype.updateBrandNewItem=function(e,t){var o=this.getSingleItemInfo(e);o&&(o.isBrandNew=t,this.saveBrandNewItemInfoList())},e.prototype.isThereEliminatedBundle=function(){var e=this._itemInfoList.length;return this.removeEliminatedBundle(),e>this._itemInfoList.length},e.prototype.includeSingleItem=function(e){return this._singleItemInfoList.findIndex(function(t){return t.itemID===e})>-1},e.prototype.getSingleItemInfo=function(e){return this._singleItemInfoList.find(function(t){return t.itemID===e})},e.prototype.getItemSpriteFrame=function(e){var t=e.split("/").pop().replace(".png","");return this._itemSpriteFrameList[t]},e.prototype.saveEquippedItemInfoList=function(){var t=this._singleItemInfoList.filter(function(e){return e.itemStatusType===i.Equipped}).map(function(e){return e.itemID});g.default.setKey(e.EQUIPPED_ITEM_LIST,t)},e.prototype.saveBrandNewItemInfoList=function(){var e=this._singleItemInfoList.filter(function(e){return!0===e.isBrandNew}).map(function(e){return e.itemID});this.uploadBrandNewItemInfoList(e)},e.prototype.uploadBrandNewItemInfoList=function(e,t){var o={_brandNewIDs:e};p.default.inst.servicePost("/playerdata",JSON.stringify(o),function(e,o){e||t&&t(o)})},e.prototype.getBrandNewItemInfoList=function(e){p.default.inst.serviceGet("/playerdata",null,function(t,o){if(!t){var n=JSON.parse(o).data._brandNewIDs||[];e&&e(n)}})},e.prototype.removeEliminatedBundle=function(){var e=this;this._itemInfoList=this._itemInfoList.filter(function(t){if(!t.isBundle)return!0;var o=t;return!e.isBundleExprited(o.timer)&&!e.isBundleContainBoughtItem(o)})},e.prototype.isBundleExprited=function(e){return Date.parse(e)-(new Date).getTime()<0},e.prototype.isBundleContainBoughtItem=function(e){for(var t=0,o=e.itemIDs;t<o.length;t++){var n=o[t];if(this._boughtItemIDs.includes(n))return!0}return!1},e.prototype.getItemInfoByBundleID=function(e){return this._itemInfoList.find(function(t){return t.bundleID===e})},e.prototype.loadData=function(e){var t=this;if(!this._isStartedLoading){this._itemInfoList=[],this._isStartedLoading=!0,this._tableItemList=null,this._bundelDataList=null,this._itemSpriteFrameList=e?null:{},this._singleItemInfoList=[],f.NgcInventory.inst&&f.NgcInventory.inst.onLogin(function(e,o){!e&&o&&(t._tableItemList=f.NgcInventory.inst.objectTypeTable,t.checkAllItemInfoIsReady())}),d.NgcGameShop.inst&&d.NgcGameShop.inst.onLogin(function(e,o){!e&&o&&(t._bundelDataList=d.NgcGameShop.inst.shopTable,t.checkAllItemInfoIsReady())});var o=this;a.default._allCarTextures.length>0?(cc.error("CarSkinSelector._allCarTextures"),a.default._allCarTextures.forEach(function(e){o._itemSpriteFrameList[e.name]=e}),o.checkAllItemInfoIsReady()):cc.resources.load(c.ConstConfig.CAR_TEXTURE_ATLAS_FILE,cc.SpriteAtlas,function(e,t){if(e)return cc.log("er",e),void cc.log("spriteAtlas",t);var n=t.getSpriteFrames();n.length>0&&(o._itemSpriteFrameList={},n.forEach(function(e){return o._itemSpriteFrameList[e.name]=e}),cc.error("this._itemSpriteFrameList",o._itemSpriteFrameList),o.checkAllItemInfoIsReady())})}},e.prototype.checkAllItemInfoIsReady=function(){this.IsFinishLoading&&(this.generateItemList(),this.getSaveEquippedItemList(),this.getBrandNewItemList(),this.getBoughtItemIDs(),this.removeEliminatedBundle(),this._finishLoadingCallbackList.call())},e.prototype.getSaveEquippedItemList=function(){var t=this;g.default.getKey(e.EQUIPPED_ITEM_LIST,[]).forEach(function(e){var o=t._singleItemInfoList.find(function(t){return t.itemID===e});o&&(o.itemStatusType=i.Equipped)})},e.prototype.clearSaveEquippedItemList=function(){g.default.setKey(e.EQUIPPED_ITEM_LIST,[])},e.prototype.getBrandNewItemList=function(){var e=this,t=function(t){t.forEach(function(t){var o=e._singleItemInfoList.find(function(e){return e.itemID===t});o&&(o.isBrandNew=!0)})};h.NgcBuildConfig.offlineMode||this.getBrandNewItemInfoList(function(e){t(e),y.NgcShopManager.getInstance().checkHasBrandNewItem()})},e.prototype.getBoughtItemIDs=function(){return this._boughtItemIDs=this._singleItemInfoList.filter(function(e){return e.isBought}).map(function(e){return e.itemID})},e.prototype.generateItemList=function(){for(var e in this._bundelDataList){var t=d.NgcGameShop.inst.getItems(e);(null==t?void 0:t.length)>=1&&this.addItemInfo(t,e)}},e.prototype.addItemInfo=function(e,t){var o=this,n=e.map(function(e){return o._tableItemList[e.itemID]}).filter(function(e){return null!=e&&null!=e});if(0!=n.length){var r=n.map(function(e){return o.getItemSpriteFrame(e.picture)}),a=this._bundelDataList[t],c=1!=n.length,s=this.getItemInfoByBundleID(t);if(null==s&&(c?s=new v:(s=new _,this._singleItemInfoList.push(s)),this._itemInfoList.push(s)),s.bundleID=t,s.isBundle=c,s.price=0!==a.price?d.NgcGameShop.inst.getPrices(a.bundleID)[0]:null,s.category=a.category,s.subCategory=0!=a.sub_category?a.sub_category:"UNNAME_CATEGORY",0==c){var l=s;l.itemID=e[0].itemID,l.itemName=a.name,l.spriteFrame=r[0],l.isBought=this.isItemBought(e[0].itemID),l.isBrandNew=!1,l.isEquipped=!1,l.itemStatusType=this.determineItemStatus(l.isBought,s.price),l.displayType=c?null:a.displayType?a.displayType:"type1",l.isShowName=!!a.isShowName&&1===a.isShowName}else{var u=s;u.itemIDs=e.map(function(e){return e.itemID}),u.itemNames=e.map(function(e){return e.itemID}),u.spriteFrames=r,u.fullCost=0!==a.fullCost?d.NgcGameShop.inst.getFullCost(a.bundleID)[0]:null,u.bundleName=a.name,u.itemStatusType=i.Bundle,u.promoTag=a.promoTag,u.xValue=a.xValue,u.timer=a.timer}}},e.prototype.determineItemStatus=function(e,t){var o;if(e)return i.Unlock;if(null!=t){var n=null===(o=f.NgcInventory.inst.objectTypeTable[t.currency])||void 0===o?void 0:o.category;if(!n)return i.None;if(n===l.Utils.enumToString(f.InventoryCurrencyType,f.InventoryCurrencyType.soft_currency))return i.Currency;if(n===l.Utils.enumToString(f.InventoryCurrencyType,f.InventoryCurrencyType.achievement_currency))return u.NgcAchievementHelper.getInstance().updateAchievementMaxValue(t.currency,t.value),i.Achievement;if(n===l.Utils.enumToString(f.InventoryCurrencyType,f.InventoryCurrencyType.ads_currency))return t.currency.includes("specialOffer")?i.SpecialOffer:i.WatchAds;if(n===l.Utils.enumToString(f.InventoryCurrencyType,f.InventoryCurrencyType.daily_login_currency))return i.DailyReward;if(n===l.Utils.enumToString(f.InventoryCurrencyType,f.InventoryCurrencyType.crown_road_currency))return i.CrownRoad;if(n===l.Utils.enumToString(f.InventoryCurrencyType,f.InventoryCurrencyType.coming_soon_currency))return i.ComingSoon;if(n===l.Utils.enumToString(f.InventoryCurrencyType,f.InventoryCurrencyType.like_social_currency))return i.LikeSocial;if(n===l.Utils.enumToString(f.InventoryCurrencyType,f.InventoryCurrencyType.iap_currency))return i.IAP}return i.None},e.prototype.isItemBought=function(e){return!!f.NgcInventory.inst.ownedItems[e]},e._instance=null,e.EQUIPPED_ITEM_LIST="EQUIPPED_ITEM_LIST",e.BRAND_NEW_ITEM_LIST="BRAND_NEW_ITEM_LIST",e}();o.NgcItemInfoManager=S,cc._RF.pop()},{"../../../Scripts/CarSelector/CarSkinSelecter":"CarSkinSelecter","../../../Scripts/Utils/ConstConfig":"ConstConfig","../../Core/Delegate":"Delegate","../../Core/Utils":"Utils","../../CrossFeatures/ItemShop/Script/NgcAchievementHelper":"NgcAchievementHelper","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/GameShop/GameShop":"GameShop","../../Services/Inventory/Inventory":"Inventory","./BuildConfig":"BuildConfig","./NgcLocalStorage":"NgcLocalStorage","./NgcShopManager":"NgcShopManager"}],NgcLocalStorage:[function(e,t,o){"use strict";cc._RF.push(t,"87e6amhpJRBVKyOf23BaoGr","NgcLocalStorage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("simple-crypto-js"),r=e("./BuildConfig"),i=function(){function e(){}return e.getCryptr=function(){return this.cryptr||(this.cryptr=new n.default(e.ENDCRYPT_KEY)),this.cryptr},e.keymangle=function(e,t){return(e+=t?r.NgcBuildConfig.platformGameID:"").split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0).toString()},e.setKey=function(t,o,n){void 0===n&&(n=!0);var r=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(t,n),r.encrypt(o))},e.getKey=function(e,t,o){var n;void 0===o&&(o=!0);try{n=this.getCryptr().decrypt(cc.sys.localStorage.getItem(this.keymangle(e,o)))}catch(r){n=t}return""!==n&&null!=n||(n=t),n},e.ENDCRYPT_KEY="123321",e.cryptr=null,e}();o.default=i,cc._RF.pop()},{"./BuildConfig":"BuildConfig","simple-crypto-js":120}],NgcLuckyBoosterManager:[function(t,o,n){"use strict";cc._RF.push(o,"7c3a8ip6NpDPI+9HeFJQaOG","NgcLuckyBoosterManager");var r=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcLuckyBoosterManager=n.NO_ADS_SPIN_CURRENCY_NUMBER=n.NO_ADS_SPIN_CURRENCY=n.LuckyItem=n.LuckyBoosterInfo=void 0;var a=t("../../../Core/Utils"),c=t("../../../GameFramework/Scripts/Ads/NgcAdsManager"),s=t("../../../GameFramework/Scripts/BuildConfig"),l=t("../../../GameFramework/Scripts/NgcItemInfoManager"),u=t("../../../GameFramework/Scripts/NgcLocalStorage"),p=t("../../../GameFramework/Scripts/NgcMain"),d=t("../../../GameFramework/Scripts/NgcShopManager"),f=t("../../../SDK/Nano/NanoSrv"),h=t("../../../Services/Ads/Ads"),g=t("../../../Services/Inventory/Inventory"),y=t("../../../Services/Telemetry/Telemetry"),m=t("../../DeliveryReward/Script/DeliveryRewardAnimation"),_=t("../../OfflineMode/OfflineMode"),v=t("./BoosterUseTypeHelper/NgcBoosterTypeHelper"),S=t("./BoosterUseTypeHelper/NgcBoosterTypeInGameHelper"),N=t("./BoosterUseTypeHelper/NgcBoosterTypeInMainMenuHelper"),b=t("./NgcBoosterScroll");n.LuckyBoosterInfo=function(){};n.LuckyItem=function(){},n.NO_ADS_SPIN_CURRENCY="coin",n.NO_ADS_SPIN_CURRENCY_NUMBER=999;var C=function(){function e(){this._luckyBoosterInfo={},this._dailyBoosterUI=null,this._boosterUseType=v.BoosterUseType.IN_MAIN_MENU,this._boosterTypeHelperList=[],this.applyBoosterCallback=null,this._pressedSpinButton=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"BoosterUseType",{get:function(){return this._boosterUseType},set:function(e){this._boosterUseType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AvailableBooster",{get:function(){return u.default.getKey("availableBooster","")},set:function(e){u.default.setKey("availableBooster",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BoosterTypeHelper",{get:function(){return this._boosterTypeHelperList[this._boosterUseType]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LuckyBoosterInfo",{get:function(){return this._luckyBoosterInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DailyBoosterUI",{get:function(){return this._dailyBoosterUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NumberOfRound",{get:function(){return u.default.getKey("numberOfRound",0)},set:function(e){u.default.setKey("numberOfRound",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EnableLuckyBooster",{set:function(e){this._dailyBoosterUI.spinButton.interactable=e,this._dailyBoosterUI.spinButton.enableAutoGrayEffect=!e,this._dailyBoosterUI.boosterScroll.RunNormal=e&&this.BoosterTypeHelper.canRunNormal()},enumerable:!1,configurable:!0}),e.prototype.initBoosterTypeHelper=function(){this._boosterTypeHelperList.push(new S.NgcBoosterTypeInGameHelper(this)),this._boosterTypeHelperList.push(new N.NgcBoosterTypeInMainMenuHelper(this))},e.prototype.init=function(e){var t=this;this._dailyBoosterUI=e,console.log("lkb",g.NgcInventory.inst.objectTypeTable),this.initBoosterTypeHelper(),this._dailyBoosterUI.hide();var o=function(){t.onFinishLoadingItem(),l.NgcItemInfoManager.getInstance().deleteFinishLoadingCallback(o)};l.NgcItemInfoManager.getInstance().registerFinishLoadingCallback(o)},e.prototype.setApplyBoosterCallback=function(e){this.applyBoosterCallback=e},e.prototype.applyBooster=function(){this.applyBoosterCallback&&this.applyBoosterCallback()},e.prototype.consumeBooster=function(){this.AvailableBooster="",this.EnableLuckyBooster=!0,this.checkBoosterUI()},e.prototype.enableUseBoosterInGame=function(e){this._dailyBoosterUI.enableInGameText(e),e&&this._dailyBoosterUI.boosterScroll.displaySpinAnimation(this.AvailableBooster,0,.7,null)},e.prototype.checkBoosterUI=function(){this.BoosterTypeHelper.checkShowBooster(),this.BoosterTypeHelper.checkDisplayUseBoosterInGame()},e.prototype.onFinishLoadingItem=function(){this._luckyBoosterInfo=f.default.inst.getCurGameInfo().luckyBooster,this._luckyBoosterInfo.enable&&(this.EnableLuckyBooster=!0,this.getBoosterItemList(),this.checkBoosterUI())},e.prototype.getBoosterItemList=function(){var e,t=g.NgcInventory.inst.objectTypeTable;null===(e=this._luckyBoosterInfo.luckyTable)||void 0===e||e.forEach(function(e){e&&(e.spriteFrame=l.NgcItemInfoManager.getInstance().getItemSpriteFrame(t[e.itemID].picture))}),this._dailyBoosterUI.boosterScroll.init(this._luckyBoosterInfo.luckyTable,b.SpinDirection.DOWN)},e.prototype.handleNanoServiceError=function(e){"adDailyLimit"===JSON.parse(e).res&&this.onAdDailyLimit()},e.prototype.onAdDailyLimit=function(){this._dailyBoosterUI.showLuckyBoosterMessage("LKB_DAILYSPINLIMIT"),y.NgcTelemetry.inst.LogEvent_LuckyboosterClicked(1)},e.prototype.onSpinNotEnoughCurrency=function(){this._dailyBoosterUI.showLuckyBoosterMessage("ITS_NOT_ENOUGH_COINS"),y.NgcTelemetry.inst.LogEvent_LuckyboosterClicked(1)},e.prototype.trackClaimBooster=function(e){var t=this.NumberOfRound+1;y.NgcTelemetry.inst.LogEvent_LuckyboosterCollected(e.itemID,e.quantity,t),this.NumberOfRound=t},e.prototype.canClaimBooster=function(){return r(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(e,t){if(s.NgcBuildConfig.offlineMode||h.NgcAds.inst.isFakeAdsPlatform())return g.NgcInventory.inst.getItemCount(n.NO_ADS_SPIN_CURRENCY,function(o,r){!o&&r&&r.count>=n.NO_ADS_SPIN_CURRENCY_NUMBER&&e(!0),t("notEnoughCurrency")}),void e(!0);f.default.inst.serviceGet("/luckybooster/canclaim",null,function(o,n){o&&t("adDailyLimit"),!o&&n&&(JSON.parse(n),e(!0))})})]})})},e.prototype.onSpinButtonClick=function(){return r(this,void 0,void 0,function(){var e,t,o=this;return i(this,function(n){switch(n.label){case 0:if(this._pressedSpinButton)return[2];this._pressedSpinButton=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.canClaimBooster()];case 2:return n.sent()?(y.NgcTelemetry.inst.LogEvent_LuckyboosterClicked(0),this.EnableLuckyBooster=!1,this._dailyBoosterUI.boosterScroll.spinFast=!0,this._dailyBoosterUI.boosterScroll._moveSpeed=100,cc.tween(this._dailyBoosterUI.boosterScroll).to(2,{_moveSpeed:800},{easing:"cubicIn"}).start(),e=function(e,t){e?o.getLuckyBoosterWinItem():(cc.tween(o._dailyBoosterUI.boosterScroll).to(2,{_moveSpeed:100},{easing:"cubicOut"}).call(function(){o._dailyBoosterUI.boosterScroll.spinFast=!1,o.EnableLuckyBooster=!0}).start(),t<=0&&o._dailyBoosterUI.showLuckyBoosterMessage("NGG_ADS_UNAVAILABLE")),o._pressedSpinButton=!1},h.NgcAds.inst.isFakeAdsPlatform()?e(!0,0):c.default.inst.showRewardVideo(c.NgcPointcuts.videoLuckybooster,null,null,null,e),[3,4]):[2];case 3:return t=n.sent(),this.onDailyError(t),this._pressedSpinButton=!1,[3,4];case 4:return[2]}})})},e.prototype.onDailyError=function(e){switch(e){case"adDailyLimit":this.onAdDailyLimit();break;case"notEnoughCurrency":this.onSpinNotEnoughCurrency()}},e.prototype.getLuckyBoosterWinItem=function(){var e,t,o=this,r=function(){if(s.NgcBuildConfig.offlineMode){var e=a.Utils.randomArr(o._luckyBoosterInfo.luckyTable).itemID;o.displaySpinAnimation(e)}else f.default.inst.servicePost("/luckybooster/claim",JSON.stringify({}),function(e,t){if(e)return o.handleNanoServiceError(e),void(o.EnableLuckyBooster=!0);if(!e&&t){var n=JSON.parse(t);o.displaySpinAnimation(n.data.itemID)}})};if(s.NgcBuildConfig.offlineMode||h.NgcAds.inst.isFakeAdsPlatform()){var i=["",0],c=i[0],l=i[1];s.NgcBuildConfig.offlineMode?(c=(e=[_.OfflineMode.Config.DailyBoosterType,_.OfflineMode.Config.DailyBoosterPrice])[0],l=e[1]):(c=(t=[n.NO_ADS_SPIN_CURRENCY,n.NO_ADS_SPIN_CURRENCY_NUMBER])[0],l=t[1]),g.NgcInventory.inst.consumeItem(c,l,function(e){e?o.EnableLuckyBooster=!0:r()})}else r()},e.prototype.displaySpinAnimation=function(e){var t=this,o=a.Utils.randomFromTo(this._luckyBoosterInfo.minFullSpins,this._luckyBoosterInfo.maxFullSpins);this._dailyBoosterUI.boosterScroll.spinFast=!1,this._dailyBoosterUI.boosterScroll.displaySpinAnimation(e,o,3,function(){return t.showItemClaimAnimation(e)})},e.prototype.showItemClaimAnimation=function(e){var t=this,o=this._luckyBoosterInfo.luckyTable.find(function(t){return t.itemID===e}),n={itemID:o.itemID,count:o.quantity};m.default.inst.showRewardAnimation(n,function(){return t.checkUseBooster(o)},!0),this.trackClaimBooster(o)},e.prototype.checkUseBooster=function(e){var t=this;this.BoosterTypeHelper.checkPlayAnimationMoveBoosterToCharacter(e.spriteFrame,function(){return t.onClaimBooster(e.itemID)})},e.prototype.onClaimBooster=function(e){var t=this;s.NgcBuildConfig.offlineMode&&(_.OfflineMode.UpdateItem(e,1),_.OfflineMode.MarkClaimLuckyBooster(e)),g.NgcInventory.inst.forceFetchInventory(function(){p.NgcMain.inst.onClaimBooster(e),d.NgcShopManager.getInstance().updateBoughtItem(e),t.AvailableBooster=e,t.EnableLuckyBooster=!0,t.checkBoosterUI()})},e._instance=null,e}();n.NgcLuckyBoosterManager=C,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Telemetry/Telemetry":"Telemetry","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../OfflineMode/OfflineMode":"OfflineMode","./BoosterUseTypeHelper/NgcBoosterTypeHelper":"NgcBoosterTypeHelper","./BoosterUseTypeHelper/NgcBoosterTypeInGameHelper":"NgcBoosterTypeInGameHelper","./BoosterUseTypeHelper/NgcBoosterTypeInMainMenuHelper":"NgcBoosterTypeInMainMenuHelper","./NgcBoosterScroll":"NgcBoosterScroll"}],NgcMain:[function(t,o,n){"use strict";cc._RF.push(o,"20518EDME9IH7pdIlp3ji+5","NgcMain");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcMain=n.AppContext=n.AppState=void 0;var l,u,p=t("../../Core/Utils"),d=t("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),f=t("../../CrossFeatures/NavBar/Script/NavBarLeaveGameDialog"),h=t("../../SDK/Nano/NanoSrv"),g=t("./Ads/AdsManager_impl"),y=t("./Ads/NgcAdsManager"),m=t("./Network/NetUtils"),_=t("./NgcUserInfo"),v=cc._decorator,S=v.ccclass;v.property,function(e){e[e.InitSettle=0]="InitSettle",e[e.StartScreen=1]="StartScreen",e[e.ShopScreen=2]="ShopScreen",e[e.Game=3]="Game",e[e.PartyScreen=4]="PartyScreen"}(l=n.AppState||(n.AppState={})),function(e){e[e.NOT_SET=0]="NOT_SET",e[e.Options=1]="Options",e[e.MainMenu=2]="MainMenu",e[e.Matchmaking=3]="Matchmaking",e[e.Gameplay=4]="Gameplay",e[e.Results=5]="Results",e[e.Rewards=6]="Rewards",e[e.Spectator=7]="Spectator",e[e.Leaderboard=8]="Leaderboard",e[e.PartyRoom=9]="PartyRoom",e[e.ItemsShopScreen=10]="ItemsShopScreen"}(u=n.AppContext||(n.AppContext={}));var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curGameNetID="",t.localUserName="",t.appState=l.StartScreen,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){null==o.inst?(window.warningBack=this.showWarningPopup.bind(this),o.inst=this,this.createInstanceOfAdsManager()):console.error("More than one Game inst created")},t.prototype.createInstanceOfAdsManager=function(){y.default.inst||(y.default.inst=new g.default)},t.setAppContext=function(e){0!=o.appContextStack.length?this.appContextStack[this.appContextStack.length-1]=e:o.pushAppContext(e)},t.pushAppContext=function(e){o.appContextStack.push(e)},t.getAppContext=function(){return 0==o.appContextStack.length?u.NOT_SET:this.appContextStack[this.appContextStack.length-1]},t.getAppContextName=function(){var e=this.getAppContext();return p.Utils.enumToString(u,e)},t.prototype.updateNameToNanosrv=function(){},t.prototype.showWarningPopup=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return f.default.isOpening?[2]:(e=cc.sys.isMobile?f.default.NavBarLeaveGame_Mobile:f.default.NavBarLeaveGame_PC,[4,d.NgcDialogManager.createDialog(f.default.dialogType,e,f.default.bundleName)]);case 1:return t.sent().getComponent(f.default).show(),[2]}})})},t.popAppContext=function(){0!=o.appContextStack.length&&this.appContextStack.pop()},t.prototype.setState=function(){},t.prototype.createFakeName=function(){return h.default.inst.randomNameDisabled||(_.default.localUserName=this.localUserName="Guest"+m.NgcNetUtils.RandomRange(1,9999,!0).toString()),this.updateNameToNanosrv(),this.localUserName},t.prototype.reset=function(){this._reset()},t.inst=null,t.appContextStack=[],o=a([S],t)}(cc.Component);n.NgcMain=N,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../CrossFeatures/NavBar/Script/NavBarLeaveGameDialog":"NavBarLeaveGameDialog","../../SDK/Nano/NanoSrv":"NanoSrv","./Ads/AdsManager_impl":"AdsManager_impl","./Ads/NgcAdsManager":"NgcAdsManager","./Network/NetUtils":"NetUtils","./NgcUserInfo":"NgcUserInfo"}],NgcNetClientRefactor:[function(t,o,n){"use strict";cc._RF.push(o,"2080dMH2odOAZQ+BuSQLHLH","NgcNetClientRefactor");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcNetClientRefactor=n.WS_CLOSE_FOR_NEW_CONNECTION_CODE=void 0;var l=t("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),u=t("../BuildConfig"),p=t("./Messaging/MessageBuilder"),d=t("./Messaging/Protocol"),f=t("./Messaging/MessageDefines"),h=t("./NetStatsTracker"),g=t("long"),y=t("../../../Services/PartyRoom/PartyRoom"),m=t("../../../CrossFeatures/TechMessage/Script/TechMessages"),_=t("./NetworkInterface"),v=t("../../../SDK/Nano/NanoSrv"),S=cc._decorator,N=S.ccclass;S.property,n.WS_CLOSE_FOR_NEW_CONNECTION_CODE=4e3;var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onDisconnectedCB=null,t.websocket=null,t.serverAddress="ws://localhost:1337",t.connected=!1,t.LATENCY_HISTORY_MAX_ENTRIES=10,t.onMessageHandlers={},t.connectRetryCount=0,t.connectCycleRunning=!1,t.messagesRecd=0,t.lastMsgTime=-1,t.serverDelta=0,t.lowestPing=0,t.recentPing=0,t.lastPongTime=0,t.timeSinceLastMsg=0,t.timeSinceLastPong=0,t.calculatedDelta=!1,t.latencyMovingHistory=[],t.averageLatencyMS=0,t.serverClockOffsetMS=0,t.clientID="",t.localPlayerID="",t.broadcastMessageRoutingTable={},t.pingTimeout=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){if(o.inst)cc.error("More than one NetClient!!");else{o.inst=this;var e=v.default.inst&&v.default.inst.getCurGameInfo()&&v.default.inst.getCurGameInfo().gameServerURL||"";this.serverAddress=e||u.NgcBuildConfig.gameServerURL}},t.prototype.connect=function(e,t,r){return void 0===e&&(e=""),void 0===t&&(t=o.CONNECTION_TIMEOUT),void 0===r&&(r=o.MAX_RETRY),c(this,void 0,Promise,function(){var o,i,a,c,l=this;return s(this,function(){return o=r,i=this.serverAddress,""!=e&&(i=e),a=e!==this.serverAddress,c=function(e,n){o<=0?n():l.websocket&&l.websocket.readyState===WebSocket.OPEN?e(l.websocket):l.connect(i,t,o-1).then(e,n)},[2,new Promise(function(e,o){setTimeout(function(){c(e,o)},t),a&&l.websocket&&l.websocket.close(n.WS_CLOSE_FOR_NEW_CONNECTION_CODE,"Open new connection"),l.websocket&&l.websocket.readyState==WebSocket.OPEN?e(l.websocket):(l.websocket&&l.websocket.close(n.WS_CLOSE_FOR_NEW_CONNECTION_CODE,"Open new connection"),l.websocket=new WebSocket(i,[]),cc.log("[NGC_NetClient] Trying to connect to server @ "+i),l.websocket.onopen=function(t){l.serverAddress=i,l.websocket.binaryType="arraybuffer",l._onOpen(t),e(l.websocket)},l.websocket.onmessage=function(e){l._onMessage(e)},l.websocket.onerror=function(e){l._onError(e)},l.websocket.onclose=function(e){l._onClose(e)})})]})})},t.prototype._onOpen=function(e){cc.log("[NGC_NetClient] Connection is opened!"),this.connected=!0,this.schedule(this._sendPing,o.PING_TIME_MS/1e3),this.onOpen&&this.onOpen(e)},t.prototype._onMessage=function(e){if(this.messagesRecd++,this.lastMsgTime=Date.now(),e.data instanceof ArrayBuffer){var t=new Uint8Array(e.data),o=d.GetMessageType(t);o>d.Protocol.OP_END?this.onRoomMessage(o,t):this.resolveSystemMessage(o,t)}else"string"==typeof e.data&&this.checkJsonMessageData(e.data);this.onMessageFromServer&&this.onMessageFromServer(e)},t.prototype.onMessage=function(e,t){this.onMessageHandlers[e]=t},t.prototype.onRoomMessage=function(e,t){this.onMessageHandlers[e]&&this.onMessageHandlers[e](t)},t.prototype._onError=function(e){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return cc.log("[NGC_NetClient] ConnectError: ",JSON.stringify(e)),this.connected=!1,this.unschedule(this._sendPing),this.onError?[4,this.onError(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype._onClose=function(e){return c(this,void 0,void 0,function(){var t;return s(this,function(o){switch(o.label){case 0:return cc.log("[NGC_NetClient] ConnectClose: ",JSON.stringify(e)),this.connected=!1,this.unschedule(this._sendPing),t=e.code===n.WS_CLOSE_FOR_NEW_CONNECTION_CODE?_.DisconnectReason.OpenNewConnection:_.DisconnectReason.Server,this._onDisconnectedCB&&this._onDisconnectedCB(t),this.onClose?[4,this.onClose(e)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},t.prototype._sendPing=function(){this.send(p.MessageBuilder[d.Protocol.PING](Date.now(),0))},t.prototype.startConnectionCycle=function(e){void 0===e&&(e=""),this.isConnected()||this.connectCycleRunning||(cc.log("[NGC_NetClient] Start connection cycle"),l.NgcPartyRoomManager.mustGoToPartyRoom()&&(e=l.NgcPartyRoomManager.getServerFromInviteLink()),this.cancelConnectCycle(),this.connectRetryCount=0,this.connect(e),this.schedule(this.connectCycleFunc,o.CONNECT_RETRY_TIME_SEC),this.connectCycleRunning=!0)},t.prototype.connectCycleFunc=function(){if(this.connected)return console.log("Connected to server!"),void this.cancelConnectCycle();this.connectRetryCount++,this.connect()},t.prototype.cancelConnectCycle=function(){console.log("Cancel connection cycle"),this.connectCycleRunning&&(this.unschedule(this.connectCycleFunc),this.connectCycleRunning=!1)},t.prototype.setServerTime=function(e){this.serverClockOffsetMS=Date.now()-e},t.prototype.isConnected=function(){return this.connected},t.prototype._onServerInit=function(e){var t=f.Server_Init.decode(e);this.clientID=t.clientID,this.onServerInit&&this.onServerInit(t),cc.log("[NGC_NetClient] Server init",t)},t.prototype.registerForBroadcastMessageType=function(e,t){var o=[];(o=this.broadcastMessageRoutingTable.hasOwnProperty(e)?this.broadcastMessageRoutingTable[e]:[]).indexOf(t)>=0||(o.push(t),this.broadcastMessageRoutingTable[e]=o)},t.prototype.removeBroadcastMessageType=function(e){this.broadcastMessageRoutingTable.hasOwnProperty(e)&&(this.broadcastMessageRoutingTable[e]=[])},t.prototype.handleNGCBroadcast=function(e){var t=f.NGC_Broadcast.decode(e),o=t.type,n=this.broadcastMessageRoutingTable[o];n?n.forEach(function(e){e(t)}):console.warn("Received unrecognized broadcast message of type "+o)},t.prototype.sendNgcBroadcast=function(e,t){this.send(p.MessageBuilder[d.Protocol.NGC_BROADCAST](e,this.getCombinedNetID(),t,Date.now()))},t.prototype.noteLatency=function(e){h.NgcNetStatsTracker.inst.reportPingRoundtripTime(e),this.latencyMovingHistory.push(e),this.latencyMovingHistory.length>=this.LATENCY_HISTORY_MAX_ENTRIES&&this.latencyMovingHistory.splice(0);for(var t=0,o=0;o<this.latencyMovingHistory.length;o++)t+=this.latencyMovingHistory[o];this.latencyMovingHistory.length>0&&(this.averageLatencyMS=t/this.latencyMovingHistory.length),m.default.inst.setTrackingParams({averagePing:Math.round(this.averageLatencyMS),currentPing:e}),m.default.inst.onMeasureLatency(this.averageLatencyMS)},t.prototype._onServerPing=function(e){var t=f.Ping.decode(e),o=g.fromValue(t.reqTime).toNumber(),n=g.fromValue(t.resTime).toNumber();if(0!==n){var r=Date.now();this.lastPongTime=r,this.recentPing=r-o,(this.recentPing<this.lowestPing||!this.calculatedDelta)&&(this.calculatedDelta=!0,this.lowestPing=this.recentPing,this.serverDelta=n-this.recentPing-o),this.noteLatency(this.recentPing),this.onServerPing&&this.onServerPing(t)}else this.send(p.MessageBuilder[d.Protocol.PING](t.reqTime,Date.now()))},t.prototype.exitGame=function(){this._onPreExitGame&&this._onPreExitGame(),this.sendLeaveGameMessage(),this._onPostExitGame&&this._onPostExitGame()},t.prototype.resolveSystemMessage=function(e,t){switch(e){case d.Protocol.SERVER_INIT:this._onServerInit(t);break;case d.Protocol.PING:this._onServerPing(t);break;case d.Protocol.NGC_BROADCAST:this.handleNGCBroadcast(t)}},t.prototype.checkJsonMessageData=function(e){var t=JSON.parse(e);console.log("OnMessage: "+e),y.NgcPartyRoom.inst&&y.NgcPartyRoom.inst.updateMessage(t)},t.prototype.update=function(){this.timeSinceLastMsg=Date.now()-this.lastMsgTime,this.timeSinceLastPong=Date.now()-this.lastPongTime},t.prototype.send=function(e){var t;null===(t=this.websocket)||void 0===t||t.send(e)},t.prototype.sendJoinGameMessage=function(e,t,o){void 0===t&&(t={}),void 0===o&&(o={});var n=p.MessageBuilder[d.Protocol.JOIN_ROOM](e,t,o);this.send(n)},t.prototype.sendLeaveGameMessage=function(){var e=p.MessageBuilder[d.Protocol.LEAVE_ROOM]();this.send(e)},t.prototype.isClientID=function(e){return o.DetachClientID(e)===this.clientID},t.prototype.isLocalPlayerID=function(e){return o.DetachPlayerID(e)===this.localPlayerID},t.prototype.getCombinedNetID=function(){return this.clientID+":"+this.localPlayerID},t.DetachClientID=function(e){return e.split(":").shift()},t.DetachPlayerID=function(e){return e.split(":").pop()},t.prototype.forceDisconnect=function(e){void 0===e&&(e=_.DisconnectReason.ForcedByClient),this.connected=!1,this.unschedule(this._sendPing),this.websocket.close(),this._onDisconnectedCB&&this._onDisconnectedCB(e)},t.prototype.setOnDisconnectedListener=function(e){e&&(this._onDisconnectedCB=e)},t.inst=null,t.PING_TIME_MS=1e3,t.CONNECT_RETRY_TIME_SEC=3,t.CONNECT_RETRY_MAX_COUNT=15,t.GAME_UPDATE_TIME_MS=200,t.CONNECTION_TIMEOUT=5e3,t.MAX_RETRY=5,o=a([N],t)}(cc.Component);n.NgcNetClientRefactor=b,cc._RF.pop()},{"../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/PartyRoom/PartyRoom":"PartyRoom","../BuildConfig":"BuildConfig","./Messaging/MessageBuilder":"MessageBuilder","./Messaging/MessageDefines":"MessageDefines","./Messaging/Protocol":"Protocol","./NetStatsTracker":"NetStatsTracker","./NetworkInterface":"NetworkInterface",long:81}],NgcNetClient:[function(t,o,n){"use strict";cc._RF.push(o,"9d867cIF1ZEn5Yj8ZZ31l+x","NgcNetClient");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcNetClient=void 0;var l=t("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),u=t("../../../Core/Utils"),p=t("../../../CrossFeatures/TechMessage/Script/TechMessages"),d=t("../../../SDK/Nano/NanoSrv"),f=t("../../../Services/Platform/Platform"),h=t("../BuildConfig"),g=t("./NetStatsTracker"),y=t("./NetworkInterface"),m=cc._decorator,_=m.ccclass,v=m.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onDisconnectedCB=null,t.broadcastMessageRoutingTable={},t.GAME_UPDATE_TIME_MS=200,t.serverAddress="ws://localhost:1337",t.wssCacert=null,t.localPlayerNetID="",t.connected=!1,t.webSocket=null,t.averageLatencyMS=0,t.latencyPingSampleCount=0,t.latencyMovingHistory=[],t.latencyHistroyNextIndexNumber=0,t.lastPongTime=0,t.timeSinceLastMsg=0,t.timeSinceLastPong=0,t.pingsSent=0,t.pongsRecd=0,t.messagesRecd=0,t.serverClockOffsetMS=0,t.LATENCY_HISTORY_MAX_ENTRIES=30,t.pingLog={},t.pongLog={},t.gameMode=!1,t.connectRetryCount=0,t.connectCycleRunning=!1,t.lastMsgTime=-1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){if(o.inst)console.error("More than one NetClient!!");else{o.inst=this;var e=d.default.inst&&d.default.inst.getCurGameInfo()&&d.default.inst.getCurGameInfo().gameServerURL||"";this.serverAddress=e||h.NgcBuildConfig.gameServerURL}},t.prototype.timeout=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.prototype.isConnected=function(){return this.connected},t.prototype.startGameMode=function(){this.gameMode||(this.gameMode=!0,console.log("Scheduling send player state"),this.schedule(this.sendLocalPlayerGameState,this.GAME_UPDATE_TIME_MS/1e3))},t.prototype.getServerTime=function(){return Date.now()-this.serverClockOffsetMS},t.prototype.setServerTime=function(e){this.serverClockOffsetMS=Date.now()-e},t.prototype.stopGameMode=function(){this.gameMode=!1,this.unschedule(this.sendLocalPlayerGameState)},t.prototype.registerForBroadcastMessageType=function(e,t){var o=[];(o=this.broadcastMessageRoutingTable.hasOwnProperty(e)?this.broadcastMessageRoutingTable[e]:[]).indexOf(t)>=0||(o.push(t),this.broadcastMessageRoutingTable[e]=o)},t.prototype.removeBroadcastMessageType=function(e){this.broadcastMessageRoutingTable.hasOwnProperty(e)&&(this.broadcastMessageRoutingTable[e]=[])},t.prototype.localTimeToServer=function(e){return e},t.prototype._startUpdateLoop=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.gameMode?[4,this.timeout(this.GAME_UPDATE_TIME_MS)]:[3,2];case 1:return e.sent(),this.sendLocalPlayerGameState(),[3,0];case 2:return[2]}})})},t.prototype._sendWebsocketMessage=function(e){e instanceof Uint8Array&&f.NgcPlatform.inst.isSocketMessageUsingArrayBuffer()&&(e=u.Utils.convertUint8ArrayToArrayBuffer(e)),this.webSocket.send(e)},t.prototype.sendLocalPlayerGameState=function(){this._sendLocalPlayerGameState()},t.prototype.exitGame=function(){this._exitGame()},t.prototype.sendPing=function(){this._sendPing()},t.prototype.broadcastMessage=function(e,t,o){this._broadcastMessage(e,t,o)},t.prototype.noteLatency=function(e){g.NgcNetStatsTracker.inst.reportPingRoundtripTime(e),this.latencyMovingHistory.push(e),this.latencyMovingHistory.length>=this.LATENCY_HISTORY_MAX_ENTRIES&&this.latencyMovingHistory.splice(0);for(var t=0,o=0;o<this.latencyMovingHistory.length;o++)t+=this.latencyMovingHistory[o];this.latencyMovingHistory.length>0&&(this.averageLatencyMS=t/this.latencyMovingHistory.length),p.default.inst.setTrackingParams({averagePing:this.averageLatencyMS,currentPing:e}),p.default.inst.onMeasureLatency(this.averageLatencyMS)},t.prototype.handleMessage_ServerBroadcastMessage=function(e){var t=e.type,o=this.broadcastMessageRoutingTable[t];o?o.forEach(function(t){t(e)}):console.warn("Received unrecognized broadcast message of type "+t)},t.prototype.handleMessage_ServerPing=function(e){this._handleMessage_ServerPing(e)},t.prototype.handleMessage_ServerFullGameState=function(e){this._handleMessage_ServerFullGameState(e)},t.prototype.handleMessage_ServerGameStartingStatus=function(e){this._handleMessage_ServerGameStartingStatus(e)},t.prototype.handleMessage_ServerOrderCreateBot=function(e){this._handleMessage_ServerOrderCreateBot(e)},t.prototype.requestToHostBot=function(e,t){this._requestToHostBot(e,t)},t.prototype.requestToJoinGame=function(e,t){void 0===e&&(e="-1"),void 0===t&&(t=""),this._requestToJoinGame(e,t)},t.prototype.cancelConnectCycle=function(){this.connectCycleRunning&&(this.unschedule(this.connectCycleFunc),this.connectCycleRunning=!1)},t.prototype.connectCycleFunc=function(){if(this.connected)return console.log("Connected to server!"),void this.cancelConnectCycle();this.connectRetryCount++,this.tryConnectToServer()},t.prototype.startConnectCycle=function(e){void 0===e&&(e=""),console.log("Start connect cycle"),l.NgcPartyRoomManager.mustGoToPartyRoom()&&(e=l.NgcPartyRoomManager.getServerFromInviteLink()),this.cancelConnectCycle(),this.connectRetryCount=0,this.tryConnectToServer(e),this.schedule(this.connectCycleFunc,o.CONNECT_RETRY_TIME_SEC),this.connectCycleRunning=!0},t.prototype.onDisconnect=function(e){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this._onDisconnectedCB&&this._onDisconnectedCB(y.DisconnectReason.Server),[4,this._onDisconnect(e)];case 1:return t.sent(),[2]}})})},t.prototype.onError=function(e){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this._onError(e)];case 1:return t.sent(),[2]}})})},t.prototype.onConnect=function(){this._onConnect()},t.prototype.tryConnectToServer=function(e,t){void 0===e&&(e=null),void 0===t&&(t=function(){}),this._tryConnectToServer(e,t)},t.prototype.start=function(){},t.prototype.update=function(){this.timeSinceLastMsg=Date.now()-this.lastMsgTime,this.timeSinceLastPong=Date.now()-this.lastPongTime},t.prototype.forceDisconnect=function(e){void 0===e&&(e=y.DisconnectReason.ForcedByClient),console.log("Disconnected from server"),this.connected=!1,this.unschedule(this.sendPing),this.webSocket.close(),this._onDisconnectedCB&&this._onDisconnectedCB(e)},t.prototype.setOnDisconnectedListener=function(e){e&&(this._onDisconnectedCB=e)},t.PING_TIME_MS=1e3,t.inst=null,t.CONNECT_RETRY_TIME_SEC=3,t.CONNECT_RETRY_MAX_COUNT=15,a([v({type:cc.Asset})],t.prototype,"wssCacert",void 0),o=a([_],t)}(cc.Component);n.NgcNetClient=S,cc._RF.pop()},{"../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../Core/Utils":"Utils","../../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../BuildConfig":"BuildConfig","./NetStatsTracker":"NetStatsTracker","./NetworkInterface":"NetworkInterface"}],NgcRealPrizeManager:[function(e,t,o){"use strict";cc._RF.push(t,"b6982P22BdAs5+XCh0J3TSc","NgcRealPrizeManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../SDK/Nano/NanoSrv"),r=e("./RealPrizeDefines"),i=function(){function e(){if(this._isReceivedEventList=!1,this._eventList=[],this._eventState=r.PRIZE_STATE.NONE,e._instance)throw new Error("Error: Instantiation failed: Use NgcRealPrizeManager.getInstance() instead of new.");e._instance=this}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.getEventList=function(e){void 0===e&&(e=function(){}),console.log("@@@@@ getEventLisst "),this._isReceivedEventList=!1,this._eventList=[];var t=this;n.default.inst.serviceGet("/event/list",null,function(o,n){console.log("@@@ getEventList res ",n),console.log("@@@ getEventList err ",o),o||(t._isReceivedEventList=!0,t._handleEventInfo(n.data),e&&e())})},e.prototype._handleEventInfo=function(e){this._eventList=e,this._eventList=[],this._eventList.length,console.log("@@@ _handleEventInfo res "),this.setEventState(r.PRIZE_STATE.COMING_SOON)},e.prototype.isReceivedEventsInfo=function(){return this._isReceivedEventList},e.prototype.setEventState=function(e){console.log("@@@@@ setEventState ",e),this._eventState=e},e.prototype.getEventState=function(){return console.log("@@@@@ getEventState ",this._eventState),this._eventState},e._instance=new e,e}();o.default=i,cc._RF.pop()},{"../../../SDK/Nano/NanoSrv":"NanoSrv","./RealPrizeDefines":"RealPrizeDefines"}],NgcRedirectionDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c7677p77IVG+5C1+QmpOQsE","NgcRedirectionDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../GameFramework/Scripts/BuildConfig"),c=e("../../../GameFramework/Scripts/CountryFlagsManager"),s=e("../../../SDK/Nano/NanoSrv"),l=e("../../../Services/Platform/Platform"),u=e("../../Dialogs/Script/DialogBase"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackingParams={type:s.TrackType.Vignette_interaction,interaction_type:"",gameId:a.NgcBuildConfig.platformGameID,platform:a.NgcBuildConfig.buildPlatform,page_url:encodeURIComponent(window.location!=window.parent.location?document.referrer:document.location.href),country:c.NgcCountryFlagsManager.localCountry},t.qrCodeGroup=null,t.appStoreNode=null,t.ggpNode=null,t.qrSprite=null,t.closeBtnNode=null,t._dialogOriginalSize=null,t}return r(t,e),t.prototype.start=function(){cc.sys.isMobile?window.addEventListener("resize",this.updateDialogPosition.bind(this)):cc.view.on("canvas-resize",this.updateDialogPosition.bind(this),this)},t.prototype.init=function(e){if(void 0===e&&(e={}),this.node.setScale(.8),this._redirectInfo=e,this.qrCodeGroup.active=!!e.qr_code,this.closeBtnNode.active=!!e.close_button,this.ggpNode.active=!!e.ggp_button,this.appStoreNode.active=!!e.appstore_button,e.qr_code){this._QRCodeShortenLink=e.qr_code_url;var t=this;l.NgcPlatform.inst.genQRCode(this._QRCodeShortenLink,function(e){t.createQRCode(e)})}this.show(),this.updateDialogPosition()},t.prototype.updateDialogPosition=function(){var e=this.node.getComponent(cc.Widget);e.target=cc.find("Canvas"),e.top=a.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height,e.updateAlignment()},t.prototype.createQRCode=function(e){this.qrSprite.spriteFrame=e,console.log("@@@@ createQRCode ",e)},t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.closeOnClick=function(){this.hide()},t.prototype.onGGPBtnClick=function(){this._redirectInfo.ggp_page&&(this.trackingParams.interaction_type="click_GGP",s.default.inst.sendTracking(this.trackingParams),cc.sys.openURL(this._redirectInfo.ggp_page))},t.prototype.onAppStorePBtnClick=function(){this._redirectInfo.appstore_page&&(this.trackingParams.interaction_type="click_AppStore",s.default.inst.sendTracking(this.trackingParams),cc.sys.openURL(this._redirectInfo.appstore_page))},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcRedirectionDialog",t.urlPrefab="NgcRedirectionDialog",t.bundleName="02_techmessage_dialog",i([f(cc.Node)],t.prototype,"qrCodeGroup",void 0),i([f(cc.Node)],t.prototype,"appStoreNode",void 0),i([f(cc.Node)],t.prototype,"ggpNode",void 0),i([f(cc.Sprite)],t.prototype,"qrSprite",void 0),i([f(cc.Node)],t.prototype,"closeBtnNode",void 0),i([d],t)}(u.NgcDialogBase);o.default=h,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../../Dialogs/Script/DialogBase":"DialogBase"}],NgcRedirection:[function(t,o,n){"use strict";cc._RF.push(o,"b99a3YDegxGToTxrbteKgbD","NgcRedirection");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.RedirectionType=void 0;var l,u=t("../../../Core/Utils"),p=t("../../../GameFramework/Scripts/BuildConfig"),d=t("../../../GameFramework/Scripts/CountryFlagsManager"),f=t("../../../GameFramework/Scripts/NgcUserInfo"),h=t("../../../SDK/Nano/NanoSrv"),g=t("../../../Services/Platform/Platform"),y=t("../../Dialogs/Script/NgcDialogManager"),m=t("../../GIF/CCGIF"),_=t("./NgcRedirectionDialog"),v=cc._decorator,S=v.ccclass,N=v.property;(function(e){e.Deactive="deactivated",e.Redirection_Popup="redirection_popup",e.Direct_Access="direct_access"})(l=n.RedirectionType||(n.RedirectionType={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gifSp=null,t.response={main_menu_vignette:{desktop:{},mobile_browser:{},mobile_app:{},mobile_webview:{}},general:{ggp_page:"",appstore_page:"",vignette_thumbnail:"",qr_link:""}},t._redirectionType=l.Deactive,t}return i(t,e),t.prototype.onLoad=function(){var e=this;cc.sys.isMobile||(this.node.getComponent(cc.Widget).right=.03),this.node.opacity=0,this.node.getComponent(cc.Button).interactable=!1,g.NgcPlatform.isOfflineMode()?this.node.active=!1:h.default.inst.serviceGet("/redirections",null,function(t,o){if(t)e.node.active=!1;else{var n=JSON.parse(o);if(n.status){if(e.parseConfig(n.data||{}),!e.isSupportVignette())return void(e.node.active=!1);"/"===e.response.general.qr_link.charAt(e.response.general.qr_link.length-1)&&(e.response.general.qr_link=e.response.general.qr_link.slice(0,e.response.general.qr_link.length-1)),console.log("@@@@Redirection Response ",e.response);var r=n.data.general.vignette_thumbnail;e.node.addComponent(m.default).loadUrl(e.gifSp,r,function(){cc.tween(e.node).delay(1).to(.75,{opacity:255},{easing:"backOut"}).call(function(){e.node.getComponent(cc.Button).interactable=!0}).start()})}}})},t.prototype.parseConfig=function(e){this.response=e,g.NgcPlatform.isRunFromApp()?this.vignetteConfig=this.response&&this.response.main_menu_vignette&&this.response.main_menu_vignette.mobile_app||{}:cc.sys.isMobile?u.Utils.isRunningWithFacebookApp&&(this.vignetteConfig=this.response&&this.response.main_menu_vignette&&this.response.main_menu_vignette.mobile_browser||{}):this.vignetteConfig=this.response&&this.response.main_menu_vignette&&this.response.main_menu_vignette.desktop||{},this._redirectionType=this.vignetteConfig&&this.vignetteConfig.redirection||l.Deactive},t.prototype.isSupportVignette=function(){return this._redirectionType!==l.Deactive},t.prototype.onClickInstallBtn=function(){var e={type:h.TrackType.Install_app_click};if(h.default.inst.sendTracking(e),cc.sys.isMobile){var t=u.Utils.getOSType()===u.OS_TYPE.ANDROID?this.response.general.ggp_page:this.response.general.appstore_page;cc.sys.openURL(t)}else{var o=p.NgcBuildConfig.buildPlatform,n=p.NgcBuildConfig.platformGameID,r=window.location!=window.parent.location?document.referrer:document.location.href,i="?type="+h.TrackType.Vignette_interaction+"&interaction_type=qr&playerId="+f.default.userIdKey+"&gameId="+n+"&platform="+o+"&page_url="+encodeURIComponent(r)+"&country="+d.NgcCountryFlagsManager.localCountry,a=this.response.main_menu_vignette.desktop.redirection_popup||{},l={ggp_button:a.ggp_button,appstore_button:a.appstore_button,install_app:a.install_app,add_to_home_screen:a.add_to_home_screen,continue_to_browser:a.continue_to_browser,qr_code:a.qr_code,close_button:a.close_button,appstore_page:this.response.general.appstore_page,ggp_page:this.response.general.ggp_page,qr_code_url:""+h.default.inst.serviceURL+this.response.general.qr_link+i};c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,y.NgcDialogManager.createDialog(_.default.dialogType,_.default.urlPrefab,_.default.bundleName)];case 1:return e.sent().getComponent(_.default).init(l),[2]}})})}},t.prototype.start=function(){},a([N(cc.Sprite)],t.prototype,"gifSp",void 0),a([S],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../GIF/CCGIF":"CCGIF","./NgcRedirectionDialog":"NgcRedirectionDialog"}],NgcRevive:[function(t,o,n){"use strict";cc._RF.push(o,"76644hQL+xH66s6O+MhbYN/","NgcRevive");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.REVIVE_NO_ADS_CURRENCY_NUMBER=n.REVIVE_NO_ADS_CURRENCY=n.NgcReviveData=n.REVIVE_ACTION=void 0;var l,u=t("../../../../../globals"),p=t("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),d=t("../../../../GameFramework/Scripts/BuildConfig"),f=t("../../../../SDK/Nano/NanoSrv"),h=t("../../../../Services/Ads/Ads"),g=t("../../../Dialogs/Script/NgcDialogManager"),y=t("./ReviveDialog"),m=cc._decorator,_=m.ccclass,v=m.property;(function(e){e[e.NONE=-1]="NONE",e[e.NON_OFFER=0]="NON_OFFER",e[e.WATCHED=1]="WATCHED",e[e.REFUSE_OFFER=2]="REFUSE_OFFER"})(l=n.REVIVE_ACTION||(n.REVIVE_ACTION={}));n.NgcReviveData=function(){},n.REVIVE_NO_ADS_CURRENCY="coin",n.REVIVE_NO_ADS_CURRENCY_NUMBER=100;var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customRevivePrefab=null,t.reviveAdsStatus=null,t._canReviveFunc=null,t._acceptOfferFunc=null,t._refuseOfferFunc=null,t._offerCountDown=5,t._reviveDialogShowing=!1,t._offerAccepted=!1,t._reviveAction=l.NON_OFFER,t._reviveData=null,t._freeOfferStatus=!0,t.tookFreeOffered=!1,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"offerCountDown",{get:function(){return this._offerCountDown},enumerable:!1,configurable:!0}),t.prototype.setReviveAction=function(e){this._reviveAction=e},t.prototype.getReviveAction=function(){return this._reviveAction},t.prototype.getReviveData=function(){var e=f.default.inst&&f.default.inst.getCurGameInfo()&&f.default.inst.getCurGameInfo().gameParams||{};return this._reviveData=e&&e.revive||{},this._reviveData},t.prototype.onLoad=function(){o.inst?console.log("Duplicate NgcRevive Inst"):o.inst=this},t.prototype.isFreeOfferAvailable=function(){return this._freeOfferStatus},t.prototype.start=function(){},t.prototype.notUsingAdToRevive=function(){return!(!h.NgcAds.inst.isFakeAdsPlatform()&&!d.NgcBuildConfig.offlineMode)},t.prototype.getFreeOfferStatus=function(e){var t=this;if(void 0===e&&(e=null),d.NgcBuildConfig.alwaysOfferFreeRevive)e&&e(!0);else{if(d.NgcBuildConfig.offlineMode)return this._freeOfferStatus=u.default.OfflineMode.GetFreeOffer(),void(e&&e(u.default.OfflineMode.GetFreeOffer()));f.default.inst.serviceGet("/playerdata",null,function(o,n){o||(t._freeOfferStatus=JSON.parse(n).data._reviveFreeOfferStatus,null==t._freeOfferStatus&&(t._freeOfferStatus=!0),e&&e(t._freeOfferStatus))})}},t.prototype.tookFreeOffer=function(e){var t=this;if(void 0===e&&(e=null),d.NgcBuildConfig.alwaysOfferFreeRevive)e&&e();else{if(d.NgcBuildConfig.offlineMode)return u.default.OfflineMode.SetFreeOffer(!1),this.tookFreeOffered=!0,this._freeOfferStatus=!1,void(e&&e());f.default.inst.servicePost("/playerdata",JSON.stringify({_reviveFreeOfferStatus:!1}),function(o,n){o||(t._freeOfferStatus=!1,t.tookFreeOffered=!0,e&&e(n))})}},t.prototype.setReviveFunctions=function(e,t,o){this._canReviveFunc=e,this._acceptOfferFunc=t,this._refuseOfferFunc=o},t.prototype.useDefaultReviveCondition=function(){return!0},t.prototype.canRevive=function(e,t){var n=p.default.inst&&p.default.inst.isAdsPoincutAvailable(p.NgcPointcuts.videoReviveDialog,h.AdsType.VideoReward);if((d.NgcBuildConfig.offlineMode||h.NgcAds.inst.isFakeAdsPlatform()||n)&&!o.inst.isOfferAccepted()){if(this.useDefaultReviveCondition()){var r=this.getReviveData();return e<=r.maxRemainingPlayers&&e>=r.minRemainingPlayers&&t>=r.minScore}return this._canReviveFunc&&this._canReviveFunc()}return!1},t.prototype.acceptOffer=function(){this._offerAccepted=!0,this._reviveDialogShowing=!1,this._acceptOfferFunc&&this._acceptOfferFunc(),this.setReviveAction(l.WATCHED),this.isFreeOfferAvailable()&&o.inst.tookFreeOffer()},t.prototype.refuseOffer=function(){this.setReviveAction(l.REFUSE_OFFER),this._reviveDialogShowing=!1,this._refuseOfferFunc&&this._refuseOfferFunc()},t.prototype.showReviveDialog=function(){return c(this,void 0,void 0,function(){var e,t=this;return s(this,function(){return this._reviveDialogShowing=!0,e=function(){return c(t,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return this.customRevivePrefab?(e=cc.instantiate(this.customRevivePrefab),t=cc.find("Canvas"),e.parent=t,[3,3]):[3,1];case 1:return[4,g.NgcDialogManager.createDialog(y.default.dialogType,y.default.urlPrefab,y.default.bundleName)];case 2:e=n.sent(),n.label=3;case 3:return o=e.getComponent(y.default),this._offerCountDown=this.getReviveData().offerCountDown,o.init(this.acceptOffer.bind(this),this.refuseOffer.bind(this),this._offerCountDown),this._reviveDialogShowing=!0,[2]}})})},this._offerAccepted||this.getFreeOfferStatus(e),[2]})})},t.prototype.isReviveDialogShowing=function(){return this._reviveDialogShowing},t.prototype.isOfferAccepted=function(){return this._offerAccepted},t.prototype.reset=function(){this._reviveDialogShowing=!1,this._offerAccepted=!1,this._reviveAction=l.NON_OFFER},t.inst=null,a([v(cc.Prefab)],t.prototype,"customRevivePrefab",void 0),o=a([_],t)}(cc.Component);n.default=S,cc._RF.pop()},{"../../../../../globals":"globals","../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../SDK/Nano/NanoSrv":"NanoSrv","../../../../Services/Ads/Ads":"Ads","../../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./ReviveDialog":"ReviveDialog"}],NgcSceneManager:[function(e,t,o){"use strict";cc._RF.push(t,"701c7suFclL8LCKjWtaWVMh","NgcSceneManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSceneManager=void 0;var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("More than one scene manager!"):o.inst=this},t.prototype.depopulate=function(){},t.prototype.populate=function(){},t.prototype.findPlayerByNetID=function(e){return this._findPlayerByNetID(e)},t.prototype.findPlayerLead=function(){return this._findPlayerLead()},t.inst=null,o=i([c],t)}(cc.Component));o.NgcSceneManager=s,cc._RF.pop()},{}],NgcScreenBase:[function(e,t,o){"use strict";cc._RF.push(t,"8f06fH1qeVKHIcy0IL29h/h","NgcScreenBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.screenIndex=0,t.poolID=0,t.rescaleNodes=[],t.backgroundWidget=null,t.lastScreenID=-1,t.currentScale=1,t.topBarHeight=0,t}return r(t,e),t.prototype.onActivate=function(){},t.prototype.onDeactivate=function(){this.backgroundWidget.target=null},t.prototype.reScale=function(){var e=this,t=Math.min(1,cc.winSize.width/cc.winSize.height*cc.view.getDesignResolutionSize().height/cc.view.getDesignResolutionSize().width);this.rescaleNodes.forEach(function(o){o&&(o.scale*=t/e.currentScale)}),this.currentScale=t},t.prototype.init=function(){},t.prototype.onPause=function(){},t.prototype.onResume=function(){},t.prototype.onTapDown=function(){},t.prototype.onTapUp=function(){},t.prototype.onKeyDown=function(){},t.prototype.onKeyUp=function(){},t.prototype.activate=function(e,t){void 0===t&&(t=null),this.node.active=e,e?(this.onActivate(),this.setTargetForBackgroundWidget(t),this.reScale()):this.onDeactivate()},t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.setTargetForBackgroundWidget=function(e){this.backgroundWidget&&(this.backgroundWidget.target=e,this.backgroundWidget.isAlignLeft=!0,this.backgroundWidget.isAlignRight=!0,this.backgroundWidget.left=0,this.backgroundWidget.right=0,this.backgroundWidget.top=-this.topBarHeight,this.backgroundWidget.updateAlignment())},i([s],t.prototype,"screenIndex",void 0),i([s],t.prototype,"poolID",void 0),i([s([cc.Node])],t.prototype,"rescaleNodes",void 0),i([s(cc.Widget)],t.prototype,"backgroundWidget",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],NgcScreenManager:[function(t,o,n){"use strict";cc._RF.push(o,"91c7cuwTHxAL5H0rx4XEo0j","NgcScreenManager");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.TransitionType=void 0;var c,s=t("../../Core/Utils"),l=t("../../CrossFeatures/Dialogs/Script/DialogBase"),u=t("../../Services/Ads/Ads"),p=t("../Scripts/Ads/NgcAdsManager"),d=t("../Scripts/BuildConfig"),f=t("../Scripts/NgcScreenBase"),h=cc._decorator,g=h.ccclass,y=h.property;(function(e){e[e.Slide=0]="Slide",e[e.Immediately=1]="Immediately",e[e.FadeIn=2]="FadeIn"})(c=n.TransitionType||(n.TransitionType={}));var m=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.MainScreenWidget=null,e.TopBannerWidget=null,e.TabBarWidget=null,e.NavBarWidget=null,e.SystemNoticeWidget=null,e.loadingNode=null,e.curScreenContainer=null,e.nextScreenContainer=null,e.navBarIconNode=null,e.transitionNode=null,e.canvas=null,e.screenIDs=cc.Enum({}),e.screenPrefabs=[],e.screenPools=[],e.menuPageview=null,e.gameplayContainer=null,e._isSwitching=!1,e._topBannerIsActive=!1,e._tabBarIsActive=!1,e._disableAlignment=!1,e.currentScreen=null,e.blockInputComp=null,e._tabBarInitState=!1,e._menuNodePool={},e.needLoadPointcutData=!1,e.allowPoincuts=[],e._disablePageEvent=!1,e._pageTurningCallback=null,e._disableTabSwipe=!1,e.lastPageIndex=-1,e._bannerActiveBefore=!1,e._pageViewScrolling=!1,e._tabBar=null,e._scrollToPageDisabled=!1,e}var n;return i(o,t),n=o,Object.defineProperty(o.prototype,"isSwitching",{get:function(){return this._isSwitching},set:function(e){this._isSwitching=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"topBannerIsActive",{get:function(){return this._topBannerIsActive},set:function(e){this._topBannerIsActive=e,this.TopBannerWidget.node.active=e,this.resizeBannerContainer(),this.updateAlignment()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"tabBarIsActive",{get:function(){return this._tabBarIsActive},set:function(e){this._tabBarIsActive!==e&&(this._disableAlignment||(this._tabBarIsActive=e,this.TabBarWidget.node.active=e,this.updateAlignment()))},enumerable:!1,configurable:!0}),o.prototype.onLoad=function(){n.inst?console.error("More than one NgcScreenManager instance"):(n.inst=this,cc.view.on("canvas-resize",this.updateAlignmentOnResize.bind(this),this),this.createBlockInputLayer(),cc.sys.isNative&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this))},o.prototype.onKeyDown=function(e){cc.log("[NGCscreenmanager]onkeydown ",e.keyCode),(e.keyCode==cc.macro.KEY.back||cc.macro.KEY.backspace)&&l.NgcDialogBase.hasDialogShowing||this.currentScreen&&this.currentScreen.onKeyDown(e)},o.prototype.createBlockInputLayer=function(){this.blockInputComp=this.transitionNode.addComponent(cc.BlockInputEvents),this.blockInputComp.enabled=!1},o.prototype.setTouchStatus=function(e){this.blockInputComp.enabled=!e},o.prototype.currentTouchStatus=function(){return this.blockInputComp.enabled},Object.defineProperty(o.prototype,"tabBarInitState",{get:function(){return this._tabBarInitState},enumerable:!1,configurable:!0}),o.prototype.init=function(e,t){for(var o in void 0===e&&(e=!1),void 0===t&&(t=!1),this.screenPrefabs)this.screenPools.push(new cc.NodePool);this.topBannerIsActive=e,this.tabBarIsActive=t,this._tabBarInitState=t,this.updateAlignment(),this.initPageViewScreens()},o.prototype.onBeforeInitPageview=function(){},o.prototype.pageOrder=function(){return null},o.prototype.defaultPageOrder=function(){return null},o.prototype.gamePlayScreens=function(){return null},o.prototype.screenPointcuts=function(){return[p.NgcPointcuts.bannerShop,p.NgcPointcuts.bannerLeaderboard,p.NgcPointcuts.bannerMainMenu,p.NgcPointcuts.bannerPartyRoom,p.NgcPointcuts.bannerRealPrize]},o.prototype.initPageViewScreens=function(){var t=this;this.onBeforeInitPageview();try{this.allowPoincuts=p.default.inst.getAllowedPointcut()||[]}catch(e){this.allowPoincuts=[],this.needLoadPointcutData=!0,console.warn("Cant load pointcut data here.")}this.topBannerIsActive=!1,this.TopBannerWidget.node.opacity=0,this.menuPageview.node.on("page-turning",this.onPageTurning,this),this.menuPageview.node.on("scroll-began",this.onPageScrollingBegin,this),this.menuPageview.node.on("scroll-ended",this.onPageScrollEnd,this);var o=this.menuPageview.content,n=this.MainScreenWidget;n.top=0,n.bottom=this.TabBarWidget.node.height,n.updateAlignment();var r=new cc.Node("TemporaryNode");r.addComponent(cc.BlockInputEvents),this.menuPageview.node.parent.addChild(r,-1,"Temporary node"),r.opacity=0,this.defaultPageOrder().forEach(function(e){var o=t.getScreen(e);o.node.parent=r,t._menuNodePool[o.poolID]=o.node});for(var i=this.pageOrder().length,a=0;a<5-i;a++){var c=this.menuPageview.content.children[0];this.menuPageview.content.removeChild(c,!0)}this.pageOrder().forEach(function(r,i){var a,c=t.getScreen(r);t._menuNodePool[c.poolID]=c.node,c.node.screenIndex=i;var s=o.children[i];s.width=n.node.width,s.height=n.node.height;var l=s.getComponent(cc.Widget),u=t.screenPointcuts()[i];-1!==(null===(a=t.allowPoincuts)||void 0===a?void 0:a.indexOf(u))&&(l.top=t.getTopBarHeight(),l.updateAlignment()),c.node.parent=s,c.node.getComponent(cc.Widget).updateAlignment(),c.pageNode=s,c.needActivate=!0,c.topBarHeight=t.getTopBarHeight();try{c.backgroundWidget.top=-c.topBarHeight,c.backgroundWidget.updateAlignment()}catch(e){console.warn(e)}c.reScale(),s.opacity=0}),this.menuPageview.content.getComponent(cc.Layout).updateLayout(),this.MainScreenWidget.enabled=!1,this.onAfterInitPageview()},o.prototype.updateAlignmentOnResize=function(){this.updateAlignment(),this.resizePageView(),this.checkResizeNavBarWidget(this.currentScreen,!1)},o.prototype.resizePageView=function(){var e=this.MainScreenWidget;for(var t in e.updateAlignment(),this.menuPageview.getComponent(cc.Widget).updateAlignment(),this._menuNodePool){var o=this._menuNodePool[t],n=o.parent;n.width=e.node.width,n.height=e.node.height;var r=n.getComponent(cc.Widget),i=o.screenIndex,a=this.screenPointcuts()[i];-1!==this.allowPoincuts.indexOf(a)&&(r.top=this.getTopBarHeight(),r.updateAlignment()),o.parent=n,o.getComponent(cc.Widget).updateAlignment();var c=o.getComponent(f.default);c.topBarHeight=this.getTopBarHeight(),c.setTargetForBackgroundWidget(n),c.reScale()}this.menuPageview.content.getComponent(cc.Layout).updateLayout(),this.menuPageview.scrollToPage(this.menuPageview.getCurrentPageIndex(),.01),this._tabBar.updateTabButtons(!1)},o.prototype.disablePageviewSwipe=function(){this.menuPageview.enabled=!1},o.prototype.enablePageviewSwipe=function(){this.menuPageview.enabled=!0},o.prototype.onAfterInitPageview=function(){},o.prototype.canSwitchToOtherScreen=function(){return!this.menuPageview.isAutoScrolling()},o.prototype.getScreenByPageId=function(e){var t=this.menuPageview.content.children[e];return t.children[0]?t.children[0].getComponent(f.default):null},o.prototype.hideAllScreens=function(e){if(!this._pageViewScrolling){var t=this.menuPageview.content;e.opacity=255,t.children.forEach(function(t){e!==t&&(t.opacity=0)})}},o.prototype.showAllScreens=function(){this.menuPageview.content.children.forEach(function(e){e.opacity=255})},o.prototype.clearPageTurningCallback=function(){this._pageTurningCallback&&(this.unschedule(this._pageTurningCallback),this._pageTurningCallback=null)},o.prototype.onPageTurning=function(e,t){var o=this;void 0===t&&(t=!0),e||(e=this.menuPageview),this.clearPageTurningCallback();var n=this.getScreenByPageId(e.getCurrentPageIndex());n&&(this._scrollToPageDisabled=!0,t&&!this._disableTabSwipe&&(this._tabBar.forceSwitchTab(),this._tabBar.selectTabByIndex(e.getCurrentPageIndex())),this._disableTabSwipe=!1,this._pageTurningCallback=function(){o.hideAllScreens(n.node.parent),o._scrollToPageDisabled=!1},this._tabBar.node.opacity=255,this.scheduleOnce(this._pageTurningCallback,.5),this._pageViewScrolling=!1)},o.prototype.onPageScrollingBegin=function(e){var t;if(this._pageViewScrolling)return this.showAllScreens(),this._tabBar.forceSwitchTab(),void this._tabBar.selectTabByIndex(e.getCurrentPageIndex());e||(e=this.menuPageview),this.lastPageIndex=this.menuPageview.getCurrentPageIndex(),this.clearPageTurningCallback(),null===(t=this._tabBar)||void 0===t||t.clearAfterSwitchCallback();var o=this.menuPageview.content,n=e.getCurrentPageIndex(),r=(o.children[n],o.children[n-1]),i=o.children[n+1];r&&(r.opacity=255),i&&(i.opacity=255),this._pageViewScrolling=!0},o.prototype.onPageScrollEnd=function(e){this.lastPageIndex===e.getCurrentPageIndex()&&this.hideAllScreens(this.currentScreen.node.parent)},o.prototype.getPageIndexByScreenID=function(e){return this.pageOrder().indexOf(e)},o.prototype.getTopBarHeight=function(){return d.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height},o.prototype.resizeBannerContainer=function(){if(this.topBannerIsActive){var e=d.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height;this.TopBannerWidget.node.height!=e&&(this.TopBannerWidget.node.height=e,this.updateAlignment())}},o.prototype.getScreen=function(e){if(this._menuNodePool[e])return this._menuNodePool[e].getComponent(f.default);var t=this.screenPools[e].get();return t||(t=cc.instantiate(this.screenPrefabs[e])),t.getComponent(f.default).poolID=e,t.getComponent(f.default)},o.prototype.setTabBar=function(e){this._tabBar=e},o.prototype.takeScreenshot=function(e){var t=new cc.Node("Screenshot"),o=t.addComponent(cc.Sprite),n=s.Utils.getScreenshotTexture(e),r=new cc.SpriteFrame(n);return o.spriteFrame=r,t.scaleY=-1,t},o.prototype.isNonPageviewScreen=function(e){return-1===this.pageOrder().indexOf(e)},o.prototype.switchScreen=function(e,t,o){var n,r=this;void 0===t&&(t=c.FadeIn);var i=this.getScreen(e),a=this.currentScreen;if(p.default.inst?p.default.inst.hide():this.hideBanner(),this.isSwitching=!0,i.lastScreenID=a?a.poolID:-1,this.isNonPageviewScreen(e))a&&this.isNonPageviewScreen(a.poolID)?(a.activate(!1),i.node.parent=this.gameplayContainer,i.node.opacity=0,cc.tween(a.node).to(.25,{opacity:0}).call(function(){r.screenPools[a.poolID].put(a.node),cc.tween(i.node).to(.25,{opacity:255}).call(function(){i.activate(!0,r.canvas.node),r.isSwitching=!1,o&&o()}).start()}).start()):(this.gameplayContainer.active=!0,i.node.parent=this.gameplayContainer,i.node.opacity=0,cc.tween(this._tabBar.node).to(.25,{opacity:0}).start(),cc.tween(this.menuPageview.node).to(.25,{opacity:0}).call(function(){r.menuPageview.node.active=!1,a&&a.onPause(),cc.tween(i.node).to(.25,{opacity:255}).call(function(){i.activate(!0,r.canvas.node),r.isSwitching=!1,o&&o()}).start()}).start());else if(a&&this.isNonPageviewScreen(a.poolID))a.activate(!1),cc.tween(a.node).to(.25,{opacity:0}).call(function(){var t;r.screenPools[a.poolID].put(a.node),r.gameplayContainer.active=!1,r.menuPageview.node.active=!0,i.needActivate?(i.activate(!0,i.pageNode),i.needActivate=!1):i.onResume(),null===(t=r._tabBar)||void 0===t||t.updateTabPlacementByScreenID(e,!1),r.menuPageview.node.opacity=0,cc.tween(r._tabBar.node).to(.25,{opacity:255}).start(),cc.tween(r.menuPageview.node).to(.25,{opacity:255}).call(function(){r.isSwitching=!1,o&&o(),r.menuPageview.scrollToPage(r.getPageIndexByScreenID(e),.1)}).start()}).start();else{cc.tween(this._tabBar.node).to(.25,{opacity:255}).start(),i.node.parent.opacity=255,null==a||a.onPause();var s=c.Immediately?0:.5;this._tabBar&&(s=this._tabBar.tweenDuration+.15),null===(n=this._tabBar)||void 0===n||n.updateTabPlacementByScreenID(e,!0),this._scrollToPageDisabled?s=.15:this.menuPageview.scrollToPage(this.getPageIndexByScreenID(e),s),this._scrollToPageDisabled=!1,this.scheduleOnce(function(){r.isSwitching=!1,i.needActivate?(i.activate(!0,i.pageNode),i.needActivate=!1):i.onResume(),o&&o()},s)}this.checkResizeNavBarWidget(i),this.currentScreen=i},o.prototype.checkResizeNavBarWidget=function(e,t){var o;if(void 0===t&&(t=!1),e&&e.node&&e.node.screenIndex){var n=e.node.screenIndex;if(t){var r=this.screenPointcuts()[n];-1!==(null===(o=this.allowPoincuts)||void 0===o?void 0:o.indexOf(r))?this.NavBarWidget.top=this.getTopBarHeight():this.NavBarWidget.top=0}else this.NavBarWidget.top=u.NgcAds.inst.isBannerShowing?this.getTopBarHeight():0;this.NavBarWidget.bottom=this.MainScreenWidget.bottom,this.NavBarWidget.node.getComponentsInChildren(cc.Widget).forEach(function(e){e.enabled&&e.updateAlignment()})}},o.prototype.updateAlignment=function(){this.MainScreenWidget.top=0,this.MainScreenWidget.bottom=this.tabBarIsActive?this.TabBarWidget.node.height:0,this.MainScreenWidget.node.getComponentsInChildren(cc.Widget).forEach(function(e){e.enabled&&e.updateAlignment()}),this.NavBarWidget.top=this.MainScreenWidget.top,this.NavBarWidget.bottom=this.MainScreenWidget.bottom,this.curScreenContainer.width=this.nextScreenContainer.width=this.MainScreenWidget.node.width,this.curScreenContainer.height=this.nextScreenContainer.height=this.MainScreenWidget.node.height},o.prototype.showTabBar=function(){this.tabBarIsActive=!0},o.prototype.hideTabBar=function(){this.tabBarIsActive=!1},o.prototype.showBanner=function(){this.topBannerIsActive=!0},o.prototype.hideBanner=function(){this.topBannerIsActive=!1},o.prototype.startFadeOut=function(e,t){void 0===e&&(e=.5),cc.tween(this.MainScreenWidget.node).to(e,{opacity:0}).call(function(){t&&t()}).start()},o.prototype.startFadeIn=function(e,t){void 0===e&&(e=.5),cc.tween(this.MainScreenWidget.node).to(e,{opacity:255}).call(function(){t&&t()}).start()},o.prototype.update=function(){this.resizeBannerContainer(),this.updateLoadBannerPointcuts()},o.prototype.updateLoadBannerPointcuts=function(){if(this.needLoadPointcutData){try{this.allowPoincuts=p.default.inst.getAllowedPointcut()||[]}catch(e){console.warn("Fail to load pointcut data.",e)}this.allowPoincuts&&0!==this.allowPoincuts.length&&(this.updateAlignmentOnResize(),this.needLoadPointcutData=!1)}},o.inst=null,a([y(cc.Widget)],o.prototype,"MainScreenWidget",void 0),a([y(cc.Widget)],o.prototype,"TopBannerWidget",void 0),a([y(cc.Widget)],o.prototype,"TabBarWidget",void 0),a([y(cc.Widget)],o.prototype,"NavBarWidget",void 0),a([y(cc.Widget)],o.prototype,"SystemNoticeWidget",void 0),a([y(cc.Node)],o.prototype,"loadingNode",void 0),a([y(cc.Node)],o.prototype,"curScreenContainer",void 0),a([y(cc.Node)],o.prototype,"nextScreenContainer",void 0),a([y(cc.Node)],o.prototype,"navBarIconNode",void 0),a([y(cc.Node)],o.prototype,"transitionNode",void 0),a([y(cc.Canvas)],o.prototype,"canvas",void 0),a([y(cc.Prefab)],o.prototype,"screenPrefabs",void 0),a([y(cc.PageView)],o.prototype,"menuPageview",void 0),a([y(cc.Node)],o.prototype,"gameplayContainer",void 0),n=a([g],o)}(cc.Component);n.default=m,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../Services/Ads/Ads":"Ads","../Scripts/Ads/NgcAdsManager":"NgcAdsManager","../Scripts/BuildConfig":"BuildConfig","../Scripts/NgcScreenBase":"NgcScreenBase"}],NgcShopManager:[function(e,t,o){"use strict";cc._RF.push(t,"f353c0Msm1KariDzKDPduO5","NgcShopManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcShopManager=o.NgcItemCategoryInfo=o.NgcItemTabInfo=o.NgcItemShopStructure=void 0;var n=e("../../Core/Delegate"),r=e("../../CrossFeatures/DeliveryReward/Script/DeliveryRewardAnimation"),i=e("../../CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),a=e("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),c=e("../../CrossFeatures/ItemShop/Script/NgcAchievementHelper"),s=e("../../CrossFeatures/TabBar/Script/TabBarManager"),l=e("../../Services/GameShop/GameShop"),u=e("../../Services/Inventory/Inventory"),p=e("../../Services/Telemetry/Telemetry"),d=e("./Ads/NgcAdsManager"),f=e("./NgcItemInfoManager");o.NgcItemShopStructure=function(){};var h=function(){};o.NgcItemTabInfo=h;var g=function(){};o.NgcItemCategoryInfo=g;var y=function(){function e(){this._itemShopStructure={tabs:[]},this._itemPreviewCallback=new n.default,this._itemEquipCallback=new n.default,this._currencyIDList=[],this._currencyUpdateCallback=new n.default,this._currencyList=[],this._hasBrandNewItem=!1,this._displayAnimItemQueue=[],this._counter={},this.buyingItem=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.resetItemClickCounter=function(){this._counter={}},e.prototype.increaseItemClickCounter=function(e){return this._counter[e]=this._counter[e]||0,this._counter[e]+=1,this._counter[e]},Object.defineProperty(e.prototype,"HasBrandNewItem",{get:function(){return this._hasBrandNewItem},enumerable:!1,configurable:!0}),e.prototype.loadData=function(e,t){var o=this,n=function(){o.generateItemShopStructure(),o.checkInit(),t&&t(),f.NgcItemInfoManager.getInstance().deleteFinishLoadingCallback(n)};f.NgcItemInfoManager.getInstance().isStartedLoading=!1,f.NgcItemInfoManager.getInstance().loadData(e),f.NgcItemInfoManager.getInstance().registerFinishLoadingCallback(n)},e.prototype.setUI=function(e){this._itemContainer=e,this.checkInit()},e.prototype.setNumberOfItemInRow=function(e){this._itemContainer.setNumberOfItemInRow(e)},e.prototype.registerCurrencyUpdate=function(e,t){this._currencyIDList=e,this._currencyUpdateCallback.add(t)},e.prototype.registerItemPreviewCallback=function(e){this._itemPreviewCallback.add(e)},e.prototype.registerItemEquipCallback=function(e){this._itemEquipCallback.add(e)},e.prototype.getCurrencyCountByID=function(e){return this._currencyList.find(function(t){return t.itemID===e}).count},Object.defineProperty(e.prototype,"IsInitialized",{get:function(){return this.IsGeneratedItemShopStructure&&null!=this._itemContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsGeneratedItemShopStructure",{get:function(){return this._itemShopStructure.tabs.length>0},enumerable:!1,configurable:!0}),e.prototype.checkInit=function(){this.IsInitialized&&(this._itemContainer.init(this._itemShopStructure),this.updateCurrency())},e.prototype.generateItemShopStructure=function(){var e=this;this._itemShopStructure={tabs:[]},f.NgcItemInfoManager.getInstance().ItemInfoList.forEach(function(t){return t.itemStatusType!=f.NgcItemStatusType.None&&e.addToItemStructure(t)}),this.setBundleAsTheFirstTab(),this.checkHasBrandNewItem()},e.prototype.addToItemStructure=function(e,t){var o=this.findTab(t||e.category,this._itemShopStructure.tabs),n=this.findCategory(e.subCategory,o.categories);0==n.items.includes(e)&&n.items.push(e),1==o.categories.length&&"UNNAME_CATEGORY"==o.categories[0].cateNameKey?o.categories[0].shouldDisplay=!1:o.categories.forEach(function(e){return e.shouldDisplay=!0})},e.prototype.findTab=function(e,t){var o=t.find(function(t){return t.tabNameKey===e});return o||((o=new h).tabNameKey=e,o.categories=[],t.push(o)),o},e.prototype.findCategory=function(e,t){var o=t.find(function(t){return t.cateNameKey===e});return o||((o=new g).cateNameKey=e,o.items=[],t.push(o)),o},e.prototype.setBundleAsTheFirstTab=function(){var e=this._itemShopStructure.tabs.findIndex(function(e){return"bundle"===e.tabNameKey});if(e>-1){var t=this._itemShopStructure.tabs.splice(e,1)[0];this._itemShopStructure.tabs.unshift(t)}},e.prototype.checkHasBrandNewItem=function(){this.checkTabHasBrandNewItem(),this.checkShopHasBrandNewItem()},e.prototype.checkTabHasBrandNewItem=function(){this._itemShopStructure.tabs.forEach(function(e){var t=!1;e.categories.forEach(function(e){return e.items.forEach(function(e){!e.isBundle&&e.isBrandNew&&(t=!0)})}),e.hasBrandNewItem=t})},e.prototype.checkShopHasBrandNewItem=function(){var e=this;this._hasBrandNewItem=!1,this._itemShopStructure.tabs.forEach(function(t){t.hasBrandNewItem&&(e._hasBrandNewItem=!0)}),s.NgcTabBarManager.inst.updateTabButtons(!1)},e.prototype.updateCurrency=function(e){var t=this;this._currencyList=[],this._currencyIDList.forEach(function(o){u.NgcInventory.inst.getItemCount(o,function(n,r){if(!n&&r){var i={itemID:o,count:r.count};t._currencyList.push(i),t._currencyList.length===t._currencyIDList.length&&(t._currencyUpdateCallback.call(t._currencyList),e&&e())}})})},e.prototype.includeItem=function(e){return f.NgcItemInfoManager.getInstance().includeSingleItem(e)},e.prototype.previewItem=function(e){this._itemPreviewCallback.call(e)},e.prototype.equipItem=function(e){f.NgcItemInfoManager.getInstance().updateEquippedItem(e),this._itemContainer.refresh(),this._itemEquipCallback.call(e)},e.prototype.updateBoughtItem=function(e){f.NgcItemInfoManager.getInstance().updateBoughtItem(e),f.NgcItemInfoManager.getInstance().updateBrandNewItem(e,!0),this.checkHasBrandNewItem(),this._itemContainer.refresh()},e.prototype.removeBrandItem=function(e){f.NgcItemInfoManager.getInstance().updateBrandNewItem(e,!1),this.checkHasBrandNewItem(),this._itemContainer.refresh()},e.prototype.unequipItem=function(e){f.NgcItemInfoManager.getInstance().updateUnequippedItem(e),this._itemContainer.refresh()},e.prototype.updateEquippedItemList=function(e){f.NgcItemInfoManager.getInstance().updateEquippedItemList(e),this._itemContainer.refresh()},e.prototype.achievementAddTo=function(e,t){c.NgcAchievementHelper.getInstance().addTo(e,t)},e.prototype.achievementAddMore=function(e,t){c.NgcAchievementHelper.getInstance().addMore(e,t)},e.prototype.checkRemoveEliminatedBundle=function(){f.NgcItemInfoManager.getInstance().isThereEliminatedBundle()&&(this.generateItemShopStructure(),this._itemContainer.updateItemStructure(this._itemShopStructure))},e.prototype.showItemBoughtAnim=function(e){var t=this,o=this._displayAnimItemQueue.shift();o&&(r.default.inst.showRewardAnimation(o,null,!1),setTimeout(function(){t._displayAnimItemQueue.length>0?t.showItemBoughtAnim(e):e&&e()},1200))},e.prototype.onItemBought=function(e){this.updateBoughtItem(e);var t=f.NgcItemInfoManager.getInstance().getSingleItemInfo(e),o=l.NgcGameShop.inst.getItems(t.bundleID);this._displayAnimItemQueue.push(o[0])},e.prototype.getTrackingModeOfPayment=function(e){switch(e){case f.NgcItemStatusType.IAP:return"IAP";case f.NgcItemStatusType.WatchAds:return"Ads";case f.NgcItemStatusType.Achievement:return"Achievement";case f.NgcItemStatusType.LikeSocial:return"Follow";case f.NgcItemStatusType.Currency:return"Currency";default:return"Others"}},e.prototype.onPlayerPurchaseItemTrackEvent=function(e,t){void 0===t&&(t=1);var o={itemPurchaseID:"",itemPurchaseValue:t,itemSpentID:e.price.currency,modeOfPayment:"",itemSpentValue:e.price.value};e instanceof f.NgcSingleItemInfo?o.itemPurchaseID=e.itemID:o.itemPurchaseID=e.bundleID,o.modeOfPayment=this.getTrackingModeOfPayment(e.itemStatusType),p.NgcTelemetry.inst.LogEvent_PurchaseItem(o)},e.prototype.onPlayerPurchaseCollectItemTrackEvent=function(e,t,o,n){void 0===n&&(n=1);var r={itemPurchaseID:e,itemPurchaseValue:n,modeOfPayment:"",bundleID:t};r.modeOfPayment=this.getTrackingModeOfPayment(o),p.NgcTelemetry.inst.LogEvent_CollectPurchaseItem(r)},e.prototype.buyItem=function(e){var t=this;this.buyingItem||(this.buyingItem=!0,l.NgcGameShop.inst.buyBundle(e.bundleID,function(o,n){!o&&n?u.NgcInventory.inst.forceFetchInventory().then(function(){t.onPlayerPurchaseItemTrackEvent(e);var o=null;if(e instanceof f.NgcSingleItemInfo){var n=e;t.onPlayerPurchaseCollectItemTrackEvent(n.itemID,"null",n.itemStatusType,1),t.onItemBought(n.itemID),o=n.itemID}else{var r=e;e.itemIDs.forEach(function(e){t.onPlayerPurchaseCollectItemTrackEvent(e,r.bundleID,r.itemStatusType,1),t.onItemBought(e)})}t.updateShop(),t.showItemBoughtAnim(function(){t.checkRemoveEliminatedBundle(),o&&t.equipItem(o),t.buyingItem=!1})}):t.buyingItem=!1}))},e.prototype.watchAds=function(e){var t=this,o=function(t,o){!t&&o&&u.NgcInventory.inst.getItemCount(e.price.currency,n)},n=function(o,n){!o&&n&&(n.count>=e.price.value?t.buyItem(e):(t.onPlayerPurchaseItemTrackEvent(e),t.updateShop()))};d.default.inst.showRewardVideo(d.NgcPointcuts.videoShopReward,e.price.currency,1,null,function(n){n?u.NgcInventory.inst.addItem(e.price.currency,1,o):a.NgcDialogManager.createDialog(i.NgcMessageDialog.dialogType,i.NgcMessageDialog.urlPrefab,i.NgcMessageDialog.bundleName).then(function(e){var o=e.getComponent(i.NgcMessageDialog);o.init("NGG_ADS_UNAVAILABLE");var n=t._itemContainer._interactionButton.node;o.show(null,n,null,null)})})},e.prototype.updateShop=function(){var e=this;this.updateCurrency(function(){e._itemContainer.refresh()})},e._instance=null,e}();o.NgcShopManager=y,cc._RF.pop()},{"../../Core/Delegate":"Delegate","../../CrossFeatures/DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../CrossFeatures/ItemShop/Script/NgcAchievementHelper":"NgcAchievementHelper","../../CrossFeatures/TabBar/Script/TabBarManager":"TabBarManager","../../Services/GameShop/GameShop":"GameShop","../../Services/Inventory/Inventory":"Inventory","../../Services/Telemetry/Telemetry":"Telemetry","./Ads/NgcAdsManager":"NgcAdsManager","./NgcItemInfoManager":"NgcItemInfoManager"}],NgcSoundManager:[function(e,t,o){"use strict";cc._RF.push(t,"edf08O5qdJBeoFGkiEn77Bl","NgcSoundManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSoundManager=void 0;var a=e("../../Core/Utils"),c=e("./NgcUserInfo"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startScreenMusicClip=null,t.AudioClips=cc.Enum({DeathByElectricClip:0,DeathByBulletClip:1,DrownCharClip:2,DrownObjectClip:3,EndScreenAppearClip:4,NumberCountClip:5,OpenShopClip:6,WardrobeSelectClip:7,WardrobeNegClip:8,UnlockItemClip:9,CharDeathClip:10,ThrustLoopClip:11,BurstClip:12,CollectCoinClip:13,CollectStarClip:14}),t.lastMusicClip=null,t.lastMusicLoop=!0,t.lastMusicVolume=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("Too many Sound Managers"):o.inst=this},t.prototype.isSoundPlaying=function(e){return cc.audioEngine.getState(e)==cc.audioEngine.AudioState.PLAYING},t.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},t.prototype.start=function(){},t.prototype._playSFX=function(e,t,o){var n=null;return c.default.soundOff||null==e||(n=cc.audioEngine.playEffect(e,o||!1),cc.audioEngine.setVolume(n,t)),n},t.prototype.playSound=function(e,t,o){(!t||t>1)&&(t=1),t<0&&(t=0);var n=this[a.Utils.enumToString(this.AudioClips,e)];return Array.isArray(this[a.Utils.enumToString(this.AudioClips,e)])&&(n=a.Utils.randomArr(this[a.Utils.enumToString(this.AudioClips,e)])),this._playSFX(n,t,o)},t.prototype.stopSound=function(e){cc.audioEngine.stopEffect(e)},t.prototype.setVolume=function(e,t){t<0&&(t=0),cc.audioEngine.setVolume(e,t)},t.prototype.playStartScreenMusic=function(){this.playMusic(this.startScreenMusicClip,!0)},t.prototype.playMusic=function(e,t,o){void 0===t&&(t=!0),void 0===o&&(o=1),this.stopMusic(),c.default.musicOff||(cc.audioEngine.playMusic(e,t),cc.audioEngine.setMusicVolume(o),this.lastMusicClip=e,this.lastMusicLoop=t,this.lastMusicVolume=o)},t.prototype.resumeLastPlayedMusic=function(){return!!this.lastMusicClip&&(this.playMusic(this.lastMusicClip,this.lastMusicLoop,this.lastMusicVolume),!0)},t.prototype.playSoundWithClip=function(e,t,o){return(!t||t>1)&&(t=1),t<0&&(t=0),this._playSFX(e,t,o)},t.inst=null,i([u({type:cc.AudioClip})],t.prototype,"startScreenMusicClip",void 0),o=i([l],t)}(cc.Component);o.NgcSoundManager=p,cc._RF.pop()},{"../../Core/Utils":"Utils","./NgcUserInfo":"NgcUserInfo"}],NgcTechMessageUpdateIOS:[function(e,t,o){"use strict";cc._RF.push(t,"a0bf5ZlLy5J5Zs6ByeIHdLu","NgcTechMessageUpdateIOS");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=(c.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportedBrowser=[],t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.urlPrefab="NgcTechMessageUpdateIOS",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageUpdateIOS",i([l(cc.Node)],t.prototype,"supportedBrowser",void 0),i([s],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],NgcTrackingManager:[function(e,t,o){"use strict";cc._RF.push(t,"41c9019Gh9FFqHRcdT5n9gO","NgcTrackingManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Services/Telemetry/Telemetry"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.log("Duplicate NgcTrackingManager"),o.inst=this},t.prototype.LogCustomEvent=function(e,t){a.NgcTelemetry.inst.LogCustomEvent(e,t)},t.inst=null,o=i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../Services/Telemetry/Telemetry":"Telemetry"}],NgcUserInfo:[function(t,o,n){"use strict";cc._RF.push(o,"5f8be7WVZZC9aUsTUD15Rz5","NgcUserInfo"),Object.defineProperty(n,"__esModule",{value:!0}),n.convertToBoolean=n.convertToNum=void 0;var r=t("uuidv4"),i=t("../../../globals"),a=t("../../Core/Utils"),c=t("../../SDK/Nano/NanoSrv"),s=t("../../Services/Platform/Platform"),l=t("./BuildConfig"),u=t("./Network/NetUtils"),p=t("./NgcLocalStorage");function d(t){try{var o=parseFloat(t);return"number"!=typeof o||isNaN(o)?0:o}catch(e){return 0}}function f(e){return"true"==e||1==e}n.convertToNum=d,n.convertToBoolean=f;var h=function(){function e(){this.LOCALIZATION_LANG={ARABIC:cc.sys.LANGUAGE_ARABIC,BULGARIAN:cc.sys.LANGUAGE_BULGARIAN,CHINESE:cc.sys.LANGUAGE_CHINESE,DUTCH:cc.sys.LANGUAGE_DUTCH,ENGLISH:cc.sys.LANGUAGE_ENGLISH,FRENCH:cc.sys.LANGUAGE_FRENCH,GERMAN:cc.sys.LANGUAGE_GERMAN,HUNGARIAN:cc.sys.LANGUAGE_HUNGARIAN,ITALIAN:cc.sys.LANGUAGE_ITALIAN,JAPANESE:cc.sys.LANGUAGE_JAPANESE,KOREAN:cc.sys.LANGUAGE_KOREAN,NORWEGIAN:cc.sys.LANGUAGE_NORWEGIAN,POLISH:cc.sys.LANGUAGE_POLISH,PORTUGUESE:cc.sys.LANGUAGE_PORTUGUESE,ROMANIAN:cc.sys.LANGUAGE_ROMANIAN,RUSSIAN:cc.sys.LANGUAGE_RUSSIAN,SPANISH:cc.sys.LANGUAGE_SPANISH,TURKISH:cc.sys.LANGUAGE_TURKISH,UKRAINIAN:cc.sys.LANGUAGE_UKRAINIAN,UNKNOWN:cc.sys.LANGUAGE_UNKNOWN,VIETNAM:"vn"}}return Object.defineProperty(e,"soundOff",{get:function(){return f(p.default.getKey(this.SOUND_OFF,this._soundOff))},set:function(e){p.default.setKey(this.SOUND_OFF,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"musicOff",{get:function(){return f(p.default.getKey(this.MUSIC_OFF,this._musicOff))},set:function(e){p.default.setKey(this.MUSIC_OFF,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"offlineDailyReward",{get:function(){return p.default.getKey(this.OFFLINE_DAILY_REWARD,null)},set:function(e){p.default.setKey(this.OFFLINE_DAILY_REWARD,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"offlineInventory",{get:function(){return p.default.getKey(this.OFFLINE_INVENTORY,null)},set:function(e){p.default.setKey(this.OFFLINE_INVENTORY,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"curLanguage",{get:function(){return this.lang_selected?p.default.getKey(this.CUR_LOCALIZATION_LANG,cc.sys.language):["zh-cn","zh-sg"].includes(cc.sys.languageCode)?"zh":["zh-tw","zh-mo","zh-hk"].includes(cc.sys.languageCode)?"cn":cc.sys.language},set:function(e){this.lang_selected=!0,p.default.setKey(this.CUR_LOCALIZATION_LANG,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"localUserName",{get:function(){return p.default.getKey(this.USER_NAME_LOCAL,this._localUserName)},set:function(e){p.default.setKey(this.USER_NAME_LOCAL,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"facebookId",{get:function(){return p.default.getKey(this.CUR_FACEBOOK_ID,this._facebookId,!1)},set:function(e){p.default.setKey(this.CUR_FACEBOOK_ID,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"avatarUrl",{get:function(){return p.default.getKey(this.CUR_AVATAR_URL,this._avatarUrl,!1)},set:function(e){p.default.setKey(this.CUR_AVATAR_URL,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"secretKey",{get:function(){if(null!=this._secretKey&&""!=this._secretKey)return this._secretKey;var e="";try{e=r.uuid()}catch(o){e=u.NgcNetUtils.generateRandomUUID()}var t=p.default.getKey(this.SECRET_KEY,e);return t===e&&(this.secretKey=e),t},set:function(e){p.default.setKey(this.SECRET_KEY,e),this._secretKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"userIdKey",{get:function(){if(null!=this._userIdKey&&""!=this._userIdKey)return this._userIdKey;var e="";try{e=r.uuid()}catch(o){e=u.NgcNetUtils.generateRandomUUID()}var t=p.default.getKey(this.USERID_KEY,e);return t===e?this.userIdKey=e:this._userIdKey=t,t},set:function(e){p.default.setKey(this.USERID_KEY,e),this._userIdKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"userAppId",{get:function(){return null!=this._userAppId&&""!=this._userAppId?this._userAppId:p.default.getKey(this.APP_USER_ID_KEY,this._userAppId)},set:function(e){p.default.setKey(this.APP_USER_ID_KEY,e),this._userAppId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"facebookAccessToken",{get:function(){return p.default.getKey(this.FACEBOOK_ACCESS_TOKEN,null,!1)},set:function(e){p.default.setKey(this.FACEBOOK_ACCESS_TOKEN,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameRunningSession",{get:function(){return p.default.getKey(this.GAME_RUNNING_SESSION,"")},set:function(e){p.default.setKey(this.GAME_RUNNING_SESSION,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalRoundCount",{get:function(){var e=this;if(l.NgcBuildConfig.offlineMode)return this._totalRoundCount=i.default.OfflineMode.GetTotalRoundCount();if(null==this._totalRoundCount){if(this.readTotalRoundCount)return this._totalRoundCount;this.readTotalRoundCount=!0,c.default.inst.serviceGet("/playerdata",null,function(t,o){t||(e._totalRoundCount=Number(JSON.parse(o).data._totalRoundCount)||0)})}return this._totalRoundCount},enumerable:!1,configurable:!0}),e.uploadTotalRoundCount=function(){if(l.NgcBuildConfig.offlineMode)i.default.OfflineMode.IncTotalRoundCount();else{var t={_totalRoundCount:(e._totalRoundCount||0)+1};e._totalRoundCount+=1,c.default.inst.servicePost("/playerdata",JSON.stringify(t),function(){})}},Object.defineProperty(e,"onboardingEventFlags",{get:function(){var e=p.default.getKey("onboarding_events",null);if(e)try{this._onboardingEventFlags=JSON.parse(e)}catch(t){this._onboardingEventFlags=e}return this._onboardingEventFlags},enumerable:!1,configurable:!0}),e.setOnBoardingEventFlags=function(e){this._onboardingEventFlags[e]=!0,p.default.setKey("onboarding_events",JSON.stringify(this._onboardingEventFlags))},Object.defineProperty(e,"visitedScreens",{get:function(){var e=p.default.getKey("visitedScreens",null);if(e)try{this._visitedScreens=JSON.parse(e)}catch(t){this._visitedScreens=e}return this._visitedScreens},enumerable:!1,configurable:!0}),e.addVisitedScreen=function(e){this._visitedScreens[e]=!0,p.default.setKey("visitedScreens",JSON.stringify(this._visitedScreens))},Object.defineProperty(e,"socialId",{get:function(){var e=p.default.getKey(this.CUR_SOCIAL_ID,null,!1);return null!==e&&e.includes(this.CUR_SOCIAL_ID)&&(e=e.substr(this.CUR_SOCIAL_ID.length)),e},set:function(e){e.includes(this.CUR_SOCIAL_ID)||(e=this.CUR_SOCIAL_ID+e),p.default.setKey(this.CUR_SOCIAL_ID,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalSessions",{get:function(){return d(p.default.getKey(this.TOTAL_SESSIONS,0))},set:function(e){p.default.setKey(this.TOTAL_SESSIONS,e)},enumerable:!1,configurable:!0}),e.isUserLogined=function(){return null!==e.socialId&&void 0!==e.socialId&&""!==e.socialId},Object.defineProperty(e,"added_A2HS",{get:function(){return f(p.default.getKey(this.ADDED_A2HS,!1))},set:function(e){this._added_A2HS=e,p.default.setKey(this.ADDED_A2HS,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"lang_selected",{get:function(){return f(p.default.getKey(this.LANG_SELECTED,!1))},set:function(e){p.default.setKey(this.LANG_SELECTED,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sharedGame_NavBar",{get:function(){return f(p.default.getKey(this.SHARED_GAME_IN_NAVBAR,!1))},set:function(e){this._sharedGame_NavBar=e,p.default.setKey(this.SHARED_GAME_IN_NAVBAR,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"changedName",{get:function(){return f(p.default.getKey(this.CHANGED_NAME,!1))},set:function(e){this._changedName=e,p.default.setKey(this.CHANGED_NAME,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numberOfAdsWatched",{get:function(){return d(p.default.getKey(this.NUMBER_OF_ADS_WATCHED,0))},set:function(e){p.default.setKey(this.NUMBER_OF_ADS_WATCHED,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numberAdsSession",{get:function(){return d(p.default.getKey(this.NUMBER_OF_ADS_SESSION,0))},set:function(e){this.isAddedThisSession||(p.default.setKey(this.NUMBER_OF_ADS_SESSION,e),this.isAddedThisSession=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ticketAmount",{get:function(){return d(p.default.getKey(this.TICKET_AMOUNT,0))},set:function(e){p.default.setKey(this.TICKET_AMOUNT,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameModePoint",{get:function(){return d(p.default.getKey(this.GAME_MODE_POINT,0))},set:function(e){p.default.setKey(this.GAME_MODE_POINT,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"supportCode",{get:function(){return p.default.getKey(this.SUPPORT_CODE,"")},set:function(e){p.default.setKey(this.SUPPORT_CODE,e)},enumerable:!1,configurable:!0}),e.updateAdsInfo=function(){this.numberOfAdsWatched++,this.numberAdsSession++},e.isNameCorrectFormat=function(e){if(e.length>12)return!1;var t=e.split(" ");return!(t[0].length>9||t.length>1&&(2!==t[1].length||"."!==t[1][1]))},e.correctNameFormat=function(t){if(e.isNameCorrectFormat(t))return t;var o=t.split(" ");if(1!==o.length){var n=o[0];n.length>9&&(n=n.slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...");var r=o[1];return r.length>0&&(r=r[0]+"."),n+" "+r}return o[0].length>9?o[0].slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...":t},Object.defineProperty(e,"changeNameLocation",{get:function(){return p.default.getKey(this.CHANGE_NAME_LOCATION,"")},set:function(e){p.default.setKey(this.CHANGE_NAME_LOCATION,e)},enumerable:!1,configurable:!0}),e.setAccountLinkData=function(t){void 0===t&&(t=null),s.NgcPlatform.isRunAsIframeOnNano()||((t=t||{}).playerId=e.userIdKey,t.secretKey=e.secretKey,t.name=e.localUserName,t.hasOwnProperty("platform")&&(t.socialId=e.socialId,t.avatarUrl=e.avatarUrl,t.facebookAccessToken=e.facebookAccessToken),p.default.setKey("NGC_AccountData",JSON.stringify(t),!1),console.log("NGC set link account",t))},e.getNanoUserInfoFromLocalstorage=function(t){void 0===t&&(t=!0);var o=p.default.getKey("userInfo",null,!1);if(o){var n=o;return t&&(e.nanoLoginData=n,e.userIdKey=n.userId||n.playerId,e.secretKey=n.secretKey,e.localUserName=n.name,e.socialId=n.socialId||"",console.log("Iframe linked successfully",o)),n}return null},e.generateGuestName=function(){e.localUserName="Guest"+u.NgcNetUtils.RandomRange(1,9999,!0).toString()},e.resetWhenLoggedInFromAnotherPlace=function(t){var o=e.userIdKey;if(this.resetNgcData(),s.NgcPlatform.isRunAsIframeOnNano()){window.parent.postMessage(JSON.stringify({RESET_ACCOUNT_DATA:!0}),"*");var n=setInterval(function(){var r=e.getNanoUserInfoFromLocalstorage(!1);r&&o!==r.playerId&&(clearInterval(n),t&&t(),location.reload())},250)}else window.accountURLLinked&&(e.generateGuestName(),e.setAccountLinkData()),t&&t(),location.reload()},e.resetNgcData=function(){e.localUserName="",e.totalSessions=0,e.socialId="",e.facebookId="",e.avatarUrl="",e.numberOfAdsWatched=0,e.numberAdsSession=0,e.isAddedThisSession=!1,e.secretKey="",e.userIdKey="",e.gameModePoint=0,e.supportCode="",e.changeNameLocation="",e.changedName=!1,a.Utils.deleteCookie("fblo_"+l.NgcBuildConfig.SDK.FacebookSrv.appID)},e.SOUND_OFF="SOUND_OFF",e.MUSIC_OFF="MUSIC_OFF",e.USER_NAME_LOCAL="USER_NAME_LOCAL",e.CUR_FACEBOOK_ID="CUR_FACEBOOK_ID",e.CUR_SOCIAL_ID="CUR_SOCIAL_ID",e.CUR_AVATAR_URL="CUR_AVATAR_URL",e.CUR_LOCALIZATION_LANG="CUR_LOCALIZATION_LANG",e.FACEBOOK_ACCESS_TOKEN="FACEBOOK_ACCESS_TOKEN",e.SECRET_KEY="secretKey",e.USERID_KEY="userIdKey",e.GAME_RUNNING_SESSION="GAME_RUNNING_SESSION",e.GAME_VERSION="GAME_VERSION",e.TOTAL_SESSIONS="TOTAL_SESSIONS",e.TOTAL_GAME_ROUNDS="TOTAL_GAME_ROUNDS",e.ADDED_A2HS="ADDED_A2HS",e.SHARED_GAME_IN_NAVBAR="SHARED_GAME_IN_NAVBAR",e.CHANGED_NAME="CHANGED_NAME",e.NUMBER_OF_ADS_WATCHED="NUMBER_OF_ADS_WATCHED",e.NUMBER_OF_ADS_SESSION="NUMBER_OF_ADS_SESSION",e.OFFLINE_DAILY_REWARD="DailyReward",e.OFFLINE_INVENTORY="Inventory",e.TICKET_AMOUNT="TICKET_AMOUNT",e.GAME_MODE_POINT="GAME_MODE_POINT",e.SUPPORT_CODE="SUPPORT_CODE",e.LANG_SELECTED="LANG_SELECTED",e.APP_USER_ID_KEY="appUserIdKey",e.CHANGE_NAME_LOCATION="CHANGE_NAME_LOCATION",e.NANO_LOGIN_DATA="NANO_LOGIN_DATA",e._soundOff=!1,e._musicOff=!1,e._localUserName="",e._facebookId="",e._avatarUrl="",e._secretKey="",e._userIdKey="",e._userAppId="",e._totalRoundCount=null,e.readTotalRoundCount=!1,e._onboardingEventFlags={},e._visitedScreens={},e.sessionKey="",e._added_A2HS=!1,e._sharedGame_NavBar=!1,e._changedName=!1,e.isAddedThisSession=!1,e.MAX_FIRST_NAME_LENGHT=9,e.nanoLoginData=null,e.realPrizeVisited=!1,e}();n.default=h,cc._RF.pop()},{"../../../globals":"globals","../../Core/Utils":"Utils","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/Platform/Platform":"Platform","./BuildConfig":"BuildConfig","./Network/NetUtils":"NetUtils","./NgcLocalStorage":"NgcLocalStorage",uuidv4:170}],NgcVersion:[function(e,t,o){"use strict";cc._RF.push(t,"274a1VKRfdOmLLZdoTXx+6A","NgcVersion"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcVersionConfig=void 0,o.NgcVersionConfig={buildNgcVersion:"NGC v4.2.0i"},cc._RF.pop()},{}],NgcWorldPosInterface:[function(e,t,o){"use strict";cc._RF.push(t,"8042fBacs9ChI1ZDgzF6Z2W","NgcWorldPosInterface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],NitroButton:[function(e,t,o){"use strict";cc._RF.push(t,"44af6L9N6VFpZWWxfGrWl6U","NitroButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NitroButtoState=void 0;var a,c=e("../../globals"),s=e("../Main"),l=cc._decorator,u=l.ccclass,p=l.property;(function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.MAX=2]="MAX"})(a=o.NitroButtoState||(o.NitroButtoState={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nitro_filling_MAX=null,t.nitro_filling_ON=null,t.nitro_icon_OFF=null,t.nitro_icon_ON=null,t.nitro_icon_MAX=null,t._state=a.OFF,t}return r(t,e),t.prototype.setState=function(e){if(this._state!=e)switch(this._state=e,e){case a.OFF:this.nitro_filling_ON.active=!1,this.nitro_icon_MAX.active=!1,this.nitro_icon_ON.active=!1,this.nitro_filling_MAX.active=!1,this.nitro_icon_OFF.active=!0,this.nitro_filling_ON.position=cc.v3(this._positionOfFillingON);break;case a.ON:this.nitro_filling_MAX.active=!1,this.nitro_icon_OFF.active=!1,this.nitro_icon_MAX.active=!1,this.nitro_filling_ON.active=!0,this.nitro_icon_ON.active=!0;break;case a.MAX:this.nitro_icon_OFF.active=!1,this.nitro_filling_ON.active=!1,this.nitro_icon_ON.active=!1,this.nitro_icon_MAX.active=!0,this.nitro_filling_MAX.active=!0}},t.prototype.start=function(){this._positionOfFillingON=cc.v2(this.nitro_filling_ON.position),this._maxYFilling=this.nitro_filling_ON.height,this.setState(a.OFF)},t.prototype.update=function(){var e=this._getNitroObject();if(null!=e){var t=e.currentNitro,o=e.maxNitro;switch(0==t?this.setState(a.OFF):t==o?this.setState(a.MAX):this.setState(a.ON),this._state){case a.ON:var n=t*this._maxYFilling/o;this._displayIncreasNitro(n)}}},t.prototype._getNitroObject=function(){var e=c.default.Main.inst.getLocalPlayer();return s.Main.inst.getLocalPlayer()?e._nitroEffect:null},t.prototype._displayIncreasNitro=function(e){this.nitro_filling_ON.y=e+this._positionOfFillingON.y},i([p(cc.Node)],t.prototype,"nitro_filling_MAX",void 0),i([p(cc.Node)],t.prototype,"nitro_filling_ON",void 0),i([p(cc.Node)],t.prototype,"nitro_icon_OFF",void 0),i([p(cc.Node)],t.prototype,"nitro_icon_ON",void 0),i([p(cc.Node)],t.prototype,"nitro_icon_MAX",void 0),i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../globals":"globals","../Main":"Main"}],NitroEffect:[function(e,t,o){"use strict";cc._RF.push(t,"0b091vgp3hAK41zcLgjRyQS","NitroEffect");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NitroState=void 0;var r,i=cc._decorator,a=i.ccclass;i.property,function(e){e[e.IDLE=0]="IDLE",e[e.EARN_NITRO=1]="EARN_NITRO",e[e.START_NITRO=2]="START_NITRO",e[e.INCREASE_NITRO_SPEED=3]="INCREASE_NITRO_SPEED",e[e.REDUCE_NITRO_SPEED=4]="REDUCE_NITRO_SPEED",e[e.END=5]="END"}(r=o.NitroState||(o.NitroState={}));var c=function(){function e(){this.currentNitro=0,this.nitroState=r.IDLE,this.enableLog=!1}return e.prototype.setMaxSpeed=function(e){return this.maxSpeed=e,this},e.prototype.setMaxNitroSpeed=function(e){return this.maxNitroSpeed=e,this},e.prototype.setMaxNitro=function(e){return this.maxNitro=e,this},e.prototype.setNitroOnAccelerationPad=function(){return this.currentNitro=this.nitroIncreaseAccelerationPad,this},e.prototype.setNitroEarnRate=function(e){return this.nitroEarnRate=e,this},e.prototype.setNitroReduceRate=function(e){return this.nitroReduceRate=e,this},e.prototype.setNitroIncreasSpeedRate=function(e){return this.nitroSpeedIncreaseRate=e,this},e.prototype.setNitroIncreaseAccelerationPad=function(e){return cc.log("setNitroIncreaseAccelerationPad "+e),this.nitroIncreaseAccelerationPad=e,this},e.prototype.setNitroDecreasSpeedRate=function(e){return this.nitroSpeedDecreaseRate=e,this},e.prototype.getCurrentNitro=function(){return this.currentNitro},e.prototype.earnNitro=function(){this.nitroState==r.IDLE&&(this.nitroState=r.EARN_NITRO)},e.prototype.idle=function(){this.nitroState==r.EARN_NITRO&&(this.nitroState=r.IDLE)},e.prototype.Nitro=function(){this.currentNitro>0&&(this.nitroState=r.START_NITRO)},e.prototype.getState=function(){return this.nitroState},e.prototype.setSate=function(e){this.nitroState=e},e.prototype.update=function(e,t){var o=this.nitroState;switch(this.lastState!=this.nitroState&&(this.lastState=this.nitroState),o){case r.IDLE:break;case r.EARN_NITRO:this.enableLog&&cc.log("EARN_NITRO"),this.currentNitro+=this.nitroEarnRate,this.currentNitro>this.maxNitro&&(this.currentNitro=this.maxNitro);break;case r.START_NITRO:this.enableLog&&cc.log("START_NITRO"),this.nitroState=r.INCREASE_NITRO_SPEED;break;case r.INCREASE_NITRO_SPEED:this.currentNitro-=this.nitroReduceRate,this.maxNitroSpeed,this.currentNitro,t&&(t=cc.misc.lerp(t,this.maxNitroSpeed,this.nitroSpeedIncreaseRate*e)),this.enableLog&&(cc.log("INCREASE_NITRO_SPEED"),cc.log("Speed"+t),cc.log("this.currentNitro"+this.currentNitro)),this.currentNitro<=0&&(this.currentNitro=0,this.nitroState=r.END);break;case r.REDUCE_NITRO_SPEED:t&&(t=cc.misc.lerp(t,0,this.nitroSpeedDecreaseRate*e)),this.enableLog&&(cc.log("REDUCE_NITRO_SPEED"),cc.log("Speed Floor"+Math.floor(t))),Math.floor(t)<=this.maxSpeed&&(this.nitroState=r.IDLE);break;case r.END:this.enableLog&&cc.log("END"),this.nitroState=r.REDUCE_NITRO_SPEED}return[t,o]},n([a],e)}();o.default=c,cc._RF.pop()},{}],NoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"aebf20CLyhKxregCDz1w9HE","NoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNoticeDialog=void 0;var a=e("../DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t._callBackOk=null,t.icon=null,t}return r(t,e),t.prototype.init=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null),this._callBackOk=o,this.titleLabel.string=e,this.contentLabel.string=t,n&&(this.icon.spriteFrame=n,this.icon.node.active=!0)},t.prototype.OkOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.urlPrefab="NoticeDialog",t.bundleName="02_dialog",t.dialogType="NgcNoticeDialog",i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Label)],t.prototype,"contentLabel",void 0),i([l(cc.Sprite)],t.prototype,"icon",void 0),i([s],t)}(a.NgcDialogBase);o.NgcNoticeDialog=u,cc._RF.pop()},{"../DialogBase":"DialogBase"}],ObjectRender:[function(e,t,o){"use strict";cc._RF.push(t,"496780zz45CWomSATWNQl7k","ObjectRender");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameCamera"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._frameCount=0,t}return r(t,e),t.prototype.start=function(){this.wordBound=this.node.getBoundingBoxToWorld()},t.prototype.offScreen=function(){return!!a.default.inst.worldBound&&(this.wordBound.x+2*this.wordBound.width<a.default.inst.worldBound[0]||this.wordBound.y+2*this.wordBound.height<a.default.inst.worldBound[1]||this.wordBound.x-2*this.wordBound.width>a.default.inst.worldBound[2]||this.wordBound.y-2*this.wordBound.height>a.default.inst.worldBound[3])},t.prototype.update=function(){this._frameCount>=10?this.offScreen()?this.node.opacity=0:this.node.opacity=255:this._frameCount++},i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./GameCamera":"GameCamera"}],OfflineMode:[function(t,o,n){"use strict";cc._RF.push(o,"5e8d1UV/3ND45p0P9vv3EIS","OfflineMode");var r=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.OfflineMode=n.__DEV_DAILY_REWARD__=void 0;var a=t("../../../globals"),c=t("../../../NanoGameCore/Core/Utils"),s=t("../../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage"),l=t("../../../NanoGameCore/Services/Inventory/Inventory"),u=t("../../../Scripts/UI/BoosterUI"),p=t("../../../Scripts/UserInfo"),d=t("../../SDK/Nano/NanoSrv");n.__DEV_DAILY_REWARD__=!1;var f=function(){function e(){}return e.Init=function(){return r(this,void 0,void 0,function(){var t,o,n,r;return i(this,function(i){switch(i.label){case 0:return t=e,[4,c.LoadAsset("offline:config/offline-config")];case 1:return t.Config=i.sent().json,e.GetInventory()?[3,3]:[4,c.LoadAsset("offline:text/start-inventory")];case 2:o=i.sent(),s.default.setKey("offline-inventory",o.json),i.label=3;case 3:return e.GetDailyRewardState()||s.default.setKey("offline-daily-reward-state",{curStep:"1",curStepStartDate:Date.now()}),[4,c.LoadAsset("offline:text/game-info")];case 4:return n=i.sent(),d.default.inst.loginData.gameInfo=n.json,null==s.default.getKey("offline-free-offer",null)&&s.default.setKey("offline-free-offer",!0),r=this,[4,c.LoadAsset("offline:text/profanity")];case 5:return r.profanityList=i.sent().json,[2]}})})},e.ProfanityCheck=function(e){var t=this,o=!1,n=(e=(e=(e=e.trim().toLocaleLowerCase()).replace(/^[0-9]+/i,"")).replace(/[0-9]+$/i,"")).split(" "),r=n.join("");for(var i in this.profanityList)this.profanityList[i].includes(e)&&(o=!0),n.forEach(function(e){t.profanityList[i].includes(e)&&(o=!0)}),this.profanityList[i].filter(function(e){return r.includes(e)}).length>1&&(o=!0);return!o},e.GetInventory=function(){return s.default.getKey("offline-inventory",null)},e.UpdateItem=function(e,t){var o=this.GetInventory();o[e]?o[e].count+=t:o[e]={count:t,itemID:e},s.default.setKey("offline-inventory",o),p.UserInfo.updateInventoryWithPlatform()},e.GetDailyRewardState=function(){return s.default.getKey("offline-daily-reward-state",null)},e.SetDailyRewardState=function(e){s.default.setKey("offline-daily-reward-state",e)},e.GetFreeOffer=function(){return s.default.getKey("offline-free-offer",null)},e.SetFreeOffer=function(e){return s.default.setKey("offline-free-offer",e)},e.MarkClaimLuckyBooster=function(e){s.default.setKey("offline-luckybooster-claimtime",{itemID:e,time:Date.now()})},e.GetMarkedLuckyBooster=function(){return s.default.getKey("offline-luckybooster-claimtime",null)},e.CleanLuckyBooster=function(){return r(this,void 0,void 0,function(){var e,t;return i(this,function(){return(e=this.GetMarkedLuckyBooster())?(l.NgcInventory.inst.ownedItems[e.itemID].count=0,t=c.Utils.enumToString(u.boosterType,p.UserInfo.curBooster),this.UpdateItem(t,-1),p.UserInfo.curBooster=u.boosterType.none,[2]):[2]})})},e.GetTotalRoundCount=function(){return parseInt(s.default.getKey("offline-total-round-count",0))},e.IncTotalRoundCount=function(){var e=this.GetTotalRoundCount();s.default.setKey("offline-total-round-count",e+1)},e.profanityList={},e}();n.OfflineMode=f,a.default.OfflineMode=f,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../../Scripts/UI/BoosterUI":"BoosterUI","../../../Scripts/UserInfo":"UserInfo","../../../globals":"globals","../../SDK/Nano/NanoSrv":"NanoSrv"}],OptionDialog:[function(t,o,n){"use strict";cc._RF.push(o,"228c9ToTExIMLp/Ep3ZfwBa","OptionDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../SoundManager"),u=t("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),p=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundSFs=[],t.musicSFs=[],t._callBackOk=null,t.soundSprite=null,t.musicSprite=null,t}return i(t,e),t.prototype.init=function(e){this._callBackOk=e,this.musicSprite.spriteFrame=u.default.musicOff?this.musicSFs[1]:this.musicSFs[0],this.soundSprite.spriteFrame=u.default.soundOff?this.soundSFs[1]:this.soundSFs[0]},t.prototype.OkOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.soundOnClick=function(){u.default.soundOff=!u.default.soundOff,this.soundSprite.spriteFrame=u.default.soundOff?this.soundSFs[1]:this.soundSFs[0]},t.prototype.musicOnClick=function(){u.default.musicOff=!u.default.musicOff,this.musicSprite.spriteFrame=u.default.musicOff?this.musicSFs[1]:this.musicSFs[0],l.default.inst.playStartScreenMusic()},t.prototype.changeLanguageOnClick=function(){return c(this,void 0,void 0,function(){return s(this,function(){return[2]})})},t.urlPrefab="Prefabs/Dialogs/OptionDialog",t.bundleName="",t.dialogType="OptionDialog",a([h(cc.SpriteFrame)],t.prototype,"soundSFs",void 0),a([h(cc.SpriteFrame)],t.prototype,"musicSFs",void 0),a([h(cc.Sprite)],t.prototype,"soundSprite",void 0),a([h(cc.Sprite)],t.prototype,"musicSprite",void 0),a([f],t)}(p.NgcDialogBase);n.default=g,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../SoundManager":"SoundManager"}],OwnedSkinItem:[function(e,t,o){"use strict";cc._RF.push(t,"67d8efS0DdPdY+4TzfY1ixp","OwnedSkinItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./CarSkinItem"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.init=function(t,o,n,r){e.prototype.init.call(this,t,o,n,null),this.itemID=r},t.prototype.show=function(){this.lockedIcon.active=!1,this.carSelectToggle.node.active=!1,this.updateToggleUI()},t.prototype.hide=function(){this.carSelectToggle.node.active=!1},t.prototype.updateBoughtItemUI=function(){},i([s],t)}(a.default));o.default=l,cc._RF.pop()},{"./CarSkinItem":"CarSkinItem"}],PartyAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"1a28acm81dC8rrnoPBqusnZ","PartyAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyAnimation=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.waitingGroupNode=null,t}return r(t,e),i([s(cc.Node)],t.prototype,"waitingGroupNode",void 0),i([c],t)}(cc.Component);o.NgcPartyAnimation=l,cc._RF.pop()},{}],PartyInfoBuilder:[function(e,t,o){"use strict";cc._RF.push(t,"f2148afUDNJN5iBC1Owq+Mm","PartyInfoBuilder"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyInfoBuilder=void 0;var n=cc._decorator,r=(n.ccclass,n.property,5),i=function(){function e(){this.netID="",this.playerName="",this.skin={},this.minPlayer=2,this.maxPlayer=2,this.country="",this.avatarURL="",this.joinGamePayload={},this.startGamePayload={},this.isPrivate=!0,this.isAllowBot=!0,this.isLoginSocial=!1,this.isNewUser=!1,this.isAutoStartGame=!1,this.map="",this.timeDelayNextGame=r}return e.prototype.setPrivate=function(e){return this.isPrivate=e,this},e.prototype.setAllowBot=function(e){return this.isAllowBot=e,this},e.prototype.setPlayerName=function(e){return this.playerName=e,this},e.prototype.setCountry=function(e){return this.country=e,this},e.prototype.setPlayerNetID=function(e){return this.netID=e,this},e.prototype.setMaxPlayer=function(e){return this.maxPlayer=e,this},e.prototype.setMinPlayer=function(e){return this.minPlayer=e,this},e.prototype.setNewUser=function(e){return this.isNewUser=e,this},e.prototype.setAutoStartGame=function(e){return this.isAutoStartGame=e,this},e.prototype.setSkin=function(e){return this.skin=e,this},e.prototype.setAvatarURL=function(e){return this.avatarURL=e,this},e.prototype.setLoginSocial=function(e){return this.isLoginSocial=e,this},e.prototype.setTimeDelayNextGame=function(e){return this.timeDelayNextGame=e,this},e.prototype.setJoinPayload=function(e){return this.joinGamePayload=e,this},e.prototype.setStartPayload=function(e){return this.startGamePayload=e,this},e.prototype.setStartGameFuncion=function(e){return this.functionStartGame=e,this},e.prototype.setUpdatePayloadFuncion=function(e){return this.functionUpdateStartPayload=e,this},e.prototype.setOnMultiLoginFuntion=function(e){return this.functionOnMutilLogin=e,this},e.prototype.setOnSocialCallBack=function(e){return this.functionOnSocialCallBack=e,this},e.prototype.getJoinPayload=function(){var e=this.joinGamePayload;return e.avatarUrl=this.avatarURL,e.skin=this.skin,e},e.prototype.getStartPayload=function(){this.functionUpdateStartPayload&&this.functionUpdateStartPayload();var e=this.startGamePayload;return e.isPrivate=this.isPrivate,e.allowBot=this.isAllowBot,e},e.prototype.IsPrivate=function(){return this.isPrivate},e.prototype.IsAllowBot=function(){return this.isAllowBot},e}();o.NgcPartyInfoBuilder=i,cc._RF.pop()},{}],PartyPlayerItem:[function(e,t,o){"use strict";cc._RF.push(t,"8b5eccZjZxDp7DVCLbidsN6","PartyPlayerItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyPlayerItem=void 0;var a=e("../../../Core/Utils"),c=e("../../../GameFramework/Scripts/CountryFlagsManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLB=null,t.avatarSpr=null,t.defaultAvatar=null,t.flagSpr=null,t.hostNode=null,t.readySpr=null,t.glowEffect=null,t.isHost=!1,t.glowEffectOnce=!1,t._playGlowOnce=!1,t}return r(t,e),t.prototype.setInfo=function(e,t){void 0===t&&(t=!1),this.netID=e.netID,this.isHost=e.isHost;var o=e.playerName.split("|");if(this.nameLB.string=o[0],this.flagSpr.spriteFrame=c.NgcCountryFlagsManager.inst.getFlagSpriteFrame(o[1]),e.payload.avatarUrl){var n=this;a.Utils.loadSpriteFrameFromURL(e.payload.avatarUrl).then(function(e){n.avatarSpr.spriteFrame=e}).catch(function(){})}else this.defaultAvatar&&(this.avatarSpr.spriteFrame=this.defaultAvatar);this.enableEffect(t)},t.prototype.enableEffect=function(e){var t=this;cc.log("#Play effect"),this.node.scale=.2,cc.tween(this.node).to(.2,{scale:1.05}).to(.1,{scale:.95}).to(.1,{scale:1}).call(function(){e&&(t.glowEffect.node.active=!0,t.glowEffect.node.active&&(t.glowEffect.setAnimation(0,"joins",!1),t.glowEffect.setCompleteListener(function(){t.glowEffect.node.active=!1})))}).start()},t.prototype.getWorldPos=function(){return this.node.parent.convertToWorldSpaceAR(this.node.position)},i([u(cc.Label)],t.prototype,"nameLB",void 0),i([u(cc.Sprite)],t.prototype,"avatarSpr",void 0),i([u({type:cc.SpriteFrame})],t.prototype,"defaultAvatar",void 0),i([u(cc.Sprite)],t.prototype,"flagSpr",void 0),i([u(cc.Node)],t.prototype,"hostNode",void 0),i([u(cc.Sprite)],t.prototype,"readySpr",void 0),i([u(sp.Skeleton)],t.prototype,"glowEffect",void 0),i([l],t)}(cc.Component);o.NgcPartyPlayerItem=p,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager"}],PartyRoomConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"19c4c8eYmJABIV6cXYyTynI","PartyRoomConfirmDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomConfirmDialog=void 0;var a=e("./PartyRoomDialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.messageLabel=null,t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t,o,n){this._callBackOk=o,this._callBackClose=n,this.titleLabel.string=e,this.messageLabel.string=t,cc.log(this)},t.prototype.okOnClick=function(){cc.log(this),this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){"function"==typeof this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="PartyRoomConfirmDialog",t.bundleName="02_dialog_PWF",t.dialogType="NgcPartyRoomConfirmDialog",i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Label)],t.prototype,"messageLabel",void 0),i([s],t)}(a.NgcPartyRoomDialogBase);o.NgcPartyRoomConfirmDialog=u,cc._RF.pop()},{"./PartyRoomDialogBase":"PartyRoomDialogBase"}],PartyRoomDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"3196bhdpJZCEoGebLHKXqNS","PartyRoomDialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomDialogBase=void 0;var a=e("../../../Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="",t.bundleName="02_dialog_PWF",t.dialogType="NgcPartyRoomDialogBase",i([s],t)}(a.NgcDialogBase));o.NgcPartyRoomDialogBase=l,cc._RF.pop()},{"../../../Dialogs/Script/DialogBase":"DialogBase"}],PartyRoomEnterCodeDialog:[function(t,o,n){"use strict";cc._RF.push(o,"71460+chIVEJa0PtvqreWM5","PartyRoomEnterCodeDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../../GameFramework/Scripts/Localized/LocalizedManager"),u=t("../../../../Services/PartyRoom/PartyRoom"),p=t("../../../Dialogs/Script/NgcDialogManager"),d=t("../../../TechMessage/Script/NgcTechMessageUpdateIOS"),f=t("./PartyRoomDialogBase"),h=t("./ScanQRCodeDialog"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grayBGSF=null,t.redBGSF=null,t.warningNode=null,t.editBox=null,t.okButton=null,t.scanButton=null,t.loadingNode=null,t.editBoxAnim=null,t.wrongNameAnimName=null,t.showSuccessName=null,t.hideSuccessName=null,t.isHiding=!1,t.MAX_NAME_LENGTH=4,t.MAX_CHARACTER_REACHED="NAV_MAX_CHARACTER_REACHED",t}return i(t,e),t.prototype.start=function(){var e=this;this.warningNode.active=!1,this.loadingNode.active=!1,this.okButton.interactable=!0,this.editBoxAnim=this.editBox.getComponent(cc.Animation),this.wrongNameAnimName=this.editBoxAnim.defaultClip.name,this.editBox.maxLength=-1,this.editBox.textLabel.node.color=cc.Color.BLACK,this.editBox.inputFlag=cc.EditBox.InputFlag.INITIAL_CAPS_ALL_CHARACTERS,this.editBox.placeholder=l.NgcLocalizedManager.t(this.editBox.placeholder).text,this.scheduleOnce(function(){e.editBox.focus()},.1);var t=this.editBox.node.parent.getChildByName("OR");this.scanButton.node.active=cc.sys.isMobile,t&&(t.active=cc.sys.isMobile)},t.prototype.onEditBoxBegan=function(){!1===this.okButton.interactable&&(this.warningNode.active=!1,this.okButton.interactable=!0),cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!1)},t.prototype.onEditBoxEnd=function(){cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!0)},t.prototype.onEditReturn=function(){this.onOkButtonClick()},t.prototype.onTextChanged=function(){},t.prototype.onQRCodeScannerClick=function(){var e=this;if(navigator.userAgent.match(/iPhone|iPod|iPad/)){var t=(navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,".").split(".");if(parseInt(t[0])<14)return void c(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,p.NgcDialogManager.createDialog(d.default.dialogType,d.default.urlPrefab,d.default.bundleName)];case 1:return e.sent().getComponent(d.default).init(),[2]}})})}void 0!==navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(t){return c(e,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return[4,p.NgcDialogManager.createDialog(h.NgcScanQRCodeDialog.dialogType,h.NgcScanQRCodeDialog.urlPrefab,h.NgcScanQRCodeDialog.bundleName)];case 1:return e=n.sent(),(o=e.getComponent(h.NgcScanQRCodeDialog)).init(t,this.onScanOK.bind(this)),o.show(),[2]}})})}).catch(function(){return c(e,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,p.NgcDialogManager.createDialog(h.NgcScanQRCodeDialog.dialogType,h.NgcScanQRCodeDialog.urlPrefab,h.NgcScanQRCodeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(h.NgcScanQRCodeDialog)).init(null,this.onScanOK.bind(this)),t.show(),[2]}})})}):alert("Not support!")},t.prototype.onScanOK=function(e){e.match(/id=(.+)/)?(this.warningNode.active=!1,this.editBox.string=RegExp.$1,this.onOkButtonClick()):this.warningNode.active=!0},t.prototype.onOkButtonClick=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.loadingNode.active=!0,[4,u.NgcPartyRoom.inst.getRoomCodeInfo(this.editBox.string)];case 1:return e=t.sent(),console.log("PWF onOkButtonClick ",e),this.loadingNode.active=!1,this.okButton.interactable=!1,this.editBox.backgroundImage=this.grayBGSF,e&&e.status?(this._callback&&this._callback(e.data),this.hide()):this.warningNode.active=!0,[2]}})})},t.prototype.onGetRoomInfoSuccess=function(e){this._callback=e},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="PartyRoomEnterCode",t.bundleName="02_dialog_PWF",t.dialogType="NgcPartyRoomEnterCodeDialog",a([m(cc.SpriteFrame)],t.prototype,"grayBGSF",void 0),a([m(cc.SpriteFrame)],t.prototype,"redBGSF",void 0),a([m(cc.Node)],t.prototype,"warningNode",void 0),a([m(cc.EditBox)],t.prototype,"editBox",void 0),a([m(cc.Button)],t.prototype,"okButton",void 0),a([m(cc.Button)],t.prototype,"scanButton",void 0),a([m(cc.Node)],t.prototype,"loadingNode",void 0),a([y],t)}(f.NgcPartyRoomDialogBase);n.default=_,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../Services/PartyRoom/PartyRoom":"PartyRoom","../../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../TechMessage/Script/NgcTechMessageUpdateIOS":"NgcTechMessageUpdateIOS","./PartyRoomDialogBase":"PartyRoomDialogBase","./ScanQRCodeDialog":"ScanQRCodeDialog"}],PartyRoomManager:[function(t,o,n){"use strict";cc._RF.push(o,"35a613TXgNJy4xahGrGXEP/","PartyRoomManager");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcPartyRoomManager=n.PARTY_MENU_SCREEN=void 0;var l,u=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),p=t("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),d=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),f=t("../../../NanoGameCore/SDK/Nano/NanoSrv"),h=t("../../../NanoGameCore/Services/PartyRoom/PartyRoom"),g=t("../../../NanoGameCore/Services/Social/Social"),y=t("../../../NanoGameCore/Services/Telemetry/Telemetry"),m=t("../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),_=t("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),v=t("./PartyRoomUI"),S=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),N=t("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog"),b=t("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog"),C=t("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),P=t("../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient"),I=t("../../../NanoGameCore/Services/Ads/Ads"),w=t("../../../NanoGameCore/Services/Platform/Platform"),T=t("../../../NanoGameCore/Core/Utils"),O=t("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),R=t("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomEnterCodeDialog"),E=t("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),A=t("../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor"),D=t("../../Network/ImprovedNetClient"),k=t("../../Network/NetClient"),L=t("../../../NanoGameCore/GameFramework/Scripts/NgcGame"),B=t("../../UserInfo"),M=t("../../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),F=cc._decorator,G=F.ccclass,U=F.property;(function(e){e[e.CREATE_GAME_MENU=0]="CREATE_GAME_MENU",e[e.WATING_ROOM_MENU=1]="WATING_ROOM_MENU",e[e.IDLE_MENU=2]="IDLE_MENU"})(l=n.PARTY_MENU_SCREEN||(n.PARTY_MENU_SCREEN={}));var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.partyRoomUI=null,t.gameTitle="Rabbids Wild Race",t.description="Come join me at this funny Rabbids Wild Race game! ",t.alowPlayerJoin=!0,t._isGameStaredFromRoom=!1,t._isSetupCallback=!1,t._joinByInvited=!1,t._curRoomState=h.PARTY_ROOM_STATE.RECRUITING,t._socialShareURL="",t._isShowingErrorPopup=!1,t._autoStartGameEventCall=!1,t._autoCrash=!0,t._needToCreateGame=!1,t._isAbleCopy=!1,t._QRCodeShortenLink="",t._roomCode="",t._isShowExitPopUp=!1,t.exitDialog=null,t._checkTokenDelayTime=2e3,t._checkTokenCurTime=0,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.timeoutCheckValidToken=function(){var e=this;this.clearTimeOutValidToken(),this.timeOutValidToken=setTimeout(function(){e.checkAuthenticationValid(),e.timeoutCheckValidToken()},5e3)},t.prototype.onResume=function(){this.onActivate()},t.prototype.onPause=function(){m.NgcEmotesManager.inst&&m.NgcEmotesManager.inst.setBroadcastNetID("")},t.prototype.onActivate=function(){var e;this._timeOut&&clearTimeout(this._timeOut),this.timeoutCheckValidToken(),this.setUpCallBackFunctions(),this.partyRoomUI.setLoginStatus(this.builder().isLoginSocial),this.partyRoomUI.showIncomingPlayer(0,!0),this.isGameStartedFromRoom()?(y.NgcTelemetry.inst.LogEvent_ReturnParty(),this.requestReadyToPlay(),m.NgcEmotesManager.inst&&m.NgcEmotesManager.inst.setBroadcastNetID(h.NgcPartyRoom.inst.getPartyID()),this.initEmote()):o.mustGoToPartyRoom()?(cc.log("@You're invited to room"),this.isPC()&&this.copyClipboard(),o.s_enterRoomOnce=!0,this._joinByInvited=!0,this.showUI(),this.switchMenu(l.IDLE_MENU)):(""!=(null===(e=h.NgcPartyRoom.inst)||void 0===e?void 0:e.getPartyID())&&(this.reset(),this.partyRoomUI.setLoginStatus(this.builder().isLoginSocial),this.partyRoomUI.showIncomingPlayer(0,!0)),this.showUI(),this.switchMenu(l.CREATE_GAME_MENU),p.NgcMain.setAppContext(p.AppContext.PartyRoom),y.NgcTelemetry.inst.LogEvent_EnterScreen("PartyRoom")),_.NgcNavBarManager.inst&&(cc.log("@Party init Change Name CallBack"),_.NgcNavBarManager.inst.setChangeNameCallBack(this.onUserChangeName.bind(this)),_.NgcNavBarManager.inst.setLoginSocialCallBack(this.onSocialCallBack.bind(this))),this.checkAuthenticationValid(),this.showBannerAds(),M.default.inst.onGameplayOver()},t.prototype.canExitWithoutPrompt=function(){return this._currentMenu!==l.WATING_ROOM_MENU},t.prototype.reset=function(){var e;null===(e=h.NgcPartyRoom.inst)||void 0===e||e.reset(),this.onClose(),this.partyRoomUI.reset(),this._curRoomState=h.PARTY_ROOM_STATE.RECRUITING,this._currentMenu=null},t.prototype.clearTimeOutValidToken=function(){this.timeOutValidToken&&(clearTimeout(this.timeOutValidToken),this.timeOutValidToken=null)},t.prototype.checkPlayerIsDead=function(){return!1},t.prototype.onDeactivate=function(){cc.log("@Hide Party with friends"),m.NgcEmotesManager.inst&&m.NgcEmotesManager.inst.setBroadcastNetID("")},t.prototype.update=function(){var e=E.NgcBuildConfig.useNgcServer&&A.NgcNetClientRefactor.inst.isConnected()||P.NgcNetClient.inst.isConnected();this._joinByInvited&&e&&(this._joinByInvited=!1,this.requestToJoinParty(h.NgcPartyRoom.getURLParameter(h.URL_PARAMETER.PARTY_ID)))},t.prototype.setUpCallBackFunctions=function(){h.NgcPartyRoom.inst&&!this._isSetupCallback&&(h.NgcPartyRoom.inst.setAllPartyCallBack(this.onPartyMessage.bind(this),this.onPlayerJoin.bind(this),this.onPlayerQuit.bind(this)),this._isSetupCallback=!0)},t.init=function(e){o.s_requestInfor=e},t.prototype.showUI=function(){this.partyRoomUI.onShow()},t.prototype.closeUI=function(e){void 0===e&&(e=!1),this.switchMenu(l.CREATE_GAME_MENU),this.partyRoomUI.onClose(),this.onClose(),this.requestLeaveParty(),clearTimeout(this._timeOut),this.clearTimeOutValidToken(),this.hideBannerAds(),e&&p.NgcMain.inst.setState(p.AppState.StartScreen),y.NgcTelemetry.inst.LogEvent_LeaveParty(),cc.log("Close UI")},t.prototype.forceClose=function(){this.isGameStartedFromRoom()&&(this.closeUI(!1),this.reset())},t.prototype.onClickRequestJoinGame=function(){this.builder().isLoginSocial||!h.NgcPartyRoom.isLoginMandatory()?(this.showLoading(),this.partyRoomUI.onCreateButtonClick(),this.requestToJoinParty(this.partyRoomUI.partyIDEditBox.string)):this.showLoginDialog()},t.prototype.onClickRequestJoinGameWithCode=function(){cc.log("CLick on JoinGame btn PWF"),this.requestJoinGameWithCode()},t.prototype.requestJoinGameWithCode=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,S.NgcDialogManager.createDialog(R.default.dialogType,R.default.urlPrefab,R.default.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(R.default)).onGetRoomInfoSuccess(this.requestJoinGameFromCodeCallback.bind(this)),t.show(),[2]}})})},t.prototype.requestJoinGameFromCodeCallback=function(e){var t=this;console.log("requestJoinGameFromCodeCallback ",e),h.NgcPartyRoom.getURLParameter(h.URL_PARAMETER.SERVER_URL,e.url);var o=h.NgcPartyRoom.getURLParameter(h.URL_PARAMETER.PARTY_ID,e.url),n=D.default.inst.websocket,r=function(){t.builder().setPlayerNetID(E.NgcBuildConfig.useNgcServer?D.default.inst.clientID:k.default.inst.localPlayerNetID),t.requestToJoinParty(o)};E.NgcBuildConfig.useNgcServer?A.NgcNetClientRefactor.inst.connect(e.serverURL).then(function(){if(D.default.inst.websocket!==n){var e=D.default.inst.clientID;new Promise(function(t,o){var n=15,r=setInterval(function(){if(console.log(D.default.inst.clientID),D.default.inst.clientID!==e)return t(),void clearInterval(r);0==(n-=1)&&o("Fail")},100)}).finally(function(){r()})}else r()}):P.NgcNetClient.inst.tryConnectToServer(e.serverURL,r)},t.prototype.getRoomCode=function(){return this._roomCode},t.prototype.requestToJoinParty=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=this;if(this._timeOut=setTimeout(function(){n.partyRoomUI.resetButtonCreateGame()},3e4),this.isValidDataRequest()){var r=o.s_requestInfor.getJoinPayload(),i=this.builder().playerName+"|"+this.builder().country,a=this.builder().netID,c=this.builder().minPlayer,s=this.builder().maxPlayer,l=h.NgcPartyRoom.inst.getClientUrl();h.NgcPartyRoom.inst.requestJoinParty(e,t,i,a,l,c,s,r)}else cc.warn("#Party Room : Need to call setPartyInfor() to setup reqest information"),this.displayReloadNoticeDialog()},t.prototype.requestLeaveParty=function(){h.NgcPartyRoom.inst.requestLeaveParty()},t.prototype.requestStartParty=function(){if(h.NgcPartyRoom.inst.isHost()){var e=h.NgcPartyRoom.inst.getPartyID(),t=this.builder().getStartPayload();h.NgcPartyRoom.inst.requestStartParty(e,t)}},t.prototype.requestReadyToPlay=function(){var e=h.NgcPartyRoom.inst.getPartyID();h.NgcPartyRoom.inst.requestReadyToPlay(e)},t.prototype.requestChangeInfor=function(e){var t=h.NgcPartyRoom.inst.getPartyID();if(t){var o=e+"|"+this.builder().country,n=h.NgcPartyRoom.inst.findPlayerByNet(this.builder().netID);n.payload.avatarUrl=this.builder().avatarURL;var r={playerName:o,payload:n.payload};h.NgcPartyRoom.inst.sendMessageToParty(t,h.PARTY_REQUEST_TYPE.CHANGE_INFOR,r)}},t.prototype.isValidDataRequest=function(){return!!(this.builder().netID&&this.builder().playerName&&this.builder().country&&this.builder().minPlayer&&this.builder().maxPlayer)},t.prototype.onPartyMessage=function(e,t){return c(this,void 0,void 0,function(){var o,n,r,i,a,c,u,p=this;return s(this,function(s){switch(s.label){case 0:switch(this.checkAuthenticationValid(),e){case h.PARTY_ROOM_MESSAGE.ON_ROOM_CREATED:return[3,1];case h.PARTY_ROOM_MESSAGE.ON_ROOM_STATE_CHANGE:return[3,5];case h.PARTY_ROOM_MESSAGE.ON_HOST_CHANGE:return[3,6];case h.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_STATUS:return[3,7];case h.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_INFOR:return[3,8];case h.PARTY_ROOM_MESSAGE.ON_GAME_START:return[3,9];case h.PARTY_ROOM_MESSAGE.ON_PLAYER_COMMING:return[3,10]}return[3,11];case 1:return cc.log("@Party ON_ROOM_CREATED",t),(o=t.partyUrl.indexOf("id="))>0&&(this._roomCode=String(t.partyUrl).substring(o+3),cc.log("roomCode ",this._roomCode)),this.isPC()?[4,this.copyClipboard()]:[3,3];case 2:s.sent(),s.label=3;case 3:return cc.log("this._isAbleCopy",this._isAbleCopy),n=h.NgcPartyRoom.inst.getInviteLink(!1)+"&method="+h.INVITE_METHOD.QR_CODE,[4,h.NgcPartyRoom.inst.shortenURL(n)];case 4:return(r=s.sent())&&(console.log(r),(i=JSON.parse(r))&&i.url?i.url.startsWith("http://")&&i.url.startsWith("https://")?this._QRCodeShortenLink=i.url:this._QRCodeShortenLink="https://"+i.url:this._QRCodeShortenLink=h.NgcPartyRoom.inst.getInviteLink()),this.switchMenu(l.WATING_ROOM_MENU),clearTimeout(this._timeOut),[3,11];case 5:return cc.log("@Party ON_ROOM_STATE_CHANGE",t),this.hideLoading(),this._curRoomState=t,this._curRoomState==h.PARTY_ROOM_STATE.RECRUITING||(this._curRoomState==h.PARTY_ROOM_STATE.FULL?(this.requestLeaveParty(),this.showDialogRoomFull()):this._curRoomState==h.PARTY_ROOM_STATE.PLAYING?this.isGameStartedFromRoom()||(this.requestLeaveParty(),this.showDialogGameRunning()):this._curRoomState==h.PARTY_ROOM_STATE.UNAVAILABLE&&this.showDialogEndGame()),[3,11];case 6:return cc.log("@Party ON_HOST_CHANGE",t),a=t,h.NgcPartyRoom.inst.isHost()&&this._curRoomState==h.PARTY_ROOM_STATE.RECRUITING&&(this.showDialogHostChange(),cc.log("@Party ON_HOST_CHANGE You become new host")),this.partyRoomUI.updateHostInfor(a),[3,11];case 7:return cc.log("@Party ON_PLAYER_CHANGE_STATUS",t),c=t,this.partyRoomUI.updatePlayerInfo(c),this.builder().isAutoStartGame&&this.isGameStartedFromRoom()&&h.NgcPartyRoom.inst.isPlayersReady()&&h.NgcPartyRoom.inst.getAllPlayers().length>=this.builder().minPlayer&&this.scheduleOnce(function(){p.partyRoomUI.showIncomingPlayer(0,!1),p.autoStartNextGame(p.builder().timeDelayNextGame)},.5),[3,11];case 8:return cc.log("@Party ON_PLAYER_CHANGE_INFOR",t),c=t,this.partyRoomUI.updatePlayerInfo(c),[3,11];case 9:return t.gameID,t.gamePass,t.serverUrl,this.startGamePlay(t),cc.log("@Party ON_GAME_START",t),[3,11];case 10:return u=t,this.partyRoomUI.showIncomingPlayer(u),[3,11];case 11:return[2]}})})},t.prototype.onPlayerJoin=function(e){cc.log("@Party onPlayerJoin",e);var t=e.netID==this.builder().netID&&!this.isHost()||this.isHost();this.partyRoomUI.addUser(e,t),this.checkAuthenticationValid()},t.prototype.onPlayerQuit=function(e){cc.log("@Party onPlayerQuit",e),this.partyRoomUI.removeUser(e),this.checkAuthenticationValid()},t.prototype.switchMenu=function(e){if(this._currentMenu!=e)switch(this._currentMenu=e,this.partyRoomUI.switchMenuScreen(this._currentMenu),this._currentMenu){case l.CREATE_GAME_MENU:this.hideLoading();break;case l.WATING_ROOM_MENU:this.onRoomCreate();break;case l.IDLE_MENU:this.showLoading()}},t.prototype.isReadyForNextGame=function(){},t.prototype.startGamePlay=function(e){if(this.exitDialog&&this.exitDialog.closeOnClick(),this._isGameStaredFromRoom=!0,cc.log("@Party PlayGame"),this.isHost()){var t={usersInRoom:h.NgcPartyRoom.inst.getAllPlayers().length,roomID:h.NgcPartyRoom.inst.getPartyID(),autoPlayActivated:this.builder().isAutoStartGame};L.NgcGame.generateRoundID(),y.NgcTelemetry.inst.LogEvent_PlayerClickedStartPartyGame(t),this._autoStartGameEventCall&&(this._autoStartGameEventCall=!1)}this.clearTimeOutValidToken(),this.builder().functionStartGame(e),_.NgcNavBarManager.inst.isPopUpShowing()&&_.NgcNavBarManager.inst.getShowingPopUp().forEach(function(e){e&&e.hide()}),this.hideBannerAds()},t.prototype.onClose=function(){this._isGameStaredFromRoom=!1,this._autoStartGameEventCall=!1,this._currentMenu=null},t.prototype.isGameStartedFromRoom=function(){return this._isGameStaredFromRoom},t.prototype.onRoomCreate=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r,i;return s(this,function(){return cc.log("onRoom Create"),this.isHost()&&(e={allowsRandom:!1,roomID:h.NgcPartyRoom.inst.getPartyID()},y.NgcTelemetry.inst.LogEvent_PlayerClickedCreatePartyRoom(e)),t=this,w.NgcPlatform.inst.genQRCode(this._QRCodeShortenLink,function(e){t.partyRoomUI.addQRCode(e)}),this.hideLoading(),this.initEmote(),o="",(n=h.NgcPartyRoom.getURLParameter(h.URL_PARAMETER.METHOD))?n==h.INVITE_METHOD.QR_CODE?o=h.INVITE_METHOD.QR_CODE:n==h.INVITE_METHOD.SOCIAL?o=h.INVITE_METHOD.SOCIAL:n==h.INVITE_METHOD.IN_GAME&&(o=h.INVITE_METHOD.IN_GAME):o=this.isHost()?h.INVITE_METHOD.HOST:h.INVITE_METHOD.SHARE_LINK,r={joinContext:o,isNewUser:this.builder().isNewUser,roomID:h.NgcPartyRoom.inst.getPartyID()},y.NgcTelemetry.inst.LogEvent_JointRoom(r),this.isHost()||this.builder().isLoginSocial||this.partyRoomUI.visibleEditNameTag(!0),i=h.NgcPartyRoom.inst.getInviteLink()+"&method="+h.INVITE_METHOD.SOCIAL,this.genSocialShareURL(i),[2]})})},t.prototype.allowPlayerJoinCheckBox=function(e){this.alowPlayerJoin=e.isChecked},t.prototype.showLoading=function(){this.partyRoomUI.showLoading(!0)},t.prototype.hideLoading=function(){this.partyRoomUI.showLoading(!1)},t.prototype.getGameID=function(){return h.NgcPartyRoom.inst.getGameID()},t.getURLParameter=function(e){return h.NgcPartyRoom.getURLParameter(e)},t.getServerFromInviteLink=function(){return h.NgcPartyRoom.getURLParameter(h.URL_PARAMETER.SERVER_URL)},t.mustGoToPartyRoom=function(){return h.NgcPartyRoom.isPlayerInvited()&&!o.s_enterRoomOnce},t.prototype.isHost=function(){return h.NgcPartyRoom.inst.isHost()},t.prototype.autoStartNextGame=function(e){var t=this;h.NgcPartyRoom.inst.getAllPlayers().length>=this.builder().minPlayer&&this._curRoomState==h.PARTY_ROOM_STATE.RECRUITING?-1==e?(m.NgcEmotesManager.inst.extendEmotesUI(!1),this._autoStartGameEventCall=!0,this.requestStartParty(),this.partyRoomUI.startGameCountDown(!1,e),this.partyRoomUI.enableStartButton(!1,this.isHost())):(this.partyRoomUI.startGameCountDown(!0,e),this.partyRoomUI.enableStartButton(!1,this.isHost()),this.scheduleOnce(function(){t.autoStartNextGame(e-1)},1)):(this.partyRoomUI.startGameCountDown(!1,e),this.partyRoomUI.enableStartButton(!1,this.isHost()))},t.prototype.onUserChangeName=function(e){this.requestChangeInfor(e)},t.prototype.showDialogRoomFull=function(){return c(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=this,[4,S.NgcDialogManager.createDialog(N.NgcPartyRoomNoticeDialog.dialogType,N.NgcPartyRoomNoticeDialog.urlPrefab,N.NgcPartyRoomNoticeDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(N.NgcPartyRoomNoticeDialog)).init(u.NgcLocalizedManager.t("PWF_ROOM_FULL").text,u.NgcLocalizedManager.t("PWF_ROOM_FULL_CONTENT").text,function(){e.closeUI(!0)}),o.show(),[2]}})})},t.prototype.showDialogEndGame=function(){return c(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=this,[4,S.NgcDialogManager.createDialog(N.NgcPartyRoomNoticeDialog.dialogType,N.NgcPartyRoomNoticeDialog.urlPrefab,N.NgcPartyRoomNoticeDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(N.NgcPartyRoomNoticeDialog)).init(u.NgcLocalizedManager.t("PWF_GAME_ENDS").text,u.NgcLocalizedManager.t("PWF_GAME_ENDS_CONTENT").text,function(){e.closeUI(!0)}),o.show(),[2]}})})},t.prototype.showDialogGameRunning=function(){return c(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=this,[4,S.NgcDialogManager.createDialog(N.NgcPartyRoomNoticeDialog.dialogType,N.NgcPartyRoomNoticeDialog.urlPrefab,N.NgcPartyRoomNoticeDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(N.NgcPartyRoomNoticeDialog)).init(u.NgcLocalizedManager.t("PWF_GAME_STARTED").text,u.NgcLocalizedManager.t("PWF_GAME_STARTED_CONTENT").text,function(){e.closeUI(!0)}),o.show(),[2]}})})},t.prototype.showDialogHostChange=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,S.NgcDialogManager.createDialog(N.NgcPartyRoomNoticeDialog.dialogType,N.NgcPartyRoomNoticeDialog.urlPrefab,N.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(N.NgcPartyRoomNoticeDialog)).init(u.NgcLocalizedManager.t("PWF_HOST_CHANGES").text,u.NgcLocalizedManager.t("PWF_HOST_CHANGE_CONTENT").text,function(){}),t.show(),[2]}})})},t.prototype.showExitDialog=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),c(this,void 0,void 0,function(){var o,n,r;return s(this,function(i){switch(i.label){case 0:return this._isShowExitPopUp?[2]:(this._isShowExitPopUp=!0,o=this,[4,S.NgcDialogManager.createDialog(b.NgcPartyRoomConfirmDialog.dialogType,b.NgcPartyRoomConfirmDialog.urlPrefab,b.NgcPartyRoomConfirmDialog.bundleName)]);case 1:return n=i.sent(),(r=n.getComponent(b.NgcPartyRoomConfirmDialog)).init(u.NgcLocalizedManager.t("PWF_LEAVE_PARTY").text,u.NgcLocalizedManager.t("PWF_LEAVE_PARTY_CONTENT").text,function(){o.closeUI(t),o._isShowExitPopUp=!1,o.exitDialog=null,e&&e(!0)},function(){o._isShowExitPopUp=!1,o.exitDialog=null,e&&e(!1)}),r.show(),this.exitDialog=r,[2]}})})},t.prototype.onClickExit=function(){this.showExitDialog(null,!0)},t.prototype.onClickStartGame=function(){this.requestStartParty()},t.prototype.showCommingSoonDialgo=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,S.NgcDialogManager.createDialog(N.NgcPartyRoomNoticeDialog.dialogType,N.NgcPartyRoomNoticeDialog.urlPrefab,N.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(N.NgcPartyRoomNoticeDialog)).init(u.NgcLocalizedManager.t("NGG_COMING_SOON").text,u.NgcLocalizedManager.t("NGG_COMING_SOON").text,function(){}),t.show(),[2]}})})},t.prototype.displayLogoutNoticeDialog=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return console.log("displayLogoutNoticeDialog"),[4,S.NgcDialogManager.createDialog(N.NgcPartyRoomNoticeDialog.dialogType,N.NgcPartyRoomNoticeDialog.urlPrefab,N.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(N.NgcPartyRoomNoticeDialog)).init(u.NgcLocalizedManager.t("NTM_ERROR").text,u.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){C.default.resetWhenLoggedInFromAnotherPlace(function(){B.UserInfo.resetPrivateData()})}),t.show(),this._isShowingErrorPopup=!0,[2]}})})},t.prototype.displayReloadNoticeDialog=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return console.log("displayReloadNoticeDialog"),[4,S.NgcDialogManager.createDialog(N.NgcPartyRoomNoticeDialog.dialogType,N.NgcPartyRoomNoticeDialog.urlPrefab,N.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(N.NgcPartyRoomNoticeDialog)).init(u.NgcLocalizedManager.t("NTM_ERROR").text,u.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){this._joinByInvited=!0,T.Utils.reloadPage(),this._isShowingErrorPopup=!1}),t.show(),this._isShowingErrorPopup=!0,[2]}})})},t.prototype.showLoginDialog=function(){return c(this,void 0,void 0,function(){return s(this,function(){return _.NgcNavBarManager.inst&&"function"==typeof _.NgcNavBarManager.inst.logInOnClick&&(this._needToCreateGame=!0,_.NgcNavBarManager.inst.logInOnClick()),[2]})})},t.prototype.initEmote=function(){if(m.NgcEmotesManager.inst){var e={getPlayerEmojiPosByID:this.getPosEmojiForPlayerById.bind(this),checkPlayerIsDeadByID:this.checkPlayerIsDead,parentForBubble:this.partyRoomUI.parentofBubble,parentForEmojis:this.partyRoomUI.parentofEmoji};cc.log(e),m.NgcEmotesManager.inst.init(e),m.NgcEmotesManager.inst.setBroadcastNetID(h.NgcPartyRoom.inst.getPartyID()),m.NgcEmotesManager.inst.allowScrollView(!1),m.NgcEmotesManager.inst.extendEmotesUI(!1)}else cc.error("Emote doesn't have instance")},t.prototype.getPosEmojiForPlayerById=function(e){return cc.v2(this.partyRoomUI.getPosEmojiForPlayerById(e))},t.prototype.builder=function(){return o.s_requestInfor||cc.error("Need to init set Infor first\n ex :let request = new PartyInfoBuilder()\n request.setPlayerName(NgcUserInfo.localUserName)\n        .setCountry(NgcCountryFlagsManager.localCountry)\n       .setMaxPlayer(32)\n       .setMinPlayer(2)\n       .setPlayerNetID(NetClient.inst.localPlayerNetID)\n       .setSkin(UserInfo.curSkin)\n       .setAvatarURL(NgcUserInfo.avatarUrl)\n        .setTimeDelayNextGame(5)\n       .setAvatarURL(NgcUserInfo.avatarUrl)\n       .setPrivate(true)\n       .setAllowBot(false)\n       .setJoinPayload({})\n       .setStartPayload({})\n       .setStartGameFuncion(()=>{});)'"),o.s_requestInfor},t.prototype.onButtonFaceBookClick=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=h.NgcPartyRoom.inst.getInviteLink()+"&method="+h.INVITE_METHOD.SOCIAL,""!=this._socialShareURL?[3,2]:[4,this.genSocialShareURL(e)];case 1:o.sent(),o.label=2;case 2:return y.NgcTelemetry.inst.LogEvent_ShareClick("PartyRoom","Facebook"),"undefined"!=typeof FB?FB.ui({display:"popup",method:"share",mobile_iframe:!0,href:""==this._socialShareURL?e:this._socialShareURL},function(e){e&&(console.log("Share success: post_id = "+e.post_id),y.NgcTelemetry.inst.LogEvent_ShareComplete("PartyRoom","Facebook"))}):(t="https://www.facebook.com/sharer/sharer.php?u=",t+=encodeURIComponent(this._socialShareURL),cc.sys.openURL(t)),[2]}})})},t.prototype.onButtonTwitterClick=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=h.NgcPartyRoom.inst.getInviteLink()+"&method="+h.INVITE_METHOD.SOCIAL,""!=this._socialShareURL?[3,2]:[4,this.genSocialShareURL(e)];case 1:o.sent(),o.label=2;case 2:return t="https://twitter.com/intent/tweet?text=",t+=encodeURIComponent(this.description+" "+(""==this._socialShareURL?e:this._socialShareURL)),cc.log("shareURL",t),cc.log("description",this.description),cc.sys.openURL(t),y.NgcTelemetry.inst.LogEvent_ShareClick("PartyRoom","Twitter"),[2]}})})},t.prototype.onButtonEmailClick=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=h.NgcPartyRoom.inst.getInviteLink()+"&method="+h.INVITE_METHOD.SOCIAL,""!=this._socialShareURL?[3,2]:[4,this.genSocialShareURL(e)];case 1:o.sent(),o.label=2;case 2:return t="mailto:example@website.com?subject=",t+=encodeURIComponent(this.gameTitle)+"&body=",t+=encodeURIComponent(this.description+" "+(""==this._socialShareURL?e:this._socialShareURL)),cc.log("shareURL",t),window.location.href=t,y.NgcTelemetry.inst.LogEvent_ShareClick("PartyRoom","Email"),[2]}})})},t.prototype.onButtonCopyClick=function(){this.copyClipboard(),this.isPC()||(this.shareNative(),this.partyRoomUI.onQRCodeButtonEvent())},t.prototype.copyClipboard=function(){return c(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){var o=h.NgcPartyRoom.inst.getInviteLink(!0);if(w.NgcPlatform.isRunFromApp()&&w.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_COPYLINK:o}),"*"),null!=o&&""!=o||(o="test"),void 0===navigator.clipboard)console.log("navigator.clipboard"),e.copyLinkToClipboardAlternative(o),t();else{var n=navigator.clipboard.writeText(o);n.then(function(){e._isAbleCopy=!0,e.partyRoomUI.showClickCopiedText(),t()}),n.catch(function(){e.copyLinkToClipboardAlternative(o),t()})}})];case 1:return t.sent(),[2]}})})},t.prototype.copyLinkToClipboardAlternative=function(e){var t=this,o=document.createElement("textarea");o.value=e,o.style.position="fixed",document.body.appendChild(o),o.focus(),o.select(),setTimeout(function(){try{var e=document.execCommand("copy"),n=e?"successful":"unsuccessful";t._isAbleCopy=!!e,console.warn(n)}catch(r){cc.warn("Was not possible to copy te text: ",r),t._isAbleCopy=!1}document.body.removeChild(o),t.partyRoomUI.showClickCopiedText()},250)},t.prototype.isAbleCopy=function(){return this._isAbleCopy},t.prototype.shareNative=function(){var e=h.NgcPartyRoom.inst.getInviteLink(!0);w.NgcPlatform.isRunFromApp()?w.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:"native",link:e}}),"*"):navigator.share&&navigator.share({url:e}).then(function(){console.log("Share was successful.")}).catch(function(e){console.log("Sharing failed",e)})},t.prototype.isPC=function(){return!cc.sys.isMobile},t.prototype.onSocialCallBack=function(e,t){cc.log(e),cc.log(t),"login"==t?(this.builder().setLoginSocial(!0).setPlayerName(C.default.localUserName).setAvatarURL(C.default.avatarUrl),cc.log("(UserInfo.avatarUrl",C.default.avatarUrl),this.partyRoomUI.setLoginStatus(!0),this.timeoutCheckValidToken(),this._needToCreateGame?this.onClickRequestJoinGame():this.requestChangeInfor(C.default.localUserName),this._needToCreateGame=!1):"logout"==t?(this.isHost()&&h.NgcPartyRoom.isLoginMandatory()?this.closeUI(!0):(cc.log("Party change name",C.default.localUserName),this.builder().setLoginSocial(!1),this.builder().setPlayerName(C.default.localUserName).setAvatarURL(C.default.avatarUrl),this.requestChangeInfor(C.default.localUserName),this.partyRoomUI.setLoginStatus(!1),this.timeoutCheckValidToken()),this._needToCreateGame=!1):"onPreLogin"==t?this.clearTimeOutValidToken():"close"==t&&(this.timeoutCheckValidToken(),this._needToCreateGame=!1)},t.prototype.genSocialShareURL=function(e){return c(this,void 0,void 0,function(){var t,o=this;return s(this,function(){return(t=h.NgcPartyRoom.inst.shortenURL(e)).then(function(e){if(e){var t=JSON.parse(e);t&&t.url&&(o._socialShareURL=t.url,o._socialShareURL.startsWith("https://")||o._socialShareURL.startsWith("http://")||(o._socialShareURL="https://"+o._socialShareURL))}cc.log("#Share URL SOCIAL",e)}),t.catch(function(e){cc.warn(e)}),cc.log("#Share URL SOCIAL",e),[2]})})},t.prototype.checkAuthenticationValid=function(){var e=this;if(Date.now()-this._checkTokenCurTime>this._checkTokenDelayTime){this._checkTokenCurTime=Date.now();var t=this;f.default.inst.serviceGet("/auth/check",null,function(o){o&&(g.NgcSocial.inst.checkLoginStatus().then(function(){g.NgcSocial.inst.isConnected()&&g.NgcSocial.inst.logout(function(){})}),e.builder().isLoginSocial&&t.builder().functionOnMutilLogin&&t.builder().functionOnMutilLogin(),e.clearTimeOutValidToken(),e.closeUI(!0))})}},t.prototype.showBannerAds=function(){var e,t;O.default.inst.isAdsPoincutAvailable(O.NgcPointcuts.bannerPartyRoom,I.AdsType.Banner)?null===(e=O.default.inst)||void 0===e||e.showBanner(O.NgcPointcuts.bannerPartyRoom):null===(t=O.default.inst)||void 0===t||t.hide()},t.prototype.hideBannerAds=function(){var e;null===(e=O.default.inst)||void 0===e||e.hide(O.NgcPointcuts.bannerPartyRoom)},t.s_enterRoomOnce=!1,t.TIME_OUT_FOR_SCREEN_DISAPPEAR=5,a([U(v.NgcPartyRoomUI)],t.prototype,"partyRoomUI",void 0),a([U],t.prototype,"gameTitle",void 0),a([U],t.prototype,"description",void 0),o=a([G],t)}(d.default);n.NgcPartyRoomManager=x,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog":"PartyRoomConfirmDialog","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomEnterCodeDialog":"PartyRoomEnterCodeDialog","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog":"PartyRoomNoticeDialog","../../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../NanoGameCore/GameFramework/Scripts/NgcGame":"NgcGame","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/Social/Social":"Social","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../Network/ImprovedNetClient":"ImprovedNetClient","../../Network/NetClient":"NetClient","../../UserInfo":"UserInfo","./PartyRoomUI":"PartyRoomUI"}],PartyRoomNoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"891602V7ZdHpYyr5Je5X6NA","PartyRoomNoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomNoticeDialog=void 0;var a=e("./PartyRoomDialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.messageLabel=null,t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t,o){this._callBackOk=o,this.titleLabel.string=e,this.messageLabel.string=t},t.prototype.okOnClick=function(){this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="PartyRoomNoticeDialog",t.bundleName="02_dialog_PWF",t.dialogType="NgcPartyRoomNoticeDialog",i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Label)],t.prototype,"messageLabel",void 0),i([s],t)}(a.NgcPartyRoomDialogBase);o.NgcPartyRoomNoticeDialog=u,cc._RF.pop()},{"./PartyRoomDialogBase":"PartyRoomDialogBase"}],PartyRoomUI:[function(t,o,n){"use strict";cc._RF.push(o,"98eed6b+hNH94Hxs79AOP+N","PartyRoomUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcPartyRoomUI=void 0;var c=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),s=t("../../../NanoGameCore/Services/Ads/Ads"),l=t("../../../NanoGameCore/Services/PartyRoom/PartyRoom"),u=t("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyPlayerItem"),p=t("./PartyRoomManager"),d=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),f=t("../../../NanoGameCore/Core/Utils"),h=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),g=t("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),y=t("../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),m=cc._decorator,_=m.ccclass,v=m.property,S=cc.v3(50,50),N=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerPrefab=null,e.playerPanelNode=null,e.buttonStartNode=null,e.buttonCreateGameNode=null,e.buttonJoinGameNode=null,e.roomCodeNode=null,e.roomCodeLbl=null,e.headerCreateGameNode=null,e.buttonInviteNode=null,e.qrCodeSpriteMobile=null,e.qrCodeSpritePC=null,e.createGameMenuNode=null,e.watingRoomMenuNode=null,e.translationGroupNode=null,e.qrCodeChildNodeMobile=null,e.qrCodeChildNodePC=null,e.qrParentNodePC=null,e.qrParentNodeMobile=null,e.shareContainerPC=null,e.loadingNode=null,e.numberOfPlayerLabel=null,e.commingPlayerLabel=null,e.partyIDEditBox=null,e.nextGameStartLabel=null,e.hostnextGameStartLabel=null,e.loadingIconCreateGame=null,e.loginRequireNode=null,e.createGameGroupLabelNode=null,e.editNameTagNode=null,e.parentofBubble=null,e.parentofEmoji=null,e.settingButtonNode=null,e.headerWaitingNode=null,e.avatarContainerNode=null,e.pcalertTextNode=null,e.sharinglinkLabel=null,e.orNode=null,e.copyButton=null,e.buttonClose=null,e.roomCodeLbls=[],e._isAbleCopy=!1,e._listPlayers=[],e._isShowQRCode=!1,e._timeDT=0,e._loginSocial=!1,e._avatarContainerWidgetTop=0,e._numOfComingPlayer=0,e._curUserEffect="",e}return i(o,t),o.prototype.start=function(){this.updateWidgetTarget(),this._avatarContainerWidgetTop=this.avatarContainerNode.getComponent(cc.Widget).top,p.NgcPartyRoomManager.inst.isPC()?(this.qrCodeChildNode=this.qrCodeChildNodePC,this.qrParentNode=this.qrParentNodePC):(this.qrCodeChildNode=this.qrCodeChildNodeMobile,this.qrParentNode=this.qrParentNodeMobile),this.qrCodeChildNode.active=!0,this.qrParentNode.active=!1,this.buttonClose.node.active=!1,this.applyShareConfig(),s.NgcAds.inst&&s.NgcAds.inst.isBannerShowing&&this.adsBannerAlign(!0),cc.sys.isMobile||cc.view.on("canvas-resize",this.onResized,this)},o.prototype.applyShareConfig=function(){p.NgcPartyRoomManager.inst.isPC()&&(this.shareContainerPC.getChildByName("facebook").active=this.checkShareConfig("facebook"),this.shareContainerPC.getChildByName("twitter").active=this.checkShareConfig("twitter"),this.shareContainerPC.getChildByName("email").active=this.checkShareConfig("email"))},o.prototype.checkShareConfig=function(e){return!g.NgcBuildConfig.services.ShareMe.hasOwnProperty(e)||g.NgcBuildConfig.services.ShareMe[e]},o.prototype.updateWidgetTarget=function(){var e=cc.find("Canvas");if(e){var t=this.avatarContainerNode.getComponent(cc.Widget);cc.sys.isMobile||(this.avatarContainerNode.width=Math.min(.85*e.width,1120)),t.target=e,t.top=g.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height+20+d.default.inst.navBarIconNode.height,t.updateAlignment();var o=this.loadingNode.getComponent(cc.Widget);o.target=e,o.updateAlignment()}},o.prototype.reset=function(){this._listPlayers.forEach(function(e){e.node.destroy()}),this._listPlayers=[],this.enableStartButton(!1,!1),this.createGameMenuNode.opacity=255,this.nextGameStartLabel.node.active=!1,this._timeDT=0,this.resetButtonCreateGame(),this.visibleEditNameTag(!1)},o.prototype.addUser=function(e,t){var o=cc.instantiate(this.playerPrefab);o.parent=this.playerPanelNode,o.setScale(cc.view.getFrameSize().height/cc.winSize.height);var n=o.getComponent(u.NgcPartyPlayerItem);n&&n.setInfo(e,t),this._listPlayers.push(n);for(var r=0,i=this._listPlayers.length-1;i>0;i--)this._listPlayers[i].node.setSiblingIndex(r),r++;this.updateNumberOfPlayer(this._listPlayers.length),this.updateHostInfor()},o.prototype.removeUser=function(e){for(var t in this._listPlayers){var o=this._listPlayers[t];if(e.netID==o.netID){this._listPlayers[t].node.destroy(),delete this._listPlayers[t],this._listPlayers.splice(parseInt(t),1),this.updateHostInfor();break}}this.updateNumberOfPlayer(this._listPlayers.length),this.showIncomingPlayer(this._numOfComingPlayer,!0)},o.prototype.enableStartButton=function(e,t){t?(this.buttonStartNode.getComponent(cc.Button).enabled=e,this.buttonStartNode.active=!0,this.buttonStartNode.opacity=e?255:125):this.buttonStartNode.active=e},o.prototype.updateHostInfor=function(e){if(p.NgcPartyRoomManager.inst.isHost()){var t=this._listPlayers.length>=p.NgcPartyRoomManager.inst.builder().minPlayer&&l.NgcPartyRoom.inst.isPlayersReady();this.enableStartButton(t,!0),this.nextGameStartLabel.node.active=!1}else this.showWaitingHostLabel(),this.enableStartButton(!1,!1);e&&this.updatePlayerInfo(e)},o.prototype.updatePlayerInfo=function(e){for(var t in this._listPlayers)if(e.netID==this._listPlayers[t].netID){this._listPlayers[t].setInfo(e);break}if(l.NgcPartyRoom.inst.isHost()){var o=this._listPlayers.length>=p.NgcPartyRoomManager.inst.builder().minPlayer&&l.NgcPartyRoom.inst.isPlayersReady();this.enableStartButton(o,!0)}},o.prototype.addQRCode=function(e){p.NgcPartyRoomManager.inst.isPC()?this.qrCodeSpritePC.spriteFrame=e:this.qrCodeSpriteMobile.spriteFrame=e},o.prototype.onClose=function(){this.reset()},o.prototype.onShow=function(){},o.prototype.switchMenuScreen=function(e){switch(this._currentMenuNode?this._currentMenuNode.active=!1:(this.watingRoomMenuNode.active=!1,this.createGameMenuNode.active=!1),e){case p.PARTY_MENU_SCREEN.CREATE_GAME_MENU:this.createGameMenuNode.active=!0,this._currentMenuNode=this.createGameMenuNode,this.visibleLoginRequire(!this._loginSocial);break;case p.PARTY_MENU_SCREEN.WATING_ROOM_MENU:this.visibleLoadingIcon(!1),this.watingRoomMenuNode.active=!0,this._currentMenuNode=this.watingRoomMenuNode,p.NgcPartyRoomManager.inst.isHost()?this.translation():(this.updateQRCodePosition(),this.visibleEditNameTag(!0)),this.updateRoomCode();break;case p.PARTY_MENU_SCREEN.IDLE_MENU:}this._curScreen=e},o.prototype.updateRoomCode=function(){var e=""+p.NgcPartyRoomManager.inst.getRoomCode();this.roomCodeLbls.forEach(function(t){t&&(t.string=e)})},o.prototype.showWaitingHostLabel=function(){p.NgcPartyRoomManager.inst.isHost()||(this.nextGameStartLabel.node.active=!0,this.nextGameStartLabel.string=c.NgcLocalizedManager.t("PWF_WAITING_HOST_START").text)},o.prototype.startGameCountDown=function(e,t){p.NgcPartyRoomManager.inst.isHost()?(this.hostnextGameStartLabel.node.active=e,this.nextGameStartLabel.node.active=!1,e&&(this.hostnextGameStartLabel.string=c.NgcLocalizedManager.t("PWF_START_IN").text+"\n"+t)):(this.nextGameStartLabel.node.active=e,this.hostnextGameStartLabel.node.active=!1,e?this.nextGameStartLabel.string=c.NgcLocalizedManager.t("PWF_START_IN").text+"\n"+t:this.showWaitingHostLabel())},o.prototype.showLoading=function(e){this.loadingNode.active=e},o.prototype.updateNumberOfPlayer=function(e){c.NgcLocalizedManager.setTextKey(this.numberOfPlayerLabel,"PWF_JOINED_PARAM",[e,p.NgcPartyRoomManager.inst.builder().maxPlayer])},o.prototype.translation=function(){var e=this;p.NgcPartyRoomManager.inst.isPC()&&this.setShareUrl(l.NgcPartyRoom.inst.getInviteLink(!0)),this.translationGroupNode.opacity=0,this.buttonInviteNode.opacity=0;var t=this.qrParentNode.height;this.qrParentNode.scaleY=this.buttonCreateGameNode.height/t,this.qrParentNode.active=!0,this.qrParentNode.opacity=255,this.qrParentNode.parent.convertToNodeSpaceAR(this.buttonInviteNode.parent.convertToWorldSpaceAR(this.buttonInviteNode.position)).y,this.qrParentNode.position=this.qrParentNode.parent.convertToNodeSpaceAR(this.buttonCreateGameNode.parent.convertToWorldSpaceAR(this.buttonCreateGameNode.position)),this.qrCodeChildNode.opacity=0,this._isShowQRCode=!0,this.scheduleOnce(function(){var t=e.qrParentNode.parent.convertToNodeSpaceAR(e.buttonInviteNode.parent.convertToWorldSpaceAR(e.buttonInviteNode.position)).y;cc.tween(e.qrParentNode).to(.2,{y:t},{easing:function(e){return e*e}}).start()}),cc.tween(this.qrParentNode).to(.3,{scaleY:1,scaleX:1},{easing:function(e){return e*e}}).call(function(){e.qrCodeChildNode.opacity=150,cc.tween(e.qrCodeChildNode).to(.1,{opacity:255},{easing:"quintIn"}).start();var t=cc.sequence(cc.scaleTo(.08,1.015),cc.scaleTo(.08,.985),cc.scaleTo(.08,1));e.qrCodeChildNode.scale=1,e.qrCodeChildNode.runAction(t),cc.tween()}).start(),cc.tween(this.translationGroupNode).to(.3,{opacity:255},{easing:function(e){return e*e}}).call(function(){e.buttonInviteNode.opacity=255}).start(),this.showClickCopiedText()},o.prototype.onCloseQRCode=function(){this._isShowQRCode&&this.onQRCodeButtonEvent()},o.prototype.onQRCodeButtonEvent=function(){var e=this;if(this.updateQRCodePosition(),this.buttonInviteNode.active=!1,this._isShowQRCode){this._isShowQRCode=!1;var t=this.buttonInviteNode.height,o=this.buttonInviteNode.width,n=t/this.qrParentNode.height,r=o/this.qrParentNode.width;cc.tween(this.qrCodeChildNode).to(.2,{opacity:0},{easing:"quintIn"}).start(),cc.tween(this.qrParentNode).to(.24,{scaleY:n-.01,scaleX:r-.01},{easing:"quintIn"}).to(.08,{scaleY:n+.01,scaleX:r+.01},{easing:"quintIn"}).to(.08,{scaleY:n,scaleX:r},{easing:"quintIn"}).call(function(){e.qrParentNode.active=!1,e.buttonInviteNode.active=!0}).start()}else p.NgcPartyRoomManager.inst.isPC()&&this.setShareUrl(l.NgcPartyRoom.inst.getInviteLink(!0)),p.NgcPartyRoomManager.inst.copyClipboard(),this._isShowQRCode=!0,this.qrParentNode.active=!0,cc.tween(this.qrParentNode).to(.24,{scaleY:1.01,scaleX:1.01},{easing:"quintIn"}).call(function(){e.qrCodeChildNode.opacity=150,cc.tween(e.qrCodeChildNode).to(.1,{opacity:255},{easing:"quintIn"}).start()}).to(.08,{scaleY:.99,scaleX:.99},{easing:"quintIn"}).to(.08,{scaleY:1,scaleX:1},{easing:"quintIn"}).call(function(){}).start(),cc.tween(this.qrParentNode).to(.2,{opacity:255},{easing:"quintIn"}).start()},o.prototype.updateQRCodePosition=function(){this.qrParentNode.position=this.qrParentNode.parent.convertToNodeSpaceAR(this.buttonInviteNode.parent.convertToWorldSpaceAR(this.buttonInviteNode.position))},o.prototype.visibleLoadingIcon=function(e){this.loadingIconCreateGame.active=e,this.createGameGroupLabelNode.active=!e},o.prototype.onCreateButtonClick=function(){this.visibleLoadingIcon(!0),this.buttonCreateGameNode.getComponent(cc.Button).enabled=!1,this.buttonCreateGameNode.opacity=200,cc.tween(this.headerCreateGameNode).to(.2,{opacity:0}).start()},o.prototype.resetButtonCreateGame=function(){this.buttonCreateGameNode.getComponent(cc.Button).enabled=!0,this.buttonCreateGameNode.opacity=255,this.headerCreateGameNode.opacity=255,this.visibleLoadingIcon(!1)},o.prototype.showIncomingPlayer=function(e,t){void 0===t&&(t=!0);var o=this._listPlayers.length<p.NgcPartyRoomManager.inst.builder().maxPlayer;this._numOfComingPlayer=e,t&&o?(this.commingPlayerLabel.node.active=!0,this.commingPlayerLabel.string=0!=e?e+" "+c.NgcLocalizedManager.t("PWF_PLAYER_COMMING").text:c.NgcLocalizedManager.t("PWF_WAITING_FOR_PLAYER").text):this.commingPlayerLabel.node.active=!1},o.prototype.visibleLoginRequire=function(e){this.loginRequireNode.active=e&&l.NgcPartyRoom.isLoginMandatory()},o.prototype.visibleEditNameTag=function(e){var t=this,o=d.default.inst.navBarIconNode;if(e&&o){var n=f.Utils.getWorldPos(o),r=cc.v2(this.editNameTagNode.width/2,n.y-o.height/2-this.editNameTagNode.height/2);f.Utils.setWorldPos(this.editNameTagNode,r),this.editNameTagNode.opacity=0,this.editNameTagNode.active=!0,cc.tween(this.editNameTagNode).to(.3,{opacity:255}).call(function(){t.scheduleOnce(function(){cc.tween(t.editNameTagNode).to(.3,{opacity:0}).call(function(){t.editNameTagNode.active=!1,t.editNameTagNode.opacity=255}).start()},3)}).start()}else this.editNameTagNode.active=e},o.prototype.setLoginStatus=function(e){this._loginSocial=e,this.visibleLoginRequire(!this._loginSocial)},o.prototype.onSettingClick=function(e){this.commingSoonEffect(e.target)},o.prototype.onMicrophoneClick=function(e){cc.log(e.target),this.commingSoonEffect(e.target)},o.prototype.commingSoonEffect=function(e){var t=e.getComponentInChildren(cc.Animation);t&&t.play()},o.prototype.getPosEmojiForPlayerById=function(e){for(var t=cc.v3(0,0),o=0,n=this._listPlayers;o<n.length;o++){var r=n[o];r.netID==e&&(t=r.getWorldPos(),this.updateAvatarEffect(e))}return t.addSelf(S),t},o.prototype.updateAvatarEffect=function(e){if(this._curUserEffect!=e){this._curUserEffect=e;var t=this.findUserByID(e);t&&(t.node.setSiblingIndex(0),t.enableEffect(!1))}},o.prototype.alignWhenHasAds=function(e){if(e?(this.settingButtonNode.getComponent(cc.Widget).top=150,this.headerWaitingNode.getComponent(cc.Widget).top=100,this.buttonClose.getComponent(cc.Widget).top=100):(this.settingButtonNode.getComponent(cc.Widget).top=70,this.headerWaitingNode.getComponent(cc.Widget).top=20,this.buttonClose.getComponent(cc.Widget).top=20),this.settingButtonNode.getComponent(cc.Widget).updateAlignment(),this.headerWaitingNode.getComponent(cc.Widget).updateAlignment(),this.buttonClose.getComponent(cc.Widget).updateAlignment(),!cc.sys.isMobile){if(e)this.avatarContainerNode.getComponent(cc.Widget).top=this._avatarContainerWidgetTop;else{var t=this.avatarContainerNode.getComponent(cc.Widget).top;this.avatarContainerNode.getComponent(cc.Widget).top=t-110}this.avatarContainerNode.getComponent(cc.Widget).updateAlignment()}},o.prototype.adsBannerAlign=function(){this.node.getComponent(cc.Widget).top=0,this.playerPanelNode.getComponent(cc.Layout).paddingTop},o.prototype.findUserIndex=function(e){for(var t=0;t<this._listPlayers.length;t++)if(this._listPlayers[t].netID==e)return t;return 0},o.prototype.findUserByID=function(e){for(var t=0;t<this._listPlayers.length;t++)if(this._listPlayers[t].netID==e)return this._listPlayers[t];return null},o.prototype.update=function(e){this._curScreen==p.PARTY_MENU_SCREEN.WATING_ROOM_MENU&&(this._timeDT+=e),this.updateMovePWFButtons()},o.prototype.updateMovePWFButtons=function(){cc.sys.isMobile&&y.NgcEmotesManager.inst&&y.NgcEmotesManager.inst.currentEmotesUIInst&&(y.NgcEmotesManager.inst.currentEmotesUIInst.isShowUp?this.buttonStartNode.hideByEmoji||(this.buttonStartNode.hideByEmoji=!0,cc.tween(this.buttonStartNode).to(.15,{opacity:0}).start(),cc.tween(this.buttonInviteNode).to(.15,{opacity:0}).start()):this.buttonStartNode.hideByEmoji&&(this.buttonStartNode.hideByEmoji=!1,cc.tween(this.buttonStartNode).to(.15,{opacity:255}).start(),cc.tween(this.buttonInviteNode).to(.15,{opacity:255}).start()))},o.prototype.onEditBoxChange=function(e){cc.log("Text change,te",e),p.NgcPartyRoomManager.inst.isPC()&&this.setShareUrl(l.NgcPartyRoom.inst.getInviteLink(!0))},o.prototype.showClickCopiedText=function(){var e=this;p.NgcPartyRoomManager.inst.isPC()&&(this.copyButton.active=!0,this.pcalertTextNode.opacity=255,this.scheduleOnce(function(){cc.tween(e.pcalertTextNode).to(.3,{opacity:0}).start()},3))},o.prototype.setShareUrl=function(t){if(this.sharinglinkLabel.node.active=!0,this.sharinglinkLabel.node.getComponent(cc.EditBox).string=t,!p.NgcPartyRoomManager.inst.isAbleCopy()){var o=this.sharinglinkLabel.node.getComponent(cc.EditBox);this.scheduleOnce(function(){try{o.focus(),o._impl._elem.select(),cc.log("cp",o)}catch(e){cc.warn(e)}},.5)}},o.prototype.onResized=function(){this.updateWidgetTarget()},a([v(cc.Prefab)],o.prototype,"playerPrefab",void 0),a([v(cc.Node)],o.prototype,"playerPanelNode",void 0),a([v(cc.Node)],o.prototype,"buttonStartNode",void 0),a([v(cc.Node)],o.prototype,"buttonCreateGameNode",void 0),a([v(cc.Node)],o.prototype,"buttonJoinGameNode",void 0),a([v(cc.Node)],o.prototype,"roomCodeNode",void 0),a([v(cc.Label)],o.prototype,"roomCodeLbl",void 0),a([v(cc.Node)],o.prototype,"headerCreateGameNode",void 0),a([v(cc.Node)],o.prototype,"buttonInviteNode",void 0),a([v(cc.Sprite)],o.prototype,"qrCodeSpriteMobile",void 0),a([v(cc.Sprite)],o.prototype,"qrCodeSpritePC",void 0),a([v(cc.Node)],o.prototype,"createGameMenuNode",void 0),a([v(cc.Node)],o.prototype,"watingRoomMenuNode",void 0),a([v(cc.Node)],o.prototype,"translationGroupNode",void 0),a([v(cc.Node)],o.prototype,"qrCodeChildNodeMobile",void 0),a([v(cc.Node)],o.prototype,"qrCodeChildNodePC",void 0),a([v(cc.Node)],o.prototype,"qrParentNodePC",void 0),a([v(cc.Node)],o.prototype,"qrParentNodeMobile",void 0),a([v(cc.Node)],o.prototype,"shareContainerPC",void 0),a([v(cc.Node)],o.prototype,"loadingNode",void 0),a([v(cc.Label)],o.prototype,"numberOfPlayerLabel",void 0),a([v(cc.Label)],o.prototype,"commingPlayerLabel",void 0),a([v(cc.EditBox)],o.prototype,"partyIDEditBox",void 0),a([v(h.NgcLabelLocalized)],o.prototype,"nextGameStartLabel",void 0),a([v(cc.Label)],o.prototype,"hostnextGameStartLabel",void 0),a([v(cc.Node)],o.prototype,"loadingIconCreateGame",void 0),a([v(cc.Node)],o.prototype,"loginRequireNode",void 0),a([v(cc.Node)],o.prototype,"createGameGroupLabelNode",void 0),a([v(cc.Node)],o.prototype,"editNameTagNode",void 0),a([v(cc.Node)],o.prototype,"parentofBubble",void 0),a([v(cc.Node)],o.prototype,"parentofEmoji",void 0),a([v(cc.Node)],o.prototype,"settingButtonNode",void 0),a([v(cc.Node)],o.prototype,"headerWaitingNode",void 0),a([v(cc.Node)],o.prototype,"avatarContainerNode",void 0),a([v(cc.Node)],o.prototype,"pcalertTextNode",void 0),a([v(cc.Label)],o.prototype,"sharinglinkLabel",void 0),a([v(cc.Node)],o.prototype,"orNode",void 0),a([v(cc.Node)],o.prototype,"copyButton",void 0),a([v(cc.Button)],o.prototype,"buttonClose",void 0),a([v(cc.Label)],o.prototype,"roomCodeLbls",void 0),a([_],o)}(cc.Component);n.NgcPartyRoomUI=N,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyPlayerItem":"PartyPlayerItem","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","./PartyRoomManager":"PartyRoomManager"}],PartyRoom_impl_GameServerSrv:[function(t,o,n){"use strict";cc._RF.push(o,"e8050zJ8bxIwbvONG0MiTay","PartyRoom_impl_GameServerSrv");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},c=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../Core/Utils"),l=t("../../GameFramework/Scripts/BuildConfig"),u=t("../../GameFramework/Scripts/Network/NgcNetClient"),p=t("../../GameFramework/Scripts/Network/NgcNetClientRefactor"),d=t("../Platform/Platform"),f=t("./PartyRoom"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("PartyRoom_impl_PartyRoomSrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("PartyRoom_impl_PartyRoomSrv initialized")})},t.prototype._getName=function(){return"PartyRoom"},t.prototype._getPartyID=function(){return this._curPartyID},t.prototype._getPartyName=function(){return this._curPartyName},t.prototype._getGameID=function(){return this._curGameID},t.prototype._isHost=function(){return this._Host},t.prototype._getServerAdress=function(){this._serverAdress},t.prototype._requestJoinParty=function(e,t,o,n,r,i,a,c){this._isAbleToRecieveMessage=!0,this._curNetID=n;var s=this.clientMsg_RequestJoinParty(e,t,o,n,r,i,a,c);cc.log("@Party _requestJoinParty",s),l.NgcBuildConfig.useNgcServer?p.NgcNetClientRefactor.inst.send(JSON.stringify(s)):u.NgcNetClient.inst._sendWebsocketMessage(JSON.stringify(s))},t.prototype._sendMessageToParty=function(e,t,o){if(this._isValid(e)){var n=this.ClientMsg_SendMessageToParty(e,t,o);cc.log("@Party _sendMessageToParty",n),l.NgcBuildConfig.useNgcServer?p.NgcNetClientRefactor.inst.send(JSON.stringify(n)):u.NgcNetClient.inst._sendWebsocketMessage(JSON.stringify(n))}else cc.warn("@Party PartyID is null, you are not in any room")},t.prototype._requestLeaveParty=function(e,t){this._isAbleToRecieveMessage=!1;var o=e||this._curPartyID,n=t||null;this._sendMessageToParty(o,f.PARTY_REQUEST_TYPE.LEAVE_PARTY,n),this._reset()},t.prototype._requestReadyToPlay=function(e){this._sendMessageToParty(e,f.PARTY_REQUEST_TYPE.CHANGE_PLAYER_STATUS,{status:"Ready"})},t.prototype._setAllPartyCallBack=function(e,t,o){this._onPartyMessageCB=e,this._onPlayerJoinCB=t,this._onPlayerQuitCB=o},t.prototype._updateMessage=function(e){return a(this,void 0,void 0,function(){var t,o,n,r,i,a,s=this;return c(this,function(){if(cc.log("@Party serverMess",e),e.message==f.MessageType.ServerPartyStatus){if(!this._isAbleToRecieveMessage)return cc.warn("@Party Youre leaving party but still got message from others, should avoid to recieve it"),[2];if(!this._onPartyMessageCB||!this._onPlayerJoinCB||!this._onPlayerQuitCB)return cc.warn("@Party Missing callback functions, please call setAllPartyCallBack before using"),[2];if(this._removeRequestCommingStatus(),cc.log("@Party ServerPartyStatus",e),!e.partyID)return this._onPartyMessageCB(f.PARTY_ROOM_MESSAGE.ON_ROOM_STATE_CHANGE,f.PARTY_ROOM_STATE.UNAVAILABLE),[2];this._curPartyID=e.partyID,t=e.partyParameters,o=e.playerList,n="",r=!1,this._Host=this._isLocalPlayerHost(o),t&&(this._curPartyName=t.name,this._curGameID=t.gameID,this._curGamePass=t.gamePass,n=t.currentState,""==this._serverAdress&&(this._serverAdress=t.serverUrl,t.partyUrl&&(i={partyUrl:t.partyUrl},this._shortenLink=t.partyUrl,!this._shortenLink||this._shortenLink.startsWith("http://")&&this._shortenLink.startsWith("https://")||(this._shortenLink="https://"+this._shortenLink),this._onPartyMessageCB(f.PARTY_ROOM_MESSAGE.ON_ROOM_CREATED,i))),this._curPartyState!=n&&(this._curPartyState=n,this._curPartyState==f.PARTY_ROOM_STATE.START?r=!0:this._onPartyMessageCB(f.PARTY_ROOM_MESSAGE.ON_ROOM_STATE_CHANGE,this._curPartyState)),null!=t.playerInComing&&this._onPartyMessageCB(f.PARTY_ROOM_MESSAGE.ON_PLAYER_COMMING,t.playerInComing)),o&&(a=!1,this._curPlayers.forEach(function(e,t){s._isPlayerQuit(e.netID,o)&&(e.isHost&&(a=!0),s._curPlayers.splice(t,1),s._onPlayerQuitCB(e))}),o.forEach(function(e){if(s._isExistPlayer(e.netID)){var t=s._findPlayerByNet(e.netID);a&&e.isHost&&t&&(t.isHost=!0,s._onPartyMessageCB(f.PARTY_ROOM_MESSAGE.ON_HOST_CHANGE,t)),t.status!=e.status&&(t.status=e.status,s._onPartyMessageCB(f.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_STATUS,t)),t.playerName==e.playerName&&s._deepEqual(t.payload,e.payload)||(t.playerName=e.playerName,t.payload=e.payload,s._onPartyMessageCB(f.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_INFOR,t))}else{var o={netID:e.netID,playerName:e.playerName,isHost:e.isHost,status:e.status,payload:e.payload};s._curPlayers.push(o),s._onPlayerJoinCB(o)}})),r&&this._onPartyMessageCB(f.PARTY_ROOM_MESSAGE.ON_GAME_START,t)}return[2]})})},t.prototype._isLocalPlayerHost=function(e){console.log("current net id",this._curNetID);for(var t=0,o=e;t<o.length;t++){var n=o[t];if(n.netID==this._curNetID)return n.isHost}return!1},t.prototype._isExistPlayer=function(e){for(var t=0,o=this._curPlayers;t<o.length;t++)if(o[t].netID==e)return!0;return!1},t.prototype._isPlayerQuit=function(e,t){for(var o=0,n=t;o<n.length;o++)if(n[o].netID==e)return!1;return!0},t.prototype._findPlayerByNet=function(e){for(var t=0,o=this._curPlayers;t<o.length;t++){var n=o[t];if(n.netID==e)return n}return null},t.prototype._getInviteLink=function(e){if(e&&""!=this._shortenLink)return this._shortenLink;var t=d.NgcPlatform.inst.getPartyLinkBase(),o=this._clearInvalidUrlParameter(t);return o.includes("?")?o+"&partyID="+this._curPartyID+"&serverURL="+encodeURIComponent(this._serverAdress):o+"?partyID="+this._curPartyID+"&serverURL="+encodeURIComponent(this._serverAdress)},t.prototype._getClientUrl=function(){var e=d.NgcPlatform.inst.getPartyLinkBase();return this._clearInvalidUrlParameter(e)},t.prototype._isValid=function(e){return null!=e&&""!=e},t.prototype._isPlayersReady=function(){for(var e=0,t=this._curPlayers;e<t.length;e++)if(t[e].status==f.PARTY_PLAYER_STATUS.NOTREADY)return!1;return!0},t.prototype._getAllPlayers=function(){return this._curPlayers},t.prototype._reset=function(){this._Host=!1,this._curGameID="",this._curGamePass="",this._curPlayers=[],this._curNetID="",this._curPartyID="",this._serverAdress=""},t.prototype._removeRequestCommingStatus=function(){cc.sys.localStorage.removeItem(f.SAVE_KEY.PARTY_KEY)},t.prototype._shortenURL=function(e){return a(this,void 0,Promise,function(){var t;return c(this,function(){return t={url:e},[2,s.Utils.postHttp(f.SHORTEN_SERVICE_URL,JSON.stringify(t))]})})},t.prototype._getRoomCodeInfo=function(e){return a(this,void 0,void 0,function(){var t;return c(this,function(o){switch(o.label){case 0:return[4,new Promise(function(o){s.Utils.getHttp(f.SHORTEN_SERVICE_URL+"/short/"+e,{},function(e,n){e&&cc.log(e),t=JSON.parse(n),o(null)})})];case 1:return o.sent(),[2,t]}})})},t}(f.NgcPartyRoom);n.default=h,cc._RF.pop()},{"../../Core/Utils":"Utils","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../Platform/Platform":"Platform","./PartyRoom":"PartyRoom"}],PartyRoom:[function(e,t,o){"use strict";cc._RF.push(t,"42362+GaT9FZooXKK/7HQPa","PartyRoom");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoom=o.SHORTEN_SERVICE_URL=o.SAVE_KEY=o.INVITE_METHOD=o.URL_PARAMETER=o.MessageType=o.PARTY_REQUEST_TYPE=o.PARTY_ROOM_STATE=o.PARTY_PLAYER_STATUS=o.PARTY_ROOM_MESSAGE=void 0;var i,a=e("../../SDK/Nano/NanoSrv"),c=e("../Platform/Platform"),s=e("../Service");(function(e){e[e.ON_ROOM_CREATED=0]="ON_ROOM_CREATED",e[e.ON_ROOM_STATE_CHANGE=1]="ON_ROOM_STATE_CHANGE",e[e.ON_GAME_START=2]="ON_GAME_START",e[e.ON_HOST_CHANGE=3]="ON_HOST_CHANGE",e[e.ON_PLAYER_CHANGE_STATUS=4]="ON_PLAYER_CHANGE_STATUS",e[e.ON_PLAYER_CHANGE_INFOR=5]="ON_PLAYER_CHANGE_INFOR",e[e.ON_PLAYER_COMMING=6]="ON_PLAYER_COMMING"})(o.PARTY_ROOM_MESSAGE||(o.PARTY_ROOM_MESSAGE={})),function(e){e.READY="Ready",e.NOTREADY="notReady"}(o.PARTY_PLAYER_STATUS||(o.PARTY_PLAYER_STATUS={})),function(e){e.RECRUITING="Recruiting",e.PLAYING="Playing",e.FULL="full",e.UNAVAILABLE="unavailable",e.START="Start"}(o.PARTY_ROOM_STATE||(o.PARTY_ROOM_STATE={})),function(e){e.START_GAME_PARTY="startGameParty",e.CHANGE_PLAYER_STATUS="changePlayerStatus",e.LEAVE_PARTY="leaveParty",e.CHANGE_INFOR="changeInfo"}(i=o.PARTY_REQUEST_TYPE||(o.PARTY_REQUEST_TYPE={})),o.MessageType={ClientRequestJoinParty:"ClientMsg_RequestJoinParty",ClientSendMessageToParty:"ClientMsg_SendMessageToParty",ServerPartyStatus:"ServerMessage_PartyStatus"},o.URL_PARAMETER={SERVER_URL:"serverURL",PARTY_ID:"partyID",METHOD:"method"},o.INVITE_METHOD={QR_CODE:"qrcode",IN_GAME:"in-game",SOCIAL:"social",SHARE_LINK:"link",HOST:"host"},o.SAVE_KEY={PARTY_KEY:"PARTY_KEY",TIME_REQUEST:"TIME_REQUEST"},o.SHORTEN_SERVICE_URL="https://party.nano.ubisoft.com";var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._curPartyID="",t._curPartyState="",t._curPartyName="",t._curGameID="",t._curGamePass="",t._curPlayers=[],t._isRuningRequest=!1,t._curNetID="",t._Host=!1,t._serverAdress="",t._totalCommingPlayers=0,t._shortenLink="",t._isAbleToRecieveMessage=!1,t}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.isLoginMandatory=function(){var e=a.default.inst.getCurGameInfo().gameParams,t=e&&e.PWF_Mandatory_Login||{},o=c.NgcPlatform.inst.getName().toLowerCase();return!(!t||!t[o])},t.prototype.getName=function(){return this._getName()},t.prototype.getServerAdress=function(){return this._getServerAdress()},t.prototype.getPartyID=function(){return this._getPartyID()},t.prototype.getPartyName=function(){return this._getPartyName()},t.prototype.getGameID=function(){return this._getGameID()},t.prototype.isHost=function(){return this._isHost()},t.prototype.init=function(e){return this._init(e)},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.requestJoinParty=function(e,t,o,n,r,i,a,c){return this._requestJoinParty(e,t,o,n,r,i,a,c)},t.prototype.sendMessageToParty=function(e,t,o){return this._sendMessageToParty(e,t,o)},t.prototype.requestStartParty=function(e,t){return this._sendMessageToParty(e,i.START_GAME_PARTY,t)},t.prototype.requestReadyToPlay=function(e){return this._requestReadyToPlay(e)},t.prototype.requestLeaveParty=function(e,t){return this._requestLeaveParty(e,t)},t.prototype.setAllPartyCallBack=function(e,t,o){this._setAllPartyCallBack(e,t,o)},t.prototype.updateMessage=function(e){this._updateMessage(e)},t.prototype.getInviteLink=function(e){return void 0===e&&(e=!1),this._getInviteLink(e)},t.prototype.getClientUrl=function(){return this._getClientUrl()},t.prototype.isPlayersReady=function(){return this._isPlayersReady()},t.prototype.reset=function(){this._reset()},t.prototype.getAllPlayers=function(){return this._getAllPlayers()},t.prototype.findPlayerByNet=function(e){return this._findPlayerByNet(e)},t.isPlayerInvited=function(){if(!c.NgcPlatform.isOfflineMode()){var e=t.getURLParameter(o.URL_PARAMETER.SERVER_URL),n=t.getURLParameter(o.URL_PARAMETER.PARTY_ID);if(cc.log("serverURL",e),cc.log("partyId",n),e&&n)return!0}return!1},t.getURLParameter=function(e,t){void 0===t&&(t=null);var o=c.NgcPlatform.inst.getPartyLinkBase();t&&(o=t),console.log("url",o);var n=new URL(o).search;if(null==n||""==n){var r=o.indexOf("?");r>=0&&(n=o.substring(r,o.length))}return cc.log("queryString",n),new URLSearchParams(n).get(e)},t.sendIamComingStatus=function(){var e=t.getURLParameter(o.URL_PARAMETER.SERVER_URL),n=t.getURLParameter(o.URL_PARAMETER.PARTY_ID),r=cc.sys.localStorage.getItem(o.SAVE_KEY.PARTY_KEY),i=cc.sys.localStorage.getItem(o.SAVE_KEY.TIME_REQUEST),a=!0;if(null!=i)try{a=Date.now()-parseInt(i)>15e3}catch(p){cc.warn(p)}if(null==r||r!=n||a){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState&&c.status>=200&&c.status<400){var e=c.responseText;console.log(e)}};var s=new URL(e),l=e.substring(e.lastIndexOf("/")+1);cc.log("serverInstanceID",l);var u="https://"+s.hostname+":8080/"+l+"/party/"+n;cc.log("@Parrty ",u),c.open("GET",u,!0),c.send(),cc.sys.localStorage.setItem(o.SAVE_KEY.PARTY_KEY,n),cc.sys.localStorage.setItem(o.SAVE_KEY.TIME_REQUEST,Date.now())}},t.prototype._deepEqual=function(e,t){var o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(var r=0,i=o;r<i.length;r++){var a=i[r],c=e[a],s=t[a],l=this._isObject(c)&&this._isObject(s);if(l&&!this._deepEqual(c,s)||!l&&c!==s)return!1}return!0},t.prototype._isObject=function(e){return null!=e&&"object"==typeof e},t.prototype._clearInvalidUrlParameter=function(e){e.includes("#goog_rewarded")&&(e=e.replace("#goog_rewarded",""));var t=new URL(e);return t.searchParams.get("partyID")&&t.searchParams.delete("partyID"),t.searchParams.get("serverURL")&&t.searchParams.delete("serverURL"),t.searchParams.get("method")&&t.searchParams.delete("method"),t.searchParams.get("A2HS")&&t.searchParams.delete("A2HS"),t.href},t.prototype.clientMsg_RequestJoinParty=function(e,t,n,r,i,a,c,s){return{message:o.MessageType.ClientRequestJoinParty,partyID:e,partyName:t,playerName:n,netID:r,clientUrl:i,minPlayers:a,maxPlayers:c,payload:s||""}},t.prototype.ClientMsg_SendMessageToParty=function(e,t,n){return{message:o.MessageType.ClientSendMessageToParty,partyID:e,type:t,payload:n}},t.prototype.shortenURL=function(e){return this._shortenURL(e)},t.prototype.getRoomCodeInfo=function(e){return this._getRoomCodeInfo(e)},t.srvInstances=[],t.inst=null,t.services=[],t}(s.NgcService);o.NgcPartyRoom=l,cc._RF.pop()},{"../../SDK/Nano/NanoSrv":"NanoSrv","../Platform/Platform":"Platform","../Service":"Service"}],PathManager:[function(e,t,o){"use strict";cc._RF.push(t,"a7b77KZk09GFpbR2VyMtC9P","PathManager");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../NavigatePoint"),i=e("../GameCamera"),a=cc._decorator,c=a.ccclass,s=(a.property,function(){function e(){this.pathPos=[],this.isReady=!1,this.length=0,this.trackAble={},this.trackStartAtPoints=[]}var t;return t=e,e.getInst=function(){return t.inst||(t.inst=new t),t.inst},e.prototype.add=function(e){this.pathPos.push(e)},e.prototype.get=function(e){return cc.v3(this.pathPos[e])},e.prototype.getV2=function(e){return cc.v2(this.pathPos[e])},e.prototype.getAll=function(){return this.pathPos},e.prototype.reset=function(){this.pathPos=[],this.trackStartAtPoints=[],this.trackAble={},this.isReady=!1},e.prototype.isEnterPoint=function(e,t){for(var o=99999,n=-1,r=0,i=0;i<t.length;i++){var a=this.get(t[i]),c=cc.v2(a).sub(e).mag();c<=a.z&&(r++,o>c&&(n=t[i],o=c))}return 1==r?n:-1},e.prototype.size=function(){return this.length},e.prototype.sortNearPoint=function(){var e=r.default.getFirstP();cc.log("firstP"+e);var t=r.default.getSecondP(),o=cc.v3(e.getWorldPosition().x,e.getWorldPosition().y,e.getRadius());this.pathPos.push(o);var n=cc.v3(t.getWorldPosition().x,t.getWorldPosition().y,t.getRadius());this.pathPos.push(n);for(var a,c=r.default.getUnknownList(),s=!1,l=!1,u=0,p=0,d=[],f=1,h=null;c.length>0;){var g=0,y=void 0;if(h){for(h.getWorldPosition(),_=0;_<c.length;_++)if(h.getWorldPosition()==c[_].getWorldPosition()){g=_,h=null;break}}else{l?(y=cc.v2(this.pathPos[u]),l=!1):y=cc.v2(this.pathPos[f]);for(var m=cc.Vec2.distance(y,c[g].getWorldPosition()),_=0;_<c.length;_++){var v=cc.Vec2.distance(y,c[_].getWorldPosition());v<m&&(m=v,g=_)}h=c[g].nextPoint}if(c[g].type==r.POINTTYPE.FORK)if(s)s=!1,l=!0,p=f,a=c[g].getWorldPosition(),c[g].type=r.POINTTYPE.UNKNOWN,d.push(f+1),this.trackAble[u]=d,d=[];else{var S=cc.v3(c[g].getWorldPosition().x,c[g].getWorldPosition().y,c[g].getRadius());this.pathPos.push(S),f++,cc.log("type mark point: ",c[g].type),s=!0,u=f,c.splice(g,1),d.push(u+1)}else S=cc.v3(c[g].getWorldPosition().x,c[g].getWorldPosition().y,c[g].getRadius()),this.pathPos.push(S),f++,c[g].getWorldPosition()==a&&(d.push(f),this.trackAble[p]=d,d=[]),c.splice(g,1)}var N=[];this.pathPos.forEach(function(e){N.push(cc.v2(e))}),i.default.inst.setTrackNextAblePoint(this.trackAble),i.default.inst.setTrackPoints(N),this.setTrackDistanceToNextPoint(),this.isReady=!0,this.length=this.getAll().length,cc.log("trackAble ",this.trackAble)},e.prototype.isDone=function(){return this.isReady},e.prototype.distance2point=function(e,t){return cc.Vec2.distance(this.get(e),this.get(t))},e.prototype.getDistanceAtPoint=function(e){return this.trackStartAtPoints[e]},e.prototype.getNextAblePointList=function(e){var t=[];return this.trackAble[e]?t=this.trackAble[e]:(++e==this.pathPos.length&&(e=0),t.push(e)),t},e.prototype.isCurrentPointFork=function(e){return!!this.trackAble[e]},e.prototype.getRoadDistance=function(){return this.trackStartAtPoints[this.pathPos.length-1]+cc.Vec2.distance(this.getV2(this.pathPos.length-1),this.getV2(0))},e.prototype.calcTrackDistanceFromPosition=function(e){var t=this.findNearestTrackPoint(e),o=this.getNextNearestPoint(t,e),n=this.getV2(o).sub(this.getV2(t)).normalize(),r=this.getV2(o);return this.trackStartAtPoints[t]+e.sub(r).dot(n)},e.prototype.calcDistanceFromPosToCheckPoint=function(e,t){var o=this.getNextNearestPoint(t,e),n=this.getV2(o).sub(this.getV2(t)).normalize(),r=this.getV2(o);return e.sub(r).dot(n)},e.prototype.getNextNearestPoint=function(e,t){for(var o=this.getNextAblePointList(e),n=o[0],r=cc.Vec2.distance(t,this.getV2(n)),i=0;i<o.length;i++){var a=o[i],c=cc.Vec2.distance(t,this.getV2(a));r>c&&(r=c,n=a)}return n},e.prototype.findNearestTrackPoint=function(e){var t,o=e.sub(this.getV2(0)).mag();t=0;for(var n=1;n<this.pathPos.length;n++){var r=e.sub(this.getV2(n)).mag();o>r&&(o=r,t=n)}return t},e.prototype.setTrackDistanceToNextPoint=function(){for(var e=0;e<this.pathPos.length;e++)this.trackStartAtPoints.push(0);for(e=0;e<this.pathPos.length-1;e++)for(var t=this.getNextAblePointList(e),o=0;o<t.length;o++)this.trackStartAtPoints[t[o]]=Math.max(this.trackStartAtPoints[t[o]],this.trackStartAtPoints[e]+cc.Vec2.distance(this.getV2(e),this.getV2(t[o])));var n,r,i=Object.keys(this.trackAble),a=0;for(e=0;e<i.length;e++){var c=parseInt(i[e]);if(this.trackAble[c]){var s=this.trackAble[c];if(2==s.length){n=c;continue}r=s[0]-1,a=c;var l=this.trackStartAtPoints[r]-this.trackStartAtPoints[a];if(l>=0)for(var u=l/(f=a-(n+1)),p=n+1,d=0;d<=f;d++)this.trackStartAtPoints[p+d]+=u*d;else{u=-l/(f=r-(a+1)),p=a+1;for(var f,h=0;h<=f;h++)this.trackStartAtPoints[p+h]+=u*h}}}},t=n([c],e)}());o.default=s,cc._RF.pop()},{"../GameCamera":"GameCamera","../NavigatePoint":"NavigatePoint"}],PhysicsManager:[function(e,t){"use strict";cc._RF.push(t,"b4ab2vxkHVF5qd4tsZZLa8J","PhysicsManager");var o=cc.Class({extends:cc.Component,properties:{active:{default:!0},aabb:{default:!0},pair:{default:!0},centerOfMass:{default:!0},joint:{default:!0},shape:{default:!0}},statics:{USSE_ACCUMULATOR:!1},onEnable:function(){var e=cc.director.getPhysicsManager();e.enabled&&this.active&&cc.e("The physical system is enabled\uff01"),o.USSE_ACCUMULATOR&&(e.enabledAccumulator=!0),e.enabled=this.active,this.active&&(cc.PhysicsManager.DrawBits,e.debugDrawFlags=1,cc.director.getCollisionManager().enabledDebugDraw=!0,cc.director.getCollisionManager().enabled=!0,e.debugDrawFlags=1,cc.director.getCollisionManager().enabledDrawBoundingBox=!1,cc.error("Enable Physic",e.enabled))},onDisable:function(){var e=cc.director.getPhysicsManager();e.debugDrawFlags=0,e.enabled=!1,cc.log("Physic is diasble"),cc.director.getCollisionManager().enabledDebugDraw=!1,cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDrawBoundingBox=!1}});t.export=o,cc._RF.pop()},{}],Platform_impl_GameDistributionSrv:[function(t,o,n){"use strict";cc._RF.push(o,"53c59boUfdAIKMICDwTOVib","Platform_impl_GameDistributionSrv");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../GameFramework/Scripts/BuildConfig"),s=t("./Platform"),l=t("./Platform_impl_WebBase"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return i(o,t),o.prototype._preInit=function(){return new Promise(function(e){e("NgcPlatform_impl_GameDistributionSrv pre-initialized")})},o.prototype._init=function(){return new Promise(function(e){e("NgcPlatform_impl_GameDistributionSrv initialized")})},o.prototype._onStartGame=function(){},o.prototype._onEndGame=function(){},o.prototype._getName=function(){return"GameDistribution"},o.prototype._isSupportBridgeSocial=function(){return!1},o.prototype._checkWebLoginData=function(){},o.prototype._getPlatformID=function(){return s.PlatformID.GameDistribution},o.prototype._onGameLoadingStart=function(){},o.prototype._onGameLoadingFinish=function(){},o.prototype._onPostMessage=function(e,t,o){window.parent.postMessage(e,t,o)},o.prototype._getPartyLinkBase=function(){var t=null;try{if((t=window.top.location).href)return window.location!=t?document.referrer?document.referrer:t.href:document.location.href}catch(e){}return c.NgcBuildConfig.gameClientURL},a([p],o)}(l.NgcPlatform_impl_WebBase));n.default=d,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","./Platform":"Platform","./Platform_impl_WebBase":"Platform_impl_WebBase"}],Platform_impl_WebBase:[function(t,o,n){"use strict";cc._RF.push(o,"f485foj3LNKMbDjhhPGyrMu","Platform_impl_WebBase");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcPlatform_impl_WebBase=void 0;var c=t("../../Core/Utils"),s=t("../../CrossFeatures/NavBar/Script/NavBarConflictDialog"),l=t("../../CrossFeatures/NavBar/Script/NavBarManager"),u=t("../../CrossFeatures/PartyRoom/Script/QRCodeGenerator"),p=t("../../GameFramework/Scripts/BuildConfig"),d=t("../../GameFramework/Scripts/Localized/LocalizedManager"),f=t("../../GameFramework/Scripts/NgcMain"),h=t("../../GameFramework/Scripts/NgcUserInfo"),g=t("../../GameFramework/Scripts/ProfanityCheck"),y=t("../../SDK/Nano/NanoSrv"),m=t("../../SDK/Uplay/UplaySrv"),_=t("../Leaderboard/Leaderboard"),v=t("../Social/Social"),S=t("../Telemetry/Telemetry"),N=t("./Platform"),b=cc._decorator,C=b.ccclass,P=(b.property,function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return i(o,t),o.prototype.onLogin=function(e){e(null,"OK")},o.prototype.getName=function(){return this._getName()},o.prototype._onSocialLogInFromHost=function(e){if(window.loadingGame)h.default.nanoLoginData=e;else if(this.isCallbackFromHost=!0,console.log("BridgeSocial webSocialLoginSuccess socialInfo = "+JSON.stringify(e)),e.hasOwnProperty("platform"))switch(e.platform){case"facebook":h.default.socialId=e.socialId,h.default.facebookAccessToken=e.facebookAccessToken||e.socialToken,this.requestGameLoginToSocial(v.SocialType.Facebook);break;case"ubiconnect":case"uplay":m.default.inst.userData.nameOnPlatform=e.name,m.default.inst.userData.avatarDesktop=e.avatarDesktop,m.default.inst.userData.avatarMobile=e.avatarMobile,m.default.inst.userData.userId=e.socialId,m.default.inst.loginFromHost=!0,this.requestGameLoginToSocial(v.SocialType.Uplay);break;default:console.log("A unrecognize Platform detected")}else console.log("Platform not FOUND")},o.prototype.requestGameLoginToSocial=function(e){v.NgcSocial.inst=v.NgcSocial.getSrvInstance(e),v.NgcSocial.inst.login(function(t,o){var n;if(t)cc.error("Social Login: ",t);else{"Conflict"===o?f.NgcMain.inst.resolveSocialConflict(null===(n=l.NgcNavBarManager.inst)||void 0===n?void 0:n.invokeOnSocialCallBack.bind(l.NgcNavBarManager.inst)):(l.NgcNavBarManager.inst.updateListEffectBtn(),l.NgcNavBarManager.inst.setNavBarInfo(),_.NgcLeaderboard.inst.clearCacheRequestData(),l.NgcNavBarManager.inst.invokeOnSocialCallBack(null,"login"));var r=(e===v.SocialType.Facebook?"fb:":"")+v.NgcSocial.inst.getSocialID();S.NgcTelemetry.inst.LogEvent_LoginSuccess(r,{Name:v.NgcSocial.inst.getFormatName(),AvatarUrl:v.NgcSocial.inst.getProfilePictureUrl(),FriendList:v.NgcSocial.inst.getFriendsData()})}})},o.prototype._onSocialLogInFromGame=function(){if(console.log("@@@@@ _onSocialLogInFromGame"),!this.isCallbackFromHost){var e={};e.avatarDesktop=h.default.avatarUrl,e.avatarMobile=h.default.avatarUrl,e.id=h.default.socialId,e.facebookAccessToken=h.default.facebookAccessToken,e.platform=v.NgcSocial.inst.getName().toLowerCase(),e.name=h.default.localUserName,h.default.setAccountLinkData({platform:e.platform});var t={GAME_SOCIAL_LOGIN_SUCCESS:e};if(N.NgcPlatform.isRunAsIframeOnNano()){var o=JSON.stringify(t);console.log("@@@@@ _onSocialLogInFromGame msg ",o),N.NgcPlatform.inst&&N.NgcPlatform.inst.onPostMessage(o,"*")}}},o.prototype._onSocialLogOutFromHost=function(){this.isCallbackFromHost=!0,h.default.nanoLoginData=null,console.log("webSocialLogoutSuccess"),v.NgcSocial.inst&&y.default.inst?v.NgcSocial.inst.checkLoginStatus().finally(function(){y.default.inst.resetUserID().finally(function(){var e,t;null===(e=f.NgcMain.inst)||void 0===e||e.createFakeName();try{v.NgcSocial.inst.logout()}catch(o){console.warn(o)}v.NgcSocial.inst.onLogoutSuccesCallback&&v.NgcSocial.inst.onLogoutSuccesCallback(),s.NavBarConflicttDialog.staticHide(),null===(t=l.NgcNavBarManager.inst)||void 0===t||t.invokeOnSocialCallBack(null,"logout")})}):console.log("User already log out")},o.prototype._onSocialLogOutFromGame=function(){if(!this.isCallbackFromHost&&N.NgcPlatform.isRunAsIframeOnNano()){var e=JSON.stringify({GAME_SOCIAL_LOGOUT_SUCCESS:!0});N.NgcPlatform.inst&&N.NgcPlatform.inst.onPostMessage(e,"*")}},o.prototype.isSupportBridgeSocial=function(){return this._isSupportBridgeSocial()},o.prototype._initBrigdeSocial=function(){cc.log("init SocialBridge WEB BASEE"),this.isBrigdeSocialInitialized||(window.isLoginPopUpOpen=function(){return!!v.NgcSocial.inst&&v.NgcSocial.inst.isLoginPopUpOpen()},window.addEventListener("message",function(e){var t=null;try{t=JSON.parse(e.data)}catch(n){t=null}if(t){if(console.log("[BridgeSocial] event.data = "+e.data),t.hasOwnProperty(N.BRIGDE_SOCIAL_INFO.WEB_SOCIAL_INFO))console.log("[BridgeSocial] WEB_SOCIAL_INFO = "+t.WEB_SOCIAL_INFO);else if(t.hasOwnProperty(N.BRIGDE_SOCIAL_INFO.WEB_SOCIAL_LOGIN_SUCCESS))N.NgcPlatform.inst.onSocialLogInFromHost(t.WEB_SOCIAL_LOGIN_SUCCESS);else if(t.hasOwnProperty(N.BRIGDE_SOCIAL_INFO.WEB_SOCIAL_LOGOUT_SUCCESS))N.NgcPlatform.inst.onSocialLogOutFromHost();else if(t.hasOwnProperty(N.BRIGDE_SOCIAL_INFO.WEB_A2HS_RESULT))l.NgcNavBarManager.inst.checkA2HSResult(t.WEB_A2HS_RESULT);else if(t.hasOwnProperty(N.BRIGDE_SOCIAL_INFO.WEB_LANGUAGE_CODE)){var o=t.WEB_LANGUAGE_CODE;h.default.curLanguage=o,d.NgcLocalizedManager.setLanguage(o),S.NgcTelemetry.inst.LogEvent_LanguageChanged({languageCode:o})}}else console.log("[BridgeSocial] parse JSON false")},!1),this.isBrigdeSocialInitialized=!0)},o.prototype.getPlatformID=function(){return this._getPlatformID()},o.prototype._checkLoginData=function(){if(h.default.nanoLoginData){var e=h.default.nanoLoginData;h.default.nanoLoginData=null,this._onSocialLogInFromHost(e)}},o.prototype.preInit=function(e){return this._preInit(e)},o.prototype.requestWebLoginButtonStatus=function(e){this.onPostMessage(JSON.stringify({REQUEST_WEB_LOGIN_BUTTON:e?"enabled":"disabled"}),"*")},o.prototype.onStartGame=function(e){void 0===e&&(e=null),this._onStartGame(e)},o.prototype.onEndGame=function(e){void 0===e&&(e=null),this._onEndGame(e)},o.prototype.onGameLoadingStart=function(){this._onGameLoadingStart()},o.prototype.onGameLoadingFinish=function(){this._onGameLoadingFinish(),this.requestWebLoginButtonStatus(!0)},o.prototype.onPostMessage=function(e,t,o){this._onPostMessage(e,t,o)},o.prototype._getPartyLinkBase=function(){var t=null;try{if((t=window.top.location).href)return window.location!=t?document.referrer?document.referrer:t.href:document.location.href}catch(e){}return p.NgcBuildConfig.gameClientURL},o.prototype._isWebLoginPopupOpen=function(){return new Promise(function(e){N.NgcPlatform.inst.onPostMessage(JSON.stringify({GET_WEB_LOGIN_POPUP_OPEN_INFO:!0}),"*"),window.addEventListener("message",function(t){try{var o=!1,n=JSON.parse(t.data);n.hasOwnProperty("GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK")&&(o=n.GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK),e(o)}catch(r){e(!1)}},!0)})},o.prototype._genQRCode=function(e,t){u.NgcQRCodeGenerator.genQRCode(e,t)},o.prototype._profanityCheck=function(e){return new Promise(function(t){var o={text:e};c.Utils.getHttp(g.NgcProfanityCheck.checkURL,o,function(e,o){var n={status:null,reasons:null};e||!o?(n.status=!1,n.reasons=e):(n=JSON.parse(o).report)||(n={status:null,reasons:null}),t(n)})})},a([C],o)}(N.NgcPlatform));n.NgcPlatform_impl_WebBase=P,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/NavBar/Script/NavBarConflictDialog":"NavBarConflictDialog","../../CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../CrossFeatures/PartyRoom/Script/QRCodeGenerator":"QRCodeGenerator","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../GameFramework/Scripts/NgcMain":"NgcMain","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../GameFramework/Scripts/ProfanityCheck":"ProfanityCheck","../../SDK/Nano/NanoSrv":"NanoSrv","../../SDK/Uplay/UplaySrv":"UplaySrv","../Leaderboard/Leaderboard":"Leaderboard","../Social/Social":"Social","../Telemetry/Telemetry":"Telemetry","./Platform":"Platform"}],Platform:[function(t,o,n){"use strict";cc._RF.push(o,"3db5bdJ1F5E1ri4QaTG0KDy","Platform");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcPlatform=n.BRIGDE_SOCIAL_INFO=n.PlatformID=void 0;var c=t("crypto-js"),s=t("../../GameFramework/Scripts/BuildConfig"),l=t("../Service"),u=cc._decorator,p=u.ccclass;u.property,function(e){e[e.Nano=0]="Nano",e[e.Poki=1]="Poki",e[e.Android=2]="Android",e[e.IOs=3]="IOs",e[e.Douyin=4]="Douyin",e[e.GameDistribution=5]="GameDistribution",e[e.HUZ=6]="HUZ"}(n.PlatformID||(n.PlatformID={})),function(e){e.WEB_SOCIAL_INFO="WEB_SOCIAL_INFO",e.WEB_SOCIAL_LOGIN_SUCCESS="WEB_SOCIAL_LOGIN_SUCCESS",e.WEB_SOCIAL_LOGOUT_SUCCESS="WEB_SOCIAL_LOGOUT_SUCCESS",e.WEB_A2HS_RESULT="WEB_A2HS_RESULT",e.GET_WEB_LOGIN_DATA_CALLBACK="GET_WEB_LOGIN_DATA_CALLBACK",e.GET_GAME_LOGIN_POPUP_OPEN_INFO="GET_GAME_LOGIN_POPUP_OPEN_INFO",e.GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK="GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK",e.WEB_LANGUAGE_CODE="WEB_LANGUAGE_CODE"}(n.BRIGDE_SOCIAL_INFO||(n.BRIGDE_SOCIAL_INFO={}));var d=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.isBrigdeSocialEnable=!1,e.isBrigdeSocialInitialized=!1,e.isCallbackFromHost=!1,e.isLogoutFromGame=!1,e}var n;return i(o,t),n=o,o.prototype.onLogin=function(e){e(null,"OK")},o.prototype.getName=function(){return this._getName()},o.prototype.isSupportBridgeSocial=function(){return this._isSupportBridgeSocial()},o.prototype.initBrigdeSocial=function(){return cc.log("init SocialBridge @@@@@@@@@@@@@@@@@@"),this._initBrigdeSocial()},o.prototype.onSocialLogInFromHost=function(e){this._onSocialLogInFromHost(e)},o.prototype.onSocialLogOutFromHost=function(){this._onSocialLogOutFromHost()},o.prototype.onSocialLogInFromGame=function(){this._onSocialLogInFromGame()},o.prototype.onSocialLogOutFromGame=function(){this._onSocialLogOutFromGame()},o.prototype.getPlatformID=function(){return this._getPlatformID()},o.prototype.preInit=function(e){return this._preInit(e)},o.prototype.init=function(e){var t=this;return new Promise(function(o){t._init(e).then(function(e){t.isSupportBridgeSocial()&&t.initBrigdeSocial(),o(e)})})},o.prototype.onStartGame=function(e){void 0===e&&(e=null),this._onStartGame(e)},o.prototype.onEndGame=function(e){void 0===e&&(e=null),this._onEndGame(e)},o.prototype.onGameLoadingStart=function(){this._onGameLoadingStart()},o.prototype.onGameLoadingFinish=function(){this._onGameLoadingFinish()},o.prototype.requestWebLoginButtonStatus=function(){},o.prototype.onPostMessage=function(e,t,o){this._onPostMessage(e,t,o)},o.prototype.checkLoginData=function(){this._checkLoginData()},o.prototype.getPartyLinkBase=function(){return this._getPartyLinkBase()},o.prototype.isWebLoginPopupOpen=function(){return this._isWebLoginPopupOpen()},o.prototype.genQRCode=function(e,t){return this._genQRCode(e,t)},o.prototype.profanityCheck=function(e){return this._profanityCheck(e)},o.prototype.useOwnSharingMethod=function(){return!1},o.prototype.isSocketMessageUsingArrayBuffer=function(){return!1},o.isOfflineMode=function(){return s.NgcBuildConfig.offlineMode},o.isValidOrigin=function(){try{return!!window.top.location.href}catch(e){return!1}},o.getLocationHref=function(){return n.isValidOrigin()?window.top.location.href:location.href},o.isRunAsIframeOnNano=function(){try{return!(!window.top.location.href||!window.top.location.href.includes("nano.ubisoft.com")||window.top.location.href===window.location.href)}catch(e){return!1}},o.isRunFromApp=function(){return window.location.href.includes("runningPlatform=nanoApp")},o.getLoginDataFromURL=function(){var e=null;if(location.search.slice(1).split("&").forEach(function(t){t.match(/loginData=(.+)/i)&&(e=RegExp.$1)}),e){var t=c.AES.decrypt(e,c.SHA256(n.LOGIN_DATA_SECRET_KEY).toString(c.enc.Base64)).toString(c.enc.Utf8);return JSON.parse(t)}return null},o.srvInstances=[],o.inst=null,o.LOGIN_DATA_SECRET_KEY="LOGIN_DATA_123321",n=a([p],o)}(l.NgcService);n.NgcPlatform=d,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../Service":"Service","crypto-js":22}],PlayerController:[function(e,t,o){"use strict";cc._RF.push(t,"ece42IYYv9EUpLckCk9ejgV","PlayerController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BOT_BATCH=void 0;var a,c=e("../../globals"),s=e("../GameCamera"),l=e("../GameCameraTarget"),u=e("../Maps/DrawMap"),p=e("../Network/NetClient"),d=e("../StartPoint"),f=e("../Utils/Util"),h=e("./CarBase"),g=cc._decorator,y=g.ccclass,m=g.property;(function(e){e[e.Easy=0]="Easy",e[e.Medium=1]="Medium",e[e.Hard=2]="Hard",e[e.Length=3]="Length"})(a=o.BOT_BATCH||(o.BOT_BATCH={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerList=[],t.human_prefab=null,t.bot_prefab=null,t.remote_prefab=null,t.Map_node=null,t.CarContainer="CarContainer",t.numFriendAdded=0,t.maxFriends=0,t.totalBots=0,t.MAX_BOTS_FOLLOW_CAR=3,t.NUM_BOT_PER_GROUP=2,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,this.randBotBatch=a.Easy},t.getInst=function(){return o.inst},t.prototype.AddPlayer=function(e){this.playerList.push(e)},t.prototype.getLocalPlayer=function(){return o.localHumanPlayer},t.prototype.getLocalPlayerAngle=function(){return o.localHumanPlayer.node.angle},t.prototype.remove=function(e){e>-1&&this.playerList.splice(e,1)},t.prototype.clear=function(){this.playerList=[]},t.prototype.allPlayer=function(){return this.playerList},t.prototype.getAllLocallyControlledPlayers=function(){return this.playerList},Object.defineProperty(t.prototype,"allPlayers",{get:function(){return this.playerList},enumerable:!1,configurable:!0}),t.prototype.sortPlayer=function(){this.playerList.sort(function(e,t){if(e.isKickOut()&&!t.isKickOut())return 1;if(!e.isKickOut()&&t.isKickOut())return-1;if(e.HasFinished()&&t.HasFinished()){var o=t.getTotalRaceTime()-e.getTotalRaceTime();if(o>0)return-1;if(o<0)return 1}var n=e.getDistance()-t.getDistance();return n<0?1:n>0?-1:0})},t.prototype.isAllCarReachedLap=function(e){for(var t=!0,o=0;o<this.playerList.length;o++){var n=this.playerList[o];n.HasStopped()||n.getCurrentLap()<e&&(t=!1)}return t},t.prototype.getKickoutPlayer=function(){var e=[];return this.playerList.forEach(function(t){t.isKickOut()&&e.push(t)}),e},t.prototype.getAllPlayerBeingKicked=function(){var e=[];return this.playerList.forEach(function(t){(t.isKickOut()||t.isMarkedAsKick())&&e.push(t)}),e},t.prototype.getLivePlayer=function(){var e=[];return this.playerList.forEach(function(t){t.isKickOut()||e.push(t)}),e},t.prototype.getTotalNumPlayers=function(){return this.playerList.length},t.prototype.CreatePlayer=function(e){this.getTotalNumPlayers();var t=e.netID.includes(":");t&&this.totalBots++;var n=e.netID==p.default.inst.localPlayerNetID,r=e.netID.startsWith(p.default.inst.localPlayerNetID)&&t,i=d.default.allStartPoints[e.startPointIndex];if(!i)return console.error("Failed to allocate start point for player"),null;i.boom();var c=this.remote_prefab;n?c=this.human_prefab:r&&(c=this.bot_prefab);var s=cc.instantiate(c),l=s.getComponent(h.default);return cc.Color.YELLOW,t?cc.Color.WHITE:n&&cc.Color.GREEN,r&&(l.loadBotBatchParameter(this.randBotBatch),++this.randBotBatch==a.Length&&(this.randBotBatch=a.Easy)),l.setParentPlayerNameNode(u.default.inst.getParentOfName()),s.parent=this.getCarParentNode(),s.setPosition(s.parent.convertToNodeSpaceAR(i.getWorldPosition())),l.setStartPointIndex(e.startPointIndex),l.setPlayerID(e.netID),l.setBotOwnerNetID(e.botOwnerNetID),l.changeCarSkin(e.skin),l.isMobile=e.isMobile,s.name="Player:"+e.name,n?(l.setPlayerName(e.name,"",cc.Color.RED),s.name+=" (local)",o.localHumanPlayer=l):r?(s.name+=" (bot)",l.setPlayerName(e.name,"",cc.Color.WHITE)):l.setPlayerName(e.name,"",cc.Color.BLACK),l},t.prototype.findPlayerIndexByNetID=function(e){for(var t=this.playerList.length,o=0;o<t;o++)if(this.playerList[o].netID==e)return o;return-1},t.prototype.findPlayerByNetID=function(e){for(var t=this.playerList.length,o=0;o<t;o++){var n=this.playerList[o];if(n.netID==e)return n}return null},t.prototype.getLocalPlayerNode=function(){return this.playerList[0]},t.prototype.getAllPlayersAsTableByID=function(){var e={};return this.playerList.forEach(function(t){e[t.netID]=t}),e},t.prototype.getAllLocallyControlledBots=function(){var e=[];return this.playerList.forEach(function(t){(t.isLocallyControlledBot()||t.isLocalHuman())&&e.push(t)}),e},t.prototype.getAllLocallyBotFinish=function(){var e=[];return this.playerList.forEach(function(t){(t.isLocallyControlledBot()||t.isLocalHuman())&&t.HasFinished()&&e.push(t)}),e},t.prototype.getAlldBots=function(){var e=[];return this.playerList.forEach(function(t){t.isLocallyControlledBot()&&e.push(t)}),e},t.prototype.getCarParentNode=function(){return this.Map_node.getChildByName(this.CarContainer)},t.prototype.sendMessageToAllPlayers=function(e){this.playerList.forEach(function(t){t.node.emit(e)})},t.prototype.followCameraToOthers=function(){for(var e=[],t=0,o=this.playerList;t<o.length;t++){var n=o[t];n.HasStopped()||s.default.inst.followTarget==n.node||e.push(n)}var r=e[f.default.randomFromTo(0,e.length-1)];r&&cc.log("TARGET"+r.getPlayerName())},t.prototype.reset=function(){var e=this;this.playerList.forEach(function(t,o){t.node.destroy,e.allPlayer().splice(o,1)}),this.playerList=[],this.numFriendAdded=0,this.totalBots=0,this.randBotBatch=a.Easy,o.localHumanPlayer&&(o.localHumanPlayer.node.destroy(),o.localHumanPlayer=null)},t.prototype.setCameraFollowToLocalPlayer=function(){this.setCameraFollowTo(this.getLocalPlayer().node)},t.prototype.setCameraFollowTo=function(e){s.default.inst.followTarget=e,s.default.inst.defaultTarget=e.getChildByName("DefaultTarget").getComponent(l.default),s.default.inst.setTargetToDefault(),s.default.inst.trackTarget();var t=u.default.inst.getMapSize();s.default.inst.setLimitCameraSize(t.width,t.height)},t.getCarScore=function(e,t){return 1e6*e+100*(t+1)},t.prototype.enableBotFollowHuman=function(){if(this.getAlldBots().length>0){var e=this.getBatch(h.BatchGroup.BATCH_5);this.hasBotInGroup(e),this.NUM_BOT_PER_GROUP}},t.prototype.getBatch=function(e){var t=[];return this.allPlayer().forEach(function(o){o.getBatchGroup()==e&&t.push(o)}),t},t.prototype.hasBotInGroup=function(e){var t=0;return e.forEach(function(e){e.isLocallyControlledBot()&&t++}),t},t.prototype.getRealPlayers=function(){return this.allPlayer().length-this.totalBots},t.prototype.isRaceFinished=function(){for(var e=0,t=this.allPlayer();e<t.length;e++)if(!t[e].HasStopped())return!1;return!0},t.prototype.cheatFinishRace=function(){this.allPlayer().forEach(function(e){e.onCompleteRace(),e.cheatTime()})},t.prototype.isRealPlayerFinishGame=function(){var e=[];this.allPlayer().forEach(function(t){t.netID.indexOf(":")>=0||e.push(t)});for(var t=!0,o=0,n=e;o<n.length;o++)if(!n[o].HasStopped()){t=!1;break}return t},t.prototype.isOnlyOneHumanPlayer=function(){for(var e=0,t=this.allPlayer();e<t.length;e++)if(t[e].isRemote())return!1;return!0},t.inst=null,i([m(cc.Prefab)],t.prototype,"human_prefab",void 0),i([m(cc.Prefab)],t.prototype,"bot_prefab",void 0),i([m(cc.Prefab)],t.prototype,"remote_prefab",void 0),i([m(cc.Node)],t.prototype,"Map_node",void 0),o=i([y],t)}(cc.Component);o.default=_,c.default.PlayerController=_,cc._RF.pop()},{"../../globals":"globals","../GameCamera":"GameCamera","../GameCameraTarget":"GameCameraTarget","../Maps/DrawMap":"DrawMap","../Network/NetClient":"NetClient","../StartPoint":"StartPoint","../Utils/Util":"Util","./CarBase":"CarBase"}],PlayerName:[function(e,t,o){"use strict";cc._RF.push(t,"8d652NffTdJn48yDZCcvn/u","PlayerName");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./UserInfo"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.humam=null,t.humamkickout=null,t.humamknormal=null,t.humamlb=null,t.others=null,t.otherlb=null,t.othernormal=null,t.otherkickout=null,t.flagHuman=null,t.flagOther=null,t.iconWH=null,t.iconWO=null,t.isHunman=!1,t.TIME_FADE=.5,t}return r(t,e),t.prototype.start=function(){var e=this,t=this;this.node.on("hide",function(){e.node.active=!1,t.getLabel().active=!1})},t.prototype.setName=function(e,t,o){this.isHunman=o,""!=t&&(t=a.UserInfo.correctNameFormat(t)),o?(this.humam.active=!0,this.others.destroy(),this.humamlb.string=t,this.humamkickout.opacity=0,this.flagHuman.spriteFrame=e):(this.humam.destroy(),this.others.active=!0,this.otherkickout.opacity=0,this.otherlb.string=t,this.flagOther.spriteFrame=e),this.setDangerous(!1)},t.prototype.kickout=function(){this.setDangerous(!0)},t.prototype.setWarnning=function(e){this.isHunman?this.iconWH.active=e:this.iconWO.active=e},t.prototype.setDangerous=function(e){this.isHunman?e?(cc.tween(this.humamkickout).to(this.TIME_FADE,{opacity:255}).start(),cc.tween(this.humamknormal).to(this.TIME_FADE,{opacity:0}).start()):(cc.tween(this.humamkickout).to(this.TIME_FADE,{opacity:0}).start(),cc.tween(this.humamknormal).to(this.TIME_FADE,{opacity:255}).start()):e?(cc.tween(this.othernormal).to(this.TIME_FADE,{opacity:0}).start(),cc.tween(this.otherkickout).to(this.TIME_FADE,{opacity:255}).start()):(cc.tween(this.otherkickout).to(this.TIME_FADE,{opacity:0}).start(),cc.tween(this.othernormal).to(this.TIME_FADE,{opacity:255}).start())},t.prototype.changeName=function(e,t){e?this.humamlb.string=t:this.otherlb.string=t},t.prototype.setColor=function(e){this.otherlb.node.color=e},t.prototype.getLabel=function(){return this.isHunman?this.humamlb.node.parent:this.otherlb.node.parent},i([l(cc.Node)],t.prototype,"humam",void 0),i([l(cc.Node)],t.prototype,"humamkickout",void 0),i([l(cc.Node)],t.prototype,"humamknormal",void 0),i([l(cc.Label)],t.prototype,"humamlb",void 0),i([l(cc.Node)],t.prototype,"others",void 0),i([l(cc.Label)],t.prototype,"otherlb",void 0),i([l(cc.Node)],t.prototype,"othernormal",void 0),i([l(cc.Node)],t.prototype,"otherkickout",void 0),i([l(cc.Sprite)],t.prototype,"flagHuman",void 0),i([l(cc.Sprite)],t.prototype,"flagOther",void 0),i([l(cc.Node)],t.prototype,"iconWH",void 0),i([l(cc.Node)],t.prototype,"iconWO",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./UserInfo":"UserInfo"}],PlayerSkin:[function(e,t,o){"use strict";cc._RF.push(t,"b68d4diJUxA1oH9JZPXIXdU","PlayerSkin"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(e,t,o){this.Hat=e,this.Glasses=t,this.Dress=o},cc._RF.pop()},{}],Player_Remote:[function(e,t,o){"use strict";cc._RF.push(t,"c8904i4ZKZBZrP+WZ3qtVcp","Player_Remote");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.REMOTESTATE=void 0;var a,c=e("./CarBase"),s=e("../../globals"),l=e("./Bot"),u=e("../Utils/Util"),p=e("../Const"),d=e("../Maps/PathManager"),f=e("./PlayerController"),h=e("../Maps/CheckPoint"),g=e("../GameCamera"),y=e("../Network/NetClient"),m=cc._decorator,_=m.ccclass;m.property,function(e){e[e.NORAML=0]="NORAML",e[e.SLOWER=1]="SLOWER",e[e.FASTER=2]="FASTER"}(a=o.REMOTESTATE||(o.REMOTESTATE={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastMsgTime=0,t.lastStateMsgID=-1,t.remoteLocalGameClock=-1,t.lastUpdate={},t.isBotMode=!1,t._debug=!1,t.lastPos=cc.Vec2.ZERO,t.lastVelocity=cc.Vec2.ZERO,t.lastdistanceNextPoint=0,t.lastAngle=0,t.detalTimeSynch=0,t.lastSpeed=0,t.lastLooping=!1,t._godMode=!1,t.lastDirection=c.CarDirection.NONE,t.lastGear=0,t.lastCarState=c.CarState.IDLE,t.DISTANCE_NEED_TELEPORT=2e3,t.DISTANCE_NEED_AI_RUN=150,t.GodeMode=!1,t.lastCheckPointIndex=-1,t.deltaDistance2Update=0,t.lastTotalTimeUpdate=0,t.lastLap=0,t.lastDistance=0,t.lastAccebleration=cc.Vec2.ZERO,t.nextPostInterPoint=cc.Vec2.ZERO,t.nextCheckPointInterPoint=cc.Vec2.ZERO,t.historyPos=[],t.aRemoteBot=!1,t.predictedPos=new cc.Vec2,t.predictedDirection=c.CarDirection.NONE,t.angularVelocity=0,t.predictedVelocity=cc.Vec2.ZERO,t.previousLooping=!1,t.previousVelocity=cc.Vec2.ZERO,t.delayFrame=60,t._t1=0,t._t2=0,t.extrapolateTime=0,t.hasJustUpdate=!1,t.curError=cc.v2(0,0),t.actualPosHistory=[],t.lastPost=0,t.lastTimeUpdate=0,t.isCanIncreaseLap=!0,t}return r(t,e),t.prototype.isRemote=function(){return!this.isBotMode},t.prototype.isGodMode=function(){return this._godMode},t.prototype.GodMode=function(e){this._godMode=e},t.prototype.isLocallyControlledBot=function(){return!!this.isBotMode},t.prototype.isLocalHuman=function(){return!1},t.prototype.enableBot=function(){this.HasStopped()||(this._setBotMethod(l.BOTMETHOD.ANGLE),this.isBotMode=!0,this.nextCurStateMsgID=this.lastStateMsgID+1,cc.log("#"+this.getPlayerName()+" has switched to Bot"+f.default.inst.getLocalPlayer().getPlayerName()))},t.prototype.isARemoteBot=function(){return this.aRemoteBot},t.prototype.updateFromNetStateData=function(e){var t=Date.now();if(!(e.stateMsgID<=this.lastStateMsgID)){this.lastStateMsgID=e.stateMsgID,this.remoteLocalGameClock<0&&(this.remoteLocalGameClock=e.lastGameTimeUpdate),this.detalTimeSynch=Date.now()-this.lastMsgTime,this.lastAngle=e.angle;var o=cc.v2(e.pos.x,e.pos.y);0==this.historyPos.length?this.historyPos.push(o):o.equals(this.historyPos[this.historyPos.length-1])||this.historyPos.push(o),this.lastPos.equals(cc.Vec2.ZERO)||(this.deltaDistance2Update=cc.Vec2.distance(this.lastPos,o)),this.lastPos=o,this.lastUpdate=e,this.lastTotalTimeUpdate=e.totalTime,this.lastVelocity=cc.v2(e.veloc.x,e.veloc.y),this.lastdistanceNextPoint=e.distanceNextPoint,this.lastSpeed=e.speed,this.hasJustUpdate=!0,this.lastGear=e.gear,this.lastCarState=e.carState,this.lastCheckPointIndex=e.Cpoint,this.lastLap=e.lap,this.lastMsgTime=t,this.lastAccebleration=e.lastLinerAcc,this.lastDistance=e.fardistance,this.lastFinishRace=e.FRace,this.StateSyncImprovement(e)}},t.prototype.StateSyncImprovement=function(e){if(this.previousStatePosition=this.statePosition,this.statePosition=cc.v2(e.pos.x,e.pos.y),this.stateVelocity=cc.v2(e.veloc.x,e.veloc.y),this.previousLooping=this.lastLooping,this.lastLooping=e.loop,this.previousVelocity=this._rgbody.linearVelocity,!this.previousLooping&&this.lastLooping||this.previousLooping&&!this.lastLooping){if(this.node.position=cc.v3(this.statePosition),!this.previousLooping)return this.lastVelocity=this.getVelocity(),this.lastAngularVelocity=this.getAngularVelocity(),this.setVelocity(cc.v2(0,0)),this.setAngularVelocity(0),void this._setBotMethod(l.BOTMETHOD.ANGLE);this.setVelocity(this.stateVelocity),this._setBotMethod(l.BOTMETHOD.NONE)}else{if(this.previousLooping&&this.lastLooping)return this.setVelocity(this.getVelocity()),void this._setBotMethod(l.BOTMETHOD.ANGLE);this._setBotMethod(l.BOTMETHOD.NONE)}var t=this.stateVelocity.mul(y.default.GAME_UPDATE_TIME_MS/1e3+y.default.inst.averageLatencyMS/1e3/2),o=t.len();this.predictedPos=this.statePosition.add(t);var n=this.predictedPos.sub(cc.v2(this.node.position)),r=n.len(),i=this.statePosition.sub(cc.v2(this.node.position)),a=i.len(),c=n.dot(i)/(r*r),s=this.clampAngle360(cc.misc.radiansToDegrees(Math.acosh(c)));a>=500&&a<=r&&s<=60&&(this.node.position=cc.v3(this.statePosition));var p=this.node.angle,d=this.clampAngle360(u.default.angle2Point(this.node.position,this.predictedPos)),f=this.calculateRotation(p,d),h=(f[0],f[1]);if(this.angularVelocity=h/y.default.GAME_UPDATE_TIME_MS*1e3,0===o||0===r)this.predictedVelocity=this.stateVelocity,this.lastSpeed=e.speed;else{var g=r/o*this.stateVelocity.len();this.predictedVelocity=this.predictedPos.sub(cc.v2(this.node.position)).normalize().mul(g),this.lastSpeed=e.speed*r/o}this.extrapolateTime=0},t.prototype.calculateRotation=function(e,t){var o=0,n=c.CarDirection.NONE;e=this.clampAngle360(e);var r=(t=this.clampAngle360(t))>e?0:360,i=t>e?360:0;return r+=t-e,i+=e-t,t===e&&(r=0,i=0),r>i?(n=c.CarDirection.RIGHT,o=i):r<i?(n=c.CarDirection.LEFT,o=r):(n=c.CarDirection.NONE,o=0),[n,o]},t.prototype.isPlayerRemote=function(){return!this.netID.includes(":")},t.prototype.clampAngle360=function(e){return(e+360)%360},t.prototype.applyMovement=function(e,t){this.rightVelocity().mag()>this._parameter.MAX_STICKY_VELOCITY&&this.torforce>=this._parameter.TORQUE_SPEED_MAX-this._parameter.TORQUE_SPEED_MIN?(this._driftFactor=this._parameter.DRIFT_FACTOR_SLIPPY,this._driftFactor<this._parameter.DRIFT_FACTOR_SLIPPY&&(this._driftFactor+=.01)):this._driftFactor>this._parameter.DRIFT_FACTOR_STICKY&&(this._driftFactor-=.01);var o=this.rightVelocity().mul(this._driftFactor);this._rgbody.linearVelocity=this.forwardVelocity().add(o);var n=this.getWorldVector(cc.Vec2.UP).mul(e*t*3);this._rgbody.applyForce(n,cc.v2(this._rgbody.getWorldCenter()),!0),this.applyDirection(t,o.mag())},t.prototype.start=function(){this._setBotMethod(l.BOTMETHOD.NONE),e.prototype.start.call(this),this.setIntelligence(90),this.lastTimeEnterLooping=-500,this.lastLooping=!1;var t=new cc.Node;this.graphicNode=t.addComponent(cc.Graphics),t.parent=this.node.parent,this.graphicNode.lineWidth=1,this.needUpdateForce=!0,this.lastFinishRace=!1,this.isFastChangeAngle=!1},t.prototype.hasDisconnected=function(){return this._isDisconnected},t.prototype.update=function(t){var o;if(s.default.Game.inst.hasRaceStarted()&&this._startRace&&!this.HasStopped())if(this.isBotMode||this._finishedRace||this._method!==l.BOTMETHOD.NONE)this.isLooping||e.prototype.update.call(this,t);else{this.extrapolateTime+=t;var n,r=c.CarDirection.NONE,i=this.clampAngle360(this.node.angle),a=this.predictedPos.sub(cc.v2(this.node.position)).lengthSqr();a>=25e4&&(this.node.position=cc.v3(this.statePosition)),n=a<=2500?this.clampAngle360(u.default.angle2Point(this.statePosition,this.predictedPos)):this.clampAngle360(u.default.angle2Point(this.node.position,this.predictedPos)),r=(o=this.calculateRotation(i,n))[0],(o[1]<=l.MIN_ANGLE||r===c.CarDirection.NONE)&&(r=c.CarDirection.NONE),r===c.CarDirection.LEFT||c.CarDirection.RIGHT;var p=cc.misc.clamp01(this.extrapolateTime/y.default.GAME_UPDATE_TIME_MS*1e3),d=new cc.Vec2;d.x=cc.misc.lerp(this.previousVelocity.x,this.predictedVelocity.x,p),d.y=cc.misc.lerp(this.previousVelocity.y,this.predictedVelocity.y,p),this.setVelocity(d),this.setDirection(r),this.applyMovement(this.lastSpeed,t)}else this.updateNamePosition()},t.prototype.UpdateRemoteState=function(e){var t=this.getCurrentCheckPointIndex();if(this.getCurrentLap(),this.getDistanceNextPoint(),this.isLooping&&(this.lastTimeEnterLooping=f.default.inst.getLocalPlayer().getTotalTimeRace()),!this.isCanIncreaseLap&&t<90&&t>20&&(this.isCanIncreaseLap=!0),this.historyPos.length>5&&(0!=this.lastVelocity.x||0!=this.lastVelocity.y)&&!this.isLooping){this.getWorldPosition(),this.lastTimeUpdate=f.default.inst.getLocalPlayer().getTotalTimeRace();var o=(f.default.inst.getLocalPlayer().getTotalTimeRace()-this.lastTotalTimeUpdate)/1e3,n=this.lastPos.x+this.lastVelocity.x*o+this.lastAccebleration.x*o*o/2*3,r=this.lastPos.y+this.lastVelocity.y*o+this.lastAccebleration.y*o*o/2*3;this.nextPostInterPoint=cc.v2(n,r);var i=1.5*this.getWorldPosition().sub(this.nextPostInterPoint).mag(),s=void 0;if(this.getRemoteState()==a.FASTER&&f.default.inst.getLocalPlayer().getTotalTimeRace()-this.lastTimeEnterLooping>500){if((this._speedForce<this.lastSpeed||0==this.getVelocity().x&&0==this.getVelocity().y)&&(this._speedForce=this.lastSpeed),this._speedForce>1e4&&this._speedForce,i>=500&&!this.lastLooping&&this._currentCheckPointIndex<this.lastCheckPointIndex-5&&this.lastLap==this._currentLap){var l=this.lastCheckPointIndex+1,p=g.default.inst.getPosAtCheckPoint(l),d=g.default.inst.getPosAtCheckPoint(l+1);this.node.position=cc.v3(this.node.parent.convertToWorldSpaceAR(p));var y=this.node.getComponent(h.default);this._currentCheckPointIndex=l,y.currentPointIndex=l,this.lastLap>this._currentLap&&(this.isCanIncreaseLap=!1),this._currentLap=this.lastLap,s=u.default.angle2Point(p,d),this.UpdateInstanAngle(s),this.setVelocity(this.lastVelocity),this.setSpeed(this._speedForce,this._gearRatio),this.setCarSate(c.CarState.ACCELERATION)}else if(i>=200){this.setSpeed(this._speedForce+this.lastForceAdd,this._gearRatio);var m=((s=((s=this.lastFinishRace?u.default.angle2Point(this.getWorldPosition(),this.nextPostInterPoint):u.default.angle2Point(this.getWorldPosition(),this._nextCheckPointPos))+360)%360)-this.node.angle)/(e+1);this.updateDirection(s,m)}else(s=((s=u.default.angle2Point(this.getWorldPosition(),this.nextPostInterPoint))+360)%360)>=120||s<=240?this.UpdateInstanAngle(s):(m=(s-this.node.angle)/(e+1),this.updateDirection(s,m));(this._speedForce>this._parameter.CAR_MAX_SPEED&&f.default.inst.getLocalPlayer().getTotalTimeRace()-this.lastTimeEnterLooping>500||this.lastFinishRace)&&(this._speedForce=this._parameter.CAR_MAX_SPEED+3.5*this.lastForceAdd)}else f.default.inst.getLocalPlayer().getTotalTimeRace()-this.lastTimeEnterLooping>500?(this.setSpeed(this._speedForce-this.lastForceAdd/4,this._gearRatio),this._speedForce>this._parameter.CAR_MAX_SPEED&&f.default.inst.getLocalPlayer().getTotalTimeRace()-this.lastTimeEnterLooping>500&&(this._speedForce=this._parameter.CAR_MAX_SPEED),this.node.angle,m=((s=(s=(s+360)%360)>=120||s<=240?i>=200?u.default.angle2Point(this.getWorldPosition(),this.nextPostInterPoint):u.default.angle2Point(this.getWorldPosition(),this._nextCheckPointPos):u.default.angle2Point(this.getWorldPosition(),this.nextPostInterPoint))-this.node.angle)/(e+1),this.updateDirection(s,m)):(this._speedForce<this.lastSpeed||0==this.getVelocity().x&&0==this.getVelocity().y)&&(this.setVelocity(this.lastVelocity),this._speedForce=this.lastSpeed,s=u.default.angle2Point(this.getWorldPosition(),this.nextPostInterPoint),this.updateDirection(s,s))}},t.prototype.UpdateInstanAngle=function(e){this.node.angle=e},t.prototype.updateDirection=function(e,t){var o=t;this.node.angle=(this.node.angle%360+360)%360,e=(e+360)%360;var n=c.CarDirection.NONE,r=u.default.rotationAngleFromTo(this.node.angle,e,Math.abs(o)),i=r[0],a=r[1];n=i>a?c.CarDirection.RIGHT:i<a?c.CarDirection.LEFT:c.CarDirection.NONE;var s=360-Math.abs(Math.ceil(Math.abs(this.lastAngle))+Math.floor(Math.abs(this.node.angle)));(Math.abs(Math.abs(this.lastAngle)-Math.abs(this.node.angle))<l.MIN_ANGLE||Math.abs(s)<l.MIN_ANGLE)&&(n=c.CarDirection.NONE),n==c.CarDirection.LEFT?this.tapLeft():n==c.CarDirection.RIGHT?this.tapRight():this.tapIdle()},t.prototype.calcActualPosAtTime=function(e){for(var t=this.actualPosHistory.length,o=t-1;o>=0;o--){var n=this.actualPosHistory[o];if(n.gameTime<e){if(o==t-1)break;var r=n,i=this.actualPosHistory[o+1],a=i.gameTime-r.gameTime,c=e-r.gameTime;if(a<=0)return null;var s=c/a;if(s<0||s>1)return console.error("WTF? This must be a unit value"),null;var l=i.posWS.sub(r.posWS).mul(s),u=r.posWS.add(l);return isNaN(u.x)&&console.error("NAN"),u}}return null},t.prototype.findPointIndexNearCheckPoint=function(e){var t=0,o=0,n=0;t=cc.Vec2.distance(this.historyPos[0],this.getNextPointPosition());for(var r=0;r<e.length;r++)t>(o=cc.Vec2.distance(this.historyPos[r],this.getNextPointPosition()))&&(t=o,n=r);return n},t.prototype.getDistanceFromLastCheckPoint=function(e,t){var o=d.default.getInst().getAll(),n=0,r=this.getCurrentLap(),i=this.getCurrentCheckPointIndex();if(this.log("#current"+i+"vs lastpoint"+e),r==t&&(i==e||-1==i||-1==e))return this.lastdistanceNextPoint-this.getCurrentCheckPointIndex();if(r==t&&i==e)return this.lastdistanceNextPoint-this.getCurrentCheckPointIndex();for(var a=r;a<=t;a++)if(a==r&&a<t)for(var c=i;c<o.length-1;c++)n+=d.default.getInst().distance2point(c,c+1);else if(a>r&&a<t)for(c=0;c<o.length-1;c++)n+=d.default.getInst().distance2point(c,c+1);else if(a>r&&a==t)for(c=0;c<=e-1;c++)n+=d.default.getInst().distance2point(c,c+1);else if(r==t)for(c=i;c<e;c++)n+=d.default.getInst().distance2point(c,c+1);return n},t.prototype.log=function(){},t.prototype.drawPos=function(e){if(this._debug){this.graphicNode.clear();for(var t=0;t<e.length;t++){var o=e[t];this.graphicNode.circle(o.x,o.y,p.default.CHECKPOINT_CIRCEL_RADIUS/2)}this.graphicNode.strokeColor=cc.Color.RED,this.graphicNode.stroke()}},t.prototype.getRemoteState=function(){var e=1.7*this.nextPostInterPoint.sub(this.lastPos).mag();return this.getDistance()<this.lastDistance+e||this.lastFinishRace?a.FASTER:a.SLOWER},t.prototype.getTotalRaceTime=function(){return this.lastFinishRace&&!this.isBotMode?this.lastTotalTimeUpdate:e.prototype.getTotalRaceTime.call(this)},t.prototype.HasStopped=function(){return this.isKickOut()||this.HasFinished()||this.lastFinishRace},t.prototype.HasFinished=function(){return this._finishedRace||this.lastFinishRace},t.prototype.getDistance=function(){return this._isKickOut&&!this.isBotMode?this.lastDistance:e.prototype.getDistance.call(this)},t.prototype.onFinishLap=function(e){this._hasFinishedALap=!0,this._tempLap=e,this.isCanIncreaseLap=!1},t.NOUPDATE_BOTSWITCH_DELAY_MS=1e3,i([_],t)}(l.default);o.default=v,cc._RF.pop()},{"../../globals":"globals","../Const":"Const","../GameCamera":"GameCamera","../Maps/CheckPoint":"CheckPoint","../Maps/PathManager":"PathManager","../Network/NetClient":"NetClient","../Utils/Util":"Util","./Bot":"Bot","./CarBase":"CarBase","./PlayerController":"PlayerController"}],Player:[function(e,t,o){"use strict";cc._RF.push(t,"c0c9c1lHXNCRJSvahtkNm5G","Player");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=e("../../globals"),u=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),p=e("../Config"),d=e("../ControlPad"),f=e("../CustomControl"),h=e("../FTUE/FTUEManager"),g=e("../Game"),y=e("../GroupCollision/GroupCollisionManager"),m=e("../League/LeagueManager"),_=e("../Main"),v=e("../SteeringWheel"),S=e("../Tracking/TrackingManager"),N=e("../Utils/ConstConfig"),b=e("./CarBase"),C=7,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controlType=b.CONTROLTYPE.SWIPE,t.SWIPE_LENGTH=1,t.wheelControlNode=null,t.arrowLeading=null,t.isTouching=!1,t.isTouchingLeft=!1,t.isTouchingRight=!1,t.minAnglePerFrame=0,t.isGameStart=!1,t.currentCarAngle=0,t.nextCarAngle=0,t.frameDelayTouch=C,t.controlPad=null,t.steeringControl=null,t.arrowControl=null,t.deathWheelAngle=5,t.MAX_SWIPE_DISTANCE=90,t.DEATH_SWIPE_DISTANCE=45,t.lastDirection=b.CarDirection.NONE,t.isFTUE=!1,t.keepDirecting=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.localPlayer=this,e.prototype.onLoad.call(this)},t.prototype.start=function(){this.screenSize=cc.view.getFrameSize(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);var t=this;window.onblur=function(){t.tapIdle(),t.isTouching=!1},this.isFTUE=_.Main.inst.isFTUE(),this.node.zIndex=N.ConstConfig.PALYER_ZINDEX,cc.log("HUman created");var n={roundID:g.default.inst.curGameNetID,currentFPS:_.Main.inst.fps,mapID:m.default.getSelectTrack().trackID,carID:o.localPlayer._skinID};S.default.getInst().LogEvent_StartGame(n),e.prototype.start.call(this),f.default.inst.init(),this._nameNode.zIndex=cc.macro.MAX_ZINDEX},t.prototype.getTimeStamp=function(){},t.prototype.update=function(t){l.default.Game.inst.hasRaceStarted()&&(this.isTouching?(this.isJumping()&&this.lastDirection!=b.CarDirection.NONE&&(this.keepDirecting=!0,cc.log("#Jump Keeping direction when jump")),this.keepDirecting&&!this.isJumping()&&(this.setDirection(this.lastDirection),this.keepDirecting=!1,cc.log("#Jump Setting old direction"))):this.keepDirecting=!1,e.prototype.update.call(this,t),this.updateCarDirection(t),this.updateArrowFollow())},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.left:this.tapLeft(),this.isTouching=!0;break;case cc.macro.KEY.right:this.tapRight(),this.isTouching=!0;break;case cc.macro.KEY.space:this.enableBoost()}},t.prototype.onKeyUp=function(){this.tapIdle(),this.isTouching=!1},t.prototype.resetNextCarAngle=function(){cc.log("reset Car ANGLE"),this.nextCarAngle=this.node.angle,this.steeringControl.angle=this.nextCarAngle},t.prototype.updateArrowFollow=function(){this.isFTUE&&h.default.inst.curStep<=h.FTUE_STEP.REQUIRE_INPUT||(this.controlType==b.CONTROLTYPE.WHEEL_CONTROL&&this.steeringControl?this.steeringControl.position=this.node.position:this.controlType==b.CONTROLTYPE.LEFT_RIGHT&&this.arrowControl&&(this.arrowControl.position=this.node.position,this.arrowControl.angle=this.node.angle))},t.prototype.updateCarDirection=function(){if(this.currentTouchMove=this.currenttouchStartMove,this.controlType==b.CONTROLTYPE.SWIPE)this.nextCarAngle>0?this.tapLeft():this.nextCarAngle<0?this.tapRight():this.tapIdle();else if(this.controlType==b.CONTROLTYPE.WHEEL_CONTROL){var e=this.node.angle+180,t=this.nextCarAngle+180;if(e<0?e+=360*Math.abs(Math.floor(e/360)):e>360&&(e-=360*Math.floor(e/360)),Math.abs(t-e)<=this.deathWheelAngle)return void this.tapIdle();t<e?e-t<t+360-e?this.tapRight():this.tapLeft():t-e<e+360-t?this.tapLeft():this.tapRight()}},t.prototype.tapLeft=function(){u.default.inst.onPlayerInput(),this.isTouching=!0,this.lastDirection=b.CarDirection.LEFT,e.prototype.tapLeft.call(this)},t.prototype.tapRight=function(){if(_.Main.inst.isFTUE()){var t=h.default.inst.getCurrentStep();t!=h.FTUE_STEP.REQUIRE_INPUT&&t!=h.FTUE_STEP.OPTINAL_INPUT||h.default.inst.finishStep(h.FTUE_STEP.REQUIRE_INPUT)}u.default.inst.onPlayerInput(),this.lastDirection=b.CarDirection.RIGHT,this.isTouching=!0,e.prototype.tapRight.call(this)},t.prototype.tapIdle=function(){e.prototype.tapIdle.call(this),this.isTouching=!1},t.prototype.tapDown=function(e,t){this.isTouching=!0,this.touchStartPos=e.getLocation(),this.controlType==b.CONTROLTYPE.LEFT_RIGHT?t?this.tapLeft():this.tapRight():this.controlType==b.CONTROLTYPE.WHEEL_CONTROL&&f.default.inst.isWheelFreeStyle?(this.wheelControlNode.active=!0,this.wheelControlNode.opacity=255,this.wheelControlNode.angle=this.nextCarAngle,this.wheelControlNode.getComponent(v.default).setNewPosition(this.touchStartPos)):this.controlType==b.CONTROLTYPE.SWIPE&&(this.controlPadNode.active=!0,this.controlPadNode.setPosition(this.touchStartPos.add(cc.v2(0,100))),this.controlPad=this.controlPadNode.getComponent(d.default),this.controlPad.reset())},t.prototype.tapUp=function(){this.isTouching=!1,cc.log("tapUp Resstourch"),this.lastDirection=b.CarDirection.NONE,this.tapIdle(),p.default.OFFLINE_MODE&&(this.isGameStart||l.default.Game.inst.offlineGame()),this.currenttouchStartMove=null,this.currentTouchMove=null,this.controlType==b.CONTROLTYPE.WHEEL_CONTROL||(this.nextCarAngle=0)},t.prototype.isLocalHuman=function(){return!0},t.prototype.tapMove=function(e){this.isTouching=!0;var t=e.getLocation();if(this.controlType==b.CONTROLTYPE.SWIPE){this.currenttouchStartMove=t;var o=this.currenttouchStartMove.sub(this.touchStartPos),n=cc.misc.clampf(o.x,-this.MAX_SWIPE_DISTANCE,this.MAX_SWIPE_DISTANCE);Math.abs(n)<this.DEATH_SWIPE_DISTANCE?this.nextCarAngle=0:this.nextCarAngle=-n,this.controlPad.updatePos(n)}else if(this.controlType==b.CONTROLTYPE.WHEEL_CONTROL){this.currenttouchStartMove=t;var r=this.wheelControlNode.parent.convertToWorldSpaceAR(this.wheelControlNode.position),i=t.sub(cc.v2(r)),a=Math.atan2(i.x,i.y),c=cc.misc.radiansToDegrees(a);this.nextCarAngle=-c,this.wheelControlNode.angle=this.nextCarAngle,this.steeringControl.angle=this.nextCarAngle}},t.prototype.tapCancel=function(){this.isTouching=!1},t.prototype.hiddenCarUI=function(){this.controlType==b.CONTROLTYPE.WHEEL_CONTROL?this.steeringControl&&(this.steeringControl.active=!1):this.controlType==b.CONTROLTYPE.LEFT_RIGHT&&this.arrowControl&&(this.arrowControl.active=!1),e.prototype.hiddenCarUI.call(this)},t.prototype.changeControlType=function(e){if(this.controlType=e,this.controlType==b.CONTROLTYPE.LEFT_RIGHT&&null==this.arrowControl){var t=cc.instantiate(this.arrowLeading);this.arrowControl=t,this.arrowControl.parent=this.node.parent}else this.controlType,b.CONTROLTYPE.WHEEL_CONTROL;cc.log(e),this.setControlType(e)},t.prototype.enableBoost=function(){e.prototype.enableBoost.call(this)},t.prototype.onCheckPoint=function(t,o,n){e.prototype.onCheckPoint.call(this,t,o,n)},t.prototype.onWrongWay=function(){this.isLooping?this.onRightWay():(l.default.Game.inst.node.emit("wrongWay"),e.prototype.onWrongWay.call(this))},t.prototype.onRightWay=function(){l.default.Game.inst.node.emit("rightWay"),e.prototype.onRightWay.call(this)},t.prototype.drawSensorLine=function(e,t){this.graphics&&(this.graphics.moveTo(this.getWorldPosition().x,this.getWorldPosition().y),this.graphics.lineTo(e.x,e.y),this.graphics.strokeColor=t,this.graphics.stroke())},t.prototype.onCollisionEnter=function(t,o){if(t.node.group==y.GroupCollision.FTUE&&_.Main.inst.isFTUE()){var n=h.default.inst.getCurrentStep();0==t.tag&&n==h.FTUE_STEP.REACH_START_ZONE?h.default.inst.finishStep(h.FTUE_STEP.REACH_START_ZONE):1==t.tag&&n<=h.FTUE_STEP.OPTINAL_INPUT?h.default.inst.finishStep(h.FTUE_STEP.OPTINAL_INPUT):2==t.tag&&n==h.FTUE_STEP.REACH_NEAR_FINISH_LAP_1&&h.default.inst.finishStep(h.FTUE_STEP.REACH_NEAR_FINISH_LAP_1)}else e.prototype.onCollisionEnter.call(this,t,o)},t.prototype.onBeginContact=function(t,o,n){e.prototype.onBeginContact.call(this,t,o,n)},t.prototype.onEndContact=function(t,o,n){e.prototype.onEndContact.call(this,t,o,n)},t.prototype.onPostSolve=function(e,t,o){var n=this;this.isTouching||o.node.group==y.GroupCollision.ROAD&&this.getDirection()==b.CarDirection.NONE&&(5==t.tag?this.setDirection(b.CarDirection.LEFT,!1):4==t.tag&&this.setDirection(b.CarDirection.RIGHT,!1),setTimeout(function(){n.isTouching||n.setDirection(b.CarDirection.NONE)},200))},t.localPlayer=null,i([s({type:cc.Enum(b.CONTROLTYPE)})],t.prototype,"controlType",void 0),i([s],t.prototype,"SWIPE_LENGTH",void 0),i([s(cc.Node)],t.prototype,"wheelControlNode",void 0),i([s(cc.Prefab)],t.prototype,"arrowLeading",void 0),i([s(cc.Node)],t.prototype,"steeringControl",void 0),o=i([c],t)}(b.default);o.default=P,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../globals":"globals","../Config":"Config","../ControlPad":"ControlPad","../CustomControl":"CustomControl","../FTUE/FTUEManager":"FTUEManager","../Game":"Game","../GroupCollision/GroupCollisionManager":"GroupCollisionManager","../League/LeagueManager":"LeagueManager","../Main":"Main","../SteeringWheel":"SteeringWheel","../Tracking/TrackingManager":"TrackingManager","../Utils/ConstConfig":"ConstConfig","./CarBase":"CarBase"}],PoolNodesManager:[function(t,o,n){"use strict";cc._RF.push(o,"07155dP/pZGRJGjvpnDzLQQ","PoolNodesManager");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.PoolNodeId=void 0;var l,u=cc._decorator,p=u.ccclass,d=u.property;(function(e){e[e.ItemLeaderBoard=0]="ItemLeaderBoard",e[e.Star=1]="Star",e[e.Magnet=2]="Magnet",e[e.Turbo=3]="Turbo"})(l=n.PoolNodeId||(n.PoolNodeId={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemsLeaderboard=null,t.itemLeaderboardPrefab=null,t.star=null,t.starPrefab=null,t.magnet=null,t.magnetPrefab=null,t.turbo=null,t.turboPrefab=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(){for(o.inst=this,this.itemsLeaderboard=new cc.NodePool,e=0;e<32;e++)(t=cc.instantiate(this.itemLeaderboardPrefab)).parent=this.node,this.itemsLeaderboard.put(t);return[2]})})},t.prototype.getNodeFromPool=function(e){var t=null;switch(e){case l.ItemLeaderBoard:null==(t=this.itemsLeaderboard.get())&&(t=cc.instantiate(this.itemLeaderboardPrefab));break;case l.Star:null==(t=this.star.get())&&(t=cc.instantiate(this.starPrefab));break;case l.Magnet:null==(t=this.magnet.get())&&(t=cc.instantiate(this.magnetPrefab));break;case l.Turbo:null==(t=this.turbo.get())&&(t=cc.instantiate(this.turboPrefab))}return t},t.prototype.putNodeToPool=function(e,t){var o=null;switch(e){case l.ItemLeaderBoard:o=this.itemsLeaderboard;break;case l.Star:o=this.star;break;case l.Turbo:o=this.turbo;break;case l.Magnet:o=this.magnet;break;default:o=new cc.NodePool}o.put(t)},t.inst=null,a([d(cc.Prefab)],t.prototype,"itemLeaderboardPrefab",void 0),a([d(cc.Prefab)],t.prototype,"starPrefab",void 0),a([d(cc.Prefab)],t.prototype,"magnetPrefab",void 0),a([d(cc.Prefab)],t.prototype,"turboPrefab",void 0),o=a([p],t)}(cc.Component);n.default=f,cc._RF.pop()},{}],PopupSection:[function(e,t,o){"use strict";cc._RF.push(t,"229bbISYNdBP5CG7D3l5070","PopupSection");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Utils/Util"),c=e("./SectionBase"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popupInfoLb=null,t}return r(t,e),Object.defineProperty(t.prototype,"popupInfo",{get:function(){return this._popupInfo},set:function(e){this._popupInfo=e,this.popupInfoLb.string=e},enumerable:!1,configurable:!0}),t.prototype.show=function(e){e||(e=cc.find("Canvas")),this.node.parent=e,this.node.setPosition(0,0),a.default.showPopup(this.node)},t.prototype.hide=function(){this.node.destroy()},i([u(cc.Label)],t.prototype,"popupInfoLb",void 0),i([l],t)}(c.default);o.default=p,cc._RF.pop()},{"../Utils/Util":"Util","./SectionBase":"SectionBase"}],PositionAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"df386ciCrxIb4K2pEulrA6i","PositionAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Frames=[],t.SpriteBG=null,t.posNode=null,t.currentStatus=!1,t.pos=null,t.prefix=null,t.isShowFlashing=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){this.SpriteBG.node.opacity=0,this.node.on("changePos",this.changePos.bind(this)),this.node.on("reset",this.reset.bind(this))},t.prototype.changePos=function(e,t){this.currentStatus==e&&this.isShowFlashing==t||(cc.Tween.stopAllByTag(10),this.currentStatus=e,this.isShowFlashing=t,this.posNode.scale=1.7,this.dangerousEffect(e,t))},t.prototype.dangerousEffect=function(e,t){var o=e?1:0;if(this.currentStatus==e){this.SpriteBG.spriteFrame=this.Frames[o];var n=this,r=t?.3:.5;t||(n.pos.color=cc.Color.WHITE,n.prefix.color=cc.Color.WHITE);var i,a=cc.tween(this.SpriteBG.node).to(r,{opacity:255}).call(function(){t&&(n.pos.color=cc.Color.RED,n.prefix.color=cc.Color.RED)}).to(r,{opacity:255}).call(function(){e?(n.pos.color=cc.Color.RED,n.prefix.color=cc.Color.RED):(n.pos.color=cc.Color.GREEN,n.prefix.color=cc.Color.GREEN)}).to(r,{opacity:0}).call(function(){e&&t&&t&&n.dangerousEffect(!0,!0)});i=t?cc.tween(this.posNode).to(r,{scale:1.2}).to(r,{}).to(r,{scale:1}):cc.tween(this.posNode).to(r,{scale:1}),a.tag(10),i.tag(10),a.start(),i.start()}},t.prototype.reset=function(){this.currentStatus=!1},i([s(cc.SpriteFrame)],t.prototype,"Frames",void 0),i([s(cc.Sprite)],t.prototype,"SpriteBG",void 0),i([s(cc.Node)],t.prototype,"posNode",void 0),i([s(cc.Node)],t.prototype,"pos",void 0),i([s(cc.Node)],t.prototype,"prefix",void 0),o=i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],PositionBar:[function(e,t,o){"use strict";cc._RF.push(t,"a3940wbdvhAz4EnBe/lHWpv","PositionBar");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Player/PlayerController"),c=e("../Game"),s=e("../Maps/PathManager"),l=e("./LapInfor"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(){function e(e,t,o){this._status=!1,this._target=0,this._tweenRunning=!1,this._lastDistance=e,this._node=t,this._netID=o,this._warnIcon=t.getChildByName("icon_warning"),this._warnIcon.active=!1}return e.prototype.setWarning=function(e,t){this._status!=e&&(this._status=e,this._warnIcon.active=e,this.setFrame(t[e?1:0]))},e.prototype.setFrame=function(e){this._node.getComponent(cc.Sprite).spriteFrame=e},e.prototype.tween=function(){var e=this;this._tweenRunning||(this._tweenRunning=!0,this._tween=cc.tween(this._node).to(.05,{position:cc.v3(this._node.x,this._target)}).call(function(){e._tweenRunning=!1}).start())},e}(),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastPlayerIsDangerous=!1,t.player=null,t.bar=null,t.bar_fake=null,t.finishLine=null,t.oponent=null,t.iconWarn=null,t.playerSprs=[],t.oponentSprs=[],t._roadDistance=0,t._barH=0,t.debug=!1,t._listDecorItems=[],t._listPlayers=[],t._userStatus=!1,t._currentCarDistance=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){this.reset()},t.prototype.reset=function(){0==this._barH&&(this._barH=this.bar_fake.height),this._startPoint||(this._startPoint=cc.v2(this.finishLine.position)),this._roadDistance=0,this._listDecorItems.forEach(function(e){e.destroy()}),this._listDecorItems=[],this._listPlayers.forEach(function(e){e._node.destroy()}),this._listPlayers=[],this.setDangerous(!1),this.bar.height=this._barH,this.bar.y=this.player.node.y-this._barH/2,this._currentCarDistance=0},t.prototype.update=function(e){var t=a.default.getInst().getLocalPlayer();null!=t&&(a.default.getInst().allPlayer(),this.updateBar(t,e))},t.prototype.updateBar=function(e){var t=this;if(this.bar)if(0==this._roadDistance){this._roadDistance=s.default.getInst().getRoadDistance()/30,this.oponent.node.active=!1;for(var o=0;o<=l.default.__maxLap;o++){var n=cc.instantiate(this.finishLine);n.parent=this.bar,n.position=cc.v3(0,this._roadDistance*o+this._barH/2,0),n.active=!0,this._listDecorItems.push(n)}this.bar.height=this._roadDistance*l.default.__maxLap,cc.log("PositionBar - Init Value")}else{var r=a.default.getInst().allPlayer();if(c.default.inst.isReadyGo()){var i=e.getDistance();if(i<this._currentCarDistance)return;var u=(0==this._currentCarDistance?i:i-this._currentCarDistance)/30;this.bar.y-=u,this._listPlayers.forEach(function(e){var o=a.default.inst.findPlayerByNetID(e._netID);if(o&&e._lastDistance<=t._startPoint.y+o.getDistance()/30){e._target=t._startPoint.y+o.getDistance()/30;var n=Math.max(2,(e._target-e._node.y)/3),r=e._node.y+n;e._node.y=cc.misc.clampf(r,0,e._target),e._lastDistance=e._node.y,e.setWarning(o.isDangerous(),t.oponentSprs)}}),this.setDangerous(e.isDangerous()),this._currentCarDistance=i}else r.forEach(function(e){if(!e.isLocalHuman()&&!t.hasPlayer(e.netID)){var o=cc.instantiate(t.oponent.node);o.parent=t.bar,o.position=cc.v3(0,t.oponent.node.y,0),o.active=!0,t._listPlayers.push(new f(0,o,e.netID))}})}},t.prototype.setDangerous=function(e){this._userStatus!=e&&(this._userStatus=e,this.player.spriteFrame=this.playerSprs[e?1:0])},t.prototype.hasPlayer=function(e){for(var t=0;t<this._listPlayers.length;t++)if(this._listPlayers[t]._netID==e)return!0;return!1},i([d(cc.Sprite)],t.prototype,"player",void 0),i([d(cc.Node)],t.prototype,"bar",void 0),i([d(cc.Node)],t.prototype,"bar_fake",void 0),i([d(cc.Node)],t.prototype,"finishLine",void 0),i([d(cc.Sprite)],t.prototype,"oponent",void 0),i([d(cc.Sprite)],t.prototype,"iconWarn",void 0),i([d({type:cc.SpriteFrame})],t.prototype,"playerSprs",void 0),i([d({type:cc.SpriteFrame})],t.prototype,"oponentSprs",void 0),o=i([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../Game":"Game","../Maps/PathManager":"PathManager","../Player/PlayerController":"PlayerController","./LapInfor":"LapInfor"}],PreviewSkin:[function(t,o,n){"use strict";cc._RF.push(o,"9f094LrJZZDE4Ed2c3S268l","PreviewSkin");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../CarSelector/CarSkinSelecter"),u=t("../../CarSelector/HaloTimeShader"),p=t("../../ReScaleObject"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.previewSkin=null,t}return i(t,e),t.prototype.onLoad=function(){return c(this,void 0,void 0,function(){return s(this,function(){return[2]})})},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.showPreview=function(e){var t=null;l.default.s_allCarSkins.forEach(function(o){o.carID==e&&(t=o)}),this.showHaloEffect(t)},t.prototype.showHaloEffect=function(e){var t=this;cc.log("#Skin Select",e);var o=e.carGroup-1,n=e.carTurboType;this.previewSkin.spriteFrame=l.default.getSpriteFrameFromID(e.carID);var r=this.previewSkin.node.getComponent(u.default);r||(r=this.previewSkin.addComponent(u.default)),r.play(this.matDissolve[o],!1);var i=this.convertTuboType2num(n);this.haloBackSpr.node.active=!0,this.haloFrontSpr.node.active=!0,this.haloBackSpr.node.getComponent(u.default).play(this.Materials_Halo[o]),this.haloFrontSpr.node.getComponent(u.default).play(this.Materials_Halo[o]),this.turbos.forEach(function(o,r){if(o){o.active=!1;var a=o.getComponent(u.default);a&&a.stop(),r==i&&t.scheduleOnce(function(){o.getComponentsInChildren(cc.ParticleSystem).forEach(function(t){n!=l.CAR_TURBO_TYPE.HEART&&n!=l.CAR_TURBO_TYPE.SPARKLE||e.carColor&&(t.startColor=(new cc.Color).fromHEX(e.carColor),t.endColor=(new cc.Color).fromHEX(e.carColor)),t.resetSystem()}),a&&a.play(),e.carColor&&(o.color=(new cc.Color).fromHEX(e.carColor)),o.active=!0},.5)}}),this.haloSquarePS.forEach(function(e,n){e&&(n==o?(e.node.active=!0,0==t._startSize&&(t._startSize=e.startSize),0==t._endSize&&(t._endSize=e.endSize),e.startSize=t._startSize*p.default.inst.currentScale,e.endSize=t._endSize*p.default.inst.currentScale,e.resetSystem()):e.node.active=!1)})},a([h(cc.Sprite)],t.prototype,"previewSkin",void 0),a([f],t)}(l.default);n.default=g,cc._RF.pop()},{"../../CarSelector/CarSkinSelecter":"CarSkinSelecter","../../CarSelector/HaloTimeShader":"HaloTimeShader","../../ReScaleObject":"ReScaleObject"}],PrizeScreen:[function(t,o,n){"use strict";cc._RF.push(o,"ced1dn9EyNAroRLsQt/cXKe","PrizeScreen");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.PrizeScreen=void 0;var l=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),u=t("../../../NanoGameCore/CrossFeatures/RealPrize/Script/NgcRealPrizeManager"),p=t("../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog"),d=t("../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeDefines"),f=t("../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeEventRuleDialog"),h=t("../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeTabMenu"),g=t("../../../NanoGameCore/CrossFeatures/TabBar/Script/TabBarManager"),y=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),m=t("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),_=t("../../../NanoGameCore/Services/Telemetry/Telemetry"),v=cc._decorator,S=v.ccclass,N=v.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageView=null,t.events=[],t.prizeTabMenu=null,t._prizeState=d.PRIZE_STATE.COMING_SOON,t}return i(t,e),t.prototype.onLoad=function(){cc.log("Init prize screen!"),this.setEventState(d.PRIZE_STATE.NONE)},t.prototype.setEventState=function(e){this.events.forEach(function(t,o){t&&(t.active=e===o)}),this.pageView.enabled=e===d.PRIZE_STATE.AVAILABLE_EVENT},t.prototype.onClickTicketPlusBtn=function(){return c(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return cc.sys.isMobile,e=p.default.RealPrizeBuyTicketDialog_Mobile,[4,l.NgcDialogManager.createDialog(p.default.dialogType,e,p.default.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(p.default)).init(),o.show(),[2]}})})},t.prototype.onClickEventRuleInfo=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return cc.sys.isMobile,e=f.default.RealPrizeEventRuleDialog_Mobile,[4,l.NgcDialogManager.createDialog(f.default.dialogType,e,f.default.bundleName)];case 1:return t.sent().getComponent(f.default).show(),[2]}})})},t.prototype.start=function(){},t.prototype.onActivate=function(){this.updateTabBarHighlight(),cc.log("@@@ PRIZE ON ACTIVE"),_.NgcTelemetry.inst.LogEvent_EnterScreen("Tournament"),this.parseEventUI()},t.prototype.onResume=function(){this.updateTabBarHighlight(),_.NgcTelemetry.inst.LogEvent_EnterScreen("Tournament"),this.parseEventUI()},t.prototype.updateTabBarHighlight=function(){m.default.realPrizeVisited=!0,g.NgcTabBarManager.inst.updateTabButtons(!1)},t.prototype.parseEventUI=function(){var e=this;u.default.getInstance().getEventState(),e.setEventState(0)},t.prototype.onClickScrollUpDown=function(e,t){cc.log(t);var o="up"===t?0:1;this.pageView.scrollToPage(o,1)},t.prototype.onClickLeaderboard=function(){this.prizeTabMenu.onTabMenuBtnClick(null,h.PRIZE_TAB_MENU.LEADERBOARD),this.pageView.scrollToPage(1,1)},a([N(cc.PageView)],t.prototype,"pageView",void 0),a([N(cc.Node)],t.prototype,"events",void 0),a([N(h.NgcRealPrizeTabMenu)],t.prototype,"prizeTabMenu",void 0),a([S],t)}(y.default);n.PrizeScreen=b,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/RealPrize/Script/NgcRealPrizeManager":"NgcRealPrizeManager","../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog":"RealPrizeBuyTicketDialog","../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeDefines":"RealPrizeDefines","../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeEventRuleDialog":"RealPrizeEventRuleDialog","../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeTabMenu":"RealPrizeTabMenu","../../../NanoGameCore/CrossFeatures/TabBar/Script/TabBarManager":"TabBarManager","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry"}],ProfanityCheck:[function(t,o,n){"use strict";cc._RF.push(o,"d0fabxR2mlBzpCGN+1bdOgD","ProfanityCheck");var r=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcProfanityCheck=n.ProfanityResult=void 0;var a=t("../../../globals"),c=t("../../Services/Platform/Platform"),s=t("./BuildConfig");n.ProfanityResult=function(){};var l=function(){function e(){}return e.check=function(e){return r(this,void 0,Promise,function(){var t;return i(this,function(o){switch(o.label){case 0:return s.NgcBuildConfig.offlineMode?[2,new Promise(function(t){t({status:a.default.OfflineMode.ProfanityCheck(e),reasons:""})})]:(t={status:null,reasons:null},[4,c.NgcPlatform.inst.profanityCheck(e).then(function(e){t=e})]);case 1:return o.sent(),[2,t]}})})},e.checkURL="https://profanity.nano.ubisoft.com/filter/",e}();n.NgcProfanityCheck=l,cc._RF.pop()},{"../../../globals":"globals","../../Services/Platform/Platform":"Platform","./BuildConfig":"BuildConfig"}],ProjectConfig:[function(e,t,o){"use strict";var n;cc._RF.push(t,"388a1RlosNMcqgEAP/eL+jb","ProjectConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.ProjectConfig=void 0;o.ProjectConfig=((n={CUR_VERSION:"LIVE_NANO_CONFIG",buildVersion:"20200728.25.20.nano"}).DEV_CONFIG={enabledDebugMode:!0,gameServerURL:"ws://dan-build1:1338",platformServiceURL:"https://services-dev.nano.ubisoft.com",versionValidURL:"",platformGameID:"TMB",tuningDataURL:"http://dan-build1.ubisoft.org/TrackMania/GameParameters.yaml"},n.UAT_CONFIG={enabledDebugMode:!1,gameServerURL:"wss://gameserver.nano.ubisoft.com:1337",platformServiceURL:"https://services-dev.nano.ubisoft.com",versionValidURL:"https://uat.nano.ubisoft.com/l1nv54nd53845714n/RabbidsWildRace/version.txt",platformGameID:"TMB",tuningDataURL:""},n.LIVE_NANO_CONFIG={enabledDebugMode:!1,gameServerURL:"wss://tm-gameserver.nano.ubisoft.com:1338",platformServiceURL:"https://services-dev.nano.ubisoft.com",versionValidURL:"https://nano.ubisoft.com/RabbidsWildRace/version.txt",platformGameID:"TMB",tuningDataURL:""},n),cc._RF.pop()},{}],Protocol:[function(t,o,n){"use strict";cc._RF.push(o,"df9bbMK59pKaq4NF53z17jI","Protocol"),Object.defineProperty(n,"__esModule",{value:!0}),n.GetMessageType=n.Protocol=void 0;var r=t("protobufjs/minimal");(function(e){e[e.SERVER_INIT=0]="SERVER_INIT",e[e.JOIN_ROOM=1]="JOIN_ROOM",e[e.LEAVE_ROOM=2]="LEAVE_ROOM",e[e.PING=3]="PING",e[e.NGC_BROADCAST=4]="NGC_BROADCAST",e[e.OP_END=20]="OP_END"})(n.Protocol||(n.Protocol={})),n.GetMessageType=function(t){var o=-1;try{var n=r.Reader.create(t);n.uint32()>>>3==1&&(o=n.int32())}catch(e){console.log("Get message type error:",e)}return o},cc._RF.pop()},{"protobufjs/minimal":82}],PurchaseMethodAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"73f3dRB7b5LKIslBpzveGWU","PurchaseMethodAchievement");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodAchievement=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../Services/Inventory/Inventory"),l=e("./ItemStatus"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.titleOutLine=null,t._scalingAnim=null,t}return r(t,e),t.prototype.onLoad=function(){this._scalingAnim=cc.tween(this.title.node).repeatForever(cc.tween(this.title.node).to(.3,{scale:1.2}).to(.3,{scale:1}))},t.prototype.getType=function(){return c.NgcItemStatusType.Achievement},t.prototype.updateInfo=function(e){var t=this;s.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){if(!o&&n){var r=e.price.value,i=n.count<r?n.count:r;t.title.string=i+"/"+r+" m",r==i?(t.title.node.color=new cc.Color(255,228,89),t.titleOutLine.enabled=!0,t._scalingAnim.start()):(t.title.node.color=new cc.Color(0,0,0),t.titleOutLine.enabled=!1,t._scalingAnim.stop())}})},i([d(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([d(cc.LabelOutline)],t.prototype,"titleOutLine",void 0),i([p],t)}(l.NgcItemStatus);o.NgcPurchaseMethodAchievement=f,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../Services/Inventory/Inventory":"Inventory","./ItemStatus":"ItemStatus"}],PurchaseMethodComingSoon:[function(e,t,o){"use strict";cc._RF.push(t,"2d52fbKfO1NvIzHhLjYNBp2","PurchaseMethodComingSoon");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodComingSoon=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.ComingSoon},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcItemStatus);o.NgcPurchaseMethodComingSoon=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodCrownRoad:[function(e,t,o){"use strict";cc._RF.push(t,"8e07fSs7XVCBKvMHMW+/lXI","PurchaseMethodCrownRoad");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodCrownRoad=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.CrownRoad},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcItemStatus);o.NgcPurchaseMethodCrownRoad=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodCurrency:[function(e,t,o){"use strict";cc._RF.push(t,"80bea1dzH1C0bloixOGRs1P","PurchaseMethodCurrency");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodCurrency=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../../GameFramework/Scripts/NgcShopManager"),s=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t.coinIcon=null,t.startIcon=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Currency},t.prototype.updateInfo=function(e){this.price.string=e.price.value.toString(),this.price.node.opacity=c.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)<e.price.value?100:255,this.coinIcon.active="coin"===e.price.currency,this.startIcon.active="star"===e.price.currency},i([p(cc.Label)],t.prototype,"price",void 0),i([p(cc.Node)],t.prototype,"coinIcon",void 0),i([p(cc.Node)],t.prototype,"startIcon",void 0),i([u],t)}(s.NgcItemStatus);o.NgcPurchaseMethodCurrency=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./ItemStatus":"ItemStatus"}],PurchaseMethodDailyReward:[function(e,t,o){"use strict";cc._RF.push(t,"61ee01U7tpCu6+BrJ+rTOGs","PurchaseMethodDailyReward");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodDailyReward=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.DailyReward},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcItemStatus);o.NgcPurchaseMethodDailyReward=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodIAP:[function(e,t,o){"use strict";cc._RF.push(t,"5dd20iYYFpKwbcYRBUPbMUv","PurchaseMethodIAP");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodIAP=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.IAP},t.prototype.updateInfo=function(){this.price.string="200$"},i([u(cc.Label)],t.prototype,"price",void 0),i([l],t)}(c.NgcItemStatus);o.NgcPurchaseMethodIAP=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodLoginSocial:[function(e,t,o){"use strict";cc._RF.push(t,"b9765dsFn1JSbBlOkBqxVvV","PurchaseMethodLoginSocial");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodLoginSocial=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.LikeSocial},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcItemStatus);o.NgcPurchaseMethodLoginSocial=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodSpecialOffer:[function(e,t,o){"use strict";cc._RF.push(t,"21395qZ2k9BppzGy6uXGUpE","PurchaseMethodSpecialOffer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodSpecialOffer=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.SpecialOffer},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(s.NgcItemStatus);o.NgcPurchaseMethodSpecialOffer=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodWatchAds:[function(e,t,o){"use strict";cc._RF.push(t,"346e4hPb0FMmKMxH5NrhNbi","PurchaseMethodWatchAds");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodWatchAds=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../../Services/Inventory/Inventory"),s=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.steps=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.WatchAds},t.prototype.updateInfo=function(e){var t=this;c.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){if(!o&&n){var r=n.count,i=e.price.value;t.steps.string=r+"/"+i}})},i([p(cc.Label)],t.prototype,"steps",void 0),i([u],t)}(s.NgcItemStatus);o.NgcPurchaseMethodWatchAds=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../Services/Inventory/Inventory":"Inventory","./ItemStatus":"ItemStatus"}],QRCodeGenerator:[function(e,t,o){"use strict";cc._RF.push(t,"ddda4YkunpGJowM2cva277W","QRCodeGenerator"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcQRCodeGenerator=void 0;var n=e("qrcode"),r=function(){function e(){}return e.getInst=function(){e.inst||(e.inst=new e)},e.genQRCodeDataURL=function(e,t){n.toDataURL(e,function(e,o){e?t(e,null):(console.log("@Party QRCode DataURI",o),t(null,o))})},e.genBase64ToSprite=function(e,t){var o=new Image;o.onload=function(){var e=new cc.Texture2D;e.initWithElement(o),e.handleLoadedTexture();var n=new cc.SpriteFrame(e);t(n)}.bind(this),o.src=e},e.genQRCode=function(t,o){e.genQRCodeDataURL(t,function(t,n){t?cc.log("@party Can't create DATA URI",t):e.genBase64ToSprite(n,o)})},e}();o.NgcQRCodeGenerator=r,cc._RF.pop()},{qrcode:93}],ReScaleObject:[function(t,o,n){"use strict";cc._RF.push(o,"c8a59rkjftOq6a2gWZ4bnAz","ReScaleObject");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaulScreenSize=cc.v2(640,960),e.listObjects=[],e.currentScale=1,e}var n;return i(o,t),n=o,o.prototype.onLoad=function(){var e=this;this.reScale(),n.inst=this,cc.view.setResizeCallback(function(){e.reScale()})},o.prototype.reScale=function(){var t=this;try{var o=Math.min(1,cc.winSize.width/cc.winSize.height*this.defaulScreenSize.y/this.defaulScreenSize.x);this.listObjects.forEach(function(e){if(e){var n=e.scaleX>0?1:-1,r=e.scaleY>0?1:-1;e.scale=Math.abs(e.scale*o/t.currentScale),e.scaleX*=n,e.scaleY*=r}}),this.currentScale=o}catch(e){cc.warn(e)}},a([l(cc.Vec2)],o.prototype,"defaulScreenSize",void 0),a([l(cc.Node)],o.prototype,"listObjects",void 0),n=a([s],o)}(cc.Component);n.default=u,cc._RF.pop()},{}],RealPrizeBuyTicketDialog:[function(e,t,o){"use strict";cc._RF.push(t,"13d5dFsxQlB8bjE/YMat4Tr","RealPrizeBuyTicketDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Core/Utils"),c=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),s=e("./RealPrizeDialogBase"),l=cc._decorator,u=l.ccclass,p=l.property,d=l.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._remainingTimeGetTicket=0,t._durationTimeGetTicket=0,t._startTimeCountdown=0,t._endTimeCountdown=0,t.progressBar=null,t.timeLabel=null,t.buyTicketContainer=null,t._callBackClose=null,t}var o;return r(t,e),o=t,t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this._remainingTimeGetTicket=19e3,this._durationTimeGetTicket=2e4,this._startTimeCountdown=Date.now()-(this._durationTimeGetTicket-this._remainingTimeGetTicket),this._endTimeCountdown=Date.now()+this._remainingTimeGetTicket},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.update=function(){var e=Math.max(0,Math.ceil((this._endTimeCountdown-Date.now())/1e3)),t=a.Utils.secondsToMinutesSeconds(e),o=Math.min(1,(Date.now()-this._startTimeCountdown)/this._durationTimeGetTicket);this.progressBar.progress=o,this.timeLabel.string=t[0]+"m"+t[1]+"s"},t.prototype.onClickBuyTicket=function(){this._showClaimRewardAnimation()},t.prototype._showClaimRewardAnimation=function(){var e=this;this.dialogUsingNode.active=!1,this.bgUsingNode.active=!1,c.default.inst.showRewardAnimation({itemID:"ticket",count:10},function(){setTimeout(function(){e.hide()},200)},!0)},t.RealPrizeBuyTicketDialog_Mobile="RealPrizeBuyTicketDialog_Mobile",t.RealPrizeBuyTicketDialog_PC="RealPrizeBuyTicketDialog_PC",t.dialogType="RealPrizeBuyTicketDialog",t.urlPrefab=cc.sys.isMobile?o.RealPrizeBuyTicketDialog_Mobile:o.RealPrizeBuyTicketDialog_PC,i([p(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([p(cc.Label)],t.prototype,"timeLabel",void 0),i([p(cc.Node)],t.prototype,"buyTicketContainer",void 0),i([u,d("NGC/RealPrize/RealPrizeBuyTicketDialog")],t)}(s.RealPrizeDialogBase);o.default=f,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","./RealPrizeDialogBase":"RealPrizeDialogBase"}],RealPrizeDefines:[function(e,t,o){"use strict";cc._RF.push(t,"79f8bLSjUNA/YBodTb6Au0J","RealPrizeDefines"),Object.defineProperty(o,"__esModule",{value:!0}),o.PRIZE_STATE=o.TLE_DEVICE_TYPE=void 0,function(e){e[e.MOBILE=0]="MOBILE",e[e.PC=1]="PC"}(o.TLE_DEVICE_TYPE||(o.TLE_DEVICE_TYPE={})),function(e){e[e.NONE=-1]="NONE",e[e.COMING_SOON=0]="COMING_SOON",e[e.TEASING_NEXT_EVENT=1]="TEASING_NEXT_EVENT",e[e.AVAILABLE_EVENT=2]="AVAILABLE_EVENT",e[e.NON_NANO_PLATFORM=3]="NON_NANO_PLATFORM"}(o.PRIZE_STATE||(o.PRIZE_STATE={})),cc._RF.pop()},{}],RealPrizeDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"17e14TiUAJAso3FUF75Vx1v","RealPrizeDialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RealPrizeDialogBase=void 0;var a=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.show=function(t){e.prototype.show.call(this,t),o.enqueStack.push(this)},t.prototype.hide=function(){var t=this;e.prototype.hide.call(this,function(){cc.js.array.remove(o.enqueStack,t)})},t.bundleName="02_dialog_realprize",t.enqueStack=[],o=i([s],t)}(a.NgcDialogBase));o.RealPrizeDialogBase=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],RealPrizeEventRuleDialog:[function(e,t,o){"use strict";cc._RF.push(t,"772d1wNxRpOFJ9kY6Y8CLv/","RealPrizeEventRuleDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=e("./RealPrizeDialogBase"),s=cc._decorator,l=s.ccclass,u=s.property;s.menu,function(e){e[e.RULE=0]="RULE",e[e.FAQ=1]="FAQ",e[e.POLICY=2]="POLICY",e[e.TNC=3]="TNC"}(a||(a={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=[],t._callBackClose=null,t}var o;return r(t,e),o=t,t.prototype.gotoPage=function(e){this.page.forEach(function(e){e.active=!1}),this.page[e].active=!0},t.prototype.init=function(){},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.onClickBackBtn=function(){this.gotoPage(a.RULE)},t.prototype.onClickFAQBtn=function(){this.gotoPage(a.FAQ)},t.prototype.onClickPolicyBtn=function(){this.gotoPage(a.POLICY)},t.prototype.onClickTnCBtn=function(){this.gotoPage(a.TNC)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.update=function(){},t.RealPrizeEventRuleDialog_Mobile="RealPrizeEventRuleDialog_Mobile",t.RealPrizeEventRuleDialog_PC="RealPrizeEventRuleDialog_PC",t.dialogType="RealPrizeEventRuleDialog",t.urlPrefab=cc.sys.isMobile?o.RealPrizeEventRuleDialog_Mobile:o.RealPrizeEventRuleDialog_PC,i([u(cc.Node)],t.prototype,"page",void 0),i([l],t)}(c.RealPrizeDialogBase);o.default=p,cc._RF.pop()},{"./RealPrizeDialogBase":"RealPrizeDialogBase"}],RealPrizeLeaderboardItem:[function(e,t,o){"use strict";cc._RF.push(t,"45498WLSttEQr1nqMQN5S+z","RealPrizeLeaderboardItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./RealPrizeDefines"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rank=null,t.gameRewardAmount=null,t.userName=null,t.scoreLb=null,t.avatar=null,t.flag=null,t.realPrizeSprite=null,t.gamePrizeSprite=null,t.deviceTypeSprite=null,t.deviceTypeSpriteFrame=[],t.deviceType=a.TLE_DEVICE_TYPE.MOBILE,t.isMineBg=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r,i,a,c){void 0===c&&(c=!1),e<=3||(this.rank.string=""+e),this.userName.string=t,this.scoreLb.string=o,this.realPrizeSprite.node.active=!1,this.gamePrizeSprite&&(this.gamePrizeSprite.node.active=!1),this.gameRewardAmount&&(this.gameRewardAmount.node.active=!1),r&&(this.avatar.spriteFrame=r),this.flag.spriteFrame=n,a.realPrize?(this.realPrizeSprite.spriteFrame=a.realPrize,this.realPrizeSprite.node.active=!0):(a.gamePrizeAmount&&(this.gameRewardAmount.string=""+a.gamePrizeAmount,this.gameRewardAmount.node.active=!0),a.gamePrize&&(this.gamePrizeSprite.spriteFrame=a.gamePrize,this.gamePrizeSprite.node.active=!0)),this.deviceTypeSprite.spriteFrame=this.deviceTypeSpriteFrame[i],this.isMineBg&&(this.isMineBg.active=c)},t.prototype.start=function(){},i([l(cc.Label)],t.prototype,"rank",void 0),i([l(cc.Label)],t.prototype,"gameRewardAmount",void 0),i([l(cc.Label)],t.prototype,"userName",void 0),i([l(cc.Label)],t.prototype,"scoreLb",void 0),i([l(cc.Sprite)],t.prototype,"avatar",void 0),i([l(cc.Sprite)],t.prototype,"flag",void 0),i([l(cc.Sprite)],t.prototype,"realPrizeSprite",void 0),i([l(cc.Sprite)],t.prototype,"gamePrizeSprite",void 0),i([l(cc.Sprite)],t.prototype,"deviceTypeSprite",void 0),i([l(cc.SpriteFrame)],t.prototype,"deviceTypeSpriteFrame",void 0),i([l(cc.Node)],t.prototype,"isMineBg",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./RealPrizeDefines":"RealPrizeDefines"}],RealPrizeLeaderboard:[function(e,t,o){"use strict";cc._RF.push(t,"022a7XS3FNM7YYNO2V+IiuZ","RealPrizeLeaderboard");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Core/Utils"),c=e("./RealPrizeLeaderboardItem"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.topPlayers=[],t.leaderboardItemPrefab=null,t.contentHolder=null,t.userItem=null,t.currRank=20,t.avatarFake=[],t.flagFake=[],t.rewardFake=[],t.view=null,t.userNode=null,t}return r(t,e),t.prototype.initItems=function(e){for(var t=this,o=0;o<30;o++){var n={realPrize:this.rewardFake[a.Utils.randomFromTo(0,this.rewardFake.length-1)],realPrizeAmount:0,gamePrize:null,gamePrizeAmount:0},r={rank:o,name:"UserName "+o,flag:this.flagFake[a.Utils.randomFromTo(0,this.flagFake.length-1)],avatar:this.avatarFake[a.Utils.randomFromTo(0,this.avatarFake.length-1)],score:a.Utils.randomFromTo(1e3,5e3)+"m",deviceType:a.Utils.randomFromTo(0,1),rewardItem:n};e.push(r)}for(this.contentHolder.removeAllChildren(),this.topPlayers.forEach(function(o,n){var r=e[n];t.initItem(o,r)}),o=3;o<e.length-1;o++){var i=e[o],c=cc.instantiate(this.leaderboardItemPrefab);this.initItem(c,i),c.parent=this.contentHolder,this.currRank===o&&(this.userNode=c)}this.currRank>=3&&this.initItem(this.userItem,e[this.currRank])},t.prototype.lateUpdate=function(){this.userItem.active=!a.Utils.areNodesIntersection(this.view,this.userNode)},t.prototype.initItem=function(e,t){e.getComponent(c.default).init(t.rank,t.name,t.score,t.flag,t.avatar,t.deviceType,t.rewardItem,t.rank===this.currRank),e.active=!0},t.prototype.start=function(){},i([u(cc.Node)],t.prototype,"topPlayers",void 0),i([u(cc.Prefab)],t.prototype,"leaderboardItemPrefab",void 0),i([u(cc.Node)],t.prototype,"contentHolder",void 0),i([u(cc.Node)],t.prototype,"userItem",void 0),i([u(cc.SpriteFrame)],t.prototype,"avatarFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"flagFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"rewardFake",void 0),i([u(cc.Node)],t.prototype,"view",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Core/Utils":"Utils","./RealPrizeLeaderboardItem":"RealPrizeLeaderboardItem"}],RealPrizeTabMenu:[function(e,t,o){"use strict";cc._RF.push(t,"cfd38ELVKZHErRKBFrhbE3C","RealPrizeTabMenu");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcRealPrizeTabMenu=o.PRIZE_TAB_MENU=void 0;var a,c=e("./RealPrizeLeaderboard"),s=e("./RealPrizeWinner"),l=cc._decorator,u=l.ccclass,p=l.property;(function(e){e[e.LEADERBOARD=0]="LEADERBOARD",e[e.PRIZES=1]="PRIZES",e[e.RECENT_WINNER=2]="RECENT_WINNER"})(a=o.PRIZE_TAB_MENU||(o.PRIZE_TAB_MENU={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leaderboardPrefab=null,t.winnerPrefab=null,t.tabMenus=[],t.topHeader=[],t.leaderboardHint=null,t.whitePage=null,t.pageContent=null,t.hintDes=null,t.leaderboardMgr=null,t.winnerMgr=null,t._currentTabIdx=a.PRIZES,t}return r(t,e),t.prototype.onLoad=function(){var e=cc.instantiate(this.leaderboardPrefab);e.name="Leaderboard",e.parent=this.pageContent,this.leaderboardMgr=e.getComponent(c.default),this.tabMenus[0]=e;var t=cc.instantiate(this.winnerPrefab);t.name="Winner",t.parent=this.pageContent,this.winnerMgr=t.getComponent(s.default),this.tabMenus[2]=t},t.prototype.start=function(){this.activeTab(a.PRIZES)},t.prototype.activeTab=function(e){var t=this;this.tabMenus.forEach(function(o,n){t.setTabActive(n,n===e)}),this._currentTabIdx=e,this.leaderboardHint.active=e===a.LEADERBOARD,this.whitePage.active=e!==a.LEADERBOARD},t.prototype.setTabActive=function(e,t){this.tabMenus[e].active=t;var o=this.topHeader[e].children[0],n=this.topHeader[e].children[1];switch(o.active=!t,n.active=t,e){case a.LEADERBOARD:this.leaderboardMgr.initItems([]);break;case a.RECENT_WINNER:this.winnerMgr.initItems([])}},t.prototype.onTabMenuBtnClick=function(e,t){console.log("onTabMenuBtnClick ",t);var o=parseInt(""+t);this.activeTab(o)},t.prototype.onHintClick=function(){this.hintDes.active=!this.hintDes.active},i([p(cc.Prefab)],t.prototype,"leaderboardPrefab",void 0),i([p(cc.Prefab)],t.prototype,"winnerPrefab",void 0),i([p(cc.Node)],t.prototype,"tabMenus",void 0),i([p(cc.Node)],t.prototype,"topHeader",void 0),i([p(cc.Node)],t.prototype,"leaderboardHint",void 0),i([p(cc.Node)],t.prototype,"whitePage",void 0),i([p(cc.Node)],t.prototype,"pageContent",void 0),i([p(cc.Node)],t.prototype,"hintDes",void 0),i([u],t)}(cc.Component);o.NgcRealPrizeTabMenu=d,cc._RF.pop()},{"./RealPrizeLeaderboard":"RealPrizeLeaderboard","./RealPrizeWinner":"RealPrizeWinner"}],RealPrizeTicketProgressTimer:[function(e,t,o){"use strict";cc._RF.push(t,"103e6riQqNJZIWV8cGCTSkB","RealPrizeTicketProgressTimer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcRealPrizeTicketProgressTimer=void 0;var a=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.iconTicketNode=null,t.timerLabel=null,t.glowEffectNode=null,t}return r(t,e),t.prototype.init=function(){this.timerLabel.updateLabelContentManually(0,0,4,30)},t.prototype.hideUIElements=function(){var e=this;this.node.children.forEach(function(t){t!==e.iconTicketNode&&(t.opacity=0)})},i([l(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([l(cc.Node)],t.prototype,"iconTicketNode",void 0),i([l(a.NgcTimerLabelLocalized)],t.prototype,"timerLabel",void 0),i([l(cc.Node)],t.prototype,"glowEffectNode",void 0),i([s],t)}(cc.Component);o.NgcRealPrizeTicketProgressTimer=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized"}],RealPrizeWinnerItem:[function(e,t,o){"use strict";cc._RF.push(t,"dabd8/iscdLi5ihtVdsGTX4","RealPrizeWinnerItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.date=null,t.userName=null,t.avatar=null,t.flag=null,t.realPrizeSprite=null,t.realPrizeAmount=null,t.gameIcon=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r,i){this.date.string=e,this.userName.string=t,this.gameIcon.spriteFrame=n,this.realPrizeSprite&&(this.realPrizeSprite.node.active=!1),r&&(this.avatar.spriteFrame=r),this.flag.spriteFrame=o,i.realPrize?(this.realPrizeSprite.spriteFrame=i.realPrize,this.realPrizeSprite.node.active=!0):i.realPrizeAmount&&(this.realPrizeAmount.string=i.realPrizeAmount+"$\nCoupon",this.realPrizeAmount.node.active=!0)},t.prototype.start=function(){},i([s(cc.Label)],t.prototype,"date",void 0),i([s(cc.Label)],t.prototype,"userName",void 0),i([s(cc.Sprite)],t.prototype,"avatar",void 0),i([s(cc.Sprite)],t.prototype,"flag",void 0),i([s(cc.Sprite)],t.prototype,"realPrizeSprite",void 0),i([s(cc.Label)],t.prototype,"realPrizeAmount",void 0),i([s(cc.Sprite)],t.prototype,"gameIcon",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],RealPrizeWinner:[function(e,t,o){"use strict";cc._RF.push(t,"c3981xg55RJM5lJl3ErZS/S","RealPrizeWinner");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Core/Utils"),c=e("./RealPrizeWinnerItem"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winnerItemPrefab=null,t.contentHolder=null,t.avatarFake=[],t.gameFake=[],t.flagFake=[],t.rewardFake=[],t}return r(t,e),t.prototype.initItems=function(e){for(var t=0;t<30;t++){var o={realPrize:null,realPrizeAmount:[100,200,300,500][a.Utils.randomFromTo(0,3)],gamePrize:null,gamePrizeAmount:0},n={date:"On 10th Sep",name:"UserName "+t,flag:this.flagFake[a.Utils.randomFromTo(0,this.flagFake.length-1)],avatar:this.avatarFake[a.Utils.randomFromTo(0,this.avatarFake.length-1)],game:this.gameFake[a.Utils.randomFromTo(0,this.gameFake.length-1)],rewardItem:o};e.push(n)}for(this.contentHolder.removeAllChildren(),t=0;t<e.length;t++){var r=e[t],i=cc.instantiate(this.winnerItemPrefab);this.initItem(i,r),i.parent=this.contentHolder}},t.prototype.lateUpdate=function(){},t.prototype.initItem=function(e,t){e.getComponent(c.default).init(t.date,t.name,t.flag,t.game,t.avatar,t.rewardItem),e.active=!0},t.prototype.start=function(){},i([u(cc.Prefab)],t.prototype,"winnerItemPrefab",void 0),i([u(cc.Node)],t.prototype,"contentHolder",void 0),i([u(cc.SpriteFrame)],t.prototype,"avatarFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"gameFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"flagFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"rewardFake",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Core/Utils":"Utils","./RealPrizeWinnerItem":"RealPrizeWinnerItem"}],ResizableComponent:[function(e,t,o){"use strict";cc._RF.push(t,"c06c4M2nZRKdqM2wBSMe4jj","ResizableComponent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ResizableComponent=o.BaseSize=void 0;var a=cc._decorator,c=a.ccclass,s=(a.property,function(){});o.BaseSize=s;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseSize=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){var e=this.node.getComponent(cc.Widget),t=this.node.getComponent(cc.Layout),o=this.node.getComponent(cc.Label);this.baseSize={width:this.node.width,height:this.node.height,x:this.node.x,y:this.node.y,leftAlign:e&&e.isAlignLeft?e.left:null,rightAlign:e&&e.isAlignRight?e.right:null,topAlign:e&&e.isAlignTop?e.top:null,bottomAlign:e&&e.isAlignBottom?e.bottom:null,spacingX:t&&t.type==cc.Layout.Type.HORIZONTAL?t.spacingX:null,spacingY:t&&t.type==cc.Layout.Type.VERTICAL?t.spacingY:null,fontSize:!!o&&o.fontSize,lineHeight:!!o&&o.lineHeight,scaleX:this.node.scaleX,scaleY:this.node.scaleY}},t.resizeNode=function(e,t){o.getResizableComponent(e).resize(t)},t.resizeNodeByWidth=function(e,t){var n=o.getResizableComponent(e),r=t/n.baseSize.width;n.resize(r)},t.resizeNodeByHeight=function(e,t){var n=o.getResizableComponent(e),r=t/n.baseSize.height;n.resize(r)},t.getResizableComponent=function(e){var t=e.getComponent(o);return t||(t=e.addComponent(o)),t},t.prototype.resize=function(e){var t=this.baseSize,n=this.node.getComponent(cc.Widget),r=this.node.getComponent(cc.Label),i=this.node.getComponent(cc.Layout),a=this.node.getComponent(sp.Skeleton);if(r||(i&&i.type==cc.Layout.Type.HORIZONTAL||(this.node.width=t.width*e),i&&i.type==cc.Layout.Type.VERTICAL||(this.node.height=t.height*e)),this.node.x=t.x*e,this.node.y=t.y*e,n&&this.resizeWidgetComponent(n,e),r&&(r.fontSize=t.fontSize*e,r.lineHeight=t.lineHeight*e),this.node.getComponent(cc.Sprite),t.designWidth&&t.designHeight){if(this.node.width!=t.designWidth*e){var c=t.designWidth*e/t.width;this.node.width=t.width*c,this.node.height=t.height*c}this.node.height>t.designHeight*e&&(c=t.designHeight*e/t.height,this.node.width=t.width*c,this.node.height=t.height*c)}i&&(t.spacingX&&(i.spacingX=t.spacingX*e),t.spacingY&&(i.spacingY=t.spacingY*e),i.updateLayout()),a&&(this.node.scaleX=t.scaleX*e,this.node.scaleY=t.scaleY*e),this.node.children.length>0&&this.node.children.forEach(function(t){return t.active&&o.resizeNode(t,e)})},t.prototype.resizeWidgetComponent=function(e,t){var o=this.baseSize;e.isAlignLeft&&(e.left=o.leftAlign*t),e.isAlignRight&&(e.right=o.rightAlign*t),e.isAlignTop&&(e.top=o.topAlign*t),e.isAlignBottom&&(e.bottom=o.bottomAlign*t),e.updateAlignment()},o=i([c],t)}(cc.Component);o.ResizableComponent=l,cc._RF.pop()},{}],ResizeBG:[function(t,o,n){"use strict";cc._RF.push(o,"167b558EAxGOpMfaHHh/Z2C","ResizeBG");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../globals"),s=t("../NanoGameCore/Core/Utils"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.useCanvasPos=!0,e.test=!1,e}return i(o,t),o.prototype.onLoad=function(){cc.sys.isMobile?window.addEventListener("resize",this.onResized.bind(this)):cc.view.on("canvas-resize",this.onResized.bind(this),this)},o.prototype.start=function(){this.canvas=this.canvas||cc.find("Canvas"),this.orginialSize=new cc.Size(this.node.width,this.node.height),this.resize()},o.prototype.onResized=function(){this.resize()},o.prototype.resize=function(){try{var t=this.canvas||cc.find("Canvas");if(t&&(t.width>this.orginialSize.width?this.node.width=t.width:this.node.width=this.orginialSize.width,t.height>this.orginialSize.height?this.node.width=t.height:this.node.height=this.orginialSize.height,this.useCanvasPos)){var o=this.node.parent.convertToWorldSpaceAR(cc.v2(0,0)),n=s.Utils.getWorldPos(this.canvas);this.canvasScrPos=c.default.Main.inst.mainCamera.getWorldToScreenPoint(n),s.Utils.setWorldPos(this.node,cc.v2(o.x,this.canvasScrPos.y)),this.curScrWP=c.default.Main.inst.mainCamera.getWorldToScreenPoint(cc.v2(o.x,this.canvasScrPos.y))}}catch(e){}},o.prototype.update=function(){this.curScrWP&&this.canvasScrPos&&this.curScrWP.y!=this.canvasScrPos.y&&(this.test&&cc.log("Call Resize",this.curScrWP.y,"-",this.canvasScrPos.y),this.resize())},a([p(cc.Node)],o.prototype,"canvas",void 0),a([p],o.prototype,"useCanvasPos",void 0),a([p],o.prototype,"test",void 0),a([u],o)}(cc.Component);n.default=d,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../globals":"globals"}],ResultUI:[function(e,t,o){"use strict";cc._RF.push(t,"e3382SDYsVBzbezfadeDbqf","ResultUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcResultUI=void 0;var a=e("../../../../GameFramework/Scripts/BuildConfig"),c=e("../../../Dialogs/Script/DialogBase"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleNode=null,t.scoreLayoutNode=null,t.crownParent=null,t.rewardItemPrefab=null,t.confettiNode=null,t._callBackWhenClose=null,t.scoreItemCounter=0,t.readyToPlayAnimation=!1,t.crownItem=null,t.canShowConfetti=!0,t.gotCrownData=!1,t}return r(t,e),t.prototype.init=function(e){this._callBackWhenClose=e,this.initUI(),this.readyToPlayAnimation=!0},t.prototype.update=function(){this.readyToPlayAnimation&&(this.gotCrownData||a.NgcBuildConfig.offlineMode)&&(this.startUpAnimation(),this.readyToPlayAnimation=!1)},t.prototype.showConfetti=function(){var e=this;this.canShowConfetti&&cc.tween(this.node).delay(.2).call(function(){e.confettiNode.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()})}).start()},t.prototype.initUI=function(){this.titleNode.opacity=0,this.titleNode.scale=0,this.titleNode.getComponent(cc.Widget).enabled=!1,this.scoreLayoutNode.opacity=0,this.scoreLayoutNode.scale=0,this.crownParent.opacity=0,this.crownParent.active=!1,this.crownParent.scale=0},t.prototype.startUpAnimation=function(){var e=this;cc.tween(this.titleNode).to(.25,{opacity:255,scale:1}).call(function(){cc.tween(e.scoreLayoutNode).to(.5,{opacity:255,scale:1}).start(),e.crownItem.rewardLayout().scale=0,e.crownItem.scoreValueLabel.node.opacity=0,e.crownParent.opacity=255,cc.tween(e.crownParent).delay(1.75).to(.05,{opacity:255,scale:1}).call(function(){e.crownItem.playFancyAnimation(e.showConfetti.bind(e)),e.hideUI()}).start()}).start()},t.prototype.addScoreItem=function(e,t,o,n){void 0===o&&(o=!0),void 0===n&&(n="")},t.prototype.addCrown=function(e,t){void 0===t&&(t=.75)},t.prototype.hideUI=function(){var e=this;cc.tween(this.node).delay(3).call(function(){e.hide()}).start()},t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this,this._callBackWhenClose)},t.urlPrefab="Result",t.bundleName="03_end_game_flow",t.dialogType="NgcResultUI",i([u(cc.Node)],t.prototype,"titleNode",void 0),i([u(cc.Node)],t.prototype,"scoreLayoutNode",void 0),i([u(cc.Node)],t.prototype,"crownParent",void 0),i([u(cc.Prefab)],t.prototype,"rewardItemPrefab",void 0),i([u(cc.Node)],t.prototype,"confettiNode",void 0),i([l],t)}(c.NgcDialogBase);o.NgcResultUI=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../Dialogs/Script/DialogBase":"DialogBase"}],ReviveDialog:[function(t,o,n){"use strict";cc._RF.push(o,"602f1RyJYxJjaIregvzu5tM","ReviveDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../../../globals"),u=t("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),p=t("../../../../GameFramework/Scripts/BuildConfig"),d=t("../../../../GameFramework/Scripts/Localized/LabelLocalized"),f=t("../../../../GameFramework/Scripts/Localized/LocalizedManager"),h=t("../../../../Services/Inventory/Inventory"),g=t("../../../../Services/Telemetry/Telemetry"),y=t("../../../Dialogs/Script/DialogBase"),m=t("../../../Dialogs/Script/NgcDialogManager"),_=t("./NgcRevive"),v=cc._decorator,S=v.ccclass,N=v.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.acceptBtnNode=null,t.goldenAdsBg=null,t.normalAdsBg=null,t.adsIconNode=null,t.flashAnimNode=null,t.reviveAdsInfoLabelNode=null,t.rejectBtnNode=null,t.titleNode=null,t.reviveCenterNode=null,t.heartIcon=null,t.freeTagNode=null,t.noAdsPriceLayout=null,t._acceptReviveFunc=null,t._refuseReviveFunc=null,t._offerCountDownTime=5,t._isShow=!1,t._curCountDownTime=0,t}return i(t,e),t.prototype.onLoad=function(){this.acceptBtnNode.opacity=0,this.acceptBtnNode.active=!1,this.titleNode.opacity=0},t.prototype.init=function(e,t,o){var n=this;this.checkShowBanner(u.NgcPointcuts.bannerRevive),g.NgcTelemetry.inst.LogEvent_EnterScreen("Revive");var r=this.rejectBtnNode.getComponentInChildren(d.NgcLabelLocalized),i=f.NgcLocalizedManager.t(r.textKey).text;r.textKey=null,r.string=i.toLocaleUpperCase(),this._acceptReviveFunc=e,this._refuseReviveFunc=t,this.setCountDownTime(o),this._isShow=!0,p.NgcBuildConfig.offlineMode?this.adsIconNode.active=!1:(this.rejectBtnNode.active=!1,this.rejectBtnNode.opacity=0),this.refreshClaimButton(),this.titleNode.scale=0,this.titleNode.getComponent(cc.Widget).enabled=!1,this.acceptBtnNode.opacity=0;var a=this.reviveCenterNode.getChildByName("CircleBar"),c=a.scale;a.scale=0,a.opacity=0;var s=this.reviveCenterNode.getChildByName("name");s.opacity=0,cc.tween(a).to(.35,{scale:1.5,opacity:255},{easing:"quadOut"}).to(.1,{scale:c},{easing:"quadOut"}).call(function(){n.heartIcon.pulsingEffect=!0}).start(),cc.tween(s).delay(.5).to(.25,{opacity:255}).start(),cc.tween(this.titleNode).delay(.5).to(.25,{opacity:255,scale:1}).start(),cc.tween(this.acceptBtnNode).call(function(){return n.acceptBtnNode.active=!0}).delay(.5).to(.25,{opacity:255}).call(function(){n.acceptBtnNode.pulsingEffect=!0,cc.tween(n.rejectBtnNode).call(function(){return n.rejectBtnNode.active=!0}).delay(3).to(.25,{opacity:255}).start()}).start(),this.show()},t.prototype.refreshClaimButton=function(){if(_.default.inst.isFreeOfferAvailable())this.adsIconNode.active=!1,this.reviveAdsInfoLabelNode.active=!1,this.freeTagNode.active=!0;else if(_.default.inst.notUsingAdToRevive()){this.adsIconNode.active=!1,this.reviveAdsInfoLabelNode.active=!1,this.acceptBtnNode.getChildByName("label_Claim").getComponent(d.NgcLabelLocalized).horizontalAlign=cc.Label.HorizontalAlign.LEFT,this.noAdsPriceLayout.active=!0;var e=this.noAdsPriceLayout.getComponentInChildren(cc.Sprite),t=this.noAdsPriceLayout.getComponentInChildren(cc.Label),o=h.NgcInventory.inst.objectTypeTable[_.REVIVE_NO_ADS_CURRENCY].picture;cc.loader.loadRes(o,cc.SpriteFrame,function(t,o){e.spriteFrame=o}),t.string=""+_.REVIVE_NO_ADS_CURRENCY_NUMBER,this.rejectBtnNode.opacity=255,cc.Tween.stopAllByTarget(this.rejectBtnNode)}},t.prototype.setCountDownTime=function(e){this._curCountDownTime=this._offerCountDownTime=e},t.prototype.acceptButtonOnClick=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r,i,a=this;return s(this,function(c){switch(c.label){case 0:return e=function(){u.default.inst&&u.default.inst.hide(),a._acceptReviveFunc&&a._acceptReviveFunc(),g.NgcTelemetry.inst.LogEvent_PlayerRevived(),a.hide()},window.isAdsBlocked?[4,m.NgcDialogManager.showAdsReminderMsg(this.acceptBtnNode)]:[3,2];case 1:return c.sent(),[2];case 2:return _.default.inst.notUsingAdToRevive()?(o=(t=["",0])[0],n=t[1],p.NgcBuildConfig.offlineMode?(r=[l.default.OfflineMode.Config.ReviveCostType,l.default.OfflineMode.Config.ReviveCostPrice],o=r[0],n=r[1]):(i=[_.REVIVE_NO_ADS_CURRENCY,_.REVIVE_NO_ADS_CURRENCY_NUMBER],o=i[0],n=i[1]),h.NgcInventory.inst.getItemCount(o,function(t,r){if(!t&&r){if(r.count>=n)return void h.NgcInventory.inst.consumeItem(o,n,function(){e()});m.NgcDialogManager.showNotEnoughCurrencyMsg(a.acceptBtnNode)}}),[2]):(e(),[2])}})})},t.prototype.refuseButtonOnClick=function(){this._refuseReviveFunc&&this._refuseReviveFunc(),this.hide()},t.prototype.update=function(e){if(this.acceptBtnNode.pulsingEffect&&(this.acceptBtnNode.scale=.98+.04*Math.sin(Date.now()*Math.PI/480)),this.heartIcon.pulsingEffect&&(this.heartIcon.scale=.98+.04*Math.sin(Date.now()*Math.PI/480)),this._isShow&&255==this.reviveCenterNode.opacity){if(this._curCountDownTime<=0)return void this.refuseButtonOnClick();this._curCountDownTime-=e,this._curCountDownTime<0&&(this._curCountDownTime=0),this.progressBar.progress=this._curCountDownTime/this._offerCountDownTime}},t.urlPrefab="ReviveDialog",t.bundleName="02_dialog",t.dialogType="NgcReviveDialog",a([N(cc.ProgressBar)],t.prototype,"progressBar",void 0),a([N(cc.Node)],t.prototype,"acceptBtnNode",void 0),a([N(cc.Node)],t.prototype,"goldenAdsBg",void 0),a([N(cc.Node)],t.prototype,"normalAdsBg",void 0),a([N(cc.Node)],t.prototype,"adsIconNode",void 0),a([N(cc.Node)],t.prototype,"flashAnimNode",void 0),a([N(cc.Node)],t.prototype,"reviveAdsInfoLabelNode",void 0),a([N(cc.Node)],t.prototype,"rejectBtnNode",void 0),a([N(cc.Node)],t.prototype,"titleNode",void 0),a([N(cc.Node)],t.prototype,"reviveCenterNode",void 0),a([N(cc.Node)],t.prototype,"heartIcon",void 0),a([N(cc.Node)],t.prototype,"freeTagNode",void 0),a([N(cc.Node)],t.prototype,"noAdsPriceLayout",void 0),a([S],t)}(y.NgcDialogBase);n.default=b,cc._RF.pop()},{"../../../../../globals":"globals","../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../Services/Inventory/Inventory":"Inventory","../../../../Services/Telemetry/Telemetry":"Telemetry","../../../Dialogs/Script/DialogBase":"DialogBase","../../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./NgcRevive":"NgcRevive"}],RewardAnimationDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c40f26TYKFC/KcLHHmPjSRc","RewardAnimationDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.COIN_ANI_TYPE=void 0;var a,c=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),s=cc._decorator,l=s.ccclass,u=s.property;(function(e){e.SIMPLE="Coins_simple",e.DOUBLE="Coins_double",e.LIGHT="Light"})(a=o.COIN_ANI_TYPE||(o.COIN_ANI_TYPE={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.additionBonusLb=null,t.effect=null,t.carReward=null,t._carAnim=null,t._animFnishedCB=null,t._animationType=a.SIMPLE,t}return r(t,e),t.prototype.init=function(e,t,o){void 0===o&&(o=null),this.additionBonusLb.string="+"+e.toString(),this.effect.node.active=!1,this._animFnishedCB=o,this._animationType=t},t.prototype.initWithCarReward=function(e,t){void 0===t&&(t=null),this.additionBonusLb.string="",this.carReward.node.active=!0,this.carReward.spriteFrame=e,this.effect.node.active=!1,this._animFnishedCB=t,this._animationType=a.LIGHT,this.carReward.node.scale=0,this._carAnim=cc.tween(this.carReward.node).to(.5,{scale:1.5}).delay(.5).to(.26,{opacity:0})},t.prototype.show=function(t){var o=this;e.prototype.show.call(this,t),this.effect.node.active=!0,this.scheduleOnce(function(){var e;o._animationType==a.LIGHT?e=o.effect.setAnimation(0,o._animationType.toString(),!1):(e=o.effect.setAnimation(0,o._animationType.toString(),!1),o.effect.setAnimation(1,a.LIGHT,!1)),e&&e.animation.duration,o._carAnim&&o._carAnim.start(),o.effect.setCompleteListener(function(){o._animFnishedCB&&o._animFnishedCB(),o.hide()})},.1)},t.urlPrefab="Prefabs/Dialogs/RewardAnimationDialog",t.bundleName="",t.dialogType="RewardAnimationDialog",i([u(cc.Label)],t.prototype,"additionBonusLb",void 0),i([u(sp.Skeleton)],t.prototype,"effect",void 0),i([u(cc.Sprite)],t.prototype,"carReward",void 0),i([l],t)}(c.NgcDialogBase);o.default=p,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase"}],RewardClaimAnimation:[function(t,o,n){"use strict";cc._RF.push(o,"61396okdyZLJIC8NVJj0S4W","RewardClaimAnimation");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcRewardClaimAnimation=void 0;var l=t("../../../Services/Inventory/Inventory"),u=t("../../../GameFramework/Scripts/CONSTANTS"),p=t("../../TabBar/Script/TabBarManager"),d=t("../../../GameFramework/Scripts/NgcShopManager"),f=t("../../../GameFramework/Scripts/Localized/LabelLocalized"),h=t("../../../GameFramework/Scripts/Localized/LocalizedManager"),g=t("../../../../Scripts/CarSelector/CarSkinSelecter"),y=cc._decorator,m=y.ccclass,_=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardImageContainer=null,t.light=null,t.rewardImage=null,t.rewardSpine=null,t.quantity=null,t.skeleton=null,t.customTextLabel=null,t}return i(t,e),t.prototype.onLoad=function(){this.rewardSpine.active=!1,this.node.active=!1},t.prototype.loadRewardImage=function(e){return new Promise(function(t,o){cc.loader.loadRes(e,cc.SpriteFrame,function(e,n){!e&&n?t(n):e&&o(e)})})},t.prototype.loadRewardSpine=function(e){var t=this;return new Promise(function(o,n){cc.loader.loadRes(e,sp.SkeletonData,function(e,r){!e&&r?(t.skeleton.skeletonData=r,t.skeleton.premultipliedAlpha=!1,o(r)):e&&n(e)})})},t.prototype.showRewardImage=function(e){this.rewardImageContainer.active=!0,this.light.getComponent(cc.Animation).play("light_scale"),this.rewardImage.getComponent(cc.Sprite).spriteFrame=e,this.rewardImage.getComponent(cc.Animation).play("scale_up")},t.prototype.showRewardSpine=function(e,t){this.rewardSpine.active=!0;var o=this.skeleton.skeletonData.skeletonJson.skins[0].name,n=Object.keys(this.skeleton.skeletonData.skeletonJson.animations)[0],r=t||o,i=e||n;this.skeleton.setSkin(r),this.skeleton.setAnimation(0,i,!1)},t.prototype.moveRewardToShopBar=function(){var e=p.NgcTabBarManager.inst.worldPosOfShopTab(),t=this.rewardImage.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.v2(e.x-t.x,e.y-t.y);cc.tween(this.rewardImage).to(.6,{x:this.rewardImage.x+o.x,y:this.rewardImage.y+o.y,scale:.2},{easing:"quartInOut"}).call(function(){return p.NgcTabBarManager.inst.playAnimationShopTabGetItem()}).start()},t.prototype.checkMoveRewardToShopBar=function(e,t,o){var n=this,r=o&&d.NgcShopManager.getInstance().includeItem(e)?700:0;this.moveRewardToShopBar(),setTimeout(function(){n.node.active=!1,t&&t()},r)},t.prototype.setCustomText=function(e){if(null!==e){var t=this.customTextLabel.node;h.NgcLocalizedManager.setTextKey(this.customTextLabel,e),t.active=!0,t.opacity=0,cc.tween(t).to(.25,{opacity:255}).start()}},t.prototype.showClaimRewardAnimation=function(e,t,o){var n;return void 0===t&&(t=function(){}),c(this,void 0,void 0,function(){var r,i,a,c,p,d,f,h,y,m=this;return s(this,function(s){switch(s.label){case 0:return this.node.active=!0,setTimeout(function(){return m.checkMoveRewardToShopBar(e.itemID,t,o)},1200),this.rewardImageContainer.active=!1,this.rewardSpine.active=!1,r=null===(n=l.NgcInventory.inst.objectTypeTable[e.itemID])||void 0===n?void 0:n.type,e.count>0&&r!==u.NGC_CONSTANTS.INVENTORY.TYPE.EQUIPPABLE?(this.quantity.active=!0,this.quantity.getComponent(cc.Label).string="+"+e.count,this.quantity.getComponent(cc.Animation).play("scale_up")):this.quantity.active=!1,l.NgcInventory.inst.objectTypeTable[e.itemID]?(i=l.NgcInventory.inst.objectTypeTable[e.itemID].picture,a=l.NgcInventory.inst.objectTypeTable[e.itemID].rewardAnimation,c=l.NgcInventory.inst.objectTypeTable[e.itemID].rewardAnimationSkin,p=null,d=null,a&&(i=a),c&&(y=c.split(",").map(function(e){return e.trim()}),p=y[0],d=y[1]),i.includes(".png")?r!==u.NGC_CONSTANTS.INVENTORY.TYPE.EQUIPPABLE?[3,1]:(h=g.default.getSpriteFrameFromID(e.itemID),[3,3]):[3,4]):[2];case 1:return[4,this.loadRewardImage(i)];case 2:h=s.sent(),s.label=3;case 3:return f=h,console.log("debug reward image",f),f instanceof cc.SpriteFrame&&this.showRewardImage(f),[3,6];case 4:return i.includes(".json")?[4,this.loadRewardSpine(i)]:[3,6];case 5:s.sent()instanceof sp.SkeletonData&&this.showRewardSpine(p,d),s.label=6;case 6:return[2]}})})},a([_(cc.Node)],t.prototype,"rewardImageContainer",void 0),a([_(cc.Node)],t.prototype,"light",void 0),a([_(cc.Node)],t.prototype,"rewardImage",void 0),a([_(cc.Node)],t.prototype,"rewardSpine",void 0),a([_(cc.Node)],t.prototype,"quantity",void 0),a([_(sp.Skeleton)],t.prototype,"skeleton",void 0),a([_(f.NgcLabelLocalized)],t.prototype,"customTextLabel",void 0),a([m],t)}(cc.Component);n.NgcRewardClaimAnimation=v,cc._RF.pop()},{"../../../../Scripts/CarSelector/CarSkinSelecter":"CarSkinSelecter","../../../GameFramework/Scripts/CONSTANTS":"CONSTANTS","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../Services/Inventory/Inventory":"Inventory","../../TabBar/Script/TabBarManager":"TabBarManager"}],RewardDialog:[function(t,o,n){"use strict";cc._RF.push(o,"1478bOIBTZKp7lB25OkHvty","RewardDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),u=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),p=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),d=t("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),f=t("../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),h=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),g=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),y=t("../../../NanoGameCore/Services/Ads/Ads"),m=t("../../FTUE/FTUEManager"),_=t("../../Game"),v=t("../../League/LeagueManager"),S=t("../../Maps/DrawMap"),N=t("../../UI/DigitCountUp"),b=t("../../UserInfo"),C=t("../../Utils/ConstConfig"),P=t("../../Utils/Util"),I=cc._decorator,w=I.ccclass,T=I.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rank=null,t.coinlb=null,t.carIcon=null,t.username=null,t.flag=null,t.XIcon=null,t.claimButton=null,t.groupAdsButton=null,t.noThanksButton=null,t.claimMultiplerLb=null,t.rewarCoinLb=null,t.rewardAnimation=null,t.flyingCoinPS=null,t.newRecordLb=null,t.userInfoGroup=null,t.newBestInfoGroup=null,t.timeImprovedLb=null,t.newRankedGroup=null,t.upIcon=null,t.coinGroup=null,t.buttClaim2x=null,t.flashAnim=null,t.mapNameLb=null,t.worldRankedLb=null,t._callBackOk=null,t._callBackClose=null,t._coinValue=0,t._lastBestScore=null,t._worldRanked=null,t._newBestTotalTime=0,t.listItem=[],t.rateToDisplayVideoBtn=1,t.defaultBenefitMultiplier=2,t.incrementalRewardMultiplier=1,t.maxBenefitMultiplier=2,t}var o;return i(t,e),o=t,t.prototype.init=function(e,t,n,r,i,a,c,s){var l=this;this._callBackOk=s,this._coinValue=r,e&&(this.carIcon.spriteFrame=e),this._newBestTotalTime=b.UserInfo.getNumValue(C.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+S.default.getMap()),this._lastBestScore=a||18e4,this._worldRanked=c,this.username.string=t,this.rank.string=n.toString(),this.XIcon.active=i,this.rank.node.color=i?cc.Color.RED:cc.Color.WHITE,this.flag.spriteFrame=f.NgcCountryFlagsManager.inst.getFlagSpriteFrame(f.NgcCountryFlagsManager.localCountry);var u=r>0&&Math.random()<=this.rateToDisplayVideoBtn&&d.default.inst.isAdsPoincutAvailable(d.NgcPointcuts.videoRewardDialog,y.AdsType.VideoReward);if(this.claimButton.active=!u,this.groupAdsButton.active=u,this.rewardAnimation.active=!1,this.flyingCoinPS.node.active=!1,this.rewarCoinLb.node.opacity=255,cc.log("hasVideoAds",u),u){g.NgcLocalizedManager.t("DLR_CLAIM").text;var p=o.multiplier_offered>1?" "+o.multiplier_offered+"x":"";this.claimMultiplerLb.setLocalizedText("DLR_CLAIM"),this.claimMultiplerLb.subText=p,this.noThanksButton.opacity=0,null==c?(this.scheduleOnce(function(){cc.tween(l.noThanksButton).to(.2,{opacity:255}).start()},2),this.rewarCoinLb.string=r.toString(),this.coinlb.countFrom(0,r,1,function(){})):(this.coinlb.label.string=r.toString(),this.playDialogAnim())}else this.coinlb.countFrom(0,r,1,function(){})},t.prototype.onClaimClick=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.addReward(C.ConstConfig.CURRENCY.SOURCE.GAME_END,this._coinValue)];case 1:return e.sent(),_.default.inst.localPlayerOverGame(),this.hide(),"function"==typeof this._callBackOk&&this._callBackOk(),[2]}})})},t.prototype.onNoThanks=function(){return c(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return o.multiplier_offered=Math.min(this.maxBenefitMultiplier,o.multiplier_offered+this.incrementalRewardMultiplier),m.default.inst&&m.default.inst.onRewardDialogInteract(o.multiplier_offered),[4,this.addReward(C.ConstConfig.CURRENCY.SOURCE.GAME_END,this._coinValue)];case 1:return t.sent(),_.default.inst.localPlayerOverGame(),this.rewarCoinLb.string="+"+this._coinValue,this.showRewardAnimation(this._coinValue,function(){"function"==typeof e._callBackOk&&e._callBackOk()}),[2]}})})},t.prototype.onVideoClick=function(){this.showVideoAds(this._callBackOk)},t.prototype.closeOnClick=function(){"function"==typeof this._callBackClose&&this._callBackClose()},t.prototype.show=function(t){e.prototype.show.call(this,t)},t.prototype.showVideoAds=function(e){var t,n=this;void 0===e&&(e=null);var r=this._coinValue*o.multiplier_offered;o.multiplier_offered=this.defaultBenefitMultiplier,m.default.inst&&m.default.inst.onRewardDialogInteract(o.multiplier_offered),null===(t=d.default.inst)||void 0===t||t.showRewardVideo(d.NgcPointcuts.videoRewardDialog,C.ConstConfig.COIN,r,null,function(t,i){return c(n,void 0,void 0,function(){var n,a;return s(this,function(c){switch(c.label){case 0:return console.log("#VideoReward",t),console.log("#Vduration",i),t?[3,3]:(r=this._coinValue*o.multiplier_offered,0!=i?[3,2]:[4,p.NgcDialogManager.createDialog(u.NgcMessageDialog.dialogType,u.NgcMessageDialog.urlPrefab,u.NgcMessageDialog.bundleName)]);case 1:n=c.sent(),(a=n.getComponent(u.NgcMessageDialog)).init("TMB_AD_COULD_NOT_BE_LOADED"),a.show(null,null,null,null),c.label=2;case 2:return[3,5];case 3:return this.groupAdsButton.active=!t,[4,this.addReward(C.ConstConfig.CURRENCY.SOURCE.GAME_END_MULTIPLY,r)];case 4:c.sent(),_.default.inst.localPlayerOverGame(!0),this.rewarCoinLb.string="+"+this._coinValue*o.multiplier_offered,this.showRewardAnimation(r,e),c.label=5;case 5:return[2]}})})})},t.prototype.addReward=function(e,t){return c(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,b.UserInfo.addCoin(e,t)];case 1:return o.sent(),[2]}})})},t.prototype.showRewardAnimation=function(e,t){var o=this;void 0===t&&(t=null),this.userInfoGroup.active=!1,this.newBestInfoGroup.active=!1,this.groupAdsButton.active=!1,this.coinGroup.active=!1,this.rewardAnimation.active=!0,this.flyingCoinPS.node.active=!0,this.flyingCoinPS.setAnimation(0,"Coins_double",!1),this.flyingCoinPS.setAnimation(1,"Light",!1);var n=this.flyingCoinPS.getCurrent(0),r=1.2;n&&(r=n.animation.duration),console.log("time",r),console.log("animation",n),this.rewarCoinLb.node.scale=0,cc.tween(this.rewarCoinLb.node).to(r/2,{scale:1}).to(r/2,{opacity:0}).call(function(){t&&t(),o.hide()}).start()},t.prototype.playDialogAnim=function(){var e=this;this.buttClaim2x.active=!1,this.noThanksButton.opacity=0,this.coinGroup.opacity=0,this.mapNameLb.string=v.default.getSelectTrack().trackName,cc.tween(this.userInfoGroup).then(this.playUserInfoGroupAnim()).call(function(){e.playNewBestInfoGroupAnim().call(function(){e.playButtonAnim().start()}).start()}).start()},t.prototype.playBestScoreDigitsAnim=function(){var e=this,t=this._newBestTotalTime,o=Math.ceil((e._lastBestScore-t)/1.5*.1);return this.timeImprovedLb.string="-"+P.default.msToTime(e._lastBestScore-t),cc.tween(e).repeat(15,cc.tween(e).by(.1,{_lastBestScore:-o}).call(function(){e._lastBestScore<t&&(e._lastBestScore=t),e.newRecordLb.string="<outline color=#f9ac24 width=3>"+P.default.msToTime(e._lastBestScore)+"</outline>"}))},t.prototype.playUserInfoGroupAnim=function(){return cc.tween(this.userInfoGroup).by(.1,{scale:-.2}).by(.1,{scale:.2}).delay(.3).by(.5,{y:95})},t.prototype.playNewBestInfoGroupAnim=function(){var e=this,t=this,o=cc.tween(this.newBestInfoGroup).to(0,{scale:0}).set({active:!0}).call(function(){e.newRecordLb.string="<outline color=#f9ac24 width=3>"+P.default.msToTime(t._lastBestScore)+"</outline>"}).to(.3,{scale:1}),n=this.playBestScoreDigitsAnim(),r=cc.tween(this.timeImprovedLb.node).by(1,{y:-40}).delay(.5).by(.5,{y:-80,opacity:-255}),i=cc.tween(this.newRankedGroup).to(0,{scale:0}).set({active:!0}).to(.3,{scale:1}).call(function(){var e=g.NgcLocalizedManager.t("TMB_TOP_XX_WORLD").text;t.worldRankedLb.string=e.replace("XX",t._worldRanked.toString())});return cc.tween(this.newBestInfoGroup).then(o).delay(.2).call(function(){t.flashAnim.defaultClip.wrapMode=cc.WrapMode.Default,t.flashAnim.play(),r.start(),n.call(function(){i.start()}).start()}).delay(2.8)},t.prototype.playButtonAnim=function(){var e=this,t=cc.tween().to(0,{scale:0}).set({active:!0}).to(.3,{scale:1}),o=cc.tween(this.noThanksButton).delay(2).to(1,{opacity:255}),n=cc.tween(this.upIcon).repeat(3,cc.tween(this.upIcon).by(.2,{y:5}).by(.2,{y:-5})),r=this;return cc.tween(this.coinGroup).call(function(){r.coinlb.label.string=r._coinValue.toString(),cc.tween(e.buttClaim2x).then(t).call(function(){o.start()}).start(),n.start()}).then(cc.tween().to(0,{scale:0}).set({opacity:255}).to(.3,{scale:1}))},t.prototype.onKeyDown=function(){},t.urlPrefab="Prefabs/Dialogs/RewardDialog",t.bundleName="",t.dialogType="RewardDialog",t.multiplier_offered=2,a([T(cc.Label)],t.prototype,"rank",void 0),a([T(N.default)],t.prototype,"coinlb",void 0),a([T(cc.Sprite)],t.prototype,"carIcon",void 0),a([T(cc.Label)],t.prototype,"username",void 0),a([T(cc.Sprite)],t.prototype,"flag",void 0),a([T(cc.Node)],t.prototype,"XIcon",void 0),a([T(cc.Node)],t.prototype,"claimButton",void 0),a([T(cc.Node)],t.prototype,"groupAdsButton",void 0),a([T(cc.Node)],t.prototype,"noThanksButton",void 0),a([T(h.NgcLabelLocalized)],t.prototype,"claimMultiplerLb",void 0),a([T(cc.Label)],t.prototype,"rewarCoinLb",void 0),a([T(cc.Node)],t.prototype,"rewardAnimation",void 0),a([T(sp.Skeleton)],t.prototype,"flyingCoinPS",void 0),a([T(cc.RichText)],t.prototype,"newRecordLb",void 0),a([T(cc.Node)],t.prototype,"userInfoGroup",void 0),a([T(cc.Node)],t.prototype,"newBestInfoGroup",void 0),a([T(cc.Label)],t.prototype,"timeImprovedLb",void 0),a([T(cc.Node)],t.prototype,"newRankedGroup",void 0),a([T(cc.Node)],t.prototype,"upIcon",void 0),a([T(cc.Node)],t.prototype,"coinGroup",void 0),a([T(cc.Node)],t.prototype,"buttClaim2x",void 0),a([T(cc.Animation)],t.prototype,"flashAnim",void 0),a([T(cc.Label)],t.prototype,"mapNameLb",void 0),a([T(h.NgcLabelLocalized)],t.prototype,"worldRankedLb",void 0),o=a([w],t)}(l.NgcDialogBase);n.default=O,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../FTUE/FTUEManager":"FTUEManager","../../Game":"Game","../../League/LeagueManager":"LeagueManager","../../Maps/DrawMap":"DrawMap","../../UI/DigitCountUp":"DigitCountUp","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../../Utils/Util":"Util"}],RewardItem:[function(t,o,n){"use strict";cc._RF.push(o,"c11de1txXxFA7nX1tbs/q5p","RewardItem");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcRewardItem=void 0;var c=t("../../../../Core/Utils"),s=t("../../../../GameFramework/Scripts/Localized/LabelLocalized"),l=t("../../../../GameFramework/Scripts/Localized/LocalizedManager"),u=t("../../../../Services/Inventory/Inventory"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreBGSpriteframe=null,e.rewardBGSpriteframe=null,e.background=null,e.scoreTitleLabel=null,e.rewardIconSprite=null,e.scoreValueLabel=null,e.glowNode=null,e.lightEffectNode=null,e}return i(o,t),o.prototype.onLoad=function(){this.glowNode||(this.glowNode=this.node.getChildByName("Glow")),this.lightEffectNode||(this.lightEffectNode=this.node.getChildByName("Light"))},o.prototype.rewardLayout=function(){return this.background.node.parent},o.prototype.playFancyAnimation=function(e){var t=this.rewardLayout(),o=this.glowNode;o.scale=0,o.active=!0;var n=this.lightEffectNode;n.scale=0,n.opacity=0,n.active=!0,t.scale=0;var r=this.scoreValueLabel.node;cc.tween(n).to(.5,{scale:1.75,opacity:255}).start(),cc.tween(t).to(.5,{scale:1.5},{easing:"quadInOut"}).delay(5/60).call(function(){cc.tween(n).to(.1,{scale:1,opacity:0},{easing:"backOut"}).start(),e&&e(),cc.tween(t).to(.1,{scale:.75},{easing:"quadOut"}).call(function(){cc.tween(t).to(.1,{scale:1},{easing:"quadInOut"}).start(),cc.tween(r).to(.1,{opacity:255}).start(),cc.tween(o).parallel(cc.tween().to(.5,{scale:1},{easing:"quadOut"}),cc.tween().delay(.3).to(.5,{opacity:0},{easing:"quadOut"})).start()}).start()}).start()},o.prototype.initScore=function(e,t,o,n,r){var i=this;if(void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===r&&(r=""),this.background.spriteFrame=this.scoreBGSpriteframe,this.background.type=cc.Sprite.Type.SLICED,this.background.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.rewardIconSprite.node.active=!1,l.NgcLocalizedManager.setTextKey(this.scoreTitleLabel,e),this.background.node.width=this.scoreTitleLabel.node.getContentSize().width+16,n){var a=this.scoreValueLabel.node.y,s=c.Utils.tweenNumber(0,t,1.25,function(e,n){n?(cc.tween(i.scoreValueLabel.node).to(.25,{scale:1}).start(),i.scoreValueLabel.string=(o?t>=0?"+":"-":r)+Math.abs(e).toString(),i.scoreValueLabel.node.y=a):(cc.director.getTotalFrames()%5==0&&(i.scoreValueLabel.string=(o?t>=0?"+":"-":r)+Math.abs(e).toString()),i.scoreValueLabel.node.y=a+Math.abs(7*Math.sin(Date.now()*Math.PI/160)))});return this.scheduleOnce(function(){s.start()},.5),s}return this.scoreValueLabel.string=(o?t>0?"+":"-":r)+Math.abs(t).toString(),null},o.prototype.initReward=function(t,o,n,r){var i=this;void 0===n&&(n=!1),void 0===r&&(r=1),this.background.spriteFrame=this.rewardBGSpriteframe,this.scoreTitleLabel.node.active=!1,this.scoreValueLabel.string=(n?o>=0?"+":"-":"")+Math.abs(o).toString();var a="default_sprite";try{a=u.NgcInventory.inst.objectTypeTable[t].picture}catch(e){console.warn(e)}cc.loader.loadRes(a,cc.SpriteFrame,function(e,t){e||(i.rewardIconSprite.spriteFrame=t)}),this.rewardIconSprite.node.scale=r},a([f(cc.SpriteFrame)],o.prototype,"scoreBGSpriteframe",void 0),a([f(cc.SpriteFrame)],o.prototype,"rewardBGSpriteframe",void 0),a([f(cc.Sprite)],o.prototype,"background",void 0),a([f(s.NgcLabelLocalized)],o.prototype,"scoreTitleLabel",void 0),a([f(cc.Sprite)],o.prototype,"rewardIconSprite",void 0),a([f(s.NgcLabelLocalized)],o.prototype,"scoreValueLabel",void 0),a([f(cc.Node)],o.prototype,"glowNode",void 0),a([f(cc.Node)],o.prototype,"lightEffectNode",void 0),a([d],o)}(cc.Component);n.NgcRewardItem=h,cc._RF.pop()},{"../../../../Core/Utils":"Utils","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../Services/Inventory/Inventory":"Inventory"}],RewardUI:[function(t,o,n){"use strict";cc._RF.push(o,"e6a24w/gDVEz76+MwY1ayO5","RewardUI");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},l=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcEndGameRewardDialog=void 0;var u=t("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),p=t("../../../Core/Utils"),d=t("../../../GameFramework/Scripts/Ads/NgcAdsManager"),f=t("../../../GameFramework/Scripts/BuildConfig"),h=t("../../../GameFramework/Scripts/Localized/LabelLocalized"),g=t("../../../GameFramework/Scripts/Localized/LocalizedManager"),y=t("../../../GameFramework/Scripts/NgcGame"),m=t("../../../GameFramework/Scripts/NgcScreenManager"),_=t("../../../SDK/Nano/NanoSrv"),v=t("../../../Services/Ads/Ads"),S=t("../../../Services/Inventory/Inventory"),N=t("../../../Services/Telemetry/Telemetry"),b=t("../../CrownRoad/Script/CrownRoadManager"),C=t("../../Dialogs/Script/DialogBase"),P=t("../../Dialogs/Script/MessageDialog/MessageDialog"),I=t("../../Dialogs/Script/NgcDialogManager"),w=t("../../RealPrize/Script/RealPrizeTicketProgressTimer"),T=t("../Result/Script/RewardItem"),O=cc._decorator,R=O.ccclass,E=O.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardLayoutNode=null,t.claimButton=null,t.claimAdsButton=null,t.retryButton=null,t.backToMainMenuButton=null,t.ticketUINode=null,t.ticketDailyLimitNode=null,t.rewardItemPrefab=null,t.confettiLeft=null,t.confettiRight=null,t._callBackWhenClose=null,t._retryFlowCallback=null,t.claimButtonClicked=!1,t._rewardAnimationQueues=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){this.claimButton.getComponent(cc.Button).interactable=!1,this.claimAdsButton.getComponent(cc.Button).interactable=!1,this.retryButton.getComponent(cc.Button).interactable=!1,this.backToMainMenuButton.getComponent(cc.Button).interactable=!1,this.claimButton.opacity=0,this.claimAdsButton.opacity=0,this.retryButton.opacity=0,this.backToMainMenuButton.opacity=0,this.ticketUINode.opacity=0,this.ticketUINode.scale=0},t.prototype.showConfetti=function(){var e=this;cc.tween(this.node).delay(.2).call(function(){e.confettiLeft.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()}),e.confettiRight.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()})}).start()},t.prototype.claimButtonDelayTime=function(){return 1},t.prototype.backToMainMenuDelayTime=function(){return 1},t.prototype.init=function(e){var t=this;this.addRewardItems(),this.scheduleOnce(function(){cc.tween(t.ticketUINode).to(.25,{scale:1,opacity:255}).call(function(){t.checkShowTicketUI()}).start()},1),this.updateClaimAdsButton(),(v.NgcAds.inst.isFakeAdsPlatform()||f.NgcBuildConfig.offlineMode)&&(this.claimAdsButton.getChildByName("icon_ad").active=!1,this.claimButton.active=!1),this._callBackWhenClose=e,o.canShowRetryButton()&&(this.claimAdsButton.active=!1,this.claimButton.active=!1,this.retryButton.active=!0,this.backToMainMenuButton.active=!0)},t.prototype.showButtons=function(){var e=this;o.canShowRetryButton()?cc.tween(this.retryButton).to(.5,{opacity:255}).call(function(){e.showDailyLimitMessage(),e.retryButton.getComponent(cc.Button).interactable=!0,cc.tween(e.backToMainMenuButton).delay(e.backToMainMenuDelayTime()).to(.5,{opacity:255}).call(function(){y.NgcGame.inst.forcedExit?e.onClaimButtonClick(null,null):e.backToMainMenuButton.getComponent(cc.Button).interactable=!0}).start()}).start():(this.claimAdsButton.pulsingEffect=!0,cc.tween(this.claimAdsButton).to(.5,{opacity:255}).call(function(){e.showDailyLimitMessage(),e.claimAdsButton.getComponent(cc.Button).interactable=!0,cc.tween(e.claimButton).delay(e.claimButtonDelayTime()).to(.5,{opacity:255}).call(function(){y.NgcGame.inst.forcedExit?e.onClaimButtonClick(null,null):e.claimButton.getComponent(cc.Button).interactable=!0}).start()}).start())},t.prototype.addRewardItems=function(){var e=this;o._endGameRewards.forEach(function(t){e.addRewardItem(t.itemID,t.count,!0)})},t.prototype.showTicketUI=function(){return!0},t.prototype.canShowDailyLimitMessage=function(){return!0},t.prototype.checkShowTicketUI=function(){var e=this;if(this.showTicketUI()){this.ticketUINode.getComponent(w.NgcRealPrizeTicketProgressTimer).init();var t=this.ticketUINode.getComponent(w.NgcRealPrizeTicketProgressTimer).glowEffectNode,n=this.ticketUINode.getComponent(w.NgcRealPrizeTicketProgressTimer).iconTicketNode;cc.tween(t).to(.2,{opacity:255,scale:.6}).call(function(){cc.tween(t).to(.2,{opacity:0,scale:.4}).start()}).start(),n.getComponent(cc.Widget).enabled=!1,cc.tween(n).to(.2,{scale:2.5}).call(function(){}).start(),this.scheduleOnce(function(){var t=n.position;o.addReward({itemID:"ticket",count:5});var r=e.addRewardItem("ticket",5,!1);r.node.scale=0,r.node.opacity=0,cc.tween(r.node).to(.5,{scale:1},{easing:"backOut"}).call(function(){e.rewardLayoutNode.getComponent(cc.Layout).enabled=!1,r.node.scale=0,r.node.opacity=255}).start(),e.rewardLayoutNode.getComponent(cc.Layout).updateLayout(),e.scheduleOnce(function(){r.node.scale=1,r.rewardLayout().scale=0,r.scoreValueLabel.node.opacity=0,r.playFancyAnimation(e.showConfetti.bind(e))},.55),p.Utils.tweenNodeToNode(n,r.rewardIconSprite.node,cc.v2(-8,32),{scale:.75},.65,"quartInOut",!0).call(function(){cc.tween(n).to(.25,{opacity:0}).call(function(){n.x=t.x,n.y=t.y+50,n.scale=1.5,e.canShowDailyLimitMessage()?cc.tween(e.ticketUINode).to(.25,{opacity:0}).start():cc.tween(n).to(.25,{y:t.y,opacity:255},{easing:"quartInOut"}).start()}).start(),e.showButtons()}).start()},.4)}else this.ticketUINode.opacity=0,this.showButtons()},t.prototype.showDailyLimitMessage=function(){if(this.canShowDailyLimitMessage()){this.ticketUINode.getComponent(w.NgcRealPrizeTicketProgressTimer).hideUIElements(),this.ticketDailyLimitNode.active=!0,this.ticketDailyLimitNode.opacity=0,this.ticketDailyLimitNode.getComponent(cc.Widget).updateAlignment(),this.ticketDailyLimitNode.getComponent(cc.Widget).enabled=!1;var e=this.ticketDailyLimitNode.y;this.ticketDailyLimitNode.y-=20,cc.tween(this.ticketDailyLimitNode).to(.5,{opacity:255,y:e},{easing:"quartInOut"}).start()}},t.prototype.onClaimAdsButtonClick=function(){var e=this;this.claimReward(!0,!1,function(){e.hide(e.onAfterClaim.bind(e,o.normalFlowCallback),!1)})},t.prototype.onClaimButtonClick=function(){var e=this;this.claimReward(!1,!1,function(){e.hide(e.onAfterClaim.bind(e,o.normalFlowCallback),!1)})},t.prototype.onRetryButtonClick=function(){var e=this;o.retryFlowTriggered=!0,this.claimReward(!1,!0,function(){e.hide(e.onAfterClaim.bind(e,o.retryFlowCallback),!1)})},t.prototype.onAfterClaim=function(e){var t=this;m.default.inst.startFadeOut(.25,function(){t._callBackWhenClose&&t._callBackWhenClose(),e&&e(),setTimeout(function(){m.default.inst.startFadeIn(.25)},250),t.node.destroy()})},t.prototype.hideUIBeforeRewardAnimation=function(){var e=this;cc.Tween.stopAllByTarget(this.backToMainMenuButton),cc.Tween.stopAllByTarget(this.claimButton),this.claimAdsButton.getComponent(cc.Button).interactable=!1,this.claimButton.getComponent(cc.Button).interactable=!1,this.retryButton.getComponent(cc.Button).interactable=!1,this.backToMainMenuButton.getComponent(cc.Button).interactable=!1,cc.tween(this.ticketUINode).to(.25,{opacity:0}).start(),cc.tween(this.rewardLayoutNode).to(.25,{opacity:0}).start(),cc.tween(this.claimButton).to(.25,{opacity:0}).call(function(){e.claimButton.active=!1}).start(),cc.tween(this.claimAdsButton).to(.25,{opacity:0}).start(),cc.tween(this.retryButton).to(.25,{opacity:0}).start(),cc.tween(this.backToMainMenuButton).to(.25,{opacity:0}).start(),cc.tween(this.ticketDailyLimitNode).to(.25,{opacity:0}).start()},t.prototype.displayRewardAnimations=function(e){var t=this;this._rewardAnimationQueues||(this._rewardAnimationQueues=l(o._endGameRewards));var n=this._rewardAnimationQueues.shift();n?(o.deliveryRewardInst.showRewardAnimation(n,null,!1),this.scheduleOnce(function(){t.displayRewardAnimations(e)},1.5)):e()},t.prototype.setGameOverClickExtraParams=function(){N.NgcTelemetry.inst.setGameRoundOverClickedExtraParam({NGC:!0})},t.prototype.sendGameOverClickTracking=function(e){var t=e?1:0;N.NgcTelemetry.inst.LogEvent_GameRoundOverClicked({multiplierOffer:t,ticketEarnings:null,category:null})},t.prototype.claimReward=function(e,t,n){var r=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),!this.claimButtonClicked){(v.NgcAds.inst.isFakeAdsPlatform()||f.NgcBuildConfig.offlineMode)&&(e=!1);var i=o.currentMultiplier;if(f.NgcBuildConfig.offlineMode||this.sendGameOverClickTracking(e),e){if(window.isAdsBlocked)return void I.NgcDialogManager.showAdsReminderMsg(this.claimAdsButton);var a=o._endGameRewards.map(function(e){return e.itemID}),l=o._endGameRewards.map(function(e){return e.count});d.default.inst.showRewardVideo(d.NgcPointcuts.videoRewardDialog,a,l,null,function(t,a){return c(r,void 0,void 0,function(){var r,c;return s(this,function(s){switch(s.label){case 0:return t?[3,3]:0!==a?[3,2]:[4,I.NgcDialogManager.createDialog(P.NgcMessageDialog.dialogType,P.NgcMessageDialog.urlPrefab,P.NgcMessageDialog.bundleName)];case 1:r=s.sent(),(c=r.getComponent(P.NgcMessageDialog)).init("NGG_AD_NOT_READY"),c.show(null,this.claimAdsButton,null,null),s.label=2;case 2:return this.claimButtonClicked=!1,[2];case 3:return o._endGameRewards.forEach(function(e){return e.count*=i}),this.hideUIBeforeRewardAnimation(),this.updateRewardMultiplier(e),this.displayRewardAnimations(n),[2]}})})})}else this.hideUIBeforeRewardAnimation(),this.updateRewardMultiplier(e),this.displayRewardAnimations(n),N.NgcTelemetry.inst.markOnboardingClaim2xVideoEvents();this.claimButtonClicked=!0}},t.prototype.updateClaimAdsButton=function(){var e=v.NgcAds.inst.isFakeAdsPlatform()||f.NgcBuildConfig.offlineMode;this.claimAdsButton.getComponentInChildren(h.NgcLabelLocalized).string=g.NgcLocalizedManager.t("DLR_CLAIM").text+(e?"":" x"+o.currentMultiplier.toString())},t.prototype.updateRewardMultiplier=function(e,t){var n=o.rewardMultiplierData();o.currentMultiplier=e?n.defaultBenefitMultiplier:Math.min(o.currentMultiplier+n.incrementalMultiplier,n.maxBenefitMultiplier),o.uploadRewardMultiplierValue(o.currentMultiplier,t)},t.prototype.addRewardItem=function(e,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=1);var r=cc.instantiate(this.rewardItemPrefab).getComponent(T.NgcRewardItem);return r.initReward(e,t,!0,n),this.rewardLayoutNode.addChild(r.node),o&&(r.rewardLayout().scale=0,r.scoreValueLabel.node.opacity=0,r.playFancyAnimation(this.showConfetti.bind(this))),r},t.prototype.show=function(){this.checkShowBanner(d.NgcPointcuts.bannerRewardVideo),e.prototype.show.call(this)},t.prototype.update=function(){this.claimAdsButton.pulsingEffect&&(this.claimAdsButton.scale=.98+.04*Math.sin(Date.now()*Math.PI/480)),u.NgcPartyRoomManager.inst.isGameStartedFromRoom()&&!y.NgcGame.inst.forcedExit&&y.NgcGame.inst.canSkipToPartyRoom()&&255===this.claimButton.opacity&&(this.onClaimButtonClick(null,null),y.NgcGame.inst.forcedExit=!0)},t.claimRewards=function(){var e=o._nonDisplayEndGameRewards.concat(o._endGameRewards);S.NgcInventory.inst.addItemList(e,function(){}),b.default.isInitialized&&b.default.updateRank(b.default.playerRank,function(){b.default.crownRoadUIInst.downRank&&b.default.crownRoadUIInst.checkRefreshUI()})},t.clearRewards=function(){o._endGameRewards=[],o._nonDisplayEndGameRewards=[]},t.setRewards=function(e){o._endGameRewards=o._endGameRewards.concat(e.filter(function(e){return 0!=e.count}))},t.addReward=function(e){o._endGameRewards.push(e)},t.addNonDisplayReward=function(e){o._nonDisplayEndGameRewards.push(e)},t.endGameFlowConfig=function(){var e=_.default.inst&&_.default.inst.getCurGameInfo()&&_.default.inst.getCurGameInfo().gameParams||{};return o._endGameFlowConfig=e&&e.endGameFLow||{},o._endGameFlowConfig},t.canShowRetryButton=function(){return!u.NgcPartyRoomManager.inst.isGameStartedFromRoom()&&o.retryFlowConditionFn&&o.retryFlowConditionFn()||!1},t.setRetryFlowCondition=function(e){o.retryFlowConditionFn=e},t.setRetryFlowCallback=function(e){o.retryFlowCallback=e},t.setNormalFlowCallback=function(e){o.normalFlowCallback=e},t.setSkipRewardScreenCondition=function(e){o.skipRewardScreenCondition=e},t.canSkipRewardScreen=function(){return o.skipRewardScreenCondition&&o.skipRewardScreenCondition()||!1},t.rewardMultiplierData=function(){var e=o.endGameFlowConfig(),t={rateToDisplayVideoBtn:e.rateToDisplayVideoBtn,defaultBenefitMultiplier:e.defaultBenefitMultiplier,incrementalMultiplier:e.incrementalMultiplier,maxBenefitMultiplier:e.maxBenefitMultiplier};return o._multiplierData=t||{rateToDisplayVideoBtn:1,defaultBenefitMultiplier:2,incrementalMultiplier:1,maxBenefitMultiplier:5},o._multiplierData},t.getRewardMultiplierValue=function(e){var t=this;void 0===e&&(e=null),f.NgcBuildConfig.offlineMode?e(1):_.default.inst.serviceGet("/playerdata",null,function(n,r){n||(o.currentMultiplier=Number(JSON.parse(r).data._rewardMultiplier)||t.rewardMultiplierData().defaultBenefitMultiplier,e&&e(o.currentMultiplier))})},t.uploadRewardMultiplierValue=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n={_rewardMultiplier:e};_.default.inst.servicePost("/playerdata",JSON.stringify(n),function(e,r){e?console.log("Cannot update reward mutiplier"):(o.currentMultiplier=n._rewardMultiplier,t&&t(r))})},t.urlPrefab="Reward",t.bundleName="03_end_game_flow",t.dialogType="NgcEndGameRewardDialog",t.retryFlowTriggered=!1,t._endGameRewards=[],t._nonDisplayEndGameRewards=[],t._endGameFlowConfig=null,t._multiplierData=null,t.currentMultiplier=0,t.deliveryRewardInst=null,a([E(cc.Node)],t.prototype,"rewardLayoutNode",void 0),a([E(cc.Node)],t.prototype,"claimButton",void 0),a([E(cc.Node)],t.prototype,"claimAdsButton",void 0),a([E(cc.Node)],t.prototype,"retryButton",void 0),a([E(cc.Node)],t.prototype,"backToMainMenuButton",void 0),a([E(cc.Node)],t.prototype,"ticketUINode",void 0),a([E(cc.Node)],t.prototype,"ticketDailyLimitNode",void 0),a([E(cc.Prefab)],t.prototype,"rewardItemPrefab",void 0),a([E(cc.Node)],t.prototype,"confettiLeft",void 0),a([E(cc.Node)],t.prototype,"confettiRight",void 0),o=a([R],t)}(C.NgcDialogBase);n.NgcEndGameRewardDialog=A,cc._RF.pop()},{"../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Telemetry/Telemetry":"Telemetry","../../CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../Dialogs/Script/DialogBase":"DialogBase","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../RealPrize/Script/RealPrizeTicketProgressTimer":"RealPrizeTicketProgressTimer","../Result/Script/RewardItem":"RewardItem"}],SDK:[function(e,t,o){"use strict";cc._RF.push(t,"cf299Q6pm5F0qHeC+LbVD6j","SDK"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSDK=void 0;var n=function(){function e(){this.preInitialized=!1,this.initialized=!1,this.loggedIn=!1}return e.prototype.preInit=function(e){return this._preInit(e)},e.prototype.init=function(e){return this._init(e)},e.prototype.login=function(){var e=this;if(this.isLoggedIn())return new Promise(function(t){t(e.getName()+" already logged in")});var t=this._login();return t.then(function(){return e.loggedIn=!0}),t},e.prototype.logout=function(){var e=this,t=this._logout();return t.then(function(){return e.loggedIn=!1}),t},e.getCurTime=function(){return e.env&&e.env.hasOwnProperty("getCurTime")?e.env.getCurTime():Date.now()},e.env={},e}();o.NgcSDK=n,cc._RF.pop()},{}],ScaleAdapter:[function(e,t,o){"use strict";cc._RF.push(t,"e25f1yJwwJF+I68o9CN1x7C","ScaleAdapter");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=cc.Enum({center:0,top:1,bottom:2,container:3}),u=cc.Enum({center:0,left:1,right:2}),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.designSize=null,t.verticalAlign=l.center,t.horizontalAlign=u.center,t._position=null,t}return r(t,e),t.prototype.onLoad=function(){cc.view.on("canvas-resize",this.onResized,this)},t.prototype.onEnable=function(){this.adaptScale()},t.prototype.onResized=function(){var e=this.node.getComponent(cc.Widget);e.isAlignRight=!0,e.isAlignLeft=!0,e.isAlignBottom=!0,e.isAlignTop=!0,e.updateAlignment(),this.adaptScale()},t.prototype.adaptScale=function(){var e=cc.winSize,t=this.node.getComponent(cc.Widget),o=this.designSize.width/this.designSize.height;e.height>e.width?(t.isAlignBottom=!1,t.isAlignTop=!1,t.updateAlignment(),this.node.height=this.designSize.height,this.node.scale=this.node.width/o/this.designSize.height,this.verticalAlign==l.top?t.isAlignTop=!0:this.verticalAlign==l.bottom?t.isAlignBottom=!0:this.verticalAlign==l.center?t.isAlignVerticalCenter=!0:(t.isAlignBottom=!0,t.isAlignTop=!0)):(t.isAlignRight=!1,t.isAlignLeft=!1,t.updateAlignment(),this.node.width=this.designSize.width,this.node.scale=this.node.height*o/this.designSize.width,this.horizontalAlign==u.left?t.isAlignLeft=!0:this.horizontalAlign==u.right?t.isAlignRight=!0:t.isAlignHorizontalCenter=!0)},i([s(cc.Size)],t.prototype,"designSize",void 0),i([s({type:l})],t.prototype,"verticalAlign",void 0),i([s({type:u})],t.prototype,"horizontalAlign",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],ScanQRCodeDialog:[function(t,o,n){"use strict";cc._RF.push(o,"e3cc2vEtiBONYsdz9n71AHN","ScanQRCodeDialog");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcScanQRCodeDialog=void 0;var l=t("jsqr"),u=t("../../../../GameFramework/Scripts/Localized/LabelLocalized"),p=t("../../../Dialogs/Script/DialogBase"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.videoPlayer=null,e.resultLabel=null,e.errorDialog=null,e.video=null,e.bannerNode=null,e._stream=null,e._disableUpdate=!1,e}var n;return i(o,t),n=o,o.prototype.onLoad=function(){this.originalDialogNode=this.dialogNode,this.originalDialogNode.active=!1,this.errorDialog.active=!1},o.prototype.tick=function(){if(!this._disableUpdate&&this.video.readyState===this.video.HAVE_ENOUGH_DATA){var t=document.createElement("canvas"),o=t.getContext("2d");t.width=this.videoPlayer.node.width,t.height=this.videoPlayer.node.height,o.clearRect(0,0,t.width,t.height),o.drawImage(this.video,0,0,t.width,t.height);try{var n=o.getImageData(0,0,t.width,t.height),r=l.default(n.data,n.width,n.height,{inversionAttempts:"dontInvert"});r&&(this.resultLabel.string=r.data,this._onSuccessCallback(r.data),this.onClose())}catch(e){console.warn(e)}}},o.prototype.startQRScanner=function(){this.video||(this.video=document.getElementsByClassName("cocosVideo")[0]),this.video.srcObject=this._stream,this.video.play(),this.schedule(this.tick,1/n.SCAN_FPS)},o.prototype.init=function(e,t){return c(this,void 0,void 0,function(){return s(this,function(){return this._onSuccessCallback=t,this._stream=e,[2]})})},o.prototype.clearBeforeClose=function(){this.unschedule(this.tick);try{this.video.srcObject.getTracks().forEach(function(e){e.stop()})}catch(e){console.warn(e)}},o.prototype.onClose=function(){this._disableUpdate=!0,this.clearBeforeClose(),this.dialogUsingNode=null,this.hide()},o.prototype.onTryAgainBtnClick=function(){var e=this;navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(t){return c(e,void 0,void 0,function(){var e=this;return s(this,function(){return this._stream=t,this.originalDialogNode.active=!0,this.errorDialog.active=!1,this.dialogOpenType=null,this.scheduleOnce(function(){e.startQRScanner()},.25),[2]})})}).catch(function(){e.onClose()})},o.prototype.show=function(){this._stream?(this.dialogNode=this.originalDialogNode,this.dialogNode.active=!0,this.startQRScanner()):(this.dialogNode=this.errorDialog,this.dialogNode.active=!0)},o.prototype.rescale=function(){},o.urlPrefab="ScanQRCodeDialog",o.bundleName="02_dialog",o.dialogType="ScanQRCodeDialog",o.SCAN_FPS=15,a([h(cc.VideoPlayer)],o.prototype,"videoPlayer",void 0),a([h(u.NgcLabelLocalized)],o.prototype,"resultLabel",void 0),a([h(cc.Node)],o.prototype,"errorDialog",void 0),n=a([f],o)}(p.NgcDialogBase);n.NgcScanQRCodeDialog=g,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../Dialogs/Script/DialogBase":"DialogBase",jsqr:80}],SceneManager:[function(e,t,o){"use strict";cc._RF.push(t,"4cf23tl1FRCT51Mo1uhLNLd","SceneManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/GameFramework/Scripts/NgcSceneManager"),c=e("./Player/PlayerController"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getAllPlayer=function(){return c.default.inst.allPlayer()},t.prototype._findPlayerLead=function(){return null},t.prototype._findPlayerByNetID=function(e){return c.default.inst.findPlayerByNetID(e)},t.prototype.start=function(){},i([l],t)}(a.NgcSceneManager));o.default=u,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/NgcSceneManager":"NgcSceneManager","./Player/PlayerController":"PlayerController"}],ScoreScreen:[function(t,o,n){"use strict";cc._RF.push(o,"052b9yMZvJNdKG22pYqxS0v","ScoreScreen");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),u=t("../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager"),p=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),d=t("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),f=t("../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),h=t("../../NanoGameCore/Services/Leaderboard/Leaderboard"),g=t("../../NanoGameCore/Services/Platform/Platform"),y=t("../CarSelector/CarSkinSelecter"),m=t("../Currency/Currency"),_=t("../Dialog/LeaderBoardDialog/LeaderBoardDialog"),v=t("../Dialog/RewardDialog/RewardDialog"),S=t("../FTUE/FTUEManager"),N=t("../Game"),b=t("../League/LeagueManager"),C=t("../Main"),P=t("../Maps/DrawMap"),I=t("../Player/PlayerController"),w=t("../Tracking/TrackingManager"),T=t("../UserInfo"),O=t("../Utils/ConstConfig"),R=t("./DigitCountUp"),E=t("./GameUI"),A=cc._decorator,D=A.ccclass,k=A.property,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blueRibbon=null,t.blueRibbonDestPos=null,t.purpleRibbon=null,t.purpleRibbonDestPos=null,t.loadingOverlay=null,t.totalScore=null,t.bestScore=null,t.runScore=null,t.flyScore=null,t.hitScore=null,t.leaderBoadParent=null,t.HideUI=[],t.leaderBoardDialog=null,t.blueRibbonHomePos=cc.v2(0,0),t.purpleRibbonHomePos=cc.v2(0,0),t.timeCounter=0,t.clickAble=!0,t.lastPersonalBest=null,t._isShowLB=!1,t.rewardDialog=null,t.isShowScoreScreen=!1,t.isShowingReward=!1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.timeout=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.prototype.doSequence=function(){return c(this,void 0,void 0,function(){return s(this,function(){return[2]})})},t.prototype.reset=function(){this.clickAble=!0,this._isShowLB=!1},t.prototype.start=function(){cc.log("// SCORE SCREEN START //")},t.prototype.showLeaderBoard=function(){this.node.active=!0,this.nextOnClick(),this._isShowLB=!0,g.NgcPlatform.inst&&g.NgcPlatform.inst.onEndGame()},t.prototype.onDisable=function(){this._isShowLB=!1,cc.log("Turn off LEADER BOARD")},t.prototype.onEnable=function(){this._isShowLB=!0,C.Main.inst.isFTUE()||(this.lastPersonalBest=T.UserInfo.getNumValue(O.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+P.default.getMap()),b.default.inst.lastBestScore=T.UserInfo.bestScore),cc.log("Show LEADER BOARD"),this.leaderBoardDialog&&this.leaderBoardDialog.onEnable(),E.default.inst.HideHub()},t.prototype.isShowLB=function(){return this._isShowLB},t.prototype.update=function(){},t.prototype.nextOnClick=function(){return c(this,void 0,void 0,function(){var e,t=this;return s(this,function(o){switch(o.label){case 0:return this.clickAble?(this.clickAble=!1,w.default.getInst().LogEvent_EndTimer("ViewResultsTime",!0),this.leaderBoardDialog?[3,2]:[4,l.NgcDialogManager.createDialog(_.default.dialogType,_.default.urlPrefab,"")]):[2];case 1:e=o.sent(),this.leaderBoardDialog=e.getComponent(_.default),o.label=2;case 2:return cc.log("LB parents",this.leaderBoardDialog.node.parent),this.leaderBoardDialog.init(d.NgcLocalizedManager.t("POSITION").text,_.LeadboardType.CurGame,function(){t.goToNextScreen(),t._isShowLB=!1}),this.leaderBoardDialog.show(this.node),w.default.getInst().LogEvent_BeginTimer("LeaderboardTime"),this.isShowScoreScreen=!0,w.default.getInst().LogEvent_EnterScreen("EndOfActionPhase"),[2]}})})},t.prototype.showRewardDialog=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r,i,a,c,u,d,f,_=this;return s(this,function(s){switch(s.label){case 0:return g.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_FINISHGAMEPLAY:!0}),"*"),e=y.default.getSpriteFrameFromID(I.default.inst.getLocalPlayer().getCarSkin()),t=I.default.inst.getLocalPlayer().getPlayerName(),o=this.leaderBoardDialog._localPlayerRank,n=null,r=m.default.getLeagueReward(o,b.default.getSelectTrack().trackTier),i=T.UserInfo.getNumValue(O.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+P.default.getMap()),0==r?[3,6]:i<this.lastPersonalBest||0==this.lastPersonalBest?(c={},b.default.inst?p.NgcBuildConfig.offlineMode?[4,b.default.inst.loadTopLeague()]:[3,2]:[3,4]):[3,4];case 1:return c=s.sent(),n=c[0].rank?c[0].rank:null,[3,4];case 2:return(u=[]).push({url:"leaderboard.getRankByName",params:{leagueName:b.default.getSelectTrack().trackID,includeTop:!0,reverseOrder:!1}}),[4,h.NgcLeaderboard.inst.groupAPIRequest(u)];case 3:d=s.sent(),cc.log("leaderboard response",d),n=d.data?d.data[0].rank:null,s.label=4;case 4:return f=this,[4,l.NgcDialogManager.createDialog(v.default.dialogType,v.default.urlPrefab,"")];case 5:return f.rewardDialog=s.sent().getComponent(v.default),a=I.default.inst.getLocalPlayer().isKickOut(),T.UserInfo.curFTUEStep==S.FTUE_STEP.REWARD_2ND_MAP&&(w.default.getInst().LogEvent_FTUE_Tut02_RewardScreen(),T.UserInfo.curFTUEStep=S.FTUE_STEP.FINISHED_ALL_FTUE),this.rewardDialog.init(e,t,o,r,a,this.lastPersonalBest,n,function(){_.isShowingReward=!1,_.gotoStartScreen()}),this.rewardDialog.show(),this.isShowingReward=!0,[3,7];case 6:N.default.inst.localPlayerOverGame(),this.gotoStartScreen(),s.label=7;case 7:return[2]}})})},t.prototype.goToNextScreen=function(e){var t;void 0===e&&(e=!1),cc.error("goToNextScreen",e);var o=I.default.inst.isRaceFinished();S.default.inst.finishStep(S.FTUE_STEP.FINISHED_ALL_FTUE_TRIGGER),o||e?C.Main.inst.isSkipReward()?(this.reset(),C.Main.inst.reload()):this.showRewardDialog():null===(t=u.NgcSpectatorManager.inst)||void 0===t||t.startSpectator(),C.Main.inst.isFTUE()||(f.default.totalSessions+=1)},t.prototype.gotoStartScreen=function(){this.reset(),C.Main.inst.reload()},t.prototype.updateInfo=function(e){this.leaderBoardDialog&&this.leaderBoardDialog.updateInfo(e)},a([k(cc.Node)],t.prototype,"blueRibbon",void 0),a([k(cc.Node)],t.prototype,"blueRibbonDestPos",void 0),a([k(cc.Node)],t.prototype,"purpleRibbon",void 0),a([k(cc.Node)],t.prototype,"purpleRibbonDestPos",void 0),a([k(cc.Node)],t.prototype,"loadingOverlay",void 0),a([k(R.default)],t.prototype,"totalScore",void 0),a([k(R.default)],t.prototype,"bestScore",void 0),a([k(R.default)],t.prototype,"runScore",void 0),a([k(R.default)],t.prototype,"flyScore",void 0),a([k(R.default)],t.prototype,"hitScore",void 0),a([k(cc.Node)],t.prototype,"leaderBoadParent",void 0),a([k(cc.Node)],t.prototype,"HideUI",void 0),a([D],t)}(cc.Component);n.default=L,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../../NanoGameCore/Services/Platform/Platform":"Platform","../CarSelector/CarSkinSelecter":"CarSkinSelecter","../Currency/Currency":"Currency","../Dialog/LeaderBoardDialog/LeaderBoardDialog":"LeaderBoardDialog","../Dialog/RewardDialog/RewardDialog":"RewardDialog","../FTUE/FTUEManager":"FTUEManager","../Game":"Game","../League/LeagueManager":"LeagueManager","../Main":"Main","../Maps/DrawMap":"DrawMap","../Player/PlayerController":"PlayerController","../Tracking/TrackingManager":"TrackingManager","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig","./DigitCountUp":"DigitCountUp","./GameUI":"GameUI"}],ScreenManager:[function(e,t,o){"use strict";cc._RF.push(t,"c0966BQ3JtLiqi/4Yw5n9c1","ScreenManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenIDs=void 0;var a,c=e("./Screens/PartyRoomScreen/PartyRoomManager"),s=e("../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),l=e("../NanoGameCore/GameFramework/Scripts/Network/NetStatsTracker"),u=e("../NanoGameCore/GameFramework/Scripts/NgcMain"),p=e("../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),d=e("../NanoGameCore/Services/Telemetry/Telemetry"),f=e("./Screens/GameScreen/GameScreen"),h=e("./Main"),g=e("./Network/NetClient"),y=e("./Screens/StartScreen/StartMain"),m=e("./UserInfo"),_=e("../NanoGameCore/Services/Platform/Platform"),v=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),S=e("../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),N=e("../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),b=e("../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyInfoBuilder"),C=e("../NanoGameCore/CrossFeatures/TabBar/Script/TabBarManager"),P=e("./Game"),I=e("./League/LeagueManager"),w=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),T=e("../NanoGameCore/Core/Utils"),O=e("../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),R=cc._decorator,E=R.ccclass;R.property,function(e){e[e.StartScreen=0]="StartScreen",e[e.ShopScreen=1]="ShopScreen",e[e.LeaderBoardScreen=2]="LeaderBoardScreen",e[e.PWFScreen=3]="PWFScreen",e[e.GameScreen=4]="GameScreen",e[e.LeaderBoardScreenPC=5]="LeaderBoardScreenPC",e[e.PrizeScreen=6]="PrizeScreen",e[e.ShopScreenPC=7]="ShopScreenPC"}(a=o.ScreenIDs||(o.ScreenIDs={}));var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentScreen=null,t.delayToGameScreen=.5,t.screenIDs=cc.Enum({StartScreen:0,ShopScreen:1,LeaderBoardScreen:2,PWFScreen:3,GameScreen:4,LeaderBoardScreenPC:5,PrizeScreen:6,ShopScreenPC:7}),t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this),o.inst?console.error("More than one ScreenManager instance"):(this.node.on("tapDown",this.onTapDown,this),this.node.on("tapUp",this.onTapUp,this),o.inst=this,p.default.inst=this,this.init(!0,!0))},t.prototype.init=function(t,o){void 0===t&&(t=!0),void 0===o&&(o=!0),e.prototype.init.call(this,t,o)},t.prototype.pageOrder=function(){var e=this,t=[this.screenIDs.ShopScreen,this.screenIDs.LeaderBoardScreen,this.screenIDs.StartScreen,this.screenIDs.PWFScreen,this.screenIDs.PrizeScreen];return w.NgcBuildConfig.buildPlatform===T.Utils.enumToString(_.PlatformID,_.PlatformID.GameDistribution)&&(t=[this.screenIDs.ShopScreen,this.screenIDs.StartScreen,this.screenIDs.LeaderBoardScreen]),w.NgcBuildConfig.buildPlatform===T.Utils.enumToString(_.PlatformID,_.PlatformID.Poki)&&(t=[this.screenIDs.ShopScreen,this.screenIDs.StartScreen,this.screenIDs.LeaderBoardScreen]),w.NgcBuildConfig.buildPlatform===T.Utils.enumToString(_.PlatformID,_.PlatformID.HUZ)&&(t=[this.screenIDs.ShopScreen,this.screenIDs.StartScreen]),w.NgcBuildConfig.offlineMode&&(t=[this.screenIDs.StartScreen,this.screenIDs.ShopScreen]),t.map(function(t){return cc.sys.isMobile?t:t===e.screenIDs.ShopScreen?e.screenIDs.ShopScreenPC:t===e.screenIDs.LeaderBoardScreen?e.screenIDs.LeaderBoardScreenPC:t})},t.prototype.screenPointcuts=function(){var t=e.prototype.screenPointcuts.call(this);return w.NgcBuildConfig.buildPlatform===T.Utils.enumToString(_.PlatformID,_.PlatformID.GameDistribution)&&(t=[O.NgcPointcuts.bannerShop,O.NgcPointcuts.bannerMainMenu,O.NgcPointcuts.bannerLeaderboard]),w.NgcBuildConfig.buildPlatform===T.Utils.enumToString(_.PlatformID,_.PlatformID.Poki)&&(t=[O.NgcPointcuts.bannerShop,O.NgcPointcuts.bannerMainMenu,O.NgcPointcuts.bannerLeaderboard]),w.NgcBuildConfig.buildPlatform===T.Utils.enumToString(_.PlatformID,_.PlatformID.HUZ)&&(t=[O.NgcPointcuts.bannerShop,O.NgcPointcuts.bannerMainMenu]),t},t.prototype.defaultPageOrder=function(){var e=this,t=[this.screenIDs.ShopScreen,this.screenIDs.LeaderBoardScreen,this.screenIDs.StartScreen,this.screenIDs.PWFScreen,this.screenIDs.PrizeScreen];return t.map(function(t){return cc.sys.isMobile?t:t===e.screenIDs.ShopScreen?e.screenIDs.ShopScreenPC:t===e.screenIDs.LeaderBoardScreen?e.screenIDs.LeaderBoardScreenPC:t})},t.prototype.gamePlayScreens=function(){return[a.GameScreen]},t.prototype.onBeforeInitPageview=function(){},t.prototype.onAfterInitPageview=function(){},t.prototype.disableAll=function(){},t.prototype.onTapDown=function(e){this.currentScreen&&this.currentScreen.onTapDown(e)},t.prototype.onTapUp=function(e){this.currentScreen&&this.currentScreen.onTapUp(e)},t.prototype.onKeyUp=function(e){this.currentScreen&&this.currentScreen.onKeyUp(e)},t.prototype.activateScreen=function(e){if(this.currentScreen){var t=0;e instanceof f.default&&(t=this.delayToGameScreen);var o=this.currentScreen;this.currentScreen=null,0==t?(y.default.inst.loadingNode.active=!1,o.activate(!1),o=null):this.scheduleOnce(function(){y.default.inst.loadingNode.active=!1,o.activate(!1),o=null},t)}e.activate(!0),this.currentScreen=e},t.prototype.goToStartScreen=function(e){void 0===e&&(e=p.TransitionType.FadeIn),this.switchScreen(this.screenIDs.StartScreen,e),c.NgcPartyRoomManager.mustGoToPartyRoom()||this.scheduleOnce(function(){N.NgcNavBarManager.inst.showAllNavBar(!0)},.5),this.scheduleOnce(function(){p.default.inst.tabBarInitState&&(p.default.inst.showTabBar(),C.NgcTabBarManager.inst.updateTabButtons(!1))},.5)},t.prototype.goToGameScreen=function(e){void 0===e&&(e=p.TransitionType.FadeIn),this.scheduleOnce(function(){N.NgcNavBarManager.inst.showAllNavBar(!1),o.inst.hideTabBar()},.25),_.NgcPlatform.inst&&_.NgcPlatform.inst.onStartGame(),this.switchScreen(this.screenIDs.GameScreen,e)},t.prototype.goToShopScreen=function(e){void 0===e&&(e=p.TransitionType.FadeIn),this.switchScreen(this.screenIDs.ShopScreen,e)},t.prototype.afterGoToLeaderBoardScreen=function(){S.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().needRefreshLeaderboard&&(S.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().refreshFilter(),S.NgcLeaderboardManager.inst.showLB(),S.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().needRefreshLeaderboard=!1),S.NgcLeaderboardManager.inst.checkShowBanner()},t.prototype.goToLeaderBoardScreen=function(){cc.sys.isMobile?this.switchScreen(this.screenIDs.LeaderBoardScreen):this.switchScreen(this.screenIDs.LeaderBoardScreenPC),this.afterGoToLeaderBoardScreen()},t.prototype.beforeGoToPartyScreen=function(){var e=s.NgcCountryFlagsManager.localCountry,t=new b.NgcPartyInfoBuilder;t.setPlayerName(v.default.localUserName).setCountry(e).setMaxPlayer(15).setMinPlayer(2).setPlayerNetID(g.default.inst.localPlayerNetID).setSkin(m.UserInfo.curSkin).setAvatarURL(v.default.avatarUrl).setLoginSocial(v.default.isUserLogined()).setNewUser(0==m.UserInfo.bestScore).setTimeDelayNextGame(5).setPrivate(!0).setAllowBot(!0).setAutoStartGame(!1).setJoinPayload({}).setStartPayload({}).setUpdatePayloadFuncion(function(){cc.log("Update start game payload");var e=I.default.inst.randomTrack();if(e){var o=P.default.ELIMINATED_ARR;0==o.length&&(o=[5,5]),t.setStartPayload({mapName:e.trackFile,eliminatedArr:o})}}).setStartGameFuncion(function(e){var t=e.payload.mapName;I.default.inst.setTrackByName(t);var o=e.payload.eliminatedArr;0==o.length&&(o=P.default.ELIMINATED_ARR),P.default.setElinimatedArr(o),cc.log("Call starting game"),y.default.inst.loadingNode.active=!0,d.NgcTelemetry.inst.LogEvent_BeginTimer("RoomFillingTime"),d.NgcTelemetry.inst.LogEvent_StartGame(),l.NgcNetStatsTracker.inst.beginSession(),console.log("Player clicked start @ "+(new Date).getTime()),h.Main.inst.setState(u.AppState.Game)}).setOnSocialCallBack(function(){}).setOnMultiLoginFuntion(function(){var e=v.default.gameRunningSession;cc.log("#key",e),cc.log("#UserInfo.sessionKey",v.default.sessionKey),e==v.default.sessionKey?(y.default.inst.resetData(!0,!0),cc.log("#Clear all save key because use different browser")):cc.log("#Do nothing because using the same browser")}),c.NgcPartyRoomManager.init(t)},t.prototype.afterGoToPartyScreen=function(){this.showTabBar(),this.scheduleOnce(function(){N.NgcNavBarManager.inst.showAllNavBar(!0)},1)},t.prototype.goToPartyScreen=function(){this.beforeGoToPartyScreen(),this.switchScreen(this.screenIDs.PWFScreen),this.afterGoToPartyScreen()},t.prototype.start=function(){},t.inst=null,o=i([E],t)}(p.default);o.default=A,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyInfoBuilder":"PartyInfoBuilder","../NanoGameCore/CrossFeatures/TabBar/Script/TabBarManager":"TabBarManager","../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../NanoGameCore/GameFramework/Scripts/Network/NetStatsTracker":"NetStatsTracker","../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/Services/Platform/Platform":"Platform","../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","./Game":"Game","./League/LeagueManager":"LeagueManager","./Main":"Main","./Network/NetClient":"NetClient","./Screens/GameScreen/GameScreen":"GameScreen","./Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","./Screens/StartScreen/StartMain":"StartMain","./UserInfo":"UserInfo"}],SectionBase:[function(e,t,o){"use strict";cc._RF.push(t,"9b211NFFUdBu6DjOxGIAYLz","SectionBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tmpNode=null,t.content=null,t}return r(t,e),t.prototype.show=function(e){e||(e=cc.find("Canvas")),this.node.parent=e,this.node.setPosition(0,-cc.winSize.height/2-this.node.height/2),this.node.runAction(cc.moveTo(.2,0,-cc.winSize.height/2+this.node.height/2))},t.prototype.hide=function(){var e=this;this.node.runAction(cc.sequence(cc.moveTo(.2,0,-cc.winSize.height/2-this.node.height/2),cc.delayTime(.2),cc.callFunc(function(){e.node.destroy()})))},i([s(cc.Node)],t.prototype,"tmpNode",void 0),i([s(cc.Node)],t.prototype,"content",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],SelectControlDialog:[function(e,t,o){"use strict";cc._RF.push(t,"3f8cbBvL3ZERrNuXigOI2LE","SelectControlDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),c=e("../../CustomControl"),s=e("../../Tracking/TrackingManager"),l=e("../../UserInfo"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleContainer=null,t.COLOR_UNCHECKED="#FFFFFF",t.COLOR_CHECKED="#B4CDE3",t._activeToggle=null,t._selectedControlType=null,t._controlTypeLog=null,t}return r(t,e),t.prototype.init=function(){this._selectedControlType=l.UserInfo.controlType;var e=this.getToggleIndex(this._selectedControlType);this._activeToggle=this.toggleContainer.toggleItems[e],this._activeToggle.isChecked=!0,this._activeToggle.node.color=this.node.color.fromHEX(this.COLOR_CHECKED),this.toggleContainer.allowSwitchOff=!1},t.prototype.OkOnClick=function(){this.applyChange(),this.closeOnClick()},t.prototype.closeOnClick=function(){this.hide()},t.prototype.onControlTypeSelected=function(e){var t=e.checkEvents[0].customEventData;"0"===t?(this._selectedControlType=c.ControlType.DIAGONAL_LEFT,this._controlTypeLog="diagonal_left"):"1"===t?(this._selectedControlType=c.ControlType.DIAGONAL_RIGHT,this._controlTypeLog="diagonal_right"):"2"===t?(this._selectedControlType=c.ControlType.CENTER,this._controlTypeLog="center"):"3"===t&&(this._selectedControlType=c.ControlType.STEERING_WHEEL_FREE,this._controlTypeLog="steering_wheel_free"),cc.log(this._activeToggle),this._activeToggle.node.color=this.node.color.fromHEX(this.COLOR_UNCHECKED),e.node.color=this.node.color.fromHEX(this.COLOR_CHECKED),this._activeToggle=e},t.prototype.getToggleIndex=function(e){switch(e){case c.ControlType.DIAGONAL_LEFT:return 0;case c.ControlType.DIAGONAL_RIGHT:return 1;case c.ControlType.CENTER:return 2;case c.ControlType.STEERING_WHEEL_FREE:return 3;case c.ControlType.UNDEFINED:return 2}},t.prototype.applyChange=function(){s.default.getInst().LogEvent_ControlChange(this._controlTypeLog),l.UserInfo.controlType=this._selectedControlType},t.urlPrefab="Prefabs/Dialogs/SelectControlDialog",t.bundleName="",t.dialogType="SelectcontrolDialog",i([d(cc.ToggleContainer)],t.prototype,"toggleContainer",void 0),i([p],t)}(a.NgcDialogBase);o.default=f,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../CustomControl":"CustomControl","../../Tracking/TrackingManager":"TrackingManager","../../UserInfo":"UserInfo"}],SelectLanguageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d5fc2/8PulKD7UUqF4h/TwW","SelectLanguageDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSelectLanguageDialog=void 0;var a=e("../../../../../Scripts/UserInfo"),c=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../../../Services/Telemetry/Telemetry"),l=e("../DialogBase"),u=e("./ItemSelectLanguage"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.selectedLang="",t.itemPrefab=null,t.content=null,t.items=[],t}return r(t,e),t.prototype.init=function(e){var t=this;this._callBackOk=e,c.NgcLocalizedManager.jsonData.forEach(function(e){if(e.enabled){var o=cc.instantiate(t.itemPrefab);o.parent=t.content;var n=o.getComponent(u.NgcItemSelectLanguage);n.setInfo(e.flag_url,e.name,e.code,e.code==a.UserInfo.curLanguage,function(o){t.selectedLang=o,t.items.forEach(function(t){t.isSelected=t.codeItem==e.code})}),t.items.push(n)}})},t.prototype.OkOnClick=function(){this.changeLanguageOnClick(this.selectedLang),this.closeOnClick()},t.prototype.closeOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.changeLanguageOnClick=function(e){c.NgcLocalizedManager.setLanguage(e),s.NgcTelemetry.inst.LogEvent_LanguageChanged({languageCode:e})},t.prototype.show=function(){e.prototype.show.call(this),s.NgcTelemetry.inst.LogEvent_EnterScreen("LanguageSelectScreen")},t.prototype.hide=function(){e.prototype.hide.call(this),s.NgcTelemetry.inst.LogEvent_ExitScreen("LanguageSelectScreen")},t.urlPrefab="SelectLanguage",t.bundleName="02_dialog",t.dialogType="NgcSelectLanguageDialog",i([f(cc.Prefab)],t.prototype,"itemPrefab",void 0),i([f(cc.Node)],t.prototype,"content",void 0),i([d],t)}(l.NgcDialogBase);o.NgcSelectLanguageDialog=h,cc._RF.pop()},{"../../../../../Scripts/UserInfo":"UserInfo","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../Services/Telemetry/Telemetry":"Telemetry","../DialogBase":"DialogBase","./ItemSelectLanguage":"ItemSelectLanguage"}],SelectionDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e0564XbuDdG/K/d2S6+AIS5","SelectionDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.content=null,t._callBackOk=null,t._callBackClose=null,t.listItem=[],t.listChosenItem=[],t}return r(t,e),t.prototype.init=function(e,t,o,n){var r=this;this._callBackOk=o,this._callBackClose=n,this.listItem=t,this.listChosenItem=[],this.content.removeAllChildren(),this.listItem.forEach(function(e){e.parent=r.content,e.on(cc.Node.EventType.TOUCH_START,function(){r.itemOnClick(e)},r)}),this.titleLabel.string=e},t.prototype.itemOnClick=function(e){-1==this.listChosenItem.indexOf(e)?(e.color=cc.Color.GREEN,this.listChosenItem.push(e)):(e.color=cc.Color.WHITE,cc.js.array.remove(this.listChosenItem,e))},t.prototype.okOnClick=function(){var e=this;"function"==typeof this._callBackOk&&(this.listChosenItem.length>0?this._callBackOk(this.listChosenItem,function(){e.hide()}):this.hide())},t.prototype.closeOnClick=function(){"function"==typeof this._callBackClose&&this._callBackClose(),this.hide()},i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Node)],t.prototype,"content",void 0),i([s],t)}(a.NgcDialogBase);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase"}],ServicesMgr:[function(e,t,o){"use strict";cc._RF.push(t,"9c09cZcXElCBpKx4mxpPxCw","ServicesMgr");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcServicesMgr=void 0;var r=e("./Ads/Ads"),i=e("./DailyReward/DailyReward"),a=e("./GameShop/GameShop"),c=e("./Inventory/Inventory"),s=e("./Leaderboard/Leaderboard"),l=e("./Social/Social"),u=e("./Telemetry/Telemetry"),p=e("./Platform/Platform"),d=e("./PartyRoom/PartyRoom"),f=e("./Ads/Ads_impl_GameDistributionSrv"),h=e("./PartyRoom/PartyRoom_impl_GameServerSrv"),g=e("./Leaderboard/Leaderboard_impl_NanoSrv"),y=e("./GameShop/GameShop_impl_NanoSrv"),m=e("./Platform/Platform_impl_GameDistributionSrv"),_=e("./Inventory/Inventory_impl_NanoSrv"),v=e("./Social/Social_impl_UplaySrv"),S=e("./Telemetry/Telemetry_impl_NullSrv"),N=e("./DailyReward/DailyReward_impl_NanoSrv"),b=e("../SDK/Nano/NanoSrv"),C=e("../SDK/Uplay/UplaySrv"),P=e("../SDK/GameDistribution/GameDistributionSrv"),I=cc._decorator,w=I.ccclass,T=(I.property,function(){function e(){}var t;return t=e,e.preInit=function(e){if(t.isInitialized)return new Promise(function(e){e("Services are already pre-initialized.")});var o=[];return r.NgcAds.srvInstances.push(new f.default),r.NgcAds.inst=r.NgcAds.srvInstances[0],r.NgcAds.srvInstances.forEach(function(e){return t.allServices.push(e)}),d.NgcPartyRoom.srvInstances.push(new h.default),d.NgcPartyRoom.inst=d.NgcPartyRoom.srvInstances[0],d.NgcPartyRoom.srvInstances.forEach(function(e){return t.allServices.push(e)}),s.NgcLeaderboard.srvInstances.push(new g.default),s.NgcLeaderboard.inst=s.NgcLeaderboard.srvInstances[0],s.NgcLeaderboard.srvInstances.forEach(function(e){return t.allServices.push(e)}),a.NgcGameShop.srvInstances.push(new y.default),a.NgcGameShop.inst=a.NgcGameShop.srvInstances[0],a.NgcGameShop.srvInstances.forEach(function(e){return t.allServices.push(e)}),p.NgcPlatform.srvInstances.push(new m.default),p.NgcPlatform.inst=p.NgcPlatform.srvInstances[0],p.NgcPlatform.srvInstances.forEach(function(e){return t.allServices.push(e)}),c.NgcInventory.srvInstances.push(new _.default),c.NgcInventory.inst=c.NgcInventory.srvInstances[0],c.NgcInventory.srvInstances.forEach(function(e){return t.allServices.push(e)}),l.NgcSocial.srvInstances.push(new v.default),l.NgcSocial.inst=l.NgcSocial.srvInstances[0],l.NgcSocial.srvInstances.forEach(function(e){return t.allServices.push(e)}),u.NgcTelemetry.srvInstances.push(new S.default),u.NgcTelemetry.inst=u.NgcTelemetry.srvInstances[0],u.NgcTelemetry.srvInstances.forEach(function(e){return t.allServices.push(e)}),i.NgcDailyReward.srvInstances.push(new N.default),i.NgcDailyReward.inst=i.NgcDailyReward.srvInstances[0],i.NgcDailyReward.srvInstances.forEach(function(e){return t.allServices.push(e)}),o.push((new b.default).preInit(e)),o.push((new C.default).preInit(e)),o.push((new P.default).preInit(e)),t.allServices.forEach(function(t){o.push(t.preInit(e.services))}),new Promise(function(e,n){var r=Promise.all(o);r.then(function(o){t.isPreInitialized=!0,console.log(o),e()}),r.catch(function(e){cc.error(e),n()})})},e.initServices=function(e){var o=this;if(!t.isPreInitialized)return new Promise(function(e,t){cc.error("ServicesMgr: calling initServices before preInitServices"),t()});if(t.isInitialized)return new Promise(function(e){e("Services are already initialized.")});t.buildConfig=e;var n=[];return n.push(b.default.inst.init(e)),n.push(C.default.inst.init(e)),n.push(P.default.inst.init(e)),t.allServices.forEach(function(t){n.push(t.init(e.services))}),new Promise(function(e,t){var r=Promise.all(n);r.then(function(n){if(console.log(n),o.isInitialized=!0,p.NgcPlatform.isOfflineMode())o.isLoggedIn=!0,e();else{var r=o.loginSDKs();r.then(function(t){console.log(t),o.isLoggedIn=!0,e()}),r.catch(function(e){cc.error(e),t(e)})}}),r.catch(function(e){cc.error(e),t(e)})})},e.loginSDKs=function(){if(t.isLoggedIn)return new Promise(function(e){return e()});var e=[];return null!==b.default.inst&&e.push(b.default.inst.login()),Promise.all(e)},e.allServices=[],e.isPreInitialized=!1,e.isInitialized=!1,e.isLoggedIn=!1,e.buildConfig=null,t=n([w],e)}());o.NgcServicesMgr=T,cc._RF.pop()},{"../SDK/GameDistribution/GameDistributionSrv":"GameDistributionSrv","../SDK/Nano/NanoSrv":"NanoSrv","../SDK/Uplay/UplaySrv":"UplaySrv","./Ads/Ads":"Ads","./Ads/Ads_impl_GameDistributionSrv":"Ads_impl_GameDistributionSrv","./DailyReward/DailyReward":"DailyReward","./DailyReward/DailyReward_impl_NanoSrv":"DailyReward_impl_NanoSrv","./GameShop/GameShop":"GameShop","./GameShop/GameShop_impl_NanoSrv":"GameShop_impl_NanoSrv","./Inventory/Inventory":"Inventory","./Inventory/Inventory_impl_NanoSrv":"Inventory_impl_NanoSrv","./Leaderboard/Leaderboard":"Leaderboard","./Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","./PartyRoom/PartyRoom":"PartyRoom","./PartyRoom/PartyRoom_impl_GameServerSrv":"PartyRoom_impl_GameServerSrv","./Platform/Platform":"Platform","./Platform/Platform_impl_GameDistributionSrv":"Platform_impl_GameDistributionSrv","./Social/Social":"Social","./Social/Social_impl_UplaySrv":"Social_impl_UplaySrv","./Telemetry/Telemetry":"Telemetry","./Telemetry/Telemetry_impl_NullSrv":"Telemetry_impl_NullSrv"}],Service:[function(e,t,o){"use strict";cc._RF.push(t,"05418DwWwxI1pnXUSUuSlpt","Service"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcService=void 0;var n=cc._decorator,r=(n.ccclass,n.property,function(){});o.NgcService=r,cc._RF.pop()},{}],ShareDialog:[function(e,t,o){"use strict";cc._RF.push(t,"6d4dcmqRsxAx6nb0pl7yDKf","ShareDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),s=e("../../Tracking/TrackingManager"),l=e("../../Utils/Util"),u=cc._decorator,p=u.ccclass,d=u.property;(function(e){e[e.Native=0]="Native",e[e.Facebook=1]="Facebook",e[e.Email=2]="Email",e[e.Twitter=3]="Twitter"})(a||(a={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameTitle="TrackMania Blitz",t.url="https://nano.ubisoft.com/RabbidsWildRace/index.html?share=true",t.description="Play free live multiplayer games with Ubisoft Nano!",t.alertTextNode=null,t}return r(t,e),t.prototype.onButtonFaceBookClick=function(){var e="https://www.facebook.com/sharer/sharer.php?u=";e+=this.url,cc.sys.openURL(e),s.default.getInst().LogEvent_ShareCompletion(l.default.enumToString(a,a.Facebook))},t.prototype.onButtonTwitterClick=function(){var e="https://twitter.com/intent/tweet?text=";e+=this.description+" "+this.url,cc.sys.openURL(e),s.default.getInst().LogEvent_ShareCompletion(l.default.enumToString(a,a.Twitter))},t.prototype.onButtonEmailClick=function(){var e="mailto:example@website.com?subject=";e+=this.gameTitle+"&body=",e+=this.description+" "+this.url,window.location.href=e,s.default.getInst().LogEvent_ShareCompletion(l.default.enumToString(a,a.Email))},t.prototype.onButtonCopyClick=function(){navigator.clipboard.writeText(this.url),cc.tween(this.alertTextNode).to(.25,{opacity:255}).delay(1.5).to(.25,{opacity:0}).start()},t.prototype.shareNative=function(){navigator.share({title:this.gameTitle,url:this.url,text:this.description}).then(function(){console.log("Share was successful."),s.default.getInst().LogEvent_ShareCompletion(l.default.enumToString(a,a.Native))}).catch(function(e){console.log("Sharing failed",e)})},t.prototype.show=function(t){s.default.getInst().LogEvent_InitShare(),cc.sys.isMobile&&navigator.share?(this.shareNative(),this.hide()):e.prototype.show.call(this,t)},t.prototype.init=function(){},i([d],t.prototype,"gameTitle",void 0),i([d],t.prototype,"url",void 0),i([d],t.prototype,"description",void 0),i([d(cc.Node)],t.prototype,"alertTextNode",void 0),i([p],t)}(c.NgcDialogBase);o.default=f,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../Tracking/TrackingManager":"TrackingManager","../../Utils/Util":"Util"}],ShopScreen:[function(t,o,n){"use strict";cc._RF.push(o,"6c06asEhTBLjr6R92gTrPpI","ShopScreen");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ShopScreen=void 0;var l=t("../../../globals"),u=t("../../../NanoGameCore/CrossFeatures/ItemShop/Script/ItemContainer"),p=t("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),d=t("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),f=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),h=t("../../../NanoGameCore/GameFramework/Scripts/NgcItemInfoManager"),g=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),y=t("../../../NanoGameCore/GameFramework/Scripts/NgcShopManager"),m=t("../../../NanoGameCore/Services/Ads/Ads"),_=t("../../../NanoGameCore/Services/Telemetry/Telemetry"),v=t("../../CarSelector/CarSkinSelecter"),S=t("../../UserInfo"),N=t("../StartScreen/StartMain"),b=t("./PreviewSkin"),C=cc._decorator,P=C.ccclass,I=C.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemContainerPrefab=null,t.itemContainerParent=null,t.editBox=null,t.playerParent=null,t.player=null,t.coinNumber=null,t.starNumber=null,t.previewSkin=null,t._itemContainer=null,t._shopManager=null,t._previewSkin=null,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.inst=this;var t=cc.instantiate(this.itemContainerPrefab);this.itemContainerParent.addChild(t),this._itemContainer=t.getComponent(u.ItemContainer),this._shopManager=y.NgcShopManager.getInstance(),this._shopManager.setUI(this._itemContainer),this._shopManager.registerCurrencyUpdate(["coin"],this.onCurrencyUpdate_NGCExample.bind(this)),this._shopManager.registerItemPreviewCallback(this.onItemPreview_NGCExample.bind(this)),this._shopManager.registerItemEquipCallback(this.onItemEquip_NGCExample.bind(this)),this._previewSkin=S.UserInfo.curSkin,e.prototype.onLoad.call(this),this.setSocialLoginCallback()},t.prototype.setSocialLoginCallback=function(){cc.systemEvent.on("refreshShop",this.onSocialCallBack.bind(this))},t.prototype.onSocialCallBack=function(e,t){return c(this,void 0,void 0,function(){var e=this;return s(this,function(){return cc.error("onSocialCallBack",t),"close"===t?[2]:(h.NgcItemInfoManager.getInstance().clearSaveEquippedItemList(),this._shopManager.IsInitialized&&this._shopManager.loadData(!1,function(){e.onAfterReloadShopDataAfterSocialCallback()}),[2])})})},t.prototype.onAfterReloadShopDataAfterSocialCallback=function(){this._previewSkin=S.UserInfo.curSkin,this.onItemPreview_NGCExample(this._previewSkin),this._itemContainer.reselectCurrentTab(),this._shopManager.updateEquippedItemList([S.UserInfo.curSkin])},t.prototype.onActivate=function(){_.NgcTelemetry.inst.LogEvent_EnterScreen("ItemShop"),this._shopManager.IsInitialized&&this._shopManager.updateShop(),this.checkShowBanner(),this.setSocialLoginCallback(),this._itemContainer.resizeContent(),this._shopManager.updateEquippedItemList([S.UserInfo.curSkin])},t.prototype.onResume=function(){var e;_.NgcTelemetry.inst.LogEvent_EnterScreen("ItemShop"),this._shopManager.IsInitialized&&this._shopManager.updateShop(),null===(e=this._shopManager)||void 0===e||e.resetItemClickCounter(),this.checkShowBanner(),this._itemContainer.resizeContent()},t.prototype.onEditBoxChanged=function(){cc.log("Edit Box text = ",this.editBox.string);var e=parseInt(this.editBox.string);isNaN(e)||this._shopManager.setNumberOfItemInRow(e)},t.prototype.checkShowBanner=function(){var e,t;d.default.inst.isAdsPoincutAvailable(d.NgcPointcuts.bannerShop,m.AdsType.Banner)?null===(e=d.default.inst)||void 0===e||e.showBanner(d.NgcPointcuts.bannerShop):null===(t=d.default.inst)||void 0===t||t.hide()},t.prototype.onCurrencyUpdate_NGCExample=function(e){var t=e.find(function(e){return"coin"===e.itemID});this.coinNumber.string=t.count.toString(),S.UserInfo.curCoin=t.count,N.default.inst&&(N.default.inst.curCoin=t.count)},t.prototype.onItemPreview_NGCExample=function(e){this.previewSkin.showPreview(e);var t="TMB_"+e.toUpperCase();this.previewSkin.node.getChildByName("carNameBg").getChildByName("carNameLB").getComponent(f.NgcLabelLocalized).setLocalizedText(t)},t.prototype.onItemEquip_NGCExample=function(e){this._shopManager.unequipItem(S.UserInfo.curSkin),S.UserInfo.curSkin=e,v.default.inst.scrollToCurrentSkin()},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:this.handleBackKey()}},t.prototype.handleBackKey=function(){p.NgcNavBarManager.inst&&p.NgcNavBarManager.inst.onQuitGame()},a([I(cc.Prefab)],t.prototype,"itemContainerPrefab",void 0),a([I(cc.Node)],t.prototype,"itemContainerParent",void 0),a([I(cc.EditBox)],t.prototype,"editBox",void 0),a([I(cc.Node)],t.prototype,"playerParent",void 0),a([I(cc.Sprite)],t.prototype,"player",void 0),a([I(cc.Label)],t.prototype,"coinNumber",void 0),a([I(cc.Label)],t.prototype,"starNumber",void 0),a([I(b.default)],t.prototype,"previewSkin",void 0),o=a([P],t)}(g.default);n.ShopScreen=w,l.default.ShopScreen=w,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/ItemShop/Script/ItemContainer":"ItemContainer","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../../globals":"globals","../../CarSelector/CarSkinSelecter":"CarSkinSelecter","../../UserInfo":"UserInfo","../StartScreen/StartMain":"StartMain","./PreviewSkin":"PreviewSkin"}],Shop:[function(t,o,n){"use strict";cc._RF.push(o,"1e1aa26ppRO1J0tPcos7ZQR","Shop");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l,u,p=t("../../../NanoGameCore/Core/Utils"),d=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),f=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),h=t("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),g=t("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),y=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),m=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),_=t("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),v=t("../../../NanoGameCore/Services/Ads/Ads"),S=t("../../../NanoGameCore/Services/Inventory/Inventory"),N=t("../../../NanoGameCore/Services/Telemetry/Telemetry"),b=t("../../Main"),C=t("../../ScreenManager"),P=t("../../SoundManager"),I=t("../../Tracking/TrackingManager"),w=t("../../UI/DigitCountUp"),T=t("../../UserInfo"),O=t("../../Utils/ConstConfig"),R=t("./Item"),E=cc._decorator,A=E.ccclass,D=E.property;(function(e){e[e.Hat=0]="Hat",e[e.Glasses=1]="Glasses",e[e.Dress=2]="Dress"})(l||(l={})),function(e){e[e.Mobile=0]="Mobile",e[e.Desktop=1]="Desktop"}(u||(u={}));var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goldCoundUp=[null,null],t._curGold=0,t.HatItems=null,t.GlassesItems=null,t.DressItems=null,t.HatIcon=null,t.GlassesIcon=null,t.DressIcon=null,t.scrollView=null,t.itemPriceLabel=null,t.videoRewardCoinLb=[null,null],t.videoRewardCoinIcon=[null,null],t.userCoinIcon=[null,null],t.videoAdsBtn=[null,null],t.grounds=[null,null],t.wardrobeNode=[null,null],t.goldNodes=[null,null],t.messageDialog=null,t.curDeviceType=null,t.WardrobeNode=null,t.ItemsNode=null,t.ItemPrefab=null,t.ItemList=null,t.curHat=null,t.curGlasses=null,t.curDress=null,t.itemSelected=null,t.ItemBuying=null,t.IB_singleColor=null,t.IB_beams=null,t.IB_locked=null,t.IB_big_uncovered=null,t.ItemBuyingSprite=null,t.loadingNode=null,t.backButtonWidget=[null,null],t.scratching=!1,t.hats=[],t.glasses=[],t.dresses=[],t.itemLoaded=!1,t.ITEM_MOBILE_WIDGET_BOTTOM=50,t.ITEM_DESKTOP_WIDGET_BOTTOM=150,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"curGold",{get:function(){return this._curGold},set:function(e){this.goldCoundUp[this.curDeviceType].countFrom(this._curGold,e,1),this._curGold=e,T.UserInfo.curCoin=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curItemType",{get:function(){return this._curItemType},set:function(e){this._curItemType=e,this.HatItems.active=e==l.Hat,this.GlassesItems.active=e==l.Glasses,this.DressItems.active=e==l.Dress,this.HatIcon.runAction(cc.scaleTo(.1,e==l.Hat?1.2:.8)),this.GlassesIcon.runAction(cc.scaleTo(.1,e==l.Glasses?1.2:.8)),this.DressIcon.runAction(cc.scaleTo(.1,e==l.Dress?1.2:.8))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(null!=o.inst)return console.error("More than one Shop inst created"),this.itemLoaded=!1,this.checkDeviceType(),void this.loadItems();o.inst=this,this.itemLoaded=!1,this.checkDeviceType(),this.loadItems()},t.prototype.start=function(){},t.prototype.onDeactivate=function(){var e;b.Main.setAppContext(b.AppContext.MainMenu),N.NgcTelemetry.inst.LogEvent_EndTimer("ShopScreenTime",!0),null===(e=h.default.inst)||void 0===e||e.hide(h.NgcPointcuts.bannerShop)},t.prototype.onActivate=function(){var e,t=this;b.Main.setAppContext(b.AppContext.ItemsShopScreen),N.NgcTelemetry.inst.LogEvent_BeginTimer("ShopScreenTime"),P.default.inst.playSound(P.default.inst.AudioClips.OpenShopClip),this.curItemType=l.Hat,this.WardrobeNode.y=this.WardrobeNode.height/2+this.WardrobeNode.parent.height/2,this.ItemsNode.y=-this.ItemsNode.height/2-this.ItemsNode.parent.height/2,cc.tween(this.WardrobeNode).by(.2,{x:0,y:-200},{easing:"sineOutIn"}).start(),cc.tween(this.ItemsNode).by(.2,{x:0,y:this.ItemsNode.height+60},{easing:"sineOutIn"}).start(),S.NgcInventory.inst.getItemCount(O.ConstConfig.INVENTORY.ITEM_ID.COIN,function(e,o){o&&(t.curGold=o.count)}),N.NgcTelemetry.inst.LogEvent_EnterScreen(b.Main.getAppContextName()),this.itemPriceLabel.string=""+O.ConstConfig.SHOP.UNLOCK_ITEM_PRICE,this.videoRewardCoinLb[this.curDeviceType].string="+"+O.ConstConfig.PARAMS.COIN_BONUS_VIDEO_REWARD,this.videoAdsBtn[this.curDeviceType].active=v.NgcAds.inst&&v.NgcAds.inst.adsIsAvailable(v.AdsType.VideoReward),cc.view.setResizeCallback(function(){t.resizeContent()}),this.backButtonWidget.forEach(function(e){return e.node.active=!m.default.inst.tabBarIsActive}),h.default.inst.isAdsPoincutAvailable(h.NgcPointcuts.bannerShop,v.AdsType.Banner)?(m.default.inst.showBanner(),null===(e=h.default.inst)||void 0===e||e.showBanner(h.NgcPointcuts.bannerShop)):m.default.inst.hideBanner(),this.resizeContent()},t.prototype.resizeContent=function(){var e=cc.view.getFrameSize().height/960;if(e<=1){this.backButtonWidget[this.curDeviceType].top=110/e,this.backButtonWidget[this.curDeviceType].updateAlignment();var t=this.userCoinIcon[this.curDeviceType].parent.getComponent(cc.Widget);t.top=120/e,t.updateAlignment();var o=this.videoAdsBtn[this.curDeviceType].getComponent(cc.Widget);o.top=t.top+70,o.updateAlignment(),cc.log("videoAdsWidget.top",o.top)}},t.prototype.loadItems=function(e){var t=this;if(this.itemLoaded)e&&e();else{this.goldCoundUp[this.curDeviceType].countFrom(this._curGold,T.UserInfo.curCoin,1),this._curGold=T.UserInfo.curCoin;var o=T.UserInfo.itemsBought;this.resetAllItems(),cc.loader.loadResDir("Texture/shop_items",cc.SpriteFrame,function(n,r){t.ItemList.json.Hat.forEach(function(e){var n=cc.instantiate(t.ItemPrefab),i=n.getComponent(R.default),a=o.Hat.indexOf(e.skinName)>=0;r.forEach(function(o){o.name!=e.name||i.setInfo(l.Hat,o,e.name,e.skinName,e.price,a,!1,function(){t.itemOnClick(i)})}),n.parent=t.HatItems,t.hats.push(i)}),t.ItemList.json.Glasses.forEach(function(e){var n=cc.instantiate(t.ItemPrefab),i=n.getComponent(R.default),a=o.Glasses.indexOf(e.skinName)>=0;r.forEach(function(o){o.name!=e.name||i.setInfo(l.Glasses,o,e.name,e.skinName,e.price,a,!1,function(){t.itemOnClick(i)})}),n.parent=t.GlassesItems,t.glasses.push(i)}),t.ItemList.json.Dress.forEach(function(e){var n=cc.instantiate(t.ItemPrefab),i=n.getComponent(R.default),a=o.Dress.indexOf(e.skinName)>=0;r.forEach(function(o){o.name!=e.name||i.setInfo(l.Dress,o,e.name,e.skinName,e.price,a,!1,function(){t.itemOnClick(i)})}),n.parent=t.DressItems,t.dresses.push(i)}),t.itemLoaded=!0,e&&e()})}},t.prototype.changeItemType=function(e,t){this.curItemType=l[t],P.default.inst.playSound(P.default.inst.AudioClips.WardrobeSelectClip)},t.prototype.backOnClick=function(){P.default.inst.playSound(P.default.inst.AudioClips.WardrobeSelectClip),C.default.inst.goToStartScreen()},t.prototype.itemOnClick=function(e){var t=this;if(e.isUsing)P.default.inst.playSound(P.default.inst.AudioClips.WardrobeSelectClip);else if(e.isBought)this.changeItem(e),P.default.inst.playSound(P.default.inst.AudioClips.WardrobeSelectClip);else if(this.curGold>=O.ConstConfig.SHOP.UNLOCK_ITEM_PRICE){this.curGold-=O.ConstConfig.SHOP.UNLOCK_ITEM_PRICE,T.UserInfo.curCoin-=O.ConstConfig.SHOP.UNLOCK_ITEM_PRICE,this.loadingNode.active=!0;var o=[{itemID:O.ConstConfig.INVENTORY.ITEM_ID.COIN,count:-O.ConstConfig.SHOP.UNLOCK_ITEM_PRICE},{itemID:e.nameItem,count:1}];S.NgcInventory.inst.addItemList(o,function(){t.loadingNode.active=!1}),this.ItemBuying.active=!0,this.IB_singleColor.opacity=200,this.IB_beams.opacity=255,this.IB_locked.y=0,this.IB_big_uncovered.setPosition(0,0),this.IB_big_uncovered.setScale(1),this.ItemBuyingSprite.node.setPosition(0,0),this.ItemBuyingSprite.spriteFrame=e.Icon.spriteFrame,this.itemSelected=e;var n=T.UserInfo.itemsBought;switch(e.itemType){case l.Hat:n.Hat.push(e.skinName);break;case l.Glasses:n.Glasses.push(e.skinName);break;case l.Dress:n.Dress.push(e.skinName)}T.UserInfo.itemsBought=n;var r=n.Dress.length+n.Glasses.length+n.Hat.length;I.default.inst.LogEvent_BuyItem(e.itemTypeAsString,e.nameItem,1,r,T.UserInfo.curCoin,T.UserInfo.curStars,O.ConstConfig.COIN,O.ConstConfig.SHOP.UNLOCK_ITEM_PRICE,!1)}else P.default.inst.playSound(P.default.inst.AudioClips.WardrobeNegClip)},t.prototype.scratchClick=function(){var e=this;if(P.default.inst.playSound(P.default.inst.AudioClips.UnlockItemClip),this.IB_big_uncovered.setPosition(0,0),this.IB_big_uncovered.setScale(1),!this.scratching){this.scratching=!0;var t=this.ItemBuying.convertToNodeSpaceAR(this.itemSelected.node.convertToWorldSpaceAR(cc.v2(0,0))),o=cc.sequence(cc.callFunc(function(){e.IB_singleColor.runAction(cc.fadeOut(.2)),e.IB_beams.runAction(cc.fadeOut(.2))}),cc.delayTime(.2),cc.callFunc(function(){e.IB_locked.runAction(cc.moveBy(.3,0,-300))}),cc.delayTime(.3),cc.callFunc(function(){e.IB_big_uncovered.runAction(cc.spawn(cc.rotateBy(.3,360),cc.scaleTo(.3,.33),cc.jumpTo(.3,t,200,1)))}),cc.delayTime(.3),cc.callFunc(function(){e.ItemBuying.active=!1,e.itemSelected.isBought=!0,e.changeItem(e.itemSelected),e.scratching=!1}));this.ItemBuying.runAction(o)}},t.prototype.buyGoldOnClick=function(){return c(this,void 0,void 0,function(){return s(this,function(){return[2]})})},t.prototype.changeItem=function(){},t.prototype.unlockItemOnClick=function(e){return c(this,void 0,void 0,function(){var t,o,n,r,i,a,c,u=this;return s(this,function(s){switch(s.label){case 0:switch(t=null,o=[],this.curItemType){case l.Dress:t=this.dresses;break;case l.Glasses:t=this.glasses;break;case l.Hat:t=this.hats}return t.forEach(function(e){u.curGold>=O.ConstConfig.SHOP.UNLOCK_ITEM_PRICE&&!e.isBought&&o.push(e)}),o.length>0?(n=p.Utils.randomArr(o),this.itemOnClick(n),r=n.node.parent.height/2,(i=1-.5*(r-n.node.y)/r)>1&&(i=1),i<0&&(i=0),this.scrollView.scrollToPercentVertical(i,.5),[3,3]):[3,1];case 1:return P.default.inst.playSound(P.default.inst.AudioClips.WardrobeNegClip),this.messageDialog&&this.messageDialog.isValid&&this.messageDialog.destroy(),[4,f.NgcDialogManager.createDialog(d.NgcMessageDialog.dialogType,d.NgcMessageDialog.urlPrefab,d.NgcMessageDialog.bundleName)];case 2:a=s.sent(),(c=a.getComponent(d.NgcMessageDialog)).init("NOT_ENOUGH_GOLD"),this.messageDialog=c.node,c.show(null,e.target,null,null),s.label=3;case 3:return[2]}})})},t.prototype.adsOnClick=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r,i=this;return s(this,function(a){switch(a.label){case 0:return v.NgcAds.inst.waitingNewVideo?(e=g.NgcBuildConfig.services.Ads.timeWaitNewVideo-(Date.now()-v.NgcAds.inst.timeStartWaitNewVideo)/1e3,e=Math.round(e),this.messageDialog&&this.messageDialog.isValid&&this.messageDialog.destroy(),[4,f.NgcDialogManager.createDialog(d.NgcMessageDialog.dialogType,d.NgcMessageDialog.urlPrefab,d.NgcMessageDialog.bundleName)]):[3,2];case 1:return t=a.sent(),(o=t.getComponent(d.NgcMessageDialog)).init("ADS_COOLDOWN"),this.messageDialog=o.node,o.show(null,this.videoAdsBtn[this.curDeviceType],null,10),[2];case 2:return _.default.updateAdsInfo(),n=function(){P.default.inst.stopMusic()},r=function(e,t,o){return c(i,void 0,void 0,function(){var t,n,r;return s(this,function(i){switch(i.label){case 0:return P.default.inst.playStartScreenMusic(),e?[3,3]:o?(t=g.NgcBuildConfig.services.Ads.timeWaitNewVideo-(Date.now()-o)/1e3,t=Math.round(t),[4,f.NgcDialogManager.createDialog(d.NgcMessageDialog.dialogType,d.NgcMessageDialog.urlPrefab,d.NgcMessageDialog.bundleName)]):[3,2];case 1:n=i.sent(),(r=n.getComponent(d.NgcMessageDialog)).init("ADS_COOLDOWN"),r.labelLocalized.string=r.labelLocalized.string.replace("xxs",t+"s"),r.show(null,this.videoAdsBtn[this.curDeviceType],null,10),i.label=2;case 2:return[2];case 3:return this.curGold+=O.ConstConfig.PARAMS.COIN_BONUS_VIDEO_REWARD,p.Utils.getWorldPos(this.videoRewardCoinIcon[this.curDeviceType]),S.NgcInventory.inst.addItem(O.ConstConfig.INVENTORY.ITEM_ID.COIN,O.ConstConfig.PARAMS.COIN_BONUS_VIDEO_REWARD,function(){}),[2]}})})},h.default.inst.showRewardVideo(h.NgcPointcuts.videoShopReward,O.ConstConfig.INVENTORY.ITEM_ID.COIN,O.ConstConfig.PARAMS.COIN_BONUS_VIDEO_REWARD,n,r),[2]}})})},t.prototype.resetAllItems=function(){this.HatItems.destroyAllChildren(),this.GlassesItems.destroyAllChildren(),this.DressItems.destroyAllChildren(),this.hats=[],this.glasses=[],this.dresses=[],this.curGlasses=null,this.curHat=null,this.curDress=null},t.prototype.checkDeviceType=function(){this.curDeviceType=cc.sys.isMobile?u.Mobile:u.Desktop,this.goldCoundUp[u.Desktop].node.active=this.curDeviceType===u.Desktop,this.goldCoundUp[u.Mobile].node.active=this.curDeviceType===u.Mobile,this.videoRewardCoinLb[u.Desktop].node.active=this.curDeviceType===u.Desktop,this.videoRewardCoinLb[u.Mobile].node.active=this.curDeviceType===u.Mobile,this.videoRewardCoinIcon[u.Desktop].active=this.curDeviceType===u.Desktop,this.videoRewardCoinIcon[u.Mobile].active=this.curDeviceType===u.Mobile,this.userCoinIcon[u.Desktop].active=this.curDeviceType===u.Desktop,this.userCoinIcon[u.Mobile].active=this.curDeviceType===u.Mobile,this.videoAdsBtn[u.Desktop].active=this.curDeviceType===u.Desktop,this.videoAdsBtn[u.Mobile].active=this.curDeviceType===u.Mobile,this.backButtonWidget[u.Desktop].node.active=this.curDeviceType===u.Desktop,this.backButtonWidget[u.Mobile].node.active=this.curDeviceType===u.Mobile,this.grounds[u.Desktop].active=this.curDeviceType===u.Desktop,this.grounds[u.Mobile].active=this.curDeviceType===u.Mobile,this.wardrobeNode[u.Desktop].active=this.curDeviceType===u.Desktop,this.wardrobeNode[u.Mobile].active=this.curDeviceType===u.Mobile,this.goldNodes[u.Desktop].active=this.curDeviceType===u.Desktop,this.goldNodes[u.Mobile].active=this.curDeviceType===u.Mobile,this.ItemsNode.getComponent(cc.Widget).bottom=this.curDeviceType===u.Mobile?this.ITEM_MOBILE_WIDGET_BOTTOM:this.ITEM_DESKTOP_WIDGET_BOTTOM,this.ItemsNode.getComponent(cc.Widget).updateAlignment()},t.inst=null,a([D(w.default)],t.prototype,"goldCoundUp",void 0),a([D(cc.Node)],t.prototype,"HatItems",void 0),a([D(cc.Node)],t.prototype,"GlassesItems",void 0),a([D(cc.Node)],t.prototype,"DressItems",void 0),a([D(cc.Node)],t.prototype,"HatIcon",void 0),a([D(cc.Node)],t.prototype,"GlassesIcon",void 0),a([D(cc.Node)],t.prototype,"DressIcon",void 0),a([D(cc.ScrollView)],t.prototype,"scrollView",void 0),a([D(cc.Label)],t.prototype,"itemPriceLabel",void 0),a([D(cc.Label)],t.prototype,"videoRewardCoinLb",void 0),a([D(cc.Node)],t.prototype,"videoRewardCoinIcon",void 0),a([D(cc.Node)],t.prototype,"userCoinIcon",void 0),a([D(cc.Node)],t.prototype,"videoAdsBtn",void 0),a([D(cc.Node)],t.prototype,"grounds",void 0),a([D(cc.Node)],t.prototype,"wardrobeNode",void 0),a([D(cc.Node)],t.prototype,"goldNodes",void 0),a([D(cc.Node)],t.prototype,"WardrobeNode",void 0),a([D(cc.Node)],t.prototype,"ItemsNode",void 0),a([D(cc.Prefab)],t.prototype,"ItemPrefab",void 0),a([D(cc.JsonAsset)],t.prototype,"ItemList",void 0),a([D(cc.Node)],t.prototype,"ItemBuying",void 0),a([D(cc.Node)],t.prototype,"IB_singleColor",void 0),a([D(cc.Node)],t.prototype,"IB_beams",void 0),a([D(cc.Node)],t.prototype,"IB_locked",void 0),a([D(cc.Node)],t.prototype,"IB_big_uncovered",void 0),a([D(cc.Sprite)],t.prototype,"ItemBuyingSprite",void 0),a([D(cc.Node)],t.prototype,"loadingNode",void 0),a([D(cc.Widget)],t.prototype,"backButtonWidget",void 0),o=a([A],t)}(y.default);n.default=k,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../Main":"Main","../../ScreenManager":"ScreenManager","../../SoundManager":"SoundManager","../../Tracking/TrackingManager":"TrackingManager","../../UI/DigitCountUp":"DigitCountUp","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","./Item":"Item"}],SingleItemAsset:[function(e,t,o){"use strict";cc._RF.push(t,"72e39wQDbBDS4o+M2u8/WTL","SingleItemAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemAsset=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundUnlockedBrandNew=null,t.backgroundUnlockedUnselected=null,t.backgroundUnlockedSelected=null,t.backgroundLockedUnselected=null,t.backgroundLockedSelected=null,t.flashAnimation=null,t}return r(t,e),Object.defineProperty(t.prototype,"EnableFlash",{set:function(e){this.flashAnimation.node.active=e,e?this.flashAnimation.play():this.flashAnimation.stop()},enumerable:!1,configurable:!0}),i([s(cc.SpriteFrame)],t.prototype,"backgroundUnlockedBrandNew",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundUnlockedUnselected",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundUnlockedSelected",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundLockedUnselected",void 0),i([s(cc.SpriteFrame)],t.prototype,"backgroundLockedSelected",void 0),i([s(cc.Animation)],t.prototype,"flashAnimation",void 0),i([c],t)}(cc.Component);o.SingleItemAsset=l,cc._RF.pop()},{}],SingleItemType1:[function(e,t,o){"use strict";cc._RF.push(t,"268d8fPIVNHB4NOtq+3G3mO","SingleItemType1");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemType1=void 0;var a=e("./SingleItem"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"type1"},i([s],t)}(a.SingleItem));o.SingleItemType1=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItemType2:[function(e,t,o){"use strict";cc._RF.push(t,"ce75cAOLatG8rzXR2HAnP5U","SingleItemType2");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemType2=void 0;var a=e("./SingleItem"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"type2"},i([s],t)}(a.SingleItem));o.SingleItemType2=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItemType3:[function(e,t,o){"use strict";cc._RF.push(t,"f31famkdhFIIKA7ux9JlWqS","SingleItemType3");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemType3=void 0;var a=e("./SingleItem"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"type3"},i([s],t)}(a.SingleItem));o.SingleItemType3=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItem:[function(e,t,o){"use strict";cc._RF.push(t,"58916PnGttEgadq51DTd0fj","SingleItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItem=void 0;var a=e("../../../../Core/ResizableComponent"),c=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcShopManager"),l=e("../AssetComponent/SingleItemAsset"),u=e("../ItemStatus/ItemStatus"),p=e("./ItemShop"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.itemInfoLayout=null,t.itemPicture=null,t.itemName=null,t.purchaseMethodParent=null,t._singleItemAsset=null,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._singleItemAsset=this.node.getComponent(l.SingleItemAsset),this.initItemPictureDesignSize(),this.initItemInfoLayoutDesignPosition()},t.prototype.initItemPictureDesignSize=function(){var e=a.ResizableComponent.getResizableComponent(this.itemPicture.node);e.baseSize&&(e.baseSize.designWidth=this.itemPicture.node.width,e.baseSize.designHeight=this.itemPicture.node.height)},t.prototype.initItemInfoLayoutDesignPosition=function(){if(this.itemInfoLayout){var e=a.ResizableComponent.getResizableComponent(this.itemInfoLayout);e.baseSize.designX=this.itemInfoLayout.x,e.baseSize.designY=this.itemInfoLayout.y}},t.prototype.childUpdateInfo=function(){this.updateBackground(),this.updateSpriteFrame(),this.updateItemName(),this.updatePurchaseMethodType()},t.prototype.childSelect=function(){this.updateBackground()},t.prototype.updateBackground=function(){this.updateNormalBackground(),this.updateBrandNewBackground(),this.checkRemoveBrandNewItem()},t.prototype.updateNormalBackground=function(){this.ItemInfo.isBought?this.background.spriteFrame=this._isSelected?this._singleItemAsset.backgroundUnlockedSelected:this._singleItemAsset.backgroundUnlockedUnselected:this.background.spriteFrame=this._isSelected?this._singleItemAsset.backgroundLockedSelected:this._singleItemAsset.backgroundLockedUnselected},t.prototype.updateBrandNewBackground=function(){var e=this.ItemInfo.isBrandNew&&0==this._isSelected;e&&(this.background.spriteFrame=this._singleItemAsset.backgroundUnlockedBrandNew),this._singleItemAsset.EnableFlash=e},t.prototype.checkRemoveBrandNewItem=function(){this.ItemInfo.isBrandNew&&this._isSelected&&s.NgcShopManager.getInstance().removeBrandItem(this.ItemInfo.itemID)},Object.defineProperty(t.prototype,"ItemInfo",{get:function(){return this._itemInfo},enumerable:!1,configurable:!0}),t.prototype.updateSpriteFrame=function(){this.itemPicture.spriteFrame=this.ItemInfo.spriteFrame;var e=a.ResizableComponent.getResizableComponent(this.itemPicture.node);e.baseSize&&(e.baseSize.width=this.itemPicture.node.width,e.baseSize.height=this.itemPicture.node.height)},t.prototype.updateItemName=function(){this.itemName.setLocalizedText(this.ItemInfo.itemName),this.itemName.node.active=this.ItemInfo.isShowName},t.prototype.updatePurchaseMethodType=function(){if(u.NgcItemStatus.updateItemStatusForNode(this.purchaseMethodParent,this._itemInfo),this.itemInfoLayout){var e=a.ResizableComponent.getResizableComponent(this.itemInfoLayout);1==this.ItemInfo.isBought?(e.baseSize.x=0,e.baseSize.y=0):(e.baseSize.x=e.baseSize.designX,e.baseSize.y=e.baseSize.designY)}},t.prototype.getDisplayType=function(){return"type0"},i([h(cc.Sprite)],t.prototype,"background",void 0),i([h(cc.Node)],t.prototype,"itemInfoLayout",void 0),i([h(cc.Sprite)],t.prototype,"itemPicture",void 0),i([h(c.NgcLabelLocalized)],t.prototype,"itemName",void 0),i([h(cc.Node)],t.prototype,"purchaseMethodParent",void 0),i([f],t)}(p.ItemShop);o.SingleItem=g,cc._RF.pop()},{"../../../../Core/ResizableComponent":"ResizableComponent","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../AssetComponent/SingleItemAsset":"SingleItemAsset","../ItemStatus/ItemStatus":"ItemStatus","./ItemShop":"ItemShop"}],Social_impl_UplaySrv:[function(t,o,n){"use strict";cc._RF.push(o,"8a6dbdM8GJOJ4T7oZDDRTNL","Social_impl_UplaySrv");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},c=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../SDK/Uplay/UplaySrv"),l=t("./Social"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("Social_impl_UplaySrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("Social_impl_UplaySrv initialized")})},t.prototype._getName=function(){return"Uplay"},t.prototype._login=function(e){var t=this;void 0===e&&(e=null),s.default.inst.login().then(function(o){console.log("##_login resolve"),e(null,o),t.onLoginSuccesCallback&&t.onLoginSuccesCallback()}).catch(function(t){console.log("##_login reject"),e(t,null)})},t.prototype._logout=function(e){var t=this;void 0===e&&(e=null),s.default.inst.logout().then(function(t){e&&e(null,t)}).catch(function(t){e&&e(t,null)}).finally(function(){t.onLogoutSuccesCallback&&t.onLogoutSuccesCallback()})},t.prototype._reLogin=function(){s.default.inst.reLogin()},t.prototype._share=function(e){void 0===e&&(e=null)},t.prototype._invite=function(e){void 0===e&&(e=null)},t.prototype._getConflictedData=function(){return s.default.inst.getDataConflict()},t.prototype._fetchInfoWithAccessToken=function(e,t){return s.default.inst.fetchInfoWithAccessToken(e,t)},t.prototype._sendFriendListToServer=function(){s.default.inst.sendFriendListToServer()},t.prototype._checkLoginStatus=function(){return s.default.inst.checkLoginStatus()},t.prototype._getFullName=function(){return s.default.inst.getFullName()},t.prototype._getFormatName=function(){return s.default.inst.getFormatName()},t.prototype._getProfilePictureUrl=function(){return s.default.inst.getProfilePictureUrl()},t.prototype._sendNameToServer=function(){s.default.inst.sendNameToServer()},t.prototype._sendAvatarToServer=function(){s.default.inst.sendAvatarToServer()},t.prototype._forceLinkInfoToServer=function(e){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,s.default.inst.forceLinkInfoToServer(e)];case 1:return t.sent(),[2]}})})},t.prototype._getSocialID=function(){return s.default.inst.getUplayId()},t.prototype._isConnected=function(){return s.default.inst.isConnected()},t.prototype._getFriendsData=function(){return s.default.inst.getFriendsData()},t.prototype._getSocialType=function(){return l.SocialType.Uplay},t.prototype._isLoginPopUpOpen=function(){return s.default.inst.isLoginPopUpOpen()},t}(l.NgcSocial);n.default=u,cc._RF.pop()},{"../../SDK/Uplay/UplaySrv":"UplaySrv","./Social":"Social"}],Social:[function(t,o,n){"use strict";cc._RF.push(o,"cd761ZcwJBK9ZW2StSY23uE","Social");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},c=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcSocial=n.SocialType=void 0;var s=t("../Service");(function(e){e[e.None=-1]="None",e[e.Facebook=0]="Facebook",e[e.Uplay=1]="Uplay",e[e.Douyin=2]="Douyin"})(n.SocialType||(n.SocialType={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onLoginSuccesCallback=null,t.onLogoutSuccesCallback=null,t}return i(t,e),t.prototype.setOnLoginSuccesCallback=function(e){void 0===e&&(e=null),this.onLoginSuccesCallback=e},t.prototype.setOnLogoutSuccesCallback=function(e){void 0===e&&(e=null),this.onLogoutSuccesCallback=e},t.getSrvInstance=function(e){return t.srvInstances.find(function(t){return t.getSocialType()===e})},t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype.init=function(e){return this._init(e)},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.login=function(e){void 0===e&&(e=null),this._login(e)},t.prototype.logout=function(e){void 0===e&&(e=null),this._logout(e)},t.prototype.reLogin=function(e){void 0===e&&(e=null),this._reLogin(e)},t.prototype.share=function(e){void 0===e&&(e=null),this._share(e)},t.prototype.invite=function(e){void 0===e&&(e=null),this._invite(e)},t.prototype.getConflictedData=function(){return this._getConflictedData()},t.prototype.fetchInfoWithAccessToken=function(e,t){return void 0===t&&(t=null),this._fetchInfoWithAccessToken(e,t)},t.prototype.sendFriendListToServer=function(){this._sendFriendListToServer()},t.prototype.checkLoginStatus=function(){return this._checkLoginStatus()},t.prototype.getFullName=function(){return this._getFullName()},t.prototype.getFormatName=function(){return this._getFormatName()},t.prototype.getProfilePictureUrl=function(){return this._getProfilePictureUrl()},t.prototype.sendNameToServer=function(){this._sendNameToServer()},t.prototype.sendAvatarToServer=function(){this._sendAvatarToServer()},t.prototype.forceLinkInfoToServer=function(e){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this._forceLinkInfoToServer(e)];case 1:return t.sent(),[2]}})})},t.prototype.getSocialID=function(){return this._getSocialID()},t.prototype.isConnected=function(){return this._isConnected()},t.prototype.getFriendsData=function(){return this._getFriendsData()},t.prototype.getSocialType=function(){return this._getSocialType()},t.prototype.isLoginPopUpOpen=function(){return this._isLoginPopUpOpen()},t.srvInstances=[],t.inst=null,t.services=[],t}(s.NgcService);n.NgcSocial=l,cc._RF.pop()},{"../Service":"Service"}],SoundChannel:[function(e,t,o){"use strict";cc._RF.push(t,"c1d7d2TPXNL77OUk1FUkN9M","SoundChannel");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.FADE=void 0;var r,i=e("./SoundManager"),a=cc._decorator,c=a.ccclass,s=(a.property,.01);(function(e){e[e.NA=0]="NA",e[e.IN=1]="IN",e[e.OUT=2]="OUT",e[e.INOUT=3]="INOUT"})(r=o.FADE||(o.FADE={}));var l=function(){function e(e){this._playID=-1,this._clipID=null,this._channel=-1,this._currentFade=r.NA,this._FADE_IN_RATE=s,this._FADE_OUT_RATE=s,this.isFadeInComplete=!1,this.isFadeOutComplete=!1,this._channel=e}return e.prototype.play=function(e,t,o,n,a){void 0===n&&(n=!1),void 0===a&&(a=r.NA),this._clipID==e&&this.isPlaying()&&!n||(this._clipID=e,this._currentFade=a,this._MAX_SOUND_VOLUME=t,this._FADE_IN_RATE=t/100,this._FADE_OUT_RATE=t/100,a!=r.IN&&a!=r.INOUT||(t=5e-4),this._currentVolume=t,this._playID=i.default.inst.playSound(e,t,o),this.isFadeInComplete=!1,this.isFadeOutComplete=!1)},e.prototype.getPlayID=function(){return this._playID},e.prototype.getClip=function(){return this._clipID},e.prototype.isPlaying=function(){return i.default.inst.isSoundPlaying(this._playID)},e.prototype.setVolume=function(e){-1!=this._playID&&i.default.inst.setVolume(this._playID,e)},e.prototype.getMaxVolume=function(){return this._MAX_SOUND_VOLUME},e.prototype.getVolume=function(){return this._currentVolume},e.prototype.stop=function(e){void 0===e&&(e=!1),-1!=this._playID&&i.default.inst.stopSound(this._playID),this._playID=-1,this._clipID=-1,this._currentFade=r.NA},e.prototype.FadeOut=function(e){void 0===e&&(e=s),this._currentFade=r.OUT,this._FADE_OUT_RATE=e},e.prototype.FadeIn=function(e){void 0===e&&(e=s),this._currentFade=r.IN,this._FADE_IN_RATE=e},e.prototype.update=function(){if(this._currentFade!=r.NA&&this.isPlaying()){var e=this._currentFade;switch(e==r.INOUT&&(e=this.isFadeInComplete?r.OUT:r.IN),e){case r.IN:this._currentVolume<this._MAX_SOUND_VOLUME&&(this._currentVolume+=this._FADE_IN_RATE,this._currentVolume>=this._MAX_SOUND_VOLUME&&(this._currentVolume=this._MAX_SOUND_VOLUME,this.isFadeInComplete=!0),this.setVolume(this._currentVolume));break;case r.OUT:this._currentVolume>0&&(this._currentVolume-=this._FADE_OUT_RATE,this._currentVolume<=0&&(this._currentVolume=0,this.isFadeOutComplete=!0),this.setVolume(this._currentVolume))}}},e.prototype.onComplete=function(e){-1!=this._playID&&i.default.inst.onComplete(this._playID,e)},n([c],e)}();o.default=l,cc._RF.pop()},{"./SoundManager":"SoundManager"}],SoundID:[function(e,t,o){"use strict";cc._RF.push(t,"62542xIMsRIC5gZ590PaiwS","SoundID");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,a=(r.property,function(){function e(e){this._id=-1,this._clip=e}return e.prototype.setPlayID=function(e){this._id=e},e.prototype.getClip=function(){return this._clip},e.prototype.getPlayID=function(){return this._id},n([i],e)}());o.default=a,cc._RF.pop()},{}],SoundManager:[function(e,t,o){"use strict";cc._RF.push(t,"6ae7dHIvzRCgb+/NsD9Cr4d","SoundManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SOUND_INDEX=o.AudioClips=void 0;var a,c,s=e("./Utils/Util"),l=e("./SoundChannel"),u=e("../NanoGameCore/Core/Utils"),p=e("../NanoGameCore/GameFramework/Scripts/NgcSoundManager"),d=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),f=cc._decorator,h=f.ccclass,g=f.property;(function(e){e[e.jumpCar_sfx=0]="jumpCar_sfx",e[e.idleCar_sfx=1]="idleCar_sfx",e[e.engineLow_sfx=2]="engineLow_sfx",e[e.engineMid_sfx=3]="engineMid_sfx",e[e.engineTop_sfx=4]="engineTop_sfx",e[e.accel_sfx=5]="accel_sfx",e[e.driftCar_sfx=6]="driftCar_sfx",e[e.spawnCar_sfx=7]="spawnCar_sfx",e[e.collideCar_sfx=8]="collideCar_sfx",e[e.onLand=9]="onLand",e[e.slow_sfx=10]="slow_sfx",e[e.countdown_sfx=11]="countdown_sfx",e[e.finishLap_sfx=12]="finishLap_sfx",e[e.finishRace_sfx=13]="finishRace_sfx",e[e.go_sfx=14]="go_sfx",e[e.Trans_down_3to3=15]="Trans_down_3to3",e[e.Trans_down_4to3=16]="Trans_down_4to3",e[e.Trans_down_5to4=17]="Trans_down_5to4",e[e.Trans_down_6to5=18]="Trans_down_6to5",e[e.Trans_up_3to3=19]="Trans_up_3to3",e[e.Trans_up_3to4=20]="Trans_up_3to4",e[e.Trans_up_4to5=21]="Trans_up_4to5",e[e.Trans_up_5to6=22]="Trans_up_5to6",e[e.loop_sfx=23]="loop_sfx",e[e.eliminate_sfx=24]="eliminate_sfx",e[e.warning_sfx=25]="warning_sfx",e[e.medal_sfx=26]="medal_sfx",e[e.selectMenu_sfx=27]="selectMenu_sfx",e[e.confirmMenu_sfx=28]="confirmMenu_sfx",e[e.startGame_sfx=29]="startGame_sfx",e[e.expandMenu_sfx=30]="expandMenu_sfx",e[e.LENGTH=31]="LENGTH"})(a=o.AudioClips||(o.AudioClips={})),function(e){e[e.CHANNEL=0]="CHANNEL",e[e.VOLUME=1]="VOLUME",e[e.PRIORITY=2]="PRIORITY",e[e.LENGTH=3]="LENGTH"}(c=o.SOUND_INDEX||(o.SOUND_INDEX={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SOUND_INFO=[0,.05,0,1,.05,0,2,.05,0,3,.05,0,4,.05,0,5,.2,0,6,.07,0,7,.07,0,8,.07,0,9,.07,0,10,.2,0,11,.1,0,12,.1,0,13,.1,0,14,.1,0,15,.05,0,16,.05,0,17,.05,0,18,.05,0,19,.05,0,20,.05,0,21,.05,0,22,.05,0,23,.2,0,24,.15,0,25,.15,0,26,.15,0,27,.2,0,28,.2,0,29,.2,0,30,.2,0],t.musicChannel=null,t.useSound=!0,t.startScreenMusicClip=null,t.inGameMusicClip=null,t.jumpCar_sfx=null,t.idleCar_sfx=null,t.engineLow_sfx=null,t.engineMid_sfx=null,t.engineTop_sfx=null,t.accel_sfx=null,t.countdown_sfx=null,t.onLand=null,t.driftCar_sfx=null,t.collideCar_sfx=null,t.slow_sfx=null,t.spawnCar_sfx=null,t.finishLap_sfx=null,t.finishRace_sfx=null,t.go_sfx=null,t.Trans_down_3to3=null,t.Trans_down_4to3=null,t.Trans_down_5to4=null,t.Trans_down_6to5=null,t.Trans_up_3to3=null,t.Trans_up_3to4=null,t.Trans_up_4to5=null,t.Trans_up_5to6=null,t.loop_sfx=null,t.eliminate_sfx=null,t.warning_sfx=null,t.medal_sfx=null,t.selectMenu_sfx=null,t.confirmMenu_sfx=null,t.startGame_sfx=null,t.expandMenu_sfx=null,t.SoundIDs=[],t._channels=[],t._channelLength=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,e.prototype.onLoad.call(this)},t.prototype.playStartScreenMusic=function(){this.stopMusic(),!d.default.musicOff&&this.useSound&&(cc.audioEngine.playMusic(this.startScreenMusicClip,!0),cc.audioEngine.setMusicVolume(.2))},t.prototype.playGameMusic=function(){this.stopMusic(),!d.default.musicOff&&this.useSound&&(cc.audioEngine.playMusic(this.inGameMusicClip,!0),cc.audioEngine.setMusicVolume(.15))},t.prototype.start=function(){this._channelLength=this.SOUND_INFO.length/c.LENGTH;for(var e=0;e<this._channelLength;e++)this._channels.push(new l.default(e))},t.prototype.onComplete=function(e,t){cc.audioEngine.setFinishCallback(e,t)},t.prototype.playSound=function(e,t,o){(!t||t>1)&&(t=1),t<0&&(t=0);var n=this[u.Utils.enumToString(a,e)];return Array.isArray(this[u.Utils.enumToString(a,e)])&&(n=s.default.randomArr(this[u.Utils.enumToString(a,e)])),this._playSFX(n,t,o)},t.prototype.getVolume=function(e){return cc.audioEngine.getVolume(e)},t.prototype.playSFX=function(e,t,o,n){if(void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===n&&(n=l.FADE.NA),!d.default.musicOff&&this.useSound){var r=this.SOUND_INFO[e*c.LENGTH+c.CHANNEL],i=this.SOUND_INFO[e*c.LENGTH+c.VOLUME];return this._channels[r].play(e,i,t,o,n),this._channels[r]}},t.prototype.isPlayingSFX=function(e){for(var t=0;t<this._channelLength;t++){var o=this._channels[t];if(o.getClip()==e&&o.isPlaying())return!0}return!1},t.prototype.stopSFX=function(e){for(var t=0;t<this._channelLength;t++){var o=this._channels[t];if(o.getClip()==e&&o.isPlaying()){o.stop();break}}},t.prototype.stopSFXByChannel=function(e){var t=this._channels[e];t.isPlaying()&&t.stop()},t.prototype.stopAllSFX=function(){for(var e=0;e<this._channelLength;e++){var t=this._channels[e];t.isPlaying()&&t.stop()}},t.prototype.update=function(){this.useSound&&this._channels.forEach(function(e){e&&e.update()})},t.inst=null,i([g(cc.Boolean)],t.prototype,"useSound",void 0),i([g({type:cc.AudioClip,override:!0})],t.prototype,"startScreenMusicClip",void 0),i([g({type:cc.AudioClip})],t.prototype,"inGameMusicClip",void 0),i([g({type:cc.AudioClip})],t.prototype,"jumpCar_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"idleCar_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"engineLow_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"engineMid_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"engineTop_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"accel_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"countdown_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"onLand",void 0),i([g({type:cc.AudioClip})],t.prototype,"driftCar_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"collideCar_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"slow_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"spawnCar_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"finishLap_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"finishRace_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"go_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"Trans_down_3to3",void 0),i([g({type:cc.AudioClip})],t.prototype,"Trans_down_4to3",void 0),i([g({type:cc.AudioClip})],t.prototype,"Trans_down_5to4",void 0),i([g({type:cc.AudioClip})],t.prototype,"Trans_down_6to5",void 0),i([g({type:cc.AudioClip})],t.prototype,"Trans_up_3to3",void 0),i([g({type:cc.AudioClip})],t.prototype,"Trans_up_3to4",void 0),i([g({type:cc.AudioClip})],t.prototype,"Trans_up_4to5",void 0),i([g({type:cc.AudioClip})],t.prototype,"Trans_up_5to6",void 0),i([g({type:cc.AudioClip})],t.prototype,"loop_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"eliminate_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"warning_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"medal_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"selectMenu_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"confirmMenu_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"startGame_sfx",void 0),i([g({type:cc.AudioClip})],t.prototype,"expandMenu_sfx",void 0),o=i([h],t)}(p.NgcSoundManager);o.default=y,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/GameFramework/Scripts/NgcSoundManager":"NgcSoundManager","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","./SoundChannel":"SoundChannel","./Utils/Util":"Util"}],SpecialOfferSkinItem:[function(e,t,o){"use strict";cc._RF.push(t,"ee32dmXYclIvIwKIT2idhll","SpecialOfferSkinItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/Services/GameShop/GameShop"),c=e("./CarSkinItem"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isLock=!0,t}return r(t,e),t.prototype.init=function(t,o,n,r){e.prototype.init.call(this,t,o,n,null),this.itemID=a.NgcGameShop.inst.getItems(r)[0].itemID},t.prototype.show=function(){this.isLock?(this.currentOption.active=!0,this.lockedIcon.active=!0):(this.currentOption.active=!1,this.lockedIcon.active=!1,this.carSelectToggle.node.active=!1,this.updateToggleUI())},t.prototype.hide=function(){this.carSelectToggle.node.active=!1,this.currentOption.active=!1},t.prototype.updateBoughtItemUI=function(){this.currentOption.active=!1,this.isLock=!1,this.lockedIcon.active=!1,this.carSelectToggle.node.active=!1,this.carSelectToggle.isChecked=!0},i([l],t)}(c.default));o.default=u,cc._RF.pop()},{"../../../NanoGameCore/Services/GameShop/GameShop":"GameShop","./CarSkinItem":"CarSkinItem"}],SpecialOffer:[function(t,o,n){"use strict";cc._RF.push(o,"328faNPOY9Mc6/ucmPup5FY","SpecialOffer");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../NanoGameCore/Core/nCSV"),u=t("../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),p=t("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),d=t("../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),f=t("../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),h=t("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),g=t("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),y=t("../../NanoGameCore/GameFramework/Scripts/NgcShopManager"),m=t("../../NanoGameCore/SDK/Nano/NanoSrv"),_=t("../../NanoGameCore/Services/Ads/Ads"),v=t("../../NanoGameCore/Services/GameShop/GameShop"),S=t("../../NanoGameCore/Services/Inventory/Inventory"),N=t("../CarSelector/CarSkinSelecter"),b=t("../Dialog/RewardAnimationDialog/RewardAnimationDialog"),C=t("../Tracking/TrackingManager"),P=t("../UserInfo"),I=t("../Utils/ConstConfig"),w=t("../Utils/Util"),T=cc._decorator,O=T.ccclass,R=T.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offerContainer=null,t.coinStackIcon=null,t.ribbonIcon=null,t.carPlaceHolder=null,t.rewardLabel=null,t.spriteComp=null,t._refreshCD=0,t._reappearCD=0,t._offers={},t._carOffers=[],t._offeringItem=null,t._isFreshScreen=!1,t._isInitialized=!1,t._reInit=!1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,this.spriteComp=this.node.getComponent(cc.Sprite)},t.prototype.start=function(){},t.prototype.init=function(e){if(void 0===e&&(e=!1),this._reInit=e,e&&(P.UserInfo.setNumValue(0,I.ConstConfig.SAVE_KEY.SPECIAL_OFFER_REFRESH_TIMESTAMP),P.UserInfo.setNumValue(0,I.ConstConfig.SAVE_KEY.SPECIAL_OFFER_ADS_TIMESTAMP)),!this._isInitialized||this._reInit){var t=m.default.inst.getCurGameInfo(),o=t._custom.specialOffer;cc.error("gameInfo",t),this.parseCarOffers(t.itemShop);var n=this;w.default.getHttp(o,null,function(e,t){e||(n.parse(t),n.initOffer(),n.updateUI(),n._reInit=!1,n._isInitialized=!0)})}else this.refreshOffer()},t.prototype.parse=function(e){var t=l.nCSV.parseParameters(e);this._refreshCD=t.refreshCD,this._reappearCD=t.reappearCD,this._offers=l.nCSV.parseTable(e)},t.prototype.parseCarOffers=function(e){for(var t,o=S.NgcInventory.inst.ownedItems,n=0,r=e;n<r.length;n++){var i=r[n];t=v.NgcGameShop.inst.getItems(i.bundleID)[0].itemID,S.NgcInventory.inst.objectTypeTable[t].earnBy!==I.ConstConfig.INVENTORY.EARN_BY.SPECIAL||o.hasOwnProperty(t)||this._carOffers.push(i.bundleID)}cc.error("this._carOffers",this._carOffers)},t.prototype.randomOffer=function(){var e,t=this._carOffers.length>0,o=this.getCarOfferProbability(),n=Math.random(),r=0,i=0;for(var a in this._offers)if(e=this._offers[a],i=t?0:+e.share*o,(r+=+e.chance+i)>n)return e},t.prototype.initOffer=function(){var e=Date.now()-P.UserInfo.getNumValue(I.ConstConfig.SAVE_KEY.SPECIAL_OFFER_REFRESH_TIMESTAMP)>6e4*this._refreshCD,t=P.UserInfo.curOffer;e||null==t||this._reInit?(this.randomOffer(),this._offeringItem={itemID:w.default.randomArr(this._carOffers),count:1},P.UserInfo.curOffer=this._offeringItem,P.UserInfo.setNumValue(Date.now(),I.ConstConfig.SAVE_KEY.SPECIAL_OFFER_REFRESH_TIMESTAMP)):this._offeringItem=t},t.prototype.getCarOfferProbability=function(){var e;for(var t in this._offers)if((e=this._offers[t]).type===I.ConstConfig.INVENTORY.TYPE.EQUIPPABLE)return e.chance},t.prototype.btnWatchAdsOnClick=function(){var e,t=this;null===(e=f.default.inst)||void 0===e||e.show(f.NgcPointcuts.videoSpecialOffer,_.AdsType.VideoReward,this._offeringItem.itemID,this._offeringItem.count,null,function(e,o){return c(t,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return e?(P.UserInfo.setNumValue(Date.now(),I.ConstConfig.SAVE_KEY.SPECIAL_OFFER_ADS_TIMESTAMP),this._isFreshScreen=!1,this.claimOffer(),[3,3]):[3,1];case 1:return 0!=o?[3,3]:[4,p.NgcDialogManager.createDialog(u.NgcMessageDialog.dialogType,u.NgcMessageDialog.urlPrefab,u.NgcMessageDialog.bundleName)];case 2:t=r.sent(),(n=t.getComponent(u.NgcMessageDialog)).init("TMB_AD_COULD_NOT_BE_LOADED"),n.show(null,null,null,null),r.label=3;case 3:return[2]}})})})},t.prototype.claimOffer=function(){return c(this,void 0,void 0,function(){var e,t,o,n,r,i=this;return s(this,function(a){switch(a.label){case 0:return cc.log("SPECIAL OFFER: claim "+this._offeringItem.itemID),this._offeringItem.itemID!==I.ConstConfig.INVENTORY.ITEM_ID.COIN?[3,2]:[4,p.NgcDialogManager.createDialog(b.default.dialogType,b.default.urlPrefab,"")];case 1:return e=a.sent(),(t=e.getComponent(b.default)).init(this._offeringItem.count,b.COIN_ANI_TYPE.SIMPLE,function(){return c(i,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return[4,P.UserInfo.addCoin(I.ConstConfig.CURRENCY.SOURCE.SPECIAL_OFFER,this._offeringItem.count).then(function(){P.UserInfo.curOffer=null,e.refreshOffer()})];case 1:return t.sent(),[2]}})})}),t.show(),[3,3];case 2:o=v.NgcGameShop.inst.getPrices(this._offeringItem.itemID)[0].currency,n=function(e,t){cc.log("addItemCallback err",e),cc.log("addItemCallback result",t),!e&&t&&S.NgcInventory.inst.getItemCount(o,r)},r=function(e,t){cc.log("getItemCountCallBack err",e),cc.log("getItemCountCallBack result",t),!e&&t&&i.requestBuySkin()},S.NgcInventory.inst.addItem(o,1,n),a.label=3;case 3:return[2]}})})},t.prototype.requestBuySkin=function(){var e=this,t=this._offeringItem.itemID;v.NgcGameShop.inst.buyBundle(t,function(o,n){return c(e,void 0,void 0,function(){var e,r,i,a,l=this;return s(this,function(u){switch(u.label){case 0:return o?(cc.log("GAME SHOP: Request to buy "+t+" failed: "+o),[4,p.NgcDialogManager.createDialog(d.NgcNoticeDialog.dialogType,d.NgcNoticeDialog.urlPrefab,d.NgcNoticeDialog.bundleName)]):[3,2];case 1:return u.sent().getComponent(d.NgcNoticeDialog).init(g.NgcLocalizedManager.t("TMB_ERROR").text,g.NgcLocalizedManager.t("TMB_TRANSACTION_FAILED").text,null,null),[2];case 2:return cc.log("GAME SHOP: Request to buy "+t+" success "+n),e=v.NgcGameShop.inst.getPrices(t)[0],r=v.NgcGameShop.inst.getItems(t)[0],i=S.NgcInventory.inst.objectTypeTable[r.itemID].type===I.ConstConfig.INVENTORY.TYPE.CURRENCY,a=this,S.NgcInventory.inst.forceFetchInventory().then(function(){P.UserInfo.updateInventoryWithPlatform().then(function(){return c(l,void 0,void 0,function(){var o,n,c;return s(this,function(s){switch(s.label){case 0:return[4,p.NgcDialogManager.createDialog(b.default.dialogType,b.default.urlPrefab,"")];case 1:return o=s.sent(),(n=o.getComponent(b.default)).initWithCarReward(N.default.getSpriteFrameFromID(r.itemID)),y.NgcShopManager.getInstance().updateBoughtItem(r.itemID),y.NgcShopManager.getInstance().updateEquippedItemList([r.itemID]),n.show(),N.default.inst.updateBoughtItem(r.itemID),c={type:"null",itemPurchaseID:r.itemID,itemPurchaseValue:r.count,itemSpentID:e.currency,itemSpentValue:e.value,purchaseNumber:1,starsBalance:P.UserInfo.curStars,coinsBalance:P.UserInfo.curCoin,isConsumable:i},C.default.getInst().LogEvent_BuyItem(c.type,c.itemPurchaseID,c.itemPurchaseValue,c.purchaseNumber,c.coinsBalance,c.starsBalance,c.itemSpentID,c.itemSpentValue,c.isConsumable),C.default.getInst().LogEvent_CarUnlockProgression(r.itemID,1,1,"Point-cut Ad Reward",P.UserInfo.curCoin),P.UserInfo.curSkin=r.itemID,a._carOffers.splice(a._carOffers.indexOf(t),1),P.UserInfo.curOffer=null,a.refreshOffer(),[2]}})})})}),[2]}})})})},t.prototype.updateUI=function(){var e,t;h.NgcBuildConfig.offlineMode||_.NgcAds.inst.isFakeAdsPlatform()?this.node.active=!1:Date.now()-P.UserInfo.getNumValue(I.ConstConfig.SAVE_KEY.SPECIAL_OFFER_ADS_TIMESTAMP)>6e4*this._reappearCD?(this._offeringItem.itemID===I.ConstConfig.INVENTORY.ITEM_ID.COIN?(this.coinStackIcon.active=!0,this.carPlaceHolder.active=!1,this.ribbonIcon.active=!1,this.rewardLabel.string="+"+this._offeringItem.count,this.rewardLabel.node.active=!0):(e=v.NgcGameShop.inst.getItems(this._offeringItem.itemID)[0].itemID,t=N.default.getSpriteFrameFromID(e),this.carPlaceHolder.getComponent(cc.Sprite).spriteFrame=t,this.coinStackIcon.active=!1,this.carPlaceHolder.active=!0,this.ribbonIcon.active=!0,this.rewardLabel.node.active=!1),this.offerContainer.active=!0):this.offerContainer.active=!1},t.prototype.onEnable=function(){this._isFreshScreen=!0},t.prototype.refreshOffer=function(){this.initOffer(),this.updateUI()},t.prototype.hide=function(){this.offerContainer.active=!1},t.inst=null,a([R(cc.Node)],t.prototype,"offerContainer",void 0),a([R(cc.Node)],t.prototype,"coinStackIcon",void 0),a([R(cc.Node)],t.prototype,"ribbonIcon",void 0),a([R(cc.Node)],t.prototype,"carPlaceHolder",void 0),a([R(cc.Label)],t.prototype,"rewardLabel",void 0),o=a([O],t)}(cc.Component);n.default=E,cc._RF.pop()},{"../../NanoGameCore/Core/nCSV":"nCSV","../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../NanoGameCore/GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../NanoGameCore/Services/Ads/Ads":"Ads","../../NanoGameCore/Services/GameShop/GameShop":"GameShop","../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../CarSelector/CarSkinSelecter":"CarSkinSelecter","../Dialog/RewardAnimationDialog/RewardAnimationDialog":"RewardAnimationDialog","../Tracking/TrackingManager":"TrackingManager","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig","../Utils/Util":"Util"}],SpectatorItem:[function(e,t,o){"use strict";cc._RF.push(t,"265f4M+PcJDnoss3W+PahIM","SpectatorItem"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSpectatorItem=o.SpectatorTag=void 0;var n=cc._decorator;n.ccclass,n.property,function(e){e[e.NONE=0]="NONE",e[e.FRIEND=1]="FRIEND",e[e.ELIMINATED=2]="ELIMINATED",e[e.LEADER=3]="LEADER"}(o.SpectatorTag||(o.SpectatorTag={}));var r=function(){function e(e,t,o,n){this._netID=e,this._tag=t,this._pName=o,this._pFlag=n,cc.log("Init item with netID "+this._netID+" tag: "+this._tag+" name "+this._pName+" Flag "+this._pFlag)}return e.prototype.start=function(){},e}();o.NgcSpectatorItem=r,cc._RF.pop()},{}],SpectatorManager:[function(t,o,n){"use strict";cc._RF.push(o,"4a7dek/0qBK1b0TYL0O02Dg","SpectatorManager");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NgcSpectatorManager=void 0;var c=t("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=t("../../../../GameFramework/Scripts/Localized/LocalizedManager"),l=t("../../../../GameFramework/Scripts/BuildConfig"),u=t("../../../../GameFramework/Scripts/Network/NgcNetClient"),p=t("../../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),d=t("../../../../GameFramework/Scripts/NgcGame"),f=t("../../../../GameFramework/Scripts/NgcMain"),h=t("../../../../GameFramework/Scripts/NgcSceneManager"),g=t("../../../../Services/Telemetry/Telemetry"),y=t("../../../Dialogs/Script/DialogBase"),m=t("../../../Emojis/Script/EmotesManager"),_=t("./SpectatorItem"),v=t("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),S=t("../../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),N=cc._decorator,b=N.ccclass,C=N.property,P=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.pTag=null,e.pName=null,e.overlay=null,e.totalViewers=null,e.totalViewingYou=null,e.pFlag=null,e.leadCrown=null,e.hideSpectator=null,e.showSpectator=null,e.disabledSpectator=null,e.spectatedYou=null,e.emojiParent=null,e.bubbleParent=null,e.hudUIs=[],e.eliminated=null,e.swipeTutorial=null,e.swipeLabel=null,e.iconSwipe=null,e.icon_hand=null,e.arrowKeys=null,e.nextButtonNode=null,e.nextButtonMoveDistance=120,e.targetStillAlive=!0,e.nViewers=0,e.youViewers=0,e.currDisplayIdx=0,e.listViewer={},e.SPECTATOR_BROADCAST_MESSAGE_TYPE="send_spectator",e.spectatorStarted=!1,e.forceLeaveSpectator=!1,e}var n;return i(o,t),n=o,o.prototype.onLoad=function(){n.inst=this,this.spectatorList=[],this.listViewer={},this.initSwipeGesture()},o.prototype.onDestroy=function(){l.NgcBuildConfig.useNgcServer?p.NgcNetClientRefactor.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE):u.NgcNetClient.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE)},o.prototype.initSwipeGesture=function(){this.overlay.on(cc.Node.EventType.TOUCH_END,this.detectSwipeGesture,this),this.overlay.active=!1},o.prototype.detectSwipeGesture=function(e){e.stopPropagation();var t=e.getStartLocation(),o=e.getLocation().x-t.x;o<0?this.swipeLeft():o>0&&this.swipeRight()},o.prototype.swipeLeft=function(){this.prevView()},o.prototype.swipeRight=function(){this.nextView()},o.prototype.reset=function(){this.spectatorList=[],this.listViewer={},l.NgcBuildConfig.useNgcServer?p.NgcNetClientRefactor.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE):u.NgcNetClient.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE),n.inst=null,cc.log("reset Spectator Mode")},o.prototype.getIndexFromNetID=function(e){return this.spectatorList?this.spectatorList.findIndex(function(t){return t._netID==e}):-1},o.prototype.getSpecatorFromNetID=function(e){var t=this.getIndexFromNetID(e);return-1==t?null:this.spectatorList[t]},o.prototype.hideAllSpectatorUI=function(){this.showSpectator.active=!1,this.hideSpectator.active=!1,this.spectatedYou.active=!1,this.disabledSpectator.active=!1,this.swipeTutorial.active=!1},o.prototype.enabledSpectator=function(){cc.log("enabledSpectator"),this.hideSpectator.active=this.isAvailable(),this.showSpectator.active=!1,this.spectatedYou.active=!1,this.targetStillAlive=!1,this.disabledSpectator.active=!this.isAvailable()&&f.NgcMain.getAppContext()!=f.AppContext.Gameplay},o.prototype.onKeyDown=function(e){if(this.spectatorStarted)switch(e.keyCode){case cc.macro.KEY.a:this.prevView();break;case cc.macro.KEY.d:this.nextView();break;case cc.macro.KEY.left:this.prevView();break;case cc.macro.KEY.right:this.nextView()}},o.prototype.stopSpectator=function(){this.spectatorStarted=!1,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this),cc.log("stopSpectator"),this.disabledSpectator.active=!this.isAvailable()&&f.NgcMain.getAppContext()!=f.AppContext.Gameplay,this.showHudUI(!0);try{this.sendSpectator(!1)}catch(e){cc.error("Error: "+e)}m.NgcEmotesManager.inst.allowScrollView(!1),g.NgcTelemetry.inst.LogEvent_ExitScreen("SpectatorScreen"),g.NgcTelemetry.inst.LogEvent_OnboardingGameSpectatorEnd({}),cc.systemEvent.dispatchEvent(new cc.Event.EventCustom("STOP_SPECTATOR",!0)),f.NgcMain.popAppContext(),this.reset(),d.NgcGame.inst.node.emit("stopSpectator"),this.hide(function(){})},o.prototype.showHudUI=function(e){null!=this.hudUIs&&this.hudUIs.forEach(function(t){t&&(t.active=e)})},o.prototype.isOnMobile=function(){return cc.sys.isMobile},o.prototype.playSwipeTutorialAnimation=function(){var e=this;this.swipeTutorial.opacity=0,this.isOnMobile()?s.NgcLocalizedManager.setTextKey(this.swipeLabel,"SPM_SWITCH_TARGET_MOBILE"):(this.arrowKeys.active=!0,this.icon_hand.active=!1,this.iconSwipe.active=!1,s.NgcLocalizedManager.setTextKey(this.swipeLabel,"SPM_SWITCH_TARGET_DESKTOP")),cc.tween(this.swipeTutorial).to(.5,{opacity:255}).call(function(){if(e.isOnMobile())e.swipeTutorial.getComponent(cc.Animation).play();else{var t=e.arrowKeys.getChildByName("icon1"),o=e.arrowKeys.getChildByName("icon2");cc.tween(t).repeat(4,cc.tween().delay(.5).call(function(){t.opacity=0,o.opacity=255}).delay(.5).call(function(){o.opacity=0,t.opacity=255})).start()}e.scheduleOnce(function(){cc.tween(e.swipeTutorial).to(.5,{opacity:0}).start()},2)}).start()},o.prototype.startSpectator=function(){if(this.isAvailable()){if(S.NgcPartyRoomManager.inst.isGameStartedFromRoom()&&d.NgcGame.inst.canSkipToPartyRoom())return d.NgcGame.inst.forcedExit=!0,void this.stopSpectator();this.checkShowBanner(v.NgcPointcuts.bannerSpectator),cc.log("startSpectator"),this.overlay.active=!0,this.overlay.opacity=0,this.hideSpectator.active=!1,this.showSpectator.active=!0,this.spectatedYou.active=!1,this.swipeTutorial.active=!0,this.playSwipeTutorialAnimation(),this.showHudUI(!1),m.NgcEmotesManager.inst.setParentForEmojisAndBubble(this.emojiParent,this.bubbleParent),m.NgcEmotesManager.inst.allowScrollView(!0),g.NgcTelemetry.inst.LogEvent_EnterScreen("SpectatorScreen"),f.NgcMain.pushAppContext(f.AppContext.Spectator),d.NgcGame.inst.node.emit("startSpectator"),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this),this.spectatorStarted=!0}else this.stopSpectator()},o.prototype.getIndexSpecatorLeaderTag=function(){return this.spectatorList.findIndex(function(e){return e._tag==_.SpectatorTag.LEADER})},o.prototype.addSpectatorList=function(){var e=this;h.NgcSceneManager.inst.getAllPlayer().forEach(function(t){t._canBeSpectated&&e.addSpectatorItem(!1,t.getNetID(),t.getName(),t.getCountryFlag()),t._isLeader&&e.setSpectatorLeader(t.getNetID()),e.addSetterForPlayer(t)})},o.prototype.addSpectatorItem=function(e,t,o,n){var r=e?_.SpectatorTag.FRIEND:_.SpectatorTag.NONE,i=new _.NgcSpectatorItem(t,r,o,n);this.spectatorList.push(i)},o.prototype.setSpectatorLeader=function(e){this.updateSpectatorTag(e,_.SpectatorTag.LEADER),this.lastLeaderNetID!=e&&(this.removeLeaderByNetID(this.lastLeaderNetID),this.currDisplayNetID==e&&this.updateSpectatorUI(),this.lastLeaderNetID=e)},o.prototype.removeLeaderByNetID=function(e){if(e==this.lastLeaderNetID&&null!=this.lastLeaderNetID){var t=this.getSpecatorFromNetID(e);t&&(t._tag=_.SpectatorTag.NONE,this.currDisplayNetID==this.lastLeaderNetID&&this.updateSpectatorUI(),this.lastLeaderNetID=null)}},o.prototype.addSetterForPlayer=function(e){var t=this,o=e;o.__defineSetter__("_canBeSpectated",function(n){0==n?t.removeSpectatorNetID(e.getNetID()):t.addSpectatorItem(!1,e.getNetID(),e.getName(),e.getCountryFlag()),o._canBeSpectatedValue=n}),o.__defineGetter__("_canBeSpectated",function(){return o._canBeSpectatedValue}),o.__defineSetter__("_isLeader",function(n){n?t.setSpectatorLeader(e.getNetID()):t.removeLeaderByNetID(e.getNetID()),o._isLeaderValue=n}),o.__defineGetter__("_isLeader",function(){return o._isLeaderValue})},o.prototype.setSpectatorEliminated=function(e){this.updateSpectatorTag(e,_.SpectatorTag.ELIMINATED)},o.prototype.updateSpectatorTag=function(e,t){var o=this.getSpecatorFromNetID(e);o&&(o._tag=t)},o.prototype.removeSpectatorNetID=function(e){var t=this;if(!this.forceLeaveSpectator){var o=this.getIndexFromNetID(e);if(-1!=o){if(this.spectatorStarted&&S.NgcPartyRoomManager.inst.isGameStartedFromRoom()&&d.NgcGame.inst.canSkipToPartyRoom())return d.NgcGame.inst.forcedExit=!0,this.scheduleOnce(function(){t.stopSpectator()},5),void(this.forceLeaveSpectator=!0);this.spectatorList.splice(o,1),0==this.spectatorList.length?this.forceLeaveSpectator||this.scheduleOnce(function(){t.stopSpectator()},1):this.currDisplayNetID==e&&(this.sortPriority(),this.currDisplayIdx=0,this.lastDisplayNetID="",this.currDisplayNetID=this.spectatorList[this.currDisplayIdx]._netID,this.updateNewSpectator())}}},o.prototype.isAvailable=function(){return this.spectatorList&&this.spectatorList.length>0},o.prototype.sortPriority=function(){this.spectatorList=this.spectatorList.sort(function(e,t){return t._tag-e._tag}),console.log("After sort = ",this.spectatorList)},o.prototype.startView=function(){this.addSpectatorList(),this.isAvailable()&&(this.sortPriority(),this.currDisplayIdx=0,this.lastDisplayNetID="",this.currDisplayNetID=this.spectatorList[this.currDisplayIdx]._netID,this.updateNewSpectator())},o.prototype.prevView=function(){this.currDisplayIdx--,this.currDisplayIdx<0&&(this.currDisplayIdx=this.spectatorList.length-1),this.updateNewSpectator()},o.prototype.nextView=function(){this.currDisplayIdx++,this.currDisplayIdx>=this.spectatorList.length&&(this.currDisplayIdx=0),this.updateNewSpectator()},o.prototype.updateNewSpectator=function(){this.isAvailable()&&(this.currDisplayNetID=this.spectatorList[this.currDisplayIdx]._netID,d.NgcGame.inst.node.emit("changeSpectatorTarget",this.currDisplayNetID),this.lastDisplayNetID!=this.currDisplayNetID&&(this.sendSpectator(!0),this.lastDisplayNetID=this.currDisplayNetID,this.updateSpectatorUI()))},o.prototype.getLabelFromTag=function(e){var t="";switch(e){case _.SpectatorTag.NONE:t="NORMAL PLAYER";break;case _.SpectatorTag.FRIEND:t="YOUR FRIEND";break;case _.SpectatorTag.ELIMINATED:t="ELIMINATED YOU";break;case _.SpectatorTag.LEADER:t="LEAD PLAYER"}return t},o.prototype.updateSpectatorUI=function(){var e=this.getSpecatorFromNetID(this.currDisplayNetID);e&&(cc.log("Update UI for "+e._pName),this.pName.string=e._pName,this.pFlag.spriteFrame=e._pFlag,this.leadCrown.node.active=e._tag==_.SpectatorTag.LEADER)},o.prototype.updateTotalViewers=function(){this.totalViewers.string=this.nViewers.toString()},o.prototype.sendSpectator=function(e){var t;t=l.NgcBuildConfig.useNgcServer?p.NgcNetClientRefactor.inst.getCombinedNetID():u.NgcNetClient.inst.localPlayerNetID,e&&(cc.log("netID :",t),cc.log("this.currDisplayNetID :",this.currDisplayNetID),cc.log(" "));var o={isJoin:e,playerNetID:t,spectatingNetID:this.currDisplayNetID,time:(new Date).getTime()};l.NgcBuildConfig.useNgcServer?p.NgcNetClientRefactor.inst.sendNgcBroadcast(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,o,""):u.NgcNetClient.inst.broadcastMessage(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,o,d.NgcGame.inst.curGameNetID)},o.prototype.handleBroadcastMessageSpectator=function(e){var t=u.NgcNetClient.inst.localPlayerNetID,o=e.payload;cc.log(o),o.isJoin?this.listViewer[o.playerNetID]=o.spectatingNetID:delete this.listViewer[o.playerNetID];var n=Object.keys(this.listViewer).length;this.nViewers!=n&&n>0&&(this.nViewers=n,this.updateTotalViewers());for(var r=Object.keys(this.listViewer),i=0,a=0;a<r.length;a++){var c=r[a];this.listViewer[c]==t&&i++}i!=this.youViewers&&(this.disabledSpectator.active=this.spectatedYou.active=0!=i&&this.targetStillAlive,this.youViewers=i,this.totalViewingYou.string=""+i)},o.prototype.handleBroadcastMessageSpectator_Refactor=function(e){var t=p.NgcNetClientRefactor.inst.localPlayerID,o=JSON.parse(e.payload);cc.log(o),o.isJoin?this.listViewer[p.NgcNetClientRefactor.DetachClientID(o.playerNetID)]=p.NgcNetClientRefactor.DetachPlayerID(o.spectatingNetID):delete this.listViewer[p.NgcNetClientRefactor.DetachClientID(o.playerNetID)];var n=Object.keys(this.listViewer).length;this.nViewers!=n&&n>0&&(this.nViewers=n,this.updateTotalViewers());for(var r=Object.keys(this.listViewer),i=0,a=0;a<r.length;a++){var c=r[a];this.listViewer[c]==t&&i++}i!=this.youViewers&&(this.disabledSpectator.active=this.spectatedYou.active=0!=i&&this.targetStillAlive,this.youViewers=i,this.totalViewingYou.string=""+i)},o.prototype.start=function(){this.hideAllSpectatorUI(),l.NgcBuildConfig.useNgcServer?p.NgcNetClientRefactor.inst.registerForBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,this.handleBroadcastMessageSpectator_Refactor.bind(this)):u.NgcNetClient.inst.registerForBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,this.handleBroadcastMessageSpectator.bind(this))},o.prototype.onNextButtonClicked=function(){this.stopSpectator(),m.NgcEmotesManager.inst.currentEmotesUIInst.isShowUp&&m.NgcEmotesManager.inst.currentEmotesUIInst.mainButtonClicked()},o.prototype.updateMoveNextButton=function(){if(cc.sys.isMobile)if(m.NgcEmotesManager.inst.currentEmotesUIInst.isShowUp){if(!this.nextButtonNode.hideByEmoji){var e=this.nextButtonMoveDistance||120;this.nextButtonNode.hideByEmoji=!0,this.nextButtonNode.originalY=this.nextButtonNode.originalY||this.nextButtonNode.y,this.nextButtonNode.getComponent(cc.Widget).enabled=!1,cc.tween(this.nextButtonNode).to(.15,{y:this.nextButtonNode.originalY+e,opacity:0}).start()}}else this.nextButtonNode.hideByEmoji&&(this.nextButtonNode.hideByEmoji=!1,this.nextButtonNode.originalY=this.nextButtonNode.originalY||this.nextButtonNode.y,this.nextButtonNode.getComponent(cc.Widget).enabled=!1,cc.tween(this.nextButtonNode).to(.15,{y:this.nextButtonNode.originalY,opacity:255}).start())},o.prototype.update=function(){this.updateMoveNextButton()},o.urlPrefab="Spectator",o.bundleName="03_end_game_flow",o.dialogType="NgcSpectatorManager",o.inst=null,a([C(cc.Label)],o.prototype,"pTag",void 0),a([C(c.NgcLabelLocalized)],o.prototype,"pName",void 0),a([C(cc.Node)],o.prototype,"overlay",void 0),a([C(cc.Label)],o.prototype,"totalViewers",void 0),a([C(cc.Label)],o.prototype,"totalViewingYou",void 0),a([C(cc.Sprite)],o.prototype,"pFlag",void 0),a([C(cc.Sprite)],o.prototype,"leadCrown",void 0),a([C(cc.Node)],o.prototype,"hideSpectator",void 0),a([C(cc.Node)],o.prototype,"showSpectator",void 0),a([C(cc.Node)],o.prototype,"disabledSpectator",void 0),a([C(cc.Node)],o.prototype,"spectatedYou",void 0),a([C(cc.Node)],o.prototype,"emojiParent",void 0),a([C(cc.Node)],o.prototype,"bubbleParent",void 0),a([C({type:[cc.Node]})],o.prototype,"hudUIs",void 0),a([C(cc.Node)],o.prototype,"eliminated",void 0),a([C(cc.Node)],o.prototype,"swipeTutorial",void 0),a([C(c.NgcLabelLocalized)],o.prototype,"swipeLabel",void 0),a([C(cc.Node)],o.prototype,"iconSwipe",void 0),a([C(cc.Node)],o.prototype,"icon_hand",void 0),a([C(cc.Node)],o.prototype,"arrowKeys",void 0),a([C(cc.Node)],o.prototype,"nextButtonNode",void 0),a([C()],o.prototype,"nextButtonMoveDistance",void 0),n=a([b],o)}(y.NgcDialogBase);n.NgcSpectatorManager=P,cc._RF.pop()},{"../../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../../GameFramework/Scripts/NgcSceneManager":"NgcSceneManager","../../../../Services/Telemetry/Telemetry":"Telemetry","../../../Dialogs/Script/DialogBase":"DialogBase","../../../Emojis/Script/EmotesManager":"EmotesManager","./SpectatorItem":"SpectatorItem"}],SpineAssembler:[function(e,t,o){"use strict";cc._RF.push(t,"5d682kbf49Mo5+mOPWEXAIl","SpineAssembler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i,a,c,s,l,u,p,d,f,h,g,y,m,_,v,S,N,b=sp.Skeleton,C=sp.spine,P=cc.RenderFlow,I=cc.gfx.VertexFormat,w=I.XY_UV_Color,T=I.XY_UV_Two_Color,O=cc.gfx,R=0,E=[0,1,2,2,3,0],A=cc.color(0,0,255,255),D=cc.color(255,0,0,255),k=cc.color(0,255,0,255),L=cc.color(255,255,0,255),B=null,M=null,F=null,G=null;B=new C.Color(1,1,1,1),M=new C.Color(1,1,1,1),F=new C.Vector2,G=new C.Vector2;var U,x,j,H,z,W,V,K,Y,q,J,X,Z,Q,$,ee,te,oe,ne,re,ie,ae,ce,se,le,ue,pe,de,fe,he=0,ge=0,ye=0,me=0,_e=0,ve=0,Se=0;function Ne(e,t){var o,n;switch(t){case C.BlendMode.Additive:o=i?cc.macro.ONE:cc.macro.SRC_ALPHA,n=cc.macro.ONE;break;case C.BlendMode.Multiply:o=cc.macro.DST_COLOR,n=cc.macro.ONE_MINUS_SRC_ALPHA;break;case C.BlendMode.Screen:o=cc.macro.ONE,n=cc.macro.ONE_MINUS_SRC_COLOR;break;case C.BlendMode.Normal:default:o=i?cc.macro.ONE:cc.macro.SRC_ALPHA,n=cc.macro.ONE_MINUS_SRC_ALPHA}var r=!se.enableBatch,a=se._materials[0];if(!a)return null;var c=e.getId()+o+n+l+r,s=se._materialCache,u=s[c];return u||(s.baseMaterial?u=cc.MaterialVariant.create(a):(u=a,s.baseMaterial=a),u.define("CC_USE_COLOR",r),u.define("CC_USE_MODEL",r),u.define("USE_TINT",l),u.setProperty("texture",e),u.setBlend(!0,O.BLEND_FUNC_ADD,o,n,O.BLEND_FUNC_ADD,o,n),s[c]=u),u}function be(e){re=e.fa*y,Q=f*(a=i?re/255:1),$=h*a,ee=g*a,te=e.fr*Q,oe=e.fg*$,ne=e.fb*ee,m=(re<<24>>>0)+(ne<<16)+(oe<<8)+te,ie=e.dr*Q,ae=e.dg*$,ce=e.db*ee,_=((i?255:0)<<24>>>0)+(ce<<16)+(ae<<8)+ie}var Ce=cc.v4(0,0,0,0);function Pe(e){return(e.a<<24>>>0)+(e.b<<16)+(e.g<<8)+e.r}var Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.updateRenderData=function(e){if(!e.isAnimationCached()){var t=e._skeleton;t&&t.updateWorldTransform()}},t.prototype.fillVertices=function(e,t,o,n,r){var c,s=le._vData,u=le._iData,p=le._uintVData;if(B.a=o.a*t.a*e.a*y*255,a=i?B.a:255,U=f*t.r*e.r*a,x=h*t.g*e.g*a,j=g*t.b*e.b*a,B.r=U*o.r,B.g=x*o.g,B.b=j*o.b,null==r.darkColor?M.set(0,0,0,1):(M.r=r.darkColor.r*U,M.g=r.darkColor.g*x,M.b=r.darkColor.b*j),M.a=i?255:0,n.isClipping()){var d=s.subarray(ye+2);n.clipTriangles(s.subarray(ye),he,u.subarray(ve),_e,d,B,M,l,S);var v=new Float32Array(n.clippedVertices),b=n.clippedTriangles;if(_e=b.length,he=v.length/N*S,c=le.request(he/S,_e),ve=c.indiceOffset,me=c.vertexOffset,ye=c.byteOffset>>2,s=le._vData,u=le._iData,p=le._uintVData,u.set(b,ve),fe){P=0,I=v.length;for(var C=ye;P<I;P+=N,C+=S)F.x=v[P],F.y=v[P+1],B.set(v[P+2],v[P+3],v[P+4],v[P+5]),G.x=v[P+6],G.y=v[P+7],l?M.set(v[P+8],v[P+9],v[P+10],v[P+11]):M.set(0,0,0,0),fe.transform(F,G,B,M),s[C]=F.x,s[C+1]=F.y,s[C+2]=G.x,s[C+3]=G.y,p[C+4]=Pe(B),l&&(p[C+5]=Pe(M))}else for(P=0,I=v.length,C=ye;P<I;P+=N,C+=S)s[C]=v[P],s[C+1]=v[P+1],s[C+2]=v[P+6],s[C+3]=v[P+7],m=(v[P+5]<<24>>>0)+(v[P+4]<<16)+(v[P+3]<<8)+v[P+2],p[C+4]=m,l&&(_=(v[P+11]<<24>>>0)+(v[P+10]<<16)+(v[P+9]<<8)+v[P+8],p[C+5]=_)}else if(fe)for(var P=ye,I=ye+he;P<I;P+=S)F.x=s[P],F.y=s[P+1],G.x=s[P+2],G.y=s[P+3],fe.transform(F,G,B,M),s[P]=F.x,s[P+1]=F.y,s[P+2]=G.x,s[P+3]=G.y,p[P+4]=Pe(B),l&&(p[P+5]=Pe(M));else{m=Pe(B),_=Pe(M);for(P=ye,I=ye+he;P<I;P+=S)p[P+4]=m,l&&(p[P+5]=_)}},t.prototype.realTimeTraverse=function(e){var t,o,n,r,i,a,f,h,g,y,m,_,v=se._skeleton,b=v.color,P=se._debugRenderer,I=se._clipper,w=null;c=se._startSlotIndex,s=se._endSlotIndex,H=!1,-1==c&&(H=!0),u=se.debugSlots,p=se.debugBones,d=se.debugMesh,P&&(p||u||d)&&(P.clear(),P.lineWidth=2),N=l?12:8,he=0,ye=0,me=0,_e=0,ve=0;for(var T=0,O=v.drawOrder.length;T<O;T++)if(m=v.drawOrder[T],c>=0&&c==m.data.index&&(H=!0),H)if(s>=0&&s==m.data.index&&(H=!1),he=0,_e=0,n=m.getAttachment())if(h=n instanceof C.RegionAttachment,g=n instanceof C.MeshAttachment,n instanceof C.ClippingAttachment)I.clipStart(m,n);else if(h||g)if(w=Ne(n.region.texture._texture,m.data.blendMode)){if((z||w.getHash()!==ue.material.getHash())&&(z=!1,ue._flush(),ue.node=pe,ue.material=w),h){if(f=E,he=4*S,_e=6,y=le.request(4,6),ve=y.indiceOffset,me=y.vertexOffset,ye=y.byteOffset>>2,t=le._vData,o=le._iData,n.computeWorldVertices(m.bone,t,ye,S),P&&u){P.strokeColor=A,P.moveTo(t[ye],t[ye+1]);for(var R=ye+S,B=ye+he;R<B;R+=S)P.lineTo(t[R],t[R+1]);P.close(),P.stroke()}}else if(g&&(f=n.triangles,he=(n.worldVerticesLength>>1)*S,_e=f.length,y=le.request(he/S,_e),ve=y.indiceOffset,me=y.vertexOffset,ye=y.byteOffset>>2,t=le._vData,o=le._iData,n.computeWorldVertices(m,0,n.worldVerticesLength,t,ye,S),P&&d))for(P.strokeColor=L,R=0,B=f.length;R<B;R+=3){var M=f[R]*S+ye,F=f[R+1]*S+ye,G=f[R+2]*S+ye;P.moveTo(t[M],t[M+1]),P.lineTo(t[F],t[F+1]),P.lineTo(t[G],t[G+1]),P.close(),P.stroke()}if(0!=he&&0!=_e){o.set(f,ve),a=n.uvs;for(var U=ye,x=ye+he,j=0;U<x;U+=S,j+=2)t[U+2]=a[j],t[U+3]=a[j+1];if(r=n.color,i=m.color,this.fillVertices(b,r,i,I,m),_e>0){for(R=ve,B=ve+_e;R<B;R++)o[R]+=me;if(e)for(_=e.m,K=_[0],Y=_[4],q=_[12],J=_[1],X=_[5],Z=_[13],R=ye,B=ye+he;R<B;R+=S)W=t[R],V=t[R+1],t[R]=W*K+V*Y+q,t[R+1]=W*J+V*X+Z;le.adjust(he/S,_e)}I.clipEndWithSlot(m)}else I.clipEndWithSlot(m)}else I.clipEndWithSlot(m);else I.clipEndWithSlot(m);else I.clipEndWithSlot(m);else I.clipEndWithSlot(m);if(I.clipEnd(),P&&p){var Q=void 0;P.strokeColor=D,P.fillColor=A;var $=0;for(x=v.bones.length;$<x;$++){var ee=(Q=v.bones[$]).data.length*Q.a+Q.worldX,te=Q.data.length*Q.c+Q.worldY;P.moveTo(Q.worldX,Q.worldY),P.lineTo(ee,te),P.stroke(),P.circle(Q.worldX,Q.worldY,1.5*Math.PI),P.fill(),0===$&&(P.fillColor=k)}}},t.prototype.cacheTraverse=function(e){var t=se._curFrame;if(t){var o=t.segments;if(0!=o.length){var n,r,i,a,c,s,l=t.vertices,u=t.indices,p=0,d=0,f=0;e&&(s=e.m,K=s[0],J=s[1],Y=s[4],X=s[5],q=s[12],Z=s[13]);var h=16&R,g=h&&1===K&&0===J&&0===Y&&1===X,y=0,v=t.colors,S=v[y++],N=S.vfOffset;be(S);for(var b=0,C=o.length;b<C;b++){var P=o[b];if(a=Ne(P.tex,P.blendMode)){(z||a.getHash()!==ue.material.getHash())&&(z=!1,ue._flush(),ue.node=pe,ue.material=a),ge=P.vertexCount,_e=P.indexCount,c=le.request(ge,_e),ve=c.indiceOffset,me=c.vertexOffset,Se=c.byteOffset>>2,n=le._vData,r=le._iData,i=le._uintVData;for(var I=ve,w=ve+_e;I<w;I++)r[I]=me+u[d++];if(f=P.vfCount,n.set(l.subarray(p,p+f),Se),p+=f,g)for(I=Se,w=Se+f;I<w;I+=6)n[I]+=q,n[I+1]+=Z;else if(h)for(I=Se,w=Se+f;I<w;I+=6)W=n[I],V=n[I+1],n[I]=W*K+V*Y+q,n[I+1]=W*J+V*X+Z;if(le.adjust(ge,_e),de){var T=p-f;for(I=Se+4,w=Se+4+f;I<w;I+=6,T+=6)T>=N&&(be(S=v[y++]),N=S.vfOffset),i[I]=m,i[I+1]=_}}}}}},t.prototype.customTraverse=function(){var e=se._curFrame;if(e){var t=e.segments;if(0!=t.length){var o,n,r,c,s,l=e.vertices,u=e.indices,p=0,d=0,m=0,_=0,v=e.colors[_++];re=(s=v).fa*y,Q=f*(a=i?re/255:1),$=h*a,ee=g*a,Ce.x=s.fr*Q/255,Ce.y=s.fg*$/255,Ce.z=s.fb*ee/255,Ce.w=re/255;for(var S=0,N=t.length;S<N;S++){var b=t[S];if((r=Ne(b.tex,b.blendMode)).setProperty("nodeColor",Ce),r){if((z||r.getHash()!==ue.material.getHash())&&(z=!1,ue._flush(),ue.node=pe,ue.material=r),ge=b.vertexCount,_e=b.indexCount,c=le.request(ge,_e),ve=c.indiceOffset,me=c.vertexOffset,Se=c.byteOffset>>2,o=le._vData,n=le._iData,0===me)n.set(u.subarray(d,d+_e),ve);else for(var C=ve,P=ve+_e;C<P;C++)n[C]=me+u[d++];m=b.vfCount,o.set(l.subarray(p,p+m),Se),p+=m,le.adjust(ge,_e)}}}}},t.prototype.fillBuffers=function(e,t){var o=e.node;if(o._renderFlag|=P.FLAG_UPDATE_RENDER_DATA,e._skeleton){var n=o._color;f=n.r/255,h=n.g/255,g=n.b/255,y=n.a/255,l=e.useTint||e.isAnimationCached(),v=l?T:w,S=l?6:5,pe=e.node,ue=t,se=e,z=!0,i=e.premultipliedAlpha,a=1,R=0,de=!1,fe=e._effectDelegate&&e._effectDelegate._vertexEffect,(4294967295!==n._val||i)&&(de=!0),l&&(R|=1);var r=void 0,c=se.enableBatch;if(c&&(r=pe._worldMatrix,z=!1,R|=16),c)e.isAnimationCached()?(le=t.getBuffer("spine",v),this.cacheTraverse(r)):(le=t.getBuffer("spine",v),fe&&fe.begin(e._skeleton),this.realTimeTraverse(r),fe&&fe.end());else{var s=e._independent_buffer;s||(s=new cc.SpineBuffer(t,v),e._independent_buffer=s),z=!0,(le=s).reset(),this.customTraverse(),le.uploadData()}t.worldMatDirty++,e.attachUtil._syncAttachedNode(),pe=void 0,le=void 0,ue=void 0,se=void 0,fe=null}},t.prototype.postFillBuffers=function(e,t){t.worldMatDirty--},t}(cc.Assembler);o.default=Ie,cc.Assembler.register(b,Ie),sp.Skeleton.prototype.onDestroy=function(){cc.RenderComponent.prototype.onDestroy.call(this),this._independent_buffer&&(this._independent_buffer.destroy(),this._independent_buffer=null)},sp.Skeleton.prototype.setSkin=function(e){var t=this._skeleton&&this._skeleton.skin;t&&t.name==e||(this._skeleton&&(this._skeleton.setSkinByName(e),this._skeleton.setSlotsToSetupPose()),this.invalidAnimationCache())};var we=!1;sp.Skeleton.prototype._updateCache=function(e){var t=this._frameCache;if(t.isInited()){we||(t.__proto__.updateToFrame=function(e){if(this._inited&&(this.begin(),this._needToUpdate(e))){var t=this._skeletonInfo,o=t.skeleton,n=t.clipper,r=t.state;do{o.update(.1),r.update(.1),r.apply(o),o.updateWorldTransform(),this._frameIdx++,this._updateFrame(o,n,this._frameIdx),this.totalTime+=.1}while(this._needToUpdate(e));this.end()}},we=!0);var o=t.frames;0==this._accTime&&0==this._playCount&&(this._startEntry.animation.name=this._animationName,this._listener&&this._listener.start&&this._listener.start(this._startEntry)),this._accTime+=e;var n=Math.floor(this._accTime/.1);if(t.isCompleted||t.updateToFrame(n),t.isCompleted&&n>=o.length){if(this._playCount++,this._playTimes>0&&this._playCount>=this._playTimes)return this._curFrame=o[o.length-1],this._accTime=0,this._playCount=0,this._isAniComplete=!0,void this._emitCacheCompleteEvent();this._accTime=0,n=0,this._emitCacheCompleteEvent()}this._curFrame=o[n]}},cc._RF.pop()},{}],SpriteLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"69db4hD6xFJLoKeiZ8sgJWq","SpriteLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSpriteLocalized=void 0;var a=e("./LocalizedManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._keyStr="SPRITE_FRAME_KEY",t}return r(t,e),Object.defineProperty(t.prototype,"spriteFrameKey",{get:function(){return this._keyStr},set:function(e){this._keyStr=e,a.NgcLocalizedManager.getSpriteFrame(e)&&this.spriteFrame&&(this.spriteFrame=a.NgcLocalizedManager.getSpriteFrame(e))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){a.NgcLocalizedManager.spriteLocalizeds.push(this),this.spriteFrameKey=this.spriteFrameKey},i([l],t.prototype,"_keyStr",void 0),i([l({tooltip:"Enter SPRITE_FRAME_KEY key here"})],t.prototype,"spriteFrameKey",null),i([s],t)}(cc.Sprite);o.NgcSpriteLocalized=u,cc._RF.pop()},{"./LocalizedManager":"LocalizedManager"}],StartInputHandler:[function(e,t,o){"use strict";cc._RF.push(t,"4ecb4RprwFKU7erSElwzl18","StartInputHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return r(t,e),t.prototype.start=function(){},i([s(cc.Label)],t.prototype,"label",void 0),i([s],t.prototype,"text",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],StartMain:[function(t,o,n){"use strict";cc._RF.push(o,"319f9Fy9wlM9J6LRzS/945k","StartMain");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager"),u=t("../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager"),p=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),d=t("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),f=t("../../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeManager"),h=t("../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),g=t("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarEditNameDialog"),y=t("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),m=t("../../../NanoGameCore/CrossFeatures/RealPrize/Script/NgcRealPrizeManager"),_=t("../../../NanoGameCore/CrossFeatures/TabBar/Script/TabBarManager"),v=t("../../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),S=t("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),N=t("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),b=t("../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),C=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),P=t("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),I=t("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),w=t("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),T=t("../../../NanoGameCore/GameFramework/Scripts/NgcShopManager"),O=t("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),R=t("../../../NanoGameCore/SDK/Nano/NanoSrv"),E=t("../../../NanoGameCore/SDK/SDK"),A=t("../../../NanoGameCore/Services/Ads/Ads"),D=t("../../../NanoGameCore/Services/DailyReward/DailyReward"),k=t("../../../NanoGameCore/Services/Inventory/Inventory"),L=t("../../../NanoGameCore/Services/Leaderboard/Leaderboard"),B=t("../../../NanoGameCore/Services/Platform/Platform"),M=t("../../../NanoGameCore/Services/ServicesMgr"),F=t("../../../NanoGameCore/Services/Social/Social"),G=t("../../../NanoGameCore/Services/Telemetry/Telemetry"),U=t("../../CarSelector/CarSkinSelecter"),x=t("../../Config"),j=t("../../CrossPromotion/CrossPromotionManager"),H=t("../../Currency/Currency"),z=t("../../Dialog/OptionDialog/OptionDialog"),W=t("../../FTUE/FTUEManager"),V=t("../../League/LeagueManager"),K=t("../../Main"),Y=t("../../Maps/DrawMap"),q=t("../../Network/ImprovedNetClient"),J=t("../../Network/NetClient"),X=t("../../ScreenManager"),Z=t("../../SoundManager"),Q=t("../../SpecialOffer/SpecialOffer"),$=t("../../Tracking/TrackingManager"),ee=t("../../TuningData"),te=t("../../UI/DigitCountUp"),oe=t("../../UI/FlyingCoin"),ne=t("../../UI/FullScreenButton"),re=t("../../UserInfo"),ie=t("../../Utils/ConstConfig"),ae=t("../../Utils/Util"),ce=t("../PartyRoomScreen/PartyRoomManager"),se=cc._decorator,le=se.ccclass,ue=se.property,pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.FixedPosUI=null,t.BtnOnOffNavBar=null,t.RightPanel=null,t.percentOfBeatPlayers=null,t.playerNameBox=null,t.playerNameEditBox=null,t.tapToStart=null,t.connectingToNetwork=null,t.loadingNode=null,t.partyRoomButton=null,t.coinCountUp=null,t._curCoin=0,t.bestTimeLb=null,t.lbYouBeat=null,t.playingCoinAnimation=null,t.TUTORIAL_MAP="map/track000",t.loggedoutIcon=null,t.isDailyRewardLoading=!1,t.isPlatformStarted=!1,t._isFisrtRace=!0,t.tapToPlayLb=null,t.isNeedShowDailyReward=!1,t.shouldGoToPartyRoom=!1,t.needUpdateCountryToServer=!1,t.localcountry="",t.fullScreenManager=null,t.carOption=null,t.GIF=null,t.luckyboosterParent=null,t.luckyBoosterPrefab=null,t._curStar=0,t._isMultiLoggedinDialogShowed=!1,t.debugDisplayEnableTapCounter=0,t.debugDisplayTapLastTime=0,t._playerClickStarGame=!1,t._startGameAutomatic=!0,t.updateRank=!1,t.compareLeaguenLeaderboard=!1,t.LAST_POS=15,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"curCoin",{get:function(){return this._curCoin},set:function(e){e!=this._curCoin&&(this.coinCountUp&&this.coinCountUp.countFrom(this._curCoin,e,.5),this._curCoin=e)},enumerable:!1,configurable:!0}),t.prototype.updateCoin=function(e){this.curCoin=e},Object.defineProperty(t.prototype,"curStar",{get:function(){return this._curStar},set:function(e){this._curStar=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){return c(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e.prototype.onLoad.call(this),cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative&&!K.Main.inst.isFTUE()&&K.Main.inst.showTransition(),[4,U.default.init()];case 1:return t.sent(),o.inst=this,R.default.setAccessTokenOutOfDateCallback(function(){o.inst._isMultiLoggedinDialogShowed||(o.inst.displayLogoutNoticeDialog(),o.inst._isMultiLoggedinDialogShowed=!0)}),cc.sys.isMobile||cc.view.on("canvas-resize",this.onResized,this),f.NgcGameModeManager.inst.setPlayButtonClickCallback(this.showLeagueUI.bind(this)),this.createLuckyBooster(),l.default.init(),[2]}})})},t.prototype.createLuckyBooster=function(){},t.prototype.applyBoosterFX=function(){},t.prototype.onUserChangeName=function(){this.updateNameBox()},t.prototype.start=function(){return c(this,void 0,void 0,function(){var t,o,n,r,i,a,c;return s(this,function(){return e.prototype.start.call(this),t=cc.find("Canvas"),(o=this.loadingNode.getComponent(cc.Widget))&&(o.target=t,o.updateAlignment()),y.NgcNavBarManager.inst.setChangeNameCallBack(this.onUserChangeName.bind(this)),cc.error("HIEEEEEEEEE"),this.tapToPlayLb.node.parent.active=!1,this.connectingToNetwork.node.active=!0,n=this,this.node.on("onStartGame",function(){n.playerClickedStart()},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.tapToPlayLb&&((r=this.tapToPlayLb.node.getParent()).active=!0,cc.log("TMB_TAP_TO_RACE",P.NgcLocalizedManager.t("TMB_TAP_TO_RACE").text),this.tapToPlayLb.setLocalizedText(cc.sys.isMobile?"TMB_TAP_TO_RACE":"TMB_CLICK_TO_RACE"),r.active=!1),""!=(i=re.UserInfo.getStringValue(ie.ConstConfig.SAVE_KEY.COUNTRY))&&(this.updateUserFlag(i),this.localcountry=i),a=re.UserInfo.getStringValue(ie.ConstConfig.SAVE_KEY.RANK_PERCENT_COUNTRY),this.lbYouBeat&&(""==a&&(a="0"),c=P.NgcLocalizedManager.t("TMB_TOP_XX_WORLD").text,this.lbYouBeat.string=c.replace("XX",a)),y.NgcNavBarManager.inst.setOnNavBarCloseCallback(function(){}),y.NgcNavBarManager.inst.setOnNavBarShowCallback(function(){}),[2]})})},t.prototype.onDeactivate=function(){var e;null===(e=S.default.inst)||void 0===e||e.hide(S.NgcPointcuts.bannerMainMenu)},t.prototype.reset=function(){K.Main.inst.isFTUE()&&(this._startGameAutomatic=!0),this.hideLeaugeUI()},t.prototype.onResume=function(){cc.log("debug StartMain onResume"),this.activateRoutine()},t.prototype.startupPlatform=function(){var e=this;E.NgcSDK.env={},M.NgcServicesMgr.isLoggedIn?o.inst.onPlatformStartCompleted():M.NgcServicesMgr.preInit(N.NgcBuildConfig).then(function(){var t=M.NgcServicesMgr.initServices(N.NgcBuildConfig);t.then(function(e){cc.log("Services Initialization finished: ",e);var t=R.default.inst.getCurGameInfo()._custom;ee.default.parseData(t),H.default.isLoaded||H.default.parse(R.default.inst.getCurGameInfo()._custom.Currency,!1);var n=R.default.inst.getCurGameInfo()._custom.CarIsometric;U.default.parse(n.data.table),o.inst.onPlatformStartCompleted(),M.NgcServicesMgr.isInitialized=!0}),t.catch(function(t){return c(e,void 0,void 0,function(){return s(this,function(){return cc.error("Failed to startup platform services: ",t),N.NgcBuildConfig.offlineMode||v.default.showNetworkDisconnect(),[2]})})})})},t.prototype.onSocialLogin=function(){this.updateNameBox()},t.prototype.onSocialLogout=function(){this.resetData(!1,!1)},t.prototype.onPlatformStartCompleted=function(){var e,t,n,r;return c(this,void 0,void 0,function(){var i,a=this;return s(this,function(){return(null===(e=v.default.inst)||void 0===e?void 0:e.checkServerMaintenanceAndShowPopup())?[2]:(F.NgcSocial.inst&&(F.NgcSocial.inst.setOnLoginSuccesCallback(this.onSocialLogin.bind(this)),F.NgcSocial.inst.setOnLogoutSuccesCallback(this.onSocialLogout.bind(this))),T.NgcShopManager.getInstance().loadData(!1,function(){o.inst.updateUserInfo().then(function(){cc.error("Load data shop")})}),D.NgcDailyReward.inst&&D.NgcDailyReward.inst.onLogin(function(e){e?a.isNeedShowDailyReward=!1:K.Main.inst.isFTUE()||(a.isNeedShowDailyReward=!ce.NgcPartyRoomManager.mustGoToPartyRoom())}),cc.log("NgcNanoSrv.inst.loginData",R.default.inst.loginData),cc.log("NgcCountryFlagsManager.localCountry",b.NgcCountryFlagsManager.localCountry),(null===(n=null===(t=R.default.inst)||void 0===t?void 0:t.loginData)||void 0===n?void 0:n.country)||b.NgcCountryFlagsManager.localCountry?R.default.inst&&(!R.default.inst.loginData.country||""==R.default.inst.loginData.country||R.default.inst.loginData.country&&R.default.inst.loginData.country!==b.NgcCountryFlagsManager.localCountry)&&K.Main.inst.updateNameToNanosrv():(this.needUpdateCountryToServer=!0,cc.log("Schedule to update Country to Server")),null===(r=l.default.crownRoadUIInst)||void 0===r||r.checkRefreshUI(),N.NgcBuildConfig.offlineMode||(y.NgcNavBarManager.inst.updateRemote(),m.default.getInstance().getEventList()),u.NgcDailyRewardManager.inst.checkReward(),B.NgcPlatform.inst.requestWebLoginButtonStatus(!0),o.inst.loadingNode.active=!1,o.inst.updatePercentofBeatPlayers(),o.inst.updateNameBox(),o.inst.isPlatformStarted=!0,ce.NgcPartyRoomManager.mustGoToPartyRoom()?(this.shouldGoToPartyRoom=!0,this.loadingNode.active=!0,_.NgcTabBarManager.inst.disableTabButtons()):this.shouldGoToPartyRoom=!1,B.NgcPlatform.inst.checkLoginData(),(i=R.default.inst.getCurSocialInfo())&&("uplay"===i.platform||"ubiconnect"===i.platform?(cc.log("Already login uplay"),F.NgcSocial.inst=F.NgcSocial.getSrvInstance(F.SocialType.Uplay)):"facebook"===i.platform&&(cc.log("Already login facebook"),F.NgcSocial.inst=F.NgcSocial.getSrvInstance(F.SocialType.Facebook))),R.default.inst&&(!R.default.inst.loginData.country||""==R.default.inst.loginData.country||R.default.inst.loginData.country&&R.default.inst.loginData.country!==b.NgcCountryFlagsManager.localCountry)&&(B.NgcPlatform.isOfflineMode()||K.Main.inst.updateNameToNanosrv()),B.NgcPlatform.isOfflineMode()||(G.NgcTelemetry.inst&&G.NgcTelemetry.inst.getParameter("test_item_price").then(function(e){e&&e.asString()?ie.ConstConfig.SHOP.UNLOCK_ITEM_PRICE=e.asNumber():cc.log("[RemoteConfig] `start` test_item_price NOT FOUND in Firebase remote config")}).catch(),y.NgcNavBarManager.inst.updateRemote()),[2])})})},t.prototype.uploadBestScore=function(e){var t="/playerdata/"+N.NgcBuildConfig.platformGameID+"/"+R.default.inst.userID,o={_bestScore:e};R.default.inst.servicePost(t,JSON.stringify(o),function(e){e||cc.log("update best score success")})},t.prototype.isFeedReady=function(){return this.isPlatformStarted},t.prototype.setActiveInputName=function(e){this.playerNameEditBox.enabled=e;var t=this.playerNameEditBox.node.getChildByName("BACKGROUND_SPRITE_DISABLE"),o=this.playerNameEditBox.node.getChildByName("BACKGROUND_SPRITE");t&&(t.active=!e),o&&(o.active=e);var n=this.playerNameEditBox.node.getChildByName("TEXT_LABEL");n&&(n.color=e?cc.Color.BLACK:cc.Color.BLACK.fromHEX("8b8b8b"))},t.prototype.activateRoutine=function(){var e;I.NgcMain.setAppContext(I.AppContext.MainMenu),K.Main.inst.isFTUE()||this.scheduleOnce(function(){Z.default.inst.playStartScreenMusic()},.5),!K.Main.inst.isFTUE()&&(null===(e=S.default.inst)||void 0===e?void 0:e.hasAds(A.AdsType.Banner))&&(S.default.inst.showBanner(S.NgcPointcuts.bannerMainMenu),this.adsBannerAlign(!0)),this.startupPlatform(),N.NgcBuildConfig.offlineMode||(N.NgcBuildConfig.useNgcServer?q.default.inst.isConnected()||q.default.inst.connect():J.default.inst.isConnected()||J.default.inst.startConnectCycle()),$.default.getInst()&&($.default.getInst().LogEvent_EnterScreen("MainMenu"),N.NgcBuildConfig.offlineMode||window.parent.postMessage({EnterMainMenu:!0},"*")),this.updateRank=!1,this.hideLeaugeUI(),new Promise(function(e){Y.default.loadPrefab(K.Main.inst.isFTUE()),e()}),this.showBannerAds(),f.NgcGameModeManager.inst.checkForGameModeUnlocking(),v.default.inst.onGameplayOver()},t.prototype.onActivate=function(){cc.log("debug StartMain onActivate"),this.node.parent.opacity=255,this.activateRoutine(),cc.systemEvent.on("refreshNameBox",this.updateNameBox,this)},t.prototype.updateLoginSocial=function(){this.compareLeaguenLeaderboard=!1,this.updateRank=!1,this.updateNameBox()},t.prototype.cheat=function(){this.updateBestTime(re.UserInfo.bestScore,!0)},t.prototype.updateBestTime=function(e,t){var o=this;void 0===t&&(t=!0);var n,r=re.UserInfo.bestScore,i=V.default.inst.lastBestScore;if(this.bestTimeLb)if(r<i){n=Math.ceil((i-r)/1.5*.1);var a={_lastScore:i};cc.tween(a).repeat(15,cc.tween().by(.1,{_lastScore:-n}).call(function(){a._lastScore<r&&(a._lastScore=r),o.bestTimeLb.string="<outline color=#f9ac24 width=3>"+ae.default.msToTime(a._lastScore)+"</outline>"})).call(function(){o.bestTimeLb.string=ae.default.msToTime(e),V.default.inst.lastBestScore=r}).start()}else this.bestTimeLb.string=ae.default.msToTime(e),V.default.inst.lastBestScore=r},t.prototype.cycleRabbidSkin=function(){},t.prototype.onTapDown=function(){K.Main.inst.isRelease()||(this.debugDisplayEnableTapCounter++,10==this.debugDisplayEnableTapCounter&&(K.Main.inst.enableDebugDisplay(!K.Main.inst.debugDisplayEnabled),cc.log("Debug display: "+(K.Main.inst.debugDisplayEnabled?"enabled":"disabled"))),Date.now()-this.debugDisplayTapLastTime>300&&(this.debugDisplayEnableTapCounter=1),this.debugDisplayTapLastTime=Date.now())},t.prototype.onTapUp=function(){},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:this.handleBackKey();break;case cc.macro.KEY.space:}},t.prototype.onKeyUp=function(){},t.prototype.handleBackKey=function(){y.NgcNavBarManager.inst&&K.Main.inst.appState!=K.AppState.Game&&y.NgcNavBarManager.inst.onQuitGame()},t.prototype.showGIF=function(e){this.GIF.active=e},t.prototype.showLeagueUI=function(){if(this.showGIF(!1),cc.log("debug show league ui"),this.compareLeaguenLeaderboard&&(cc.log("debug show league ui 2"),Q.default.inst.hide(),K.Main.inst.appState==K.AppState.StartScreen))if(K.Main.inst.userNameIsValid()){if(cc.log($.default.getInst()),$.default.getInst()?$.default.getInst().LogEvent_EnterScreen("TrackScreen"):cc.log("Null Obect"),K.Main.inst.isFTUE())return;V.default.inst.show(),Z.default.inst.playSFX(Z.AudioClips.expandMenu_sfx)}else this.playerNameEditBox.focus()},t.prototype.hideLeaugeUI=function(){K.Main.inst.isFTUE()||V.default.inst&&V.default.inst.isShow()&&V.default.inst.hide()},t.prototype.fullScreenButtonOnClick=function(){cc.screen.fullScreen()?cc.screen.exitFullScreen():cc.screen.requestFullScreen()},t.prototype.playerClickedStart=function(){return c(this,void 0,void 0,function(){var e=this;return s(this,function(){return!o.inst.isDailyRewardLoading&&Y.default.isLoaded(K.Main.inst.isFTUE())&&K.Main.inst.isResetGameDone()&&!this._playerClickStarGame&&K.Main.inst.appState!=K.AppState.Game&&o.inst&&_.NgcTabBarManager.inst&&K.Main.inst?(this._playerClickStarGame=!0,K.Main.inst.userNameIsValid()?(this._isFisrtRace&&(this._isFisrtRace=!1,cc.sys.isMobile||(cc.screen.requestFullScreen(),this.fullScreenManager)),this.loadingNode.active=!0,K.Main.inst.setState(K.AppState.Game),Z.default.inst.playSFX(Z.AudioClips.startGame_sfx),this.loadingNode.active=!1,window.parent.postMessage&&window.parent.postMessage({playerClickedStartSuccess:!0},"*"),setTimeout(function(){e._playerClickStarGame=!1},1e3)):(cc.log("Name invalid"),this.playerNameEditBox.focus()),[2]):(cc.warn("Map Prefabs is loading"),cc.warn("DrawMap.isLoaded(Main.inst.isFTUE()",Y.default.isLoaded(K.Main.inst.isFTUE())),cc.warn("this._playerClickStarGame",this._playerClickStarGame),cc.warn("Main.inst.isResetGameDone()",K.Main.inst.isResetGameDone()),cc.warn("Main.inst.appState == AppState.Game",K.Main.inst.appState==K.AppState.Game),[2])})})},t.prototype.playerClickedShop=function(){},t.prototype.playerClickedPartyRoom=function(){o.inst.isPlatformStarted&&K.Main.inst.appState!=K.AppState.Game&&(K.Main.inst.appState===K.AppState.PartyScreen||null==b.NgcCountryFlagsManager.localCountry&&""==this.localcountry||(K.Main.inst.setState(K.AppState.PartyScreen),cc.log("Click Party Room")))},t.prototype.workStartButtonNetworkConnect=function(){if(ee.default.isLoaded()){var e=J.default.inst.isConnected()||x.default.OFFLINE_MODE;this.connectingToNetwork.node.active=!e,this.carOption&&(this.carOption.active=!0)}},t.prototype.update=function(e){return c(this,void 0,void 0,function(){var t,n=this;return s(this,function(){return this.workStartButtonNetworkConnect(e),this.needUpdateCountryToServer&&b.NgcCountryFlagsManager.localCountry&&(this.needUpdateCountryToServer=!1,K.Main.inst.updateNameToNanosrv(),cc.log("Update Country to server")),this.isNeedShowDailyReward&&U.default.finishedLoadCarSkins&&0!=Object.keys(D.NgcDailyReward.inst.rewardSchedule).length&&(u.NgcDailyRewardManager.inst.checkReward(),cc.log("#check Reward"),this.isNeedShowDailyReward=!1),this.updateRank||K.Main.inst.isFTUE()||!this.isFeedReady()||(this.updateRank=!0,this.updateUserFlag(b.NgcCountryFlagsManager.localCountry),this.updateBestScore()),t=N.NgcBuildConfig.useNgcServer&&q.default.inst.isConnected()||J.default.inst.isConnected(),!N.NgcBuildConfig.offlineMode&&t&&o.inst.isPlatformStarted&&this.shouldGoToPartyRoom&&P.NgcLocalizedManager.jsonData.length>0&&(null!=b.NgcCountryFlagsManager.localCountry||""!=this.localcountry)&&(this.shouldGoToPartyRoom=!1,this.loadingNode.active=!0,this.scheduleOnce(function(){n.loadingNode.active=!1,n.scheduleOnce(function(){_.NgcTabBarManager.inst.enableTabButtons()},1),K.Main.inst.setState(K.AppState.PartyScreen)},3)),[2]})})},t.prototype.CanJointParty=function(){return o.inst.isPlatformStarted&&ee.default.isLoaded()},t.prototype.openCrossSectionPromote=function(e){j.default.getInstance().openCrossSectionPromote(e.target.parent)},t.prototype.openPopupSectionPromote=function(e){j.default.getInstance().openPopupSectionPromote(null,e.target.parent)},t.prototype.openMarqueeSectionPromote=function(e){j.default.getInstance().openMarqueeSectionPromote(e.target.parent)},t.prototype.openHighlightedSectionPromote=function(e){j.default.getInstance().openHighlightedSectionPromote(e.target.parent)},t.prototype.settingOnClick=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return this.loadingNode.active=!0,[4,p.NgcDialogManager.createDialog(z.default.dialogType,z.default.urlPrefab,z.default.bundleName)];case 1:return e=o.sent(),this.loadingNode.active=!1,(t=e.getComponent(z.default)).init(function(){}),t.show(),[2]}})})},t.prototype.changeLanguage=function(){return c(this,void 0,void 0,function(){return s(this,function(){return[2]})})},t.prototype.leaderBoardOnClick=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(){return e=K.Main.inst.appState==K.AppState.StartScreen,o.inst&&!h.NgcLeaderboardManager.inst.isInitalizing()&&o.inst.isPlatformStarted&&e?(X.default.inst.goToLeaderBoardScreen(),[2]):[2]})})},t.prototype.updateUserInfo=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,re.UserInfo.updateInventoryWithPlatform()];case 1:return e.sent(),[2]}})})},t.prototype.redirectToShop=function(){_.NgcTabBarManager.inst.selectTabByIndex(0)},t.prototype.updateUserFlag=function(e){re.UserInfo.setStringValue(e,ie.ConstConfig.SAVE_KEY.COUNTRY)},t.prototype.updatePercentofBeatPlayers=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return N.NgcBuildConfig.offlineMode?[2]:[4,h.NgcLeaderboardManager.inst.getPercentOfBeatPlayers()];case 1:return null===(e=t.sent())&&(e=0),P.NgcLocalizedManager.setTextKey(o.inst.percentOfBeatPlayers,"BEAT_XX_PLAYERS",[e.toString()]),[2]}})})},t.prototype.displayLogoutNoticeDialog=function(){return c(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return cc.log("displayLogoutNoticeDialog"),e=re.UserInfo.getStringValue(ie.ConstConfig.SAVE_KEY.GAME_RUNNING_SESSION),cc.log("#key",e),cc.log("#UserInfo.sessionKey",re.UserInfo.sessionKey),e==re.UserInfo.sessionKey?(o.inst.resetData(!0,!0),cc.log("#Clear all save key becuase use different browser")):cc.log("#Do nothing becuase using the same browser"),[4,p.NgcDialogManager.createDialog(d.NgcNoticeDialog.dialogType,d.NgcNoticeDialog.urlPrefab,d.NgcNoticeDialog.bundleName)];case 1:return t.sent().getComponent(d.NgcNoticeDialog).init(P.NgcLocalizedManager.t("NTM_ERROR").text,P.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){O.default.resetWhenLoggedInFromAnotherPlace(function(){re.UserInfo.resetPrivateData()})},this.loggedoutIcon),[2]}})})},t.prototype.updateOldVersionContent=function(){O.default.socialId&&!O.default.isNameCorrectFormat(O.default.localUserName)&&(O.default.localUserName=K.Main.inst.localUserName=re.UserInfo.correctNameFormat(O.default.localUserName),K.Main.inst.updateNameToNanosrv())},t.prototype.resetData=function(e,t){var n=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),y.NgcNavBarManager.inst.isPopUpShowing())for(var r=p.NgcDialogManager.getShowingPopUps().length;r>0;r--)p.NgcDialogManager.destroyAllPopUps();u.NgcDailyRewardManager.inst.isDailyRewardActive()&&(u.NgcDailyRewardManager.inst.getDailyRewardUINode().active=!1),y.NgcNavBarManager.inst.hideNabarOnClick(),y.NgcNavBarManager.inst.showAllNavBar(!0),re.UserInfo.clearSaveKeys(t),t||(re.UserInfo.curFTUEStep=W.FTUE_STEP.FINISHED_ALL_FTUE),this.updateBestTime(0,!1),this.curCoin=re.UserInfo.curCoin=0,cc.log("reset coin"),e?R.default.inst.resetUserID().finally(function(){K.Main.inst.createFakeName(),cc.log("#Rest name",O.default.localUserName),n.isNeedShowDailyReward=!0,o.inst.updateNameBox(),k.NgcInventory.inst.forceFetchInventory().then(function(){re.UserInfo.updateInventoryWithPlatform().then(function(){U.default.inst.reset()})}),O.default.totalSessions=1,n.updateLoginSocial(),re.UserInfo.isDailyRewardAlreadyShow=!1,V.default.clearCached()}):(cc.log("#Rest name",O.default.localUserName),this.isNeedShowDailyReward=!0,o.inst.updateNameBox(),k.NgcInventory.inst.forceFetchInventory().then(function(){re.UserInfo.updateInventoryWithPlatform().then(function(){U.default.inst.reset()})}),O.default.totalSessions=1,this.updateLoginSocial(),re.UserInfo.isDailyRewardAlreadyShow=!1,V.default.clearCached())},t.prototype.updateBestScore=function(){return c(this,void 0,void 0,function(){var e,t,o=this;return s(this,function(n){switch(n.label){case 0:return this.compareLeaguenLeaderboard?[3,2]:[4,V.default.inst.loadTopLeague()];case 1:(e=n.sent())&&V.default.inst.initData(e),this.compareLeaguenLeaderboard=!0,n.label=2;case 2:return t=V.default.inst.getBestScore(),N.NgcBuildConfig.offlineMode||this.getPlayerRank(function(e,n){return c(o,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return this.lbYouBeat.string=P.NgcLocalizedManager.t("TMB_TOP_XX_WORLD").text.replace("XX",e.toString()),re.UserInfo.setStringValue(e.toString(),ie.ConstConfig.SAVE_KEY.RANK_PERCENT_COUNTRY),n&&n==t?[3,2]:(cc.error("debug mismatch score in updateBestScore > getPlayerRank, cloud table says "+t+", cloud total score says "+n),t>45e4?(n=t,[4,L.NgcLeaderboard.inst.uploadScore(t,"CH")]):[3,2]);case 1:o.sent(),this.updateRank=!1,o.label=2;case 2:return n&&(re.UserInfo.bestScore=n,this.updateBestTime(n)),[2]}})})}),[2]}})})},t.prototype.getPlayerRank=function(e){return c(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return[4,h.NgcLeaderboardManager.inst.getLocalPlayerRank(L.TimeFilterType.AllTime,L.PopulationFilterType.Worldwide)];case 1:return t=n.sent(),cc.log("rank",t),0,o=null==t.rank||""==t.rank?t.minRank+1:parseInt(t.rank),e(o,t.score),[2]}})})},t.prototype.onNameBoxClick=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,p.NgcDialogManager.createDialog(g.NgcNavBarEditNameDialog.dialogType,g.NgcNavBarEditNameDialog.urlPrefab,g.NgcNavBarEditNameDialog.bundleName)];case 1:return e.sent().getComponent(g.NgcNavBarEditNameDialog).show(),[2]}})})},t.prototype.updateNameBox=function(){O.default.isUserLogined()?o.inst.playerNameBox.active=!1:o.inst.playerNameBox.active=!O.default.changedName,o.inst.playerNameBox.active&&(o.inst.playerNameBox.getComponentInChildren(cc.Label).string=O.default.localUserName),y.NgcNavBarManager.inst.setNavBarInfo()},t.prototype.adsBannerAlign=function(e){if(!K.Main.inst.activeAlgin){if(cc.sys.isMobile)return;if(e){var t=cc.view.getFrameSize().height/cc.winSize.height;X.default.inst.navBarIconNode&&(X.default.inst.navBarIconNode.getComponent(cc.Widget).top=100/t),X.default.inst.navBarIconNode&&(X.default.inst.navBarIconNode.getComponent(cc.Widget).top=110/t),this.RightPanel&&(this.RightPanel.getComponent(cc.Widget).top=110/t)}else X.default.inst.navBarIconNode&&(X.default.inst.navBarIconNode.getComponent(cc.Widget).top=100),this.RightPanel&&(this.RightPanel.getComponent(cc.Widget).top=110)}},t.prototype.onResized=function(){A.NgcAds.inst&&A.NgcAds.inst.isBannerShowing&&this.adsBannerAlign(!0)},t.prototype.onTransitionFinish=function(){this.updateBestTime(re.UserInfo.bestScore)},t.prototype.showBannerAds=function(){var e,t;S.default.inst&&S.default.inst.isAdsPoincutAvailable(S.NgcPointcuts.bannerMainMenu,A.AdsType.Banner)?null===(e=S.default.inst)||void 0===e||e.showBanner(S.NgcPointcuts.bannerMainMenu):null===(t=S.default.inst)||void 0===t||t.hide()},t.inst=null,t.canShowBanner=!0,a([ue(cc.Node)],t.prototype,"FixedPosUI",void 0),a([ue(cc.Node)],t.prototype,"BtnOnOffNavBar",void 0),a([ue(cc.Node)],t.prototype,"RightPanel",void 0),a([ue(cc.Label)],t.prototype,"percentOfBeatPlayers",void 0),a([ue(cc.Node)],t.prototype,"playerNameBox",void 0),a([ue(cc.EditBox)],t.prototype,"playerNameEditBox",void 0),a([ue(cc.Sprite)],t.prototype,"tapToStart",void 0),a([ue(cc.Label)],t.prototype,"connectingToNetwork",void 0),a([ue(cc.Node)],t.prototype,"loadingNode",void 0),a([ue(cc.Node)],t.prototype,"partyRoomButton",void 0),a([ue(te.default)],t.prototype,"coinCountUp",void 0),a([ue(cc.RichText)],t.prototype,"bestTimeLb",void 0),a([ue(cc.Label)],t.prototype,"lbYouBeat",void 0),a([ue(oe.default)],t.prototype,"playingCoinAnimation",void 0),a([ue],t.prototype,"TUTORIAL_MAP",void 0),a([ue({type:cc.SpriteFrame})],t.prototype,"loggedoutIcon",void 0),a([ue(C.NgcLabelLocalized)],t.prototype,"tapToPlayLb",void 0),a([ue(ne.default)],t.prototype,"fullScreenManager",void 0),a([ue(cc.Node)],t.prototype,"carOption",void 0),a([ue(cc.Node)],t.prototype,"GIF",void 0),a([ue(cc.Node)],t.prototype,"luckyboosterParent",void 0),a([ue(cc.Prefab)],t.prototype,"luckyBoosterPrefab",void 0),o=a([le],t)}(w.default);n.default=pe,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager":"DailyRewardManager","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeManager":"GameModeManager","../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarEditNameDialog":"NavBarEditNameDialog","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/CrossFeatures/RealPrize/Script/NgcRealPrizeManager":"NgcRealPrizeManager","../../../NanoGameCore/CrossFeatures/TabBar/Script/TabBarManager":"TabBarManager","../../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../../NanoGameCore/SDK/SDK":"SDK","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/DailyReward/DailyReward":"DailyReward","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/ServicesMgr":"ServicesMgr","../../../NanoGameCore/Services/Social/Social":"Social","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../CarSelector/CarSkinSelecter":"CarSkinSelecter","../../Config":"Config","../../CrossPromotion/CrossPromotionManager":"CrossPromotionManager","../../Currency/Currency":"Currency","../../Dialog/OptionDialog/OptionDialog":"OptionDialog","../../FTUE/FTUEManager":"FTUEManager","../../League/LeagueManager":"LeagueManager","../../Main":"Main","../../Maps/DrawMap":"DrawMap","../../Network/ImprovedNetClient":"ImprovedNetClient","../../Network/NetClient":"NetClient","../../ScreenManager":"ScreenManager","../../SoundManager":"SoundManager","../../SpecialOffer/SpecialOffer":"SpecialOffer","../../Tracking/TrackingManager":"TrackingManager","../../TuningData":"TuningData","../../UI/DigitCountUp":"DigitCountUp","../../UI/FlyingCoin":"FlyingCoin","../../UI/FullScreenButton":"FullScreenButton","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../../Utils/Util":"Util","../PartyRoomScreen/PartyRoomManager":"PartyRoomManager"}],StartPoint:[function(e,t,o){"use strict";cc._RF.push(t,"4edb2ES4/1OeqPZxc8gdOVw","StartPoint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./UI/WaitSpinner"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.posWS=cc.v2(0,0),t.waitSpinner=null,t}var o;return r(t,e),o=t,t.prototype.getWorldPosition=function(){return this.posWS},t.prototype.onLoad=function(){this.posWS=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),o.allStartPoints.push(this),o.availableStartPoints.push(this)},t.prototype.reset=function(){this.waitSpinner.reset()},t.prototype.boom=function(){this.waitSpinner.boom()},t.prototype.collapse=function(){this.waitSpinner.collapse()},t.prototype.start=function(){this.node.getComponent(cc.Sprite).enabled=!1},t.freeAllStartPoints=function(){o.availableStartPoints=[],o.allStartPoints.forEach(function(e){e.reset(),o.availableStartPoints.push(e)})},t.collapseAll=function(){o.allStartPoints.forEach(function(e){e.collapse()}),this.clear()},t.clear=function(){o.allStartPoints.forEach(function(e){e.node.destroy()}),o.availableStartPoints.forEach(function(e){e.node.destroy()}),o.allStartPoints=[],o.availableStartPoints=[]},t.allStartPoints=[],t.availableStartPoints=[],i([l(a.default)],t.prototype,"waitSpinner",void 0),o=i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./UI/WaitSpinner":"WaitSpinner"}],SteeringWheel:[function(e,t,o){"use strict";cc._RF.push(t,"492d0kT7jdBGZ9k7W1KcAZz","SteeringWheel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Main"),c=e("./Player/CarBase"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isMappedWithLocalPlayer=!1,t.arrowControl=null,t.arrow=null,t}return r(t,e),t.prototype.update=function(){if(!this.isMappedWithLocalPlayer){var e=a.Main.inst.getLocalPlayer();if(e&&e.controlType==c.CONTROLTYPE.WHEEL_CONTROL){this.isMappedWithLocalPlayer=!0;var t=cc.instantiate(this.arrowControl);e.wheelControlNode=this.node,e.steeringControl=t,t.parent=e.node.parent,e.resetNextCarAngle(),e.wheelControlNode.opacity=0}}},t.prototype.setNewPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e));var t=this.node.convertToWorldSpaceAR(this.arrow.getPosition()),o=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),n=t.sub(o),r=o.sub(n);this.node.setPosition(this.node.parent.convertToNodeSpaceAR(r))},t.prototype.reset=function(){this.isMappedWithLocalPlayer=!1,this.node.angle=0},i([u(cc.Prefab)],t.prototype,"arrowControl",void 0),i([u(cc.Node)],t.prototype,"arrow",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Main":"Main","./Player/CarBase":"CarBase"}],TabBarManager:[function(e,t,o){"use strict";cc._RF.push(t,"5a9ddvqEbRPW4GlSabF1v4P","TabBarManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTabBarManager=o.TAB=o.SWIPE_MODE=void 0;var a,c,s=cc._decorator,l=s.ccclass,u=s.property,p=e("../../../../globals"),d=e("../../../../Scripts/Main"),f=e("../../../../Scripts/ScreenManager"),h=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),g=e("../../../Core/Utils"),y=e("../../../GameFramework/Scripts/BuildConfig"),m=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),_=e("../../../GameFramework/Scripts/NgcScreenManager"),v=e("../../../GameFramework/Scripts/NgcShopManager"),S=e("../../../Services/Platform/Platform"),N=e("../../../GameFramework/Scripts/NgcUserInfo"),b=e("../../Dialogs/Script/MessageDialog/MessageDialog"),C=e("../../Dialogs/Script/NgcDialogManager"),P=e("../../NavBar/Script/NavBarManager"),I=e("./TabButton"),w=e("../../../../Scripts/Screens/StartScreen/StartMain"),T=e("../../../../Scripts/CarSelector/CarSkinSelecter");(function(e){e[e.TAB_BAR=0]="TAB_BAR",e[e.SWIPE_SCREEN=1]="SWIPE_SCREEN"})(a=o.SWIPE_MODE||(o.SWIPE_MODE={})),function(e){e.Shop="Shop",e.Leaderboard="Leaderboard",e.MainMenu="MainMenu",e.PartyWithFriends="PWF",e.RealPrize="Prize"}(c=o.TAB||(o.TAB={}));var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabs=[],t.selectedBG=null,t.selectedHighlightBG=null,t.selectedIconYOffset=6,t.defaultIconScale=.7,t.selectedIconScale=1,t.tweenDuration=.1,t.loadingNode=null,t.delayTimeForLoadingAnimation=.5,t._selectedIndex=0,t.selectedWidth=0,t.tabByName={},t._childSwipe=!1,t._forceSwitchTab=!1,t._tabButtonDisabled=!1,t._swipeMode=null,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;o.inst=this,_.default.inst.setTabBar(this),this.tabs.forEach(function(t){e.tabByName[t.name]=t;var o=t.getComponent(I.NgcTabButton).tabIcon;o.originalY=o.y,t.oldParent=t.parent,t.parent=null}),this.applyPlatformCheck(),this.selectedWidth=this.selectedBG.width,this.node.opacity=0},t.prototype.applyPlatformCheck=function(){var e=this,t=[c.Shop,c.Leaderboard,c.MainMenu,c.PartyWithFriends,c.RealPrize];return y.NgcBuildConfig.buildPlatform===g.Utils.enumToString(S.PlatformID,S.PlatformID.GameDistribution)&&(t=[c.Shop,c.MainMenu,c.Leaderboard]),"POKI"===y.NgcBuildConfig.buildPlatform&&(t=[c.Shop,c.MainMenu,c.Leaderboard]),y.NgcBuildConfig.buildPlatform===g.Utils.enumToString(S.PlatformID,S.PlatformID.HUZ)&&(t=[c.Shop,c.MainMenu]),y.NgcBuildConfig.offlineMode&&(t=[c.MainMenu,c.Shop]),this.tabs=[],t.forEach(function(t){var o=e.tabByName[t];o.parent=o.oldParent,e.tabs.push(o)}),this.tabs},t.prototype.initSwipe=function(){var e=_.default.inst.MainScreenWidget.node,t=new cc.Node("Swipe Layer");t.width=e.width,t.height=e.height,t.parent=e,t.on(cc.Node.EventType.TOUCH_END,this.detectSwipeGestureEnd,this,!0),t._touchListener.swallowTouches=!1},t.prototype.swipeDeadZone=function(){return cc.sys.isMobile?100:250},t.prototype.swipeDelayTime=function(){return 50},t.prototype.setChildSwipe=function(){this._childSwipe=!0},t.prototype.detectSwipeGestureEnd=function(e){var t=this;this._childSwipe=!1,setTimeout(function(){if(!t._childSwipe){var o=e.getStartLocation(),n=e.getLocation(),r=n.x-o.x,i=n.y-o.y;if(!(Math.abs(i)>Math.abs(r))){var a=t.swipeDeadZone();r<-a?(e.stopPropagation(),t.swipeRight()):r>a&&(e.stopPropagation(),t.swipeLeft())}}},this.swipeDelayTime())},t.prototype.swipeLeft=function(){this.moveLeft()},t.prototype.swipeRight=function(){this.moveRight()},t.prototype._hideLeagueUI=function(){w.default.inst.hideLeaugeUI()},t.prototype.start=function(){this.init()},t.prototype.init=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this)},t.prototype.updatePlacement=function(e,t){var o=this;void 0===e&&(e=0),void 0===t&&(t=!1);var n=Math.min(cc.winSize.width,768),r=n/(this.tabs.length-1+1.5),i=1.5*r;this.selectedBG.width=i,this.selectedHighlightBG.active=!0,this.selectedHighlightBG.width=i,this.selectedBG.active=!0,this.selectedHighlightBG.active=!1,this.tabs.forEach(function(a,c){var s=a.getComponent(I.NgcTabButton),l=a.getComponent(I.NgcTabButton).tabIcon,u=a.getComponent(I.NgcTabButton).tabLabel,p=s.isHighLight();u.getComponent(m.NgcLabelLocalized).enableWrapText=!1,u.getComponent(m.NgcLabelLocalized).verticalAlign=cc.Label.VerticalAlign.CENTER,u.y=-20;var d=c*r+i/2-n/2;c!==e?(p&&setTimeout(function(){s.tabHighlight.active=!0,s.tabHighlight.width=r,s.tabHighlight.opacity=255},55),t?(cc.tween(a).to(o.tweenDuration,{width:r}).start(),cc.tween(l).to(o.tweenDuration,{y:l.originalY,scale:o.defaultIconScale}).start(),cc.tween(u).to(o.tweenDuration,{opacity:0}).start()):(u.opacity=0,a.width=r,l.y=l.originalY,l.scale=o.defaultIconScale,s.tabHighlight.width=r)):t?(p?(o.selectedHighlightBG.active=!0,o.selectedHighlightBG.opacity=0,cc.tween(o.selectedBG).to(o.tweenDuration,{x:d,opacity:0},{easing:"cubicInOut"}).start(),cc.tween(o.selectedHighlightBG).to(o.tweenDuration,{x:d},{easing:"cubicInOut"}).call(function(){o.selectedHighlightBG.opacity=255,o.selectedBG.active=!1,cc.tween(s.tabHighlight).to(o.tweenDuration,{opacity:0}).start()}).start()):(o.selectedBG.active=!0,o.selectedBG.opacity=255,o.selectedHighlightBG.x=d,cc.tween(o.selectedBG).to(o.tweenDuration,{x:d},{easing:"cubicInOut"}).call(function(){o.selectedBG.active=!0,cc.tween(s.tabHighlight).to(o.tweenDuration,{opacity:0}).start(),cc.tween(o.selectedHighlightBG).to(o.tweenDuration,{opacity:255}).start()}).start()),cc.tween(a).to(o.tweenDuration,{width:i}).start(),cc.tween(l).to(o.tweenDuration,{y:l.originalY+o.selectedIconYOffset,scale:o.selectedIconScale}).start(),cc.tween(u).delay(.05).to(o.tweenDuration,{x:0,opacity:255},{easing:"cubicInOut"}).start(),cc.tween(o.selectedBG).to(o.tweenDuration,{x:d},{easing:"cubicInOut"}).start()):(u.opacity=255,l.y=l.originalY+o.selectedIconYOffset,l.scale=o.selectedIconScale,a.width=i,a.getComponent(I.NgcTabButton).tabIcon.getComponent(cc.Widget).updateAlignment(),o.selectedBG.x=d,o.selectedHighlightBG.x=d,o.selectedBG.opacity=255,p?(o.selectedHighlightBG.active=!0,o.selectedHighlightBG.opacity=255,s.tabHighlight.opacity=0,o.selectedBG.active=!1):(o.selectedHighlightBG.active=!1,o.selectedHighlightBG.opacity=0,o.selectedBG.active=!0))}),this._selectedIndex=e},t.prototype.selectedTab=function(){return this.tabs[this._selectedIndex].name},t.prototype.isLoadingAnimationRequired=function(e){return e>=this.delayTimeForLoadingAnimation},t.prototype.updateTabButtons=function(e){void 0===e&&(e=!1),this.updatePlacement(this._selectedIndex,e)},t.prototype.forceSwitchTab=function(){this._forceSwitchTab=!0},t.prototype.disableTabButtons=function(){this._tabButtonDisabled=!0,_.default.inst.disablePageviewSwipe()},t.prototype.enableTabButtons=function(){this._tabButtonDisabled=!1,_.default.inst.enablePageviewSwipe()},t.prototype.canSwitchToOtherTab=function(e){return!this._tabButtonDisabled&&(!!this._forceSwitchTab||!!_.default.inst.tabBarIsActive&&!_.default.inst.isSwitching&&f.default.inst.canSwitchToOtherScreen()&&!e.getComponent(I.NgcTabButton).disabled)},t.prototype.isComingSoon=function(e){return e.getComponent(I.NgcTabButton).disabled},t.prototype.onKeyDown=function(e){if(!C.NgcDialogManager.hasPopUpShowing())switch(e.keyCode){case cc.macro.KEY.a:this.moveLeft();break;case cc.macro.KEY.d:this.moveRight();break;case cc.macro.KEY.left:this.moveLeft();break;case cc.macro.KEY.right:this.moveRight()}},t.prototype.moveLeft=function(){var e=Math.max(this._selectedIndex-1,0);this._selectedIndex!==e&&this.selectTab(this.tabs[e])},t.prototype.moveRight=function(){var e=Math.min(this._selectedIndex+1,this.tabs.length-1);this._selectedIndex!==e&&this.selectTab(this.tabs[e])},t.prototype.onSelectTab=function(e){this.selectTab(e.target)},t.prototype.selectTabByIndex=function(e){var t=this.tabs[e];this.selectTab(t)},t.prototype.selectTab=function(e){var t=this;e&&(P.NgcNavBarManager.inst.curState===P.NavBarState.Show?(P.NgcNavBarManager.inst.curState=P.NavBarState.Hide,this.scheduleOnce(function(){t.processSwitchTab(e)},.65)):this.processSwitchTab(e))},t.prototype.clearAfterSwitchCallback=function(){this._onAfterSwitchCallback&&(this.unschedule(this._onAfterSwitchCallback),this._onAfterSwitchCallback=null)},t.prototype.processSwitchTab=function(e){var t=this;if(this.canSwitchToOtherTab(e)){_.default.inst.enablePageviewSwipe(),this.node.opacity=255,this.clearAfterSwitchCallback();var o=this._forceSwitchTab;if(this._swipeMode=this._forceSwitchTab?a.SWIPE_SCREEN:a.TAB_BAR,o||(_.default.inst._scrollToPageDisabled=!1,_.default.inst.clearPageTurningCallback()),this._forceSwitchTab=!1,this.tabs.indexOf(e)!==this._selectedIndex){var n=this.tabs[this._selectedIndex].getComponent(I.NgcTabButton),r=e.getComponent(I.NgcTabButton),i=r.onBeforeSwitchEvent,c=r.onAfterSwitchEvent,s=r.activeScreenID();this._switchScreen=function(){i&&i.emit([]),-1!==s&&(_.default.inst.showAllScreens(),_.default.inst.switchScreen(s,t.transitionType(),function(){c&&(t._onAfterSwitchCallback=function(){c.emit([])},t.scheduleOnce(t._onAfterSwitchCallback,.15)),o||_.default.inst.onPageTurning(null,!1)})),t._swipeMode=null},n&&n.onLeaveEvent&&n.onLeaveEvent.handler&&n.onLeaveEvent.emit([]),n&&n.exitPromptRequire||this._switchScreen()}}else if(this.isComingSoon(e)){var l=this;this.messageDialog&&this.messageDialog.isValid&&this.messageDialog.destroy(),C.NgcDialogManager.createDialog(b.NgcMessageDialog.dialogType,b.NgcMessageDialog.urlPrefab,b.NgcMessageDialog.bundleName).then(function(e){var t=e.getComponent(b.NgcMessageDialog);t.init("NGG_Coming_Soon"),l.messageDialog=t.node})}},t.prototype.transitionType=function(){return _.TransitionType.Slide},t.prototype.processSwitchToNextScreen=function(){this._switchScreen&&this._switchScreen()},t.prototype.updateTabPlacementByScreenID=function(e,t){void 0===t&&(t=!1);var o=this.getTabButtonIndexByScreenID(e);this.updatePlacement(o,t)},t.prototype.switchScreenDelayByScreenID=function(e){var t=this.getTabButtonIndexByScreenID(e);return this.tabs[t].getComponent(I.NgcTabButton).switchScreenDelay},t.prototype.getSlideDirection=function(e){if(-1===this._selectedIndex)return-1;var t=this.tabs[this._selectedIndex].getComponent(I.NgcTabButton).activeScreenID(),o=this.getTabButtonIndexByScreenID(t);return this.getTabButtonIndexByScreenID(e)>o?1:-1},t.prototype.getTabButtonIndexByScreenID=function(e){return this.tabs.map(function(e){return e.getComponent(I.NgcTabButton).activeScreenID()}).indexOf(e)},t.prototype.onAfterGoToStartScreen=function(){P.NgcNavBarManager.inst.showAllNavBar(!0),0==w.default.inst.GIF.active&&w.default.inst.showGIF(!0)},t.prototype.isShopTabHighlight=function(e){return e.value=v.NgcShopManager.getInstance().HasBrandNewItem,e.value},t.prototype.worldPosOfShopTab=function(){return this.tabs[0].convertToWorldSpaceAR(cc.v2(0,0))},t.prototype.playAnimationShopTabGetItem=function(){var e=this.tabs[0].getComponent(I.NgcTabButton).tabIcon;cc.tween(e).to(.35,{scale:2.5*e.scale},{easing:"backOut"}).to(.35,{scale:e.scale},{easing:"backOut"}).start()},t.prototype.onBeforeGoToShop=function(){this._hideLeagueUI(),T.default.inst.onCarToggle},t.prototype.onAfterGoToShop=function(){},t.prototype.onBeforeGoToLeaderBoard=function(){this._hideLeagueUI()},t.prototype.onAfterGoToLeaderboard=function(){f.default.inst.afterGoToLeaderBoardScreen()},t.prototype.onBeforeGoToPWF=function(){d.Main.inst.appState=d.AppState.PartyScreen,f.default.inst.beforeGoToPartyScreen(),this._hideLeagueUI()},t.prototype.onAfterGoToPWF=function(){f.default.inst.afterGoToPartyScreen()},t.prototype.onLeavePWF=function(){var e=this,t=d.Main.inst.appState;d.Main.inst.appState=d.AppState.StartScreen,h.NgcPartyRoomManager.inst.canExitWithoutPrompt()?this.processSwitchToNextScreen():h.NgcPartyRoomManager.inst.showExitDialog(function(o){if(o)e.processSwitchToNextScreen();else{if(e._swipeMode===a.SWIPE_SCREEN){var n=_.default.inst.getPageIndexByScreenID(f.ScreenIDs.PWFScreen);_.default.inst.getScreenByPageId(n).node.parent.opacity=255,_.default.inst.menuPageview.scrollToPage(n,.5)}d.Main.inst.appState=t}},!1)},t.prototype.onBeforeGoToRealPrize=function(){this._hideLeagueUI()},t.prototype.onAfterGoToRealPrize=function(){},t.prototype.isRealPrizeTabHighlight=function(e){return e.value=!N.default.realPrizeVisited,e.value},t.inst=null,i([u({type:[cc.Node]})],t.prototype,"tabs",void 0),i([u(cc.Node)],t.prototype,"selectedBG",void 0),i([u(cc.Node)],t.prototype,"selectedHighlightBG",void 0),i([u],t.prototype,"selectedIconYOffset",void 0),i([u],t.prototype,"defaultIconScale",void 0),i([u],t.prototype,"selectedIconScale",void 0),i([u],t.prototype,"tweenDuration",void 0),i([u(cc.Node)],t.prototype,"loadingNode",void 0),i([u],t.prototype,"delayTimeForLoadingAnimation",void 0),o=i([l],t)}(cc.Component);o.NgcTabBarManager=O,p.default.NgcTabBarManager=O,cc._RF.pop()},{"../../../../Scripts/CarSelector/CarSkinSelecter":"CarSkinSelecter","../../../../Scripts/Main":"Main","../../../../Scripts/ScreenManager":"ScreenManager","../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../../Scripts/Screens/StartScreen/StartMain":"StartMain","../../../../globals":"globals","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NavBar/Script/NavBarManager":"NavBarManager","./TabButton":"TabButton"}],TabButton:[function(e,t,o){"use strict";cc._RF.push(t,"cd99b+qZsxJ2I1BwtUMUQU+","TabButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTabButton=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabLabel=null,t.tabIcon=null,t.tabHighlight=null,t.disabled=!1,t.screenID=-1,t.mobileScreenID=-1,t.switchScreenDelay=.1,t.highlightEvent=new cc.Component.EventHandler,t.onBeforeSwitchEvent=new cc.Component.EventHandler,t.onAfterSwitchEvent=new cc.Component.EventHandler,t.onLeaveEvent=new cc.Component.EventHandler,t.exitPromptRequire=!1,t}return r(t,e),t.prototype.activeScreenID=function(){return cc.sys.isMobile&&-1!==this.mobileScreenID?this.mobileScreenID:this.screenID},t.prototype.isHighLight=function(){if(this.highlightEvent&&this.highlightEvent.handler){var e={};if(this.highlightEvent.emit([e]),e.value)return!0}return!1},i([s(cc.Node)],t.prototype,"tabLabel",void 0),i([s(cc.Node)],t.prototype,"tabIcon",void 0),i([s(cc.Node)],t.prototype,"tabHighlight",void 0),i([s],t.prototype,"disabled",void 0),i([s],t.prototype,"screenID",void 0),i([s],t.prototype,"mobileScreenID",void 0),i([s],t.prototype,"switchScreenDelay",void 0),i([s(cc.Component.EventHandler)],t.prototype,"highlightEvent",void 0),i([s(cc.Component.EventHandler)],t.prototype,"onBeforeSwitchEvent",void 0),i([s(cc.Component.EventHandler)],t.prototype,"onAfterSwitchEvent",void 0),i([s(cc.Component.EventHandler)],t.prototype,"onLeaveEvent",void 0),i([s],t.prototype,"exitPromptRequire",void 0),i([c],t)}(cc.Component);o.NgcTabButton=l,cc._RF.pop()},{}],TechMessageAndroidWebview:[function(t,o,n){"use strict";cc._RF.push(o,"b0d2cdjExZNU58RlGh1NZB0","TechMessageAndroidWebview");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},c=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},s=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../Core/Utils"),u=t("../../../GameFramework/Scripts/BuildConfig"),p=t("../../../GameFramework/Scripts/Localized/LabelLocalized"),d=t("../../Dialogs/Script/DialogBase"),f=t("./TechMessages"),h=cc._decorator,g=h.ccclass,y=h.property,m=(h.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameURL=null,t._onCloseCallbackFn=null,t}return i(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(e){this.gameURL.string=u.NgcBuildConfig.shortGameClientURL||u.NgcBuildConfig.gameClientURL,this._onCloseCallbackFn=e,this.show()},t.prototype.hide=function(){f.default.inst.sendMessageRespondTracking("FBUnsupportedWebview"),"function"==typeof this._onCloseCallbackFn&&this._onCloseCallbackFn(),e.prototype.hide.call(this)},t.prototype.copyLink=function(){return c(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return f.default.inst.sendMessageRespondTracking("FBUnsupportedWebview"),[4,l.Utils.copyToClipboard(this.gameURL.string)];case 1:return e.sent(),[2]}})})},t.urlPrefab="NgcTechMessageAndroidWebview",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageAndroidWebview",a([y(p.NgcLabelLocalized)],t.prototype,"gameURL",void 0),a([g],t)}(d.NgcDialogBase));n.default=m,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageFPS:[function(e,t,o){"use strict";cc._RF.push(t,"3fce4bkQmdP07yWp6ZSKpxb","TechMessageFPS");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),c=e("./TechMessages"),s=cc._decorator,l=s.ccclass,u=(s.property,s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){c.default.inst.sendMessageRespondTracking("FPS"),this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.urlPrefab="NgcTechMessageFPS",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageFPS",i([l],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageIdleDisconnect:[function(e,t,o){"use strict";cc._RF.push(t,"12b5dS972ZOZ6H4NNdJ1/+L","TechMessageIdleDisconnect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),c=e("./TechMessages"),s=cc._decorator,l=s.ccclass,u=(s.property,s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){c.default.inst.sendMessageRespondTracking("Idle"),this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.urlPrefab="NgcTechMessageIdleDisconnect",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageIdleDisconnect",i([l],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageIdleFPSWarning:[function(e,t,o){"use strict";cc._RF.push(t,"6df17cCS/lIH5E9pQDnltfh","TechMessageIdleFPSWarning");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=(c.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.warningNode=null,t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){cc.tween(this.warningNode).repeatForever(cc.tween(this.warningNode).to(.5,{opacity:125,scale:1}).to(.5,{opacity:255,scale:1.2})).start(),e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NgcTechMessageFPSWarning",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageFPSWarning",i([l(cc.Node)],t.prototype,"warningNode",void 0),i([s],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageIdleWarningDialog:[function(e,t,o){"use strict";cc._RF.push(t,"3dba0oA4IdBlYhMV0YwqZI0","TechMessageIdleWarningDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=(c.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deviceType=[],t.deviceSprite=null,t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){cc.tween(this.deviceSprite.node).repeatForever(cc.tween(this.deviceSprite.node).to(.5,{opacity:125,scale:.8}).to(.5,{opacity:255,scale:1})).start(),e.prototype.show.call(this)},t.prototype.init=function(){this.deviceSprite.spriteFrame=cc.sys.isMobile?this.deviceType[0]:this.deviceType[1],this.show()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NgcTechMessageIdleWarning",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageIdleWarning",i([l(cc.SpriteFrame)],t.prototype,"deviceType",void 0),i([l(cc.Sprite)],t.prototype,"deviceSprite",void 0),i([s],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageLatencyDisconnect:[function(e,t,o){"use strict";cc._RF.push(t,"ceb71tkXplML5+Oap3/hEko","TechMessageLatencyDisconnect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),c=e("./TechMessages"),s=cc._decorator,l=s.ccclass,u=(s.property,s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){c.default.inst.sendMessageRespondTracking("Ping"),this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.urlPrefab="NgcTechMessageLatencyDisconnect",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageLatencyDisconnect",i([l],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageLatencyWarning:[function(e,t,o){"use strict";cc._RF.push(t,"41d76W65MxKCZGJgAlKnbcg","TechMessageLatencyWarning");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=(c.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.networkNode=null,t._onCloseCallBackFn=null,t}return r(t,e),t.prototype.show=function(){cc.tween(this.networkNode).repeatForever(cc.tween(this.networkNode).to(.5,{opacity:125,scale:.8}).to(.5,{opacity:255,scale:1})).start(),e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){"function"==typeof this._onCloseCallBackFn&&this._onCloseCallBackFn(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NgcTechMessageLatencyWarning",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageLatencyWarning",i([l(cc.Node)],t.prototype,"networkNode",void 0),i([s],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageNetworkDisconnect:[function(e,t,o){"use strict";cc._RF.push(t,"b3437suWnJJXKDuzYagI5CD","TechMessageNetworkDisconnect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=(c.property,c.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.urlPrefab="NgcTechMessageNetworkDisconnect",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageNetworkDisconnect",i([s],t)}(a.NgcDialogBase));o.default=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageSupportBrowser:[function(e,t,o){"use strict";cc._RF.push(t,"c9adal2fhJIwIjxRhBaHLRz","TechMessageSupportBrowser");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=(c.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportedBrowser=[],t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(e){this.supportedBrowser.forEach(function(t,o){t.active=e.includes(o)}),this.show()},t.urlPrefab="NgcTechMessageSupportBrowser",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageSupportBrowser",i([l(cc.Node)],t.prototype,"supportedBrowser",void 0),i([s],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessagesDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d640bxvHZlJJLfsEgE70/RV","TechMessagesDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t.buttonNode=null,t.okLabel=null,t._callBackOk=null,t.icon=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=a.NgcLocalizedManager.t("OK").text),this._callBackOk=o,this.titleLabel.string=e,this.contentLabel.string=t,this.okLabel.string=r,n&&(this.icon.spriteFrame=n),""!==r&&null!=r||(this.buttonNode.active=!1),this.show()},t.prototype.OkOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.urlPrefab="TechMessagesDialog",t.bundleName="02_dialog",t.dialogType="NgcTechMessagesDialog",i([u(cc.Label)],t.prototype,"titleLabel",void 0),i([u(cc.Label)],t.prototype,"contentLabel",void 0),i([u(cc.Node)],t.prototype,"buttonNode",void 0),i([u(cc.Label)],t.prototype,"okLabel",void 0),i([u(cc.Sprite)],t.prototype,"icon",void 0),i([l],t)}(c.NgcDialogBase);o.default=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessagesPortraitOnly:[function(e,t,o){"use strict";cc._RF.push(t,"442d9/hbExAqK8JCPdristV","TechMessagesPortraitOnly");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t.buttonNode=null,t.okLabel=null,t._callBackOk=null,t.icon=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=a.NgcLocalizedManager.t("OK").text),this._callBackOk=o,this.titleLabel.string=e,this.contentLabel.string=t,this.okLabel.string=r,n&&(this.icon.spriteFrame=n),""!==r&&null!=r||(this.buttonNode.active=!1),this.show()},t.prototype.hide=function(){e.prototype.hide.call(this,function(){},!1)},t.urlPrefab="TechMessagesPortraitOnly",t.bundleName="02_dialog",t.dialogType="NgcTechMessagesPortraitOnly",i([u(cc.Label)],t.prototype,"titleLabel",void 0),i([u(cc.Label)],t.prototype,"contentLabel",void 0),i([u(cc.Node)],t.prototype,"buttonNode",void 0),i([u(cc.Label)],t.prototype,"okLabel",void 0),i([u(cc.Sprite)],t.prototype,"icon",void 0),i([l],t)}(c.NgcDialogBase);o.default=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessages:[function(t,o,n){"use strict";cc._RF.push(o,"3ade3/fBrlP3bCSYkjtcWsu","TechMessages");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},l=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.TECH_MESSAGE=void 0;var u,p=t("../../../Core/Utils"),d=t("../../../GameFramework/Scripts/BuildConfig"),f=t("../../../GameFramework/Scripts/Localized/LocalizedManager"),h=t("../../../GameFramework/Scripts/Network/NgcNetClient"),g=t("../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),y=t("../../../GameFramework/Scripts/NgcGame"),m=t("../../../SDK/Nano/NanoSrv"),_=t("../../../Services/Platform/Platform"),v=t("../../../Services/Telemetry/Telemetry"),S=t("../../Dialogs/Script/NgcDialogManager"),N=t("./TechMessageAndroidWebview"),b=t("./TechMessageFPS"),C=t("./TechMessageIdleDisconnect"),P=t("./TechMessageIdleFPSWarning"),I=t("./TechMessageIdleWarningDialog"),w=t("./TechMessageLatencyDisconnect"),T=t("./TechMessageLatencyWarning"),O=t("./TechMessageNetworkDisconnect"),R=t("./TechMessagesDialog"),E=t("./TechMessagesPortraitOnly"),A=t("./TechMessageSupportBrowser"),D=cc._decorator,k=D.ccclass,L=D.property;(function(e){e.SERVER_MAINTENANCE_MESSAGE="SERVER_MAINTENANCE"})(u=n.TECH_MESSAGE||(n.TECH_MESSAGE={}));var B=p.BROWSER_TYPE.CHROME,M=p.BROWSER_TYPE.EDGE,F=p.BROWSER_TYPE.FIREFOX,G=p.BROWSER_TYPE.SAFARI,U=p.BROWSER_TYPE.SAMSUNG_INTERNET,x=p.BROWSER_TYPE.ANDROID_WEBVIEW,j=p.BROWSER_TYPE.SAFARI_IN_APP,H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNetworkErr=null,t.iconNetworkBad=null,t.rotateDeviceToPlayPrefab=null,t.loadingPrefab=null,t.badConnectionPrefab=null,t.dialogTechMessagesPrefab=null,t.loadingNode=null,t.badConnectionNode=null,t._isServerMaintenanceShow=!1,t._isGameAlreadyIdle=!1,t._isGameAlreadyStart=!1,t._idleTime=5,t._kickTime=8,t._FPSAvgLimit=20,t._FPSAvgLimitDuration=3,t._FPSAvgWarningDuration=8,t._latencyAvgLimit=120,t._latencyAvgLimitDuration=3,t._latencyAvgWarningDuration=3,t.warningIdleTimeOut=null,t.idleKickTimeout=null,t.fpsWarningTimeout=null,t.fpsKickTimeout=null,t.dialogIdleWarning=null,t.dialogFPSWarning=null,t._forceGameDisconnectCB=null,t.trackingParams={},t.isReceivedTechMessageConfig=!1,t.isMarkedAsFPSKick=!1,t.isMarkAsLatencyKick=!1,t.latencyKickTimeoutID=null,t.latencyWarningTimeoutID=null,t.latencyWarningDialog=null,t._noNetworkDetection=!1,t._noNetworkDetectionTimer=0,t.rotationDeviceNode=null,t.isRotationDialogInited=!1,t.handleServerMaintenance=function(e){return s(t,void 0,void 0,function(){var t,o,n,r,i,a,c,s;return l(this,function(l){switch(l.label){case 0:return cc.log("TECH_MESSAGE handleServerMaintenance",e),this.isServerMaintenanceShow?[2,!1]:(this.isServerMaintenanceShow=!0,null===(s=y.NgcGame.inst)||void 0===s||s.pause(!0),t=R.default.dialogType,o=R.default.urlPrefab,n=R.default.bundleName,[4,S.NgcDialogManager.createDialog(t,o,n)]);case 1:return r=l.sent(),i=r.getComponent(R.default),a=f.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE_CONTENT").text,c=f.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE").text,i.init(c,a,function(){return location.reload()},null),[2]}})})},t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"isServerMaintenanceShow",{get:function(){return this._isServerMaintenanceShow},set:function(e){this._isServerMaintenanceShow=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst?cc.error("There are already have NgcTechMessages!!! inst"):(d.NgcBuildConfig.useNgcServer?g.NgcNetClientRefactor.inst.registerForBroadcastMessageType(u.SERVER_MAINTENANCE_MESSAGE,this.handleServerMaintenance):h.NgcNetClient.inst.registerForBroadcastMessageType(u.SERVER_MAINTENANCE_MESSAGE,this.handleServerMaintenance),o.inst=this,cc.sys.isMobile&&(this.onResized(),cc.view.on("canvas-resize",this.onResized.bind(this))))},t.prototype.setTrackingParams=function(e){e.currentPing&&(this.trackingParams.maxPing=this.trackingParams.maxPing||e.currentPing,this.trackingParams.minPing=this.trackingParams.minPing||e.currentPing,e.currentPing>this.trackingParams.maxPing&&(this.trackingParams.maxPing=e.currentPing),e.currentPing<this.trackingParams.minPing&&(this.trackingParams.minPing=e.currentPing)),e.currentFPS&&(this.trackingParams.maxFPS=this.trackingParams.maxFPS||e.currentFPS,this.trackingParams.minFPS=this.trackingParams.minFPS||e.currentFPS,e.currentFPS>this.trackingParams.maxFPS&&(this.trackingParams.maxFPS=e.currentFPS),e.currentFPS<this.trackingParams.minFPS&&(this.trackingParams.minFPS=e.currentFPS)),this.trackingParams=a(a({},this.trackingParams),e)},t.prototype.sendWarningTracking=function(e,t){v.NgcTelemetry.inst.LogEvent_GameTechWarning(a({checker:e,roundID:t},this.trackingParams))},t.prototype.sendMessageTracking=function(e){v.NgcTelemetry.inst.LogEvent_GameTechMessage(a({checker:e},this.trackingParams))},t.prototype.sendMessageRespondTracking=function(e){v.NgcTelemetry.inst.LogEvent_GameTechMessageRespond(a({checker:e},this.trackingParams))},t.prototype.onPlayerInput=function(){this._isGameAlreadyStart&&this.resetIdleAction()},t.prototype.clearIdleListener=function(){clearTimeout(this.warningIdleTimeOut),clearTimeout(this.idleKickTimeout),this.dialogIdleWarning&&(this.dialogIdleWarning.hide(),this.dialogIdleWarning=null)},t.prototype.resetIdleAction=function(){var e=this;d.NgcBuildConfig.offlineMode||(this.clearIdleListener(),this.warningIdleTimeOut=setTimeout(function(){s(e,void 0,void 0,function(){var e,t,o,n,r=this;return l(this,function(i){switch(i.label){case 0:return e=I.default.dialogType,t=I.default.urlPrefab,o=I.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,o)];case 1:return n=i.sent(),this.dialogIdleWarning=n.getComponent(I.default),this.dialogIdleWarning.init(),this.sendWarningTracking("Idle",null),this._isGameAlreadyIdle=!0,clearTimeout(this.idleKickTimeout),this.idleKickTimeout=setTimeout(function(){r.dialogIdleWarning.hide(),r.dialogIdleWarning=null,"function"==typeof r._forceGameDisconnectCB&&r._forceGameDisconnectCB(),s(r,void 0,void 0,function(){var e,t,o;return l(this,function(n){switch(n.label){case 0:return this.clearFPSListener(),this.sendMessageTracking("Idle"),e=C.default.dialogType,t=C.default.urlPrefab,o=C.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,o)];case 1:return n.sent().getComponent(C.default).init(),[2]}})})},1e3*(this._kickTime-this._idleTime)),[2]}})})},1e3*this._idleTime))},t.prototype.onGamePlayStart=function(){this.isReceivedTechMessageConfig||this.parseTechConfig(),this._isGameAlreadyStart=!0,this.resetIdleAction()},t.prototype.onGameplayOver=function(){this._isGameAlreadyStart=!1,this.clearIdleListener(),this.clearFPSListener(),this.clearLatencyListener()},t.prototype.parseTechConfig=function(){this.isReceivedTechMessageConfig=!0;var e=m.default.inst.getCurGameInfo().gameParams.techMessage||{};e&&(this._FPSAvgLimit=e.FPSAvgLimit,this._FPSAvgLimitDuration=e.FPSObservedPeriod,this._FPSAvgWarningDuration=e.FPSWarningTime,this._idleTime=e.idleDetectionWarning,this._kickTime=e.idleDetectionKick,this._latencyAvgLimit=e.pingAvgLimit,this._latencyAvgWarningDuration=e.warningTime,this._latencyAvgLimitDuration=e.pingObservedPeriod,console.log("@@@ parseTechConfig ",e))},t.prototype.setForceGameDisconnect=function(e){void 0===e&&(e=function(){}),this._forceGameDisconnectCB=function(){"function"==typeof e&&e(),d.NgcBuildConfig.useNgcServer?g.NgcNetClientRefactor.inst.isConnected()&&g.NgcNetClientRefactor.inst.sendLeaveGameMessage():h.NgcNetClient.inst.isConnected()&&h.NgcNetClient.inst.exitGame()}},t.prototype.isGameAlreadyIdle=function(){return this._isGameAlreadyIdle},t.prototype.clearFPSListener=function(){clearTimeout(this.fpsKickTimeout),clearTimeout(this.fpsWarningTimeout),this.dialogFPSWarning&&(this.dialogFPSWarning.hide(),this.dialogFPSWarning=null)},t.prototype.onMeansureFPS=function(e){var t=this;d.NgcBuildConfig.offlineMode||this._isGameAlreadyStart&&(this.isMarkedAsFPSKick||(e>=this._FPSAvgLimit?this.clearFPSListener():this.fpsWarningTimeout||(this.fpsWarningTimeout=setTimeout(function(){s(t,void 0,void 0,function(){var e,t,o,n,r=this;return l(this,function(i){switch(i.label){case 0:return e=P.default.dialogType,t=P.default.urlPrefab,o=P.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,o)];case 1:return n=i.sent(),this.dialogFPSWarning=n.getComponent(P.default),this.dialogFPSWarning.init(),this.sendWarningTracking("FPS",null),clearTimeout(this.fpsKickTimeout),this.fpsKickTimeout=setTimeout(function(){r.isMarkedAsFPSKick=!0,r.dialogFPSWarning.hide(),r.dialogFPSWarning=null,"function"==typeof r._forceGameDisconnectCB&&r._forceGameDisconnectCB(),s(r,void 0,void 0,function(){var e,t,o;return l(this,function(n){switch(n.label){case 0:return this.clearFPSListener(),this.clearIdleListener(),this.clearLatencyListener(),this.sendMessageTracking("FPS"),e=b.default.dialogType,t=b.default.urlPrefab,o=b.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,o)];case 1:return n.sent().getComponent(b.default).init(),[2]}})})},1e3*this._FPSAvgWarningDuration),[2]}})})},1e3*this._FPSAvgLimitDuration))))},t.prototype.clearLatencyListener=function(){clearTimeout(this.latencyKickTimeoutID),clearTimeout(this.latencyWarningTimeoutID),this.latencyKickTimeoutID=null,this.latencyWarningTimeoutID=null,this.latencyWarningDialog&&(this.latencyWarningDialog.hide(),this.latencyWarningDialog=null)},t.prototype.onMeasureLatency=function(e){var t=this;d.NgcBuildConfig.offlineMode||!this._isGameAlreadyStart||(cc.log("@@@@ TechMessages > onMeasureLatency: latency =",e),this.isMarkAsLatencyKick)||(e<=this._latencyAvgLimit?this.clearLatencyListener():this.latencyWarningTimeoutID||(this.latencyWarningTimeoutID=setTimeout(function(){return s(t,void 0,void 0,function(){var e,t,o,n,r=this;return l(this,function(i){switch(i.label){case 0:return e=T.default.dialogType,t=T.default.urlPrefab,o=T.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,o)];case 1:return n=i.sent(),this.latencyWarningDialog=n.getComponent(T.default),this.latencyWarningDialog.init(),this.sendWarningTracking("Ping",null),clearTimeout(this.latencyKickTimeoutID),this.latencyKickTimeoutID=setTimeout(function(){return s(r,void 0,void 0,function(){var e,t,o;return l(this,function(n){switch(n.label){case 0:return this.isMarkAsLatencyKick=!0,this.latencyWarningDialog.hide(),this.latencyWarningDialog=null,"function"==typeof this._forceGameDisconnectCB&&this._forceGameDisconnectCB(),this.clearFPSListener(),this.clearIdleListener(),this.sendMessageTracking("Ping"),e=w.default.dialogType,t=w.default.urlPrefab,o=w.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,o)];case 1:return n.sent().getComponent(w.default).init(),[2]}})})},1e3*this._latencyAvgWarningDuration),[2]}})})},1e3*this._latencyAvgLimitDuration)))},t.prototype.onResized=function(){var e=cc.view.getFrameSize();e.width>e.height?this.showRotateDevice(!0):this.showRotateDevice(!1)},t.prototype.lateUpdate=function(e){if(!o.showedDisconnectPopup&&(p.Utils.isNetWorkAvailable()||d.NgcBuildConfig.offlineMode?this._noNetworkDetection=!1:this._noNetworkDetection?(this._noNetworkDetectionTimer+=e,this._noNetworkDetectionTimer>=o.MAX_NETWORK_CHECK_DURATION&&o.showNetworkDisconnect()):(this._noNetworkDetectionTimer=0,this._noNetworkDetection=!0),cc.sys.isMobile&&this.rotationDeviceNode&&this.rotationDeviceNode.active)){var t=cc.view.getFrameSize();t.width>t.height?this.showRotateDevice(!0):this.showRotateDevice(!1)}},t.prototype.showRotateDevice=function(e){return s(this,void 0,void 0,function(){var t,n,r,i,a,c;return l(this,function(s){switch(s.label){case 0:return t=navigator.userAgent,n=t.includes("iPad"),t.includes("FB_IAB/Orca-Android")&&!t.includes("Mobile Safari/")||n&&p.Utils.getBrowserType()===j?[2]:this.rotationDeviceNode?(e&&this.rotationDeviceNode.setSiblingIndex(o.ZORDER_ROTATE_DEVICE),this.rotationDeviceNode.active=e,[2]):!e||this.isRotationDialogInited?[3,2]:(this.isRotationDialogInited=!0,r=E.default.dialogType,i=E.default.urlPrefab,a=E.default.bundleName,c=this,[4,S.NgcDialogManager.createDialog(r,i,a)]);case 1:c.rotationDeviceNode=s.sent(),s.label=2;case 2:return[2]}})})},t.prototype.checkServerMaintenanceAndShowPopup=function(){var e,t=m.default.inst.getCurGameInfo();if(this.isServerMaintenanceShow||!t)return!1;var o=t.message;if(o&&o.type===u.SERVER_MAINTENANCE_MESSAGE){null===(e=y.NgcGame.inst)||void 0===e||e.pause(!0),this.isServerMaintenanceShow=!0;var n=f.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE_CONTENT").text,r=f.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE").text;return s(this,void 0,void 0,function(){var e,t,o;return l(this,function(i){switch(i.label){case 0:return e=R.default.dialogType,t=R.default.urlPrefab,o=R.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,o)];case 1:return i.sent().getComponent(R.default).init(r,n,function(){return location.reload()},null),[2]}})}),!0}return!1},t.checkAndShowUnSupportedBrowser=function(){if(_.NgcPlatform.isRunFromApp())return!0;if(o._isShowingUnSupportedBrowser)return!1;var e=p.Utils.getOSType(),t=p.Utils.getBrowserType(),n=o.browserSupportedList[e],r=!1;if((n.includes(t)||cc.sys.isNative)&&(r=!0),(navigator.userAgent.match(/coc_coc/)||navigator.userAgent.match(/Opera|OPR\//))&&(r=!1),navigator.userAgent.match(/Iphone/)&&navigator.userAgent.match(/Mobile/)&&(r=!0),!r){o._isShowingUnSupportedBrowser=!0,s(this,void 0,void 0,function(){var e,t,o;return l(this,function(r){switch(r.label){case 0:return e=A.default.dialogType,t=A.default.urlPrefab,o=A.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,o)];case 1:return r.sent().getComponent(A.default).init(n),[2]}})});var i=t===x||t===j;v.NgcTelemetry.inst.LogEvent_GameTechMessageUnsupported({osType:e,osVersion:cc.sys.osVersion,browserType:t,browserVersion:cc.sys.browserVersion,checker:i})}return r},t.showWarningLoginWithAndroidWebview=function(){return p.Utils.getOSType()===p.OS_TYPE.ANDROID&&p.Utils.getBrowserType()===x&&(o._isShowingWarningWebView||(o._isShowingWarningWebView=!0,s(this,void 0,void 0,function(){var e,t,n;return l(this,function(r){switch(r.label){case 0:return e=N.default.dialogType,t=N.default.urlPrefab,n=N.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,n)];case 1:return r.sent().getComponent(N.default).init(function(){o._isShowingWarningWebView=!1}),[2]}})})),!0)},t.showWarningLoginWithWebview=function(){var e=p.Utils.getBrowserType();return(e===x||e===j)&&(o._isShowingWarningWebView||(o._isShowingWarningWebView=!0,s(this,void 0,void 0,function(){var e,t,n;return l(this,function(r){switch(r.label){case 0:return e=N.default.dialogType,t=N.default.urlPrefab,n=N.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,n)];case 1:return r.sent().getComponent(N.default).init(function(){o._isShowingWarningWebView=!1}),[2]}})})),!0)},t.showNetworkDisconnect=function(){o.showedDisconnectPopup||(d.NgcBuildConfig.offlineMode&&p.Utils.reloadPage(),o.showedDisconnectPopup=!0,s(this,void 0,void 0,function(){var e,t,o;return l(this,function(n){switch(n.label){case 0:return e=O.default.dialogType,t=O.default.urlPrefab,o=O.default.bundleName,[4,S.NgcDialogManager.createDialog(e,t,o)];case 1:return n.sent().getComponent(O.default).init(),[2]}})}))},t.inst=null,t.CONNECT_RETRY_MAX_COUNT=15,t.LATENCY_BAD_CONNECTION=1e3,t.LATENCY_WEAK_CONNECTION=5e3,t.MATCHMAKING_TIME_OUT=1e4,t.ZORDER_SERVER_MAINTENANCE=100,t.ZORDER_ROTATE_DEVICE=200,t._isShowingUnSupportedBrowser=!1,t._isShowingWarningWebView=!1,t.showedDisconnectPopup=!1,t.MAX_NETWORK_CHECK_DURATION=3,t.browserSupportedList=[[B,M],[B,F,M],[B,U,x,M],[G,B,j,M],[G,B,F,M]],c([L(cc.SpriteFrame)],t.prototype,"iconNetworkErr",void 0),c([L(cc.SpriteFrame)],t.prototype,"iconNetworkBad",void 0),c([L(cc.Prefab)],t.prototype,"rotateDeviceToPlayPrefab",void 0),c([L(cc.Prefab)],t.prototype,"loadingPrefab",void 0),c([L(cc.Prefab)],t.prototype,"badConnectionPrefab",void 0),c([L(cc.Prefab)],t.prototype,"dialogTechMessagesPrefab",void 0),o=c([k],t)}(cc.Component);n.default=H,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./TechMessageAndroidWebview":"TechMessageAndroidWebview","./TechMessageFPS":"TechMessageFPS","./TechMessageIdleDisconnect":"TechMessageIdleDisconnect","./TechMessageIdleFPSWarning":"TechMessageIdleFPSWarning","./TechMessageIdleWarningDialog":"TechMessageIdleWarningDialog","./TechMessageLatencyDisconnect":"TechMessageLatencyDisconnect","./TechMessageLatencyWarning":"TechMessageLatencyWarning","./TechMessageNetworkDisconnect":"TechMessageNetworkDisconnect","./TechMessageSupportBrowser":"TechMessageSupportBrowser","./TechMessagesDialog":"TechMessagesDialog","./TechMessagesPortraitOnly":"TechMessagesPortraitOnly"}],Telemetry_impl_NullSrv:[function(e,t,o){"use strict";cc._RF.push(t,"f47b4qOIkxD15983UxlnMjf","Telemetry_impl_NullSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Telemetry"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.isLoggedIn=function(){return!0},t.prototype.getTelemetrySystem=function(){return a.TelemetrySystem.Null},t.prototype.getName=function(){return"Null"},t.prototype._preInit=function(){return new Promise(function(e){return e()})},t.prototype._login=function(){return new Promise(function(e){return e()})},t.prototype._init=function(){return new Promise(function(e){return e()})},t.prototype.LogEvent_CustomEvent=function(){},t.prototype.LogEvent_StartGame=function(){},t.prototype.LogEvent_EnterShop=function(){},t.prototype.LogEvent_PurchaseItem=function(){},t.prototype.LogEvent_CollectPurchaseItem=function(){},t.prototype.LogEvent_ShopItemViewed=function(){},t.prototype.setGameQueueStartExtraParam=function(){},t.prototype.setGameRoundStartExtraParam=function(){},t.prototype.setGameRoundOverExtraParam=function(){},t.prototype.setGameRoundOverClickedExtraParam=function(){},t.prototype.LogEvent_GameQueueStart=function(){},t.prototype.LogEvent_GameRoundStart=function(){},t.prototype.LogEvent_GameRoundOver=function(){},t.prototype.LogEvent_GameRoundOverClicked=function(){},t.prototype.LogEvent_PlayerDied=function(){},t.prototype.LogEvent_PlayerRevived=function(){},t.prototype.LogEvent_PlayerCrownRewardCollect=function(){},t.prototype.LogEvent_LuckyboosterClicked=function(){},t.prototype.LogEvent_LuckyboosterCollected=function(){},t.prototype.LogEvent_ReportOrigin=function(){},t.prototype.LogEvent_GameOverData=function(){},t.prototype.LogEvent_ReportLoadingStep=function(){},t.prototype.LogEvent_ReportNetStats=function(){},t.prototype.LogEvent_SpectatorMode=function(){},t.prototype.LogEvent_EnterScreen=function(){},t.prototype.LogEvent_ExitScreen=function(){},t.prototype.LogEvent_SettingInformation=function(){},t.prototype.LogEvent_LanguageChanged=function(){},t.prototype.LogEvent_DailyLoginReward=function(){},t.prototype.LogEvent_InfoLeaderboard=function(){},t.prototype.LogEvent_InitShare=function(){},t.prototype.LogEvent_ShareCompletion=function(){},t.prototype.LogEvent_GameAdsStart=function(){},t.prototype.LogEvent_GameAdsStop=function(){},t.prototype.LogEvent_GameAdsRequest=function(){},t.prototype.LogEvent_PlayerClickedStartGame=function(){},t.prototype.LogEvent_ReportTiming=function(){},t.prototype.LogEvent_SendEmoji=function(){},t.prototype.LogEvent_ShareInit=function(){},t.prototype.LogEvent_ShareClick=function(){},t.prototype.LogEvent_ShareComplete=function(){},t.prototype.LogEvent_LoginAttempt=function(){},t.prototype.LogEvent_LoginSuccess=function(){},t.prototype.LogEvent_MoreGameInit=function(){},t.prototype.LogEvent_BrandGameInit=function(){},t.prototype.LogEvent_LikeUsInit=function(){},t.prototype.LogEvent_LikeUsSuccess=function(){},t.prototype.LogEvent_AddToHomeInit=function(){},t.prototype.LogEvent_AddToHomeComplete=function(){},t.prototype.LogEvent_NameEvent=function(){},t.prototype.LogEvent_GamePlayStart=function(){},t.prototype.LogEvent_PlayerClickedCreatePartyRoom=function(){},t.prototype.LogEvent_PlayerClickedStartPartyGame=function(){},t.prototype.LogEvent_InvitePartyInit=function(){},t.prototype.LogEvent_JointRoom=function(){},t.prototype.LogEvent_ReturnParty=function(){},t.prototype.LogEvent_LeaveParty=function(){},t.prototype.LogEvent_GameTechWarning=function(){},t.prototype.LogEvent_GameTechMessage=function(){},t.prototype.LogEvent_GameTechMessageRespond=function(){},t.prototype.LogEvent_GameTechMessageUnsupported=function(){},t.prototype.LogEvent_OnboardingDailyloginCollected=function(){},t.prototype.LogEvent_OnboardingDailyVideoRequest=function(){},t.prototype.LogEvent_OnboardingDailyVideoStart=function(){},t.prototype.LogEvent_OnboardingDailyVideoEnd=function(){},t.prototype.LogEvent_OnboardingPreR2InterRequest=function(){},t.prototype.LogEvent_OnboardingPreR2InterStart=function(){},t.prototype.LogEvent_OnboardingPreR2InterEnd=function(){},t.prototype.LogEvent_OnboardingGameSpectatorEnd=function(){},t.prototype.LogEvent_OnboardingClaim2xVideoRequest=function(){},t.prototype.LogEvent_OnboardingClaim2xVideoStart=function(){},t.prototype.LogEvent_OnboardingClaim2xVideoEnd=function(){},t.prototype.LogEvent_OnboardingGameRoundOverClicked=function(){},t.prototype.markOnboardingClaim2xVideoEvents=function(){},t.prototype._getParameter=function(){return new Promise(function(e){return e()})},t.prototype._setUserValue=function(){return new Promise(function(e){return e()})},t.prototype.getFirebaseRemoteConfig=function(){},i([s],t)}(a.NgcTelemetry));o.default=l,cc._RF.pop()},{"./Telemetry":"Telemetry"}],Telemetry:[function(e,t,o){"use strict";cc._RF.push(t,"505334vIjRPVZDWRFNWpCXQ","Telemetry");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTelemetry=o.TelemetrySystem=void 0;var c=e("../../GameFramework/Scripts/BuildConfig"),s=e("../../SDK/Nano/NanoSrv"),l=e("../Platform/Platform"),u=e("../Service"),p=cc._decorator,d=p.ccclass;p.property,function(e){e[e.DevFake=0]="DevFake",e[e.Firebase=1]="Firebase",e[e.Null=2]="Null"}(o.TelemetrySystem||(o.TelemetrySystem={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isActive=!0,t._trackingConfig={mandatoryEvents:[],mandatoryParams:[]},t._isReceivedTrackingConfig=!1,t.timeStamp_loadingGameStart=null,t.initialized=!1,t.timersSuspendedAt=0,t.timers={},t.customParams={},t}var o;return r(t,e),o=t,t.prototype.preInit=function(e){return this._preInit(e)},Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!1,configurable:!0}),t.prototype.isPlatformBlocked=function(){return l.NgcPlatform.isOfflineMode()||this.blockedPlatforms().includes(c.NgcBuildConfig.buildPlatform)},t.prototype.blockedPlatforms=function(){var e=[];return e.push("GameDistribution","HUZ"),e},t.prototype.getGDPRTrackingConfig=function(){return this._isReceivedTrackingConfig?this._trackingConfig:this._getTrackingConfigs()},t.prototype.isMandatoryEvent=function(e){return this._isReceivedTrackingConfig||this.getGDPRTrackingConfig(),-1!==this._trackingConfig.mandatoryEvents.indexOf(e)},t.prototype.isMandatoryParam=function(e){return-1!==this._trackingConfig.mandatoryParams.indexOf(e)},t.prototype._getTrackingConfigs=function(){var e=s.default.inst.getCurGameInfo().gameParams,t=e&&e.GDPR_Tracking;return console.log("@@@@@@@@@@@@@@@@@_getTrackingConfigs ",t),this._isReceivedTrackingConfig=!0,this._trackingConfig.mandatoryEvents=(t.mandatoryEvents||"").trim().split(/\r\n|\r|\n|,| /),this._trackingConfig.mandatoryParams=(t.mandatoryParams||"").trim().split(/\r\n|\r|\n|,| /),console.log("@@@@@@@@@@@@@@@@@_getTrackingConfigs AFFTERRR",this._trackingConfig),this._trackingConfig},t.prototype.sendFunnelEvents=function(){var e=this,t=window.trackingFunnelEvents||[];t.forEach(function(n,r){var i=n.param;if("loading_gameStart"===n.name&&(e.timeStamp_loadingGameStart=n.param.clientTimestamp),r>0){var a=t[r-1].param;i.actualSec=i.clientTimestamp-a.clientTimestamp}o.inst.LogCustomEvent(n.name,i)}),window.trackingFunnelEvents=[]},t.prototype.isInitalized=function(){return this.initialized},t.prototype.init=function(e){var t=this;return this.initialized?new Promise(function(e){e(t.initialized)}):(console.log("Telemetry "+this.getName()+" init()"),this._init(e))},t.prototype.suspendTimers=function(){0!=this.timersSuspendedAt&&console.warn("Timers were already suspended when suspend was called again!"),this.timersSuspendedAt=Date.now()},t.prototype.resumeTimers=function(){if(0!=this.timersSuspendedAt){var e=Date.now()-this.timersSuspendedAt,t=this;Object.keys(this.timers).forEach(function(o){var n=t.timers[o];n.startTime+=e,t.timers[o]=n,console.log("Rolling back timer "+o+" by "+e+" MS")}),this.timersSuspendedAt=0}else console.warn("Timers were not suspended. Resume ignored")},t.prototype.login=function(e){return!!this.isLoggedIn()||(this._login(e,function(){}),!0)},t.setGameImportantInfos=function(e,t){o.gameImportantInfos={},o.gameImportantInfos.coinBalanceID=e,o.gameImportantInfos.itemCategories=t||[]},t.prototype.LogCustomEvent=function(e,t){this.LogEvent_CustomEvent(e,t)},t.prototype.LogEvent_BeginTimer=function(e){if(this.timers.hasOwnProperty(e))console.warn('Telemetry: beginTimer( "'+e+'" ) already called');else{var t=new Date;this.timers[e]={startTime:t.getTime()}}},t.prototype.LogEvent_EndTimer=function(e,t){if(this.timers.hasOwnProperty(e)){var o=new Date,n=this.timers[e],r=(o.getTime()-n.startTime)/1e3;return t&&this.LogEvent_ReportTiming(e,r),delete this.timers[e],r}console.warn('Telemetry: endTimer( "'+e+'" ) - did not get first get a beginTimer()!')},t.prototype.setCustomExtraParamsForEvent=function(e,t){this.customParams[e]=t},t.prototype.addExtraParams=function(e,t){if(this.customParams.hasOwnProperty(e)){var o=this.customParams[e];t=i(i({},t),o)}return t},t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getParameter=function(e){return this._getParameter(e)},t.prototype.setUserValue=function(e){this._setUserValue(e)},t.srvInstances=[],t.inst=null,t.creationTable={},t.gameImportantInfos=null,o=a([d],t)}(u.NgcService);o.NgcTelemetry=f,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../SDK/Nano/NanoSrv":"NanoSrv","../Platform/Platform":"Platform","../Service":"Service"}],TestGame:[function(e,t,o){"use strict";cc._RF.push(t,"34d03UhI7dM9pOJoGtjZhla","TestGame");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return r(t,e),t.prototype.start=function(){},i([s(cc.Label)],t.prototype,"label",void 0),i([s],t.prototype,"text",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TextboxDialog:[function(e,t,o){"use strict";cc._RF.push(t,"4fb70wKeptLXJnBeKS3kHjM","TextboxDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.editBox=null,t._callBackOk=null,t}return r(t,e),t.prototype.init=function(e,t){this._callBackOk=t,this.titleLabel.string=e},t.prototype.OkOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.EditBox)],t.prototype,"editBox",void 0),i([s],t)}(a.NgcDialogBase);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase"}],ThrobTween:[function(e,t,o){"use strict";cc._RF.push(t,"3bffbf3f1tNpaoKVr8xw8Y2","ThrobTween");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=1,t.to=2,t.cycleTimeSec=1,t}return r(t,e),t.prototype.start=function(){cc.tween(this.node).repeatForever(cc.tween(this.node).to(this.cycleTimeSec/2,{scale:this.from},{easing:function(e){return e*e}}).to(this.cycleTimeSec/2,{scale:this.to},{easing:function(e){return e*e}})).start()},i([s],t.prototype,"from",void 0),i([s],t.prototype,"to",void 0),i([s],t.prototype,"cycleTimeSec",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TimerLabelLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"8d384wPOCZMxYqHIIwpxz2q","TimerLabelLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTimerLabelLocalized=o.TimerLabelType=void 0;var a,c=e("./LabelLocalized"),s=e("./LocalizedManager"),l=cc._decorator,u=l.ccclass,p=l.property,d=l.menu;(function(e){e[e.SIMPLE=0]="SIMPLE",e[e.SEMI=1]="SEMI",e[e.DETAIL=2]="DETAIL"})(a=o.TimerLabelType||(o.TimerLabelType={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayStyle=a.SIMPLE,t.showDay=!0,t.showHour=!0,t.showMin=!0,t.showSec=!0,t.autoRemoveWhenZero=!0,t.showUnderThresholdStatus=!0,t.dynamicFormat=!0,t._timeCountInterval=null,t._realTimeCounting=!1,t._counting=!1,t._originalRemainingTime=null,t._timerExpired=!1,t._timerExpiredCallback=null,t._timeText={day:"",hour:"",min:"",sec:""},t.isEnglish=!1,t}return r(t,e),t.prototype.onLoad=function(){this.displayStyle===a.SEMI&&(this._timeText.day="d",this._timeText.hour="h",this._timeText.min="m",this._timeText.sec="s"),this.isEnglish="en"==s.NgcLocalizedManager.curLang},t.prototype.setTimerExpiredCallback=function(e){this._timerExpiredCallback=e},t.prototype.onTimerExpiredCallback=function(){this._timerExpiredCallback&&this._timerExpiredCallback()},t.prototype.startCount=function(e,t){void 0===t&&(t=!0),this._timerExpired=!1,this._realTimeCounting=t,this._counting=!0;var o=Date.now()+e;this._realTimeCounting?(this._originalRemainingTime=o,this.updateLabelContent(this.getRemainingDayAndTime(o))):(this._originalRemainingTime=e,this.updateLabelContent(this.getTimeObject(this._originalRemainingTime)))},t.prototype.update=function(e){this._counting&&!this._timerExpired&&(this._realTimeCounting?(this.updateLabelContent(this.getRemainingDayAndTime(this._originalRemainingTime)),this._originalRemainingTime-Date.now()<=0&&(this.onTimerExpiredCallback(),this._timerExpired=!0)):(this._originalRemainingTime-=1e3*e,this.updateLabelContent(this.getTimeObject(this._originalRemainingTime)),this._originalRemainingTime<=0&&(this.onTimerExpiredCallback(),this._timerExpired=!0)))},t.prototype.getTimeText=function(e,t){return this.displayStyle===a.DETAIL&&(this._timeText.day=s.NgcLocalizedManager.t("NGG_TIME_DAY"+(e>1?"_MULTI":"")).text,this._timeText.hour=s.NgcLocalizedManager.t("NGG_TIME_HOUR"+(e>1?"_MULTI":"")).text,this._timeText.min=s.NgcLocalizedManager.t("NGG_TIME_MINUTE"+(e>1?"_MULTI":"")).text,this._timeText.sec=s.NgcLocalizedManager.t("NGG_TIME_SECOND"+(e>1?"_MULTI":"")).text),this._timeText[t]},t.prototype.updateLabelContentManually=function(e,t,o,n){this.updateLabelContent({day:e,hour:t,min:o,sec:n})},t.prototype.updateLabelContent=function(e){var t="",o=this.showDay,n=this.showHour,r=this.showMin,i=this.showSec;this.autoRemoveWhenZero&&(0===e.day&&(o=!1),0===e.hour&&(n=!1),0===e.min&&(r=!1),0===e.showSec&&(i=!1));var c=this.showUnderThresholdStatus&&0==e.hour&&0==e.day&&e.min<1;switch(this.displayStyle){case a.SEMI:this.dynamicFormat?e.day>0?(t+=o?e.day.toString().padStart(2,"0")+""+this.getTimeText(e.day,"day")+" ":"",t+=n?e.hour.toString().padStart(2,"0")+""+this.getTimeText(e.hour,"hour")+" ":""):e.hour>0?(t+=n?e.hour.toString().padStart(2,"0")+""+this.getTimeText(e.hour,"hour")+" ":"",t+=r?e.min.toString().padStart(2,"0")+""+this.getTimeText(e.min,"min")+" ":""):e.min>0?t+=r?e.min.toString().padStart(2,"0")+""+this.getTimeText(e.min,"min")+" ":"":e.sec>0&&(t+=i?e.sec.toString().padStart(2,"0")+""+this.getTimeText(e.sec,"sec")+" ":""):(t+=o?e.day.toString().padStart(2,"0")+""+this.getTimeText(e.day,"day")+" ":"",t+=n?e.hour.toString().padStart(2,"0")+""+this.getTimeText(e.hour,"hour")+" ":"",t+=r?e.min.toString().padStart(2,"0")+""+this.getTimeText(e.min,"min")+" ":"",t+=i?e.sec.toString().padStart(2,"0")+""+this.getTimeText(e.sec,"sec")+" ":""),c&&(t=s.NgcLocalizedManager.t("NGG_TIME_UNDER_MINUTE").text);break;case a.DETAIL:this.dynamicFormat?e.day>0?(t+=o?this.getTimeText(e.day,"day").replace("X",e.day.toString())+" ":"",t+=n?this.getTimeText(e.hour,"hour").replace("X",e.hour.toString())+" ":""):e.hour>0?(t+=n?this.getTimeText(e.hour,"hour").replace("X",e.hour.toString())+" ":"",t+=r?this.getTimeText(e.min,"min").replace("X",e.min.toString())+" ":""):e.min>0&&(t+=r?this.getTimeText(e.min,"min").replace("X",e.min.toString())+" ":""):(t+=o?this.getTimeText(e.day,"day").replace("X",e.day.toString())+" ":"",t+=n?this.getTimeText(e.hour,"hour").replace("X",e.hour.toString())+" ":"",t+=r?this.getTimeText(e.min,"min").replace("X",e.min.toString())+" ":""),c&&(t=s.NgcLocalizedManager.t("NGG_TIME_UNDER_MINUTE").text);break;case a.SIMPLE:if(o){t+=o?e.day.toString()+" "+this.getTimeText(e.day,"day")+" ":"";var l=!1;this.showHour&&(t+=e.hour.toString().padStart(2,"0"),l=!0),this.showMin&&(t+=l?":":"",t+=e.min.toString().padStart(2,"0"),l=!0),this.showSec&&(t+=l?":":"",t+=e.sec.toString().padStart(2,"0"),l=!0)}else l=!1,this.showHour&&(t+=e.hour.toString().padStart(2,"0"),l=!0),this.showMin&&(t+=l?":":"",t+=e.min.toString().padStart(2,"0"),l=!0),this.showSec&&(t+=l?":":"",t+=e.sec.toString().padStart(2,"0"),l=!0)}this.string=t},t.prototype.getRemainingDayAndTime=function(e){var t;return t=e-Date.now(),this.getTimeObject(t)},t.prototype.getTimeObject=function(e){var t=Math.floor(e/1e3%60),o=Math.floor(e/1e3/60%60),n=Math.floor(e/1e3/60/60%24),r=Math.floor(e);!1===this.showDay&&(n=Math.floor(e/1e3/60/60));var i=Math.floor(e/1e3/60/60/24);return{day:i=i>0?i:0,hour:n=n>0?n:0,min:o=o>0?o:0,sec:t=t>0?t:0,extra:r=r>0?r:0}},t.prototype.onDestroy=function(){},i([p({type:cc.Enum(a)})],t.prototype,"displayStyle",void 0),i([p],t.prototype,"showDay",void 0),i([p],t.prototype,"showHour",void 0),i([p],t.prototype,"showMin",void 0),i([p],t.prototype,"showSec",void 0),i([p],t.prototype,"autoRemoveWhenZero",void 0),i([p],t.prototype,"showUnderThresholdStatus",void 0),i([p],t.prototype,"dynamicFormat",void 0),i([u,d("NGC/LocalizedTimerLabel")],t)}(c.NgcLabelLocalized);o.NgcTimerLabelLocalized=f,cc._RF.pop()},{"./LabelLocalized":"LabelLocalized","./LocalizedManager":"LocalizedManager"}],TipBackAndForth:[function(e,t,o){"use strict";cc._RF.push(t,"f42337A/lZC/54BOHCKt8dA","TipBackAndForth");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.angle=30,t.speed=2,t.cnt=0,t}return r(t,e),t.prototype.start=function(){},t.prototype.update=function(e){this.cnt+=e;var t=this.cnt%this.speed/this.speed,o=Math.cos(6.28*t)*this.angle;this.node.angle=o},i([s(cc.Label)],t.prototype,"label",void 0),i([s],t.prototype,"text",void 0),i([s],t.prototype,"angle",void 0),i([s],t.prototype,"speed",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TipManager:[function(e,t,o){"use strict";cc._RF.push(t,"b13ef1MjtVE/oPWhA3Etpi/","TipManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTipManager=o.Tip=o.Type_Tip=void 0;var a,c=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=cc._decorator,p=u.ccclass,d=u.property;(function(e){e[e.Mobile=0]="Mobile",e[e.Desktop=1]="Desktop",e[e.Both=2]="Both"})(a=o.Type_Tip||(o.Type_Tip={}));var f=function(e,t,o,n){void 0===e&&(e=a.Both),void 0===t&&(t=""),void 0===o&&(o=""),void 0===n&&(n=null),this.type=e,this.textKey=t,this.imageName=o,this.spriteFrame=null};o.Tip=f;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tips=[],t.tipConfig=null,t.tipSprite=null,t.tipLabel=null,t.tipSpriteNext=null,t.tipLabelNext=null,t.COUNTDOWN_TIME_SHOW_TIP=3,t.arrowPre=null,t.arrowNext=null,t.timeShowTip=0,t._curTip=null,t.tipsDisplayed=[],t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"curTip",{get:function(){return this._curTip},set:function(e){var t=this;if(!(e>=this.tips.length||e<0)){"PIXTEL"==s.NgcBuildConfig.buildPlatform&&4==e&&(e=5);var o=this.tips[e];if(null==this._curTip)cc.tween(this.tipLabel.node).call(function(){t.tipLabel.string=l.NgcLocalizedManager.t(o.textKey).text,t.tipLabel.node.x=0}).to(.3,{opacity:255}).start(),cc.tween(this.tipSprite.node).call(function(){o.spriteFrame&&(t.tipSprite.spriteFrame=o.spriteFrame),t.tipSprite.node.x=0}).to(.3,{opacity:255}).start();else{var n=this.tipLabel;this.tipLabel=this.tipLabelNext,this.tipLabelNext=n;var r=this.tipSprite;this.tipSprite=this.tipSpriteNext,this.tipSpriteNext=r,cc.tween(this.tipLabel.node).call(function(){t.tipLabel.string=l.NgcLocalizedManager.t(o.textKey).text,t.tipLabel.node.x=500}).to(.3,{x:0}).start(),cc.tween(this.tipSprite.node).call(function(){t.tipSprite.spriteFrame=o.spriteFrame,t.tipSprite.node.x=500}).to(.3,{x:0}).start(),cc.tween(this.tipLabelNext.node).to(.2,{x:-500}).start(),cc.tween(this.tipSpriteNext.node).to(.2,{x:-500}).start()}this.arrowPre.active=0!=e,this.timeShowTip=this.COUNTDOWN_TIME_SHOW_TIP,this._curTip=e}},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst=this,this.parseInputConfigFile()&&this.loadTipSpriteFrames(),this.tipSprite.node.opacity=0,this.tipLabel.node.opacity=0,o.staticTipConfig=this.tipConfig},t.prototype.nextTip=function(){var e=c.Utils.randomFromTo(0,this.tips.length-1);for(this.tipsDisplayed.length==this.tips.length&&(this.tipsDisplayed=[]);this.tipsDisplayed.indexOf(e)>=0;)e=c.Utils.randomFromTo(0,this.tips.length-1);this.tipsDisplayed.push(e),this.curTip=e},t.prototype.update=function(e){if(!l.NgcLocalizedManager.firstTimeInit){if(null===this.curTip)return this.curTip=0,void this.tipsDisplayed.push(0);this.timeShowTip-=e,this.timeShowTip<0&&this.nextTip()}},t.prototype.parseInputConfigFile=function(){var e=this,t=this.tipConfig.text.split("\r\n");t.shift();try{t.forEach(function(t){var o=t.split("|"),n=o[0];if(null!=n&&0!=n.length&&""!=n){var r=o[1],i=a.Both;switch(o[2].toLowerCase()){case"mobile":i=a.Mobile;break;case"desktop":i=a.Desktop;break;default:i=a.Both}var c=new f(i,n,r,null);i==a.Both?e.tips.push(c):cc.sys.isMobile&&i==a.Mobile?e.tips.push(c):cc.sys.isMobile||i!=a.Desktop||e.tips.push(c)}})}catch(o){return console.error("Error reading configTip file. Format error?"),!1}return!0},t.prototype.loadTipSpriteFrames=function(){var e=this;cc.assetManager.loadBundle(s.NgcBuildConfig.services.Tips.bundles,function(t,o){e.tips.forEach(function(e){o.load(e.imageName,cc.SpriteFrame,function(t,o){t||(e.spriteFrame=o)})})})},t.inst=null,i([d(cc.TextAsset)],t.prototype,"tipConfig",void 0),i([d(cc.Sprite)],t.prototype,"tipSprite",void 0),i([d(cc.Label)],t.prototype,"tipLabel",void 0),i([d(cc.Sprite)],t.prototype,"tipSpriteNext",void 0),i([d(cc.Label)],t.prototype,"tipLabelNext",void 0),i([d],t.prototype,"COUNTDOWN_TIME_SHOW_TIP",void 0),i([d(cc.Node)],t.prototype,"arrowPre",void 0),i([d(cc.Node)],t.prototype,"arrowNext",void 0),o=i([p],t)}(cc.Component);o.NgcTipManager=h,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],TrackPointsManager:[function(e,t,o){"use strict";cc._RF.push(t,"3111ekpzidMa4ozJ6FOdW9g","TrackPointsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listTrackPoints=[],t.listSorted=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){null==o.inst?(o.inst=this,this.listTrackPoints=[],this.listSorted=[]):console.error("More than one TrackPointsManager inst created")},t.prototype.start=function(){},t.prototype.reset=function(){this.listTrackPoints=[],this.listSorted=[]},t.prototype.addNewPoint=function(e){this.listTrackPoints.push(e)},t.prototype.getSortPoints=function(){for(var e=[],t=0;t<this.listSorted.length;t++)e.push(this.listSorted[t].pos);return e},t.prototype.sortTrackPoints=function(){var e=this;this.listSorted=[],this.listSorted.push(this.listTrackPoints[0]),this.listSorted.push(this.listTrackPoints[1]),this.listTrackPoints.splice(0,2);for(var t=1;this.listTrackPoints.length>0;){var o=void 0;-1!=this.listSorted[t].nextId?(cc.log("Founding IDPoint from NEXT ID:  "+this.listSorted[t].nextId),-1==(o=this.listTrackPoints.findIndex(function(o){return o.Id=e.listSorted[t].nextId}))?o=this.getIndexPointNearest(this.listSorted[t].pos):cc.log("Founded nextID ")):o=this.getIndexPointNearest(this.listSorted[t].pos),this.listSorted.push(this.listTrackPoints[o]),this.listTrackPoints.splice(o,1),t++}},t.prototype.getIndexPointNearest=function(e){for(var t=e.sub(this.listTrackPoints[0].pos).mag(),o=0,n=1;n<this.listTrackPoints.length;n++){var r=e.sub(this.listTrackPoints[n].pos).mag();t>r&&(t=r,o=n)}return o},t.inst=null,o=i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],TrackPoints:[function(e,t,o){"use strict";cc._RF.push(t,"fe22fe4AlROB4NcSXAi9tc+","TrackPoints");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,a=(r.property,function(){function e(){}return Object.defineProperty(e.prototype,"Id",{get:function(){return this._Id},set:function(e){this._Id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextId",{get:function(){return this._nextId},set:function(e){this._nextId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this._pos},set:function(e){this._pos=e},enumerable:!1,configurable:!0}),e.prototype.init=function(e,t,o){void 0===t&&(t=-1),this.Id=e,this.nextId=t,this.pos=o},e.prototype.start=function(){},n([i],e)}());o.default=a,cc._RF.pop()},{}],TrackingHelper:[function(e,t,o){"use strict";cc._RF.push(t,"25c96EuNjdDPq1mv6XlLVTY","TrackingHelper");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,a=(r.property,function(){function e(){}return n([i],e)}());o.default=a,cc._RF.pop()},{}],TrackingManager:[function(e,t,o){"use strict";cc._RF.push(t,"9ecf1adN65PO45768HPsNmR","TrackingManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/NgcMain"),c=e("../../NanoGameCore/GameFramework/Scripts/NgcTrackingManager"),s=e("../../NanoGameCore/Services/Telemetry/Telemetry"),l=e("../Main"),u=e("../Utils/Util"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.log("Duplicate TrackingManager"),o.inst=this,e.prototype.onLoad.call(this)},t.getInst=function(){return o.inst},t.prototype.LogEvent_StartTutorial_01=function(){this.LogCustomEvent("player_start_tutorial_1")},t.prototype.LogEvent_StartTutorial_02=function(){this.LogCustomEvent("player_start_tutorial_2")},t.prototype.LogEvent_FTUE_Handedness=function(e){this.LogCustomEvent("player_handedness",{Hand:e})},t.prototype.LogEvent_EnterNewName=function(e){this.LogCustomEvent("name_event",{Name:e})},t.prototype.LogEvent_FireBaseControlType=function(e){this.LogCustomEvent("player_control",{playerControl:e})},t.prototype.LogEvent_UnlockMap=function(e){this.LogCustomEvent("map_unlock",{mapID:e})},t.prototype.LogEvent_PlayerDeRank=function(e){this.LogCustomEvent("player_derank",{newTier:e})},t.prototype.LogEvent_FTUE_ControlUnlocked=function(){this.LogCustomEvent("player_control_unlocked")},t.prototype.LogEvent_FTUE_ZoneNoInput=function(){this.LogCustomEvent("turning_zone_no_input")},t.prototype.LogEvent_FTUE_EnterTurningZone=function(){this.LogCustomEvent("player_enter_turning_zone")},t.prototype.LogEvent_FTUE_FinishedTut01=function(){this.LogCustomEvent("finish_tut_track_1")},t.prototype.LogEvent_FTUE_FinishedTut02=function(){this.LogCustomEvent("finish_tut_track_2")},t.prototype.LogEvent_FTUE_Tut02_RewardScreen=function(){this.LogCustomEvent("tut_2_reward_screen")},t.prototype.LogEvent_GameOver=function(e,t,o,n,r,i,a,c,s,l,u,p,d,f){var h={roundID:e,currentFPS:t,averageFPS:o,maxFPS:n,minFPS:r,roundTime:i,finalPositionInActionPhase:a,coinEarnings:c,crownEarnings:s,mapID:l,lapsCompleted:u,numberOfTimesWrongWay:p,carID:d,leagueID:f};this.LogCustomEvent("game_roundOver",h)},t.prototype.LogEvent_CarUnlockProgression=function(e,t,o,n,r){this.LogCustomEvent("car_unlock_progression",{carID:e,currentProgression:t,progressionLimit:o,acquisitionChannel:n,coinBalance:r})},t.prototype.suspendTimers=function(){s.NgcTelemetry.inst.suspendTimers()},t.prototype.getParameter=function(e){return s.NgcTelemetry.inst.getParameter(e)},t.prototype.resumeTimers=function(){s.NgcTelemetry.inst.resumeTimers()},t.prototype.LogEvent_BeginTimer=function(e){s.NgcTelemetry.inst.LogEvent_BeginTimer(e)},t.prototype.LogEvent_EndTimer=function(e,t){return s.NgcTelemetry.inst.LogEvent_EndTimer(e,t)},t.prototype.LogEvent=function(e,t){void 0===t&&(t=null),s.NgcTelemetry.inst?s.NgcTelemetry.inst.LogCustomEvent(e,t):cc.error("Tracking instance is not inited")},t.prototype.LogEvent_ReportNetStats=function(e){s.NgcTelemetry.inst.LogEvent_ReportNetStats(e)},t.prototype.LogEvent_BuyItem=function(e,t,o,n,r,i,a,c,s){void 0===s&&(s=!1);var l={type:e,itemPurchaseID:t,itemPurchaseValue:o,itemSpentID:a,itemSpentValue:c,purchaseNumber:n,starsBalance:Math.round(i),coinsBalance:Math.round(r),isConsumable:s?1:0};this.LogCustomEvent("player_purchase",l),cc.log("Log BuyItem: "+JSON.stringify(l))},t.prototype.LogEvent_EnterShop=function(){s.NgcTelemetry.inst.LogEvent_EnterShop()},t.prototype.LogEvent_PlayerClickedStartGame=function(e){s.NgcTelemetry.inst.LogEvent_PlayerClickedStartGame(e)},t.prototype.LogEvent_ReportLoadingStep=function(e,t){s.NgcTelemetry.inst.LogEvent_ReportLoadingStep(e,t)},t.prototype.LogEvent_SpectatorMode=function(e){s.NgcTelemetry.inst.LogEvent_SpectatorMode(e)},t.prototype.LogEvent_StartGame=function(){s.NgcTelemetry.inst.LogEvent_StartGame()},t.prototype.LogEvent_EnterScreen=function(e){s.NgcTelemetry.inst.LogEvent_EnterScreen(e)},t.prototype.LogEvent_ExitScreen=function(e){s.NgcTelemetry.inst.LogEvent_ExitScreen(e)},t.prototype.LogEvent_SettingInformation=function(e){s.NgcTelemetry.inst.LogEvent_SettingInformation(e)},t.prototype.LogEvent_LanguageChanged=function(e){s.NgcTelemetry.inst.LogEvent_LanguageChanged(e)},t.prototype.LogEvent_ReportOrigin=function(e){s.NgcTelemetry.inst.LogEvent_ReportOrigin(e)},t.prototype.LogEvent_ReportTiming=function(e,t){s.NgcTelemetry.inst.LogEvent_ReportTiming(e,t)},t.prototype.LogEvent_LoginSuccess=function(e,t){s.NgcTelemetry.inst.LogEvent_LoginSuccess(e,t)},t.prototype.LogEvent_SendEmoji=function(e){s.NgcTelemetry.inst.LogEvent_SendEmoji(e)},t.prototype.LogEvent_PlayerClickedCreatePartyRoom=function(e){s.NgcTelemetry.inst.LogEvent_PlayerClickedCreatePartyRoom(e)},t.prototype.LogEvent_PlayerClickedStartPartyGame=function(e){s.NgcTelemetry.inst.LogEvent_PlayerClickedStartPartyGame(e)},t.prototype.LogEvent_InvitePartyInit=function(e){s.NgcTelemetry.inst.LogEvent_InvitePartyInit(e)},t.prototype.LogEvent_JointRoom=function(e){s.NgcTelemetry.inst.LogEvent_JointRoom(e)},t.prototype.LogEvent_ReturnParty=function(e){s.NgcTelemetry.inst.LogEvent_ReturnParty(e)},t.prototype.LogEvent_LeaveParty=function(e){s.NgcTelemetry.inst.LogEvent_LeaveParty(e)},t.prototype.LogEvent_DailyLoginReward=function(e){s.NgcTelemetry.inst.LogEvent_DailyLoginReward(e)},t.prototype.LogEvent_InfoLeaderboard=function(e){s.NgcTelemetry.inst.LogEvent_InfoLeaderboard(e)},t.prototype.LogEvent_InitShare=function(){s.NgcTelemetry.inst.LogEvent_InitShare()},t.prototype.LogEvent_ShareCompletion=function(e){this.LogEvent("Completion of Share action",{Channel:e,context:u.default.enumToString(l.AppContext,a.NgcMain.getAppContext())}),s.NgcTelemetry.inst.LogEvent_ShareCompletion(e)},t.prototype.LogEvent_ControlChange=function(e){this.LogCustomEvent("control_change",{playerControl:e})},t.prototype.LogEvent_GameAdsRequest=function(e,t,o,n,r,i,a){s.NgcTelemetry.inst.LogEvent_GameAdsRequest(e,t,o,n,r,a)},t.prototype.LogEvent_GameAdsStart=function(e,t,o,n,r,i,a,c,l){s.NgcTelemetry.inst.LogEvent_GameAdsStart(e,t,o,n,r,i,a,l)},t.prototype.LogEvent_GameAdsStop=function(e,t,o,n,r,i,a,c,l,u){s.NgcTelemetry.inst.LogEvent_GameAdsStop(e,t,n,r,i,a,c,u)},t.prototype.LogEvent_ShareInit=function(e){s.NgcTelemetry.inst.LogEvent_ShareInit(e)},t.prototype.LogEvent_ShareComplete=function(e,t){s.NgcTelemetry.inst.LogEvent_ShareComplete(e,t)},t.prototype.LogEvent_LoginAttempt=function(e){s.NgcTelemetry.inst.LogEvent_LoginAttempt(e)},t.prototype.LogEvent_MoreGameInit=function(e){s.NgcTelemetry.inst.LogEvent_MoreGameInit(e)},t.prototype.LogEvent_LikeUsInit=function(e){s.NgcTelemetry.inst.LogEvent_LikeUsInit(e)},t.prototype.LogEvent_LikeUsSuccess=function(e){s.NgcTelemetry.inst.LogEvent_LikeUsSuccess(e)},t.prototype.LogEvent_AddToHomeInit=function(e){s.NgcTelemetry.inst.LogEvent_AddToHomeInit(e)},t.prototype.LogEvent_AddToHomeComplete=function(e){s.NgcTelemetry.inst.LogEvent_AddToHomeComplete(e)},t.prototype.LogEvent_NameEvent=function(e){s.NgcTelemetry.inst.LogEvent_NameEvent(e)},t.prototype.LogEvent_GamePlayStart=function(){s.NgcTelemetry.inst.LogEvent_GamePlayStart()},t.prototype.LogEvent_LapCompleted=function(e){this.LogCustomEvent("game_lapCompleted",e)},t.prototype.LogEvent_CurrencyIncome=function(e,t,o){var n={source:e,coinEarnValue:t,coinBalance:o};this.LogCustomEvent("currency_income",n)},t.prototype.LogEvent_CurrencyExpense=function(e,t,o){var n={source:e,coinSpentValue:t,coinBalance:o};this.LogCustomEvent("currency_expense",n)},t.prototype.LogEvent_ReviveOffer=function(e,t,o,n,r){var i={totalPlayersInGame:e,scoreBalance:t,runTime:o,gameID:n,isAccepted:r?"1":"0"};this.LogCustomEvent("revive_offer",i)},t.prototype.LogEvent_Onboarding=function(e,t,o,n,r){var i={checker:t};o&&(i.finalPositionInActionPhase=o),n&&(i.actualSec=n),r&&(i.multiplierOffer=r),cc.log("debug firebase log onboarding","onboarding_"+e,i),this.LogCustomEvent("onboarding_"+e,i)},t.inst=null,o=i([d],t)}(c.default));o.default=f,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../NanoGameCore/GameFramework/Scripts/NgcTrackingManager":"NgcTrackingManager","../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../Main":"Main","../Utils/Util":"Util"}],Transition:[function(e,t,o){"use strict";cc._RF.push(t,"3bc10AIigFJSKAp8NDzujRe","Transition");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){this.node.opacity=0,this.node.active=!1},t.prototype.fadeIn=function(e,t,o){var n=this;void 0===t&&(t=0),this.node.opacity=255,cc.tween(this.node).delay(t).to(e,{opacity:0}).call(function(){o&&o(),n.node.active=!1}).start()},t.prototype.fadeOut=function(e,t){this.node.active=!0,this.node.opacity=0,cc.tween(this.node).to(e,{opacity:255}).call(function(){t&&t()}).start()},t.prototype.startFadeIn_Out=function(e,t,o,n,r){var i=this;void 0===o&&(o=0),this.fadeOut(e,function(){n&&n(),i.fadeIn(t,o,function(){r&&r()})})},t.inst=null,o=i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],TuningData:[function(e,t,o){"use strict";cc._RF.push(t,"54fac4lEqpHJKbQ+cvJs7Q2","TuningData");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("js-yaml"),c=e("./Player/CarParameters"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDeveloperMode=!1,t.localParameters=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.loadObjectFromYAMLString=function(e){a.safeLoad(e),c.default.inst.parseCarParameter()},t.parseData=function(e){if(!o._isLoaded){var t=e.GameParameters,n=t;"string"==typeof t&&(n=JSON.parse(t)),o._paramsObject=n,o._isLoaded=!0}},t.isLoaded=function(){return o._isLoaded},t.prototype.getGameParameters=function(){return o._paramsObject},t.inst=null,t._isLoaded=!1,t._paramsObject=null,i([u(cc.TextAsset)],t.prototype,"localParameters",void 0),o=i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Player/CarParameters":"CarParameters","js-yaml":50}],Turbo:[function(e,t,o){"use strict";cc._RF.push(t,"5e00bt8qbVCmINMxGqhvdDX","Turbo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CAR_ADD_ON_TURBO=void 0;var a,c,s=e("../CarSelector/CarSkinSelecter"),l=cc._decorator,u=l.ccclass,p=l.property;(function(e){e[e.BLAZE=0]="BLAZE",e[e.BLAZESPARKLE=1]="BLAZESPARKLE",e[e.SHOCK=2]="SHOCK"})(a||(a={})),function(e){e[e.SPARKLE=0]="SPARKLE",e[e.HEART=1]="HEART",e[e.BLAZE=2]="BLAZE",e[e.BLAZESPARKLE=3]="BLAZESPARKLE",e[e.SHOCKS=4]="SHOCKS"}(c=o.CAR_ADD_ON_TURBO||(o.CAR_ADD_ON_TURBO={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showTime=2,t.materials=[],t.particles=[],t.turbo_default=null,t.ms_akira=null,t.tubo_base=null,t._time=0,t._resetAkira=!1,t}return r(t,e),t.prototype.onLoad=function(){this._type=s.CAR_TURBO_TYPE.NA},t.prototype.start=function(){},t.prototype.update=function(e){switch(this._type){case s.CAR_TURBO_TYPE.NA:case s.CAR_TURBO_TYPE.HEART:case s.CAR_TURBO_TYPE.SPARKLE:break;case s.CAR_TURBO_TYPE.STREAK:this.tubo_base.node.active?this._resetAkira||(this.ms_akira.reset(),this._resetAkira=!0):this._resetAkira=!1;break;case s.CAR_TURBO_TYPE.BLAZE:case s.CAR_TURBO_TYPE.BLAZESPARKLE:case s.CAR_TURBO_TYPE.SHOCKS:this.tubo_base&&this.tubo_base.node.active&&this._base_material?(this._time+=e,this._base_material.setProperty("deltaTime",this._time)):this._base_material&&this._base_material.setProperty("deltaTime",0)}},t.prototype.setMat=function(e){if(e!=s.CAR_TURBO_TYPE.NA)switch(this.turbo_default.node.destroy(),e){case s.CAR_TURBO_TYPE.STREAK:this.ms_akira.node.active=!0,this.tubo_base.getComponent(cc.Sprite).enabled=!1;break;case s.CAR_TURBO_TYPE.SHOCKS:this._base_material=this.tubo_base.setMaterial(0,this.materials[a.SHOCK]),this.particles[c.SHOCKS].node.active=!0,this.ms_akira.node.destroy();break;case s.CAR_TURBO_TYPE.BLAZESPARKLE:this._base_material=this.tubo_base.setMaterial(0,this.materials[a.BLAZESPARKLE]),this.particles[c.BLAZESPARKLE].node.active=!0,this.ms_akira.node.destroy();break;case s.CAR_TURBO_TYPE.BLAZE:this._base_material=this.tubo_base.setMaterial(0,this.materials[a.BLAZE]),this.particles[c.BLAZE].node.active=!0,this.ms_akira.node.destroy();break;case s.CAR_TURBO_TYPE.SPARKLE:this.particles[c.SPARKLE].node.active=!0,this.ms_akira.node.destroy(),this.tubo_base.destroy();break;case s.CAR_TURBO_TYPE.HEART:this.particles[c.HEART].node.active=!0,this.tubo_base.destroy(),this.ms_akira.node.destroy()}else this.tubo_base.node.destroy(),this.ms_akira.node.destroy();this.particles.forEach(function(e){e.node.active||e.node.destroy()}),this._type=e},t.prototype.reset=function(){this._time=0},i([p(cc.Material)],t.prototype,"materials",void 0),i([p(cc.ParticleSystem)],t.prototype,"particles",void 0),i([p(cc.Sprite)],t.prototype,"turbo_default",void 0),i([p(cc.MotionStreak)],t.prototype,"ms_akira",void 0),i([p(cc.Sprite)],t.prototype,"tubo_base",void 0),i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../CarSelector/CarSkinSelecter":"CarSkinSelecter"}],TweenMove:[function(e,t,o){"use strict";cc._RF.push(t,"b1259JwFpRG2LEUI/VlUqOi","TweenMove");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeEasing=.5,t.timeWait=.8,t._centerPos=null,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.easIn()},t.prototype.easIn=function(){null==this._centerPos&&(this._centerPos=cc.v3(this.node.position)),this.node.setPosition(-this.node.width/2,this._centerPos.y,0),this.node.opacity=0;var e=cc.Vec2.distance(cc.v2(this.node.position),cc.v2(this._centerPos)),t=cc.v3(this._centerPos.x+e,this._centerPos.y,0);cc.tween(this.node).to(this.timeEasing,{position:this._centerPos,opacity:255},{easing:"quintOut"}).to(this.timeWait,{}).to(this.timeEasing,{position:t,opacity:0},{easing:"quintIn"}).start()},i([s],t.prototype,"timeEasing",void 0),i([s],t.prototype,"timeWait",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TweenOpacity:[function(e,t,o){"use strict";cc._RF.push(t,"a8a650PDxFPd5r0ouODTH/m","TweenOpacity");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toOpacity=255,t.timeSec=1,t.startOnEnable=!0,t.homeOpacity=255,t}return r(t,e),t.prototype.onEnable=function(){cc.tween(this.node).to(this.timeSec,{opacity:this.toOpacity}).start()},t.prototype.onDisable=function(){this.node.opacity=this.homeOpacity},t.prototype.onLoad=function(){this.homeOpacity=this.node.opacity},t.prototype.start=function(){},i([s],t.prototype,"toOpacity",void 0),i([s],t.prototype,"timeSec",void 0),i([s],t.prototype,"startOnEnable",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],UplaySrv:[function(t,o,n){"use strict";cc._RF.push(o,"d7a96RQRqRMvb2DFzJAOZUJ","UplaySrv");var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},c=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../GameFramework/Scripts/BuildConfig"),l=t("../../GameFramework/Scripts/NgcMain"),u=t("../../GameFramework/Scripts/NgcUserInfo"),p=t("../Nano/NanoSrv"),d=t("../SDK"),f=t("../../Services/Platform/Platform"),h=t("../../Core/Utils"),g=cc._decorator,y=(g.ccclass,g.property,function(t){function o(){var e=t.call(this)||this;if(e.isIframeLoaded=!1,e.myAppId="b2f1dcc3-b629-4fdd-b8c3-a8d580dab056",e.myGenomeId=s.NgcBuildConfig.uplayGenomeId,e.myLang="en-US",e.locationHref=f.NgcPlatform.getLocationHref(),e.myNextUrlIframe=location.href.slice(0,location.href.lastIndexOf("index.html"))+"nextUrlGameIframe.html",e.myNextUrlPopUp=location.href.slice(0,location.href.lastIndexOf("index.html"))+"nextUrlGamePopUp.html?myGenomeId="+e.myGenomeId,e.MY_CALLBACK_PAGE=location.href.slice(0,location.href.lastIndexOf("index.html"))+"callback_thirdPartyCookiesBlockedGame.html",e.extraParam=e.locationHref,e.isStandalone=!1,e.areTPCenabled=!0,e.connectSDK=null,e.userTicket=null,e.userSessionId=null,e.userId=null,e.tdata=null,e.onLoginCompleted=null,e.urlWindow=null,e.userData={nameOnPlatform:null,userId:null,avatarMobile:null,avatarDesktop:null},e.isConflict=!1,e.loginFromHost=!1,o.inst){if(f.NgcPlatform.isOfflineMode())return e;cc.error("There are multiple places constructing UplaySrv!!!")}return o.inst=e,e}return i(o,t),o.prototype.isLoggedIn=function(){return!1},o.prototype.getUserID=function(){return o.inst.getUplayId()},o.prototype.getName=function(){return"UplaySrv"},o.prototype._preInit=function(){return new Promise(function(t){o.inst.preInitialized=!0;try{window.location!==window.parent.location?o.inst.isStandalone=!1:o.inst.isStandalone=!0}catch(e){o.inst.isStandalone=!1}window.retrieveTicketData=o.inst.retrieveTicketData,window.retrieveTicketDataFromCallback=o.inst.retrieveTicketDataFromCallback,t("UplaySrv pre-initialized")})},o.prototype._init=function(){var t=this;if("HUZ"==s.NgcBuildConfig.buildPlatform||s.NgcBuildConfig.offlineMode)return new Promise(function(e){return e(null)});var n=window.location.search,r=(new URLSearchParams(n).get("gameID"),btoa(this.extraParam));return this.MY_CALLBACK_PAGE.includes("?")?this.MY_CALLBACK_PAGE+="&extra="+r:this.MY_CALLBACK_PAGE+="?&extra="+r,new Promise(function(n){console.log("[UplaySrv] `_init` UbiConnect called ",t.MY_CALLBACK_PAGE),window.Connect?(Connect.init({env:s.NgcBuildConfig.SDK.UplaySrv.env,appId:o.inst.myAppId,genomeId:o.inst.myGenomeId,lang:o.inst.myLang,nextUrl:encodeURIComponent(t.MY_CALLBACK_PAGE),thirdPartyCookiesSupport:!f.NgcPlatform.isRunAsIframeOnNano()}),Connect.sdk.subscribe(function(t){o.inst.connectSDK=t,o.inst.connectSDK.getTicket().subscribe(function(t){if(console.log("[UplaySrv] `_init`  getTicket = "+t.status),"ok"===t.status)o.inst.areTPCenabled=!0,o.inst.retrieveTicketData();else if(o.inst.areTPCenabled=!1,!1===o.inst.isStandalone)try{window.parent}catch(e){console.log(e)}})}),n("UbiConnect initialized")):n()})},o.prototype.retrieveTicketData=function(){console.log("[UplaySrv] retrieveTicketData"),o.inst.connectSDK.getTicket().subscribe(function(e){if(console.log("[UplaySrv] `retrieveTicketData` getTicketResponse = "+e.status),o.inst.ticketResponse=e,"ok"===e.status){var t=e.payload;o.inst.tdata=t,o.inst.userTicket=t.ticket,o.inst.userSessionId=t.sessionId,o.inst.userId=t.userId,o.inst.areTPCenabled}o.inst.onLoginCompleted&&(o.inst.onLoginCompleted(e.status),o.inst.onLoginCompleted=null)})},o.prototype._login=function(){return this.loginFromHost?(this.loginFromHost=!1,new Promise(function(e){o.inst.sendInfoToServer().then(function(t){t?e("Conflict"):(u.default.socialId=o.inst.getUplayId(),u.default.avatarUrl=o.inst.getProfilePictureUrl(),u.default.localUserName=l.NgcMain.inst.localUserName=o.inst.getFormatName(),e("OK"))}).catch(function(){e("err")})})):new Promise(function(e,t){o.inst.uplayLogin(function(n){console.log("[UplaySrv] `_login` uplayLogin response"),"ok"===n?o.inst.getProfile().then(function(){window.uplayLoginData&&window.uplayLoginData.loginInfo||t("getProfile error");var n=window.uplayLoginData.loginInfo.userData;n?(n.hasOwnProperty("userId")&&(o.inst.userData.userId=n.userId),n.hasOwnProperty("nameOnPlatform")&&(o.inst.userData.nameOnPlatform=n.nameOnPlatform),o.inst.userData.avatarMobile=window.uplayLoginData.loginInfo.loginAvatarMobile,o.inst.userData.avatarDesktop=window.uplayLoginData.loginInfo.loginAvatarDesktop):t("Parse JSON profile error"),o.inst.sendInfoToServer().then(function(t){t?e("Conflict"):(u.default.socialId=o.inst.getUplayId(),u.default.avatarUrl=o.inst.getProfilePictureUrl(),u.default.localUserName=l.NgcMain.inst.localUserName=o.inst.getFormatName(),e("OK"))}).catch(function(){e("err")})},function(){t("getProfile error")}):t(n)})})},o.prototype._logout=function(){return new Promise(function(e){o.inst.connectSDK.logout(o.inst.userTicket,o.inst.userSessionId).subscribe(function(t){console.log("[UplaySrv] `_logOut` user Uplay log out"),e(t)})})},o.prototype.uplayLogin=function(e){o.inst.onLoginCompleted=function(t){console.log("[UplaySrv] `uplayLogin` onLoginComplete. status = "+t),e(t)},h.Utils.isRunningWithFacebookApp()||!o.inst.areTPCenabled&&!o.inst.isStandalone||!0===o.inst.areTPCenabled&&!0===o.inst.isStandalone&&!cc.sys.isMobile?o.inst.loginIframe(s.NgcBuildConfig.SDK.UplaySrv.urlConnect+"/login?appId="+o.inst.myAppId+"&genomeId="+o.inst.myGenomeId+"&lang="+o.inst.myLang+"&nextUrl="+encodeURIComponent(o.inst.myNextUrlIframe)):o.inst.loginPopUp(s.NgcBuildConfig.SDK.UplaySrv.urlConnect+"/login?appId="+o.inst.myAppId+"&genomeId="+o.inst.myGenomeId+"&lang="+o.inst.myLang+"&nextUrl="+encodeURIComponent(o.inst.myNextUrlPopUp))},o.prototype.loginIframe=function(e){console.log("[UplaySrv] login iframe called");var t=document.getElementById("uplay-iframe-container"),o=document.getElementById("uplay-iframe");t.classList.contains("hide")&&(o.src=e,t.classList.remove("hide"))},o.prototype.loginPopUp=function(e){console.log("[UplaySrv] login popup called");var t=window.screenX+screen.width/2-240,n=screen.height/2-360;o.loginPopUp=window.open(e,"Ubisoft Connect","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=480, height=720, top="+n+", left="+t)},o.prototype.isLoginPopUpOpen=function(){var e=document.getElementById("uplay-iframe-container");return o.loginPopUp?!o.loginPopUp.closed:!(!e||e.classList.contains("hide"))},o.prototype.retrieveTicketDataFromCallback=function(e){var t=e.payload;o.inst.ticketResponse=e,o.inst.tdata=t,o.inst.userTicket=t.ticket,o.inst.userSessionId=t.sessionId,o.inst.userId=t.userId,o.inst.onLoginCompleted(e.status),o.inst.onLoginCompleted=null},o.prototype.getProfile=function(){return new Promise(function(e,t){console.log("UplaySrv.inst.userId = "+o.inst.userId),console.log("UplaySrv.inst.userSessionId = "+o.inst.userSessionId),o.inst.connectSDK.getProfiles(o.inst.userTicket,o.inst.userSessionId,o.inst.userId).subscribe(function(n){console.log("[UplaySrv] Getprofile"),console.log("[UplaySrv] getProfilesResponse = "+JSON.stringify(n)),n?(n.payload.profiles.forEach(function(t){if(console.log("profile = "+JSON.stringify(t)),"uplay"===t.platformType){console.log("uplay"===t.platformType);var n="https://ubisoft-avatars.akamaized.net/"+o.inst.userId+"/default_146_146.png",r="https://ubisoft-avatars.akamaized.net/"+o.inst.userId+"/default_256_256.png";return t.nameOnPlatform,window.uplayLoginData={platform:t.platformType,loginInfo:{userData:t,ticket:o.inst.tdata,loginAvatarMobile:n,loginAvatarDesktop:r},env:s.NgcBuildConfig.SDK.UplaySrv.env},void e(null)}}),e(null)):t()})})},o.prototype.reLogin=function(){Connect.sdk.subscribe(function(t){o.inst.connectSDK=t,o.inst.connectSDK.getTicket().subscribe(function(t){if("ok"===t.status)o.inst.areTPCenabled=!0,o.inst.retrieveTicketData();else if(console.log("TPC are disabled"),o.inst.areTPCenabled=!1,!1===o.inst.isStandalone)try{window.parent}catch(e){console.log(e)}})})},o.prototype.ubiConnect=function(){},o.prototype.sendInfoToServer=function(){var e={name:o.inst.getFormatName(),socialId:o.inst.getUplayId(),avatar:o.inst.getProfilePictureUrl(),platform:"uplay"},t=!1;return new Promise(function(n,r){p.default.inst.servicePost("/player/loginsocialv2",JSON.stringify(e),function(e,i){if(e)r(e);else{console.log(i),console.log("update info success");var a=JSON.parse(i).data;a&&a.conflict_info&&(t=!0,o.inst.dataConflict=a.conflict_info),o.inst.isConflict=t,n(t)}})})},o.prototype.getFriendsData=function(){return[]},o.prototype.isConnected=function(){return"ok"===o.inst.ticketResponse.status},o.prototype.getUplayId=function(){return o.inst.userData.userId},o.prototype.forceLinkInfoToServer=function(e){return a(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){switch(i.label){case 0:return t=e?"local":"server",n=o.inst.getFormatName(),r={name:n,socialId:o.inst.getUplayId(),avatar:o.inst.getProfilePictureUrl(),platform:"uplay",resolve:t},[4,new Promise(function(t){p.default.inst.servicePost("/player/loginsocialv2",JSON.stringify(r),function(n,r){if(n)t(n);else{if(console.log(r),!e){var i=JSON.parse(r).data;if(i&&i.hasOwnProperty("id")&&(o.inst.dataConflict.id=i.id),i&&i.hasOwnProperty("secretKey")){var a=i.secretKey;u.default.secretKey=a}}console.log("force update info success"),t(null)}})})];case 1:return i.sent(),[2]}})})},o.prototype.sendAvatarToServer=function(){console.log("Method not implemented for Uplay")},o.prototype.sendNameToServer=function(){console.log("Method not implemented for Uplay")},o.prototype.getProfilePictureUrl=function(){return cc.sys.isMobile?o.inst.userData.avatarMobile:o.inst.userData.avatarDesktop},o.prototype.getFormatName=function(){return u.default.correctNameFormat(o.inst.getFullName())},o.prototype.getFullName=function(){return o.inst.userData.nameOnPlatform},o.prototype.checkLoginStatus=function(){return new Promise(function(e){console.log("[Uplay] `checkLoginStatus` userTicket = "+o.inst.userTicket),e(null)})},o.prototype.sendFriendListToServer=function(){console.log("Uplay has no friends")},o.prototype.fetchInfoWithAccessToken=function(){return new Promise(function(e){o.inst.getProfile().then(function(){if(window.uplayLoginData&&window.uplayLoginData.loginInfo){var t=window.uplayLoginData.loginInfo.userData;t&&(t.hasOwnProperty("userId")&&(o.inst.userData.userId=t.userId),t.hasOwnProperty("nameOnPlatform")&&(o.inst.userData.nameOnPlatform=t.nameOnPlatform),o.inst.userData.avatarMobile=window.uplayLoginData.loginInfo.loginAvatarMobile,o.inst.userData.avatarDesktop=window.uplayLoginData.loginInfo.loginAvatarDesktop),e(null)}else e(null)})})},o.prototype.getDataConflict=function(){return o.inst.dataConflict},o.inst=null,o.loginPopUp=null,o}(d.NgcSDK));n.default=y,cc._RF.pop()},{"../../Core/Utils":"Utils","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcMain":"NgcMain","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../Services/Platform/Platform":"Platform","../Nano/NanoSrv":"NanoSrv","../SDK":"SDK"}],UserInfo:[function(t,o,n){"use strict";cc._RF.push(o,"386dbTvdvVKP7RFiYDyUGZU","UserInfo");var r=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.UserInfo=n.ItemsBought=void 0;var a=t("./Utils/ConstConfig"),c=t("simple-crypto-js"),s=t("./CarSelector/CarSkinSelecter"),l=t("./FTUE/FTUEManager"),u=t("./CustomControl"),p=t("./Main"),d=t("./League/LeagueManager"),f=t("../NanoGameCore/Services/Inventory/Inventory"),h=t("../NanoGameCore/Services/Social/Social"),g=t("./Screens/StartScreen/StartMain"),y=t("../NanoGameCore/Services/Platform/Platform"),m=t("../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),_=t("../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),v=t("../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),S=t("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),N=t("../NanoGameCore/SDK/Nano/NanoSrv"),b=t("../NanoGameCore/Services/Leaderboard/Leaderboard"),C=t("./Dialog/NavBarConflictDialog/CusNavBarConflictDialog"),P=t("./Tracking/TrackingManager"),I=t("../globals"),w=t("../NanoGameCore/GameFramework/Scripts/NgcLocalStorage"),T=t("./Screens/ShopScreen/Shop"),O=t("../NanoGameCore/CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager"),R=t("../NanoGameCore/GameFramework/Scripts/BuildConfig");function E(t){try{var o=parseFloat(t);return"number"!=typeof o||isNaN(o)?0:o}catch(e){return 0}}function A(e){return"true"==e||1==e}var D=function(e,t,o){void 0===e&&(e=[a.ConstConfig.SKIN[0]]),void 0===t&&(t=[a.ConstConfig.SKIN[0]]),void 0===o&&(o=[a.ConstConfig.SKIN[0]]),this.Hat=e,this.Glasses=t,this.Dress=o};n.ItemsBought=D;var k=function(){function e(){}return e.getCryptr=function(){return this.cryptr||(this.cryptr=new c.default(a.ConstConfig.PARAMS.SECRET_KEY)),this.cryptr},e.keymangle=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},Object.defineProperty(e,"curCoin",{get:function(){return E(w.default.getKey(a.ConstConfig.COIN,a.ConstConfig.PARAMS.DEFAULT_COIN))},set:function(e){w.default.setKey(a.ConstConfig.COIN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"controlType",{get:function(){var t,o=this.getCryptr();try{null==(t=E(o.decrypt(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.CONTROL_TYPE)))))&&(t=u.ControlType.UNDEFINED)}catch(n){t=u.ControlType.UNDEFINED}return t},set:function(t){var o=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.CONTROL_TYPE),o.encrypt(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"curStars",{get:function(){return E(w.default.getKey(a.ConstConfig.STAR,a.ConstConfig.PARAMS.DEFAULT_COIN))},set:function(e){w.default.setKey(a.ConstConfig.STAR,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalTimeSpent",{get:function(){return E(w.default.getKey(a.ConstConfig.TOTAL_TIME_SPENT,0))},enumerable:!1,configurable:!0}),e.accumulateTotalTimeSpent=function(t){w.default.setKey(a.ConstConfig.TOTAL_TIME_SPENT,e.totalTimeSpent+t)},Object.defineProperty(e,"bestScore",{get:function(){return E(w.default.getKey(a.ConstConfig.BEST_SCORE,0))},set:function(e){w.default.setKey(a.ConstConfig.BEST_SCORE,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"powerScore",{get:function(){var t,o=this.getCryptr();try{null==(t=E(o.decrypt(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.POWER_SCORE)))))&&(t=0)}catch(n){t=0}return t},set:function(t){var o=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.POWER_SCORE),o.encrypt(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"FTUE",{get:function(){var t,o=this.getCryptr();try{null==(t=A(o.decrypt(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.FTUE)))))&&(t=!0)}catch(n){t=!0}return t},set:function(t){var o=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.FTUE),o.encrypt(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"curSkin",{get:function(){var t,o=this.getCryptr();try{null==(t=o.decrypt(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.SKIN))))&&(t=a.ConstConfig.LIST_OWNED_SKIN[0])}catch(n){t=a.ConstConfig.LIST_OWNED_SKIN[0]}return t||(t=this.curSkin),t},set:function(t){var o=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.SKIN),o.encrypt(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"curFTUEStep",{get:function(){var t,o=this.getCryptr();try{null==(t=o.decrypt(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.FTUE_STEP))))&&(t=l.FTUE_STEP.REACH_START_ZONE)}catch(n){t=l.FTUE_STEP.REACH_START_ZONE}return t},set:function(t){var o=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.FTUE_STEP),o.encrypt(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isDailyRewardAlreadyShow",{get:function(){return this.getCryptr(),A(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.IS_DAILYREWARD_ALREADY_SHOW)))},set:function(t){this.getCryptr(),cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.IS_DAILYREWARD_ALREADY_SHOW),t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"itemsBought",{get:function(){var t=null;try{t=this.getCryptr().decrypt(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.ITEMS_BOUGHT)))}catch(n){var o;t={Hat:[o=a.ConstConfig.SKIN[0]],Glasses:[o],Dress:[o]}}return t||(t={Hat:[o=a.ConstConfig.SKIN[0]],Glasses:[o],Dress:[o]}),t},set:function(t){var o=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.ITEMS_BOUGHT),o.encrypt(JSON.stringify(t)))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ownedSkins",{get:function(){var t,o=this.getCryptr();try{null==(t=o.decrypt(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.OWNED_SKIN))))&&(t=a.ConstConfig.LIST_OWNED_SKIN)}catch(n){t=a.ConstConfig.LIST_OWNED_SKIN}return t},set:function(t){var o=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.OWNED_SKIN),o.encrypt(JSON.stringify(t)))},enumerable:!1,configurable:!0}),e.addNewSkins=function(t){e.ownedSkins.push(t)},e.resetSkins=function(){e.ownedSkins=a.ConstConfig.LIST_OWNED_SKIN},Object.defineProperty(e,"skinProgresses",{get:function(){var t,o=this.getCryptr();try{null==(t=o.decrypt(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.IN_PROGRESS_SKIN))))&&(t={})}catch(n){t={}}return t},set:function(t){var o=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.IN_PROGRESS_SKIN),o.encrypt(JSON.stringify(t)))},enumerable:!1,configurable:!0}),e.updateSkinProgresses=function(t,o){var n=e.skinProgresses;n[t]=o,e.skinProgresses=n},e.resetSkinProgress=function(){e.skinProgresses={}},e.updateInventoryWithPlatform=function(){return r(this,void 0,void 0,function(){var t,o,n,r;return i(this,function(){return e.resetSkinProgress(),cc.log("updateInventoryWithPlatform",f.NgcInventory.inst.objectTypeTable),t=Object.values(f.NgcInventory.inst.objectTypeTable),(o=t.filter(function(e){return e.type==a.ConstConfig.INVENTORY.TYPE.CURRENCY})).filter(function(e){return e.itemID==a.ConstConfig.INVENTORY.ITEM_ID.COIN}).forEach(function(t){return f.NgcInventory.inst.getItemCount(t.itemID,function(t,o){o&&(e.curCoin=o.count,g.default.inst.curCoin=e.curCoin,I.default.ShopScreen.inst&&(I.default.ShopScreen.inst.coinNumber.string=e.curCoin+""))})}),o.filter(function(e){return e.category==a.ConstConfig.INVENTORY.CATEGORY.ADS_COUNTER}).forEach(function(t){return f.NgcInventory.inst.getItemCount(t.itemID,function(o,n){n&&e.updateSkinProgresses(t.itemID,n.count)})}),n=t.filter(function(e){return e.type==a.ConstConfig.INVENTORY.TYPE.EQUIPPABLE}),-1==(r=e.ownedSkins).indexOf(e.curSkin)&&e.addNewSkins(e.curSkin),n.map(function(e){return e.itemID}).forEach(function(t){return f.NgcInventory.inst.getItemCount(t,function(o,n){n&&-1==r.indexOf(t)&&e.addNewSkins(t)})}),[2]})})},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.setBestScore=function(e){return e>this.bestScore&&(this.bestScore=e),this.bestScore},e.getNumValue=function(t){var o,n=this.getCryptr();try{null==(o=E(n.decrypt(cc.sys.localStorage.getItem(e.keymangle(t)))))&&(o=0)}catch(r){o=0}return o},e.setNumValue=function(t,o){var n=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(o),n.encrypt(t))},e.getStringValue=function(t){var o=this.getCryptr(),n="";try{null==(n=o.decrypt(cc.sys.localStorage.getItem(e.keymangle(t))).toString())&&(n="")}catch(r){cc.warn(r),n=""}return n},e.setStringValue=function(t,o){var n=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(o),n.encrypt(t))},e.isNameCorrectFormat=function(e){if(e.length>12)return!1;var t=e.split(" ");return!(t[0].length>9||t.length>1&&(2!==t[1].length||"."!==t[1][1]))},e.correctNameFormat=function(t){if(e.isNameCorrectFormat(t))return t;var o=t.split(" ");if(1!==o.length){var n=o[0];n.length>9&&(n=n.slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...");var r=o[1];return r.length>0&&(r=r[0]+"."),n+" "+r}return o[0].length>9?o[0].slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...":t},Object.defineProperty(e,"isHardResetData",{get:function(){return A(w.default.getKey(a.ConstConfig.IS_HARD_RESET_DATA,!1))},set:function(e){w.default.setKey(a.ConstConfig.IS_HARD_RESET_DATA,e)},enumerable:!1,configurable:!0}),e.resolveConflict=function(t){return void 0===t&&(t=null),r(this,void 0,void 0,function(){var o,n,a=this;return i(this,function(c){switch(c.label){case 0:return[4,m.NgcDialogManager.createDialog(C.default.dialogType,C.default.urlPrefab,C.default.bundleName)];case 1:return o=c.sent(),(n=o.getComponent(C.default)).init(function(o){return r(a,void 0,void 0,function(){var n,a=this;return i(this,function(c){switch(c.label){case 0:return g.default.inst.loadingNode.active=!0,[4,h.NgcSocial.inst.forceLinkInfoToServer(o)];case 1:return c.sent(),o?(S.default.localUserName=p.Main.inst.localUserName=h.NgcSocial.inst.getFormatName(),S.default.avatarUrl=h.NgcSocial.inst.getProfilePictureUrl(),[3,4]):[3,2];case 2:return n=h.NgcSocial.inst.getConflictedData(),N.default.inst.userID=n.id,S.default.userIdKey=n.id,S.default.localUserName=p.Main.inst.localUserName=e.correctNameFormat(n.name),S.default.avatarUrl=n.avatar,n.hasOwnProperty("playerData")&&(n.playerData.hasOwnProperty("_bestScore")?e.bestScore=n.playerData._bestScore:e.bestScore=0,n.playerData.hasOwnProperty("_isAlreadyFirstShow")&&(e.isDailyRewardAlreadyShow=n.playerData._isAlreadyFirstShow)),[4,N.default.inst.refreshAccessToken()];case 3:c.sent(),c.label=4;case 4:return S.default.socialId=h.NgcSocial.inst.getSocialID(),S.default.facebookId=S.default.socialId,h.NgcSocial.inst.checkLoginStatus().then(function(){return r(a,void 0,void 0,function(){var n,r,a,c;return i(this,function(i){switch(i.label){case 0:return n=h.NgcSocial.inst.isConnected(),r=_.NgcLeaderboardManager.inst?_.NgcLeaderboardManager.inst.getLeaderBoardUIComponent():null,p.Main.getAppContext()!==p.AppContext.Leaderboard?[3,2]:[4,_.NgcLeaderboardManager.inst.getLocalPlayerRank(r.curTimeFilter,r.curPopulationFilter)];case 1:a=i.sent(),cc.log("debug local data",a),r.localUserData=a,r.updateContentFacebookProfile(),r.reloadFilter(),i.label=2;case 2:return r&&r.setLoginStatus(n),[4,_.NgcLeaderboardManager.inst.getAllTimeBestScore()];case 3:return(c=i.sent())&&e.setBestScore(c),g.default.inst.updatePercentofBeatPlayers(),o?[3,5]:[4,f.NgcInventory.inst.forceFetchInventory()];case 4:i.sent(),e.updateInventoryWithPlatform(),g.default.inst.applyBoosterFX(),T.default.inst&&(T.default.inst.itemLoaded=!1,T.default.inst.loadItems()),i.label=5;case 5:return h.NgcSocial.inst.isConnected()&&h.NgcSocial.inst.sendFriendListToServer(),t&&t(null,"login"),b.NgcLeaderboard.inst.clearCacheRequestData(),g.default.inst.updateBestScore(),_.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().reloadFilter(),o?[3,7]:[4,f.NgcInventory.inst.forceFetchInventory().then(function(){e.resetSkins(),e.updateInventoryWithPlatform().then(function(){s.default.inst.reset()})})];case 6:i.sent(),i.label=7;case 7:return v.NgcNavBarManager.inst.updateListEffectBtn(),t&&t(null,"login"),v.NgcNavBarManager.inst.setNavBarInfo(),O.NgcLuckyBoosterManager.getInstance().checkBoosterUI(),[2]}})})}).finally(function(){g.default.inst.loadingNode.active=!1}),y.NgcPlatform.inst.isSupportBridgeSocial()&&y.NgcPlatform.inst.onSocialLogInFromGame(),g.default.inst.updateLoginSocial(),d.default.clearCached(),[2]}})})}),n.show(),cc.log("Show dailog conflict"),[2]}})})},e.updateAdsInfo=function(e){void 0===e&&(e=!0),e?(S.default.numberOfAdsWatched++,S.default.numberAdsSession++):(S.default.numberOfAdsWatched--,S.default.numberAdsSession--)},e.clearSaveKeys=function(t){void 0===t&&(t=!0),t?cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.FTUE_STEP)):e.curFTUEStep=l.FTUE_STEP.FINISHED_ALL_FTUE,cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.COIN)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.CONTROL_TYPE)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.STAR)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.TOTAL_TIME_SPENT)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.USER_NAME_LOCAL)),S.default.socialId="",S.default.avatarUrl="",cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.BEST_SCORE)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.POWER_SCORE)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.FTUE)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SKIN)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.TOTAL_SESSIONS)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.IS_DAILYREWARD_ALREADY_SHOW)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.ITEMS_BOUGHT)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.OWNED_SKIN)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.IN_PROGRESS_SKIN)),cc.sys.localStorage.removeItem(a.ConstConfig.MUSIC_OFF),cc.sys.localStorage.removeItem(a.ConstConfig.SOUND_OFF),cc.sys.localStorage.removeItem(a.ConstConfig.CUR_LOCALIZATION_LANG),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.MAP)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.RANK_PERCENT_COUNTRY)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.CUR_FACEBOOK_ID)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.CUR_AVATAR_URL)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.FACEBOOK_ACCESS_TOKEN)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.GAME_RUNNING_SESSION)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.CUR_SOCIAL_ID)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.CUR_OFFER)),cc.sys.localStorage.removeItem(a.ConstConfig.SAVE_KEY.A2HS),null!=d.default.leagueTracks&&d.default.leagueTracks.forEach(function(t){cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.BEST_TOTAL_TIME+t.trackFile)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.BEST_TIME_LAP+t.trackFile)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.PLAYEDMAP+t.trackFile)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.RANK+t.trackFile)),cc.sys.localStorage.removeItem(e.keymangle(a.ConstConfig.SAVE_KEY.UNLOCKED_MAP+t.trackFile))})},e.updateCoint2Inventory=function(e){if(f.NgcInventory.inst)return new Promise(function(t,o){f.NgcInventory.inst.addItem(a.ConstConfig.INVENTORY.ITEM_ID.COIN,e,function(e,n){e?o(e):t(n)})})},e.addCoin=function(t,o){return new Promise(function(n,r){var i=e.updateCoint2Inventory(o);i.then(function(o){if(R.NgcBuildConfig.offlineMode)f.NgcInventory.inst.forceFetchInventory(function(t,o){t?r(t):o[a.ConstConfig.INVENTORY.ITEM_ID.COIN]&&(e.curCoin=o[a.ConstConfig.INVENTORY.ITEM_ID.COIN].count,g.default.inst&&g.default.inst.updateCoin(e.curCoin))});else{cc.log("updateCoint2Inventory s",JSON.parse(o));var n=JSON.parse(o);if(o&&n.data[a.ConstConfig.INVENTORY.ITEM_ID.COIN]){var i=n.data[a.ConstConfig.INVENTORY.ITEM_ID.COIN];console.log(i);var c=i.count-e.curCoin;0!=c&&(e.curCoin=i.count,g.default.inst&&g.default.inst.updateCoin(e.curCoin),c>0?P.default.getInst().LogEvent_CurrencyIncome(t,c,e.curCoin):c<0&&t!=a.ConstConfig.CURRENCY.SOURCE.GAME_END&&t!=a.ConstConfig.CURRENCY.SOURCE.GAME_END_MULTIPLY&&P.default.getInst().LogEvent_CurrencyExpense(t,Math.abs(c),e.curCoin))}}}),i.catch(function(e){cc.log("updateCoint2Inventory e",e),r()}),n(e.curCoin)})},Object.defineProperty(e,"curOffer",{get:function(){var t,o=this.getCryptr();try{t=o.decrypt(cc.sys.localStorage.getItem(e.keymangle(a.ConstConfig.SAVE_KEY.CUR_OFFER)))}catch(n){t=null}return null==t?null:t},set:function(t){var o=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(a.ConstConfig.SAVE_KEY.CUR_OFFER),o.encrypt(JSON.stringify(t)))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isA2HS",{get:function(){return A(cc.sys.localStorage.getItem(a.ConstConfig.SAVE_KEY.A2HS))},set:function(e){cc.sys.localStorage.setItem(a.ConstConfig.SAVE_KEY.A2HS,e)},enumerable:!1,configurable:!0}),e.readOldUserID=function(){var t=cc.sys.localStorage.getItem(e.LOCAL_STORAGE_USERID_KEY);return t&&0!=t.length?new c.default("pizzataco").decrypt(t).toString():null},Object.defineProperty(e,"isFirstTimeClicked",{get:function(){return A(cc.sys.localStorage.getItem(e.keymangle("FirstTimeClickPlay")))},set:function(t){cc.sys.localStorage.setItem(e.keymangle("FirstTimeClickPlay"),t)},enumerable:!1,configurable:!0}),e.resetPrivateData=function(){e.bestScore=0,e.curSkin=a.ConstConfig.LIST_OWNED_SKIN[0],e.itemsBought=new D,e.curCoin=0,e.curStars=0,e.accumulateTotalTimeSpent(0),e.bestScore=0,e.isFirstTimeClicked=!1},e.cryptr=null,e.sessionKey="",e.isShared=!1,e.countRun=0,e.MAX_FIRST_NAME_LENGHT=9,e.LOCAL_STORAGE_USERID_KEY="_linseb",e}();n.UserInfo=k,I.default.UserInfo=k,cc._RF.pop()},{"../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../NanoGameCore/CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../NanoGameCore/Services/Inventory/Inventory":"Inventory","../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../NanoGameCore/Services/Platform/Platform":"Platform","../NanoGameCore/Services/Social/Social":"Social","../globals":"globals","./CarSelector/CarSkinSelecter":"CarSkinSelecter","./CustomControl":"CustomControl","./Dialog/NavBarConflictDialog/CusNavBarConflictDialog":"CusNavBarConflictDialog","./FTUE/FTUEManager":"FTUEManager","./League/LeagueManager":"LeagueManager","./Main":"Main","./Screens/ShopScreen/Shop":"Shop","./Screens/StartScreen/StartMain":"StartMain","./Tracking/TrackingManager":"TrackingManager","./Utils/ConstConfig":"ConstConfig","simple-crypto-js":120}],Utils:[function(t,o,n){"use strict";cc._RF.push(o,"239e4yYMtdDs7sZISNvCfcX","Utils");var r=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(n,"__esModule",{value:!0}),n.findNode=n.csv2arr=n.LoadAsset=n.LoadBundleAsset=n.LoadResourceAsset=n.Utils=n.OS_TYPE=n.BROWSER_TYPE=void 0;var c,s,l=t("../Services/Platform/Platform");(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.CHROME=0]="CHROME",e[e.FIREFOX=1]="FIREFOX",e[e.EDGE=2]="EDGE",e[e.SAFARI=3]="SAFARI",e[e.SAMSUNG_INTERNET=4]="SAMSUNG_INTERNET",e[e.ANDROID_WEBVIEW=5]="ANDROID_WEBVIEW",e[e.SAFARI_IN_APP=6]="SAFARI_IN_APP"})(c=n.BROWSER_TYPE||(n.BROWSER_TYPE={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WINDOWS=1]="WINDOWS",e[e.ANDROID=2]="ANDROID",e[e.IOS=3]="IOS",e[e.MAC_OS=4]="MAC_OS"}(s=n.OS_TYPE||(n.OS_TYPE={}));var u=function(){function e(){}return e.getHttp=function(e,t,o,n){if(void 0===n&&(n=null),l.NgcPlatform.isOfflineMode())o("offline",null);else{var r=new XMLHttpRequest,i="";if(t&&Array.isArray(t)&&t.length>0)for(var a=0;a<t.length;a++)i=0==a?i+"?"+t[a][0]+"="+t[a][1]:i+"&"+t[a][0]+"="+t[a][1];else if("object"==typeof t){for(var c in i+="?",t)i+=c+"="+t[c]+"&";i=i.substr(0,i.length-1)}var s=e+i;s.includes("?")?s+="&dummy="+Date.now().toString():s+="?dummy="+Date.now().toString(),r.open("GET",s,!0),r.onloadend=function(){4==r.readyState&&200==r.status?o(null,r.responseText):4==r.readyState&&o(r.responseText,null)},r.onerror=function(t){console.log("Error getting URL "+e+": "+t),o(t,null)},r.ontimeout=function(t){console.log("Timeout getting URL "+e),o(t,null)},n&&r.setRequestHeader("Authorization","Bearer "+n),r.send()}},e.parseFunctionCallString=function(e){var t=/([a-zA-Z_$][-a-zA-Z_$0-9]*).*/.exec(e);if(!t)return[];var o=[],n=t[1].trim();return o[0]=n,(t=/.*\((.*)\)/.exec(e))&&t[1].trim().split(",").forEach(function(e){var t=e.trim();t.length>0&&o.push(t)}),o},e.postHttp=function(e,t,o,n){return void 0===o&&(o="application/json"),void 0===n&&(n=null),new Promise(function(r,i){l.NgcPlatform.isOfflineMode()&&i("Offline Mode");var a=new XMLHttpRequest;console.log("pars:",t),a.open("POST",e,!0),a.setRequestHeader("Content-type",o),a.onloadend=function(){4===a.readyState&&200===a.status?r(a.response):4===a.readyState&&i(a.response)},a.onerror=function(t){i("Error post URL "+e+": "+t)},a.ontimeout=function(){i("Timeout post URL "+e)},n&&a.setRequestHeader("Authorization","Bearer "+n),a.send(t)})},e.addQuery=function(e,t){return e.indexOf("?")>=0?e+"&"+t:e+"?"+t},e.numberRaise=function(e,t,o,n){o||(o=""),n||(n="");for(var r=e.string,i=0;i<r.length;i++)r=r.replace(".","");r=(r=r.replace(o,"")).replace(n,"");var a=parseInt(r);if(t!==a){t=Math.round(t);var c=function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0"};("number"!=typeof a||isNaN(a))&&(a=0);var s=a,l=(t-a)/30;e.node.stopAllActions;var u=cc.sequence(cc.delayTime(.03),cc.callFunc(function(){s+=l,e.string=n+c(Math.round(s))+o,(s>=t&&t>a||s<=t&&t<a)&&(e.string=n+c(t)+o)}));e.node.runAction(cc.sequence(cc.scaleTo(.2,2),cc.repeat(u,31),cc.scaleTo(.2,1)))}},e.changeParent=function(e,t){if(e.parent!==t){var o=function(e){var t=e,o=t.angle;do{o+=(t=t.parent).angle}while(null!=t.parent);return o%360},n=o(e)-o(t),r=e.convertToWorldSpaceAR(cc.v3(0,0)),i=t.convertToNodeSpaceAR(r);e.parent=t,e.position=i,e.angle=n}},e.clearChild=function(e){e.removeAllChildren()},e.randomArr=function(e){return e[Math.floor(Math.random()*e.length)]},e.randomFromTo=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.shuffleArr=function(e){for(var t,o=e.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));t=[e[n],e[o]],e[o]=t[0],e[n]=t[1]}return e},e.differenceOf2Arrays=function(e,t){var o=[],n=e.toString().split(",").map(Number),r=t.toString().split(",").map(Number);for(var i in n)-1===r.indexOf(n[i])&&o.push(n[i]);for(var i in r)-1===n.indexOf(r[i])&&o.push(r[i]);return o.sort(function(e,t){return e-t})},e.intersect_arrays=function(e,t){for(var o=e.concat().sort(),n=t.concat().sort(),r=[],i=0,a=0;i<e.length&&a<t.length;)o[i]===n[a]?(r.push(o[i]),i++,a++):o[i]<n[a]?i++:a++;return r},e.union_arrays=function(e,t){for(var o={},n=e.length-1;n>=0;--n)o[e[n]]=e[n];for(n=t.length-1;n>=0;--n)o[t[n]]=t[n];var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(o[i]);return r},e.sumArr=function(e){var t=0;return e.forEach(function(e){t+=e}),t},e.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},e.randomProperty=function(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]},e.compareObj=function(e,t){for(var o in e){if(e.hasOwnProperty(o)!==t.hasOwnProperty(o))return!1;switch(typeof e[o]){case"object":if(!this.compareObj(e[o],t[o]))return!1;break;case"function":if(void 0===t[o]||"compare"!=o&&e[o].toString()!=t[o].toString())return!1;break;default:if(e[o]!=t[o])return!1}}for(var o in t)if(void 0===e[o])return!1;return!0},e.arrayUnion=function(e,t){for(var o=e.concat(t),n=0;n<o.length;n++)for(var r=n+1;r<o.length;r++)this.compareObj(o[n],o[r])&&(o.splice(r,1),r--);return o},e.cloneNumberArray=function(e){return JSON.parse(JSON.stringify(e))},e.getWorldPos=function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},e.setWorldPos=function(e,t){e.setPosition(e.parent.convertToNodeSpaceAR(t))},e.enumToString=function(e,t){for(var o in e)if(e[o]==t)return o;return null},e.loadPrefab=function(e){return r(this,void 0,Promise,function(){var t;return i(this,function(o){switch(o.label){case 0:return t=null,[4,new Promise(function(t,o){cc.loader.loadRes(e,function(e,n){if(e)return cc.error(e.message||e),void o(e);t(n)})}).then(function(e){t=e})];case 1:return o.sent(),[2,t]}})})},e.getHash=function(e){for(var t=0,o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return t},e.getKeys=function(e){var t=[];for(var o in e)t.push(o);return t},e.loadSpriteFrameFromURL=function(e){return new Promise(function(t,o){cc.loader.load({url:e,type:"jpg"},function(e,n){if(e)o(e);else{var r=new cc.SpriteFrame(n);t(r)}})})},e.spawCoin=function(e,t,o,n){e=cc.find("Canvas").convertToNodeSpaceAR(e),t=cc.find("Canvas").convertToNodeSpaceAR(t);for(var r=function(o){var r=cc.instantiate(n);r.parent=cc.find("Canvas"),r.active=!0,r.setPosition(e),r.opacity=0,r.runAction(cc.sequence(cc.delayTime(.05*o),cc.fadeIn(0),cc.spawn(cc.jumpTo(.6,t,t.y-100-200*Math.random(),1),cc.rotateBy(.6,360)),cc.callFunc(function(){r.destroy()})))},i=0;i<o;i++)r(i)},e.createURLFromObject=function(e){var t="http://game.js/search?";for(var o in e)t+=o+"="+e[o]+"&";return t},e.secondsToHoursMinutesSeconds=function(e){return[Math.floor(e/3600),Math.floor(e%3600/60),e%3600%60]},e.secondsToMinutesSeconds=function(e){return[Math.floor(e%3600/60),e%3600%60]},e.loadBundle=function(e){return r(this,void 0,Promise,function(){var t;return i(this,function(o){switch(o.label){case 0:return t=null,[4,new Promise(function(o,n){var r=cc.assetManager.getBundle(e);r?(t=r,cc.log(e+" is existing"),o()):cc.assetManager.loadBundle(e,function(r,i){r?(cc.error(r),n()):(cc.log(e+" is loaded"),t=i,o())})})];case 1:return o.sent(),[2,t]}})})},e.convertUint8ArrayToArrayBuffer=function(e){for(var t=e.length,o=new ArrayBuffer(t),n=0;n<t;n++)new Int8Array(o)[n]=e[n];return o},e.isRunningWithFacebookApp=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1},e.isNetWorkAvailable=function(){return cc.sys.isBrowser?navigator.onLine:cc.sys.getNetworkType()!==cc.sys.NetworkType.NONE},e.reloadPage=function(){if(window.parent.location!==window.location)try{window.parent.location.reload()}catch(e){window.location.reload(),console.log(e)}else window.location.reload()},e.deleteCookie=function(e){document.cookie=e+"=; Path=/;  Domain="+location.host+"; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e.copyToClipboard=function(e){var t=this;return new Promise(function(o){return r(t,void 0,void 0,function(){var t,n,r;return i(this,function(i){switch(i.label){case 0:if("function"!=typeof(null===(r=navigator.clipboard)||void 0===r?void 0:r.writeText))return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,navigator.clipboard.writeText(e)];case 2:return i.sent(),o(!0),[3,4];case 3:return t=i.sent(),cc.error(t),o(!1),[3,4];case 4:return[2];case 5:return(n=document.createElement("textarea")).value=e,n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select(),setTimeout(function(){try{var e=document.execCommand("copy");o(!!e)}catch(t){cc.error(t),o(!1)}finally{document.body.removeChild(n)}},250),[2]}})})})},e.getCameraNode=function(){return e._cameraNode||(e._cameraNode=new cc.Node,e._cameraNode.addComponent(cc.Camera)),e._cameraNode},e.getScreenshotTexture=function(t){var o=e.getCameraNode();o.parent=t,o.setPosition(0,0);var n=o.getComponent(cc.Camera);n.cullingMask=4294967295,n.backgroundColor=cc.Color.BLACK,n.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL|cc.Camera.ClearFlags.COLOR;var r=new cc.RenderTexture,i=cc.game._renderContext;return r.initWithSize(cc.visibleRect.width,cc.visibleRect.height,i.STENCIL_INDEX8),n.targetTexture=r,n.render(t),o.parent=null,r},e.tweenNumber=function(e,t,o,n){var r={value:e};return cc.tween(r).to(o,{value:t},{progress:function(e,t,o,r){var i=e+(t-e)*r;return n(Math.floor(i),!1),i}}).call(function(){n(t,!0)})},e.tweenNodeToNode=function(t,o,n,r,i,a,c,s,l){void 0===i&&(i=.5),void 0===a&&(a="quartInOut"),void 0===c&&(c=!1),void 0===s&&(s=null),void 0===l&&(l=null);var u=e.getWorldPos(o);n&&(u.x+=n.x,u.y+=n.y);var p=t.parent.convertToNodeSpaceAR(u);if(r=r||{},c){var d=s||cc.v2(t.x+60,t.y),f=l||cc.v2(p.x+60,(p.y-t.y)/2);return cc.tween(t).parallel(cc.tween().bezierTo(i,d,f,p,{easing:a}),cc.tween().to(i,r,{easing:a}))}return r.position=p,cc.tween(t).to(i,r,{easing:a})},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o="\ud83d\udd25\ud83d\udd25\ud83d\udd25";cc.log.apply(cc,a([o],e))},e.areNodesIntersection=function(t,o){var n=e.getWorldPos(t),r=new cc.Rect(n.x-t.width/2,n.y-t.height/2,t.width,t.height),i=e.getWorldPos(o),a=new cc.Rect(i.x-o.width/2,i.y-o.height/2,o.width,o.height);return r.intersects(a)},e.vibrate=function(e){void 0===e&&(e=200),"vibrate"in navigator&&navigator.vibrate(e)},e.shareNative=function(e,t){navigator.share({url:e}).then(function(){"function"==typeof t&&t(),console.log("Share was successful.")}).catch(function(e){console.log("Sharing failed",e)})},e.getBrowserType=function(){var t=c.CHROME,o=c.EDGE,n=c.FIREFOX,r=c.SAFARI,i=c.SAMSUNG_INTERNET,a=c.ANDROID_WEBVIEW,s=c.SAFARI_IN_APP;if(e.isRunningWithFacebookApp())return cc.sys.os===cc.sys.OS_ANDROID?a:s;if(navigator.userAgent.includes("FxiOS"))return n;if(navigator.userAgent.includes("EdgiOS"))return o;if(navigator.userAgent.includes("CriOS"))return t;if(navigator.userAgent.includes("SamsungBrowser"))return i;if(navigator.userAgent.includes("Edg")||navigator.userAgent.includes("Edge"))return o;var l=c.UNKNOWN;switch(cc.sys.browserType){case cc.sys.BROWSER_TYPE_SAFARI:l=r;break;case cc.sys.BROWSER_TYPE_CHROME:l=t;break;case cc.sys.BROWSER_TYPE_EDGE:l=o;break;case cc.sys.BROWSER_TYPE_FIREFOX:l=n}return l},e.getOSType=function(){var e=s.UNKNOWN,t=s.WINDOWS,o=s.ANDROID,n=s.IOS,r=s.MAC_OS,i=e;switch(cc.sys.os){case cc.sys.OS_WINDOWS:i=t;break;case cc.sys.OS_ANDROID:i=o;break;case cc.sys.OS_IOS:i=n;break;case cc.sys.OS_OSX:i=r}return i},e._cameraNode=null,e}();function p(e,t){return r(this,void 0,void 0,function(){return i(this,function(){return[2,new Promise(function(o,n){cc.resources.load(e,t,function(e,t){e?n(e):o(t)})})]})})}function d(e,t,o){return r(this,void 0,void 0,function(){return i(this,function(){return[2,new Promise(function(n,r){cc.assetManager.loadBundle(e,function(e,i){e?r(e):o?i.load(t,o,function(e,t){e?r(e):n(t)}):i.load(t,function(e,t){e?r(e):n(t)})})})]})})}function f(e,t){void 0===t&&(t="");var o=[];return e.children.forEach(function(e){var n=t+">"+e.name;o.push({path:n,node:e}),f(e,n).forEach(function(e){return o.push(e)})}),o}n.Utils=u,n.LoadResourceAsset=p,n.LoadBundleAsset=d,n.LoadAsset=function(e,t){return r(this,void 0,void 0,function(){var o,n,r;return i(this,function(){return e.includes(":")?(o=e.split(":"),n=o[0],r=o[1],[2,d(n,r,t)]):[2,p(e,t)]})})},n.csv2arr=function(e){return e.trim().split("\n").slice(1).map(function(e){return e.split("|").map(function(e){return e.trim()})})},n.findNode=function(e,t){return e?f(e instanceof cc.Component?e.node:e).find(function(e){return t.test(e.path)}).node:null},cc._RF.pop()},{"../Services/Platform/Platform":"Platform"}],Util:[function(t,o,n){"use strict";cc._RF.push(o,"3f220FWMiFLfbXaaHTob6sp","Util");var r=this&&this.__awaiter||function(t,o,n,r){return new(n||(n=Promise))(function(i,a){function c(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r.throw(t))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,s)}l((r=r.apply(t,o||[])).next())})},i=this&&this.__generator||function(t,o){var n,r,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=o.call(t,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(){}return e.getHttp=function(e,t,o,n){void 0===n&&(n=null);var r=new XMLHttpRequest,i="";if(t&&Array.isArray(t)&&t.length>0)for(var a=0;a<t.length;a++)i=0==a?i+"?"+t[a][0]+"="+t[a][1]:i+"&"+t[a][0]+"="+t[a][1];else if("object"==typeof t){for(var c in i+="?",t)i+=c+"="+t[c]+"&";i=i.substr(0,i.length-1)}var s=e+i;s.includes("?")?s+="&dummy="+Date.now().toString():s+="?dummy="+Date.now().toString(),r.open("GET",s,!0),r.onloadend=function(){cc.log("http.status"+r),r.responseText&&cc.log(r.responseText),4==r.readyState&&200==r.status?o(null,r.responseText):4==r.readyState&&o(r.responseText,null)},r.onerror=function(t){cc.error("Error getting URL "+e+": "+t),o(t,null)},r.ontimeout=function(t){cc.error("Timeout getting URL "+e),o(t,null)},n&&r.setRequestHeader("Authorization","Bearer "+n),r.send()},e.parseFunctionCallString=function(e){var t=[],o=/([a-zA-Z_$][-a-zA-Z_$0-9]*).*/.exec(e);if(!o)return[];var n=o[1].trim();return t[0]=n,(o=/.*\((.*)\)/.exec(e))&&o[1].trim().split(",").forEach(function(e){var o=e.trim();o.length>0&&t.push(o)}),t},e.postHttp=function(e,t,o,n){return void 0===o&&(o="application/json"),void 0===n&&(n=null),new Promise(function(r,i){var a=new XMLHttpRequest;cc.log("pars:",t),a.open("POST",e,!0),a.setRequestHeader("Content-type",o),a.onloadend=function(){4==a.readyState&&200==a.status?r(a.response):4==a.readyState&&i(a.response)},a.onerror=function(t){i("Error post URL "+e+": "+t)},a.ontimeout=function(){i("Timeout post URL "+e)},n&&a.setRequestHeader("Authorization","Bearer "+n),a.send(t)})},e.addQuery=function(e,t){return e.indexOf("?")>=0?e+"&"+t:e+"?"+t},e.showPopup=function(e,t,o,n,r){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=o||1,a=n||.015,c=r||.08,s=cc.sequence(cc.scaleTo(c,i+a),cc.scaleTo(c,i-a),cc.scaleTo(c,i));e.scale=i,e.runAction(s)},e.numberRaiseAll=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null),null==o&&(o=""),null==n&&(n="");for(var r=e.string,i=0;i<r.length;i++)r=r.replace(".","");r=(r=r.replace(o,"")).replace(n,"");var a=parseInt(r);if(t!=a){t=Math.round(t);var c=function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0"};("number"!=typeof a||isNaN(a))&&(a=0);var s=a,l=(t-a)/10;e.node.stopAllActions;var u=cc.sequence(cc.delayTime(.06),cc.callFunc(function(){s+=l,e.string=n+c(Math.round(s))+o,(s>=t&&t>a||s<=t&&t<a)&&(e.string=n+c(t)+o)}));e.node.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.repeat(u,11),cc.scaleTo(.1,1)))}},e.changeParent=function(e,t){if(e.parent!=t){var o=function(e){var t=e,o=t.angle;do{o+=(t=t.parent).angle}while(null!=t.parent);return o%360},n=o(e)-o(t),r=e.convertToWorldSpaceAR(cc.v2(0,0)),i=t.convertToNodeSpaceAR(r);e.parent=t,e.position=i,e.angle=n}},e.clearChild=function(e){e.removeAllChildren()},e.randomArr=function(e){return e[Math.floor(Math.random()*e.length)]},e.randomFromTo=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.shuffleArr=function(e){for(var t,o=e.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));t=[e[n],e[o]],e[o]=t[0],e[n]=t[1]}return e},e.differenceOf2Arrays=function(e,t){var o=[];for(var n in e=e.toString().split(",").map(Number),t=t.toString().split(",").map(Number),e)-1===t.indexOf(e[n])&&o.push(e[n]);for(n in t)-1===e.indexOf(t[n])&&o.push(t[n]);return o.sort(function(e,t){return e-t})},e.intersect_arrays=function(e,t){for(var o=e.concat().sort(),n=t.concat().sort(),r=[],i=0,a=0;i<e.length&&a<t.length;)o[i]===n[a]?(r.push(o[i]),i++,a++):o[i]<n[a]?i++:a++;return r},e.union_arrays=function(e,t){for(var o={},n=e.length-1;n>=0;--n)o[e[n]]=e[n];for(n=t.length-1;n>=0;--n)o[t[n]]=t[n];var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(o[i]);return r},e.sumArr=function(e){var t=0;return e.forEach(function(e){t+=e}),t},e.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},e.randomProperty=function(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]},e.compareObj=function(e,t){for(var o in e){if(e.hasOwnProperty(o)!==t.hasOwnProperty(o))return!1;switch(typeof e[o]){case"object":if(!this.compareObj(e[o],t[o]))return!1;break;case"function":if(void 0===t[o]||"compare"!=o&&e[o].toString()!=t[o].toString())return!1;break;default:if(e[o]!=t[o])return!1}}for(var o in t)if(void 0===e[o])return!1;return!0},e.arrayUnion=function(e,t){for(var o=e.concat(t),n=0;n<o.length;n++)for(var r=n+1;r<o.length;r++)this.compareObj(o[n],o[r])&&(o.splice(r,1),r--);return o},e.cloneNumberArray=function(e){return JSON.parse(JSON.stringify(e))},e.getWorldPos=function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},e.setWorldPos=function(e,t){e.setPosition(e.parent.convertToNodeSpaceAR(t))},e.enumToString=function(e,t){for(var o in e)if(e[o]==t)return o;return null},e.loadPrefab=function(e){return r(this,void 0,Promise,function(){var t;return i(this,function(o){switch(o.label){case 0:return t=null,[4,new Promise(function(t,o){cc.resources.load(e,function(e,n){if(e)return cc.error(e.message||e),void o(e);t(n)})}).then(function(e){t=e})];case 1:return o.sent(),[2,t]}})})},e.getHash=function(e){for(var t=0,o=e.length,n=0;n<o;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t},e.getKeys=function(e){var t=[];for(var o in e)t.push(o);return t},e.loadSpriteFrameFromURL=function(e){return new Promise(function(t,o){cc.loader.load({url:e,type:"jpg"},function(e,n){if(e)o(e);else{var r=new cc.SpriteFrame(n);t(r)}})})},e.polarToCartesian=function(e){var t=[e.x,e.y],o=t[0],n=t[1];return cc.v2(o*Math.cos(n),o*Math.sin(n))},e.cartesianToPolar=function(e){var t=[e.x,e.y],o=t[0],n=t[1],r=Math.atan2(n,o);return cc.v2(e.len(),r)},e.vector2Angle=function(e){return Math.atan2(e.y,e.x)},e.msToTime=function(e){if(null==e)return null;var t=Math.round(e%1e3/10),o=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60);return Math.floor(e/36e5%24),(n<10?"0"+n:n)+":"+(o<10?"0"+o:o)+":"+(t<10?"0"+t:t)},e.rotationAngleFromTo=function(t,o,n){var r=o-t,i=Math.floor(Math.min(n,Math.abs(r))),a=e.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(t+i))),c=e.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(t-i)));return[cc.misc.radiansToDegrees(a.angle(e.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(o))))),cc.misc.radiansToDegrees(c.angle(e.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(o)))))]},e.angle2Point=function(e,t){var o=cc.v2(e).sub(t),n=Math.atan2(o.y,o.x);return(cc.misc.radiansToDegrees(n)+90)%360},e.getAllNode=function(e){var t=[];if(e.childrenCount>0){t.push(e);for(var o=0;o<e.childrenCount;o++){var n=e.children[o];n.childrenCount>0?this.getAllNode(n).forEach(function(e){t.push(e)}):t.push(n)}}else t.push(e);return t},e}();n.default=a,cc._RF.pop()},{}],VersionCheck:[function(e,t,o){"use strict";cc._RF.push(t,"ec65aMcviJAormZskL3IhYJ","VersionCheck");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Utils/Util"),c=e("./ProjectConfig"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.versionDocURL="",t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){if(o.inst)console.warn("More than one version check???");else{o.inst=this;var e=c.ProjectConfig[c.ProjectConfig.CUR_VERSION];this.versionDocURL=e.versionValidURL}},t.prototype.run=function(e){if(0!=this.versionDocURL.length){var t=this.versionDocURL+"?dummy="+Date.now().toString();a.default.getHttp(t,null,function(t,o){if(!t)return o.startsWith(e)?void console.log("Version check OK"):(console.log("Version mismatch. Code is "+e+" Server says we should be on "+o),void document.location.reload(!0));console.warn("Failed to get version check doc")})}else console.warn("** URL for version check doc not set!")},t.prototype.start=function(){},t.inst=null,o=i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./ProjectConfig":"ProjectConfig","./Utils/Util":"Util"}],WaitSpinner:[function(e,t,o){"use strict";cc._RF.push(t,"e83367tE1NFlLBJpJNTwqX/","WaitSpinner");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.requireComponent,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotSteps=16,t.rotStepTimeSec=.25,t.explodeTimeSec=.25,t.explodeTopScale=2,t.homeScale=1,t.homeOpacity=255,t.mySprite=null,t}return r(t,e),t.prototype.onLoad=function(){this.homeScale=this.node.scale,this.homeOpacity=this.node.opacity,this.mySprite=this.node.getComponent(cc.Sprite)},t.prototype.rotateOneTick=function(){var e=this.node.angle;e-=360/this.rotSteps,this.node.angle=e},t.prototype.reset=function(){this.node.opacity=this.homeOpacity,this.node.scale=this.homeScale,this.mySprite.enabled=!0},t.prototype.collapse=function(){var e=this;cc.tween(this.node).to(e.explodeTimeSec,{opacity:0,scale:0}).call(function(){e.mySprite.enabled=!1}).start()},t.prototype.boom=function(){var e=this;cc.tween(this.node).to(e.explodeTimeSec,{opacity:0,scale:e.explodeTopScale}).call(function(){e.mySprite.enabled=!1}).start()},t.prototype.start=function(){this.schedule(this.rotateOneTick,this.rotStepTimeSec)},i([l],t.prototype,"rotSteps",void 0),i([l],t.prototype,"rotStepTimeSec",void 0),i([l],t.prototype,"explodeTimeSec",void 0),i([l],t.prototype,"explodeTopScale",void 0),i([s(cc.Sprite)],t.prototype,"mySprite",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],WidgetAlign:[function(e,t,o){"use strict";cc._RF.push(t,"1e535sMFgpKAb0y37MwAeWV","WidgetAlign");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parent=null,t.Top=!1,t.padding_top=0,t.Bottom=!1,t.padding_botton=0,t.Left=!1,t.padding_left=0,t.Right=!1,t.padding_right=0,t}return r(t,e),t.prototype.start=function(){var e=cc.view.getFrameSize();if(this.node.width,this.node.height,this.parent.width,this.parent.height,this.Top){var t=this.parent.convertToNodeSpaceAR(this.node.position);cc.log("#Node "+t),cc.log("#this.parent"+this.parent.position),cc.log("#this.screenSize"+e),cc.log("#this.cc.view.getViewportRect() "+cc.view.getViewportRect()),cc.v3(e.height),this.node.position=t}},t.prototype.update=function(){},i([s(cc.Node)],t.prototype,"parent",void 0),i([s(cc.Boolean)],t.prototype,"Top",void 0),i([s(cc.Float)],t.prototype,"padding_top",void 0),i([s(cc.Boolean)],t.prototype,"Bottom",void 0),i([s(cc.Float)],t.prototype,"padding_botton",void 0),i([s(cc.Boolean)],t.prototype,"Left",void 0),i([s(cc.Float)],t.prototype,"padding_left",void 0),i([s(cc.Boolean)],t.prototype,"Right",void 0),i([s(cc.Float)],t.prototype,"padding_right",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],WorldPosInterface:[function(e,t){"use strict";cc._RF.push(t,"ba8feueqGxLj7QMaYT9QgS7","WorldPosInterface"),cc._RF.pop()},{}],YesNoDialog:[function(e,t,o){"use strict";cc._RF.push(t,"64840/XVpRAL4FP/DoH5PbK","YesNoDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t._callBackYes=null,t._callBackNo=null,t}return r(t,e),t.prototype.init=function(e,t,o,n){this._callBackYes=o,this._callBackNo=n,this.titleLabel.string=e,this.contentLabel.string=t},t.prototype.yesOnClick=function(){this._callBackYes&&this._callBackYes(),this.hide()},t.prototype.noOnClick=function(){this._callBackNo&&this._callBackNo(),this.hide()},i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Label)],t.prototype,"contentLabel",void 0),i([s],t)}(a.NgcDialogBase);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase"}],globals:[function(e,t,o){"use strict";cc._RF.push(t,"2b7a2SQF+JHup0IJkUV1eEK","globals"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={Main:null,PlayerController:null,Game:null,EnemyControllerBase:null,SceneManager:null,AutoTest:null,GameUI:null,NetClient:null,AppState:null,PlayerState:null,NgcLocalizedManager:null,GameCamera:null,NavBarManager:null,ShopScreen:null,NgcGameModeManager:null,NgcTabBarManager:null,OfflineMode:null,UserInfo:null},cc._RF.pop()},{}],h5jssdk:[function(t,o,n){"use strict";cc._RF.push(o,"088354zaBpKP7iPHcjziTv5","h5jssdk"),n.H5SDK=function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e){e.exports={api:"https://h5sdk.game.qq.com/api2/H5SDKApi.php",report:"",apptype:4,wxappid:"",networkType:"",h5channel:10030414,h5sdkVersion:"1.6.0",gameVersion:"",reportCount:9,requestCount:0,maxRequestCount:1,tempUserLoginInfo:{},tempReportData:[]}},function(e,t,o){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){return e&&e.__esModule?e:{default:e}}(o(0));e.exports={getSystemInfoSync:function(){return wx.getSystemInfoSync()},getNetworkType:function(){wx.getNetworkType({success:function(e){r.default.networkType=e.networkType}})},getLaunchOptionsSync:function(){return wx.getLaunchOptionsSync()},getSystem:function(){var e=this.getSystemInfoSync().system;return e.indexOf("Android")>-1?"android":e.indexOf("iOS")>-1?"ios":"pc"},getH5SDKVersion:function(){return r.default.h5sdkVersion},getWXsdkVersion:function(){var e=this.getSystemInfoSync().SDKVersion;return(e=e.replace(/\./g,"")).substring(0,3)},checkSession:function(){return new Promise(function(e,t){wx.checkSession({success:function(t){e(t)},fail:function(e){t(e)}})})},serialize:function(e){var t=null;if(void 0!==e&&"function"!=typeof e||(t=""),"number"==typeof e&&(t=e.toString()),"boolean"==typeof e&&(t=e?"1":"0"),"object"==(void 0===e?"undefined":n(e))&&(e||(t=""),e instanceof RegExp&&(t=e.toString())),"string"==typeof e&&(t=e),"string"==typeof t)return encodeURIComponent(t);var o=[];if(e instanceof Array){for(var r=0;r<e.length;r++)void 0!==e[r]&&o.push("object"==n(e[r])?"":this.serialize(e[r]));return o.join("|")}for(var r in e)void 0!==e[r]&&(t=null,"object"==n(e[r])?e[r]instanceof Array?(t=e[r],o.push(r+"="+this.serialize(t))):o.push(r+"="):(t=e[r],o.push(r+"="+this.serialize(t))));return o.join("&")}}},function(e,t,o){var n=function(e){return e&&e.__esModule?e:{default:e}}(o(0));e.exports={setStorage:function(e,t,o){o=null==o?86400:Math.abs(o);var r=Date.now()+1e3*o;try{wx.setStorageSync(e,t),wx.setStorageSync(e+"_expiresIn",r)}catch(o){return n.default.tempUserLoginInfo[e]=t,n.default.tempUserLoginInfo[e+"_expiresIn"]=r,!1}return!0},getStorage:function(e){var t=Date.now(),o=wx.getStorageSync(e+"_expiresIn");if(""==o&&(o=null!=n.default.tempUserLoginInfo[e+"_expiresIn"]||0!==n.default.tempUserLoginInfo[e+"_expiresIn"]?n.default.tempUserLoginInfo[e+"_expiresIn"]:0),o<t)return this.removeStorage(e),null;try{var r=wx.getStorageSync(e);return""==r&&(r=n.default.tempUserLoginInfo[e]),r}catch(e){return null}},removeStorage:function(e){try{wx.removeStorageSync(e),wx.removeStorageSync(e+"_expiresIn"),n.default.tempUserLoginInfo[e]=null,n.default.tempUserLoginInfo[e+"_expiresIn"]=0}catch(t){return n.default.tempUserLoginInfo[e]=null,n.default.tempUserLoginInfo[e+"_expiresIn"]=0,!1}return!0}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET";return function(t,o){return new Promise(function(n,r){var i={url:t,data:o,method:e,success:function(e){n(e)},fail:function(e){r(e)}};"POST"==e&&(i.header={"Content-Type":"GET"==e?"application/json;":"application/x-www-form-urlencoded;"},i.data="reportData="+JSON.stringify(o)),wx.request(i)})}};t.get=o("GET"),t.post=o("POST")},function(e){var t={wegameUrl:location.protocol+"//wximg.gtimg.com/wxgame/wegame-v2.js",qqapi:location.protocol+"//open.mobile.qq.com/sdk/qqapi.js?_bid=152",wxappid:"",qqappid:"",shareInfo:{image_url:"",title:"",desc:""},h5sdkApi:{default:"h5sdk.game.qq.com",snake:"snake.h5sdk.game.qq.com",h5game:"peng.h5sdk.game.qq.com"},enbaleRightDragToGoBackParams:!1,isNeedPayToken:!0,isNeeduserInfo:!0,isDebug:!1,startTime:0,log:"",countwxloginapi:0,beaconHttpUrl:"https:"==location.protocol?"https://3gimg.qq.com/mig_op/beacon/js/beacon_release_s.js?":"http://3gimg.qq.com/mig_op/beacon/js/beacon_release.js?",version:"v1.6.1"};e.exports=t},function(t,o,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,o){return null==t.isubZoneAreaID||""==t.isubZoneAreaID?e.isubZoneAreaID=-1:e.isubZoneAreaID=t.isubZoneAreaID,null==t.vRoleID&&""==t.vRoleID?e.vRoleID=-1:e.vRoleID=t.vRoleID,null==t.cardID&&""==t.cardID?("object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.fail&&o.fail({data:{iRet:"-9999",sMsg:"param error, cardID is not empty"}}),!1):(e.CardID=t.cardID,null==t.slotID&&""==t.slotID?("object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.fail&&o.fail({data:{iRet:"-9999",sMsg:"param error, slotID is not empty"}}),!1):(e.SlotID=t.slotID,null==t.orderID&&""==t.orderID?("object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.fail&&o.fail({data:{iRet:"-9999",sMsg:"param error, orderID is not empty"}}),!1):(e.OrderID=t.orderID,null==t.iActionId&&""==t.iActionId?("object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.fail&&o.fail({data:{iRet:"-9999",sMsg:"param error, iActionId is not empty"}}),!1):(e.iActionId=t.iActionId,"object"==u(t.extend)&&(e.extend=t.extend),!0))))}function a(e,t){return null==t.isubZoneAreaID||""==t.isubZoneAreaID?e.isubZoneAreaID=-1:e.isubZoneAreaID=t.isubZoneAreaID,t.vActionType&&(e.vactiontype=t.vActionType),t.vactiontype&&(e.vactiontype=t.vactiontype),t.c1&&(e.c1=t.c1),t.c2&&(e.c2=t.c2),t.c3&&(e.c3=t.c3),t.c4&&(e.c4=t.c4),t.c5&&(e.c5=t.c5),t.c6&&(e.c6=t.c6),t.c7&&(e.c7=t.c7),t.c8&&(e.c8=t.c8),t.c9&&(e.c9=t.c9),"object"==u(t.extend)&&(e.extend=t.extend),!0}function c(e,t,o){return null==t.isubZoneAreaID||""==t.isubZoneAreaID?e.isubZoneAreaID=-1:e.isubZoneAreaID=t.isubZoneAreaID,null==t.iCount||""==t.iCount?("object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.fail&&o.fail({data:{iRet:"-9999",sMsg:"param error, iCount illegal"}}),!1):(e.icount=t.iCount,null==t.iSNSType||""==t.iSNSType?("object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.fail&&o.fail({data:{iRet:"-9999",sMsg:"param error, iSNSType is not empty"}}),!1):(e.vsnstype=t.iSNSType,t.toFriendsOpenid&&(e.vtoopenids=t.toFriendsOpenid),t.toNumberOfFriends&&(e.irecnum=t.toNumberOfFriends),t.iSNSChildType&&(e.vsnssubtype=t.iSNSChildType),"object"==u(t.extend)&&(e.extend=t.extend),!0))}function s(e,t,o){return null==t.isubZoneAreaID||""==t.isubZoneAreaID?e.isubZoneAreaID=-1:e.isubZoneAreaID=t.isubZoneAreaID,null==t.vRoleID&&""==t.vRoleID?e.vRoleID=-1:e.vRoleID=t.vRoleID,t.combatEffectiveness&&(e.CombatEffectiveness=t.combatEffectiveness),t.playerFriendsNum&&(e.PlayerFriendsNum=t.playerFriendsNum),t.mapID&&(e.MapID=t.mapID),null==t.iGuideType&&""==t.iGuideType?(o.fail({data:{iRet:"-9999",sMsg:"param error, iGuideType is not empty"}}),!1):(e.iGuideType=t.iGuideType,null==t.iGuideID&&""==t.iGuideID?("object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.fail&&o.fail({data:{iRet:"-9999",sMsg:"param error, iGuideID is not empty"}}),!1):(e.iGuideID=t.iGuideID,e.ClientVersion=p.default.gameVersion,t.result&&(e.Result=0==t.result?0:1),"object"==u(t.extend)&&(e.extend=t.extend),!0))}function l(t,o){(0,d.reportIdata)(t).then(function(t){-9999==t.iRet?"object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.fail&&o.fail(e):"object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.success&&o.success(t)}).catch(function(e){"object"==(void 0===o?"undefined":u(o))&&"function"==typeof o.fail&&o.fail(e)})}Object.defineProperty(o,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o.Report=function(e,t,o,n){var r={};if("SceneFlow"==e){if(!i(r,t,o))return!1}else if("ActionFlow"==e)a(r,t);else if("GuideFlow"==e){if(!s(r,t,o))return!1}else{if("SnsFlow"!=e)return!1;if(!c(r,t,o))return!1}if(!0===n&&"ActionFlow"==e){var u=[];r.reportType=e,u.push(r),l(u,o)}else{var d=wx.getStorageSync("HSDK_report_data");if(""==d&&(d=[]),r.reportType=e,d.push(r),d.length>p.default.reportCount)return l(d,o),wx.removeStorageSync("HSDK_report_data"),!1;try{wx.setStorageSync("HSDK_report_data",d)}catch(e){}}},o.onhideReport=function(){wx.onHide(function(){var e=wx.getStorageSync("HSDK_report_data");"object"==(void 0===e?"undefined":u(e))&&e.length>0&&((0,d.reportIdata)(e),wx.removeStorageSync("HSDK_report_data"))})};var p=r(n(0)),d=n(6);r(n(2))},function(e,t,o){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.reportIdata=function(e){var t=i.default.getSystemInfoSync(),o=i.default.getLaunchOptionsSync(),n=r.default.api+"?"+i.default.serialize({methodCmd:1042,apptype:r.default.apptype,h5game_openid:a.default.getStorage("openid"),h5sdk_sessionid:a.default.getStorage("sdkKey"),h5game_os:i.default.getSystem(),appid:r.default.wxappid,h5channel:null==o.query.scene?o.scene:o.query.scene,h5sdkVersion:r.default.h5sdkVersion,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:r.default.networkType}});return new Promise(function(t,o){r.default.wxappid.length<3?o({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):null==a.default.getStorage("openid")||null==a.default.getStorage("openid")||""==a.default.getStorage("openid")?o({data:{iRet:"-9999",sMsg:"h5game_openid is not empty"}}):null==a.default.getStorage("sdkKey")||null==a.default.getStorage("sdkKey")||""==a.default.getStorage("sdkKey")?o({data:{iRet:"-9999",sMsg:"h5sdk_sessionid is not empty"}}):(0,c.post)(n,e).then(function(e){t(e.data)}).catch(function(e){o(e)})})},t.reportATM=function(e){var t=i.default.getSystemInfoSync(),o=(i.default.getLaunchOptionsSync(),r.default.api+"?"+i.default.serialize({methodCmd:1046,apptype:r.default.apptype,h5game_openid:a.default.getStorage("openid"),appid:r.default.wxappid,h5sdkVersion:r.default.h5sdkVersion})),n={h5game_os:i.default.getSystem(),version:null==r.default.gameVersion?"":r.default.gameVersion,h5sdkVersion:r.default.h5sdkVersion,dateTime:(new Date).getTime(),sMsg:e,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:r.default.networkType}};return new Promise(function(e,t){r.default.wxappid.length<3?t({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):null==a.default.getStorage("openid")||null==a.default.getStorage("openid")||""==a.default.getStorage("openid")?t({data:{iRet:"-9999",sMsg:"param error, h5game_openid is not empty"}}):null==a.default.getStorage("sdkKey")||null==a.default.getStorage("sdkKey")||""==a.default.getStorage("sdkKey")?t({data:{iRet:"-9999",sMsg:"param error, h5sdk_sessionid is not empty"}}):(0,c.post)(o,n).then(function(t){e(t.data)}).catch(function(e){t(e)})})};var r=n(o(0)),i=n(o(1)),a=n(o(2)),c=o(3)},function(e,t,o){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Init=function(e){r.default.wxappid=e.wxappid,r.default.gameVersion=e.gameVersion,i.default.getNetworkType(),(0,a.onhideReport)()};var r=n(o(0)),i=n(o(1)),a=o(5)},function(e,t,o){function n(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(o(1)),a=n(o(12)),c=n(o(2)),s=n(o(0)),l=o(6);n(o(0)),e.exports={login:function(e){var t=this;void 0===e||r(e),t.getLogin().then(function(o){o.code?wx.getSetting({success:function(n){n.authSetting["scope.userInfo"]||i.default.getWXsdkVersion()<206?t.getUserinfoLowVersion(e,o):t.getLoginState(o,e)}}):"function"==typeof e.fail&&e.fail(o)}).catch(function(t){"function"==typeof e.fail&&e.fail(t)})},getLoginState:function(e,t){this.getLoginKey(e.code,{}).then(function(){var e={userInfo:{h5game_openid:c.default.getStorage("openid"),h5sdk_sessionid:c.default.getStorage("sdkKey")}};null!=c.default.getStorage("unionid")&&(e.userInfo.unionid=c.default.getStorage("unionid")),e.needCreateUserInfoBtn=!0,"function"==typeof t.success&&t.success(e)}).catch(function(e){(0,l.reportATM)(e),"function"==typeof t.fail&&t.fail(e)})},getUserinfoLowVersion:function(e,t){var o=this;a.default.getUserInfo(e).then(function(n){o.getLoginKey(t.code,n.userInfo).then(function(){var t={encryptedData:n.encryptedData,errMsg:n.errMsg,iv:n.iv,rawData:n.rawData,signature:n.signature,userInfo:{avatarUrl:n.userInfo.avatarUrl,city:n.userInfo.city,country:n.userInfo.country,gender:n.userInfo.gender,h5game_openid:c.default.getStorage("openid"),h5sdk_sessionid:c.default.getStorage("sdkKey"),language:n.userInfo.language,nickName:n.userInfo.nickName,province:n.userInfo.province}};null!=c.default.getStorage("unionid")&&(t.userInfo.unionid=c.default.getStorage("unionid")),"function"==typeof e.success&&e.success(t)}).catch(function(t){(0,l.reportATM)(t),"function"==typeof e.fail&&e.fail(t)})}).catch(function(n){o.getLoginKey(t.code,{}).then(function(){var t={userInfo:{h5game_openid:c.default.getStorage("openid"),h5sdk_sessionid:c.default.getStorage("sdkKey")}};null!=c.default.getStorage("unionid")&&(t.userInfo.unionid=c.default.getStorage("unionid")),!0===e.canUserInfoPlay?(o.reportLoginFail(2,n.errMsg),"function"==typeof e.fail&&e.fail(n)):/auth\sdeny/.test(n.errMsg)?"function"==typeof e.success&&e.success(t):(o.reportLoginFail(1,n.errMsg),"function"==typeof e.fail&&e.fail(n))}).catch(function(t){"function"==typeof e.fail&&e.fail(t)})})},getLogin:function(){var e=this;return new Promise(function(t,o){(function n(){wx.login({success:function(e){s.default.requestCount=0,t(e)},fail:function(t){e.reportLoginFail(1,t.errMsg);var i=JSON.stringify(t);/timed\sout/.test(i)||/time\sout/.test(i)||/timedout/.test(i)||/timeout/.test(i)||/failed\sto\sconnect\sto/.test(i)||/\u8bf7\u6c42\u8d85\u65f6/.test(i)?s.default.requestCount>=s.default.maxRequestCount?("object"==(void 0===t?"undefined":r(t))&&(t.errfrom="wx login",t.requestCount=s.default.requestCount),o(t)):(n(),s.default.requestCount++):("object"==(void 0===t?"undefined":r(t))&&(t.errfrom="wx login"),o(t))}})})()})},getLoginKey:function(e,t){var o=this;return new Promise(function(n,i){(function c(){a.default.getLoginKey(e,t).then(function(){s.default.requestCount=0,n()}).catch(function(e){var t=null==e.errMsg?e.sMsg:e.errMsg;o.reportLoginFail(1,t),t=JSON.stringify(e),/timed\sout/.test(t)||/time\sout/.test(t)||/timedout/.test(t)||/timeout/.test(t)||/failed\sto\sconnect\sto/.test(t)||/\u8bf7\u6c42\u8d85\u65f6/.test(t)?s.default.requestCount>=s.default.maxRequestCount?("object"==(void 0===e?"undefined":r(e))&&(e.errfrom="h5sdk getLoginKey",e.requestCount=s.default.requestCount),i(e)):(c(),s.default.requestCount++):("object"==(void 0===e?"undefined":r(e))&&(e.errfrom="h5sdk getLoginKey"),i(e))})})()})},reportUserInfo:function(e,t,o){var n=i.default.getSystemInfoSync(),r=[{reportType:"userprofile",isubZoneAreaID:-1,gender:e.gender,country:null==e.country?"":e.country,province:null==e.province?"":e.province,city:null==e.city?"":e.city,model:n.model,vflag:t}];if(0==t){var a=i.default.getLaunchOptionsSync(),c={reportType:"PlayerLogin_fail",isubZoneAreaID:-1,version:null==s.default.gameVersion?"":s.default.gameVersion,regChannel:s.default.h5channel,h5channel:null==a.query.scene?a.scene:a.query.scene,iactionid:2,iresult:-1,extend:{sMsg:o}};null==a.query.openid||""==a.query.openid||1007!=a.query.scene&&1008!=a.query.scene||(c.shareOpenid=a.query.openid,c.shareStatus=13==a.query.shareStatus?13:-1),r.push(c)}(0,l.reportIdata)(r).then(function(){}).catch(function(e){console.log("report fail",e)})},reportLoginFail:function(e,t){var o=i.default.getLaunchOptionsSync(),n={reportType:"PlayerLogin_fail",isubZoneAreaID:-1,version:null==s.default.gameVersion?"":s.default.gameVersion,regChannel:s.default.h5channel,h5channel:null==o.query.scene?o.scene:o.query.scene,iactionid:e,iresult:-1,extend:{sMsg:t}};null==o.query.openid||""==o.query.openid||1007!=o.query.scene&&1008!=o.query.scene||(n.shareOpenid=o.query.openid,n.shareStatus=13==o.query.shareStatus?13:-1);var r=[n];(0,l.reportIdata)(r).then(function(){}).catch(function(e){console.log("report fail",e)})},createUserInfoButton:function(e){if(i.default.getWXsdkVersion()>205){e.lang=null==e.lang?"zh_CN":e.lang;var t=wx.createUserInfoButton(e),o=this;return t.onTap(function(e){/auth\sdeny/.test(e.errMsg)?o.reportUserInfo({},0,e.errMsg):o.reportUserInfo(e.userInfo,1)}),t}},getLoginUserInfo:function(e){var t=this;return new Promise(function(o,n){(function i(){a.default.getLoginUserInfo(e).then(function(){s.default.requestCount=0,o()}).catch(function(e){var o=null==e.errMsg?e.sMsg:e.errMsg;t.reportLoginFail(1,o),o=JSON.stringify(o),/timed\sout/.test(o)||/time\sout/.test(o)||/timedout/.test(o)||/timeout/.test(o)||/failed\sto\sconnect\sto/.test(o)||/\u8bf7\u6c42\u8d85\u65f6/.test(o)?s.default.requestCount>=s.default.maxRequestCount?("object"==(void 0===e?"undefined":r(e))&&(e.errfrom="h5sdk getLoginUserInfo",e.requestCount=s.default.requestCount),n(e)):(i(),s.default.requestCount++):("object"==(void 0===e?"undefined":r(e))&&(e.errfrom="h5sdk getLoginUserInfo"),n(e))})})()})},checkLogin:function(e){var t=this;wx.checkSession({success:function(){null==c.default.getStorage("openid")||null==c.default.getStorage("sdkKey")||c.default.getStorage("openid").length<8||c.default.getStorage("sdkKey").length<8?t.login(e):wx.getSetting({success:function(o){o.authSetting["scope.userInfo"]||i.default.getWXsdkVersion()<206?t.getUserinfoLowVersionByStorage(e):t.checkUserLoginStatus(e)}})},fail:function(){t.login(e)}})},checkUserLoginStatus:function(e){var t=this;t.getLoginUserInfo({}).then(function(){var t={userInfo:{h5game_openid:c.default.getStorage("openid"),h5sdk_sessionid:c.default.getStorage("sdkKey")}};null!=c.default.getStorage("unionid")&&(t.userInfo.unionid=c.default.getStorage("unionid")),t.needCreateUserInfoBtn=!0,"function"==typeof e.success&&e.success(t)}).catch(function(o){"object"==(void 0===o?"undefined":r(o))&&"object"==r(o.data)&&"-9201"==o.data.iRet?t.login(e):"function"==typeof e.fail&&e.fail(o)})},getUserinfoLowVersionByStorage:function(e){var t=this;a.default.getUserInfo(e).then(function(o){t.getLoginUserInfo(o.userInfo).then(function(){var t={encryptedData:o.encryptedData,errMsg:o.errMsg,iv:o.iv,rawData:o.rawData,signature:o.signature,userInfo:{avatarUrl:o.userInfo.avatarUrl,city:o.userInfo.city,country:o.userInfo.country,gender:o.userInfo.gender,h5game_openid:c.default.getStorage("openid"),h5sdk_sessionid:c.default.getStorage("sdkKey"),language:o.userInfo.language,nickName:o.userInfo.nickName,province:o.userInfo.province}};null!=c.default.getStorage("unionid")&&(t.userInfo.unionid=c.default.getStorage("unionid")),"function"==typeof e.success&&e.success(t)}).catch(function(o){"object"==(void 0===o?"undefined":r(o))&&"object"==r(o.data)&&"-9201"==o.data.iRet?t.login(e):"function"==typeof e.fail&&e.fail(o)})}).catch(function(o){!0===e.canUserInfoPlay?(t.reportLoginFail(2,o.errMsg),"function"==typeof e.fail&&e.fail(o)):/auth\sdeny/.test(o.errMsg)?t.getLoginUserInfo({}).then(function(){var t={userInfo:{h5game_openid:c.default.getStorage("openid"),h5sdk_sessionid:c.default.getStorage("sdkKey")}};null!=c.default.getStorage("unionid")&&(t.userInfo.unionid=c.default.getStorage("unionid")),"function"==typeof e.success&&e.success(t)}).catch(function(o){"object"==(void 0===o?"undefined":r(o))&&"object"==r(o.data)&&"-9201"==o.data.iRet?t.login(e):"function"==typeof e.fail&&e.fail(o)}):(t.reportLoginFail(1,o.errMsg),"function"==typeof e.fail&&e.fail(o))})}}},function(e,t,o){function n(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(o(4)),a=n(o(1)),c=n(o(2));e.exports={setUserSnsData:function(e){if("option"!=typeof e&&null!=r(e.rankVal)){var t=a.default.getSystemInfoSync();return a.default.getLaunchOptionsSync(),i.default.apptype,c.default.getStorage("openid"),c.default.getStorage("sdkKey"),a.default.getSystem(),i.default.wxappid,i.default.h5channel,e.rankVal,t.version,t.system,t.model,i.default.networkType,new Promise(function(){get(i.default.api,sendData).then(function(t){"function"==typeof e.success&&e.success(t)}).catch(function(){"function"==typeof e.fail&&e.fail(res)})})}},exitMiniProgram:function(e){wx.exitMiniProgram({success:function(t){"function"==typeof e.success&&e.success(t)},fail:function(t){"function"==typeof e.fail&&e.fail(t)},complete:function(t){"function"==typeof e.complete&&e.complete(t)}})},getSessionInfo:function(){return{h5game_openid:c.default.getStorage("openid"),h5sdk_sessionid:c.default.getStorage("sdkKey")}},openTencentGameContract:function(){"function"==typeof wx.openTencentGameContract&&wx.openTencentGameContract()},openTencentPrivacyContract:function(){"function"==typeof wx.openTencentPrivacyContract&&wx.openTencentPrivacyContract()},openTencentBoardGameContract:function(){"function"==typeof wx.openTencentBoardGameContract&&wx.openTencentBoardGameContract()}}},function(e,t,o){function n(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(13),a=n(o(2)),c=n(o(1));e.exports={share:function(e){wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){var t={},o=e;if("function"==typeof e&&(o=e()),"object"==r(o.shareInfo))return t.title=o.shareInfo.title,null!=o.shareInfo.imageUrl&&""!=o.shareInfo.imageUrl&&(t.imageUrl=o.shareInfo.imageUrl),null!=o.shareInfo.query&&""!=o.shareInfo.query?t.query=o.shareInfo.query+"&openid="+a.default.getStorage("openid"):t.query="openid="+a.default.getStorage("openid"),null!=o.shareInfo.canvas&&""!=o.shareInfo.canvas&&(t.canvas=o.shareInfo.canvas),c.default.getWXsdkVersion()>207?(0,i.shareReport)({shareResult:0,iActionId:1}):(t.success=function(e){(0,i.shareReport)({shareResult:0,iActionId:1}),"function"==typeof o.success&&o.success(e)},t.fail=function(e){(0,i.shareReport)({shareResult:1,iActionId:1}),"function"==typeof o.fail&&o.fail(e)}),t})},shareMessage:function(e){var t={};t.title=e.shareInfo.title,null!=e.shareInfo.imageUrl&&""!=e.shareInfo.imageUrl&&(t.imageUrl=e.shareInfo.imageUrl),null!=e.shareInfo.query&&""!=e.shareInfo.query?t.query=e.shareInfo.query+"&openid="+a.default.getStorage("openid"):t.query="openid="+a.default.getStorage("openid"),null!=e.shareInfo.canvas&&""!=e.shareInfo.canvas&&(t.canvas=e.shareInfo.canvas),c.default.getWXsdkVersion()>207?(0,i.shareReport)({shareResult:0,iActionId:2,gameScene:e.shareInfo.gameScene}):(t.success=function(t){(0,i.shareReport)({shareResult:0,iActionId:2,gameScene:e.shareInfo.gameScene}),"function"==typeof e.success&&e.success(t)},t.fail=function(t){(0,i.shareReport)({shareResult:1,iActionId:2,gameScene:e.shareInfo.gameScene}),"function"==typeof e.fail&&e.fail(t)},t.complete=function(t){"function"==typeof e.complete&&e.complete(t)}),wx.shareAppMessage(t)}}},function(e,t,o){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(e){(0,r.Init)(e)},t.getH5SDKVersion=function(){return s.default.getH5SDKVersion()},t.checkLogin=function(e){i.default.checkLogin(e)},t.login=function(e){i.default.login(e)},t.getWXSDKVersion=function(){return s.default.getWXsdkVersion()},t.createUserInfoButton=function(e,t){return i.default.createUserInfoButton(e,t)},t.share=function(e){a.default.share(e)},t.shareMessage=function(e){a.default.shareMessage(e)},t.getSessionInfo=function(){return c.default.getSessionInfo()},t.setUserSnsData=function(e){c.default.setUserSnsData(e)},t.exitMiniProgram=function(e){c.default.exitMiniProgram(e)},t.openTencentGameContract=function(){c.default.openTencentGameContract()},t.openTencentPrivacyContract=function(){c.default.openTencentPrivacyContract()},t.openTencentBoardGameContract=function(){c.default.openTencentBoardGameContract()},t.report=function(e,t,o,n){(0,l.Report)(e,t,o,n)};var r=(n(o(4)),o(7)),i=n(o(8)),a=n(o(10)),c=n(o(9)),s=n(o(1)),l=o(5)},function(e,t,o){function n(e){return e&&e.__esModule?e:{default:e}}var r=n(o(0)),i=n(o(1)),a=n(o(2)),c=o(3);e.exports={getLoginKey:function(e,t){var o=i.default.getSystemInfoSync(),n=i.default.getLaunchOptionsSync(),s={h5game_code:e,methodCmd:1034,apptype:r.default.apptype,h5game_os:i.default.getSystem(),appid:r.default.wxappid,h5channel:null==n.query.scene?n.scene:n.query.scene,gender:null==t.gender?-1:t.gender,country:null==t.country?-1:t.country,province:null==t.province?-1:t.province,city:null==t.city?-1:t.city,regChannel:r.default.h5channel,version:null==r.default.gameVersion?"":r.default.gameVersion,h5sdkVersion:r.default.h5sdkVersion,user_agent:{channelversion:o.version,system:o.system,model:o.model,networkType:r.default.networkType}};return null==n.query.openid||""==n.query.openid||1007!=n.query.scene&&1008!=n.query.scene||(s.shareOpenid=n.query.openid,s.shareStatus=13==n.query.shareStatus?13:-1),new Promise(function(e,t){s.appid.length<3?t({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):(0,c.get)(r.default.api,s).then(function(o){if("-9201"==o.data.iRet||"40029"==o.data.iRet||"-9999"==o.data.iRet)t(o);else{var n=o.data;a.default.setStorage("sdkKey",n.list.h5sdk_sessionid,86400),a.default.setStorage("openid",n.list.openid,86400),n.list.unionid&&a.default.setStorage("unionid",n.list.unionid,86400),e(n)}}).catch(function(e){t(e)})})},getUserInfo:function(e){return new Promise(function(t,o){wx.getUserInfo({lang:null==e.lang?"zh_CN":e.lang,success:function(e){t(e)},fail:function(e){o(e)}})})},getLoginUserInfo:function(e){var t=i.default.getSystemInfoSync(),o=i.default.getLaunchOptionsSync(),n={methodCmd:1039,apptype:r.default.apptype,h5game_openid:a.default.getStorage("openid"),h5sdk_sessionid:a.default.getStorage("sdkKey"),no_strong_check:0,h5game_os:i.default.getSystem(),appid:r.default.wxappid,h5channel:null==o.query.scene?o.scene:o.query.scene,gender:null==e.gender?-1:e.gender,country:null==e.country?-1:e.country,province:null==e.province?-1:e.province,city:null==e.city?-1:e.city,regChannel:r.default.h5channel,version:null==r.default.gameVersion?"":r.default.gameVersion,h5sdkVersion:r.default.h5sdkVersion,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:r.default.networkType}};return null==o.query.openid||""==o.query.openid||1007!=o.query.scene&&1008!=o.query.scene||(n.shareOpenid=o.query.openid,n.shareStatus=13==o.query.shareStatus?13:-1),new Promise(function(e,t){n.appid.length<3?t({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):null==n.h5game_openid||null==n.h5game_openid||""==n.h5game_openid?t({data:{iRet:"-9999",sMsg:"h5game_openid is not empty"}}):null==n.h5sdk_sessionid||null==n.h5sdk_sessionid||""==n.h5sdk_sessionid?t({data:{iRet:"-9999",sMsg:"h5sdk_sessionid is not empty"}}):(0,c.get)(r.default.api,n).then(function(o){"-9201"==o.data.iRet||"40029"==o.data.iRet||"-9999"==o.data.iRet?t(o):e(o)}).catch(function(e){t(e)})})}}},function(e,t,o){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.shareReport=function(e){var t=i.default.getSystemInfoSync(),o=i.default.getLaunchOptionsSync(),n={methodCmd:1014,apptype:r.default.apptype,logtype:"share",h5game_openid:a.default.getStorage("openid"),h5sdk_sessionid:a.default.getStorage("sdkKey"),result:e.shareResult,h5game_os:i.default.getSystem(),appid:r.default.wxappid,h5channel:null==o.query.scene?o.scene:o.query.scene,version:null==r.default.gameVersion?"":r.default.gameVersion,iActionId:e.iActionId,shareOpenid:a.default.getStorage("openid"),shareStatus:13,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:r.default.networkType}};return 2==e.iActionId&&(n.scene=null==e.gameScene?-1:e.gameScene),new Promise(function(e,t){n.appid.length<3?t({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):null==n.h5game_openid||null==n.h5game_openid||""==n.h5game_openid?t({data:{iRet:"-9999",sMsg:"h5game_openid is not empty"}}):null==n.h5sdk_sessionid||null==n.h5sdk_sessionid||""==n.h5sdk_sessionid?t({data:{iRet:"-9999",sMsg:"h5sdk_sessionid is not empty"}}):(0,c.get)(r.default.api,n).then(function(t){e(t.data)}).catch(function(e){t(e)})})};var r=n(o(0)),i=n(o(1)),a=n(o(2)),c=o(3)}]),cc._RF.pop()},{}],messagesJson:[function(e,t){"use strict";cc._RF.push(t,"db621hQtsZAdIcmKdjS0RQZ","messagesJson");var o={ClientRequestJoinGame:"ClientMsg_RequestJoinGame",ClientPing:"ClientMsg_Ping",ClientPlayerStateData:"ClientMsg_PlayerStateData",ClientPlayerStateData_Multi:"ClientMsg_PlayerStateData_Multi",ClientPlayerExitGame:"ClientMsg_ExitGame",ClientBroadcastMessage:"ClientMsg_BroadcastMessage",ClientRequestJoinParty:"ClientMsg_RequestJoinParty",ClientSendMessageToParty:"ClientMsg_SendMessageToParty",ServerGameStartingStatus:"ServerMsg_GameStartingStatus",ServerPing:"ServerMsg_Ping",ServerFullGameState:"ServerMsg_FullGameState",ServerOrderCreateBot:"ServerMsg_OrderCreateBot",ServerBroadcastMessage:"ServerMsg_BroadcastMessage",ServerBroadcastTechMessage:"ServerMsg_TechMessage",ServerPartyStatus:"ServerMessage_PartyStatus",ServerReassignBot:"ServerMessage_ReassignBot"};Object.freeze(o),t.exports={MessageType:o,ClientMessage_RequestJoinGame:function(e,t,n,r,i,a,c,s){return{message:o.ClientRequestJoinGame,gameID:e,playerName:n,playerNetID:r,skin:i,mapName:t,botOwnerNetID:a,eliminatedArr:c,isMobile:s}},ClientMessage_Ping:function(e,t){return{message:o.ClientPing,id:e,pong:t}},ClientMessage_PlayerStateData:function(e,t,n){return{message:o.ClientPlayerStateData,gameID:n,netID:t,data:e}},ClientMessage_PlayerStateData_Multi:function(e,t){return{message:o.ClientPlayerStateData_Multi,gameID:t,data:e}},ClientMessage_PlayerExitGame:function(e,t){return{message:o.ClientPlayerExitGame,gameID:t,netID:e}},ClientMessage_BroadcastMessage:function(e,t,n,r,i){return{message:o.ClientBroadcastMessage,gameID:r,playerID:e,type:t,payload:n,timestamp:i}},ClientMsg_RequestJoinParty:function(e,t,n,r,i){return{message:o.ClientRequestJoinParty,partyID:e,partyName:t,playerName:n,playerNetID:r,skin:i}},ServerMessage_GameStartingStatus:function(e,t,n,r){return{message:o.ServerGameStartingStatus,gameID:e,mapName:t,gameParameters:r,playerList:n,serverTime:Date.now()}},ServerMessage_Ping:function(e,t){return{message:o.ServerPing,id:e,pong:t}},ServerMessage_FullGameState:function(e,t){return{message:o.ServerFullGameState,gameID:e,gameClock:0,gameState:t,playerState:[],enemyState:[],botAssignments:[]}},ServerMessage_OrderCreateBot:function(e){return{message:o.ServerOrderCreateBot,requestID:e}},ServerMessage_BroadcastMessage:function(e,t,n,r,i){return{message:o.ServerBroadcastMessage,type:t,gameID:r,fromID:e,payload:n,timestamp:i}},PlayerStateData:function(){return{netID:"",lastGameTimeUpdate:0,lastPosition:{x:0,y:0},lastState:"",score:0,stars:0,coins:0,verticalVel:0,curSpeed:0}}},cc._RF.pop()},{}],messages:[function(e,t){"use strict";cc._RF.push(t,"92cb18WFIFBHJvlwZsOTjRX","messages");var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}(e("./protos/tmb.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function i(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=a(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=e[Symbol.iterator]()).next.bind(o)}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}t.exports={ClientMessage_RequestJoinGame:function(e,t,n,r,i,a,c,s){return o.Client_RequestJoinGame.create({message:o.MessageType.CLIENT_REQUESTJOINGAME,gameID:e,playerName:n,playerNetID:r,skin:i,mapName:t,botOwnerNetID:a,eliminatedArr:c,isMobile:s})},ClientMessage_Ping:function(e,t){return o.Client_Ping.create({message:o.MessageType.CLIENT_PING,id:e,pong:t})},ClientMessage_PlayerStateData:function(e,t,n){var r=o.Client_PlayerStateData.create({message:o.MessageType.CLIENT_PLAYERSTATEDATA,gameID:n,netID:t,data:o.PlayerState.create(e)});return r.data.pos=o.POSITION.create(r.data.pos),r.data.veloc=o.POSITION.create(r.data.veloc),r},ClientMessage_PlayerStateData_Multi:function(e,t){for(var n,a=o.Client_PlayerStateData.create({message:o.MessageType.CLIENT_PLAYERSTATEDATA_MULTI,gameID:t,data:[]}),c=i(e);!(n=c()).done;){var s=r({},n.value);s.pos=o.POSITION.create(s.pos),s.veloc=o.POSITION.create(s.veloc),a.data.push(o.PlayerState.create(s))}return a},ClientMessage_PlayerExitGame:function(e,t){return o.Client_PlayerExitGame.create({message:o.MessageType.CLIENT_EXITGAME,gameID:t,netID:e})},ClientMessage_BroadcastMessage:function(e,t,o,n,r){return{message:MessageType.ClientBroadcastMessage,gameID:n,playerID:e,type:t,payload:o,timestamp:r}},ClientMsg_RequestJoinParty:function(e,t,o,n,r){return{message:MessageType.ClientRequestJoinParty,partyID:e,partyName:t,playerName:o,playerNetID:n,skin:r}},ServerMessage_GameStartingStatus:function(e,t,n,r){for(var a,c=o.Server_GameStartingStatus.create({message:o.MessageType.SERVER_GAMESTARTINGSTATUS,gameID:e,gameParameters:o.Server_GameStartingStatus.GAMEPARAMETER.create(r),playerList:[],serverTime:Date.now()}),s=i(n);!(a=s()).done;){var l=a.value;c.playerList.push(o.PLAYERLIST.create(l))}return c},ServerMessage_Ping:function(e,t){return o.Server_Ping.create({message:o.MessageType.SERVER_PING,id:e,pong:t})},ServerMessage_FullGameState:function(e,t){return o.Server_FullGameState.create({message:o.MessageType.SERVER_FULLGAMESTATE,gameID:e,gameClock:0,gameState:t,playerState:[]})},ServerMessage_OrderCreateBot:function(e){return o.Server_OrderCreateBot.create({message:o.MessageType.SERVER_ORDERCREATEBOT,requestID:e})},ServerMessage_BroadcastMessage:function(e,t,o,n,r){return{message:MessageType.ServerBroadcastMessage,type:t,gameID:n,fromID:e,payload:o,timestamp:r}},PlayerStateData:function(){return{netID:"",lastGameTimeUpdate:0,lastPosition:{x:0,y:0},lastState:"",score:0,stars:0,coins:0,verticalVel:0,curSpeed:0}}},cc._RF.pop()},{"./protos/tmb.js":"tmb"}],nCSV:[function(e,t,o){"use strict";cc._RF.push(t,"90ad90PWAVNkYVdJPnaTlnT","nCSV"),Object.defineProperty(o,"__esModule",{value:!0}),o.nCSV=void 0;var n=function(){function e(){}return e.parseLineSingle=function(e,t){void 0===t&&(t=!1);for(var o=[],n=e.length,r=!1,i="",a=0;a<n;a++){var c=e.charAt(a);if(t||!/\s/.test(c)){if(r){if('"'==c){r=!1;continue}}else if('"'==c){r=!0;continue}","!=c||r?i+=c:(o.push(i),i="")}}return i.length>0&&o.push(i),o},e.parseParameters=function(t){var o=t.split("\r\n"),n={};return o.forEach(function(t){if(t.startsWith("#")){var o=e.parseLineSingle(t),r=o[0].substr(1);n[r]=o[1]}}),n},e.parseTable=function(t,o){if(void 0===o&&(o=!1),!t)return!1;var n=t.split("\r\n"),r=[];n.forEach(function(e){e.startsWith("#")||r.push(e)});for(var i=e.parseLineSingle(r[0]),a=r.length,c=i.length,s=[],l=1;l<a;l++){for(var u=e.parseLineSingle(r[l],o),p={},d=0;d<c;d++)d>=u.length?p[i[d]]="":p[i[d]]=u[d];s.push(p)}return s},e}();o.nCSV=n,cc._RF.pop()},{}],nodeAnimInfo:[function(e,t,o){"use strict";cc._RF.push(t,"a972962C7RG9L1LfxXAraY1","nodeAnimInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNodeAnimInfo=void 0;var a,c=cc._decorator,s=c.ccclass,l=c.property;(function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"})(a||(a={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slideDirection=a.Horizontal,t.slidingDistance=150,t.slidingDuration=.1,t.applyMobileOnly=!1,t.atEndPoint=!1,t.startPoint=0,t.endPoint=0,t.widget=null,t}return r(t,e),t.prototype.onLoad=function(){this.widget=this.node.getComponent(cc.Widget),this.widget&&!this.widget.enabled&&(this.widget=null)},t.prototype.animShow=function(e){var t=this;void 0===e&&(e=!0);var o=cc.sys.isMobile;if((!this.applyMobileOnly||o)&&!this.atEndPoint!=!e)if(this.atEndPoint?(this.endPoint=this.slideDirection===a.Horizontal?this.node.getPosition().x:this.node.getPosition().y,this.startPoint=this.endPoint-this.slidingDistance):(this.startPoint=this.slideDirection===a.Horizontal?this.node.getPosition().x:this.node.getPosition().y,this.endPoint=this.startPoint+this.slidingDistance),this.widget&&(this.widget.enabled=!1),this.node.stopActionByTag(0),e){var n=this.node.getPosition(),r=this.node.getPosition();this.slideDirection==a.Horizontal?(n.x=this.startPoint,r.x=this.endPoint):(n.y=this.startPoint,r.y=this.endPoint),this.node.setPosition(n),cc.tween(this.node).tag(0).parallel(cc.tween().to(this.slidingDuration,{opacity:255}),cc.tween().to(this.slidingDuration,{position:r})).call(function(){t.atEndPoint=!0}).start()}else n=this.node.getPosition(),r=this.node.getPosition(),this.slideDirection==a.Horizontal?(n.x=this.endPoint,r.x=this.startPoint):(n.y=this.endPoint,r.y=this.startPoint),this.node.setPosition(n),cc.tween(this.node).tag(0).parallel(cc.tween().to(this.slidingDuration,{opacity:255}),cc.tween().to(this.slidingDuration,{position:r})).call(function(){t.atEndPoint=!1,t.widget&&(t.widget.enabled=!0)}).start()},i([l({type:cc.Enum(a)})],t.prototype,"slideDirection",void 0),i([l],t.prototype,"slidingDistance",void 0),i([l],t.prototype,"slidingDuration",void 0),i([l],t.prototype,"applyMobileOnly",void 0),i([l(cc.Boolean)],t.prototype,"atEndPoint",void 0),i([s],t)}(cc.Component);o.NgcNodeAnimInfo=u,cc._RF.pop()},{}],scrollRecognition:[function(e,t){"use strict";cc._RF.push(t,"6bf00ca5nhFD6dGJJMLCmnM","scrollRecognition");var o=cc.Class({extends:cc.ViewGroup,properties:{scrollView:{default:null,type:cc.ScrollView}},statics:{sPageView:null},onLoad:function(){if(o.sPageView)this.pageView=o.sPageView;else{var e=cc.find("Canvas").getComponentsInChildren(cc.PageView);e.length>0&&(this.pageView=e[0]),o.sPageView=this.pageView}this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0)},_hasNestedViewGroup:function(e,t){if(e.eventPhase!==cc.Event.CAPTURING_PHASE)return!1;if(t)for(var o=0;o<t.length;++o){var n=t[o];if(this.node===n)return!!e.target.getComponent(cc.ViewGroup);if(n.getComponent(cc.ViewGroup))return!0}return!1},_stopPropagationIfTargetIsMe:function(e){e.eventPhase===cc.Event.AT_TARGET&&e.target===this.node&&e.stopPropagation()},_onTouchBegan:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var o=e.touch;this.node&&(this.pageView&&this.pageView._handlePressLogic(o),this.scrollView&&this.scrollView._handlePressLogic(o)),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(e)}},_onTouchMoved:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var o=e.touch;this.node&&this._handleMoveLogic(o);var n=o.getLocation().sub(o.getStartLocation());if(cc.Vec2.mag(n)>7&&!this._touchMoved&&e.target!==this.node){var r=new cc.Event.EventTouch(e.getTouches(),e.bubbles);r.type=cc.Node.EventType.TOUCH_CANCEL,r.touch=e.touch,r.simulate=!0,e.target.dispatchEvent(r),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}},_onTouchEnded:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var o=e.touch;this.node&&this._handleReleaseLogic(o),this.pageView&&this.pageView._dispatchEvent("touch-up"),this.scrollView&&this.scrollView._dispatchEvent("touch-up"),this._touchMoved?e.stopPropagation():this._stopPropagationIfTargetIsMe(e)}},_onTouchCancelled:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){if(!e.simulate){var o=e.touch;this.node&&this._handleReleaseLogic(o)}this._stopPropagationIfTargetIsMe(e)}},_clampDelta:function(e){return Math.abs(e.x)<Math.abs(e.y)?e.x=0:e.y=0,e},_handleMoveLogic:function(e){var t=this._clampDelta(e.getDelta());this.pageView&&this.pageView._processDeltaMove(t),t=this._clampDelta(e.getDelta()),this.scrollView&&this.scrollView._processDeltaMove(t)},_handleReleaseLogic:function(e){var t=e.getDelta();t=this._clampDelta(t),this.pageView&&this.pageView._handleReleaseLogic(),this.scrollView&&(this.scrollView._gatherTouchMove(t),this.scrollView._processInertiaScroll())}});cc._RF.pop()},{}],tmb:[function(e,t){"use strict";var o;cc._RF.push(t,"ec562DqN31AoLCvZNmiE55U","tmb"),o=function(e){var t,o,n=e.Reader,r=e.Writer,i=e.util,a=e.roots.default||(e.roots.default={});return a.MessageType=(t={},(o=Object.create(t))[t[0]="CLIENT_REQUESTJOINGAME"]=0,o[t[1]="CLIENT_PING"]=1,o[t[2]="CLIENT_SENDVERSION"]=2,o[t[3]="CLIENT_PLAYERSTATEDATA"]=3,o[t[4]="CLIENT_PLAYERSTATEDATA_MULTI"]=4,o[t[5]="CLIENT_EXITGAME"]=5,o[t[6]="CLIENT_BROADCASTMESSAGE"]=6,o[t[7]="SERVER_GAMESTARTINGSTATUS"]=7,o[t[8]="SERVER_PING"]=8,o[t[9]="SERVER_FULLGAMESTATE"]=9,o[t[10]="SERVER_ORDERCREATEBOT"]=10,o[t[11]="SERVER_BROADCASTMESSAGE"]=11,o[t[12]="SERVER_CHECKVERSION"]=12,o[t[13]="CLIENT_REQUESTJOINPARTY"]=13,o[t[14]="CLIENT_SENDMESSAGETOPARTY"]=14,o[t[15]="SERVER_PARTYSTATUS"]=15,o[t[16]="NONE"]=16,o),a.POSITION=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.x=0,t.prototype.y=0,t.prototype.z=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(5).float(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(13).float(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(21).float(e.z),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.POSITION;e.pos<o;){var i=e.uint32();switch(i>>>3){case 0:r.x=e.float();break;case 1:r.y=e.float();break;case 2:r.z=e.float();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x?"x: number expected":null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y?"y: number expected":null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z?"z: number expected":null},t.fromObject=function(e){if(e instanceof a.POSITION)return e;var t=new a.POSITION;return null!=e.x&&(t.x=Number(e.x)),null!=e.y&&(t.y=Number(e.y)),null!=e.z&&(t.z=Number(e.z)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.x=0,o.y=0,o.z=0),null!=e.x&&e.hasOwnProperty("x")&&(o.x=t.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(o.y=t.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(o.z=t.json&&!isFinite(e.z)?String(e.z):e.z),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.PlayerState=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.Cpoint=0,t.prototype.FRace=!1,t.prototype.angle=0,t.prototype.lap=0,t.prototype.loop=!1,t.prototype.netID="",t.prototype.pos=null,t.prototype.speed=0,t.prototype.stateMsgID=0,t.prototype.stop=!1,t.prototype.timeLap=0,t.prototype.totalTime=0,t.prototype.veloc=null,t.prototype.markedKicked=!1,t.prototype.botOwnerNetID="",t.prototype.fardistance=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.Cpoint&&Object.hasOwnProperty.call(e,"Cpoint")&&t.uint32(0).int32(e.Cpoint),null!=e.FRace&&Object.hasOwnProperty.call(e,"FRace")&&t.uint32(8).bool(e.FRace),null!=e.angle&&Object.hasOwnProperty.call(e,"angle")&&t.uint32(21).float(e.angle),null!=e.lap&&Object.hasOwnProperty.call(e,"lap")&&t.uint32(24).int32(e.lap),null!=e.loop&&Object.hasOwnProperty.call(e,"loop")&&t.uint32(32).bool(e.loop),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(42).string(e.netID),null!=e.pos&&Object.hasOwnProperty.call(e,"pos")&&a.POSITION.encode(e.pos,t.uint32(50).fork()).ldelim(),null!=e.speed&&Object.hasOwnProperty.call(e,"speed")&&t.uint32(61).float(e.speed),null!=e.stateMsgID&&Object.hasOwnProperty.call(e,"stateMsgID")&&t.uint32(64).int32(e.stateMsgID),null!=e.stop&&Object.hasOwnProperty.call(e,"stop")&&t.uint32(72).bool(e.stop),null!=e.timeLap&&Object.hasOwnProperty.call(e,"timeLap")&&t.uint32(80).int32(e.timeLap),null!=e.totalTime&&Object.hasOwnProperty.call(e,"totalTime")&&t.uint32(93).float(e.totalTime),null!=e.veloc&&Object.hasOwnProperty.call(e,"veloc")&&a.POSITION.encode(e.veloc,t.uint32(98).fork()).ldelim(),null!=e.markedKicked&&Object.hasOwnProperty.call(e,"markedKicked")&&t.uint32(104).bool(e.markedKicked),null!=e.botOwnerNetID&&Object.hasOwnProperty.call(e,"botOwnerNetID")&&t.uint32(114).string(e.botOwnerNetID),null!=e.fardistance&&Object.hasOwnProperty.call(e,"fardistance")&&t.uint32(125).float(e.fardistance),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.PlayerState;e.pos<o;){var i=e.uint32();switch(i>>>3){case 0:r.Cpoint=e.int32();break;case 1:r.FRace=e.bool();break;case 2:r.angle=e.float();break;case 3:r.lap=e.int32();break;case 4:r.loop=e.bool();break;case 5:r.netID=e.string();break;case 6:r.pos=a.POSITION.decode(e,e.uint32());break;case 7:r.speed=e.float();break;case 8:r.stateMsgID=e.int32();break;case 9:r.stop=e.bool();break;case 10:r.timeLap=e.int32();break;case 11:r.totalTime=e.float();break;case 12:r.veloc=a.POSITION.decode(e,e.uint32());break;case 13:r.markedKicked=e.bool();break;case 14:r.botOwnerNetID=e.string();break;case 15:r.fardistance=e.float();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.Cpoint&&e.hasOwnProperty("Cpoint")&&!i.isInteger(e.Cpoint)?"Cpoint: integer expected":null!=e.FRace&&e.hasOwnProperty("FRace")&&"boolean"!=typeof e.FRace?"FRace: boolean expected":null!=e.angle&&e.hasOwnProperty("angle")&&"number"!=typeof e.angle?"angle: number expected":null!=e.lap&&e.hasOwnProperty("lap")&&!i.isInteger(e.lap)?"lap: integer expected":null!=e.loop&&e.hasOwnProperty("loop")&&"boolean"!=typeof e.loop?"loop: boolean expected":null!=e.netID&&e.hasOwnProperty("netID")&&!i.isString(e.netID)?"netID: string expected":null!=e.pos&&e.hasOwnProperty("pos")&&(t=a.POSITION.verify(e.pos))?"pos."+t:null!=e.speed&&e.hasOwnProperty("speed")&&"number"!=typeof e.speed?"speed: number expected":null!=e.stateMsgID&&e.hasOwnProperty("stateMsgID")&&!i.isInteger(e.stateMsgID)?"stateMsgID: integer expected":null!=e.stop&&e.hasOwnProperty("stop")&&"boolean"!=typeof e.stop?"stop: boolean expected":null!=e.timeLap&&e.hasOwnProperty("timeLap")&&!i.isInteger(e.timeLap)?"timeLap: integer expected":null!=e.totalTime&&e.hasOwnProperty("totalTime")&&"number"!=typeof e.totalTime?"totalTime: number expected":null!=e.veloc&&e.hasOwnProperty("veloc")&&(t=a.POSITION.verify(e.veloc))?"veloc."+t:null!=e.markedKicked&&e.hasOwnProperty("markedKicked")&&"boolean"!=typeof e.markedKicked?"markedKicked: boolean expected":null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&!i.isString(e.botOwnerNetID)?"botOwnerNetID: string expected":null!=e.fardistance&&e.hasOwnProperty("fardistance")&&"number"!=typeof e.fardistance?"fardistance: number expected":null;var t},t.fromObject=function(e){if(e instanceof a.PlayerState)return e;var t=new a.PlayerState;if(null!=e.Cpoint&&(t.Cpoint=0|e.Cpoint),null!=e.FRace&&(t.FRace=Boolean(e.FRace)),null!=e.angle&&(t.angle=Number(e.angle)),null!=e.lap&&(t.lap=0|e.lap),null!=e.loop&&(t.loop=Boolean(e.loop)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.pos){if("object"!=typeof e.pos)throw TypeError(".PlayerState.pos: object expected");t.pos=a.POSITION.fromObject(e.pos)}if(null!=e.speed&&(t.speed=Number(e.speed)),null!=e.stateMsgID&&(t.stateMsgID=0|e.stateMsgID),null!=e.stop&&(t.stop=Boolean(e.stop)),null!=e.timeLap&&(t.timeLap=0|e.timeLap),null!=e.totalTime&&(t.totalTime=Number(e.totalTime)),null!=e.veloc){if("object"!=typeof e.veloc)throw TypeError(".PlayerState.veloc: object expected");t.veloc=a.POSITION.fromObject(e.veloc)}return null!=e.markedKicked&&(t.markedKicked=Boolean(e.markedKicked)),null!=e.botOwnerNetID&&(t.botOwnerNetID=String(e.botOwnerNetID)),null!=e.fardistance&&(t.fardistance=Number(e.fardistance)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.Cpoint=0,o.FRace=!1,o.angle=0,o.lap=0,o.loop=!1,o.netID="",o.pos=null,o.speed=0,o.stateMsgID=0,o.stop=!1,o.timeLap=0,o.totalTime=0,o.veloc=null,o.markedKicked=!1,o.botOwnerNetID="",o.fardistance=0),null!=e.Cpoint&&e.hasOwnProperty("Cpoint")&&(o.Cpoint=e.Cpoint),null!=e.FRace&&e.hasOwnProperty("FRace")&&(o.FRace=e.FRace),null!=e.angle&&e.hasOwnProperty("angle")&&(o.angle=t.json&&!isFinite(e.angle)?String(e.angle):e.angle),null!=e.lap&&e.hasOwnProperty("lap")&&(o.lap=e.lap),null!=e.loop&&e.hasOwnProperty("loop")&&(o.loop=e.loop),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.pos&&e.hasOwnProperty("pos")&&(o.pos=a.POSITION.toObject(e.pos,t)),null!=e.speed&&e.hasOwnProperty("speed")&&(o.speed=t.json&&!isFinite(e.speed)?String(e.speed):e.speed),null!=e.stateMsgID&&e.hasOwnProperty("stateMsgID")&&(o.stateMsgID=e.stateMsgID),null!=e.stop&&e.hasOwnProperty("stop")&&(o.stop=e.stop),null!=e.timeLap&&e.hasOwnProperty("timeLap")&&(o.timeLap=e.timeLap),null!=e.totalTime&&e.hasOwnProperty("totalTime")&&(o.totalTime=t.json&&!isFinite(e.totalTime)?String(e.totalTime):e.totalTime),null!=e.veloc&&e.hasOwnProperty("veloc")&&(o.veloc=a.POSITION.toObject(e.veloc,t)),null!=e.markedKicked&&e.hasOwnProperty("markedKicked")&&(o.markedKicked=e.markedKicked),null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&(o.botOwnerNetID=e.botOwnerNetID),null!=e.fardistance&&e.hasOwnProperty("fardistance")&&(o.fardistance=t.json&&!isFinite(e.fardistance)?String(e.fardistance):e.fardistance),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.PLAYERLIST=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.name="",t.prototype.netID="",t.prototype.startPointIndex=0,t.prototype.skin="",t.prototype.isMobile=!1,t.prototype.botOwnerNetID="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(2).string(e.name),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(10).string(e.netID),null!=e.startPointIndex&&Object.hasOwnProperty.call(e,"startPointIndex")&&t.uint32(16).int32(e.startPointIndex),null!=e.skin&&Object.hasOwnProperty.call(e,"skin")&&t.uint32(26).string(e.skin),null!=e.isMobile&&Object.hasOwnProperty.call(e,"isMobile")&&t.uint32(32).bool(e.isMobile),null!=e.botOwnerNetID&&Object.hasOwnProperty.call(e,"botOwnerNetID")&&t.uint32(42).string(e.botOwnerNetID),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.PLAYERLIST;e.pos<o;){var i=e.uint32();switch(i>>>3){case 0:r.name=e.string();break;case 1:r.netID=e.string();break;case 2:r.startPointIndex=e.int32();break;case 3:r.skin=e.string();break;case 4:r.isMobile=e.bool();break;case 5:r.botOwnerNetID=e.string();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.name&&e.hasOwnProperty("name")&&!i.isString(e.name)?"name: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!i.isString(e.netID)?"netID: string expected":null!=e.startPointIndex&&e.hasOwnProperty("startPointIndex")&&!i.isInteger(e.startPointIndex)?"startPointIndex: integer expected":null!=e.skin&&e.hasOwnProperty("skin")&&!i.isString(e.skin)?"skin: string expected":null!=e.isMobile&&e.hasOwnProperty("isMobile")&&"boolean"!=typeof e.isMobile?"isMobile: boolean expected":null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&!i.isString(e.botOwnerNetID)?"botOwnerNetID: string expected":null},t.fromObject=function(e){if(e instanceof a.PLAYERLIST)return e;var t=new a.PLAYERLIST;return null!=e.name&&(t.name=String(e.name)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.startPointIndex&&(t.startPointIndex=0|e.startPointIndex),null!=e.skin&&(t.skin=String(e.skin)),null!=e.isMobile&&(t.isMobile=Boolean(e.isMobile)),null!=e.botOwnerNetID&&(t.botOwnerNetID=String(e.botOwnerNetID)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.name="",o.netID="",o.startPointIndex=0,o.skin="",o.isMobile=!1,o.botOwnerNetID=""),null!=e.name&&e.hasOwnProperty("name")&&(o.name=e.name),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.startPointIndex&&e.hasOwnProperty("startPointIndex")&&(o.startPointIndex=e.startPointIndex),null!=e.skin&&e.hasOwnProperty("skin")&&(o.skin=e.skin),null!=e.isMobile&&e.hasOwnProperty("isMobile")&&(o.isMobile=e.isMobile),null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&(o.botOwnerNetID=e.botOwnerNetID),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Client_RequestJoinGame=function(){function t(e){if(this.eliminatedArr=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.playerNetID="",t.prototype.playerName="",t.prototype.skin="",t.prototype.botOwnerNetID="",t.prototype.mapName="",t.prototype.isMobile=!1,t.prototype.eliminatedArr=i.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.playerNetID&&Object.hasOwnProperty.call(e,"playerNetID")&&t.uint32(26).string(e.playerNetID),null!=e.playerName&&Object.hasOwnProperty.call(e,"playerName")&&t.uint32(34).string(e.playerName),null!=e.skin&&Object.hasOwnProperty.call(e,"skin")&&t.uint32(42).string(e.skin),null!=e.botOwnerNetID&&Object.hasOwnProperty.call(e,"botOwnerNetID")&&t.uint32(50).string(e.botOwnerNetID),null!=e.mapName&&Object.hasOwnProperty.call(e,"mapName")&&t.uint32(58).string(e.mapName),null!=e.isMobile&&Object.hasOwnProperty.call(e,"isMobile")&&t.uint32(64).bool(e.isMobile),null!=e.eliminatedArr&&e.eliminatedArr.length){t.uint32(74).fork();for(var o=0;o<e.eliminatedArr.length;++o)t.int32(e.eliminatedArr[o]);t.ldelim()}return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Client_RequestJoinGame;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.playerNetID=e.string();break;case 4:r.playerName=e.string();break;case 5:r.skin=e.string();break;case 6:r.botOwnerNetID=e.string();break;case 7:r.mapName=e.string();break;case 8:r.isMobile=e.bool();break;case 9:if(r.eliminatedArr&&r.eliminatedArr.length||(r.eliminatedArr=[]),2==(7&i))for(var c=e.uint32()+e.pos;e.pos<c;)r.eliminatedArr.push(e.int32());else r.eliminatedArr.push(e.int32());break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID))return"gameID: string expected";if(null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&!i.isString(e.playerNetID))return"playerNetID: string expected";if(null!=e.playerName&&e.hasOwnProperty("playerName")&&!i.isString(e.playerName))return"playerName: string expected";if(null!=e.skin&&e.hasOwnProperty("skin")&&!i.isString(e.skin))return"skin: string expected";if(null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&!i.isString(e.botOwnerNetID))return"botOwnerNetID: string expected";if(null!=e.mapName&&e.hasOwnProperty("mapName")&&!i.isString(e.mapName))return"mapName: string expected";if(null!=e.isMobile&&e.hasOwnProperty("isMobile")&&"boolean"!=typeof e.isMobile)return"isMobile: boolean expected";if(null!=e.eliminatedArr&&e.hasOwnProperty("eliminatedArr")){if(!Array.isArray(e.eliminatedArr))return"eliminatedArr: array expected";for(var t=0;t<e.eliminatedArr.length;++t)if(!i.isInteger(e.eliminatedArr[t]))return"eliminatedArr: integer[] expected"}return null},t.fromObject=function(e){if(e instanceof a.Client_RequestJoinGame)return e;var t=new a.Client_RequestJoinGame;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}if(null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.playerNetID&&(t.playerNetID=String(e.playerNetID)),null!=e.playerName&&(t.playerName=String(e.playerName)),null!=e.skin&&(t.skin=String(e.skin)),null!=e.botOwnerNetID&&(t.botOwnerNetID=String(e.botOwnerNetID)),null!=e.mapName&&(t.mapName=String(e.mapName)),null!=e.isMobile&&(t.isMobile=Boolean(e.isMobile)),e.eliminatedArr){if(!Array.isArray(e.eliminatedArr))throw TypeError(".Client_RequestJoinGame.eliminatedArr: array expected");t.eliminatedArr=[];for(var o=0;o<e.eliminatedArr.length;++o)t.eliminatedArr[o]=0|e.eliminatedArr[o]}return t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.eliminatedArr=[]),t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.playerNetID="",o.playerName="",o.skin="",o.botOwnerNetID="",o.mapName="",o.isMobile=!1),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&(o.playerNetID=e.playerNetID),null!=e.playerName&&e.hasOwnProperty("playerName")&&(o.playerName=e.playerName),null!=e.skin&&e.hasOwnProperty("skin")&&(o.skin=e.skin),null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&(o.botOwnerNetID=e.botOwnerNetID),null!=e.mapName&&e.hasOwnProperty("mapName")&&(o.mapName=e.mapName),null!=e.isMobile&&e.hasOwnProperty("isMobile")&&(o.isMobile=e.isMobile),e.eliminatedArr&&e.eliminatedArr.length){o.eliminatedArr=[];for(var n=0;n<e.eliminatedArr.length;++n)o.eliminatedArr[n]=e.eliminatedArr[n]}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Client_Ping=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.id="",t.prototype.pong=!1,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(18).string(e.id),null!=e.pong&&Object.hasOwnProperty.call(e,"pong")&&t.uint32(24).bool(e.pong),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Client_Ping;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.id=e.string();break;case 3:r.pong=e.bool();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}return null!=e.id&&e.hasOwnProperty("id")&&!i.isString(e.id)?"id: string expected":null!=e.pong&&e.hasOwnProperty("pong")&&"boolean"!=typeof e.pong?"pong: boolean expected":null},t.fromObject=function(e){if(e instanceof a.Client_Ping)return e;var t=new a.Client_Ping;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}return null!=e.id&&(t.id=String(e.id)),null!=e.pong&&(t.pong=Boolean(e.pong)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.id="",o.pong=!1),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.id&&e.hasOwnProperty("id")&&(o.id=e.id),null!=e.pong&&e.hasOwnProperty("pong")&&(o.pong=e.pong),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Client_BroadcastMessage=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.netID="",t.prototype.type="",t.prototype.payload="",t.prototype.timestamp=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(34).string(e.type),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(42).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(48).uint64(e.timestamp),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Client_BroadcastMessage;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;case 4:r.type=e.string();break;case 5:r.payload=e.string();break;case 6:r.timestamp=e.uint64();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID)?"gameID: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!i.isString(e.netID)?"netID: string expected":null!=e.type&&e.hasOwnProperty("type")&&!i.isString(e.type)?"type: string expected":null!=e.payload&&e.hasOwnProperty("payload")&&!i.isString(e.payload)?"payload: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(i.isInteger(e.timestamp)||e.timestamp&&i.isInteger(e.timestamp.low)&&i.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},t.fromObject=function(e){if(e instanceof a.Client_BroadcastMessage)return e;var t=new a.Client_BroadcastMessage;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.type&&(t.type=String(e.type)),null!=e.payload&&(t.payload=String(e.payload)),null!=e.timestamp&&(i.Long?(t.timestamp=i.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new i.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.netID="",o.type="",o.payload="",i.Long){var n=new i.Long(0,0,!0);o.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timestamp=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.payload&&e.hasOwnProperty("payload")&&(o.payload=e.payload),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?i.Long.prototype.toString.call(e.timestamp):t.longs===Number?new i.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Client_PlayerExitGame=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.netID="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Client_PlayerExitGame;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID)?"gameID: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!i.isString(e.netID)?"netID: string expected":null},t.fromObject=function(e){if(e instanceof a.Client_PlayerExitGame)return e;var t=new a.Client_PlayerExitGame;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.netID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Client_PlayerStateData=function(){function t(e){if(this.data=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.netID="",t.prototype.data=i.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),null!=e.data&&e.data.length)for(var o=0;o<e.data.length;++o)a.PlayerState.encode(e.data[o],t.uint32(34).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Client_PlayerStateData;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;case 4:r.data&&r.data.length||(r.data=[]),r.data.push(a.PlayerState.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID))return"gameID: string expected";if(null!=e.netID&&e.hasOwnProperty("netID")&&!i.isString(e.netID))return"netID: string expected";if(null!=e.data&&e.hasOwnProperty("data")){if(!Array.isArray(e.data))return"data: array expected";for(var t=0;t<e.data.length;++t){var o=a.PlayerState.verify(e.data[t]);if(o)return"data."+o}}return null},t.fromObject=function(e){if(e instanceof a.Client_PlayerStateData)return e;var t=new a.Client_PlayerStateData;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}if(null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),e.data){if(!Array.isArray(e.data))throw TypeError(".Client_PlayerStateData.data: array expected");t.data=[];for(var o=0;o<e.data.length;++o){if("object"!=typeof e.data[o])throw TypeError(".Client_PlayerStateData.data: object expected");t.data[o]=a.PlayerState.fromObject(e.data[o])}}return t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.data=[]),t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.netID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),e.data&&e.data.length){o.data=[];for(var n=0;n<e.data.length;++n)o.data[n]=a.PlayerState.toObject(e.data[n],t)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_FullGameState=function(){function t(e){if(this.playerState=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.gameClock=0,t.prototype.gameState="",t.prototype.gameStateMsgID=0,t.prototype.playerState=i.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.gameClock&&Object.hasOwnProperty.call(e,"gameClock")&&t.uint32(29).float(e.gameClock),null!=e.gameState&&Object.hasOwnProperty.call(e,"gameState")&&t.uint32(34).string(e.gameState),null!=e.gameStateMsgID&&Object.hasOwnProperty.call(e,"gameStateMsgID")&&t.uint32(40).uint32(e.gameStateMsgID),null!=e.playerState&&e.playerState.length)for(var o=0;o<e.playerState.length;++o)a.PlayerState.encode(e.playerState[o],t.uint32(50).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_FullGameState;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.gameClock=e.float();break;case 4:r.gameState=e.string();break;case 5:r.gameStateMsgID=e.uint32();break;case 6:r.playerState&&r.playerState.length||(r.playerState=[]),r.playerState.push(a.PlayerState.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID))return"gameID: string expected";if(null!=e.gameClock&&e.hasOwnProperty("gameClock")&&"number"!=typeof e.gameClock)return"gameClock: number expected";if(null!=e.gameState&&e.hasOwnProperty("gameState")&&!i.isString(e.gameState))return"gameState: string expected";if(null!=e.gameStateMsgID&&e.hasOwnProperty("gameStateMsgID")&&!i.isInteger(e.gameStateMsgID))return"gameStateMsgID: integer expected";if(null!=e.playerState&&e.hasOwnProperty("playerState")){if(!Array.isArray(e.playerState))return"playerState: array expected";for(var t=0;t<e.playerState.length;++t){var o=a.PlayerState.verify(e.playerState[t]);if(o)return"playerState."+o}}return null},t.fromObject=function(e){if(e instanceof a.Server_FullGameState)return e;var t=new a.Server_FullGameState;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}if(null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.gameClock&&(t.gameClock=Number(e.gameClock)),null!=e.gameState&&(t.gameState=String(e.gameState)),null!=e.gameStateMsgID&&(t.gameStateMsgID=e.gameStateMsgID>>>0),e.playerState){if(!Array.isArray(e.playerState))throw TypeError(".Server_FullGameState.playerState: array expected");t.playerState=[];for(var o=0;o<e.playerState.length;++o){if("object"!=typeof e.playerState[o])throw TypeError(".Server_FullGameState.playerState: object expected");t.playerState[o]=a.PlayerState.fromObject(e.playerState[o])}}return t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.playerState=[]),t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.gameClock=0,o.gameState="",o.gameStateMsgID=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.gameClock&&e.hasOwnProperty("gameClock")&&(o.gameClock=t.json&&!isFinite(e.gameClock)?String(e.gameClock):e.gameClock),null!=e.gameState&&e.hasOwnProperty("gameState")&&(o.gameState=e.gameState),null!=e.gameStateMsgID&&e.hasOwnProperty("gameStateMsgID")&&(o.gameStateMsgID=e.gameStateMsgID),e.playerState&&e.playerState.length){o.playerState=[];for(var n=0;n<e.playerState.length;++n)o.playerState[n]=a.PlayerState.toObject(e.playerState[n],t)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_OrderCreateBot=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.requestID=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.requestID&&Object.hasOwnProperty.call(e,"requestID")&&t.uint32(16).uint32(e.requestID),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_OrderCreateBot;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.requestID=e.uint32();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}return null!=e.requestID&&e.hasOwnProperty("requestID")&&!i.isInteger(e.requestID)?"requestID: integer expected":null},t.fromObject=function(e){if(e instanceof a.Server_OrderCreateBot)return e;var t=new a.Server_OrderCreateBot;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}return null!=e.requestID&&(t.requestID=e.requestID>>>0),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.requestID=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.requestID&&e.hasOwnProperty("requestID")&&(o.requestID=e.requestID),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_GameStartingStatus=function(){function t(e){if(this.playerList=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.gameParameters=null,t.prototype.playerList=i.emptyArray,t.prototype.serverTime=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.gameParameters&&Object.hasOwnProperty.call(e,"gameParameters")&&a.Server_GameStartingStatus.GAMEPARAMETER.encode(e.gameParameters,t.uint32(26).fork()).ldelim(),null!=e.playerList&&e.playerList.length)for(var o=0;o<e.playerList.length;++o)a.PLAYERLIST.encode(e.playerList[o],t.uint32(34).fork()).ldelim();return null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(40).uint64(e.serverTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_GameStartingStatus;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.gameParameters=a.Server_GameStartingStatus.GAMEPARAMETER.decode(e,e.uint32());break;case 4:r.playerList&&r.playerList.length||(r.playerList=[]),r.playerList.push(a.PLAYERLIST.decode(e,e.uint32()));break;case 5:r.serverTime=e.uint64();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID))return"gameID: string expected";if(null!=e.gameParameters&&e.hasOwnProperty("gameParameters")&&(o=a.Server_GameStartingStatus.GAMEPARAMETER.verify(e.gameParameters)))return"gameParameters."+o;if(null!=e.playerList&&e.hasOwnProperty("playerList")){if(!Array.isArray(e.playerList))return"playerList: array expected";for(var t=0;t<e.playerList.length;++t){var o;if(o=a.PLAYERLIST.verify(e.playerList[t]))return"playerList."+o}}return null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(i.isInteger(e.serverTime)||e.serverTime&&i.isInteger(e.serverTime.low)&&i.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},t.fromObject=function(e){if(e instanceof a.Server_GameStartingStatus)return e;var t=new a.Server_GameStartingStatus;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}if(null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.gameParameters){if("object"!=typeof e.gameParameters)throw TypeError(".Server_GameStartingStatus.gameParameters: object expected");t.gameParameters=a.Server_GameStartingStatus.GAMEPARAMETER.fromObject(e.gameParameters)}if(e.playerList){if(!Array.isArray(e.playerList))throw TypeError(".Server_GameStartingStatus.playerList: array expected");t.playerList=[];for(var o=0;o<e.playerList.length;++o){if("object"!=typeof e.playerList[o])throw TypeError(".Server_GameStartingStatus.playerList: object expected");t.playerList[o]=a.PLAYERLIST.fromObject(e.playerList[o])}}return null!=e.serverTime&&(i.Long?(t.serverTime=i.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.playerList=[]),t.defaults)if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.gameParameters=null,i.Long){var n=new i.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;if(null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.gameParameters&&e.hasOwnProperty("gameParameters")&&(o.gameParameters=a.Server_GameStartingStatus.GAMEPARAMETER.toObject(e.gameParameters,t)),e.playerList&&e.playerList.length){o.playerList=[];for(var r=0;r<e.playerList.length;++r)o.playerList[r]=a.PLAYERLIST.toObject(e.playerList[r],t)}return null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?i.Long.prototype.toString.call(e.serverTime):t.longs===Number?new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t.GAMEPARAMETER=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.gameMinPlayers=0,t.prototype.gameMaxPlayers=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.gameMinPlayers&&Object.hasOwnProperty.call(e,"gameMinPlayers")&&t.uint32(0).int32(e.gameMinPlayers),null!=e.gameMaxPlayers&&Object.hasOwnProperty.call(e,"gameMaxPlayers")&&t.uint32(8).int32(e.gameMaxPlayers),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_GameStartingStatus.GAMEPARAMETER;e.pos<o;){var i=e.uint32();switch(i>>>3){case 0:r.gameMinPlayers=e.int32();break;case 1:r.gameMaxPlayers=e.int32();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.gameMinPlayers&&e.hasOwnProperty("gameMinPlayers")&&!i.isInteger(e.gameMinPlayers)?"gameMinPlayers: integer expected":null!=e.gameMaxPlayers&&e.hasOwnProperty("gameMaxPlayers")&&!i.isInteger(e.gameMaxPlayers)?"gameMaxPlayers: integer expected":null},t.fromObject=function(e){if(e instanceof a.Server_GameStartingStatus.GAMEPARAMETER)return e;var t=new a.Server_GameStartingStatus.GAMEPARAMETER;return null!=e.gameMinPlayers&&(t.gameMinPlayers=0|e.gameMinPlayers),null!=e.gameMaxPlayers&&(t.gameMaxPlayers=0|e.gameMaxPlayers),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.gameMinPlayers=0,o.gameMaxPlayers=0),null!=e.gameMinPlayers&&e.hasOwnProperty("gameMinPlayers")&&(o.gameMinPlayers=e.gameMinPlayers),null!=e.gameMaxPlayers&&e.hasOwnProperty("gameMaxPlayers")&&(o.gameMaxPlayers=e.gameMaxPlayers),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),t}(),a.Server_Ping=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.id="",t.prototype.pong=!1,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(18).string(e.id),null!=e.pong&&Object.hasOwnProperty.call(e,"pong")&&t.uint32(24).bool(e.pong),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_Ping;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.id=e.string();break;case 3:r.pong=e.bool();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}return null!=e.id&&e.hasOwnProperty("id")&&!i.isString(e.id)?"id: string expected":null!=e.pong&&e.hasOwnProperty("pong")&&"boolean"!=typeof e.pong?"pong: boolean expected":null},t.fromObject=function(e){if(e instanceof a.Server_Ping)return e;var t=new a.Server_Ping;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}return null!=e.id&&(t.id=String(e.id)),null!=e.pong&&(t.pong=Boolean(e.pong)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.id="",o.pong=!1),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.id&&e.hasOwnProperty("id")&&(o.id=e.id),null!=e.pong&&e.hasOwnProperty("pong")&&(o.pong=e.pong),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_BroadcastMessage=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.type="",t.prototype.playerID="",t.prototype.payload="",t.prototype.timestamp=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(26).string(e.type),null!=e.playerID&&Object.hasOwnProperty.call(e,"playerID")&&t.uint32(34).string(e.playerID),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(42).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(48).uint64(e.timestamp),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_BroadcastMessage;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.type=e.string();break;case 4:r.playerID=e.string();break;case 5:r.payload=e.string();break;case 6:r.timestamp=e.uint64();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID)?"gameID: string expected":null!=e.type&&e.hasOwnProperty("type")&&!i.isString(e.type)?"type: string expected":null!=e.playerID&&e.hasOwnProperty("playerID")&&!i.isString(e.playerID)?"playerID: string expected":null!=e.payload&&e.hasOwnProperty("payload")&&!i.isString(e.payload)?"payload: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(i.isInteger(e.timestamp)||e.timestamp&&i.isInteger(e.timestamp.low)&&i.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},t.fromObject=function(e){if(e instanceof a.Server_BroadcastMessage)return e;var t=new a.Server_BroadcastMessage;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.type&&(t.type=String(e.type)),null!=e.playerID&&(t.playerID=String(e.playerID)),null!=e.payload&&(t.payload=String(e.payload)),null!=e.timestamp&&(i.Long?(t.timestamp=i.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new i.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.type="",o.playerID="",o.payload="",i.Long){var n=new i.Long(0,0,!0);o.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timestamp=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.playerID&&e.hasOwnProperty("playerID")&&(o.playerID=e.playerID),null!=e.payload&&e.hasOwnProperty("payload")&&(o.payload=e.payload),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?i.Long.prototype.toString.call(e.timestamp):t.longs===Number?new i.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_PartyStatus=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.partyID="",t.prototype.partyParamemters="",t.prototype.playerList="",t.prototype.serverTime=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.partyID&&Object.hasOwnProperty.call(e,"partyID")&&t.uint32(18).string(e.partyID),null!=e.partyParamemters&&Object.hasOwnProperty.call(e,"partyParamemters")&&t.uint32(26).string(e.partyParamemters),null!=e.playerList&&Object.hasOwnProperty.call(e,"playerList")&&t.uint32(34).string(e.playerList),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(40).uint64(e.serverTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_PartyStatus;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.partyID=e.string();break;case 3:r.partyParamemters=e.string();break;case 4:r.playerList=e.string();break;case 5:r.serverTime=e.uint64();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}return null!=e.partyID&&e.hasOwnProperty("partyID")&&!i.isString(e.partyID)?"partyID: string expected":null!=e.partyParamemters&&e.hasOwnProperty("partyParamemters")&&!i.isString(e.partyParamemters)?"partyParamemters: string expected":null!=e.playerList&&e.hasOwnProperty("playerList")&&!i.isString(e.playerList)?"playerList: string expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(i.isInteger(e.serverTime)||e.serverTime&&i.isInteger(e.serverTime.low)&&i.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},t.fromObject=function(e){if(e instanceof a.Server_PartyStatus)return e;var t=new a.Server_PartyStatus;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}return null!=e.partyID&&(t.partyID=String(e.partyID)),null!=e.partyParamemters&&(t.partyParamemters=String(e.partyParamemters)),null!=e.playerList&&(t.playerList=String(e.playerList)),null!=e.serverTime&&(i.Long?(t.serverTime=i.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.partyID="",o.partyParamemters="",o.playerList="",i.Long){var n=new i.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.partyID&&e.hasOwnProperty("partyID")&&(o.partyID=e.partyID),null!=e.partyParamemters&&e.hasOwnProperty("partyParamemters")&&(o.partyParamemters=e.partyParamemters),null!=e.playerList&&e.hasOwnProperty("playerList")&&(o.playerList=e.playerList),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?i.Long.prototype.toString.call(e.serverTime):t.longs===Number?new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.ServerMessage_TechMessage=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.type="",t.prototype.title="",t.prototype.description="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(26).string(e.title),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(34).string(e.description),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.ServerMessage_TechMessage;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.message=e.int32();break;case 2:r.type=e.string();break;case 3:r.title=e.string();break;case 4:r.description=e.string();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:}return null!=e.type&&e.hasOwnProperty("type")&&!i.isString(e.type)?"type: string expected":null!=e.title&&e.hasOwnProperty("title")&&!i.isString(e.title)?"title: string expected":null!=e.description&&e.hasOwnProperty("description")&&!i.isString(e.description)?"description: string expected":null},t.fromObject=function(e){if(e instanceof a.ServerMessage_TechMessage)return e;var t=new a.ServerMessage_TechMessage;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_BROADCASTMESSAGE":case 11:t.message=11;break;case"SERVER_CHECKVERSION":case 12:t.message=12;break;case"CLIENT_REQUESTJOINPARTY":case 13:t.message=13;break;case"CLIENT_SENDMESSAGETOPARTY":case 14:t.message=14;break;case"SERVER_PARTYSTATUS":case 15:t.message=15;break;case"NONE":case 16:t.message=16}return null!=e.type&&(t.type=String(e.type)),null!=e.title&&(t.title=String(e.title)),null!=e.description&&(t.description=String(e.description)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.type="",o.title="",o.description=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?a.MessageType[e.message]:e.message),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.title&&e.hasOwnProperty("title")&&(o.title=e.title),null!=e.description&&e.hasOwnProperty("description")&&(o.description=e.description),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a},"function"==typeof define&&define.amd?define(["protobufjs/minimal"],o):"function"==typeof e&&"object"==typeof t&&t&&t.exports&&(t.exports=o(e("protobufjs/minimal"))),cc._RF.pop()},{"protobufjs/minimal":82}],utils:[function(e,t){"use strict";cc._RF.push(t,"616d1YasLxJ5IqQfIuXEgeJ","utils");var o=e("./tmb"),n=e("protobufjs/minimal");t.exports={GetMessageType:function(e){var t=n.Reader.create(e);return t.uint32()>>>3==1?t.int32():o.MessageType.NONE}},cc._RF.pop()},{"./tmb":"tmb","protobufjs/minimal":82}]},{},["CusDailyRewardUI","CusNavBarSettingsDialog","Delegate","Event","LocalizedRichText","ResizableComponent","Utils","nCSV","scrollRecognition","ControlHint","CrownRoadComp","CrownRoadItem","CrownRoadManager","CrownRoadMilestoneItem","CrownRoadProgressionDialog","CrownRoadUI","BigDay","DailyRewardManager","DailyRewardUI","Day","RewardClaimAnimation","DeliveryRewardAnimation","DialogBase","DialogOnSceneBase","MessageDialog","NgcDialogManager","NoticeDialog","ItemSelectLanguage","SelectLanguageDialog","Emoji","EmojiAnimationHandler","EmojiScrollItem","EmotesManager","EmotesUI","nodeAnimInfo","ResultUI","RewardItem","NgcRevive","ReviveDialog","RewardUI","SpectatorItem","SpectatorManager","CCGIF","CCGIFTest","GIF","LZW","NgcGDPR","GameModeInfoDialog","GameModeManager","ModeButton","BundleAsset","InteractionButtonAsset","ItemTabAsset","SingleItemAsset","InteractionButton","ItemCategory","ItemContainer","ItemPool","Bundle","ItemShop","SingleItem","SingleItemType1","SingleItemType2","SingleItemType3","ItemStatus","ItemStatusEquipped","ItemStatusUnlock","PurchaseMethodAchievement","PurchaseMethodComingSoon","PurchaseMethodCrownRoad","PurchaseMethodCurrency","PurchaseMethodDailyReward","PurchaseMethodIAP","PurchaseMethodLoginSocial","PurchaseMethodSpecialOffer","PurchaseMethodWatchAds","ItemTab","InteractionContent","InteractionContentBundle","InteractionContentEquipped","InteractionContentPurchaseAchievement","InteractionContentPurchaseComingSoon","InteractionContentPurchaseCrownRoad","InteractionContentPurchaseCurrency","InteractionContentPurchaseDailyReward","InteractionContentPurchaseIAP","InteractionContentPurchaseLoginSocial","InteractionContentPurchaseSpecialOffer","InteractionContentPurchaseWatchAds","InteractionContentUnlock","NgcAchievementHelper","LB_UserInfo","LeaderBoardManager","NgcBoosterTypeHelper","NgcBoosterTypeInGameHelper","NgcBoosterTypeInMainMenuHelper","DailyBoosterUI","NgcBoosterItem","NgcBoosterScroll","NgcLuckyBoosterManager","NavBarA2HSInstalledNotice","NavBarA2HSNotSupportTotally_Mobile","NavBarA2HSNotSupport_Mobile","NavBarA2HSNotSupport_PC","NavBarA2HSNoticeDialog","NavBarAboutDialog","NavBarConfirmDialog","NavBarConflictDialog","NavBarDialogBase","NavBarEditNameDialog","NavBarFBBrowserDialog","NavBarFBPagePluginDialog","NavBarGDPRDialog","NavBarHowToPlayDialog","NavBarItemSelectLanguage","NavBarLeaveGameDialog","NavBarLoginSocialDialog","NavBarManager","NavBarNoticeDialog","NavBarSelectLanguageDialog","NavBarSettingsDialog","NavBarShareDialog","NavBarTipItem","NavBarUserConflictInfo","NgcA2HSManager.ts","OfflineMode","PartyRoomConfirmDialog","PartyRoomDialogBase","PartyRoomEnterCodeDialog","PartyRoomNoticeDialog","ScanQRCodeDialog","PartyAnimation","PartyInfoBuilder","PartyPlayerItem","QRCodeGenerator","NgcRealPrizeManager","RealPrizeBuyTicketDialog","RealPrizeDefines","RealPrizeDialogBase","RealPrizeEventRuleDialog","RealPrizeLeaderboard","RealPrizeLeaderboardItem","RealPrizeTabMenu","RealPrizeTicketProgressTimer","RealPrizeWinner","RealPrizeWinnerItem","NgcRedirection","NgcRedirectionDialog","TabBarManager","TabButton","BadConnectionNotification","NgcTechMessageUpdateIOS","TechMessageAndroidWebview","TechMessageFPS","TechMessageIdleDisconnect","TechMessageIdleFPSWarning","TechMessageIdleWarningDialog","TechMessageLatencyDisconnect","TechMessageLatencyWarning","TechMessageNetworkDisconnect","TechMessageSupportBrowser","TechMessages","TechMessagesDialog","TechMessagesPortraitOnly","TipManager","AdsManager_impl","NgcAdsManager","BuildConfig","CONSTANTS","CountryFlagsManager","FontsManager","LabelLocalized","LocalizationDebugPanel","LocalizedManager","SpriteLocalized","TimerLabelLocalized","MessageBuilder","MessageDefines","Protocol","NetStatsTracker","NetUtils","NetworkInterface","NgcNetClient","NgcNetClientRefactor","NgcGame","NgcGameCamera","NgcItemInfoManager","NgcLocalStorage","NgcMain","NgcSceneManager","NgcScreenBase","NgcScreenManager","NgcShopManager","NgcSoundManager","NgcTrackingManager","NgcUserInfo","NgcWorldPosInterface","ProfanityCheck","NgcVersion","GameDistributionSrv","NanoSrv","SDK","UplaySrv","Ads","Ads_impl_GameDistributionSrv","DailyReward","DailyReward_impl_NanoSrv","GameShop","GameShop_impl_NanoSrv","Inventory","Inventory_impl_NanoSrv","Leaderboard","Leaderboard_impl_NanoSrv","PartyRoom","PartyRoom_impl_GameServerSrv","Platform","Platform_impl_GameDistributionSrv","Platform_impl_WebBase","Service","ServicesMgr","Social","Social_impl_UplaySrv","Telemetry","Telemetry_impl_NullSrv","ATHomeScreen","AsbLog","AssetPreloader","AutoTest","BackgroundAdapter","BlendAnimBase","BlindLabel","BlindNode","ButtonEventInput","CameraHelper","CanvasBG","AdsSkinItem","CarSkinItem","CoinSkinItem","DailyRewardSkinItem","OwnedSkinItem","SpecialOfferSkinItem","CarProgressController","CarSkinSelecter","HaloTimeShader","Config","ConfigAutogen","Const","ControlPad","Countdown","CrossPromotionManager","CrossSection","HighlightedSection","MarqueeSection","PopupSection","SectionBase","Currency","CustomButtonControl","CustomControl","Debug","DebugLog","DebugUtils","BuyGoldDialog","ConfirmDialog","GetMoreCoinDialog","InsufficientDialog","ItemLeaderBoard","LeaderBoardDialog","CusNavBarConflictDialog","OptionDialog","RewardAnimationDialog","RewardDialog","SelectControlDialog","SelectionDialog","ShareDialog","TextboxDialog","YesNoDialog","ElinimatedMessageItem","EmoteUIPosition","EngineSound","FTUECamera","FTUEManager","FTUE_ControlUI","FXManager","FakeNames","Game","GameCamera","GameCameraTarget","Gate","GroupCollisionManager","Input","LeagueItem","LeagueManager","LeaguePage","LeagueUI","LoadingScene","Main","CarCheckPointInterface","CheckPoint","DrawMap","MapExporter","PathManager","Move","NavigatePoint","ImprovedNetClient","NetClient","messages","messagesJson","tmb","utils","ObjectRender","PhysicsManager","PlayerName","Bot","CarAnim","CarBase","CarParameters","NitroEffect","Player","PlayerController","PlayerSkin","Player_Remote","WorldPosInterface","PoolNodesManager","PositionAnimation","ProjectConfig","ReScaleObject","ResizeBG","ScaleAdapter","SceneManager","ScreenManager","GameScreen","LeaderBoardUI","PartyRoomManager","PartyRoomUI","PrizeScreen","Item","PreviewSkin","Shop","ShopScreen","StartInputHandler","StartMain","Turbo","SoundChannel","SoundID","SoundManager","SpecialOffer","SpineAssembler","StartPoint","SteeringWheel","TestGame","JumpTriggerPoint","LoopAnimation","LoopTrigger","LoopTriggerAnimation","TrackPoints","TrackPointsManager","TrackingHelper","TrackingManager","TuningData","TweenMove","TweenOpacity","BoosterUI","DebugUI","DigitCountUp","FlyingCoin","FullScreenButton","GameInforUI","GameUI","LapInfor","MapItem","NetLatencyDisplay","NitroButton","PositionBar","ScoreScreen","ThrobTween","TipBackAndForth","Transition","WaitSpinner","UserInfo","ConstConfig","Util","VersionCheck","WidgetAlign","globals","h5jssdk"]);