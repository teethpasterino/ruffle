<!DOCTYPE html>
<html>
  <head>
    <!-- external -->
    <script type="text/javascript">
    </script>

    <script type="text/javascript" src="cookieconsent.min.js"></script>

    <!--<link href="https://fonts.googleapis.com/css?family=Kavoon&subset=latin,latin-ext" rel="stylesheet" type="text/css">-->
    <link href="https://fonts.googleapis.com/css?family=Merriweather:900&subset=latin,latin-ext" rel="stylesheet" type="text/css" />
    <title>index.html</title>
    <!--
      Code and graphics copyright Orteil, 2013-2022
      Feel free to alter this code to your liking, but please do not re-host it, do not profit from it and do not present it as your own.
    -->
    <meta name="viewport" content="width=900, initial-scale=1" />
    <link rel="shortcut icon" href="img/favicon.ico" />
    <script src="base64.js"></script>
    <script src="data:@file/javascript;base64,77u/LyoNCkFsbCB0aGlzIGNvZGUgaXMgY29weXJpZ2h0IE9ydGVpbCwgMjAxMy0yMDIyLg0KCS13aXRoIHNvbWUgaGVscCwgYWR2aWNlIGFuZCBmaXhlcyBieSBOaWNob2xhcyBMYXV4LCBEZWJ1Z2JybywgT3B0aSwgdGhlIGZvbGtzIGF0IFBsYXlzYXVydXMsIGFuZCBsb3RzIG9mIHBlb3BsZSBvbiByZWRkaXQsIERpc2NvcmQsIGFuZCB0aGUgRGFzaE5ldCBmb3J1bXMNCgktYWxzbyBpbmNsdWRlcyBhIGJ1bmNoIG9mIHNuaXBwZXRzIGZvdW5kIG9uIHN0YWNrb3ZlcmZsb3cuY29tIGFuZCBvdGhlcnMNCgktd2FudCB0byBtb2QgdGhlIGdhbWU/IHNjcm9sbCBkb3duIHRvIHRoZSAiTU9ERElORyBBUEkiIHNlY3Rpb24NCkhlbGxvLCBhbmQgd2VsY29tZSB0byB0aGUgam95b3VzIG1lc3MgdGhhdCBpcyBtYWluLmpzLiBDb2RlIGNvbnRhaW5lZCBoZXJlaW4gaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgZ29vZCwgY29uc2lzdGVudCwgb3Igc2FuZS4gTW9zdCBvZiB0aGlzIGlzIHllYXJzIG9sZCBhdCB0aGlzIHBvaW50IGFuZCBoYXJrZW5zIGJhY2sgdG8gc2ltcGxlciwgY3J1ZGVyIHRpbWVzLiBJbiBwYXJ0aWN1bGFyIEkndmUgdHJpZWQgdG8gbWFpbnRhaW4gY29tcGF0aWJpbGl0eSB3aXRoIGZhaXJseSBvbGQgdmVyc2lvbnMgb2YgamF2YXNjcmlwdCwgd2hpY2ggbWVhbnMgbHV4dXJpZXMgc3VjaCBhcyAnbGV0JywgYXJyb3cgZnVuY3Rpb25zIGFuZCBzdHJpbmcgbGl0ZXJhbHMgYXJlIHVuYXZhaWxhYmxlLg0KQXMgQ29va2llIENsaWNrZXIgaXMgcmlmZSB3aXRoIHB1bnMgYW5kIHRyaWNreSB3b3JkcGxheSwgbG9jYWxpemF0aW9uIHdhcyBuZXZlciBpbnRlbmRlZCB0byBiZSBwb3NzaWJsZSAtIGJ1dCBlbmRlZCB1cCBoYXBwZW5pbmcgYW55d2F5IGFzIHBhcnQgb2YgdGhlIFN0ZWFtIHBvcnQuIEFzIGEgcmVzdWx0LCB1c2FnZSBvZiBzdHJpbmdzIGlzIHNvbWV3aGF0IHVub3J0aG9kb3ggaW4gc29tZSBwbGFjZXMuDQpIYXZlIGEgbmljZSB0cmlwLCBhbmQgc3RheSBzYWZlLg0KU3BvaWxlcnMgYWhlYWQuDQpodHRwOi8vb3J0ZWlsLmRhc2huZXQub3JnDQoqLw0KDQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCk1JU0MgSEVMUEVSIEZVTkNUSU9OUw0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCmZ1bmN0aW9uIGwod2hhdCkgew0KICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQod2hhdCk7DQp9DQpmdW5jdGlvbiBjaG9vc2UoYXJyKSB7DQogIHJldHVybiBhcnJbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyLmxlbmd0aCldOw0KfQ0KDQpmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyKSB7DQogIHJldHVybiBzdHIucmVwbGFjZSgvW1wtXFtcXVwvXHtcfVwoXClcKlwrXD9cLlxcXF5cJFx8XS9nLCAiXFwkJiIpOw0KfQ0KZnVuY3Rpb24gcmVwbGFjZUFsbChmaW5kLCByZXBsYWNlLCBzdHIpIHsNCiAgcmV0dXJuIHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoZXNjYXBlUmVnRXhwKGZpbmQpLCAiZyIpLCByZXBsYWNlKTsNCn0NCg0KZnVuY3Rpb24gY2FwKHN0cikgew0KICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpOw0KfQ0KDQpmdW5jdGlvbiByb21hbml6ZShudW0pIHsNCiAgaWYgKGlzTmFOKG51bSkpIHJldHVybiBOYU47DQogIHZhciBkaWdpdHMgPSBTdHJpbmcoK251bSkuc3BsaXQoIiIpLA0KICAgIGtleSA9IFsNCiAgICAgICIiLA0KICAgICAgIkMiLA0KICAgICAgIkNDIiwNCiAgICAgICJDQ0MiLA0KICAgICAgIkNEIiwNCiAgICAgICJEIiwNCiAgICAgICJEQyIsDQogICAgICAiRENDIiwNCiAgICAgICJEQ0NDIiwNCiAgICAgICJDTSIsDQogICAgICAiIiwNCiAgICAgICJYIiwNCiAgICAgICJYWCIsDQogICAgICAiWFhYIiwNCiAgICAgICJYTCIsDQogICAgICAiTCIsDQogICAgICAiTFgiLA0KICAgICAgIkxYWCIsDQogICAgICAiTFhYWCIsDQogICAgICAiWEMiLA0KICAgICAgIiIsDQogICAgICAiSSIsDQogICAgICAiSUkiLA0KICAgICAgIklJSSIsDQogICAgICAiSVYiLA0KICAgICAgIlYiLA0KICAgICAgIlZJIiwNCiAgICAgICJWSUkiLA0KICAgICAgIlZJSUkiLA0KICAgICAgIklYIiwNCiAgICBdLA0KICAgIHJvbWFuID0gIiIsDQogICAgaSA9IDM7DQogIHdoaWxlIChpLS0pIHJvbWFuID0gKGtleVsrZGlnaXRzLnBvcCgpICsgaSAqIDEwXSB8fCAiIikgKyByb21hbjsNCiAgcmV0dXJuIEFycmF5KCtkaWdpdHMuam9pbigiIikgKyAxKS5qb2luKCJNIikgKyByb21hbjsNCn0NCg0KLy9kaXNhYmxlIHNvdW5kcyBjb21pbmcgZnJvbSBzb3VuZGpheS5jb20gKHNvcnJ5KQ0KdmFyIHJlYWxBdWRpbyA9DQogIHR5cGVvZiBBdWRpbyAhPT0gInVuZGVmaW5lZCINCiAgICA/IEF1ZGlvDQogICAgOiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiB7fTsNCiAgICAgIH07IC8vYmFja3VwIHJlYWwgYXVkaW8NCkF1ZGlvID0gZnVuY3Rpb24gKHNyYykgew0KICBpZiAoc3JjICYmIHNyYy5pbmRleE9mKCJzb3VuZGpheSIpID4gLTEpIHsNCiAgICBHYW1lLlBvcHVwKCJTb3JyeSwgbm8gc291bmRzIGhvdGxpbmtlZCBmcm9tIHNvdW5kamF5LmNvbS4iKTsNCiAgICB0aGlzLnBsYXkgPSBmdW5jdGlvbiAoKSB7fTsNCiAgfSBlbHNlIHJldHVybiBuZXcgcmVhbEF1ZGlvKHNyYyk7DQp9Ow0KDQppZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7DQogIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKG5lZWRsZSkgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgew0KICAgICAgaWYgKHRoaXNbaV0gPT09IG5lZWRsZSkgew0KICAgICAgICByZXR1cm4gaTsNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIC0xOw0KICB9Ow0KfQ0KDQpmdW5jdGlvbiByYW5kb21GbG9vcih4KSB7DQogIGlmICh4ICUgMSA8IE1hdGgucmFuZG9tKCkpIHJldHVybiBNYXRoLmZsb29yKHgpOw0KICBlbHNlIHJldHVybiBNYXRoLmNlaWwoeCk7DQp9DQoNCmZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHsNCiAgdmFyIGNvdW50ZXIgPSBhcnJheS5sZW5ndGgsDQogICAgdGVtcCwNCiAgICBpbmRleDsNCiAgLy8gV2hpbGUgdGhlcmUgYXJlIGVsZW1lbnRzIGluIHRoZSBhcnJheQ0KICB3aGlsZSAoY291bnRlci0tKSB7DQogICAgLy8gUGljayBhIHJhbmRvbSBpbmRleA0KICAgIGluZGV4ID0gKE1hdGgucmFuZG9tKCkgKiBjb3VudGVyKSB8IDA7DQoNCiAgICAvLyBBbmQgc3dhcCB0aGUgbGFzdCBlbGVtZW50IHdpdGggaXQNCiAgICB0ZW1wID0gYXJyYXlbY291bnRlcl07DQogICAgYXJyYXlbY291bnRlcl0gPSBhcnJheVtpbmRleF07DQogICAgYXJyYXlbaW5kZXhdID0gdGVtcDsNCiAgfQ0KICByZXR1cm4gYXJyYXk7DQp9DQoNCkVsZW1lbnQucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uICgpIHsNCiAgdmFyIGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogIHZhciBzID0gR2FtZS5zY2FsZTsNCiAgYm91bmRzLnggLz0gczsNCiAgYm91bmRzLnkgLz0gczsNCiAgYm91bmRzLndpZHRoIC89IHM7DQogIGJvdW5kcy5oZWlnaHQgLz0gczsNCiAgYm91bmRzLnRvcCAvPSBzOw0KICBib3VuZHMuYm90dG9tIC89IHM7DQogIGJvdW5kcy5sZWZ0IC89IHM7DQogIGJvdW5kcy5yaWdodCAvPSBzOw0KICByZXR1cm4gYm91bmRzOw0KfTsNCg0KdmFyIExvYWRTY3JpcHQgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgZXJyb3IpIHsNCiAgdmFyIGpzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQogIGpzLnNldEF0dHJpYnV0ZSgidHlwZSIsICJ0ZXh0L2phdmFzY3JpcHQiKTsNCiAgaWYgKGpzLnJlYWR5U3RhdGUpIHsNCiAgICBqcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoanMucmVhZHlTdGF0ZSA9PT0gImxvYWRlZCIgfHwganMucmVhZHlTdGF0ZSA9PT0gImNvbXBsZXRlIikgew0KICAgICAgICBqcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsOw0KICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7DQogICAgICB9DQogICAgfTsNCiAgfSBlbHNlIGlmIChjYWxsYmFjaykgew0KICAgIGpzLm9ubG9hZCA9IGNhbGxiYWNrOw0KICB9DQogIGlmIChlcnJvcikganMub25lcnJvciA9IGVycm9yOw0KDQogIGpzLnNldEF0dHJpYnV0ZSgic3JjIiwgdXJsKTsNCiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChqcyk7DQp9Ow0KDQpsb2NhbFN0b3JhZ2VHZXQgPSBmdW5jdGlvbiAoa2V5KSB7DQogIHZhciBsb2NhbCA9IDA7DQogIHRyeSB7DQogICAgbG9jYWwgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTsNCiAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fQ0KICByZXR1cm4gbG9jYWw7DQp9Ow0KbG9jYWxTdG9yYWdlU2V0ID0gZnVuY3Rpb24gKGtleSwgc3RyKSB7DQogIHZhciBsb2NhbCA9IDA7DQogIHRyeSB7DQogICAgbG9jYWwgPSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBzdHIpOw0KICB9IGNhdGNoIChleGNlcHRpb24pIHt9DQogIHJldHVybiBsb2NhbDsNCn07DQoNCnZhciBhamF4ID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2spIHsNCiAgdmFyIGh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQogIGlmICghaHR0cFJlcXVlc3QpIHsNCiAgICByZXR1cm4gZmFsc2U7DQogIH0NCiAgaHR0cFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgew0KICAgIHRyeSB7DQogICAgICBpZiAoDQogICAgICAgIGh0dHBSZXF1ZXN0LnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUgJiYNCiAgICAgICAgaHR0cFJlcXVlc3Quc3RhdHVzID09PSAyMDANCiAgICAgICkgew0KICAgICAgICBjYWxsYmFjayhodHRwUmVxdWVzdC5yZXNwb25zZVRleHQpOw0KICAgICAgfQ0KICAgIH0gY2F0Y2ggKGUpIHt9DQogIH07DQogIC8vaHR0cFJlcXVlc3Qub25lcnJvcj1mdW5jdGlvbihlKXtjb25zb2xlLmxvZygnRVJST1InLGUpO30NCiAgaWYgKHVybC5pbmRleE9mKCI/IikgPT0gLTEpIHVybCArPSAiPyI7DQogIGVsc2UgdXJsICs9ICImIjsNCiAgdXJsICs9ICJub2NhY2hlPSIgKyBEYXRlLm5vdygpOw0KICBodHRwUmVxdWVzdC5vcGVuKCJHRVQiLCB1cmwpOw0KICBodHRwUmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAidGV4dC9wbGFpbiIpOw0KICBodHRwUmVxdWVzdC5vdmVycmlkZU1pbWVUeXBlKCJ0ZXh0L3BsYWluIik7DQogIGh0dHBSZXF1ZXN0LnNlbmQoKTsNCiAgcmV0dXJuIHRydWU7DQp9Ow0KDQpmdW5jdGlvbiB0b0ZpeGVkKHgpIHsNCiAgaWYgKE1hdGguYWJzKHgpIDwgMS4wKSB7DQogICAgdmFyIGUgPSBwYXJzZUludCh4LnRvU3RyaW5nKCkuc3BsaXQoImUtIilbMV0pOw0KICAgIGlmIChlKSB7DQogICAgICB4ICo9IE1hdGgucG93KDEwLCBlIC0gMSk7DQogICAgICB4ID0gIjAuIiArIG5ldyBBcnJheShlKS5qb2luKCIwIikgKyB4LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIpOw0KICAgIH0NCiAgfSBlbHNlIHsNCiAgICB2YXIgZSA9IHBhcnNlSW50KHgudG9TdHJpbmcoKS5zcGxpdCgiKyIpWzFdKTsNCiAgICBpZiAoZSA+IDIwKSB7DQogICAgICBlIC09IDIwOw0KICAgICAgeCAvPSBNYXRoLnBvdygxMCwgZSk7DQogICAgICB4ICs9IG5ldyBBcnJheShlICsgMSkuam9pbigiMCIpOw0KICAgIH0NCiAgfQ0KICByZXR1cm4geDsNCn0NCg0KLy9CZWF1dGlmeSBhbmQgbnVtYmVyLWZvcm1hdHRpbmcgYWRhcHRlZCBmcm9tIHRoZSBGcm96ZW4gQ29va2llcyBhZGQtb24gKGh0dHA6Ly9jb29raWVjbGlja2VyLndpa2lhLmNvbS93aWtpL0Zyb3plbl9Db29raWVzXyUyOEphdmFTY3JpcHRfQWRkLW9uJTI5KQ0KZnVuY3Rpb24gZm9ybWF0RXZlcnlUaGlyZFBvd2VyKG5vdGF0aW9ucykgew0KICByZXR1cm4gZnVuY3Rpb24gKHZhbCkgew0KICAgIHZhciBiYXNlID0gMCwNCiAgICAgIG5vdGF0aW9uVmFsdWUgPSAiIjsNCiAgICBpZiAoIWlzRmluaXRlKHZhbCkpIHJldHVybiAiSW5maW5pdHkiOw0KICAgIGlmICh2YWwgPj0gMTAwMDAwMCkgew0KICAgICAgdmFsIC89IDEwMDA7DQogICAgICB3aGlsZSAoTWF0aC5yb3VuZCh2YWwpID49IDEwMDApIHsNCiAgICAgICAgdmFsIC89IDEwMDA7DQogICAgICAgIGJhc2UrKzsNCiAgICAgIH0NCiAgICAgIGlmIChiYXNlID49IG5vdGF0aW9ucy5sZW5ndGgpIHsNCiAgICAgICAgcmV0dXJuICJJbmZpbml0eSI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBub3RhdGlvblZhbHVlID0gbm90YXRpb25zW2Jhc2VdOw0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWwgKiAxMDAwKSAvIDEwMDAgKyBub3RhdGlvblZhbHVlOw0KICB9Ow0KfQ0KDQpmdW5jdGlvbiByYXdGb3JtYXR0ZXIodmFsKSB7DQogIHJldHVybiBNYXRoLnJvdW5kKHZhbCAqIDEwMDApIC8gMTAwMDsNCn0NCg0KdmFyIGZvcm1hdExvbmcgPSBbDQogICIgdGhvdXNhbmQiLA0KICAiIG1pbGxpb24iLA0KICAiIGJpbGxpb24iLA0KICAiIHRyaWxsaW9uIiwNCiAgIiBxdWFkcmlsbGlvbiIsDQogICIgcXVpbnRpbGxpb24iLA0KICAiIHNleHRpbGxpb24iLA0KICAiIHNlcHRpbGxpb24iLA0KICAiIG9jdGlsbGlvbiIsDQogICIgbm9uaWxsaW9uIiwNCl07DQp2YXIgcHJlZml4ZXMgPSBbDQogICIiLA0KICAidW4iLA0KICAiZHVvIiwNCiAgInRyZSIsDQogICJxdWF0dHVvciIsDQogICJxdWluIiwNCiAgInNleCIsDQogICJzZXB0ZW4iLA0KICAib2N0byIsDQogICJub3ZlbSIsDQpdOw0KdmFyIHN1ZmZpeGVzID0gWw0KICAiZGVjaWxsaW9uIiwNCiAgInZpZ2ludGlsbGlvbiIsDQogICJ0cmlnaW50aWxsaW9uIiwNCiAgInF1YWRyYWdpbnRpbGxpb24iLA0KICAicXVpbnF1YWdpbnRpbGxpb24iLA0KICAic2V4YWdpbnRpbGxpb24iLA0KICAic2VwdHVhZ2ludGlsbGlvbiIsDQogICJvY3RvZ2ludGlsbGlvbiIsDQogICJub25hZ2ludGlsbGlvbiIsDQpdOw0KZm9yICh2YXIgaSBpbiBzdWZmaXhlcykgew0KICBmb3IgKHZhciBpaSBpbiBwcmVmaXhlcykgew0KICAgIGZvcm1hdExvbmcucHVzaCgiICIgKyBwcmVmaXhlc1tpaV0gKyBzdWZmaXhlc1tpXSk7DQogIH0NCn0NCg0KdmFyIGZvcm1hdFNob3J0ID0gWyJrIiwgIk0iLCAiQiIsICJUIiwgIlFhIiwgIlFpIiwgIlN4IiwgIlNwIiwgIk9jIiwgIk5vIl07DQp2YXIgcHJlZml4ZXMgPSBbIiIsICJVbiIsICJEbyIsICJUciIsICJRYSIsICJRaSIsICJTeCIsICJTcCIsICJPYyIsICJObyJdOw0KdmFyIHN1ZmZpeGVzID0gWyJEIiwgIlYiLCAiVCIsICJRYSIsICJRaSIsICJTeCIsICJTcCIsICJPIiwgIk4iXTsNCmZvciAodmFyIGkgaW4gc3VmZml4ZXMpIHsNCiAgZm9yICh2YXIgaWkgaW4gcHJlZml4ZXMpIHsNCiAgICBmb3JtYXRTaG9ydC5wdXNoKCIgIiArIHByZWZpeGVzW2lpXSArIHN1ZmZpeGVzW2ldKTsNCiAgfQ0KfQ0KZm9ybWF0U2hvcnRbMTBdID0gIkRjIjsNCg0KdmFyIG51bWJlckZvcm1hdHRlcnMgPSBbDQogIGZvcm1hdEV2ZXJ5VGhpcmRQb3dlcihmb3JtYXRTaG9ydCksDQogIGZvcm1hdEV2ZXJ5VGhpcmRQb3dlcihmb3JtYXRMb25nKSwNCiAgcmF3Rm9ybWF0dGVyLA0KXTsNCnZhciBCZWF1dGlmeSA9IGZ1bmN0aW9uICh2YWwsIGZsb2F0cykgew0KICB2YXIgbmVnYXRpdmUgPSB2YWwgPCAwOw0KICB2YXIgZGVjaW1hbCA9ICIiOw0KICB2YXIgZml4ZWQgPSB2YWwudG9GaXhlZChmbG9hdHMpOw0KICBpZiAoZmxvYXRzID4gMCAmJiBNYXRoLmFicyh2YWwpIDwgMTAwMCAmJiBNYXRoLmZsb29yKGZpeGVkKSAhPSBmaXhlZCkNCiAgICBkZWNpbWFsID0gIi4iICsgZml4ZWQudG9TdHJpbmcoKS5zcGxpdCgiLiIpWzFdOw0KICB2YWwgPSBNYXRoLmZsb29yKE1hdGguYWJzKHZhbCkpOw0KICBpZiAoZmxvYXRzID4gMCAmJiBmaXhlZCA9PSB2YWwgKyAxKSB2YWwrKzsNCiAgLy92YXIgZm9ybWF0PSFFTj8yOkdhbWUucHJlZnMuZm9ybWF0PzI6MTsNCiAgdmFyIGZvcm1hdCA9IEdhbWUucHJlZnMuZm9ybWF0ID8gMiA6IDE7DQogIHZhciBmb3JtYXR0ZXIgPSBudW1iZXJGb3JtYXR0ZXJzW2Zvcm1hdF07DQogIHZhciBvdXRwdXQgPQ0KICAgIHZhbC50b1N0cmluZygpLmluZGV4T2YoImUrIikgIT0gLTEgJiYgZm9ybWF0ID09IDINCiAgICAgID8gdmFsLnRvUHJlY2lzaW9uKDMpLnRvU3RyaW5nKCkNCiAgICAgIDogZm9ybWF0dGVyKHZhbCkNCiAgICAgICAgICAudG9TdHJpbmcoKQ0KICAgICAgICAgIC5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCAiLCIpOw0KICAvL3ZhciBvdXRwdXQ9Zm9ybWF0dGVyKHZhbCkudG9TdHJpbmcoKS5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCcsJyk7DQogIGlmIChvdXRwdXQgPT0gIjAiKSBuZWdhdGl2ZSA9IGZhbHNlOw0KICByZXR1cm4gbmVnYXRpdmUgPyAiLSIgKyBvdXRwdXQgOiBvdXRwdXQgKyBkZWNpbWFsOw0KfTsNCnZhciBzaG9ydGVuTnVtYmVyID0gZnVuY3Rpb24gKHZhbCkgew0KICAvL2lmIG5vIHNjaWVudGlmaWMgbm90YXRpb24sIHJldHVybiBhcyBpcywgZWxzZSA6DQogIC8va2VlcCBvbmx5IHRoZSA1IGZpcnN0IGRpZ2l0cyAocGx1cyBkb3QpLCByb3VuZCB0aGUgcmVzdA0KICAvL21heSBvciBtYXkgbm90IHdvcmsgcHJvcGVybHkNCiAgaWYgKHZhbCA+PSAxMDAwMDAwICYmIGlzRmluaXRlKHZhbCkpIHsNCiAgICB2YXIgbnVtID0gdmFsLnRvU3RyaW5nKCk7DQogICAgdmFyIGluZCA9IG51bS5pbmRleE9mKCJlKyIpOw0KICAgIGlmIChpbmQgPT0gLTEpIHJldHVybiB2YWw7DQogICAgdmFyIHN0ciA9ICIiOw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kOyBpKyspIHsNCiAgICAgIHN0ciArPSBpIDwgNiA/IG51bVtpXSA6ICIwIjsNCiAgICB9DQogICAgc3RyICs9ICJlKyI7DQogICAgc3RyICs9IG51bS5zcGxpdCgiZSsiKVsxXTsNCiAgICByZXR1cm4gcGFyc2VGbG9hdChzdHIpOw0KICB9DQogIHJldHVybiB2YWw7DQp9Ow0KDQp2YXIgU2ltcGxlQmVhdXRpZnkgPSBmdW5jdGlvbiAodmFsKSB7DQogIHZhciBzdHIgPSB2YWwudG9TdHJpbmcoKTsNCiAgdmFyIHN0cjIgPSAiIjsNCiAgZm9yICh2YXIgaSBpbiBzdHIpIHsgLy9hZGQgY29tbWFzDQogICAgaWYgKChzdHIubGVuZ3RoIC0gaSkgJSAzID09IDAgJiYgaSA+IDApIHN0cjIgKz0gIiwiOw0KICAgIHN0cjIgKz0gc3RyW2ldOw0KICB9DQogIHJldHVybiBzdHIyOw0KfTsNCg0KdmFyIGJlYXV0aWZ5SW5UZXh0RmlsdGVyID0gLygoW1xkXStbLF0qKSspL2c7IC8vbmV3IHJlZ2V4DQpmdW5jdGlvbiBCZWF1dGlmeUluVGV4dEZ1bmN0aW9uKHN0cikgew0KICByZXR1cm4gQmVhdXRpZnkocGFyc2VJbnQoc3RyLnJlcGxhY2UoLywvZywgIiIpLCAxMCkpOw0KfQ0KZnVuY3Rpb24gQmVhdXRpZnlJblRleHQoc3RyKSB7DQogIHJldHVybiBzdHIucmVwbGFjZShiZWF1dGlmeUluVGV4dEZpbHRlciwgQmVhdXRpZnlJblRleHRGdW5jdGlvbik7DQp9IC8vcmVmb3JtYXQgZXZlcnkgbnVtYmVyIGluc2lkZSBhIHN0cmluZw0KZnVuY3Rpb24gQmVhdXRpZnlBbGwoKSB7DQogIC8vcnVuIHRocm91Z2ggdXBncmFkZXMgYW5kIGFjaGlldmVtZW50cyB0byByZWZvcm1hdCB0aGUgbnVtYmVycw0KICB2YXIgZnVuYyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgd2hhdC5kZGVzYyA9IEJlYXV0aWZ5SW5UZXh0KHdoYXQuZGRlc2MpOw0KICB9Ow0KICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNCeUlkKSB7DQogICAgR2FtZS5VcGdyYWRlc0J5SWRbaV0uZGRlc2MgPSBCZWF1dGlmeUluVGV4dChHYW1lLlVwZ3JhZGVzQnlJZFtpXS5kZGVzYyk7DQogIH0NCiAgZm9yICh2YXIgaSBpbiBHYW1lLkFjaGlldmVtZW50c0J5SWQpIHsNCiAgICBHYW1lLkFjaGlldmVtZW50c0J5SWRbaV0uZGRlc2MgPSBCZWF1dGlmeUluVGV4dCgNCiAgICAgIEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFtpXS5kZGVzYw0KICAgICk7DQogIH0NCn0NCg0KLy89PT0gTE9DQUxJWkFUSU9OID09PQ0KDQp2YXIgbG9jU3RyaW5ncyA9IHt9Ow0KdmFyIGxvY1N0cmluZ3NGYWxsYmFjayA9IHt9Ow0KdmFyIGxvY0lkID0gIk5PTkUiOw0KdmFyIEVOID0gdHJ1ZTsNCnZhciBsb2NOYW1lID0gIm5vbmUiOw0KdmFyIGxvY1BhdGNoZXMgPSBbXTsNCnZhciBsb2NQbHVyID0gIm5wbHVyYWxzPTI7cGx1cmFsPShuIT0xKTsiOyAvL3NlZSBodHRwOi8vZG9jcy50cmFuc2xhdGVob3VzZS5vcmcvcHJvamVjdHMvbG9jYWxpemF0aW9uLWd1aWRlL2VuL2xhdGVzdC9sMTBuL3BsdXJhbGZvcm1zLmh0bWwNCnZhciBsb2NQbHVyRmFsbGJhY2sgPSBsb2NQbHVyOw0KLy9ub3RlIDogcGx1cmFsIGluZGV4IHdpbGwgYmUgZG93bmdyYWRlZCB0byB0aGUgbGFzdCBtYXRjaGluZywgaWUuIGluIHRoaXMgY2FzZSwgaWYgd2UgZ2V0ICIwIiBidXQgZG9uJ3QgaGF2ZSBhIDNyZCBvcHRpb24sIHVzZSB0aGUgMm5kIG9wdGlvbiAob3IgMXN0LCBsYWNraW5nIHRoYXQgdG9vKQ0KdmFyIGxvY1N0cmluZ3NCeVBhcnQgPSB7fTsNCnZhciBGaW5kTG9jU3RyaW5nQnlQYXJ0ID0gZnVuY3Rpb24gKG1hdGNoKSB7DQogIHJldHVybiBsb2NTdHJpbmdzQnlQYXJ0W21hdGNoXSB8fCB1bmRlZmluZWQ7DQogIC8qDQoJLy9ub3RlOiBzbG93LCBvbmx5IGRvIHRoaXMgb24gaW5pdA0KCWZvciAodmFyIGkgaW4gbG9jU3RyaW5ncyl7DQoJCXZhciBiaXQ9aS5zcGxpdCgnXScpOw0KCQlpZiAoYml0WzBdLnN1YnN0cmluZygxKT09bWF0Y2gpIHJldHVybiBpOw0KCX0NCglyZXR1cm4gdW5kZWZpbmVkOw0KCSovDQp9Ow0KDQp2YXIgTGFuZ3MgPSB7DQogIEVOOiB7DQogICAgZmlsZTogIkVOIiwNCiAgICBuYW1lRU46ICJFbmdsaXNoIiwNCiAgICBuYW1lOiAiRW5nbGlzaCIsDQogICAgY2hhbmdlTGFuZ3VhZ2U6ICJMYW5ndWFnZSIsDQogICAgaWNvbjogMCwNCiAgICB3OiAxLA0KICAgIGlzRU46IHRydWUsDQogIH0sDQogIEZSOiB7DQogICAgZmlsZTogIkZSIiwNCiAgICBuYW1lRU46ICJGcmVuY2giLA0KICAgIG5hbWU6ICJGcmFuJmNjZWRpbDthaXMiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiTGFuZ3VlIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIERFOiB7DQogICAgZmlsZTogIkRFIiwNCiAgICBuYW1lRU46ICJHZXJtYW4iLA0KICAgIG5hbWU6ICJEZXV0c2NoIiwNCiAgICBjaGFuZ2VMYW5ndWFnZTogIlNwcmFjaGUiLA0KICAgIGljb246IDAsDQogICAgdzogMSwNCiAgfSwNCiAgTkw6IHsNCiAgICBmaWxlOiAiTkwiLA0KICAgIG5hbWVFTjogIkR1dGNoIiwNCiAgICBuYW1lOiAiTmVkZXJsYW5kcyIsDQogICAgY2hhbmdlTGFuZ3VhZ2U6ICJUYWFsIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIENTOiB7DQogICAgZmlsZTogIkNTIiwNCiAgICBuYW1lRU46ICJDemVjaCIsDQogICAgbmFtZTogIiYjeDEwQztlJiN4MTYxO3RpbmEiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiSmF6eWsiLA0KICAgIGljb246IDAsDQogICAgdzogMSwNCiAgfSwNCiAgUEw6IHsNCiAgICBmaWxlOiAiUEwiLA0KICAgIG5hbWVFTjogIlBvbGlzaCIsDQogICAgbmFtZTogIlBvbHNraSIsDQogICAgY2hhbmdlTGFuZ3VhZ2U6ICJKJiMyODE7enlrIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIElUOiB7DQogICAgZmlsZTogIklUIiwNCiAgICBuYW1lRU46ICJJdGFsaWFuIiwNCiAgICBuYW1lOiAiSXRhbGlhbm8iLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiTGluZ3VhIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIEVTOiB7DQogICAgZmlsZTogIkVTIiwNCiAgICBuYW1lRU46ICJTcGFuaXNoIiwNCiAgICBuYW1lOiAiRXNwYSYjeEYxO29sIiwNCiAgICBjaGFuZ2VMYW5ndWFnZTogIklkaW9tYSIsDQogICAgaWNvbjogMCwNCiAgICB3OiAxLA0KICB9LA0KICAiUFQtQlIiOiB7DQogICAgZmlsZTogIlBULUJSIiwNCiAgICBuYW1lRU46ICJQb3J0dWd1ZXNlIiwNCiAgICBuYW1lOiAiUG9ydHVndSYjeEVBO3MiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiSWRpb21hIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIEpBOiB7DQogICAgZmlsZTogIkpBIiwNCiAgICBuYW1lRU46ICJKYXBhbmVzZSIsDQogICAgbmFtZTogIiYjeDY1RTU7JiN4NjcyQzsmI3g4QTlFOyIsDQogICAgY2hhbmdlTGFuZ3VhZ2U6ICImIzM1MzI4OyYjMzU0ODY7IiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEuNSwNCiAgfSwNCiAgIlpILUNOIjogew0KICAgIGZpbGU6ICJaSC1DTiIsDQogICAgbmFtZUVOOiAiQ2hpbmVzZSIsDQogICAgbmFtZTogIiYjeDRFMkQ7JiN4NjU4NzsiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiJiMzNTgyMTsmIzM1MzI4OyIsDQogICAgaWNvbjogMCwNCiAgICB3OiAxLjUsDQogIH0sDQogIEtPOiB7DQogICAgZmlsZTogIktPIiwNCiAgICBuYW1lRU46ICJLb3JlYW4iLA0KICAgIG5hbWU6ICImI3hENTVDOyYjeEFFMDA7IiwNCiAgICBjaGFuZ2VMYW5ndWFnZTogIiYjeEM1Qjg7JiN4QzVCNDsiLA0KICAgIGljb246IDAsDQogICAgdzogMS41LA0KICB9LA0KICBSVTogew0KICAgIGZpbGU6ICJSVSIsDQogICAgbmFtZUVOOiAiUnVzc2lhbiIsDQogICAgbmFtZTogIiYjeDQyMDsmI3g0NDM7JiN4NDQxOyYjeDQ0MTsmI3g0M0E7JiN4NDM4OyYjeDQzOTsiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiJiMxMDcxOyYjMTA3OTsmIzEwOTk7JiMxMDgyOyIsDQogICAgaWNvbjogMCwNCiAgICB3OiAxLjIsDQogIH0sDQp9Ow0KDQovL25vdGUgOiBiYXNlbGluZSBzaG91bGQgYmUgdGhlIG9yaWdpbmFsIGVuZ2xpc2ggdGV4dA0KLy9pbiBzZXZlcmFsIGluc3RhbmNlcywgdGhlIGVuZ2xpc2ggdGV4dCB3aWxsIGJlIHF1aXRlIGRpZmZlcmVudCBmcm9tIHRoZSBvdGhlciBsYW5ndWFnZXMsIGFzIHRoaXMgZ2FtZSB3YXMgaW5pdGlhbGx5IG5ldmVyIG1lYW50IHRvIGJlIHRyYW5zbGF0ZWQgYW5kIHRoZSB0cmFuc2xhdGlvbiBwcm9jZXNzIGRvZXNuJ3QgYWx3YXlzIHBsYXkgd2VsbCB3aXRoIGNvbXBsZXggc2VudGVuY2Ugc3RydWN0dXJlcw0KLyp1c2U6DQoJbG9jKCdQbGFpbiB0ZXh0JykNCglsb2MoJ1RleHQgd2hlcmUgJTEgaXMgYSBwYXJhbWV0ZXInLCdzb21ldGhpbmcnKQ0KCWxvYygnVGV4dCB3aGVyZSAlMSBhbmQgJTIgYXJlIHBhcmFtZXRlcnMnLFsnYSB0aGluZycsJ2Fub3RoZXIgdGhpbmcnXSkNCglsb2MoJ1RoZXJlIGlzICUxIGFwcGxlJyw1KQ0KCQkgLi4uaWYgdGhlIGxvY2FsaXplZCBzdHJpbmcgaXMgYW4gYXJyYXksIHRoaXMgaXMgcGFyc2VkIGFzIGEgcGx1cmFsaXplZCBzdHJpbmc7IGZvciBpbnN0YW5jZSwgdGhlIGxvY2FsaXplZCBzdHJpbmcgY291bGQgYmUNCgkJIlRoZXJlIGlzICUxIGFwcGxlIjpbDQoJCQkiVGhlcmUgaXMgJTEgYXBwbGUiLA0KCQkJIlRoZXJlIGFyZSAlMSBhcHBsZXMiDQoJCV0NCglsb2MoJ1RoZXJlIGlzICUxIGFwcGxlIGFuZCBhbHNvLCAlMiEnLFs1LCdoZWxsbyddKQ0KCWxvYygnVGhpcyBzdHJpbmcgaXMgbG9jYWxpemVkLicsMCwnVGhpcyBpcyB0aGUgc3RyaW5nIGRpc3BsYXllZCBpbiB0aGUgZW5nbGlzaCB2ZXJzaW9uLicpDQoJbG9jKCdZb3UgaGF2ZSAlMS4nLCc8Yj4nK2xvYygnJTEgYXBwbGUnLExCZWF1dGlmeShhbW91bnQpKSsnPC9iPicpDQoJCS4uLnlvdSBtYXkgbmVzdCBsb2NhbGl6ZWQgc3RyaW5ncywgYW5kIHVzZSBMQmVhdXRpZnkoKSB0byBwYWNrIEJlYXV0aWZpZWQgdmFsdWVzDQoqLw0KdmFyIGxvY0JsaW5rID0gZmFsc2U7DQp2YXIgbG9jYWxpemF0aW9uTm90Rm91bmQgPSBbXTsNCnZhciBsb2MgPSBmdW5jdGlvbiAoaWQsIHBhcmFtcywgYmFzZWxpbmUpIHsNCiAgdmFyIGZhbGxiYWNrID0gZmFsc2U7DQogIHZhciBmb3VuZCA9IGxvY1N0cmluZ3NbaWRdOw0KICBpZiAoIWZvdW5kKSB7DQogICAgZm91bmQgPSBsb2NTdHJpbmdzRmFsbGJhY2tbaWRdOw0KICAgIGZhbGxiYWNrID0gdHJ1ZTsNCiAgfQ0KICBpZiAoZm91bmQpIHsNCiAgICB2YXIgc3RyID0gIiI7DQogICAgc3RyID0gcGFyc2VMb2MoZm91bmQsIHBhcmFtcyk7DQogICAgLy9yZXR1cm4gc3RyOw0KICAgIGlmIChzdHIuY29uc3RydWN0b3IgPT09IEFycmF5KSByZXR1cm4gc3RyOw0KICAgIGlmIChsb2NCbGluayAmJiAhZmFsbGJhY2spDQogICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPSJibGlua2luZyI+JyArIHN0ciArICI8L3NwYW4+IjsgLy93aWxsIG1ha2UgZXZlcnkgbG9jYWxpemVkIHRleHQgYmxpbmsgb24gc2NyZWVuLCBtYWtpbmcgb21pc3Npb25zIG9idmlvdXM7IHdpbGwgbm90IHdvcmsgZm9yIGVsZW1lbnRzIGZpbGxlZCB3aXRoIHRleHRDb250ZW50DQogIH0NCg0KICAvL2lmICgoZmFsbGJhY2sgfHwgIWZvdW5kKSAmJiBsb2NhbGl6YXRpb25Ob3RGb3VuZC5sZW5ndGg8MjAgJiYgbG9jYWxpemF0aW9uTm90Rm91bmQuaW5kZXhPZihpZCk9PS0xKXtsb2NhbGl6YXRpb25Ob3RGb3VuZC5wdXNoKGlkKTtjb25zb2xlLnRyYWNlKCdsb2NhbGl6YXRpb24gc3RyaW5nIG5vdCBmb3VuZDogJyxpZCk7fQ0KICBpZiAoZm91bmQpIHJldHVybiBzdHI7DQogIHJldHVybiBiYXNlbGluZSB8fCBpZDsNCn07DQoNCnZhciBwYXJzZUxvYyA9IGZ1bmN0aW9uIChzdHIsIHBhcmFtcykgew0KICAvKg0KCQlwYXJzZXMgbG9jYWxpemF0aW9uIHN0cmluZ3MNCgkJLXRoZXJlIGNhbiBvbmx5IGJlIDEgcGx1cmFsIHBlciBzdHJpbmcgYW5kIGl0IE1VU1QgYmUgYXQgaW5kZXggJTENCgkJLWEgcGx1cmFsaXplZCBzdHJpbmcgaXMgZGV0ZWN0ZWQgaWYgd2UgaGF2ZSBhdCBsZWFzdCAxIHBhcmFtIGFuZCB0aGUgbWF0Y2hpbmcgbG9jYWxpemVkIHN0cmluZyBpcyBhbiBhcnJheQ0KCSovDQogIGlmICh0eXBlb2YgcGFyYW1zID09PSAidW5kZWZpbmVkIikgcGFyYW1zID0gW107DQogIGVsc2UgaWYgKHBhcmFtcy5jb25zdHJ1Y3RvciAhPT0gQXJyYXkpIHBhcmFtcyA9IFtwYXJhbXNdOw0KICBpZiAoIXN0cikgcmV0dXJuICIiOw0KICAvL2lmIChzdHIuY29uc3RydWN0b3I9PT1BcnJheSkgcmV0dXJuIHN0cjsNCiAgLy9pZiAodHlwZW9mIHN0cj09PSdmdW5jdGlvbicpIHJldHVybiBzdHIocGFyYW1zKTsNCiAgLy9zdHI9c3RyLnJlcGxhY2UoL1tcdFxuXHJdL2dtLCcnKTsNCg0KICBpZiAocGFyYW1zLmxlbmd0aCA9PSAwKSByZXR1cm4gc3RyOw0KDQogIGlmIChzdHIuY29uc3RydWN0b3IgPT09IEFycmF5KSB7DQogICAgaWYgKHR5cGVvZiBwYXJhbXNbMF0gPT09ICJvYmplY3QiKSB7DQogICAgICAvL2FuIG9iamVjdCBjb250YWluaW5nIGEgYmVhdXRpZmllZCBudW1iZXINCiAgICAgIHZhciBwbHVySW5kZXggPSBsb2NQbHVyKHBhcmFtc1swXS5uKTsNCiAgICAgIHBsdXJJbmRleCA9IE1hdGgubWluKHN0ci5sZW5ndGggLSAxLCBwbHVySW5kZXgpOw0KICAgICAgc3RyID0gc3RyW3BsdXJJbmRleF07DQogICAgICBzdHIgPSByZXBsYWNlQWxsKCIlMSIsIHBhcmFtc1swXS5iLCBzdHIpOw0KICAgIH0gZWxzZSB7DQogICAgICB2YXIgcGx1ckluZGV4ID0gbG9jUGx1cihwYXJhbXNbMF0pOw0KICAgICAgcGx1ckluZGV4ID0gTWF0aC5taW4oc3RyLmxlbmd0aCAtIDEsIHBsdXJJbmRleCk7DQogICAgICBzdHIgPSBzdHJbcGx1ckluZGV4XTsNCiAgICAgIHN0ciA9IHJlcGxhY2VBbGwoIiUxIiwgcGFyYW1zWzBdLCBzdHIpOw0KICAgIH0NCiAgfQ0KDQogIHZhciBvdXQgPSAiIjsNCiAgdmFyIGxlbiA9IHN0ci5sZW5ndGg7DQogIHZhciBpblBlcmNlbnQgPSBmYWxzZTsNCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgew0KICAgIHZhciBpdCA9IHN0cltpXTsNCiAgICBpZiAoaW5QZXJjZW50KSB7DQogICAgICBpblBlcmNlbnQgPSBmYWxzZTsNCiAgICAgIGlmICghaXNOYU4oaXQpICYmIHBhcmFtcy5sZW5ndGggPj0gcGFyc2VJbnQoaXQpIC0gMSkNCiAgICAgICAgb3V0ICs9IHBhcmFtc1twYXJzZUludChpdCkgLSAxXTsNCiAgICAgIGVsc2Ugb3V0ICs9ICIlIiArIGl0Ow0KICAgIH0gZWxzZSBpZiAoaXQgPT0gIiUiKSBpblBlcmNlbnQgPSB0cnVlOw0KICAgIGVsc2Ugb3V0ICs9IGl0Ow0KICB9DQogIHJldHVybiBvdXQ7DQp9Ow0KDQp2YXIgTEJlYXV0aWZ5ID0gZnVuY3Rpb24gKHZhbCwgZmxvYXRzKSB7DQogIC8vcmV0dXJucyBhbiBvYmplY3QgaW4gdGhlIGZvcm0ge246b3JpZ2luYWwgdmFsdWUgZmxvb3JlZCxiOmJlYXV0aWZpZWQgdmFsdWUgYXMgc3RyaW5nfSBmb3IgbG9jYWxpemF0aW9uIHB1cnBvc2VzDQogIHJldHVybiB7IG46IE1hdGguZmxvb3IoTWF0aC5hYnModmFsKSksIGI6IEJlYXV0aWZ5KHZhbCwgZmxvYXRzKSB9Ow0KfTsNCg0KdmFyIE1vZExhbmd1YWdlID0gZnVuY3Rpb24gKGlkLCBqc29uKSB7DQogIGlmIChpZCA9PSAiKiIpIGlkID0gbG9jSWQ7DQogIGlmIChpZCAhPSBsb2NJZCB8fCAhTGFuZ3NbaWRdKSByZXR1cm4gZmFsc2U7DQogIGlmIChqc29uWyJSRVBMQUNFIEFMTCJdKSB7DQogICAgdmFyIHJlcCA9IGZ1bmN0aW9uIChzdHIsIGZyb20sIHRvKSB7DQogICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKGZyb20sICJpZyIpOw0KICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4LCBmdW5jdGlvbiAobWF0Y2gpIHsNCiAgICAgICAgcmV0dXJuIG1hdGNoWzBdID09IG1hdGNoWzBdLnRvTG93ZXJDYXNlKCkgPyB0byA6IGNhcCh0byk7DQogICAgICB9KTsNCiAgICB9Ow0KICAgIGZvciAodmFyIGkgaW4ganNvblsiUkVQTEFDRSBBTEwiXSkgew0KICAgICAgdmFyIHRvID0ganNvblsiUkVQTEFDRSBBTEwiXVtpXTsNCiAgICAgIGZvciAodmFyIGlpIGluIGxvY1N0cmluZ3MpIHsNCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobG9jU3RyaW5nc1tpaV0pKSB7DQogICAgICAgICAgZm9yICh2YXIgaWlpIGluIGxvY1N0cmluZ3NbaWldKSB7DQogICAgICAgICAgICBsb2NTdHJpbmdzW2lpXVtpaWldID0gcmVwKGxvY1N0cmluZ3NbaWldW2lpaV0sIGksIHRvKTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBsb2NTdHJpbmdzW2lpXSA9IHJlcChsb2NTdHJpbmdzW2lpXSwgaSwgdG8pOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICBkZWxldGUganNvblsiUkVQTEFDRSBBTEwiXTsNCiAgQWRkTGFuZ3VhZ2UoaWQsIExhbmdzW2lkXS5uYW1lLCBqc29uLCB0cnVlKTsNCn07DQoNCnZhciBBZGRMYW5ndWFnZSA9IGZ1bmN0aW9uIChpZCwgbmFtZSwganNvbiwgbW9kKSB7DQogIC8vdXNlZCBpbiBsb2MgZmlsZXMNCiAgLy9pZiBtb2QgaXMgdHJ1ZSwgdGhpcyBmaWxlIGlzIGF1Z21lbnRpbmcgdGhlIGN1cnJlbnQgbGFuZ3VhZ2UNCiAgaWYgKGlkID09IGxvY0lkICYmICFtb2QpIHJldHVybiBmYWxzZTsgLy9kb24ndCBsb2FkIHR3aWNlDQogIGlmICghTGFuZ3NbaWRdKSByZXR1cm4gZmFsc2U7DQogIGxvY0lkID0gaWQ7DQogIGlmIChMYW5nc1tsb2NJZF0uaXNFTikgRU4gPSB0cnVlOw0KICBlbHNlIEVOID0gZmFsc2U7DQogIGxvY05hbWUgPSBMYW5nc1tpZF0ubmFtZUVOOyAvL25hbWUNCg0KICBpZiAobW9kKSB7DQogICAgZm9yICh2YXIgaSBpbiBqc29uKSB7DQogICAgICBsb2NTdHJpbmdzW2ldID0ganNvbltpXTsNCiAgICB9DQogICAgZm9yICh2YXIgaSBpbiBsb2NTdHJpbmdzKSB7DQogICAgICB2YXIgYml0ID0gaS5zcGxpdCgiXSIpOw0KICAgICAgaWYgKA0KICAgICAgICBiaXRbMV0gJiYNCiAgICAgICAgYml0WzBdLmluZGV4T2YoIltDT01NRU5UOiIpICE9IDAgJiYNCiAgICAgICAgIWxvY1N0cmluZ3NCeVBhcnRbYml0WzBdLnN1YnN0cmluZygxKV0NCiAgICAgICkNCiAgICAgICAgbG9jU3RyaW5nc0J5UGFydFtiaXRbMF0uc3Vic3RyaW5nKDEpXSA9IGk7DQogICAgfQ0KICAgIGNvbnNvbGUubG9nKCdBdWdtZW50ZWQgbGFuZ3VhZ2UgIicgKyBsb2NOYW1lICsgJyIuJyk7DQogIH0gZWxzZSB7DQogICAgbG9jU3RyaW5ncyA9IGpzb247DQogICAgbG9jUGx1ciA9IGpzb25bIiJdWyJwbHVyYWwtZm9ybXMiXSB8fCBsb2NQbHVyRmFsbGJhY2s7DQogICAgZGVsZXRlIGxvY1N0cmluZ3NbIiJdOw0KICAgIGZvciAodmFyIGkgaW4gbG9jU3RyaW5ncykgew0KICAgICAgaWYgKGxvY1N0cmluZ3NbaV0gPT0gIi8iKSBsb2NTdHJpbmdzW2ldID0gaTsNCiAgICB9DQoNCiAgICBsb2NQbHVyID0gKGZ1bmN0aW9uIChwbHVyYWxfZm9ybSkgew0KICAgICAgLy9saWZ0ZWQgYW5kIG1vZGlmaWVkIGZyb20gZ2V0dGV4dC5qcw0KICAgICAgdmFyIHBmX3JlID0gbmV3IFJlZ0V4cCgNCiAgICAgICAgIl5cXHMqbnBsdXJhbHNcXHMqPVxccypbMC05XStcXHMqO1xccypwbHVyYWxcXHMqPVxccyooPzpcXHN8Wy1cXD9cXHwmPSE8PisqLyU6O24wLTlfKCldKSsiDQogICAgICApOw0KICAgICAgaWYgKCFwZl9yZS50ZXN0KHBsdXJhbF9mb3JtKSkNCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcGx1cmFsIGZvcm0gIicgKyBwbHVyYWxfZm9ybSArICciIGlzIG5vdCB2YWxpZCcpOw0KICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbigNCiAgICAgICAgIm4iLA0KICAgICAgICAidmFyIHBsdXJhbCwgbnBsdXJhbHM7ICIgKyBwbHVyYWxfZm9ybSArICIgcmV0dXJuIHBsdXJhbDsiDQogICAgICApOw0KICAgICAgLy9yZXR1cm4gbmV3IEZ1bmN0aW9uKCduJywndmFyIHBsdXJhbCwgbnBsdXJhbHM7ICcrIHBsdXJhbF9mb3JtICsnIHJldHVybiB7IG5wbHVyYWxzOiBucGx1cmFscywgcGx1cmFsOiAocGx1cmFsID09PSB0cnVlID8gMSA6IChwbHVyYWwgPyBwbHVyYWwgOiAwKSkgfTsnKTsNCiAgICB9KShsb2NQbHVyKTsNCg0KICAgIGxvY1BhdGNoZXMgPSBbXTsNCiAgICBmb3IgKHZhciBpIGluIGxvY1N0cmluZ3MpIHsNCiAgICAgIGlmIChpLnNwbGl0KCJ8IilbMF0gPT0gIlVwZGF0ZSBub3RlcyIpIHsNCiAgICAgICAgdmFyIHBhdGNoID0gaS5zcGxpdCgifCIpOw0KICAgICAgICB2YXIgcGF0Y2hUcmFuc2xhdGVkID0gbG9jU3RyaW5nc1tpXS5zcGxpdCgifCIpOw0KICAgICAgICBsb2NQYXRjaGVzLnB1c2goew0KICAgICAgICAgIGlkOiBwYXJzZUludChwYXRjaFsxXSksDQogICAgICAgICAgdHlwZTogMSwNCiAgICAgICAgICB0aXRsZTogcGF0Y2hUcmFuc2xhdGVkWzJdLA0KICAgICAgICAgIHBvaW50czogcGF0Y2hUcmFuc2xhdGVkLnNsaWNlKDMpLA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogICAgdmFyIHNvcnRNYXAgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgaWYgKGEuaWQgPCBiLmlkKSByZXR1cm4gMTsNCiAgICAgIGVsc2UgcmV0dXJuIC0xOw0KICAgIH07DQogICAgbG9jUGF0Y2hlcy5zb3J0KHNvcnRNYXApOw0KDQogICAgZm9yICh2YXIgaSBpbiBsb2NTdHJpbmdzKSB7DQogICAgICB2YXIgYml0ID0gaS5zcGxpdCgiXSIpOw0KICAgICAgaWYgKA0KICAgICAgICBiaXRbMV0gJiYNCiAgICAgICAgYml0WzBdLmluZGV4T2YoIltDT01NRU5UOiIpICE9IDAgJiYNCiAgICAgICAgIWxvY1N0cmluZ3NCeVBhcnRbYml0WzBdLnN1YnN0cmluZygxKV0NCiAgICAgICkNCiAgICAgICAgbG9jU3RyaW5nc0J5UGFydFtiaXRbMF0uc3Vic3RyaW5nKDEpXSA9IGk7DQogICAgfQ0KDQogICAgY29uc29sZS5sb2coJ0xvYWRlZCBsYW5ndWFnZSAiJyArIGxvY05hbWUgKyAnIi4nKTsNCiAgfQ0KfTsNCg0KdmFyIExvYWRMYW5nID0gTG9hZFNjcmlwdDsNCg0KdmFyIExvY2FsaXplVXBncmFkZXNBbmRBY2hpZXZzID0gZnVuY3Rpb24gKCkgew0KICBpZiAoIUdhbWUuVXBncmFkZXNCeUlkKSByZXR1cm4gZmFsc2U7DQoNCiAgdmFyIGFsbFRoaW5ncyA9IFtdOw0KICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNCeUlkKSB7DQogICAgYWxsVGhpbmdzLnB1c2goR2FtZS5VcGdyYWRlc0J5SWRbaV0pOw0KICB9DQogIGZvciAodmFyIGkgaW4gR2FtZS5BY2hpZXZlbWVudHNCeUlkKSB7DQogICAgYWxsVGhpbmdzLnB1c2goR2FtZS5BY2hpZXZlbWVudHNCeUlkW2ldKTsNCiAgfQ0KICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbFRoaW5ncy5sZW5ndGg7IGkrKykgew0KICAgIHZhciBpdCA9IGFsbFRoaW5nc1tpXTsNCiAgICB2YXIgdHlwZSA9IGl0LmdldFR5cGUoKTsNCiAgICB2YXIgZm91bmQgPSAwOw0KICAgIGZvdW5kID0gRmluZExvY1N0cmluZ0J5UGFydCh0eXBlICsgIiBuYW1lICIgKyBpdC5pZCk7DQogICAgaWYgKGZvdW5kKSBpdC5kbmFtZSA9IGxvYyhmb3VuZCk7DQoNCiAgICBpZiAoIUVOKSBpdC5iYXNlRGVzYyA9IGl0LmJhc2VEZXNjLnJlcGxhY2UoLzxxPi4qLywgIiIpOyAvL3N0cmlwIHF1b3RlIHNlY3Rpb24NCiAgICBpdC5kZGVzYyA9IEJlYXV0aWZ5SW5UZXh0KGl0LmJhc2VEZXNjKTsNCg0KICAgIGZvdW5kID0gRmluZExvY1N0cmluZ0J5UGFydCh0eXBlICsgIiBkZXNjICIgKyBpdC5pZCk7DQogICAgaWYgKGZvdW5kKSBpdC5kZGVzYyA9IGxvYyhmb3VuZCk7DQogICAgZm91bmQgPSBGaW5kTG9jU3RyaW5nQnlQYXJ0KHR5cGUgKyAiIHF1b3RlICIgKyBpdC5pZCk7DQogICAgaWYgKGZvdW5kKSBpdC5kZGVzYyArPSAiPHE+IiArIGxvYyhmb3VuZCkgKyAiPC9xPiI7DQogIH0NCiAgQmVhdXRpZnlBbGwoKTsNCn07DQp2YXIgZ2V0VXBncmFkZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgew0KICB2YXIgaXQgPSBHYW1lLlVwZ3JhZGVzW25hbWVdOw0KICB2YXIgZm91bmQgPSBGaW5kTG9jU3RyaW5nQnlQYXJ0KCJVcGdyYWRlIG5hbWUgIiArIGl0LmlkKTsNCiAgaWYgKGZvdW5kKSByZXR1cm4gbG9jKGZvdW5kKTsNCiAgZWxzZSByZXR1cm4gbmFtZTsNCn07DQp2YXIgZ2V0QWNoaWV2ZW1lbnROYW1lID0gZnVuY3Rpb24gKG5hbWUpIHsNCiAgdmFyIGl0ID0gR2FtZS5BY2hpZXZlbWVudHNbbmFtZV07DQogIHZhciBmb3VuZCA9IEZpbmRMb2NTdHJpbmdCeVBhcnQoIkFjaGlldmVtZW50IG5hbWUgIiArIGl0LmlkKTsNCiAgaWYgKGZvdW5kKSByZXR1cm4gbG9jKGZvdW5kKTsNCiAgZWxzZSByZXR1cm4gbmFtZTsNCn07DQoNCi8vdGhlc2UgYXJlIGZhdWx0eSwgaW52ZXN0aWdhdGUgbGF0ZXINCi8vZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKXtyZXR1cm4gYnRvYShzdHIpO30NCi8vZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKXtyZXR1cm4gYXRvYihzdHIpO30NCg0KLypmdW5jdGlvbiB1dGY4X3RvX2I2NCggc3RyICkgew0KCXRyeXtyZXR1cm4gQmFzZTY0LmVuY29kZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoIHN0ciApKSk7fQ0KCWNhdGNoKGVycikNCgl7cmV0dXJuICcnO30NCn0NCg0KZnVuY3Rpb24gYjY0X3RvX3V0ZjgoIHN0ciApIHsNCgl0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoQmFzZTY0LmRlY29kZSggc3RyICkpKTt9DQoJY2F0Y2goZXJyKQ0KCXtyZXR1cm4gJyc7fQ0KfSovDQoNCi8vcGhld2llISBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDEwNjQ3Ni91c2luZy1qYXZhc2NyaXB0cy1hdG9iLXRvLWRlY29kZS1iYXNlNjQtZG9lc250LXByb3Blcmx5LWRlY29kZS11dGYtOC1zdHJpbmdzDQpmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHsNCiAgdHJ5IHsNCiAgICByZXR1cm4gYnRvYSgNCiAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoLyUoWzAtOUEtRl17Mn0pL2csIGZ1bmN0aW9uIChtYXRjaCwgcDEpIHsNCiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQocDEsIDE2KSk7DQogICAgICB9KQ0KICAgICk7DQogIH0gY2F0Y2ggKGVycikgew0KICAgIHJldHVybiAiIjsNCiAgfQ0KfQ0KDQpmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHsNCiAgdHJ5IHsNCiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KA0KICAgICAgQXJyYXkucHJvdG90eXBlLm1hcA0KICAgICAgICAuY2FsbChhdG9iKHN0ciksIGZ1bmN0aW9uIChjKSB7DQogICAgICAgICAgcmV0dXJuICIlIiArICgiMDAiICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpOw0KICAgICAgICB9KQ0KICAgICAgICAuam9pbigiIikNCiAgICApOw0KICB9IGNhdGNoIChlcnIpIHsNCiAgICByZXR1cm4gIiI7DQogIH0NCn0NCg0KZnVuY3Rpb24gQ29tcHJlc3NCaW4oYXJyKSB7DQogIC8vY29tcHJlc3MgYSBzZXF1ZW5jZSBsaWtlIFswLDEsMSwwLDEsMF0uLi4gaW50byBhIG51bWJlciBsaWtlIDU0Lg0KICB2YXIgc3RyID0gIiI7DQogIHZhciBhcnIyID0gYXJyLnNsaWNlKDApOw0KICBhcnIyLnVuc2hpZnQoMSk7DQogIGFycjIucHVzaCgxKTsNCiAgYXJyMi5yZXZlcnNlKCk7DQogIGZvciAodmFyIGkgaW4gYXJyMikgew0KICAgIHN0ciArPSBhcnIyW2ldOw0KICB9DQogIHN0ciA9IHBhcnNlSW50KHN0ciwgMik7DQogIHJldHVybiBzdHI7DQp9DQoNCmZ1bmN0aW9uIFVuY29tcHJlc3NCaW4obnVtKSB7DQogIC8vdW5jb21wcmVzcyBhIG51bWJlciBsaWtlIDU0IHRvIGEgc2VxdWVuY2UgbGlrZSBbMCwxLDEsMCwxLDBdLg0KICB2YXIgYXJyID0gbnVtLnRvU3RyaW5nKDIpOw0KICBhcnIgPSBhcnIuc3BsaXQoIiIpOw0KICBhcnIucmV2ZXJzZSgpOw0KICBhcnIuc2hpZnQoKTsNCiAgYXJyLnBvcCgpOw0KICByZXR1cm4gYXJyOw0KfQ0KDQpmdW5jdGlvbiBDb21wcmVzc0xhcmdlQmluKGFycikgew0KICAvL3dlIGhhdmUgdG8gY29tcHJlc3MgaW4gc21hbGxlciBjaHVua3MgdG8gYXZvaWQgZ2V0dGluZyBpbnRvIHNjaWVudGlmaWMgbm90YXRpb24NCiAgdmFyIGFycjIgPSBhcnIuc2xpY2UoMCk7DQogIHZhciB0aGlzQml0ID0gW107DQogIHZhciBiaXRzID0gW107DQogIGZvciAodmFyIGkgaW4gYXJyMikgew0KICAgIHRoaXNCaXQucHVzaChhcnIyW2ldKTsNCiAgICBpZiAodGhpc0JpdC5sZW5ndGggPj0gNTApIHsNCiAgICAgIGJpdHMucHVzaChDb21wcmVzc0Jpbih0aGlzQml0KSk7DQogICAgICB0aGlzQml0ID0gW107DQogICAgfQ0KICB9DQogIGlmICh0aGlzQml0Lmxlbmd0aCA+IDApIGJpdHMucHVzaChDb21wcmVzc0Jpbih0aGlzQml0KSk7DQogIGFycjIgPSBiaXRzLmpvaW4oIjsiKTsNCiAgcmV0dXJuIGFycjI7DQp9DQoNCmZ1bmN0aW9uIFVuY29tcHJlc3NMYXJnZUJpbihhcnIpIHsNCiAgdmFyIGFycjIgPSBhcnIuc3BsaXQoIjsiKTsNCiAgdmFyIGJpdHMgPSBbXTsNCiAgZm9yICh2YXIgaSBpbiBhcnIyKSB7DQogICAgYml0cy5wdXNoKFVuY29tcHJlc3NCaW4ocGFyc2VJbnQoYXJyMltpXSkpKTsNCiAgfQ0KICBhcnIyID0gW107DQogIGZvciAodmFyIGkgaW4gYml0cykgew0KICAgIGZvciAodmFyIGlpIGluIGJpdHNbaV0pIGFycjIucHVzaChiaXRzW2ldW2lpXSk7DQogIH0NCiAgcmV0dXJuIGFycjI7DQp9DQoNCmZ1bmN0aW9uIHBhY2soYnl0ZXMpIHsNCiAgdmFyIGNoYXJzID0gW107DQogIHZhciBsZW4gPSBieXRlcy5sZW5ndGg7DQogIGZvciAodmFyIGkgPSAwLCBuID0gbGVuOyBpIDwgbjsgKSB7DQogICAgY2hhcnMucHVzaCgoKGJ5dGVzW2krK10gJiAweGZmKSA8PCA4KSB8IChieXRlc1tpKytdICYgMHhmZikpOw0KICB9DQogIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNoYXJzKTsNCn0NCg0KZnVuY3Rpb24gdW5wYWNrKHN0cikgew0KICB2YXIgYnl0ZXMgPSBbXTsNCiAgdmFyIGxlbiA9IHN0ci5sZW5ndGg7DQogIGZvciAodmFyIGkgPSAwLCBuID0gbGVuOyBpIDwgbjsgaSsrKSB7DQogICAgdmFyIGNoYXIgPSBzdHIuY2hhckNvZGVBdChpKTsNCiAgICBieXRlcy5wdXNoKGNoYXIgPj4+IDgsIGNoYXIgJiAweGZmKTsNCiAgfQ0KICByZXR1cm4gYnl0ZXM7DQp9DQoNCi8vbW9kaWZpZWQgZnJvbSBodHRwOi8vd3d3LnNtYXNoaW5nbWFnYXppbmUuY29tLzIwMTEvMTAvMTkvb3B0aW1pemluZy1sb25nLWxpc3RzLW9mLXllc25vLXZhbHVlcy13aXRoLWphdmFzY3JpcHQvDQpmdW5jdGlvbiBwYWNrMigvKiBzdHJpbmcgKi8gdmFsdWVzKSB7DQogIHZhciBjaHVua3MgPSB2YWx1ZXMubWF0Y2goLy57MSwxNH0vZyksDQogICAgcGFja2VkID0gIiI7DQogIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmtzLmxlbmd0aDsgaSsrKSB7DQogICAgcGFja2VkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoIjEiICsgY2h1bmtzW2ldLCAyKSk7DQogIH0NCiAgcmV0dXJuIHBhY2tlZDsNCn0NCg0KZnVuY3Rpb24gdW5wYWNrMigvKiBzdHJpbmcgKi8gcGFja2VkKSB7DQogIHZhciB2YWx1ZXMgPSAiIjsNCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWNrZWQubGVuZ3RoOyBpKyspIHsNCiAgICB2YWx1ZXMgKz0gcGFja2VkLmNoYXJDb2RlQXQoaSkudG9TdHJpbmcoMikuc3Vic3RyaW5nKDEpOw0KICB9DQogIHJldHVybiB2YWx1ZXM7DQp9DQoNCmZ1bmN0aW9uIHBhY2szKHZhbHVlcykgew0KICAvL3RvbyBtYW55IHNhdmUgY29ycnVwdGlvbnMsIGRhcm4gaXQgdG8gaGVjaw0KICByZXR1cm4gdmFsdWVzOw0KfQ0KDQovL2ZpbGUgc2F2ZSBmdW5jdGlvbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcw0KdmFyIHNhdmVBcyA9DQogIHNhdmVBcyB8fA0KICAoZnVuY3Rpb24gKHZpZXcpIHsNCiAgICAidXNlIHN0cmljdCI7DQogICAgaWYgKA0KICAgICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gInVuZGVmaW5lZCIgJiYNCiAgICAgIC9NU0lFIFsxLTldXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkNCiAgICApIHsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIGRvYyA9IHZpZXcuZG9jdW1lbnQsDQogICAgICBnZXRfVVJMID0gZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gdmlldy5VUkwgfHwgdmlldy53ZWJraXRVUkwgfHwgdmlldzsNCiAgICAgIH0sDQogICAgICBzYXZlX2xpbmsgPSBkb2MuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwgImEiKSwNCiAgICAgIGNhbl91c2Vfc2F2ZV9saW5rID0gImRvd25sb2FkIiBpbiBzYXZlX2xpbmssDQogICAgICBjbGljayA9IGZ1bmN0aW9uIChub2RlKSB7DQogICAgICAgIHZhciBldmVudCA9IG5ldyBNb3VzZUV2ZW50KCJjbGljayIpOw0KICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZlbnQpOw0KICAgICAgfSwNCiAgICAgIGlzX3NhZmFyaSA9IC9WZXJzaW9uXC9bXGRcLl0rLipTYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksDQogICAgICB3ZWJraXRfcmVxX2ZzID0gdmlldy53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbSwNCiAgICAgIHJlcV9mcyA9DQogICAgICAgIHZpZXcucmVxdWVzdEZpbGVTeXN0ZW0gfHwgd2Via2l0X3JlcV9mcyB8fCB2aWV3Lm1velJlcXVlc3RGaWxlU3lzdGVtLA0KICAgICAgdGhyb3dfb3V0c2lkZSA9IGZ1bmN0aW9uIChleCkgew0KICAgICAgICAodmlldy5zZXRJbW1lZGlhdGUgfHwgdmlldy5zZXRUaW1lb3V0KShmdW5jdGlvbiAoKSB7DQogICAgICAgICAgdGhyb3cgZXg7DQogICAgICAgIH0sIDApOw0KICAgICAgfSwNCiAgICAgIGZvcmNlX3NhdmVhYmxlX3R5cGUgPSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIiwNCiAgICAgIGZzX21pbl9zaXplID0gMCwNCiAgICAgIGFyYml0cmFyeV9yZXZva2VfdGltZW91dCA9IDUwMCwNCiAgICAgIHJldm9rZSA9IGZ1bmN0aW9uIChmaWxlKSB7DQogICAgICAgIHZhciByZXZva2VyID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGlmICh0eXBlb2YgZmlsZSA9PT0gInN0cmluZyIpIHsNCiAgICAgICAgICAgIGdldF9VUkwoKS5yZXZva2VPYmplY3RVUkwoZmlsZSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGZpbGUucmVtb3ZlKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICBpZiAodmlldy5jaHJvbWUpIHsNCiAgICAgICAgICByZXZva2VyKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgc2V0VGltZW91dChyZXZva2VyLCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQpOw0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZmlsZXNhdmVyLCBldmVudF90eXBlcywgZXZlbnQpIHsNCiAgICAgICAgZXZlbnRfdHlwZXMgPSBbXS5jb25jYXQoZXZlbnRfdHlwZXMpOw0KICAgICAgICB2YXIgaSA9IGV2ZW50X3R5cGVzLmxlbmd0aDsNCiAgICAgICAgd2hpbGUgKGktLSkgew0KICAgICAgICAgIHZhciBsaXN0ZW5lciA9IGZpbGVzYXZlclsib24iICsgZXZlbnRfdHlwZXNbaV1dOw0KICAgICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgIGxpc3RlbmVyLmNhbGwoZmlsZXNhdmVyLCBldmVudCB8fCBmaWxlc2F2ZXIpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAgICAgICAgICAgICAgdGhyb3dfb3V0c2lkZShleCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgYXV0b19ib20gPSBmdW5jdGlvbiAoYmxvYikgew0KICAgICAgICBpZiAoDQogICAgICAgICAgL15ccyooPzp0ZXh0XC9cUyp8YXBwbGljYXRpb25cL3htbHxcUypcL1xTKlwreG1sKVxzKjsuKmNoYXJzZXRccyo9XHMqdXRmLTgvaS50ZXN0KA0KICAgICAgICAgICAgYmxvYi50eXBlDQogICAgICAgICAgKQ0KICAgICAgICApIHsNCiAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoWyJcdWZlZmYiLCBibG9iXSwgeyB0eXBlOiBibG9iLnR5cGUgfSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGJsb2I7DQogICAgICB9LA0KICAgICAgRmlsZVNhdmVyID0gZnVuY3Rpb24gKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7DQogICAgICAgIGlmICghbm9fYXV0b19ib20pIHsNCiAgICAgICAgICBibG9iID0gYXV0b19ib20oYmxvYik7DQogICAgICAgIH0NCiAgICAgICAgdmFyIGZpbGVzYXZlciA9IHRoaXMsDQogICAgICAgICAgdHlwZSA9IGJsb2IudHlwZSwNCiAgICAgICAgICBibG9iX2NoYW5nZWQgPSBmYWxzZSwNCiAgICAgICAgICBvYmplY3RfdXJsLA0KICAgICAgICAgIHRhcmdldF92aWV3LA0KICAgICAgICAgIGRpc3BhdGNoX2FsbCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGRpc3BhdGNoKA0KICAgICAgICAgICAgICBmaWxlc2F2ZXIsDQogICAgICAgICAgICAgICJ3cml0ZXN0YXJ0IHByb2dyZXNzIHdyaXRlIHdyaXRlZW5kIi5zcGxpdCgiICIpDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0sDQogICAgICAgICAgZnNfZXJyb3IgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAodGFyZ2V0X3ZpZXcgJiYgaXNfc2FmYXJpICYmIHR5cGVvZiBGaWxlUmVhZGVyICE9PSAidW5kZWZpbmVkIikgew0KICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICB2YXIgYmFzZTY0RGF0YSA9IHJlYWRlci5yZXN1bHQ7DQogICAgICAgICAgICAgICAgdGFyZ2V0X3ZpZXcubG9jYXRpb24uaHJlZiA9DQogICAgICAgICAgICAgICAgICAiZGF0YTphdHRhY2htZW50L2ZpbGUiICsNCiAgICAgICAgICAgICAgICAgIGJhc2U2NERhdGEuc2xpY2UoYmFzZTY0RGF0YS5zZWFyY2goL1ssO10vKSk7DQogICAgICAgICAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTsNCiAgICAgICAgICAgICAgICBkaXNwYXRjaF9hbGwoKTsNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7DQogICAgICAgICAgICAgIGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLklOSVQ7DQogICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChibG9iX2NoYW5nZWQgfHwgIW9iamVjdF91cmwpIHsNCiAgICAgICAgICAgICAgb2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGFyZ2V0X3ZpZXcpIHsNCiAgICAgICAgICAgICAgdGFyZ2V0X3ZpZXcubG9jYXRpb24uaHJlZiA9IG9iamVjdF91cmw7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB2YXIgbmV3X3RhYiA9IHZpZXcub3BlbihvYmplY3RfdXJsLCAiX2JsYW5rIik7DQogICAgICAgICAgICAgIGlmIChuZXdfdGFiID09IHVuZGVmaW5lZCAmJiBpc19zYWZhcmkpIHsNCiAgICAgICAgICAgICAgICB2aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FOw0KICAgICAgICAgICAgZGlzcGF0Y2hfYWxsKCk7DQogICAgICAgICAgICByZXZva2Uob2JqZWN0X3VybCk7DQogICAgICAgICAgfSwNCiAgICAgICAgICBhYm9ydGFibGUgPSBmdW5jdGlvbiAoZnVuYykgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgaWYgKGZpbGVzYXZlci5yZWFkeVN0YXRlICE9PSBmaWxlc2F2ZXIuRE9ORSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSwNCiAgICAgICAgICBjcmVhdGVfaWZfbm90X2ZvdW5kID0geyBjcmVhdGU6IHRydWUsIGV4Y2x1c2l2ZTogZmFsc2UgfSwNCiAgICAgICAgICBzbGljZTsNCiAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuSU5JVDsNCiAgICAgICAgaWYgKCFuYW1lKSB7DQogICAgICAgICAgbmFtZSA9ICJkb3dubG9hZCI7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGNhbl91c2Vfc2F2ZV9saW5rKSB7DQogICAgICAgICAgb2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBzYXZlX2xpbmsuaHJlZiA9IG9iamVjdF91cmw7DQogICAgICAgICAgICBzYXZlX2xpbmsuZG93bmxvYWQgPSBuYW1lOw0KICAgICAgICAgICAgY2xpY2soc2F2ZV9saW5rKTsNCiAgICAgICAgICAgIGRpc3BhdGNoX2FsbCgpOw0KICAgICAgICAgICAgcmV2b2tlKG9iamVjdF91cmwpOw0KICAgICAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKHZpZXcuY2hyb21lICYmIHR5cGUgJiYgdHlwZSAhPT0gZm9yY2Vfc2F2ZWFibGVfdHlwZSkgew0KICAgICAgICAgIHNsaWNlID0gYmxvYi5zbGljZSB8fCBibG9iLndlYmtpdFNsaWNlOw0KICAgICAgICAgIGJsb2IgPSBzbGljZS5jYWxsKGJsb2IsIDAsIGJsb2Iuc2l6ZSwgZm9yY2Vfc2F2ZWFibGVfdHlwZSk7DQogICAgICAgICAgYmxvYl9jaGFuZ2VkID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAod2Via2l0X3JlcV9mcyAmJiBuYW1lICE9PSAiZG93bmxvYWQiKSB7DQogICAgICAgICAgbmFtZSArPSAiLmRvd25sb2FkIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodHlwZSA9PT0gZm9yY2Vfc2F2ZWFibGVfdHlwZSB8fCB3ZWJraXRfcmVxX2ZzKSB7DQogICAgICAgICAgdGFyZ2V0X3ZpZXcgPSB2aWV3Ow0KICAgICAgICB9DQogICAgICAgIGlmICghcmVxX2ZzKSB7DQogICAgICAgICAgZnNfZXJyb3IoKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgZnNfbWluX3NpemUgKz0gYmxvYi5zaXplOw0KICAgICAgICByZXFfZnMoDQogICAgICAgICAgdmlldy5URU1QT1JBUlksDQogICAgICAgICAgZnNfbWluX3NpemUsDQogICAgICAgICAgYWJvcnRhYmxlKGZ1bmN0aW9uIChmcykgew0KICAgICAgICAgICAgZnMucm9vdC5nZXREaXJlY3RvcnkoDQogICAgICAgICAgICAgICJzYXZlZCIsDQogICAgICAgICAgICAgIGNyZWF0ZV9pZl9ub3RfZm91bmQsDQogICAgICAgICAgICAgIGFib3J0YWJsZShmdW5jdGlvbiAoZGlyKSB7DQogICAgICAgICAgICAgICAgdmFyIHNhdmUgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICBkaXIuZ2V0RmlsZSgNCiAgICAgICAgICAgICAgICAgICAgbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlX2lmX25vdF9mb3VuZCwNCiAgICAgICAgICAgICAgICAgICAgYWJvcnRhYmxlKGZ1bmN0aW9uIChmaWxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgZmlsZS5jcmVhdGVXcml0ZXIoDQogICAgICAgICAgICAgICAgICAgICAgICBhYm9ydGFibGUoZnVuY3Rpb24gKHdyaXRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIub253cml0ZWVuZCA9IGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF92aWV3LmxvY2F0aW9uLmhyZWYgPSBmaWxlLnRvVVJMKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChmaWxlc2F2ZXIsICJ3cml0ZWVuZCIsIGV2ZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZva2UoZmlsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5vbmVycm9yID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IHdyaXRlci5lcnJvcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IuY29kZSAhPT0gZXJyb3IuQUJPUlRfRVJSKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmc19lcnJvcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgYWJvcnQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCIgIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlclsib24iICsgZXZlbnRdID0gZmlsZXNhdmVyWyJvbiIgKyBldmVudF07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci53cml0ZShibG9iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNhdmVyLmFib3J0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5hYm9ydCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7DQogICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLldSSVRJTkc7DQogICAgICAgICAgICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGZzX2Vycm9yDQogICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgICAgICAgIGZzX2Vycm9yDQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgZGlyLmdldEZpbGUoDQogICAgICAgICAgICAgICAgICBuYW1lLA0KICAgICAgICAgICAgICAgICAgeyBjcmVhdGU6IGZhbHNlIH0sDQogICAgICAgICAgICAgICAgICBhYm9ydGFibGUoZnVuY3Rpb24gKGZpbGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZmlsZS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgICAgICBhYm9ydGFibGUoZnVuY3Rpb24gKGV4KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChleC5jb2RlID09PSBleC5OT1RfRk9VTkRfRVJSKSB7DQogICAgICAgICAgICAgICAgICAgICAgc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIGZzX2Vycm9yKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgIGZzX2Vycm9yDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0pLA0KICAgICAgICAgIGZzX2Vycm9yDQogICAgICAgICk7DQogICAgICB9LA0KICAgICAgRlNfcHJvdG8gPSBGaWxlU2F2ZXIucHJvdG90eXBlLA0KICAgICAgc2F2ZUFzID0gZnVuY3Rpb24gKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7DQogICAgICAgIHJldHVybiBuZXcgRmlsZVNhdmVyKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKTsNCiAgICAgIH07DQogICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICJ1bmRlZmluZWQiICYmIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7DQogICAgICByZXR1cm4gZnVuY3Rpb24gKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7DQogICAgICAgIGlmICghbm9fYXV0b19ib20pIHsNCiAgICAgICAgICBibG9iID0gYXV0b19ib20oYmxvYik7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG5hbWUgfHwgImRvd25sb2FkIik7DQogICAgICB9Ow0KICAgIH0NCiAgICBGU19wcm90by5hYm9ydCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBmaWxlc2F2ZXIgPSB0aGlzOw0KICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTsNCiAgICAgIGRpc3BhdGNoKGZpbGVzYXZlciwgImFib3J0Iik7DQogICAgfTsNCiAgICBGU19wcm90by5yZWFkeVN0YXRlID0gRlNfcHJvdG8uSU5JVCA9IDA7DQogICAgRlNfcHJvdG8uV1JJVElORyA9IDE7DQogICAgRlNfcHJvdG8uRE9ORSA9IDI7DQogICAgRlNfcHJvdG8uZXJyb3IgPQ0KICAgICAgRlNfcHJvdG8ub253cml0ZXN0YXJ0ID0NCiAgICAgIEZTX3Byb3RvLm9ucHJvZ3Jlc3MgPQ0KICAgICAgRlNfcHJvdG8ub253cml0ZSA9DQogICAgICBGU19wcm90by5vbmFib3J0ID0NCiAgICAgIEZTX3Byb3RvLm9uZXJyb3IgPQ0KICAgICAgRlNfcHJvdG8ub253cml0ZWVuZCA9DQogICAgICAgIG51bGw7DQogICAgcmV0dXJuIHNhdmVBczsNCiAgfSkoDQogICAgKHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmKSB8fA0KICAgICAgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiICYmIHdpbmRvdykgfHwNCiAgICAgIHRoaXMuY29udGVudA0KICApOw0KaWYgKHR5cGVvZiBtb2R1bGUgIT09ICJ1bmRlZmluZWQiICYmIG1vZHVsZS5leHBvcnRzKSB7DQogIG1vZHVsZS5leHBvcnRzLnNhdmVBcyA9IHNhdmVBczsNCn0gZWxzZSBpZiAoDQogIHR5cGVvZiBkZWZpbmUgIT09ICJ1bmRlZmluZWQiICYmDQogIGRlZmluZSAhPT0gbnVsbCAmJg0KICBkZWZpbmUuYW1kICE9IG51bGwNCikgew0KICBkZWZpbmUoW10sIGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gc2F2ZUFzOw0KICB9KTsNCn0NCg0KLy9zZWVkZWQgcmFuZG9tIGZ1bmN0aW9uLCBjb3VydGVzeSBvZiBodHRwOi8vZGF2aWRiYXUuY29tL2FyY2hpdmVzLzIwMTAvMDEvMzAvcmFuZG9tX3NlZWRzX2NvZGVkX2hpbnRzX2FuZF9xdWludGlsbGlvbnMuaHRtbA0KKGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlLCBmKSB7DQogIGZ1bmN0aW9uIGsoYSkgew0KICAgIHZhciBiLA0KICAgICAgYyA9IGEubGVuZ3RoLA0KICAgICAgZSA9IHRoaXMsDQogICAgICBmID0gMCwNCiAgICAgIGcgPSAoZS5pID0gZS5qID0gMCksDQogICAgICBoID0gKGUuUyA9IFtdKTsNCiAgICBmb3IgKGMgfHwgKGEgPSBbYysrXSk7IGQgPiBmOyApIGhbZl0gPSBmKys7DQogICAgZm9yIChmID0gMDsgZCA+IGY7IGYrKykNCiAgICAgIChoW2ZdID0gaFsoZyA9IGogJiAoZyArIGFbZiAlIGNdICsgKGIgPSBoW2ZdKSkpXSksIChoW2ddID0gYik7DQogICAgKGUuZyA9IGZ1bmN0aW9uIChhKSB7DQogICAgICBmb3IgKHZhciBiLCBjID0gMCwgZiA9IGUuaSwgZyA9IGUuaiwgaCA9IGUuUzsgYS0tOyApDQogICAgICAgIChiID0gaFsoZiA9IGogJiAoZiArIDEpKV0pLA0KICAgICAgICAgIChjID0gYyAqIGQgKyBoW2ogJiAoKGhbZl0gPSBoWyhnID0gaiAmIChnICsgYikpXSkgKyAoaFtnXSA9IGIpKV0pOw0KICAgICAgcmV0dXJuIChlLmkgPSBmKSwgKGUuaiA9IGcpLCBjOw0KICAgIH0pKGQpOw0KICB9DQogIGZ1bmN0aW9uIGwoYSwgYikgew0KICAgIHZhciBlLA0KICAgICAgYyA9IFtdLA0KICAgICAgZCA9ICh0eXBlb2YgYSlbMF07DQogICAgaWYgKGIgJiYgIm8iID09IGQpDQogICAgICBmb3IgKGUgaW4gYSkNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBjLnB1c2gobChhW2VdLCBiIC0gMSkpOw0KICAgICAgICB9IGNhdGNoIChmKSB7fQ0KICAgIHJldHVybiBjLmxlbmd0aCA/IGMgOiAicyIgPT0gZCA/IGEgOiBhICsgIlwwIjsNCiAgfQ0KICBmdW5jdGlvbiBtKGEsIGIpIHsNCiAgICBmb3IgKHZhciBkLCBjID0gYSArICIiLCBlID0gMDsgYy5sZW5ndGggPiBlOyApDQogICAgICBiW2ogJiBlXSA9IGogJiAoKGQgXj0gMTkgKiBiW2ogJiBlXSkgKyBjLmNoYXJDb2RlQXQoZSsrKSk7DQogICAgcmV0dXJuIG8oYik7DQogIH0NCiAgZnVuY3Rpb24gbihjKSB7DQogICAgdHJ5IHsNCiAgICAgIHJldHVybiBhLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoKGMgPSBuZXcgVWludDhBcnJheShkKSkpLCBvKGMpOw0KICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgIHJldHVybiBbK25ldyBEYXRlKCksIGEsIGEubmF2aWdhdG9yLnBsdWdpbnMsIGEuc2NyZWVuLCBvKGIpXTsNCiAgICB9DQogIH0NCiAgZnVuY3Rpb24gbyhhKSB7DQogICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoMCwgYSk7DQogIH0NCiAgdmFyIGcgPSBjLnBvdyhkLCBlKSwNCiAgICBoID0gYy5wb3coMiwgZiksDQogICAgaSA9IDIgKiBoLA0KICAgIGogPSBkIC0gMTsNCiAgKGMuc2VlZHJhbmRvbSA9IGZ1bmN0aW9uIChhLCBmKSB7DQogICAgdmFyIGogPSBbXSwNCiAgICAgIHAgPSBtKGwoZiA/IFthLCBvKGIpXSA6IDAgaW4gYXJndW1lbnRzID8gYSA6IG4oKSwgMyksIGopLA0KICAgICAgcSA9IG5ldyBrKGopOw0KICAgIHJldHVybiAoDQogICAgICBtKG8ocS5TKSwgYiksDQogICAgICAoYy5yYW5kb20gPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGZvciAodmFyIGEgPSBxLmcoZSksIGIgPSBnLCBjID0gMDsgaCA+IGE7ICkNCiAgICAgICAgICAoYSA9IChhICsgYykgKiBkKSwgKGIgKj0gZCksIChjID0gcS5nKDEpKTsNCiAgICAgICAgZm9yICg7IGEgPj0gaTsgKSAoYSAvPSAyKSwgKGIgLz0gMiksIChjID4+Pj0gMSk7DQogICAgICAgIHJldHVybiAoYSArIGMpIC8gYjsNCiAgICAgIH0pLA0KICAgICAgcA0KICAgICk7DQogIH0pLA0KICAgIG0oYy5yYW5kb20oKSwgYik7DQp9KSh0aGlzLCBbXSwgTWF0aCwgMjU2LCA2LCA1Mik7DQoNCmZ1bmN0aW9uIGJpbmQoc2NvcGUsIGZuKSB7DQogIC8vdXNlIDogYmluZCh0aGlzLGZ1bmN0aW9uKCl7dGhpcy54Kys7fSkgLSByZXR1cm5zIGEgZnVuY3Rpb24gd2hlcmUgInRoaXMiIHJlZmVycyB0byB0aGUgc2NvcGVkIHRoaXMNCiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICBmbi5hcHBseShzY29wZSwgYXJndW1lbnRzKTsNCiAgfTsNCn0NCg0KdmFyIGdyYWJQcm9wcyA9IGZ1bmN0aW9uIChhcnIsIHByb3ApIHsNCiAgaWYgKCFhcnIpIHJldHVybiBbXTsNCiAgYXJyMiA9IFtdOw0KICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgew0KICAgIGFycjIucHVzaChhcnJbaV1bcHJvcF0pOw0KICB9DQogIHJldHVybiBhcnIyOw0KfTsNCg0KQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5maWxsUGF0dGVybiA9IGZ1bmN0aW9uICgNCiAgaW1nLA0KICBYLA0KICBZLA0KICBXLA0KICBILA0KICBpVywNCiAgaUgsDQogIG9mZlgsDQogIG9mZlkNCikgew0KICAvL2ZvciB3aGVuIGJ1aWx0LWluIHBhdHRlcm5zIGFyZW4ndCBlbm91Z2gNCiAgaWYgKGltZy5hbHQgIT0gImJsYW5rIikgew0KICAgIHZhciBvZmZYID0gb2ZmWCB8fCAwOw0KICAgIHZhciBvZmZZID0gb2ZmWSB8fCAwOw0KICAgIGlmIChvZmZYIDwgMCkgew0KICAgICAgb2ZmWCA9IG9mZlggLSBNYXRoLmZsb29yKG9mZlggLyBpVykgKiBpVzsNCiAgICB9DQogICAgaWYgKG9mZlggPiAwKSB7DQogICAgICBvZmZYID0gKG9mZlggJSBpVykgLSBpVzsNCiAgICB9DQogICAgaWYgKG9mZlkgPCAwKSB7DQogICAgICBvZmZZID0gb2ZmWSAtIE1hdGguZmxvb3Iob2ZmWSAvIGlIKSAqIGlIOw0KICAgIH0NCiAgICBpZiAob2ZmWSA+IDApIHsNCiAgICAgIG9mZlkgPSAob2ZmWSAlIGlIKSAtIGlIOw0KICAgIH0NCiAgICBmb3IgKHZhciB5ID0gb2ZmWTsgeSA8IEg7IHkgKz0gaUgpIHsNCiAgICAgIGZvciAodmFyIHggPSBvZmZYOyB4IDwgVzsgeCArPSBpVykgew0KICAgICAgICB0aGlzLmRyYXdJbWFnZShpbWcsIFggKyB4LCBZICsgeSwgaVcsIGlIKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn07DQoNCnZhciBPbGRDYW52YXNEcmF3SW1hZ2UgPSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLmRyYXdJbWFnZTsNCkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuZHJhd0ltYWdlID0gZnVuY3Rpb24gKCkgew0KICAvL29ubHkgZHJhdyB0aGUgaW1hZ2UgaWYgaXQncyBsb2FkZWQNCiAgaWYgKGFyZ3VtZW50c1swXS5hbHQgIT0gImJsYW5rIikgT2xkQ2FudmFzRHJhd0ltYWdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQp9Ow0KDQppZiAoIWRvY3VtZW50Lmhhc0ZvY3VzKQ0KICBkb2N1bWVudC5oYXNGb2N1cyA9IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gZG9jdW1lbnQuaGlkZGVuOw0KICB9OyAvL2ZvciBPcGVyYQ0KDQpmdW5jdGlvbiBBZGRFdmVudChlbCwgZXYsIGZ1bmMpIHsNCiAgLy9pZS4gbXlMaXN0ZW5lcj1BZGRFdmVudChsKCdlbGVtZW50JyksJ2NsaWNrJyxmdW5jdGlvbigpe2NvbnNvbGUubG9nKCdoaSEnKTt9KTsNCiAgaWYgKGVsLmFkZEV2ZW50TGlzdGVuZXIpIHsNCiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2LCBmdW5jLCBmYWxzZSk7DQogICAgcmV0dXJuIFtlbCwgZXYsIGZ1bmNdOw0KICB9IGVsc2UgaWYgKGVsLmF0dGFjaEV2ZW50KSB7DQogICAgdmFyIGZ1bmMyID0gZnVuY3Rpb24gKCkgew0KICAgICAgZnVuYy5jYWxsKGVsKTsNCiAgICB9Ow0KICAgIGVsLmF0dGFjaEV2ZW50KCJvbiIgKyBldiwgZnVuYzIpOw0KICAgIHJldHVybiBbZWwsIGV2LCBmdW5jMl07DQogIH0NCiAgcmV0dXJuIGZhbHNlOw0KfQ0KZnVuY3Rpb24gUmVtb3ZlRXZlbnQoZXZPYmopIHsNCiAgLy9pZS4gUmVtb3ZlRXZlbnQobXlMaXN0ZW5lcik7DQogIGlmICghZXZPYmopIHJldHVybiBmYWxzZTsNCiAgaWYgKGV2T2JqWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIpDQogICAgZXZPYmpbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldk9ialsxXSwgZXZPYmpbMl0sIGZhbHNlKTsNCiAgZWxzZSBpZiAoZXZPYmpbMF0uZGV0YWNoRXZlbnQpDQogICAgZXZPYmpbMF0uZGV0YWNoRXZlbnQoIm9uIiArIGV2T2JqWzFdLCBldk9ialsyXSk7DQogIHJldHVybiB0cnVlOw0KfQ0KDQpmdW5jdGlvbiBGaXJlRXZlbnQoZWwsIGV2KSB7DQogIGlmIChlbC5maXJlRXZlbnQpIHsNCiAgICBlbC5maXJlRXZlbnQoIm9uIiArIGV2KTsNCiAgfSBlbHNlIHsNCiAgICB2YXIgZXZPYmogPSBkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnRzIik7DQogICAgZXZPYmouaW5pdEV2ZW50KGV2LCB0cnVlLCBmYWxzZSk7DQogICAgZWwuZGlzcGF0Y2hFdmVudChldk9iaik7DQogIH0NCn0NCg0KZnVuY3Rpb24gd3JpdGVJY29uKGljb24pIHsNCiAgLy9yZXR1cm5zIENTUyBmb3IgYW4gaWNvbidzIGJhY2tncm91bmQgaW1hZ2UNCiAgLy9mb3IgdXNlIGluIENTUyBzdHJpbmdzDQogIHJldHVybiAoDQogICAgKGljb25bMl0NCiAgICAgID8gImJhY2tncm91bmQtaW1hZ2U6dXJsKCciICsgaWNvblsyXS5yZXBsYWNlKC8nL2csICJcXCciKSArICInKTsiDQogICAgICA6ICIiKSArDQogICAgImJhY2tncm91bmQtcG9zaXRpb246IiArDQogICAgLWljb25bMF0gKiA0OCArDQogICAgInB4ICIgKw0KICAgIC1pY29uWzFdICogNDggKw0KICAgICJweDsiDQogICk7DQp9DQpmdW5jdGlvbiB0aW55SWNvbihpY29uLCBjc3MpIHsNCiAgLy9yZXR1cm5zIEhUTUwgZGlzcGxheWluZyBhbiBpY29uLCB3aXRoIG9wdGlvbmFsIGV4dHJhIENTUw0KICByZXR1cm4gKA0KICAgICc8ZGl2IGNsYXNzPSJpY29uIHRpbnlJY29uIiBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6aW5saW5lLWJsb2NrOycgKw0KICAgIHdyaXRlSWNvbihpY29uKSArDQogICAgInRyYW5zZm9ybTpzY2FsZSgwLjUpO21hcmdpbjotMTZweDsiICsNCiAgICAoY3NzID8gY3NzIDogIiIpICsNCiAgICAnIj48L2Rpdj4nDQogICk7DQp9DQoNCnZhciBMb2FkZXIgPSBmdW5jdGlvbiAoKSAvL2Fzc2V0LWxvYWRpbmcgc3lzdGVtDQp7DQogIHRoaXMubG9hZGluZ04gPSAwOw0KICB0aGlzLmFzc2V0c04gPSAwOw0KICB0aGlzLmFzc2V0cyA9IFtdOw0KICB0aGlzLmFzc2V0c0xvYWRpbmcgPSBbXTsNCiAgdGhpcy5hc3NldHNMb2FkZWQgPSBbXTsNCiAgdGhpcy5kb21haW4gPSAiIjsNCiAgdGhpcy5sb2FkZWQgPSAwOyAvL2NhbGxiYWNrDQogIHRoaXMuZG9uZUxvYWRpbmcgPSAwOw0KDQogIHRoaXMuYmxhbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsNCiAgdGhpcy5ibGFuay53aWR0aCA9IDg7DQogIHRoaXMuYmxhbmsuaGVpZ2h0ID0gODsNCiAgdGhpcy5ibGFuay5hbHQgPSAiYmxhbmsiOw0KDQogIHRoaXMuTG9hZCA9IGZ1bmN0aW9uIChhc3NldHMpIHsNCiAgICBmb3IgKHZhciBpIGluIGFzc2V0cykgew0KICAgICAgdGhpcy5sb2FkaW5nTisrOw0KICAgICAgdGhpcy5hc3NldHNOKys7DQogICAgICBpZiAoIXRoaXMuYXNzZXRzTG9hZGluZ1thc3NldHNbaV1dICYmICF0aGlzLmFzc2V0c0xvYWRlZFthc3NldHNbaV1dKSB7DQogICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsNCiAgICAgICAgaWYgKGFzc2V0c1tpXS5pbmRleE9mKCIvIikgIT0gLTEpIGltZy5zcmMgPSBhc3NldHNbaV07DQogICAgICAgIGVsc2UgaW1nLnNyYyA9IHRoaXMuZG9tYWluICsgYXNzZXRzW2ldOw0KICAgICAgICBpbWcuYWx0ID0gYXNzZXRzW2ldOw0KICAgICAgICBpbWcub25sb2FkID0gYmluZCh0aGlzLCB0aGlzLm9uTG9hZCk7DQogICAgICAgIHRoaXMuYXNzZXRzW2Fzc2V0c1tpXV0gPSBpbWc7DQogICAgICAgIHRoaXMuYXNzZXRzTG9hZGluZy5wdXNoKGFzc2V0c1tpXSk7DQogICAgICB9DQogICAgfQ0KICB9Ow0KICB0aGlzLlJlcGxhY2UgPSBmdW5jdGlvbiAob2xkLCBuZXdlcikgew0KICAgIGlmICghdGhpcy5hc3NldHNbb2xkXSkgdGhpcy5Mb2FkKFtvbGRdKTsNCiAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7DQogICAgaWYgKG5ld2VyLmluZGV4T2YoIi8iKSAhPSAtMSkNCiAgICAgIC8qbmV3ZXIuaW5kZXhPZignaHR0cCcpIT0tMSB8fCBuZXdlci5pbmRleE9mKCdodHRwcycpIT0tMSkqLyBpbWcuc3JjID0NCiAgICAgICAgbmV3ZXI7DQogICAgZWxzZSBpbWcuc3JjID0gdGhpcy5kb21haW4gKyBuZXdlcjsNCiAgICBpbWcuYWx0ID0gbmV3ZXI7DQogICAgaW1nLm9ubG9hZCA9IGJpbmQodGhpcywgdGhpcy5vbkxvYWQpOw0KICAgIHRoaXMuYXNzZXRzW29sZF0gPSBpbWc7DQogIH07DQogIHRoaXMub25Mb2FkUmVwbGFjZSA9IGZ1bmN0aW9uICgpIHt9Ow0KICB0aGlzLm9uTG9hZCA9IGZ1bmN0aW9uIChlKSB7DQogICAgdGhpcy5hc3NldHNMb2FkZWQucHVzaChlLnRhcmdldC5hbHQpOw0KICAgIHRoaXMuYXNzZXRzTG9hZGluZy5zcGxpY2UodGhpcy5hc3NldHNMb2FkaW5nLmluZGV4T2YoZS50YXJnZXQuYWx0KSwgMSk7DQogICAgdGhpcy5sb2FkaW5nTi0tOw0KICAgIGlmICh0aGlzLmRvbmVMb2FkaW5nID09IDAgJiYgdGhpcy5sb2FkaW5nTiA8PSAwICYmIHRoaXMubG9hZGVkICE9IDApIHsNCiAgICAgIHRoaXMuZG9uZUxvYWRpbmcgPSAxOw0KICAgICAgdGhpcy5sb2FkZWQoKTsNCiAgICB9DQogIH07DQogIHRoaXMuZ2V0UHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIDEgLSB0aGlzLmxvYWRpbmdOIC8gdGhpcy5hc3NldHNOOw0KICB9Ow0KfTsNCg0KdmFyIFBpYyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogIGlmIChHYW1lLkxvYWRlci5hc3NldHNMb2FkZWQuaW5kZXhPZih3aGF0KSAhPSAtMSkNCiAgICByZXR1cm4gR2FtZS5Mb2FkZXIuYXNzZXRzW3doYXRdOw0KICBlbHNlIGlmIChHYW1lLkxvYWRlci5hc3NldHNMb2FkaW5nLmluZGV4T2Yod2hhdCkgPT0gLTEpDQogICAgR2FtZS5Mb2FkZXIuTG9hZChbd2hhdF0pOw0KICByZXR1cm4gR2FtZS5Mb2FkZXIuYmxhbms7DQp9Ow0KDQp2YXIgU291bmRzID0gW107DQp2YXIgT2xkUGxheVNvdW5kID0gZnVuY3Rpb24gKHVybCwgdm9sKSB7DQogIHZhciB2b2x1bWUgPSAxOw0KICBpZiAodm9sICE9PSB1bmRlZmluZWQpIHZvbHVtZSA9IHZvbDsNCiAgaWYgKCFHYW1lLnZvbHVtZSB8fCB2b2x1bWUgPT0gMCkgcmV0dXJuIDA7DQogIGlmICghU291bmRzW3VybF0pIHsNCiAgICBTb3VuZHNbdXJsXSA9IG5ldyBBdWRpbyh1cmwpOw0KICAgIFNvdW5kc1t1cmxdLm9ubG9hZGVkZGF0YSA9IGZ1bmN0aW9uIChlKSB7DQogICAgICBlLnRhcmdldC52b2x1bWUgPSBNYXRoLnBvdygodm9sdW1lICogR2FtZS52b2x1bWUpIC8gMTAwLCAyKTsNCiAgICB9Ow0KICB9IGVsc2UgaWYgKFNvdW5kc1t1cmxdLnJlYWR5U3RhdGUgPj0gMikgew0KICAgIFNvdW5kc1t1cmxdLmN1cnJlbnRUaW1lID0gMDsNCiAgICBTb3VuZHNbdXJsXS52b2x1bWUgPSBNYXRoLnBvdygodm9sdW1lICogR2FtZS52b2x1bWUpIC8gMTAwLCAyKTsNCiAgfQ0KICBTb3VuZHNbdXJsXS5wbGF5KCk7DQp9Ow0KdmFyIFNvdW5kSW5zdHMgPSBbXTsNCnZhciBTb3VuZEkgPSAwOw0KZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgaSsrKSB7DQogIFNvdW5kSW5zdHNbaV0gPSBuZXcgQXVkaW8oKTsNCn0NCnZhciBwaXRjaFN1cHBvcnQgPSBmYWxzZTsNCi8vbm90ZSA6IENocm9tZSB0dXJucyBvdXQgdG8gbm90IHN1cHBvcnQgd2Via2l0UHJlc2VydmVzUGl0Y2ggZGVzcGl0ZSB0aGUgc3BlY2lmaWNhdGlvbnMgY2xhaW1pbmcgb3RoZXJ3aXNlLCBhbmQgRmlyZWZveCBjbGlwcyBzb21lIHNob3J0IHNvdW5kcyB3aGVuIGNoYW5naW5nIHBsYXliYWNrUmF0ZSwgc28gaSdtIHR1cm5pbmcgdGhlIGZlYXR1cmUgb2ZmIGNvbXBsZXRlbHkgdW50aWwgYnJvd3NlcnMgZ2V0IGl0IHRvZ2V0aGVyDQovL2lmIChTb3VuZEluc3RzWzBdLnByZXNlcnZlc1BpdGNoIHx8IFNvdW5kSW5zdHNbMF0ubW96UHJlc2VydmVzUGl0Y2ggfHwgU291bmRJbnN0c1swXS53ZWJraXRQcmVzZXJ2ZXNQaXRjaCkgcGl0Y2hTdXBwb3J0PXRydWU7DQoNCnZhciBQbGF5U291bmQgPSBmdW5jdGlvbiAodXJsLCB2b2wsIHBpdGNoVmFyKSB7DQogIC8vdXJsIDogdGhlIHVybCBvZiB0aGUgc291bmQgdG8gcGxheSAod2lsbCBiZSBjYWNoZWQgc28gaXQgb25seSBsb2FkcyBvbmNlKQ0KICAvL3ZvbCA6IHZvbHVtZSBiZXR3ZWVuIDAgYW5kIDEgKG11bHRpcGxpZWQgYnkgZ2FtZSB2b2x1bWUgc2V0dGluZyk7IGRlZmF1bHRzIHRvIDEgKGZ1bGwgdm9sdW1lKQ0KICAvLyhESVNBQkxFRCkgcGl0Y2hWYXIgOiBwaXRjaCB2YXJpYW5jZSBpbiBicm93c2VycyB0aGF0IHN1cHBvcnQgaXQgKEZpcmVmb3ggb25seSBhdCB0aGUgbW9tZW50KTsgZGVmYXVsdHMgdG8gMC4wNSAod2hpY2ggbWVhbnMgcGl0Y2ggY2FuIGJlIHVwIHRvIC01JSBvciArNSUgYW55dGltZSB0aGUgc291bmQgcGxheXMpDQogIHZhciB2b2x1bWUgPSAxOw0KICB2YXIgdm9sdW1lU2V0dGluZyA9IEdhbWUudm9sdW1lOw0KICBpZiAodHlwZW9mIHZvbCAhPT0gInVuZGVmaW5lZCIpIHZvbHVtZSA9IHZvbDsNCiAgaWYgKHZvbHVtZSA8IC01KSB7DQogICAgdm9sdW1lICs9IDEwOw0KICAgIHZvbHVtZVNldHRpbmcgPSBHYW1lLnZvbHVtZU11c2ljOw0KICB9DQogIGlmICghdm9sdW1lU2V0dGluZyB8fCB2b2x1bWUgPT0gMCkgcmV0dXJuIDA7DQogIGlmICh0eXBlb2YgU291bmRzW3VybF0gPT09ICJ1bmRlZmluZWQiKSB7DQogICAgLy9zb3VuZCBpc24ndCBsb2FkZWQsIGNhY2hlIGl0DQogICAgU291bmRzW3VybF0gPSBuZXcgQXVkaW8odXJsKTsNCiAgICBTb3VuZHNbdXJsXS5vbmxvYWRlZGRhdGEgPSBmdW5jdGlvbiAoZSkgew0KICAgICAgUGxheVNvdW5kKHVybCwgdm9sLCBwaXRjaFZhcik7DQogICAgfTsNCiAgICAvL1NvdW5kc1t1cmxdLmxvYWQoKTsNCiAgfSBlbHNlIGlmIChTb3VuZHNbdXJsXS5yZWFkeVN0YXRlID49IDIgJiYgU291bmRJbnN0c1tTb3VuZEldLnBhdXNlZCkgew0KICAgIHZhciBzb3VuZCA9IFNvdW5kSW5zdHNbU291bmRJXTsNCiAgICBTb3VuZEkrKzsNCiAgICBpZiAoU291bmRJID49IDEyKSBTb3VuZEkgPSAwOw0KICAgIHNvdW5kLnNyYyA9IFNvdW5kc1t1cmxdLnNyYzsNCiAgICAvL3NvdW5kLmN1cnJlbnRUaW1lPTA7DQogICAgc291bmQudm9sdW1lID0gTWF0aC5wb3coKHZvbHVtZSAqIHZvbHVtZVNldHRpbmcpIC8gMTAwLCAyKTsNCiAgICBpZiAocGl0Y2hTdXBwb3J0KSB7DQogICAgICB2YXIgcGl0Y2hWYXIgPSB0eXBlb2YgcGl0Y2hWYXIgPT09ICJ1bmRlZmluZWQiID8gMC4wNSA6IHBpdGNoVmFyOw0KICAgICAgdmFyIHJhdGUgPSAxICsgKE1hdGgucmFuZG9tKCkgKiAyIC0gMSkgKiBwaXRjaFZhcjsNCiAgICAgIHNvdW5kLnByZXNlcnZlc1BpdGNoID0gZmFsc2U7DQogICAgICBzb3VuZC5tb3pQcmVzZXJ2ZXNQaXRjaCA9IGZhbHNlOw0KICAgICAgc291bmQud2Via2l0UHJlc2VydmVzUGl0Y2ggPSBmYWxzZTsNCiAgICAgIHNvdW5kLnBsYXliYWNrUmF0ZSA9IHJhdGU7DQogICAgfQ0KICAgIHRyeSB7DQogICAgICBzb3VuZC5wbGF5KCk7DQogICAgfSBjYXRjaCAoZSkge30NCiAgICAvKg0KCQl2YXIgc291bmQ9U291bmRzW3VybF0uY2xvbmVOb2RlKCk7DQoJCXNvdW5kLnZvbHVtZT1NYXRoLnBvdyh2b2x1bWUqdm9sdW1lU2V0dGluZy8xMDAsMik7DQoJCXNvdW5kLm9uZW5kZWQ9ZnVuY3Rpb24oZSl7aWYgKGUudGFyZ2V0KXtkZWxldGUgZS50YXJnZXQ7fX07DQoJCXNvdW5kLnBsYXkoKTsqLw0KICB9DQp9Ow0KdmFyIFBsYXlNdXNpY1NvdW5kID0gZnVuY3Rpb24gKHVybCwgdm9sLCBwaXRjaFZhcikgew0KICAvL2xpa2UgUGxheVNvdW5kIGJ1dCwgaWYgbXVzaWMgaXMgZW5hYmxlZCwgcGxheSB3aXRoIG11c2ljIHZvbHVtZQ0KICBQbGF5U291bmQodXJsLCAodm9sIHx8IDEpIC0gKE11c2ljID8gMTAgOiAwKSwgcGl0Y2hWYXIpOw0KfTsNCg0KTXVzaWMgPSBmYWxzZTsNClBsYXlDdWUgPSBmdW5jdGlvbiAoY3VlLCBhcmcpIHsNCiAgaWYgKE11c2ljICYmIEdhbWUuanVrZWJveC50cmFja0F1dG8pIE11c2ljLmN1ZShjdWUsIGFyZyk7DQp9Ow0KDQppZiAoIURhdGUubm93KSB7DQogIERhdGUubm93ID0gZnVuY3Rpb24gbm93KCkgew0KICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgfTsNCn0NCg0KdmFyIHRyaWdnZXJBbmltID0gZnVuY3Rpb24gKGVsZW1lbnQsIGFuaW0pIHsNCiAgaWYgKCFlbGVtZW50KSByZXR1cm47DQogIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShhbmltKTsNCiAgdm9pZCBlbGVtZW50Lm9mZnNldFdpZHRoOw0KICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYW5pbSk7DQp9Ow0KDQp2YXIgZGVidWdTdHIgPSAiIjsNCnZhciBEZWJ1ZyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogIGlmICghZGVidWdTdHIpIGRlYnVnU3RyID0gd2hhdDsNCiAgZWxzZSBkZWJ1Z1N0ciArPSAiOyAiICsgd2hhdDsNCn07DQoNCnZhciBUaW1lciA9IHt9Ow0KVGltZXIudCA9IERhdGUubm93KCk7DQpUaW1lci5sYWJlbHMgPSBbXTsNClRpbWVyLnNtb290aGVkID0gW107DQpUaW1lci5yZXNldCA9IGZ1bmN0aW9uICgpIHsNCiAgVGltZXIubGFiZWxzID0gW107DQogIFRpbWVyLnQgPSBEYXRlLm5vdygpOw0KfTsNClRpbWVyLnRyYWNrID0gZnVuY3Rpb24gKGxhYmVsKSB7DQogIGlmICghR2FtZS5zZXNhbWUpIHJldHVybjsNCiAgdmFyIG5vdyA9IERhdGUubm93KCk7DQogIGlmICghVGltZXIuc21vb3RoZWRbbGFiZWxdKSBUaW1lci5zbW9vdGhlZFtsYWJlbF0gPSAwOw0KICBUaW1lci5zbW9vdGhlZFtsYWJlbF0gKz0gKG5vdyAtIFRpbWVyLnQgLSBUaW1lci5zbW9vdGhlZFtsYWJlbF0pICogMC4xOw0KICBUaW1lci5sYWJlbHNbbGFiZWxdID0NCiAgICAnPGRpdiBzdHlsZT0icGFkZGluZy1sZWZ0OjhweDsiPicgKw0KICAgIGxhYmVsICsNCiAgICAiIDogIiArDQogICAgTWF0aC5yb3VuZChUaW1lci5zbW9vdGhlZFtsYWJlbF0pICsNCiAgICAibXM8L2Rpdj4iOw0KICBUaW1lci50ID0gbm93Ow0KfTsNClRpbWVyLmNsZWFuID0gZnVuY3Rpb24gKCkgew0KICBpZiAoIUdhbWUuc2VzYW1lKSByZXR1cm47DQogIHZhciBub3cgPSBEYXRlLm5vdygpOw0KICBUaW1lci50ID0gbm93Ow0KfTsNClRpbWVyLnNheSA9IGZ1bmN0aW9uIChsYWJlbCkgew0KICBpZiAoIUdhbWUuc2VzYW1lKSByZXR1cm47DQogIFRpbWVyLmxhYmVsc1tsYWJlbF0gPQ0KICAgICc8ZGl2IHN0eWxlPSJib3JkZXItdG9wOjFweCBzb2xpZCAjY2NjOyI+JyArIGxhYmVsICsgIjwvZGl2PiI7DQp9Ow0KDQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCkdBTUUgSU5JVElBTElaQVRJT04NCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQp2YXIgR2FtZSA9IHt9Ow0KDQooZnVuY3Rpb24gKCkgew0KICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCglNT0RESU5HIEFQSQ0KCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogIC8qDQoJCXRvIHVzZToNCgkJLShOT1RFOiB0aGlzIGZ1bmN0aW9ucyBhIGxpdHRsZSBkaWZmZXJlbnRseSBpbiB0aGUgc3RhbmRhbG9uZS9TdGVhbSB2ZXJzaW9uOyBoYXZlIGEgbG9vayBpbiB0aGUgZ2FtZSdzIC9tb2RzIGZvbGRlciBmb3IgZXhhbXBsZSBtb2RzIC0gdGhvdWdoIG1vc3Qgb2YgdGhlIGluZm9ybWF0aW9uIGJlbG93IHN0aWxsIGFwcGxpZXMpDQoJCS1oYXZlIHlvdXIgbW9kIGNhbGwgR2FtZS5yZWdpc3Rlck1vZCgidW5pcXVlIGlkIixtb2Qgb2JqZWN0KQ0KCQktdGhlICJ1bmlxdWUgaWQiIHZhbHVlIGlzIGEgc3RyaW5nIHRoZSBtb2Qgd2lsbCB1c2UgdG8gaW5kZXggYW5kIHJldHJpZXZlIGl0cyBzYXZlIGRhdGE7IHNwZWNpYWwgY2hhcmFjdGVycyBhcmUgaWdub3JlZA0KCQktdGhlICJtb2Qgb2JqZWN0IiB2YWx1ZSBpcyBhbiBvYmplY3Qgc3RydWN0dXJlZCBsaWtlIHNvOg0KCQkJew0KCQkJCWluaXQ6ZnVuY3Rpb24oKXsNCgkJCQkJLy90aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhcyBzb29uIGFzIHRoZSBtb2QgaXMgcmVnaXN0ZXJlZA0KCQkJCQkvL2RlY2xhcmUgaG9va3MgaGVyZQ0KCQkJCX0sDQoJCQkJc2F2ZTpmdW5jdGlvbigpew0KCQkJCQkvL3VzZSB0aGlzIHRvIHN0b3JlIHBlcnNpc3RlbnQgZGF0YSBhc3NvY2lhdGVkIHdpdGggeW91ciBtb2QNCgkJCQkJcmV0dXJuICdhIHN0cmluZyB0byBiZSBzYXZlZCc7DQoJCQkJfSwNCgkJCQlsb2FkOmZ1bmN0aW9uKHN0cil7DQoJCQkJCS8vZG8gc3R1ZmYgd2l0aCB0aGUgc3RyaW5nIGRhdGEgeW91IHNhdmVkIHByZXZpb3VzbHkNCgkJCQl9LA0KCQkJfQ0KCQktdGhlIG1vZCBvYmplY3QgbWF5IGFsc28gY29udGFpbiBhbnkgb3RoZXIgZGF0YSBvciBmdW5jdGlvbnMgeW91IHdhbnQsIGZvciBpbnN0YW5jZSB0byBtYWtlIHRoZW0gYWNjZXNzaWJsZSB0byBvdGhlciBtb2RzDQoJCS15b3VyIG1vZCBhbmQgaXRzIGRhdGEgY2FuIGJlIGFjY2Vzc2VkIHdpdGggR2FtZS5tb2RzWydtb2QgaWQnXQ0KCQktaG9va3MgYXJlIGZ1bmN0aW9ucyB0aGUgZ2FtZSBjYWxscyBhdXRvbWF0aWNhbGx5IGluIGNlcnRhaW4gY2lyY3Vtc3RhbmNlcywgbGlrZSB3aGVuIGNhbGN1bGF0aW5nIGNvb2tpZXMgcGVyIGNsaWNrIG9yIHdoZW4gcmVkcmF3aW5nIHRoZSBzY3JlZW4NCgkJLXRvIGFkZCBhIGhvb2s6IEdhbWUucmVnaXN0ZXJIb29rKCdob29rIGlkJyx5b3VyRnVuY3Rpb25IZXJlKSAtIG5vdGU6IHlvdSBjYW4gYWxzbyBkZWNsYXJlIHdob2xlIGFycmF5cyBvZiBob29rcywgaWUuIEdhbWUucmVnaXN0ZXJIb29rKCdob29rIGlkJyxbZnVuY3Rpb24xLGZ1bmN0aW9uMiwuLi5dKQ0KCQktdG8gcmVtb3ZlIGEgaG9vazogR2FtZS5yZW1vdmVIb29rKCdob29rIGlkJyx0aGVTYW1lRnVuY3Rpb25IZXJlKQ0KCQktc29tZSBob29rcyBhcmUgZmVkIGEgcGFyYW1ldGVyIHlvdSBjYW4gdXNlIGluIHRoZSBmdW5jdGlvbg0KCQktbGlzdCBvZiB2YWxpZCBob29rIGlkczoNCgkJCSdsb2dpYycgLSBjYWxsZWQgZXZlcnkgbG9naWMgdGljaw0KCQkJJ2RyYXcnIC0gY2FsbGVkIGV2ZXJ5IGRyYXcgdGljaw0KCQkJJ3Jlc2V0JyAtIGNhbGxlZCB3aGVuZXZlciB0aGUgcGxheWVyIHJlc2V0czsgcGFyYW1ldGVyIGlzIHRydWUgaWYgdGhpcyBpcyBhIGhhcmQgcmVzZXQsIGZhbHNlIGlmIGl0J3MgYW4gYXNjZW5zaW9uDQoJCQkncmVpbmNhcm5hdGUnIC0gY2FsbGVkIHdoZW4gdGhlIHBsYXllciBoYXMgcmVpbmNhcm5hdGVkIGFmdGVyIGFuIGFzY2Vuc2lvbg0KCQkJJ3RpY2tlcicgLSBjYWxsZWQgd2hlbiBkZXRlcm1pbmluZyBuZXdzIHRpY2tlciB0ZXh0OyBzaG91bGQgcmV0dXJuIGFuIGFycmF5IG9mIHBvc3NpYmxlIGNob2ljZXMgdG8gYWRkDQoJCQknY3BzJyAtIGNhbGxlZCB3aGVuIGRldGVybWluaW5nIHRoZSBDcFM7IHBhcmFtZXRlciBpcyB0aGUgY3VycmVudCBDcFM7IHNob3VsZCByZXR1cm4gdGhlIG1vZGlmaWVkIENwUw0KCQkJJ2Nvb2tpZXNQZXJDbGljaycgLSBjYWxsZWQgd2hlbiBkZXRlcm1pbmluZyB0aGUgY29va2llcyBwZXIgY2xpY2s7IHBhcmFtZXRlciBpcyB0aGUgY3VycmVudCB2YWx1ZTsgc2hvdWxkIHJldHVybiB0aGUgbW9kaWZpZWQgdmFsdWUNCgkJCSdjbGljaycgLSBjYWxsZWQgd2hlbiB0aGUgYmlnIGNvb2tpZSBpcyBjbGlja2VkDQoJCQknY3JlYXRlJyAtIGNhbGxlZCBhZnRlciB0aGUgZ2FtZSBkZWNsYXJlcyBhbGwgYnVpbGRpbmdzLCBidWZmcywgdXBncmFkZXMgYW5kIGFjaGlldnM7IHVzZSB0aGlzIHRvIGRlY2xhcmUgeW91ciBvd24gLSBub3RlIHRoYXQgd2hpbGUgdGhlIGdhbWUgZGlzdGluZ3Vpc2hlcyBiZXR3ZWVuIHZhbmlsbGEgYW5kIG5vbi12YW5pbGxhIGNvbnRlbnQsIHNhdmluZy9sb2FkaW5nIGZ1bmN0aW9uYWxpdHkgZm9yIGN1c3RvbSBjb250ZW50IChpbmNsdWRpbmcgc3R1ZmYgbGlrZSBhY3RpdmUgYnVmZnMgb3IgcGVybWFuZW50IHVwZ3JhZGUgc2xvdHRpbmcpIGlzIG5vdCBleHBsaWNpdGx5IGltcGxlbWVudGVkIGFuZCBtYXkgYmUgdW5wcmVkaWN0YWJsZSBhbmQgYnJva2VuDQoJCQknY2hlY2snIC0gY2FsbGVkIGV2ZXJ5IGZldyBzZWNvbmRzIHdoZW4gd2UgY2hlY2sgZm9yIHVwZ3JhZGUvYWNoaWV2IHVubG9jayBjb25kaXRpb25zOyB5b3UgY2FuIGFsc28gdXNlIHRoaXMgZm9yIG90aGVyIGNoZWNrcyB0aGF0IHlvdSBkb24ndCBuZWVkIGhhcHBlbmluZyBldmVyeSBsb2dpYyBmcmFtZQ0KCQktZnVuY3Rpb24gaG9va3MgYXJlIHByb3ZpZGVkIGZvciBjb252ZW5pZW5jZSBhbmQgbW9yZSBhZHZhbmNlZCBtb2QgZnVuY3Rpb25hbGl0eSB3aWxsIHByb2JhYmx5IGludm9sdmUgbWFudWFsIGNvZGUgaW5qZWN0aW9uDQoJCS1wbGVhc2UgYmUgbWluZGZ1bCBvZiB0aGUgbGVuZ3RoIG9mIHRoZSBkYXRhIHlvdSBzYXZlLCBhcyBpdCBkb2VzIGluZmxhdGUgdGhlIGV4cG9ydC1zYXZlLXRvLXN0cmluZyBmZWF0dXJlDQoJCQ0KCQlOT1RFOiBtb2RkaW5nIEFQSSBpcyBzdXNjZXB0aWJsZSB0byBjaGFuZ2UgYW5kIG1heSBub3QgYWx3YXlzIGZ1bmN0aW9uIHN1cGVyLXdlbGwNCgkqLw0KICBHYW1lLm1vZHMgPSB7fTsNCiAgR2FtZS5zb3J0ZWRNb2RzID0gW107DQogIEdhbWUuYnJva2VuTW9kcyA9IFtdOw0KICBHYW1lLm1vZFNhdmVEYXRhID0ge307DQogIEdhbWUubW9kSG9va3MgPSB7fTsNCiAgR2FtZS5tb2RIb29rc05hbWVzID0gWw0KICAgICJsb2dpYyIsDQogICAgImRyYXciLA0KICAgICJyZXNldCIsDQogICAgInJlaW5jYXJuYXRlIiwNCiAgICAidGlja2VyIiwNCiAgICAiY3BzIiwNCiAgICAiY29va2llc1BlckNsaWNrIiwNCiAgICAiY2xpY2siLA0KICAgICJjcmVhdGUiLA0KICAgICJjaGVjayIsDQogIF07DQogIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5tb2RIb29rc05hbWVzLmxlbmd0aDsgaSsrKSB7DQogICAgR2FtZS5tb2RIb29rc1tHYW1lLm1vZEhvb2tzTmFtZXNbaV1dID0gW107DQogIH0NCiAgR2FtZS5yZWdpc3Rlck1vZCA9IGZ1bmN0aW9uIChpZCwgbW9kKSB7DQogICAgaWQgPSBpZC5yZXBsYWNlKC9cVysvZywgIiAiKTsNCiAgICBpZiAoaWQgPT0gIk1FVEEiKSByZXR1cm4gZmFsc2U7DQogICAgaWYgKEdhbWUubW9kc1tpZF0pIHsNCiAgICAgIGNvbnNvbGUubG9nKCdFUlJPUjogbW9kIGFscmVhZHkgcmVnaXN0ZXJlZCB3aXRoIHRoZSBpZCAiJyArIGlkICsgJyIuJyk7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIEdhbWUubW9kc1tpZF0gPSBtb2Q7DQogICAgR2FtZS5zb3J0ZWRNb2RzLnB1c2gobW9kKTsNCiAgICBtb2QuaWQgPSBpZDsNCiAgICBtb2QubmFtZSA9IG1vZC5uYW1lIHx8IGlkOw0KICAgIGlmIChBcHApIEFwcC5yZWdpc3Rlck1vZChtb2QpOw0KICAgIGNvbnNvbGUubG9nKCdNb2QgIicgKyBpZCArICciIGFkZGVkLicpOw0KICAgIGlmIChHYW1lLnJlYWR5ICYmIG1vZC5pbml0KSB7DQogICAgICBpZiAoIUFwcCAmJiBHYW1lLldpbikgR2FtZS5XaW4oIlRoaXJkLXBhcnR5Iik7DQogICAgICBtb2QuaW5pdCgpOw0KICAgICAgaWYgKG1vZC5sb2FkICYmIEdhbWUubW9kU2F2ZURhdGFbaWRdKSBtb2QubG9hZChHYW1lLm1vZFNhdmVEYXRhW2lkXSk7DQogICAgICBtb2QuaW5pdCA9IDA7DQogICAgfQ0KICB9Ow0KICBHYW1lLmxhdW5jaE1vZHMgPSBmdW5jdGlvbiAoKSB7DQogICAgaWYgKEdhbWUuYnJva2VuTW9kcy5sZW5ndGggPiAwKSB7DQogICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgJzxzcGFuIGNsYXNzPSJ3YXJuaW5nIj4nICsNCiAgICAgICAgICBsb2MoIlNvbWUgbW9kcyBjb3VsZG4ndCBiZSBsb2FkZWQ6IikgKw0KICAgICAgICAgICI8L3NwYW4+IiwNCiAgICAgICAgIlsiICsgR2FtZS5icm9rZW5Nb2RzLmpvaW4oIiwgIikgKyAiXSIsDQogICAgICAgIFszMiwgMTddDQogICAgICApOw0KICAgIH0NCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUuc29ydGVkTW9kcy5sZW5ndGg7IGkrKykgew0KICAgICAgdmFyIG1vZCA9IEdhbWUuc29ydGVkTW9kc1tpXTsNCiAgICAgIGlmIChtb2QuaW5pdCkgew0KICAgICAgICBjb25zb2xlLmxvZygiPT09aW5pdGlhbGl6aW5nIG1vZCIsIG1vZC5pZCk7DQogICAgICAgIG1vZC5pbml0KCk7DQogICAgICAgIG1vZC5pbml0ID0gMDsNCiAgICAgICAgLy9pZiAobW9kLmxvYWQgJiYgR2FtZS5tb2RTYXZlRGF0YVttb2QuaWRdKSBtb2QubG9hZChHYW1lLm1vZFNhdmVEYXRhW21vZC5pZF0pOw0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAoIUFwcCAmJiBHYW1lLnNvcnRlZE1vZHMubGVuZ3RoID4gMCkgR2FtZS5XaW4oIlRoaXJkLXBhcnR5Iik7DQogIH07DQogIEdhbWUucmVnaXN0ZXJIb29rID0gZnVuY3Rpb24gKGhvb2ssIGZ1bmMpIHsNCiAgICBpZiAoZnVuYy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZnVuYy5sZW5ndGg7IGkrKykgew0KICAgICAgICBHYW1lLnJlZ2lzdGVySG9vayhob29rLCBmdW5jW2ldKTsNCiAgICAgIH0NCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYgKHR5cGVvZiBmdW5jICE9PSAiZnVuY3Rpb24iKSByZXR1cm47DQogICAgaWYgKHR5cGVvZiBHYW1lLm1vZEhvb2tzW2hvb2tdICE9PSAidW5kZWZpbmVkIikNCiAgICAgIEdhbWUubW9kSG9va3NbaG9va10ucHVzaChmdW5jKTsNCiAgICBlbHNlDQogICAgICBjb25zb2xlLmxvZygNCiAgICAgICAgJ0Vycm9yOiBhIG1vZCB0cmllZCB0byByZWdpc3RlciBhIG5vbi1leGlzdGVudCBob29rIG5hbWVkICInICsNCiAgICAgICAgICBob29rICsNCiAgICAgICAgICAnIi4nDQogICAgICApOw0KICB9Ow0KICBHYW1lLnJlbW92ZUhvb2sgPSBmdW5jdGlvbiAoaG9vaywgZnVuYykgew0KICAgIGlmIChmdW5jLmNvbnN0cnVjdG9yID09PSBBcnJheSkgew0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmdW5jLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIEdhbWUucmVtb3ZlSG9vayhob29rLCBmdW5jW2ldKTsNCiAgICAgIH0NCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYgKHR5cGVvZiBmdW5jICE9PSAiZnVuY3Rpb24iKSByZXR1cm47DQogICAgaWYgKA0KICAgICAgdHlwZW9mIEdhbWUubW9kSG9va3NbaG9va10gIT09ICJ1bmRlZmluZWQiICYmDQogICAgICBHYW1lLm1vZEhvb2tzW2hvb2tdLmluZGV4T2YoZnVuYykgIT0gLTENCiAgICApDQogICAgICBHYW1lLm1vZEhvb2tzW2hvb2tdLnNwbGljZShHYW1lLm1vZEhvb2tzW2hvb2tdLmluZGV4T2YoZnVuYyksIDEpOw0KICAgIGVsc2UNCiAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAnRXJyb3I6IGEgbW9kIHRyaWVkIHRvIHJlbW92ZSBhIG5vbi1leGlzdGVudCBob29rIG5hbWVkICInICsgaG9vayArICciLicNCiAgICAgICk7DQogIH07DQogIEdhbWUucnVuTW9kSG9vayA9IGZ1bmN0aW9uIChob29rLCBwYXJhbSkgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5tb2RIb29rc1tob29rXS5sZW5ndGg7IGkrKykgew0KICAgICAgR2FtZS5tb2RIb29rc1tob29rXVtpXShwYXJhbSk7DQogICAgfQ0KICB9Ow0KICBHYW1lLnJ1bk1vZEhvb2tPblZhbHVlID0gZnVuY3Rpb24gKGhvb2ssIHZhbCkgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5tb2RIb29rc1tob29rXS5sZW5ndGg7IGkrKykgew0KICAgICAgdmFsID0gR2FtZS5tb2RIb29rc1tob29rXVtpXSh2YWwpOw0KICAgIH0NCiAgICByZXR1cm4gdmFsOw0KICB9Ow0KICBHYW1lLnNhZmVTYXZlU3RyaW5nID0gZnVuY3Rpb24gKHN0cikgew0KICAgIC8vbG9vayBhcyBsb25nIGFzIGl0IHdvcmtzDQogICAgc3RyID0gcmVwbGFjZUFsbCgifCIsICJbUF0iLCBzdHIpOw0KICAgIHN0ciA9IHJlcGxhY2VBbGwoIjsiLCAiW1NdIiwgc3RyKTsNCiAgICByZXR1cm4gc3RyOw0KICB9Ow0KICBHYW1lLnNhZmVMb2FkU3RyaW5nID0gZnVuY3Rpb24gKHN0cikgew0KICAgIHN0ciA9IHJlcGxhY2VBbGwoIltQXSIsICJ8Iiwgc3RyKTsNCiAgICBzdHIgPSByZXBsYWNlQWxsKCJbU10iLCAiOyIsIHN0cik7DQogICAgcmV0dXJuIHN0cjsNCiAgfTsNCiAgR2FtZS5zYXZlTW9kRGF0YSA9IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgc3RyID0gIiI7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLnNvcnRlZE1vZHMubGVuZ3RoOyBpKyspIHsNCiAgICAgIGlmIChHYW1lLnNvcnRlZE1vZHNbaV1bInNhdmUiXSkgew0KICAgICAgICB2YXIgZGF0YSA9IEdhbWUuc29ydGVkTW9kc1tpXVsic2F2ZSJdKCk7DQogICAgICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gInVuZGVmaW5lZCIpDQogICAgICAgICAgR2FtZS5tb2RTYXZlRGF0YVtHYW1lLnNvcnRlZE1vZHNbaV0uaWRdID0gZGF0YTsNCiAgICAgIH0NCiAgICB9DQogICAgZm9yICh2YXIgaSBpbiBHYW1lLm1vZFNhdmVEYXRhKSB7DQogICAgICBzdHIgKz0gaSArICI6IiArIEdhbWUuc2FmZVNhdmVTdHJpbmcoR2FtZS5tb2RTYXZlRGF0YVtpXSkgKyAiOyI7DQogICAgfQ0KICAgIGlmIChBcHAgJiYgQXBwLnNhdmVNb2RzKSBzdHIgKz0gQXBwLnNhdmVNb2RzKCk7DQogICAgcmV0dXJuIHN0cjsNCiAgfTsNCiAgR2FtZS5sb2FkTW9kRGF0YSA9IGZ1bmN0aW9uICgpIHsNCiAgICBmb3IgKHZhciBpIGluIEdhbWUubW9kU2F2ZURhdGEpIHsNCiAgICAgIGlmIChHYW1lLm1vZHNbaV0gJiYgR2FtZS5tb2RzW2ldWyJsb2FkIl0pDQogICAgICAgIEdhbWUubW9kc1tpXVsibG9hZCJdKEdhbWUubW9kU2F2ZURhdGFbaV0pOw0KICAgIH0NCiAgfTsNCiAgR2FtZS5kZWxldGVNb2REYXRhID0gZnVuY3Rpb24gKGlkKSB7DQogICAgaWYgKEdhbWUubW9kU2F2ZURhdGFbaWRdKSBkZWxldGUgR2FtZS5tb2RTYXZlRGF0YVtpZF07DQogIH07DQogIEdhbWUuZGVsZXRlQWxsTW9kRGF0YSA9IGZ1bmN0aW9uICgpIHsNCiAgICBHYW1lLm1vZFNhdmVEYXRhID0ge307DQogIH07DQogIEdhbWUuQ2hlY2tNb2REYXRhID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBtb2RzTiA9IDA7DQogICAgdmFyIHN0ciA9ICIiOw0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5tb2RTYXZlRGF0YSkgew0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IHN0eWxlPSJib3JkZXItYm90dG9tOjFweCBkYXNoZWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpO2NsZWFyOmJvdGg7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmc6NHB4IDBweDsiPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgc3R5bGU9ImZsb2F0OmxlZnQ7d2lkdGg6NDklO3RleHQtYWxpZ246bGVmdDtvdmVyZmxvdzpoaWRkZW47Ij48Yj4nICsNCiAgICAgICAgaSArDQogICAgICAgICI8L2I+IjsNCiAgICAgIGlmIChHYW1lLm1vZHNbaV0pIHN0ciArPSAiICIgKyBsb2MoIihsb2FkZWQpIik7DQogICAgICBzdHIgKz0gIjwvZGl2PiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0O3dpZHRoOjQ5JTt0ZXh0LWFsaWduOnJpZ2h0O292ZXJmbG93OmhpZGRlbjsiPicgKw0KICAgICAgICBsb2MoIiUxIGNoYXIiLCBHYW1lLm1vZFNhdmVEYXRhW2ldLmxlbmd0aCkgKw0KICAgICAgICAnIDxhIGNsYXNzPSJvcHRpb24gd2FybmluZyIgc3R5bGU9InBhZGRpbmc6MHB4IDJweDtmb250LXNpemU6MTBweDttYXJnaW46MHB4O3ZlcnRpY2FsLWFsaWduOnRvcDsiICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgIj1cIkdhbWUuZGVsZXRlTW9kRGF0YSgnIiArDQogICAgICAgIGkgKw0KICAgICAgICAiJyk7UGxheVNvdW5kKCdzbmQvdGljay5tcDMnKTtHYW1lLkNsb3NlUHJvbXB0KCk7R2FtZS5DaGVja01vZERhdGEoKTtcIj5YPC9hPiI7DQogICAgICBzdHIgKz0gIjwvZGl2PiI7DQogICAgICBzdHIgKz0gIjwvZGl2PiI7DQogICAgICBtb2RzTisrOw0KICAgIH0NCiAgICBpZiAobW9kc04gPT0gMCkgc3RyICs9IGxvYygiTm8gbW9kIGRhdGEgcHJlc2VudC4iKTsNCiAgICBlbHNlDQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXY+PGEgY2xhc3M9Im9wdGlvbiB3YXJuaW5nIiBzdHlsZT0iZm9udC1zaXplOjExcHg7bWFyZ2luLXRvcDo0cHg7IiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICI9XCJHYW1lLmRlbGV0ZUFsbE1vZERhdGEoKTtQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO0dhbWUuQ2xvc2VQcm9tcHQoKTtHYW1lLkNoZWNrTW9kRGF0YSgpO1wiPiIgKw0KICAgICAgICBsb2MoIkRlbGV0ZSBhbGwiKSArDQogICAgICAgICI8L2E+PC9kaXY+IjsNCiAgICBHYW1lLlByb21wdCgNCiAgICAgICI8aWQgTW9kRGF0YT48aDM+IiArDQogICAgICAgIGxvYygiTW9kIGRhdGEiKSArDQogICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgdGlueUljb24oWzE2LCA1XSkgKw0KICAgICAgICAiPGRpdj48L2Rpdj4iICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJUaGVzZSBhcmUgdGhlIG1vZHMgcHJlc2VudCBpbiB5b3VyIHNhdmUgZGF0YS4gWW91IG1heSBkZWxldGUgc29tZSBvZiB0aGlzIGRhdGEgdG8gbWFrZSB5b3VyIHNhdmUgZmlsZSBzbWFsbGVyLiINCiAgICAgICAgKSArDQogICAgICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJibG9jayIgc3R5bGU9ImZvbnQtc2l6ZToxMXB4OyI+JyArDQogICAgICAgIHN0ciArDQogICAgICAgICI8L2Rpdj4iLA0KICAgICAgW2xvYygiQmFjayIpXQ0KICAgICk7DQogIH07DQoNCiAgR2FtZS5Mb2FkTW9kID0gTG9hZFNjcmlwdDsgLy9sb2FkcyB0aGUgbW9kIGF0IHRoZSBnaXZlbiBVUkwNCg0KICBpZiAoZmFsc2UpIHsNCiAgICAvL0VYQU1QTEUgTU9EDQogICAgR2FtZS5yZWdpc3Rlck1vZCgidGVzdCBtb2QiLCB7DQogICAgICAvKg0KCQkJCXdoYXQgdGhpcyBleGFtcGxlIG1vZCBkb2VzOg0KCQkJCS1kb3VibGUgeW91ciBDcFMNCgkJCQktZGlzcGxheSBhIGxpdHRsZSBwb3B1cCBmb3IgaGFsZiBhIHNlY29uZCB3aGVuZXZlciB5b3UgY2xpY2sgdGhlIGJpZyBjb29raWUNCgkJCQktYWRkIGEgbGl0dGxlIGludHJvIHRleHQgYWJvdmUgeW91ciBiYWtlcnkgbmFtZSwgYW5kIGdlbmVyYXRlIHRoYXQgaW50cm8gdGV4dCBhdCByYW5kb20gaWYgeW91IGRvbid0IGFscmVhZHkgaGF2ZSBvbmUNCgkJCQktc2F2ZSBhbmQgbG9hZCB5b3VyIGludHJvIHRleHQNCgkJCSovDQogICAgICBpbml0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUucmVnaXN0ZXJIb29rKCJyZWluY2FybmF0ZSIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBHYW1lLm1vZHNbInRlc3QgbW9kIl0uYWRkSW50cm8oKTsNCiAgICAgICAgfSk7DQogICAgICAgIEdhbWUucmVnaXN0ZXJIb29rKCJjaGVjayIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoIUdhbWUucGxheWVySW50cm8pIHsNCiAgICAgICAgICAgIEdhbWUubW9kc1sidGVzdCBtb2QiXS5hZGRJbnRybygpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICAgIEdhbWUucmVnaXN0ZXJIb29rKCJjbGljayIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICJBIGdvb2QgY2xpY2suIiwNCiAgICAgICAgICAgICAgIkEgc29saWQgY2xpY2suIiwNCiAgICAgICAgICAgICAgIkEgbWVkaW9jcmUgY2xpY2suIiwNCiAgICAgICAgICAgICAgIkFuIGV4Y2VsbGVudCBjbGljayEiLA0KICAgICAgICAgICAgXSksDQogICAgICAgICAgICAiIiwNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICAwLjUNCiAgICAgICAgICApOw0KICAgICAgICB9KTsNCiAgICAgICAgR2FtZS5yZWdpc3Rlckhvb2soImNwcyIsIGZ1bmN0aW9uIChjcHMpIHsNCiAgICAgICAgICByZXR1cm4gY3BzICogMjsNCiAgICAgICAgfSk7DQogICAgICB9LA0KICAgICAgc2F2ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAvL25vdGU6IHdlIHVzZSBzdHJpbmdpZmllZCBKU09OIGZvciBlYXNlIGFuZCBjbGFyaXR5IGJ1dCB5b3UgY291bGQgc3RvcmUgYW55IHR5cGUgb2Ygc3RyaW5nDQogICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7IHRleHQ6IEdhbWUucGxheWVySW50cm8gfSk7DQogICAgICB9LA0KICAgICAgbG9hZDogZnVuY3Rpb24gKHN0cikgew0KICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTsNCiAgICAgICAgaWYgKGRhdGEudGV4dCkgR2FtZS5tb2RzWyJ0ZXN0IG1vZCJdLmFkZEludHJvKGRhdGEudGV4dCk7DQogICAgICB9LA0KICAgICAgYWRkSW50cm86IGZ1bmN0aW9uICh0ZXh0KSB7DQogICAgICAgIC8vbm90ZTogdGhpcyBpcyBub3QgYSBtb2QgaG9vaywganVzdCBhIGZ1bmN0aW9uIHRoYXQncyBwYXJ0IG9mIHRoZSBtb2QNCiAgICAgICAgR2FtZS5wbGF5ZXJJbnRybyA9DQogICAgICAgICAgdGV4dCB8fA0KICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAib2ggc25hcCwgaXQncyIsDQogICAgICAgICAgICAid2F0Y2ggb3V0LCBpdCdzIiwNCiAgICAgICAgICAgICJvaCBubyEgaGVyZSBjb21lcyIsDQogICAgICAgICAgICAiaGlkZSB5b3VyIGNvb2tpZXMsIGZvciBoZXJlIGNvbWVzIiwNCiAgICAgICAgICAgICJiZWhvbGQhIGl0J3MiLA0KICAgICAgICAgIF0pOw0KICAgICAgICBpZiAoIWwoImJha2VyeVN1YnRpdGxlIikpDQogICAgICAgICAgbCgiYmFrZXJ5TmFtZSIpLmluc2VydEFkamFjZW50SFRNTCgNCiAgICAgICAgICAgICJhZnRlcmVuZCIsDQogICAgICAgICAgICAnPGRpdiBpZD0iYmFrZXJ5U3VidGl0bGUiIGNsYXNzPSJ0aXRsZSIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MHB4O3JpZ2h0OjBweDtib3R0b206MzJweDtmb250LXNpemU6MTJweDtwb2ludGVyLWV2ZW50czpub25lO3RleHQtc2hhZG93OjBweCAxcHggMXB4ICMwMDAsMHB4IDBweCA0cHggI2YwMDtvcGFjaXR5OjAuODsiPjwvZGl2PicNCiAgICAgICAgICApOw0KICAgICAgICBsKCJiYWtlcnlTdWJ0aXRsZSIpLnRleHRDb250ZW50ID0gIn4iICsgR2FtZS5wbGF5ZXJJbnRybyArICJ+IjsNCiAgICAgIH0sDQogICAgfSk7DQogIH0NCg0KICAvL3JlcGxhY2luZyBhbiBleGlzdGluZyBjYW52YXMgcGljdHVyZSB3aXRoIGEgbmV3IG9uZSBhdCBydW50aW1lIDogR2FtZS5Mb2FkZXIuUmVwbGFjZSgncGVyZmVjdENvb2tpZS5wbmcnLCdpbXBlcmZlY3RDb29raWUucG5nJyk7DQogIC8vdXBncmFkZXMgYW5kIGFjaGlldmVtZW50cyBjYW4gdXNlIG90aGVyIHBpY3R1cmVzIHRoYW4gaWNvbnMucG5nOyBkZWNsYXJlIHRoZWlyIGljb24gd2l0aCBbcG9zWCxwb3NZLCdodHRwOi8vZXhhbXBsZS5jb20vbXlJY29ucy5wbmcnXQ0KICAvL2NoZWNrIG91dCB0aGUgIlVOTE9DS0lORyBTVFVGRiIgc2VjdGlvbiB0byBzZWUgaG93IHVubG9ja2luZyBhY2hpZXZzIGFuZCB1cGdyYWRlcyBpcyBkb25lDQp9KSgpOw0KDQpHYW1lLnZlcnNpb24gPSBWRVJTSU9OOw0KR2FtZS5sb2FkZWRGcm9tVmVyc2lvbiA9IFZFUlNJT047DQpHYW1lLmJldGEgPSBCRVRBOw0KaWYgKCFBcHAgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigiL2JldGEiKSA+IC0xKSBHYW1lLmJldGEgPSAxOw0KZWxzZSBpZiAoQXBwICYmIG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5nZXQoImJldGEiKSkNCiAgR2FtZS5iZXRhID0gMTsNCkdhbWUuaHR0cHMgPSAhQXBwID8gKGxvY2F0aW9uLnByb3RvY29sICE9ICJodHRwczoiID8gZmFsc2UgOiB0cnVlKSA6IHRydWU7DQpHYW1lLlNhdmVUbyA9ICJDb29raWVDbGlja2VyR2FtZSI7DQppZiAoR2FtZS5iZXRhKSBHYW1lLlNhdmVUbyA9ICJDb29raWVDbGlja2VyR2FtZUJldGEiOw0KaWYgKEFwcCAmJiBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KCJtb2RsZXNzIikpDQogIEdhbWUubW9kbGVzcyA9IDE7DQoNCkdhbWUuTGF1bmNoID0gZnVuY3Rpb24gKCkgew0KICBHYW1lLm1vYmlsZSA9IDA7DQogIEdhbWUudG91Y2hFdmVudHMgPSAwOw0KICAvL2lmICgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIEdhbWUubW9iaWxlPTE7DQogIC8vaWYgKEdhbWUubW9iaWxlKSBHYW1lLnRvdWNoRXZlbnRzPTE7DQogIC8vaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgR2FtZS50b3VjaEV2ZW50cz0xOw0KDQogIHZhciBjc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOw0KICBjc3MudHlwZSA9ICJ0ZXh0L2NzcyI7DQogIGNzcy5pbm5lckhUTUwgPQ0KICAgICJib2R5IC5pY29uLGJvZHkgLmNyYXRlLGJvZHkgLnVzZXNJY29ue2JhY2tncm91bmQtaW1hZ2U6dXJsKGltZy9pY29ucy5wbmc/dj0iICsNCiAgICBHYW1lLnZlcnNpb24gKw0KICAgICIpO30iOw0KICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGNzcyk7DQoNCiAgLy90aGlzIGlzIHNvIHNoaW1tZXJzIGNhbiBzdGlsbCBhcHBlYXIgZXZlbiBpZiB5b3UgbG9zZSBjb25uZWN0aW9uIGFmdGVyIHRoZSBnYW1lIGlzIGxvYWRlZA0KICB2YXIgcHJlbG9hZEltYWdlcyA9IFsNCiAgICAiaW1nL2dvbGRDb29raWUucG5nIiwNCiAgICAiaW1nL3dyYXRoQ29va2llLnBuZyIsDQogICAgImltZy9zcG9va3lDb29raWUucG5nIiwNCiAgICAiaW1nL2hlYXJ0cy5wbmciLA0KICAgICJpbWcvY29udHJhY3QucG5nIiwNCiAgICAiaW1nL3dyYXRoQ29udHJhY3QucG5nIiwNCiAgICAiaW1nL2J1bm5pZXMucG5nIiwNCiAgICAiaW1nL2Zyb3N0ZWRSZWluZGVlci5wbmciLA0KICBdOw0KICB2YXIgcHJlbG9hZEltYWdlc0wgPSBsKCJwcmVsb2FkSW1hZ2VzIik7DQogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJlbG9hZEltYWdlcy5sZW5ndGg7IGkrKykgew0KICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsNCiAgICBpbWcuc3JjID0gcHJlbG9hZEltYWdlc1tpXTsNCiAgICBwcmVsb2FkSW1hZ2VzTC5hcHBlbmRDaGlsZChpbWcpOw0KICB9DQoNCiAgR2FtZS52aXNpYmxlID0gdHJ1ZTsNCiAgQWRkRXZlbnQoZG9jdW1lbnQsICJ2aXNpYmlsaXR5Y2hhbmdlIiwgZnVuY3Rpb24gKGUpIHsNCiAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAiaGlkZGVuIikgR2FtZS52aXNpYmxlID0gZmFsc2U7DQogICAgZWxzZSBHYW1lLnZpc2libGUgPSB0cnVlOw0KICB9KTsNCg0KICBpZiAoIUVOKSB7DQogICAgLy9jb2RlLXBhdGNoaW5nIHRoZSBDU1MgZm9yIGxvY2FsaXphdGlvbiBmZWVscyBsaWtlIGl0IHNob3VsZCBiZSBhZ2FpbnN0IHRoZSBsYXcsIGFuZCB5ZXQNCiAgICB2YXIgY3NzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsNCiAgICBjc3MudHlwZSA9ICJ0ZXh0L2NzcyI7DQogICAgY3NzLmlubmVySFRNTCA9DQogICAgICAiI3VwZ3JhZGVzOmJlZm9yZXtjb250ZW50OiciICsNCiAgICAgIGxvYygiVXBncmFkZXMiKSArDQogICAgICAiJzt9IiArDQogICAgICAiI3RvZ2dsZVVwZ3JhZGVzOmJlZm9yZXtjb250ZW50OiciICsNCiAgICAgIGxvYygiU3dpdGNoZXMiKSArDQogICAgICAiJzt9IiArDQogICAgICAiI3RlY2hVcGdyYWRlczpiZWZvcmV7Y29udGVudDonIiArDQogICAgICBsb2MoIlJlc2VhcmNoIikgKw0KICAgICAgIic7fSIgKw0KICAgICAgIiN2YXVsdFVwZ3JhZGVzOmJlZm9yZXtjb250ZW50OiciICsNCiAgICAgIGxvYygiVmF1bHQiKSArDQogICAgICAiJzt9IiArDQogICAgICAiI3Byb2R1Y3RzOmJlZm9yZXtjb250ZW50OiciICsNCiAgICAgIGxvYygiQnVpbGRpbmdzIikgKw0KICAgICAgIic7fSIgKw0KICAgICAgIiI7DQogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChjc3MpOw0KICB9DQoNCiAgR2FtZS5iYXNlU2Vhc29uID0gIiI7IC8vaGFsbG93ZWVuLCBjaHJpc3RtYXMsIHZhbGVudGluZXMsIGZvb2xzLCBlYXN0ZXINCiAgLy9hdXRvbWF0aWMgc2Vhc29uIGRldGVjdGlvbiAobWlnaHQgbm90IGJlIDEwMCUgYWNjdXJhdGUpDQogIHZhciB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOw0KICB2YXIgbGVhcCA9ICh5ZWFyICUgNCA9PSAwICYmIHllYXIgJSAxMDAgIT0gMCkgfHwgeWVhciAlIDQwMCA9PSAwID8gMSA6IDA7DQogIHZhciBkYXkgPSBNYXRoLmZsb29yKA0KICAgIChuZXcgRGF0ZSgpIC0gbmV3IERhdGUoeWVhciwgMCwgMCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpDQogICk7DQogIGlmIChkYXkgPj0gNDEgJiYgZGF5IDw9IDQ2KSBHYW1lLmJhc2VTZWFzb24gPSAidmFsZW50aW5lcyI7DQogIGVsc2UgaWYgKGRheSArIGxlYXAgPj0gOTAgJiYgZGF5IDw9IDkyICsgbGVhcCkgR2FtZS5iYXNlU2Vhc29uID0gImZvb2xzIjsNCiAgZWxzZSBpZiAoZGF5ID49IDMwNCAtIDcgKyBsZWFwICYmIGRheSA8PSAzMDQgKyBsZWFwKQ0KICAgIEdhbWUuYmFzZVNlYXNvbiA9ICJoYWxsb3dlZW4iOw0KICBlbHNlIGlmIChkYXkgPj0gMzQ5ICsgbGVhcCAmJiBkYXkgPD0gMzY1ICsgbGVhcCkNCiAgICBHYW1lLmJhc2VTZWFzb24gPSAiY2hyaXN0bWFzIjsNCiAgZWxzZSB7DQogICAgLy9lYXN0ZXIgaXMgYSBwYWluIGdvZGRhbW4NCiAgICB2YXIgZWFzdGVyRGF5ID0gKGZ1bmN0aW9uIChZKSB7DQogICAgICB2YXIgQyA9IE1hdGguZmxvb3IoWSAvIDEwMCk7DQogICAgICB2YXIgTiA9IFkgLSAxOSAqIE1hdGguZmxvb3IoWSAvIDE5KTsNCiAgICAgIHZhciBLID0gTWF0aC5mbG9vcigoQyAtIDE3KSAvIDI1KTsNCiAgICAgIHZhciBJID0gQyAtIE1hdGguZmxvb3IoQyAvIDQpIC0gTWF0aC5mbG9vcigoQyAtIEspIC8gMykgKyAxOSAqIE4gKyAxNTsNCiAgICAgIEkgPSBJIC0gMzAgKiBNYXRoLmZsb29yKEkgLyAzMCk7DQogICAgICBJID0NCiAgICAgICAgSSAtDQogICAgICAgIE1hdGguZmxvb3IoSSAvIDI4KSAqDQogICAgICAgICAgKDEgLQ0KICAgICAgICAgICAgTWF0aC5mbG9vcihJIC8gMjgpICoNCiAgICAgICAgICAgICAgTWF0aC5mbG9vcigyOSAvIChJICsgMSkpICoNCiAgICAgICAgICAgICAgTWF0aC5mbG9vcigoMjEgLSBOKSAvIDExKSk7DQogICAgICB2YXIgSiA9IFkgKyBNYXRoLmZsb29yKFkgLyA0KSArIEkgKyAyIC0gQyArIE1hdGguZmxvb3IoQyAvIDQpOw0KICAgICAgSiA9IEogLSA3ICogTWF0aC5mbG9vcihKIC8gNyk7DQogICAgICB2YXIgTCA9IEkgLSBKOw0KICAgICAgdmFyIE0gPSAzICsgTWF0aC5mbG9vcigoTCArIDQwKSAvIDQ0KTsNCiAgICAgIHZhciBEID0gTCArIDI4IC0gMzEgKiBNYXRoLmZsb29yKE0gLyA0KTsNCiAgICAgIHJldHVybiBuZXcgRGF0ZShZLCBNIC0gMSwgRCk7DQogICAgfSkoeWVhcik7DQogICAgZWFzdGVyRGF5ID0gTWF0aC5mbG9vcigNCiAgICAgIChlYXN0ZXJEYXkgLSBuZXcgRGF0ZShlYXN0ZXJEYXkuZ2V0RnVsbFllYXIoKSwgMCwgMCkpIC8NCiAgICAgICAgKDEwMDAgKiA2MCAqIDYwICogMjQpDQogICAgKTsNCiAgICBpZiAoZGF5ID49IGVhc3RlckRheSAtIDcgJiYgZGF5IDw9IGVhc3RlckRheSkgR2FtZS5iYXNlU2Vhc29uID0gImVhc3RlciI7DQogIH0NCg0KICBHYW1lLnVwZGF0ZUxvZyA9DQogICAgJzxkaXYgY2xhc3M9InNlbGVjdGFibGUiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJzZWN0aW9uIj4nICsNCiAgICBsb2MoIkluZm8iKSArDQogICAgIjwvZGl2PiIgKw0KICAgICc8ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgIGxvYygiQWJvdXQiKSArDQogICAgIjwvZGl2PiIgKw0KICAgIChBcHANCiAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciIHN0eWxlPSJmb250LXdlaWdodDpib2xkO2ZvbnQtc3R5bGU6aXRhbGljO29wYWNpdHk6MC41OyI+JyArDQogICAgICAgIGxvYygiTm90ZTogbGlua3Mgd2lsbCBvcGVuIGluIHlvdXIgd2ViIGJyb3dzZXIuIikgKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICAgOiAiIikgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4nICsNCiAgICBsb2MoIkNvb2tpZSBDbGlja2VyIGlzIGEgamF2YXNjcmlwdCBnYW1lIGJ5ICUxIGFuZCAlMi4iLCBbDQogICAgICAnPGEgaHJlZj0iLy9vcnRlaWwuZGFzaG5ldC5vcmciIHRhcmdldD0iX2JsYW5rIj5PcnRlaWw8L2E+JywNCiAgICAgICc8YSBocmVmPSIvL2Rhc2huZXQub3JnIiB0YXJnZXQ9Il9ibGFuayI+T3B0aTwvYT4nLA0KICAgIF0pICsNCiAgICAiPC9kaXY+IiArDQogICAgKEFwcA0KICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JyArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiTXVzaWMgYnkgJTEuIiwNCiAgICAgICAgICAnPGEgaHJlZj0iaHR0cHM6Ly90d2l0dGVyLmNvbS9DNDE4IiB0YXJnZXQ9Il9ibGFuayI+QzQxODwvYT4nDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICAgOiAiIikgKw0KICAgIC8vJzxkaXYgY2xhc3M9Imxpc3RpbmciPldlIGhhdmUgYW4gPGEgaHJlZj0iaHR0cHM6Ly9kaXNjb3JkYXBwLmNvbS9pbnZpdGUvY29va2llIiB0YXJnZXQ9Il9ibGFuayI+b2ZmaWNpYWwgRGlzY29yZDwvYT4sIGFzIHdlbGwgYXMgYSA8YSBocmVmPSJodHRwOi8vZm9ydW0uZGFzaG5ldC5vcmciIHRhcmdldD0iX2JsYW5rIj5mb3J1bTwvYT47ICcrDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPicgKw0KICAgIChFTg0KICAgICAgPyAnV2UgaGF2ZSBhbiA8YSBocmVmPSJodHRwczovL2Rpc2NvcmRhcHAuY29tL2ludml0ZS9jb29raWUiIHRhcmdldD0iX2JsYW5rIj5vZmZpY2lhbCBEaXNjb3JkPC9hPjsgaWYgeW91XCdyZSBsb29raW5nIGZvciBoZWxwLCB5b3UgbWF5IGFsc28gd2FudCB0byB2aXNpdCB0aGUgPGEgaHJlZj0iaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9yL0Nvb2tpZUNsaWNrZXIiIHRhcmdldD0iX2JsYW5rIj5zdWJyZWRkaXQ8L2E+IG9yIHRoZSA8YSBocmVmPSJodHRwczovL2Nvb2tpZWNsaWNrZXIud2lraWEuY29tL3dpa2kvQ29va2llX0NsaWNrZXJfV2lraSIgdGFyZ2V0PSJfYmxhbmsiPndpa2k8L2E+Ljxicj5OZXdzIGFuZCB0ZWFzZXJzIGFyZSB1c3VhbGx5IHBvc3RlZCBvbiBPcnRlaWxcJ3MgPGEgaHJlZj0iaHR0cHM6Ly9vcnRlaWw0Mi50dW1ibHIuY29tLyIgdGFyZ2V0PSJfYmxhbmsiPnR1bWJscjwvYT4gYW5kIDxhIGhyZWY9Imh0dHBzOi8vdHdpdHRlci5jb20vb3J0ZWlsNDIiIHRhcmdldD0iX2JsYW5rIj50d2l0dGVyPC9hPi4nDQogICAgICA6IGxvYygiVXNlZnVsIGxpbmtzOiAlMSwgJTIsICUzLCAlNC4iLCBbDQogICAgICAgICAgJzxhIGhyZWY9Imh0dHBzOi8vZGlzY29yZGFwcC5jb20vaW52aXRlL2Nvb2tpZSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbEJsYWNrQnV0dG9uIj5EaXNjb3JkPC9hPicsDQogICAgICAgICAgJzxhIGhyZWY9Imh0dHBzOi8vY29va2llY2xpY2tlci53aWtpYS5jb20vd2lraS9Db29raWVfQ2xpY2tlcl9XaWtpIiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImhpZ2hsaWdodEhvdmVyIHNtYWxsQmxhY2tCdXR0b24iPndpa2k8L2E+JywNCiAgICAgICAgICAnPGEgaHJlZj0iaHR0cHM6Ly9vcnRlaWw0Mi50dW1ibHIuY29tLyIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbEJsYWNrQnV0dG9uIj50dW1ibHI8L2E+JywNCiAgICAgICAgICAnPGEgaHJlZj0iaHR0cHM6Ly90d2l0dGVyLmNvbS9vcnRlaWw0MiIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbEJsYWNrQnV0dG9uIj50d2l0dGVyPC9hPicsDQogICAgICAgIF0pKSArDQogICAgIjwvZGl2PiIgKw0KICAgICghQXBwDQogICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIGJsb2NrIiBzdHlsZT0ibWFyZ2luOjhweCAzMnB4O2ZvbnQtc2l6ZToxMXB4O2xpbmUtaGVpZ2h0OjExMCU7Y29sb3I6cmdiYSgyMDAsMjAwLDI1NSwxKTtiYWNrZ3JvdW5kOnJnYmEoMTI4LDEyOCwyNTUsMC4xNSk7IiBpZD0ic3VwcG9ydFNlY3Rpb24iPicgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIlRoaXMgdmVyc2lvbiBvZiBDb29raWUgQ2xpY2tlciBpcyAxMDAlIGZyZWUsIGZvcmV2ZXIuIFdhbnQgdG8gc3VwcG9ydCB1cyBzbyB3ZSBjYW4ga2VlcCBkZXZlbG9waW5nIGdhbWVzPyBIZXJlJ3Mgc29tZSB3YXlzIHlvdSBjYW4gaGVscDolMSIsDQogICAgICAgICAgWw0KICAgICAgICAgICAgKCFBcHANCiAgICAgICAgICAgICAgPyAiPGJyPjxicj4mYnVsbDsgIiArDQogICAgICAgICAgICAgICAgKEVOID8gImdldCAiIDogIiIpICsNCiAgICAgICAgICAgICAgICAnPGEgaHJlZj0iaHR0cHM6Ly9zdG9yZS5zdGVhbXBvd2VyZWQuY29tL2FwcC8xNDU0NDAwL0Nvb2tpZV9DbGlja2VyLyIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbFdoaXRlQnV0dG9uIj5Db29raWUgQ2xpY2tlciBvbiBTdGVhbTwvYT4nDQogICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgIiIgKw0KICAgICAgICAgICAgICAoRU4gPyAiIChpdCdzIGFib3V0IDUgYnVja3MpIiA6ICIiKSArDQogICAgICAgICAgICAgICI8YnI+PGJyPiZidWxsOyAiICsNCiAgICAgICAgICAgICAgKEVOID8gInN1cHBvcnQgdXMgb24gIiA6ICIiKSArDQogICAgICAgICAgICAgICc8YSBocmVmPSJodHRwczovL3d3dy5wYXRyZW9uLmNvbS9kYXNobmV0IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImhpZ2hsaWdodEhvdmVyIHNtYWxsT3JhbmdlQnV0dG9uIj5QYXRyZW9uPC9hPicgKw0KICAgICAgICAgICAgICAoRU4gPyAiICh0aGVyZSdzIHBlcmtzISkiIDogIiIpICsNCiAgICAgICAgICAgICAgIjxicj48YnI+JmJ1bGw7ICIgKw0KICAgICAgICAgICAgICAoRU4gPyAiY2hlY2sgb3V0IG91ciAiIDogIiIpICsNCiAgICAgICAgICAgICAgJzxhIGhyZWY9Imh0dHA6Ly93d3cucmVkYnViYmxlLmNvbS9wZW9wbGUvZGFzaG5ldCIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbFdoaXRlQnV0dG9uIj5TaG9wPC9hPicgKw0KICAgICAgICAgICAgICAoRU4gPyAiIHdpdGggcmFkIGNvb2tpZSBzaGlydHMsIGhvb2RpZXMgYW5kIHN0aWNrZXJzIiA6ICIiKSArDQogICAgICAgICAgICAgICghQXBwICYmIEVODQogICAgICAgICAgICAgICAgPyAiPGJyPjxicj4mYnVsbDsgZGlzYWJsZSB5b3VyIGFkYmxvY2tlciAoaWYgeW91IHdhbnQhKSINCiAgICAgICAgICAgICAgICA6ICIiKSwNCiAgICAgICAgICBdDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+PC9kaXY+Ig0KICAgICAgOiAiIikgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIHdhcm5pbmciPicgKw0KICAgIGxvYygNCiAgICAgICJOb3RlOiBpZiB5b3UgZmluZCBhIG5ldyBidWcgYWZ0ZXIgYW4gdXBkYXRlIGFuZCB5b3UncmUgdXNpbmcgYSAzcmQtcGFydHkgYWRkLW9uLCBtYWtlIHN1cmUgaXQncyBub3QganVzdCB5b3VyIGFkZC1vbiBjYXVzaW5nIGl0ISINCiAgICApICsNCiAgICAiPC9kaXY+IiArDQogICAgKCFBcHANCiAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3Rpbmcgd2FybmluZyI+JyArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiV2FybmluZzogY2xlYXJpbmcgeW91ciBicm93c2VyIGNhY2hlIG9yIGNvb2tpZXMgPHNtYWxsPih3aGF0IGVsc2U/KTwvc21hbGw+IHdpbGwgcmVzdWx0IGluIHlvdXIgc2F2ZSBiZWluZyB3aXBlZC4gRXhwb3J0IHlvdXIgc2F2ZSBhbmQgYmFjayBpdCB1cCBmaXJzdCEiDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICAgOiAiIikgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgIGxvYygiVmVyc2lvbiBoaXN0b3J5IikgKw0KICAgICI8L2Rpdj4iOw0KDQogIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jUGF0Y2hlcy5sZW5ndGg7IGkrKykgew0KICAgIHZhciBwYXRjaCA9IGxvY1BhdGNoZXNbaV07DQogICAgdmFyIHBhdGNoVGV4dCA9DQogICAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUnICsNCiAgICAgIChwYXRjaC50eXBlID09IDIgPyAiIHNtYWxsIiA6ICIiKSArDQogICAgICAnIj4nICsNCiAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+JyArDQogICAgICBwYXRjaC50aXRsZSArDQogICAgICAiPC9kaXY+IjsNCiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgcGF0Y2gucG9pbnRzLmxlbmd0aDsgaWkrKykgew0KICAgICAgcGF0Y2hUZXh0ICs9ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgJyArIHBhdGNoLnBvaW50c1tpaV0gKyAiPC9kaXY+IjsNCiAgICB9DQogICAgR2FtZS51cGRhdGVMb2cgKz0gcGF0Y2hUZXh0Ow0KICB9DQoNCiAgaWYgKCFFTikNCiAgICBHYW1lLnVwZGF0ZUxvZyArPQ0KICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciIHN0eWxlPSJmb250LXdlaWdodDpib2xkO2ZvbnQtc3R5bGU6aXRhbGljO29wYWNpdHk6MC41OyI+JyArDQogICAgICBsb2MoIk5vdGU6IG9sZGVyIHVwZGF0ZSBub3RlcyBhcmUgaW4gRW5nbGlzaC4iKSArDQogICAgICAiPC9kaXY+IjsNCg0KICBHYW1lLnVwZGF0ZUxvZyArPQ0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4zMS8wNS8yMDIyIC0gYSBtaW5kIG9mIGl0cyBvd248L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbmV3IGJ1aWxkaW5nPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyB0aWVyIG9mIHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG11bHRpLWxhbmd1YWdlIHN1cHBvcnQgYWRkZWQgdG8gd2ViIHZlcnNpb248L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgZmV3IG5ldyBoZWF2ZW5seSB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgdGhlIGp1a2Vib3g8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSAzIHNlY3JldCBoZWF2ZW5seSB1cGdyYWRlcyBub3cgcmVseSBvbiBob3cgbWFueSB0aW1lcyB0aGUgcmVsZXZhbnQgZGlnaXQgaXMgcHJlc2VudCBpbiB0b3RhbCwgcmF0aGVyIHRoYW4gYXQgdGhlIGVuZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYmFja2dyb3VuZHMgb3ZlcmhhdWxlZDsgZXh0cmEgb3B0aW9ucyBmb3IgdGhlIGJhY2tncm91bmQgc2VsZWN0b3I8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGV4dHJhIG9wdGlvbnMgZm9yIHRoZSBnb2xkZW4gY29va2llIHNvdW5kIHNlbGVjdG9yPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgYmFuayBtaW5pZ2FtZSBub3cgdGVsbHMgeW91IHRoZSB2YWx1ZSB5b3UgcHJldmlvdXNseSBib3VnaHQgYSBzdG9jayBhdDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGhlIGJhbmsgbWluaWdhbWUgZmxvdyBpcyBhIGxpdHRsZSBtb3JlIGV4Y2l0aW5nPC9kaXY+JyArDQogICAgKEFwcA0KICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBvcHRpb24gdG8gZGlzYWJsZSB5b3VyIGdhbWUgYWN0aXZpdHkgc2hvd2luZyB1cCBpbiBEaXNjb3JkPC9kaXY+Jw0KICAgICAgOiAiIikgKw0KICAgIChBcHANCiAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBsYXVuY2ggZXJyb3JzIG5vdyBwcm92aWRlIHRoZSBvcHRpb24gdG8gcmVzdGFydCB3aXRob3V0IG1vZHM8L2Rpdj4nDQogICAgICA6ICIiKSArDQogICAgKEFwcA0KICAgICAgPyAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjE4LzEyLzIwMjEgLSB3b3JrIGl0PC9kaXY+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgU3RlYW0gV29ya3Nob3Agc3VwcG9ydCAobGV0cyB5b3UgaW5zdGFsbCBtb2RzIGFuZCB1cGxvYWQgeW91ciBvd24pPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgS29yZWFuIGxhbmd1YWdlIHN1cHBvcnQ8L2Rpdj4nICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBiYWNrICJzaG9ydCBudW1iZXJzIiBvcHRpb24gZm9yIG5vbi1lbmdsaXNoIGxhbmd1YWdlcyAodXNlcyBlbmdsaXNoIHRlcm1zIGZvciB0aGUgdGltZSBiZWluZyk8L2Rpdj4nICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCB0b29sdGlwcyBvbiBhY2hpZXZlbWVudCBub3RpZmljYXRpb25zPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgRGlzY29yZCByaWNoIHByZXNlbmNlIHN1cHBvcnQ8L2Rpdj4nDQogICAgICA6ICIiKSArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzA5LzIwMjEgLSBnaXZlIG1lIFN0ZWFtPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBDb29raWUgQ2xpY2tlciBoYXMgYmVlbiA8YSBocmVmPSJodHRwczovL3N0b3JlLnN0ZWFtcG93ZXJlZC5jb20vYXBwLzE0NTQ0MDAvQ29va2llX0NsaWNrZXIvIiB0YXJnZXQ9Il9ibGFuayI+cmVsZWFzZWQgb24gU3RlYW08L2E+IHdpdGggbXVzaWMgYnkgQzQxOCE8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdlYiB2ZXJzaW9uIGFuZCBTdGVhbSB2ZXJzaW9uIHdpbGwgcmVjZWl2ZSB0aGUgc2FtZSB1cGRhdGVzIGZyb20gbm93IG9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB5b3UgY2FuIG5vdyBwbGF5IGluIDEzIGRpZmZlcmVudCBsYW5ndWFnZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBvcHRpb24gdG8gZGlzYWJsZSBzY2FyeSBzdHVmZjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYmFzaWMgc2NyZWVuLXJlYWRlciBzdXBwb3J0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB2YXJpb3VzIG90aGVyIGltcHJvdmVtZW50czwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4wMS8xMS8yMDIwIC0gYWx0ZXJuYXRlIHJlYWxpdHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBidWlsZGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IHVwZ3JhZGUgdGllcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IGFjaGlldmVtZW50IHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBoZWF2ZW5seSB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IG1vZGRpbmcgQVBJPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBuZXcgcmViYWxhbmNpbmcgKGFzY2Vuc2lvbiBzbG90IHByaWNlcywgZmluZ2VyIHVwZ3JhZGVzLi4uKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IGZpeGVzIChsZWFwIHllYXJzLCBnaG9zdCBzd2FwcywgY2FycnlvdmVyIHNlZWRzLi4uKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IHN0dWZmPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjIzLzA4LzIwMjAgLSBtb25leSBtZSwgbW9uZXkgbm93PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmaW5hbGl6ZWQgc3RvY2sgbWFya2V0IG1pbmlnYW1lIGJldGEgYW5kIGFkZGVkIGl0IHRvIGxpdmUgdmVyc2lvbjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZGFyayBtb2RlIGFkZGVkIHRvIHN0b2NrIG1hcmtldCBtaW5pZ2FtZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2FuIG5vIGxvbmdlciBzZWxlY3QgYSBtaWxrIGJlZm9yZSB1bmxvY2tpbmcgaXQ7IG1pbGsgc2VsZWN0b3IgbGF5b3V0IGhhcyBiZWVuIGltcHJvdmVkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzdG9jayBtYXJrZXQgZ29vZHMgaGF2ZSBoaWdoZXIgdmFsdWUgY2FwcyBhbmQgYSBsYXJnZXIgc3ByZWFkOyBjYW4gYWxzbyBzaGlmdC1jbGljayB0aGUgaGlkZSBidXR0b25zIHRvIGhpZGUvc2hvdyBhbGwgb3RoZXIgc3RvY2tzPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjA4LzA4LzIwMjAgLSBjaGVja2luZyBhY2NvdW50IChiZXRhKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3RvY2sgbWFya2V0IGxheW91dCBoYXMgYmVlbiByZXZpc2VkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzZWxsaW5nIHN0b2NrcyBubyBsb25nZXIgaW5jcmVhc2VzIGNvb2tpZXMgYmFrZWQgYWxsIHRpbWU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHN0b2NrIHByaWNlcyBhcmUgbm93IGRlZmluZWQgYnkgeW91ciBoaWdoZXN0IHJhdyBDcFMgdGhpcyBhc2NlbnNpb24gKHdoaWNoIGlzIG5vdyBkaXNwbGF5ZWQgaW4gdGhlIHN0YXRzIHNjcmVlbik8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNhbiBubyBsb25nZXIgYnV5IGFuZCBzZWxsIGEgc3RvY2sgaW4gdGhlIHNhbWUgdGljazwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgd2FyZWhvdXNlIHNwYWNlIG5vdyBnYWlucyArMTAgcGVyIGFzc29jaWF0ZWQgYnVpbGRpbmcgbGV2ZWwgKHVwIGZyb20gKzUpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBiYW5rIGxldmVsIG5vdyBpbXByb3ZlcyBhdmVyYWdlIChhbmQgbWF4aW11bSkgc3RvY2sgdmFsdWVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBsYXRlciBzdG9ja3MgYXJlIHdvcnRoIG1vcmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IENvb2tpZSBDbGlja2VyIHR1cm5zIDchPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjE4LzA2LzIwMjAgLSBtYWtpbmcgYmFuayAoYmV0YSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHRoZSBzdG9jayBtYXJrZXQgbWluaWdhbWUsIGFjY2Vzc2libGUgd2l0aCBsZXZlbCAxIGJhbmtzIG9yIGFib3ZlOyBidXkgbG93LCBzZWxsIGhpZ2ghPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyAobWluaWdhbWUgc3ViamVjdCB0byBoZWF2eSByZWJhbGFuY2luZyBvdmVyIHRoZSBjb21pbmcgcGF0Y2hlcyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgY291cGxlIGhlYXZlbmx5IHVwZ3JhZGVzLCBpbmNsdWRpbmcgb25lIHRoYXQgbGV0cyB5b3UgcGV0IHlvdXIgZHJhZ29uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyB0aWVyIG9mIGJ1aWxkaW5nIHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlaW5kZWVyIGNsaWNrcyBub3cgcHJvcGVybHkgY291bnQgZm9yIHNoaW1tZXJpbmcgdmVpbDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbnVtYmVycyBpbiBzY2llbnRpZmljIG5vdGF0aW9uIHNob3VsZCBkaXNwbGF5IGJldHRlciB3aXRoIFNob3J0IG51bWJlcnMgb2ZmPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZXBsYWNlZCDjg4QgaW4gdGhlIGphdmFzY3JpcHQgY29uc29sZSBidWlsZGluZyBkaXNwbGF5IHdpdGggbW9yZSBhY2N1cmF0ZSDjg4M8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MjgvMDkvMjAxOSAtIGdvaW5nIG9mZi1zY3JpcHQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbmV3IGJ1aWxkaW5nPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBmb3J0dW5lIGNvb2tpZXMgKGEgbmV3IGhlYXZlbmx5IHVwZ3JhZGUpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtb3JlIHVwZ3JhZGVzLCBhY2hpZXZlbWVudHMgZXRjPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB1cGRhdGVkIHRoZSBSdXNzaWFuIGJyZWFkIGNvb2tpZXMgaWNvbiB0byBiZXR0ZXIgcmVmbGVjdCB0aGVpciBjeXJpbGxpYyBvcmlnaW5zPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyA8aSBzdHlsZT0iZm9udC1zdHlsZTppdGFsaWM7Ij5zdGVhbHRoIHVwZGF0ZSA6PC9pPiB0aGUgc3VnYXIgbHVtcCByZWZpbGwgdGltZW91dCAobm90IHN1Z2FyIGx1bXAgZ3Jvd3RoKSBub3cgbm8gbG9uZ2VyIHRpY2tzIGRvd24gd2hpbGUgdGhlIGdhbWUgaXMgY2xvc2VkICh0aGlzIGZpeGVzIGFuIGV4cGxvaXQpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhbHNvIHJlbGVhc2VkIHRoZSBvZmZpY2lhbCBBbmRyb2lkIHZlcnNpb24gb2YgQ29va2llIENsaWNrZXIsIHBsYXlhYmxlIDxhIGhyZWY9Imh0dHBzOi8vcGxheS5nb29nbGUuY29tL3N0b3JlL2FwcHMvZGV0YWlscz9pZD1vcmcuZGFzaG5ldC5jb29raWVjbGlja2VyIiB0YXJnZXQ9Il9ibGFuayI+aGVyZTwvYT4gKGlPUyB2ZXJzaW9uIHdpbGwgY29tZSBsYXRlcik8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDEvMDQvMjAxOSAtIDIuMDE5ICh0aGUgInRoaXMgeWVhciIgdXBkYXRlKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZ2FtZSBoYXMgYmVlbiByZW5hbWVkIHRvICJDb29raWUgQ2xpY2tlciIgdG8gYXZvaWQgY29uZnVzaW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjYW4gbm93IGNsaWNrIHRoZSBiaWcgY29va2llIHRvIGdlbmVyYXRlIGNvb2tpZXMgZm9yIGZyZWU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlbW92ZWQgZmFsbCBkYW1hZ2U8L2Rpdj4nICsNCiAgICAvLyc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZml4ZWQgdmFyaW91cyB0eXBvcyA6IHBsYXllclwncyBuYW1lIGlzIG5vdyBjb3JyZWN0bHkgc3BlbGxlZCBhcyAiW2Jha2VyeU5hbWVdIjwvZGl2PicrDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZW1vdmVkIGFsbCByZWZlcmVuY2VzIHRvIGNvbXB1dGVyLWFuaW1hdGVkIG1vdmllIDxpIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPkhvb2R3aW5rZWQhPC9pPiAoMjAwNSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdlbnQgYmFjayBpbiB0aW1lIGFuZCBpbnZlbnRlZCBjb29raWVzIGFuZCBjb21wdXRlciBtaWNlLCBlbnN1cmluZyBDb29raWUgQ2xpY2tlciB3b3VsZCBvbmUgZGF5IGNvbWUgdG8gZXhpc3Q8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdhbWUgbm93IGZ1bGx5IGNvbXBsaWFudCB3aXRoIEdlbmV2YSBDb252ZW50aW9uczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZHJvcHBlZCBzdXBwb3J0IGZvciBUSS04NCB2ZXJzaW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZWxlYXNlZCBhIGxvdy1yZXMgcmV0cm8gdmVyc2lvbiBvZiB0aGUgZ2FtZSwgcGxheWFibGUgaGVyZSA6IDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2V4cGVyaW1lbnRzL2Nvb2tpZS8iIHRhcmdldD0iX2JsYW5rIj5vcnRlaWwuZGFzaG5ldC5vcmcvZXhwZXJpbWVudHMvY29va2llPC9hPjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdXBkYXRlZCB2ZXJzaW9uIG51bWJlcjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4wNS8wMy8yMDE5IC0gY29va2llcyBmb3IgZGF5czwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgb3ZlciAyMCBuZXcgY29va2llcywgYWxsIHByZXZpb3VzbHkgc3VnZ2VzdGVkIGJ5IG91ciBzdXBwb3J0ZXJzIG9uIDxhIGhyZWY9Imh0dHBzOi8vd3d3LnBhdHJlb24uY29tL2Rhc2huZXQiIHRhcmdldD0iX2JsYW5rIj5QYXRyZW9uPC9hPjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgMiBoZWF2ZW5seSB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGhlIEdvbGRlbiBnb29zZSBlZ2cgbm93IGNvdW50cyBhcyBhIGdvbGRlbiBjb29raWUgdXBncmFkZSBmb3IgUmVzaWR1YWwgbHVjayBwdXJwb3NlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZ29sZGVuIHN1Z2FyIGx1bXBzIG5vdyBlaXRoZXIgZG91YmxlIHlvdXIgY29va2llcywgb3IgZ2l2ZSB5b3UgMjQgaG91cnMgb2YgeW91ciBDcFMsIHdoaWNoZXZlciBpcyBsb3dlc3QgKHByZXZpb3VzbHkgd2FzIGRvdWJsaW5nIGNvb2tpZXMgd2l0aCBubyBjYXApPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgYW1vdW50IG9mIGhlcmFsZHMgaXMgbm93IHNhdmVkIHdpdGggeW91ciBnYW1lLCBhbmQgaXMgdXNlZCB0byBjb21wdXRlIG9mZmxpbmUgQ3BTIHRoZSBuZXh0IHRpbWUgdGhlIGdhbWUgaXMgbG9hZGVkOyBwcmV2aW91c2x5LCBvbiBwYWdlIGxvYWQsIHRoZSBvZmZsaW5lIGNhbGN1bGF0aW9uIGFzc3VtZWQgaGVyYWxkcyB0byBiZSAwPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIHN5c3RlbSB0byBjb3VudGVyYWN0IHRoZSBnYW1lIGZyZWV6aW5nIHVwIChhbmQgbm90IGJha2luZyBjb29raWVzKSBhZnRlciBiZWluZyBpbmFjdGl2ZSBmb3IgYSBsb25nIHdoaWxlIG9uIHNsb3dlciBjb21wdXRlcnM7IGluc3RlYWQsIHRoaXMgd2lsbCBub3cgdHJpZ2dlciBzbGVlcCBtb2RlLCBkdXJpbmcgd2hpY2ggeW91IHN0aWxsIHByb2R1Y2UgY29va2llcyBhcyBpZiB0aGUgZ2FtZSB3YXMgY2xvc2VkOyB0byBlbmFibGUgdGhpcyBmZWF0dXJlLCB1c2UgdGhlICJTbGVlcCBtb2RlIHRpbWVvdXQiIG9wdGlvbiBpbiB0aGUgc2V0dGluZ3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHZhdWx0aW5nIHVwZ3JhZGVzIGlzIG5vdyBkb25lIHdpdGggc2hpZnQtY2xpY2ssIGFzIGN0cmwtY2xpY2sgd2FzIHBvc2luZyBpc3N1ZXMgZm9yIE1hYyBicm93c2VyczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbWFkZSB0b29sdGlwcyBmb3IgYnVpbGRpbmcgQ3BTIGJvb3N0cyBmcm9tIHN5bmVyZ2llcyBob3BlZnVsbHkgY2xlYXJlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZml4ZWQgYW4gZXhwbG9pdCB3aXRoIGdhbWJsZXJcJ3MgZmV2ZXIgZHJlYW0gd29ya2luZyBhY3Jvc3MgZXhwb3J0cyBhbmQgYXNjZW5zaW9uczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2FuIG5vdyBoaWRlIHRvb2x0aXBzIGluIHRoZSBnYXJkZW4gYnkga2VlcGluZyB0aGUgc2hpZnQga2V5IHByZXNzZWQgdG8gbWFrZSBpdCBlYXNpZXIgdG8gc2VlIHdoZXJlIHlvdVwncmUgcGxhbnRpbmc8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZpeGVkIGEgYnVnIHdpdGggZ29sZGVuIGNvb2tpZXMvcmVpbmRlZXIgbm90IGRpc2FwcGVhcmluZyBwcm9wZXJseSBpbiBzb21lIGNpcmN1bXN0YW5jZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBEcmFnb25cJ3MgQ3VydmUgYXVyYSBzaG91bGQgbm93IHByb3Blcmx5IG1ha2Ugc3VnYXIgbHVtcHMgdHdpY2UgYXMgd2VpcmQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBjdHJsIGtleSBzaG91bGQgbGVzcyBvZnRlbiByZWdpc3RlciBpbmNvcnJlY3RseSBhcyBwcmVzc2VkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyBhZCBzbG90IGluIHRoZSB0b3AtcmlnaHQsIGFzIHdoaWxlIG91ciBwbGF5ZXJiYXNlIGlzIHN0cm9uZyBhbmQgc3VwcG9ydGl2ZSBhcyBldmVyLCBvdXIgYWQgcmV2ZW51ZSBzb21ldGltZXMgZmx1Y3R1YXRlcyBiYWRseTsgd2UgbWF5IHJlbW92ZSB0aGUgYWQgYWdhaW4gc2hvdWxkIG91ciBpbmNvbWUgc3RhYmlsaXplPC9kaXY+JyArDQogICAgIjxkaXYgY2xhc3M9XCJsaXN0aW5nXCI+JmJ1bGw7IG1hZGUgYSBmZXcgYWRqdXN0bWVudHMgdG8gbWFrZSB0aGUgZ2FtZSBzb21ld2hhdCBwbGF5YWJsZSBpbiBtb2JpbGUgYnJvd3NlcnM7IGl0J3Mgbm90IHBlcmZlY3QgYW5kIGNhbiBnZXQgYnVnZ3ksIGJ1dCBpdCdzIGZ1bmN0aW9uYWwhICh5b3UgbWF5IG5lZWQgdG8gem9vbSBvdXQgb3Igc2Nyb2xsIGFyb3VuZCB0byB2aWV3IHRoZSBnYW1lIHByb3Blcmx5KTwvZGl2PiIgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3BlYWtpbmcgb2Ygd2hpY2gsIHdlIGFsc28gZ290IHNvbWUgZ29vZCBwcm9ncmVzcyBvbiB0aGUgbW9iaWxlIGFwcCB2ZXJzaW9uIChidWlsdCBmcm9tIHNjcmF0Y2ggZm9yIG1vYmlsZSksIHNvIHN0YXkgdHVuZWQhPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjI1LzEwLzIwMTggLSBmZWVkYmFjayBsb29wPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyBidWlsZGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbGF1bmNoZWQgb3VyIDxhIGhyZWY9Imh0dHBzOi8vd3d3LnBhdHJlb24uY29tL2Rhc2huZXQiIGNsYXNzPSJvcmFuZ2VMaW5rIiB0YXJnZXQ9Il9ibGFuayI+UGF0cmVvbjwvYT4gPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo4MCU7Ij4odGhlIGxpbmsgaXMgb3JhbmdlIHNvIHlvdVwnbGwgbm90aWNlIGl0ISk8L3NwYW4+PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIGJ1bmNoIG9mIG5ldyBoZWF2ZW5seSB1cGdyYWRlcywgb25lIG9mIHdoaWNoIHRpZXMgaW50byBvdXIgUGF0cmVvbiBidXQgYmVuZWZpdHMgZXZlcnlvbmUgKHRoaXMgaXMgc3RpbGwgZXhwZXJpbWVudGFsISk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdoZW4gaG92ZXJpbmcgb3ZlciBncmFuZG1hcywgeW91IGNhbiBub3cgc2VlIHRoZWlyIG5hbWVzIGFuZCBhZ2VzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyAibWFrZSBYIGNvb2tpZXMganVzdCBmcm9tIFkiIHJlcXVpcmVtZW50cyBhcmUgbm93IGhpZ2hlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdHdlYWtlZCB0aGUgcHJpY2VzIG9mIHNvbWUgaGVhdmVubHkgdXBncmFkZXMgdG8gYmV0dGVyIGZpdCB0aGUgY3VycmVudCBjb29raWUgZWNvbm9teSAoaXQgdHVybnMgb3V0IGJpbGxpb25zIG9mIGhlYXZlbmx5IGNoaXBzIGlzIG5vdyB2ZXJ5IGFjaGlldmFibGUpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZyB0b29sdGlwcyBub3cgZGlzcGxheSB3aGF0ICUgb2YgQ3BTIHRoZXkgY29udHJpYnV0ZSB0aHJvdWdoIHN5bmVyZ3kgdXBncmFkZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHF1ZWVuYmVldHMgbm93IGdpdmUgdXAgdG8gNCUgb2YgYmFuaywgZG93biBmcm9tIDYlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhbW9uZyBvdGhlciB0aGluZ3MsIHNlYXNvbiBzd2l0Y2hlcyBub3cgZGlzcGxheSBob3cgbWFueSBzZWFzb25hbCB1cGdyYWRlcyB5b3VcJ3JlIG1pc3NpbmcsIGFuZCBwZXJtYW5lbnQgdXBncmFkZSBzbG90cyBub3cgZGlzcGxheSB0aGUgbmFtZSBvZiB0aGUgc2xvdHRlZCB1cGdyYWRlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzZWFzb24gc3dpdGNoZXMgaGF2ZSByZXdvcmtlZCBwcmljZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNlYXNvbiBzd2l0Y2hlcyBjYW4gbm93IGJlIGNhbmNlbGxlZCBieSBjbGlja2luZyB0aGVtIGFnYWluPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjYW4gbm8gbG9uZ2VyIGFjY2lkZW50YWxseSBjbGljayB3cmlua2xlcnMgdGhyb3VnaCBvdGhlciBlbGVtZW50czwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3VnYXIgZnJlbnp5IG5vdyB0cmlwbGVzIHlvdXIgQ3BTIGZvciBhbiBob3VyIGluc3RlYWQgb2YgZG91YmxpbmcgaXQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoaXMgdGV4dCBpcyBub3cgc2VsZWN0YWJsZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgcHJvZ3Jlc3Mgb24gZHVuZ2VvbnMgbWluaWdhbWUgaXMgc3RpbGwgdmVyeSBtdWNoIG9uZ29pbmc8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDgvMDgvMjAxOCAtIGhleSBub3c8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IENvb2tpZSBDbGlja2VyIHNvbWVob3cgdHVybnMgNSwgZ29pbmcgYWdhaW5zdCBkb2N0b3JzXCcgbW9zdCBvcHRpbWlzdGljIGVzdGltYXRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBuZXcgdGllciBvZiBidWlsZGluZyBhY2hpZXZlbWVudHMsIGFsbCBuYW1lZCBhZnRlciBTbWFzaCBNb3V0aFwncyBjbGFzc2ljIDE5OTkgaGl0ICJBbGwgU3RhciI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbmV3IHRpZXIgb2YgYnVpbGRpbmcgdXBncmFkZXMsIGFsbCBuYW1lZCBhZnRlciBub3RoaW5nIGluIHBhcnRpY3VsYXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IDxiPnRvIG91ciBwbGF5ZXJzIDo8L2I+IHRoYW5rIHlvdSBzbyBtdWNoIGZvciBzdGlja2luZyB3aXRoIHVzIGFsbCB0aG9zZSB5ZWFycyBhbmQgYWxsb3dpbmcgdXMgdG8ga2VlcCBtYWtpbmcgdGhlIGR1bWJlc3QgZ2FtZSBrbm93biB0byBtYW5raW5kPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZXN1bWVkIHdvcmsgb24gdGhlIGR1bmdlb25zIG1pbmlnYW1lPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzA4LzIwMTggLSBidXkgYnV5IGJ1eTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBoZWF2ZW5seSB1cGdyYWRlIHRoYXQgbGV0cyB5b3UgYnV5IGFsbCB5b3VyIHVwZ3JhZGVzIGluc3RhbnRseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBoZWF2ZW5seSB1cGdyYWRlIHRoYXQgbGV0cyB5b3Ugc2VlIHVwZ3JhZGUgdGllcnMgKGZlYXR1cmUgd2FzIHByZXZpb3VzbHkgcmVtb3ZlZCBkdWUgdG8gYmVpbmcgY29uZnVzaW5nKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBuZXcgd3JpbmtsZXItcmVsYXRlZCBoZWF2ZW5seSB1cGdyYWRlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyB1cGdyYWRlIHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgY291cGxlIG5ldyBjb29raWVzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyAiZXh0cmEgYnV0dG9ucyIgc2V0dGluZzsgdHVybmluZyBpdCBvbiBhZGRzIGJ1dHRvbnMgdGhhdCBsZXQgeW91IG1pbmltaXplIGJ1aWxkaW5nczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3ICJsdW1wIGNvbmZpcm1hdGlvbiIgc2V0dGluZzsgdHVybmluZyBpdCBvbiB3aWxsIHNob3cgYSBjb25maXJtYXRpb24gcHJvbXB0IHdoZW4geW91IHNwZW5kIHN1Z2FyIGx1bXBzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZ3Mgbm93IHNlbGwgYmFjayBmb3IgMjUlIG9mIHRoZWlyIGN1cnJlbnQgcHJpY2UgKGRvd24gZnJvbSA1MCUpOyBFYXJ0aCBTaGF0dGVyZXIgbW9kaWZpZWQgYWNjb3JkaW5nbHksIG5vdyBnaXZlcyBiYWNrIDUwJSAoZG93biBmcm9tIDg1JSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZhcm0gc29pbHMgbm93IHVubG9jayBjb3JyZWN0bHkgYmFzZWQgb24gY3VycmVudCBhbW91bnQgb2YgZmFybXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNoZWFwY2FwcyBoYXZlIGEgbmV3IGV4Y2l0aW5nIG5lcmY8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdyaW5rbGVnaWxsIHNwYXducyBhIGJ1bmNoIG1vcmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNhbiBub3cgY3RybC1zaGlmdC1jbGljayBvbiAiSGFydmVzdCBhbGwiIHRvIG9ubHkgaGFydmVzdCBtYXR1cmUsIG5vbi1pbW1vcnRhbCBwbGFudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbmV3IHJhcmUgdHlwZSBvZiBzdWdhciBsdW1wPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjIwLzA0LzIwMTggLSB3ZWVkaW5nIG91dCBzb21lIGJ1Z3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjbG92ZXJzIGFuZCB3cmlua2xlZ2lsbHMgc2hvdWxkIHNwYXduIGEgYml0IG1vcmUgb2Z0ZW48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNyb25lcmljZSBtYXR1cmVzIGEgbG90IHNvb25lcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbWF0dXJlIGVsZGVyd29ydHMgc3RheSBtYXR1cmUgYWZ0ZXIgcmVsb2FkaW5nPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnYXJkZW4gaW50ZXJmYWNlIG9jY3VwaWVzIHNwYWNlIG1vcmUgaW50ZWxsaWdlbnRseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc2VlZCBwcmljZSBkaXNwbGF5cyBzaG91bGQgYmUgYmV0dGVyIGJlaGF2ZWQgd2l0aCBzaG9ydCBudW1iZXJzIGRpc2FibGVkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtaW5pZ2FtZSBhbmltYXRpb25zIGFyZSBub3cgdHVybmVkIG9mZiBpZiB1c2luZyB0aGUgIkZhbmN5IGdyYXBoaWNzIiBvcHRpb24gaXMgZGlzYWJsZWQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IENwUyBhY2hpZXZlbWVudCByZXF1aXJlbWVudHMgd2VyZSBkaWFsZWQgZG93biBhIHdlZSB0YWQ8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MTkvMDQvMjAxOCAtIGdhcmRlbiBwYXRjaDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdXBncmFkZXMgZHJvcHBlZCBieSBnYXJkZW4gcGxhbnRzIG5vdyBzdGF5IHVubG9ja2VkIGZvcmV2ZXIgKGJ1dCBkcm9wIG11Y2ggbW9yZSByYXJlbHkpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnYXJkZW4gc3VnYXIgbHVtcCByZWZpbGwgbm93IGFsc28gbWFrZXMgcGxhbnRzIHNwcmVhZCBhbmQgbXV0YXRlIDMgdGltZXMgbW9yZSBkdXJpbmcgdGhlIGJvbnVzIHRpY2s8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGEgZmV3IG5ldyB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYSBjb3VwbGUgYnVnIGZpeGVzIGFuZCByZXBocmFzaW5nczwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4xOC8wNC8yMDE4IC0geW91ciBnYXJkZW4tdmFyaWV0eSB1cGRhdGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHRoZSBnYXJkZW4sIGEgbWluaWdhbWUgdW5sb2NrZWQgYnkgaGF2aW5nIGF0IGxlYXN0IGxldmVsIDEgZmFybXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbGl0dGxlIGFycm93IGFuZCBhIGJsaW5reSBsYWJlbCB0byBzaWduYWwgdGhlIGdhbWUgaGFzIHVwZGF0ZWQgc2luY2UgeW91IGxhc3QgcGxheWVkIGl0IChoaSEpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBuZXcgY29va2llcywgbWlsayBmbGF2b3JzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHN1Z2FyIGx1bXBzIGFyZSBub3cgdW5sb2NrZWQgd2hlbmV2ZXIgeW91XCd2ZSBiYWtlZCBhdCBsZWFzdCBhIGJpbGxpb24gY29va2llcywgaW5zdGVhZCBvZiBvbiB5b3VyIGZpcnN0IGFzY2Vuc2lvbjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3VnYXIgbHVtcCB0eXBlIG5vdyBzYXZlcyBjb3JyZWN0bHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG1pbmlnYW1lIHN1Z2FyIGx1bXAgcmVmaWxscyBjYW4gbm93IG9ubHkgYmUgZG9uZSBldmVyeSAxNSBtaW51dGVzICh0aW1lciBzaGFyZWQgYWNyb3NzIGFsbCBtaW5pZ2FtZXMpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBDcFMgYWNoaWV2ZW1lbnRzIG5vdyBoYXZlIHN0ZWVwZXIgcmVxdWlyZW1lbnRzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnb2xkZW4gY29va2llcyBub3cgbGFzdCA1JSBzaG9ydGVyIGZvciBldmVyeSBvdGhlciBnb2xkZW4gY29va2llIG9uIHRoZSBzY3JlZW48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBnYW1lIG5vdyByZW1lbWJlcnMgd2hpY2ggbWluaWdhbWVzIGFyZSBjbG9zZWQgb3Igb3BlbjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBwb3B1cCB0aGF0IHNob3dzIHdoZW4gYSBzZWFzb24gc3RhcnRzIChzbyBwZW9wbGUgd29uXCd0IGJlIHNvIGNvbmZ1c2VkIGFib3V0ICJ0aGUgZ2FtZSBsb29raW5nIHdlaXJkIHRvZGF5Iik8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHBlcm1hbmVudCB1cGdyYWRlIHNsb3RzIG5vdyBzaG93IGEgdG9vbHRpcCBmb3IgdGhlIHNlbGVjdGVkIHVwZ3JhZGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZpbmFsbHkgZml4ZWQgdGhlIHNhdmUgY29ycnVwdGlvbiBidWcsIGhvcGVmdWxseTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNC8wMi8yMDE4IC0gc3VnYXIgY29hdGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgbGluayB0byA8YSBocmVmPSJodHRwczovL2Rpc2NvcmRhcHAuY29tL2ludml0ZS9jb29raWUiIHRhcmdldD0iX2JsYW5rIj5vZmZpY2lhbCBEaXNjb3JkIHNlcnZlcjwvYT48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZlbHQgd2VpcmQgYWJvdXQgcHVzaGluZyBhbiB1cGRhdGUgd2l0aG91dCBjb250ZW50IHNvIDo8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgaGFuZGZ1bCBvZiBuZXcgY29va2llczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgMyBuZXcgaGVhdmVubHkgdXBncmFkZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNob3J0IG51bWJlcnMgc2hvdWxkIG5vdyBiZSBkaXNwbGF5ZWQgdXAgdG8gbm92ZW1ub25hZ2ludGlsbGlvbnM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNvb2tpZSBjaGFpbnMgbm8gbG9uZ2VyIHNwYXduIGZyb20gdGhlIEZvcmNlIHRoZSBIYW5kIG9mIEZhdGUgc3BlbGw8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGJpZ2dlciwgYmV0dGVyIENvb2tpZSBDbGlja2VyIGNvbnRlbnQgY29taW5nIGxhdGVyIHRoaXMgeWVhcjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4wOC8wOC8yMDE3IC0gNCBtb3JlIHllYXJzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBuZXcgYnVpbGRpbmcgOiBDaGFuY2VtYWtlcnM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBtaWxrLCBuZXcga2l0dGVucywgbmV3IGRyYWdvbiBhdXJhLCBuZXcgY29va2llLCBuZXcgdXBncmFkZSB0aWVyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWZmcyBubyBsb25nZXIgYWZmZWN0IG9mZmxpbmUgQ3BTPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBHb2R6YW1va1wncyBodW5nZXIgd2FzIG1hZGUgbGVzcyBwb3RlbnQgKHRoaXMgaXMgYSBuZXJmLCB2ZXJ5IHNvcnJ5KTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZ3JpbW9pcmUgc3BlbGwgY29zdHMgYW5kIG1heGltdW0gbWFnaWMgd29yayBkaWZmZXJlbnRseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgU3BvbnRhbmVvdXMgRWRpZmljZSBoYXMgYmVlbiByZXdvcmtlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2hhbmdlZCB1bmxvY2sgbGV2ZWxzIGFuZCBwcmljZXMgZm9yIHNvbWUgY3Vyc29yIHVwZ3JhZGVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmaXhlZCBidWdneSBwYW50aGVvbiBzbG90cywgaG9wZWZ1bGx5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmaXhlZCAiTGVnYWN5IHN0YXJ0ZWQgYSBsb25nIHdoaWxlIGFnbyIgc2hvd2luZyBhcyAiYSBmZXcgc2Vjb25kcyBhZ28iPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBDb29raWUgQ2xpY2tlciBqdXN0IHR1cm5lZCA0LiBUaGFuayB5b3UgZm9yIHN0aWNraW5nIHdpdGggdXMgdGhpcyBsb25nITwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4xNS8wNy8yMDE3IC0gdGhlIHNwaXJpdHVhbCB1cGRhdGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGltcGxlbWVudGVkIHN1Z2FyIGx1bXBzLCB3aGljaCBzdGFydCBjb2FsZXNjaW5nIGlmIHlvdVwndmUgYXNjZW5kZWQgYXQgbGVhc3Qgb25jZSBhbmQgY2FuIGJlIHVzZWQgYXMgY3VycmVuY3kgZm9yIHNwZWNpYWwgdGhpbmdzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZ3MgY2FuIG5vdyBsZXZlbCB1cCBieSB1c2luZyBzdWdhciBsdW1wcyBpbiB0aGUgbWFpbiBidWlsZGluZ3MgZGlzcGxheSwgcGVybWFuZW50bHkgYm9vc3RpbmcgdGhlaXIgQ3BTPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCB0d28gbmV3IGZlYXR1cmVzIHVubG9ja2VkIGJ5IGxldmVsbGluZyB1cCB0aGVpciBhc3NvY2lhdGVkIGJ1aWxkaW5ncywgVGVtcGxlcyBhbmQgV2l6YXJkIHRvd2VyczsgbW9yZSBidWlsZGluZy1yZWxhdGVkIG1pbmlnYW1lcyB3aWxsIGJlIGltcGxlbWVudGVkIGluIHRoZSBmdXR1cmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFjdGl2ZSBidWZmcyBhcmUgbm93IHNhdmVkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgYmFja2dyb3VuZCBzZWxlY3RvciB1cGdyYWRlIGlzIG5vdyBmdW5jdGlvbmFsPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgdG9wIG1lbnUgbm8gbG9uZ2VyIHNjcm9sbHMgd2l0aCB0aGUgcmVzdDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGltZXNwYW5zIGFyZSB3cml0dGVuIG5pY2VyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBEcmFnb25mbGlnaHRzIG5vdyB0ZW5kIHRvIHN1cGVyY2VkZSBDbGljayBmcmVuemllcywgeW91IHdpbGwgcmFyZWx5IGhhdmUgYm90aCBhdCB0aGUgc2FtZSB0aW1lPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzb21lIG9sZCBidWdzIHdlcmUgcGhhc2VkIG91dCBhbmQgcmVwbGFjZWQgYnkgbmV3IG9uZXM8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MjQvMDcvMjAxNiAtIGdvbGRlbiBjb29raWVzIG92ZXJoYXVsPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnb2xkZW4gY29va2llcyBhbmQgcmVpbmRlZXIgbm93IGZvbGxvdyBhIG5ldyBzeXN0ZW0gaW52b2x2aW5nIGV4cGxpY2l0bHkgZGVmaW5lZCBidWZmczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYSBidW5jaCBvZiBuZXcgZ29sZGVuIGNvb2tpZSBlZmZlY3RzIGhhdmUgYmVlbiBhZGRlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgQ3BTIGdhaW5zIGZyb20gZWdncyBhcmUgbm93IG11bHRpcGxpY2F0aXZlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzaGlueSB3cmlua2xlcnMgYXJlIG5vdyBzYXZlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgcmVpbmRlZXIgaGF2ZSBiZWVuIHJlYmFsYW5jZWQgZXZlciBzbyBzbGlnaHRseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBuZXcgY29va2llIHVwZ3JhZGUgbmVhciB0aGUgcm9vdCBvZiB0aGUgaGVhdmVubHkgdXBncmFkZSB0cmVlOyB0aGlzIGlzIGludGVuZGVkIHRvIGJvb3N0IGVhcmx5IGFzY2Vuc2lvbnMgYW5kIHNwZWVkIHVwIHRoZSBnYW1lIGFzIGEgd2hvbGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGR1ZSB0byBFVSBsZWdpc2xhdGlvbiwgaW1wbGVtZW50ZWQgYSB3YXJuaW5nIG1lc3NhZ2UgcmVnYXJkaW5nIGJyb3dzZXIgY29va2llczsgZG8gdW5kZXJzdGFuZCB0aGF0IHRoZSBpcm9ueSBpcyBub3QgbG9zdCBvbiB1czwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4wOC8wMi8yMDE2IC0gbGVnYWN5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPkV2ZXJ5dGhpbmcgdGhhdCB3YXMgaW1wbGVtZW50ZWQgZHVyaW5nIHRoZSBhbG1vc3QgMi15ZWFyLWxvbmcgYmV0YSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgbGl2ZSBnYW1lLiBUbyByZWNhcCA6PC9iPjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgMyBuZXcgYnVpbGRpbmdzIDogYmFua3MsIHRlbXBsZXMsIGFuZCB3aXphcmQgdG93ZXJzOyB0aGVzZSBoYXZlIGJlZW4gYWRkZWQgaW4tYmV0d2VlbiBleGlzdGluZyBidWlsZGluZ3MgYW5kIGFzIHN1Y2gsIG1heSBkaXNydXB0IHNvbWUgYnVpbGRpbmctcmVsYXRlZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBhc2NlbnNpb24gc3lzdGVtIGhhcyBiZWVuIHJlZG9uZSBmcm9tIHNjcmF0Y2gsIHdpdGggYSBuZXcgaGVhdmVubHkgdXBncmFkZSB0cmVlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBteXN0ZXJpb3VzIG5ldyBmZWF0dXJlcyBzdWNoIGFzIGFuZ2VsLXBvd2VyZWQgb2ZmbGluZSBwcm9ncmVzc2lvbiwgY2hhbGxlbmdlIHJ1bnMsIGFuZCBhIGNvb2tpZSBkcmFnb248L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNvdW5kcyBoYXZlIGJlZW4gYWRkZWQgKGNhbiBiZSBkaXNhYmxlZCBpbiB0aGUgb3B0aW9ucyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGhlYXBzIG9mIHJlYmFsYW5jaW5nIGFuZCBidWcgZml4ZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGEgY291cGxlIG1vcmUgdXBncmFkZXMgYW5kIGFjaGlldmVtZW50cywgcHJvYmFibHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZyZXNoIG5ldyBvcHRpb25zIHRvIGZ1cnRoZXIgY3VzdG9taXplIHlvdXIgY29va2llLWNsaWNraW5nIGV4cGVyaWVuY2U8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHF1YWxpdHktb2YtbGlmZSBpbXByb3ZlbWVudHMgOiBiZXR0ZXIgYnVsay1idXksIGJldHRlciBzd2l0Y2hlcyBldGM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHNvbWUgPGEgaHJlZj0iaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS8nICsNCiAgICBjaG9vc2UoWw0KICAgICAgIktyenlzenRvZl9BcmNpc3pld3NraSIsDQogICAgICAiRXVzdGFjaHlfU2FuZ3VzemtvIiwNCiAgICAgICJNYXVyeWN5X0hhdWtlIiwNCiAgICAgICJLYXJvbF9UdXJubyIsDQogICAgICAiVGFkZXVzel9LdXRyemViYSIsDQogICAgICAiS2F6aW1pZXJ6X0ZhYnJ5Y3kiLA0KICAgICAgIkZsb3JpYW5fU2l3aWNraSIsDQogICAgXSkgKw0KICAgICciIHRhcmdldD0iX2JsYW5rIj5nZW5lcmFsIHBvbGlzaDwvYT48L2Rpdj4nIC8qIGkgbGlrZWQgdGhpcyBkdW1iIHB1biB0b28gbXVjaCB0byBsZXQgaXQgZ28gdW5ub3RpY2VkICovICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRvbnMgb2Ygb3RoZXIgbGl0dGxlIHRoaW5ncyB3ZSBjYW5cJ3QgZXZlbiByZW1lbWJlciByaWdodCBub3c8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+TWlzcyB0aGUgb2xkIHZlcnNpb24/IFlvdXIgb2xkIHNhdmUgd2FzIGF1dG9tYXRpY2FsbHkgZXhwb3J0ZWQgPGEgaHJlZj0iLy9vcnRlaWwuZGFzaG5ldC5vcmcvY29va2llY2xpY2tlci92MTA0NjYvIiB0YXJnZXQ9Il9ibGFuayI+aGVyZTwvYT4hPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjA1LzAyLzIwMTYgLSBsZWdhY3kgYmV0YSwgbW9yZSBmaXhlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgY2hhbGxlbmdlIG1vZGVzLCB3aGljaCBjYW4gYmUgc2VsZWN0ZWQgd2hlbiBhc2NlbmRpbmcgKG9ubHkgMSBmb3Igbm93IDogIkJvcm4gYWdhaW4iKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2hhbmdlZCB0aGUgd2F5IGJ1bGstYnV5aW5nIGFuZCBidWxrLXNlbGxpbmcgd29ya3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG1vcmUgYnVncyBpcm9uZWQgb3V0PC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAzLzAyLzIwMTYgLSBsZWdhY3kgYmV0YSwgcGFydCBJSUk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyB3YXJuaW5nIj4mYnVsbDsgTm90IGFsbCBidWdzIGhhdmUgYmVlbiBmaXhlZCwgYnV0IGV2ZXJ5dGhpbmcgc2hvdWxkIGJlIG11Y2ggbGVzcyBicm9rZW4uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBBZGRpdGlvbnMnICsNCiAgICAnPGRpdiBzdHlsZT0ib3BhY2l0eTowLjg7bWFyZ2luLWxlZnQ6MTJweDsiPicgKw0KICAgICItYSBmZXcgbW9yZSBhY2hpZXZlbWVudHM8YnI+IiArDQogICAgIi1uZXcgb3B0aW9uIGZvciBuZWF0LCBidXQgc2xvdyBDU1MgZWZmZWN0cyAoZGlzYWJsZWQgYnkgZGVmYXVsdCk8YnI+IiArDQogICAgIi1uZXcgb3B0aW9uIGZvciBhIGxlc3MgZ3JhdGluZyBjb29raWUgc291bmQgKGVuYWJsZWQgYnkgZGVmYXVsdCk8YnI+IiArDQogICAgIi1uZXcgb3B0aW9uIHRvIGJyaW5nIGJhY2sgdGhlIGJveGVzIGFyb3VuZCBpY29ucyBpbiB0aGUgc3RhdHMgc2NyZWVuPGJyPiIgKw0KICAgICItbmV3IGJ1dHRvbnMgZm9yIHNhdmluZyBhbmQgbG9hZGluZyB5b3VyIGdhbWUgdG8gYSB0ZXh0IGZpbGU8YnI+IiArDQogICAgIjwvZGl2PiIgKw0KICAgICI8L2Rpdj4iICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IENoYW5nZXMnICsNCiAgICAnPGRpdiBzdHlsZT0ib3BhY2l0eTowLjg7bWFyZ2luLWxlZnQ6MTJweDsiPicgKw0KICAgICItZWFybHkgZ2FtZSBzaG91bGQgYmUgYSBiaXQgZmFzdGVyIGFuZCB2ZXJ5IGxhdGUgZ2FtZSB3YXMga2luZGx5IGFza2VkIHRvIHRvbmUgaXQgZG93biBhIHRhZDxicj4iICsNCiAgICAiLWRyYWdvbmZsaWdodCBzaG91bGQgYmUgc29tZXdoYXQgbGVzcyByaWRpY3Vsb3VzbHkgb3ZlcnBvd2VyZWQ8YnI+IiArDQogICAgIi1wbGVhc2UgbGV0IG1lIGtub3cgaWYgdGhlIHJlYmFsYW5jaW5nIHdhcyB0b28gaGVhdnkgb3Igbm90IGhlYXZ5IGVub3VnaDxicj4iICsNCiAgICAiLXNhbnRhIGFuZCBlYXN0ZXIgdXBncmFkZXMgbm93IGRlcGVuZCBvbiBTYW50YSBsZXZlbCBhbmQgYW1vdW50IG9mIGVnZ3Mgb3duZWQsIHJlc3BlY3RpdmVseSwgaW5zdGVhZCBvZiBjb3N0aW5nIHNldmVyYWwgbWludXRlcyB3b3J0aCBvZiBDcFM8YnI+IiArDQogICAgIi1jb29raWUgdXBncmFkZXMgbm93IHN0YWNrIG11bHRpcGxpY2F0aXZlbHkgcmF0aGVyIHRoYW4gYWRkaXRpdmVseTxicj4iICsNCiAgICAiLWdvbGRlbiBzd2l0Y2ggbm93IGdpdmVzICs1MCUgQ3BTLCBhbmQgcmVzaWR1YWwgbHVjayBpcyArMTAlIENwUyBwZXIgZ29sZGVuIGNvb2tpZSB1cGdyYWRlICh1cCBmcm9tICsyNSUgYW5kICsxJSwgcmVzcGVjdGl2ZWx5KTxicj4iICsNCiAgICAiLWx1Y2t5IGNvb2tpZXMgYW5kIGNvb2tpZSBjaGFpbiBwYXlvdXRzIGhhdmUgYmVlbiBtb2RpZmllZCBhIGJpdCwgcG9zc2libHkgZm9yIHRoZSBiZXR0ZXIsIHdobyBrbm93cyE8YnI+IiArDQogICAgIi13cmlua2xlcnMgaGFkIHByZXZpb3VzbHkgYmVlbiByZWR1Y2VkIHRvIGEgbWF4aW11bSBvZiA4ICgxMCB3aXRoIGEgaGVhdmVubHkgdXBncmFkZSksIGJ1dCBhcmUgbm93IGJhY2sgdG8gMTAgKDEyIHdpdGggdGhlIHVwZ3JhZGUpPGJyPiIgKw0KICAgIC8qJy1hbGwgYW5pbWF0aW9ucyBhcmUgbm93IGhhbmRsZWQgYnkgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCksIHdoaWNoIHNob3VsZCBob3BlZnVsbHkgaGVscCBtYWtlIHRoZSBnYW1lIGxlc3MgcmVzb3VyY2UtaW50ZW5zaXZlPGJyPicrKi8NCiAgICAiLWFuIGFzY2Vuc2lvbiBub3cgb25seSBjb3VudHMgZm9yIGFjaGlldmVtZW50IHB1cnBvc2VzIGlmIHlvdSBlYXJuZWQgYXQgbGVhc3QgMSBwcmVzdGlnZSBsZXZlbCBmcm9tIGl0PGJyPiIgKw0KICAgICItdGhlIGVtYmxlbWF0aWMgQ29va2llIENsaWNrZXIgZm9udCAoS2F2b29uKSB3YXMgYnVnZ2VkIGluIEZpcmVmb3gsIGFuZCBoYXMgYmVlbiByZXBsYWNlZCB3aXRoIGEgbmV3IGZvbnQgKE1lcnJpd2VhdGhlcik8YnI+IiArDQogICAgIi10aGUgbXlzdGVyaW91cyB3cmlua2x5IGNyZWF0dXJlIGlzIG5vdyBldmVuIHJhcmVyLCBidXQgaGFzIGEgc2hhZG93IGFjaGlldmVtZW50IHRpZWQgdG8gaXQ8YnI+IiArDQogICAgIjwvZGl2PiIgKw0KICAgICI8L2Rpdj4iICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IEZpeGVzJyArDQogICAgJzxkaXYgc3R5bGU9Im9wYWNpdHk6MC44O21hcmdpbi1sZWZ0OjEycHg7Ij4nICsNCiAgICAiLXByZXN0aWdlIG5vdyBncmFudHMgKzElIENwUyBwZXIgbGV2ZWwgYXMgaW50ZW5kZWQsIGluc3RlYWQgb2YgKzEwMCU8YnI+IiArDQogICAgIi1oZWF2ZW5seSBjaGlwcyBzaG91bGQgbm8gbG9uZ2VyIGFkZCB1cCBsaWtlIGNyYXp5IHdoZW4geW91IGFzY2VuZDxicj4iICsNCiAgICAiLXVwZ3JhZGVzIGluIHRoZSBzdG9yZSBzaG91bGQgbm8gbG9uZ2VyIHJhbmRvbWx5IGdvIHVuc29ydGVkPGJyPiIgKw0KICAgICItd2luZG93IGNhbiBiZSByZXNpemVkIHRvIGFueSBzaXplIGFnYWluPGJyPiIgKw0KICAgICctdGhlICJTdGF0cyIgYW5kICJPcHRpb25zIiBidXR0b25zIGhhdmUgYmVlbiBzd2FwcGVkIGFnYWluPGJyPicgKw0KICAgICItdGhlIGdvbGRlbiBjb29raWUgc291bmQgc2hvdWxkIGJlIHNvbWV3aGF0IGNsZWFyZXI8YnI+IiArDQogICAgIi10aGUgYXNjZW5kIHNjcmVlbiBzaG91bGQgYmUgbGVzcyBDUFUtaHVuZ3J5PGJyPiIgKw0KICAgICI8L2Rpdj4iICsNCiAgICAiPC9kaXY+IiArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjIwLzEyLzIwMTUgLSBsZWdhY3kgYmV0YSwgcGFydCBJSTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIHdhcm5pbmciPiZidWxsOyBleGlzdGluZyBiZXRhIHNhdmVzIGhhdmUgYmVlbiB3aXBlZCBkdWUgdG8gZm9ybWF0IGluY29uc2lzdGVuY2llcyBhbmQganVzdCBwbGFpbiBicm9rZW4gYmFsYW5jZTsgeW91XCdsbCBoYXZlIHRvIHN0YXJ0IG92ZXIgZnJvbSBzY3JhdGNoIC0gd2hpY2ggd2lsbCBhbGxvdyB5b3UgdG8gZnVsbHkgZXhwZXJpZW5jZSB0aGUgdXBkYXRlIGFuZCBmaW5kIGFsbCB0aGUgYXdmdWwgbGl0dGxlIGJ1Z3MgdGhhdCBubyBkb3VidCBwbGFndWUgaXQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyB3YXJuaW5nIj4mYnVsbDsgaW1wb3J0aW5nIHlvdXIgc2F2ZSBmcm9tIHRoZSBsaXZlIHZlcnNpb24gaXMgYWxzbyBmaW5lPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB3ZSB0b29rIHNvIGxvbmcgdG8gbWFrZSB0aGlzIHVwZGF0ZSwgQ29va2llIENsaWNrZXIgdHVybmVkIDIgeWVhcnMgb2xkIGluIHRoZSBtZWFudGltZSEgSHVycmF5ITwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgaGVhcHMgb2YgbmV3IHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZpeGVkIGEgd2hvbGUgYnVuY2ggb2YgYnVnczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZGlkIGEgbG90IG9mIHJlYmFsYW5jaW5nPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZXdvcmtlZCBoZWF2ZW5seSBjaGlwcyBhbmQgaGVhdmVubHkgY29va2llcyAoc3RpbGwgZXhwZXJpbWVudGluZywgd2lsbCBwcm9iYWJseSByZWJhbGFuY2UgdGhpbmdzIGZ1cnRoZXIpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB5b3UgbWF5IG5vdyB1bmxvY2sgYSBkcmFnb24gZnJpZW5kPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzd2l0Y2hlcyBhbmQgc2Vhc29uIHRyaWdnZXJzIG5vdyBoYXZlIHRoZWlyIG93biBzdG9yZSBzZWN0aW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjdHJsLXMgYW5kIGN0cmwtbyBub3cgc2F2ZSB0aGUgZ2FtZSBhbmQgb3BlbiB0aGUgaW1wb3J0IG1lbnUsIHJlc3BlY3RpdmVseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgc29tZSBxdWljayBzb3VuZHMsIGp1c3QgYXMgYSB0ZXN0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhIGNvdXBsZSBtb3JlIG9wdGlvbnM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGV2ZW4gbW9yZSBtaXNjZWxsYW5lb3VzIGNoYW5nZXMgYW5kIGFkZGl0aW9uczwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNS8wOC8yMDE0IC0gbGVnYWN5IGJldGEsIHBhcnQgSTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgMyBuZXcgYnVpbGRpbmdzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBwcmljZSBhbmQgQ3BTIGN1cnZlcyByZXZhbXBlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgQ3BTIGNhbGN1bGF0aW9ucyByZXZhbXBlZDsgY29va2llIHVwZ3JhZGVzIG5vdyBzdGFjayBtdWx0aXBsaWNhdGl2ZWx5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBwcmVzdGlnZSBzeXN0ZW0gcmVkb25lIGZyb20gc2NyYXRjaCwgd2l0aCBhIHdob2xlIG5ldyB1cGdyYWRlIHRyZWU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHNvbWUgPGEgaHJlZj0iaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS8nICsNCiAgICBjaG9vc2UoWw0KICAgICAgIktyenlzenRvZl9BcmNpc3pld3NraSIsDQogICAgICAiRXVzdGFjaHlfU2FuZ3VzemtvIiwNCiAgICAgICJNYXVyeWN5X0hhdWtlIiwNCiAgICAgICJLYXJvbF9UdXJubyIsDQogICAgICAiVGFkZXVzel9LdXRyemViYSIsDQogICAgICAiS2F6aW1pZXJ6X0ZhYnJ5Y3kiLA0KICAgICAgIkZsb3JpYW5fU2l3aWNraSIsDQogICAgXSkgKw0KICAgICciIHRhcmdldD0iX2JsYW5rIj5nZW5lcmFsIHBvbGlzaDwvYT48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRvbnMgb2Ygb3RoZXIgbWlzY2VsbGFuZW91cyBmaXhlcyBhbmQgYWRkaXRpb25zPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBDb29raWUgQ2xpY2tlciBpcyBub3cgMSB5ZWFyIG9sZCEgKFRoYW5rIHlvdSBndXlzIGZvciBhbGwgdGhlIHN1cHBvcnQhKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIHdhcm5pbmciPiZidWxsOyBOb3RlIDogdGhpcyBpcyBhIGJldGE7IHlvdSBhcmUgbGlrZWx5IHRvIGVuY291bnRlciBidWdzIGFuZCBvdmVyc2lnaHRzLiBGZWVsIGZyZWUgdG8gc2VuZCBtZSBmZWVkYmFjayBpZiB5b3UgZmluZCBzb21ldGhpbmcgZmlzaHkhPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjE4LzA1LzIwMTQgLSBiZXR0ZXIgbGF0ZSB0aGFuIGVhc3RlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYnVubmllcyBhbmQgZWdncywgc29tZWhvdzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgcHJvbXB0cyBub3cgaGF2ZSBrZXlib2FyZCBzaG9ydGN1dHMgbGlrZSBzeXN0ZW0gcHJvbXB0cyB3b3VsZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmFtaW5nIHlvdXIgYmFrZXJ5PyB5b3UgYmV0Y2hhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyAiRmFzdCBub3RlcyIgb3B0aW9uIHRvIG1ha2UgYWxsIG5vdGlmaWNhdGlvbnMgY2xvc2UgZmFzdGVyOyBuZXcgYnV0dG9uIHRvIGNsb3NlIGFsbCBub3RpZmljYXRpb25zPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgZHVuZ2VvbnMgYmV0YSBpcyBub3cgYXZhaWxhYmxlIG9uIDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2Nvb2tpZWNsaWNrZXIvYmV0YWR1bmdlb25zIiB0YXJnZXQ9Il9ibGFuayI+L2JldGFkdW5nZW9uczwvYT48L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDkvMDQvMjAxNCAtIG5pZ2h0bWFyZSBpbiBoZWF2ZW48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGJyb2tlIGEgdGhpbmc7IGhlYXZlbmx5IGNoaXBzIHdlcmUgY29ycnVwdGVkIGZvciBzb21lIHBlb3BsZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgd2lsbCBwcm9iYWJseSB1cGRhdGUgdG8gL2JldGEgZmlyc3QgaW4gdGhlIGZ1dHVyZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc29ycnkgYWdhaW48L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDkvMDQvMjAxNCAtIHF1YWxpdHkgb2YgbGlmZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IHVwZ3JhZGUgYW5kIGFjaGlldmVtZW50IHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHBvcHVwcyBhbmQgcHJvbXB0cyBhcmUgbXVjaCBuaWNlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdG9vbHRpcHMgb24gYnVpbGRpbmdzIGFyZSBtb3JlIGluZm9ybWF0aXZlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBpbXBsZW1lbnRlZCBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL0ljZWhhd2s3OC9Gcm96ZW5Db29raWVzIiB0YXJnZXQ9Il9ibGFuayI+RnJvemVuIENvb2tpZXM8L2E+IGFkZC1vblwncyBzaG9ydCBudW1iZXIgZm9ybWF0dGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgeW91IGNhbiBub3cgYnV5IDEwIGFuZCBzZWxsIGFsbCBvZiBhIGJ1aWxkaW5nIGF0IGEgdGltZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdG9ucyBvZiBvcHRpbWl6YXRpb25zIGFuZCBzdWJ0bGVyIGNoYW5nZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHlvdSBjYW4gbm93IDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2Nvb2tpZXMyY2FzaC8iIHRhcmdldD0iX2JsYW5rIj5jb252ZXJ0IHlvdXIgY29va2llcyB0byBjYXNoPC9hPiE8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDUvMDQvMjAxNCAtIHBpdHkgdGhlIGZvb2w8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdyaW5rbGVycyBzaG91bGQgbm93IGJlIHNhdmVkIHNvIHlvdSBkb25cJ3QgaGF2ZSB0byBwb3AgdGhlbSBldmVyeSB0aW1lIHlvdSByZWZyZXNoIHRoZSBnYW1lPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB5b3Ugbm93IHByb3Blcmx5IHdpbiAxIGNvb2tpZSB1cG9uIHJlYWNoaW5nIDEwIGJpbGxpb24gY29va2llcyBhbmQgbWFraW5nIGl0IG9uIHRoZSBsb2NhbCBuZXdzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtaXNjZWxsYW5lb3VzIGZpeGVzIGFuZCB0aW55IGFkZGl0aW9uczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBmZXcgdmVyeSBydWRpbWVudGFyeSBtb2QgaG9va3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBnYW1lIHNob3VsZCB3b3JrIGFnYWluIGluIE9wZXJhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBkb25cJ3QgZm9yZ2V0IHRvIGNoZWNrIG91dCA8YSBocmVmPSIvL29ydGVpbC5kYXNobmV0Lm9yZy9yYW5kb21nZW4vIiB0YXJnZXQ9Il9ibGFuayI+UmFuZG9tR2VuPC9hPiwgb3VyIGFsbC1wdXJwb3NlIHJhbmRvbSBnZW5lcmF0b3IgbWFrZXIhPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzA0LzIwMTQgLSBmb29saW5nIGFyb3VuZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgaXRcJ3MgYWJvdXQgdGltZSA6IENvb2tpZSBDbGlja2VyIGhhcyB0dXJuZWQgaW50byB0aGUgbXVjaCBtb3JlIHJlYWxpc3RpYyBDb29raWUgQmFrZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNlYXNvbiB0cmlnZ2VycyBhcmUgY2hlYXBlciBhbmQgcHJvcGVybHkgdW5sb2NrIGFnYWluIHdoZW4gdGhleSBydW4gb3V0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZ3Mgc2hvdWxkIHByb3Blcmx5IHVubG9jayAocmVtaW5kZXIgOiBidWlsZGluZyB1bmxvY2tpbmcgaXMgY29tcGxldGVseSBjb3NtZXRpYyBhbmQgZG9lcyBub3QgY2hhbmdlIHRoZSBnYW1lcGxheSk8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MTQvMDIvMjAxNCAtIGxvdmVseSByYWluYm93Y2FseXBzZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IGJ1aWxkaW5nIChpdFwncyBiZWVuIGEgd2hpbGUpLiBNb3JlIHRvIGNvbWUhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB5b3UgY2FuIG5vdyB0cmlnZ2VyIHNlYXNvbmFsIGV2ZW50cyB0byB5b3VyIGhlYXJ0XCdzIGNvbnRlbnQgKHVwZ3JhZGUgdW5sb2NrcyBhdCA1MDAwIGhlYXZlbmx5IGNoaXBzKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IHVsdHJhLWV4cGVuc2l2ZSBiYXRjaCBvZiBzZWFzb25hbCBjb29raWUgdXBncmFkZXMgeW91XCdsbCBsb3ZlIHRvIGhhdGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyB0aW1lciBiYXJzIGZvciBnb2xkZW4gY29va2llIGJ1ZmZzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZ3MgYXJlIG5vdyBoaWRkZW4gd2hlbiB5b3Ugc3RhcnQgb3V0IGFuZCBhcHBlYXIgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0ZWNobmljYWwgc3R1ZmYgOiB0aGUgZ2FtZSBpcyBub3cgc2F2ZWQgdGhyb3VnaCBsb2NhbHN0b3JhZ2UgaW5zdGVhZCBvZiBicm93c2VyIGNvb2tpZXMsIHRoZXJlZm9yZSBydWluaW5nIGEgcGVyZmVjdGx5IGdvb2QgcHVuPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjIyLzEyLzIwMTMgLSBtZXJyeSBmaXhtYXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNvbWUgaXNzdWVzIHdpdGggdGhlIGNocmlzdG1hcyB1cGdyYWRlcyBoYXZlIGJlZW4gZml4ZWQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlaW5kZWVyIGNvb2tpZSBkcm9wcyBhcmUgbm93IG1vcmUgY29tbW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZWluZGVlcnMgYXJlIG5vdyByZWluZGVlcjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yMC8xMi8yMDEzIC0gQ2hyaXN0bWFzIGlzIGhlcmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZXJlIGlzIG5vdyBhIGZlc3RpdmUgbmV3IGV2b2x2aW5nIHVwZ3JhZGUgaW4gc3RvcmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlaW5kZWVyIGFyZSBydW5uaW5nIGFtb2sgKGNhdGNoIHRoZW0gaWYgeW91IGNhbiEpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyBvcHRpb24gdG8gd2FybiB5b3Ugd2hlbiB5b3UgY2xvc2UgdGhlIHdpbmRvdywgc28geW91IGRvblwndCBsb3NlIHlvdXIgdW4tcG9wcGVkIHdyaW5rbGVyczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWxzbyBhZGRlZCBhIHNlcGFyYXRlIG9wdGlvbiBmb3IgZGlzcGxheWluZyBjdXJzb3JzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhbGwgdGhlIEhhbGxvd2VlbiBmZWF0dXJlcyBhcmUgc3RpbGwgdGhlcmUgKGFuZCBoYXZpbmcgdGhlIFNwb29reSBjb29raWVzIGFjaGlldmVtZW50cyBtYWtlcyB0aGUgSGFsbG93ZWVuIGNvb2tpZXMgZHJvcCBtdWNoIG1vcmUgb2Z0ZW4pPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBvaCB5ZWFoLCB3ZSBub3cgaGF2ZSA8YSBocmVmPSJodHRwOi8vd3d3LnJlZGJ1YmJsZS5jb20vcGVvcGxlL2Rhc2huZXQiIHRhcmdldD0iX2JsYW5rIj5Db29raWUgQ2xpY2tlciBzaGlydHMsIHN0aWNrZXJzIGFuZCBob29kaWVzPC9hPiEgKHRoZXlcJ3JlIHJlYWxseSByYWQpPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjI5LzEwLzIwMTMgLSBzcG9va3kgdXBkYXRlPC9kaXY+JyArDQogICAgIjxkaXYgY2xhc3M9XCJsaXN0aW5nXCI+JmJ1bGw7IHRoZSBHcmFuZG1hcG9jYWx5cHNlIG5vdyBzcGF3bnMgd3JpbmtsZXJzLCBoaWRlb3VzIGVsZGVybHkgY3JlYXR1cmVzIHRoYXQgZGFtYWdlIHlvdXIgQ3BTIHdoZW4gdGhleSByZWFjaCB5b3VyIGJpZyBjb29raWUuIFRoYW5rZnVsbHksIHlvdSBjYW4gY2xpY2sgb24gdGhlbSB0byBtYWtlIHRoZW0gZXhwbG9kZSAoeW91J2xsIGV2ZW4gZ2FpbiBiYWNrIHRoZSBjb29raWVzIHRoZXkndmUgc3dhbGxvd2VkIC0gd2l0aCBpbnRlcmVzdCEpLjwvZGl2PiIgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgd3JhdGggY29va2llIG5vdyAyNyUgc3Bvb2tpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNvbWUgb3RoZXIgc3R1ZmY8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHlvdSBzaG91bGQgdG90YWxseSBnbyBjaGVjayBvdXQgPGEgaHJlZj0iaHR0cDovL2NhbmR5Ym94Mi5uZXQvIiB0YXJnZXQ9Il9ibGFuayI+Q2FuZHkgQm94IDI8L2E+LCB0aGUgc2VxdWVsIHRvIHRoZSBnYW1lIHRoYXQgaW5zcGlyZWQgQ29va2llIENsaWNrZXI8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MTUvMTAvMjAxMyAtIGl0XCdzIGEgc2VjcmV0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyBoZWF2ZW5seSB1cGdyYWRlIHRoYXQgZ2l2ZXMgeW91IDUlIG9mIHlvdXIgaGVhdmVubHkgY2hpcHMgcG93ZXIgZm9yIDExIGNvb2tpZXMgKGlmIHlvdSBwdXJjaGFzZWQgdGhlIEhlYXZlbmx5IGtleSwgeW91IG1pZ2h0IG5lZWQgdG8gYnV5IGl0IGFnYWluLCBzb3JyeSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjb29raWUgY2hhaW5zIHNob3VsZCBub3cgd29yayBwcm9wZXJseTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4xNS8xMC8yMDEzIC0gcGxheWVyLWZyaWVuZGx5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBoZWF2ZW5seSB1cGdyYWRlcyBhcmUgbm93IHdheSwgd2F5IGNoZWFwZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRpZXIgNSBidWlsZGluZyB1cGdyYWRlcyBhcmUgNSB0aW1lcyBjaGVhcGVyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjdXJzb3JzIG5vdyBqdXN0IHBsYWluIGRpc2FwcGVhciB3aXRoIEZhbmN5IEdyYXBoaWNzIG9mZiwgSSBtaWdodCBhZGQgYSBwcm9wZXIgb3B0aW9uIHRvIHRvZ2dsZSBvbmx5IHRoZSBjdXJzb3JzIGxhdGVyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB3YXJuaW5nIDogdGhlIENvb2tpZSBNb25zdGVyIGFkZC1vbiBzZWVtcyB0byBiZSBidWdneSB3aXRoIHRoaXMgdXBkYXRlLCB5b3UgbWlnaHQgd2FudCB0byB3YWl0IHVudGlsIGl0cyBwcm9ncmFtbWVyIHVwZGF0ZXMgaXQ8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MTUvMTAvMjAxMyAtIGEgY291cGxlIGZpeGVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnb2xkZW4gY29va2llcyBzaG91bGQgbm8gbG9uZ2VyIHNwYXduIGVtYmFycmFzc2luZ2x5IG9mdGVuPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjdXJzb3JzIG5vdyBzdG9wIG1vdmluZyBpZiBGYW5jeSBHcmFwaGljcyBpcyB0dXJuZWQgb2ZmPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjE0LzEwLzIwMTMgLSBnb2luZyBmb3IgdGhlIGdvbGQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjb29raWUgY2hhaW5zIHdvcmsgYSBiaXQgZGlmZmVyZW50bHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjb29raWUgc3Bhd25zIGFyZSBtb3JlIHJhbmRvbTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgQ3BTIGFjaGlldmVtZW50cyBhcmUgbm8gbG9uZ2VyIGFmZmVjdGVkIGJ5IGdvbGRlbiBjb29raWUgZnJlbnppZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJldmlzZWQgY29va2llLWJha2luZyBhY2hpZXZlbWVudCByZXF1aXJlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGhlYXZlbmx5IGNoaXBzIG5vdyByZXF1aXJlIHVwZ3JhZGVzIHRvIGZ1bmN0aW9uIGF0IGZ1bGwgY2FwYWNpdHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIDQgbW9yZSBjb29raWUgdXBncmFkZXMsIHVubG9ja2VkIGFmdGVyIHJlYWNoaW5nIGNlcnRhaW4gYW1vdW50cyBvZiBIZWF2ZW5seSBDaGlwczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3BlZWQgYmFraW5nIGFjaGlldmVtZW50cyBub3cgcmVxdWlyZSB5b3UgdG8gaGF2ZSBubyBoZWF2ZW5seSB1cGdyYWRlczsgYXMgc3VjaCwgdGhleSBoYXZlIGJlZW4gcmVzZXQgZm9yIGV2ZXJ5b25lIChhbG9uZyB3aXRoIHRoZSBIYXJkY29yZSBhY2hpZXZlbWVudCkgdG8gYmV0dGVyIG1hdGNoIHRoZWlyIGluaXRpYWxseSBpbnRlbmRlZCBkaWZmaWN1bHR5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIGdvb2QgcHJvZ3Jlc3Mgb24gdGhlIG1vYmlsZSBwb3J0PC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzEwLzIwMTMgLSBzbW9vdGhpbmcgaXQgb3V0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzb21lIHZpc3VhbCBlZmZlY3RzIGhhdmUgYmVlbiBjb21wbGV0ZWx5IHJld3JpdHRlbiBhbmQgc2hvdWxkIG5vdyBydW4gbW9yZSBzbW9vdGhseSAoYW5kIGJlIGxlc3MgQ1BVLWludGVuc2l2ZSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyB1cGdyYWRlIHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBtaWxrIHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNvb2tpZSBjaGFpbnMgaGF2ZSBkaWZmZXJlbnQgY2FwcGluZyBtZWNoYW5pY3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFudGltYXR0ZXIgY29uZGVuc2VycyBhcmUgYmFjayB0byB0aGVpciBwcmV2aW91cyBwcmljZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgaGVhdmVubHkgY2hpcHMgbm93IGdpdmUgKzIlIENwUyBhZ2FpbiAodGhleSB3aWxsIGJlIGV4dGVuc2l2ZWx5IHJld29ya2VkIGluIHRoZSBmdXR1cmUpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmYXJtcyBoYXZlIGJlZW4gYnVmZmVkIGEgYml0ICh0byBwb3B1bGFyIGRlbWFuZCk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGR1bmdlb25zIHN0aWxsIG5lZWQgYSBiaXQgbW9yZSB3b3JrIGFuZCB3aWxsIGJlIHJlbGVhc2VkIHNvb24gLSB3ZSB3YW50IHRoZW0gdG8gYmUganVzdCByaWdodCEgKHlvdSBjYW4gdGVzdCBhbiB1bmZpbmlzaGVkIHZlcnNpb24gaW4gPGEgaHJlZj0iLy9vcnRlaWwuZGFzaG5ldC5vcmcvY29va2llY2xpY2tlci9iZXRhZHVuZ2VvbnMvIiB0YXJnZXQ9Il9ibGFuayI+dGhlIGJldGE8L2E+KTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yOC8wOS8yMDEzIC0gZHVuZ2VvbiBiZXRhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmcm9tIG5vdyBvbiwgYmlnIHVwZGF0ZXMgd2lsbCBjb21lIHRocm91Z2ggYSBiZXRhIHN0YWdlIGZpcnN0ICh5b3UgY2FuIDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2Nvb2tpZWNsaWNrZXIvYmV0YWR1bmdlb25zLyIgdGFyZ2V0PSJfYmxhbmsiPnRyeSBpdCBoZXJlPC9hPik8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZpcnN0IGR1bmdlb25zISAoeW91IG5lZWQgNTAgZmFjdG9yaWVzIHRvIHVubG9jayB0aGVtISk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNvb2tpZSBjaGFpbnMgY2FuIGJlIGxvbmdlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYW50aW1hdHRlciBjb25kZW5zZXJzIGFyZSBhIGJpdCBtb3JlIGV4cGVuc2l2ZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgaGVhdmVubHkgY2hpcHMgbm93IG9ubHkgZ2l2ZSArMSUgY3BzIGVhY2ggKHRvIGFjY291bnQgZm9yIGFsbCB0aGUgY29va2llcyBtYWRlIGZyb20gY29uZGVuc2Vycyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGZsYXZvciB0ZXh0IG9uIGFsbCB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4xNS8wOS8yMDEzIC0gYW50aWNvb2tpZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJhbiBvdXQgb2YgcmVndWxhciBtYXR0ZXIgdG8gbWFrZSB5b3VyIGNvb2tpZXM/IFRyeSBvdXIgbmV3IGFudGltYXR0ZXIgY29uZGVuc2VycyE8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlbmFtZWQgSGFyZC1yZXNldCB0byAiV2lwZSBzYXZlIiB0byBhdm9pZCBjb25mdXNpb248L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlc2V0IGFjaGlldmVtZW50cyBhcmUgbm93IHJlZ3VsYXIgYWNoaWV2ZW1lbnRzIGFuZCByZXF1aXJlIGNvb2tpZXMgYmFrZWQgYWxsIHRpbWUsIG5vdCBjb29raWVzIGluIGJhbms8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGhlYXZlbmx5IGNoaXBzIGhhdmUgYmVlbiBuZXJmZWQgYSBiaXQgKGFuZCBhcmUgbm93IGF3YXJkZWQgZm9sbG93aW5nIGEgZ2VvbWV0cmljIHByb2dyZXNzaW9uIDogMSB0cmlsbGlvbiBmb3IgdGhlIGZpcnN0LCAyIGZvciB0aGUgc2Vjb25kLCBldGMpOyB0aGUgcHJlc3RpZ2Ugc3lzdGVtIHdpbGwgYmUgZXh0ZW5zaXZlbHkgcmV3b3JrZWQgaW4gYSBmdXR1cmUgdXBkYXRlIChhZnRlciBkdW5nZW9ucyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjb29raWUgY2xpY2tzIGFyZSBubyBsb25nZXIgcmVzZXQgYnkgc29mdC1yZXNldHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHlvdSBjYW4gbm93IHNlZSBob3cgbG9uZyB5b3VcJ3ZlIGJlZW4gcGxheWluZyBpbiB0aGUgc3RhdHM8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDgvMDkvMjAxMyAtIGV2ZXJsYXN0aW5nIGNvb2tpZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgcHJlc3RpZ2Ugc3lzdGVtIC0gcmVzZXR0aW5nIGdpdmVzIHlvdSBwZXJtYW5lbnQgQ3BTIGJvb3N0cyAodGhlIG1vcmUgY29va2llcyBtYWRlIGJlZm9yZSByZXNldHRpbmcsIHRoZSBiaWdnZXIgdGhlIGJvb3N0ISk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNhdmUgZm9ybWF0IGhhcyBiZWVuIHNsaWdodGx5IG1vZGlmaWVkIHRvIHRha2UgbGVzcyBzcGFjZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgTGVwcmVjaGF1biBoYXMgYmVlbiBidW1wZWQgdG8gNzc3IGdvbGRlbiBjb29raWVzIGNsaWNrZWQgYW5kIGlzIG5vdyBzaGFkb3c7IEZvcnR1bmUgaXMgdGhlIG5ldyA3NyBnb2xkZW4gY29va2llcyBhY2hpZXZlbWVudDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2xpY2tpbmcgZnJlbnp5IGlzIG5vdyB4Nzc3PC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjA0LzA5LzIwMTMgLSBzbWFydGVyIGNvb2tpZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZ29sZGVuIGNvb2tpZXMgb25seSBoYXZlIDIwJSBjaGFuY2Ugb2YgZ2l2aW5nIHRoZSBzYW1lIG91dGNvbWUgdHdpY2UgaW4gYSByb3cgbm93PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIGdvbGRlbiBjb29raWUgdXBncmFkZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYW4gdXBncmFkZSB0aGF0IG1ha2VzIHBsZWRnZXMgbGFzdCB0d2ljZSBhcyBsb25nIChyZXF1aXJlcyBoYXZpbmcgcGxlZGdlZCAxMCB0aW1lcyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IFF1aW50aWxsaW9uIGZpbmdlcnMgaXMgbm93IHR3aWNlIGFzIGVmZmljaWVudDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgVW5jYW5ueSBjbGlja2VyIHdhcyByZWFsbHkgdG9vIHVucHJlZGljdGFibGU7IGl0IGlzIG5vdyBhIHJlZ3VsYXIgYWNoaWV2ZW1lbnQgYW5kIG5vIGxvbmdlciByZXF1aXJlcyBhIHdvcmxkIHJlY29yZCwganVzdCAqcHJldHR5IGZhc3QqIGNsaWNraW5nPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAyLzA5LzIwMTMgLSBhIGJldHRlciB3YXkgb3V0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBFbGRlciBDb3ZlbmFudCBpcyBldmVuIGNoZWFwZXIsIGFuZCByZXZva2luZyBpdCBpcyBjaGVhcGVyIHN0aWxsIChhbHNvIGFkZGVkIGEgbmV3IGFjaGlldmVtZW50IGZvciBnZXR0aW5nIGl0KTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZWFjaCBncmFuZG1hIHVwZ3JhZGUgbm93IHJlcXVpcmVzIDE1IG9mIHRoZSBtYXRjaGluZyBidWlsZGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGhlIGRyZWFkZWQgYm90dG9tIGN1cnNvciBoYXMgYmVlbiBmaXhlZCB3aXRoIGEgbmV3IGN1cnNvciBkaXNwbGF5IHN0eWxlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhbiBvcHRpb24gZm9yIGZhc3RlciwgY2hlYXBlciBncmFwaGljczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYmFzZTY0IGVuY29kaW5nIGhhcyBiZWVuIHJlZG9uZTsgdGhpcyBtaWdodCBtYWtlIHNhdmluZyBwb3NzaWJsZSBhZ2FpbiBvbiBzb21lIG9sZGVyIGJyb3dzZXJzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzaGFkb3cgYWNoaWV2ZW1lbnRzIG5vdyBoYXZlIHRoZWlyIG93biBzZWN0aW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByYXNwYmVycnkganVpY2UgaXMgbm93IG5hbWVkIHJhc3BiZXJyeSBtaWxrLCBkZXNwaXRlIHJhc3BiZXJyeSBqdWljZSBiZWluZyBkZWxpY2lvdXMgYW5kIGdvaW5nIHVucXVlc3Rpb25hYmx5IHdlbGwgd2l0aCBjb29raWVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBIT1RGSVggOiBjdXJzb3JzIG5vdyBjbGljazsgZmFuY3kgZ3JhcGhpY3MgYnV0dG9uIHJlbmFtZWQ7IGNvb2tpZXMgYW1vdW50IG5vdyBtb3JlIHZpc2libGUgYWdhaW5zdCBjdXJzb3JzPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzA5LzIwMTMgLSBzb3J0aW5nIHRoaW5ncyBvdXQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHMgYXJlIHByb3Blcmx5IHNvcnRlZCBpbiB0aGUgc3RhdHMgc2NyZWVuPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIEVsZGVyIENvdmVuYW50IG11Y2ggY2hlYXBlciBhbmQgbGVzcyBoYXJtZnVsPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBpbXBvcnRpbmcgZnJvbSB0aGUgZmlyc3QgdmVyc2lvbiBoYXMgYmVlbiBkaXNhYmxlZCwgYXMgcHJvbWlzZWQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7ICJPbmUgbWluZCIgbm93IGFjdHVhbGx5IGFza3MgeW91IHRvIGNvbmZpcm0gdGhlIHVwZ3JhZGU8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MzEvMDgvMjAxMyAtIGhvdGZpeGVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIHdheSB0byBwZXJtYW5lbnRseSBzdG9wIHRoZSBncmFuZG1hcG9jYWx5cHNlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBFbGRlciBQbGVkZ2UgcHJpY2UgaXMgbm93IGNhcHBlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgT25lIE1pbmQgYW5kIG90aGVyIGdyYW5kbWEgcmVzZWFyY2ggdXBncmFkZXMgYXJlIG5vdyBhIGxpdHRsZSBtb3JlIHBvd2VyZnVsLCBpZiBub3QgMTAwJSBhY2N1cmF0ZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgImdvbGRlbiIgY29va2llIG5vdyBhcHBlYXJzIGFnYWluIGR1cmluZyBncmFuZG1hcG9jYWx5cHNlOyBFbGRlciBQbGVkZ2UtcmVsYXRlZCBhY2hpZXZlbWVudHMgYXJlIG5vdyB1bmxvY2thYmxlPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjMxLzA4LzIwMTMgLSB0b28gbWFueSBncmFuZG1hczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGhlIGdyYW5kbWFwb2NhbHlwc2UgaXMgYmFjaywgYWxvbmcgd2l0aCBtb3JlIGdyYW5kbWEgdHlwZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHNvbWUgdXBncmFkZXMgdGhhdCBib29zdCB5b3VyIGNsaWNraW5nIHBvd2VyIGFuZCBtYWtlIGl0IHNjYWxlIHdpdGggeW91ciBjcHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNsaWNraW5nIGFjaGlldmVtZW50cyBtYWRlIGhhcmRlcjsgTmV2ZXJjbGljayBpcyBub3cgYSBzaGFkb3cgYWNoaWV2ZW1lbnQ7IFVuY2FubnkgY2xpY2tlciBzaG91bGQgbm93IHRydWx5IGJlIGEgd29ybGQgcmVjb3JkPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjI4LzA4LzIwMTMgLSBvdmVyLWFjaGlldmVyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIGZldyBtb3JlIGFjaGlldmVtZW50czwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgcmV3b3JrZWQgdGhlICJCYWtlIFggY29va2llcyIgYWNoaWV2ZW1lbnRzIHNvIHRoZXkgdGFrZSBsb25nZXIgdG8gYWNoaWV2ZTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNy8wOC8yMDEzIC0gYSBiYWQgaWRlYTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZHVlIHRvIHBvcHVsYXIgZGVtYW5kLCByZXRpcmVkIDUgYWNoaWV2ZW1lbnRzICh0aGUgInJlc2V0IHlvdXIgZ2FtZSIgYW5kICJjaGVhdCIgb25lcyk7IHRoZXkgY2FuIHN0aWxsIGJlIHVubG9ja2VkLCBidXQgZG8gbm90IGNvdW50IHRvd2FyZCB5b3VyIHRvdGFsIGFueW1vcmUuIERvblwndCB3b3JyeSwgdGhlcmUgd2lsbCBiZSBtYW55IG1vcmUgYWNoaWV2ZW1lbnRzIHNvb24hPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIHNvbWUgYWNoaWV2ZW1lbnRzIGhpZGRlbiBmb3IgYWRkZWQgbXlzdGVyeTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNy8wOC8yMDEzIC0gYSBzZW5zZSBvZiBhY2hpZXZlbWVudDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYWNoaWV2ZW1lbnRzIChhbmQgbWlsayk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGk+KHRoaXMgaXMgYSBiaWcgdXBkYXRlLCBwbGVhc2UgZG9uXCd0IGdldCB0b28gbWFkIGlmIHlvdSBsb3NlIHNvbWUgZGF0YSEpPC9pPjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNi8wOC8yMDEzIC0gbmV3IHVwZ3JhZGUgdGllcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgc29tZSBtb3JlIHVwZ3JhZGVzIChpbmNsdWRpbmcgYSBjb3VwbGUgZ29sZGVuIGNvb2tpZS1yZWxhdGVkIG9uZXMpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBjbGlja2luZyBzdGF0czwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNi8wOC8yMDEzIC0gbW9yZSB0d2Vha3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHR3ZWFrZWQgYSBjb3VwbGUgY3Vyc29yIHVwZ3JhZGVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIHRpbWUgbWFjaGluZXMgbGVzcyBwb3dlcmZ1bDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgb2ZmbGluZSBtb2RlIG9wdGlvbjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNS8wOC8yMDEzIC0gdHdlYWtzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZWJhbGFuY2VkIHByb2dyZXNzaW9uIGN1cnZlIChtaWQtIGFuZCBlbmQtZ2FtZSBvYmplY3RzIGNvc3QgbW9yZSBhbmQgZ2l2ZSBtb3JlKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgc29tZSBtb3JlIGNvb2tpZSB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgQ3BTIGZvciBjdXJzb3JzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBzZWxsIGJ1dHRvbjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbWFkZSBnb2xkZW4gY29va2llIG1vcmUgdXNlZnVsPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjI0LzA4LzIwMTMgLSBob3RmaXhlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgaW1wb3J0L2V4cG9ydCBmZWF0dXJlLCB3aGljaCBhbHNvIGFsbG93cyB5b3UgdG8gcmV0cmlldmUgYSBzYXZlIGdhbWUgZnJvbSB0aGUgb2xkIHZlcnNpb24gKHdpbGwgYmUgZGlzYWJsZWQgaW4gYSB3ZWVrIHRvIHByZXZlbnQgdG9vIG11Y2ggY2hlYXRpbmcpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB1cGdyYWRlIHN0b3JlIG5vdyBoYXMgdW5saW1pdGVkIHNsb3RzIChqdXN0IGhvdmVyIG92ZXIgaXQpLCBkdWUgdG8gcG9wdWxhciBkZW1hbmQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHVwZGF0ZSBsb2c8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MjQvMDgvMjAxMyAtIGJpZyB1cGRhdGUhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZXZhbXBlZCB0aGUgd2hvbGUgZ2FtZSAobmV3IGdyYXBoaWNzLCBuZXcgZ2FtZSBtZWNoYW5pY3MpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbXVjaCBzYWZlciBzYXZpbmc8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDgvMDgvMjAxMyAtIGdhbWUgbGF1bmNoPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIDxhIGhyZWY9Imh0dHBzOi8vb3J0ZWlsLmRhc2huZXQub3JnL2V4cGVyaW1lbnRzL2Nvb2tpZS8iIHRhcmdldD0iX2JsYW5rIj50aGUgZ2FtZTwvYT4gaW4gYSBjb3VwbGUgaG91cnMsIGZvciBsYXVnaHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGtpbmRhIHN0YXJ0aW5nIHRvIHJlZ3JldCBpdDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWggd2VsbDwvZGl2PicgKw0KICAgICI8L2Rpdj4iICsNCiAgICAiPC9kaXY+IjsNCg0KICBHYW1lLnJlYWR5ID0gMDsNCg0KICBHYW1lLkxvYWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsNCiAgICAvL2woJ29mZkdhbWVNZXNzYWdlJykuaW5uZXJIVE1MPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjY0cHggMTI4cHg7Ij48ZGl2IGNsYXNzPSJ0aXRsZSI+TG9hZGluZy4uLjwvZGl2PjwvZGl2Pic7DQogICAgR2FtZS5Mb2FkZXIgPSBuZXcgTG9hZGVyKCk7DQogICAgR2FtZS5Mb2FkZXIuZG9tYWluID0gImltZy8iOw0KICAgIGlmICh0eXBlb2YgUFJFTE9BRCAhPT0gInVuZGVmaW5lZCIpIEdhbWUuTG9hZGVyLmxvYWRlZCA9IFBSRUxPQUQoR2FtZS5Jbml0KTsNCiAgICBlbHNlIEdhbWUuTG9hZGVyLmxvYWRlZCA9IGNhbGxiYWNrOw0KICAgIEdhbWUuTG9hZGVyLkxvYWQoWyJmaWxsZXIucG5nIl0pOw0KICB9Ow0KICBHYW1lLkVycm9yRnJhbWUgPSBmdW5jdGlvbiAoKSB7DQogICAgbCgib2ZmR2FtZU1lc3NhZ2UiKS5pbm5lckhUTUwgPQ0KICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIj5Pb3BzLiBXcm9uZyBhZGRyZXNzITwvZGl2PicgKw0KICAgICAgIjxkaXY+SXQgbG9va3MgbGlrZSB5b3UncmUgYWNjZXNzaW5nIENvb2tpZSBDbGlja2VyIGZyb20gYW5vdGhlciBVUkwgdGhhbiB0aGUgb2ZmaWNpYWwgb25lLjxicj4iICsNCiAgICAgICdZb3UgY2FuIDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2Nvb2tpZWNsaWNrZXIvIiB0YXJnZXQ9Il9ibGFuayI+cGxheSBDb29raWUgQ2xpY2tlciBvdmVyIGhlcmU8L2E+ITxicj4nICsNCiAgICAgICI8c21hbGw+KElmIGZvciBhbnkgcmVhc29uLCB5b3UgYXJlIHVuYWJsZSB0byBhY2Nlc3MgdGhlIGdhbWUgb24gdGhlIG9mZmljaWFsIFVSTCwgd2UgYXJlIGN1cnJlbnRseSB3b3JraW5nIG9uIGEgc2Vjb25kIGRvbWFpbi4pPC9zbWFsbD48L2Rpdj4iOw0KICB9Ow0KICBHYW1lLnRpbWVkb3V0ID0gZmFsc2U7DQogIEdhbWUuVGltZW91dCA9IGZ1bmN0aW9uICgpIHsNCiAgICBHYW1lLldyaXRlU2F2ZSgpOw0KICAgIEdhbWUua2lsbFNoaW1tZXJzKCk7DQogICAgbCgib2ZmR2FtZU1lc3NhZ2UiKS5pbm5lckhUTUwgPQ0KICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIj4nICsNCiAgICAgIChHYW1lLkhhcygiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIikNCiAgICAgICAgPyBsb2MoIkNvb2tpZSBDbGlja2VyIGlzIGluIHNsZWVwIG1vZGUgYW5kIGdlbmVyYXRpbmcgb2ZmbGluZSBjb29raWVzLiIpDQogICAgICAgIDogbG9jKCJDb29raWUgQ2xpY2tlciBpcyBpbiBzbGVlcCBtb2RlLiIpKSArDQogICAgICAiPC9kaXY+IiArDQogICAgICBsb2MoDQogICAgICAgICIlMSB0byByZXN1bWUgZnJvbSB5b3VyIHNhdmUgZmlsZS4iLA0KICAgICAgICAiPGEgIiArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgJz0iR2FtZS5SZXN1bWUoKTsiPicgKw0KICAgICAgICAgIGxvYygiQ2xpY2sgaGVyZSIpICsNCiAgICAgICAgICAiPC9hPiINCiAgICAgICkgKw0KICAgICAgJzxicj48ZGl2IHN0eWxlPSJmb250LXN0eWxlOml0YWxpYztmb250LXNpemU6NjUlO2xpbmUtaGVpZ2h0OjExMCU7b3BhY2l0eTowLjc1OyI+JyArDQogICAgICBsb2MoDQogICAgICAgICIodGhpcyBoYXBwZW5zIHdoZW4gdG9vIG1hbnkgZnJhbWVzIGFyZSBza2lwcGVkIGF0IG9uY2UsPGJyPnVzdWFsbHkgd2hlbiB0aGUgZ2FtZSBoYXMgYmVlbiBydW5uaW5nIGluIHRoZSBiYWNrZ3JvdW5kIGZvciBhIHdoaWxlKTxicj4oeW91IGNhbiB0dXJuIHRoaXMgZmVhdHVyZSBvZmYgaW4gdGhlIHNldHRpbmdzIG1lbnUpIg0KICAgICAgKSArDQogICAgICAiPC9kaXY+IjsNCiAgICBsKCJvZmZHYW1lTWVzc2FnZVdyYXAiKS5zdHlsZS5kaXNwbGF5ID0gInRhYmxlIjsNCiAgICBHYW1lLnRpbWVkb3V0ID0gdHJ1ZTsNCiAgICBjb25zb2xlLmxvZygNCiAgICAgICJbPT09IEdhbWUgdGltZWQgb3V0IGFuZCBoYXMgYmVlbiBwdXQgaW4gc2xlZXAgbW9kZS4gRGF0YSB3YXMgc2F2ZWQuID09PV0iDQogICAgKTsNCiAgfTsNCiAgR2FtZS5SZXN1bWUgPSBmdW5jdGlvbiAoKSB7DQogICAgbCgib2ZmR2FtZU1lc3NhZ2UiKS5pbm5lckhUTUwgPSAiIjsNCiAgICBsKCJvZmZHYW1lTWVzc2FnZVdyYXAiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgIEdhbWUudGltZWRvdXQgPSBmYWxzZTsNCiAgICBHYW1lLnRpbWUgPSBEYXRlLm5vdygpOw0KICAgIEdhbWUuYWNjdW11bGF0ZWREZWxheSA9IDA7DQogICAgR2FtZS5kZWxheVRpbWVvdXRzID0gMDsNCiAgICBHYW1lLmxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7DQogICAgR2FtZS5Mb29wKCk7DQogICAgR2FtZS5Mb2FkU2F2ZSgpOw0KICAgIGNvbnNvbGUubG9nKCJbPT09IEdhbWUgcmVzdW1lZCEgRGF0YSB3YXMgbG9hZGVkLiA9PT1dIik7DQogIH07DQoNCiAgR2FtZS5Jbml0ID0gZnVuY3Rpb24gKCkgew0KICAgIEdhbWUucmVhZHkgPSAxOw0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCVZBUklBQkxFUyBBTkQgUFJFU0VUUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuVCA9IDA7DQogICAgR2FtZS5kcmF3VCA9IDA7DQogICAgR2FtZS5sb29wVCA9IDA7DQogICAgR2FtZS5mcHMgPSAzMDsNCg0KICAgIEdhbWUuc2Vhc29uID0gR2FtZS5iYXNlU2Vhc29uOw0KDQogICAgR2FtZS5sID0gbCgiZ2FtZSIpOw0KICAgIEdhbWUud3JhcHBlciA9IGwoIndyYXBwZXIiKTsNCiAgICBHYW1lLmJvdW5kcyA9IDA7IC8vcmVjdGFuZ2xlIGRlZmluaW5nIHNjcmVlbiBsaW1pdHMgKHJpZ2h0LGxlZnQsYm90dG9tLHRvcCkgdXBkYXRlZCBldmVyeSBsb2dpYyBmcmFtZQ0KDQogICAgVG9wQmFyT2Zmc2V0ID0gMzI7DQogICAgaWYgKCFBcHApIEdhbWUud3JhcHBlci5jbGFzc0xpc3QuYWRkKCJvbldlYiIpOw0KICAgIGVsc2Ugew0KICAgICAgR2FtZS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoIm9mZldlYiIpOw0KICAgICAgVG9wQmFyT2Zmc2V0ID0gMDsNCiAgICB9DQoNCiAgICBpZiAoR2FtZS5tb2JpbGUgPT0gMSkgew0KICAgICAgR2FtZS53cmFwcGVyLmNsYXNzTmFtZSA9ICJtb2JpbGUiOw0KICAgIH0NCiAgICBHYW1lLmNsaWNrU3RyID0gR2FtZS50b3VjaEV2ZW50cyA/ICJvbnRvdWNoZW5kIiA6ICJvbmNsaWNrIjsNCg0KICAgIGwoInZlcnNpb25OdW1iZXIiKS5pbm5lckhUTUwgPQ0KICAgICAgInYuICIgKw0KICAgICAgR2FtZS52ZXJzaW9uICsNCiAgICAgICghQXBwDQogICAgICAgID8gJzxkaXYgaWQ9Imh0dHBzU3dpdGNoIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2s7YmFja2dyb3VuZDp1cmwoaW1nLycgKw0KICAgICAgICAgIChHYW1lLmh0dHBzID8gImxvY2tPbiIgOiAibG9ja09mZiIpICsNCiAgICAgICAgICAnLnBuZyk7d2lkdGg6MTZweDtoZWlnaHQ6MTZweDtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6NHB4O2xlZnQ6MHB4O21hcmdpbjowcHggLTJweDsiPjwvZGl2PicNCiAgICAgICAgOiAiIikgKw0KICAgICAgKEdhbWUuYmV0YSA/ICcgPHNwYW4gc3R5bGU9ImNvbG9yOiNmZjA7Ij5iZXRhPC9zcGFuPicgOiAiIik7DQoNCiAgICBpZiAoIUFwcCkgew0KICAgICAgaWYgKEdhbWUuYmV0YSkgew0KICAgICAgICB2YXIgbWUgPSBsKCJsaW5rVmVyc2lvbkJldGEiKTsNCiAgICAgICAgbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZSk7DQogICAgICB9IGVsc2UgaWYgKEdhbWUudmVyc2lvbiA9PSAxLjA0NjYpIHsNCiAgICAgICAgdmFyIG1lID0gbCgibGlua1ZlcnNpb25PbGQiKTsNCiAgICAgICAgbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB2YXIgbWUgPSBsKCJsaW5rVmVyc2lvbkxpdmUiKTsNCiAgICAgICAgbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZSk7DQogICAgICB9DQogICAgfQ0KDQogICAgR2FtZS5sYXN0QWN0aXZpdHkgPSBEYXRlLm5vdygpOyAvL3Jlc2V0IG9uIG1vdXNlIG1vdmUsIGtleSBwcmVzcyBvciBjbGljaw0KDQogICAgLy9sYXRlbmN5IGNvbXBlbnNhdG9yIHN0dWZmDQogICAgR2FtZS50aW1lID0gRGF0ZS5ub3coKTsNCiAgICBHYW1lLmFjY3VtdWxhdGVkRGVsYXkgPSAwOw0KICAgIEdhbWUuZGVsYXlUaW1lb3V0cyA9IDA7IC8vaG93IG1hbnkgdGltZXMgd2UndmUgZ29uZSBvdmVyIHRoZSB0aW1lb3V0IGRlbGF5DQogICAgR2FtZS5jYXRjaHVwTG9naWMgPSAwOw0KICAgIEdhbWUuZnBzU3RhcnRUaW1lID0gMDsNCiAgICBHYW1lLmZyYW1lTnVtYmVyID0gMDsNCiAgICBHYW1lLmN1cnJlbnRGcHMgPSBHYW1lLmZwczsNCiAgICBHYW1lLnByZXZpb3VzRnBzID0gR2FtZS5jdXJyZW50RnBzOw0KICAgIEdhbWUuZ2V0RnBzID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5mcmFtZU51bWJlcisrOw0KICAgICAgdmFyIGN1cnJlbnRUaW1lID0gKERhdGUubm93KCkgLSBHYW1lLmZwc1N0YXJ0VGltZSkgLyAxMDAwOw0KICAgICAgdmFyIHJlc3VsdCA9IE1hdGguZmxvb3IoR2FtZS5mcmFtZU51bWJlciAvIGN1cnJlbnRUaW1lKTsNCiAgICAgIGlmIChjdXJyZW50VGltZSA+IDEpIHsNCiAgICAgICAgR2FtZS5mcHNTdGFydFRpbWUgPSBEYXRlLm5vdygpOw0KICAgICAgICBHYW1lLmZyYW1lTnVtYmVyID0gMDsNCiAgICAgIH0NCiAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfTsNCg0KICAgIEdhbWUuY29va2llc0Vhcm5lZCA9IDA7IC8vYWxsIGNvb2tpZXMgZWFybmVkIGR1cmluZyBnYW1lcGxheQ0KICAgIEdhbWUuY29va2llcyA9IDA7IC8vY29va2llcw0KICAgIEdhbWUuY29va2llc2QgPSAwOyAvL2Nvb2tpZXMgZGlzcGxheQ0KICAgIEdhbWUuY29va2llc1BzID0gMTsgLy9jb29raWVzIHBlciBzZWNvbmQgKHRvIHJlY2FsY3VsYXRlIHdpdGggZXZlcnkgbmV3IHB1cmNoYXNlKQ0KICAgIEdhbWUuY29va2llc1BzUmF3ID0gMDsgLy9yYXcgY29va2llcyBwZXIgc2Vjb25kDQogICAgR2FtZS5jb29raWVzUHNSYXdIaWdoZXN0ID0gMDsgLy9oaWdoZXN0IHJhdyBjb29raWVzIHBlciBzZWNvbmQgdGhpcyBhc2NlbnNpb24NCiAgICBHYW1lLmNvb2tpZXNSZXNldCA9IDA7IC8vY29va2llcyBsb3N0IHRvIHJlc2V0dGluZyAodXNlZCB0byBkZXRlcm1pbmUgcHJlc3RpZ2UgYW5kIGhlYXZlbmx5IGNoaXBzKQ0KICAgIEdhbWUuY29va2llQ2xpY2tzID0gMDsgLy8rMSBmb3IgZWFjaCBjbGljayBvbiB0aGUgY29va2llDQogICAgR2FtZS5nb2xkZW5DbGlja3MgPSAwOyAvLysxIGZvciBlYWNoIGdvbGRlbiBjb29raWUgY2xpY2tlZCAoYWxsIHRpbWUpDQogICAgR2FtZS5nb2xkZW5DbGlja3NMb2NhbCA9IDA7IC8vKzEgZm9yIGVhY2ggZ29sZGVuIGNvb2tpZSBjbGlja2VkICh0aGlzIGdhbWUgb25seSkNCiAgICBHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcyA9IDA7IC8vKzEgZm9yIGVhY2ggZ29sZGVuIGNvb2tpZSBtaXNzZWQNCiAgICBHYW1lLmhhbmRtYWRlQ29va2llcyA9IDA7IC8vYWxsIHRoZSBjb29raWVzIG1hZGUgZnJvbSBjbGlja2luZyB0aGUgY29va2llDQogICAgR2FtZS5taWxrUHJvZ3Jlc3MgPSAwOyAvL3lvdSBnYWluIGEgbGl0dGxlIGJpdCBmb3IgZWFjaCBhY2hpZXZlbWVudC4gRWFjaCBpbmNyZW1lbnQgb2YgMSBpcyBhIGRpZmZlcmVudCBtaWxrIGRpc3BsYXllZC4NCiAgICBHYW1lLm1pbGtIID0gR2FtZS5taWxrUHJvZ3Jlc3MgLyAyOyAvL21pbGsgaGVpZ2h0LCBiZXR3ZWVuIDAgYW5kIDEgKGFsdGhvdWdoIHNob3VsZCBuZXZlciBnbyBhYm92ZSAwLjUpDQogICAgR2FtZS5taWxrSGQgPSAwOyAvL21pbGsgaGVpZ2h0IGRpc3BsYXkNCiAgICBHYW1lLm1pbGtUeXBlID0gMDsgLy9jdXN0b20gbWlsaw0KICAgIEdhbWUuYmdUeXBlID0gMDsgLy9jdXN0b20gYmFja2dyb3VuZA0KICAgIEdhbWUuY2hpbWVUeXBlID0gMDsgLy9nb2xkZW4gY29va2llIGNoaW1lDQogICAgR2FtZS5wcmVzdGlnZSA9IDA7IC8vcHJlc3RpZ2UgbGV2ZWwgKHJlY2FsY3VsYXRlZCBkZXBlbmRpbmcgb24gR2FtZS5jb29raWVzUmVzZXQpDQogICAgR2FtZS5oZWF2ZW5seUNoaXBzID0gMDsgLy9oZWF2ZW5seSBjaGlwcyB0aGUgcGxheWVyIGN1cnJlbnRseSBoYXMNCiAgICBHYW1lLmhlYXZlbmx5Q2hpcHNEaXNwbGF5ZWQgPSAwOyAvL3RpY2tzIHVwIG9yIGRvd24gdG8gbWF0Y2ggR2FtZS5oZWF2ZW5seUNoaXBzDQogICAgR2FtZS5oZWF2ZW5seUNoaXBzU3BlbnQgPSAwOyAvL2hlYXZlbmx5IGNoaXBzIHNwZW50IG9uIGNvb2tpZXMsIHVwZ3JhZGVzIGFuZCBzdWNoDQogICAgR2FtZS5oZWF2ZW5seUNvb2tpZXMgPSAwOyAvL2hvdyBtYW55IGNvb2tpZXMgaGF2ZSB3ZSBiYWtlZCBmcm9tIGNoaXBzICh1bnVzZWQpDQogICAgR2FtZS5wZXJtYW5lbnRVcGdyYWRlcyA9IFstMSwgLTEsIC0xLCAtMSwgLTFdOw0KICAgIEdhbWUuYXNjZW5zaW9uTW9kZSA9IDA7IC8vdHlwZSBvZiBjaGFsbGVuZ2UgcnVuIGlmIGFueQ0KICAgIEdhbWUucmVzZXRzID0gMDsgLy9yZXNldCBjb3VudGVyDQogICAgR2FtZS5sdW1wcyA9IC0xOyAvL3N1Z2FyIGx1bXBzDQogICAgR2FtZS5sdW1wc1RvdGFsID0gLTE7IC8vc3VnYXIgbHVtcHMgZWFybmVkIGFjcm9zcyBhbGwgcGxheXRocm91Z2hzICgtMSBtZWFucyB0aGV5IGhhdmVuJ3QgZXZlbiBzdGFydGVkIHlldCkNCiAgICBHYW1lLmx1bXBUID0gRGF0ZS5ub3coKTsgLy90aW1lIHdoZW4gdGhlIGN1cnJlbnQgbHVtcCBzdGFydGVkIGZvcm1pbmcNCiAgICBHYW1lLmx1bXBSZWZpbGwgPSAwOyAvL3RpbWUgbGVmdCBiZWZvcmUgYSBzdWdhciBsdW1wIGNhbiBiZSB1c2VkIGFnYWluIChvbiBtaW5pZ2FtZSByZWZpbGxzIGV0YykgaW4gbG9naWMgZnJhbWVzDQoNCiAgICBHYW1lLm1ha2VTZWVkID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGNoYXJzID0gImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Ii5zcGxpdCgiIik7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykgew0KICAgICAgICBzdHIgKz0gY2hvb3NlKGNoYXJzKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBzdHI7DQogICAgfTsNCiAgICBHYW1lLnNlZWQgPSBHYW1lLm1ha2VTZWVkKCk7IC8vZWFjaCBydW4gaGFzIGl0cyBvd24gc2VlZCwgdXNlZCBmb3IgZGV0ZXJtaW5pc3RpYyByYW5kb20gc3R1ZmYNCg0KICAgIEdhbWUudm9sdW1lID0gNzU7IC8vc291bmQgdm9sdW1lDQogICAgR2FtZS52b2x1bWVNdXNpYyA9IDUwOyAvL211c2ljIHZvbHVtZQ0KDQogICAgR2FtZS5lbGRlcldyYXRoID0gMDsNCiAgICBHYW1lLmVsZGVyV3JhdGhPbGQgPSAwOw0KICAgIEdhbWUuZWxkZXJXcmF0aEQgPSAwOw0KICAgIEdhbWUucGxlZGdlcyA9IDA7DQogICAgR2FtZS5wbGVkZ2VUID0gMDsNCiAgICBHYW1lLnJlc2VhcmNoVCA9IDA7DQogICAgR2FtZS5uZXh0UmVzZWFyY2ggPSAwOw0KICAgIEdhbWUuY29va2llc1N1Y2tlZCA9IDA7IC8vY29va2llcyBzdWNrZWQgYnkgd3JpbmtsZXJzDQogICAgR2FtZS5jcHNTdWNrZWQgPSAwOyAvL3BlcmNlbnQgb2YgQ3BTIGJlaW5nIHN1Y2tlZCBieSB3cmlua2xlcnMNCiAgICBHYW1lLndyaW5rbGVyc1BvcHBlZCA9IDA7DQogICAgR2FtZS5zYW50YUxldmVsID0gMDsNCiAgICBHYW1lLnJlaW5kZWVyQ2xpY2tlZCA9IDA7DQogICAgR2FtZS5zZWFzb25UID0gMDsNCiAgICBHYW1lLnNlYXNvblVzZXMgPSAwOw0KICAgIEdhbWUuZHJhZ29uTGV2ZWwgPSAwOw0KICAgIEdhbWUuZHJhZ29uQXVyYSA9IDA7DQogICAgR2FtZS5kcmFnb25BdXJhMiA9IDA7DQoNCiAgICBHYW1lLmZvcnR1bmVHQyA9IDA7DQogICAgR2FtZS5mb3J0dW5lQ1BTID0gMDsNCg0KICAgIEdhbWUuYmxlbmRNb2Rlc09uID0NCiAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRldGVjdCIpLnN0eWxlLm1peEJsZW5kTW9kZSA9PT0gIiI7DQoNCiAgICBHYW1lLmJnID0gIiI7IC8vYmFja2dyb3VuZCAoZ3JhbmRtYXMgYW5kIHN1Y2gpDQogICAgR2FtZS5iZ0ZhZGUgPSAiIjsgLy9mYWRpbmcgdG8gYmFja2dyb3VuZA0KICAgIEdhbWUuYmdSID0gMDsgLy9yYXRpbyAoMCAtIG5vdCBmYWRlZCwgMSAtIGZ1bGx5IGZhZGVkKQ0KICAgIEdhbWUuYmdSZCA9IDA7IC8vcmF0aW8gZGlzcGxheWVkDQoNCiAgICBHYW1lLndpbmRvd1cgPSB3aW5kb3cuaW5uZXJXaWR0aDsNCiAgICBHYW1lLndpbmRvd0ggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQogICAgR2FtZS5zY2FsZSA9IDE7DQoNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgZnVuY3Rpb24gKGUpIHsNCiAgICAgIEdhbWUucmVzaXplKCk7DQogICAgICBpZiAoQXBwICYmIEFwcC5vblJlc2l6ZSkgQXBwLm9uUmVzaXplKCk7DQogICAgfSk7DQoNCiAgICBHYW1lLnJlc2l6ZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciB3ID0gd2luZG93LmlubmVyV2lkdGg7DQogICAgICB2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodDsNCg0KICAgICAgdmFyIHByZXZXID0gR2FtZS53aW5kb3dXOw0KICAgICAgdmFyIHByZXZIID0gR2FtZS53aW5kb3dIOw0KDQogICAgICB2YXIgc2NhbGUgPSBNYXRoLm1pbih3IC8gTWF0aC5tYXgoODAwLCB3KSwgaCAvIE1hdGgubWF4KDIwMCwgaCkpOw0KICAgICAgR2FtZS53aW5kb3dXID0gTWF0aC5mbG9vcih3IC8gc2NhbGUpOw0KICAgICAgR2FtZS53aW5kb3dIID0gTWF0aC5mbG9vcihoIC8gc2NhbGUpOw0KICAgICAgaWYgKHNjYWxlICE9IDEpIHsNCiAgICAgICAgR2FtZS53cmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9ICJzY2FsZSgiICsgc2NhbGUgKyAiKSI7DQogICAgICAgIEdhbWUud3JhcHBlci5zdHlsZS53aWR0aCA9IEdhbWUud2luZG93VyArICJweCI7DQogICAgICAgIEdhbWUud3JhcHBlci5zdHlsZS5oZWlnaHQgPSBHYW1lLndpbmRvd0ggKyAicHgiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgR2FtZS53cmFwcGVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KCJ0cmFuc2Zvcm0iKTsNCiAgICAgICAgR2FtZS53cmFwcGVyLnN0eWxlLndpZHRoID0gIjEwMCUiOw0KICAgICAgICBHYW1lLndyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOw0KICAgICAgfQ0KICAgICAgR2FtZS5zY2FsZSA9IHNjYWxlOw0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNbaV07DQogICAgICAgIG1lLnRvUmVzaXplID0gdHJ1ZTsNCiAgICAgICAgaWYgKG1lLm1pbmlnYW1lICYmIG1lLm1pbmlnYW1lLm9uUmVzaXplKSBtZS5taW5pZ2FtZS5vblJlc2l6ZSgpOw0KICAgICAgfQ0KDQogICAgICBpZiAoR2FtZS5nZXROZXdUaWNrZXIpIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHByZXZXID49IEdhbWUudGlja2VyVG9vTmFycm93ICYmDQogICAgICAgICAgR2FtZS53aW5kb3dXIDwgR2FtZS50aWNrZXJUb29OYXJyb3cNCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuZ2V0TmV3VGlja2VyKHRydWUpOw0KICAgICAgICBlbHNlIGlmICgNCiAgICAgICAgICBwcmV2VyA8IEdhbWUudGlja2VyVG9vTmFycm93ICYmDQogICAgICAgICAgR2FtZS53aW5kb3dXID49IEdhbWUudGlja2VyVG9vTmFycm93DQogICAgICAgICkNCiAgICAgICAgICBHYW1lLmdldE5ld1RpY2tlcih0cnVlKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUucmVzaXplKCk7DQoNCiAgICBHYW1lLnN0YXJ0RGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOyAvL3doZW4gd2Ugc3RhcnRlZCBwbGF5aW5nDQogICAgR2FtZS5mdWxsRGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOyAvL3doZW4gd2Ugc3RhcnRlZCBwbGF5aW5nIChjYXJyaWVzIG92ZXIgd2l0aCByZXNldHMpDQogICAgR2FtZS5sYXN0RGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOyAvL3doZW4gd2UgbGFzdCBzYXZlZCB0aGUgZ2FtZSAodXNlZCB0byBjb21wdXRlICJjb29raWVzIG1hZGUgc2luY2Ugd2UgY2xvc2VkIHRoZSBnYW1lIiBldGMpDQoNCiAgICBHYW1lLnByZWZzID0gW107DQogICAgR2FtZS5EZWZhdWx0UHJlZnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLnByZWZzLnBhcnRpY2xlcyA9IDE7IC8vcGFydGljbGUgZWZmZWN0cyA6IGZhbGxpbmcgY29va2llcyBldGMNCiAgICAgIEdhbWUucHJlZnMubnVtYmVycyA9IDE7IC8vbnVtYmVycyB0aGF0IHBvcCB1cCB3aGVuIGNsaWNraW5nIHRoZSBjb29raWUNCiAgICAgIEdhbWUucHJlZnMuYXV0b3NhdmUgPSAxOyAvL3NhdmUgdGhlIGdhbWUgZXZlcnkgbWludXRlIG9yIHNvDQogICAgICBHYW1lLnByZWZzLmF1dG91cGRhdGUgPSAxOyAvL3NlbmQgYW4gQUpBWCByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgZXZlcnkgMzAgbWludXRlcyAobm90ZSA6IGlnbm9yZWQpDQogICAgICBHYW1lLnByZWZzLm1pbGsgPSAxOyAvL2Rpc3BsYXkgbWlsaw0KICAgICAgR2FtZS5wcmVmcy5mYW5jeSA9IDE7IC8vQ1NTIHNoYWRvdyBlZmZlY3RzIChtaWdodCBiZSBoZWF2eSBvbiBzb21lIGJyb3dzZXJzKQ0KICAgICAgR2FtZS5wcmVmcy53YXJuID0gMDsgLy93YXJuIGJlZm9yZSBjbG9zaW5nIHRoZSB3aW5kb3cNCiAgICAgIEdhbWUucHJlZnMuY3Vyc29ycyA9IDE7IC8vZGlzcGxheSBjdXJzb3JzDQogICAgICBHYW1lLnByZWZzLmZvY3VzID0gMTsgLy9tYWtlIHRoZSBnYW1lIHJlZnJlc2ggbGVzcyBmcmVxdWVudGx5IHdoZW4gb2ZmLWZvY3VzDQogICAgICBHYW1lLnByZWZzLnBvcHVwcyA9IDA7IC8vdXNlIG9sZC1zdHlsZSBwb3B1cHMgKG5vIGxvbmdlciB1c2VkKQ0KICAgICAgR2FtZS5wcmVmcy5mb3JtYXQgPSAwOyAvL3Nob3J0ZW4gbnVtYmVycw0KICAgICAgR2FtZS5wcmVmcy5ub3RpZnMgPSAwOyAvL25vdGlmaWNhdGlvbnMgZmFkZSBmYXN0ZXINCiAgICAgIEdhbWUucHJlZnMuYW5pbWF0ZSA9IDE7IC8vYW5pbWF0ZSBidWlsZGluZ3MNCiAgICAgIEdhbWUucHJlZnMud29iYmx5ID0gMTsgLy93b2JibHkgY29va2llDQogICAgICBHYW1lLnByZWZzLm1vbm9zcGFjZSA9IDA7IC8vYWx0IG1vbm9zcGFjZSBmb250IGZvciBjb29raWVzDQogICAgICBHYW1lLnByZWZzLmZpbHRlcnMgPSAxOyAvL0NTUyBmaWx0ZXIgZWZmZWN0cyAobWlnaHQgYmUgaGVhdnkgb24gc29tZSBicm93c2VycykNCiAgICAgIEdhbWUucHJlZnMuY29va2llc291bmQgPSAxOyAvL3VzZSBuZXcgY29va2llIGNsaWNrIHNvdW5kDQogICAgICBHYW1lLnByZWZzLmNyYXRlcyA9IDA7IC8vc2hvdyBjcmF0ZXMgYXJvdW5kIGljb25zIGluIHN0YXRzDQogICAgICBHYW1lLnByZWZzLmFsdERyYXcgPSAwOyAvL3VzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgdG8gdXBkYXRlIGRyYXdpbmcgaW5zdGVhZCBvZiBmaXhlZCAzMCBmcHMgc2V0VGltZW91dA0KICAgICAgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9IDE7IC8vaWYgdHJ1ZSwgc2hvdyBhICJIYXZlIHlvdSBiYWNrZWQgdXAgeW91ciBzYXZlPyIgbWVzc2FnZSBvbiBzYXZlIGxvYWQ7IHNldCB0byBmYWxzZSB3aGVuIHNhdmUgaXMgZXhwb3J0ZWQNCiAgICAgIEdhbWUucHJlZnMuZXh0cmFCdXR0b25zID0gMTsgLy9pZiB0cnVlLCBzaG93IE11dGUgYnV0dG9ucyBhbmQgdGhlIGJ1aWxkaW5nIG1hc3RlciBiYXINCiAgICAgIEdhbWUucHJlZnMuYXNrTHVtcHMgPSAwOyAvL2lmIHRydWUsIHNob3cgYSBwcm9tcHQgYmVmb3JlIHNwZW5kaW5nIGx1bXBzDQogICAgICBHYW1lLnByZWZzLmN1c3RvbUdyYW5kbWFzID0gMTsgLy9pZiB0cnVlLCBzaG93IHBhdHJlb24gbmFtZXMgZm9yIGdyYW5kbWFzDQogICAgICBHYW1lLnByZWZzLnRpbWVvdXQgPSAwOyAvL2lmIHRydWUsIGdhbWUgbWF5IHNob3cgcGF1c2Ugc2NyZWVuIHdoZW4gdGltZWQgb3V0DQogICAgICBHYW1lLnByZWZzLmNsb3VkU2F2ZSA9IDE7IC8vaWYgdHJ1ZSBhbmQgb24gU3RlYW0sIHNhdmUgYW5kIGxvYWQgdG8gY2xvdWQNCiAgICAgIEdhbWUucHJlZnMuYmdNdXNpYyA9IDE7IC8vaWYgdHJ1ZSBhbmQgb24gU3RlYW0sIHBsYXkgbXVzaWMgZXZlbiB3aGVuIGdhbWUgaXNuJ3QgZm9jdXNlZA0KICAgICAgR2FtZS5wcmVmcy5ub3RTY2FyeSA9IDA7IC8vaWYgdHJ1ZSwgbWFrZSBzb21lIG9mIHRoZSBzY2FyeSBzdHVmZiBsZXNzIHNjYXJ5ICgiZXllYnJvdyBtb2RlIikNCiAgICAgIEdhbWUucHJlZnMuZnVsbHNjcmVlbiA9IDA7IC8vaWYgdHJ1ZSwgU3RlYW0gZ2FtZSB3aWxsIGJlIGZ1bGxzY3JlZW4NCiAgICAgIEdhbWUucHJlZnMuc2NyZWVucmVhZGVyID0gMDsgLy9pZiB0cnVlLCBhZGQgc29tZSBET00gc3R1ZmYgdG8gZmFjaWxpdGF0ZSBzY3JlZW5yZWFkZXIgaW50ZXJhY3Rpb24gKHJlcXVpcmVzIHJlbG9hZCkNCiAgICAgIEdhbWUucHJlZnMuZGlzY29yZFByZXNlbmNlID0gMTsgLy9pZiB0cnVlIGFuZCBhcHBsaWNhYmxlLCBzaG93IGdhbWUgYWN0aXZpdHkgaW4gRGlzY29yZCBzdGF0dXMNCiAgICB9Ow0KICAgIEdhbWUuRGVmYXVsdFByZWZzKCk7DQoNCiAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgIGlmIChHYW1lLnByZWZzICYmIEdhbWUucHJlZnMud2Fybikgew0KICAgICAgICBpZiAodHlwZW9mIGV2ZW50ID09ICJ1bmRlZmluZWQiKSBldmVudCA9IHdpbmRvdy5ldmVudDsNCiAgICAgICAgaWYgKGV2ZW50KQ0KICAgICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gbG9jKA0KICAgICAgICAgICAgIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjbG9zZSBDb29raWUgQ2xpY2tlcj8iDQogICAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgR2FtZS5Nb2JpbGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUdhbWUubW9iaWxlKSB7DQogICAgICAgIEdhbWUud3JhcHBlci5jbGFzc05hbWUgPSAibW9iaWxlIjsNCiAgICAgICAgR2FtZS5tb2JpbGUgPSAxOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgR2FtZS53cmFwcGVyLmNsYXNzTmFtZSA9ICIiOw0KICAgICAgICBHYW1lLm1vYmlsZSA9IDA7DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUuc2hvd0JhY2t1cFdhcm5pbmcgPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgbG9jKCJCYWNrIHVwIHlvdXIgc2F2ZSEiKSwNCiAgICAgICAgbG9jKA0KICAgICAgICAgICdIZWxsbyBhZ2FpbiEgSnVzdCBhIHJlbWluZGVyIHRoYXQgeW91IG1heSB3YW50IHRvIGJhY2sgdXAgeW91ciBDb29raWUgQ2xpY2tlciBzYXZlIGV2ZXJ5IG9uY2UgaW4gYSB3aGlsZSwganVzdCBpbiBjYXNlLjxicj5UbyBkbyBzbywgZ28gdG8gT3B0aW9ucyBhbmQgaGl0ICJFeHBvcnQgc2F2ZSIgb3IgIlNhdmUgdG8gZmlsZSIhJw0KICAgICAgICApICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGEgc3R5bGU9ImZsb2F0OnJpZ2h0OyIgb25jbGljaz0iR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZz0wOz09Q0xPU0VUSElTKCk9PSI+JyArDQogICAgICAgICAgbG9jKCJEb24ndCBzaG93IHRoaXMgYWdhaW4iKSArDQogICAgICAgICAgIjwvYT4iLA0KICAgICAgICBbMjUsIDddDQogICAgICApOw0KICAgIH07DQoNCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJQkFLRVJZIE5BTUUNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLlJhbmRvbUJha2VyeU5hbWUgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBpZiAoRU4pIHsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAoTWF0aC5yYW5kb20oKSA+IDAuMDUNCiAgICAgICAgICAgID8gY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiTWFnaWMiLA0KICAgICAgICAgICAgICAgICJGYW50YXN0aWMiLA0KICAgICAgICAgICAgICAgICJGYW5jeSIsDQogICAgICAgICAgICAgICAgIlNhc3N5IiwNCiAgICAgICAgICAgICAgICAiU25henp5IiwNCiAgICAgICAgICAgICAgICAiUHJldHR5IiwNCiAgICAgICAgICAgICAgICAiQ3V0ZSIsDQogICAgICAgICAgICAgICAgIlBpcmF0ZSIsDQogICAgICAgICAgICAgICAgIk5pbmphIiwNCiAgICAgICAgICAgICAgICAiWm9tYmllIiwNCiAgICAgICAgICAgICAgICAiUm9ib3QiLA0KICAgICAgICAgICAgICAgICJSYWRpY2FsIiwNCiAgICAgICAgICAgICAgICAiVXJiYW4iLA0KICAgICAgICAgICAgICAgICJDb29sIiwNCiAgICAgICAgICAgICAgICAiSGVsbGEiLA0KICAgICAgICAgICAgICAgICJTd2VldCIsDQogICAgICAgICAgICAgICAgIkF3ZnVsIiwNCiAgICAgICAgICAgICAgICAiRG91YmxlIiwNCiAgICAgICAgICAgICAgICAiVHJpcGxlIiwNCiAgICAgICAgICAgICAgICAiVHVyYm8iLA0KICAgICAgICAgICAgICAgICJUZWNobm8iLA0KICAgICAgICAgICAgICAgICJEaXNjbyIsDQogICAgICAgICAgICAgICAgIkVsZWN0cm8iLA0KICAgICAgICAgICAgICAgICJEYW5jaW5nIiwNCiAgICAgICAgICAgICAgICAiV29uZGVyIiwNCiAgICAgICAgICAgICAgICAiTXV0YW50IiwNCiAgICAgICAgICAgICAgICAiU3BhY2UiLA0KICAgICAgICAgICAgICAgICJTY2llbmNlIiwNCiAgICAgICAgICAgICAgICAiTWVkaWV2YWwiLA0KICAgICAgICAgICAgICAgICJGdXR1cmUiLA0KICAgICAgICAgICAgICAgICJDYXB0YWluIiwNCiAgICAgICAgICAgICAgICAiQmVhcmRlZCIsDQogICAgICAgICAgICAgICAgIkxvdmVseSIsDQogICAgICAgICAgICAgICAgIlRpbnkiLA0KICAgICAgICAgICAgICAgICJCaWciLA0KICAgICAgICAgICAgICAgICJGaXJlIiwNCiAgICAgICAgICAgICAgICAiV2F0ZXIiLA0KICAgICAgICAgICAgICAgICJGcm96ZW4iLA0KICAgICAgICAgICAgICAgICJNZXRhbCIsDQogICAgICAgICAgICAgICAgIlBsYXN0aWMiLA0KICAgICAgICAgICAgICAgICJTb2xpZCIsDQogICAgICAgICAgICAgICAgIkxpcXVpZCIsDQogICAgICAgICAgICAgICAgIk1vbGR5IiwNCiAgICAgICAgICAgICAgICAiU2hpbnkiLA0KICAgICAgICAgICAgICAgICJIYXBweSIsDQogICAgICAgICAgICAgICAgIkhhcHB5IExpdHRsZSIsDQogICAgICAgICAgICAgICAgIlNsaW15IiwNCiAgICAgICAgICAgICAgICAiVGFzdHkiLA0KICAgICAgICAgICAgICAgICJEZWxpY2lvdXMiLA0KICAgICAgICAgICAgICAgICJIdW5ncnkiLA0KICAgICAgICAgICAgICAgICJHcmVlZHkiLA0KICAgICAgICAgICAgICAgICJMZXRoYWwiLA0KICAgICAgICAgICAgICAgICJQcm9mZXNzb3IiLA0KICAgICAgICAgICAgICAgICJEb2N0b3IiLA0KICAgICAgICAgICAgICAgICJQb3dlciIsDQogICAgICAgICAgICAgICAgIkNob2NvbGF0ZSIsDQogICAgICAgICAgICAgICAgIkNydW1ibHkiLA0KICAgICAgICAgICAgICAgICJDaG9rbGl0IiwNCiAgICAgICAgICAgICAgICAiUmlnaHRlb3VzIiwNCiAgICAgICAgICAgICAgICAiR2xvcmlvdXMiLA0KICAgICAgICAgICAgICAgICJNbmVtb25pYyIsDQogICAgICAgICAgICAgICAgIlBzeWNoaWMiLA0KICAgICAgICAgICAgICAgICJGcmVuZXRpYyIsDQogICAgICAgICAgICAgICAgIkhlY3RpYyIsDQogICAgICAgICAgICAgICAgIkNyYXp5IiwNCiAgICAgICAgICAgICAgICAiUm95YWwiLA0KICAgICAgICAgICAgICAgICJFbCIsDQogICAgICAgICAgICAgICAgIlZvbiIsDQogICAgICAgICAgICAgIF0pICsgIiAiDQogICAgICAgICAgICA6ICJNYyIpICsNCiAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgIkNvb2tpZSIsDQogICAgICAgICAgICAiQmlzY3VpdCIsDQogICAgICAgICAgICAiTXVmZmluIiwNCiAgICAgICAgICAgICJTY29uZSIsDQogICAgICAgICAgICAiQ3VwY2FrZSIsDQogICAgICAgICAgICAiUGFuY2FrZSIsDQogICAgICAgICAgICAiQ2hpcCIsDQogICAgICAgICAgICAiU3Byb2NrZXQiLA0KICAgICAgICAgICAgIkdpem1vIiwNCiAgICAgICAgICAgICJQdXBwZXQiLA0KICAgICAgICAgICAgIk1pdHRlbiIsDQogICAgICAgICAgICAiU29jayIsDQogICAgICAgICAgICAiVGVhcG90IiwNCiAgICAgICAgICAgICJNeXN0ZXJ5IiwNCiAgICAgICAgICAgICJCYWtlciIsDQogICAgICAgICAgICAiQ29vayIsDQogICAgICAgICAgICAiR3JhbmRtYSIsDQogICAgICAgICAgICAiQ2xpY2siLA0KICAgICAgICAgICAgIkNsaWNrZXIiLA0KICAgICAgICAgICAgIlNwYWNlc2hpcCIsDQogICAgICAgICAgICAiRmFjdG9yeSIsDQogICAgICAgICAgICAiUG9ydGFsIiwNCiAgICAgICAgICAgICJNYWNoaW5lIiwNCiAgICAgICAgICAgICJFeHBlcmltZW50IiwNCiAgICAgICAgICAgICJNb25zdGVyIiwNCiAgICAgICAgICAgICJQYW5pYyIsDQogICAgICAgICAgICAiQnVyZ2xhciIsDQogICAgICAgICAgICAiQmFuZGl0IiwNCiAgICAgICAgICAgICJCb290eSIsDQogICAgICAgICAgICAiUG90YXRvIiwNCiAgICAgICAgICAgICJQaXp6YSIsDQogICAgICAgICAgICAiQnVyZ2VyIiwNCiAgICAgICAgICAgICJTYXVzYWdlIiwNCiAgICAgICAgICAgICJNZWF0YmFsbCIsDQogICAgICAgICAgICAiU3BhZ2hldHRpIiwNCiAgICAgICAgICAgICJNYWNhcm9uaSIsDQogICAgICAgICAgICAiS2l0dGVuIiwNCiAgICAgICAgICAgICJQdXBweSIsDQogICAgICAgICAgICAiR2lyYWZmZSIsDQogICAgICAgICAgICAiWmVicmEiLA0KICAgICAgICAgICAgIlBhcnJvdCIsDQogICAgICAgICAgICAiRG9scGhpbiIsDQogICAgICAgICAgICAiRHVja2xpbmciLA0KICAgICAgICAgICAgIlNsb3RoIiwNCiAgICAgICAgICAgICJUdXJ0bGUiLA0KICAgICAgICAgICAgIkdvYmxpbiIsDQogICAgICAgICAgICAiUGl4aWUiLA0KICAgICAgICAgICAgIkdub21lIiwNCiAgICAgICAgICAgICJDb21wdXRlciIsDQogICAgICAgICAgICAiUGlyYXRlIiwNCiAgICAgICAgICAgICJOaW5qYSIsDQogICAgICAgICAgICAiWm9tYmllIiwNCiAgICAgICAgICAgICJSb2JvdCIsDQogICAgICAgICAgXSkNCiAgICAgICAgKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICgNCiAgICAgICAgICBsb2NTdHJpbmdzWyJiYWtlcnkgcmFuZG9tIG5hbWUsIDFzdCBoYWxmIl0gJiYNCiAgICAgICAgICBsb2NTdHJpbmdzWyJiYWtlcnkgcmFuZG9tIG5hbWUsIDJuZCBoYWxmIl0NCiAgICAgICAgKQ0KICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgY2hvb3NlKGxvYygiYmFrZXJ5IHJhbmRvbSBuYW1lLCAxc3QgaGFsZiIpKSArDQogICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgY2hvb3NlKGxvYygiYmFrZXJ5IHJhbmRvbSBuYW1lLCAybmQgaGFsZiIpKTsNCiAgICAgICAgZWxzZSBzdHIgKz0gY2hvb3NlKGxvYygiYmFrZXJ5IHJhbmRvbSBuYW1lIikpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHN0cjsNCiAgICB9Ow0KICAgIEdhbWUuR2V0QmFrZXJ5TmFtZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLlJhbmRvbUJha2VyeU5hbWUoKTsNCiAgICB9Ow0KICAgIEdhbWUuYmFrZXJ5TmFtZUwgPSBsKCJiYWtlcnlOYW1lIik7DQogICAgR2FtZS5iYWtlcnlOYW1lU2V0ID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIHZhciBleHAgPSBuZXcgUmVnRXhwKCJbXidcXC1fMC05IFxccHtMfV0iLCAiZ3UiKTsNCiAgICAgICAgR2FtZS5iYWtlcnlOYW1lID0gd2hhdC5yZXBsYWNlKGV4cCwgIiAiKTsNCiAgICAgICAgLy9HYW1lLmJha2VyeU5hbWU9d2hhdC5yZXBsYWNlKC9bXidcLV8wLTkgXHB7TH1dL2d1LCcgJyk7DQogICAgICAgIEdhbWUuYmFrZXJ5TmFtZSA9IEdhbWUuYmFrZXJ5TmFtZS50cmltKCkuc3Vic3RyaW5nKDAsIDI4KTsNCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgdmFyIGV4cCA9IG5ldyBSZWdFeHAoIlcrIiwgImciKTsNCiAgICAgICAgR2FtZS5iYWtlcnlOYW1lID0gd2hhdC5yZXBsYWNlKGV4cCwgIiAiKTsNCiAgICAgICAgLy9HYW1lLmJha2VyeU5hbWU9d2hhdC5yZXBsYWNlKC9cVysvZywnICcpOw0KICAgICAgICBHYW1lLmJha2VyeU5hbWUgPSBHYW1lLmJha2VyeU5hbWUuc3Vic3RyaW5nKDAsIDI4KTsNCiAgICAgIH0NCiAgICAgIEdhbWUuYmFrZXJ5TmFtZVJlZnJlc2goKTsNCiAgICAgIGlmIChHYW1lLmJha2VyeU5hbWUgPT0gIlJFU1RPUkUgQkFDS1VQIiAmJiBBcHAgJiYgQXBwLnJlc3RvcmVCYWNrdXApDQogICAgICAgIEFwcC5yZXN0b3JlQmFja3VwKCk7DQogICAgfTsNCiAgICBHYW1lLmJha2VyeU5hbWVSZWZyZXNoID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG5hbWUgPSBHYW1lLmJha2VyeU5hbWU7DQogICAgICBpZiAoRU4pIHsNCiAgICAgICAgaWYgKG5hbWUuc2xpY2UoLTEpLnRvTG93ZXJDYXNlKCkgPT0gInMiKSBuYW1lICs9ICInIGJha2VyeSI7DQogICAgICAgIGVsc2UgbmFtZSArPSAiJ3MgYmFrZXJ5IjsNCiAgICAgIH0gZWxzZSBuYW1lID0gbG9jKCIlMSdzIGJha2VyeSIsIG5hbWUpOw0KICAgICAgR2FtZS5iYWtlcnlOYW1lTC50ZXh0Q29udGVudCA9IG5hbWU7DQogICAgICBuYW1lID0gR2FtZS5iYWtlcnlOYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgICBpZiAobmFtZSA9PSAib3J0ZWlsIikgR2FtZS5XaW4oIkdvZCBjb21wbGV4Iik7DQogICAgICBpZiAoDQogICAgICAgICFBcHAgJiYNCiAgICAgICAgbmFtZS5pbmRleE9mKCJzYXlzb3BlbnNlc2FtZSIsIG5hbWUubGVuZ3RoIC0gInNheXNvcGVuc2VzYW1lIi5sZW5ndGgpID4NCiAgICAgICAgICAwICYmDQogICAgICAgICFHYW1lLnNlc2FtZQ0KICAgICAgKQ0KICAgICAgICBHYW1lLk9wZW5TZXNhbWUoKTsNCiAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgfTsNCiAgICBHYW1lLmJha2VyeU5hbWVQcm9tcHQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgR2FtZS5Qcm9tcHQoDQogICAgICAgICI8aWQgTmFtZUJha2VyeT48aDM+IiArDQogICAgICAgICAgbG9jKCJOYW1lIHlvdXIgYmFrZXJ5IikgKw0KICAgICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgICBsb2MoIldoYXQgc2hvdWxkIHlvdXIgYmFrZXJ5J3MgbmFtZSBiZT8iKSArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9ImJsb2NrIj48aW5wdXQgdHlwZT0idGV4dCIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO3dpZHRoOjEwMCU7IiBpZD0iYmFrZXJ5TmFtZUlucHV0IiB2YWx1ZT0iJyArDQogICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAnIi8+PC9kaXY+JywNCiAgICAgICAgWw0KICAgICAgICAgIFsNCiAgICAgICAgICAgIGxvYygiQ29uZmlybSIpLA0KICAgICAgICAgICAgImlmIChsKCdiYWtlcnlOYW1lSW5wdXQnKS52YWx1ZS5sZW5ndGg+MCkge0dhbWUuYmFrZXJ5TmFtZVNldChsKCdiYWtlcnlOYW1lSW5wdXQnKS52YWx1ZSk7R2FtZS5XaW4oJ1doYXRcXCdzIGluIGEgbmFtZScpO0dhbWUuQ2xvc2VQcm9tcHQoKTt9IiwNCiAgICAgICAgICBdLA0KICAgICAgICAgIFtsb2MoIlJhbmRvbSIpLCAiR2FtZS5iYWtlcnlOYW1lUHJvbXB0UmFuZG9tKCk7Il0sDQogICAgICAgICAgbG9jKCJDYW5jZWwiKSwNCiAgICAgICAgXQ0KICAgICAgKTsNCiAgICAgIGwoImJha2VyeU5hbWVJbnB1dCIpLmZvY3VzKCk7DQogICAgICBsKCJiYWtlcnlOYW1lSW5wdXQiKS5zZWxlY3QoKTsNCiAgICB9Ow0KICAgIEdhbWUuYmFrZXJ5TmFtZVByb21wdFJhbmRvbSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGwoImJha2VyeU5hbWVJbnB1dCIpLnZhbHVlID0gR2FtZS5SYW5kb21CYWtlcnlOYW1lKCk7DQogICAgfTsNCiAgICBBZGRFdmVudChHYW1lLmJha2VyeU5hbWVMLCAiY2xpY2siLCBHYW1lLmJha2VyeU5hbWVQcm9tcHQpOw0KDQogICAgR2FtZS5iYWtlcnlOYW1lU2V0KEdhbWUuR2V0QmFrZXJ5TmFtZSgpKTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlUT09MVElQDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgR2FtZS50b29sdGlwID0gew0KICAgICAgdGV4dDogIiIsDQogICAgICB4OiAwLA0KICAgICAgeTogMCwNCiAgICAgIG9yaWdpbjogIiIsDQogICAgICBvbjogMCwNCiAgICAgIHR0OiBsKCJ0b29sdGlwIiksDQogICAgICB0dGE6IGwoInRvb2x0aXBBbmNob3IiKSwNCiAgICAgIHNob3VsZEhpZGU6IDEsDQogICAgICBkeW5hbWljOiAwLA0KICAgICAgZnJvbTogMCwNCiAgICB9Ow0KICAgIEdhbWUudG9vbHRpcC5kcmF3ID0gZnVuY3Rpb24gKGZyb20sIHRleHQsIG9yaWdpbikgew0KICAgICAgdGhpcy5zaG91bGRIaWRlID0gMDsNCiAgICAgIHRoaXMudGV4dCA9IHRleHQ7DQogICAgICB0aGlzLmZyb20gPSBmcm9tOw0KICAgICAgLy90aGlzLng9eDsNCiAgICAgIC8vdGhpcy55PXk7DQogICAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjsNCiAgICAgIHZhciB0dCA9IHRoaXMudHQ7DQogICAgICB2YXIgdHRhID0gdGhpcy50dGE7DQogICAgICB0dC5zdHlsZS5sZWZ0ID0gImF1dG8iOw0KICAgICAgdHQuc3R5bGUudG9wID0gImF1dG8iOw0KICAgICAgdHQuc3R5bGUucmlnaHQgPSAiYXV0byI7DQogICAgICB0dC5zdHlsZS5ib3R0b20gPSAiYXV0byI7DQogICAgICBpZiAodHlwZW9mIHRoaXMudGV4dCA9PT0gImZ1bmN0aW9uIikgew0KICAgICAgICB2YXIgdGV4dCA9IHRoaXMudGV4dCgpOw0KICAgICAgICBpZiAodGV4dCA9PSAiIikgdHRhLnN0eWxlLm9wYWNpdHkgPSAiMCI7DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIHR0LmlubmVySFRNTCA9IHVuZXNjYXBlKHRleHQpOw0KICAgICAgICAgIHR0YS5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICB9DQogICAgICB9IGVsc2UgdHQuaW5uZXJIVE1MID0gdW5lc2NhcGUodGhpcy50ZXh0KTsNCiAgICAgIC8vdHQuaW5uZXJIVE1MPSh0eXBlb2YgdGhpcy50ZXh0PT09J2Z1bmN0aW9uJyk/dW5lc2NhcGUodGhpcy50ZXh0KCkpOnVuZXNjYXBlKHRoaXMudGV4dCk7DQogICAgICB0dGEuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB0dGEuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOw0KICAgICAgR2FtZS50b29sdGlwLnVwZGF0ZSgpOw0KICAgICAgdHRhLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQogICAgICB0aGlzLm9uID0gMTsNCiAgICB9Ow0KICAgIEdhbWUudG9vbHRpcC51cGRhdGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgWCA9IDA7DQogICAgICB2YXIgWSA9IDA7DQogICAgICB2YXIgd2lkdGggPSB0aGlzLnR0Lm9mZnNldFdpZHRoOw0KICAgICAgdmFyIGhlaWdodCA9IHRoaXMudHQub2Zmc2V0SGVpZ2h0Ow0KICAgICAgaWYgKHRoaXMub3JpZ2luID09ICJzdG9yZSIpIHsNCiAgICAgICAgWCA9IEdhbWUud2luZG93VyAtIDMzMiAtIHdpZHRoOw0KICAgICAgICBZID0gR2FtZS5tb3VzZVkgLSAzMjsNCiAgICAgICAgaWYgKEdhbWUub25DcmF0ZSkgWSA9IEdhbWUub25DcmF0ZS5nZXRCb3VuZHMoKS50b3AgLSA0MjsNCiAgICAgICAgWSA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93SCAtIGhlaWdodCAtIDQ0LCBZKSk7DQogICAgICAgIC8qdGhpcy50dGEuc3R5bGUucmlnaHQ9JzMwOHB4JzsvLyc0NjhweCc7DQoJCQkJdGhpcy50dGEuc3R5bGUubGVmdD0nYXV0byc7DQoJCQkJaWYgKEdhbWUub25DcmF0ZSkgWT1HYW1lLm9uQ3JhdGUuZ2V0Qm91bmRzKCkudG9wLTI7DQoJCQkJdGhpcy50dGEuc3R5bGUudG9wPU1hdGgubWF4KDAsTWF0aC5taW4oR2FtZS53aW5kb3dILXRoaXMudHQuY2xpZW50SGVpZ2h0LTY0LFktNDgpKSsncHgnOyovDQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoR2FtZS5vbkNyYXRlKSB7DQogICAgICAgICAgdmFyIHJlY3QgPSBHYW1lLm9uQ3JhdGUuZ2V0Qm91bmRzKCk7DQogICAgICAgICAgaWYgKHJlY3QubGVmdCA9PSAwICYmIHJlY3QudG9wID09IDApIHsNCiAgICAgICAgICAgIC8vaWYgd2UgZ2V0IHRoYXQgYnVnIHdoZXJlIHdlIGdldCBzdHVjayBpbiB0aGUgdG9wLWxlZnQsIG1vdmUgdG8gdGhlIG1vdXNlIChSRVZJU0lPTiA6IGp1c3QgZG8gbm90aGluZykNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLypyZWN0LmxlZnQ9R2FtZS5tb3VzZVgtMjQ7cmVjdC5yaWdodD1HYW1lLm1vdXNlWCsyNDtyZWN0LnRvcD1HYW1lLm1vdXNlWS0yNDtyZWN0LmJvdHRvbT1HYW1lLm1vdXNlWSsyNDsqLw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5vcmlnaW4gPT0gImxlZnQiKSB7DQogICAgICAgICAgICBYID0gcmVjdC5sZWZ0IC0gd2lkdGggLSAxNjsNCiAgICAgICAgICAgIFkgPSByZWN0LnRvcCArIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSAvIDIgLSBoZWlnaHQgLyAyIC0gMzg7DQogICAgICAgICAgICBZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dIIC0gaGVpZ2h0IC0gMTksIFkpKTsNCiAgICAgICAgICAgIGlmIChYIDwgMCkgWCA9IHJlY3QucmlnaHQ7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIFggPSByZWN0LmxlZnQgKyAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgLyAyIC0gd2lkdGggLyAyIC0gODsNCiAgICAgICAgICAgIFkgPSByZWN0LnRvcCAtIGhlaWdodCAtIFRvcEJhck9mZnNldCAtIDE2Ow0KICAgICAgICAgICAgWCA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93VyAtIHdpZHRoIC0gMTYsIFgpKTsNCiAgICAgICAgICAgIGlmIChZIDwgMCkgWSA9IHJlY3QuYm90dG9tIC0gVG9wQmFyT2Zmc2V0Ow0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9yaWdpbiA9PSAiYm90dG9tLXJpZ2h0Iikgew0KICAgICAgICAgIFggPSBHYW1lLm1vdXNlWCArIDg7DQogICAgICAgICAgWSA9IEdhbWUubW91c2VZIC0gMzI7DQogICAgICAgICAgWCA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93VyAtIHdpZHRoIC0gMTYsIFgpKTsNCiAgICAgICAgICBZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dIIC0gaGVpZ2h0IC0gNjQsIFkpKTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9yaWdpbiA9PSAiYm90dG9tIikgew0KICAgICAgICAgIFggPSBHYW1lLm1vdXNlWCAtIHdpZHRoIC8gMiAtIDg7DQogICAgICAgICAgWSA9IEdhbWUubW91c2VZICsgMjQ7DQogICAgICAgICAgWCA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93VyAtIHdpZHRoIC0gMTYsIFgpKTsNCiAgICAgICAgICBZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dIIC0gaGVpZ2h0IC0gNjQsIFkpKTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9yaWdpbiA9PSAibGVmdCIpIHsNCiAgICAgICAgICBYID0gR2FtZS5tb3VzZVggLSB3aWR0aCAtIDI0Ow0KICAgICAgICAgIFkgPSBHYW1lLm1vdXNlWSAtIGhlaWdodCAvIDIgLSA4Ow0KICAgICAgICAgIFggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihHYW1lLndpbmRvd1cgLSB3aWR0aCAtIDE2LCBYKSk7DQogICAgICAgICAgWSA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93SCAtIGhlaWdodCAtIDY0LCBZKSk7DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcmlnaW4gPT0gInRoaXMiICYmIHRoaXMuZnJvbSkgew0KICAgICAgICAgIHZhciByZWN0ID0gdGhpcy5mcm9tLmdldEJvdW5kcygpOw0KICAgICAgICAgIFggPSAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyIC0gd2lkdGggLyAyIC0gODsNCiAgICAgICAgICBZID0gcmVjdC50b3AgLSB0aGlzLnR0LmNsaWVudEhlaWdodCAtIDQ4Ow0KICAgICAgICAgIFggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihHYW1lLndpbmRvd1cgLSB3aWR0aCAtIDE2LCBYKSk7DQogICAgICAgICAgLy9ZPU1hdGgubWF4KDAsTWF0aC5taW4oR2FtZS53aW5kb3dILXRoaXMudHQuY2xpZW50SGVpZ2h0LTY0LFkpKTsNCiAgICAgICAgICBpZiAoWSA8IDApIFkgPSByZWN0LmJvdHRvbSAtIDI0Ow0KICAgICAgICAgIGlmIChZICsgaGVpZ2h0ICsgNDAgPiBHYW1lLndpbmRvd0gpIHsNCiAgICAgICAgICAgIFggPSByZWN0LnJpZ2h0ICsgODsNCiAgICAgICAgICAgIFkgPSByZWN0LnRvcCArIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSAvIDIgLSBoZWlnaHQgLyAyIC0gMzg7DQogICAgICAgICAgICBZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dIIC0gaGVpZ2h0IC0gMTksIFkpKTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgWCA9IEdhbWUubW91c2VYIC0gd2lkdGggLyAyIC0gODsNCiAgICAgICAgICBZID0gR2FtZS5tb3VzZVkgLSBoZWlnaHQgLSAzMjsNCiAgICAgICAgICBYID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dXIC0gd2lkdGggLSAxNiwgWCkpOw0KICAgICAgICAgIFkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihHYW1lLndpbmRvd0ggLSBoZWlnaHQgLSA2NCwgWSkpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLnR0YS5zdHlsZS5sZWZ0ID0gWCArICJweCI7DQogICAgICB0aGlzLnR0YS5zdHlsZS5yaWdodCA9ICJhdXRvIjsNCiAgICAgIHRoaXMudHRhLnN0eWxlLnRvcCA9IFkgKyAicHgiOw0KICAgICAgdGhpcy50dGEuc3R5bGUuYm90dG9tID0gImF1dG8iOw0KICAgICAgaWYgKHRoaXMuc2hvdWxkSGlkZSkgew0KICAgICAgICB0aGlzLmhpZGUoKTsNCiAgICAgICAgdGhpcy5zaG91bGRIaWRlID0gMDsNCiAgICAgIH0gZWxzZSBpZiAoR2FtZS5kcmF3VCAlIDEwID09IDAgJiYgdHlwZW9mIHRoaXMudGV4dCA9PT0gImZ1bmN0aW9uIikgew0KICAgICAgICB2YXIgdGV4dCA9IHRoaXMudGV4dCgpOw0KICAgICAgICBpZiAodGV4dCA9PSAiIikgdGhpcy50dGEuc3R5bGUub3BhY2l0eSA9ICIwIjsNCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgdGhpcy50dC5pbm5lckhUTUwgPSB1bmVzY2FwZSh0ZXh0KTsNCiAgICAgICAgICB0aGlzLnR0YS5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLnRvb2x0aXAuaGlkZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLnR0YSkgdGhpcy50dGEuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIHRoaXMuZHluYW1pYyA9IDA7DQogICAgICB0aGlzLm9uID0gMDsNCiAgICB9Ow0KICAgIEdhbWUuZ2V0VG9vbHRpcCA9IGZ1bmN0aW9uICh0ZXh0LCBvcmlnaW4sIGlzQ3JhdGUpIHsNCiAgICAgIG9yaWdpbiA9IG9yaWdpbiA/IG9yaWdpbiA6ICJtaWRkbGUiOw0KICAgICAgaWYgKGlzQ3JhdGUpDQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgJ29uTW91c2VPdXQ9IkdhbWUuc2V0T25DcmF0ZSgwKTtHYW1lLnRvb2x0aXAuc2hvdWxkSGlkZT0xOyIgb25Nb3VzZU92ZXI9ImlmICghR2FtZS5tb3VzZURvd24pIHtHYW1lLnNldE9uQ3JhdGUodGhpcyk7R2FtZS50b29sdGlwLmR5bmFtaWM9MDtHYW1lLnRvb2x0aXAuZHJhdyh0aGlzLFwnJyArDQogICAgICAgICAgZXNjYXBlKHRleHQpICsNCiAgICAgICAgICAiJywnIiArDQogICAgICAgICAgb3JpZ2luICsNCiAgICAgICAgICAiJyk7R2FtZS50b29sdGlwLndvYmJsZSgpO31cIiINCiAgICAgICAgKTsNCiAgICAgIGVsc2UNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnb25Nb3VzZU91dD0iR2FtZS50b29sdGlwLnNob3VsZEhpZGU9MTsiIG9uTW91c2VPdmVyPSJHYW1lLnRvb2x0aXAuZHluYW1pYz0wO0dhbWUudG9vbHRpcC5kcmF3KHRoaXMsXCcnICsNCiAgICAgICAgICBlc2NhcGUodGV4dCkgKw0KICAgICAgICAgICInLCciICsNCiAgICAgICAgICBvcmlnaW4gKw0KICAgICAgICAgICInKTtHYW1lLnRvb2x0aXAud29iYmxlKCk7XCIiDQogICAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLmdldER5bmFtaWNUb29sdGlwID0gZnVuY3Rpb24gKGZ1bmMsIG9yaWdpbiwgaXNDcmF0ZSkgew0KICAgICAgb3JpZ2luID0gb3JpZ2luID8gb3JpZ2luIDogIm1pZGRsZSI7DQogICAgICBpZiAoaXNDcmF0ZSkNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnb25Nb3VzZU91dD0iR2FtZS5zZXRPbkNyYXRlKDApO0dhbWUudG9vbHRpcC5zaG91bGRIaWRlPTE7IiBvbk1vdXNlT3Zlcj0iaWYgKCFHYW1lLm1vdXNlRG93bikge0dhbWUuc2V0T25DcmF0ZSh0aGlzKTtHYW1lLnRvb2x0aXAuZHluYW1pYz0xO0dhbWUudG9vbHRpcC5kcmF3KHRoaXMsJyArDQogICAgICAgICAgImZ1bmN0aW9uKCl7cmV0dXJuICIgKw0KICAgICAgICAgIGZ1bmMgKw0KICAgICAgICAgICIoKTt9IiArDQogICAgICAgICAgIiwnIiArDQogICAgICAgICAgb3JpZ2luICsNCiAgICAgICAgICAiJyk7R2FtZS50b29sdGlwLndvYmJsZSgpO31cIiINCiAgICAgICAgKTsNCiAgICAgIHJldHVybiAoDQogICAgICAgICdvbk1vdXNlT3V0PSJHYW1lLnRvb2x0aXAuc2hvdWxkSGlkZT0xOyIgb25Nb3VzZU92ZXI9IkdhbWUudG9vbHRpcC5keW5hbWljPTE7R2FtZS50b29sdGlwLmRyYXcodGhpcywnICsNCiAgICAgICAgImZ1bmN0aW9uKCl7cmV0dXJuICIgKw0KICAgICAgICBmdW5jICsNCiAgICAgICAgIigpO30iICsNCiAgICAgICAgIiwnIiArDQogICAgICAgIG9yaWdpbiArDQogICAgICAgICInKTtHYW1lLnRvb2x0aXAud29iYmxlKCk7XCIiDQogICAgICApOw0KICAgIH07DQogICAgR2FtZS5hdHRhY2hUb29sdGlwID0gZnVuY3Rpb24gKGVsLCBmdW5jLCBvcmlnaW4pIHsNCiAgICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gInN0cmluZyIpIHsNCiAgICAgICAgdmFyIHN0ciA9IGZ1bmM7DQogICAgICAgIGZ1bmMgPSAoZnVuY3Rpb24gKHN0cikgew0KICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gc3RyOw0KICAgICAgICAgIH07DQogICAgICAgIH0pKHN0cik7DQogICAgICB9DQogICAgICBvcmlnaW4gPSBvcmlnaW4gPyBvcmlnaW4gOiAibWlkZGxlIjsNCiAgICAgIEFkZEV2ZW50KA0KICAgICAgICBlbCwNCiAgICAgICAgIm1vdXNlb3ZlciIsDQogICAgICAgIChmdW5jdGlvbiAoZnVuYywgZWwsIG9yaWdpbikgew0KICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBHYW1lLnRvb2x0aXAuZHluYW1pYyA9IDE7DQogICAgICAgICAgICBHYW1lLnRvb2x0aXAuZHJhdyhlbCwgZnVuYywgb3JpZ2luKTsNCiAgICAgICAgICB9Ow0KICAgICAgICB9KShmdW5jLCBlbCwgb3JpZ2luKQ0KICAgICAgKTsNCiAgICAgIEFkZEV2ZW50KA0KICAgICAgICBlbCwNCiAgICAgICAgIm1vdXNlb3V0IiwNCiAgICAgICAgKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgR2FtZS50b29sdGlwLnNob3VsZEhpZGUgPSAxOw0KICAgICAgICAgIH07DQogICAgICAgIH0pKCkNCiAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLnRvb2x0aXAud29iYmxlID0gZnVuY3Rpb24gKCkgew0KICAgICAgLy9kaXNhYmxlZCBiZWNhdXNlIHRoaXMgZWZmZWN0IGRvZXNuJ3QgbG9vayBnb29kIHdpdGggdGhlIHNsaWdodCBzbG93ZG93biBpdCBtaWdodCBvciBtaWdodCBub3QgYmUgY2F1c2luZy4NCiAgICAgIGlmIChmYWxzZSkgew0KICAgICAgICB0aGlzLnR0LmNsYXNzTmFtZSA9ICJmcmFtZWQiOw0KICAgICAgICB2b2lkIHRoaXMudHQub2Zmc2V0V2lkdGg7DQogICAgICAgIHRoaXMudHQuY2xhc3NOYW1lID0gImZyYW1lZCB3b2JibGluZyI7DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlVUERBVEUgQ0hFQ0tFUg0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuQ2hlY2tVcGRhdGVzID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKCFBcHApIGFqYXgoInNlcnZlci5waHA/cT1jaGVja3VwZGF0ZSIsIEdhbWUuQ2hlY2tVcGRhdGVzUmVzcG9uc2UpOw0KICAgIH07DQogICAgR2FtZS5DaGVja1VwZGF0ZXNSZXNwb25zZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgdmFyIHIgPSByZXNwb25zZS5zcGxpdCgifCIpOw0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgaWYgKHJbMF0gPT0gImFsZXJ0Iikgew0KICAgICAgICBpZiAoclsxXSkgc3RyID0gclsxXTsNCiAgICAgIH0gZWxzZSBpZiAocGFyc2VGbG9hdChyWzBdKSA+IEdhbWUudmVyc2lvbikgew0KICAgICAgICBzdHIgPSAiPGI+IiArIGxvYygiTmV3IHZlcnNpb24gYXZhaWxhYmxlOiB2LiAlMSEiLCByWzBdKSArICI8L2I+IjsNCiAgICAgICAgaWYgKHJbMV0pDQogICAgICAgICAgc3RyICs9ICI8YnI+PHNtYWxsPiIgKyBsb2MoJ1VwZGF0ZSBub3RlOiAiJTEiJywgclsxXSkgKyAiPC9zbWFsbD4iOw0KICAgICAgICBzdHIgKz0gIjxicj48Yj4iICsgbG9jKCJSZWZyZXNoIHRvIGdldCBpdCEiKSArICI8L2I+IjsNCiAgICAgIH0NCiAgICAgIGlmIChzdHIgIT0gIiIpIHsNCiAgICAgICAgbCgiYWxlcnQiKS5pbm5lckhUTUwgPSBzdHI7DQogICAgICAgIGwoImFsZXJ0Iikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlEQVRBIEdSQUJCRVINCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCg0KICAgIEdhbWUuZXh0ZXJuYWxEYXRhTG9hZGVkID0gZmFsc2U7DQoNCiAgICBHYW1lLmdyYW5kbWFOYW1lcyA9IFsNCiAgICAgICJHcmFubnkiLA0KICAgICAgIkd1c2hlciIsDQogICAgICAiRXRoZWwiLA0KICAgICAgIkVkbmEiLA0KICAgICAgIkRvcmlzIiwNCiAgICAgICJNYXVkIiwNCiAgICAgICJIaWxkYSIsDQogICAgICAiR2xhZHlzIiwNCiAgICAgICJNaWNoZWxsZSIsDQogICAgICAiTWljaGVsZSIsDQogICAgICAiUGh5bGxpcyIsDQogICAgICAiTWlsbGljZW50IiwNCiAgICAgICJNdXJpZWwiLA0KICAgICAgIk15cnRsZSIsDQogICAgICAiTWlsZHJlZCIsDQogICAgICAiTWF2aXMiLA0KICAgICAgIkhlbGVuIiwNCiAgICAgICJHbG9yaWEiLA0KICAgICAgIlNoZWlsYSIsDQogICAgICAiQmV0dHkiLA0KICAgICAgIkdlcnRydWRlIiwNCiAgICAgICJBZ2F0aGEiLA0KICAgICAgIkJlcnlsIiwNCiAgICAgICJBZ25lcyIsDQogICAgICAiUGVhcmwiLA0KICAgICAgIlByZWNpb3VzIiwNCiAgICAgICJSdWJ5IiwNCiAgICAgICJWZXJhIiwNCiAgICAgICJCb25uaWUiLA0KICAgICAgIkFkYSIsDQogICAgICAiQnVubnkiLA0KICAgICAgIkNvb2tpZSIsDQogICAgICAiRGFybGluZyIsDQogICAgICAiR2FnYSIsDQogICAgICAiR2FtR2FtIiwNCiAgICAgICJNZW1hdyIsDQogICAgICAiTWltc3kiLA0KICAgICAgIlBlYW51dCIsDQogICAgICAiTmFuYSIsDQogICAgICAiTmFuIiwNCiAgICAgICJUb290c2llIiwNCiAgICAgICJXYXJ0eSIsDQogICAgICAiU3Rpbmt5IiwNCiAgICAgICJIZWlub3VzIiwNCiAgICBdOw0KICAgIEdhbWUuY3VzdG9tR3JhbmRtYU5hbWVzID0gW107DQogICAgR2FtZS5oZXJhbGRzID0gMDsNCg0KICAgIEdhbWUuR3JhYkRhdGEgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUFwcCkgYWpheCgiL3BhdHJlb24vZ3JhYi5waHAiLCBHYW1lLkdyYWJEYXRhUmVzcG9uc2UpOw0KICAgICAgZWxzZQ0KICAgICAgICBBcHAuZ3JhYkRhdGEoZnVuY3Rpb24gKHJlcykgew0KICAgICAgICAgIEdhbWUuaGVyYWxkcyA9IHJlcyA/IHJlcy5wbGF5ZXJzTiB8fCAxIDogMTsNCiAgICAgICAgICBHYW1lLmhlcmFsZHMgPSBNYXRoLm1heCgNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICBNYXRoLm1pbigxMDAsIE1hdGguY2VpbCgoR2FtZS5oZXJhbGRzIC8gMTAwKSAqIDEwMCkgLyAxMDApDQogICAgICAgICAgKTsNCiAgICAgICAgICBsKCJoZXJhbGRzQW1vdW50IikudGV4dENvbnRlbnQgPSBNYXRoLmZsb29yKEdhbWUuaGVyYWxkcyk7DQogICAgICAgIH0pOw0KICAgIH07DQogICAgR2FtZS5HcmFiRGF0YVJlc3BvbnNlID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAvKg0KCQkJCXJlc3BvbnNlIHNob3VsZCBiZSBmb3JtYXR0ZWQgYXMNCgkJCQl7ImhlcmFsZCI6MywiZ3JhbmRtYSI6ImF8YnxjfC4uLn0NCgkJCSovDQogICAgICB2YXIgciA9IHt9Ow0KICAgICAgdHJ5IHsNCiAgICAgICAgciA9IEpTT04ucGFyc2UocmVzcG9uc2UpOw0KICAgICAgICBpZiAodHlwZW9mIHJbImhlcmFsZCJdICE9PSAidW5kZWZpbmVkIikgew0KICAgICAgICAgIEdhbWUuaGVyYWxkcyA9IHBhcnNlSW50KHJbImhlcmFsZCJdKTsNCiAgICAgICAgICBHYW1lLmhlcmFsZHMgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIEdhbWUuaGVyYWxkcykpOw0KICAgICAgICB9DQogICAgICAgIGlmICh0eXBlb2YgclsiZ3JhbmRtYSJdICE9PSAidW5kZWZpbmVkIiAmJiByWyJncmFuZG1hIl0gIT0gIiIpIHsNCiAgICAgICAgICBHYW1lLmN1c3RvbUdyYW5kbWFOYW1lcyA9IHJbImdyYW5kbWEiXS5zcGxpdCgifCIpOw0KICAgICAgICAgIEdhbWUuY3VzdG9tR3JhbmRtYU5hbWVzID0gR2FtZS5jdXN0b21HcmFuZG1hTmFtZXMuZmlsdGVyKGZ1bmN0aW9uICgNCiAgICAgICAgICAgIGVsDQogICAgICAgICAgKSB7DQogICAgICAgICAgICByZXR1cm4gZWwgIT0gIiI7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBsKCJoZXJhbGRzQW1vdW50IikudGV4dENvbnRlbnQgPSBNYXRoLmZsb29yKEdhbWUuaGVyYWxkcyk7DQogICAgICAgIEdhbWUuZXh0ZXJuYWxEYXRhTG9hZGVkID0gdHJ1ZTsNCiAgICAgIH0gY2F0Y2ggKGUpIHt9DQogICAgfTsNCg0KICAgIGlmICghQXBwKSB7DQogICAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICAgIGwoImh0dHBzU3dpdGNoIiksDQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDozNTBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTFweDsiPicgKw0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICJZb3UgYXJlIGN1cnJlbnRseSBwbGF5aW5nIENvb2tpZSBDbGlja2VyIG9uIHRoZSA8Yj4lMTwvYj4gcHJvdG9jb2wuPGJyPlRoZSA8Yj4lMjwvYj4gdmVyc2lvbiB1c2VzIGEgZGlmZmVyZW50IHNhdmUgc2xvdCB0aGFuIHRoaXMgb25lLjxicj5DbGljayB0aGlzIGxvY2sgdG8gcmVsb2FkIHRoZSBwYWdlIGFuZCBzd2l0Y2ggdG8gdGhlIDxiPiUyPC9iPiB2ZXJzaW9uISIsDQogICAgICAgICAgICBbR2FtZS5odHRwcyA/ICJIVFRQUyIgOiAiSFRUUCIsIEdhbWUuaHR0cHMgPyAiSFRUUCIgOiAiSFRUUFMiXQ0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAidGhpcyINCiAgICAgICk7DQogICAgICBBZGRFdmVudChsKCJodHRwc1N3aXRjaCIpLCAiY2xpY2siLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIFBsYXlTb3VuZCgic25kL3BvcCIgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzICsgMSkgKyAiLm1wMyIsIDAuNzUpOw0KICAgICAgICBpZiAobG9jYXRpb24ucHJvdG9jb2wgPT0gImh0dHBzOiIpDQogICAgICAgICAgbG9jYXRpb24uaHJlZiA9DQogICAgICAgICAgICAiaHR0cDoiICsNCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cmluZyh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wubGVuZ3RoKTsNCiAgICAgICAgZWxzZSBpZiAobG9jYXRpb24ucHJvdG9jb2wgPT0gImh0dHA6IikNCiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0NCiAgICAgICAgICAgICJodHRwczoiICsNCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cmluZyh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wubGVuZ3RoKTsNCiAgICAgIH0pOw0KDQogICAgICBBZGRFdmVudChsKCJjaGFuZ2VMYW5ndWFnZSIpLCAiY2xpY2siLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuc2hvd0xhbmdTZWxlY3Rpb24oKTsNCiAgICAgIH0pOw0KDQogICAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICAgIGwoInRvcGJhck9ydGVpbCIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5CYWNrIHRvIE9ydGVpbFwncyBzdWJkb21haW4hPGJyPkxvdHMgb2Ygb3RoZXIgZ2FtZXMgaW4gdGhlcmUhPC9kaXY+JyArDQogICAgICAgICAgdGlueUljb24oWzE3LCA1XSwgImRpc3BsYXk6YmxvY2s7bWFyZ2luOi0xMnB4IGF1dG87IiksDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIEdhbWUuYXR0YWNoVG9vbHRpcCgNCiAgICAgICAgbCgidG9wYmFyRGFzaG5ldCIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5CYWNrIHRvIG91ciBob21lcGFnZSE8L2Rpdj4nLA0KICAgICAgICAidGhpcyINCiAgICAgICk7DQogICAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICAgIGwoInRvcGJhclR3aXR0ZXIiKSwNCiAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmc6OHB4O3dpZHRoOjI1MHB4O3RleHQtYWxpZ246Y2VudGVyOyI+T3J0ZWlsXCdzIHR3aXR0ZXIsIHdoaWNoIGZyZXF1ZW50bHkgZmVhdHVyZXMgZ2FtZSB1cGRhdGVzLjwvZGl2PicsDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIEdhbWUuYXR0YWNoVG9vbHRpcCgNCiAgICAgICAgbCgidG9wYmFyVHVtYmxyIiksDQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDoyNTBweDt0ZXh0LWFsaWduOmNlbnRlcjsiPk9ydGVpbFwncyB0dW1ibHIsIHdoaWNoIGZyZXF1ZW50bHkgZmVhdHVyZXMgZ2FtZSB1cGRhdGVzLjwvZGl2PicsDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIEdhbWUuYXR0YWNoVG9vbHRpcCgNCiAgICAgICAgbCgidG9wYmFyRGlzY29yZCIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5PdXIgb2ZmaWNpYWwgZGlzY29yZCBzZXJ2ZXIuPGJyPllvdSBjYW4gc2hhcmUgdGlwcyBhbmQgcXVlc3Rpb25zIGFib3V0IENvb2tpZSBDbGlja2VyIGFuZCBhbGwgb3VyIG90aGVyIGdhbWVzITwvZGl2PicsDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIEdhbWUuYXR0YWNoVG9vbHRpcCgNCiAgICAgICAgbCgidG9wYmFyUGF0cmVvbiIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5TdXBwb3J0IHVzIG9uIFBhdHJlb24gYW5kIGhlbHAgdXMga2VlcCB1cGRhdGluZyBDb29raWUgQ2xpY2tlciE8YnI+VGhlcmVcJ3MgbmVhdCByZXdhcmRzIGZvciBwYXRyb25zIHRvbyE8L2Rpdj4nLA0KICAgICAgICAidGhpcyINCiAgICAgICk7DQogICAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICAgIGwoInRvcGJhck1lcmNoIiksDQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDoyNTBweDt0ZXh0LWFsaWduOmNlbnRlcjsiPkNvb2tpZSBDbGlja2VyIHNoaXJ0cywgaG9vZGllcyBhbmQgc3RpY2tlcnMhPC9kaXY+JywNCiAgICAgICAgInRoaXMiDQogICAgICApOw0KICAgICAgR2FtZS5hdHRhY2hUb29sdGlwKA0KICAgICAgICBsKCJ0b3BiYXJNb2JpbGVDQyIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5QbGF5IENvb2tpZSBDbGlja2VyIG9uIHlvdXIgcGhvbmUhPGJyPihBbmRyb2lkIG9ubHk7IGlPUyB2ZXJzaW9uIHdpbGwgYmUgcmVsZWFzZWQgbGF0ZXIpPC9kaXY+JywNCiAgICAgICAgInRoaXMiDQogICAgICApOw0KICAgICAgR2FtZS5hdHRhY2hUb29sdGlwKA0KICAgICAgICBsKCJ0b3BiYXJTdGVhbUNDIiksDQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDoyNTBweDt0ZXh0LWFsaWduOmNlbnRlcjsiPkdldCBDb29raWUgQ2xpY2tlciBvbiBTdGVhbSE8YnI+RmVhdHVyaW5nIG11c2ljIGJ5IEM0MTguPC9kaXY+JywNCiAgICAgICAgInRoaXMiDQogICAgICApOw0KICAgICAgR2FtZS5hdHRhY2hUb29sdGlwKA0KICAgICAgICBsKCJ0b3BiYXJSYW5kb21nZW4iKSwNCiAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmc6OHB4O3dpZHRoOjI1MHB4O3RleHQtYWxpZ246Y2VudGVyOyI+QSB0aGluZyB3ZSBtYWRlIHRoYXQgbGV0cyB5b3Ugd3JpdGUgcmFuZG9tIGdlbmVyYXRvcnMuPC9kaXY+JywNCiAgICAgICAgInRoaXMiDQogICAgICApOw0KICAgICAgR2FtZS5hdHRhY2hUb29sdGlwKA0KICAgICAgICBsKCJ0b3BiYXJJR00iKSwNCiAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmc6OHB4O3dpZHRoOjI1MHB4O3RleHQtYWxpZ246Y2VudGVyOyI+QSB0aGluZyB3ZSBtYWRlIHRoYXQgbGV0cyB5b3UgY3JlYXRlIHlvdXIgb3duIGlkbGUgZ2FtZXMgdXNpbmcgYSBzaW1wbGUgc2NyaXB0aW5nIGxhbmd1YWdlLjwvZGl2PicsDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIGwoImNoYW5nZUxhbmd1YWdlIikuaW5uZXJIVE1MID0gbG9jKCJDaGFuZ2UgbGFuZ3VhZ2UiKTsNCiAgICAgIGwoImxpbmtzIikuY2hpbGROb2Rlc1swXS5ub2RlVmFsdWUgPSBsb2MoIk90aGVyIHZlcnNpb25zIik7DQogICAgICAvL2woJ2xpbmtWZXJzaW9uQmV0YScpLmlubmVySFRNTD1sb2MoIkJldGEiKTsNCiAgICB9DQoNCiAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICBsKCJoZXJhbGRzIiksDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBzdHIgPSAiIjsNCg0KICAgICAgICBpZiAoIUFwcCAmJiAhR2FtZS5leHRlcm5hbERhdGFMb2FkZWQpDQogICAgICAgICAgc3RyICs9IGxvYygNCiAgICAgICAgICAgICJIZXJhbGRzIGNvdWxkbid0IGJlIGxvYWRlZC4gVGhlcmUgbWF5IGJlIGFuIGlzc3VlIHdpdGggb3VyIHNlcnZlcnMsIG9yIHlvdSBhcmUgcGxheWluZyB0aGUgZ2FtZSBsb2NhbGx5LiINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICBpZiAoIUFwcCAmJiBHYW1lLmhlcmFsZHMgPT0gMCkNCiAgICAgICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgICAgICdUaGVyZSBhcmUgbm8gaGVyYWxkcyBhdCB0aGUgbW9tZW50LiBQbGVhc2UgY29uc2lkZXIgPGIgc3R5bGU9ImNvbG9yOiNiYzNhZmY7Ij5kb25hdGluZyB0byBvdXIgUGF0cmVvbjwvYj4hJw0KICAgICAgICAgICAgKTsNCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgICAnPGIgc3R5bGU9ImNvbG9yOiNiYzNhZmY7dGV4dC1zaGFkb3c6MHB4IDFweCAwcHggIzZkMDA5NjsiPicgKw0KICAgICAgICAgICAgICBsb2MoIiUxIGhlcmFsZCIsIEdhbWUuaGVyYWxkcykgKw0KICAgICAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJzZWxmbGVzc2x5IGluc3BpcmluZyBhIGJvb3N0IGluIHByb2R1Y3Rpb24gZm9yIGV2ZXJ5b25lLCByZXN1bHRpbmcgaW4gJTEuIiwNCiAgICAgICAgICAgICAgICAnPGJyPjxiIHN0eWxlPSJjb2xvcjojY2RhYTg5O3RleHQtc2hhZG93OjBweCAxcHggMHB4ICM3YzQ1MzIsMHB4IDBweCA2cHggIzdjNDUzMjsiPjxkaXYgc3R5bGU9IndpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246bWlkZGxlO2JhY2tncm91bmQ6dXJsKGltZy9tb25leS5wbmcpOyI+PC9kaXY+JyArDQogICAgICAgICAgICAgICAgICBsb2MoIislMSUgY29va2llcyBwZXIgc2Vjb25kIiwgR2FtZS5oZXJhbGRzKSArDQogICAgICAgICAgICAgICAgICAiPC9iPiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgPT0gMSkNCiAgICAgICAgICAgICAgc3RyICs9IGxvYygNCiAgICAgICAgICAgICAgICAiWW91IGFyZSBpbiBhIDxiPkJvcm4gYWdhaW48L2I+IHJ1biwgYW5kIGFyZSBub3QgY3VycmVudGx5IGJlbmVmaXRpbmcgZnJvbSBoZXJhbGRzLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKEdhbWUuSGFzKCJIZXJhbGRzIikpDQogICAgICAgICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgICAgICAgIllvdSBvd24gdGhlIDxiPkhlcmFsZHM8L2I+IHVwZ3JhZGUsIGFuZCB0aGVyZWZvcmUgYmVuZWZpdCBmcm9tIHRoZSBwcm9kdWN0aW9uIGJvb3N0LiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgc3RyICs9IGxvYygNCiAgICAgICAgICAgICAgICAiVG8gYmVuZWZpdCBmcm9tIHRoZSBoZXJhbGQgYm9udXMsIHlvdSBuZWVkIGEgc3BlY2lhbCB1cGdyYWRlIHlvdSBkbyBub3QgeWV0IG93bi4gWW91IHdpbGwgcGVybWFuZW50bHkgdW5sb2NrIGl0IGxhdGVyIGluIHRoZSBnYW1lLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjxzcGFuIHN0eWxlPSJmb250LXNpemU6OTAlO29wYWNpdHk6MC42OyI+JyArDQogICAgICAgICAgKCFBcHANCiAgICAgICAgICAgID8gbG9jKA0KICAgICAgICAgICAgICAgICI8Yj5IZXJhbGRzPC9iPiBhcmUgcGVvcGxlIHdobyBoYXZlIGRvbmF0ZWQgdG8gb3VyIGhpZ2hlc3QgUGF0cmVvbiB0aWVyLCBhbmQgYXJlIGxpbWl0ZWQgdG8gMTAwLjxicj5FYWNoIGhlcmFsZCBnaXZlcyBldmVyeW9uZSArMSUgQ3BTLjxicj5IZXJhbGRzIGJlbmVmaXQgZXZlcnlvbmUgcGxheWluZyB0aGUgZ2FtZSwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHlvdSBkb25hdGVkLiINCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgOiBsb2MoDQogICAgICAgICAgICAgICAgIkV2ZXJ5ICUxIGN1cnJlbnQgcGxheWVycyBvbiBTdGVhbSBnZW5lcmF0ZXMgPGI+MSBoZXJhbGQ8L2I+LCB1cCB0byAlMiBoZXJhbGRzLjxicj5FYWNoIGhlcmFsZCBnaXZlcyBldmVyeW9uZSArMSUgQ3BTLiIsDQogICAgICAgICAgICAgICAgWzEwMCwgMTAwXQ0KICAgICAgICAgICAgICApKSArDQogICAgICAgICAgJzwvc3Bhbj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICB0aW55SWNvbihbMjEsIDI5XSk7DQoNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgc3R5bGU9IndpZHRoOjMxcHg7aGVpZ2h0OjM5cHg7YmFja2dyb3VuZDp1cmwoaW1nL2hlcmFsZEZsYWcucG5nKTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MHB4O2xlZnQ6OHB4OyI+PC9kaXY+PGRpdiBzdHlsZT0id2lkdGg6MzFweDtoZWlnaHQ6MzlweDtiYWNrZ3JvdW5kOnVybChpbWcvaGVyYWxkRmxhZy5wbmcpO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowcHg7cmlnaHQ6OHB4OyI+PC9kaXY+JzsNCg0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDozMDBweDt0ZXh0LWFsaWduOmNlbnRlcjsiIGNsYXNzPSJwcm9tcHQiIGlkPSJ0b29sdGlwSGVyYWxkcyI+PGgzPicgKw0KICAgICAgICAgIGxvYygiSGVyYWxkcyIpICsNCiAgICAgICAgICAnPC9oMz48ZGl2IGNsYXNzPSJibG9jayI+JyArDQogICAgICAgICAgc3RyICsNCiAgICAgICAgICAiPC9kaXY+PC9kaXY+Ig0KICAgICAgICApOw0KICAgICAgfSwNCiAgICAgICJ0aGlzIg0KICAgICk7DQogICAgbCgiaGVyYWxkc0Ftb3VudCIpLnRleHRDb250ZW50ID0gIj8iOw0KICAgIGwoImhlcmFsZHMiKS5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7DQogICAgaWYgKEFwcCkgew0KICAgICAgbCgiaGVyYWxkcyIpLnN0eWxlLnBhZGRpbmdUb3AgPSAiNHB4IjsNCiAgICAgIGwoImhlcmFsZHMiKS5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7DQogICAgICBsKCJoZXJhbGRzIikuc3R5bGUudG9wID0gIjBweCI7DQogICAgICBsKCJoZXJhbGRzIikuc3R5bGUucmlnaHQgPSAiMHB4IjsNCiAgICAgIGwoImhlcmFsZHMiKS5zdHlsZS53aWR0aCA9ICIyOHB4IjsNCiAgICAgIGwoImhlcmFsZHMiKS5zdHlsZS50ZXh0QWxpZ24gPSAiY2VudGVyIjsNCiAgICAgIGwoImxlZnRCZWFtIikuYXBwZW5kQ2hpbGQobCgiaGVyYWxkcyIpKTsNCg0KICAgICAgbCgiYnVmZnMiKS5zdHlsZS50b3AgPSAiMTZweCI7DQogICAgfQ0KDQogICAgR2FtZS5HcmFiRGF0YSgpOw0KDQogICAgR2FtZS51c2VMb2NhbFN0b3JhZ2UgPSAxOw0KICAgIC8vd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpOy8vd29uJ3Qgc3dpdGNoIGJhY2sgdG8gY29va2llLWJhc2VkIGlmIHRoZXJlIGlzIGxvY2FsU3RvcmFnZSBpbmZvDQoNCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJU0FWRQ0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuRXhwb3J0U2F2ZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIC8vaWYgKEFwcCkgcmV0dXJuIGZhbHNlOw0KICAgICAgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9IDA7DQogICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgIjxpZCBFeHBvcnRTYXZlPjxoMz4iICsNCiAgICAgICAgICBsb2MoIkV4cG9ydCBzYXZlIikgKw0KICAgICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiVGhpcyBpcyB5b3VyIHNhdmUgY29kZS48YnI+Q29weSBpdCBhbmQga2VlcCBpdCBzb21ld2hlcmUgc2FmZSEiDQogICAgICAgICAgKSArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9ImJsb2NrIj48dGV4dGFyZWEgaWQ9InRleHRhcmVhUHJvbXB0IiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6MTI4cHg7IiByZWFkb25seT4nICsNCiAgICAgICAgICBHYW1lLldyaXRlU2F2ZSgxKSArDQogICAgICAgICAgIjwvdGV4dGFyZWE+PC9kaXY+IiwNCiAgICAgICAgW2xvYygiQWxsIGRvbmUhIildDQogICAgICApOyAvL3Byb21wdCgnQ29weSB0aGlzIHRleHQgYW5kIGtlZXAgaXQgc29tZXdoZXJlIHNhZmUhJyxHYW1lLldyaXRlU2F2ZSgxKSk7DQogICAgICBsKCJ0ZXh0YXJlYVByb21wdCIpLmZvY3VzKCk7DQogICAgICBsKCJ0ZXh0YXJlYVByb21wdCIpLnNlbGVjdCgpOw0KICAgIH07DQogICAgR2FtZS5JbXBvcnRTYXZlID0gZnVuY3Rpb24gKGRlZikgew0KICAgICAgLy9pZiAoQXBwKSByZXR1cm4gZmFsc2U7DQogICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgIjxpZCBJbXBvcnRTYXZlPjxoMz4iICsNCiAgICAgICAgICBsb2MoIkltcG9ydCBzYXZlIikgKw0KICAgICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiUGxlYXNlIHBhc3RlIGluIHRoZSBjb2RlIHRoYXQgd2FzIGdpdmVuIHRvIHlvdSBvbiBzYXZlIGV4cG9ydC4iDQogICAgICAgICAgKSArDQogICAgICAgICAgJzxkaXYgaWQ9ImltcG9ydEVycm9yIiBjbGFzcz0id2FybmluZyIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjExcHg7Ij48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJibG9jayI+PHRleHRhcmVhIGlkPSJ0ZXh0YXJlYVByb21wdCIgc3R5bGU9IndpZHRoOjEwMCU7aGVpZ2h0OjEyOHB4OyI+JyArDQogICAgICAgICAgKGRlZiB8fCAiIikgKw0KICAgICAgICAgICI8L3RleHRhcmVhPjwvZGl2PiIsDQogICAgICAgIFsNCiAgICAgICAgICBbDQogICAgICAgICAgICBsb2MoIkxvYWQiKSwNCiAgICAgICAgICAgICJpZiAobCgndGV4dGFyZWFQcm9tcHQnKS52YWx1ZS5sZW5ndGg9PTApe3JldHVybiBmYWxzZTt9aWYgKEdhbWUuSW1wb3J0U2F2ZUNvZGUobCgndGV4dGFyZWFQcm9tcHQnKS52YWx1ZSkpe0dhbWUuQ2xvc2VQcm9tcHQoKTt9ZWxzZXtsKCdpbXBvcnRFcnJvcicpLmlubmVySFRNTD0nKCcrbG9jKFwiRXJyb3IgaW1wb3J0aW5nIHNhdmVcIikrJyknO30iLA0KICAgICAgICAgIF0sDQogICAgICAgICAgbG9jKCJOZXZlcm1pbmQiKSwNCiAgICAgICAgXQ0KICAgICAgKTsgLy9wcm9tcHQoJ1BsZWFzZSBwYXN0ZSBpbiB0aGUgdGV4dCB0aGF0IHdhcyBnaXZlbiB0byB5b3Ugb24gc2F2ZSBleHBvcnQuJywnJyk7DQogICAgICBsKCJ0ZXh0YXJlYVByb21wdCIpLmZvY3VzKCk7DQogICAgfTsNCiAgICBHYW1lLkltcG9ydFNhdmVDb2RlID0gZnVuY3Rpb24gKHNhdmUpIHsNCiAgICAgIHZhciBvdXQgPSBmYWxzZTsNCiAgICAgIGlmIChzYXZlICYmIHNhdmUgIT0gIiIpIG91dCA9IEdhbWUuTG9hZFNhdmUoc2F2ZSk7DQogICAgICBpZiAob3V0ICYmIEFwcCAmJiBBcHAub25JbXBvcnRTYXZlKSBBcHAub25JbXBvcnRTYXZlKG91dCwgc2F2ZSk7DQogICAgICByZXR1cm4gb3V0Ow0KICAgIH07DQoNCiAgICBHYW1lLkZpbGVTYXZlID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEFwcCkgcmV0dXJuIGZhbHNlOw0KICAgICAgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9IDA7DQogICAgICB2YXIgZmlsZW5hbWUgPSBHYW1lLmJha2VyeU5hbWUucmVwbGFjZSgvW15hLXpBLVowLTldKy9nLCAiIikgKyAiQmFrZXJ5IjsNCiAgICAgIHZhciB0ZXh0ID0gR2FtZS5Xcml0ZVNhdmUoMSk7DQogICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFt0ZXh0XSwgeyB0eXBlOiAidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04IiB9KTsNCiAgICAgIHNhdmVBcyhibG9iLCBmaWxlbmFtZSArICIudHh0Iik7DQogICAgfTsNCiAgICBHYW1lLkZpbGVMb2FkID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgIGlmIChBcHApIHJldHVybiBmYWxzZTsNCiAgICAgIGlmIChlLnRhcmdldC5maWxlcy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlOw0KICAgICAgdmFyIGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsNCiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7DQogICAgICAgIEdhbWUuSW1wb3J0U2F2ZUNvZGUoZS50YXJnZXQucmVzdWx0KTsNCiAgICAgIH07DQogICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsNCiAgICB9Ow0KDQogICAgR2FtZS50b1JlbG9hZCA9IGZhbHNlOw0KICAgIEdhbWUudG9TYXZlID0gZmFsc2U7DQogICAgR2FtZS50b1F1aXQgPSBmYWxzZTsNCiAgICBHYW1lLmlzU2F2aW5nID0gZmFsc2U7IC8vdHJ1ZSB3aGlsZSB3ZSdyZSBzYXZpbmcsIHRvIGJsb2NrIHNvbWUgYmVoYXZpb3I7IHdoZW4gaW4gQXBwIG1vZGUgc2F2aW5nIG1heSBiZSBhc3luY2hyb25vdXMNCiAgICBHYW1lLmxhc3RTYXZlRGF0YSA9ICIiOw0KICAgIEdhbWUuV3JpdGVTYXZlID0gZnVuY3Rpb24gKHR5cGUpIHsNCiAgICAgIEdhbWUudG9TYXZlID0gZmFsc2U7DQogICAgICAvL3R5cGU6IG5vbmUgaXMgZGVmYXVsdCwgMT1yZXR1cm4gc3RyaW5nIG9ubHksIDI9cmV0dXJuIHVuY29tcHJlc3NlZCBzdHJpbmcsIDM9cmV0dXJuIHVuY29tcHJlc3NlZCwgY29tbWVudGVkIHN0cmluZw0KICAgICAgR2FtZS5sYXN0RGF0ZSA9IHBhcnNlSW50KEdhbWUudGltZSk7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBpZiAodHlwZSA9PSAzKSBzdHIgKz0gIlxuR2FtZSB2ZXJzaW9uXG4iOw0KICAgICAgc3RyICs9IEdhbWUudmVyc2lvbiArICJ8IjsNCiAgICAgIHN0ciArPSAifCI7IC8vanVzdCBpbiBjYXNlIHdlIG5lZWQgc29tZSBtb3JlIHN0dWZmIGhlcmUNCiAgICAgIGlmICh0eXBlID09IDMpIHN0ciArPSAiXG5cblJ1biBkZXRhaWxzIjsNCiAgICAgIHN0ciArPSAvL3NhdmUgc3RhdHMNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglydW4gc3RhcnQgZGF0ZSA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChHYW1lLnN0YXJ0RGF0ZSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWxlZ2FjeSBzdGFydCBkYXRlIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KEdhbWUuZnVsbERhdGUpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglkYXRlIHdoZW4gd2UgbGFzdCBvcGVuZWQgdGhlIGdhbWUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoR2FtZS5sYXN0RGF0ZSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWJha2VyeSBuYW1lIDogIiA6ICIiKSArDQogICAgICAgIEdhbWUuYmFrZXJ5TmFtZSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4Jc2VlZCA6ICIgOiAiIikgKw0KICAgICAgICBHYW1lLnNlZWQgKw0KICAgICAgICAifCI7DQogICAgICBpZiAodHlwZSA9PSAzKSBzdHIgKz0gIlxuXG5QYWNrZWQgcHJlZmVyZW5jZXMgYml0ZmllbGRcbgkiOw0KICAgICAgdmFyIHN0cjIgPSAvL3ByZWZzDQogICAgICAgIChHYW1lLnByZWZzLnBhcnRpY2xlcyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5udW1iZXJzID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmF1dG9zYXZlID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmF1dG91cGRhdGUgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMubWlsayA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5mYW5jeSA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy53YXJuID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmN1cnNvcnMgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuZm9jdXMgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuZm9ybWF0ID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLm5vdGlmcyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy53b2JibHkgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMubW9ub3NwYWNlID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmZpbHRlcnMgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuY29va2llc291bmQgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuY3JhdGVzID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLnNob3dCYWNrdXBXYXJuaW5nID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmV4dHJhQnV0dG9ucyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5hc2tMdW1wcyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5jdXN0b21HcmFuZG1hcyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy50aW1lb3V0ID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmNsb3VkU2F2ZSA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5iZ011c2ljID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLm5vdFNjYXJ5ID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmZ1bGxzY3JlZW4gPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmRpc2NvcmRQcmVzZW5jZSA/ICIxIiA6ICIwIikgKw0KICAgICAgICAiIjsNCiAgICAgIHN0cjIgPSBwYWNrMyhzdHIyKTsNCiAgICAgIHN0ciArPSBzdHIyICsgInwiOw0KICAgICAgaWYgKHR5cGUgPT0gMykgc3RyICs9ICJcblxuTWlzYyBnYW1lIGRhdGEiOw0KICAgICAgc3RyICs9DQogICAgICAgICh0eXBlID09IDMgPyAiXG4JY29va2llcyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KEdhbWUuY29va2llcykudG9TdHJpbmcoKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JdG90YWwgY29va2llcyBlYXJuZWQgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VGbG9hdChHYW1lLmNvb2tpZXNFYXJuZWQpLnRvU3RyaW5nKCkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWNvb2tpZSBjbGlja3MgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmNvb2tpZUNsaWNrcykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglnb2xkZW4gY29va2llIGNsaWNrcyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUuZ29sZGVuQ2xpY2tzKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWNvb2tpZXMgbWFkZSBieSBjbGlja2luZyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KEdhbWUuaGFuZG1hZGVDb29raWVzKS50b1N0cmluZygpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglnb2xkZW4gY29va2llcyBtaXNzZWQgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgliYWNrZ3JvdW5kIHR5cGUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmJnVHlwZSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgltaWxrIHR5cGUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLm1pbGtUeXBlKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWNvb2tpZXMgZnJvbSBwYXN0IHJ1bnMgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VGbG9hdChHYW1lLmNvb2tpZXNSZXNldCkudG9TdHJpbmcoKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JZWxkZXIgd3JhdGggOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmVsZGVyV3JhdGgpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JcGxlZGdlcyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUucGxlZGdlcykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglwbGVkZ2UgdGltZSBsZWZ0IDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5wbGVkZ2VUKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWN1cnJlbnRseSByZXNlYXJjaGluZyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUubmV4dFJlc2VhcmNoKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXJlc2VhcmNoIHRpbWUgbGVmdCA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUucmVzZWFyY2hUKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWFzY2Vuc2lvbnMgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLnJlc2V0cykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglnb2xkZW4gY29va2llIGNsaWNrcyAodGhpcyBydW4pIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5nb2xkZW5DbGlja3NMb2NhbCkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgljb29raWVzIHN1Y2tlZCBieSB3cmlua2xlcnMgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VGbG9hdChHYW1lLmNvb2tpZXNTdWNrZWQpLnRvU3RyaW5nKCkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXdyaW5rbGVzIHBvcHBlZCA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUud3JpbmtsZXJzUG9wcGVkKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXNhbnRhIGxldmVsIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5zYW50YUxldmVsKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXJlaW5kZWVyIGNsaWNrZWQgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLnJlaW5kZWVyQ2xpY2tlZCkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglzZWFzb24gdGltZSBsZWZ0IDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5zZWFzb25UKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXNlYXNvbiBzd2l0Y2hlciB1c2VzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5zZWFzb25Vc2VzKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWN1cnJlbnQgc2Vhc29uIDogIiA6ICIiKSArDQogICAgICAgIChHYW1lLnNlYXNvbiA/IEdhbWUuc2Vhc29uIDogIiIpICsNCiAgICAgICAgIjsiOw0KICAgICAgdmFyIHdyaW5rbGVycyA9IEdhbWUuU2F2ZVdyaW5rbGVycygpOw0KICAgICAgc3RyICs9DQogICAgICAgICh0eXBlID09IDMgPyAiXG4JYW1vdW50IG9mIGNvb2tpZXMgY29udGFpbmVkIGluIHdyaW5rbGVycyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KE1hdGguZmxvb3Iod3JpbmtsZXJzLmFtb3VudCkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgludW1iZXIgb2Ygd3JpbmtsZXJzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3Iod3JpbmtsZXJzLm51bWJlcikpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglwcmVzdGlnZSBsZXZlbCA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KEdhbWUucHJlc3RpZ2UpLnRvU3RyaW5nKCkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWhlYXZlbmx5IGNoaXBzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoR2FtZS5oZWF2ZW5seUNoaXBzKS50b1N0cmluZygpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgloZWF2ZW5seSBjaGlwcyBzcGVudCA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KEdhbWUuaGVhdmVubHlDaGlwc1NwZW50KS50b1N0cmluZygpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgloZWF2ZW5seSBjb29raWVzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoR2FtZS5oZWF2ZW5seUNvb2tpZXMpLnRvU3RyaW5nKCkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWFzY2Vuc2lvbiBtb2RlIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5hc2NlbnNpb25Nb2RlKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXBlcm1hbmVudCB1cGdyYWRlcyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUucGVybWFuZW50VXBncmFkZXNbMF0pKSArDQogICAgICAgICI7IiArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1sxXSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLnBlcm1hbmVudFVwZ3JhZGVzWzJdKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUucGVybWFuZW50VXBncmFkZXNbM10pKSArDQogICAgICAgICI7IiArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1s0XSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglkcmFnb24gbGV2ZWwgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmRyYWdvbkxldmVsKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWRyYWdvbiBhdXJhIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5kcmFnb25BdXJhKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWRyYWdvbiBhdXJhIDIgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmRyYWdvbkF1cmEyKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWNoaW1lIHR5cGUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmNoaW1lVHlwZSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgl2b2x1bWUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLnZvbHVtZSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgludW1iZXIgb2Ygc2hpbnkgd3JpbmtsZXJzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3Iod3JpbmtsZXJzLnNoaW5pZXMpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMNCiAgICAgICAgICA/ICJcbglhbW91bnQgb2YgY29va2llcyBjb250YWluZWQgaW4gc2hpbnkgd3JpbmtsZXJzIDogIg0KICAgICAgICAgIDogIiIpICsNCiAgICAgICAgcGFyc2VGbG9hdChNYXRoLmZsb29yKHdyaW5rbGVycy5hbW91bnRTaGluaWVzKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWN1cnJlbnQgYW1vdW50IG9mIHN1Z2FyIGx1bXBzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoTWF0aC5mbG9vcihHYW1lLmx1bXBzKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXRvdGFsIGFtb3VudCBvZiBzdWdhciBsdW1wcyBtYWRlIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoTWF0aC5mbG9vcihHYW1lLmx1bXBzVG90YWwpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JdGltZSB3aGVuIGN1cnJlbnQgc3VnYXIgbHVtcCBzdGFydGVkIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoTWF0aC5mbG9vcihHYW1lLmx1bXBUKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzDQogICAgICAgICAgPyAiXG4JdGltZSB3aGVuIGxhc3QgcmVmaWxsZWQgYSBtaW5pZ2FtZSB3aXRoIGEgc3VnYXIgbHVtcCA6ICINCiAgICAgICAgICA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoTWF0aC5mbG9vcihHYW1lLmx1bXBSZWZpbGwpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4Jc3VnYXIgbHVtcCB0eXBlIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5sdW1wQ3VycmVudFR5cGUpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JdmF1bHQgOiAiIDogIiIpICsNCiAgICAgICAgR2FtZS52YXVsdC5qb2luKCIsIikgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWhlcmFsZHMgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoR2FtZS5oZXJhbGRzKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JZ29sZGVuIGNvb2tpZSBmb3J0dW5lIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KEdhbWUuZm9ydHVuZUdDKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JQ3BTIGZvcnR1bmUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoR2FtZS5mb3J0dW5lQ1BTKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JaGlnaGVzdCByYXcgQ3BTIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoR2FtZS5jb29raWVzUHNSYXdIaWdoZXN0KSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JbXVzaWMgdm9sdW1lIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS52b2x1bWVNdXNpYykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgInwiOyAvL2Nvb2tpZXMgYW5kIGxvdHMgb2Ygb3RoZXIgc3R1ZmYNCg0KICAgICAgaWYgKHR5cGUgPT0gMykNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgIlxuXG5CdWlsZGluZ3MgOiBhbW91bnQsIGJvdWdodCwgY29va2llcyBwcm9kdWNlZCwgbGV2ZWwsIG1pbmlnYW1lIGRhdGEiOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsgLy9idWlsZGluZ3MNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAodHlwZSA9PSAzKSBzdHIgKz0gIlxuCSIgKyBtZS5uYW1lICsgIiA6ICI7DQogICAgICAgIGlmIChtZS52YW5pbGxhKSB7DQogICAgICAgICAgc3RyICs9DQogICAgICAgICAgICBtZS5hbW91bnQgKw0KICAgICAgICAgICAgIiwiICsNCiAgICAgICAgICAgIG1lLmJvdWdodCArDQogICAgICAgICAgICAiLCIgKw0KICAgICAgICAgICAgcGFyc2VGbG9hdChNYXRoLmZsb29yKG1lLnRvdGFsQ29va2llcykpICsNCiAgICAgICAgICAgICIsIiArDQogICAgICAgICAgICBwYXJzZUludChtZS5sZXZlbCk7DQogICAgICAgICAgaWYgKEdhbWUuaXNNaW5pZ2FtZVJlYWR5KG1lKSkgc3RyICs9ICIsIiArIG1lLm1pbmlnYW1lLnNhdmUoKTsNCiAgICAgICAgICBlbHNlIHN0ciArPSAiLCIgKyAobWUubWluaWdhbWVTYXZlIHx8ICIiKTsNCiAgICAgICAgICBzdHIgKz0gIiwiICsgKG1lLm11dGVkID8gIjEiIDogIjAiKTsNCiAgICAgICAgICBzdHIgKz0gIiwiICsgbWUuaGlnaGVzdDsNCiAgICAgICAgICBzdHIgKz0gIjsiOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBzdHIgKz0gInwiOw0KICAgICAgaWYgKHR5cGUgPT0gMykNCiAgICAgICAgc3RyICs9ICJcblxuUGFja2VkIHVwZ3JhZGVzIGJpdGZpZWxkICh1bmxvY2tlZCBhbmQgYm91Z2h0KVxuCSI7DQogICAgICB2YXIgdG9Db21wcmVzcyA9IFtdOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzQnlJZCkgeyAvL3VwZ3JhZGVzDQogICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNCeUlkW2ldOw0KICAgICAgICBpZiAobWUudmFuaWxsYSkNCiAgICAgICAgICB0b0NvbXByZXNzLnB1c2goTWF0aC5taW4obWUudW5sb2NrZWQsIDEpLCBNYXRoLm1pbihtZS5ib3VnaHQsIDEpKTsNCiAgICAgIH0NCg0KICAgICAgdG9Db21wcmVzcyA9IHBhY2szKHRvQ29tcHJlc3Muam9pbigiIikpOyAvL3RvQ29tcHJlc3M9cGFjayh0b0NvbXByZXNzKTsvL0NvbXByZXNzTGFyZ2VCaW4odG9Db21wcmVzcyk7DQoNCiAgICAgIHN0ciArPSB0b0NvbXByZXNzOw0KICAgICAgc3RyICs9ICJ8IjsNCiAgICAgIGlmICh0eXBlID09IDMpIHN0ciArPSAiXG5cblBhY2tlZCBhY2hpZXZlbWVudHMgYml0ZmllbGQgKHdvbilcbgkiOw0KICAgICAgdmFyIHRvQ29tcHJlc3MgPSBbXTsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5BY2hpZXZlbWVudHNCeUlkKSB7IC8vYWNoaWV2ZW1lbnRzDQogICAgICAgIHZhciBtZSA9IEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFtpXTsNCiAgICAgICAgaWYgKG1lLnZhbmlsbGEpIHRvQ29tcHJlc3MucHVzaChNYXRoLm1pbihtZS53b24pKTsNCiAgICAgIH0NCiAgICAgIHRvQ29tcHJlc3MgPSBwYWNrMyh0b0NvbXByZXNzLmpvaW4oIiIpKTsgLy90b0NvbXByZXNzPXBhY2sodG9Db21wcmVzcyk7Ly9Db21wcmVzc0xhcmdlQmluKHRvQ29tcHJlc3MpOw0KICAgICAgc3RyICs9IHRvQ29tcHJlc3M7DQoNCiAgICAgIHN0ciArPSAifCI7DQogICAgICBpZiAodHlwZSA9PSAzKSBzdHIgKz0gIlxuXG5CdWZmcyA6IHR5cGUsIG1heFRpbWUsIHRpbWUsIGFyZzEsIGFyZzIsIGFyZzMiOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmJ1ZmZzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuYnVmZnNbaV07DQogICAgICAgIGlmIChtZS50eXBlKSB7DQogICAgICAgICAgaWYgKHR5cGUgPT0gMykgc3RyICs9ICJcbgkiICsgbWUudHlwZS5uYW1lICsgIiA6ICI7DQogICAgICAgICAgaWYgKG1lLnR5cGUudmFuaWxsYSkgew0KICAgICAgICAgICAgc3RyICs9IG1lLnR5cGUuaWQgKyAiLCIgKyBtZS5tYXhUaW1lICsgIiwiICsgbWUudGltZTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWUuYXJnMSAhPT0gInVuZGVmaW5lZCIpDQogICAgICAgICAgICAgIHN0ciArPSAiLCIgKyBwYXJzZUZsb2F0KG1lLmFyZzEpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtZS5hcmcyICE9PSAidW5kZWZpbmVkIikNCiAgICAgICAgICAgICAgc3RyICs9ICIsIiArIHBhcnNlRmxvYXQobWUuYXJnMik7DQogICAgICAgICAgICBpZiAodHlwZW9mIG1lLmFyZzMgIT09ICJ1bmRlZmluZWQiKQ0KICAgICAgICAgICAgICBzdHIgKz0gIiwiICsgcGFyc2VGbG9hdChtZS5hcmczKTsNCiAgICAgICAgICAgIHN0ciArPSAiOyI7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGlmICh0eXBlID09IDMpIHN0ciArPSAiXG5cbkN1c3RvbSA6XG4iOw0KDQogICAgICBzdHIgKz0gInwiOw0KICAgICAgc3RyICs9IEdhbWUuc2F2ZU1vZERhdGEoKTsNCg0KICAgICAgR2FtZS5sYXN0U2F2ZURhdGEgPSBzdHI7DQoNCiAgICAgIGlmICh0eXBlID09IDIgfHwgdHlwZSA9PSAzKSB7DQogICAgICAgIHJldHVybiBzdHI7DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gMSkgew0KICAgICAgICBzdHIgPSBlc2NhcGUodXRmOF90b19iNjQoc3RyKSArICIhRU5EISIpOw0KICAgICAgICByZXR1cm4gc3RyOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKEdhbWUudXNlTG9jYWxTdG9yYWdlKSB7DQogICAgICAgICAgLy9zbyB3ZSB1c2VkIHRvIHNhdmUgdGhlIGdhbWUgdXNpbmcgYnJvd3NlciBjb29raWVzLCB3aGljaCB3YXMganVzdCByZWFsbHkgbmVhdCBjb25zaWRlcmluZyB0aGUgZ2FtZSdzIG5hbWUNCiAgICAgICAgICAvL3dlJ3JlIHVzaW5nIGxvY2Fsc3RvcmFnZSBub3csIHdoaWNoIGlzIG1vcmUgZWZmaWNpZW50IGJ1dCBub3QgYXMgY29vbA0KICAgICAgICAgIC8vYSBtb21lbnQgb2Ygc2lsZW5jZSBmb3Igb3VyIGZhbGxlbiBwdW5zDQogICAgICAgICAgc3RyID0gdXRmOF90b19iNjQoc3RyKSArICIhRU5EISI7DQogICAgICAgICAgaWYgKHN0ci5sZW5ndGggPCAxMCkgew0KICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICJTYXZpbmcgZmFpbGVkISIsDQogICAgICAgICAgICAgICJQdXJjaGFzaW5nIGFuIHVwZ3JhZGUgYW5kIHNhdmluZyBhZ2FpbiBtaWdodCBmaXggdGhpcy48YnI+VGhpcyByZWFsbHkgc2hvdWxkbid0IGhhcHBlbjsgcGxlYXNlIG5vdGlmeSBPcnRlaWwgb24gaGlzIHR1bWJsci4iDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBzdHIgPSBlc2NhcGUoc3RyKTsNCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNldChHYW1lLlNhdmVUbywgc3RyKTsgLy9hYWFuZCBzYXZlDQogICAgICAgICAgICBpZiAoQXBwKSBBcHAuc2F2ZShzdHIpOw0KICAgICAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2VHZXQoR2FtZS5TYXZlVG8pKSB7DQogICAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICAgIGxvYygiRXJyb3Igd2hpbGUgc2F2aW5nIiksDQogICAgICAgICAgICAgICAgbG9jKCJFeHBvcnQgeW91ciBzYXZlIGluc3RlYWQhIikNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuaGFzRm9jdXMoKSkgew0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeShsb2MoIkdhbWUgc2F2ZWQiKSwgIiIsICIiLCAxLCAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0gLy9sZWdhY3kgc3lzdGVtDQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIC8vdGhhdCdzIHJpZ2h0DQogICAgICAgICAgLy93ZSdyZSB1c2luZyBjb29raWVzDQogICAgICAgICAgLy95ZWFoIEkgd2VudCB0aGVyZQ0KICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOyAvL3dlIHN0b3JpbiBkaXMgZm9yIDUgeWVhcnMsIHBlb3BsZQ0KICAgICAgICAgIG5vdy5zZXRGdWxsWWVhcihub3cuZ2V0RnVsbFllYXIoKSArIDUpOyAvL21taCBzdGFsZSBjb29raWVzDQogICAgICAgICAgc3RyID0gdXRmOF90b19iNjQoc3RyKSArICIhRU5EISI7DQogICAgICAgICAgR2FtZS5zYXZlRGF0YSA9IGVzY2FwZShzdHIpOw0KICAgICAgICAgIHN0ciA9DQogICAgICAgICAgICBHYW1lLlNhdmVUbyArDQogICAgICAgICAgICAiPSIgKw0KICAgICAgICAgICAgZXNjYXBlKHN0cikgKw0KICAgICAgICAgICAgIjsgZXhwaXJlcz0iICsNCiAgICAgICAgICAgIG5vdy50b1VUQ1N0cmluZygpICsNCiAgICAgICAgICAgICI7IjsNCiAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBzdHI7IC8vYWFhbmQgc2F2ZQ0KICAgICAgICAgIGlmIChBcHApIEFwcC5zYXZlKHN0cik7DQogICAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKEdhbWUuU2F2ZVRvKSA8IDApIHsNCiAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICBsb2MoIkVycm9yIHdoaWxlIHNhdmluZyIpLA0KICAgICAgICAgICAgICBsb2MoIkV4cG9ydCB5b3VyIHNhdmUgaW5zdGVhZCEiKSwNCiAgICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIDENCiAgICAgICAgICAgICk7DQogICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5oYXNGb2N1cygpKSB7DQogICAgICAgICAgICBHYW1lLk5vdGlmeShsb2MoIkdhbWUgc2F2ZWQiKSwgIiIsICIiLCAxLCAxKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCUxPQUQNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLnNhbHZhZ2VTYXZlID0gZnVuY3Rpb24gKCkgew0KICAgICAgLy9mb3Igd2hlbiBDb29raWUgQ2xpY2tlciB3b24ndCBsb2FkIGFuZCB5b3UgbmVlZCB5b3VyIHNhdmUNCiAgICAgIGNvbnNvbGUubG9nKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0iKTsNCiAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAnVGhpcyBpcyB5b3VyIHNhdmUgZGF0YS4gQ29weXBhc3RlIGl0ICh3aXRob3V0IHF1b3RhdGlvbiBtYXJrcykgaW50byBhbm90aGVyIHZlcnNpb24gdXNpbmcgdGhlICJJbXBvcnQgc2F2ZSIgZmVhdHVyZS4nDQogICAgICApOw0KICAgICAgY29uc29sZS5sb2cobG9jYWxTdG9yYWdlR2V0KEdhbWUuU2F2ZVRvKSk7DQogICAgfTsNCiAgICBHYW1lLkxvYWRTYXZlID0gZnVuY3Rpb24gKGRhdGEsIGlnbm9yZVZlcnNpb25Jc3N1ZXMpIHsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gInVuZGVmaW5lZCIpIHN0ciA9IHVuZXNjYXBlKGRhdGEpOw0KICAgICAgZWxzZSB7DQogICAgICAgIGlmIChBcHApIHsNCiAgICAgICAgICBBcHAuZ2V0TW9zdFJlY2VudFNhdmUoZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICAgIEdhbWUuTG9hZFNhdmUoZGF0YSwgdHJ1ZSk7DQogICAgICAgICAgfSk7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLnVzZUxvY2FsU3RvcmFnZSkgew0KICAgICAgICAgIHZhciBsb2NhbCA9IGxvY2FsU3RvcmFnZUdldChHYW1lLlNhdmVUbyk7DQogICAgICAgICAgaWYgKCFsb2NhbCkgew0KICAgICAgICAgICAgLy9ubyBsb2NhbHN0b3JhZ2Ugc2F2ZSBmb3VuZD8gbGV0J3MgZ2V0IHRoZSBjb29raWUgb25lIGxhc3QgdGltZQ0KICAgICAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKEdhbWUuU2F2ZVRvKSA+PSAwKSB7DQogICAgICAgICAgICAgIHN0ciA9IHVuZXNjYXBlKGRvY3VtZW50LmNvb2tpZS5zcGxpdChHYW1lLlNhdmVUbyArICI9IilbMV0pOw0KICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPQ0KICAgICAgICAgICAgICAgIEdhbWUuU2F2ZVRvICsgIj07ZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAxIEdNVDsiOw0KICAgICAgICAgICAgfSBlbHNlIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc3RyID0gdW5lc2NhcGUobG9jYWwpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSAvL2xlZ2FjeSBzeXN0ZW0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKEdhbWUuU2F2ZVRvKSA+PSAwKQ0KICAgICAgICAgICAgc3RyID0gdW5lc2NhcGUoDQogICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZS5zcGxpdChHYW1lLlNhdmVUbyArICI9IilbMV0NCiAgICAgICAgICAgICk7IC8vZ2V0IGNvb2tpZSBoZXJlDQogICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChzdHIgIT0gIiIpIHsNCiAgICAgICAgdmFyIHZlcnNpb24gPSAwOw0KICAgICAgICB2YXIgb2xkc3RyID0gc3RyLnNwbGl0KCJ8Iik7DQogICAgICAgIGlmIChvbGRzdHJbMF0ubGVuZ3RoIDwgMSkgcmV0dXJuIGZhbHNlOw0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoIiFFTkQhIilbMF07DQogICAgICAgICAgc3RyID0gYjY0X3RvX3V0Zjgoc3RyKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc3RyID09ICIiKSByZXR1cm4gZmFsc2U7DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIHZhciBzcGwgPSAiIjsNCiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoInwiKTsNCiAgICAgICAgICB2ZXJzaW9uID0gcGFyc2VGbG9hdChzdHJbMF0pOw0KICAgICAgICAgIEdhbWUubG9hZGVkRnJvbVZlcnNpb24gPSB2ZXJzaW9uOw0KDQogICAgICAgICAgaWYgKGlzTmFOKHZlcnNpb24pIHx8IHN0ci5sZW5ndGggPCA1KSB7DQogICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgbG9jKCJFcnJvciBpbXBvcnRpbmcgc2F2ZSIpLA0KICAgICAgICAgICAgICBsb2MoIk9vcHMsIGxvb2tzIGxpa2UgdGhlIGltcG9ydCBzdHJpbmcgaXMgYWxsIHdyb25nISIpLA0KICAgICAgICAgICAgICAiIiwNCiAgICAgICAgICAgICAgNiwNCiAgICAgICAgICAgICAgMQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHZlcnNpb24gPj0gMSAmJiB2ZXJzaW9uID4gR2FtZS52ZXJzaW9uKSB7DQogICAgICAgICAgICBpZiAoaWdub3JlVmVyc2lvbklzc3VlcykNCiAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgIlJldHJpZXZpbmcgc2F2ZSBmcm9tIGEgZnV0dXJlIHZlcnNpb24uIiwNCiAgICAgICAgICAgICAgICAiVGhhdCdzLi4ub2RkLiIsDQogICAgICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAxDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgbG9jKCJFcnJvciBpbXBvcnRpbmcgc2F2ZSIpLA0KICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICJZb3UgYXJlIGF0dGVtcHRpbmcgdG8gbG9hZCBhIHNhdmUgZnJvbSBhIGZ1dHVyZSB2ZXJzaW9uICh2LiAlMTsgeW91IGFyZSB1c2luZyB2LiAlMikuIiwNCiAgICAgICAgICAgICAgICAgIFt2ZXJzaW9uLCBHYW1lLnZlcnNpb25dDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAiIiwNCiAgICAgICAgICAgICAgICA2LA0KICAgICAgICAgICAgICAgIDENCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodmVyc2lvbiA+PSAxKSB7DQogICAgICAgICAgICBHYW1lLlQgPSAwOw0KDQogICAgICAgICAgICBzcGwgPSBzdHJbMl0uc3BsaXQoIjsiKTsgLy9zYXZlIHN0YXRzDQogICAgICAgICAgICBHYW1lLnN0YXJ0RGF0ZSA9IHBhcnNlSW50KHNwbFswXSk7DQogICAgICAgICAgICBHYW1lLmZ1bGxEYXRlID0gcGFyc2VJbnQoc3BsWzFdKTsNCiAgICAgICAgICAgIEdhbWUubGFzdERhdGUgPSBwYXJzZUludChzcGxbMl0pOw0KICAgICAgICAgICAgdmFyIGJha2VyeU5hbWUgPSBzcGxbM10gPyBzcGxbM10gOiBHYW1lLkdldEJha2VyeU5hbWUoKTsNCiAgICAgICAgICAgIEdhbWUuc2VlZCA9IHNwbFs0XSA/IHNwbFs0XSA6IEdhbWUubWFrZVNlZWQoKTsNCiAgICAgICAgICAgIC8vcHJlZnMNCiAgICAgICAgICAgIGlmICh2ZXJzaW9uIDwgMS4wNTAzKSBzcGwgPSBzdHJbM10uc3BsaXQoIiIpOw0KICAgICAgICAgICAgZWxzZSBpZiAodmVyc2lvbiA8IDIuMDA0Nikgc3BsID0gdW5wYWNrMihzdHJbM10pLnNwbGl0KCIiKTsNCiAgICAgICAgICAgIGVsc2Ugc3BsID0gc3RyWzNdLnNwbGl0KCIiKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMucGFydGljbGVzID0gcGFyc2VJbnQoc3BsWzBdKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMubnVtYmVycyA9IHBhcnNlSW50KHNwbFsxXSk7DQogICAgICAgICAgICBHYW1lLnByZWZzLmF1dG9zYXZlID0gcGFyc2VJbnQoc3BsWzJdKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuYXV0b3VwZGF0ZSA9IHNwbFszXSA/IHBhcnNlSW50KHNwbFszXSkgOiAxOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5taWxrID0gc3BsWzRdID8gcGFyc2VJbnQoc3BsWzRdKSA6IDE7DQogICAgICAgICAgICBHYW1lLnByZWZzLmZhbmN5ID0gcGFyc2VJbnQoc3BsWzVdKTsNCiAgICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KSBHYW1lLnJlbW92ZUNsYXNzKCJub0ZhbmN5Iik7DQogICAgICAgICAgICBlbHNlIGlmICghR2FtZS5wcmVmcy5mYW5jeSkgR2FtZS5hZGRDbGFzcygibm9GYW5jeSIpOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy53YXJuID0gc3BsWzZdID8gcGFyc2VJbnQoc3BsWzZdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLmN1cnNvcnMgPSBzcGxbN10gPyBwYXJzZUludChzcGxbN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuZm9jdXMgPSBzcGxbOF0gPyBwYXJzZUludChzcGxbOF0pIDogMDsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuZm9ybWF0ID0gc3BsWzldID8gcGFyc2VJbnQoc3BsWzldKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLm5vdGlmcyA9IHNwbFsxMF0gPyBwYXJzZUludChzcGxbMTBdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLndvYmJseSA9IHNwbFsxMV0gPyBwYXJzZUludChzcGxbMTFdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLm1vbm9zcGFjZSA9IHNwbFsxMl0gPyBwYXJzZUludChzcGxbMTJdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLmZpbHRlcnMgPSBzcGxbMTNdID8gcGFyc2VJbnQoc3BsWzEzXSkgOiAxOw0KICAgICAgICAgICAgaWYgKEdhbWUucHJlZnMuZmlsdGVycykgR2FtZS5yZW1vdmVDbGFzcygibm9GaWx0ZXJzIik7DQogICAgICAgICAgICBlbHNlIGlmICghR2FtZS5wcmVmcy5maWx0ZXJzKSBHYW1lLmFkZENsYXNzKCJub0ZpbHRlcnMiKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuY29va2llc291bmQgPSBzcGxbMTRdID8gcGFyc2VJbnQoc3BsWzE0XSkgOiAxOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5jcmF0ZXMgPSBzcGxbMTVdID8gcGFyc2VJbnQoc3BsWzE1XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9IHNwbFsxNl0gPyBwYXJzZUludChzcGxbMTZdKSA6IDE7DQogICAgICAgICAgICBHYW1lLnByZWZzLmV4dHJhQnV0dG9ucyA9IHNwbFsxN10gPyBwYXJzZUludChzcGxbMTddKSA6IDE7DQogICAgICAgICAgICBpZiAoIUdhbWUucHJlZnMuZXh0cmFCdXR0b25zKSBHYW1lLnJlbW92ZUNsYXNzKCJleHRyYUJ1dHRvbnMiKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKEdhbWUucHJlZnMuZXh0cmFCdXR0b25zKSBHYW1lLmFkZENsYXNzKCJleHRyYUJ1dHRvbnMiKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuYXNrTHVtcHMgPSBzcGxbMThdID8gcGFyc2VJbnQoc3BsWzE4XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5jdXN0b21HcmFuZG1hcyA9IHNwbFsxOV0gPyBwYXJzZUludChzcGxbMTldKSA6IDE7DQogICAgICAgICAgICBHYW1lLnByZWZzLnRpbWVvdXQgPSBzcGxbMjBdID8gcGFyc2VJbnQoc3BsWzIwXSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5jbG91ZFNhdmUgPSBzcGxbMjFdID8gcGFyc2VJbnQoc3BsWzIxXSkgOiAxOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5iZ011c2ljID0gc3BsWzIyXSA/IHBhcnNlSW50KHNwbFsyMl0pIDogMTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMubm90U2NhcnkgPSBzcGxbMjNdID8gcGFyc2VJbnQoc3BsWzIzXSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5mdWxsc2NyZWVuID0gc3BsWzI0XSA/IHBhcnNlSW50KHNwbFsyNF0pIDogMDsNCiAgICAgICAgICAgIGlmIChBcHApIEFwcC5zZXRGdWxsc2NyZWVuKEdhbWUucHJlZnMuZnVsbHNjcmVlbik7DQogICAgICAgICAgICBHYW1lLnByZWZzLnNjcmVlbnJlYWRlciA9IHNwbFsyNV0gPyBwYXJzZUludChzcGxbMjVdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLmRpc2NvcmRQcmVzZW5jZSA9IHNwbFsyNl0gPyBwYXJzZUludChzcGxbMjZdKSA6IDE7DQogICAgICAgICAgICBCZWF1dGlmeUFsbCgpOw0KICAgICAgICAgICAgc3BsID0gc3RyWzRdLnNwbGl0KCI7Iik7IC8vY29va2llcyBhbmQgbG90cyBvZiBvdGhlciBzdHVmZg0KICAgICAgICAgICAgR2FtZS5jb29raWVzID0gcGFyc2VGbG9hdChzcGxbMF0pOw0KICAgICAgICAgICAgR2FtZS5jb29raWVzRWFybmVkID0gcGFyc2VGbG9hdChzcGxbMV0pOw0KICAgICAgICAgICAgR2FtZS5jb29raWVDbGlja3MgPSBzcGxbMl0gPyBwYXJzZUludChzcGxbMl0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuZ29sZGVuQ2xpY2tzID0gc3BsWzNdID8gcGFyc2VJbnQoc3BsWzNdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmhhbmRtYWRlQ29va2llcyA9IHNwbFs0XSA/IHBhcnNlRmxvYXQoc3BsWzRdKSA6IDA7DQogICAgICAgICAgICBHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcyA9IHNwbFs1XSA/IHBhcnNlSW50KHNwbFs1XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5iZ1R5cGUgPSBzcGxbNl0gPyBwYXJzZUludChzcGxbNl0pIDogMDsNCiAgICAgICAgICAgIEdhbWUubWlsa1R5cGUgPSBzcGxbN10gPyBwYXJzZUludChzcGxbN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUuY29va2llc1Jlc2V0ID0gc3BsWzhdID8gcGFyc2VGbG9hdChzcGxbOF0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuZWxkZXJXcmF0aCA9IHNwbFs5XSA/IHBhcnNlSW50KHNwbFs5XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wbGVkZ2VzID0gc3BsWzEwXSA/IHBhcnNlSW50KHNwbFsxMF0pIDogMDsNCiAgICAgICAgICAgIEdhbWUucGxlZGdlVCA9IHNwbFsxMV0gPyBwYXJzZUludChzcGxbMTFdKSA6IDA7DQogICAgICAgICAgICBHYW1lLm5leHRSZXNlYXJjaCA9IHNwbFsxMl0gPyBwYXJzZUludChzcGxbMTJdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnJlc2VhcmNoVCA9IHNwbFsxM10gPyBwYXJzZUludChzcGxbMTNdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnJlc2V0cyA9IHNwbFsxNF0gPyBwYXJzZUludChzcGxbMTRdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmdvbGRlbkNsaWNrc0xvY2FsID0gc3BsWzE1XSA/IHBhcnNlSW50KHNwbFsxNV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuY29va2llc1N1Y2tlZCA9IHNwbFsxNl0gPyBwYXJzZUZsb2F0KHNwbFsxNl0pIDogMDsNCiAgICAgICAgICAgIEdhbWUud3JpbmtsZXJzUG9wcGVkID0gc3BsWzE3XSA/IHBhcnNlSW50KHNwbFsxN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUuc2FudGFMZXZlbCA9IHNwbFsxOF0gPyBwYXJzZUludChzcGxbMThdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnJlaW5kZWVyQ2xpY2tlZCA9IHNwbFsxOV0gPyBwYXJzZUludChzcGxbMTldKSA6IDA7DQogICAgICAgICAgICBHYW1lLnNlYXNvblQgPSBzcGxbMjBdID8gcGFyc2VJbnQoc3BsWzIwXSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5zZWFzb25Vc2VzID0gc3BsWzIxXSA/IHBhcnNlSW50KHNwbFsyMV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuc2Vhc29uID0gc3BsWzIyXSA/IHNwbFsyMl0gOiBHYW1lLmJhc2VTZWFzb247DQogICAgICAgICAgICB2YXIgd3JpbmtsZXJzID0gew0KICAgICAgICAgICAgICBhbW91bnQ6IHNwbFsyM10gPyBwYXJzZUZsb2F0KHNwbFsyM10pIDogMCwNCiAgICAgICAgICAgICAgbnVtYmVyOiBzcGxbMjRdID8gcGFyc2VJbnQoc3BsWzI0XSkgOiAwLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIEdhbWUucHJlc3RpZ2UgPSBzcGxbMjVdID8gcGFyc2VGbG9hdChzcGxbMjVdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHMgPSBzcGxbMjZdID8gcGFyc2VGbG9hdChzcGxbMjZdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNTcGVudCA9IHNwbFsyN10gPyBwYXJzZUZsb2F0KHNwbFsyN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUuaGVhdmVubHlDb29raWVzID0gc3BsWzI4XSA/IHBhcnNlRmxvYXQoc3BsWzI4XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2RlID0gc3BsWzI5XSA/IHBhcnNlSW50KHNwbFsyOV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbMF0gPSBzcGxbMzBdID8gcGFyc2VJbnQoc3BsWzMwXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbMV0gPSBzcGxbMzFdID8gcGFyc2VJbnQoc3BsWzMxXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbMl0gPSBzcGxbMzJdID8gcGFyc2VJbnQoc3BsWzMyXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbM10gPSBzcGxbMzNdID8gcGFyc2VJbnQoc3BsWzMzXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbNF0gPSBzcGxbMzRdID8gcGFyc2VJbnQoc3BsWzM0XSkgOiAtMTsNCiAgICAgICAgICAgIC8vaWYgKHZlcnNpb248MS4wNSkge0dhbWUuaGVhdmVubHlDaGlwc0Vhcm5lZD1HYW1lLkhvd011Y2hQcmVzdGlnZShHYW1lLmNvb2tpZXNSZXNldCk7R2FtZS5oZWF2ZW5seUNoaXBzPUdhbWUuaGVhdmVubHlDaGlwc0Vhcm5lZDt9DQogICAgICAgICAgICBHYW1lLmRyYWdvbkxldmVsID0gc3BsWzM1XSA/IHBhcnNlSW50KHNwbFszNV0pIDogMDsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgdmVyc2lvbiA8IDIuMDA0MSAmJg0KICAgICAgICAgICAgICBHYW1lLmRyYWdvbkxldmVsID09IEdhbWUuZHJhZ29uTGV2ZWxzLmxlbmd0aCAtIDINCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBHYW1lLmRyYWdvbkxldmVsID0gR2FtZS5kcmFnb25MZXZlbHMubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIEdhbWUuZHJhZ29uQXVyYSA9IHNwbFszNl0gPyBwYXJzZUludChzcGxbMzZdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmRyYWdvbkF1cmEyID0gc3BsWzM3XSA/IHBhcnNlSW50KHNwbFszN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUuY2hpbWVUeXBlID0gc3BsWzM4XSA/IHBhcnNlSW50KHNwbFszOF0pIDogMDsNCiAgICAgICAgICAgIEdhbWUudm9sdW1lID0gc3BsWzM5XSA/IHBhcnNlSW50KHNwbFszOV0pIDogNzU7DQogICAgICAgICAgICB3cmlua2xlcnMuc2hpbmllcyA9IHNwbFs0MF0gPyBwYXJzZUludChzcGxbNDBdKSA6IDA7DQogICAgICAgICAgICB3cmlua2xlcnMuYW1vdW50U2hpbmllcyA9IHNwbFs0MV0gPyBwYXJzZUZsb2F0KHNwbFs0MV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUubHVtcHMgPSBzcGxbNDJdID8gcGFyc2VGbG9hdChzcGxbNDJdKSA6IC0xOw0KICAgICAgICAgICAgR2FtZS5sdW1wc1RvdGFsID0gc3BsWzQzXSA/IHBhcnNlRmxvYXQoc3BsWzQzXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUubHVtcFQgPSBzcGxbNDRdID8gcGFyc2VJbnQoc3BsWzQ0XSkgOiBEYXRlLm5vdygpOw0KICAgICAgICAgICAgR2FtZS5sdW1wUmVmaWxsID0gc3BsWzQ1XSA/IHBhcnNlSW50KHNwbFs0NV0pIDogMDsNCiAgICAgICAgICAgIGlmICh2ZXJzaW9uIDwgMi4wMjIpIEdhbWUubHVtcFJlZmlsbCA9IEdhbWUuZnBzICogNjA7DQogICAgICAgICAgICBHYW1lLmx1bXBDdXJyZW50VHlwZSA9IHNwbFs0Nl0gPyBwYXJzZUludChzcGxbNDZdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnZhdWx0ID0gc3BsWzQ3XSA/IHNwbFs0N10uc3BsaXQoIiwiKSA6IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnZhdWx0KSB7DQogICAgICAgICAgICAgIEdhbWUudmF1bHRbaV0gPSBwYXJzZUludChHYW1lLnZhdWx0W2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBhY3R1YWxIZXJhbGRzID0gR2FtZS5oZXJhbGRzOyAvL3dlIHN0b3JlIHRoZSBhY3R1YWwgYW1vdW50IG9mIGhlcmFsZHMgdG8gcmVzdG9yZSBpdCBsYXRlcjsgaGVyZSB3ZSB1c2VkIHRoZSBhbW91bnQgcHJlc2VudCBpbiB0aGUgc2F2ZSB0byBjb21wdXRlIG9mZmxpbmUgQ3BTDQogICAgICAgICAgICBHYW1lLmhlcmFsZHMgPSBzcGxbNDhdID8gcGFyc2VGbG9hdChzcGxbNDhdKSA6IEdhbWUuaGVyYWxkczsNCiAgICAgICAgICAgIEdhbWUuZm9ydHVuZUdDID0gc3BsWzQ5XSA/IHBhcnNlSW50KHNwbFs0OV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuZm9ydHVuZUNQUyA9IHNwbFs1MF0gPyBwYXJzZUludChzcGxbNTBdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmNvb2tpZXNQc1Jhd0hpZ2hlc3QgPSBzcGxbNTFdID8gcGFyc2VGbG9hdChzcGxbNTFdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnZvbHVtZU11c2ljID0gc3BsWzUyXSA/IHBhcnNlSW50KHNwbFs1Ml0pIDogNTA7DQoNCiAgICAgICAgICAgIHNwbCA9IHN0cls1XS5zcGxpdCgiOyIpOyAvL2J1aWxkaW5ncw0KICAgICAgICAgICAgR2FtZS5CdWlsZGluZ3NPd25lZCA9IDA7DQogICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0c0J5SWQpIHsNCiAgICAgICAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzQnlJZFtpXTsNCiAgICAgICAgICAgICAgbWUuc3dpdGNoTWluaWdhbWUoZmFsc2UpOw0KICAgICAgICAgICAgICBtZS5waWNzID0gW107DQogICAgICAgICAgICAgIGlmIChzcGxbaV0pIHsNCiAgICAgICAgICAgICAgICB2YXIgbWVzdHIgPSBzcGxbaV0udG9TdHJpbmcoKS5zcGxpdCgiLCIpOw0KICAgICAgICAgICAgICAgIG1lLmFtb3VudCA9IHBhcnNlSW50KG1lc3RyWzBdKTsNCiAgICAgICAgICAgICAgICBtZS5ib3VnaHQgPSBwYXJzZUludChtZXN0clsxXSk7DQogICAgICAgICAgICAgICAgbWUudG90YWxDb29raWVzID0gcGFyc2VGbG9hdChtZXN0clsyXSk7DQogICAgICAgICAgICAgICAgbWUubGV2ZWwgPSBwYXJzZUludChtZXN0clszXSB8fCAwKTsNCiAgICAgICAgICAgICAgICBtZS5oaWdoZXN0ID0gdmVyc2lvbiA+PSAyLjAyNCA/IHBhcnNlSW50KG1lc3RyWzZdKSA6IG1lLmFtb3VudDsNCiAgICAgICAgICAgICAgICBpZiAobWUubWluaWdhbWUgJiYgbWUubWluaWdhbWVMb2FkZWQgJiYgbWUubWluaWdhbWUucmVzZXQpIHsNCiAgICAgICAgICAgICAgICAgIG1lLm1pbmlnYW1lLnJlc2V0KHRydWUpOw0KICAgICAgICAgICAgICAgICAgbWUubWluaWdhbWUubG9hZChtZXN0cls0XSB8fCAiIik7DQogICAgICAgICAgICAgICAgfSBlbHNlIG1lLm1pbmlnYW1lU2F2ZSA9IG1lc3RyWzRdIHx8IDA7DQogICAgICAgICAgICAgICAgbWUubXV0ZWQgPSBwYXJzZUludChtZXN0cls1XSkgfHwgMDsNCiAgICAgICAgICAgICAgICBHYW1lLkJ1aWxkaW5nc093bmVkICs9IG1lLmFtb3VudDsNCiAgICAgICAgICAgICAgICBpZiAodmVyc2lvbiA8IDIuMDAzKSBtZS5sZXZlbCA9IDA7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbWUuYW1vdW50ID0gMDsNCiAgICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgICAgICAgbWUuYm91Z2h0ID0gMDsNCiAgICAgICAgICAgICAgICBtZS5oaWdoZXN0ID0gMDsNCiAgICAgICAgICAgICAgICBtZS50b3RhbENvb2tpZXMgPSAwOw0KICAgICAgICAgICAgICAgIG1lLmxldmVsID0gMDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBHYW1lLnNldFZvbHVtZU11c2ljKEdhbWUudm9sdW1lTXVzaWMpOw0KDQogICAgICAgICAgICBHYW1lLkxvYWRNaW5pZ2FtZXMoKTsNCg0KICAgICAgICAgICAgaWYgKHZlcnNpb24gPCAxLjAzNSkgew0KICAgICAgICAgICAgICAvL29sZCBub24tYmluYXJ5IGFsZ29yaXRobQ0KICAgICAgICAgICAgICBzcGwgPSBzdHJbNl0uc3BsaXQoIjsiKTsgLy91cGdyYWRlcw0KICAgICAgICAgICAgICBHYW1lLlVwZ3JhZGVzT3duZWQgPSAwOw0KICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNCeUlkKSB7DQogICAgICAgICAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc0J5SWRbaV07DQogICAgICAgICAgICAgICAgaWYgKHNwbFtpXSkgew0KICAgICAgICAgICAgICAgICAgdmFyIG1lc3RyID0gc3BsW2ldLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IHBhcnNlSW50KG1lc3RyWzBdKTsNCiAgICAgICAgICAgICAgICAgIG1lLmJvdWdodCA9IHBhcnNlSW50KG1lc3RyWzFdKTsNCiAgICAgICAgICAgICAgICAgIGlmIChtZS5ib3VnaHQgJiYgR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZChtZS5wb29sKSkNCiAgICAgICAgICAgICAgICAgICAgR2FtZS5VcGdyYWRlc093bmVkKys7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIG1lLnVubG9ja2VkID0gMDsNCiAgICAgICAgICAgICAgICAgIG1lLmJvdWdodCA9IDA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChzdHJbN10pIHNwbCA9IHN0cls3XS5zcGxpdCgiOyIpOw0KICAgICAgICAgICAgICBlbHNlIHNwbCA9IFtdOyAvL2FjaGlldmVtZW50cw0KICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkID0gMDsNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLkFjaGlldmVtZW50c0J5SWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLkFjaGlldmVtZW50c0J5SWRbaV07DQogICAgICAgICAgICAgICAgaWYgKHNwbFtpXSkgew0KICAgICAgICAgICAgICAgICAgdmFyIG1lc3RyID0gc3BsW2ldLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgICBtZS53b24gPSBwYXJzZUludChtZXN0clswXSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIG1lLndvbiA9IDA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChtZS53b24gJiYgR2FtZS5Db3VudHNBc0FjaGlldmVtZW50T3duZWQobWUucG9vbCkpDQogICAgICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkKys7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAodmVyc2lvbiA8IDEuMDUwMikgew0KICAgICAgICAgICAgICAvL29sZCBhd2Z1bCBwYWNraW5nIHN5c3RlbQ0KICAgICAgICAgICAgICBpZiAoc3RyWzZdKSBzcGwgPSBzdHJbNl07DQogICAgICAgICAgICAgIGVsc2Ugc3BsID0gW107IC8vdXBncmFkZXMNCiAgICAgICAgICAgICAgaWYgKHZlcnNpb24gPCAxLjA1KSBzcGwgPSBVbmNvbXByZXNzTGFyZ2VCaW4oc3BsKTsNCiAgICAgICAgICAgICAgZWxzZSBzcGwgPSB1bnBhY2soc3BsKTsNCiAgICAgICAgICAgICAgR2FtZS5VcGdyYWRlc093bmVkID0gMDsNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzQnlJZCkgew0KICAgICAgICAgICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNCeUlkW2ldOw0KICAgICAgICAgICAgICAgIGlmIChzcGxbaSAqIDJdKSB7DQogICAgICAgICAgICAgICAgICB2YXIgbWVzdHIgPSBbc3BsW2kgKiAyXSwgc3BsW2kgKiAyICsgMV1dOw0KICAgICAgICAgICAgICAgICAgbWUudW5sb2NrZWQgPSBwYXJzZUludChtZXN0clswXSk7DQogICAgICAgICAgICAgICAgICBtZS5ib3VnaHQgPSBwYXJzZUludChtZXN0clsxXSk7DQogICAgICAgICAgICAgICAgICBpZiAobWUuYm91Z2h0ICYmIEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQobWUucG9vbCkpDQogICAgICAgICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNPd25lZCsrOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgICAgICAgICBtZS5ib3VnaHQgPSAwOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAoc3RyWzddKSBzcGwgPSBzdHJbN107DQogICAgICAgICAgICAgIGVsc2Ugc3BsID0gW107IC8vYWNoaWV2ZW1lbnRzDQogICAgICAgICAgICAgIGlmICh2ZXJzaW9uIDwgMS4wNSkgc3BsID0gVW5jb21wcmVzc0xhcmdlQmluKHNwbCk7DQogICAgICAgICAgICAgIGVsc2Ugc3BsID0gdW5wYWNrKHNwbCk7DQogICAgICAgICAgICAgIEdhbWUuQWNoaWV2ZW1lbnRzT3duZWQgPSAwOw0KICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuQWNoaWV2ZW1lbnRzQnlJZCkgew0KICAgICAgICAgICAgICAgIHZhciBtZSA9IEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFtpXTsNCiAgICAgICAgICAgICAgICBpZiAoc3BsW2ldKSB7DQogICAgICAgICAgICAgICAgICB2YXIgbWVzdHIgPSBbc3BsW2ldXTsNCiAgICAgICAgICAgICAgICAgIG1lLndvbiA9IHBhcnNlSW50KG1lc3RyWzBdKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgbWUud29uID0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKG1lLndvbiAmJiBHYW1lLkNvdW50c0FzQWNoaWV2ZW1lbnRPd25lZChtZS5wb29sKSkNCiAgICAgICAgICAgICAgICAgIEdhbWUuQWNoaWV2ZW1lbnRzT3duZWQrKzsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgaWYgKHN0cls2XSkgc3BsID0gc3RyWzZdOw0KICAgICAgICAgICAgICBlbHNlIHNwbCA9IFtdOyAvL3VwZ3JhZGVzDQogICAgICAgICAgICAgIGlmICh2ZXJzaW9uIDwgMi4wMDQ2KSBzcGwgPSB1bnBhY2syKHNwbCkuc3BsaXQoIiIpOw0KICAgICAgICAgICAgICBlbHNlIHNwbCA9IHNwbC5zcGxpdCgiIik7DQogICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNPd25lZCA9IDA7DQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlc0J5SWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzQnlJZFtpXTsNCiAgICAgICAgICAgICAgICBpZiAoc3BsW2kgKiAyXSkgew0KICAgICAgICAgICAgICAgICAgdmFyIG1lc3RyID0gW3NwbFtpICogMl0sIHNwbFtpICogMiArIDFdXTsNCiAgICAgICAgICAgICAgICAgIG1lLnVubG9ja2VkID0gcGFyc2VJbnQobWVzdHJbMF0pOw0KICAgICAgICAgICAgICAgICAgbWUuYm91Z2h0ID0gcGFyc2VJbnQobWVzdHJbMV0pOw0KICAgICAgICAgICAgICAgICAgaWYgKG1lLmJvdWdodCAmJiBHYW1lLkNvdW50c0FzVXBncmFkZU93bmVkKG1lLnBvb2wpKQ0KICAgICAgICAgICAgICAgICAgICBHYW1lLlVwZ3JhZGVzT3duZWQrKzsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgbWUudW5sb2NrZWQgPSAwOw0KICAgICAgICAgICAgICAgICAgbWUuYm91Z2h0ID0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKHN0cls3XSkgc3BsID0gc3RyWzddOw0KICAgICAgICAgICAgICBlbHNlIHNwbCA9IFtdOyAvL2FjaGlldmVtZW50cw0KICAgICAgICAgICAgICBpZiAodmVyc2lvbiA8IDIuMDA0Nikgc3BsID0gdW5wYWNrMihzcGwpLnNwbGl0KCIiKTsNCiAgICAgICAgICAgICAgZWxzZSBzcGwgPSBzcGwuc3BsaXQoIiIpOw0KICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkID0gMDsNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLkFjaGlldmVtZW50c0J5SWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLkFjaGlldmVtZW50c0J5SWRbaV07DQogICAgICAgICAgICAgICAgaWYgKHNwbFtpXSkgew0KICAgICAgICAgICAgICAgICAgdmFyIG1lc3RyID0gW3NwbFtpXV07DQogICAgICAgICAgICAgICAgICBtZS53b24gPSBwYXJzZUludChtZXN0clswXSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIG1lLndvbiA9IDA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChtZS53b24gJiYgR2FtZS5Db3VudHNBc0FjaGlldmVtZW50T3duZWQobWUucG9vbCkpDQogICAgICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkKys7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgR2FtZS5raWxsQnVmZnMoKTsNCiAgICAgICAgICAgIHZhciBidWZmc1RvTG9hZCA9IFtdOw0KICAgICAgICAgICAgc3BsID0gKHN0cls4XSB8fCAiIikuc3BsaXQoIjsiKTsgLy9idWZmcw0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBzcGwpIHsNCiAgICAgICAgICAgICAgaWYgKHNwbFtpXSkgew0KICAgICAgICAgICAgICAgIHZhciBtZXN0ciA9IHNwbFtpXS50b1N0cmluZygpLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgYnVmZnNUb0xvYWQucHVzaChtZXN0cik7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgc3BsID0gKHN0cls5XSB8fCAiIikuc3BsaXQoIjsiKTsgLy9tb2QgZGF0YQ0KDQogICAgICAgICAgICBmb3IgKHZhciBpIGluIHNwbCkgew0KICAgICAgICAgICAgICBpZiAoc3BsW2ldKSB7DQogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBzcGxbaV0uc3BsaXQoIjoiKTsNCiAgICAgICAgICAgICAgICB2YXIgbW9kSWQgPSBkYXRhWzBdOw0KICAgICAgICAgICAgICAgIGlmIChtb2RJZCA9PSAiTUVUQSIpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGRhdGEuc2hpZnQoKTsNCiAgICAgICAgICAgICAgICBkYXRhID0gR2FtZS5zYWZlTG9hZFN0cmluZyhkYXRhLmpvaW4oIjoiKSk7DQogICAgICAgICAgICAgICAgR2FtZS5tb2RTYXZlRGF0YVttb2RJZF0gPSBkYXRhOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzQnlJZCkgew0KICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNCeUlkW2ldOw0KICAgICAgICAgICAgICBpZiAobWUuYnV5RnVuY3Rpb24pIG1lLmJ1eUZ1bmN0aW9uKCk7DQogICAgICAgICAgICAgIG1lLnJlZnJlc2goKTsNCiAgICAgICAgICAgICAgaWYgKG1lLmlkID4gMCkgew0KICAgICAgICAgICAgICAgIGlmIChtZS5tdXRlZCkgbWUubXV0ZSgxKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodmVyc2lvbiA8IDEuMDUwMykgew0KICAgICAgICAgICAgICAvL3VwZ3JhZGVzIHRoYXQgdXNlZCB0byBiZSByZWd1bGFyLCBidXQgYXJlIG5vdyBoZWF2ZW5seQ0KICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzWyJQZXJzaXN0ZW50IG1lbW9yeSJdOw0KICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgICAgIG1lLmJvdWdodCA9IDA7DQogICAgICAgICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNbIlNlYXNvbiBzd2l0Y2hlciJdOw0KICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgICAgIG1lLmJvdWdodCA9IDA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChHYW1lLmJnVHlwZSA9PSAtMSkgR2FtZS5iZ1R5cGUgPSAwOw0KICAgICAgICAgICAgaWYgKEdhbWUubWlsa1R5cGUgPT0gLTEgfHwgIUdhbWUuQWxsTWlsa3NbR2FtZS5taWxrVHlwZV0pDQogICAgICAgICAgICAgIEdhbWUubWlsa1R5cGUgPSAwOw0KDQogICAgICAgICAgICAvL2FkdmFuY2UgdGltZXJzDQogICAgICAgICAgICB2YXIgZnJhbWVzRWxhcHNlZCA9IE1hdGguY2VpbCgNCiAgICAgICAgICAgICAgKChEYXRlLm5vdygpIC0gR2FtZS5sYXN0RGF0ZSkgLyAxMDAwKSAqIEdhbWUuZnBzDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUucGxlZGdlVCA+IDApDQogICAgICAgICAgICAgIEdhbWUucGxlZGdlVCA9IE1hdGgubWF4KEdhbWUucGxlZGdlVCAtIGZyYW1lc0VsYXBzZWQsIDEpOw0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uVCA+IDApDQogICAgICAgICAgICAgIEdhbWUuc2Vhc29uVCA9IE1hdGgubWF4KEdhbWUuc2Vhc29uVCAtIGZyYW1lc0VsYXBzZWQsIDEpOw0KICAgICAgICAgICAgaWYgKEdhbWUucmVzZWFyY2hUID4gMCkNCiAgICAgICAgICAgICAgR2FtZS5yZXNlYXJjaFQgPSBNYXRoLm1heChHYW1lLnJlc2VhcmNoVCAtIGZyYW1lc0VsYXBzZWQsIDEpOw0KDQogICAgICAgICAgICBHYW1lLlJlc2V0V3JpbmtsZXJzKCk7DQogICAgICAgICAgICBHYW1lLkxvYWRXcmlua2xlcnMoDQogICAgICAgICAgICAgIHdyaW5rbGVycy5hbW91bnQsDQogICAgICAgICAgICAgIHdyaW5rbGVycy5udW1iZXIsDQogICAgICAgICAgICAgIHdyaW5rbGVycy5zaGluaWVzLA0KICAgICAgICAgICAgICB3cmlua2xlcnMuYW1vdW50U2hpbmllcw0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgLy9yZWNvbXB1dGUgc2Vhc29uIHRyaWdnZXIgcHJpY2VzDQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlNlYXNvbiBzd2l0Y2hlciIpKSB7DQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5zZWFzb25zKSB7DQogICAgICAgICAgICAgICAgR2FtZS5VbmxvY2soR2FtZS5zZWFzb25zW2ldLnRyaWdnZXIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBHYW1lLmNvbXB1dGVTZWFzb25QcmljZXMoKTsNCg0KICAgICAgICAgICAgLy9yZWNvbXB1dGUgcHJlc3RpZ2UNCiAgICAgICAgICAgIEdhbWUucHJlc3RpZ2UgPSBNYXRoLmZsb29yKEdhbWUuSG93TXVjaFByZXN0aWdlKEdhbWUuY29va2llc1Jlc2V0KSk7DQogICAgICAgICAgICAvL2lmICgoR2FtZS5oZWF2ZW5seUNoaXBzK0dhbWUuaGVhdmVubHlDaGlwc1NwZW50KTxHYW1lLnByZXN0aWdlKQ0KICAgICAgICAgICAgLy97R2FtZS5oZWF2ZW5seUNoaXBzPUdhbWUucHJlc3RpZ2U7R2FtZS5oZWF2ZW5seUNoaXBzU3BlbnQ9MDt9Ly9jaGlwcyBvd25lZCBhbmQgc3BlbnQgZG9uJ3QgYWRkIHVwIHRvIHRvdGFsIHByZXN0aWdlPyBzZXQgY2hpcHMgb3duZWQgdG8gcHJlc3RpZ2UNCg0KICAgICAgICAgICAgR2FtZS5iYWtlcnlOYW1lU2V0KGJha2VyeU5hbWUpOw0KDQogICAgICAgICAgICBHYW1lLmxvYWRNb2REYXRhKCk7DQoNCiAgICAgICAgICAgIGlmICh2ZXJzaW9uID09IDEuMDM3ICYmIEdhbWUuYmV0YSkgew0KICAgICAgICAgICAgICAvL2FyZSB3ZSBvcGVuaW5nIHRoZSBuZXcgYmV0YT8gaWYgc28sIHNhdmUgdGhlIG9sZCBiZXRhIHRvIC9iZXRhZHVuZ2VvbnMNCiAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKA0KICAgICAgICAgICAgICAgICJDb29raWVDbGlja2VyR2FtZUJldGFEdW5nZW9ucyIsDQogICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJDb29raWVDbGlja2VyR2FtZUJldGEiKQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICAiQmV0YSBzYXZlIGRhdGEiLA0KICAgICAgICAgICAgICAgICJZb3VyIGJldGEgc2F2ZSBkYXRhIGhhcyBiZWVuIHNhZmVseSBleHBvcnRlZCB0byAvYmV0YWR1bmdlb25zLiIsDQogICAgICAgICAgICAgICAgMjANCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodmVyc2lvbiA9PSAxLjA1MDEgJiYgR2FtZS5iZXRhKSB7DQogICAgICAgICAgICAgIC8vYXJlIHdlIG9wZW5pbmcgdGhlIG5ld2VyIGJldGE/IGlmIHNvLCBzYXZlIHRoZSBvbGQgYmV0YSB0byAvb2xkYmV0YQ0KICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oDQogICAgICAgICAgICAgICAgIkNvb2tpZUNsaWNrZXJHYW1lT2xkIiwNCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oIkNvb2tpZUNsaWNrZXJHYW1lQmV0YSIpDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIC8vR2FtZS5Ob3RpZnkoJ0JldGEgc2F2ZSBkYXRhJywnWW91ciBiZXRhIHNhdmUgZGF0YSBoYXMgYmVlbiBzYWZlbHkgZXhwb3J0ZWQgdG8gL29sZGJldGEuJywyMCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodmVyc2lvbiA8PSAxLjA0NjYgJiYgIUdhbWUuYmV0YSkgew0KICAgICAgICAgICAgICAvL2V4cG9ydCB0aGUgb2xkIDIwMTQgdmVyc2lvbiB0byAvdjEwNDY2DQogICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgNCiAgICAgICAgICAgICAgICAiQ29va2llQ2xpY2tlckdhbWV2MTA0NjYiLA0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiQ29va2llQ2xpY2tlckdhbWUiKQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAvL0dhbWUuTm90aWZ5KCdCZXRhIHNhdmUgZGF0YScsJ1lvdXIgc2F2ZSBkYXRhIGhhcyBiZWVuIHNhZmVseSBleHBvcnRlZCB0byAvdjEwNDY2LicsMjApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHZlcnNpb24gPT0gMS45KSB7DQogICAgICAgICAgICAgIC8vYXJlIHdlIGltcG9ydGluZyBmcm9tIHRoZSAxLjkgYmV0YT8gcmVtb3ZlIGFsbCBoZWF2ZW5seSB1cGdyYWRlcyBhbmQgcmVmdW5kIGhlYXZlbmx5IGNoaXBzDQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlc0J5SWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzQnlJZFtpXTsNCiAgICAgICAgICAgICAgICBpZiAobWUuYm91Z2h0ICYmIG1lLnBvb2wgPT0gInByZXN0aWdlIikgew0KICAgICAgICAgICAgICAgICAgbWUudW5sb2NrZWQgPSAwOw0KICAgICAgICAgICAgICAgICAgbWUuYm91Z2h0ID0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgR2FtZS5oZWF2ZW5seUNoaXBzID0gR2FtZS5wcmVzdGlnZTsNCiAgICAgICAgICAgICAgR2FtZS5oZWF2ZW5seUNoaXBzU3BlbnQgPSAwOw0KDQogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIEdhbWUuUHJvbXB0KA0KICAgICAgICAgICAgICAgICAgJzxoMz5CZXRhIHBhdGNoPC9oMz48ZGl2IGNsYXNzPSJibG9jayI+V2VcJ3ZlIHR3ZWFrZWQgc29tZSB0aGluZ3MgYW5kIGZpeGVkIHNvbWUgb3RoZXJzLCBwbGVhc2UgY2hlY2sgdGhlIHVwZGF0ZSBub3RlcyE8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5PZiBub3RlIDogZHVlIHRvIGNoYW5nZXMgaW4gcHJlc3RpZ2UgYmFsYW5jaW5nLCBhbGwgeW91ciBoZWF2ZW5seSB1cGdyYWRlcyBoYXZlIGJlZW4gcmVtb3ZlZCBhbmQgeW91ciBoZWF2ZW5seSBjaGlwcyByZWZ1bmRlZDsgeW91XCdsbCBiZSBhYmxlIHRvIHJlYWxsb2NhdGUgdGhlbSBuZXh0IHRpbWUgeW91IGFzY2VuZC48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5UaGFuayB5b3UgYWdhaW4gZm9yIGJldGEtdGVzdGluZyBDb29raWUgQ2xpY2tlciE8L2Rpdj4nLA0KICAgICAgICAgICAgICAgICAgW1siQWxyaWdodCB0aGVuISIsICJHYW1lLkNsb3NlUHJvbXB0KCk7Il1dDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgfSwgMjAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh2ZXJzaW9uIDw9IDEuMDQ2Nikgew0KICAgICAgICAgICAgICAvL2FyZSB3ZSBsb2FkaW5nIGZyb20gdGhlIG9sZCBsaXZlIHZlcnNpb24/IHJlc2V0IEhDcw0KICAgICAgICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHMgPSBHYW1lLnByZXN0aWdlOw0KICAgICAgICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNTcGVudCA9IDA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgew0KICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlN0YXJ0ZXIga2l0IikpIEdhbWUuT2JqZWN0c1siQ3Vyc29yIl0uZnJlZSA9IDEwOw0KICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlN0YXJ0ZXIga2l0Y2hlbiIpKSBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5mcmVlID0gNTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgR2FtZS5DYWxjdWxhdGVHYWlucygpOw0KDQogICAgICAgICAgICB2YXIgdGltZU9mZmxpbmUgPSAoRGF0ZS5ub3coKSAtIEdhbWUubGFzdERhdGUpIC8gMTAwMDsNCg0KICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAxIC8gMTAwMDApIEdhbWUuVE9ZUyA9IDE7IC8vdGVlaGVlIQ0KICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAxIC8gMTAwMDApIEdhbWUuV0lOS0xFUlMgPSAxOyAvL3NxdWVhaw0KDQogICAgICAgICAgICAvL2NvbXB1dGUgY29va2llcyBlYXJuZWQgd2hpbGUgdGhlIGdhbWUgd2FzIGNsb3NlZA0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICBHYW1lLm1vYmlsZSB8fA0KICAgICAgICAgICAgICBHYW1lLkhhcygiUGVyZmVjdCBpZGxpbmciKSB8fA0KICAgICAgICAgICAgICBHYW1lLkhhcygiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIikNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlBlcmZlY3QgaWRsaW5nIikpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWF4VGltZSA9IDYwICogNjAgKiAyNCAqIDEwMDAwMDAwMDA7DQogICAgICAgICAgICAgICAgdmFyIHBlcmNlbnQgPSAxMDA7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdmFyIG1heFRpbWUgPSA2MCAqIDYwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiQmVscGhlZ29yIikpIG1heFRpbWUgKj0gMjsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIk1hbW1vbiIpKSBtYXhUaW1lICo9IDI7DQogICAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJBYmFkZG9uIikpIG1heFRpbWUgKj0gMjsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlNhdGFuIikpIG1heFRpbWUgKj0gMjsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkFzbW9kZXVzIikpIG1heFRpbWUgKj0gMjsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkJlZWx6ZWJ1YiIpKSBtYXhUaW1lICo9IDI7DQogICAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJMdWNpZmVyIikpIG1heFRpbWUgKj0gMjsNCg0KICAgICAgICAgICAgICAgIHZhciBwZXJjZW50ID0gNTsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkFuZ2VscyIpKSBwZXJjZW50ICs9IDEwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiQXJjaGFuZ2VscyIpKSBwZXJjZW50ICs9IDEwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiVmlydHVlcyIpKSBwZXJjZW50ICs9IDEwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiRG9taW5pb25zIikpIHBlcmNlbnQgKz0gMTA7DQogICAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJDaGVydWJpbSIpKSBwZXJjZW50ICs9IDEwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiU2VyYXBoaW0iKSkgcGVyY2VudCArPSAxMDsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkdvZCIpKSBwZXJjZW50ICs9IDEwOw0KDQogICAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJDaGltZXJhIikpIHsNCiAgICAgICAgICAgICAgICAgIG1heFRpbWUgKz0gNjAgKiA2MCAqIDI0ICogMjsNCiAgICAgICAgICAgICAgICAgIHBlcmNlbnQgKz0gNTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkZlcm4gdGVhIikpIHBlcmNlbnQgKz0gMzsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkljaG9yIHN5cnVwIikpIHBlcmNlbnQgKz0gNzsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkZvcnR1bmUgIzEwMiIpKSBwZXJjZW50ICs9IDE7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgdGltZU9mZmxpbmVPcHRpbWFsID0gTWF0aC5taW4odGltZU9mZmxpbmUsIG1heFRpbWUpOw0KICAgICAgICAgICAgICB2YXIgdGltZU9mZmxpbmVSZWR1Y2VkID0gTWF0aC5tYXgoDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICB0aW1lT2ZmbGluZSAtIHRpbWVPZmZsaW5lT3B0aW1hbA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB2YXIgYW1vdW50ID0NCiAgICAgICAgICAgICAgICAodGltZU9mZmxpbmVPcHRpbWFsICsgdGltZU9mZmxpbmVSZWR1Y2VkICogMC4xKSAqDQogICAgICAgICAgICAgICAgR2FtZS5jb29raWVzUHMgKg0KICAgICAgICAgICAgICAgIChwZXJjZW50IC8gMTAwKTsNCg0KICAgICAgICAgICAgICBpZiAoYW1vdW50ID4gMCkgew0KICAgICAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICAgICAgbG9jKCJXZWxjb21lIGJhY2shIiksDQogICAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAgICJZb3UgZWFybmVkIDxiPiUxPC9iPiB3aGlsZSB5b3Ugd2VyZSBhd2F5LiIsDQogICAgICAgICAgICAgICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KGFtb3VudCkpDQogICAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAgICAgKEVODQogICAgICAgICAgICAgICAgICAgICAgPyAiPGJyPigiICsNCiAgICAgICAgICAgICAgICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lT2ZmbGluZU9wdGltYWwgKiBHYW1lLmZwcywgLTEpICsNCiAgICAgICAgICAgICAgICAgICAgICAgICIgYXQgIiArDQogICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKHBlcmNlbnQpICsNCiAgICAgICAgICAgICAgICAgICAgICAgICIlIENwUyIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgKHRpbWVPZmZsaW5lUmVkdWNlZA0KICAgICAgICAgICAgICAgICAgICAgICAgICA/ICIsIHBsdXMgIiArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWVPZmZsaW5lUmVkdWNlZCAqIEdhbWUuZnBzLCAtMSkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgYXQgIiArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihwZXJjZW50ICogMTApIC8gMTAwICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAgICAgICAgICAgIi4pIg0KICAgICAgICAgICAgICAgICAgICAgIDogIiIpLA0KICAgICAgICAgICAgICAgICAgW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2KSwgMTFdDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBHYW1lLkVhcm4oYW1vdW50KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvL3dlIGxvYWQgYnVmZnMgYWZ0ZXIgZXZlcnl0aGluZyBhcyB3ZSBkbyBub3Qgd2FudCB0aGVtIHRvIGludGVyZmVyIHdpdGggb2ZmbGluZSBDcFMNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gYnVmZnNUb0xvYWQpIHsNCiAgICAgICAgICAgICAgdmFyIG1lc3RyID0gYnVmZnNUb0xvYWRbaV07DQogICAgICAgICAgICAgIHZhciB0eXBlID0gR2FtZS5idWZmVHlwZXNbcGFyc2VJbnQobWVzdHJbMF0pXTsNCiAgICAgICAgICAgICAgR2FtZS5nYWluQnVmZigNCiAgICAgICAgICAgICAgICB0eXBlLm5hbWUsDQogICAgICAgICAgICAgICAgcGFyc2VGbG9hdChtZXN0clsxXSkgLyBHYW1lLmZwcywNCiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KG1lc3RyWzNdIHx8IDApLA0KICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQobWVzdHJbNF0gfHwgMCksDQogICAgICAgICAgICAgICAgcGFyc2VGbG9hdChtZXN0cls1XSB8fCAwKQ0KICAgICAgICAgICAgICApLnRpbWUgPSBwYXJzZUZsb2F0KG1lc3RyWzJdKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgR2FtZS5sb2FkTHVtcHModGltZU9mZmxpbmUpOw0KDQogICAgICAgICAgICBHYW1lLmJha2VyeU5hbWVSZWZyZXNoKCk7DQogICAgICAgICAgfSAvL2ltcG9ydGluZyBvbGQgdmVyc2lvbiBzYXZlDQogICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgbG9jKCJFcnJvciBpbXBvcnRpbmcgc2F2ZSIpLA0KICAgICAgICAgICAgICBsb2MoIlNvcnJ5LCB5b3UgY2FuJ3QgaW1wb3J0IHNhdmVzIGZyb20gdGhlIGNsYXNzaWMgdmVyc2lvbi4iKSwNCiAgICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAgIDYsDQogICAgICAgICAgICAgIDENCiAgICAgICAgICAgICk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyKSB7DQogICAgICAgICAgICBHYW1lLkJ1aWxkU3RvcmUoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBHYW1lLlJlYnVpbGRVcGdyYWRlcygpOw0KDQogICAgICAgICAgR2FtZS5UaWNrZXJBZ2UgPSAwOw0KICAgICAgICAgIEdhbWUuVGlja2VyRWZmZWN0ID0gMDsNCg0KICAgICAgICAgIEdhbWUuZWxkZXJXcmF0aEQgPSAwOw0KICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQoNCiAgICAgICAgICBHYW1lLmJ1eUJ1bGsgPSAxOw0KICAgICAgICAgIEdhbWUuYnV5TW9kZSA9IDE7DQogICAgICAgICAgR2FtZS5zdG9yZUJ1bGtCdXR0b24oLTEpOw0KDQogICAgICAgICAgR2FtZS5zcGVjaWFsVGFiID0gIiI7DQogICAgICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgwKTsNCg0KICAgICAgICAgIEdhbWUua2lsbFNoaW1tZXJzKCk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5UID4gR2FtZS5mcHMgKiA1ICYmIEdhbWUuUmVpbmNhcm5hdGVUaW1lciA9PSAwKSB7DQogICAgICAgICAgICAvL2ZhZGUgb3V0IG9mIGJsYWNrIGFuZCBwb3AgdGhlIGNvb2tpZQ0KICAgICAgICAgICAgR2FtZS5SZWluY2FybmF0ZVRpbWVyID0gMTsNCiAgICAgICAgICAgIEdhbWUuYWRkQ2xhc3MoInJlaW5jYXJuYXRpbmciKTsNCiAgICAgICAgICAgIEdhbWUuQmlnQ29va2llU2l6ZSA9IDA7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHByZXN0aWdlVXBncmFkZXNPd25lZCA9IDA7DQogICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc1tpXS5ib3VnaHQgJiYgR2FtZS5VcGdyYWRlc1tpXS5wb29sID09ICJwcmVzdGlnZSIpDQogICAgICAgICAgICAgIHByZXN0aWdlVXBncmFkZXNPd25lZCsrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAocHJlc3RpZ2VVcGdyYWRlc093bmVkID49IDEwMCkgR2FtZS5XaW4oIkFsbCB0aGUgc3RhcnMgaW4gaGVhdmVuIik7DQoNCiAgICAgICAgICBpZiAodmVyc2lvbiA8IEdhbWUudmVyc2lvbikgbCgibG9nQnV0dG9uIikuY2xhc3NMaXN0LmFkZCgiaGFzVXBkYXRlIik7DQoNCiAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gIT0gIiIgJiYgR2FtZS5zZWFzb24gPT0gR2FtZS5iYXNlU2Vhc29uKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gInZhbGVudGluZXMiKQ0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICBsb2MoIlZhbGVudGluZSdzIERheSEiKSwNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiSXQncyA8Yj5WYWxlbnRpbmUncyBzZWFzb248L2I+ITxicj5Mb3ZlJ3MgaW4gdGhlIGFpciBhbmQgY29va2llcyBhcmUganVzdCB0aGF0IG11Y2ggc3dlZXRlciEiDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICBbMjAsIDNdLA0KICAgICAgICAgICAgICAgIDYwICogMw0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgZWxzZSBpZiAoR2FtZS5zZWFzb24gPT0gImZvb2xzIikNCiAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgbG9jKCJCdXNpbmVzcyBEYXkhIiksDQogICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgIkl0J3MgPGI+QnVzaW5lc3Mgc2Vhc29uPC9iPiE8YnI+RG9uJ3QgcGFuaWMhIFRoaW5ncyBhcmUgZ29ubmEgYmUgbG9va2luZyBhIGxpdHRsZSBtb3JlIGNvcnBvcmF0ZSBmb3IgYSBmZXcgZGF5cy4iDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICBbMTcsIDZdLA0KICAgICAgICAgICAgICAgIDYwICogMw0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgZWxzZSBpZiAoR2FtZS5zZWFzb24gPT0gImhhbGxvd2VlbiIpDQogICAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICAgIGxvYygiSGFsbG93ZWVuISIpLA0KICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICJJdCdzIDxiPkhhbGxvd2VlbiBzZWFzb248L2I+ITxicj5FdmVyeXRoaW5nIGlzIGp1c3QgYSBsaXR0bGUgYml0IHNwb29raWVyISINCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgIFsxMywgOF0sDQogICAgICAgICAgICAgICAgNjAgKiAzDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBlbHNlIGlmIChHYW1lLnNlYXNvbiA9PSAiY2hyaXN0bWFzIikNCiAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgbG9jKCJDaHJpc3RtYXMgdGltZSEiKSwNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiSXQncyA8Yj5DaHJpc3RtYXMgc2Vhc29uPC9iPiE8YnI+QnJpbmcgZ29vZCBjaGVlciB0byBhbGwgYW5kIHlvdSBqdXN0IG1heSBnZXQgY29va2llcyBpbiB5b3VyIHN0b2NraW5ncyEiDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICBbMTIsIDEwXSwNCiAgICAgICAgICAgICAgICA2MCAqIDMNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKEdhbWUuc2Vhc29uID09ICJlYXN0ZXIiKQ0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICBsb2MoIkVhc3RlciEiKSwNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiSXQncyA8Yj5FYXN0ZXIgc2Vhc29uPC9iPiE8YnI+S2VlcCBhbiBleWUgb3V0IGFuZCB5b3UganVzdCBtaWdodCBjbGljayBhIHJhYmJpdCBvciB0d28hIg0KICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgWzAsIDEyXSwNCiAgICAgICAgICAgICAgICA2MCAqIDMNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBHYW1lLmhlcmFsZHMgPSBhY3R1YWxIZXJhbGRzOw0KDQogICAgICAgICAgR2FtZS5Ob3RpZnkobG9jKCJHYW1lIGxvYWRlZCIpLCAiIiwgIiIsIDEsIDEpOw0KDQogICAgICAgICAgaWYgKCFBcHAgJiYgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9PSAxKQ0KICAgICAgICAgICAgR2FtZS5zaG93QmFja3VwV2FybmluZygpOw0KDQogICAgICAgICAgaWYgKEFwcCkgQXBwLmp1c3RMb2FkZWRTYXZlKCk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCVJFU0VUDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgR2FtZS5SZXNldCA9IGZ1bmN0aW9uIChoYXJkKSB7DQogICAgICBHYW1lLlQgPSAwOw0KDQogICAgICBpZiAoaGFyZCkgew0KICAgICAgICBHYW1lLmxvYWRlZEZyb21WZXJzaW9uID0gR2FtZS52ZXJzaW9uOw0KICAgICAgfQ0KDQogICAgICB2YXIgY29va2llc0ZvcmZlaXRlZCA9IEdhbWUuY29va2llc0Vhcm5lZDsNCiAgICAgIGlmICghaGFyZCkgew0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwKSBHYW1lLldpbigiU2FjcmlmaWNlIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDApIEdhbWUuV2luKCJPYmxpdmlvbiIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwKSBHYW1lLldpbigiRnJvbSBzY3JhdGNoIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDApIEdhbWUuV2luKCJOaWhpbGlzbSIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwKSBHYW1lLldpbigiRGVtYXRlcmlhbGl6ZSIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJOaWwgemVybyB6aWxjaCIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJUcmFuc2NlbmRlbmNlIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApDQogICAgICAgICAgR2FtZS5XaW4oIk9ibGl0ZXJhdGUiKTsNCiAgICAgICAgaWYgKGNvb2tpZXNGb3JmZWl0ZWQgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCkNCiAgICAgICAgICBHYW1lLldpbigiTmVnYXRpdmUgdm9pZCIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJUbyBjcnVtYnMsIHlvdSBzYXk/Iik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApDQogICAgICAgICAgR2FtZS5XaW4oIllvdSBnZXQgbm90aGluZyIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJIdW1ibGUgcmViZWdpbm5pbmdzIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApDQogICAgICAgICAgR2FtZS5XaW4oIlRoZSBlbmQgb2YgdGhlIHdvcmxkIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApDQogICAgICAgICAgR2FtZS5XaW4oIk9oLCB5b3UncmUgYmFjayIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLldpbigiTGF6YXJ1cyIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgY29va2llc0ZvcmZlaXRlZCA+PQ0KICAgICAgICAgIDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuV2luKCJTbXVyZiBhY2NvdW50Iik7DQogICAgICAgIGlmICgNCiAgICAgICAgICBjb29raWVzRm9yZmVpdGVkID49DQogICAgICAgICAgMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5XaW4oIklmIGF0IGZpcnN0IHlvdSBkb24ndCBzdWNjZWVkIik7DQoNCiAgICAgICAgaWYgKE1hdGgucm91bmQoR2FtZS5jb29raWVzKSA9PSAxMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJXaGVuIHRoZSBjb29raWVzIGFzY2VuZCBqdXN0IHJpZ2h0Iik7DQogICAgICB9DQoNCiAgICAgIEdhbWUua2lsbEJ1ZmZzKCk7DQoNCiAgICAgIEdhbWUuc2VlZCA9IEdhbWUubWFrZVNlZWQoKTsNCg0KICAgICAgR2FtZS5jb29raWVzUmVzZXQgKz0gR2FtZS5jb29raWVzRWFybmVkOw0KICAgICAgR2FtZS5jb29raWVzID0gMDsNCiAgICAgIEdhbWUuY29va2llc0Vhcm5lZCA9IDA7DQogICAgICBHYW1lLmNvb2tpZUNsaWNrcyA9IDA7DQogICAgICBHYW1lLmdvbGRlbkNsaWNrc0xvY2FsID0gMDsNCiAgICAgIC8vR2FtZS5nb2xkZW5DbGlja3M9MDsNCiAgICAgIC8vR2FtZS5taXNzZWRHb2xkZW5DbGlja3M9MDsNCiAgICAgIEdhbWUuaGFuZG1hZGVDb29raWVzID0gMDsNCiAgICAgIEdhbWUuY29va2llc1BzUmF3SGlnaGVzdCA9IDA7DQogICAgICBpZiAoaGFyZCkgew0KICAgICAgICBHYW1lLmJnVHlwZSA9IDA7DQogICAgICAgIEdhbWUubWlsa1R5cGUgPSAwOw0KICAgICAgICBHYW1lLmNoaW1lVHlwZSA9IDA7DQoNCiAgICAgICAgR2FtZS52YXVsdCA9IFtdOw0KICAgICAgfQ0KICAgICAgR2FtZS5wbGVkZ2VzID0gMDsNCiAgICAgIEdhbWUucGxlZGdlVCA9IDA7DQogICAgICBHYW1lLmVsZGVyV3JhdGggPSAwOw0KICAgICAgR2FtZS5lbGRlcldyYXRoT2xkID0gMDsNCiAgICAgIEdhbWUuZWxkZXJXcmF0aEQgPSAwOw0KICAgICAgR2FtZS5uZXh0UmVzZWFyY2ggPSAwOw0KICAgICAgR2FtZS5yZXNlYXJjaFQgPSAwOw0KICAgICAgR2FtZS5zZWFzb25UID0gMDsNCiAgICAgIEdhbWUuc2Vhc29uVXNlcyA9IDA7DQogICAgICBHYW1lLnNlYXNvbiA9IEdhbWUuYmFzZVNlYXNvbjsNCiAgICAgIEdhbWUuY29tcHV0ZVNlYXNvblByaWNlcygpOw0KDQogICAgICBHYW1lLnN0YXJ0RGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOw0KICAgICAgR2FtZS5sYXN0RGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOw0KDQogICAgICBHYW1lLmNvb2tpZXNTdWNrZWQgPSAwOw0KICAgICAgR2FtZS53cmlua2xlcnNQb3BwZWQgPSAwOw0KICAgICAgR2FtZS5SZXNldFdyaW5rbGVycygpOw0KDQogICAgICBHYW1lLnNhbnRhTGV2ZWwgPSAwOw0KICAgICAgR2FtZS5yZWluZGVlckNsaWNrZWQgPSAwOw0KDQogICAgICBHYW1lLmRyYWdvbkxldmVsID0gMDsNCiAgICAgIEdhbWUuZHJhZ29uQXVyYSA9IDA7DQogICAgICBHYW1lLmRyYWdvbkF1cmEyID0gMDsNCg0KICAgICAgR2FtZS5mb3J0dW5lR0MgPSAwOw0KICAgICAgR2FtZS5mb3J0dW5lQ1BTID0gMDsNCg0KICAgICAgR2FtZS5UaWNrZXJDbGlja3MgPSAwOw0KDQogICAgICBpZiAoR2FtZS5nYWluZWRQcmVzdGlnZSA+IDApIEdhbWUucmVzZXRzKys7DQogICAgICBpZiAoIWhhcmQgJiYgR2FtZS5jYW5MdW1wcygpICYmIEdhbWUuYXNjZW5zaW9uTW9kZSAhPSAxKQ0KICAgICAgICBHYW1lLmFkZENsYXNzKCJsdW1wc09uIik7DQogICAgICBlbHNlIEdhbWUucmVtb3ZlQ2xhc3MoImx1bXBzT24iKTsNCiAgICAgIEdhbWUuZ2FpbmVkUHJlc3RpZ2UgPSAwOw0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0c0J5SWQpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzQnlJZFtpXTsNCiAgICAgICAgbWUuYW1vdW50ID0gMDsNCiAgICAgICAgbWUuYm91Z2h0ID0gMDsNCiAgICAgICAgbWUuaGlnaGVzdCA9IDA7DQogICAgICAgIG1lLmZyZWUgPSAwOw0KICAgICAgICBtZS50b3RhbENvb2tpZXMgPSAwOw0KICAgICAgICBtZS5zd2l0Y2hNaW5pZ2FtZShmYWxzZSk7DQogICAgICAgIGlmIChoYXJkKSB7DQogICAgICAgICAgbWUubXV0ZWQgPSAwOw0KICAgICAgICB9DQogICAgICAgIG1lLnBpY3MgPSBbXTsNCiAgICAgICAgbWUucmVmcmVzaCgpOw0KICAgICAgfQ0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzQnlJZCkgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzQnlJZFtpXTsNCiAgICAgICAgaWYgKGhhcmQgfHwgbWUucG9vbCAhPSAicHJlc3RpZ2UiKSBtZS5ib3VnaHQgPSAwOw0KICAgICAgICBpZiAoaGFyZCkgbWUudW5sb2NrZWQgPSAwOw0KICAgICAgICBpZiAobWUucG9vbCAhPSAicHJlc3RpZ2UiICYmICFtZS5sYXN0aW5nKSB7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgR2FtZS5IYXMoIktlZXBzYWtlcyIpICYmDQogICAgICAgICAgICBHYW1lLnNlYXNvbkRyb3BzLmluZGV4T2YobWUubmFtZSkgIT0gLTEgJiYNCiAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAxIC8gNQ0KICAgICAgICAgICkgew0KICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICBHYW1lLmFzY2Vuc2lvbk1vZGUgPT0gMSAmJg0KICAgICAgICAgICAgR2FtZS5IYXNBY2hpZXYoIk8gRm9ydHVuYSIpICYmDQogICAgICAgICAgICBtZS50aWVyID09ICJmb3J0dW5lIg0KICAgICAgICAgICkgew0KICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICBHYW1lLkhhc0FjaGlldigiTyBGb3J0dW5hIikgJiYNCiAgICAgICAgICAgIG1lLnRpZXIgPT0gImZvcnR1bmUiICYmDQogICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC40DQogICAgICAgICAgKSB7DQogICAgICAgICAgfSBlbHNlIG1lLnVubG9ja2VkID0gMDsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBHYW1lLkJ1aWxkaW5nc093bmVkID0gMDsNCiAgICAgIEdhbWUuVXBncmFkZXNPd25lZCA9IDA7DQoNCiAgICAgIEdhbWUuY29va2llc1BzQnlUeXBlID0ge307DQogICAgICBHYW1lLmNvb2tpZXNNdWx0QnlUeXBlID0ge307DQoNCiAgICAgIGlmICghaGFyZCkgew0KICAgICAgICBpZiAoR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEpIHsNCiAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUucGVybWFuZW50VXBncmFkZXMpIHsNCiAgICAgICAgICAgIGlmIChHYW1lLnBlcm1hbmVudFVwZ3JhZGVzW2ldICE9IC0xKSB7DQogICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNCeUlkW0dhbWUucGVybWFuZW50VXBncmFkZXNbaV1dLmVhcm4oKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTZWFzb24gc3dpdGNoZXIiKSkgew0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNlYXNvbnMpIHsNCiAgICAgICAgICAgICAgR2FtZS5VbmxvY2soR2FtZS5zZWFzb25zW2ldLnRyaWdnZXIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChHYW1lLkhhcygiU3RhcnRlciBraXQiKSkgR2FtZS5PYmplY3RzWyJDdXJzb3IiXS5nZXRGcmVlKDEwKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIlN0YXJ0ZXIga2l0Y2hlbiIpKSBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5nZXRGcmVlKDUpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qZm9yICh2YXIgaSBpbiBHYW1lLkFjaGlldmVtZW50c0J5SWQpDQoJCQl7DQoJCQkJdmFyIG1lPUdhbWUuQWNoaWV2ZW1lbnRzQnlJZFtpXTsNCgkJCQltZS53b249MDsNCgkJCX0qLw0KICAgICAgLy9HYW1lLkRlZmF1bHRQcmVmcygpOw0KICAgICAgQmVhdXRpZnlBbGwoKTsNCg0KICAgICAgR2FtZS5SZWJ1aWxkVXBncmFkZXMoKTsNCiAgICAgIEdhbWUuVGlja2VyQWdlID0gMDsNCiAgICAgIEdhbWUuVGlja2VyRWZmZWN0ID0gMDsNCiAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICBHYW1lLnN0b3JlVG9SZWZyZXNoID0gMTsNCiAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgR2FtZS5raWxsU2hpbW1lcnMoKTsNCg0KICAgICAgR2FtZS5idXlCdWxrID0gMTsNCiAgICAgIEdhbWUuYnV5TW9kZSA9IDE7DQogICAgICBHYW1lLnN0b3JlQnVsa0J1dHRvbigtMSk7DQoNCiAgICAgIEdhbWUuTG9hZE1pbmlnYW1lcygpOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHNCeUlkKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuT2JqZWN0c0J5SWRbaV07DQogICAgICAgIGlmIChoYXJkICYmIG1lLm1pbmlnYW1lICYmIG1lLm1pbmlnYW1lLmxhdW5jaCkgew0KICAgICAgICAgIG1lLm1pbmlnYW1lLmxhdW5jaCgpOw0KICAgICAgICAgIG1lLm1pbmlnYW1lLnJlc2V0KHRydWUpOw0KICAgICAgICB9IGVsc2UgaWYgKCFoYXJkICYmIG1lLm1pbmlnYW1lICYmIG1lLm1pbmlnYW1lLnJlc2V0KQ0KICAgICAgICAgIG1lLm1pbmlnYW1lLnJlc2V0KCk7DQogICAgICB9DQoNCiAgICAgIGwoInRvZ2dsZUJveCIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICBsKCJ0b2dnbGVCb3giKS5pbm5lckhUTUwgPSAiIjsNCiAgICAgIEdhbWUuY2hvaWNlU2VsZWN0b3JPbiA9IC0xOw0KICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgwKTsNCiAgICAgIEdhbWUuc3BlY2lhbFRhYiA9ICIiOw0KDQogICAgICBsKCJsb2dCdXR0b24iKS5jbGFzc0xpc3QucmVtb3ZlKCJoYXNVcGRhdGUiKTsNCg0KICAgICAgR2FtZS5ydW5Nb2RIb29rKCJyZXNldCIsIGhhcmQpOw0KDQogICAgICBpZiAoaGFyZCkgew0KICAgICAgICBHYW1lLmNsaWNrc1RoaXNTZXNzaW9uID0gMDsNCiAgICAgICAgaWYgKEdhbWUuVCA+IEdhbWUuZnBzICogNSAmJiBHYW1lLlJlaW5jYXJuYXRlVGltZXIgPT0gMCkgew0KICAgICAgICAgIC8vZmFkZSBvdXQgb2YgYmxhY2sgYW5kIHBvcCB0aGUgY29va2llDQogICAgICAgICAgR2FtZS5SZWluY2FybmF0ZVRpbWVyID0gMTsNCiAgICAgICAgICBHYW1lLmFkZENsYXNzKCJyZWluY2FybmF0aW5nIik7DQogICAgICAgICAgR2FtZS5CaWdDb29raWVTaXplID0gMDsNCiAgICAgICAgfQ0KICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICBsb2MoIkdhbWUgcmVzZXQiKSwNCiAgICAgICAgICBFTiA/ICJTbyBsb25nLCBjb29raWVzLiIgOiBsb2MoIkdvb2QgYnllLCBjb29raWVzLiIpLA0KICAgICAgICAgIFsyMSwgNl0sDQogICAgICAgICAgNg0KICAgICAgICApOw0KICAgICAgfSBlbHNlIEdhbWUuY2xpY2tzVGhpc1Nlc3Npb24gPSBNYXRoLm1heChHYW1lLmNsaWNrc1RoaXNTZXNzaW9uLCAxKTsNCg0KICAgICAgR2FtZS5qdWtlYm94LnJlc2V0KCk7DQogICAgICBpZiAoaGFyZCkgUGxheUN1ZSgibGF1bmNoIik7DQogICAgICBlbHNlIFBsYXlDdWUoInBsYXkiKTsNCiAgICB9Ow0KICAgIEdhbWUuSGFyZFJlc2V0ID0gZnVuY3Rpb24gKGJ5cGFzcykgew0KICAgICAgaWYgKCFieXBhc3MpIHsNCiAgICAgICAgR2FtZS5Qcm9tcHQoDQogICAgICAgICAgIjxpZCBXaXBlU2F2ZT48aDM+IiArDQogICAgICAgICAgICBsb2MoIldpcGUgc2F2ZSIpICsNCiAgICAgICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgICAgIHRpbnlJY29uKFsxNSwgNV0pICsNCiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIkRvIHlvdSBSRUFMTFkgd2FudCB0byB3aXBlIHlvdXIgc2F2ZT88YnI+PHNtYWxsPllvdSB3aWxsIGxvc2UgeW91ciBwcm9ncmVzcywgeW91ciBhY2hpZXZlbWVudHMsIGFuZCB5b3VyIGhlYXZlbmx5IGNoaXBzITwvc21hbGw+Ig0KICAgICAgICAgICAgKSArDQogICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICBbDQogICAgICAgICAgICBbDQogICAgICAgICAgICAgIEVOID8gIlllcyEiIDogbG9jKCJZZXMiKSwNCiAgICAgICAgICAgICAgIkdhbWUuQ2xvc2VQcm9tcHQoKTtHYW1lLkhhcmRSZXNldCgxKTsiLA0KICAgICAgICAgICAgICAiZmxvYXQ6bGVmdCIsDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgW2xvYygiTm8iKSwgMCwgImZsb2F0OnJpZ2h0Il0sDQogICAgICAgICAgXQ0KICAgICAgICApOw0KICAgICAgfSBlbHNlIGlmIChieXBhc3MgPT0gMSkgew0KICAgICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgICAiPGlkIFJlYWxseVdpcGVTYXZlPjxoMz4iICsNCiAgICAgICAgICAgIGxvYygiV2lwZSBzYXZlIikgKw0KICAgICAgICAgICAgJzwvaDM+PGRpdiBjbGFzcz0iYmxvY2siPicgKw0KICAgICAgICAgICAgdGlueUljb24oWzE1LCA1XSkgKw0KICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiV2hvYWggbm93LCBhcmUgeW91IHJlYWxseSwgPGI+PGk+UkVBTExZPC9pPjwvYj4gc3VyZSB5b3Ugd2FudCB0byBnbyB0aHJvdWdoIHdpdGggdGhpcz88YnI+PHNtYWxsPkRvbid0IHNheSB3ZSBkaWRuJ3Qgd2FybiB5b3UhPC9zbWFsbD4iDQogICAgICAgICAgICApICsNCiAgICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAgIFsNCiAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgRU4gPyAiRG8gaXQhIiA6IGxvYygiWWVzIiksDQogICAgICAgICAgICAgICJHYW1lLkNsb3NlUHJvbXB0KCk7R2FtZS5IYXJkUmVzZXQoMik7IiwNCiAgICAgICAgICAgICAgImZsb2F0OmxlZnQiLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIFtsb2MoIk5vIiksIDAsICJmbG9hdDpyaWdodCJdLA0KICAgICAgICAgIF0NCiAgICAgICAgKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5BY2hpZXZlbWVudHNCeUlkKSB7DQogICAgICAgICAgdmFyIG1lID0gR2FtZS5BY2hpZXZlbWVudHNCeUlkW2ldOw0KICAgICAgICAgIG1lLndvbiA9IDA7DQogICAgICAgIH0NCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHNCeUlkKSB7DQogICAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzQnlJZFtpXTsNCiAgICAgICAgICBtZS5sZXZlbCA9IDA7DQogICAgICAgIH0NCg0KICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkID0gMDsNCiAgICAgICAgR2FtZS5nb2xkZW5DbGlja3MgPSAwOw0KICAgICAgICBHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcyA9IDA7DQogICAgICAgIEdhbWUuUmVzZXQoMSk7DQogICAgICAgIEdhbWUucmVzZXRzID0gMDsNCiAgICAgICAgR2FtZS5mdWxsRGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOw0KICAgICAgICBHYW1lLmJha2VyeU5hbWUgPSBHYW1lLkdldEJha2VyeU5hbWUoKTsNCiAgICAgICAgR2FtZS5iYWtlcnlOYW1lUmVmcmVzaCgpOw0KICAgICAgICBHYW1lLmNvb2tpZXNSZXNldCA9IDA7DQogICAgICAgIEdhbWUucHJlc3RpZ2UgPSAwOw0KICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHMgPSAwOw0KICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNTcGVudCA9IDA7DQogICAgICAgIEdhbWUuaGVhdmVubHlDb29raWVzID0gMDsNCiAgICAgICAgR2FtZS5wZXJtYW5lbnRVcGdyYWRlcyA9IFstMSwgLTEsIC0xLCAtMSwgLTFdOw0KICAgICAgICBHYW1lLmFzY2Vuc2lvbk1vZGUgPSAwOw0KICAgICAgICBHYW1lLmx1bXBzID0gLTE7DQogICAgICAgIEdhbWUubHVtcHNUb3RhbCA9IC0xOw0KICAgICAgICBHYW1lLmx1bXBUID0gRGF0ZS5ub3coKTsNCiAgICAgICAgR2FtZS5sdW1wUmVmaWxsID0gMDsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygibHVtcHNPbiIpOw0KICAgICAgICBpZiAoQXBwKSBBcHAuaGFyZFJlc2V0KCk7DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUub25DcmF0ZSA9IDA7DQogICAgR2FtZS5zZXRPbkNyYXRlID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIEdhbWUub25DcmF0ZSA9IHdoYXQ7DQogICAgfTsNCiAgICBHYW1lLmNyYXRlID0gZnVuY3Rpb24gKG1lLCBjb250ZXh0LCBmb3JjZUNsaWNrU3RyLCBpZCwgc3R5bGUpIHsNCiAgICAgIC8vcHJvZHVjZSBhIGNyYXRlIHdpdGggYXNzb2NpYXRlZCB0b29sdGlwIGZvciBhbiB1cGdyYWRlIG9yIGFjaGlldmVtZW50DQogICAgICAvL21lIGlzIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHVwZ3JhZGUgb3IgYWNoaWV2ZW1lbnQNCiAgICAgIC8vY29udGV4dCBjYW4gYmUgInN0b3JlIiwgImFzY2VuZCIsICJzdGF0cyIgb3IgdW5kZWZpbmVkDQogICAgICAvL2ZvcmNlQ2xpY2tTdHIgY2hhbmdlcyB3aGF0IGlzIGRvbmUgd2hlbiB0aGUgY3JhdGUgaXMgY2xpY2tlZA0KICAgICAgLy9pZCBpcyB0aGUgcmVzdWx0aW5nIGRpdidzIGRlc2lyZWQgaWQNCg0KICAgICAgdmFyIGNsYXNzZXMgPSAiY3JhdGUiOw0KICAgICAgdmFyIGVuYWJsZWQgPSAwOw0KICAgICAgdmFyIG5vRnJhbWUgPSAwOw0KICAgICAgdmFyIGF0dGFjaG1lbnQgPSAidG9wIjsNCiAgICAgIHZhciBuZXVyb21hbmN5ID0gMDsNCiAgICAgIGlmICgNCiAgICAgICAgY29udGV4dCA9PSAic3RhdHMiICYmDQogICAgICAgIChHYW1lLkhhcygiTmV1cm9tYW5jeSIpIHx8IChHYW1lLnNlc2FtZSAmJiBtZS5wb29sID09ICJkZWJ1ZyIpKQ0KICAgICAgKQ0KICAgICAgICBuZXVyb21hbmN5ID0gMTsNCiAgICAgIHZhciBteXN0ZXJpb3VzID0gMDsNCiAgICAgIHZhciBjbGlja1N0ciA9ICIiOw0KDQogICAgICBpZiAobWUudHlwZSA9PSAidXBncmFkZSIpIHsNCiAgICAgICAgdmFyIGNhbkJ1eSA9IGNvbnRleHQgPT0gInN0b3JlIiA/IG1lLmNhbkJ1eSgpIDogdHJ1ZTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIGNvbnRleHQgPT0gInN0YXRzIiAmJg0KICAgICAgICAgIG1lLmJvdWdodCA9PSAwICYmDQogICAgICAgICAgIUdhbWUuSGFzKCJOZXVyb21hbmN5IikgJiYNCiAgICAgICAgICAoIUdhbWUuc2VzYW1lIHx8IG1lLnBvb2wgIT0gImRlYnVnIikNCiAgICAgICAgKQ0KICAgICAgICAgIHJldHVybiAiIjsNCiAgICAgICAgZWxzZSBpZiAoDQogICAgICAgICAgY29udGV4dCA9PSAic3RhdHMiICYmDQogICAgICAgICAgKEdhbWUuSGFzKCJOZXVyb21hbmN5IikgfHwgKEdhbWUuc2VzYW1lICYmIG1lLnBvb2wgPT0gImRlYnVnIikpDQogICAgICAgICkNCiAgICAgICAgICBuZXVyb21hbmN5ID0gMTsNCiAgICAgICAgZWxzZSBpZiAoY29udGV4dCA9PSAic3RvcmUiICYmICFjYW5CdXkpIGVuYWJsZWQgPSAwOw0KICAgICAgICBlbHNlIGlmIChjb250ZXh0ID09ICJhc2NlbmQiICYmIG1lLmJvdWdodCA9PSAwKSBlbmFibGVkID0gMDsNCiAgICAgICAgZWxzZSBlbmFibGVkID0gMTsNCiAgICAgICAgaWYgKG1lLmJvdWdodCA+IDApIGVuYWJsZWQgPSAxOw0KDQogICAgICAgIGlmIChjb250ZXh0ID09ICJzdGF0cyIgJiYgIUdhbWUucHJlZnMuY3JhdGVzKSBub0ZyYW1lID0gMTsNCg0KICAgICAgICBjbGFzc2VzICs9ICIgdXBncmFkZSI7DQogICAgICAgIGlmIChtZS5wb29sID09ICJwcmVzdGlnZSIpIGNsYXNzZXMgKz0gIiBoZWF2ZW5seSI7DQoNCiAgICAgICAgaWYgKG5ldXJvbWFuY3kpIGNsaWNrU3RyID0gIkdhbWUuVXBncmFkZXNCeUlkWyIgKyBtZS5pZCArICJdLnRvZ2dsZSgpOyI7DQogICAgICB9IGVsc2UgaWYgKG1lLnR5cGUgPT0gImFjaGlldmVtZW50Iikgew0KICAgICAgICBpZiAoY29udGV4dCA9PSAic3RhdHMiICYmIG1lLndvbiA9PSAwICYmIG1lLnBvb2wgIT0gIm5vcm1hbCIpIHJldHVybiAiIjsNCiAgICAgICAgZWxzZSBpZiAoY29udGV4dCAhPSAic3RhdHMiKSBlbmFibGVkID0gMTsNCg0KICAgICAgICBpZiAoY29udGV4dCA9PSAic3RhdHMiICYmICFHYW1lLnByZWZzLmNyYXRlcykgbm9GcmFtZSA9IDE7DQoNCiAgICAgICAgY2xhc3NlcyArPSAiIGFjaGlldmVtZW50IjsNCiAgICAgICAgaWYgKG1lLnBvb2wgPT0gInNoYWRvdyIpIGNsYXNzZXMgKz0gIiBzaGFkb3ciOw0KICAgICAgICBpZiAobWUud29uID4gMCkgZW5hYmxlZCA9IDE7DQogICAgICAgIGVsc2UgbXlzdGVyaW91cyA9IDE7DQogICAgICAgIGlmICghZW5hYmxlZCkNCiAgICAgICAgICBjbGlja1N0ciA9ICJHYW1lLkFjaGlldmVtZW50c0J5SWRbIiArIG1lLmlkICsgIl0uY2xpY2soKTsiOw0KDQogICAgICAgIGlmIChuZXVyb21hbmN5KQ0KICAgICAgICAgIGNsaWNrU3RyID0gIkdhbWUuQWNoaWV2ZW1lbnRzQnlJZFsiICsgbWUuaWQgKyAiXS50b2dnbGUoKTsiOw0KICAgICAgfQ0KDQogICAgICBpZiAoY29udGV4dCA9PSAic3RvcmUiKSBhdHRhY2htZW50ID0gInN0b3JlIjsNCg0KICAgICAgaWYgKGZvcmNlQ2xpY2tTdHIpIGNsaWNrU3RyID0gZm9yY2VDbGlja1N0cjsNCg0KICAgICAgaWYgKG1lLmNob2ljZXNGdW5jdGlvbikgY2xhc3NlcyArPSAiIHNlbGVjdG9yIjsNCg0KICAgICAgdmFyIGljb24gPSBtZS5pY29uOw0KICAgICAgaWYgKG15c3RlcmlvdXMpIGljb24gPSBbMCwgN107DQoNCiAgICAgIGlmIChtZS5pY29uRnVuY3Rpb24pIGljb24gPSBtZS5pY29uRnVuY3Rpb24oKTsNCg0KICAgICAgaWYgKG1lLmJvdWdodCAmJiBjb250ZXh0ID09ICJzdG9yZSIpIGVuYWJsZWQgPSAwOw0KDQogICAgICBpZiAoZW5hYmxlZCkgY2xhc3NlcyArPSAiIGVuYWJsZWQiOyAvLyBlbHNlIGNsYXNzZXMrPScgZGlzYWJsZWQnOw0KICAgICAgaWYgKG5vRnJhbWUpIGNsYXNzZXMgKz0gIiBub0ZyYW1lIjsNCg0KICAgICAgdmFyIHRleHQgPSBbXTsNCiAgICAgIGlmIChHYW1lLnNlc2FtZSkgew0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcFNbbWUubmFtZV0gfHwNCiAgICAgICAgICBHYW1lLmRlYnVnZ2VkVXBncmFkZUNwQ2xpY2tbbWUubmFtZV0NCiAgICAgICAgKSB7DQogICAgICAgICAgdGV4dC5wdXNoKCJ4IiArIEJlYXV0aWZ5KDEgKyBHYW1lLmRlYnVnZ2VkVXBncmFkZUNwU1ttZS5uYW1lXSwgMikpOw0KICAgICAgICAgIHRleHQucHVzaCgNCiAgICAgICAgICAgIEdhbWUuZGVidWdDb2xvcnNbDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgICAgTWF0aC5tYXgoDQogICAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgICAgTWF0aC5taW4oDQogICAgICAgICAgICAgICAgICAgIEdhbWUuZGVidWdDb2xvcnMubGVuZ3RoIC0gMSwNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcFNbbWUubmFtZV0gLyAyLCAwLjUpICoNCiAgICAgICAgICAgICAgICAgICAgICBHYW1lLmRlYnVnQ29sb3JzLmxlbmd0aA0KICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgXQ0KICAgICAgICAgICk7DQogICAgICAgICAgdGV4dC5wdXNoKA0KICAgICAgICAgICAgIngiICsgQmVhdXRpZnkoMSArIEdhbWUuZGVidWdnZWRVcGdyYWRlQ3BDbGlja1ttZS5uYW1lXSwgMikNCiAgICAgICAgICApOw0KICAgICAgICAgIHRleHQucHVzaCgNCiAgICAgICAgICAgIEdhbWUuZGVidWdDb2xvcnNbDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgICAgTWF0aC5tYXgoDQogICAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgICAgTWF0aC5taW4oDQogICAgICAgICAgICAgICAgICAgIEdhbWUuZGVidWdDb2xvcnMubGVuZ3RoIC0gMSwNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcENsaWNrW21lLm5hbWVdIC8gMiwgMC41KSAqDQogICAgICAgICAgICAgICAgICAgICAgR2FtZS5kZWJ1Z0NvbG9ycy5sZW5ndGgNCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgIF0NCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmV4dHJhSW5mbykgew0KICAgICAgICAgIHRleHQucHVzaCgNCiAgICAgICAgICAgIE1hdGguZmxvb3IobWUub3JkZXIpICsgKG1lLnBvd2VyID8gIjxicj5QOiIgKyBtZS5wb3dlciA6ICIiKQ0KICAgICAgICAgICk7DQogICAgICAgICAgdGV4dC5wdXNoKCIjZmZmIik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHZhciB0ZXh0U3RyID0gIiI7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpICs9IDIpIHsNCiAgICAgICAgdGV4dFN0ciArPQ0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJvcGFjaXR5OjAuOTt6LWluZGV4OjEwMDA7cGFkZGluZzowcHggMnB4O2JhY2tncm91bmQ6JyArDQogICAgICAgICAgdGV4dFtpICsgMV0gKw0KICAgICAgICAgICI7Y29sb3I6IzAwMDtmb250LXNpemU6MTBweDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6IiArDQogICAgICAgICAgKGkgLyAyKSAqIDEwICsNCiAgICAgICAgICAncHg7bGVmdDowcHg7Ij4nICsNCiAgICAgICAgICB0ZXh0W2ldICsNCiAgICAgICAgICAiPC9kaXY+IjsNCiAgICAgIH0NCiAgICAgIHJldHVybiAoDQogICAgICAgIChHYW1lLnByZWZzLnNjcmVlbnJlYWRlcg0KICAgICAgICAgID8gJzxidXR0b24gYXJpYS1sYWJlbGxlZGJ5PSJhcmlhUmVhZGVyLScgKyBtZS50eXBlICsgIi0iICsgbWUuaWQgKyAnIicNCiAgICAgICAgICA6ICI8ZGl2IikgKw0KICAgICAgICAoY2xpY2tTdHIgIT0gIiIgPyAiICIgKyBHYW1lLmNsaWNrU3RyICsgJz0iJyArIGNsaWNrU3RyICsgJyInIDogIiIpICsNCiAgICAgICAgJyBjbGFzcz0iJyArDQogICAgICAgIGNsYXNzZXMgKw0KICAgICAgICAnIiAnICsNCiAgICAgICAgR2FtZS5nZXREeW5hbWljVG9vbHRpcCgNCiAgICAgICAgICAiZnVuY3Rpb24oKXtyZXR1cm4gR2FtZS5jcmF0ZVRvb2x0aXAoR2FtZS4iICsNCiAgICAgICAgICAgIChtZS50eXBlID09ICJ1cGdyYWRlIiA/ICJVcGdyYWRlcyIgOiAiQWNoaWV2ZW1lbnRzIikgKw0KICAgICAgICAgICAgIkJ5SWRbIiArDQogICAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgICAiXSwiICsNCiAgICAgICAgICAgIChjb250ZXh0ID8gIiciICsgY29udGV4dCArICInIiA6ICIiKSArDQogICAgICAgICAgICAiKTt9IiwNCiAgICAgICAgICBhdHRhY2htZW50LA0KICAgICAgICAgIHRydWUNCiAgICAgICAgKSArDQogICAgICAgIChpZCA/ICdpZD0iJyArIGlkICsgJyIgJyA6ICIiKSArDQogICAgICAgICdzdHlsZT0iJyArDQogICAgICAgIChteXN0ZXJpb3VzDQogICAgICAgICAgPyAiYmFja2dyb3VuZC1wb3NpdGlvbjoiICsgLTAgKiA0OCArICJweCAiICsgLTcgKiA0OCArICJweDsiDQogICAgICAgICAgOiB3cml0ZUljb24oaWNvbikpICsNCiAgICAgICAgKGNvbnRleHQgPT0gImFzY2VuZCIgJiYgbWUucG9vbCA9PSAicHJlc3RpZ2UiDQogICAgICAgICAgPyAicG9zaXRpb246YWJzb2x1dGU7bGVmdDoiICsgbWUucG9zWCArICJweDt0b3A6IiArIG1lLnBvc1kgKyAicHg7Ig0KICAgICAgICAgIDogIiIpICsNCiAgICAgICAgKHN0eWxlIHx8ICIiKSArDQogICAgICAgICciPicgKw0KICAgICAgICB0ZXh0U3RyICsNCiAgICAgICAgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyDQogICAgICAgICAgPyAnPGxhYmVsIGNsYXNzPSJzck9ubHkiIGlkPSJhcmlhUmVhZGVyLScgKw0KICAgICAgICAgICAgbWUudHlwZSArDQogICAgICAgICAgICAiLSIgKw0KICAgICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICAgJyI+PC9sYWJlbD4nDQogICAgICAgICAgOiAiIikgKw0KICAgICAgICAobWUuY2hvaWNlc0Z1bmN0aW9uID8gJzxkaXYgY2xhc3M9InNlbGVjdG9yQ29ybmVyIj48L2Rpdj4nIDogIiIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyID8gIjwvYnV0dG9uPiIgOiAiPC9kaXY+IikNCiAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLmNyYXRlVG9vbHRpcCA9IGZ1bmN0aW9uIChtZSwgY29udGV4dCkgew0KICAgICAgdmFyIHRhZ3MgPSBbXTsNCiAgICAgIG15c3RlcmlvdXMgPSAwOw0KICAgICAgdmFyIG5ldXJvbWFuY3kgPSAwOw0KICAgICAgdmFyIHByaWNlID0gIiI7DQogICAgICBpZiAoDQogICAgICAgIGNvbnRleHQgPT0gInN0YXRzIiAmJg0KICAgICAgICAoR2FtZS5IYXMoIk5ldXJvbWFuY3kiKSB8fCAoR2FtZS5zZXNhbWUgJiYgbWUucG9vbCA9PSAiZGVidWciKSkNCiAgICAgICkNCiAgICAgICAgbmV1cm9tYW5jeSA9IDE7DQoNCiAgICAgIHZhciBhcmlhVGV4dCA9ICIiOw0KDQogICAgICBpZiAobWUudHlwZSA9PSAidXBncmFkZSIpIHsNCiAgICAgICAgYXJpYVRleHQgKz0gIlVwZ3JhZGUuICI7DQoNCiAgICAgICAgaWYgKG1lLnBvb2wgPT0gInByZXN0aWdlIikNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJbVGFnXUhlYXZlbmx5IiwgMCwgIkhlYXZlbmx5IiksICIjZWZhNDM4Iik7DQogICAgICAgIGVsc2UgaWYgKG1lLnBvb2wgPT0gInRlY2giKQ0KICAgICAgICAgIHRhZ3MucHVzaChsb2MoIltUYWddVGVjaCIsIDAsICJUZWNoIiksICIjMzZhNGZmIik7DQogICAgICAgIGVsc2UgaWYgKG1lLnBvb2wgPT0gImNvb2tpZSIpDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiW1RhZ11Db29raWUiLCAwLCAiQ29va2llIiksIDApOw0KICAgICAgICBlbHNlIGlmIChtZS5wb29sID09ICJkZWJ1ZyIpDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiW1RhZ11EZWJ1ZyIsIDAsICJEZWJ1ZyIpLCAiIzAwYzQ2MiIpOw0KICAgICAgICBlbHNlIGlmIChtZS5wb29sID09ICJ0b2dnbGUiKQ0KICAgICAgICAgIHRhZ3MucHVzaChsb2MoIltUYWddU3dpdGNoIiwgMCwgIlN3aXRjaCIpLCAwKTsNCiAgICAgICAgZWxzZSB0YWdzLnB1c2gobG9jKCJbVGFnXVVwZ3JhZGUiLCAwLCAiVXBncmFkZSIpLCAwKTsNCg0KICAgICAgICBpZiAoR2FtZS5IYXMoIkxhYmVsIHByaW50ZXIiKSkgew0KICAgICAgICAgIGlmIChtZS50aWVyICE9IDApDQogICAgICAgICAgICB0YWdzLnB1c2goDQogICAgICAgICAgICAgIGxvYygiVGllcjoiKSArDQogICAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiW1RpZXJdIiArIEdhbWUuVGllcnNbbWUudGllcl0ubmFtZSwNCiAgICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgICBHYW1lLlRpZXJzW21lLnRpZXJdLm5hbWUNCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICBHYW1lLlRpZXJzW21lLnRpZXJdLmNvbG9yDQogICAgICAgICAgICApOw0KICAgICAgICAgIGlmIChtZS5uYW1lID09ICJMYWJlbCBwcmludGVyIiB8fCBtZS5uYW1lID09ICJUaGlzIHVwZ3JhZGUiKQ0KICAgICAgICAgICAgdGFncy5wdXNoKA0KICAgICAgICAgICAgICBsb2MoIlRpZXI6IikgKyAiICIgKyBsb2MoIltUaWVyXVNlbGYtcmVmZXJlbnRpYWwiKSwNCiAgICAgICAgICAgICAgIiNmZjAwZWEiDQogICAgICAgICAgICApOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKG1lLmlzVmF1bHRlZCgpKSB0YWdzLnB1c2gobG9jKCJWYXVsdGVkIiksICIjNGU3NTY2Iik7DQoNCiAgICAgICAgaWYgKG1lLmJvdWdodCA+IDApIHsNCiAgICAgICAgICBhcmlhVGV4dCArPSAiT3duZWQuICI7DQogICAgICAgICAgaWYgKG1lLnBvb2wgPT0gInRlY2giKSB0YWdzLnB1c2gobG9jKCJSZXNlYXJjaGVkIiksIDApOw0KICAgICAgICAgIGVsc2UgaWYgKEVOICYmIG1lLmtpdHRlbikgdGFncy5wdXNoKCJQdXJyY2hhc2VkIiwgMCk7DQogICAgICAgICAgZWxzZSB0YWdzLnB1c2gobG9jKCJQdXJjaGFzZWQiKSwgMCk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAobWUubGFzdGluZyAmJiBtZS51bmxvY2tlZCkNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJVbmxvY2tlZCBmb3JldmVyIiksICIjZjJmZjg3Iik7DQoNCiAgICAgICAgaWYgKG5ldXJvbWFuY3kgJiYgbWUuYm91Z2h0ID09IDApDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiQ2xpY2sgdG8gbGVhcm4hIiksICIjMDBjNDYyIik7DQogICAgICAgIGVsc2UgaWYgKG5ldXJvbWFuY3kgJiYgbWUuYm91Z2h0ID4gMCkNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJDbGljayB0byB1bmxlYXJuISIpLCAiIzAwYzQ2MiIpOw0KDQogICAgICAgIHZhciBjYW5CdXkgPSBjb250ZXh0ID09ICJzdG9yZSIgPyBtZS5jYW5CdXkoKSA6IHRydWU7DQogICAgICAgIHZhciBjb3N0ID0gbWUuZ2V0UHJpY2UoKTsNCiAgICAgICAgaWYgKG1lLnByaWNlTHVtcHMgPiAwKSBjb3N0ID0gbWUucHJpY2VMdW1wczsNCg0KICAgICAgICBpZiAobWUucHJpY2VMdW1wcyA9PSAwICYmIGNvc3QgPT0gMCkgcHJpY2UgPSAiIjsNCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgcHJpY2UgPQ0KICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0O3RleHQtYWxpZ246cmlnaHQ7Ij48c3BhbiBjbGFzcz0icHJpY2UnICsNCiAgICAgICAgICAgIChtZS5wcmljZUx1bXBzID4gMCA/ICIgbHVtcCIgOiAiIikgKw0KICAgICAgICAgICAgKG1lLnBvb2wgPT0gInByZXN0aWdlIg0KICAgICAgICAgICAgICA/IG1lLmJvdWdodCB8fCBHYW1lLmhlYXZlbmx5Q2hpcHMgPj0gY29zdA0KICAgICAgICAgICAgICAgID8gIiBoZWF2ZW5seSINCiAgICAgICAgICAgICAgICA6ICIgaGVhdmVubHkgZGlzYWJsZWQiDQogICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgIChjb250ZXh0ID09ICJzdG9yZSIgPyAoY2FuQnV5ID8gIiIgOiAiIGRpc2FibGVkIikgOiAiIikgKw0KICAgICAgICAgICAgJyI+JyArDQogICAgICAgICAgICBCZWF1dGlmeShNYXRoLnJvdW5kKGNvc3QpKSArDQogICAgICAgICAgICAiPC9zcGFuPiIgKw0KICAgICAgICAgICAgKG1lLnBvb2wgIT0gInByZXN0aWdlIiAmJiBtZS5wcmljZUx1bXBzID09IDANCiAgICAgICAgICAgICAgPyBHYW1lLmNvc3REZXRhaWxzKGNvc3QpDQogICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICI8L2Rpdj4iOw0KDQogICAgICAgICAgYXJpYVRleHQgKz0NCiAgICAgICAgICAgIChtZS5ib3VnaHQNCiAgICAgICAgICAgICAgPyAiQm91Z2h0IGZvciINCiAgICAgICAgICAgICAgOiBjYW5CdXkNCiAgICAgICAgICAgICAgPyAiQ2FuIGJ1eSBmb3IiDQogICAgICAgICAgICAgIDogIkNhbm5vdCBhZmZvcmQgdGhlIikgKw0KICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgIEJlYXV0aWZ5KE1hdGgucm91bmQoY29zdCkpICsNCiAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAobWUucHJpY2VMdW1wcyA+IDANCiAgICAgICAgICAgICAgPyAic3VnYXIgbHVtcHMiDQogICAgICAgICAgICAgIDogbWUucG9vbCA9PSAicHJlc3RpZ2UiDQogICAgICAgICAgICAgID8gImhlYXZlbmx5IGNoaXBzIg0KICAgICAgICAgICAgICA6ICJjb29raWVzIikgKw0KICAgICAgICAgICAgIi4gIjsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChtZS50eXBlID09ICJhY2hpZXZlbWVudCIpIHsNCiAgICAgICAgYXJpYVRleHQgKz0gIkFjaGlldmVtZW50LiAiOw0KICAgICAgICBpZiAobWUucG9vbCA9PSAic2hhZG93IikNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJTaGFkb3cgQWNoaWV2ZW1lbnQiKSwgIiM5NzAwY2YiKTsNCiAgICAgICAgZWxzZSB0YWdzLnB1c2gobG9jKCJBY2hpZXZlbWVudCIpLCAwKTsNCiAgICAgICAgaWYgKG1lLndvbiA+IDApIHsNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJVbmxvY2tlZCIpLCAwKTsNCiAgICAgICAgICBhcmlhVGV4dCArPSAiVW5sb2NrZWQuICI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGFncy5wdXNoKGxvYygiTG9ja2VkIiksIDApOw0KICAgICAgICAgIG15c3RlcmlvdXMgPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKG5ldXJvbWFuY3kgJiYgbWUud29uID09IDApDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiQ2xpY2sgdG8gd2luISIpLCAiIzAwYzQ2MiIpOw0KICAgICAgICBlbHNlIGlmIChuZXVyb21hbmN5ICYmIG1lLndvbiA+IDApDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiQ2xpY2sgdG8gbG9zZSEiKSwgIiMwMGM0NjIiKTsNCiAgICAgIH0NCg0KICAgICAgdmFyIHRhZ3NTdHIgPSAiIjsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkgKz0gMikgew0KICAgICAgICBpZiAoaSAlIDIgPT0gMCkNCiAgICAgICAgICB0YWdzU3RyICs9DQogICAgICAgICAgICAnPGRpdiBjbGFzcz0idGFnIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjonICsNCiAgICAgICAgICAgICh0YWdzW2kgKyAxXSA9PSAwID8gIiNmZmYiIDogdGFnc1tpICsgMV0pICsNCiAgICAgICAgICAgICc7Ij4nICsNCiAgICAgICAgICAgIHRhZ3NbaV0gKw0KICAgICAgICAgICAgIjwvZGl2PiI7DQogICAgICB9DQoNCiAgICAgIHZhciBpY29uID0gbWUuaWNvbjsNCiAgICAgIGlmIChteXN0ZXJpb3VzKSBpY29uID0gWzAsIDddOw0KDQogICAgICBpZiAobWUuaWNvbkZ1bmN0aW9uKSBpY29uID0gbWUuaWNvbkZ1bmN0aW9uKCk7DQoNCiAgICAgIGFyaWFUZXh0ICs9IChteXN0ZXJpb3VzID8gIkhpZGRlbiIgOiBtZS5kbmFtZSkgKyAiLiAiOw0KDQogICAgICB2YXIgdGlwID0gIiI7DQogICAgICBpZiAoY29udGV4dCA9PSAic3RvcmUiKSB7DQogICAgICAgIGlmIChtZS5wb29sICE9ICJ0b2dnbGUiICYmIG1lLnBvb2wgIT0gInRlY2giKSB7DQogICAgICAgICAgdmFyIHB1cmNoYXNlID0gbWUua2l0dGVuID8gInB1cnJjaGFzZSIgOiAicHVyY2hhc2UiOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiSW5zcGlyZWQgY2hlY2tsaXN0IikpIHsNCiAgICAgICAgICAgIGlmIChtZS5pc1ZhdWx0ZWQoKSkNCiAgICAgICAgICAgICAgdGlwID0gRU4NCiAgICAgICAgICAgICAgICA/ICJVcGdyYWRlIGlzIHZhdWx0ZWQgYW5kIHdpbGwgbm90IGJlIGF1dG8tIiArDQogICAgICAgICAgICAgICAgICBwdXJjaGFzZSArDQogICAgICAgICAgICAgICAgICAiZC48YnI+Q2xpY2sgdG8gIiArDQogICAgICAgICAgICAgICAgICBwdXJjaGFzZSArDQogICAgICAgICAgICAgICAgICAiLiBTaGlmdC1jbGljayB0byB1bnZhdWx0LiINCiAgICAgICAgICAgICAgICA6IGxvYygiVXBncmFkZSBpcyB2YXVsdGVkIGFuZCB3aWxsIG5vdCBiZSBhdXRvLXB1cmNoYXNlZC4iKSArDQogICAgICAgICAgICAgICAgICAiPGJyPiIgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJDbGljayB0byBwdXJjaGFzZS4iKSArDQogICAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgICAgbG9jKCIlMSB0byB1bnZhdWx0LiIsIGxvYygiU2hpZnQtY2xpY2siKSk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgIHRpcCA9IEVODQogICAgICAgICAgICAgICAgPyAiQ2xpY2sgdG8gIiArIHB1cmNoYXNlICsgIi4gU2hpZnQtY2xpY2sgdG8gdmF1bHQuIg0KICAgICAgICAgICAgICAgIDogbG9jKCJDbGljayB0byBwdXJjaGFzZS4iKSArDQogICAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgICAgbG9jKCIlMSB0byB2YXVsdC4iLCBsb2MoIlNoaWZ0LWNsaWNrIikpOw0KICAgICAgICAgICAgaWYgKEVOKSB7DQogICAgICAgICAgICAgIGlmIChHYW1lLmtleXNbMTZdKSB0aXAgKz0gIjxicj4oWW91IGFyZSBob2xkaW5nIFNoaWZ0LikiOw0KICAgICAgICAgICAgICBlbHNlIHRpcCArPSAiPGJyPihZb3UgYXJlIG5vdCBob2xkaW5nIFNoaWZ0LikiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZQ0KICAgICAgICAgICAgdGlwID0gRU4gPyAiQ2xpY2sgdG8gIiArIHB1cmNoYXNlICsgIi4iIDogbG9jKCJDbGljayB0byBwdXJjaGFzZS4iKTsNCiAgICAgICAgfSBlbHNlIGlmIChtZS5wb29sID09ICJ0b2dnbGUiICYmIG1lLmNob2ljZXNGdW5jdGlvbikNCiAgICAgICAgICB0aXAgPSBsb2MoIkNsaWNrIHRvIG9wZW4gc2VsZWN0b3IuIik7DQogICAgICAgIGVsc2UgaWYgKG1lLnBvb2wgPT0gInRvZ2dsZSIpIHRpcCA9IGxvYygiQ2xpY2sgdG8gdG9nZ2xlLiIpOw0KICAgICAgICBlbHNlIGlmIChtZS5wb29sID09ICJ0ZWNoIikgdGlwID0gbG9jKCJDbGljayB0byByZXNlYXJjaC4iKTsNCiAgICAgIH0NCg0KICAgICAgaWYgKHRpcCAhPSAiIikgYXJpYVRleHQgKz0gdGlwICsgIiAiOw0KDQogICAgICB2YXIgZGVzYyA9IG1lLmRkZXNjOw0KICAgICAgaWYgKG1lLmRlc2NGdW5jKSBkZXNjID0gbWUuZGVzY0Z1bmMoY29udGV4dCk7DQogICAgICBpZiAobWUuYm91Z2h0ICYmIGNvbnRleHQgPT0gInN0b3JlIiAmJiBtZS5kaXNwbGF5RnVuY1doZW5Pd25lZCkNCiAgICAgICAgZGVzYyA9IG1lLmRpc3BsYXlGdW5jV2hlbk93bmVkKCkgKyAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArIGRlc2M7DQogICAgICBpZiAobWUudW5sb2NrQXQpIHsNCiAgICAgICAgaWYgKG1lLnVubG9ja0F0LnJlcXVpcmUpIHsNCiAgICAgICAgICB2YXIgaXQgPSBHYW1lLlVwZ3JhZGVzW21lLnVubG9ja0F0LnJlcXVpcmVdOw0KICAgICAgICAgIGRlc2MgPQ0KICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTo4MCU7dGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgICAgIChFTiA/ICJGcm9tIiA6IGxvYygiU291cmNlOiIpKSArDQogICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgdGlueUljb24oaXQuaWNvbikgKw0KICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgIGl0LmRuYW1lICsNCiAgICAgICAgICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICAgIGRlc2M7DQogICAgICAgIH0gZWxzZSBpZiAobWUudW5sb2NrQXQudGV4dCkgew0KICAgICAgICAgIC8vdmFyIGl0PUdhbWUuVXBncmFkZXNbbWUudW5sb2NrQXQucmVxdWlyZV07DQogICAgICAgICAgZGVzYyA9DQogICAgICAgICAgICAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjgwJTt0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICAgICAgKEVOID8gIkZyb20iIDogbG9jKCJTb3VyY2U6IikpICsNCiAgICAgICAgICAgICIgPGI+IiArDQogICAgICAgICAgICB0ZXh0ICsNCiAgICAgICAgICAgICc8L2I+PC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgICBkZXNjOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGlmICghbXlzdGVyaW91cykgYXJpYVRleHQgKz0gIkRlc2NyaXB0aW9uOiAiICsgZGVzYyArICIgIjsNCg0KICAgICAgaWYgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyKSB7DQogICAgICAgIHZhciBhcmlhTGFiZWwgPSBsKCJhcmlhUmVhZGVyLSIgKyBtZS50eXBlICsgIi0iICsgbWUuaWQpOw0KICAgICAgICBpZiAoYXJpYUxhYmVsKQ0KICAgICAgICAgIGFyaWFMYWJlbC5pbm5lckhUTUwgPSBhcmlhVGV4dC5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgIiAiKTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MXB4O3RvcDoxcHg7cmlnaHQ6MXB4O2JvdHRvbToxcHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTI1ZGVnLCcgKw0KICAgICAgICAobWUucG9vbCA9PSAicHJlc3RpZ2UiDQogICAgICAgICAgPyAicmdiYSgxNSwxMTUsMTMwLDEpIDAlLHJnYmEoMTUsMTE1LDEzMCwwKSINCiAgICAgICAgICA6ICJyZ2JhKDUwLDQwLDQwLDEpIDAlLHJnYmEoNTAsNDAsNDAsMCkiKSArDQogICAgICAgICcgMjAlKTttaXgtYmxlbmQtbW9kZTpzY3JlZW47ei1pbmRleDoxOyI+PC9kaXY+PGRpdiBzdHlsZT0iei1pbmRleDoxMDtwYWRkaW5nOjhweCA0cHg7bWluLXdpZHRoOjM1MHB4O3Bvc2l0aW9uOnJlbGF0aXZlOyIgaWQ9InRvb2x0aXBDcmF0ZSI+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0iZmxvYXQ6bGVmdDttYXJnaW4tbGVmdDotOHB4O21hcmdpbi10b3A6LThweDsnICsNCiAgICAgICAgd3JpdGVJY29uKGljb24pICsNCiAgICAgICAgJyI+PC9kaXY+JyArDQogICAgICAgIChtZS5ib3VnaHQgJiYgY29udGV4dCA9PSAic3RvcmUiID8gIiIgOiBwcmljZSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibmFtZSI+JyArDQogICAgICAgIChteXN0ZXJpb3VzID8gIj8/PyIgOiBtZS5kbmFtZSkgKw0KICAgICAgICAiPC9kaXY+IiArDQogICAgICAgIHRhZ3NTdHIgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBjbGFzcz0iZGVzY3JpcHRpb24iPicgKw0KICAgICAgICAobXlzdGVyaW91cyA/ICI/Pz8iIDogZGVzYykgKw0KICAgICAgICAiPC9kaXY+PC9kaXY+IiArDQogICAgICAgICh0aXAgIT0gIiINCiAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48ZGl2IHN0eWxlPSJmb250LXNpemU6MTBweDtmb250LXdlaWdodDpib2xkO2NvbG9yOiM5OTk7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZy1ib3R0b206NHB4O2xpbmUtaGVpZ2h0OjEwMCU7IiBjbGFzcz0iY3JhdGVUaXAiPicgKw0KICAgICAgICAgICAgdGlwICsNCiAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgOiAiIikgKw0KICAgICAgICAoR2FtZS5zZXNhbWUNCiAgICAgICAgICA/ICc8ZGl2IHN0eWxlPSJmb250LXNpemU6OXB4OyI+SWQ6ICcgKw0KICAgICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICAgIiB8IE9yZGVyOiAiICsNCiAgICAgICAgICAgIE1hdGguZmxvb3IobWUub3JkZXIpICsNCiAgICAgICAgICAgIChtZS50aWVyID8gIiB8IFRpZXI6ICIgKyBtZS50aWVyIDogIiIpICsNCiAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgOiAiIikNCiAgICAgICk7DQogICAgfTsNCg0KICAgIEdhbWUuY29zdERldGFpbHMgPSBmdW5jdGlvbiAoY29zdCkgew0KICAgICAgaWYgKCFHYW1lLkhhcygiR2VuaXVzIGFjY291bnRpbmciKSkgcmV0dXJuICIiOw0KICAgICAgaWYgKCFjb3N0KSByZXR1cm4gIiI7DQogICAgICB2YXIgcHJpY2VJbmZvID0gIiI7DQogICAgICB2YXIgY3BzID0gR2FtZS5jb29raWVzUHMgKiAoMSAtIEdhbWUuY3BzU3Vja2VkKTsNCiAgICAgIGlmIChjb3N0ID4gR2FtZS5jb29raWVzKQ0KICAgICAgICBwcmljZUluZm8gKz0NCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiaW4gJTEiLA0KICAgICAgICAgICAgR2FtZS5zYXlUaW1lKCgoY29zdCAtIEdhbWUuY29va2llcykgLyBjcHMgKyAxKSAqIEdhbWUuZnBzKQ0KICAgICAgICAgICkgKyAiPGJyPiI7DQogICAgICBwcmljZUluZm8gKz0NCiAgICAgICAgbG9jKCIlMSB3b3J0aCIsIEdhbWUuc2F5VGltZSgoY29zdCAvIGNwcyArIDEpICogR2FtZS5mcHMpKSArICI8YnI+IjsNCiAgICAgIHByaWNlSW5mbyArPQ0KICAgICAgICBsb2MoIiUxJSBvZiBiYW5rIiwgQmVhdXRpZnkoKGNvc3QgLyBHYW1lLmNvb2tpZXMpICogMTAwLCAxKSkgKyAiPGJyPiI7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjgwJTtvcGFjaXR5OjAuNztsaW5lLWhlaWdodDo5MCU7IiBjbGFzcz0iY29zdERldGFpbHMiPicgKw0KICAgICAgICBwcmljZUluZm8gKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCVBSRVNUSUdFDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLkhDZmFjdG9yID0gMzsNCiAgICBHYW1lLkhvd011Y2hQcmVzdGlnZSA9IGZ1bmN0aW9uICgNCiAgICAgIGNvb2tpZXMgLy9ob3cgbXVjaCBwcmVzdGlnZSBbY29va2llc10gc2hvdWxkIGxhbmQgeW91DQogICAgKSB7DQogICAgICByZXR1cm4gTWF0aC5wb3coY29va2llcyAvIDEwMDAwMDAwMDAwMDAsIDEgLyBHYW1lLkhDZmFjdG9yKTsNCiAgICB9Ow0KICAgIEdhbWUuSG93TWFueUNvb2tpZXNSZXNldCA9IGZ1bmN0aW9uICgNCiAgICAgIGNoaXBzIC8vaG93IG1hbnkgY29va2llcyBbY2hpcHNdIGFyZSB3b3J0aA0KICAgICkgew0KICAgICAgLy90aGlzIG11c3QgYmUgdGhlIGludmVyc2Ugb2YgdGhlIGFib3ZlIGZ1bmN0aW9uIChpZS4gaWYgY29va2llcz1jaGlwc14yLCBjaGlwcz1jb29raWVzXigxLzIpICkNCiAgICAgIHJldHVybiBNYXRoLnBvdyhjaGlwcywgR2FtZS5IQ2ZhY3RvcikgKiAxMDAwMDAwMDAwMDAwOw0KICAgIH07DQogICAgR2FtZS5nYWluZWRQcmVzdGlnZSA9IDA7DQogICAgR2FtZS5FYXJuSGVhdmVubHlDaGlwcyA9IGZ1bmN0aW9uIChjb29raWVzRm9yZmVpdGVkLCBzaWxlbnQpIHsNCiAgICAgIC8vcmVjYWxjdWxhdGUgcHJlc3RpZ2UgYW5kIGNoaXBzIG93bmVkDQogICAgICB2YXIgcHJlc3RpZ2UgPSBNYXRoLmZsb29yKA0KICAgICAgICBHYW1lLkhvd011Y2hQcmVzdGlnZShHYW1lLmNvb2tpZXNSZXNldCArIGNvb2tpZXNGb3JmZWl0ZWQpDQogICAgICApOw0KICAgICAgcHJlc3RpZ2UgPSBNYXRoLm1heCgwLCBwcmVzdGlnZSk7DQogICAgICBpZiAocHJlc3RpZ2UgIT0gR2FtZS5wcmVzdGlnZSkgew0KICAgICAgICAvL2RpZCB3ZSBjaGFuZ2UgcHJlc3RpZ2UgbGV2ZWxzPw0KICAgICAgICB2YXIgcHJlc3RpZ2VEaWZmZXJlbmNlID0gcHJlc3RpZ2UgLSBHYW1lLnByZXN0aWdlOw0KICAgICAgICBHYW1lLmdhaW5lZFByZXN0aWdlID0gcHJlc3RpZ2VEaWZmZXJlbmNlOw0KICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHMgKz0gcHJlc3RpZ2VEaWZmZXJlbmNlOw0KICAgICAgICBHYW1lLnByZXN0aWdlID0gcHJlc3RpZ2U7DQogICAgICAgIGlmICghc2lsZW50ICYmIHByZXN0aWdlRGlmZmVyZW5jZSA+IDApDQogICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJZb3UgZm9yZmVpdCB5b3VyICUxLiIsDQogICAgICAgICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KGNvb2tpZXNGb3JmZWl0ZWQpKQ0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIllvdSBnYWluIDxiPiUxPC9iPiEiLA0KICAgICAgICAgICAgICBsb2MoIiUxIHByZXN0aWdlIGxldmVsIiwgTEJlYXV0aWZ5KHByZXN0aWdlRGlmZmVyZW5jZSkpDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgWzE5LCA3XQ0KICAgICAgICAgICk7DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUuR2V0SGVhdmVubHlNdWx0aXBsaWVyID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGhlYXZlbmx5TXVsdCA9IDA7DQogICAgICBpZiAoR2FtZS5IYXMoIkhlYXZlbmx5IGNoaXAgc2VjcmV0IikpIGhlYXZlbmx5TXVsdCArPSAwLjA1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBjb29raWUgc3RhbmQiKSkgaGVhdmVubHlNdWx0ICs9IDAuMjsNCiAgICAgIGlmIChHYW1lLkhhcygiSGVhdmVubHkgYmFrZXJ5IikpIGhlYXZlbmx5TXVsdCArPSAwLjI1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBjb25mZWN0aW9uZXJ5IikpIGhlYXZlbmx5TXVsdCArPSAwLjI1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBrZXkiKSkgaGVhdmVubHlNdWx0ICs9IDAuMjU7DQogICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0RyYWdvbiBHb2QnKSkgaGVhdmVubHlNdWx0Kj0xLjA1Ow0KICAgICAgaGVhdmVubHlNdWx0ICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJEcmFnb24gR29kIikgKiAwLjA1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJMdWNreSBkaWdpdCIpKSBoZWF2ZW5seU11bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiTHVja3kgbnVtYmVyIikpIGhlYXZlbmx5TXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJMdWNreSBwYXlvdXQiKSkgaGVhdmVubHlNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJjcmVhdGlvbiIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIGhlYXZlbmx5TXVsdCAqPSAwLjc7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAyKSBoZWF2ZW5seU11bHQgKj0gMC44Ow0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgaGVhdmVubHlNdWx0ICo9IDAuOTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBoZWF2ZW5seU11bHQ7DQogICAgfTsNCg0KICAgIEdhbWUuYXNjZW5zaW9uTW9kZXMgPSB7DQogICAgICAwOiB7DQogICAgICAgIG5hbWU6ICJOb25lIiwNCiAgICAgICAgZG5hbWU6IGxvYygiTm9uZSBbYXNjZW5zaW9uIHR5cGVdIiksDQogICAgICAgIGRlc2M6IGxvYygiTm8gc3BlY2lhbCBtb2RpZmllcnMuIiksDQogICAgICAgIGljb246IFsxMCwgMF0sDQogICAgICB9LA0KICAgICAgMTogew0KICAgICAgICBuYW1lOiAiQm9ybiBhZ2FpbiIsDQogICAgICAgIGRuYW1lOiBsb2MoIkJvcm4gYWdhaW4gW2FzY2Vuc2lvbiB0eXBlXSIpLA0KICAgICAgICBkZXNjOiBsb2MoDQogICAgICAgICAgJ1RoaXMgcnVuIHdpbGwgYmVoYXZlIGFzIGlmIHlvdVwnZCBqdXN0IHN0YXJ0ZWQgdGhlIGdhbWUgZnJvbSBzY3JhdGNoLiBQcmVzdGlnZSBsZXZlbHMgYW5kIGhlYXZlbmx5IHVwZ3JhZGVzIHdpbGwgaGF2ZSBubyBlZmZlY3QsIGFzIHdpbGwgc3VnYXIgbHVtcHMgYW5kIGJ1aWxkaW5nIGxldmVscy4gUGVybWEtdXBncmFkZXMgYW5kIG1pbmlnYW1lcyB3aWxsIGJlIHVuYXZhaWxhYmxlLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PlNvbWUgYWNoaWV2ZW1lbnRzIGFyZSBvbmx5IGF2YWlsYWJsZSBpbiB0aGlzIG1vZGUuJw0KICAgICAgICApLA0KICAgICAgICBpY29uOiBbMiwgN10sDQogICAgICB9IC8qLA0KCQkyOntuYW1lOidUcmlnZ2VyIGZpbmdlcicsZG5hbWU6bG9jKCJUcmlnZ2VyIGZpbmdlciBbYXNjZW5zaW9uIHR5cGVdIiksZGVzYzpsb2MoIkluIHRoaXMgcnVuLCBzY3JvbGxpbmcgeW91ciBtb3VzZSB3aGVlbCBvbiB0aGUgY29va2llIGNvdW50cyBhcyBjbGlja2luZyBpdC4gU29tZSB1cGdyYWRlcyBpbnRyb2R1Y2UgbmV3IGNsaWNraW5nIGJlaGF2aW9ycy48YnI+Tm8gY2xpY2tpbmcgYWNoaWV2ZW1lbnRzIG1heSBiZSBvYnRhaW5lZCBpbiB0aGlzIG1vZGUuPGRpdiBjbGFzcz1cImxpbmVcIj48L2Rpdj5SZWFjaGluZyAxIHF1YWRyaWxsaW9uIGNvb2tpZXMgaW4gdGhpcyBtb2RlIHVubG9ja3MgYSBzcGVjaWFsIGhlYXZlbmx5IHVwZ3JhZGUuIiksaWNvbjpbMTIsMF19Ki8sDQogICAgfTsNCg0KICAgIEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50ID0gMDsNCiAgICBHYW1lLmFzY2VuZE1ldGVyUGVyY2VudFQgPSAwOw0KICAgIEdhbWUuYXNjZW5kTWV0ZXJMZXZlbCA9IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsNCg0KICAgIEdhbWUubmV4dEFzY2Vuc2lvbk1vZGUgPSAwOw0KICAgIEdhbWUuVXBkYXRlQXNjZW5zaW9uTW9kZVByb21wdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBpY29uID0gR2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLm5leHRBc2NlbnNpb25Nb2RlXS5pY29uOw0KICAgICAgdmFyIG5hbWUgPSBHYW1lLmFzY2Vuc2lvbk1vZGVzW0dhbWUubmV4dEFzY2Vuc2lvbk1vZGVdLmRuYW1lOw0KICAgICAgbCgiYXNjZW5kTW9kZUJ1dHRvbiIpLmlubmVySFRNTCA9DQogICAgICAgICc8ZGl2IGNsYXNzPSJjcmF0ZSBub0ZyYW1lIGVuYWJsZWQiICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5QaWNrQXNjZW5zaW9uTW9kZSgpOyIgJyArDQogICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAnPGRpdiBzdHlsZT0ibWluLXdpZHRoOjIwMHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxMXB4OyIgaWQ9InRvb2x0aXBOZXh0Q2hhbGxlbmdlTW9kZSI+JyArDQogICAgICAgICAgICBsb2MoIkNoYWxsZW5nZSBtb2RlIGZvciB0aGUgbmV4dCBydW46IikgKw0KICAgICAgICAgICAgIjxicj48Yj4iICsNCiAgICAgICAgICAgIG5hbWUgKw0KICAgICAgICAgICAgJzwvYj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIkNoYWxsZW5nZSBtb2RlcyBhcHBseSBzcGVjaWFsIG1vZGlmaWVycyB0byB5b3VyIG5leHQgYXNjZW5zaW9uLjxicj5DbGljayB0byBjaGFuZ2UuIg0KICAgICAgICAgICAgKSArDQogICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICAiYm90dG9tLXJpZ2h0Ig0KICAgICAgICApICsNCiAgICAgICAgJyBzdHlsZT0ib3BhY2l0eToxO2Zsb2F0Om5vbmU7ZGlzcGxheTpibG9jaztiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKw0KICAgICAgICAtaWNvblswXSAqIDQ4ICsNCiAgICAgICAgInB4ICIgKw0KICAgICAgICAtaWNvblsxXSAqIDQ4ICsNCiAgICAgICAgJ3B4OyI+PC9kaXY+JzsNCiAgICB9Ow0KICAgIEdhbWUuUGlja0FzY2Vuc2lvbk1vZGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgR2FtZS50b29sdGlwLmhpZGUoKTsNCg0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmFzY2Vuc2lvbk1vZGVzKSB7DQogICAgICAgIHZhciBpY29uID0gR2FtZS5hc2NlbnNpb25Nb2Rlc1tpXS5pY29uOw0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGRpdiBjbGFzcz0iY3JhdGUgZW5hYmxlZCcgKw0KICAgICAgICAgIChpID09IEdhbWUubmV4dEFzY2Vuc2lvbk1vZGUgPyAiIGhpZ2hsaWdodGVkIiA6ICIiKSArDQogICAgICAgICAgJyIgaWQ9ImNoYWxsZW5nZU1vZGVTZWxlY3RvcicgKw0KICAgICAgICAgIGkgKw0KICAgICAgICAgICciIHN0eWxlPSJvcGFjaXR5OjE7ZmxvYXQ6bm9uZTtkaXNwbGF5OmlubGluZS1ibG9jaztiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKw0KICAgICAgICAgIC1pY29uWzBdICogNDggKw0KICAgICAgICAgICJweCAiICsNCiAgICAgICAgICAtaWNvblsxXSAqIDQ4ICsNCiAgICAgICAgICAncHg7IiAnICsNCiAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAnPSJHYW1lLm5leHRBc2NlbnNpb25Nb2RlPScgKw0KICAgICAgICAgIGkgKw0KICAgICAgICAgICI7R2FtZS5QaWNrQXNjZW5zaW9uTW9kZSgpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7R2FtZS5jaG9pY2VTZWxlY3Rvck9uPS0xO1wiIG9uTW91c2VPdXQ9XCJsKCdjaGFsbGVuZ2VTZWxlY3RlZE5hbWUnKS5pbm5lckhUTUw9R2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLm5leHRBc2NlbnNpb25Nb2RlXS5kbmFtZTtsKCdjaGFsbGVuZ2VTZWxlY3RlZERlc2MnKS5pbm5lckhUTUw9R2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLm5leHRBc2NlbnNpb25Nb2RlXS5kZXNjO1wiIG9uTW91c2VPdmVyPVwibCgnY2hhbGxlbmdlU2VsZWN0ZWROYW1lJykuaW5uZXJIVE1MPUdhbWUuYXNjZW5zaW9uTW9kZXNbIiArDQogICAgICAgICAgaSArDQogICAgICAgICAgIl0uZG5hbWU7bCgnY2hhbGxlbmdlU2VsZWN0ZWREZXNjJykuaW5uZXJIVE1MPUdhbWUuYXNjZW5zaW9uTW9kZXNbIiArDQogICAgICAgICAgaSArDQogICAgICAgICAgJ10uZGVzYzsiJyArDQogICAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgfQ0KICAgICAgR2FtZS5Qcm9tcHQoDQogICAgICAgICI8aWQgUGlja0NoYWxsZW5nZU1vZGU+PGgzPiIgKw0KICAgICAgICAgIGxvYygiU2VsZWN0IGEgY2hhbGxlbmdlIG1vZGUiKSArDQogICAgICAgICAgIjwvaDM+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjxkaXYgY2xhc3M9ImNyYXRlQm94Ij4nICsNCiAgICAgICAgICBzdHIgKw0KICAgICAgICAgICc8L2Rpdj48aDQgaWQ9ImNoYWxsZW5nZVNlbGVjdGVkTmFtZSI+JyArDQogICAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLm5leHRBc2NlbnNpb25Nb2RlXS5kbmFtZSArDQogICAgICAgICAgJzwvaDQ+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBpZD0iY2hhbGxlbmdlU2VsZWN0ZWREZXNjIiBzdHlsZT0ibWluLWhlaWdodDoxMjhweDsiPicgKw0KICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZXNbR2FtZS5uZXh0QXNjZW5zaW9uTW9kZV0uZGVzYyArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicsDQogICAgICAgIFsNCiAgICAgICAgICBbDQogICAgICAgICAgICBsb2MoIkNvbmZpcm0iKSwNCiAgICAgICAgICAgICJHYW1lLlVwZGF0ZUFzY2Vuc2lvbk1vZGVQcm9tcHQoKTtHYW1lLkNsb3NlUHJvbXB0KCk7IiwNCiAgICAgICAgICBdLA0KICAgICAgICBdLA0KICAgICAgICAwLA0KICAgICAgICAid2lkZVByb21wdCINCiAgICAgICk7DQogICAgfTsNCg0KICAgIGwoImFzY2VuZE92ZXJsYXkiKS5pbm5lckhUTUwgPQ0KICAgICAgJzxkaXYgaWQ9ImFzY2VuZEJveCI+JyArDQogICAgICAnPGRpdiBpZD0iYXNjZW5kRGF0YTEiIGNsYXNzPSJhc2NlbmREYXRhIHNtYWxsRnJhbWVkIHByb21wdCIgc3R5bGU9Im1hcmdpbi10b3A6OHB4OyI+PGgzIGlkPSJhc2NlbmRQcmVzdGlnZSI+PC9oMz48L2Rpdj4nICsNCiAgICAgICc8ZGl2IGlkPSJhc2NlbmREYXRhMiIgY2xhc3M9ImFzY2VuZERhdGEgc21hbGxGcmFtZWQgcHJvbXB0Ij48aDMgaWQ9ImFzY2VuZEhDcyI+PC9oMz48L2Rpdj4nICsNCiAgICAgICc8YSBpZD0iYXNjZW5kQnV0dG9uIiBjbGFzcz0ib3B0aW9uIGZyYW1lZCBsYXJnZSByZWQiICcgKw0KICAgICAgR2FtZS5nZXRUb29sdGlwKA0KICAgICAgICAnPGRpdiBzdHlsZT0ibWluLXdpZHRoOjMwMHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxMXB4O3BhZGRpbmc6OHB4OyIgaWQ9InRvb2x0aXBSZWluY2FybmF0ZSI+JyArDQogICAgICAgICAgbG9jKCJDbGljayB0aGlzIG9uY2UgeW91J3ZlIGJvdWdodDxicj5ldmVyeXRoaW5nIHlvdSBuZWVkISIpICsNCiAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgImJvdHRvbS1yaWdodCINCiAgICAgICkgKw0KICAgICAgJyBzdHlsZT0iZm9udC1zaXplOjE2cHg7bWFyZ2luLXRvcDowcHg7Ij48c3BhbiBjbGFzcz0iZmFuY3lUZXh0IiBzdHlsZT0iZm9udC1zaXplOjIwcHg7Ij4nICsNCiAgICAgIGxvYygiUmVpbmNhcm5hdGUiKSArDQogICAgICAiPC9zcGFuPjwvYT4iICsNCiAgICAgICc8ZGl2IGlkPSJhc2NlbmRNb2RlQnV0dG9uIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MzRweDtib3R0b206MjVweDtkaXNwbGF5Om5vbmU7Ij48L2Rpdj4nICsNCiAgICAgICc8aW5wdXQgdHlwZT0idGV4dCIgc3R5bGU9ImRpc3BsYXk6YmxvY2s7IiBpZD0idXBncmFkZVBvc2l0aW9ucyIvPjwvZGl2PicgKw0KICAgICAgJzxkaXYgaWQ9ImFzY2VuZEluZm8iPjxkaXYgY2xhc3M9ImFzY2VuZERhdGEgc21hbGxGcmFtZWQiIHN0eWxlPSJtYXJnaW4tdG9wOjIycHg7d2lkdGg6NzUlO2ZvbnQtc2l6ZToxMXB4OyI+JyArDQogICAgICBsb2MoDQogICAgICAgICJZb3UgYXJlIGFzY2VuZGluZy48YnI+RHJhZyB0aGUgc2NyZWVuIGFyb3VuZDxicj5vciB1c2UgYXJyb3cga2V5cyE8YnI+V2hlbiB5b3UncmUgcmVhZHksPGJyPmNsaWNrIFJlaW5jYXJuYXRlLiINCiAgICAgICkgKw0KICAgICAgIjwvZGl2PjwvZGl2PiI7DQoNCiAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICBsKCJhc2NlbmREYXRhMSIpLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MzAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7cGFkZGluZzo4cHg7IiBpZD0idG9vbHRpcEFzY2VuZERhdGExIj4oPGI+JyArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5oZWF2ZW5seUNoaXBzKSArDQogICAgICAgICAgJzwvYj4pPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgbG9jKA0KICAgICAgICAgICAgIkVhY2ggcHJlc3RpZ2UgbGV2ZWwgZ3JhbnRzIHlvdSBhIHBlcm1hbmVudCA8Yj4rJTElIENwUzwvYj4uPGJyPlRoZSBtb3JlIGxldmVscyB5b3UgaGF2ZSwgdGhlIG1vcmUgY29va2llcyB0aGV5IHJlcXVpcmUuIiwNCiAgICAgICAgICAgIDENCiAgICAgICAgICApICsNCiAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICApOw0KICAgICAgfSwNCiAgICAgICJib3R0b20tcmlnaHQiDQogICAgKTsNCiAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICBsKCJhc2NlbmREYXRhMiIpLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MzAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7cGFkZGluZzo4cHg7IiBpZD0idG9vbHRpcEFzY2VuZERhdGEyIj4oPGI+JyArDQogICAgICAgICAgbG9jKCIlMSBoZWF2ZW5seSBjaGlwIiwgTEJlYXV0aWZ5KEdhbWUuaGVhdmVubHlDaGlwcykpICsNCiAgICAgICAgICAnPC9iPik8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiSGVhdmVubHkgY2hpcHMgYXJlIHVzZWQgdG8gYnV5IGhlYXZlbmx5IHVwZ3JhZGVzLjxicj5Zb3UgZ2FpbiA8Yj4xIGNoaXA8L2I+IGV2ZXJ5IHRpbWUgeW91IGdhaW4gYSBwcmVzdGlnZSBsZXZlbC4iDQogICAgICAgICAgKSArDQogICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgKTsNCiAgICAgIH0sDQogICAgICAiYm90dG9tLXJpZ2h0Ig0KICAgICk7DQoNCiAgICBHYW1lLlVwZGF0ZUFzY2Vuc2lvbk1vZGVQcm9tcHQoKTsNCg0KICAgIEFkZEV2ZW50KGwoImFzY2VuZEJ1dHRvbiIpLCAiY2xpY2siLCBmdW5jdGlvbiAoKSB7DQogICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgR2FtZS5SZWluY2FybmF0ZSgpOw0KICAgIH0pOw0KDQogICAgR2FtZS5hc2NlbmRsID0gbCgiYXNjZW5kIik7DQogICAgR2FtZS5hc2NlbmRDb250ZW50bCA9IGwoImFzY2VuZENvbnRlbnQiKTsNCiAgICBHYW1lLmFzY2VuZFpvb21hYmxlbCA9IGwoImFzY2VuZFpvb21hYmxlIik7DQogICAgR2FtZS5hc2NlbmRVcGdyYWRlc2wgPSBsKCJhc2NlbmRVcGdyYWRlcyIpOw0KICAgIEdhbWUuT25Bc2NlbmQgPSAwOw0KICAgIEdhbWUuQXNjZW5kVGltZXIgPSAwOyAvL2hvdyBmYXIgd2UgYXJlIGludG8gdGhlIGFzY2VuZCBhbmltYXRpb24NCiAgICBHYW1lLkFzY2VuZER1cmF0aW9uID0gR2FtZS5mcHMgKiA1OyAvL2hvdyBsb25nIHRoZSBhc2NlbmQgYW5pbWF0aW9uIGlzDQogICAgR2FtZS5Bc2NlbmRCcmVha3BvaW50ID0gR2FtZS5Bc2NlbmREdXJhdGlvbiAqIDAuNTsgLy9hdCB3aGljaCBwb2ludCB0aGUgY29va2llIGV4cGxvZGVzIGR1cmluZyB0aGUgYXNjZW5kIGFuaW1hdGlvbg0KICAgIEdhbWUuVXBkYXRlQXNjZW5kSW50cm8gPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA9PSAxKSBQbGF5U291bmQoInNuZC9jaGFyZ2luZy5tcDMiKTsNCiAgICAgIGlmIChHYW1lLkFzY2VuZFRpbWVyID09IE1hdGguZmxvb3IoR2FtZS5Bc2NlbmRCcmVha3BvaW50KSkNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvdGh1ZC5tcDMiKTsNCiAgICAgIEdhbWUuQXNjZW5kVGltZXIrKzsNCiAgICAgIGlmIChHYW1lLkFzY2VuZFRpbWVyID4gR2FtZS5Bc2NlbmREdXJhdGlvbikgew0KICAgICAgICAvL2VuZCBhbmltYXRpb24gYW5kIGxhdW5jaCBhc2NlbmQgc2NyZWVuDQogICAgICAgIFBsYXlDdWUoImFzY2VuZCIpOw0KICAgICAgICBQbGF5TXVzaWNTb3VuZCgic25kL2N5bWJhbFJldi5tcDMiKTsNCiAgICAgICAgaWYgKCFBcHAgfHwgR2FtZS52b2x1bWVNdXNpYyA9PSAwKSBQbGF5U291bmQoInNuZC9jaG9pci5tcDMiKTsNCiAgICAgICAgR2FtZS5FYXJuSGVhdmVubHlDaGlwcyhHYW1lLmNvb2tpZXNFYXJuZWQpOw0KICAgICAgICBHYW1lLkFzY2VuZFRpbWVyID0gMDsNCiAgICAgICAgR2FtZS5PbkFzY2VuZCA9IDE7DQogICAgICAgIEdhbWUucmVtb3ZlQ2xhc3MoImFzY2VuZEludHJvIik7DQogICAgICAgIEdhbWUuYWRkQ2xhc3MoImFzY2VuZGluZyIpOw0KICAgICAgICBHYW1lLkJ1aWxkQXNjZW5kVHJlZSgpOw0KICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNEaXNwbGF5ZWQgPSBHYW1lLmhlYXZlbmx5Q2hpcHM7DQogICAgICAgIEdhbWUubmV4dEFzY2Vuc2lvbk1vZGUgPSAwOw0KICAgICAgICBHYW1lLmFzY2Vuc2lvbk1vZGUgPSAwOw0KICAgICAgICBHYW1lLlVwZGF0ZUFzY2Vuc2lvbk1vZGVQcm9tcHQoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuUmVpbmNhcm5hdGVUaW1lciA9IDA7IC8vaG93IGZhciB3ZSBhcmUgaW50byB0aGUgcmVpbmNhcm5hdGlvbiBhbmltYXRpb24NCiAgICBHYW1lLlJlaW5jYXJuYXRlRHVyYXRpb24gPSBHYW1lLmZwcyAqIDE7IC8vaG93IGxvbmcgdGhlIHJlaW5jYXJuYXRpb24gYW5pbWF0aW9uIGlzDQogICAgR2FtZS5VcGRhdGVSZWluY2FybmF0ZUludHJvID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEdhbWUuUmVpbmNhcm5hdGVUaW1lciA9PSAxKQ0KICAgICAgICBQbGF5U291bmQoInNuZC9wb3AiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyArIDEpICsgIi5tcDMiLCAwLjc1KTsNCiAgICAgIEdhbWUuUmVpbmNhcm5hdGVUaW1lcisrOw0KICAgICAgaWYgKEdhbWUuUmVpbmNhcm5hdGVUaW1lciA+IEdhbWUuUmVpbmNhcm5hdGVEdXJhdGlvbikgew0KICAgICAgICAvL2VuZCBhbmltYXRpb24gYW5kIGxhdW5jaCByZWd1bGFyIGdhbWUNCiAgICAgICAgR2FtZS5SZWluY2FybmF0ZVRpbWVyID0gMDsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygicmVpbmNhcm5hdGluZyIpOw0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5SZWluY2FybmF0ZSA9IGZ1bmN0aW9uIChieXBhc3MpIHsNCiAgICAgIGlmICghYnlwYXNzKQ0KICAgICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgICAiPGlkIFJlaW5jYXJuYXRlPjxoMz4iICsNCiAgICAgICAgICAgIGxvYygiUmVpbmNhcm5hdGUiKSArDQogICAgICAgICAgICAnPC9oMz48ZGl2IGNsYXNzPSJibG9jayI+JyArDQogICAgICAgICAgICBsb2MoIkFyZSB5b3UgcmVhZHkgdG8gcmV0dXJuIHRvIHRoZSBtb3J0YWwgd29ybGQ/IikgKw0KICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgICAgW1tsb2MoIlllcyIpLCAiR2FtZS5DbG9zZVByb21wdCgpO0dhbWUuUmVpbmNhcm5hdGUoMSk7Il0sIGxvYygiTm8iKV0NCiAgICAgICAgKTsNCiAgICAgIGVsc2Ugew0KICAgICAgICBHYW1lLmFzY2VuZFVwZ3JhZGVzbC5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2RlID0gR2FtZS5uZXh0QXNjZW5zaW9uTW9kZTsNCiAgICAgICAgR2FtZS5uZXh0QXNjZW5zaW9uTW9kZSA9IDA7DQogICAgICAgIEdhbWUuUmVzZXQoKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzQWNoaWV2KCJSZWJpcnRoIikpIHsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgiUmVpbmNhcm5hdGVkIiwgbG9jKCJIZWxsbywgY29va2llcyEiKSwgWzEwLCAwXSwgNCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUucmVzZXRzID49IDEwMDApIEdhbWUuV2luKCJFbmRsZXNzIGN5Y2xlIik7DQogICAgICAgIGlmIChHYW1lLnJlc2V0cyA+PSAxMDApIEdhbWUuV2luKCJSZWluY2FybmF0aW9uIik7DQogICAgICAgIGlmIChHYW1lLnJlc2V0cyA+PSAxMCkgR2FtZS5XaW4oIlJlc3VycmVjdGlvbiIpOw0KICAgICAgICBpZiAoR2FtZS5yZXNldHMgPj0gMSkgR2FtZS5XaW4oIlJlYmlydGgiKTsNCg0KICAgICAgICB2YXIgcHJlc3RpZ2VVcGdyYWRlc093bmVkID0gMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzKSB7DQogICAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNbaV0uYm91Z2h0ICYmIEdhbWUuVXBncmFkZXNbaV0ucG9vbCA9PSAicHJlc3RpZ2UiKQ0KICAgICAgICAgICAgcHJlc3RpZ2VVcGdyYWRlc093bmVkKys7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHByZXN0aWdlVXBncmFkZXNPd25lZCA+PSAxMDApIEdhbWUuV2luKCJBbGwgdGhlIHN0YXJzIGluIGhlYXZlbiIpOw0KDQogICAgICAgIEdhbWUucmVtb3ZlQ2xhc3MoImFzY2VuZGluZyIpOw0KICAgICAgICBHYW1lLk9uQXNjZW5kID0gMDsNCiAgICAgICAgLy90cmlnZ2VyIHRoZSByZWluY2FybmF0ZSBhbmltYXRpb24NCiAgICAgICAgR2FtZS5SZWluY2FybmF0ZVRpbWVyID0gMTsNCiAgICAgICAgR2FtZS5hZGRDbGFzcygicmVpbmNhcm5hdGluZyIpOw0KICAgICAgICBHYW1lLkJpZ0Nvb2tpZVNpemUgPSAwOw0KDQogICAgICAgIEdhbWUucnVuTW9kSG9vaygicmVpbmNhcm5hdGUiKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuQXNjZW5kID0gZnVuY3Rpb24gKGJ5cGFzcykgew0KICAgICAgaWYgKCFieXBhc3MpDQogICAgICAgIEdhbWUuUHJvbXB0KA0KICAgICAgICAgICI8aWQgQXNjZW5kPjxoMz4iICsNCiAgICAgICAgICAgIGxvYygiQXNjZW5kIikgKw0KICAgICAgICAgICAgJzwvaDM+PGRpdiBjbGFzcz0iYmxvY2siPicgKw0KICAgICAgICAgICAgdGlueUljb24oWzE5LCA3XSkgKw0KICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAnRG8geW91IFJFQUxMWSB3YW50IHRvIGFzY2VuZD88ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5Zb3Ugd2lsbCBsb3NlIHlvdXIgcHJvZ3Jlc3MgYW5kIHN0YXJ0IG92ZXIgZnJvbSBzY3JhdGNoLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PkFsbCB5b3VyIGNvb2tpZXMgd2lsbCBiZSBjb252ZXJ0ZWQgaW50byBwcmVzdGlnZSBhbmQgaGVhdmVubHkgY2hpcHMuJw0KICAgICAgICAgICAgKSArDQogICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgICAoR2FtZS5jYW5MdW1wcygpDQogICAgICAgICAgICAgID8gbG9jKA0KICAgICAgICAgICAgICAgICAgIllvdSB3aWxsIGtlZXAgeW91ciBhY2hpZXZlbWVudHMsIGJ1aWxkaW5nIGxldmVscyBhbmQgc3VnYXIgbHVtcHMuIg0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgOiBsb2MoIllvdSB3aWxsIGtlZXAgeW91ciBhY2hpZXZlbWVudHMuIikpICsNCiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJvcHRpb25Cb3giPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgc3R5bGU9Im1hcmdpbjoxNnB4O3BhZGRpbmc6OHB4IDE2cHg7YW5pbWF0aW9uOnJhaW5ib3dDeWNsZSA1cyBpbmZpbml0ZSBlYXNlLWluLW91dCxwdWNrZXIgMC4ycyBlYXNlLW91dDtib3gtc2hhZG93OjBweCAwcHggMHB4IDFweCAjMDAwLDBweCAwcHggMXB4IDJweCBjdXJyZW50Y29sb3I7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLHRyYW5zcGFyZW50IDAlLGN1cnJlbnRDb2xvciA1MDAlKTt3aWR0aDphdXRvO3RleHQtYWxpZ246Y2VudGVyOyIgJyArDQogICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICc9IlBsYXlTb3VuZChcJ3NuZC90aWNrLm1wM1wnKTtHYW1lLkNsb3NlUHJvbXB0KCk7R2FtZS5Bc2NlbmQoMSk7IiBpZD0icHJvbXB0T3B0aW9uMCI+JyArDQogICAgICAgICAgICBsb2MoIkFzY2VuZCIpICsNCiAgICAgICAgICAgICI8L2E+PC9kaXY+PC9kaXY+IiwNCiAgICAgICAgICBbDQogICAgICAgICAgICBbDQogICAgICAgICAgICAgIGxvYygiWWVzIiksDQogICAgICAgICAgICAgICJHYW1lLkNsb3NlUHJvbXB0KCk7R2FtZS5Bc2NlbmQoMSk7IiwNCiAgICAgICAgICAgICAgImZsb2F0OmxlZnQ7ZGlzcGxheTpub25lOyIsDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgW2xvYygiQ2FuY2VsIiksIDAsICJmbG9hdDpyaWdodCJdLA0KICAgICAgICAgIF0NCiAgICAgICAgKTsNCiAgICAgIGVsc2Ugew0KICAgICAgICBHYW1lLk5vdGlmeShsb2MoIkFzY2VuZGluZyIpLCBsb2MoIlNvIGxvbmcsIGNvb2tpZXMuIiksIFsyMCwgN10sIDQpOw0KICAgICAgICBHYW1lLk9uQXNjZW5kID0gMDsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygiYXNjZW5kaW5nIik7DQogICAgICAgIEdhbWUuYWRkQ2xhc3MoImFzY2VuZEludHJvIik7DQogICAgICAgIC8vdHJpZ2dlciB0aGUgYXNjZW5kIGFuaW1hdGlvbg0KICAgICAgICBHYW1lLkFzY2VuZFRpbWVyID0gMTsNCiAgICAgICAgR2FtZS5raWxsU2hpbW1lcnMoKTsNCiAgICAgICAgbCgidG9nZ2xlQm94Iikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgbCgidG9nZ2xlQm94IikuaW5uZXJIVE1MID0gIiI7DQogICAgICAgIEdhbWUuY2hvaWNlU2VsZWN0b3JPbiA9IC0xOw0KICAgICAgICBHYW1lLlRvZ2dsZVNwZWNpYWxNZW51KDApOw0KICAgICAgICBHYW1lLkFzY2VuZE9mZlggPSAwOw0KICAgICAgICBHYW1lLkFzY2VuZE9mZlkgPSAwOw0KICAgICAgICBHYW1lLkFzY2VuZE9mZlhUID0gMDsNCiAgICAgICAgR2FtZS5Bc2NlbmRPZmZZVCA9IDA7DQogICAgICAgIEdhbWUuQXNjZW5kWm9vbVQgPSAxOw0KICAgICAgICBHYW1lLkFzY2VuZFpvb20gPSAwLjI7DQoNCiAgICAgICAgR2FtZS5qdWtlYm94LnJlc2V0KCk7DQogICAgICAgIFBsYXlDdWUoInByZWFzY2VuZCIpOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLkRlYnVnZ2luZ1ByZXN0aWdlID0gMDsNCiAgICBHYW1lLkFzY2VuZERyYWdYID0gMDsNCiAgICBHYW1lLkFzY2VuZERyYWdZID0gMDsNCiAgICBHYW1lLkFzY2VuZE9mZlggPSAwOw0KICAgIEdhbWUuQXNjZW5kT2ZmWSA9IDA7DQogICAgR2FtZS5Bc2NlbmRab29tID0gMTsNCiAgICBHYW1lLkFzY2VuZE9mZlhUID0gMDsNCiAgICBHYW1lLkFzY2VuZE9mZllUID0gMDsNCiAgICBHYW1lLkFzY2VuZFpvb21UID0gMTsNCiAgICBHYW1lLkFzY2VuZERyYWdnaW5nID0gMDsNCiAgICBHYW1lLkFzY2VuZEdyaWRTbmFwID0gMjQ7DQogICAgR2FtZS5oZWF2ZW5seUJvdW5kcyA9IHsgbGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgYm90dG9tOiAwIH07DQogICAgR2FtZS5VcGRhdGVBc2NlbmQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5rZXlzWzM3XSkgR2FtZS5Bc2NlbmRPZmZYVCArPSAxNiAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICBpZiAoR2FtZS5rZXlzWzM4XSkgR2FtZS5Bc2NlbmRPZmZZVCArPSAxNiAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICBpZiAoR2FtZS5rZXlzWzM5XSkgR2FtZS5Bc2NlbmRPZmZYVCAtPSAxNiAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICBpZiAoR2FtZS5rZXlzWzQwXSkgR2FtZS5Bc2NlbmRPZmZZVCAtPSAxNiAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQoNCiAgICAgIGlmIChHYW1lLkFzY2VuZE9mZlhUID4gLUdhbWUuaGVhdmVubHlCb3VuZHMubGVmdCkNCiAgICAgICAgR2FtZS5Bc2NlbmRPZmZYVCA9IC1HYW1lLmhlYXZlbmx5Qm91bmRzLmxlZnQ7DQogICAgICBpZiAoR2FtZS5Bc2NlbmRPZmZYVCA8IC1HYW1lLmhlYXZlbmx5Qm91bmRzLnJpZ2h0KQ0KICAgICAgICBHYW1lLkFzY2VuZE9mZlhUID0gLUdhbWUuaGVhdmVubHlCb3VuZHMucmlnaHQ7DQogICAgICBpZiAoR2FtZS5Bc2NlbmRPZmZZVCA+IC1HYW1lLmhlYXZlbmx5Qm91bmRzLnRvcCkNCiAgICAgICAgR2FtZS5Bc2NlbmRPZmZZVCA9IC1HYW1lLmhlYXZlbmx5Qm91bmRzLnRvcDsNCiAgICAgIGlmIChHYW1lLkFzY2VuZE9mZllUIDwgLUdhbWUuaGVhdmVubHlCb3VuZHMuYm90dG9tKQ0KICAgICAgICBHYW1lLkFzY2VuZE9mZllUID0gLUdhbWUuaGVhdmVubHlCb3VuZHMuYm90dG9tOw0KICAgICAgR2FtZS5Bc2NlbmRPZmZYICs9IChHYW1lLkFzY2VuZE9mZlhUIC0gR2FtZS5Bc2NlbmRPZmZYKSAqIDAuNTsNCiAgICAgIEdhbWUuQXNjZW5kT2ZmWSArPSAoR2FtZS5Bc2NlbmRPZmZZVCAtIEdhbWUuQXNjZW5kT2ZmWSkgKiAwLjU7DQogICAgICBHYW1lLkFzY2VuZFpvb20gKz0gKEdhbWUuQXNjZW5kWm9vbVQgLSBHYW1lLkFzY2VuZFpvb20pICogMC4yNTsNCiAgICAgIGlmIChNYXRoLmFicyhHYW1lLkFzY2VuZFpvb21UIC0gR2FtZS5Bc2NlbmRab29tKSA8IDAuMDA1KQ0KICAgICAgICBHYW1lLkFzY2VuZFpvb20gPSBHYW1lLkFzY2VuZFpvb21UOw0KDQogICAgICBpZiAoR2FtZS5tb3VzZURvd24gJiYgIUdhbWUucHJvbXB0T24pIHsNCiAgICAgICAgaWYgKCFHYW1lLkFzY2VuZERyYWdnaW5nKSB7DQogICAgICAgICAgR2FtZS5Bc2NlbmREcmFnWCA9IEdhbWUubW91c2VYOw0KICAgICAgICAgIEdhbWUuQXNjZW5kRHJhZ1kgPSBHYW1lLm1vdXNlWTsNCiAgICAgICAgfQ0KICAgICAgICBHYW1lLkFzY2VuZERyYWdnaW5nID0gMTsNCg0KICAgICAgICBpZiAoR2FtZS5EZWJ1Z2dpbmdQcmVzdGlnZSkgew0KICAgICAgICAgIGlmIChHYW1lLlNlbGVjdGVkSGVhdmVubHlVcGdyYWRlKSB7DQogICAgICAgICAgICBHYW1lLnRvb2x0aXAuaGlkZSgpOw0KICAgICAgICAgICAgLy9kcmFnIHVwZ3JhZGVzIGFyb3VuZA0KICAgICAgICAgICAgdmFyIG1lID0gR2FtZS5TZWxlY3RlZEhlYXZlbmx5VXBncmFkZTsNCiAgICAgICAgICAgIG1lLnBvc1ggKz0NCiAgICAgICAgICAgICAgKEdhbWUubW91c2VYIC0gR2FtZS5Bc2NlbmREcmFnWCkgKiAoMSAvIEdhbWUuQXNjZW5kWm9vbVQpOw0KICAgICAgICAgICAgbWUucG9zWSArPQ0KICAgICAgICAgICAgICAoR2FtZS5tb3VzZVkgLSBHYW1lLkFzY2VuZERyYWdZKSAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICAgICAgICB2YXIgcG9zWCA9IG1lLnBvc1g7IC8vTWF0aC5yb3VuZChtZS5wb3NYL0dhbWUuQXNjZW5kR3JpZFNuYXApKkdhbWUuQXNjZW5kR3JpZFNuYXA7DQogICAgICAgICAgICB2YXIgcG9zWSA9IG1lLnBvc1k7IC8vTWF0aC5yb3VuZChtZS5wb3NZL0dhbWUuQXNjZW5kR3JpZFNuYXApKkdhbWUuQXNjZW5kR3JpZFNuYXA7DQogICAgICAgICAgICBsKCJoZWF2ZW5seVVwZ3JhZGUiICsgbWUuaWQpLnN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKHBvc1gpICsgInB4IjsNCiAgICAgICAgICAgIGwoImhlYXZlbmx5VXBncmFkZSIgKyBtZS5pZCkuc3R5bGUudG9wID0gTWF0aC5mbG9vcihwb3NZKSArICJweCI7DQogICAgICAgICAgICBmb3IgKHZhciBpaSBpbiBtZS5wYXJlbnRzKSB7DQogICAgICAgICAgICAgIHZhciBvcmlnWCA9IDA7DQogICAgICAgICAgICAgIHZhciBvcmlnWSA9IDA7DQogICAgICAgICAgICAgIHZhciB0YXJnWCA9IG1lLnBvc1ggKyAyODsNCiAgICAgICAgICAgICAgdmFyIHRhcmdZID0gbWUucG9zWSArIDI4Ow0KICAgICAgICAgICAgICBpZiAobWUucGFyZW50c1tpaV0gIT0gLTEpIHsNCiAgICAgICAgICAgICAgICBvcmlnWCA9IG1lLnBhcmVudHNbaWldLnBvc1ggKyAyODsNCiAgICAgICAgICAgICAgICBvcmlnWSA9IG1lLnBhcmVudHNbaWldLnBvc1kgKyAyODsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB2YXIgcm90ID0NCiAgICAgICAgICAgICAgICAtKE1hdGguYXRhbigodGFyZ1kgLSBvcmlnWSkgLyAob3JpZ1ggLSB0YXJnWCkpIC8gTWF0aC5QSSkgKiAxODA7DQogICAgICAgICAgICAgIGlmICh0YXJnWCA8PSBvcmlnWCkgcm90ICs9IDE4MDsNCiAgICAgICAgICAgICAgdmFyIGRpc3QgPSBNYXRoLmZsb29yKA0KICAgICAgICAgICAgICAgIE1hdGguc3FydCgNCiAgICAgICAgICAgICAgICAgICh0YXJnWCAtIG9yaWdYKSAqICh0YXJnWCAtIG9yaWdYKSArDQogICAgICAgICAgICAgICAgICAgICh0YXJnWSAtIG9yaWdZKSAqICh0YXJnWSAtIG9yaWdZKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICBsKCJoZWF2ZW5seUxpbmsiICsgbWUuaWQgKyAiLSIgKyBpaSkuc3R5bGUgPQ0KICAgICAgICAgICAgICAgICJ3aWR0aDoiICsNCiAgICAgICAgICAgICAgICBkaXN0ICsNCiAgICAgICAgICAgICAgICAicHg7dHJhbnNmb3JtOnJvdGF0ZSgiICsNCiAgICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAgICJkZWcpO2xlZnQ6IiArDQogICAgICAgICAgICAgICAgb3JpZ1ggKw0KICAgICAgICAgICAgICAgICJweDt0b3A6IiArDQogICAgICAgICAgICAgICAgb3JpZ1kgKw0KICAgICAgICAgICAgICAgICJweDsiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoIUdhbWUuU2VsZWN0ZWRIZWF2ZW5seVVwZ3JhZGUpIHsNCiAgICAgICAgICBHYW1lLkFzY2VuZE9mZlhUICs9DQogICAgICAgICAgICAoR2FtZS5tb3VzZVggLSBHYW1lLkFzY2VuZERyYWdYKSAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICAgICAgR2FtZS5Bc2NlbmRPZmZZVCArPQ0KICAgICAgICAgICAgKEdhbWUubW91c2VZIC0gR2FtZS5Bc2NlbmREcmFnWSkgKiAoMSAvIEdhbWUuQXNjZW5kWm9vbVQpOw0KICAgICAgICB9DQogICAgICAgIEdhbWUuQXNjZW5kRHJhZ1ggPSBHYW1lLm1vdXNlWDsNCiAgICAgICAgR2FtZS5Bc2NlbmREcmFnWSA9IEdhbWUubW91c2VZOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLyppZiAoR2FtZS5TZWxlY3RlZEhlYXZlbmx5VXBncmFkZSkNCgkJCQl7DQoJCQkJCXZhciBtZT1HYW1lLlNlbGVjdGVkSGVhdmVubHlVcGdyYWRlOw0KCQkJCQltZS5wb3NYPU1hdGgucm91bmQobWUucG9zWC9HYW1lLkFzY2VuZEdyaWRTbmFwKSpHYW1lLkFzY2VuZEdyaWRTbmFwOw0KCQkJCQltZS5wb3NZPU1hdGgucm91bmQobWUucG9zWS9HYW1lLkFzY2VuZEdyaWRTbmFwKSpHYW1lLkFzY2VuZEdyaWRTbmFwOw0KCQkJCQlsKCdoZWF2ZW5seVVwZ3JhZGUnK21lLmlkKS5zdHlsZS5sZWZ0PW1lLnBvc1grJ3B4JzsNCgkJCQkJbCgnaGVhdmVubHlVcGdyYWRlJyttZS5pZCkuc3R5bGUudG9wPW1lLnBvc1krJ3B4JzsNCgkJCQl9Ki8NCiAgICAgICAgR2FtZS5Bc2NlbmREcmFnZ2luZyA9IDA7DQogICAgICAgIEdhbWUuU2VsZWN0ZWRIZWF2ZW5seVVwZ3JhZGUgPSAwOw0KICAgICAgfQ0KICAgICAgaWYgKEdhbWUuQ2xpY2sgfHwgR2FtZS5wcm9tcHRPbikgew0KICAgICAgICBHYW1lLkFzY2VuZERyYWdnaW5nID0gMDsNCiAgICAgIH0NCg0KICAgICAgLy9HYW1lLmFzY2VuZGwuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uPU1hdGguZmxvb3IoR2FtZS5Bc2NlbmRPZmZYLzIpKydweCAnK01hdGguZmxvb3IoR2FtZS5Bc2NlbmRPZmZZLzIpKydweCc7DQogICAgICAvL0dhbWUuYXNjZW5kbC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb249TWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgvMikrJ3B4ICcrTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlkvMikrJ3B4LCcrTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgvNCkrJ3B4ICcrTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlkvNCkrJ3B4JzsNCiAgICAgIC8vR2FtZS5hc2NlbmRDb250ZW50bC5zdHlsZS5sZWZ0PU1hdGguZmxvb3IoR2FtZS5Bc2NlbmRPZmZYKSsncHgnOw0KICAgICAgLy9HYW1lLmFzY2VuZENvbnRlbnRsLnN0eWxlLnRvcD1NYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkrJ3B4JzsNCiAgICAgIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUud2Via2l0VHJhbnNmb3JtID0NCiAgICAgICAgInRyYW5zbGF0ZSgiICsNCiAgICAgICAgTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgpICsNCiAgICAgICAgInB4LCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkgKw0KICAgICAgICAicHgpIjsNCiAgICAgIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUubXNUcmFuc2Zvcm0gPQ0KICAgICAgICAidHJhbnNsYXRlKCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWCkgKw0KICAgICAgICAicHgsIiArDQogICAgICAgIE1hdGguZmxvb3IoR2FtZS5Bc2NlbmRPZmZZKSArDQogICAgICAgICJweCkiOw0KICAgICAgR2FtZS5hc2NlbmRDb250ZW50bC5zdHlsZS5vVHJhbnNmb3JtID0NCiAgICAgICAgInRyYW5zbGF0ZSgiICsNCiAgICAgICAgTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgpICsNCiAgICAgICAgInB4LCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkgKw0KICAgICAgICAicHgpIjsNCiAgICAgIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUubW96VHJhbnNmb3JtID0NCiAgICAgICAgInRyYW5zbGF0ZSgiICsNCiAgICAgICAgTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgpICsNCiAgICAgICAgInB4LCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkgKw0KICAgICAgICAicHgpIjsNCiAgICAgIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUudHJhbnNmb3JtID0NCiAgICAgICAgInRyYW5zbGF0ZSgiICsNCiAgICAgICAgTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgpICsNCiAgICAgICAgInB4LCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkgKw0KICAgICAgICAicHgpIjsNCiAgICAgIEdhbWUuYXNjZW5kWm9vbWFibGVsLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9DQogICAgICAgICJzY2FsZSgiICsgR2FtZS5Bc2NlbmRab29tICsgIiwiICsgR2FtZS5Bc2NlbmRab29tICsgIikiOw0KICAgICAgR2FtZS5hc2NlbmRab29tYWJsZWwuc3R5bGUubWFyZ2luTGVmdCA9IEdhbWUud2luZG93VyAvIDIgKyAicHgiOw0KICAgICAgR2FtZS5hc2NlbmRab29tYWJsZWwuc3R5bGUubWFyZ2luVG9wID0gR2FtZS53aW5kb3dIIC8gMiArICJweCI7DQogICAgICBHYW1lLmFzY2VuZFpvb21hYmxlbC5zdHlsZS5tc1RyYW5zZm9ybSA9DQogICAgICAgICJzY2FsZSgiICsgR2FtZS5Bc2NlbmRab29tICsgIiwiICsgR2FtZS5Bc2NlbmRab29tICsgIikiOw0KICAgICAgR2FtZS5hc2NlbmRab29tYWJsZWwuc3R5bGUub1RyYW5zZm9ybSA9DQogICAgICAgICJzY2FsZSgiICsgR2FtZS5Bc2NlbmRab29tICsgIiwiICsgR2FtZS5Bc2NlbmRab29tICsgIikiOw0KICAgICAgR2FtZS5hc2NlbmRab29tYWJsZWwuc3R5bGUubW96VHJhbnNmb3JtID0NCiAgICAgICAgInNjYWxlKCIgKyBHYW1lLkFzY2VuZFpvb20gKyAiLCIgKyBHYW1lLkFzY2VuZFpvb20gKyAiKSI7DQogICAgICBHYW1lLmFzY2VuZFpvb21hYmxlbC5zdHlsZS50cmFuc2Zvcm0gPQ0KICAgICAgICAic2NhbGUoIiArIEdhbWUuQXNjZW5kWm9vbSArICIsIiArIEdhbWUuQXNjZW5kWm9vbSArICIpIjsNCg0KICAgICAgLy9pZiAoR2FtZS5TY3JvbGwhPTApIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUudHJhbnNmb3JtT3JpZ2luPU1hdGguZmxvb3IoR2FtZS53aW5kb3dXLzItR2FtZS5tb3VzZVgpKydweCAnK01hdGguZmxvb3IoR2FtZS53aW5kb3dILzItR2FtZS5tb3VzZVkpKydweCc7DQogICAgICBpZiAoR2FtZS5TY3JvbGwgPCAwICYmICFHYW1lLnByb21wdE9uKSB7DQogICAgICAgIEdhbWUuQXNjZW5kWm9vbVQgPSAwLjU7DQogICAgICB9DQogICAgICBpZiAoR2FtZS5TY3JvbGwgPiAwICYmICFHYW1lLnByb21wdE9uKSB7DQogICAgICAgIEdhbWUuQXNjZW5kWm9vbVQgPSAxOw0KICAgICAgfQ0KDQogICAgICBpZiAoR2FtZS5UICUgMiA9PSAwKSB7DQogICAgICAgIGwoImFzY2VuZFByZXN0aWdlIikuaW5uZXJIVE1MID0NCiAgICAgICAgICBsb2MoIlByZXN0aWdlIGxldmVsOiIpICsgIjxicj4iICsgU2ltcGxlQmVhdXRpZnkoR2FtZS5wcmVzdGlnZSk7DQogICAgICAgIGwoImFzY2VuZEhDcyIpLmlubmVySFRNTCA9DQogICAgICAgICAgbG9jKCJIZWF2ZW5seSBjaGlwczoiKSArDQogICAgICAgICAgJzxicj48c3BhbiBjbGFzcz0icHJpY2UgaGVhdmVubHkiPicgKw0KICAgICAgICAgIFNpbXBsZUJlYXV0aWZ5KE1hdGgucm91bmQoR2FtZS5oZWF2ZW5seUNoaXBzRGlzcGxheWVkKSkgKw0KICAgICAgICAgICI8L3NwYW4+IjsNCiAgICAgICAgaWYgKEdhbWUucHJlc3RpZ2UgPiAwKSBsKCJhc2NlbmRNb2RlQnV0dG9uIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgIGVsc2UgbCgiYXNjZW5kTW9kZUJ1dHRvbiIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICB9DQogICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNEaXNwbGF5ZWQgKz0NCiAgICAgICAgKEdhbWUuaGVhdmVubHlDaGlwcyAtIEdhbWUuaGVhdmVubHlDaGlwc0Rpc3BsYXllZCkgKiAwLjQ7DQoNCiAgICAgIGlmIChHYW1lLkRlYnVnZ2luZ1ByZXN0aWdlICYmIEdhbWUuVCAlIDEwID09IDApIHsNCiAgICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuUHJlc3RpZ2VVcGdyYWRlcykgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuUHJlc3RpZ2VVcGdyYWRlc1tpXTsNCiAgICAgICAgICBpZiAobWUucGxhY2VkQnlDb2RlKSBjb250aW51ZTsNCiAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgIG1lLmlkICsNCiAgICAgICAgICAgICI6WyIgKw0KICAgICAgICAgICAgTWF0aC5mbG9vcihtZS5wb3NYKSArDQogICAgICAgICAgICAiLCIgKw0KICAgICAgICAgICAgTWF0aC5mbG9vcihtZS5wb3NZKSArDQogICAgICAgICAgICAiXSwiOw0KICAgICAgICB9DQogICAgICAgIGwoInVwZ3JhZGVQb3NpdGlvbnMiKS52YWx1ZSA9ICJHYW1lLlVwZ3JhZGVQb3NpdGlvbnM9eyIgKyBzdHIgKyAifTsiOw0KICAgICAgfQ0KICAgICAgLy9pZiAoR2FtZS5UJTU9PTApIEdhbWUuQnVpbGRBc2NlbmRUcmVlKCk7DQogICAgfTsNCiAgICBHYW1lLkFzY2VuZFJlZm9jdXMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLkFzY2VuZE9mZlggPSAwOw0KICAgICAgR2FtZS5Bc2NlbmRPZmZZID0gMDsNCiAgICAgIEdhbWUuYXNjZW5kbC5jbGFzc05hbWUgPSAiIjsNCiAgICB9Ow0KDQogICAgR2FtZS5TZWxlY3RlZEhlYXZlbmx5VXBncmFkZSA9IDA7DQogICAgR2FtZS5QdXJjaGFzZUhlYXZlbmx5VXBncmFkZSA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICAvL2lmIChHYW1lLkhhcygnTmV1cm9tYW5jeScpKSBHYW1lLlVwZ3JhZGVzQnlJZFt3aGF0XS50b2dnbGUoKTsgZWxzZQ0KICAgICAgaWYgKEdhbWUuVXBncmFkZXNCeUlkW3doYXRdLmJ1eSgpKSB7DQogICAgICAgIGlmIChsKCJoZWF2ZW5seVVwZ3JhZGUiICsgd2hhdCkpIHsNCiAgICAgICAgICB2YXIgcmVjdCA9IGwoImhlYXZlbmx5VXBncmFkZSIgKyB3aGF0KS5nZXRCb3VuZHMoKTsNCiAgICAgICAgICBHYW1lLlNwYXJrbGVBdCgNCiAgICAgICAgICAgIChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIsDQogICAgICAgICAgICAocmVjdC50b3AgKyByZWN0LmJvdHRvbSkgLyAyIC0gMjQNCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIC8vR2FtZS5CdWlsZEFzY2VuZFRyZWUoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuQnVpbGRBc2NlbmRUcmVlID0gZnVuY3Rpb24gKGp1c3RCb3VnaHQpIHsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIEdhbWUuaGVhdmVubHlCb3VuZHMgPSB7IGxlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIGJvdHRvbTogMCB9Ow0KDQogICAgICBpZiAoR2FtZS5EZWJ1Z2dpbmdQcmVzdGlnZSkgbCgidXBncmFkZVBvc2l0aW9ucyIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgZWxzZSBsKCJ1cGdyYWRlUG9zaXRpb25zIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCg0KICAgICAgdmFyIHRvUG9wID0gW107DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuUHJlc3RpZ2VVcGdyYWRlcykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLlByZXN0aWdlVXBncmFkZXNbaV07DQogICAgICAgIHZhciBwcmV2Q2FuQmVQdXJjaGFzZWQgPSBtZS5jYW5CZVB1cmNoYXNlZDsNCiAgICAgICAgbWUuY2FuQmVQdXJjaGFzZWQgPSAxOw0KICAgICAgICBpZiAoIW1lLmJvdWdodCAmJiAhR2FtZS5EZWJ1Z2dpbmdQcmVzdGlnZSkgew0KICAgICAgICAgIGlmIChtZS5zaG93SWYgJiYgIW1lLnNob3dJZigpKSBtZS5jYW5CZVB1cmNoYXNlZCA9IDA7DQogICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBmb3IgKHZhciBpaSBpbiBtZS5wYXJlbnRzKSB7DQogICAgICAgICAgICAgIGlmIChtZS5wYXJlbnRzW2lpXSAhPSAtMSAmJiAhbWUucGFyZW50c1tpaV0uYm91Z2h0KQ0KICAgICAgICAgICAgICAgIG1lLmNhbkJlUHVyY2hhc2VkID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKA0KICAgICAgICAgIGp1c3RCb3VnaHQgJiYNCiAgICAgICAgICBtZS5wYXJlbnRzLmluZGV4T2YoanVzdEJvdWdodCkgIT0gLTEgJiYNCiAgICAgICAgICAhcHJldkNhbkJlUHVyY2hhc2VkICYmDQogICAgICAgICAgbWUuY2FuQmVQdXJjaGFzZWQgJiYNCiAgICAgICAgICAhbWUuYm91Z2h0DQogICAgICAgICkNCiAgICAgICAgICB0b1BvcC5wdXNoKG1lKTsNCiAgICAgIH0NCiAgICAgIHRvUG9wLnNvcnQoDQogICAgICAgIChmdW5jdGlvbiAocGFyZW50KSB7DQogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICAgICAgICB2YXIgcm90ID0NCiAgICAgICAgICAgICAgTWF0aC5hdGFuMihhLnBvc1kgLSBwYXJlbnQucG9zWSwgcGFyZW50LnBvc1ggLSBhLnBvc1gpIC0NCiAgICAgICAgICAgICAgTWF0aC5QSSAvIDI7DQogICAgICAgICAgICB2YXIgcm90MiA9DQogICAgICAgICAgICAgIE1hdGguYXRhbjIoYi5wb3NZIC0gcGFyZW50LnBvc1ksIHBhcmVudC5wb3NYIC0gYi5wb3NYKSAtDQogICAgICAgICAgICAgIE1hdGguUEkgLyAyOw0KICAgICAgICAgICAgcmV0dXJuIHJvdCA8IHJvdDI7DQogICAgICAgICAgfTsNCiAgICAgICAgfSkoanVzdEJvdWdodCkNCiAgICAgICk7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvUG9wLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIFBsYXlTb3VuZCgNCiAgICAgICAgICAgICJzbmQvcG9wIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMgKyAxKSArICIubXAzIiwNCiAgICAgICAgICAgIDAuNQ0KICAgICAgICAgICk7DQogICAgICAgIH0sICgwLjIgKyBpICogMC4xKSAqIDEwMDApOw0KICAgICAgfQ0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJjcmF0ZSB1cGdyYWRlIGhlYXZlbmx5IGVuYWJsZWQiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0zMHB4O3RvcDotMzBweDtvcGFjaXR5OjAuODtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zZm9ybTpzY2FsZSgxLjMpO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ij48L2Rpdj4nOw0KICAgICAgc3RyICs9ICc8ZGl2IGNsYXNzPSJjcmF0ZUJveCIgc3R5bGU9ImZpbHRlcjpub25lOy13ZWJraXQtZmlsdGVyOm5vbmU7Ij4nOyAvL2Nocm9tZSBpcyBzdGlsbCBiYWQgYXQgdGhlc2UNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5QcmVzdGlnZVVwZ3JhZGVzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuUHJlc3RpZ2VVcGdyYWRlc1tpXTsNCg0KICAgICAgICB2YXIgZ2hvc3RlZCA9IDA7DQogICAgICAgIGlmIChtZS5jYW5CZVB1cmNoYXNlZCB8fCBHYW1lLkhhcygiTmV1cm9tYW5jeSIpKSB7DQogICAgICAgICAgc3RyICs9IEdhbWUuY3JhdGUoDQogICAgICAgICAgICBtZSwNCiAgICAgICAgICAgICJhc2NlbmQiLA0KICAgICAgICAgICAgIkdhbWUuUHVyY2hhc2VIZWF2ZW5seVVwZ3JhZGUoIiArIG1lLmlkICsgIik7IiwNCiAgICAgICAgICAgICJoZWF2ZW5seVVwZ3JhZGUiICsgbWUuaWQsDQogICAgICAgICAgICB0b1BvcC5pbmRleE9mKG1lKSAhPSAtMQ0KICAgICAgICAgICAgICA/ICJhbmltYXRpb246cHVja2VyIDAuMnMgZWFzZS1vdXQ7YW5pbWF0aW9uLWRlbGF5OiIgKw0KICAgICAgICAgICAgICAgICAgKHRvUG9wLmluZGV4T2YobWUpICogMC4xICsgMC4yKSArDQogICAgICAgICAgICAgICAgICAiczsiDQogICAgICAgICAgICAgIDogIiINCiAgICAgICAgICApOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZvciAodmFyIGlpIGluIG1lLnBhcmVudHMpIHsNCiAgICAgICAgICAgIGlmIChtZS5wYXJlbnRzW2lpXSAhPSAtMSAmJiBtZS5wYXJlbnRzW2lpXS5jYW5CZVB1cmNoYXNlZCkNCiAgICAgICAgICAgICAgZ2hvc3RlZCA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChtZS5zaG93SWYgJiYgIW1lLnNob3dJZigpKSBnaG9zdGVkID0gMDsNCiAgICAgICAgICBpZiAoZ2hvc3RlZCkgew0KICAgICAgICAgICAgLy9tYXliZSByZXBsYWNlIHRoaXMgd2l0aCBHYW1lLmNyYXRlKCkNCiAgICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iY3JhdGUgdXBncmFkZSBoZWF2ZW5seSBnaG9zdGVkIiBpZD0iaGVhdmVubHlVcGdyYWRlJyArDQogICAgICAgICAgICAgIG1lLmlkICsNCiAgICAgICAgICAgICAgJyIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6JyArDQogICAgICAgICAgICAgIG1lLnBvc1ggKw0KICAgICAgICAgICAgICAicHg7dG9wOiIgKw0KICAgICAgICAgICAgICBtZS5wb3NZICsNCiAgICAgICAgICAgICAgInB4OyIgKw0KICAgICAgICAgICAgICB3cml0ZUljb24obWUuaWNvbikgKw0KICAgICAgICAgICAgICAnIj48L2Rpdj4nOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAobWUuY2FuQmVQdXJjaGFzZWQgfHwgR2FtZS5IYXMoIk5ldXJvbWFuY3kiKSB8fCBnaG9zdGVkKSB7DQogICAgICAgICAgaWYgKG1lLnBvc1ggPCBHYW1lLmhlYXZlbmx5Qm91bmRzLmxlZnQpDQogICAgICAgICAgICBHYW1lLmhlYXZlbmx5Qm91bmRzLmxlZnQgPSBtZS5wb3NYOw0KICAgICAgICAgIGlmIChtZS5wb3NYID4gR2FtZS5oZWF2ZW5seUJvdW5kcy5yaWdodCkNCiAgICAgICAgICAgIEdhbWUuaGVhdmVubHlCb3VuZHMucmlnaHQgPSBtZS5wb3NYOw0KICAgICAgICAgIGlmIChtZS5wb3NZIDwgR2FtZS5oZWF2ZW5seUJvdW5kcy50b3ApDQogICAgICAgICAgICBHYW1lLmhlYXZlbmx5Qm91bmRzLnRvcCA9IG1lLnBvc1k7DQogICAgICAgICAgaWYgKG1lLnBvc1kgPiBHYW1lLmhlYXZlbmx5Qm91bmRzLmJvdHRvbSkNCiAgICAgICAgICAgIEdhbWUuaGVhdmVubHlCb3VuZHMuYm90dG9tID0gbWUucG9zWTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpaSBpbiBtZS5wYXJlbnRzKSB7IC8vY3JlYXRlIHB1bHNpbmcgbGlua3MNCiAgICAgICAgICBpZiAobWUucGFyZW50c1tpaV0gIT0gLTEgJiYgKG1lLmNhbkJlUHVyY2hhc2VkIHx8IGdob3N0ZWQpKSB7DQogICAgICAgICAgICB2YXIgb3JpZ1ggPSAwOw0KICAgICAgICAgICAgdmFyIG9yaWdZID0gMDsNCiAgICAgICAgICAgIHZhciB0YXJnWCA9IG1lLnBvc1ggKyAyODsNCiAgICAgICAgICAgIHZhciB0YXJnWSA9IG1lLnBvc1kgKyAyODsNCiAgICAgICAgICAgIGlmIChtZS5wYXJlbnRzW2lpXSAhPSAtMSkgew0KICAgICAgICAgICAgICBvcmlnWCA9IG1lLnBhcmVudHNbaWldLnBvc1ggKyAyODsNCiAgICAgICAgICAgICAgb3JpZ1kgPSBtZS5wYXJlbnRzW2lpXS5wb3NZICsgMjg7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgcm90ID0NCiAgICAgICAgICAgICAgLShNYXRoLmF0YW4oKHRhcmdZIC0gb3JpZ1kpIC8gKG9yaWdYIC0gdGFyZ1gpKSAvIE1hdGguUEkpICogMTgwOw0KICAgICAgICAgICAgaWYgKHRhcmdYIDw9IG9yaWdYKSByb3QgKz0gMTgwOw0KICAgICAgICAgICAgdmFyIGRpc3QgPSBNYXRoLmZsb29yKA0KICAgICAgICAgICAgICBNYXRoLnNxcnQoDQogICAgICAgICAgICAgICAgKHRhcmdYIC0gb3JpZ1gpICogKHRhcmdYIC0gb3JpZ1gpICsNCiAgICAgICAgICAgICAgICAgICh0YXJnWSAtIG9yaWdZKSAqICh0YXJnWSAtIG9yaWdZKQ0KICAgICAgICAgICAgICApDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJwYXJlbnRMaW5rIiBpZD0iaGVhdmVubHlMaW5rJyArDQogICAgICAgICAgICAgIG1lLmlkICsNCiAgICAgICAgICAgICAgIi0iICsNCiAgICAgICAgICAgICAgaWkgKw0KICAgICAgICAgICAgICAnIiBzdHlsZT0iJyArDQogICAgICAgICAgICAgIChnaG9zdGVkID8gIm9wYWNpdHk6MC4xOyIgOiAiIikgKw0KICAgICAgICAgICAgICAid2lkdGg6IiArDQogICAgICAgICAgICAgIGRpc3QgKw0KICAgICAgICAgICAgICAicHg7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKCIgKw0KICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAiZGVnKTstbW96LXRyYW5zZm9ybTpyb3RhdGUoIiArDQogICAgICAgICAgICAgIHJvdCArDQogICAgICAgICAgICAgICJkZWcpOy1tcy10cmFuc2Zvcm06cm90YXRlKCIgKw0KICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAiZGVnKTstby10cmFuc2Zvcm06cm90YXRlKCIgKw0KICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAiZGVnKTt0cmFuc2Zvcm06cm90YXRlKCIgKw0KICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAiZGVnKTtsZWZ0OiIgKw0KICAgICAgICAgICAgICBvcmlnWCArDQogICAgICAgICAgICAgICJweDt0b3A6IiArDQogICAgICAgICAgICAgIG9yaWdZICsNCiAgICAgICAgICAgICAgJ3B4OyI+PC9kaXY+JzsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIEdhbWUuaGVhdmVubHlCb3VuZHMubGVmdCAtPSAxMjg7DQogICAgICBHYW1lLmhlYXZlbmx5Qm91bmRzLnRvcCAtPSAxMjg7DQogICAgICBHYW1lLmhlYXZlbmx5Qm91bmRzLnJpZ2h0ICs9IDEyOCArIDY0Ow0KICAgICAgR2FtZS5oZWF2ZW5seUJvdW5kcy5ib3R0b20gKz0gMTI4ICsgNjQ7DQogICAgICAvL3N0cis9JzxkaXYgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgcmVkO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6JytHYW1lLmhlYXZlbmx5Qm91bmRzLmxlZnQrJ3B4O3dpZHRoOicrKEdhbWUuaGVhdmVubHlCb3VuZHMucmlnaHQtR2FtZS5oZWF2ZW5seUJvdW5kcy5sZWZ0KSsncHg7dG9wOicrR2FtZS5oZWF2ZW5seUJvdW5kcy50b3ArJ3B4O2hlaWdodDonKyhHYW1lLmhlYXZlbmx5Qm91bmRzLmJvdHRvbS1HYW1lLmhlYXZlbmx5Qm91bmRzLnRvcCkrJ3B4OyI+PC9kaXY+JzsNCiAgICAgIHN0ciArPSAiPC9kaXY+IjsNCiAgICAgIEdhbWUuYXNjZW5kVXBncmFkZXNsLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgaWYgKEdhbWUuRGVidWdnaW5nUHJlc3RpZ2UpIHsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlByZXN0aWdlVXBncmFkZXMpIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLlByZXN0aWdlVXBncmFkZXNbaV07DQogICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICBsKCJoZWF2ZW5seVVwZ3JhZGUiICsgbWUuaWQpLA0KICAgICAgICAgICAgIm1vdXNlZG93biIsDQogICAgICAgICAgICAoZnVuY3Rpb24gKG1lKSB7DQogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgaWYgKCFHYW1lLkRlYnVnZ2luZ1ByZXN0aWdlKSByZXR1cm47DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgR2FtZS5rZXlzWzE2XSAmJg0KICAgICAgICAgICAgICAgICAgdHlwZW9mIExBU1RIRUFWRU5MWVNFTEVDVEVEICE9PSAidW5kZWZpbmVkIiAmJg0KICAgICAgICAgICAgICAgICAgbWUgIT0gTEFTVEhFQVZFTkxZU0VMRUNURUQNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIC8vd2hlbiBjbGlja2luZyBhbiB1cGdyYWRlIHdpdGggY3RybCwgc2V0IGl0IGFzIHJlZmVyZW5jZSBwb2ludDsgY2xpY2tpbmcgYW55IHNpYmxpbmcgdXBncmFkZSB3aXRoIHNoaWZ0IHdpbGwgYWxpZ24gaXQgaW4gYSBuaWNlIGFyYyBhcm91bmQgdGhlaXIgc2hhcmVkIHBhcmVudA0KICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IDA7DQogICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lLnBhcmVudHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIExBU1RIRUFWRU5MWVNFTEVDVEVELnBhcmVudHMuaW5kZXhPZihtZS5wYXJlbnRzW2ldKSAhPSAtMQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gbWUucGFyZW50c1tpXTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdYID0gcGFyZW50LnBvc1g7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnWSA9IHBhcmVudC5wb3NZOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ1ggPSBMQVNUSEVBVkVOTFlTRUxFQ1RFRC5wb3NYOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ1kgPSBMQVNUSEVBVkVOTFlTRUxFQ1RFRC5wb3NZOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcm90ID0NCiAgICAgICAgICAgICAgICAgICAgICBNYXRoLmF0YW4yKHRhcmdZIC0gb3JpZ1ksIG9yaWdYIC0gdGFyZ1gpIC0gTWF0aC5QSSAvIDI7DQogICAgICAgICAgICAgICAgICAgIHZhciBkaXN0ID0gTWF0aC5mbG9vcigNCiAgICAgICAgICAgICAgICAgICAgICBNYXRoLnNxcnQoDQogICAgICAgICAgICAgICAgICAgICAgICAodGFyZ1ggLSBvcmlnWCkgKiAodGFyZ1ggLSBvcmlnWCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAodGFyZ1kgLSBvcmlnWSkgKiAodGFyZ1kgLSBvcmlnWSkNCiAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgIG1lLnBvc1ggPQ0KICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5wb3NYICsgTWF0aC5zaW4ocm90IC0gKE1hdGguUEkgKiAyKSAvIDgpICogZGlzdDsNCiAgICAgICAgICAgICAgICAgICAgbWUucG9zWSA9DQogICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnBvc1kgKyBNYXRoLmNvcyhyb3QgLSAoTWF0aC5QSSAqIDIpIC8gOCkgKiBkaXN0Ow0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgTEFTVEhFQVZFTkxZU0VMRUNURUQgPSBtZTsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTZXQgcmVmZXJlbmNlIHBvaW50IHRvIiwgbWUubmFtZSwgIi4iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKEdhbWUua2V5c1sxN10pIHsNCiAgICAgICAgICAgICAgICAgIExBU1RIRUFWRU5MWVNFTEVDVEVEID0gbWU7DQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU2V0IHJlZmVyZW5jZSBwb2ludCB0byIsIG1lLm5hbWUsICIuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEdhbWUuU2VsZWN0ZWRIZWF2ZW5seVVwZ3JhZGUgPSBtZTsNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0pKG1lKQ0KICAgICAgICAgICk7DQogICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICBsKCJoZWF2ZW5seVVwZ3JhZGUiICsgbWUuaWQpLA0KICAgICAgICAgICAgIm1vdXNldXAiLA0KICAgICAgICAgICAgKGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGlmIChHYW1lLlNlbGVjdGVkSGVhdmVubHlVcGdyYWRlID09IG1lKSB7DQogICAgICAgICAgICAgICAgICBHYW1lLlNlbGVjdGVkSGVhdmVubHlVcGdyYWRlID0gMDsNCiAgICAgICAgICAgICAgICAgIEdhbWUuQnVpbGRBc2NlbmRUcmVlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSkobWUpDQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUudG9vbHRpcC5zaG91bGRIaWRlID0gdHJ1ZTsNCiAgICAgIH0sIDEwMCk7DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlDT0FMRVNDSU5HIFNVR0FSIExVTVBTDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgR2FtZS5sdW1wTWF0dXJlQWdlID0gMTsNCiAgICBHYW1lLmx1bXBSaXBlQWdlID0gMTsNCiAgICBHYW1lLmx1bXBPdmVycmlwZUFnZSA9IDE7DQogICAgR2FtZS5sdW1wQ3VycmVudFR5cGUgPSAwOw0KICAgIGwoImNvbW1lbnRzIikuaW5uZXJIVE1MID0NCiAgICAgIGwoImNvbW1lbnRzIikuaW5uZXJIVE1MICsNCiAgICAgICc8ZGl2IGlkPSJsdW1wcyIgb25jbGljaz0iR2FtZS5jbGlja0x1bXAoKTsiICcgKw0KICAgICAgR2FtZS5nZXREeW5hbWljVG9vbHRpcCgiR2FtZS5sdW1wVG9vbHRpcCIsICJib3R0b20iKSArDQogICAgICAnPjxkaXYgaWQ9Imx1bXBzSWNvbiIgY2xhc3M9InVzZXNJY29uIj48L2Rpdj48ZGl2IGlkPSJsdW1wc0ljb24yIiBjbGFzcz0idXNlc0ljb24iPjwvZGl2PjxkaXYgaWQ9Imx1bXBzQW1vdW50Ij4wPC9kaXY+PC9kaXY+JzsNCiAgICBHYW1lLmx1bXBUb29sdGlwID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHN0ciA9DQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDo0MDBweDtmb250LXNpemU6MTFweDt0ZXh0LWFsaWduOmNlbnRlcjsiIGlkPSJ0b29sdGlwTHVtcHMiPicgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIllvdSBoYXZlICUxLiIsDQogICAgICAgICAgJzxzcGFuIGNsYXNzPSJwcmljZSBsdW1wIj4nICsNCiAgICAgICAgICAgIGxvYygiJTEgc3VnYXIgbHVtcCIsIExCZWF1dGlmeShHYW1lLmx1bXBzKSkgKw0KICAgICAgICAgICAgIjwvc3Bhbj4iDQogICAgICAgICkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiQSA8Yj5zdWdhciBsdW1wPC9iPiBpcyBjb2FsZXNjaW5nIGhlcmUsIGF0dHJhY3RlZCBieSB5b3VyIGFjY29tcGxpc2htZW50cy4iDQogICAgICAgICk7DQoNCiAgICAgIHZhciBhZ2UgPSBEYXRlLm5vdygpIC0gR2FtZS5sdW1wVDsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIGlmIChhZ2UgPCAwKQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJUaGlzIHN1Z2FyIGx1bXAgaGFzIGJlZW4gZXhwb3NlZCB0byB0aW1lIHRyYXZlbCBzaGVuYW5pZ2FucyBhbmQgd2lsbCB0YWtlIGFuIGV4Y3J1Y2lhdGluZyA8Yj4lMTwvYj4gdG8gcmVhY2ggbWF0dXJpdHkuIiwNCiAgICAgICAgICBHYW1lLnNheVRpbWUoKChHYW1lLmx1bXBNYXR1cmVBZ2UgLSBhZ2UpIC8gMTAwMCArIDEpICogR2FtZS5mcHMsIC0xKQ0KICAgICAgICApOw0KICAgICAgZWxzZSBpZiAoYWdlIDwgR2FtZS5sdW1wTWF0dXJlQWdlKQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJUaGlzIHN1Z2FyIGx1bXAgaXMgc3RpbGwgZ3Jvd2luZyBhbmQgd2lsbCB0YWtlIDxiPiUxPC9iPiB0byByZWFjaCBtYXR1cml0eS4iLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSgoKEdhbWUubHVtcE1hdHVyZUFnZSAtIGFnZSkgLyAxMDAwICsgMSkgKiBHYW1lLmZwcywgLTEpDQogICAgICAgICk7DQogICAgICBlbHNlIGlmIChhZ2UgPCBHYW1lLmx1bXBSaXBlQWdlKQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJUaGlzIHN1Z2FyIGx1bXAgaXMgbWF0dXJlIGFuZCB3aWxsIGJlIHJpcGUgaW4gPGI+JTE8L2I+Ljxicj5Zb3UgbWF5IDxiPmNsaWNrIGl0IHRvIGhhcnZlc3QgaXQgbm93PC9iPiwgYnV0IHRoZXJlIGlzIGEgPGI+NTAlIGNoYW5jZSB5b3Ugd29uJ3QgZ2V0IGFueXRoaW5nPC9iPi4iLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSgoKEdhbWUubHVtcFJpcGVBZ2UgLSBhZ2UpIC8gMTAwMCArIDEpICogR2FtZS5mcHMsIC0xKQ0KICAgICAgICApOw0KICAgICAgZWxzZSBpZiAoYWdlIDwgR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpDQogICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgIjxiPlRoaXMgc3VnYXIgbHVtcCBpcyByaXBlISBDbGljayBpdCB0byBoYXJ2ZXN0IGl0LjwvYj48YnI+SWYgeW91IGRvIG5vdGhpbmcsIGl0IHdpbGwgYXV0by1oYXJ2ZXN0IGluIDxiPiUxPC9iPi4iLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSgoKEdhbWUubHVtcE92ZXJyaXBlQWdlIC0gYWdlKSAvIDEwMDAgKyAxKSAqIEdhbWUuZnBzLCAtMSkNCiAgICAgICAgKTsNCg0KICAgICAgdmFyIHBoYXNlID0gKGFnZSAvIEdhbWUubHVtcE92ZXJyaXBlQWdlKSAqIDc7DQogICAgICBpZiAocGhhc2UgPj0gMykgew0KICAgICAgICBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgIT0gMCkgc3RyICs9ICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nOw0KICAgICAgICBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgPT0gMSkNCiAgICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICAgIlRoaXMgc3VnYXIgbHVtcCBncmV3IHRvIGJlIDxiPmJpZnVyY2F0ZWQ8L2I+OyBoYXJ2ZXN0aW5nIGl0IGhhcyBhIDUwJSBjaGFuY2Ugb2YgeWllbGRpbmcgdHdvIGx1bXBzLiINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAyKQ0KICAgICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgICAiVGhpcyBzdWdhciBsdW1wIGdyZXcgdG8gYmUgPGI+Z29sZGVuPC9iPjsgaGFydmVzdGluZyBpdCB3aWxsIHlpZWxkIDIgdG8gNyBsdW1wcywgeW91ciBjdXJyZW50IGNvb2tpZXMgd2lsbCBiZSBkb3VibGVkIChjYXBwZWQgdG8gYSBnYWluIG9mIDI0IGhvdXJzIG9mIHlvdXIgQ3BTKSwgYW5kIHlvdSB3aWxsIGZpbmQgMTAlIG1vcmUgZ29sZGVuIGNvb2tpZXMgZm9yIHRoZSBuZXh0IDI0IGhvdXJzLiINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAzKQ0KICAgICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgICAiVGhpcyBzdWdhciBsdW1wIHdhcyBhZmZlY3RlZCBieSB0aGUgZWxkZXJzIGFuZCBncmV3IHRvIGJlIDxiPm1lYXR5PC9iPjsgaGFydmVzdGluZyBpdCB3aWxsIHlpZWxkIGJldHdlZW4gMCBhbmQgMiBsdW1wcy4iDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgPT0gNCkNCiAgICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICAgIlRoaXMgc3VnYXIgbHVtcCBpcyA8Yj5jYXJhbWVsaXplZDwvYj4sIGl0cyBzdGlja2luZXNzIGJpbmRpbmcgaXQgdG8gdW5leHBlY3RlZCB0aGluZ3M7IGhhcnZlc3RpbmcgaXQgd2lsbCB5aWVsZCBiZXR3ZWVuIDEgYW5kIDMgbHVtcHMgYW5kIHdpbGwgcmVmaWxsIHlvdXIgc3VnYXIgbHVtcCBjb29sZG93bnMuIg0KICAgICAgICAgICk7DQogICAgICB9DQoNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICJZb3VyIHN1Z2FyIGx1bXBzIG1hdHVyZSBhZnRlciA8Yj4lMTwvYj4sPGJyPnJpcGVuIGFmdGVyIDxiPiUyPC9iPiw8YnI+YW5kIGZhbGwgYWZ0ZXIgPGI+JTM8L2I+LiIsDQogICAgICAgIFsNCiAgICAgICAgICBHYW1lLnNheVRpbWUoKEdhbWUubHVtcE1hdHVyZUFnZSAvIDEwMDApICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgICBHYW1lLnNheVRpbWUoKEdhbWUubHVtcFJpcGVBZ2UgLyAxMDAwKSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgICAgR2FtZS5zYXlUaW1lKChHYW1lLmx1bXBPdmVycmlwZUFnZSAvIDEwMDApICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXQ0KICAgICAgKTsNCg0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICImYnVsbDsgU3VnYXIgbHVtcHMgY2FuIGJlIGhhcnZlc3RlZCB3aGVuIG1hdHVyZSwgdGhvdWdoIGlmIGxlZnQgYWxvbmUgYmV5b25kIHRoYXQgcG9pbnQgdGhleSB3aWxsIHN0YXJ0IHJpcGVuaW5nIChpbmNyZWFzaW5nIHRoZSBjaGFuY2Ugb2YgaGFydmVzdGluZyB0aGVtKSBhbmQgd2lsbCBldmVudHVhbGx5IGZhbGwgYW5kIGJlIGF1dG8taGFydmVzdGVkIGFmdGVyIHNvbWUgdGltZS48YnI+JmJ1bGw7IFN1Z2FyIGx1bXBzIGFyZSBkZWxpY2lvdXMgYW5kIG1heSBiZSB1c2VkIGFzIGN1cnJlbmN5IGZvciBhbGwgc29ydHMgb2YgdGhpbmdzLjxicj4mYnVsbDsgT25jZSBhIHN1Z2FyIGx1bXAgaXMgaGFydmVzdGVkLCBhbm90aGVyIG9uZSB3aWxsIHN0YXJ0IGdyb3dpbmcgaW4gaXRzIHBsYWNlLjxicj4mYnVsbDsgTm90ZSB0aGF0IHN1Z2FyIGx1bXBzIGtlZXAgZ3Jvd2luZyB3aGVuIHRoZSBnYW1lIGlzIGNsb3NlZC4iDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+IjsNCiAgICAgIHJldHVybiBzdHI7DQogICAgfTsNCiAgICBHYW1lLmNvbXB1dGVMdW1wVGltZXMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgaG91ciA9IDEwMDAgKiA2MCAqIDYwOw0KICAgICAgR2FtZS5sdW1wTWF0dXJlQWdlID0gaG91ciAqIDIwOw0KICAgICAgR2FtZS5sdW1wUmlwZUFnZSA9IGhvdXIgKiAyMzsNCiAgICAgIGlmIChHYW1lLkhhcygiU3RldmlhIENhZWxlc3RpcyIpKSBHYW1lLmx1bXBSaXBlQWdlIC09IGhvdXI7DQogICAgICBpZiAoR2FtZS5IYXMoIkRpYWJldGljYSBEYWVtb25pY3VzIikpIEdhbWUubHVtcE1hdHVyZUFnZSAtPSBob3VyOw0KICAgICAgaWYgKEdhbWUuSGFzKCJJY2hvciBzeXJ1cCIpKSBHYW1lLmx1bXBNYXR1cmVBZ2UgLT0gMTAwMCAqIDYwICogNzsNCiAgICAgIGlmIChHYW1lLkhhcygiU3VnYXIgYWdpbmcgcHJvY2VzcyIpKQ0KICAgICAgICBHYW1lLmx1bXBSaXBlQWdlIC09DQogICAgICAgICAgNjAwMCAqIE1hdGgubWluKDYwMCwgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50KTsgLy9jYXBwZWQgYXQgNjAwIGdyYW5kbWFzDQogICAgICBpZiAoR2FtZS5oYXNHb2QgJiYgR2FtZS5CdWlsZGluZ3NPd25lZCAlIDEwID09IDApIHsNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJvcmRlciIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIEdhbWUubHVtcFJpcGVBZ2UgLT0gaG91cjsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIEdhbWUubHVtcFJpcGVBZ2UgLT0gKGhvdXIgLyAzKSAqIDI7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBHYW1lLmx1bXBSaXBlQWdlIC09IGhvdXIgLyAzOw0KICAgICAgfQ0KICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdEcmFnb25cJ3MgQ3VydmUnKSkge0dhbWUubHVtcE1hdHVyZUFnZS89MS4wNTtHYW1lLmx1bXBSaXBlQWdlLz0xLjA1O30NCiAgICAgIEdhbWUubHVtcE1hdHVyZUFnZSAvPSAxICsgR2FtZS5hdXJhTXVsdCgiRHJhZ29uJ3MgQ3VydmUiKSAqIDAuMDU7DQogICAgICBHYW1lLmx1bXBSaXBlQWdlIC89IDEgKyBHYW1lLmF1cmFNdWx0KCJEcmFnb24ncyBDdXJ2ZSIpICogMC4wNTsNCiAgICAgIEdhbWUubHVtcE92ZXJyaXBlQWdlID0gR2FtZS5sdW1wUmlwZUFnZSArIGhvdXI7DQogICAgICBpZiAoR2FtZS5IYXMoIkdsdWNvc2UtY2hhcmdlZCBhaXIiKSkgew0KICAgICAgICBHYW1lLmx1bXBNYXR1cmVBZ2UgLz0gMjAwMDsNCiAgICAgICAgR2FtZS5sdW1wUmlwZUFnZSAvPSAyMDAwOw0KICAgICAgICBHYW1lLmx1bXBPdmVycmlwZUFnZSAvPSAyMDAwOw0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5sb2FkTHVtcHMgPSBmdW5jdGlvbiAodGltZSkgew0KICAgICAgR2FtZS5jb21wdXRlTHVtcFRpbWVzKCk7DQogICAgICAvL0dhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQogICAgICBpZiAoIUdhbWUuY2FuTHVtcHMoKSkgR2FtZS5yZW1vdmVDbGFzcygibHVtcHNPbiIpOw0KICAgICAgZWxzZSB7DQogICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgR2FtZS5hZGRDbGFzcygibHVtcHNPbiIpOw0KICAgICAgICBHYW1lLmx1bXBUID0gTWF0aC5taW4oRGF0ZS5ub3coKSwgR2FtZS5sdW1wVCk7DQogICAgICAgIHZhciBhZ2UgPSBNYXRoLm1heChEYXRlLm5vdygpIC0gR2FtZS5sdW1wVCwgMCk7DQogICAgICAgIHZhciBhbW91bnQgPSBNYXRoLmZsb29yKGFnZSAvIEdhbWUubHVtcE92ZXJyaXBlQWdlKTsgLy9ob3cgbWFueSBsdW1wcyBkaWQgd2UgaGFydmVzdCBzaW5jZSB3ZSBjbG9zZWQgdGhlIGdhbWU/DQogICAgICAgIGlmIChhbW91bnQgPj0gMSkgew0KICAgICAgICAgIEdhbWUuaGFydmVzdEx1bXBzKDEsIHRydWUpOw0KICAgICAgICAgIEdhbWUubHVtcEN1cnJlbnRUeXBlID0gMDsgLy9hbGwgb2ZmbGluZSBsdW1wcyBhZnRlciB0aGUgZmlyc3Qgb25lIGhhdmUgYSBub3JtYWwgdHlwZQ0KICAgICAgICAgIGlmIChhbW91bnQgPiAxKSBHYW1lLmhhcnZlc3RMdW1wcyhhbW91bnQgLSAxLCB0cnVlKTsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICIiLA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiWW91IGhhcnZlc3RlZCA8Yj4lMTwvYj4gd2hpbGUgeW91IHdlcmUgYXdheS4iLA0KICAgICAgICAgICAgICBsb2MoIiUxIHN1Z2FyIGx1bXAiLCBMQmVhdXRpZnkoYW1vdW50KSkNCiAgICAgICAgICAgICksDQogICAgICAgICAgICBbMjksIDE0XQ0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS5sdW1wVCA9IERhdGUubm93KCkgLSAoYWdlIC0gYW1vdW50ICogR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpOw0KICAgICAgICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuZ2Fpbkx1bXBzID0gZnVuY3Rpb24gKHRvdGFsKSB7DQogICAgICBpZiAoR2FtZS5sdW1wc1RvdGFsID09IC0xKSB7DQogICAgICAgIEdhbWUubHVtcHNUb3RhbCA9IDA7DQogICAgICAgIEdhbWUubHVtcHMgPSAwOw0KICAgICAgfQ0KICAgICAgR2FtZS5sdW1wcyArPSB0b3RhbDsNCiAgICAgIEdhbWUubHVtcHNUb3RhbCArPSB0b3RhbDsNCg0KICAgICAgaWYgKEdhbWUubHVtcHNUb3RhbCA+PSA3KSBHYW1lLldpbigiRHVkZSwgc3dlZXQiKTsNCiAgICAgIGlmIChHYW1lLmx1bXBzVG90YWwgPj0gMzApIEdhbWUuV2luKCJTdWdhciBydXNoIik7DQogICAgICBpZiAoR2FtZS5sdW1wc1RvdGFsID49IDM2NSkgR2FtZS5XaW4oIlllYXIncyB3b3J0aCBvZiBjYXZpdGllcyIpOw0KICAgIH07DQogICAgR2FtZS5jbGlja0x1bXAgPSBmdW5jdGlvbiAoKSB7DQogICAgICB0cmlnZ2VyQW5pbShsKCJsdW1wc0ljb24iKSwgInB1Y2tlciIpOw0KICAgICAgdHJpZ2dlckFuaW0obCgibHVtcHNJY29uMiIpLCAicHVja2VyIik7DQogICAgICBpZiAoIUdhbWUuY2FuTHVtcHMoKSkgcmV0dXJuOw0KICAgICAgdmFyIGFnZSA9IERhdGUubm93KCkgLSBHYW1lLmx1bXBUOw0KICAgICAgaWYgKGFnZSA8IEdhbWUubHVtcE1hdHVyZUFnZSkgew0KICAgICAgfSBlbHNlIGlmIChhZ2UgPCBHYW1lLmx1bXBSaXBlQWdlKSB7DQogICAgICAgIHZhciBhbW91bnQgPSBjaG9vc2UoWzAsIDFdKTsNCiAgICAgICAgaWYgKGFtb3VudCAhPSAwKSBHYW1lLldpbigiSGFuZC1waWNrZWQiKTsNCiAgICAgICAgR2FtZS5oYXJ2ZXN0THVtcHMoYW1vdW50KTsNCiAgICAgICAgR2FtZS5jb21wdXRlTHVtcFR5cGUoKTsNCiAgICAgIH0gZWxzZSBpZiAoYWdlIDwgR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpIHsNCiAgICAgICAgR2FtZS5oYXJ2ZXN0THVtcHMoMSk7DQogICAgICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLmhhcnZlc3RMdW1wcyA9IGZ1bmN0aW9uIChhbW91bnQsIHNpbGVudCkgew0KICAgICAgaWYgKCFHYW1lLmNhbkx1bXBzKCkpIHJldHVybjsNCiAgICAgIEdhbWUubHVtcFQgPSBEYXRlLm5vdygpOw0KICAgICAgdmFyIHRvdGFsID0gYW1vdW50Ow0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAxICYmDQogICAgICAgIEdhbWUuSGFzKCJTdWNyYWxvc2lhIEludXRpbGlzIikgJiYNCiAgICAgICAgTWF0aC5yYW5kb20oKSA8IDAuMDUNCiAgICAgICkNCiAgICAgICAgdG90YWwgKj0gMjsNCiAgICAgIGVsc2UgaWYgKEdhbWUubHVtcEN1cnJlbnRUeXBlID09IDEpIHRvdGFsICo9IGNob29zZShbMSwgMl0pOw0KICAgICAgZWxzZSBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgPT0gMikgew0KICAgICAgICB0b3RhbCAqPSBjaG9vc2UoWzIsIDMsIDQsIDUsIDYsIDddKTsNCiAgICAgICAgR2FtZS5nYWluQnVmZigic3VnYXIgYmxlc3NpbmciLCAyNCAqIDYwICogNjAsIDEpOw0KICAgICAgICBHYW1lLkVhcm4oTWF0aC5taW4oR2FtZS5jb29raWVzUHMgKiA2MCAqIDYwICogMjQsIEdhbWUuY29va2llcykpOw0KICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICBsb2MoIlN1Z2FyIGJsZXNzaW5nIGFjdGl2YXRlZCEiKSwNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiWW91ciBjb29raWVzIGhhdmUgYmVlbiBkb3VibGVkLjxicj4rMTAlIGdvbGRlbiBjb29raWVzIGZvciB0aGUgbmV4dCAyNCBob3Vycy4iDQogICAgICAgICAgKSwNCiAgICAgICAgICBbMjksIDE2XQ0KICAgICAgICApOw0KICAgICAgfSBlbHNlIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAzKSB0b3RhbCAqPSBjaG9vc2UoWzAsIDAsIDEsIDIsIDJdKTsNCiAgICAgIGVsc2UgaWYgKEdhbWUubHVtcEN1cnJlbnRUeXBlID09IDQpIHsNCiAgICAgICAgdG90YWwgKj0gY2hvb3NlKFsxLCAyLCAzXSk7DQogICAgICAgIEdhbWUubHVtcFJlZmlsbCA9IDA7IC8vRGF0ZS5ub3coKS1HYW1lLmdldEx1bXBSZWZpbGxNYXgoKTsNCiAgICAgICAgR2FtZS5Ob3RpZnkobG9jKCJTdWdhciBsdW1wIGNvb2xkb3ducyBjbGVhcmVkISIpLCAiIiwgWzI5LCAyN10pOw0KICAgICAgfQ0KICAgICAgdG90YWwgPSBNYXRoLmZsb29yKHRvdGFsKTsNCiAgICAgIEdhbWUuZ2Fpbkx1bXBzKHRvdGFsKTsNCiAgICAgIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAxKSBHYW1lLldpbigiU3VnYXIgc3VnYXIiKTsNCiAgICAgIGVsc2UgaWYgKEdhbWUubHVtcEN1cnJlbnRUeXBlID09IDIpIEdhbWUuV2luKCJBbGwtbmF0dXJhbCBjYW5lIHN1Z2FyIik7DQogICAgICBlbHNlIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAzKSBHYW1lLldpbigiU3dlZXRtZWF0cyIpOw0KICAgICAgZWxzZSBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgPT0gNCkgR2FtZS5XaW4oIk1haWxsYXJkIHJlYWN0aW9uIik7DQoNCiAgICAgIGlmICghc2lsZW50KSB7DQogICAgICAgIHZhciByZWN0ID0gbCgibHVtcHNJY29uMiIpLmdldEJvdW5kcygpOw0KICAgICAgICBHYW1lLlNwYXJrbGVBdCgNCiAgICAgICAgICAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLA0KICAgICAgICAgIChyZWN0LnRvcCArIHJlY3QuYm90dG9tKSAvIDIgLSAyNCArIDMyIC0gVG9wQmFyT2Zmc2V0DQogICAgICAgICk7DQogICAgICAgIGlmICh0b3RhbCA+IDApDQogICAgICAgICAgR2FtZS5Qb3B1cCgNCiAgICAgICAgICAgICI8c21hbGw+KyIgKyBsb2MoIiUxIHN1Z2FyIGx1bXAiLCBMQmVhdXRpZnkodG90YWwpKSArICI8L3NtYWxsPiIsDQogICAgICAgICAgICAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLA0KICAgICAgICAgICAgKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMiAtIDQ4DQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgIEdhbWUuUG9wdXAoDQogICAgICAgICAgICAiPHNtYWxsPiIgKyBsb2MoIkJvdGNoZWQgaGFydmVzdCEiKSArICI8L3NtYWxsPiIsDQogICAgICAgICAgICAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLA0KICAgICAgICAgICAgKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMiAtIDQ4DQogICAgICAgICAgKTsNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvcG9wIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMgKyAxKSArICIubXAzIiwgMC43NSk7DQogICAgICB9DQogICAgICBHYW1lLmNvbXB1dGVMdW1wVGltZXMoKTsNCiAgICB9Ow0KICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlID0gZnVuY3Rpb24gKCkgew0KICAgICAgTWF0aC5zZWVkcmFuZG9tKEdhbWUuc2VlZCArICIvIiArIEdhbWUubHVtcFQpOw0KICAgICAgdmFyIHR5cGVzID0gWzBdOw0KICAgICAgdmFyIGxvb3AgPSAxOw0KICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdEcmFnb25cJ3MgQ3VydmUnKSkgbG9vcD0yOw0KICAgICAgbG9vcCArPSBHYW1lLmF1cmFNdWx0KCJEcmFnb24ncyBDdXJ2ZSIpOw0KICAgICAgbG9vcCA9IHJhbmRvbUZsb29yKGxvb3ApOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb29wOyBpKyspIHsNCiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAoR2FtZS5IYXMoIlN1Y3JhbG9zaWEgSW51dGlsaXMiKSA/IDAuMTUgOiAwLjEpKQ0KICAgICAgICAgIHR5cGVzLnB1c2goMSk7IC8vYmlmdXJjYXRlZA0KICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDMgLyAxMDAwKSB0eXBlcy5wdXNoKDIpOyAvL2dvbGRlbg0KICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMSAqIEdhbWUuZWxkZXJXcmF0aCkgdHlwZXMucHVzaCgzKTsgLy9tZWF0eQ0KICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDEgLyA1MCkgdHlwZXMucHVzaCg0KTsgLy9jYXJhbWVsaXplZA0KICAgICAgfQ0KICAgICAgR2FtZS5sdW1wQ3VycmVudFR5cGUgPSBjaG9vc2UodHlwZXMpOw0KICAgICAgTWF0aC5zZWVkcmFuZG9tKCk7DQogICAgfTsNCg0KICAgIEdhbWUuY2FuTHVtcHMgPSBmdW5jdGlvbiAoKSAvL2dyYW1tYXRpY2FsbHkgcGxlYXNpbmcgZnVuY3Rpb24gbmFtZQ0KICAgIHsNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5sdW1wc1RvdGFsID4gLTEgfHwNCiAgICAgICAgKEdhbWUuYXNjZW5zaW9uTW9kZSAhPSAxICYmDQogICAgICAgICAgR2FtZS5jb29raWVzRWFybmVkICsgR2FtZS5jb29raWVzUmVzZXQgPj0gMTAwMDAwMDAwMCkNCiAgICAgICkNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfTsNCg0KICAgIEdhbWUuZ2V0THVtcFJlZmlsbE1heCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLmZwcyAqIDYwICogMTU7IC8vMTAwMCo2MCoxNTsvLzE1IG1pbnV0ZXMNCiAgICB9Ow0KICAgIEdhbWUuZ2V0THVtcFJlZmlsbFJlbWFpbmluZyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLmx1bXBSZWZpbGw7IC8vR2FtZS5nZXRMdW1wUmVmaWxsTWF4KCktKERhdGUubm93KCktR2FtZS5sdW1wUmVmaWxsKTsNCiAgICB9Ow0KICAgIEdhbWUuY2FuUmVmaWxsTHVtcCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLmx1bXBSZWZpbGwgPD0gMDsgLy8oKERhdGUubm93KCktR2FtZS5sdW1wUmVmaWxsKT49R2FtZS5nZXRMdW1wUmVmaWxsTWF4KCkpOw0KICAgIH07DQogICAgR2FtZS5yZWZpbGxMdW1wID0gZnVuY3Rpb24gKG4sIGZ1bmMpIHsNCiAgICAgIGlmIChHYW1lLmx1bXBzID49IG4gJiYgR2FtZS5jYW5SZWZpbGxMdW1wKCkpIHsNCiAgICAgICAgR2FtZS5zcGVuZEx1bXAobiwgInJlZmlsbCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuc2VzYW1lKSBHYW1lLmx1bXBSZWZpbGwgPSBHYW1lLmdldEx1bXBSZWZpbGxNYXgoKTsgLy9EYXRlLm5vdygpOw0KICAgICAgICAgIGZ1bmMoKTsNCiAgICAgICAgfSkoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuc3BlbmRMdW1wID0gZnVuY3Rpb24gKG4sIHN0ciwgZnVuYywgZnJlZSkgew0KICAgICAgLy9hc2sgaWYgd2Ugd2FudCB0byBzcGVuZCBOIGx1bXBzICh1bmxlc3MgZnJlZSkNCiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmICghZnJlZSAmJiBHYW1lLmx1bXBzIDwgbikgcmV0dXJuIGZhbHNlOw0KICAgICAgICBpZiAoIWZyZWUgJiYgR2FtZS5wcmVmcy5hc2tMdW1wcykgew0KICAgICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICAgICAgR2FtZS5wcm9tcHRDb25maXJtRnVuYyA9IGZ1bmM7IC8vYml0IGR1bWINCiAgICAgICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgICAgICc8aWQgU3BlbmRMdW1wPjxkaXYgY2xhc3M9Imljb24iIHN0eWxlPSJiYWNrZ3JvdW5kOnVybChpbWcvaWNvbnMucG5nP3Y9JyArDQogICAgICAgICAgICAgIEdhbWUudmVyc2lvbiArDQogICAgICAgICAgICAgICIpO2Zsb2F0OmxlZnQ7bWFyZ2luLWxlZnQ6LThweDttYXJnaW4tdG9wOi04cHg7YmFja2dyb3VuZC1wb3NpdGlvbjoiICsNCiAgICAgICAgICAgICAgLTI5ICogNDggKw0KICAgICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAgIC0xNCAqIDQ4ICsNCiAgICAgICAgICAgICAgJ3B4OyI+PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luOjE2cHggOHB4OyI+JyArDQogICAgICAgICAgICAgIGxvYygiRG8geW91IHdhbnQgdG8gc3BlbmQgJTEgdG8gJTI/IiwgWw0KICAgICAgICAgICAgICAgICI8Yj4iICsgbG9jKCIlMSBzdWdhciBsdW1wIiwgTEJlYXV0aWZ5KG4pKSArICI8L2I+IiwNCiAgICAgICAgICAgICAgICBzdHIsDQogICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgICAgICBbDQogICAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgICBsb2MoIlllcyIpLA0KICAgICAgICAgICAgICAgICJHYW1lLmx1bXBzLT0iICsNCiAgICAgICAgICAgICAgICAgIG4gKw0KICAgICAgICAgICAgICAgICAgIjtHYW1lLnByb21wdENvbmZpcm1GdW5jKCk7R2FtZS5wcm9tcHRDb25maXJtRnVuYz0wO0dhbWUucmVjYWxjdWxhdGVHYWlucz0xO0dhbWUuQ2xvc2VQcm9tcHQoKTsiLA0KICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICBsb2MoIk5vIiksDQogICAgICAgICAgICBdDQogICAgICAgICAgKTsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKCFmcmVlKSBHYW1lLmx1bXBzIC09IG47DQogICAgICAgICAgZnVuYygpOw0KICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIH0NCiAgICAgIH07DQogICAgfTsNCg0KICAgIEdhbWUuZG9MdW1wcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChHYW1lLmx1bXBSZWZpbGwgPiAwKSBHYW1lLmx1bXBSZWZpbGwtLTsNCg0KICAgICAgaWYgKCFHYW1lLmNhbkx1bXBzKCkpIHsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygibHVtcHNPbiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAoR2FtZS5sdW1wc1RvdGFsID09IC0xKSB7DQogICAgICAgIC8vZmlyc3QgdGltZSAhDQogICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgR2FtZS5hZGRDbGFzcygibHVtcHNPbiIpOw0KICAgICAgICBHYW1lLmx1bXBUID0gRGF0ZS5ub3coKTsNCiAgICAgICAgR2FtZS5sdW1wc1RvdGFsID0gMDsNCiAgICAgICAgR2FtZS5sdW1wcyA9IDA7DQogICAgICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQoNCiAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgbG9jKCJTdWdhciBsdW1wcyEiKSwNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiQmVjYXVzZSB5b3UndmUgYmFrZWQgYSA8Yj5iaWxsaW9uIGNvb2tpZXM8L2I+IGluIHRvdGFsLCB5b3UgYXJlIG5vdyBhdHRyYWN0aW5nIDxiPnN1Z2FyIGx1bXBzPC9iPi4gVGhleSBjb2FsZXNjZSBxdWlldGx5IG5lYXIgdGhlIHRvcCBvZiB5b3VyIHNjcmVlbiwgdW5kZXIgdGhlIFN0YXRzIGJ1dHRvbi48YnI+WW91IHdpbGwgYmUgYWJsZSB0byBoYXJ2ZXN0IHRoZW0gd2hlbiB0aGV5J3JlIHJpcGUsIGFmdGVyIHdoaWNoIHlvdSBtYXkgc3BlbmQgdGhlbSBvbiBhbGwgc29ydHMgb2YgdGhpbmdzISINCiAgICAgICAgICApLA0KICAgICAgICAgIFsyMywgMTRdDQogICAgICAgICk7DQogICAgICB9DQogICAgICB2YXIgYWdlID0gRGF0ZS5ub3coKSAtIEdhbWUubHVtcFQ7DQogICAgICBpZiAoYWdlID4gR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpIHsNCiAgICAgICAgYWdlID0gMDsNCiAgICAgICAgR2FtZS5oYXJ2ZXN0THVtcHMoMSk7DQogICAgICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQogICAgICB9DQoNCiAgICAgIHZhciBwaGFzZSA9IE1hdGgubWluKDYsIE1hdGguZmxvb3IoKGFnZSAvIEdhbWUubHVtcE92ZXJyaXBlQWdlKSAqIDcpKTsNCiAgICAgIHZhciBwaGFzZTIgPSBNYXRoLm1pbigNCiAgICAgICAgNiwNCiAgICAgICAgTWF0aC5mbG9vcigoYWdlIC8gR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpICogNykgKyAxDQogICAgICApOw0KICAgICAgdmFyIHJvdyA9IDE0Ow0KICAgICAgdmFyIHJvdzIgPSAxNDsNCiAgICAgIHZhciB0eXBlID0gR2FtZS5sdW1wQ3VycmVudFR5cGU7DQogICAgICBpZiAodHlwZSA9PSAxKSB7DQogICAgICAgIC8vZG91YmxlDQogICAgICAgIC8vaWYgKHBoYXNlPj02KSByb3c9MTU7DQogICAgICAgIGlmIChwaGFzZTIgPj0gNikgcm93MiA9IDE1Ow0KICAgICAgfSBlbHNlIGlmICh0eXBlID09IDIpIHsNCiAgICAgICAgLy9nb2xkZW4NCiAgICAgICAgaWYgKHBoYXNlID49IDQpIHJvdyA9IDE2Ow0KICAgICAgICBpZiAocGhhc2UyID49IDQpIHJvdzIgPSAxNjsNCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAzKSB7DQogICAgICAgIC8vbWVhdHkNCiAgICAgICAgaWYgKHBoYXNlID49IDQpIHJvdyA9IDE3Ow0KICAgICAgICBpZiAocGhhc2UyID49IDQpIHJvdzIgPSAxNzsNCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSA0KSB7DQogICAgICAgIC8vY2FyYW1lbGl6ZWQNCiAgICAgICAgaWYgKHBoYXNlID49IDQpIHJvdyA9IDI3Ow0KICAgICAgICBpZiAocGhhc2UyID49IDQpIHJvdzIgPSAyNzsNCiAgICAgIH0NCiAgICAgIHZhciBpY29uID0gWzIzICsgTWF0aC5taW4ocGhhc2UsIDUpLCByb3ddOw0KICAgICAgdmFyIGljb24yID0gWzIzICsgcGhhc2UyLCByb3cyXTsNCiAgICAgIGlmIChhZ2UgPCAwKSB7DQogICAgICAgIGljb24gPSBbMTcsIDVdOw0KICAgICAgICBpY29uMiA9IFsxNywgNV07DQogICAgICB9DQogICAgICB2YXIgb3BhY2l0eSA9IE1hdGgubWluKDYsIChhZ2UgLyBHYW1lLmx1bXBPdmVycmlwZUFnZSkgKiA3KSAlIDE7DQogICAgICBpZiAocGhhc2UgPj0gNikgew0KICAgICAgICBvcGFjaXR5ID0gMTsNCiAgICAgIH0NCiAgICAgIGwoImx1bXBzSWNvbiIpLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAgIC1pY29uWzBdICogNDggKyAicHggIiArIC1pY29uWzFdICogNDggKyAicHgiOw0KICAgICAgbCgibHVtcHNJY29uMiIpLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAgIC1pY29uMlswXSAqIDQ4ICsgInB4ICIgKyAtaWNvbjJbMV0gKiA0OCArICJweCI7DQogICAgICBsKCJsdW1wc0ljb24yIikuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHk7DQogICAgICBsKCJsdW1wc0Ftb3VudCIpLnRleHRDb250ZW50ID0gQmVhdXRpZnkoR2FtZS5sdW1wcyk7DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlDT09LSUUgRUNPTk9NSUNTDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgR2FtZS5FYXJuID0gZnVuY3Rpb24gKGhvd211Y2gpIHsNCiAgICAgIEdhbWUuY29va2llcyArPSBob3dtdWNoOw0KICAgICAgR2FtZS5jb29raWVzRWFybmVkICs9IGhvd211Y2g7DQogICAgfTsNCiAgICBHYW1lLlNwZW5kID0gZnVuY3Rpb24gKGhvd211Y2gpIHsNCiAgICAgIEdhbWUuY29va2llcyAtPSBob3dtdWNoOw0KICAgIH07DQogICAgR2FtZS5EaXNzb2x2ZSA9IGZ1bmN0aW9uIChob3dtdWNoKSB7DQogICAgICBHYW1lLmNvb2tpZXMgLT0gaG93bXVjaDsNCiAgICAgIEdhbWUuY29va2llc0Vhcm5lZCAtPSBob3dtdWNoOw0KICAgICAgR2FtZS5jb29raWVzID0gTWF0aC5tYXgoMCwgR2FtZS5jb29raWVzKTsNCiAgICAgIEdhbWUuY29va2llc0Vhcm5lZCA9IE1hdGgubWF4KDAsIEdhbWUuY29va2llc0Vhcm5lZCk7DQogICAgfTsNCiAgICBHYW1lLm1vdXNlQ3BzID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGFkZCA9IDA7DQogICAgICBpZiAoR2FtZS5IYXMoIlRob3VzYW5kIGZpbmdlcnMiKSkgYWRkICs9IDAuMTsNCiAgICAgIGlmIChHYW1lLkhhcygiTWlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSA1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJCaWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDEwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJUcmlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSAyMDsNCiAgICAgIGlmIChHYW1lLkhhcygiUXVhZHJpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICBpZiAoR2FtZS5IYXMoIlF1aW50aWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJTZXh0aWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJTZXB0aWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJPY3RpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICBpZiAoR2FtZS5IYXMoIk5vbmlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSAyMDsNCiAgICAgIGlmIChHYW1lLkhhcygiRGVjaWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJVbnNoYWNrbGVkIGN1cnNvcnMiKSkgYWRkICo9IDI1Ow0KDQogICAgICB2YXIgbnVtID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIG51bSArPSBHYW1lLk9iamVjdHNbaV0uYW1vdW50Ow0KICAgICAgfQ0KICAgICAgbnVtIC09IEdhbWUuT2JqZWN0c1siQ3Vyc29yIl0uYW1vdW50Ow0KICAgICAgYWRkID0gYWRkICogbnVtOw0KICAgICAgaWYgKEdhbWUuSGFzKCJQbGFzdGljIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIklyb24gbW91c2UiKSkgYWRkICs9IEdhbWUuY29va2llc1BzICogMC4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiVGl0YW5pdW0gbW91c2UiKSkgYWRkICs9IEdhbWUuY29va2llc1BzICogMC4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQWRhbWFudGl1bSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJVbm9idGFpbml1bSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJFbHVkaXVtIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIldpc2hhbGxveSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJGYW50YXN0ZWVsIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIk5ldmVyY3JhY2sgbW91c2UiKSkgYWRkICs9IEdhbWUuY29va2llc1BzICogMC4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQXJteXRocmlsIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIlRlY2hub2JzaWRpYW4gbW91c2UiKSkgYWRkICs9IEdhbWUuY29va2llc1BzICogMC4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiUGxhc21hcmJsZSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJNaXJhY3VsaXRlIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIkFldGhlcmljZSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIkZvcnR1bmUgIzEwNCIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgdmFyIG11bHQgPSAxOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIlNhbnRhJ3MgaGVscGVycyIpKSBtdWx0ICo9IDEuMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQ29va2llIGVnZyIpKSBtdWx0ICo9IDEuMTsNCiAgICAgIGlmIChHYW1lLkhhcygiSGFsbyBnbG92ZXMiKSkgbXVsdCAqPSAxLjE7DQogICAgICBpZiAoR2FtZS5IYXMoIkRyYWdvbiBjbGF3IikpIG11bHQgKj0gMS4wMzsNCg0KICAgICAgaWYgKEdhbWUuSGFzKCJBdXJhIGdsb3ZlcyIpKSB7DQogICAgICAgIG11bHQgKj0NCiAgICAgICAgICAxICsNCiAgICAgICAgICAwLjA1ICoNCiAgICAgICAgICAgIE1hdGgubWluKA0KICAgICAgICAgICAgICBHYW1lLk9iamVjdHNbIkN1cnNvciJdLmxldmVsLA0KICAgICAgICAgICAgICBHYW1lLkhhcygiTHVtaW5vdXMgZ2xvdmVzIikgPyAyMCA6IDEwDQogICAgICAgICAgICApOw0KICAgICAgfQ0KDQogICAgICBtdWx0ICo9IEdhbWUuZWZmKCJjbGljayIpOw0KDQogICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJsYWJvciIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIG11bHQgKj0gMS4xNTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG11bHQgKj0gMS4xOw0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgbXVsdCAqPSAxLjA1Ow0KICAgICAgfQ0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuYnVmZnMpIHsNCiAgICAgICAgaWYgKHR5cGVvZiBHYW1lLmJ1ZmZzW2ldLm11bHRDbGljayAhPSAidW5kZWZpbmVkIikNCiAgICAgICAgICBtdWx0ICo9IEdhbWUuYnVmZnNbaV0ubXVsdENsaWNrOw0KICAgICAgfQ0KDQogICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0RyYWdvbiBDdXJzb3InKSkgbXVsdCo9MS4wNTsNCiAgICAgIG11bHQgKj0gMSArIEdhbWUuYXVyYU11bHQoIkRyYWdvbiBDdXJzb3IiKSAqIDAuMDU7DQoNCiAgICAgIHZhciBvdXQgPQ0KICAgICAgICBtdWx0ICoNCiAgICAgICAgR2FtZS5Db21wdXRlQ3BzKA0KICAgICAgICAgIDEsDQogICAgICAgICAgR2FtZS5IYXMoIlJlaW5mb3JjZWQgaW5kZXggZmluZ2VyIikgKw0KICAgICAgICAgICAgR2FtZS5IYXMoIkNhcnBhbCB0dW5uZWwgcHJldmVudGlvbiBjcmVhbSIpICsNCiAgICAgICAgICAgIEdhbWUuSGFzKCJBbWJpZGV4dHJvdXMiKSwNCiAgICAgICAgICBhZGQNCiAgICAgICAgKTsNCg0KICAgICAgb3V0ID0gR2FtZS5ydW5Nb2RIb29rT25WYWx1ZSgiY29va2llc1BlckNsaWNrIiwgb3V0KTsNCg0KICAgICAgaWYgKEdhbWUuaGFzQnVmZigiQ3Vyc2VkIGZpbmdlciIpKQ0KICAgICAgICBvdXQgPSBHYW1lLmJ1ZmZzWyJDdXJzZWQgZmluZ2VyIl0ucG93ZXI7DQogICAgICByZXR1cm4gb3V0Ow0KICAgIH07DQogICAgR2FtZS5jb21wdXRlZE1vdXNlQ3BzID0gMTsNCiAgICBHYW1lLmdsb2JhbENwc011bHQgPSAxOw0KICAgIEdhbWUudW5idWZmZWRDcHMgPSAwOw0KICAgIEdhbWUuYnVpbGRpbmdDcHMgPSAwOw0KICAgIEdhbWUubGFzdENsaWNrID0gMDsNCiAgICBHYW1lLkNhbkNsaWNrID0gMTsNCiAgICBHYW1lLmF1dG9jbGlja2VyRGV0ZWN0ZWQgPSAwOw0KICAgIEdhbWUuQmlnQ29va2llU3RhdGUgPSAwOyAvLzAgPSBub3JtYWwsIDEgPSBjbGlja2VkIChzbWFsbCksIDIgPSByZWxlYXNlZC9ob3ZlcmVkIChiaWcpDQogICAgR2FtZS5CaWdDb29raWVTaXplID0gMDsNCiAgICBHYW1lLkJpZ0Nvb2tpZVNpemVEID0gMDsNCiAgICBHYW1lLkJpZ0Nvb2tpZVNpemVUID0gMTsNCiAgICBHYW1lLmNvb2tpZUNsaWNrU291bmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KSArIDE7DQogICAgR2FtZS5wbGF5Q29va2llQ2xpY2tTb3VuZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChHYW1lLnByZWZzLmNvb2tpZXNvdW5kKQ0KICAgICAgICBQbGF5U291bmQoInNuZC9jbGlja2IiICsgR2FtZS5jb29raWVDbGlja1NvdW5kICsgIi5tcDMiLCAwLjUpOw0KICAgICAgZWxzZSBQbGF5U291bmQoInNuZC9jbGljayIgKyBHYW1lLmNvb2tpZUNsaWNrU291bmQgKyAiLm1wMyIsIDAuNSk7DQogICAgICBHYW1lLmNvb2tpZUNsaWNrU291bmQgKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCkgKyAxOw0KICAgICAgaWYgKEdhbWUuY29va2llQ2xpY2tTb3VuZCA+IDcpIEdhbWUuY29va2llQ2xpY2tTb3VuZCAtPSA3Ow0KICAgIH07DQogICAgR2FtZS5DbGlja0Nvb2tpZSA9IGZ1bmN0aW9uIChlLCBhbW91bnQpIHsNCiAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpOw0KICAgICAgaWYgKGUpIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5PbkFzY2VuZCB8fA0KICAgICAgICBHYW1lLkFzY2VuZFRpbWVyID4gMCB8fA0KICAgICAgICBHYW1lLlQgPCAzIHx8DQogICAgICAgIG5vdyAtIEdhbWUubGFzdENsaWNrIDwgMTAwMCAvICgoZSA/IGUuZGV0YWlsIDogMSkgPT09IDAgPyAzIDogNTApDQogICAgICApIHsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmIChub3cgLSBHYW1lLmxhc3RDbGljayA8IDEwMDAgLyAxNSkgew0KICAgICAgICAgIEdhbWUuYXV0b2NsaWNrZXJEZXRlY3RlZCArPSBHYW1lLmZwczsNCiAgICAgICAgICBpZiAoR2FtZS5hdXRvY2xpY2tlckRldGVjdGVkID49IEdhbWUuZnBzICogNSkNCiAgICAgICAgICAgIEdhbWUuV2luKCJVbmNhbm55IGNsaWNrZXIiKTsNCiAgICAgICAgfQ0KICAgICAgICBHYW1lLmxvc2VTaGltbWVyaW5nVmVpbCgiY2xpY2siKTsNCiAgICAgICAgdmFyIGFtb3VudCA9IGFtb3VudCA/IGFtb3VudCA6IEdhbWUuY29tcHV0ZWRNb3VzZUNwczsNCiAgICAgICAgR2FtZS5FYXJuKGFtb3VudCk7DQogICAgICAgIEdhbWUuaGFuZG1hZGVDb29raWVzICs9IGFtb3VudDsNCiAgICAgICAgaWYgKEdhbWUucHJlZnMucGFydGljbGVzKSB7DQogICAgICAgICAgR2FtZS5wYXJ0aWNsZUFkZCgpOw0KICAgICAgICAgIEdhbWUucGFydGljbGVBZGQoDQogICAgICAgICAgICBHYW1lLm1vdXNlWCwNCiAgICAgICAgICAgIEdhbWUubW91c2VZLA0KICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIC0yIC0gMiwNCiAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAwLjUgKyAwLjc1LA0KICAgICAgICAgICAgMSwNCiAgICAgICAgICAgIDINCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLnByZWZzLm51bWJlcnMpDQogICAgICAgICAgR2FtZS5wYXJ0aWNsZUFkZCgNCiAgICAgICAgICAgIEdhbWUubW91c2VYICsgTWF0aC5yYW5kb20oKSAqIDggLSA0LA0KICAgICAgICAgICAgR2FtZS5tb3VzZVkgLSA4ICsgTWF0aC5yYW5kb20oKSAqIDggLSA0LA0KICAgICAgICAgICAgMCwNCiAgICAgICAgICAgIC0yLA0KICAgICAgICAgICAgMSwNCiAgICAgICAgICAgIDQsDQogICAgICAgICAgICAyLA0KICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAiKyIgKyBCZWF1dGlmeShhbW91bnQsIDEpDQogICAgICAgICAgKTsNCg0KICAgICAgICBHYW1lLnJ1bk1vZEhvb2soImNsaWNrIik7DQoNCiAgICAgICAgR2FtZS5wbGF5Q29va2llQ2xpY2tTb3VuZCgpOw0KICAgICAgICBHYW1lLmNvb2tpZUNsaWNrcysrOw0KDQogICAgICAgIGlmIChHYW1lLmNsaWNrc1RoaXNTZXNzaW9uID09IDApIFBsYXlDdWUoInByZXBsYXkiKTsNCiAgICAgICAgR2FtZS5jbGlja3NUaGlzU2Vzc2lvbisrOw0KICAgICAgICBHYW1lLmxhc3RDbGljayA9IG5vdzsNCiAgICAgIH0NCiAgICAgIEdhbWUuQ2xpY2sgPSAwOw0KICAgIH07DQogICAgR2FtZS5tb3VzZVggPSAwOw0KICAgIEdhbWUubW91c2VZID0gMDsNCiAgICBHYW1lLm1vdXNlWDIgPSAwOw0KICAgIEdhbWUubW91c2VZMiA9IDA7DQogICAgR2FtZS5tb3VzZU1vdmVkID0gMDsNCiAgICBHYW1lLkdldE1vdXNlQ29vcmRzID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgIHZhciBwb3N4ID0gMDsNCiAgICAgIHZhciBwb3N5ID0gMDsNCiAgICAgIGlmICghZSkgdmFyIGUgPSB3aW5kb3cuZXZlbnQ7DQogICAgICBpZiAoZS5wYWdlWCB8fCBlLnBhZ2VZKSB7DQogICAgICAgIHBvc3ggPSBlLnBhZ2VYOw0KICAgICAgICBwb3N5ID0gZS5wYWdlWTsNCiAgICAgIH0gZWxzZSBpZiAoZS5jbGllbnRYIHx8IGUuY2xpZW50WSkgew0KICAgICAgICBwb3N4ID0NCiAgICAgICAgICBlLmNsaWVudFggKw0KICAgICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArDQogICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7DQogICAgICAgIHBvc3kgPQ0KICAgICAgICAgIGUuY2xpZW50WSArDQogICAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKw0KICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7DQogICAgICB9DQogICAgICB2YXIgeCA9IDA7DQogICAgICB2YXIgeSA9IFRvcEJhck9mZnNldDsNCiAgICAgIC8qDQoJCQl2YXIgZWw9bCgnc2VjdGlvbkxlZnQnKTsNCgkJCXdoaWxlKGVsICYmICFpc05hTihlbC5vZmZzZXRMZWZ0KSAmJiAhaXNOYU4oZWwub2Zmc2V0VG9wKSkNCgkJCXsNCgkJCQl4Kz1lbC5vZmZzZXRMZWZ0LWVsLnNjcm9sbExlZnQ7DQoJCQkJeSs9ZWwub2Zmc2V0VG9wLWVsLnNjcm9sbFRvcDsNCgkJCQllbD1lbC5vZmZzZXRQYXJlbnQ7DQoJCQl9Ki8NCiAgICAgIEdhbWUubW91c2VYMiA9IEdhbWUubW91c2VYOw0KICAgICAgR2FtZS5tb3VzZVkyID0gR2FtZS5tb3VzZVk7DQogICAgICBHYW1lLm1vdXNlWCA9IChwb3N4IC0geCkgLyBHYW1lLnNjYWxlOw0KICAgICAgR2FtZS5tb3VzZVkgPSAocG9zeSAtIHkpIC8gR2FtZS5zY2FsZTsNCiAgICAgIEdhbWUubW91c2VNb3ZlZCA9IDE7DQogICAgICBHYW1lLmxhc3RBY3Rpdml0eSA9IEdhbWUudGltZTsNCiAgICB9Ow0KICAgIHZhciBiaWdDb29raWUgPSBsKCJiaWdDb29raWUiKTsNCiAgICBpZiAoR2FtZS5wcmVmcy5zY3JlZW5yZWFkZXIpIHsNCiAgICAgIGJpZ0Nvb2tpZS5hcmlhTGFiZWxsZWRieSA9ICJiaWdDb29raWVMYWJlbCI7DQogICAgICBiaWdDb29raWUuaW5zZXJ0QWRqYWNlbnRIVE1MKA0KICAgICAgICAiYmVmb3JlZW5kIiwNCiAgICAgICAgJzxsYWJlbCBpZD0iYmlnQ29va2llTGFiZWwiIHN0eWxlPSJmb250LXNpemU6MTAwcHggIWltcG9ydGFudDsiIGNsYXNzPSJzck9ubHkiPicgKw0KICAgICAgICAgIGxvYygiQmlnIGNsaWNrYWJsZSBjb29raWUiKSArDQogICAgICAgICAgIjwvbGFiZWw+Ig0KICAgICAgKTsNCiAgICAgIGJpZ0Nvb2tpZS50YWJJbmRleCA9IDE7DQogICAgfQ0KICAgIEdhbWUuQ2xpY2sgPSAwOw0KICAgIEdhbWUubGFzdENsaWNrZWRFbCA9IDA7DQogICAgR2FtZS5jbGlja3NUaGlzU2Vzc2lvbiA9IDA7DQogICAgR2FtZS5jbGlja0Zyb20gPSAwOw0KICAgIEdhbWUuU2Nyb2xsID0gMDsNCiAgICBHYW1lLm1vdXNlRG93biA9IDA7DQogICAgaWYgKCFHYW1lLnRvdWNoRXZlbnRzKSB7DQogICAgICBBZGRFdmVudChiaWdDb29raWUsICJjbGljayIsIEdhbWUuQ2xpY2tDb29raWUpOw0KICAgICAgQWRkRXZlbnQoYmlnQ29va2llLCAibW91c2Vkb3duIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIEdhbWUuQmlnQ29va2llU3RhdGUgPSAxOw0KICAgICAgICBpZiAoR2FtZS5wcmVmcy5jb29raWVzb3VuZCkgew0KICAgICAgICAgIEdhbWUucGxheUNvb2tpZUNsaWNrU291bmQoKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZXZlbnQpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICB9KTsNCiAgICAgIEFkZEV2ZW50KGJpZ0Nvb2tpZSwgIm1vdXNldXAiLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgR2FtZS5CaWdDb29raWVTdGF0ZSA9IDI7DQogICAgICAgIGlmIChldmVudCkgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgIH0pOw0KICAgICAgQWRkRXZlbnQoYmlnQ29va2llLCAibW91c2VvdXQiLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgR2FtZS5CaWdDb29raWVTdGF0ZSA9IDA7DQogICAgICB9KTsNCiAgICAgIEFkZEV2ZW50KGJpZ0Nvb2tpZSwgIm1vdXNlb3ZlciIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICBHYW1lLkJpZ0Nvb2tpZVN0YXRlID0gMjsNCiAgICAgIH0pOw0KICAgICAgQWRkRXZlbnQoZG9jdW1lbnQsICJtb3VzZW1vdmUiLCBHYW1lLkdldE1vdXNlQ29vcmRzKTsNCiAgICAgIEFkZEV2ZW50KGRvY3VtZW50LCAibW91c2Vkb3duIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIEdhbWUubGFzdEFjdGl2aXR5ID0gR2FtZS50aW1lOw0KICAgICAgICBHYW1lLm1vdXNlRG93biA9IDE7DQogICAgICAgIEdhbWUuY2xpY2tGcm9tID0gZXZlbnQudGFyZ2V0Ow0KICAgICAgfSk7DQogICAgICBBZGRFdmVudChkb2N1bWVudCwgIm1vdXNldXAiLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgR2FtZS5sYXN0QWN0aXZpdHkgPSBHYW1lLnRpbWU7DQogICAgICAgIEdhbWUubW91c2VEb3duID0gMDsNCiAgICAgICAgR2FtZS5jbGlja0Zyb20gPSAwOw0KICAgICAgfSk7DQogICAgICBBZGRFdmVudChkb2N1bWVudCwgImNsaWNrIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIEdhbWUubGFzdEFjdGl2aXR5ID0gR2FtZS50aW1lOw0KICAgICAgICBHYW1lLkNsaWNrID0gMTsNCiAgICAgICAgR2FtZS5sYXN0Q2xpY2tlZEVsID0gZXZlbnQudGFyZ2V0Ow0KICAgICAgICBHYW1lLmNsaWNrRnJvbSA9IDA7DQogICAgICB9KTsNCiAgICAgIEdhbWUuaGFuZGxlU2Nyb2xsID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgaWYgKCFlKSBlID0gZXZlbnQ7DQogICAgICAgIEdhbWUuU2Nyb2xsID0gZS5kZXRhaWwgPCAwIHx8IGUud2hlZWxEZWx0YSA+IDAgPyAxIDogLTE7DQogICAgICAgIEdhbWUubGFzdEFjdGl2aXR5ID0gR2FtZS50aW1lOw0KICAgICAgfTsNCiAgICAgIEFkZEV2ZW50KGRvY3VtZW50LCAiRE9NTW91c2VTY3JvbGwiLCBHYW1lLmhhbmRsZVNjcm9sbCk7DQogICAgICBBZGRFdmVudChkb2N1bWVudCwgIm1vdXNld2hlZWwiLCBHYW1lLmhhbmRsZVNjcm9sbCk7DQogICAgfSBlbHNlIHsNCiAgICAgIC8vdG91Y2ggZXZlbnRzDQogICAgICBBZGRFdmVudChiaWdDb29raWUsICJ0b3VjaGVuZCIsIEdhbWUuQ2xpY2tDb29raWUpOw0KICAgICAgQWRkRXZlbnQoYmlnQ29va2llLCAidG91Y2hzdGFydCIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICBHYW1lLkJpZ0Nvb2tpZVN0YXRlID0gMTsNCiAgICAgICAgaWYgKGV2ZW50KSBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgfSk7DQogICAgICBBZGRFdmVudChiaWdDb29raWUsICJ0b3VjaGVuZCIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICBHYW1lLkJpZ0Nvb2tpZVN0YXRlID0gMDsNCiAgICAgICAgaWYgKGV2ZW50KSBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgfSk7DQogICAgICAvL0FkZEV2ZW50KGRvY3VtZW50LCd0b3VjaG1vdmUnLEdhbWUuR2V0TW91c2VDb29yZHMpOw0KICAgICAgQWRkRXZlbnQoZG9jdW1lbnQsICJtb3VzZW1vdmUiLCBHYW1lLkdldE1vdXNlQ29vcmRzKTsNCiAgICAgIEFkZEV2ZW50KGRvY3VtZW50LCAidG91Y2hzdGFydCIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICBHYW1lLmxhc3RBY3Rpdml0eSA9IEdhbWUudGltZTsNCiAgICAgICAgR2FtZS5tb3VzZURvd24gPSAxOw0KICAgICAgfSk7DQogICAgICBBZGRFdmVudChkb2N1bWVudCwgInRvdWNoZW5kIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIEdhbWUubGFzdEFjdGl2aXR5ID0gR2FtZS50aW1lOw0KICAgICAgICBHYW1lLm1vdXNlRG93biA9IDA7DQogICAgICB9KTsNCiAgICAgIEFkZEV2ZW50KGRvY3VtZW50LCAidG91Y2hlbmQiLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgR2FtZS5sYXN0QWN0aXZpdHkgPSBHYW1lLnRpbWU7DQogICAgICAgIEdhbWUuQ2xpY2sgPSAxOw0KICAgICAgfSk7DQogICAgfQ0KDQogICAgR2FtZS5rZXlzID0gW107DQogICAgQWRkRXZlbnQod2luZG93LCAia2V5dXAiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgR2FtZS5sYXN0QWN0aXZpdHkgPSBHYW1lLnRpbWU7DQogICAgICBpZiAoZS5rZXlDb2RlID09IDI3KSB7DQogICAgICAgIGlmIChHYW1lLnByb21wdE9uICYmICFHYW1lLnByb21wdE5vQ2xvc2UpIHsNCiAgICAgICAgICBHYW1lLkNsb3NlUHJvbXB0KCk7DQogICAgICAgICAgUGxheVNvdW5kKCJzbmQvdGlja09mZi5tcDMiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA+IDApIEdhbWUuQXNjZW5kVGltZXIgPSBHYW1lLkFzY2VuZER1cmF0aW9uOw0KICAgICAgfSAvL2VzYyBjbG9zZXMgcHJvbXB0DQogICAgICBpZiAoR2FtZS5wcm9tcHRPbikgew0KICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSBHYW1lLkNvbmZpcm1Qcm9tcHQoKTsgLy9lbnRlciBjb25maXJtcyBwcm9tcHQNCiAgICAgIH0NCiAgICAgIEdhbWUua2V5c1tlLmtleUNvZGVdID0gMDsNCiAgICB9KTsNCiAgICBBZGRFdmVudCh3aW5kb3csICJrZXlkb3duIiwgZnVuY3Rpb24gKGUpIHsNCiAgICAgIGlmIChHYW1lLnByb21wdE9uKSB7DQogICAgICAgIGlmIChlLmtleUNvZGUgPT0gOSkgew0KICAgICAgICAgIC8vdGFiIHRvIHNoaWZ0IHRocm91Z2ggcHJvbXB0IGJ1dHRvbnMNCiAgICAgICAgICBpZiAoZS5zaGlmdEtleSkgR2FtZS5Gb2N1c1Byb21wdE9wdGlvbigtMSk7DQogICAgICAgICAgZWxzZSBHYW1lLkZvY3VzUHJvbXB0T3B0aW9uKDEpOw0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKCFHYW1lLk9uQXNjZW5kICYmIEdhbWUuQXNjZW5kVGltZXIgPT0gMCkgew0KICAgICAgICBpZiAoZS5jdHJsS2V5ICYmIGUua2V5Q29kZSA9PSA4Mykgew0KICAgICAgICAgIEdhbWUudG9TYXZlID0gdHJ1ZTsNCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIH0gLy9jdHJsLXMgc2F2ZXMgdGhlIGdhbWUNCiAgICAgICAgZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUua2V5Q29kZSA9PSA3OSkgew0KICAgICAgICAgIEdhbWUuSW1wb3J0U2F2ZSgpOw0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgfSAvL2N0cmwtbyBvcGVucyB0aGUgaW1wb3J0IG1lbnUNCiAgICAgIH0NCiAgICAgIGlmICgoZS5rZXlDb2RlID09IDE2IHx8IGUua2V5Q29kZSA9PSAxNykgJiYgR2FtZS50b29sdGlwLmR5bmFtaWMpDQogICAgICAgIEdhbWUudG9vbHRpcC51cGRhdGUoKTsNCiAgICAgIEdhbWUua2V5c1tlLmtleUNvZGVdID0gMTsNCiAgICAgIGlmIChlLmtleUNvZGUgPT0gOSkgR2FtZS5rZXlzID0gW107IC8vcmVzZXQga2V5cyBvbiB0YWIgcHJlc3MNCiAgICB9KTsNCg0KICAgIEFkZEV2ZW50KHdpbmRvdywgInZpc2liaWxpdHljaGFuZ2UiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgR2FtZS5rZXlzID0gW107IC8vcmVzZXQgYWxsIGtleSBwcmVzc2VkIG9uIHZpc2liaWxpdHkgY2hhbmdlIChzaG91bGQgaGVscCBwcmV2ZW50IGN0cmwgc3RpbGwgYmVpbmcgZG93biBhZnRlciBjdHJsLXRhYikNCiAgICB9KTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlDUFMgUkVDQUxDVUxBVE9SDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLmhlYXZlbmx5UG93ZXIgPSAxOyAvL2hvdyBtYW55IENwUyBwZXJjZW50cyBhIHNpbmdsZSBoZWF2ZW5seSBjaGlwIGdpdmVzDQogICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICBHYW1lLmNvb2tpZXNQc0J5VHlwZSA9IHt9Ow0KICAgIEdhbWUuY29va2llc011bHRCeVR5cGUgPSB7fTsNCiAgICAvL2Rpc3BsYXkgYmFycyB3aXRoIGh0dHA6Ly9jb2RlcGVuLmlvL2Fub24vcGVuL3dhR3lFSg0KICAgIEdhbWUuZWZmcyA9IHt9Ow0KICAgIEdhbWUuZWZmID0gZnVuY3Rpb24gKG5hbWUsIGRlZikgew0KICAgICAgaWYgKHR5cGVvZiBHYW1lLmVmZnNbbmFtZV0gPT09ICJ1bmRlZmluZWQiKQ0KICAgICAgICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gInVuZGVmaW5lZCIgPyAxIDogZGVmOw0KICAgICAgZWxzZSByZXR1cm4gR2FtZS5lZmZzW25hbWVdOw0KICAgIH07DQoNCiAgICBHYW1lLkNhbGN1bGF0ZUdhaW5zID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5jb29raWVzUHMgPSAwOw0KICAgICAgdmFyIG11bHQgPSAxOw0KICAgICAgLy9hZGQgdXAgZWZmZWN0IGJvbnVzZXMgZnJvbSBidWlsZGluZyBtaW5pZ2FtZXMNCiAgICAgIHZhciBlZmZzID0ge307DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLm1pbmlnYW1lTG9hZGVkICYmIEdhbWUuT2JqZWN0c1tpXS5taW5pZ2FtZS5lZmZzKSB7DQogICAgICAgICAgdmFyIG15RWZmcyA9IEdhbWUuT2JqZWN0c1tpXS5taW5pZ2FtZS5lZmZzOw0KICAgICAgICAgIGZvciAodmFyIGlpIGluIG15RWZmcykgew0KICAgICAgICAgICAgaWYgKGVmZnNbaWldKSBlZmZzW2lpXSAqPSBteUVmZnNbaWldOw0KICAgICAgICAgICAgZWxzZSBlZmZzW2lpXSA9IG15RWZmc1tpaV07DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBHYW1lLmVmZnMgPSBlZmZzOw0KDQogICAgICBpZiAoR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEpDQogICAgICAgIG11bHQgKz0NCiAgICAgICAgICBwYXJzZUZsb2F0KEdhbWUucHJlc3RpZ2UpICoNCiAgICAgICAgICAwLjAxICoNCiAgICAgICAgICBHYW1lLmhlYXZlbmx5UG93ZXIgKg0KICAgICAgICAgIEdhbWUuR2V0SGVhdmVubHlNdWx0aXBsaWVyKCk7DQoNCiAgICAgIG11bHQgKj0gR2FtZS5lZmYoImNwcyIpOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIkhlcmFsZHMiKSAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkNCiAgICAgICAgbXVsdCAqPSAxICsgMC4wMSAqIEdhbWUuaGVyYWxkczsNCg0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmNvb2tpZVVwZ3JhZGVzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuY29va2llVXBncmFkZXNbaV07DQogICAgICAgIGlmIChHYW1lLkhhcyhtZS5uYW1lKSkgew0KICAgICAgICAgIG11bHQgKj0NCiAgICAgICAgICAgIDEgKw0KICAgICAgICAgICAgKHR5cGVvZiBtZS5wb3dlciA9PT0gImZ1bmN0aW9uIiA/IG1lLnBvd2VyKG1lKSA6IG1lLnBvd2VyKSAqIDAuMDE7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgaWYgKEdhbWUuSGFzKCJTcGVjaWFsaXplZCBjaG9jb2xhdGUgY2hpcHMiKSkgbXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJEZXNpZ25lciBjb2NvYSBiZWFucyIpKSBtdWx0ICo9IDEuMDI7DQogICAgICBpZiAoR2FtZS5IYXMoIlVuZGVyd29ybGQgb3ZlbnMiKSkgbXVsdCAqPSAxLjAzOw0KICAgICAgaWYgKEdhbWUuSGFzKCJFeG90aWMgbnV0cyIpKSBtdWx0ICo9IDEuMDQ7DQogICAgICBpZiAoR2FtZS5IYXMoIkFyY2FuZSBzdWdhciIpKSBtdWx0ICo9IDEuMDU7DQoNCiAgICAgIGlmIChHYW1lLkhhcygiSW5jcmVhc2VkIG1lcnJpbmVzcyIpKSBtdWx0ICo9IDEuMTU7DQogICAgICBpZiAoR2FtZS5IYXMoIkltcHJvdmVkIGpvbGxpbmVzcyIpKSBtdWx0ICo9IDEuMTU7DQogICAgICBpZiAoR2FtZS5IYXMoIkEgbHVtcCBvZiBjb2FsIikpIG11bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQW4gaXRjaHkgc3dlYXRlciIpKSBtdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIlNhbnRhJ3MgZG9taW5pb24iKSkgbXVsdCAqPSAxLjI7DQoNCiAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSAjMTAwIikpIG11bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSAjMTAxIikpIG11bHQgKj0gMS4wNzsNCg0KICAgICAgaWYgKEdhbWUuSGFzKCJEcmFnb24gc2NhbGUiKSkgbXVsdCAqPSAxLjAzOw0KDQogICAgICB2YXIgYnVpbGRNdWx0ID0gMTsNCiAgICAgIGlmIChHYW1lLmhhc0dvZCkgew0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImFzY2V0aWNpc20iKTsNCiAgICAgICAgaWYgKGdvZEx2bCA9PSAxKSBtdWx0ICo9IDEuMTU7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAyKSBtdWx0ICo9IDEuMTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIG11bHQgKj0gMS4wNTsNCg0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImFnZXMiKTsNCiAgICAgICAgaWYgKGdvZEx2bCA9PSAxKQ0KICAgICAgICAgIG11bHQgKj0NCiAgICAgICAgICAgIDEgKw0KICAgICAgICAgICAgMC4xNSAqIE1hdGguc2luKChEYXRlLm5vdygpIC8gMTAwMCAvICg2MCAqIDYwICogMykpICogTWF0aC5QSSAqIDIpOw0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikNCiAgICAgICAgICBtdWx0ICo9DQogICAgICAgICAgICAxICsNCiAgICAgICAgICAgIDAuMTUgKiBNYXRoLnNpbigoRGF0ZS5ub3coKSAvIDEwMDAgLyAoNjAgKiA2MCAqIDEyKSkgKiBNYXRoLlBJICogMik7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKQ0KICAgICAgICAgIG11bHQgKj0NCiAgICAgICAgICAgIDEgKw0KICAgICAgICAgICAgMC4xNSAqIE1hdGguc2luKChEYXRlLm5vdygpIC8gMTAwMCAvICg2MCAqIDYwICogMjQpKSAqIE1hdGguUEkgKiAyKTsNCg0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImRlY2FkZW5jZSIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIGJ1aWxkTXVsdCAqPSAwLjkzOw0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgYnVpbGRNdWx0ICo9IDAuOTU7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBidWlsZE11bHQgKj0gMC45ODsNCg0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImluZHVzdHJ5Iik7DQogICAgICAgIGlmIChnb2RMdmwgPT0gMSkgYnVpbGRNdWx0ICo9IDEuMTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIGJ1aWxkTXVsdCAqPSAxLjA2Ow0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgYnVpbGRNdWx0ICo9IDEuMDM7DQoNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJsYWJvciIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIGJ1aWxkTXVsdCAqPSAwLjk3Ow0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgYnVpbGRNdWx0ICo9IDAuOTg7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBidWlsZE11bHQgKj0gMC45OTsNCiAgICAgIH0NCg0KICAgICAgaWYgKEdhbWUuSGFzKCJTYW50YSdzIGxlZ2FjeSIpKSBtdWx0ICo9IDEgKyAoR2FtZS5zYW50YUxldmVsICsgMSkgKiAwLjAzOw0KDQogICAgICBHYW1lLm1pbGtQcm9ncmVzcyA9IEdhbWUuQWNoaWV2ZW1lbnRzT3duZWQgLyAyNTsNCiAgICAgIHZhciBtaWxrTXVsdCA9IDE7DQogICAgICBpZiAoR2FtZS5IYXMoIlNhbnRhJ3MgbWlsayBhbmQgY29va2llcyIpKSBtaWxrTXVsdCAqPSAxLjA1Ow0KICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdCcmVhdGggb2YgTWlsaycpKSBtaWxrTXVsdCo9MS4wNTsNCiAgICAgIG1pbGtNdWx0ICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJCcmVhdGggb2YgTWlsayIpICogMC4wNTsNCiAgICAgIGlmIChHYW1lLmhhc0dvZCkgew0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoIm1vdGhlciIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIG1pbGtNdWx0ICo9IDEuMTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG1pbGtNdWx0ICo9IDEuMDU7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBtaWxrTXVsdCAqPSAxLjAzOw0KICAgICAgfQ0KICAgICAgbWlsa011bHQgKj0gR2FtZS5lZmYoIm1pbGsiKTsNCg0KICAgICAgdmFyIGNhdE11bHQgPSAxOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBoZWxwZXJzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4xICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiB3b3JrZXJzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4xMjUgKiBtaWxrTXVsdDsNCiAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIGVuZ2luZWVycyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMTUgKiBtaWxrTXVsdDsNCiAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIG92ZXJzZWVycyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMTc1ICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBtYW5hZ2VycyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMiAqIG1pbGtNdWx0Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYWNjb3VudGFudHMiKSkNCiAgICAgICAgY2F0TXVsdCAqPSAxICsgR2FtZS5taWxrUHJvZ3Jlc3MgKiAwLjIgKiBtaWxrTXVsdDsNCiAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIHNwZWNpYWxpc3RzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4yICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBleHBlcnRzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4yICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBjb25zdWx0YW50cyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMiAqIG1pbGtNdWx0Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYXNzaXN0YW50cyB0byB0aGUgcmVnaW9uYWwgbWFuYWdlciIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMTc1ICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBtYXJrZXRlZXJzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4xNSAqIG1pbGtNdWx0Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYW5hbHlzdHMiKSkNCiAgICAgICAgY2F0TXVsdCAqPSAxICsgR2FtZS5taWxrUHJvZ3Jlc3MgKiAwLjEyNSAqIG1pbGtNdWx0Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gZXhlY3V0aXZlcyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMTE1ICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBhZG1pbnMiKSkNCiAgICAgICAgY2F0TXVsdCAqPSAxICsgR2FtZS5taWxrUHJvZ3Jlc3MgKiAwLjExICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBhbmdlbHMiKSkNCiAgICAgICAgY2F0TXVsdCAqPSAxICsgR2FtZS5taWxrUHJvZ3Jlc3MgKiAwLjEgKiBtaWxrTXVsdDsNCiAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSAjMTAzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4wNSAqIG1pbGtNdWx0Ow0KDQogICAgICBHYW1lLmNvb2tpZXNNdWx0QnlUeXBlWyJraXR0ZW5zIl0gPSBjYXRNdWx0Ow0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNbaV07DQogICAgICAgIG1lLnN0b3JlZENwcyA9IG1lLmNwcyhtZSk7DQogICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkNCiAgICAgICAgICBtZS5zdG9yZWRDcHMgKj0gKDEgKyBtZS5sZXZlbCAqIDAuMDEpICogYnVpbGRNdWx0Ow0KICAgICAgICBpZiAoDQogICAgICAgICAgbWUuaWQgPT0gMSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJNaWxraGVscCZyZWc7IGxhY3Rvc2UgaW50b2xlcmFuY2UgcmVsaWVmIHRhYmxldHMiKQ0KICAgICAgICApDQogICAgICAgICAgbWUuc3RvcmVkQ3BzICo9IDEgKyAwLjA1ICogR2FtZS5taWxrUHJvZ3Jlc3MgKiBtaWxrTXVsdDsgLy90aGlzIHVzZWQgdG8gYmUgIm1lLnN0b3JlZENwcyo9MSswLjEqTWF0aC5wb3coY2F0TXVsdC0xLDAuNSkiIHdoaWNoIHdhcy4gaG1tDQogICAgICAgIG1lLnN0b3JlZFRvdGFsQ3BzID0gbWUuYW1vdW50ICogbWUuc3RvcmVkQ3BzOw0KICAgICAgICBHYW1lLmNvb2tpZXNQcyArPSBtZS5zdG9yZWRUb3RhbENwczsNCiAgICAgICAgR2FtZS5jb29raWVzUHNCeVR5cGVbbWUubmFtZV0gPSBtZS5zdG9yZWRUb3RhbENwczsNCiAgICAgIH0NCiAgICAgIC8vY3BzIGZyb20gYnVpbGRpbmdzIG9ubHkNCiAgICAgIEdhbWUuYnVpbGRpbmdDcHMgPSBHYW1lLmNvb2tpZXNQczsNCg0KICAgICAgaWYgKEdhbWUuSGFzKCciZWdnIicpKSB7DQogICAgICAgIEdhbWUuY29va2llc1BzICs9IDk7DQogICAgICAgIEdhbWUuY29va2llc1BzQnlUeXBlWyciZWdnIiddID0gOTsNCiAgICAgIH0gLy8iZWdnIg0KDQogICAgICBtdWx0ICo9IGNhdE11bHQ7DQoNCiAgICAgIHZhciBlZ2dNdWx0ID0gMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQ2hpY2tlbiBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJEdWNrIGVnZyIpKSBlZ2dNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIlR1cmtleSBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJRdWFpbCBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJSb2JpbiBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJPc3RyaWNoIGVnZyIpKSBlZ2dNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIkNhc3Nvd2FyeSBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJTYWxtb24gcm9lIikpIGVnZ011bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiRnJvZ3NwYXduIikpIGVnZ011bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiU2hhcmsgZWdnIikpIGVnZ011bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiVHVydGxlIGVnZyIpKSBlZ2dNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIkFudCBsYXJ2YSIpKSBlZ2dNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIkNlbnR1cnkgZWdnIikpIHsNCiAgICAgICAgLy90aGUgYm9vc3QgaW5jcmVhc2VzIGEgbGl0dGxlIGV2ZXJ5IGRheSwgd2l0aCBkaW1pbmlzaGluZyByZXR1cm5zIHVwIHRvICsxMCUgb24gdGhlIDEwMHRoIGRheQ0KICAgICAgICB2YXIgZGF5ID0NCiAgICAgICAgICAoTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIEdhbWUuc3RhcnREYXRlKSAvIDEwMDAgLyAxMCkgKiAxMCkgLw0KICAgICAgICAgIDYwIC8NCiAgICAgICAgICA2MCAvDQogICAgICAgICAgMjQ7DQogICAgICAgIGRheSA9IE1hdGgubWluKGRheSwgMTAwKTsNCiAgICAgICAgZWdnTXVsdCAqPSAxICsgKDEgLSBNYXRoLnBvdygxIC0gZGF5IC8gMTAwLCAzKSkgKiAwLjE7DQogICAgICB9DQoNCiAgICAgIEdhbWUuY29va2llc011bHRCeVR5cGVbImVnZ3MiXSA9IGVnZ011bHQ7DQogICAgICBtdWx0ICo9IGVnZ011bHQ7DQoNCiAgICAgIGlmIChHYW1lLkhhcygiU3VnYXIgYmFraW5nIikpDQogICAgICAgIG11bHQgKj0gMSArIE1hdGgubWluKDEwMCwgR2FtZS5sdW1wcykgKiAwLjAxOw0KDQogICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ1JhZGlhbnQgQXBwZXRpdGUnKSkgbXVsdCo9MjsNCiAgICAgIG11bHQgKj0gMSArIEdhbWUuYXVyYU11bHQoIlJhZGlhbnQgQXBwZXRpdGUiKTsNCg0KICAgICAgdmFyIHJhd0Nvb2tpZXNQcyA9IEdhbWUuY29va2llc1BzICogbXVsdDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5DcHNBY2hpZXZlbWVudHMpIHsNCiAgICAgICAgaWYgKHJhd0Nvb2tpZXNQcyA+PSBHYW1lLkNwc0FjaGlldmVtZW50c1tpXS50aHJlc2hvbGQpDQogICAgICAgICAgR2FtZS5XaW4oR2FtZS5DcHNBY2hpZXZlbWVudHNbaV0ubmFtZSk7DQogICAgICB9DQogICAgICBHYW1lLmNvb2tpZXNQc1JhdyA9IHJhd0Nvb2tpZXNQczsNCiAgICAgIEdhbWUuY29va2llc1BzUmF3SGlnaGVzdCA9IE1hdGgubWF4KA0KICAgICAgICBHYW1lLmNvb2tpZXNQc1Jhd0hpZ2hlc3QsDQogICAgICAgIHJhd0Nvb2tpZXNQcw0KICAgICAgKTsNCg0KICAgICAgdmFyIG4gPSBHYW1lLnNoaW1tZXJUeXBlc1siZ29sZGVuIl0ubjsNCiAgICAgIHZhciBhdXJhTXVsdCA9IEdhbWUuYXVyYU11bHQoIkRyYWdvbidzIEZvcnR1bmUiKTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7DQogICAgICAgIG11bHQgKj0gMSArIGF1cmFNdWx0ICogMS4yMzsNCiAgICAgIH0NCg0KICAgICAgbmFtZSA9IEdhbWUuYmFrZXJ5TmFtZS50b0xvd2VyQ2FzZSgpOw0KICAgICAgaWYgKG5hbWUgPT0gIm9ydGVpbCIpIG11bHQgKj0gMC45OTsNCiAgICAgIGVsc2UgaWYgKG5hbWUgPT0gIm9ydGllbCIpIG11bHQgKj0gMC45ODsgLy9vciBzbyBoZWxwIG1lDQoNCiAgICAgIHZhciBzdWNraW5nID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS53cmlua2xlcnMpIHsNCiAgICAgICAgaWYgKEdhbWUud3JpbmtsZXJzW2ldLnBoYXNlID09IDIpIHsNCiAgICAgICAgICBzdWNraW5nKys7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHZhciBzdWNrUmF0ZSA9IDEgLyAyMDsgLy9lYWNoIHdyaW5rbGVyIGVhdHMgYSB0d2VudGlldGggb2YgeW91ciBDcFMNCiAgICAgIHN1Y2tSYXRlICo9IEdhbWUuZWZmKCJ3cmlua2xlckVhdCIpOw0KDQogICAgICBHYW1lLmNwc1N1Y2tlZCA9IHN1Y2tpbmcgKiBzdWNrUmF0ZTsNCg0KICAgICAgaWYgKEdhbWUuSGFzKCJFbGRlciBDb3ZlbmFudCIpKSBtdWx0ICo9IDAuOTU7DQoNCiAgICAgIGlmIChHYW1lLkhhcygiR29sZGVuIHN3aXRjaCBbb2ZmXSIpKSB7DQogICAgICAgIHZhciBnb2xkZW5Td2l0Y2hNdWx0ID0gMS41Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIlJlc2lkdWFsIGx1Y2siKSkgew0KICAgICAgICAgIHZhciB1cGdyYWRlcyA9IEdhbWUuZ29sZGVuQ29va2llVXBncmFkZXM7DQogICAgICAgICAgZm9yICh2YXIgaSBpbiB1cGdyYWRlcykgew0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKHVwZ3JhZGVzW2ldKSkgZ29sZGVuU3dpdGNoTXVsdCArPSAwLjE7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIG11bHQgKj0gZ29sZGVuU3dpdGNoTXVsdDsNCiAgICAgIH0NCiAgICAgIGlmIChHYW1lLkhhcygiU2hpbW1lcmluZyB2ZWlsIFtvZmZdIikpIHsNCiAgICAgICAgbXVsdCAqPSAxICsgR2FtZS5nZXRWZWlsQm9vc3QoKTsNCiAgICAgIH0NCiAgICAgIGlmIChHYW1lLkhhcygiTWFnaWMgc2hlbmFuaWdhbnMiKSkgbXVsdCAqPSAxMDAwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJPY2N1bHQgb2JzdHJ1Y3Rpb24iKSkgbXVsdCAqPSAwOw0KDQogICAgICBHYW1lLmNvb2tpZXNQcyA9IEdhbWUucnVuTW9kSG9va09uVmFsdWUoImNwcyIsIEdhbWUuY29va2llc1BzKTsNCg0KICAgICAgLy9jcHMgd2l0aG91dCBnb2xkZW4gY29va2llIGVmZmVjdHMNCiAgICAgIEdhbWUudW5idWZmZWRDcHMgPSBHYW1lLmNvb2tpZXNQcyAqIG11bHQ7DQoNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5idWZmcykgew0KICAgICAgICBpZiAodHlwZW9mIEdhbWUuYnVmZnNbaV0ubXVsdENwUyAhPT0gInVuZGVmaW5lZCIpDQogICAgICAgICAgbXVsdCAqPSBHYW1lLmJ1ZmZzW2ldLm11bHRDcFM7DQogICAgICB9DQoNCiAgICAgIEdhbWUuZ2xvYmFsQ3BzTXVsdCA9IG11bHQ7DQogICAgICBHYW1lLmNvb2tpZXNQcyAqPSBHYW1lLmdsb2JhbENwc011bHQ7DQoNCiAgICAgIC8vaWYgKEdhbWUuaGFzQnVmZignQ3Vyc2VkIGZpbmdlcicpKSBHYW1lLmNvb2tpZXNQcz0wOw0KDQogICAgICBHYW1lLmNvbXB1dGVkTW91c2VDcHMgPSBHYW1lLm1vdXNlQ3BzKCk7DQoNCiAgICAgIEdhbWUuY29tcHV0ZUx1bXBUaW1lcygpOw0KDQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAwOw0KICAgIH07DQoNCiAgICBHYW1lLmRyb3BSYXRlTXVsdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciByYXRlID0gMTsNCiAgICAgIGlmIChHYW1lLkhhcygiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIpKSByYXRlICo9IDEuMDM7DQogICAgICBpZiAoR2FtZS5IYXMoIkRyYWdvbiB0ZWRkeSBiZWFyIikpIHJhdGUgKj0gMS4wMzsNCiAgICAgIHJhdGUgKj0gR2FtZS5lZmYoIml0ZW1Ecm9wcyIpOw0KICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdNaW5kIE92ZXIgTWF0dGVyJykpIHJhdGUqPTEuMjU7DQogICAgICByYXRlICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJNaW5kIE92ZXIgTWF0dGVyIikgKiAwLjI1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJTYW50YSdzIGJvdHRvbWxlc3MgYmFnIikpIHJhdGUgKj0gMS4xOw0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLkhhcygiQ29zbWljIGJlZ2lubmVyJ3MgbHVjayIpICYmDQogICAgICAgICFHYW1lLkhhcygiSGVhdmVubHkgY2hpcCBzZWNyZXQiKQ0KICAgICAgKQ0KICAgICAgICByYXRlICo9IDU7DQogICAgICByZXR1cm4gcmF0ZTsNCiAgICB9Ow0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlTSElNTUVSUyAoR09MREVOIENPT0tJRVMgJiBTVUNIKQ0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuc2hpbW1lcnNMID0gbCgic2hpbW1lcnMiKTsNCiAgICBHYW1lLnNoaW1tZXJzID0gW107IC8vYWxsIHNoaW1tZXJzIGN1cnJlbnRseSBvbiB0aGUgc2NyZWVuDQogICAgR2FtZS5zaGltbWVyc04gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7DQogICAgR2FtZS5zaGltbWVyID0gZnVuY3Rpb24gKHR5cGUsIG9iaiwgbm9Db3VudCkgew0KICAgICAgdGhpcy50eXBlID0gdHlwZTsNCg0KICAgICAgdGhpcy5sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICB0aGlzLmwuY2xhc3NOYW1lID0gInNoaW1tZXIiOw0KICAgICAgaWYgKCFHYW1lLnRvdWNoRXZlbnRzKSB7DQogICAgICAgIEFkZEV2ZW50KA0KICAgICAgICAgIHRoaXMubCwNCiAgICAgICAgICAiY2xpY2siLA0KICAgICAgICAgIChmdW5jdGlvbiAod2hhdCkgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgICB3aGF0LnBvcChldmVudCk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0pKHRoaXMpDQogICAgICAgICk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBBZGRFdmVudCgNCiAgICAgICAgICB0aGlzLmwsDQogICAgICAgICAgInRvdWNoZW5kIiwNCiAgICAgICAgICAoZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgICAgd2hhdC5wb3AoZXZlbnQpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KSh0aGlzKQ0KICAgICAgICApOw0KICAgICAgfSAvL3RvdWNoIGV2ZW50cw0KDQogICAgICB0aGlzLnggPSAwOw0KICAgICAgdGhpcy55ID0gMDsNCiAgICAgIHRoaXMuaWQgPSBHYW1lLnNoaW1tZXJzTjsNCg0KICAgICAgdGhpcy5mb3JjZSA9ICIiOw0KICAgICAgdGhpcy5mb3JjZU9iaiA9IG9iaiB8fCAwOw0KICAgICAgaWYgKHRoaXMuZm9yY2VPYmoudHlwZSkgdGhpcy5mb3JjZSA9IHRoaXMuZm9yY2VPYmoudHlwZTsNCiAgICAgIHRoaXMubm9Db3VudCA9IG5vQ291bnQ7DQogICAgICBpZiAoIXRoaXMubm9Db3VudCkgew0KICAgICAgICBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdLm4rKzsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgIH0NCg0KICAgICAgdGhpcy5pbml0KCk7DQoNCiAgICAgIEdhbWUuc2hpbW1lcnNMLmFwcGVuZENoaWxkKHRoaXMubCk7DQogICAgICBHYW1lLnNoaW1tZXJzLnB1c2godGhpcyk7DQogICAgICBHYW1lLnNoaW1tZXJzTisrOw0KICAgIH07DQogICAgR2FtZS5zaGltbWVyLnByb3RvdHlwZS5pbml0ID0NCiAgICAgIGZ1bmN0aW9uICgpIC8vZXhlY3V0ZWQgd2hlbiB0aGUgc2hpbW1lciBpcyBjcmVhdGVkDQogICAgICB7DQogICAgICAgIEdhbWUuc2hpbW1lclR5cGVzW3RoaXMudHlwZV0uaW5pdEZ1bmModGhpcyk7DQogICAgICB9Ow0KICAgIEdhbWUuc2hpbW1lci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkgLy9leGVjdXRlZCBldmVyeSBmcmFtZQ0KICAgIHsNCiAgICAgIEdhbWUuc2hpbW1lclR5cGVzW3RoaXMudHlwZV0udXBkYXRlRnVuYyh0aGlzKTsNCiAgICB9Ow0KICAgIEdhbWUuc2hpbW1lci5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKA0KICAgICAgZXZlbnQgLy9leGVjdXRlZCB3aGVuIHRoZSBzaGltbWVyIGlzIHBvcHBlZCBieSB0aGUgcGxheWVyDQogICAgKSB7DQogICAgICBpZiAoZXZlbnQpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICBHYW1lLmxvc2VTaGltbWVyaW5nVmVpbCgic2hpbW1lciIpOw0KICAgICAgR2FtZS5DbGljayA9IDA7DQogICAgICBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdLnBvcEZ1bmModGhpcyk7DQogICAgfTsNCiAgICBHYW1lLnNoaW1tZXIucHJvdG90eXBlLmRpZSA9DQogICAgICBmdW5jdGlvbiAoKSAvL2V4ZWN1dGVkIGFmdGVyIHRoZSBzaGltbWVyIGRpc2FwcGVhcnMgKGZyb20gb2xkIGFnZSBvciBwb3BwaW5nKQ0KICAgICAgew0KICAgICAgICBpZiAoR2FtZS5zaGltbWVyVHlwZXNbdGhpcy50eXBlXS5zcGF3bnNPblRpbWVyICYmIHRoaXMuc3Bhd25MZWFkKSB7DQogICAgICAgICAgLy9pZiB0aGlzIHdhcyB0aGUgc3Bhd24gbGVhZCBmb3IgdGhpcyBzaGltbWVyIHR5cGUsIHNldCB0aGUgc2hpbW1lciB0eXBlJ3MgInNwYXduZWQiIHRvIDAgYW5kIHJlc3RhcnQgaXRzIHNwYXduIHRpbWVyDQogICAgICAgICAgdmFyIHR5cGUgPSBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdOw0KICAgICAgICAgIHR5cGUudGltZSA9IDA7DQogICAgICAgICAgdHlwZS5zcGF3bmVkID0gMDsNCiAgICAgICAgICB0eXBlLm1pblRpbWUgPSB0eXBlLmdldE1pblRpbWUodGhpcyk7DQogICAgICAgICAgdHlwZS5tYXhUaW1lID0gdHlwZS5nZXRNYXhUaW1lKHRoaXMpOw0KICAgICAgICB9DQogICAgICAgIEdhbWUuc2hpbW1lcnNMLnJlbW92ZUNoaWxkKHRoaXMubCk7DQogICAgICAgIGlmIChHYW1lLnNoaW1tZXJzLmluZGV4T2YodGhpcykgIT0gLTEpDQogICAgICAgICAgR2FtZS5zaGltbWVycy5zcGxpY2UoR2FtZS5zaGltbWVycy5pbmRleE9mKHRoaXMpLCAxKTsNCiAgICAgICAgaWYgKCF0aGlzLm5vQ291bnQpIHsNCiAgICAgICAgICBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdLm4gPSBNYXRoLm1heCgNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdLm4gLSAxDQogICAgICAgICAgKTsNCiAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICB9DQogICAgICB9Ow0KDQogICAgR2FtZS51cGRhdGVTaGltbWVycyA9DQogICAgICBmdW5jdGlvbiAoKSAvL3J1biBzaGltbWVyIGZ1bmN0aW9ucywga2lsbCBvdmVydGltZWQgc2hpbW1lcnMgYW5kIHNwYXduIG5ldyBvbmVzDQogICAgICB7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5zaGltbWVycykgew0KICAgICAgICAgIEdhbWUuc2hpbW1lcnNbaV0udXBkYXRlKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvL2Nvb2tpZSBzdG9ybSENCiAgICAgICAgaWYgKEdhbWUuaGFzQnVmZigiQ29va2llIHN0b3JtIikgJiYgTWF0aC5yYW5kb20oKSA8IDAuNSkgew0KICAgICAgICAgIHZhciBuZXdTaGltbWVyID0gbmV3IEdhbWUuc2hpbW1lcigNCiAgICAgICAgICAgICJnb2xkZW4iLA0KICAgICAgICAgICAgeyB0eXBlOiAiY29va2llIHN0b3JtIGRyb3AiIH0sDQogICAgICAgICAgICAxDQogICAgICAgICAgKTsNCiAgICAgICAgICBuZXdTaGltbWVyLmR1ciA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogNCArIDEpOw0KICAgICAgICAgIG5ld1NoaW1tZXIubGlmZSA9IE1hdGguY2VpbChHYW1lLmZwcyAqIG5ld1NoaW1tZXIuZHVyKTsNCiAgICAgICAgICAvL25ld1NoaW1tZXIuZm9yY2U9J2Nvb2tpZSBzdG9ybSBkcm9wJzsNCiAgICAgICAgICBuZXdTaGltbWVyLnNpemVNdWx0ID0gTWF0aC5yYW5kb20oKSAqIDAuNzUgKyAwLjI1Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy9zcGF3biBzaGltbWVycw0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2hpbW1lclR5cGVzKSB7DQogICAgICAgICAgdmFyIG1lID0gR2FtZS5zaGltbWVyVHlwZXNbaV07DQogICAgICAgICAgaWYgKG1lLnNwYXduc09uVGltZXIgJiYgbWUuc3Bhd25Db25kaXRpb25zKCkpIHsNCiAgICAgICAgICAgIC8vb25seSBydW4gb24gc2hpbW1lciB0eXBlcyB0aGF0IHdvcmsgb24gYSB0aW1lcg0KICAgICAgICAgICAgaWYgKCFtZS5zcGF3bmVkKSB7DQogICAgICAgICAgICAgIC8vbm8gc2hpbW1lciBzcGF3bmVkIGZvciB0aGlzIHR5cGU/IGNoZWNrIHRoZSB0aW1lciBhbmQgdHJ5IHRvIHNwYXduIG9uZQ0KICAgICAgICAgICAgICBtZS50aW1lKys7DQogICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwNCiAgICAgICAgICAgICAgICBNYXRoLnBvdygNCiAgICAgICAgICAgICAgICAgIE1hdGgubWF4KA0KICAgICAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgICAgICAobWUudGltZSAtIG1lLm1pblRpbWUpIC8gKG1lLm1heFRpbWUgLSBtZS5taW5UaW1lKQ0KICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgIDUNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIHZhciBuZXdTaGltbWVyID0gbmV3IEdhbWUuc2hpbW1lcihpKTsNCiAgICAgICAgICAgICAgICBuZXdTaGltbWVyLnNwYXduTGVhZCA9IDE7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgR2FtZS5IYXMoIkRpc3RpbGxlZCBlc3NlbmNlIG9mIHJlZG91YmxlZCBsdWNrIikgJiYNCiAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAwLjAxDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgdmFyIG5ld1NoaW1tZXIgPSBuZXcgR2FtZS5zaGltbWVyKGkpOw0KICAgICAgICAgICAgICAgIG1lLnNwYXduZWQgPSAxOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9Ow0KICAgIEdhbWUua2lsbFNoaW1tZXJzID0NCiAgICAgIGZ1bmN0aW9uICgpIC8vc3RvcCBhbmQgZGVsZXRlIGFsbCBzaGltbWVycyAodXNlZCBvbiByZXNldHRpbmcgZXRjKQ0KICAgICAgew0KICAgICAgICBmb3IgKHZhciBpID0gR2FtZS5zaGltbWVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgIEdhbWUuc2hpbW1lcnNbaV0uZGllKCk7DQogICAgICAgIH0NCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNoaW1tZXJUeXBlcykgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuc2hpbW1lclR5cGVzW2ldOw0KICAgICAgICAgIGlmIChtZS5yZXNldCkgbWUucmVzZXQoKTsNCiAgICAgICAgICBtZS5uID0gMDsNCiAgICAgICAgICBpZiAobWUuc3Bhd25zT25UaW1lcikgew0KICAgICAgICAgICAgbWUudGltZSA9IDA7DQogICAgICAgICAgICBtZS5zcGF3bmVkID0gMDsNCiAgICAgICAgICAgIG1lLm1pblRpbWUgPSBtZS5nZXRNaW5UaW1lKG1lKTsNCiAgICAgICAgICAgIG1lLm1heFRpbWUgPSBtZS5nZXRNYXhUaW1lKG1lKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH07DQoNCiAgICBHYW1lLnNoaW1tZXJUeXBlcyA9IHsNCiAgICAgIC8vaW4gdGhlc2UsICJtZSIgcmVmZXJzIHRvIHRoZSBzaGltbWVyIGl0c2VsZiwgYW5kICJ0aGlzIiB0byB0aGUgc2hpbW1lcidzIHR5cGUgb2JqZWN0DQogICAgICBnb2xkZW46IHsNCiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB0aGlzLmNoYWluID0gMDsNCiAgICAgICAgICB0aGlzLnRvdGFsRnJvbUNoYWluID0gMDsNCiAgICAgICAgICB0aGlzLmxhc3QgPSAiIjsNCiAgICAgICAgfSwNCiAgICAgICAgaW5pdEZ1bmM6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICF0aGlzLnNwYXduZWQgJiYNCiAgICAgICAgICAgIG1lLmZvcmNlICE9ICJjb29raWUgc3Rvcm0gZHJvcCIgJiYNCiAgICAgICAgICAgIEdhbWUuY2hpbWVUeXBlICE9IDAgJiYNCiAgICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZSAhPSAxDQogICAgICAgICAgKQ0KICAgICAgICAgICAgR2FtZS5wbGF5R29sZGVuQ29va2llQ2hpbWUoKTsNCg0KICAgICAgICAgIC8vc2V0IGltYWdlDQogICAgICAgICAgdmFyIGJnUGljID0gImltZy9nb2xkQ29va2llLnBuZyI7DQogICAgICAgICAgdmFyIHBpY1ggPSAwOw0KICAgICAgICAgIHZhciBwaWNZID0gMDsNCg0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICghbWUuZm9yY2VPYmogfHwgIW1lLmZvcmNlT2JqLm5vV3JhdGgpICYmDQogICAgICAgICAgICAoKG1lLmZvcmNlT2JqICYmIG1lLmZvcmNlT2JqLndyYXRoKSB8fA0KICAgICAgICAgICAgICAoR2FtZS5lbGRlcldyYXRoID09IDEgJiYgTWF0aC5yYW5kb20oKSA8IDEgLyAzKSB8fA0KICAgICAgICAgICAgICAoR2FtZS5lbGRlcldyYXRoID09IDIgJiYgTWF0aC5yYW5kb20oKSA8IDIgLyAzKSB8fA0KICAgICAgICAgICAgICBHYW1lLmVsZGVyV3JhdGggPT0gMyB8fA0KICAgICAgICAgICAgICAoR2FtZS5oYXNHb2QgJiYgR2FtZS5oYXNHb2QoInNjb3JuIikpKQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgbWUud3JhdGggPSAxOw0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJoYWxsb3dlZW4iKSBiZ1BpYyA9ICJpbWcvc3Bvb2t5Q29va2llLnBuZyI7DQogICAgICAgICAgICBlbHNlIGJnUGljID0gImltZy93cmF0aENvb2tpZS5wbmciOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBtZS53cmF0aCA9IDA7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJ2YWxlbnRpbmVzIikgew0KICAgICAgICAgICAgYmdQaWMgPSAiaW1nL2hlYXJ0cy5wbmciOw0KICAgICAgICAgICAgcGljWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpOw0KICAgICAgICAgIH0gZWxzZSBpZiAoR2FtZS5zZWFzb24gPT0gImZvb2xzIikgew0KICAgICAgICAgICAgYmdQaWMgPSAiaW1nL2NvbnRyYWN0LnBuZyI7DQogICAgICAgICAgICBpZiAobWUud3JhdGgpIGJnUGljID0gImltZy93cmF0aENvbnRyYWN0LnBuZyI7DQogICAgICAgICAgfSBlbHNlIGlmIChHYW1lLnNlYXNvbiA9PSAiZWFzdGVyIikgew0KICAgICAgICAgICAgYmdQaWMgPSAiaW1nL2J1bm5pZXMucG5nIjsNCiAgICAgICAgICAgIHBpY1ggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KTsNCiAgICAgICAgICAgIHBpY1kgPSAwOw0KICAgICAgICAgICAgaWYgKG1lLndyYXRoKSBwaWNZID0gMTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBtZS54ID0NCiAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKg0KICAgICAgICAgICAgICAgIE1hdGgubWF4KDAsIEdhbWUuYm91bmRzLnJpZ2h0IC0gMzAwIC0gR2FtZS5ib3VuZHMubGVmdCAtIDEyOCkgKw0KICAgICAgICAgICAgICAgIEdhbWUuYm91bmRzLmxlZnQgKw0KICAgICAgICAgICAgICAgIDY0DQogICAgICAgICAgICApIC0gNjQ7DQogICAgICAgICAgbWUueSA9DQogICAgICAgICAgICBNYXRoLmZsb29yKA0KICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpICoNCiAgICAgICAgICAgICAgICBNYXRoLm1heCgwLCBHYW1lLmJvdW5kcy5ib3R0b20gLSBHYW1lLmJvdW5kcy50b3AgLSAxMjgpICsNCiAgICAgICAgICAgICAgICBHYW1lLmJvdW5kcy50b3AgKw0KICAgICAgICAgICAgICAgIDY0DQogICAgICAgICAgICApIC0gNjQ7DQogICAgICAgICAgbWUubC5zdHlsZS5sZWZ0ID0gbWUueCArICJweCI7DQogICAgICAgICAgbWUubC5zdHlsZS50b3AgPSBtZS55ICsgInB4IjsNCiAgICAgICAgICBtZS5sLnN0eWxlLndpZHRoID0gIjk2cHgiOw0KICAgICAgICAgIG1lLmwuc3R5bGUuaGVpZ2h0ID0gIjk2cHgiOw0KICAgICAgICAgIG1lLmwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gInVybCgiICsgYmdQaWMgKyAiKSI7DQogICAgICAgICAgbWUubC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPQ0KICAgICAgICAgICAgLXBpY1ggKiA5NiArICJweCAiICsgLXBpY1kgKiA5NiArICJweCI7DQogICAgICAgICAgbWUubC5zdHlsZS5vcGFjaXR5ID0gIjAiOw0KICAgICAgICAgIG1lLmwuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgbWUubC5zZXRBdHRyaWJ1dGUoDQogICAgICAgICAgICAiYWx0IiwNCiAgICAgICAgICAgIGxvYyhtZS53cmF0aCA/ICJXcmF0aCBjb29raWUiIDogIkdvbGRlbiBjb29raWUiKQ0KICAgICAgICAgICk7DQoNCiAgICAgICAgICBtZS5saWZlID0gMTsgLy90aGUgY29va2llJ3MgY3VycmVudCBwcm9ncmVzc2lvbiB0aHJvdWdoIGl0cyBsaWZlc3BhbiAoaW4gZnJhbWVzKQ0KICAgICAgICAgIG1lLmR1ciA9IDEzOyAvL2R1cmF0aW9uOyB0aGUgY29va2llJ3MgbGlmZXNwYW4gaW4gc2Vjb25kcyBiZWZvcmUgaXQgZGVzcGF3bnMNCg0KICAgICAgICAgIHZhciBkdXIgPSAxMzsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGRheSIpKSBkdXIgKj0gMjsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIlNlcmVuZGlwaXR5IikpIGR1ciAqPSAyOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiRGVjaXNpdmUgZmF0ZSIpKSBkdXIgKj0gMS4wNTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGRpZ2l0IikpIGR1ciAqPSAxLjAxOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiTHVja3kgbnVtYmVyIikpIGR1ciAqPSAxLjAxOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiTHVja3kgcGF5b3V0IikpIGR1ciAqPSAxLjAxOw0KICAgICAgICAgIGlmICghbWUud3JhdGgpIGR1ciAqPSBHYW1lLmVmZigiZ29sZGVuQ29va2llRHVyIik7DQogICAgICAgICAgZWxzZSBkdXIgKj0gR2FtZS5lZmYoIndyYXRoQ29va2llRHVyIik7DQogICAgICAgICAgZHVyICo9IE1hdGgucG93KDAuOTUsIEdhbWUuc2hpbW1lclR5cGVzWyJnb2xkZW4iXS5uIC0gMSk7IC8vNSUgc2hvcnRlciBmb3IgZXZlcnkgb3RoZXIgZ29sZGVuIGNvb2tpZSBvbiB0aGUgc2NyZWVuDQogICAgICAgICAgaWYgKHRoaXMuY2hhaW4gPiAwKSBkdXIgPSBNYXRoLm1heCgyLCAxMCAvIHRoaXMuY2hhaW4pOyAvL3RoaXMgaXMgaGlsYXJpb3VzDQogICAgICAgICAgbWUuZHVyID0gZHVyOw0KICAgICAgICAgIG1lLmxpZmUgPSBNYXRoLmNlaWwoR2FtZS5mcHMgKiBtZS5kdXIpOw0KICAgICAgICAgIG1lLnNpemVNdWx0ID0gMTsNCiAgICAgICAgfSwNCiAgICAgICAgdXBkYXRlRnVuYzogZnVuY3Rpb24gKG1lKSB7DQogICAgICAgICAgdmFyIGN1cnZlID0gMSAtIE1hdGgucG93KChtZS5saWZlIC8gKEdhbWUuZnBzICogbWUuZHVyKSkgKiAyIC0gMSwgNCk7DQogICAgICAgICAgbWUubC5zdHlsZS5vcGFjaXR5ID0gY3VydmU7DQogICAgICAgICAgLy90aGlzIGxpbmUgbWFrZXMgZWFjaCBnb2xkZW4gY29va2llIHB1bHNlIGluIGEgdW5pcXVlIHdheQ0KICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KQ0KICAgICAgICAgICAgbWUubC5zdHlsZS50cmFuc2Zvcm0gPQ0KICAgICAgICAgICAgICAicm90YXRlKCIgKw0KICAgICAgICAgICAgICAoTWF0aC5zaW4obWUuaWQgKiAwLjY5KSAqIDI0ICsNCiAgICAgICAgICAgICAgICBNYXRoLnNpbigNCiAgICAgICAgICAgICAgICAgIEdhbWUuVCAqICgwLjM1ICsgTWF0aC5zaW4obWUuaWQgKiAwLjk3KSAqIDAuMTUpICsNCiAgICAgICAgICAgICAgICAgICAgbWUuaWQgLyorTWF0aC5zaW4oR2FtZS5UKjAuMDcpKjIrMiovDQogICAgICAgICAgICAgICAgKSAqDQogICAgICAgICAgICAgICAgICAoMyArIE1hdGguc2luKG1lLmlkICogMC4zNikgKiAyKSkgKw0KICAgICAgICAgICAgICAiZGVnKSBzY2FsZSgiICsNCiAgICAgICAgICAgICAgbWUuc2l6ZU11bHQgKg0KICAgICAgICAgICAgICAgICgxICsgTWF0aC5zaW4obWUuaWQgKiAwLjUzKSAqIDAuMikgKg0KICAgICAgICAgICAgICAgIGN1cnZlICoNCiAgICAgICAgICAgICAgICAoMSArDQogICAgICAgICAgICAgICAgICAoMC4wNiArIE1hdGguc2luKG1lLmlkICogMC40MSkgKiAwLjA1KSAqDQogICAgICAgICAgICAgICAgICAgIE1hdGguc2luKA0KICAgICAgICAgICAgICAgICAgICAgIEdhbWUuVCAqICgwLjI1ICsgTWF0aC5zaW4obWUuaWQgKiAwLjczKSAqIDAuMTUpICsgbWUuaWQNCiAgICAgICAgICAgICAgICAgICAgKSkgKw0KICAgICAgICAgICAgICAiKSI7DQogICAgICAgICAgbWUubGlmZS0tOw0KICAgICAgICAgIGlmIChtZS5saWZlIDw9IDApIHsNCiAgICAgICAgICAgIHRoaXMubWlzc0Z1bmMobWUpOw0KICAgICAgICAgICAgbWUuZGllKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBwb3BGdW5jOiBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICAvL2dldCBhY2hpZXZzIGFuZCBzdGF0cw0KICAgICAgICAgIGlmIChtZS5zcGF3bkxlYWQpIHsNCiAgICAgICAgICAgIEdhbWUuZ29sZGVuQ2xpY2tzKys7DQogICAgICAgICAgICBHYW1lLmdvbGRlbkNsaWNrc0xvY2FsKys7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSAxKSBHYW1lLldpbigiR29sZGVuIGNvb2tpZSIpOw0KICAgICAgICAgICAgaWYgKEdhbWUuZ29sZGVuQ2xpY2tzID49IDcpIEdhbWUuV2luKCJMdWNreSBjb29raWUiKTsNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSAyNykgR2FtZS5XaW4oIkEgc3Ryb2tlIG9mIGx1Y2siKTsNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSA3NykgR2FtZS5XaW4oIkZvcnR1bmUiKTsNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSA3NzcpIEdhbWUuV2luKCJMZXByZWNoYXVuIik7DQogICAgICAgICAgICBpZiAoR2FtZS5nb2xkZW5DbGlja3MgPj0gNzc3NykgR2FtZS5XaW4oIkJsYWNrIGNhdCdzIHBhdyIpOw0KICAgICAgICAgICAgaWYgKEdhbWUuZ29sZGVuQ2xpY2tzID49IDI3Nzc3KSBHYW1lLldpbigiU2V2ZW4gaG9yc2VzaG9lcyIpOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5nb2xkZW5DbGlja3MgPj0gNykgR2FtZS5VbmxvY2soIkx1Y2t5IGRheSIpOw0KICAgICAgICAgICAgaWYgKEdhbWUuZ29sZGVuQ2xpY2tzID49IDI3KSBHYW1lLlVubG9jaygiU2VyZW5kaXBpdHkiKTsNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSA3NykgR2FtZS5VbmxvY2soIkdldCBsdWNreSIpOw0KDQogICAgICAgICAgICBpZiAobWUubGlmZSAvIEdhbWUuZnBzID4gbWUuZHVyIC0gMSkgR2FtZS5XaW4oIkVhcmx5IGJpcmQiKTsNCiAgICAgICAgICAgIGlmIChtZS5saWZlIDwgR2FtZS5mcHMpIEdhbWUuV2luKCJGYWRpbmcgbHVjayIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChHYW1lLmZvcmNlVW5zbG90R29kKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5mb3JjZVVuc2xvdEdvZCgiYXNjZXRpY2lzbSIpKSBHYW1lLnVzZVN3YXAoMTAwMDAwMCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy9zZWxlY3QgYW4gZWZmZWN0DQogICAgICAgICAgdmFyIGxpc3QgPSBbXTsNCiAgICAgICAgICBpZiAobWUud3JhdGggPiAwKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKCJjbG90IiwgIm11bHRpcGx5IGNvb2tpZXMiLCAicnVpbiBjb29raWVzIik7DQogICAgICAgICAgZWxzZSBsaXN0LnB1c2goImZyZW56eSIsICJtdWx0aXBseSBjb29raWVzIik7DQogICAgICAgICAgaWYgKG1lLndyYXRoID4gMCAmJiBHYW1lLmhhc0dvZCAmJiBHYW1lLmhhc0dvZCgic2Nvcm4iKSkNCiAgICAgICAgICAgIGxpc3QucHVzaCgiY2xvdCIsICJydWluIGNvb2tpZXMiLCAiY2xvdCIsICJydWluIGNvb2tpZXMiKTsNCiAgICAgICAgICBpZiAobWUud3JhdGggPiAwICYmIE1hdGgucmFuZG9tKCkgPCAwLjMpDQogICAgICAgICAgICBsaXN0LnB1c2goImJsb29kIGZyZW56eSIsICJjaGFpbiBjb29raWUiLCAiY29va2llIHN0b3JtIik7DQogICAgICAgICAgZWxzZSBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDMgJiYgR2FtZS5jb29raWVzRWFybmVkID49IDEwMDAwMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgiY2hhaW4gY29va2llIiwgImNvb2tpZSBzdG9ybSIpOw0KICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wNSAmJiBHYW1lLnNlYXNvbiA9PSAiZm9vbHMiKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKCJldmVyeXRoaW5nIG11c3QgZ28iKTsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC4xICYmDQogICAgICAgICAgICAoTWF0aC5yYW5kb20oKSA8IDAuMDUgfHwgIUdhbWUuaGFzQnVmZigiRHJhZ29uZmxpZ2h0IikpDQogICAgICAgICAgKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKCJjbGljayBmcmVuenkiKTsNCiAgICAgICAgICBpZiAobWUud3JhdGggJiYgTWF0aC5yYW5kb20oKSA8IDAuMSkgbGlzdC5wdXNoKCJjdXJzZWQgZmluZ2VyIik7DQoNCiAgICAgICAgICBpZiAoR2FtZS5CdWlsZGluZ3NPd25lZCA+PSAxMCAmJiBNYXRoLnJhbmRvbSgpIDwgMC4yNSkNCiAgICAgICAgICAgIGxpc3QucHVzaCgiYnVpbGRpbmcgc3BlY2lhbCIpOw0KDQogICAgICAgICAgaWYgKEdhbWUuY2FuTHVtcHMoKSAmJiBNYXRoLnJhbmRvbSgpIDwgMC4wMDA1KQ0KICAgICAgICAgICAgbGlzdC5wdXNoKCJmcmVlIHN1Z2FyIGx1bXAiKTsNCg0KICAgICAgICAgIGlmICgobWUud3JhdGggPT0gMCAmJiBNYXRoLnJhbmRvbSgpIDwgMC4xNSkgfHwgTWF0aC5yYW5kb20oKSA8IDAuMDUpIHsNCiAgICAgICAgICAgIC8vaWYgKEdhbWUuaGFzQXVyYSgnUmVhcGVyIG9mIEZpZWxkcycpKSBsaXN0LnB1c2goJ2RyYWdvbiBoYXJ2ZXN0Jyk7DQogICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IEdhbWUuYXVyYU11bHQoIlJlYXBlciBvZiBGaWVsZHMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKCJkcmFnb24gaGFydmVzdCIpOw0KICAgICAgICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdEcmFnb25mbGlnaHQnKSkgbGlzdC5wdXNoKCdkcmFnb25mbGlnaHQnKTsNCiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgR2FtZS5hdXJhTXVsdCgiRHJhZ29uZmxpZ2h0IikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgiZHJhZ29uZmxpZ2h0Iik7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgdGhpcy5sYXN0ICE9ICIiICYmDQogICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC44ICYmDQogICAgICAgICAgICBsaXN0LmluZGV4T2YodGhpcy5sYXN0KSAhPSAtMQ0KICAgICAgICAgICkNCiAgICAgICAgICAgIGxpc3Quc3BsaWNlKGxpc3QuaW5kZXhPZih0aGlzLmxhc3QpLCAxKTsgLy84MCUgY2hhbmNlIHRvIGZvcmNlIGEgZGlmZmVyZW50IG9uZQ0KICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wMDAxKSBsaXN0LnB1c2goImJsYWIiKTsNCiAgICAgICAgICB2YXIgY2hvaWNlID0gY2hvb3NlKGxpc3QpOw0KDQogICAgICAgICAgaWYgKHRoaXMuY2hhaW4gPiAwKSBjaG9pY2UgPSAiY2hhaW4gY29va2llIjsNCiAgICAgICAgICBpZiAobWUuZm9yY2UgIT0gIiIpIHsNCiAgICAgICAgICAgIHRoaXMuY2hhaW4gPSAwOw0KICAgICAgICAgICAgY2hvaWNlID0gbWUuZm9yY2U7DQogICAgICAgICAgICBtZS5mb3JjZSA9ICIiOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoY2hvaWNlICE9ICJjaGFpbiBjb29raWUiKSB0aGlzLmNoYWluID0gMDsNCg0KICAgICAgICAgIHRoaXMubGFzdCA9IGNob2ljZTsNCg0KICAgICAgICAgIC8vY3JlYXRlIGJ1ZmYgZm9yIGVmZmVjdA0KICAgICAgICAgIC8vYnVmZiBkdXJhdGlvbiBtdWx0aXBsaWVyDQogICAgICAgICAgdmFyIGVmZmVjdER1ck1vZCA9IDE7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJHZXQgbHVja3kiKSkgZWZmZWN0RHVyTW9kICo9IDI7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJMYXN0aW5nIGZvcnR1bmUiKSkgZWZmZWN0RHVyTW9kICo9IDEuMTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGRpZ2l0IikpIGVmZmVjdER1ck1vZCAqPSAxLjAxOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiTHVja3kgbnVtYmVyIikpIGVmZmVjdER1ck1vZCAqPSAxLjAxOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIpKSBlZmZlY3REdXJNb2QgKj0gMS4wMTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IHBheW91dCIpKSBlZmZlY3REdXJNb2QgKj0gMS4wMTsNCiAgICAgICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0Vwb2NoIE1hbmlwdWxhdG9yJykpIGVmZmVjdER1ck1vZCo9MS4wNTsNCiAgICAgICAgICBlZmZlY3REdXJNb2QgKj0gMSArIEdhbWUuYXVyYU11bHQoIkVwb2NoIE1hbmlwdWxhdG9yIikgKiAwLjA1Ow0KICAgICAgICAgIGlmICghbWUud3JhdGgpIGVmZmVjdER1ck1vZCAqPSBHYW1lLmVmZigiZ29sZGVuQ29va2llRWZmRHVyIik7DQogICAgICAgICAgZWxzZSBlZmZlY3REdXJNb2QgKj0gR2FtZS5lZmYoIndyYXRoQ29va2llRWZmRHVyIik7DQoNCiAgICAgICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgiZGVjYWRlbmNlIik7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIGVmZmVjdER1ck1vZCAqPSAxLjA3Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIGVmZmVjdER1ck1vZCAqPSAxLjA1Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIGVmZmVjdER1ck1vZCAqPSAxLjAyOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vZWZmZWN0IG11bHRpcGxpZXIgKGZyb20gbHVja3kgZXRjKQ0KICAgICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgICAvL2lmIChtZS53cmF0aD4wICYmIEdhbWUuaGFzQXVyYSgnVW5ob2x5IERvbWluaW9uJykpIG11bHQqPTEuMTsNCiAgICAgICAgICAvL2Vsc2UgaWYgKG1lLndyYXRoPT0wICYmIEdhbWUuaGFzQXVyYSgnQW5jZXN0cmFsIE1ldGFtb3JwaG9zaXMnKSkgbXVsdCo9MS4xOw0KICAgICAgICAgIGlmIChtZS53cmF0aCA+IDApIG11bHQgKj0gMSArIEdhbWUuYXVyYU11bHQoIlVuaG9seSBEb21pbmlvbiIpICogMC4xOw0KICAgICAgICAgIGVsc2UgaWYgKG1lLndyYXRoID09IDApDQogICAgICAgICAgICBtdWx0ICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJBbmNlc3RyYWwgTWV0YW1vcnBob3NpcyIpICogMC4xOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIpKSBtdWx0ICo9IDEuMDE7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJEcmFnb24gZmFuZyIpKSBtdWx0ICo9IDEuMDM7DQogICAgICAgICAgaWYgKCFtZS53cmF0aCkgbXVsdCAqPSBHYW1lLmVmZigiZ29sZGVuQ29va2llR2FpbiIpOw0KICAgICAgICAgIGVsc2UgbXVsdCAqPSBHYW1lLmVmZigid3JhdGhDb29raWVHYWluIik7DQoNCiAgICAgICAgICB2YXIgcG9wdXAgPSAiIjsNCiAgICAgICAgICB2YXIgYnVmZiA9IDA7DQoNCiAgICAgICAgICBpZiAoY2hvaWNlID09ICJidWlsZGluZyBzcGVjaWFsIikgew0KICAgICAgICAgICAgdmFyIHRpbWUgPSBNYXRoLmNlaWwoMzAgKiBlZmZlY3REdXJNb2QpOw0KICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbaV0uYW1vdW50ID49IDEwKSBsaXN0LnB1c2goR2FtZS5PYmplY3RzW2ldLmlkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICAgIGNob2ljZSA9ICJmcmVuenkiOw0KICAgICAgICAgICAgfSAvL2RlZmF1bHQgdG8gZnJlbnp5IGlmIG5vIHByb3BlciBidWlsZGluZw0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgIHZhciBvYmogPSBjaG9vc2UobGlzdCk7DQogICAgICAgICAgICAgIHZhciBwb3cgPSBHYW1lLk9iamVjdHNCeUlkW29ial0uYW1vdW50IC8gMTAgKyAxOw0KICAgICAgICAgICAgICBpZiAobWUud3JhdGggJiYgTWF0aC5yYW5kb20oKSA8IDAuMykgew0KICAgICAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKCJidWlsZGluZyBkZWJ1ZmYiLCB0aW1lLCBwb3csIG9iaik7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgYnVmZiA9IEdhbWUuZ2FpbkJ1ZmYoImJ1aWxkaW5nIGJ1ZmYiLCB0aW1lLCBwb3csIG9iaik7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoY2hvaWNlID09ICJmcmVlIHN1Z2FyIGx1bXAiKSB7DQogICAgICAgICAgICBHYW1lLmdhaW5MdW1wcygxKTsNCiAgICAgICAgICAgIHBvcHVwID0gbG9jKCJTd2VldCE8YnI+PHNtYWxsPkZvdW5kIDEgc3VnYXIgbHVtcCE8L3NtYWxsPiIpOw0KICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlID09ICJmcmVuenkiKSB7DQogICAgICAgICAgICBidWZmID0gR2FtZS5nYWluQnVmZigiZnJlbnp5IiwgTWF0aC5jZWlsKDc3ICogZWZmZWN0RHVyTW9kKSwgNyk7DQogICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UgPT0gImRyYWdvbiBoYXJ2ZXN0Iikgew0KICAgICAgICAgICAgYnVmZiA9IEdhbWUuZ2FpbkJ1ZmYoDQogICAgICAgICAgICAgICJkcmFnb24gaGFydmVzdCIsDQogICAgICAgICAgICAgIE1hdGguY2VpbCg2MCAqIGVmZmVjdER1ck1vZCksDQogICAgICAgICAgICAgIDE1DQogICAgICAgICAgICApOw0KICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlID09ICJldmVyeXRoaW5nIG11c3QgZ28iKSB7DQogICAgICAgICAgICBidWZmID0gR2FtZS5nYWluQnVmZigNCiAgICAgICAgICAgICAgImV2ZXJ5dGhpbmcgbXVzdCBnbyIsDQogICAgICAgICAgICAgIE1hdGguY2VpbCg4ICogZWZmZWN0RHVyTW9kKSwNCiAgICAgICAgICAgICAgNQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAibXVsdGlwbHkgY29va2llcyIpIHsNCiAgICAgICAgICAgIHZhciBtb25pID0NCiAgICAgICAgICAgICAgbXVsdCAqIE1hdGgubWluKEdhbWUuY29va2llcyAqIDAuMTUsIEdhbWUuY29va2llc1BzICogNjAgKiAxNSkgKw0KICAgICAgICAgICAgICAxMzsgLy9hZGQgMTUlIHRvIGNvb2tpZXMgb3duZWQgKCsxMyksIG9yIDE1IG1pbnV0ZXMgb2YgY29va2llIHByb2R1Y3Rpb24gLSB3aGljaGV2ZXIgaXMgbG93ZXN0DQogICAgICAgICAgICBHYW1lLkVhcm4obW9uaSk7DQogICAgICAgICAgICBwb3B1cCA9DQogICAgICAgICAgICAgIGxvYygiTHVja3khIikgKw0KICAgICAgICAgICAgICAiPGJyPjxzbWFsbD4iICsNCiAgICAgICAgICAgICAgbG9jKCIrJTEhIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkobW9uaSkpKSArDQogICAgICAgICAgICAgICI8L3NtYWxsPiI7DQogICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UgPT0gInJ1aW4gY29va2llcyIpIHsNCiAgICAgICAgICAgIHZhciBtb25pID0NCiAgICAgICAgICAgICAgTWF0aC5taW4oR2FtZS5jb29raWVzICogMC4wNSwgR2FtZS5jb29raWVzUHMgKiA2MCAqIDEwKSArIDEzOyAvL2xvc2UgNSUgb2YgY29va2llcyBvd25lZCAoLTEzKSwgb3IgMTAgbWludXRlcyBvZiBjb29raWUgcHJvZHVjdGlvbiAtIHdoaWNoZXZlciBpcyBsb3dlc3QNCiAgICAgICAgICAgIG1vbmkgPSBNYXRoLm1pbihHYW1lLmNvb2tpZXMsIG1vbmkpOw0KICAgICAgICAgICAgR2FtZS5TcGVuZChtb25pKTsNCiAgICAgICAgICAgIHBvcHVwID0NCiAgICAgICAgICAgICAgbG9jKCJSdWluISIpICsNCiAgICAgICAgICAgICAgIjxicj48c21hbGw+IiArDQogICAgICAgICAgICAgIGxvYygiTG9zdCAlMSEiLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeShtb25pKSkpICsNCiAgICAgICAgICAgICAgIjwvc21hbGw+IjsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiYmxvb2QgZnJlbnp5Iikgew0KICAgICAgICAgICAgYnVmZiA9IEdhbWUuZ2FpbkJ1ZmYoDQogICAgICAgICAgICAgICJibG9vZCBmcmVuenkiLA0KICAgICAgICAgICAgICBNYXRoLmNlaWwoNiAqIGVmZmVjdER1ck1vZCksDQogICAgICAgICAgICAgIDY2Ng0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiY2xvdCIpIHsNCiAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKCJjbG90IiwgTWF0aC5jZWlsKDY2ICogZWZmZWN0RHVyTW9kKSwgMC41KTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiY3Vyc2VkIGZpbmdlciIpIHsNCiAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKA0KICAgICAgICAgICAgICAiY3Vyc2VkIGZpbmdlciIsDQogICAgICAgICAgICAgIE1hdGguY2VpbCgxMCAqIGVmZmVjdER1ck1vZCksDQogICAgICAgICAgICAgIEdhbWUuY29va2llc1BzICogTWF0aC5jZWlsKDEwICogZWZmZWN0RHVyTW9kKQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiY2xpY2sgZnJlbnp5Iikgew0KICAgICAgICAgICAgYnVmZiA9IEdhbWUuZ2FpbkJ1ZmYoDQogICAgICAgICAgICAgICJjbGljayBmcmVuenkiLA0KICAgICAgICAgICAgICBNYXRoLmNlaWwoMTMgKiBlZmZlY3REdXJNb2QpLA0KICAgICAgICAgICAgICA3NzcNCiAgICAgICAgICAgICk7DQogICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UgPT0gImRyYWdvbmZsaWdodCIpIHsNCiAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKA0KICAgICAgICAgICAgICAiZHJhZ29uZmxpZ2h0IiwNCiAgICAgICAgICAgICAgTWF0aC5jZWlsKDEwICogZWZmZWN0RHVyTW9kKSwNCiAgICAgICAgICAgICAgMTExMQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC44KSBHYW1lLmtpbGxCdWZmKCJDbGljayBmcmVuenkiKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiY2hhaW4gY29va2llIikgew0KICAgICAgICAgICAgLy9maXggYnkgSWNlaGF3azc4DQogICAgICAgICAgICBpZiAodGhpcy5jaGFpbiA9PSAwKSB0aGlzLnRvdGFsRnJvbUNoYWluID0gMDsNCiAgICAgICAgICAgIHRoaXMuY2hhaW4rKzsNCiAgICAgICAgICAgIHZhciBkaWdpdCA9IG1lLndyYXRoID8gNiA6IDc7DQogICAgICAgICAgICBpZiAodGhpcy5jaGFpbiA9PSAxKQ0KICAgICAgICAgICAgICB0aGlzLmNoYWluICs9IE1hdGgubWF4KA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgTWF0aC5jZWlsKE1hdGgubG9nKEdhbWUuY29va2llcykgLyBNYXRoLkxOMTApIC0gMTANCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgdmFyIG1heFBheW91dCA9DQogICAgICAgICAgICAgIE1hdGgubWluKEdhbWUuY29va2llc1BzICogNjAgKiA2MCAqIDYsIEdhbWUuY29va2llcyAqIDAuNSkgKiBtdWx0Ow0KICAgICAgICAgICAgdmFyIG1vbmkgPSBNYXRoLm1heCgNCiAgICAgICAgICAgICAgZGlnaXQsDQogICAgICAgICAgICAgIE1hdGgubWluKA0KICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoKDEgLyA5KSAqIE1hdGgucG93KDEwLCB0aGlzLmNoYWluKSAqIGRpZ2l0ICogbXVsdCksDQogICAgICAgICAgICAgICAgbWF4UGF5b3V0DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICB2YXIgbmV4dE1vbmkgPSBNYXRoLm1heCgNCiAgICAgICAgICAgICAgZGlnaXQsDQogICAgICAgICAgICAgIE1hdGgubWluKA0KICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgICAgICAoMSAvIDkpICogTWF0aC5wb3coMTAsIHRoaXMuY2hhaW4gKyAxKSAqIGRpZ2l0ICogbXVsdA0KICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgbWF4UGF5b3V0DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICB0aGlzLnRvdGFsRnJvbUNoYWluICs9IG1vbmk7DQoNCiAgICAgICAgICAgIC8vYnJlYWsgdGhlIGNoYWluIGlmIHdlJ3JlIGFib3ZlIDUgZGlnaXRzIEFORCBpdCdzIG1vcmUgdGhhbiA1MCUgb2Ygb3VyIGJhbmssIGl0IGdyYW50cyBtb3JlIHRoYW4gNiBob3VycyBvZiBvdXIgQ3BTLCBvciBqdXN0IGEgMSUgY2hhbmNlIGVhY2ggZGlnaXQgKHVwZGF0ZSA6IHJlbW92ZWQgZGlnaXQgbGltaXQpDQogICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDEgfHwgbmV4dE1vbmkgPj0gbWF4UGF5b3V0KSB7DQogICAgICAgICAgICAgIHRoaXMuY2hhaW4gPSAwOw0KICAgICAgICAgICAgICBwb3B1cCA9DQogICAgICAgICAgICAgICAgbG9jKCJDb29raWUgY2hhaW4iKSArDQogICAgICAgICAgICAgICAgIjxicj48c21hbGw+IiArDQogICAgICAgICAgICAgICAgbG9jKCIrJTEhIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkobW9uaSkpKSArDQogICAgICAgICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiQ29va2llIGNoYWluIG92ZXIuIFlvdSBtYWRlICUxLiIsDQogICAgICAgICAgICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSh0aGlzLnRvdGFsRnJvbUNoYWluKSkNCiAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAiPC9zbWFsbD4iOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcG9wdXAgPQ0KICAgICAgICAgICAgICAgIGxvYygiQ29va2llIGNoYWluIikgKw0KICAgICAgICAgICAgICAgICI8YnI+PHNtYWxsPiIgKw0KICAgICAgICAgICAgICAgIGxvYygiKyUxISIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1vbmkpKSkgKw0KICAgICAgICAgICAgICAgICI8L3NtYWxsPiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBHYW1lLkVhcm4obW9uaSk7DQogICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UgPT0gImNvb2tpZSBzdG9ybSIpIHsNCiAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKA0KICAgICAgICAgICAgICAiY29va2llIHN0b3JtIiwNCiAgICAgICAgICAgICAgTWF0aC5jZWlsKDcgKiBlZmZlY3REdXJNb2QpLA0KICAgICAgICAgICAgICA3DQogICAgICAgICAgICApOw0KICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlID09ICJjb29raWUgc3Rvcm0gZHJvcCIpIHsNCiAgICAgICAgICAgIHZhciBtb25pID0gTWF0aC5tYXgoDQogICAgICAgICAgICAgIG11bHQgKiAoR2FtZS5jb29raWVzUHMgKiA2MCAqIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKSksDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKQ0KICAgICAgICAgICAgKTsgLy9laXRoZXIgMS03IGNvb2tpZXMgb3IgMS03IG1pbnV0ZXMgb2YgY29va2llIHByb2R1Y3Rpb24sIHdoaWNoZXZlciBpcyBoaWdoZXN0DQogICAgICAgICAgICBHYW1lLkVhcm4obW9uaSk7DQogICAgICAgICAgICBwb3B1cCA9DQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJmb250LXNpemU6NzUlOyI+JyArDQogICAgICAgICAgICAgIGxvYygiKyUxISIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1vbmkpKSkgKw0KICAgICAgICAgICAgICAiPC9kaXY+IjsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiYmxhYiIpIHsNCiAgICAgICAgICAgIC8vc29ycnkgKGl0J3MgcmVhbGx5IHJhcmUpDQogICAgICAgICAgICB2YXIgc3RyID0gRU4NCiAgICAgICAgICAgICAgPyBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIkNvb2tpZSBjcnVtYmxpbmVzcyB4MyBmb3IgNjAgc2Vjb25kcyEiLA0KICAgICAgICAgICAgICAgICAgIkNob2NvbGF0aW5lc3MgeDcgZm9yIDc3IHNlY29uZHMhIiwNCiAgICAgICAgICAgICAgICAgICJEb3VnaCBlbGFzdGljaXR5IGhhbHZlZCBmb3IgNjYgc2Vjb25kcyEiLA0KICAgICAgICAgICAgICAgICAgIkdvbGRlbiBjb29raWUgc2hpbmluZXNzIGRvdWJsZWQgZm9yIDMgc2Vjb25kcyEiLA0KICAgICAgICAgICAgICAgICAgIldvcmxkIGVjb25vbXkgaGFsdmVkIGZvciAzMCBzZWNvbmRzISIsDQogICAgICAgICAgICAgICAgICAiR3JhbmRtYSBraXNzZXMgMjMlIHN0aW5naWVyIGZvciA0NSBzZWNvbmRzISIsDQogICAgICAgICAgICAgICAgICAiVGhhbmtzIGZvciBjbGlja2luZyEiLA0KICAgICAgICAgICAgICAgICAgIkZvb2xlZCB5b3UhIFRoaXMgb25lIHdhcyBqdXN0IGEgdGVzdC4iLA0KICAgICAgICAgICAgICAgICAgIkdvbGRlbiBjb29raWVzIGNsaWNrZWQgKzEhIiwNCiAgICAgICAgICAgICAgICAgICJZb3VyIGNsaWNrIGhhcyBiZWVuIHJlZ2lzdGVyZWQuIFRoYW5rIHlvdSBmb3IgeW91ciBjb29wZXJhdGlvbi4iLA0KICAgICAgICAgICAgICAgICAgIlRoYW5rcyEgVGhhdCBoaXQgdGhlIHNwb3QhIiwNCiAgICAgICAgICAgICAgICAgICJUaGFuayB5b3UuIEEgdGVhbSBoYXMgYmVlbiBkaXNwYXRjaGVkLiIsDQogICAgICAgICAgICAgICAgICAiVGhleSBrbm93LiIsDQogICAgICAgICAgICAgICAgICAiT29wcy4gVGhpcyB3YXMganVzdCBhIGNob2NvbGF0ZSBjb29raWUgd2l0aCBzaGlueSBhbHVtaW5pdW0gZm9pbC4iLA0KICAgICAgICAgICAgICAgICAgIkVzY2hhdG9uIGltbWFuZW50aXplZCEiLA0KICAgICAgICAgICAgICAgICAgIk9oLCB0aGF0IHRpY2tsZWQhIiwNCiAgICAgICAgICAgICAgICAgICJBZ2Fpbi4iLA0KICAgICAgICAgICAgICAgICAgIllvdSd2ZSBtYWRlIGEgZ3JhdmUgbWlzdGFrZS4iLA0KICAgICAgICAgICAgICAgICAgIkNob2NvbGF0ZSBjaGlwcyByZXNodWZmbGVkISIsDQogICAgICAgICAgICAgICAgICAiUmFuZG9taXplZCBjaGFuY2UgY2FyZCBvdXRjb21lISIsDQogICAgICAgICAgICAgICAgICAiTW91c2UgYWNjZWxlcmF0aW9uICswLjAzJSEiLA0KICAgICAgICAgICAgICAgICAgIkFzY2Vuc2lvbiBib251c2VzIHg1LDAwMCBmb3IgMC4xIHNlY29uZHMhIiwNCiAgICAgICAgICAgICAgICAgICJHYWluZWQgMSBleHRyYSEiLA0KICAgICAgICAgICAgICAgICAgIlNvcnJ5LCBiZXR0ZXIgbHVjayBuZXh0IHRpbWUhIiwNCiAgICAgICAgICAgICAgICAgICJJIGZlbHQgdGhhdC4iLA0KICAgICAgICAgICAgICAgICAgIk5pY2UgdHJ5LCBidXQgbm8uIiwNCiAgICAgICAgICAgICAgICAgICJXYWl0LCBzb3JyeSwgSSB3YXNuJ3QgcmVhZHkgeWV0LiIsDQogICAgICAgICAgICAgICAgICAiWWlwcGVlISIsDQogICAgICAgICAgICAgICAgICAiQm9uZXMgcmVtb3ZlZC4iLA0KICAgICAgICAgICAgICAgICAgIk9yZ2FucyBhZGRlZC4iLA0KICAgICAgICAgICAgICAgICAgIkRpZCB5b3UganVzdCBjbGljayB0aGF0PyIsDQogICAgICAgICAgICAgICAgICAiSHVoPyBPaCwgdGhlcmUgd2FzIG5vdGhpbmcgdGhlcmUuIiwNCiAgICAgICAgICAgICAgICAgICJZb3Ugc2F3IG5vdGhpbmcuIiwNCiAgICAgICAgICAgICAgICAgICJJdCBzZWVtcyB5b3UgaGFsbHVjaW5hdGVkIHRoYXQgZ29sZGVuIGNvb2tpZS4iLA0KICAgICAgICAgICAgICAgICAgIlRoaXMgZ29sZGVuIGNvb2tpZSB3YXMgYSBjb21wbGV0ZSBmYWJyaWNhdGlvbi4iLA0KICAgICAgICAgICAgICAgICAgIkluIHRoZW9yeSB0aGVyZSdzIG5vIHdyb25nIHdheSB0byBjbGljayBhIGdvbGRlbiBjb29raWUsIGJ1dCB5b3UganVzdCBkaWQgdGhhdCwgc29tZWhvdy4iLA0KICAgICAgICAgICAgICAgICAgIkFsbCBjb29raWVzIG11bHRpcGxpZWQgYnkgOTk5ITxicj5BbGwgY29va2llcyBkaXZpZGVkIGJ5IDk5OSEiLA0KICAgICAgICAgICAgICAgICAgIldoeT8iLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgIDogY2hvb3NlKGxvYygiQ29va2llIGJsYWIiKSk7DQogICAgICAgICAgICBwb3B1cCA9IHN0cjsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAocG9wdXAgPT0gIiIgJiYgYnVmZiAmJiBidWZmLm5hbWUgJiYgYnVmZi5kZXNjKQ0KICAgICAgICAgICAgcG9wdXAgPQ0KICAgICAgICAgICAgICBidWZmLmRuYW1lICsNCiAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTo2NSU7Ij4nICsNCiAgICAgICAgICAgICAgYnVmZi5kZXNjICsNCiAgICAgICAgICAgICAgIjwvZGl2PiI7DQogICAgICAgICAgaWYgKHBvcHVwICE9ICIiKSBHYW1lLlBvcHVwKHBvcHVwLCBtZS54ICsgbWUubC5vZmZzZXRXaWR0aCAvIDIsIG1lLnkpOw0KDQogICAgICAgICAgR2FtZS5Ecm9wRWdnKDAuOSk7DQoNCiAgICAgICAgICAvL3NwYXJrbGUgYW5kIGtpbGwgdGhlIHNoaW1tZXINCiAgICAgICAgICBHYW1lLlNwYXJrbGVBdChtZS54ICsgNDgsIG1lLnkgKyA0OCk7DQogICAgICAgICAgaWYgKGNob2ljZSA9PSAiY29va2llIHN0b3JtIGRyb3AiKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5jb29raWVzb3VuZCkNCiAgICAgICAgICAgICAgUGxheVNvdW5kKA0KICAgICAgICAgICAgICAgICJzbmQvY2xpY2tiIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKSArICIubXAzIiwNCiAgICAgICAgICAgICAgICAwLjc1DQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgIFBsYXlTb3VuZCgNCiAgICAgICAgICAgICAgICAic25kL2NsaWNrIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKSArICIubXAzIiwNCiAgICAgICAgICAgICAgICAwLjc1DQogICAgICAgICAgICAgICk7DQogICAgICAgICAgfSBlbHNlIFBsYXlTb3VuZCgic25kL3NoaW1tZXJDbGljay5tcDMiKTsNCiAgICAgICAgICBtZS5kaWUoKTsNCiAgICAgICAgfSwNCiAgICAgICAgbWlzc0Z1bmM6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIGlmICh0aGlzLmNoYWluID4gMCAmJiB0aGlzLnRvdGFsRnJvbUNoYWluID4gMCkgew0KICAgICAgICAgICAgR2FtZS5Qb3B1cCgNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJDb29raWUgY2hhaW4gYnJva2VuLjxicj48c21hbGw+WW91IG1hZGUgJTEuPC9zbWFsbD4iLA0KICAgICAgICAgICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KHRoaXMudG90YWxGcm9tQ2hhaW4pKQ0KICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICBtZS54ICsgbWUubC5vZmZzZXRXaWR0aCAvIDIsDQogICAgICAgICAgICAgIG1lLnkNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICB0aGlzLmNoYWluID0gMDsNCiAgICAgICAgICAgIHRoaXMudG90YWxGcm9tQ2hhaW4gPSAwOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAobWUuc3Bhd25MZWFkKSBHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcysrOw0KICAgICAgICB9LA0KICAgICAgICBzcGF3bnNPblRpbWVyOiB0cnVlLA0KICAgICAgICBzcGF3bkNvbmRpdGlvbnM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuSGFzKCJHb2xkZW4gc3dpdGNoIFtvZmZdIikpIHJldHVybiB0cnVlOw0KICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9LA0KICAgICAgICBzcGF3bmVkOiAwLA0KICAgICAgICB0aW1lOiAwLA0KICAgICAgICBtaW5UaW1lOiAwLA0KICAgICAgICBtYXhUaW1lOiAwLA0KICAgICAgICBnZXRUaW1lTW9kOiBmdW5jdGlvbiAobWUsIG0pIHsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGRheSIpKSBtIC89IDI7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTZXJlbmRpcGl0eSIpKSBtIC89IDI7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJHb2xkZW4gZ29vc2UgZWdnIikpIG0gKj0gMC45NTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkhlYXZlbmx5IGx1Y2siKSkgbSAqPSAwLjk1Ow0KICAgICAgICAgIGlmIChHYW1lLkhhcygiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIpKSBtICo9IDAuOTk7DQogICAgICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdBcmNhbmUgQXVyYScpKSBtKj0wLjk1Ow0KICAgICAgICAgIG0gKj0gMSAtIEdhbWUuYXVyYU11bHQoIkFyY2FuZSBBdXJhIikgKiAwLjA1Ow0KICAgICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIlN1Z2FyIGJsZXNzaW5nIikpIG0gKj0gMC45Ow0KICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAiZWFzdGVyIiAmJiBHYW1lLkhhcygiU3RhcnNwYXduIikpIG0gKj0gMC45ODsNCiAgICAgICAgICBlbHNlIGlmIChHYW1lLnNlYXNvbiA9PSAiaGFsbG93ZWVuIiAmJiBHYW1lLkhhcygiU3RhcnRlcnJvciIpKQ0KICAgICAgICAgICAgbSAqPSAwLjk4Ow0KICAgICAgICAgIGVsc2UgaWYgKEdhbWUuc2Vhc29uID09ICJ2YWxlbnRpbmVzIiAmJiBHYW1lLkhhcygiU3RhcmxvdmUiKSkNCiAgICAgICAgICAgIG0gKj0gMC45ODsNCiAgICAgICAgICBlbHNlIGlmIChHYW1lLnNlYXNvbiA9PSAiZm9vbHMiICYmIEdhbWUuSGFzKCJTdGFydHJhZGUiKSkgbSAqPSAwLjk1Ow0KICAgICAgICAgIGlmICghbWUud3JhdGgpIG0gKj0gMSAvIEdhbWUuZWZmKCJnb2xkZW5Db29raWVGcmVxIik7DQogICAgICAgICAgZWxzZSBtICo9IDEgLyBHYW1lLmVmZigid3JhdGhDb29raWVGcmVxIik7DQogICAgICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImluZHVzdHJ5Iik7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIG0gKj0gMS4xOw0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG0gKj0gMS4wNjsNCiAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBtICo9IDEuMDM7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoIm1vdGhlciIpOw0KICAgICAgICAgICAgaWYgKGdvZEx2bCA9PSAxKSBtICo9IDEuMTU7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgbSAqPSAxLjE7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgbSAqPSAxLjA1Ow0KDQogICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gIT0gIiIpIHsNCiAgICAgICAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJzZWFzb25zIik7DQogICAgICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiAhPSAiZm9vbHMiKSB7DQogICAgICAgICAgICAgICAgaWYgKGdvZEx2bCA9PSAxKSBtICo9IDAuOTc7DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG0gKj0gMC45ODsNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgbSAqPSAwLjk5Ow0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgbSAqPSAwLjk1NTsNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgbSAqPSAwLjk3Ow0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBtICo9IDAuOTg1Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICh0aGlzLmNoYWluID4gMCkgbSA9IDAuMDU7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJHb2xkIGhvYXJkIikpIG0gPSAwLjAxOw0KICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoR2FtZS5mcHMgKiA2MCAqIG0pOw0KICAgICAgICB9LA0KICAgICAgICBnZXRNaW5UaW1lOiBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICB2YXIgbSA9IDU7DQogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGltZU1vZChtZSwgbSk7DQogICAgICAgIH0sDQogICAgICAgIGdldE1heFRpbWU6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIHZhciBtID0gMTU7DQogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGltZU1vZChtZSwgbSk7DQogICAgICAgIH0sDQogICAgICAgIGxhc3Q6ICIiLA0KICAgICAgfSwNCiAgICAgIHJlaW5kZWVyOiB7DQogICAgICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7fSwNCiAgICAgICAgaW5pdEZ1bmM6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIGlmICghdGhpcy5zcGF3bmVkICYmIEdhbWUuY2hpbWVUeXBlICE9IDAgJiYgR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEpDQogICAgICAgICAgICBQbGF5U291bmQoInNuZC9qaW5nbGUubXAzIik7DQoNCiAgICAgICAgICBtZS54ID0gLTEyODsNCiAgICAgICAgICBtZS55ID0NCiAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKg0KICAgICAgICAgICAgICAgIE1hdGgubWF4KDAsIEdhbWUuYm91bmRzLmJvdHRvbSAtIEdhbWUuYm91bmRzLnRvcCAtIDI1NikgKw0KICAgICAgICAgICAgICAgIEdhbWUuYm91bmRzLnRvcCArDQogICAgICAgICAgICAgICAgMTI4DQogICAgICAgICAgICApIC0gMTI4Ow0KICAgICAgICAgIC8vbWUubC5zdHlsZS5sZWZ0PW1lLngrJ3B4JzsNCiAgICAgICAgICAvL21lLmwuc3R5bGUudG9wPW1lLnkrJ3B4JzsNCiAgICAgICAgICBtZS5sLnN0eWxlLndpZHRoID0gIjE2N3B4IjsNCiAgICAgICAgICBtZS5sLnN0eWxlLmhlaWdodCA9ICIyMTJweCI7DQogICAgICAgICAgbWUubC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAidXJsKGltZy9mcm9zdGVkUmVpbmRlZXIucG5nKSI7DQogICAgICAgICAgbWUubC5zdHlsZS5vcGFjaXR5ID0gIjAiOw0KICAgICAgICAgIC8vbWUubC5zdHlsZS50cmFuc2Zvcm09J3JvdGF0ZSgnKyhNYXRoLnJhbmRvbSgpKjYwLTMwKSsnZGVnKSBzY2FsZSgnKyhNYXRoLnJhbmRvbSgpKjErMC4yNSkrJyknOw0KICAgICAgICAgIG1lLmwuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgbWUubC5zZXRBdHRyaWJ1dGUoImFsdCIsIGxvYygiUmVpbmRlZXIiKSk7DQoNCiAgICAgICAgICBtZS5saWZlID0gMTsgLy90aGUgcmVpbmRlZXIncyBjdXJyZW50IHByb2dyZXNzaW9uIHRocm91Z2ggaXRzIGxpZmVzcGFuIChpbiBmcmFtZXMpDQogICAgICAgICAgbWUuZHVyID0gNDsgLy9kdXJhdGlvbjsgdGhlIGNvb2tpZSdzIGxpZmVzcGFuIGluIHNlY29uZHMgYmVmb3JlIGl0IGRlc3Bhd25zDQoNCiAgICAgICAgICB2YXIgZHVyID0gNDsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIldlaWdodGVkIHNsZWlnaHMiKSkgZHVyICo9IDI7DQogICAgICAgICAgZHVyICo9IEdhbWUuZWZmKCJyZWluZGVlckR1ciIpOw0KICAgICAgICAgIG1lLmR1ciA9IGR1cjsNCiAgICAgICAgICBtZS5saWZlID0gTWF0aC5jZWlsKEdhbWUuZnBzICogbWUuZHVyKTsNCiAgICAgICAgICBtZS5zaXplTXVsdCA9IDE7DQogICAgICAgIH0sDQogICAgICAgIHVwZGF0ZUZ1bmM6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIHZhciBjdXJ2ZSA9IDEgLSBNYXRoLnBvdygobWUubGlmZSAvIChHYW1lLmZwcyAqIG1lLmR1cikpICogMiAtIDEsIDEyKTsNCiAgICAgICAgICBtZS5sLnN0eWxlLm9wYWNpdHkgPSBjdXJ2ZTsNCiAgICAgICAgICBtZS5sLnN0eWxlLnRyYW5zZm9ybSA9DQogICAgICAgICAgICAidHJhbnNsYXRlKCIgKw0KICAgICAgICAgICAgKG1lLnggKw0KICAgICAgICAgICAgICAoR2FtZS5ib3VuZHMucmlnaHQgLSBHYW1lLmJvdW5kcy5sZWZ0KSAqDQogICAgICAgICAgICAgICAgKDEgLSBtZS5saWZlIC8gKEdhbWUuZnBzICogbWUuZHVyKSkpICsNCiAgICAgICAgICAgICJweCwiICsNCiAgICAgICAgICAgIChtZS55IC0gTWF0aC5hYnMoTWF0aC5zaW4obWUubGlmZSAqIDAuMSkpICogMTI4KSArDQogICAgICAgICAgICAicHgpIHJvdGF0ZSgiICsNCiAgICAgICAgICAgIE1hdGguc2luKG1lLmxpZmUgKiAwLjIgKyAwLjMpICogMTAgKw0KICAgICAgICAgICAgImRlZykgc2NhbGUoIiArDQogICAgICAgICAgICBtZS5zaXplTXVsdCAqICgxICsgTWF0aC5zaW4obWUuaWQgKiAwLjUzKSAqIDAuMSkgKw0KICAgICAgICAgICAgIikiOw0KICAgICAgICAgIG1lLmxpZmUtLTsNCiAgICAgICAgICBpZiAobWUubGlmZSA8PSAwKSB7DQogICAgICAgICAgICB0aGlzLm1pc3NGdW5jKG1lKTsNCiAgICAgICAgICAgIG1lLmRpZSgpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgcG9wRnVuYzogZnVuY3Rpb24gKG1lKSB7DQogICAgICAgICAgLy9nZXQgYWNoaWV2cyBhbmQgc3RhdHMNCiAgICAgICAgICBpZiAobWUuc3Bhd25MZWFkKSB7DQogICAgICAgICAgICBHYW1lLnJlaW5kZWVyQ2xpY2tlZCsrOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciB2YWwgPSBHYW1lLmNvb2tpZXNQcyAqIDYwOw0KICAgICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIkVsZGVyIGZyZW56eSIpKSB2YWwgKj0gMC41OyAvL3Zlcnkgc29ycnkNCiAgICAgICAgICBpZiAoR2FtZS5oYXNCdWZmKCJGcmVuenkiKSkgdmFsICo9IDAuNzU7IC8vSSBzaW5jZXJlbHkgYXBvbG9naXplDQogICAgICAgICAgdmFyIG1vbmkgPSBNYXRoLm1heCgyNSwgdmFsKTsgLy8xIG1pbnV0ZSBvZiBjb29raWUgcHJvZHVjdGlvbiwgb3IgMjUgY29va2llcyAtIHdoaWNoZXZlciBpcyBoaWdoZXN0DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJIbyBobyBoby1mbGF2b3JlZCBmcm9zdGluZyIpKSBtb25pICo9IDI7DQogICAgICAgICAgbW9uaSAqPSBHYW1lLmVmZigicmVpbmRlZXJHYWluIik7DQogICAgICAgICAgR2FtZS5FYXJuKG1vbmkpOw0KICAgICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIkVsZGVyIGZyZW56eSIpKSBHYW1lLldpbigiRWxkZWVyIik7DQoNCiAgICAgICAgICB2YXIgY29va2llID0gIiI7DQogICAgICAgICAgdmFyIGZhaWxSYXRlID0gMC44Ow0KICAgICAgICAgIGlmIChHYW1lLkhhc0FjaGlldigiTGV0IGl0IHNub3ciKSkgZmFpbFJhdGUgPSAwLjY7DQogICAgICAgICAgZmFpbFJhdGUgKj0gMSAvIEdhbWUuZHJvcFJhdGVNdWx0KCk7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTdGFyc25vdyIpKSBmYWlsUmF0ZSAqPSAwLjk1Ow0KICAgICAgICAgIGlmIChHYW1lLmhhc0dvZCkgew0KICAgICAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJzZWFzb25zIik7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIGZhaWxSYXRlICo9IDAuOTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAyKSBmYWlsUmF0ZSAqPSAwLjk1Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIGZhaWxSYXRlICo9IDAuOTc7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gZmFpbFJhdGUpIHsNCiAgICAgICAgICAgIC8vY2hyaXN0bWFzIGNvb2tpZSBkcm9wcw0KICAgICAgICAgICAgY29va2llID0gY2hvb3NlKFsNCiAgICAgICAgICAgICAgIkNocmlzdG1hcyB0cmVlIGJpc2N1aXRzIiwNCiAgICAgICAgICAgICAgIlNub3dmbGFrZSBiaXNjdWl0cyIsDQogICAgICAgICAgICAgICJTbm93bWFuIGJpc2N1aXRzIiwNCiAgICAgICAgICAgICAgIkhvbGx5IGJpc2N1aXRzIiwNCiAgICAgICAgICAgICAgIkNhbmR5IGNhbmUgYmlzY3VpdHMiLA0KICAgICAgICAgICAgICAiQmVsbCBiaXNjdWl0cyIsDQogICAgICAgICAgICAgICJQcmVzZW50IGJpc2N1aXRzIiwNCiAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgaWYgKCFHYW1lLkhhc1VubG9ja2VkKGNvb2tpZSkgJiYgIUdhbWUuSGFzKGNvb2tpZSkpIHsNCiAgICAgICAgICAgICAgR2FtZS5VbmxvY2soY29va2llKTsNCiAgICAgICAgICAgIH0gZWxzZSBjb29raWUgPSAiIjsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgcG9wdXAgPSAiIjsNCg0KICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgbG9jKCJZb3UgZm91bmQgJTEhIiwgY2hvb3NlKGxvYygiUmVpbmRlZXIgbmFtZXMiKSkpLA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiVGhlIHJlaW5kZWVyIGdpdmVzIHlvdSAlMS4iLA0KICAgICAgICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeShtb25pKSkNCiAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAoY29va2llID09ICIiDQogICAgICAgICAgICAgICAgPyAiIg0KICAgICAgICAgICAgICAgIDogIjxicj4iICsNCiAgICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICAgIllvdSBhcmUgYWxzbyByZXdhcmRlZCB3aXRoICUxISIsDQogICAgICAgICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbY29va2llXS5kbmFtZQ0KICAgICAgICAgICAgICAgICAgKSksDQogICAgICAgICAgICBbMTIsIDldLA0KICAgICAgICAgICAgNg0KICAgICAgICAgICk7DQogICAgICAgICAgcG9wdXAgPQ0KICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTo4MCU7Ij4nICsNCiAgICAgICAgICAgIGxvYygiKyUxISIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1vbmkpKSkgKw0KICAgICAgICAgICAgIjwvZGl2PiI7DQoNCiAgICAgICAgICBpZiAocG9wdXAgIT0gIiIpIEdhbWUuUG9wdXAocG9wdXAsIEdhbWUubW91c2VYLCBHYW1lLm1vdXNlWSk7DQoNCiAgICAgICAgICAvL3NwYXJrbGUgYW5kIGtpbGwgdGhlIHNoaW1tZXINCiAgICAgICAgICBHYW1lLlNwYXJrbGVBdChHYW1lLm1vdXNlWCwgR2FtZS5tb3VzZVkpOw0KICAgICAgICAgIFBsYXlTb3VuZCgic25kL2ppbmdsZUNsaWNrLm1wMyIpOw0KICAgICAgICAgIG1lLmRpZSgpOw0KICAgICAgICB9LA0KICAgICAgICBtaXNzRnVuYzogZnVuY3Rpb24gKG1lKSB7fSwNCiAgICAgICAgc3Bhd25zT25UaW1lcjogdHJ1ZSwNCiAgICAgICAgc3Bhd25Db25kaXRpb25zOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJjaHJpc3RtYXMiKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSwNCiAgICAgICAgc3Bhd25lZDogMCwNCiAgICAgICAgdGltZTogMCwNCiAgICAgICAgbWluVGltZTogMCwNCiAgICAgICAgbWF4VGltZTogMCwNCiAgICAgICAgZ2V0VGltZU1vZDogZnVuY3Rpb24gKG1lLCBtKSB7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJSZWluZGVlciBiYWtpbmcgZ3JvdW5kcyIpKSBtIC89IDI7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTdGFyc25vdyIpKSBtICo9IDAuOTU7DQogICAgICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoInNlYXNvbnMiKTsNCiAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgbSAqPSAwLjk7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgbSAqPSAwLjk1Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIG0gKj0gMC45NzsNCiAgICAgICAgICB9DQogICAgICAgICAgbSAqPSAxIC8gR2FtZS5lZmYoInJlaW5kZWVyRnJlcSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiUmVpbmRlZXIgc2Vhc29uIikpIG0gPSAwLjAxOw0KICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoR2FtZS5mcHMgKiA2MCAqIG0pOw0KICAgICAgICB9LA0KICAgICAgICBnZXRNaW5UaW1lOiBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICB2YXIgbSA9IDM7DQogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGltZU1vZChtZSwgbSk7DQogICAgICAgIH0sDQogICAgICAgIGdldE1heFRpbWU6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIHZhciBtID0gNjsNCiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaW1lTW9kKG1lLCBtKTsNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgfTsNCg0KICAgIEdhbWUuZ29sZGVuQ29va2llQ2hvaWNlcyA9IFsNCiAgICAgICJGcmVuenkiLA0KICAgICAgImZyZW56eSIsDQogICAgICAiTHVja3kiLA0KICAgICAgIm11bHRpcGx5IGNvb2tpZXMiLA0KICAgICAgIlJ1aW4iLA0KICAgICAgInJ1aW4gY29va2llcyIsDQogICAgICAiRWxkZXIgZnJlbnp5IiwNCiAgICAgICJibG9vZCBmcmVuenkiLA0KICAgICAgIkNsb3QiLA0KICAgICAgImNsb3QiLA0KICAgICAgIkNsaWNrIGZyZW56eSIsDQogICAgICAiY2xpY2sgZnJlbnp5IiwNCiAgICAgICJDdXJzZWQgZmluZ2VyIiwNCiAgICAgICJjdXJzZWQgZmluZ2VyIiwNCiAgICAgICJDb29raWUgY2hhaW4iLA0KICAgICAgImNoYWluIGNvb2tpZSIsDQogICAgICAiQ29va2llIHN0b3JtIiwNCiAgICAgICJjb29raWUgc3Rvcm0iLA0KICAgICAgIkJ1aWxkaW5nIHNwZWNpYWwiLA0KICAgICAgImJ1aWxkaW5nIHNwZWNpYWwiLA0KICAgICAgIkRyYWdvbiBIYXJ2ZXN0IiwNCiAgICAgICJkcmFnb24gaGFydmVzdCIsDQogICAgICAiRHJhZ29uZmxpZ2h0IiwNCiAgICAgICJkcmFnb25mbGlnaHQiLA0KICAgICAgIlN3ZWV0IiwNCiAgICAgICJmcmVlIHN1Z2FyIGx1bXAiLA0KICAgICAgIkJsYWIiLA0KICAgICAgImJsYWIiLA0KICAgIF07DQogICAgR2FtZS5nb2xkZW5Db29raWVCdWlsZGluZ0J1ZmZzID0gew0KICAgICAgQ3Vyc29yOiBbIkhpZ2gtZml2ZSIsICJTbGFwIHRvIHRoZSBmYWNlIl0sDQogICAgICBHcmFuZG1hOiBbIkNvbmdyZWdhdGlvbiIsICJTZW5pbGl0eSJdLA0KICAgICAgRmFybTogWyJMdXh1cmlhbnQgaGFydmVzdCIsICJMb2N1c3RzIl0sDQogICAgICBNaW5lOiBbIk9yZSB2ZWluIiwgIkNhdmUtaW4iXSwNCiAgICAgIEZhY3Rvcnk6IFsiT2lsZWQtdXAiLCAiSmFtbWVkIG1hY2hpbmVyeSJdLA0KICAgICAgQmFuazogWyJKdWljeSBwcm9maXRzIiwgIlJlY2Vzc2lvbiJdLA0KICAgICAgVGVtcGxlOiBbIkZlcnZlbnQgYWRvcmF0aW9uIiwgIkNyaXNpcyBvZiBmYWl0aCJdLA0KICAgICAgIldpemFyZCB0b3dlciI6IFsiTWFuYWJsb29tIiwgIk1hZ2l2b3JlcyJdLA0KICAgICAgU2hpcG1lbnQ6IFsiRGVsaWNpb3VzIGxpZmVmb3JtcyIsICJCbGFjayBob2xlcyJdLA0KICAgICAgIkFsY2hlbXkgbGFiIjogWyJCcmVha3Rocm91Z2giLCAiTGFiIGRpc2FzdGVyIl0sDQogICAgICBQb3J0YWw6IFsiUmlnaHRlb3VzIGNhdGFjbHlzbSIsICJEaW1lbnNpb25hbCBjYWxhbWl0eSJdLA0KICAgICAgIlRpbWUgbWFjaGluZSI6IFsiR29sZGVuIGFnZXMiLCAiVGltZSBqYW0iXSwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciI6IFsiRXh0cmEgY3ljbGVzIiwgIlByZWRpY3RhYmxlIHRyYWdlZHkiXSwNCiAgICAgIFByaXNtOiBbIlNvbGFyIGZsYXJlIiwgIkVjbGlwc2UiXSwNCiAgICAgIENoYW5jZW1ha2VyOiBbIldpbm5pbmcgc3RyZWFrIiwgIkRyeSBzcGVsbCJdLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIjogWyJNYWNyb2Nvc20iLCAiTWljcm9jb3NtIl0sDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIjogWyJSZWZhY3RvcmluZyIsICJBbnRpcGF0dGVybiJdLA0KICAgICAgSWRsZXZlcnNlOiBbIkNvc21pYyBudXJzZXJ5IiwgIkJpZyBjcnVuY2giXSwNCiAgICAgICJDb3J0ZXggYmFrZXIiOiBbIkJyYWluc3Rvcm0iLCAiQnJhaW4gZnJlZXplIl0sDQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlQQVJUSUNMRVMNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICAvL2dlbmVyaWMgcGFydGljbGVzIChmYWxsaW5nIGNvb2tpZXMgZXRjKQ0KICAgIC8vb25seSBkaXNwbGF5ZWQgb24gbGVmdCBzZWN0aW9uDQogICAgR2FtZS5wYXJ0aWNsZXMgPSBbXTsNCiAgICBHYW1lLnBhcnRpY2xlc04gPSA1MDsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUucGFydGljbGVzTjsgaSsrKSB7DQogICAgICBHYW1lLnBhcnRpY2xlc1tpXSA9IHsNCiAgICAgICAgeDogMCwNCiAgICAgICAgeTogMCwNCiAgICAgICAgeGQ6IDAsDQogICAgICAgIHlkOiAwLA0KICAgICAgICB3OiA2NCwNCiAgICAgICAgaDogNjQsDQogICAgICAgIHo6IDAsDQogICAgICAgIHNpemU6IDEsDQogICAgICAgIGR1cjogMiwNCiAgICAgICAgbGlmZTogLTEsDQogICAgICAgIHI6IDAsDQogICAgICAgIHBpYzogInNtYWxsQ29va2llcy5wbmciLA0KICAgICAgICBwaWNJZDogMCwNCiAgICAgICAgcGljUG9zOiBbMCwgMF0sDQogICAgICB9Ow0KICAgIH0NCg0KICAgIEdhbWUucGFydGljbGVzVXBkYXRlID0gZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLnBhcnRpY2xlc047IGkrKykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLnBhcnRpY2xlc1tpXTsNCiAgICAgICAgaWYgKG1lLmxpZmUgIT0gLTEpIHsNCiAgICAgICAgICBpZiAoIW1lLnRleHQpIG1lLnlkICs9IDAuMiArIE1hdGgucmFuZG9tKCkgKiAwLjE7DQogICAgICAgICAgbWUueCArPSBtZS54ZDsNCiAgICAgICAgICBtZS55ICs9IG1lLnlkOw0KICAgICAgICAgIC8vbWUueSs9bWUubGlmZSowLjI1K01hdGgucmFuZG9tKCkqMC4yNTsNCiAgICAgICAgICBtZS5saWZlKys7DQogICAgICAgICAgaWYgKG1lLmxpZmUgPj0gR2FtZS5mcHMgKiBtZS5kdXIpIHsNCiAgICAgICAgICAgIG1lLmxpZmUgPSAtMTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUucGFydGljbGVBZGQgPSBmdW5jdGlvbiAoeCwgeSwgeGQsIHlkLCBzaXplLCBkdXIsIHosIHBpYywgdGV4dCkgew0KICAgICAgLy9HYW1lLnBhcnRpY2xlQWRkKHBvcyBYLHBvcyBZLHNwZWVkIFgsc3BlZWQgWSxzaXplIChtdWx0aXBsaWVyKSxkdXJhdGlvbiAoc2Vjb25kcyksbGF5ZXIscGljdHVyZSx0ZXh0KTsNCiAgICAgIC8vcGljayB0aGUgZmlyc3QgZnJlZSAob3IgdGhlIG9sZGVzdCkgcGFydGljbGUgdG8gcmVwbGFjZSBpdA0KICAgICAgaWYgKHRydWUpIHsNCiAgICAgICAgLy9HYW1lLnByZWZzLnBhcnRpY2xlcykNCiAgICAgICAgdmFyIGhpZ2hlc3QgPSAwOw0KICAgICAgICB2YXIgaGlnaGVzdEkgPSAwOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUucGFydGljbGVzTjsgaSsrKSB7DQogICAgICAgICAgaWYgKEdhbWUucGFydGljbGVzW2ldLmxpZmUgPT0gLTEpIHsNCiAgICAgICAgICAgIGhpZ2hlc3RJID0gaTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoR2FtZS5wYXJ0aWNsZXNbaV0ubGlmZSA+IGhpZ2hlc3QpIHsNCiAgICAgICAgICAgIGhpZ2hlc3QgPSBHYW1lLnBhcnRpY2xlc1tpXS5saWZlOw0KICAgICAgICAgICAgaGlnaGVzdEkgPSBpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB2YXIgYXV0byA9IDA7DQogICAgICAgIGlmICh4KSBhdXRvID0gMTsNCiAgICAgICAgdmFyIGkgPSBoaWdoZXN0STsNCiAgICAgICAgdmFyIHggPSB4IHx8IC02NDsNCiAgICAgICAgaWYgKEdhbWUuTGVmdEJhY2tncm91bmQgJiYgIWF1dG8pDQogICAgICAgICAgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIEdhbWUuTGVmdEJhY2tncm91bmQuY2FudmFzLndpZHRoKTsNCiAgICAgICAgdmFyIHkgPSB5IHx8IC02NDsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5wYXJ0aWNsZXNbaV07DQogICAgICAgIG1lLmxpZmUgPSAwOw0KICAgICAgICBtZS54ID0geDsNCiAgICAgICAgbWUueSA9IHk7DQogICAgICAgIG1lLnhkID0geGQgfHwgMDsNCiAgICAgICAgbWUueWQgPSB5ZCB8fCAwOw0KICAgICAgICBtZS5zaXplID0gc2l6ZSB8fCAxOw0KICAgICAgICBtZS56ID0geiB8fCAwOw0KICAgICAgICBtZS5kdXIgPSBkdXIgfHwgMjsNCiAgICAgICAgbWUuciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM2MCk7DQogICAgICAgIG1lLnBpY0lkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApOw0KICAgICAgICBpZiAoIXBpYykgew0KICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAiZm9vbHMiKSBwaWMgPSAic21hbGxEb2xsYXJzLnBuZyI7DQogICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2YXIgY29va2llcyA9IFtbMTAsIDBdXTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgICAgICAgICB2YXIgY29va2llID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgICAgICAgICAgaWYgKGNvb2tpZS5ib3VnaHQgPiAwICYmIGNvb2tpZS5wb29sID09ICJjb29raWUiKQ0KICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaChjb29raWUuaWNvbik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBtZS5waWNQb3MgPSBjaG9vc2UoY29va2llcyk7DQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIEdhbWUuYmFrZXJ5TmFtZS50b0xvd2VyQ2FzZSgpID09ICJvcnRpZWwiIHx8DQogICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAxIC8gMTAwMDANCiAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgbWUucGljUG9zID0gWzE3LCA1XTsNCiAgICAgICAgICAgIHBpYyA9ICJpY29ucy5wbmciOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcGljICE9PSAic3RyaW5nIikgew0KICAgICAgICAgIG1lLnBpY1BvcyA9IHBpYzsNCiAgICAgICAgICBwaWMgPSAiaWNvbnMucG5nIjsNCiAgICAgICAgfQ0KICAgICAgICBtZS5waWMgPSBwaWMgfHwgInNtYWxsQ29va2llcy5wbmciOw0KICAgICAgICBtZS50ZXh0ID0gdGV4dCB8fCAwOw0KICAgICAgICByZXR1cm4gbWU7DQogICAgICB9DQogICAgICByZXR1cm4ge307DQogICAgfTsNCiAgICBHYW1lLnBhcnRpY2xlc0RyYXcgPSBmdW5jdGlvbiAoeikgew0KICAgICAgdmFyIGN0eCA9IEdhbWUuTGVmdEJhY2tncm91bmQ7DQogICAgICBjdHguZmlsbFN0eWxlID0gIiNmZmYiOw0KICAgICAgY3R4LmZvbnQgPSAiMjBweCBNZXJyaXdlYXRoZXIiOw0KICAgICAgY3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOw0KDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUucGFydGljbGVzTjsgaSsrKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUucGFydGljbGVzW2ldOw0KICAgICAgICBpZiAobWUueiA9PSB6KSB7DQogICAgICAgICAgaWYgKG1lLmxpZmUgIT0gLTEpIHsNCiAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gMSAtIG1lLmxpZmUgLyAoR2FtZS5mcHMgKiBtZS5kdXIpOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gb3BhY2l0eTsNCiAgICAgICAgICAgIGlmIChtZS50ZXh0KSB7DQogICAgICAgICAgICAgIGN0eC5maWxsVGV4dChtZS50ZXh0LCBtZS54LCBtZS55KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUobWUueCwgbWUueSk7DQogICAgICAgICAgICAgIGN0eC5yb3RhdGUoKG1lLnIgLyAzNjApICogTWF0aC5QSSAqIDIpOw0KICAgICAgICAgICAgICB2YXIgdyA9IDY0Ow0KICAgICAgICAgICAgICB2YXIgaCA9IDY0Ow0KICAgICAgICAgICAgICBpZiAobWUucGljID09ICJpY29ucy5wbmciKSB7DQogICAgICAgICAgICAgICAgdyA9IDQ4Ow0KICAgICAgICAgICAgICAgIGggPSA0ODsNCiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICAgICAgUGljKG1lLnBpYyksDQogICAgICAgICAgICAgICAgICBtZS5waWNQb3NbMF0gKiB3LA0KICAgICAgICAgICAgICAgICAgbWUucGljUG9zWzFdICogaCwNCiAgICAgICAgICAgICAgICAgIHcsDQogICAgICAgICAgICAgICAgICBoLA0KICAgICAgICAgICAgICAgICAgKC13IC8gMikgKiBtZS5zaXplLA0KICAgICAgICAgICAgICAgICAgKC1oIC8gMikgKiBtZS5zaXplLA0KICAgICAgICAgICAgICAgICAgdyAqIG1lLnNpemUsDQogICAgICAgICAgICAgICAgICBoICogbWUuc2l6ZQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgbWUucGljID09ICJ3cmlua2xlckJpdHMucG5nIiB8fA0KICAgICAgICAgICAgICAgICAgbWUucGljID09ICJzaGlueVdyaW5rbGVyQml0cy5wbmciDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICB3ID0gMTAwOw0KICAgICAgICAgICAgICAgICAgaCA9IDIwMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgIFBpYyhtZS5waWMpLA0KICAgICAgICAgICAgICAgICAgKG1lLnBpY0lkICUgOCkgKiB3LA0KICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgIHcsDQogICAgICAgICAgICAgICAgICBoLA0KICAgICAgICAgICAgICAgICAgKC13IC8gMikgKiBtZS5zaXplLA0KICAgICAgICAgICAgICAgICAgKC1oIC8gMikgKiBtZS5zaXplLA0KICAgICAgICAgICAgICAgICAgdyAqIG1lLnNpemUsDQogICAgICAgICAgICAgICAgICBoICogbWUuc2l6ZQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KDQogICAgLy90ZXh0IHBhcnRpY2xlcyAocG9wdXBzIGV0YykNCiAgICBHYW1lLnRleHRQYXJ0aWNsZXMgPSBbXTsNCiAgICBHYW1lLnRleHRQYXJ0aWNsZXNZID0gMDsNCiAgICB2YXIgc3RyID0gIiI7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyMDsgaSsrKSB7DQogICAgICBHYW1lLnRleHRQYXJ0aWNsZXNbaV0gPSB7IHg6IDAsIHk6IDAsIGxpZmU6IC0xLCB0ZXh0OiAiIiB9Ow0KICAgICAgc3RyICs9ICc8ZGl2IGlkPSJwYXJ0aWNsZScgKyBpICsgJyIgY2xhc3M9InBhcnRpY2xlIHRpdGxlIj48L2Rpdj4nOw0KICAgIH0NCiAgICBsKCJwYXJ0aWNsZXMiKS5pbm5lckhUTUwgPSBzdHI7DQogICAgR2FtZS50ZXh0UGFydGljbGVzVXBkYXRlID0gZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnRleHRQYXJ0aWNsZXMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS50ZXh0UGFydGljbGVzW2ldOw0KICAgICAgICBpZiAobWUubGlmZSAhPSAtMSkgew0KICAgICAgICAgIG1lLmxpZmUrKzsNCiAgICAgICAgICBpZiAobWUubGlmZSA+PSBHYW1lLmZwcyAqIDQpIHsNCiAgICAgICAgICAgIHZhciBlbCA9IG1lLmw7DQogICAgICAgICAgICBtZS5saWZlID0gLTE7DQogICAgICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMDsNCiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLnRleHRQYXJ0aWNsZXNBZGQgPSBmdW5jdGlvbiAodGV4dCwgZWwsIHBvc1gsIHBvc1kpIHsNCiAgICAgIC8vcGljayB0aGUgZmlyc3QgZnJlZSAob3IgdGhlIG9sZGVzdCkgcGFydGljbGUgdG8gcmVwbGFjZSBpdA0KICAgICAgdmFyIGhpZ2hlc3QgPSAwOw0KICAgICAgdmFyIGhpZ2hlc3RJID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS50ZXh0UGFydGljbGVzKSB7DQogICAgICAgIGlmIChHYW1lLnRleHRQYXJ0aWNsZXNbaV0ubGlmZSA9PSAtMSkgew0KICAgICAgICAgIGhpZ2hlc3RJID0gaTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS50ZXh0UGFydGljbGVzW2ldLmxpZmUgPiBoaWdoZXN0KSB7DQogICAgICAgICAgaGlnaGVzdCA9IEdhbWUudGV4dFBhcnRpY2xlc1tpXS5saWZlOw0KICAgICAgICAgIGhpZ2hlc3RJID0gaTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdmFyIGkgPSBoaWdoZXN0STsNCiAgICAgIHZhciBub1N0YWNrID0gMDsNCiAgICAgIGlmICh0eXBlb2YgcG9zWCAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIHBvc1kgIT09ICJ1bmRlZmluZWQiKSB7DQogICAgICAgIHggPSBwb3NYOw0KICAgICAgICB5ID0gcG9zWTsNCiAgICAgICAgbm9TdGFjayA9IDE7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB2YXIgeCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDQwOw0KICAgICAgICB2YXIgeSA9IDA7IC8vKyhNYXRoLnJhbmRvbSgpLTAuNSkqNDA7DQogICAgICAgIGlmICghZWwpIHsNCiAgICAgICAgICB2YXIgcmVjdCA9IEdhbWUuYm91bmRzOw0KICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcigocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyKTsNCiAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocmVjdC5ib3R0b20pIC0gR2FtZS5tb2JpbGUgKiA2NDsNCiAgICAgICAgICB4ICs9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDQwOw0KICAgICAgICAgIHkgKz0gMDsgLy8oTWF0aC5yYW5kb20oKS0wLjUpKjQwOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoIW5vU3RhY2spIHkgLT0gR2FtZS50ZXh0UGFydGljbGVzWTsNCg0KICAgICAgeCA9IE1hdGgubWF4KEdhbWUuYm91bmRzLmxlZnQgKyAyMDAsIHgpOw0KICAgICAgeCA9IE1hdGgubWluKEdhbWUuYm91bmRzLnJpZ2h0IC0gMjAwLCB4KTsNCiAgICAgIHkgPSBNYXRoLm1heChHYW1lLmJvdW5kcy50b3AgKyAzMiArIChBcHAgPyAzMiA6IDApLCB5KTsNCg0KICAgICAgdmFyIG1lID0gR2FtZS50ZXh0UGFydGljbGVzW2ldOw0KICAgICAgaWYgKCFtZS5sKSBtZS5sID0gbCgicGFydGljbGUiICsgaSk7DQogICAgICBtZS5saWZlID0gMDsNCiAgICAgIG1lLnggPSB4Ow0KICAgICAgbWUueSA9IHk7DQogICAgICBtZS50ZXh0ID0gdGV4dDsNCiAgICAgIG1lLmwuaW5uZXJIVE1MID0gdGV4dDsNCiAgICAgIG1lLmwuc3R5bGUubGVmdCA9IE1hdGguZmxvb3IoR2FtZS50ZXh0UGFydGljbGVzW2ldLnggLSAyMDApICsgInB4IjsNCiAgICAgIG1lLmwuc3R5bGUuYm90dG9tID0gTWF0aC5mbG9vcigtR2FtZS50ZXh0UGFydGljbGVzW2ldLnkpICsgInB4IjsNCiAgICAgIGZvciAodmFyIGlpIGluIEdhbWUudGV4dFBhcnRpY2xlcykgew0KICAgICAgICBpZiAoaWkgIT0gaSkNCiAgICAgICAgICAoDQogICAgICAgICAgICBHYW1lLnRleHRQYXJ0aWNsZXNbaWldLmwgfHwgbCgicGFydGljbGUiICsgaWkpDQogICAgICAgICAgKS5zdHlsZS56SW5kZXggPSAxMDAwMDAwMDA7DQogICAgICB9DQogICAgICBtZS5sLnN0eWxlLnpJbmRleCA9IDEwMDAwMDAwMTsNCiAgICAgIG1lLmwuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICBtZS5sLmNsYXNzTmFtZSA9ICJwYXJ0aWNsZSB0aXRsZSI7DQogICAgICB2b2lkIG1lLmwub2Zmc2V0V2lkdGg7DQogICAgICBtZS5sLmNsYXNzTmFtZSA9ICJwYXJ0aWNsZSB0aXRsZSByaXNpbmdVcExpbmdlciI7DQogICAgICBpZiAoIW5vU3RhY2spIEdhbWUudGV4dFBhcnRpY2xlc1kgKz0gNjA7DQogICAgfTsNCiAgICBHYW1lLnBvcHVwcyA9IDE7DQogICAgR2FtZS5Qb3B1cCA9IGZ1bmN0aW9uICh0ZXh0LCB4LCB5KSB7DQogICAgICBpZiAoR2FtZS5wb3B1cHMpIEdhbWUudGV4dFBhcnRpY2xlc0FkZCh0ZXh0LCAwLCB4LCB5KTsNCiAgICB9Ow0KDQogICAgLy9kaXNwbGF5IHNwYXJrbGVzIGF0IGEgc2V0IHBvc2l0aW9uDQogICAgR2FtZS5zcGFya2xlcyA9IGwoInNwYXJrbGVzIik7DQogICAgR2FtZS5zcGFya2xlc1QgPSAwOw0KICAgIEdhbWUuc3BhcmtsZXNGcmFtZXMgPSAxNjsNCiAgICBHYW1lLlNwYXJrbGVBdCA9IGZ1bmN0aW9uICh4LCB5KSB7DQogICAgICBpZiAoR2FtZS5ibGVuZE1vZGVzT24pIHsNCiAgICAgICAgR2FtZS5zcGFya2xlc1QgPSBHYW1lLnNwYXJrbGVzRnJhbWVzICsgMTsNCiAgICAgICAgR2FtZS5zcGFya2xlcy5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAiMHB4IDBweCI7DQogICAgICAgIEdhbWUuc3BhcmtsZXMuc3R5bGUubGVmdCA9IE1hdGguZmxvb3IoeCAtIDY0KSArICJweCI7DQogICAgICAgIEdhbWUuc3BhcmtsZXMuc3R5bGUudG9wID0gTWF0aC5mbG9vcih5IC0gNjQpICsgInB4IjsNCiAgICAgICAgR2FtZS5zcGFya2xlcy5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuU3BhcmtsZU9uID0gZnVuY3Rpb24gKGVsKSB7DQogICAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kcygpOw0KICAgICAgR2FtZS5TcGFya2xlQXQoDQogICAgICAgIChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIsDQogICAgICAgIChyZWN0LnRvcCArIHJlY3QuYm90dG9tKSAvIDIgLSAyNA0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCU5PVElGSUNBVElPTlMNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICAvL21heWJlIGRvIGFsbCB0aGlzIG1lc3Mgd2l0aCBwcm9wZXIgRE9NIGluc3RlYWQgb2YgcmV3cml0aW5nIHRoZSBpbm5lckhUTUwNCiAgICBHYW1lLk5vdGVzID0gW107DQogICAgR2FtZS5Ob3Rlc0J5SWQgPSBbXTsNCiAgICBHYW1lLm5vdGVJZCA9IDA7DQogICAgR2FtZS5ub3RlTCA9IGwoIm5vdGVzIik7DQogICAgR2FtZS5Ob3RlID0gZnVuY3Rpb24gKHRpdGxlLCBkZXNjLCBwaWMsIHF1aWNrKSB7DQogICAgICB0aGlzLnRpdGxlID0gdGl0bGU7DQogICAgICB0aGlzLmRlc2MgPSBkZXNjIHx8ICIiOw0KICAgICAgdGhpcy5waWMgPSBwaWMgfHwgIiI7DQogICAgICB0aGlzLmlkID0gR2FtZS5ub3RlSWQ7DQogICAgICB0aGlzLmRhdGUgPSBEYXRlLm5vdygpOw0KICAgICAgdGhpcy5xdWljayA9IHF1aWNrIHx8IDA7DQogICAgICB0aGlzLmxpZmUgPSAodGhpcy5xdWljayB8fCAxKSAqIEdhbWUuZnBzOw0KICAgICAgdGhpcy5sID0gMDsNCiAgICAgIHRoaXMuaGVpZ2h0ID0gMDsNCiAgICAgIHRoaXMudG9vbHRpcCA9IDA7DQogICAgICBHYW1lLm5vdGVJZCsrOw0KICAgICAgR2FtZS5Ob3Rlc0J5SWRbdGhpcy5pZF0gPSB0aGlzOw0KICAgICAgR2FtZS5Ob3Rlcy51bnNoaWZ0KHRoaXMpOw0KICAgICAgaWYgKEdhbWUuTm90ZXMubGVuZ3RoID4gNTApIEdhbWUuTm90ZXMucG9wKCk7DQogICAgICAvL0dhbWUuTm90ZXMucHVzaCh0aGlzKTsNCiAgICAgIC8vaWYgKEdhbWUuTm90ZXMubGVuZ3RoPjUwKSBHYW1lLk5vdGVzLnNoaWZ0KCk7DQogICAgICBHYW1lLlVwZGF0ZU5vdGVzKCk7DQogICAgfTsNCiAgICBHYW1lLkNsb3NlTm90ZSA9IGZ1bmN0aW9uIChpZCkgew0KICAgICAgdmFyIG1lID0gR2FtZS5Ob3Rlc0J5SWRbaWRdOw0KICAgICAgaWYgKEdhbWUudG9vbHRpcC5mcm9tICYmIEdhbWUudG9vbHRpcC5mcm9tLmlkLmluZGV4T2YoIm5vdGUtIikgPT0gMCkNCiAgICAgICAgR2FtZS50b29sdGlwLmhpZGUoKTsNCiAgICAgIEdhbWUuTm90ZXMuc3BsaWNlKEdhbWUuTm90ZXMuaW5kZXhPZihtZSksIDEpOw0KICAgICAgLy9HYW1lLk5vdGVzQnlJZC5zcGxpY2UoR2FtZS5Ob3Rlc0J5SWQuaW5kZXhPZihtZSksMSk7DQogICAgICBHYW1lLk5vdGVzQnlJZFtpZF0gPSBudWxsOw0KICAgICAgR2FtZS5VcGRhdGVOb3RlcygpOw0KICAgIH07DQogICAgR2FtZS5DbG9zZU5vdGVzID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5Ob3RlcyA9IFtdOw0KICAgICAgR2FtZS5Ob3Rlc0J5SWQgPSBbXTsNCiAgICAgIEdhbWUudG9vbHRpcC5oaWRlKCk7DQogICAgICBHYW1lLlVwZGF0ZU5vdGVzKCk7DQogICAgfTsNCiAgICBHYW1lLlVwZGF0ZU5vdGVzID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgdmFyIHJlbWFpbmluZyA9IEdhbWUuTm90ZXMubGVuZ3RoOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk5vdGVzKSB7DQogICAgICAgIGlmIChpIDwgNSkgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuTm90ZXNbaV07DQogICAgICAgICAgdmFyIHBpYyA9ICIiOw0KICAgICAgICAgIGlmIChtZS5waWMgIT0gIiIpDQogICAgICAgICAgICBwaWMgPSAnPGRpdiBjbGFzcz0iaWNvbiIgc3R5bGU9IicgKyB3cml0ZUljb24obWUucGljKSArICciPjwvZGl2Pic7DQogICAgICAgICAgc3RyID0NCiAgICAgICAgICAgICc8ZGl2IGlkPSJub3RlLScgKw0KICAgICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICAgJyIgJyArDQogICAgICAgICAgICAobWUudG9vbHRpcA0KICAgICAgICAgICAgICA/IEdhbWUuZ2V0RHluYW1pY1Rvb2x0aXAobWUudG9vbHRpcCwgInRoaXMiLCB0cnVlKSArICIgIg0KICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAnY2xhc3M9ImZyYW1lZCBub3RlICcgKw0KICAgICAgICAgICAgKG1lLnBpYyAhPSAiIiA/ICJoYXNwaWMiIDogIm5vcGljIikgKw0KICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgIChtZS5kZXNjICE9ICIiID8gImhhc2Rlc2MiIDogIm5vZGVzYyIpICsNCiAgICAgICAgICAgICciPjxkaXYgY2xhc3M9ImNsb3NlIiBvbmNsaWNrPSJQbGF5U291bmQoXCdzbmQvdGljay5tcDNcJyk7R2FtZS5DbG9zZU5vdGUoJyArDQogICAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgICAnKTsiPng8L2Rpdj4nICsNCiAgICAgICAgICAgIHBpYyArDQogICAgICAgICAgICAnPGRpdiBjbGFzcz0idGV4dCI+PGgzPicgKw0KICAgICAgICAgICAgbWUudGl0bGUgKw0KICAgICAgICAgICAgIjwvaDM+IiArDQogICAgICAgICAgICAobWUuZGVzYyAhPSAiIg0KICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48aDU+JyArIG1lLmRlc2MgKyAiPC9oNT4iDQogICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICI8L2Rpdj48L2Rpdj4iICsNCiAgICAgICAgICAgIHN0cjsNCiAgICAgICAgICByZW1haW5pbmctLTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKHJlbWFpbmluZyA+IDApDQogICAgICAgIHN0ciA9DQogICAgICAgICAgJzxkaXYgY2xhc3M9InJlbWFpbmluZyI+JyArDQogICAgICAgICAgbG9jKCIrJTEgbW9yZSBub3RpZmljYXRpb24uIiwgTEJlYXV0aWZ5KHJlbWFpbmluZykpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgc3RyOw0KICAgICAgaWYgKEdhbWUuTm90ZXMubGVuZ3RoID4gMSkgew0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGRpdiBjbGFzcz0iZnJhbWVkIGNsb3NlIHNpZGVub3RlIiBvbmNsaWNrPSJQbGF5U291bmQoXCdzbmQvdGljay5tcDNcJyk7R2FtZS5DbG9zZU5vdGVzKCk7Ij54PC9kaXY+JzsNCiAgICAgIH0NCiAgICAgIEdhbWUubm90ZUwuaW5uZXJIVE1MID0gc3RyOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk5vdGVzKSB7DQogICAgICAgIG1lLmwgPSAwOw0KICAgICAgICBpZiAoaSA8IDUpIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLk5vdGVzW2ldOw0KICAgICAgICAgIG1lLmwgPSBsKCJub3RlLSIgKyBtZS5pZCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuTm90ZXNMb2dpYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5Ob3Rlcykgew0KICAgICAgICBpZiAoR2FtZS5Ob3Rlc1tpXS5xdWljayA+IDApIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLk5vdGVzW2ldOw0KICAgICAgICAgIG1lLmxpZmUtLTsNCiAgICAgICAgICBpZiAobWUubGlmZSA8PSAwKSBHYW1lLkNsb3NlTm90ZShtZS5pZCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuTm90ZXNEcmF3ID0gZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk5vdGVzKSB7DQogICAgICAgIGlmIChHYW1lLk5vdGVzW2ldLnF1aWNrID4gMCkgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuTm90ZXNbaV07DQogICAgICAgICAgaWYgKG1lLmwpIHsNCiAgICAgICAgICAgIGlmIChtZS5saWZlIDwgMTApIHsNCiAgICAgICAgICAgICAgbWUubC5zdHlsZS5vcGFjaXR5ID0gbWUubGlmZSAvIDEwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5Ob3RpZnkgPSBmdW5jdGlvbiAodGl0bGUsIGRlc2MsIHBpYywgcXVpY2ssIG5vTG9nKSB7DQogICAgICBpZiAoR2FtZS5wcmVmcy5ub3RpZnMpIHsNCiAgICAgICAgcXVpY2sgPSBNYXRoLm1pbig2LCBxdWljayk7DQogICAgICAgIGlmICghcXVpY2spIHF1aWNrID0gNjsNCiAgICAgIH0NCiAgICAgIGRlc2MgPSByZXBsYWNlQWxsKA0KICAgICAgICAiPT1DTE9TRVRISVMoKT09IiwNCiAgICAgICAgIkdhbWUuQ2xvc2VOb3RlKCIgKyBHYW1lLm5vdGVJZCArICIpOyIsDQogICAgICAgIGRlc2MNCiAgICAgICk7DQogICAgICBpZiAoR2FtZS5wb3B1cHMpIG5ldyBHYW1lLk5vdGUodGl0bGUsIGRlc2MsIHBpYywgcXVpY2spOw0KICAgICAgaWYgKCFub0xvZykgR2FtZS5BZGRUb0xvZygiPGI+IiArIHRpdGxlICsgIjwvYj4gfCAiICsgZGVzYyk7DQogICAgfTsNCiAgICBHYW1lLk5vdGlmeVRvb2x0aXAgPSBmdW5jdGlvbiAoY29udGVudCkgew0KICAgICAgLy9hdHRhY2hlcyBhIHRvb2x0aXAgdG8gdGhlIGxhc3Qgc3Bhd25lZCBub3RlDQogICAgICBpZiAoIUdhbWUuTm90ZXNCeUlkW0dhbWUubm90ZUlkIC0gMV0pIHJldHVybiBmYWxzZTsNCiAgICAgIHZhciBtZSA9IEdhbWUuTm90ZXNCeUlkW0dhbWUubm90ZUlkIC0gMV07DQogICAgICBtZS50b29sdGlwID0gY29udGVudDsNCiAgICAgIEdhbWUuVXBkYXRlTm90ZXMoKTsNCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCVBST01QVA0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuZGFya2VuTCA9IGwoImRhcmtlbiIpOw0KICAgIEFkZEV2ZW50KEdhbWUuZGFya2VuTCwgImNsaWNrIiwgZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEdhbWUucHJvbXB0Tm9DbG9zZSkgew0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgR2FtZS5DbGljayA9IDA7DQogICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2tPZmYubXAzIik7DQogICAgICAgIEdhbWUuQ2xvc2VQcm9tcHQoKTsNCiAgICAgIH0NCiAgICB9KTsNCiAgICBHYW1lLnByb21wdEwgPSBsKCJwcm9tcHRDb250ZW50Iik7DQogICAgR2FtZS5wcm9tcHRBbmNob3JMID0gbCgicHJvbXB0QW5jaG9yIik7DQogICAgR2FtZS5wcm9tcHRXcmFwTCA9IGwoInByb21wdCIpOw0KICAgIEdhbWUucHJvbXB0Q29uZmlybSA9ICIiOw0KICAgIEdhbWUucHJvbXB0T24gPSAwOw0KICAgIEdhbWUucHJvbXB0VXBkYXRlRnVuYyA9IDA7DQogICAgR2FtZS5wcm9tcHRPcHRpb25zTiA9IDA7DQogICAgR2FtZS5wcm9tcHRPcHRpb25Gb2N1cyA9IDA7DQogICAgR2FtZS5wcm9tcHROb0Nsb3NlID0gZmFsc2U7DQogICAgR2FtZS5VcGRhdGVQcm9tcHQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5wcm9tcHRVcGRhdGVGdW5jKSBHYW1lLnByb21wdFVwZGF0ZUZ1bmMoKTsNCiAgICAgIEdhbWUucHJvbXB0QW5jaG9yTC5zdHlsZS50b3AgPQ0KICAgICAgICBNYXRoLmZsb29yKChHYW1lLndpbmRvd0ggLSBHYW1lLnByb21wdFdyYXBMLm9mZnNldEhlaWdodCkgLyAyIC0gMTYpICsNCiAgICAgICAgInB4IjsNCiAgICB9Ow0KICAgIEdhbWUuUHJvbXB0ID0gZnVuY3Rpb24gKGNvbnRlbnQsIG9wdGlvbnMsIHVwZGF0ZUZ1bmMsIHN0eWxlKSB7DQogICAgICBHYW1lLnByb21wdE5vQ2xvc2UgPSBmYWxzZTsNCiAgICAgIGlmICh1cGRhdGVGdW5jKSBHYW1lLnByb21wdFVwZGF0ZUZ1bmMgPSB1cGRhdGVGdW5jOw0KICAgICAgaWYgKHN0eWxlKSBHYW1lLnByb21wdFdyYXBMLmNsYXNzTmFtZSA9ICJmcmFtZWQgIiArIHN0eWxlOw0KICAgICAgZWxzZSBHYW1lLnByb21wdFdyYXBMLmNsYXNzTmFtZSA9ICJmcmFtZWQiOw0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgc3RyICs9IGNvbnRlbnQ7DQogICAgICBpZiAoc3RyLmluZGV4T2YoIjxpZCAiKSA9PSAwKSB7DQogICAgICAgIHZhciBpZCA9IHN0ci5zdWJzdHJpbmcoNCwgc3RyLmluZGV4T2YoIj4iKSk7DQogICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoc3RyLmluZGV4T2YoIj4iKSArIDEpOw0KICAgICAgICBzdHIgPSAnPGRpdiBpZD0icHJvbXB0Q29udGVudCcgKyBpZCArICciPicgKyBzdHIgKyAiPC9kaXY+IjsNCiAgICAgIH0NCiAgICAgIGlmIChzdHIuaW5kZXhPZigiPG5vQ2xvc2U+IikgIT0gLTEpIHsNCiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoIjxub0Nsb3NlPiIsICIiKTsNCiAgICAgICAgR2FtZS5wcm9tcHROb0Nsb3NlID0gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIHZhciBvcHRzID0gIiI7DQogICAgICBHYW1lLnByb21wdE9wdGlvbnNOID0gMDsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAob3B0aW9uc1tpXSA9PSAiYnIiKSB7DQogICAgICAgICAgLy9qdXN0IGEgbGluZWJyZWFrDQogICAgICAgICAgb3B0cyArPSAiPGJyPiI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zW2ldID09ICJzdHJpbmciKQ0KICAgICAgICAgICAgb3B0aW9uc1tpXSA9IFsNCiAgICAgICAgICAgICAgb3B0aW9uc1tpXSwNCiAgICAgICAgICAgICAgIlBsYXlTb3VuZCgnc25kL3RpY2tPZmYubXAzJyk7R2FtZS5DbG9zZVByb21wdCgpOyIsDQogICAgICAgICAgICBdOw0KICAgICAgICAgIGVsc2UgaWYgKCFvcHRpb25zW2ldWzFdKQ0KICAgICAgICAgICAgb3B0aW9uc1tpXSA9IFsNCiAgICAgICAgICAgICAgb3B0aW9uc1tpXVswXSwNCiAgICAgICAgICAgICAgIlBsYXlTb3VuZCgnc25kL3RpY2tPZmYubXAzJyk7R2FtZS5DbG9zZVByb21wdCgpOyIsDQogICAgICAgICAgICAgIG9wdGlvbnNbaV1bMl0sDQogICAgICAgICAgICBdOw0KICAgICAgICAgIGVsc2Ugb3B0aW9uc1tpXVsxXSA9ICJQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpOyIgKyBvcHRpb25zW2ldWzFdOw0KICAgICAgICAgIG9wdGlvbnNbaV1bMV0gPSBvcHRpb25zW2ldWzFdDQogICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAiJiMzOTsiKQ0KICAgICAgICAgICAgLnJlcGxhY2UoLyIvZywgIiYjMzQ7Iik7DQogICAgICAgICAgb3B0cyArPQ0KICAgICAgICAgICAgJzxhIGlkPSJwcm9tcHRPcHRpb24nICsNCiAgICAgICAgICAgIGkgKw0KICAgICAgICAgICAgJyIgY2xhc3M9Im9wdGlvbiIgJyArDQogICAgICAgICAgICAob3B0aW9uc1tpXVsyXSA/ICdzdHlsZT0iJyArIG9wdGlvbnNbaV1bMl0gKyAnIiAnIDogIiIpICsNCiAgICAgICAgICAgICIiICsNCiAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgJz0iJyArDQogICAgICAgICAgICBvcHRpb25zW2ldWzFdICsNCiAgICAgICAgICAgICciPicgKw0KICAgICAgICAgICAgb3B0aW9uc1tpXVswXSArDQogICAgICAgICAgICAiPC9hPiI7DQogICAgICAgICAgR2FtZS5wcm9tcHRPcHRpb25zTisrOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBHYW1lLnByb21wdEwuaW5uZXJIVE1MID0NCiAgICAgICAgc3RyICsgJzxkaXYgY2xhc3M9Im9wdGlvbkJveCI+JyArIG9wdHMgKyAiPC9kaXY+IjsNCiAgICAgIEdhbWUucHJvbXB0QW5jaG9yTC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIEdhbWUuZGFya2VuTC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIEdhbWUucHJvbXB0TC5mb2N1cygpOw0KICAgICAgR2FtZS5wcm9tcHRPbiA9IDE7DQogICAgICBHYW1lLnByb21wdE9wdGlvbkZvY3VzID0gMDsNCiAgICAgIEdhbWUuRm9jdXNQcm9tcHRPcHRpb24oMCk7DQogICAgICBHYW1lLlVwZGF0ZVByb21wdCgpOw0KICAgICAgaWYgKCFHYW1lLnByb21wdE5vQ2xvc2UpIGwoInByb21wdENsb3NlIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICBlbHNlIGwoInByb21wdENsb3NlIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICB9Ow0KICAgIEdhbWUuQ2xvc2VQcm9tcHQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUdhbWUucHJvbXB0T24pIHJldHVybiBmYWxzZTsNCiAgICAgIEdhbWUucHJvbXB0QW5jaG9yTC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgR2FtZS5kYXJrZW5MLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICBHYW1lLnByb21wdE9uID0gMDsNCiAgICAgIEdhbWUucHJvbXB0VXBkYXRlRnVuYyA9IDA7DQogICAgICBHYW1lLnByb21wdE9wdGlvbkZvY3VzID0gMDsNCiAgICAgIEdhbWUucHJvbXB0T3B0aW9uc04gPSAwOw0KICAgICAgR2FtZS5wcm9tcHROb0Nsb3NlID0gZmFsc2U7DQogICAgfTsNCiAgICBHYW1lLkNvbmZpcm1Qcm9tcHQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoDQogICAgICAgIEdhbWUucHJvbXB0T24gJiYNCiAgICAgICAgbCgicHJvbXB0T3B0aW9uIiArIEdhbWUucHJvbXB0T3B0aW9uRm9jdXMpICYmDQogICAgICAgIGwoInByb21wdE9wdGlvbiIgKyBHYW1lLnByb21wdE9wdGlvbkZvY3VzKS5zdHlsZS5kaXNwbGF5ICE9ICJub25lIg0KICAgICAgKQ0KICAgICAgICBGaXJlRXZlbnQobCgicHJvbXB0T3B0aW9uIiArIEdhbWUucHJvbXB0T3B0aW9uRm9jdXMpLCAiY2xpY2siKTsNCiAgICB9Ow0KICAgIEdhbWUuRm9jdXNQcm9tcHRPcHRpb24gPSBmdW5jdGlvbiAoZGlyLCB0cnlOKSB7DQogICAgICB2YXIgaWQgPSBHYW1lLnByb21wdE9wdGlvbkZvY3VzICsgZGlyOw0KICAgICAgaWYgKGlkIDwgMCkgaWQgPSBHYW1lLnByb21wdE9wdGlvbnNOIC0gMTsNCiAgICAgIGlmIChpZCA+PSBHYW1lLnByb21wdE9wdGlvbnNOKSBpZCA9IDA7DQogICAgICB3aGlsZSAoDQogICAgICAgIGlkID49IDAgJiYNCiAgICAgICAgaWQgPCBHYW1lLnByb21wdE9wdGlvbnNOICYmDQogICAgICAgICghbCgicHJvbXB0T3B0aW9uIiArIGlkKSB8fA0KICAgICAgICAgIGwoInByb21wdE9wdGlvbiIgKyBpZCkuc3R5bGUuZGlzcGxheSA9PSAibm9uZSIpDQogICAgICApIHsNCiAgICAgICAgaWQgKz0gZGlyIHx8IDE7DQogICAgICB9DQogICAgICBpZiAoDQogICAgICAgIGwoInByb21wdE9wdGlvbiIgKyBpZCkgJiYNCiAgICAgICAgbCgicHJvbXB0T3B0aW9uIiArIGlkKS5zdHlsZS5kaXNwbGF5ICE9ICJub25lIg0KICAgICAgKSB7DQogICAgICAgIGlmIChsKCJwcm9tcHRPcHRpb24iICsgR2FtZS5wcm9tcHRPcHRpb25Gb2N1cykpDQogICAgICAgICAgbCgicHJvbXB0T3B0aW9uIiArIEdhbWUucHJvbXB0T3B0aW9uRm9jdXMpLmNsYXNzTGlzdC5yZW1vdmUoDQogICAgICAgICAgICAiZm9jdXNlZCINCiAgICAgICAgICApOw0KICAgICAgICBHYW1lLnByb21wdE9wdGlvbkZvY3VzID0gaWQ7DQogICAgICAgIGlmIChsKCJwcm9tcHRPcHRpb24iICsgR2FtZS5wcm9tcHRPcHRpb25Gb2N1cykpDQogICAgICAgICAgbCgicHJvbXB0T3B0aW9uIiArIEdhbWUucHJvbXB0T3B0aW9uRm9jdXMpLmNsYXNzTGlzdC5hZGQoImZvY3VzZWQiKTsNCiAgICAgIH0gZWxzZSBpZiAoIXRyeU4gJiYgZGlyICE9IDApIHsNCiAgICAgICAgR2FtZS5wcm9tcHRPcHRpb25Gb2N1cyA9IGlkOw0KICAgICAgICBHYW1lLkZvY3VzUHJvbXB0T3B0aW9uKGRpciwgMSk7DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlNRU5VUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuY3NzQ2xhc3NlcyA9IFtdOw0KICAgIEdhbWUuYWRkQ2xhc3MgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgaWYgKEdhbWUuY3NzQ2xhc3Nlcy5pbmRleE9mKHdoYXQpID09IC0xKSBHYW1lLmNzc0NsYXNzZXMucHVzaCh3aGF0KTsNCiAgICAgIEdhbWUudXBkYXRlQ2xhc3NlcygpOw0KICAgIH07DQogICAgR2FtZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICB2YXIgaSA9IEdhbWUuY3NzQ2xhc3Nlcy5pbmRleE9mKHdoYXQpOw0KICAgICAgaWYgKGkgIT0gLTEpIHsNCiAgICAgICAgR2FtZS5jc3NDbGFzc2VzLnNwbGljZShpLCAxKTsNCiAgICAgIH0NCiAgICAgIEdhbWUudXBkYXRlQ2xhc3NlcygpOw0KICAgIH07DQogICAgR2FtZS51cGRhdGVDbGFzc2VzID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5sLmNsYXNzTmFtZSA9IEdhbWUuY3NzQ2xhc3Nlcy5qb2luKCIgIik7DQogICAgfTsNCg0KICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uID0gZnVuY3Rpb24gKA0KICAgICAgcHJlZk5hbWUsDQogICAgICBidXR0b24sDQogICAgICBvbiwNCiAgICAgIG9mZiwNCiAgICAgIGNhbGxiYWNrLA0KICAgICAgaW52ZXJ0DQogICAgKSB7DQogICAgICB2YXIgaW52ZXJ0ID0gaW52ZXJ0ID8gMSA6IDA7DQogICAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9ICIiOw0KICAgICAgY2FsbGJhY2sgKz0gIlBsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7IjsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8YSBjbGFzcz0ic21hbGxGYW5jeUJ1dHRvbiBwcmVmQnV0dG9uIG9wdGlvbicgKw0KICAgICAgICAoR2FtZS5wcmVmc1twcmVmTmFtZV0gXiBpbnZlcnQgPyAiIiA6ICIgb2ZmIikgKw0KICAgICAgICAnIiBpZD0iJyArDQogICAgICAgIGJ1dHRvbiArDQogICAgICAgICciICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgIj1cIkdhbWUuVG9nZ2xlKCciICsNCiAgICAgICAgcHJlZk5hbWUgKw0KICAgICAgICAiJywnIiArDQogICAgICAgIGJ1dHRvbiArDQogICAgICAgICInLCciICsNCiAgICAgICAgb24gKw0KICAgICAgICAiJywnIiArDQogICAgICAgIG9mZiArDQogICAgICAgICInLCciICsNCiAgICAgICAgaW52ZXJ0ICsNCiAgICAgICAgIicpOyIgKw0KICAgICAgICBjYWxsYmFjayArDQogICAgICAgICciPicgKw0KICAgICAgICAoR2FtZS5wcmVmc1twcmVmTmFtZV0gPyBvbiA6IG9mZikgKw0KICAgICAgICAiPC9hPiINCiAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLlRvZ2dsZSA9IGZ1bmN0aW9uIChwcmVmTmFtZSwgYnV0dG9uLCBvbiwgb2ZmLCBpbnZlcnQpIHsNCiAgICAgIGlmIChHYW1lLnByZWZzW3ByZWZOYW1lXSkgew0KICAgICAgICBsKGJ1dHRvbikuaW5uZXJIVE1MID0gb2ZmOw0KICAgICAgICBHYW1lLnByZWZzW3ByZWZOYW1lXSA9IDA7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBsKGJ1dHRvbikuaW5uZXJIVE1MID0gb247DQogICAgICAgIEdhbWUucHJlZnNbcHJlZk5hbWVdID0gMTsNCiAgICAgIH0NCiAgICAgIGwoYnV0dG9uKS5jbGFzc05hbWUgPQ0KICAgICAgICAic21hbGxGYW5jeUJ1dHRvbiBwcmVmQnV0dG9uIG9wdGlvbiIgKw0KICAgICAgICAoR2FtZS5wcmVmc1twcmVmTmFtZV0gXiBpbnZlcnQgPyAiIiA6ICIgb2ZmIik7DQogICAgfTsNCiAgICBHYW1lLlRvZ2dsZUZhbmN5ID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEdhbWUucHJlZnMuZmFuY3kpIEdhbWUucmVtb3ZlQ2xhc3MoIm5vRmFuY3kiKTsNCiAgICAgIGVsc2UgaWYgKCFHYW1lLnByZWZzLmZhbmN5KSBHYW1lLmFkZENsYXNzKCJub0ZhbmN5Iik7DQogICAgfTsNCiAgICBHYW1lLlRvZ2dsZUZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5wcmVmcy5maWx0ZXJzKSBHYW1lLnJlbW92ZUNsYXNzKCJub0ZpbHRlcnMiKTsNCiAgICAgIGVsc2UgaWYgKCFHYW1lLnByZWZzLmZpbHRlcnMpIEdhbWUuYWRkQ2xhc3MoIm5vRmlsdGVycyIpOw0KICAgIH07DQogICAgR2FtZS5Ub2dnbGVFeHRyYUJ1dHRvbnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUdhbWUucHJlZnMuZXh0cmFCdXR0b25zKSBHYW1lLnJlbW92ZUNsYXNzKCJleHRyYUJ1dHRvbnMiKTsNCiAgICAgIGVsc2UgaWYgKEdhbWUucHJlZnMuZXh0cmFCdXR0b25zKSBHYW1lLmFkZENsYXNzKCJleHRyYUJ1dHRvbnMiKTsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIEdhbWUuT2JqZWN0c1tpXS5tdXRlKDApOw0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5Ub2dnbGVGdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEFwcCkgQXBwLnNldEZ1bGxzY3JlZW4oR2FtZS5wcmVmcy5mdWxsc2NyZWVuKTsNCiAgICB9Ow0KDQogICAgR2FtZS5Xcml0ZVNsaWRlciA9IGZ1bmN0aW9uICgNCiAgICAgIHNsaWRlciwNCiAgICAgIGxlZnRUZXh0LA0KICAgICAgcmlnaHRUZXh0LA0KICAgICAgc3RhcnRWYWx1ZUZ1bmN0aW9uLA0KICAgICAgY2FsbGJhY2sNCiAgICApIHsNCiAgICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gIiI7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBjbGFzcz0ic2xpZGVyQm94Ij48ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0OyIgY2xhc3M9InNtYWxsRmFuY3lCdXR0b24iPicgKw0KICAgICAgICBsZWZ0VGV4dCArDQogICAgICAgICc8L2Rpdj48ZGl2IHN0eWxlPSJmbG9hdDpyaWdodDsiIGNsYXNzPSJzbWFsbEZhbmN5QnV0dG9uIiBpZD0iJyArDQogICAgICAgIHNsaWRlciArDQogICAgICAgICdSaWdodFRleHQiPicgKw0KICAgICAgICByaWdodFRleHQucmVwbGFjZSgiWyRdIiwgc3RhcnRWYWx1ZUZ1bmN0aW9uKCkpICsNCiAgICAgICAgJzwvZGl2PjxpbnB1dCBjbGFzcz0ic2xpZGVyIiBzdHlsZT0iY2xlYXI6Ym90aDsiIHR5cGU9InJhbmdlIiBtaW49IjAiIG1heD0iMTAwIiBzdGVwPSIxIiB2YWx1ZT0iJyArDQogICAgICAgIHN0YXJ0VmFsdWVGdW5jdGlvbigpICsNCiAgICAgICAgJyIgb25jaGFuZ2U9IicgKw0KICAgICAgICBjYWxsYmFjayArDQogICAgICAgICciIG9uaW5wdXQ9IicgKw0KICAgICAgICBjYWxsYmFjayArDQogICAgICAgICciIG9ubW91c2V1cD0iUGxheVNvdW5kKFwnc25kL3RpY2subXAzXCcpOyIgaWQ9IicgKw0KICAgICAgICBzbGlkZXIgKw0KICAgICAgICAnIi8+PC9kaXY+Jw0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgR2FtZS5vblBhbmVsID0gIkxlZnQiOw0KICAgIEdhbWUuYWRkQ2xhc3MoImZvY3VzIiArIEdhbWUub25QYW5lbCk7DQogICAgR2FtZS5TaG93UGFuZWwgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgaWYgKCF3aGF0KSB3aGF0ID0gIiI7DQogICAgICBpZiAoR2FtZS5vblBhbmVsICE9IHdoYXQpIHsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygiZm9jdXMiICsgR2FtZS5vblBhbmVsKTsNCiAgICAgICAgR2FtZS5hZGRDbGFzcygiZm9jdXMiICsgd2hhdCk7DQogICAgICB9DQogICAgICBHYW1lLm9uUGFuZWwgPSB3aGF0Ow0KICAgIH07DQoNCiAgICBHYW1lLm9uTWVudSA9ICIiOw0KICAgIEdhbWUuU2hvd01lbnUgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgaWYgKCF3aGF0IHx8IHdoYXQgPT0gIiIpIHdoYXQgPSBHYW1lLm9uTWVudTsNCiAgICAgIGlmIChHYW1lLm9uTWVudSA9PSAiIiAmJiB3aGF0ICE9ICIiKSBHYW1lLmFkZENsYXNzKCJvbk1lbnUiKTsNCiAgICAgIGVsc2UgaWYgKEdhbWUub25NZW51ICE9ICIiICYmIHdoYXQgIT0gR2FtZS5vbk1lbnUpDQogICAgICAgIEdhbWUuYWRkQ2xhc3MoIm9uTWVudSIpOw0KICAgICAgZWxzZSBpZiAod2hhdCA9PSBHYW1lLm9uTWVudSkgew0KICAgICAgICBHYW1lLnJlbW92ZUNsYXNzKCJvbk1lbnUiKTsNCiAgICAgICAgd2hhdCA9ICIiOw0KICAgICAgfQ0KICAgICAgLy9pZiAod2hhdD09J2xvZycpIGwoJ2RvbmF0ZUJveCcpLmNsYXNzTmFtZT0nb24nOyBlbHNlIGwoJ2RvbmF0ZUJveCcpLmNsYXNzTmFtZT0nJzsNCiAgICAgIEdhbWUub25NZW51ID0gd2hhdDsNCg0KICAgICAgbCgicHJlZnNCdXR0b24iKS5jbGFzc05hbWUgPQ0KICAgICAgICBHYW1lLm9uTWVudSA9PSAicHJlZnMiID8gInBhbmVsQnV0dG9uIHNlbGVjdGVkIiA6ICJwYW5lbEJ1dHRvbiI7DQogICAgICBsKCJzdGF0c0J1dHRvbiIpLmNsYXNzTmFtZSA9DQogICAgICAgIEdhbWUub25NZW51ID09ICJzdGF0cyIgPyAicGFuZWxCdXR0b24gc2VsZWN0ZWQiIDogInBhbmVsQnV0dG9uIjsNCiAgICAgIGwoImxvZ0J1dHRvbiIpLmNsYXNzTmFtZSA9DQogICAgICAgIEdhbWUub25NZW51ID09ICJsb2ciID8gInBhbmVsQnV0dG9uIHNlbGVjdGVkIiA6ICJwYW5lbEJ1dHRvbiI7DQoNCiAgICAgIGlmIChHYW1lLm9uTWVudSA9PSAiIikgUGxheVNvdW5kKCJzbmQvY2xpY2tPZmYyLm1wMyIpOw0KICAgICAgZWxzZSBQbGF5U291bmQoInNuZC9jbGlja09uMi5tcDMiKTsNCg0KICAgICAgR2FtZS5VcGRhdGVNZW51KCk7DQoNCiAgICAgIGlmICh3aGF0ID09ICIiKSB7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICAgIGlmIChtZS5taW5pZ2FtZSAmJiBtZS5taW5pZ2FtZS5vblJlc2l6ZSkgbWUubWluaWdhbWUub25SZXNpemUoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5zYXlUaW1lID0gZnVuY3Rpb24gKHRpbWUsIGRldGFpbCkgew0KICAgICAgLy90aW1lIGlzIGEgdmFsdWUgd2hlcmUgb25lIHNlY29uZCBpcyBlcXVhbCB0byBHYW1lLmZwcyAoMzApLg0KICAgICAgLy9kZXRhaWwgc2tpcHMgZGF5cyB3aGVuID4xLCBob3VycyB3aGVuID4yLCBtaW51dGVzIHdoZW4gPjMgYW5kIHNlY29uZHMgd2hlbiA+NC4NCiAgICAgIC8vaWYgZGV0YWlsIGlzIC0xLCBvdXRwdXQgc29tZXRoaW5nIGxpa2UgIjMgaG91cnMsIDkgbWludXRlcywgNDggc2Vjb25kcyINCiAgICAgIGlmICh0aW1lIDw9IDApIHJldHVybiAiIjsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIHZhciBkZXRhaWwgPSBkZXRhaWwgfHwgMDsNCiAgICAgIHRpbWUgPSBNYXRoLmZsb29yKHRpbWUpOw0KICAgICAgaWYgKGRldGFpbCA9PSAtMSkgew0KICAgICAgICAvL3ZhciBtb250aHM9MDsNCiAgICAgICAgdmFyIGRheXMgPSAwOw0KICAgICAgICB2YXIgaG91cnMgPSAwOw0KICAgICAgICB2YXIgbWludXRlcyA9IDA7DQogICAgICAgIHZhciBzZWNvbmRzID0gMDsNCiAgICAgICAgLy9pZiAodGltZT49R2FtZS5mcHMqNjAqNjAqMjQqMzApIG1vbnRocz0oTWF0aC5mbG9vcih0aW1lLyhHYW1lLmZwcyo2MCo2MCoyNCozMCkpKTsNCiAgICAgICAgaWYgKHRpbWUgPj0gR2FtZS5mcHMgKiA2MCAqIDYwICogMjQpDQogICAgICAgICAgZGF5cyA9IE1hdGguZmxvb3IodGltZSAvIChHYW1lLmZwcyAqIDYwICogNjAgKiAyNCkpOw0KICAgICAgICBpZiAodGltZSA+PSBHYW1lLmZwcyAqIDYwICogNjApDQogICAgICAgICAgaG91cnMgPSBNYXRoLmZsb29yKHRpbWUgLyAoR2FtZS5mcHMgKiA2MCAqIDYwKSk7DQogICAgICAgIGlmICh0aW1lID49IEdhbWUuZnBzICogNjApIG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRpbWUgLyAoR2FtZS5mcHMgKiA2MCkpOw0KICAgICAgICBpZiAodGltZSA+PSBHYW1lLmZwcykgc2Vjb25kcyA9IE1hdGguZmxvb3IodGltZSAvIEdhbWUuZnBzKTsNCiAgICAgICAgLy9kYXlzLT1tb250aHMqMzA7DQogICAgICAgIGhvdXJzIC09IGRheXMgKiAyNDsNCiAgICAgICAgbWludXRlcyAtPSBob3VycyAqIDYwICsgZGF5cyAqIDI0ICogNjA7DQogICAgICAgIHNlY29uZHMgLT0gbWludXRlcyAqIDYwICsgaG91cnMgKiA2MCAqIDYwICsgZGF5cyAqIDI0ICogNjAgKiA2MDsNCiAgICAgICAgaWYgKGRheXMgPiAxMCkgew0KICAgICAgICAgIGhvdXJzID0gMDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGF5cykgew0KICAgICAgICAgIG1pbnV0ZXMgPSAwOw0KICAgICAgICAgIHNlY29uZHMgPSAwOw0KICAgICAgICB9DQogICAgICAgIGlmIChob3Vycykgew0KICAgICAgICAgIHNlY29uZHMgPSAwOw0KICAgICAgICB9DQogICAgICAgIHZhciBiaXRzID0gW107DQogICAgICAgIC8vaWYgKG1vbnRocz4wKSBiaXRzLnB1c2goQmVhdXRpZnkobW9udGhzKSsnIG1vbnRoJysoZGF5cz09MT8nJzoncycpKTsNCiAgICAgICAgaWYgKGRheXMgPiAwKSBiaXRzLnB1c2gobG9jKCIlMSBkYXkiLCBMQmVhdXRpZnkoZGF5cykpKTsNCiAgICAgICAgaWYgKGhvdXJzID4gMCkgYml0cy5wdXNoKGxvYygiJTEgaG91ciIsIExCZWF1dGlmeShob3VycykpKTsNCiAgICAgICAgaWYgKG1pbnV0ZXMgPiAwKSBiaXRzLnB1c2gobG9jKCIlMSBtaW51dGUiLCBMQmVhdXRpZnkobWludXRlcykpKTsNCiAgICAgICAgaWYgKHNlY29uZHMgPiAwKSBiaXRzLnB1c2gobG9jKCIlMSBzZWNvbmQiLCBMQmVhdXRpZnkoc2Vjb25kcykpKTsNCiAgICAgICAgaWYgKGJpdHMubGVuZ3RoID09IDApIHN0ciA9IGxvYygibGVzcyB0aGFuIDEgc2Vjb25kIik7DQogICAgICAgIGVsc2Ugc3RyID0gYml0cy5qb2luKCIsICIpOw0KICAgICAgICAvKi8vaWYgKG1vbnRocz4wKSBiaXRzLnB1c2goQmVhdXRpZnkobW9udGhzKSsnIG1vbnRoJysoZGF5cz09MT8nJzoncycpKTsNCgkJCQlpZiAoZGF5cz4wKSBiaXRzLnB1c2goQmVhdXRpZnkoZGF5cykrJyBkYXknKyhkYXlzPT0xPycnOidzJykpOw0KCQkJCWlmIChob3Vycz4wKSBiaXRzLnB1c2goQmVhdXRpZnkoaG91cnMpKycgaG91cicrKGhvdXJzPT0xPycnOidzJykpOw0KCQkJCWlmIChtaW51dGVzPjApIGJpdHMucHVzaChCZWF1dGlmeShtaW51dGVzKSsnIG1pbnV0ZScrKG1pbnV0ZXM9PTE/Jyc6J3MnKSk7DQoJCQkJaWYgKHNlY29uZHM+MCkgYml0cy5wdXNoKEJlYXV0aWZ5KHNlY29uZHMpKycgc2Vjb25kJysoc2Vjb25kcz09MT8nJzoncycpKTsNCgkJCQlpZiAoYml0cy5sZW5ndGg9PTApIHN0cj0nbGVzcyB0aGFuIDEgc2Vjb25kJzsNCgkJCQllbHNlIHN0cj1iaXRzLmpvaW4oJywgJyk7Ki8NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8qaWYgKHRpbWU+PUdhbWUuZnBzKjYwKjYwKjI0KjMwKjIgJiYgZGV0YWlsPDEpIHN0cj1CZWF1dGlmeShNYXRoLmZsb29yKHRpbWUvKEdhbWUuZnBzKjYwKjYwKjI0KjMwKSkpKycgbW9udGhzJzsNCgkJCQllbHNlIGlmICh0aW1lPj1HYW1lLmZwcyo2MCo2MCoyNCozMCAmJiBkZXRhaWw8MSkgc3RyPScxIG1vbnRoJzsNCgkJCQllbHNlICovIGlmICh0aW1lID49IEdhbWUuZnBzICogNjAgKiA2MCAqIDI0ICYmIGRldGFpbCA8IDIpDQogICAgICAgICAgc3RyID0gbG9jKA0KICAgICAgICAgICAgIiUxIGRheSIsDQogICAgICAgICAgICBMQmVhdXRpZnkoTWF0aC5mbG9vcih0aW1lIC8gKEdhbWUuZnBzICogNjAgKiA2MCAqIDI0KSkpDQogICAgICAgICAgKTsgLy9CZWF1dGlmeShNYXRoLmZsb29yKHRpbWUvKEdhbWUuZnBzKjYwKjYwKjI0KSkpKycgZGF5cyc7DQogICAgICAgIGVsc2UgaWYgKHRpbWUgPj0gR2FtZS5mcHMgKiA2MCAqIDYwICYmIGRldGFpbCA8IDMpDQogICAgICAgICAgc3RyID0gbG9jKA0KICAgICAgICAgICAgIiUxIGhvdXIiLA0KICAgICAgICAgICAgTEJlYXV0aWZ5KE1hdGguZmxvb3IodGltZSAvIChHYW1lLmZwcyAqIDYwICogNjApKSkNCiAgICAgICAgICApOyAvL0JlYXV0aWZ5KE1hdGguZmxvb3IodGltZS8oR2FtZS5mcHMqNjAqNjApKSkrJyBob3Vycyc7DQogICAgICAgIGVsc2UgaWYgKHRpbWUgPj0gR2FtZS5mcHMgKiA2MCAmJiBkZXRhaWwgPCA0KQ0KICAgICAgICAgIHN0ciA9IGxvYygNCiAgICAgICAgICAgICIlMSBtaW51dGUiLA0KICAgICAgICAgICAgTEJlYXV0aWZ5KE1hdGguZmxvb3IodGltZSAvIChHYW1lLmZwcyAqIDYwKSkpDQogICAgICAgICAgKTsgLy9CZWF1dGlmeShNYXRoLmZsb29yKHRpbWUvKEdhbWUuZnBzKjYwKSkpKycgbWludXRlcyc7DQogICAgICAgIGVsc2UgaWYgKHRpbWUgPj0gR2FtZS5mcHMgJiYgZGV0YWlsIDwgNSkNCiAgICAgICAgICBzdHIgPSBsb2MoDQogICAgICAgICAgICAiJTEgc2Vjb25kIiwNCiAgICAgICAgICAgIExCZWF1dGlmeShNYXRoLmZsb29yKHRpbWUgLyBHYW1lLmZwcykpDQogICAgICAgICAgKTsgLy9CZWF1dGlmeShNYXRoLmZsb29yKHRpbWUvKEdhbWUuZnBzKSkpKycgc2Vjb25kcyc7DQogICAgICAgIGVsc2Ugc3RyID0gbG9jKCJsZXNzIHRoYW4gMSBzZWNvbmQiKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBzdHI7DQogICAgfTsNCg0KICAgIEdhbWUudGlueUNvb2tpZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIlRpbnkgY29va2llIikpIHsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnPGRpdiBjbGFzcz0idGlueUNvb2tpZSIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgJz0iR2FtZS5DbGlja1RpbnlDb29raWUoKTsiPjwvZGl2PicNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiAiIjsNCiAgICB9Ow0KICAgIEdhbWUuQ2xpY2tUaW55Q29va2llID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKCFHYW1lLkhhc0FjaGlldigiVGlueSBjb29raWUiKSkgew0KICAgICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgICBHYW1lLldpbigiVGlueSBjb29raWUiKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgR2FtZS5zZXRWb2x1bWUgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgR2FtZS52b2x1bWUgPSB3aGF0Ow0KICAgICAgLypmb3IgKHZhciBpIGluIFNvdW5kcykNCgkJCXsNCgkJCQlTb3VuZHNbaV0udm9sdW1lPUdhbWUudm9sdW1lOw0KCQkJfSovDQogICAgfTsNCiAgICBHYW1lLnNldFZvbHVtZU11c2ljID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIEdhbWUudm9sdW1lTXVzaWMgPSB3aGF0Ow0KICAgICAgaWYgKE11c2ljKSBNdXNpYy5zZXRWb2x1bWUod2hhdCAvIDEwMCk7DQogICAgfTsNCiAgICBHYW1lLnNldFd1Yk11c2ljID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIGlmIChNdXNpYykgTXVzaWMuc2V0RmlsdGVyKHdoYXQgLyAxMDApOw0KICAgIH07DQoNCiAgICBHYW1lLnNob3dMYW5nU2VsZWN0aW9uID0gZnVuY3Rpb24gKGZpcnN0TGF1bmNoKSB7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBmb3IgKHZhciBpIGluIExhbmdzKSB7DQogICAgICAgIHZhciBsYW5nID0gTGFuZ3NbaV07DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsYW5nU2VsZWN0QnV0dG9uIHRpdGxlJyArDQogICAgICAgICAgKCFmaXJzdExhdW5jaCAmJiBsb2NJZCA9PSBsYW5nLmZpbGUgPyAiIHNlbGVjdGVkIiA6ICIiKSArDQogICAgICAgICAgJyIgc3R5bGU9InBhZGRpbmc6NHB4OyIgaWQ9ImxhbmdTZWxlY3QtJyArDQogICAgICAgICAgaSArDQogICAgICAgICAgJyI+JyArDQogICAgICAgICAgbGFuZy5uYW1lICsNCiAgICAgICAgICAiPC9kaXY+IjsNCiAgICAgIH0NCiAgICAgIEdhbWUuUHJvbXB0KA0KICAgICAgICAiPGlkIENoYW5nZUxhbmd1YWdlPiIgKw0KICAgICAgICAgIChmaXJzdExhdW5jaCA/ICI8bm9DbG9zZT4iIDogIiIpICsNCiAgICAgICAgICAnPGgzIGlkPSJsYW5ndWFnZVNlbGVjdEhlYWRlciI+JyArDQogICAgICAgICAgbG9jKCJDaGFuZ2UgbGFuZ3VhZ2UiKSArDQogICAgICAgICAgIjwvaDM+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgIChmaXJzdExhdW5jaA0KICAgICAgICAgICAgPyAiIg0KICAgICAgICAgICAgOiAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjExcHg7b3BhY2l0eTowLjU7bWFyZ2luLWJvdHRvbToxMnB4OyI+KCcgKw0KICAgICAgICAgICAgICBsb2MoIm5vdGU6IHRoaXMgd2lsbCBzYXZlIGFuZCByZWxvYWQgeW91ciBnYW1lIikgKw0KICAgICAgICAgICAgICAiKTwvZGl2PiIpICsNCiAgICAgICAgICBzdHIsDQogICAgICAgIGZpcnN0TGF1bmNoID8gMCA6IFtsb2MoIkNhbmNlbCIpXQ0KICAgICAgKTsNCg0KICAgICAgZm9yICh2YXIgaSBpbiBMYW5ncykgew0KICAgICAgICB2YXIgbGFuZyA9IExhbmdzW2ldOw0KICAgICAgICBBZGRFdmVudCgNCiAgICAgICAgICBsKCJsYW5nU2VsZWN0LSIgKyBpKSwNCiAgICAgICAgICAiY2xpY2siLA0KICAgICAgICAgIChmdW5jdGlvbiAobGFuZykgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgaWYgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAvL2xhbmchPWxvY0lkKQ0KICAgICAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2V0KCJDb29raWVDbGlja2VyTGFuZyIsIGxhbmcpOw0KICAgICAgICAgICAgICAgIEdhbWUudG9TYXZlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBHYW1lLnRvUmVsb2FkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KShpKQ0KICAgICAgICApOw0KICAgICAgICBBZGRFdmVudCgNCiAgICAgICAgICBsKCJsYW5nU2VsZWN0LSIgKyBpKSwNCiAgICAgICAgICAibW91c2VvdmVyIiwNCiAgICAgICAgICAoZnVuY3Rpb24gKGxhbmcpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL3NtYWxsVGljay5tcDMiLCAwLjc1KTsNCiAgICAgICAgICAgICAgbCgibGFuZ3VhZ2VTZWxlY3RIZWFkZXIiKS5pbm5lckhUTUwgPSBMYW5nc1tsYW5nXS5jaGFuZ2VMYW5ndWFnZTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSkoaSkNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgT04gPSAiICIgKyBsb2MoIk9OIik7DQogICAgT0ZGID0gIiAiICsgbG9jKCJPRkYiKTsNCiAgICBHYW1lLlVwZGF0ZU1lbnUgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBpZiAoR2FtZS5vbk1lbnUgIT0gIiIpIHsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9ImNsb3NlIG1lbnVDbG9zZSIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgJz0iR2FtZS5TaG93TWVudSgpOyI+eDwvZGl2Pic7DQogICAgICAgIC8vc3RyKz0nPGRpdiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7dG9wOjhweDtyaWdodDo4cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjE2cHg7IiAnK0dhbWUuY2xpY2tTdHIrJz0iR2FtZS5TaG93TWVudSgpOyI+WDwvZGl2Pic7DQogICAgICB9DQogICAgICBpZiAoR2FtZS5vbk1lbnUgPT0gInByZWZzIikgew0KICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9InNlY3Rpb24iPicgKyBsb2MoIk9wdGlvbnMiKSArICI8L2Rpdj4iOw0KDQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJibG9jayIgc3R5bGU9InBhZGRpbmc6MHB4O21hcmdpbjo4cHggNHB4OyI+JyArDQogICAgICAgICAgJzxkaXYgY2xhc3M9InN1YnNlY3Rpb24iIHN0eWxlPSJwYWRkaW5nOjBweDsiPicgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+JyArDQogICAgICAgICAgbG9jKCJHZW5lcmFsIikgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzoycHggOHB4O29wYWNpdHk6MC43NTtmb250LXNpemU6MTJweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IiBjbGFzcz0ic21hbGxGYW5jeUJ1dHRvbiI+JyArDQogICAgICAgICAgbG9jKCJMYW5ndWFnZTogJTEiLCAiPGI+IiArIExhbmdzW2xvY0lkXS5uYW1lICsgIjwvYj4iKSArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9Imljb24iIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7ZGlzcGxheTppbmxpbmUtYmxvY2s7YmFja2dyb3VuZC1wb3NpdGlvbjonICsNCiAgICAgICAgICAtMzAgKiA0OCArDQogICAgICAgICAgInB4ICIgKw0KICAgICAgICAgIC0yOSAqIDQ4ICsNCiAgICAgICAgICAncHg7dHJhbnNmb3JtOnNjYWxlKDAuNSk7bWFyZ2luOi0xNnB4IC0xMnB4OyI+PC9kaXY+PGEgc3R5bGU9ImZvbnQtc2l6ZToxNXB4O3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOmF1dG87bWluLXdpZHRoOjEzMHB4OyIgY2xhc3M9Im9wdGlvbiBzbWFsbEZhbmN5QnV0dG9uIiBpZD0iY2hhbmdlTGFuZ3VhZ2VPcHRpb24iICcgKw0KICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICI9XCJQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO0dhbWUuc2hvd0xhbmdTZWxlY3Rpb24oKTtcIj4iICsNCiAgICAgICAgICAoIUVOID8gJ0NoYW5nZSBsYW5ndWFnZTxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgOiAiIikgKw0KICAgICAgICAgIGxvYygiQ2hhbmdlIGxhbmd1YWdlIikgKw0KICAgICAgICAgICc8L2E+PGRpdiBzdHlsZT0iY2xlYXI6Ym90aDt0ZXh0LWFsaWduOnJpZ2h0O3BhZGRpbmctYm90dG9tOjJweDsiPjwvZGl2PjwvZGl2PicgKw0KICAgICAgICAgIChBcHANCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAiPVwiUGxheVNvdW5kKCdzbmQvdGljay5tcDMnKTtHYW1lLnRvU2F2ZT10cnVlO0dhbWUudG9RdWl0PXRydWU7XCI+IiArDQogICAgICAgICAgICAgIGxvYygiU2F2ZSAmIFF1aXQiKSArDQogICAgICAgICAgICAgICI8L2E+PC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48YSBjbGFzcz0ib3B0aW9uIHNtYWxsRmFuY3lCdXR0b24iICcgKw0KICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICI9XCJHYW1lLnRvU2F2ZT10cnVlO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCI+IiArDQogICAgICAgICAgbG9jKCJTYXZlIikgKw0KICAgICAgICAgICI8L2E+PGxhYmVsPiIgKw0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICJTYXZlIG1hbnVhbGx5ICh0aGUgZ2FtZSBhdXRvc2F2ZXMgZXZlcnkgNjAgc2Vjb25kczsgc2hvcnRjdXQ6IGN0cmwrUykiDQogICAgICAgICAgKSArDQogICAgICAgICAgIjwvbGFiZWw+PC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgIj1cIkdhbWUuRXhwb3J0U2F2ZSgpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCI+IiArDQogICAgICAgICAgbG9jKCJFeHBvcnQgc2F2ZSIpICsNCiAgICAgICAgICAnPC9hPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgIj1cIkdhbWUuSW1wb3J0U2F2ZSgpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCI+IiArDQogICAgICAgICAgbG9jKCJJbXBvcnQgc2F2ZSIpICsNCiAgICAgICAgICAiPC9hPjxsYWJlbD4iICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiWW91IGNhbiB1c2UgdGhpcyB0byBiYWNrdXAgeW91ciBzYXZlIG9yIHRvIHRyYW5zZmVyIGl0IHRvIGFub3RoZXIgY29tcHV0ZXIgKHNob3J0Y3V0IGZvciBpbXBvcnQ6IGN0cmwrTykiDQogICAgICAgICAgKSArDQogICAgICAgICAgIjwvbGFiZWw+PC9kaXY+IiArDQogICAgICAgICAgKCFBcHANCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAiPVwiR2FtZS5GaWxlU2F2ZSgpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCI+IiArDQogICAgICAgICAgICAgIGxvYygiU2F2ZSB0byBmaWxlIikgKw0KICAgICAgICAgICAgICAnPC9hPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlOyI+PGlucHV0IGlkPSJGaWxlTG9hZElucHV0IiB0eXBlPSJmaWxlIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7b3BhY2l0eTowO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MHB4O3RvcDowcHg7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTsiIG9uY2hhbmdlPSJHYW1lLkZpbGVMb2FkKGV2ZW50KTsiICcgKw0KICAgICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICAgIj1cIlBsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCIvPiIgKw0KICAgICAgICAgICAgICBsb2MoIkxvYWQgZnJvbSBmaWxlIikgKw0KICAgICAgICAgICAgICAiPC9hPjxsYWJlbD4iICsNCiAgICAgICAgICAgICAgbG9jKCJVc2UgdGhpcyB0byBrZWVwIGJhY2t1cHMgb24geW91ciBjb21wdXRlciIpICsNCiAgICAgICAgICAgICAgIjwvbGFiZWw+PC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxsYWJlbD4nICsNCiAgICAgICAgICBsb2MoIkRlbGV0ZSBhbGwgeW91ciBwcm9ncmVzcywgaW5jbHVkaW5nIHlvdXIgYWNoaWV2ZW1lbnRzIikgKw0KICAgICAgICAgICc8L2xhYmVsPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiB3YXJuaW5nIiAnICsNCiAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAiPVwiR2FtZS5IYXJkUmVzZXQoKTtQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO1wiPiIgKw0KICAgICAgICAgIGxvYygiV2lwZSBzYXZlIikgKw0KICAgICAgICAgICI8L2E+PC9kaXY+IiArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0iYmxvY2siIHN0eWxlPSJwYWRkaW5nOjBweDttYXJnaW46OHB4IDRweDsiPicgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIiBzdHlsZT0icGFkZGluZzowcHg7Ij4nICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgICAgICAgIGxvYygiU2V0dGluZ3MiKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgIChBcHAgJiYgQXBwLndyaXRlQ2xvdWRVSSA/IEFwcC53cml0ZUNsb3VkVUkoKSA6ICIiKSArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPicgKw0KICAgICAgICAgIEdhbWUuV3JpdGVTbGlkZXIoDQogICAgICAgICAgICAidm9sdW1lU2xpZGVyIiwNCiAgICAgICAgICAgIGxvYygiVm9sdW1lIiksDQogICAgICAgICAgICAiWyRdJSIsDQogICAgICAgICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIHJldHVybiBHYW1lLnZvbHVtZTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAiR2FtZS5zZXRWb2x1bWUoTWF0aC5yb3VuZChsKCd2b2x1bWVTbGlkZXInKS52YWx1ZSkpO2woJ3ZvbHVtZVNsaWRlclJpZ2h0VGV4dCcpLmlubmVySFRNTD1HYW1lLnZvbHVtZSsnJSc7Ig0KICAgICAgICAgICkgKw0KICAgICAgICAgIChBcHANCiAgICAgICAgICAgID8gR2FtZS5Xcml0ZVNsaWRlcigNCiAgICAgICAgICAgICAgICAidm9sdW1lTXVzaWNTbGlkZXIiLA0KICAgICAgICAgICAgICAgIGxvYygiVm9sdW1lIChtdXNpYykiKSwNCiAgICAgICAgICAgICAgICAiWyRdJSIsDQogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIEdhbWUudm9sdW1lTXVzaWM7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAiR2FtZS5zZXRWb2x1bWVNdXNpYyhNYXRoLnJvdW5kKGwoJ3ZvbHVtZU11c2ljU2xpZGVyJykudmFsdWUpKTtsKCd2b2x1bWVNdXNpY1NsaWRlclJpZ2h0VGV4dCcpLmlubmVySFRNTD1HYW1lLnZvbHVtZU11c2ljKyclJzsiDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAvKihBcHA/R2FtZS5Xcml0ZVNsaWRlcignd3ViTXVzaWNTbGlkZXInLGxvYygiV3ViIiksJ1skXSUnLGZ1bmN0aW9uKCl7cmV0dXJuIDEwMDt9LCdHYW1lLnNldFd1Yk11c2ljKE1hdGgucm91bmQobChcJ3d1Yk11c2ljU2xpZGVyXCcpLnZhbHVlKSk7bChcJ3d1Yk11c2ljU2xpZGVyUmlnaHRUZXh0XCcpLmlubmVySFRNTD0oTWF0aC5yb3VuZChsKFwnd3ViTXVzaWNTbGlkZXJcJykudmFsdWUpKStcJyVcJzsnKTonJykrKi8NCiAgICAgICAgICAiPGJyPiIgKw0KICAgICAgICAgIChBcHANCiAgICAgICAgICAgID8gR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAgICAgImJnTXVzaWMiLA0KICAgICAgICAgICAgICAgICJiZ011c2ljQnV0dG9uIiwNCiAgICAgICAgICAgICAgICBsb2MoIk11c2ljIGluIGJhY2tncm91bmQiKSArIE9OLA0KICAgICAgICAgICAgICAgIGxvYygiTXVzaWMgaW4gYmFja2dyb3VuZCIpICsgT0ZGLA0KICAgICAgICAgICAgICAgICIiDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJtdXNpYyB3aWxsIGtlZXAgcGxheWluZyBldmVuIHdoZW4gdGhlIGdhbWUgd2luZG93IGlzbid0IGZvY3VzZWQiDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiKTwvbGFiZWw+PGJyPiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAoQXBwDQogICAgICAgICAgICA/IEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgICAgICJmdWxsc2NyZWVuIiwNCiAgICAgICAgICAgICAgICAiZnVsbHNjcmVlbkJ1dHRvbiIsDQogICAgICAgICAgICAgICAgbG9jKCJGdWxsc2NyZWVuIikgKyBPTiwNCiAgICAgICAgICAgICAgICBsb2MoIkZ1bGxzY3JlZW4iKSArIE9GRiwNCiAgICAgICAgICAgICAgICAiR2FtZS5Ub2dnbGVGdWxsc2NyZWVuKCk7Ig0KICAgICAgICAgICAgICApICsgIjxicj4iDQogICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAiZmFuY3kiLA0KICAgICAgICAgICAgImZhbmN5QnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiRmFuY3kgZ3JhcGhpY3MiKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJGYW5jeSBncmFwaGljcyIpICsgT0ZGLA0KICAgICAgICAgICAgIkdhbWUuVG9nZ2xlRmFuY3koKTsiDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxsYWJlbD4oIiArDQogICAgICAgICAgbG9jKCJ2aXN1YWwgaW1wcm92ZW1lbnRzOyBkaXNhYmxpbmcgbWF5IGltcHJvdmUgcGVyZm9ybWFuY2UiKSArDQogICAgICAgICAgIik8L2xhYmVsPjxicj4iICsNCiAgICAgICAgICBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICJmaWx0ZXJzIiwNCiAgICAgICAgICAgICJmaWx0ZXJzQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiQ1NTIGZpbHRlcnMiKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJDU1MgZmlsdGVycyIpICsgT0ZGLA0KICAgICAgICAgICAgIkdhbWUuVG9nZ2xlRmlsdGVycygpOyINCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICAoRU4NCiAgICAgICAgICAgID8gImN1dHRpbmctZWRnZSB2aXN1YWwgaW1wcm92ZW1lbnRzOyBkaXNhYmxpbmcgbWF5IGltcHJvdmUgcGVyZm9ybWFuY2UiDQogICAgICAgICAgICA6IGxvYygidmlzdWFsIGltcHJvdmVtZW50czsgZGlzYWJsaW5nIG1heSBpbXByb3ZlIHBlcmZvcm1hbmNlIikpICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgInBhcnRpY2xlcyIsDQogICAgICAgICAgICAicGFydGljbGVzQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiUGFydGljbGVzIikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiUGFydGljbGVzIikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAoRU4NCiAgICAgICAgICAgID8gIjxsYWJlbD4oY29va2llcyBmYWxsaW5nIGRvd24sIGV0YzsgZGlzYWJsaW5nIG1heSBpbXByb3ZlIHBlcmZvcm1hbmNlKTwvbGFiZWw+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAibnVtYmVycyIsDQogICAgICAgICAgICAibnVtYmVyc0J1dHRvbiIsDQogICAgICAgICAgICBsb2MoIk51bWJlcnMiKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJOdW1iZXJzIikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICBsb2MoIm51bWJlcnMgdGhhdCBwb3AgdXAgd2hlbiBjbGlja2luZyB0aGUgY29va2llIikgKw0KICAgICAgICAgICIpPC9sYWJlbD48YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAibWlsayIsDQogICAgICAgICAgICAibWlsa0J1dHRvbiIsDQogICAgICAgICAgICBsb2MoIk1pbGsgW3NldHRpbmddIikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiTWlsayBbc2V0dGluZ10iKSArIE9GRg0KICAgICAgICAgICkgKw0KICAgICAgICAgIChFTiA/ICI8bGFiZWw+KG9ubHkgYXBwZWFycyB3aXRoIGVub3VnaCBhY2hpZXZlbWVudHMpPC9sYWJlbD4iIDogIiIpICsNCiAgICAgICAgICAiPGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgImN1cnNvcnMiLA0KICAgICAgICAgICAgImN1cnNvcnNCdXR0b24iLA0KICAgICAgICAgICAgbG9jKCJDdXJzb3JzIFtzZXR0aW5nXSIpICsgT04sDQogICAgICAgICAgICBsb2MoIkN1cnNvcnMgW3NldHRpbmddIikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICBsb2MoInZpc3VhbCBkaXNwbGF5IG9mIHlvdXIgY3Vyc29ycyIpICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgIndvYmJseSIsDQogICAgICAgICAgICAid29iYmx5QnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiV29iYmx5IGNvb2tpZSIpICsgT04sDQogICAgICAgICAgICBsb2MoIldvYmJseSBjb29raWUiKSArIE9GRg0KICAgICAgICAgICkgKw0KICAgICAgICAgIChFTg0KICAgICAgICAgICAgPyAiPGxhYmVsPih5b3VyIGNvb2tpZSB3aWxsIHJlYWN0IHdoZW4geW91IGNsaWNrIGl0KTwvbGFiZWw+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAiY29va2llc291bmQiLA0KICAgICAgICAgICAgImNvb2tpZXNvdW5kQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiQWx0IGNvb2tpZSBzb3VuZCIpICsgT04sDQogICAgICAgICAgICBsb2MoIkFsdCBjb29raWUgc291bmQiKSArIE9GRg0KICAgICAgICAgICkgKw0KICAgICAgICAgIChFTg0KICAgICAgICAgICAgPyAiPGxhYmVsPihob3cgeW91ciBjb29raWUgc291bmRzIHdoZW4geW91IGNsaWNrIG9uIGl0KTwvbGFiZWw+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAiY3JhdGVzIiwNCiAgICAgICAgICAgICJjcmF0ZXNCdXR0b24iLA0KICAgICAgICAgICAgbG9jKCJJY29uIGNyYXRlcyIpICsgT04sDQogICAgICAgICAgICBsb2MoIkljb24gY3JhdGVzIikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICBsb2MoImRpc3BsYXkgYm94ZXMgYXJvdW5kIHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHMgaW4gU3RhdHMiKSArDQogICAgICAgICAgIik8L2xhYmVsPjxicj4iICsNCiAgICAgICAgICBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICJtb25vc3BhY2UiLA0KICAgICAgICAgICAgIm1vbm9zcGFjZUJ1dHRvbiIsDQogICAgICAgICAgICBsb2MoIkFsdCBmb250IikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiQWx0IGZvbnQiKSArIE9GRg0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8bGFiZWw+KCIgKw0KICAgICAgICAgIGxvYygieW91ciBjb29raWVzIGFyZSBkaXNwbGF5ZWQgdXNpbmcgYSBtb25vc3BhY2UgZm9udCIpICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgImZvcm1hdCIsDQogICAgICAgICAgICAiZm9ybWF0QnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiU2hvcnQgbnVtYmVycyIpICsgT0ZGLA0KICAgICAgICAgICAgbG9jKCJTaG9ydCBudW1iZXJzIikgKyBPTiwNCiAgICAgICAgICAgICJCZWF1dGlmeUFsbCgpO0dhbWUuUmVmcmVzaFN0b3JlKCk7R2FtZS51cGdyYWRlc1RvUmVidWlsZD0xOyIsDQogICAgICAgICAgICAxDQogICAgICAgICAgKSArDQogICAgICAgICAgKEVOID8gIjxsYWJlbD4oc2hvcnRlbiBiaWcgbnVtYmVycyk8L2xhYmVsPiIgOiAiIikgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAibm90aWZzIiwNCiAgICAgICAgICAgICJub3RpZnNCdXR0b24iLA0KICAgICAgICAgICAgbG9jKCJGYXN0IG5vdGVzIikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiRmFzdCBub3RlcyIpICsgT0ZGDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxsYWJlbD4oIiArDQogICAgICAgICAgbG9jKCJub3RpZmljYXRpb25zIGRpc2FwcGVhciBtdWNoIGZhc3RlciIpICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIC8vR2FtZS5Xcml0ZVByZWZCdXR0b24oJ2F1dG91cGRhdGUnLCdhdXRvdXBkYXRlQnV0dG9uJywnT2ZmbGluZSBtb2RlIE9GRicsJ09mZmxpbmUgbW9kZSBPTicsMCwxKSsnPGxhYmVsPihkaXNhYmxlcyB1cGRhdGUgbm90aWZpY2F0aW9ucyk8L2xhYmVsPjxicj4nKw0KICAgICAgICAgICghQXBwDQogICAgICAgICAgICA/IEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgICAgICJ3YXJuIiwNCiAgICAgICAgICAgICAgICAid2FybkJ1dHRvbiIsDQogICAgICAgICAgICAgICAgbG9jKCJDbG9zaW5nIHdhcm5pbmciKSArIE9OLA0KICAgICAgICAgICAgICAgIGxvYygiQ2xvc2luZyB3YXJuaW5nIikgKyBPRkYNCiAgICAgICAgICAgICAgKSArDQogICAgICAgICAgICAgICI8bGFiZWw+KCIgKw0KICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgInRoZSBnYW1lIHdpbGwgYXNrIHlvdSB0byBjb25maXJtIHdoZW4geW91IGNsb3NlIHRoZSB3aW5kb3ciDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiKTwvbGFiZWw+PGJyPiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAvL0dhbWUuV3JpdGVQcmVmQnV0dG9uKCdmb2N1cycsJ2ZvY3VzQnV0dG9uJyxsb2MoIkRlZm9jdXMiKStPRkYsbG9jKCJEZWZvY3VzIikrT04sMCwxKSsnPGxhYmVsPignK2xvYygidGhlIGdhbWUgd2lsbCBiZSBsZXNzIHJlc291cmNlLWludGVuc2l2ZSB3aGVuIG91dCBvZiBmb2N1cyIpKycpPC9sYWJlbD48YnI+JysNCiAgICAgICAgICBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICJleHRyYUJ1dHRvbnMiLA0KICAgICAgICAgICAgImV4dHJhQnV0dG9uc0J1dHRvbiIsDQogICAgICAgICAgICBsb2MoIkV4dHJhIGJ1dHRvbnMiKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJFeHRyYSBidXR0b25zIikgKyBPRkYsDQogICAgICAgICAgICAiR2FtZS5Ub2dnbGVFeHRyYUJ1dHRvbnMoKTsiDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxsYWJlbD4oIiArDQogICAgICAgICAgbG9jKCJhZGQgb3B0aW9ucyBvbiBidWlsZGluZ3MgbGlrZSBNdXRlIikgKw0KICAgICAgICAgICIpPC9sYWJlbD48YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAiYXNrTHVtcHMiLA0KICAgICAgICAgICAgImFza0x1bXBzQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiTHVtcCBjb25maXJtYXRpb24iKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJMdW1wIGNvbmZpcm1hdGlvbiIpICsgT0ZGDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxsYWJlbD4oIiArDQogICAgICAgICAgbG9jKCJ0aGUgZ2FtZSB3aWxsIGFzayB5b3UgdG8gY29uZmlybSBiZWZvcmUgc3BlbmRpbmcgc3VnYXIgbHVtcHMiKSArDQogICAgICAgICAgIik8L2xhYmVsPjxicj4iICsNCiAgICAgICAgICAoIUFwcA0KICAgICAgICAgICAgPyBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICAgICAiY3VzdG9tR3JhbmRtYXMiLA0KICAgICAgICAgICAgICAgICJjdXN0b21HcmFuZG1hc0J1dHRvbiIsDQogICAgICAgICAgICAgICAgbG9jKCJDdXN0b20gZ3JhbmRtYXMiKSArIE9OLA0KICAgICAgICAgICAgICAgIGxvYygiQ3VzdG9tIGdyYW5kbWFzIikgKyBPRkYNCiAgICAgICAgICAgICAgKSArDQogICAgICAgICAgICAgICI8bGFiZWw+KCIgKw0KICAgICAgICAgICAgICBsb2MoInNvbWUgZ3JhbmRtYXMgd2lsbCBiZSBuYW1lZCBhZnRlciBQYXRyZW9uIHN1cHBvcnRlcnMiKSArDQogICAgICAgICAgICAgICIpPC9sYWJlbD48YnI+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgIm5vdFNjYXJ5IiwNCiAgICAgICAgICAgICJub3RTY2FyeUJ1dHRvbiIsDQogICAgICAgICAgICBsb2MoIlNjYXJ5IHN0dWZmIikgKyBPRkYsDQogICAgICAgICAgICBsb2MoIlNjYXJ5IHN0dWZmIikgKyBPTiwNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICAxDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICJ0aW1lb3V0IiwNCiAgICAgICAgICAgICJ0aW1lb3V0QnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiU2xlZXAgbW9kZSB0aW1lb3V0IikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiU2xlZXAgbW9kZSB0aW1lb3V0IikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAib24gc2xvd2VyIGNvbXB1dGVycywgdGhlIGdhbWUgd2lsbCBwdXQgaXRzZWxmIGluIHNsZWVwIG1vZGUgd2hlbiBpdCdzIGluYWN0aXZlIGFuZCBzdGFydHMgdG8gbGFnIG91dDsgb2ZmbGluZSBDcFMgcHJvZHVjdGlvbiBraWNrcyBpbiBkdXJpbmcgc2xlZXAgbW9kZSINCiAgICAgICAgICApICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgInNjcmVlbnJlYWRlciIsDQogICAgICAgICAgICAic2NyZWVucmVhZGVyQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiU2NyZWVuIHJlYWRlciBtb2RlIikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiU2NyZWVuIHJlYWRlciBtb2RlIikgKyBPRkYsDQogICAgICAgICAgICAiR2FtZS50b1NhdmU9dHJ1ZTtHYW1lLnRvUmVsb2FkPXRydWU7Ig0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8bGFiZWw+KCIgKw0KICAgICAgICAgIGxvYygiYWxsb3dzIG9wdGltaXphdGlvbnMgZm9yIHNjcmVlbiByZWFkZXJzOyBnYW1lIHdpbGwgcmVsb2FkIikgKw0KICAgICAgICAgICIpPC9sYWJlbD48YnI+IiArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgIC8vJzxkaXYgY2xhc3M9Imxpc3RpbmciPicrR2FtZS5Xcml0ZVByZWZCdXR0b24oJ2F1dG9zYXZlJywnYXV0b3NhdmVCdXR0b24nLCdBdXRvc2F2ZSBPTicsJ0F1dG9zYXZlIE9GRicpKyc8L2Rpdj4nKw0KICAgICAgICAgICghQXBwDQogICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48YSBjbGFzcz0ib3B0aW9uIHNtYWxsRmFuY3lCdXR0b24iICcgKw0KICAgICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICAgIj1cIkdhbWUuQ2hlY2tNb2REYXRhKCk7UGxheVNvdW5kKCdzbmQvdGljay5tcDMnKTtcIj4iICsNCiAgICAgICAgICAgICAgbG9jKCJDaGVjayBtb2QgZGF0YSIpICsNCiAgICAgICAgICAgICAgIjwvYT48bGFiZWw+KCIgKw0KICAgICAgICAgICAgICBsb2MoInZpZXcgYW5kIGRlbGV0ZSBzYXZlIGRhdGEgY3JlYXRlZCBieSBtb2RzIikgKw0KICAgICAgICAgICAgICAiKTwvbGFiZWw+PC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgIjwvZGl2PiI7DQoNCiAgICAgICAgaWYgKEFwcCAmJiBBcHAud3JpdGVNb2RVSSkgew0KICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImJsb2NrIiBzdHlsZT0icGFkZGluZzowcHg7bWFyZ2luOjhweCA0cHg7Ij4nICsNCiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIiBzdHlsZT0icGFkZGluZzowcHg7Ij4nICsNCiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+JyArDQogICAgICAgICAgICBsb2MoIk1vZHMiKSArDQogICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICBBcHAud3JpdGVNb2RVSSgpICsNCiAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICI8L2Rpdj4iOw0KICAgICAgICB9DQoNCiAgICAgICAgc3RyICs9ICc8ZGl2IHN0eWxlPSJoZWlnaHQ6MTI4cHg7Ij48L2Rpdj4nOw0KICAgICAgfSBlbHNlIGlmIChHYW1lLm9uTWVudSA9PSAibG9nIikgew0KICAgICAgICAvL3N0cis9cmVwbGFjZUFsbCgnW2Jha2VyeU5hbWVdJyxHYW1lLmJha2VyeU5hbWUsR2FtZS51cGRhdGVMb2cpOw0KICAgICAgICBzdHIgKz0gR2FtZS51cGRhdGVMb2c7DQogICAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIk9sZGVuIGRheXMiKSkNCiAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICc8ZGl2IGlkPSJvbGRlbkRheXMiIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0O3dpZHRoOjEwMCU7Ij48ZGl2ICcgKw0KICAgICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgICAiPVwiR2FtZS5TcGFya2xlQXQoR2FtZS5tb3VzZVgsR2FtZS5tb3VzZVkpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7UGxheVNvdW5kKCdzbmQvc2hpbW1lckNsaWNrLm1wMycpO0dhbWUuV2luKCdPbGRlbiBkYXlzJyk7R2FtZS5VcGRhdGVNZW51KCk7XCIgY2xhc3M9XCJpY29uXCIgc3R5bGU9XCJkaXNwbGF5OmlubGluZS1ibG9jazt0cmFuc2Zvcm06c2NhbGUoMC41KTtjdXJzb3I6cG9pbnRlcjt3aWR0aDo0OHB4O2hlaWdodDo0OHB4O2JhY2tncm91bmQtcG9zaXRpb246IiArDQogICAgICAgICAgICAtMTIgKiA0OCArDQogICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAtMyAqIDQ4ICsNCiAgICAgICAgICAgICdweDsiPjwvZGl2PjwvZGl2Pic7DQogICAgICB9IGVsc2UgaWYgKEdhbWUub25NZW51ID09ICJzdGF0cyIpIHsNCiAgICAgICAgdmFyIGJ1aWxkaW5nc093bmVkID0gMDsNCiAgICAgICAgYnVpbGRpbmdzT3duZWQgPSBHYW1lLkJ1aWxkaW5nc093bmVkOw0KICAgICAgICB2YXIgdXBncmFkZXMgPSAiIjsNCiAgICAgICAgdmFyIGNvb2tpZVVwZ3JhZGVzID0gIiI7DQogICAgICAgIHZhciBoaWRkZW5VcGdyYWRlcyA9ICIiOw0KICAgICAgICB2YXIgcHJlc3RpZ2VVcGdyYWRlcyA9ICIiOw0KICAgICAgICB2YXIgdXBncmFkZXNUb3RhbCA9IDA7DQogICAgICAgIHZhciB1cGdyYWRlc093bmVkID0gMDsNCiAgICAgICAgdmFyIHByZXN0aWdlVXBncmFkZXNUb3RhbCA9IDA7DQogICAgICAgIHZhciBwcmVzdGlnZVVwZ3JhZGVzT3duZWQgPSAwOw0KDQogICAgICAgIHZhciBsaXN0ID0gW107DQogICAgICAgIC8vc29ydCB0aGUgdXBncmFkZXMNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzKSB7DQogICAgICAgICAgbGlzdC5wdXNoKEdhbWUuVXBncmFkZXNbaV0pOw0KICAgICAgICB9IC8vY2xvbmUgZmlyc3QNCiAgICAgICAgdmFyIHNvcnRNYXAgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICAgIGlmIChhLm9yZGVyID4gYi5vcmRlcikgcmV0dXJuIDE7DQogICAgICAgICAgZWxzZSBpZiAoYS5vcmRlciA8IGIub3JkZXIpIHJldHVybiAtMTsNCiAgICAgICAgICBlbHNlIHJldHVybiAwOw0KICAgICAgICB9Ow0KICAgICAgICBsaXN0LnNvcnQoc29ydE1hcCk7DQogICAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgew0KICAgICAgICAgIHZhciBzdHIyID0gIiI7DQogICAgICAgICAgdmFyIG1lID0gbGlzdFtpXTsNCg0KICAgICAgICAgIHN0cjIgKz0gR2FtZS5jcmF0ZShtZSwgInN0YXRzIik7DQoNCiAgICAgICAgICBpZiAobWUuYm91Z2h0KSB7DQogICAgICAgICAgICBpZiAoR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZChtZS5wb29sKSkgdXBncmFkZXNPd25lZCsrOw0KICAgICAgICAgICAgZWxzZSBpZiAobWUucG9vbCA9PSAicHJlc3RpZ2UiKSBwcmVzdGlnZVVwZ3JhZGVzT3duZWQrKzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAobWUucG9vbCA9PSAiIiB8fCBtZS5wb29sID09ICJjb29raWUiIHx8IG1lLnBvb2wgPT0gInRlY2giKQ0KICAgICAgICAgICAgdXBncmFkZXNUb3RhbCsrOw0KICAgICAgICAgIGlmIChtZS5wb29sID09ICJkZWJ1ZyIpIGhpZGRlblVwZ3JhZGVzICs9IHN0cjI7DQogICAgICAgICAgZWxzZSBpZiAobWUucG9vbCA9PSAicHJlc3RpZ2UiKSB7DQogICAgICAgICAgICBwcmVzdGlnZVVwZ3JhZGVzICs9IHN0cjI7DQogICAgICAgICAgICBwcmVzdGlnZVVwZ3JhZGVzVG90YWwrKzsNCiAgICAgICAgICB9IGVsc2UgaWYgKG1lLnBvb2wgPT0gImNvb2tpZSIpIGNvb2tpZVVwZ3JhZGVzICs9IHN0cjI7DQogICAgICAgICAgZWxzZSBpZiAobWUucG9vbCAhPSAidG9nZ2xlIiAmJiBtZS5wb29sICE9ICJ1bnVzZWQiKSB1cGdyYWRlcyArPSBzdHIyOw0KICAgICAgICB9DQogICAgICAgIHZhciBhY2hpZXZlbWVudHMgPSBbXTsNCiAgICAgICAgdmFyIGFjaGlldmVtZW50c093bmVkID0gMDsNCiAgICAgICAgdmFyIGFjaGlldmVtZW50c093bmVkT3RoZXIgPSAwOw0KICAgICAgICB2YXIgYWNoaWV2ZW1lbnRzVG90YWwgPSAwOw0KDQogICAgICAgIHZhciBsaXN0ID0gW107DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5BY2hpZXZlbWVudHMpIHsgLy9zb3J0IHRoZSBhY2hpZXZlbWVudHMNCiAgICAgICAgICBsaXN0LnB1c2goR2FtZS5BY2hpZXZlbWVudHNbaV0pOw0KICAgICAgICB9DQogICAgICAgIHZhciBzb3J0TWFwID0gZnVuY3Rpb24gKGEsIGIpIHsNCiAgICAgICAgICBpZiAoYS5vcmRlciA+IGIub3JkZXIpIHJldHVybiAxOw0KICAgICAgICAgIGVsc2UgaWYgKGEub3JkZXIgPCBiLm9yZGVyKSByZXR1cm4gLTE7DQogICAgICAgICAgZWxzZSByZXR1cm4gMDsNCiAgICAgICAgfTsNCiAgICAgICAgbGlzdC5zb3J0KHNvcnRNYXApOw0KDQogICAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgew0KICAgICAgICAgIHZhciBtZSA9IGxpc3RbaV07DQogICAgICAgICAgLy9pZiAobWUucG9vbD09J25vcm1hbCcgfHwgbWUud29uPjApIGFjaGlldmVtZW50c1RvdGFsKys7DQogICAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNBY2hpZXZlbWVudE93bmVkKG1lLnBvb2wpKSBhY2hpZXZlbWVudHNUb3RhbCsrOw0KICAgICAgICAgIHZhciBwb29sID0gbWUucG9vbDsNCiAgICAgICAgICBpZiAoIWFjaGlldmVtZW50c1twb29sXSkgYWNoaWV2ZW1lbnRzW3Bvb2xdID0gIiI7DQogICAgICAgICAgYWNoaWV2ZW1lbnRzW3Bvb2xdICs9IEdhbWUuY3JhdGUobWUsICJzdGF0cyIpOw0KDQogICAgICAgICAgaWYgKG1lLndvbikgew0KICAgICAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNBY2hpZXZlbWVudE93bmVkKG1lLnBvb2wpKSBhY2hpZXZlbWVudHNPd25lZCsrOw0KICAgICAgICAgICAgZWxzZSBhY2hpZXZlbWVudHNPd25lZE90aGVyKys7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGFjaGlldmVtZW50c1N0ciA9ICIiOw0KICAgICAgICB2YXIgcG9vbHMgPSB7DQogICAgICAgICAgZHVuZ2VvbjogRU4NCiAgICAgICAgICAgID8gIjxiPkR1bmdlb24gYWNoaWV2ZW1lbnRzPC9iPiA8c21hbGw+KE5vdCB0ZWNobmljYWxseSBhY2hpZXZhYmxlIHlldC4pPC9zbWFsbD4iDQogICAgICAgICAgICA6ICI8Yj4/Pz88L2I+IiwNCiAgICAgICAgICBzaGFkb3c6DQogICAgICAgICAgICAiPGI+IiArDQogICAgICAgICAgICBsb2MoIlNoYWRvdyBhY2hpZXZlbWVudHMiKSArDQogICAgICAgICAgICAiPC9iPiA8c21hbGw+KCIgKw0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiVGhlc2UgYXJlIGZlYXRzIHRoYXQgYXJlIGVpdGhlciB1bmZhaXIgb3IgZGlmZmljdWx0IHRvIGF0dGFpbi4gVGhleSBkbyBub3QgZ2l2ZSBtaWxrLiINCiAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgIik8L3NtYWxsPiIsDQogICAgICAgIH07DQogICAgICAgIGZvciAodmFyIGkgaW4gYWNoaWV2ZW1lbnRzKSB7DQogICAgICAgICAgaWYgKGFjaGlldmVtZW50c1tpXSAhPSAiIikgew0KICAgICAgICAgICAgaWYgKHBvb2xzW2ldKQ0KICAgICAgICAgICAgICBhY2hpZXZlbWVudHNTdHIgKz0gJzxkaXYgY2xhc3M9Imxpc3RpbmciPicgKyBwb29sc1tpXSArICI8L2Rpdj4iOw0KICAgICAgICAgICAgYWNoaWV2ZW1lbnRzU3RyICs9DQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIGNyYXRlQm94Ij4nICsgYWNoaWV2ZW1lbnRzW2ldICsgIjwvZGl2PiI7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIG1pbGtTdHIgPSAiIjsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLk1pbGtzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IGkpIHsNCiAgICAgICAgICAgIHZhciBtaWxrID0gR2FtZS5NaWxrc1tpXTsNCiAgICAgICAgICAgIG1pbGtTdHIgKz0NCiAgICAgICAgICAgICAgIjxkaXYgIiArDQogICAgICAgICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0icHJvbXB0IiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZy1ib3R0b206NnB4O3doaXRlLXNwYWNlOm5vd3JhcDttYXJnaW46MHB4O3BhZGRpbmctYm90dG9tOjk2cHg7IiBpZD0idG9vbHRpcE1pbGsiPjxoMyBzdHlsZT0ibWFyZ2luOjZweCAzMnB4IDBweCAzMnB4OyI+JyArDQogICAgICAgICAgICAgICAgICAobG9jKCJSYW5rICUxIiwgcm9tYW5pemUoaSArIDEpKSArICIgLSAiICsgbWlsay5uYW1lKSArDQogICAgICAgICAgICAgICAgICAnPC9oMz48ZGl2IHN0eWxlPSJvcGFjaXR5OjAuNzU7Zm9udC1zaXplOjlweDsiPignICsNCiAgICAgICAgICAgICAgICAgIChpID09IDANCiAgICAgICAgICAgICAgICAgICAgPyBsb2MoInN0YXJ0ZXIgbWlsayIpDQogICAgICAgICAgICAgICAgICAgIDogbG9jKCJmb3IgJTEgYWNoaWV2ZW1lbnRzIiwgQmVhdXRpZnkoaSAqIDI1KSkpICsNCiAgICAgICAgICAgICAgICAgICcpPC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6OTZweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjBweDtib3R0b206MHB4O2JhY2tncm91bmQ6dXJsKGltZy8nICsNCiAgICAgICAgICAgICAgICAgIG1pbGsucGljICsNCiAgICAgICAgICAgICAgICAgICcpOyI+PC9kaXY+PC9kaXY+JywNCiAgICAgICAgICAgICAgICAidG9wIg0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgJyBzdHlsZT0iYmFja2dyb3VuZDp1cmwoaW1nL2ljb25zLnBuZz92PScgKw0KICAgICAgICAgICAgICBHYW1lLnZlcnNpb24gKw0KICAgICAgICAgICAgICAiKSAiICsNCiAgICAgICAgICAgICAgLW1pbGsuaWNvblswXSAqIDQ4ICsNCiAgICAgICAgICAgICAgInB4ICIgKw0KICAgICAgICAgICAgICAtbWlsay5pY29uWzFdICogNDggKw0KICAgICAgICAgICAgICAncHg7bWFyZ2luOjJweCAwcHg7IiBjbGFzcz0idHJvcGh5Ij48L2Rpdj4nOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBtaWxrU3RyICs9ICc8ZGl2IHN0eWxlPSJjbGVhcjpib3RoOyI+PC9kaXY+JzsNCg0KICAgICAgICB2YXIgc2FudGFTdHIgPSAiIjsNCiAgICAgICAgdmFyIGZyYW1lcyA9IDE1Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkEgZmVzdGl2ZSBoYXQiKSkgew0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IEdhbWUuc2FudGFMZXZlbDsgaSsrKSB7DQogICAgICAgICAgICBzYW50YVN0ciArPQ0KICAgICAgICAgICAgICAiPGRpdiAiICsNCiAgICAgICAgICAgICAgR2FtZS5nZXRUb29sdGlwKA0KICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJwcm9tcHQiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nLWJvdHRvbTo2cHg7d2hpdGUtc3BhY2U6bm93cmFwO21hcmdpbjowcHggMzJweDsiPjxkaXYgc3R5bGU9IndpZHRoOjk2cHg7aGVpZ2h0Ojk2cHg7bWFyZ2luOjRweCBhdXRvO2JhY2tncm91bmQ6dXJsKGltZy9zYW50YS5wbmcpICcgKw0KICAgICAgICAgICAgICAgICAgLWkgKiA5NiArDQogICAgICAgICAgICAgICAgICAncHggMHB4O2ZpbHRlcjpkcm9wLXNoYWRvdygwcHggM3B4IDJweCAjMDAwKTstd2Via2l0LWZpbHRlcjpkcm9wLXNoYWRvdygwcHggM3B4IDJweCAjMDAwKTsiIGlkPSJ0b29sdGlwU2FudGEiPjwvZGl2PjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjxoMz4nICsNCiAgICAgICAgICAgICAgICAgIEdhbWUuc2FudGFMZXZlbHNbaV0gKw0KICAgICAgICAgICAgICAgICAgIjwvaDM+PC9kaXY+IiwNCiAgICAgICAgICAgICAgICAidG9wIg0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgJyBzdHlsZT0iYmFja2dyb3VuZDp1cmwoaW1nL3NhbnRhLnBuZykgJyArDQogICAgICAgICAgICAgIC1pICogNDggKw0KICAgICAgICAgICAgICAicHggMHB4O2JhY2tncm91bmQtc2l6ZToiICsNCiAgICAgICAgICAgICAgZnJhbWVzICogNDggKw0KICAgICAgICAgICAgICAncHggNDhweDsiIGNsYXNzPSJ0cm9waHkiPjwvZGl2Pic7DQogICAgICAgICAgfQ0KICAgICAgICAgIHNhbnRhU3RyICs9ICc8ZGl2IHN0eWxlPSJjbGVhcjpib3RoOyI+PC9kaXY+JzsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgZHJhZ29uU3RyID0gIiI7DQogICAgICAgIHZhciBmcmFtZXMgPSA5Ow0KICAgICAgICB2YXIgbWFpbkxldmVscyA9IFsNCiAgICAgICAgICAwLA0KICAgICAgICAgIDQsDQogICAgICAgICAgOCwNCiAgICAgICAgICBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAzLA0KICAgICAgICAgIEdhbWUuZHJhZ29uTGV2ZWxzLmxlbmd0aCAtIDIsDQogICAgICAgICAgR2FtZS5kcmFnb25MZXZlbHMubGVuZ3RoIC0gMSwNCiAgICAgICAgXTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJBIGNydW1ibHkgZWdnIikpIHsNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBtYWluTGV2ZWxzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5kcmFnb25MZXZlbCA+PSBtYWluTGV2ZWxzW2ldKSB7DQogICAgICAgICAgICAgIHZhciBsZXZlbCA9IEdhbWUuZHJhZ29uTGV2ZWxzW21haW5MZXZlbHNbaV1dOw0KICAgICAgICAgICAgICBkcmFnb25TdHIgKz0NCiAgICAgICAgICAgICAgICAiPGRpdiAiICsNCiAgICAgICAgICAgICAgICBHYW1lLmdldFRvb2x0aXAoDQogICAgICAgICAgICAgICAgICAvLyc8ZGl2IHN0eWxlPSJ3aWR0aDo5NnB4O2hlaWdodDo5NnB4O21hcmdpbjo0cHggYXV0bztiYWNrZ3JvdW5kOnVybChpbWcvZHJhZ29uLnBuZz92PScrR2FtZS52ZXJzaW9uKycpICcrKC1sZXZlbC5waWMqOTYpKydweCAwcHg7Ij48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48ZGl2IHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luLWJvdHRvbTo2cHg7Ij4nK2xldmVsLm5hbWUrJzwvZGl2PicNCiAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJwcm9tcHQiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nLWJvdHRvbTo2cHg7d2hpdGUtc3BhY2U6bm93cmFwO21hcmdpbjowcHggMzJweDsiIGlkPSJ0b29sdGlwRHJhZ29uIj48ZGl2IHN0eWxlPSJ3aWR0aDo5NnB4O2hlaWdodDo5NnB4O21hcmdpbjo0cHggYXV0bztiYWNrZ3JvdW5kOnVybChpbWcvZHJhZ29uLnBuZz92PScgKw0KICAgICAgICAgICAgICAgICAgICBHYW1lLnZlcnNpb24gKw0KICAgICAgICAgICAgICAgICAgICAiKSAiICsNCiAgICAgICAgICAgICAgICAgICAgLWxldmVsLnBpYyAqIDk2ICsNCiAgICAgICAgICAgICAgICAgICAgJ3B4IDBweDtmaWx0ZXI6ZHJvcC1zaGFkb3coMHB4IDNweCAycHggIzAwMCk7LXdlYmtpdC1maWx0ZXI6ZHJvcC1zaGFkb3coMHB4IDNweCAycHggIzAwMCk7Ij48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48aDM+JyArDQogICAgICAgICAgICAgICAgICAgIGxldmVsLm5hbWUgKw0KICAgICAgICAgICAgICAgICAgICAiPC9oMz48L2Rpdj4iLA0KICAgICAgICAgICAgICAgICAgInRvcCINCiAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAnIHN0eWxlPSJiYWNrZ3JvdW5kOnVybChpbWcvZHJhZ29uLnBuZz92PScgKw0KICAgICAgICAgICAgICAgIEdhbWUudmVyc2lvbiArDQogICAgICAgICAgICAgICAgIikgIiArDQogICAgICAgICAgICAgICAgLWxldmVsLnBpYyAqIDQ4ICsNCiAgICAgICAgICAgICAgICAicHggMHB4O2JhY2tncm91bmQtc2l6ZToiICsNCiAgICAgICAgICAgICAgICBmcmFtZXMgKiA0OCArDQogICAgICAgICAgICAgICAgJ3B4IDQ4cHg7IiBjbGFzcz0idHJvcGh5Ij48L2Rpdj4nOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBkcmFnb25TdHIgKz0gJzxkaXYgc3R5bGU9ImNsZWFyOmJvdGg7Ij48L2Rpdj4nOw0KICAgICAgICB9DQogICAgICAgIHZhciBhc2NlbnNpb25Nb2RlU3RyID0gIiI7DQogICAgICAgIHZhciBpY29uID0gR2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLmFzY2Vuc2lvbk1vZGVdLmljb247DQogICAgICAgIGlmIChHYW1lLnJlc2V0cyA+IDApDQogICAgICAgICAgYXNjZW5zaW9uTW9kZVN0ciA9DQogICAgICAgICAgICAnPHNwYW4gc3R5bGU9ImN1cnNvcjpwb2ludGVyOyIgJyArDQogICAgICAgICAgICBHYW1lLmdldFRvb2x0aXAoDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7IiBpZD0idG9vbHRpcENoYWxsZW5nZU1vZGUiPicgKw0KICAgICAgICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZXNbR2FtZS5hc2NlbnNpb25Nb2RlXS5kZXNjICsNCiAgICAgICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICAgICAgInRvcCINCiAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgJz48ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7ZmxvYXQ6bm9uZTt0cmFuc2Zvcm06c2NhbGUoMC41KTttYXJnaW46LTI0cHggLTE2cHggLTE5cHggLThweDsnICsNCiAgICAgICAgICAgIHdyaXRlSWNvbihpY29uKSArDQogICAgICAgICAgICAnIj48L2Rpdj4nICsNCiAgICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZXNbR2FtZS5hc2NlbnNpb25Nb2RlXS5kbmFtZSArDQogICAgICAgICAgICAiPC9zcGFuPiI7DQoNCiAgICAgICAgdmFyIG1pbGtOYW1lID0gR2FtZS5NaWxrLm5hbWU7DQoNCiAgICAgICAgdmFyIHJlc2VhcmNoU3RyID0gR2FtZS5zYXlUaW1lKEdhbWUucmVzZWFyY2hULCAtMSk7DQogICAgICAgIHZhciBwbGVkZ2VTdHIgPSBHYW1lLnNheVRpbWUoR2FtZS5wbGVkZ2VULCAtMSk7DQogICAgICAgIHZhciB3cmF0aFN0ciA9ICIiOw0KICAgICAgICBpZiAoR2FtZS5lbGRlcldyYXRoID09IDEpIHdyYXRoU3RyID0gbG9jKCJhd29rZW4iKTsNCiAgICAgICAgZWxzZSBpZiAoR2FtZS5lbGRlcldyYXRoID09IDIpIHdyYXRoU3RyID0gbG9jKCJkaXNwbGVhc2VkIik7DQogICAgICAgIGVsc2UgaWYgKEdhbWUuZWxkZXJXcmF0aCA9PSAzKSB3cmF0aFN0ciA9IGxvYygiYW5nZXJlZCIpOw0KICAgICAgICBlbHNlIGlmIChHYW1lLmVsZGVyV3JhdGggPT0gMCAmJiBHYW1lLnBsZWRnZXMgPiAwKQ0KICAgICAgICAgIHdyYXRoU3RyID0gbG9jKCJhcHBlYXNlZCIpOw0KDQogICAgICAgIHZhciBkcm9wTXVsdCA9IEdhbWUuZHJvcFJhdGVNdWx0KCk7DQoNCiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgICBkYXRlLnNldFRpbWUoRGF0ZS5ub3coKSAtIEdhbWUuc3RhcnREYXRlKTsNCiAgICAgICAgdmFyIHRpbWVJblNlY29uZHMgPSBkYXRlLmdldFRpbWUoKSAvIDEwMDA7DQogICAgICAgIHZhciBzdGFydERhdGUgPSBHYW1lLnNheVRpbWUodGltZUluU2Vjb25kcyAqIEdhbWUuZnBzLCAtMSk7DQogICAgICAgIGRhdGUuc2V0VGltZShEYXRlLm5vdygpIC0gR2FtZS5mdWxsRGF0ZSk7DQogICAgICAgIHZhciBmdWxsRGF0ZSA9IEdhbWUuc2F5VGltZSgoZGF0ZS5nZXRUaW1lKCkgLyAxMDAwKSAqIEdhbWUuZnBzLCAtMSk7DQogICAgICAgIGlmICghR2FtZS5mdWxsRGF0ZSB8fCAhZnVsbERhdGUgfHwgZnVsbERhdGUubGVuZ3RoIDwgMSkNCiAgICAgICAgICBmdWxsRGF0ZSA9IGxvYygiYSBsb25nIHdoaWxlIik7DQogICAgICAgIC8qZGF0ZS5zZXRUaW1lKG5ldyBEYXRlKCkuZ2V0VGltZSgpLUdhbWUubGFzdERhdGUpOw0KCQkJCXZhciBsYXN0RGF0ZT1HYW1lLnNheVRpbWUoZGF0ZS5nZXRUaW1lKCkvMTAwMCpHYW1lLmZwcywyKTsqLw0KDQogICAgICAgIHZhciBoZWF2ZW5seU11bHQgPSBHYW1lLkdldEhlYXZlbmx5TXVsdGlwbGllcigpOw0KDQogICAgICAgIHZhciBzZWFzb25TdHIgPSBHYW1lLnNheVRpbWUoR2FtZS5zZWFzb25ULCAtMSk7DQoNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9InNlY3Rpb24iPicgKw0KICAgICAgICAgIChFTiA/ICJTdGF0aXN0aWNzIiA6IGxvYygiU3RhdHMiKSkgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ic3Vic2VjdGlvbiI+JyArDQogICAgICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIj4nICsNCiAgICAgICAgICBsb2MoIkdlbmVyYWwiKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGlkPSJzdGF0c0dlbmVyYWwiPicgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICBsb2MoIkNvb2tpZXMgaW4gYmFuazoiKSArDQogICAgICAgICAgJzwvYj4gPGRpdiBjbGFzcz0icHJpY2UgcGxhaW4iPicgKw0KICAgICAgICAgIEdhbWUudGlueUNvb2tpZSgpICsNCiAgICAgICAgICBCZWF1dGlmeShHYW1lLmNvb2tpZXMpICsNCiAgICAgICAgICAiPC9kaXY+PC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiQ29va2llcyBiYWtlZCAodGhpcyBhc2NlbnNpb24pOiIpICsNCiAgICAgICAgICAnPC9iPiA8ZGl2IGNsYXNzPSJwcmljZSBwbGFpbiI+JyArDQogICAgICAgICAgR2FtZS50aW55Q29va2llKCkgKw0KICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc0Vhcm5lZCkgKw0KICAgICAgICAgICI8L2Rpdj48L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJDb29raWVzIGJha2VkIChhbGwgdGltZSk6IikgKw0KICAgICAgICAgICc8L2I+IDxkaXYgY2xhc3M9InByaWNlIHBsYWluIj4nICsNCiAgICAgICAgICBHYW1lLnRpbnlDb29raWUoKSArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5jb29raWVzRWFybmVkICsgR2FtZS5jb29raWVzUmVzZXQpICsNCiAgICAgICAgICAiPC9kaXY+PC9kaXY+IiArDQogICAgICAgICAgKEdhbWUuY29va2llc1Jlc2V0ID4gMA0KICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgICAgIGxvYygiQ29va2llcyBmb3JmZWl0ZWQgYnkgYXNjZW5kaW5nOiIpICsNCiAgICAgICAgICAgICAgJzwvYj4gPGRpdiBjbGFzcz0icHJpY2UgcGxhaW4iPicgKw0KICAgICAgICAgICAgICBHYW1lLnRpbnlDb29raWUoKSArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc1Jlc2V0KSArDQogICAgICAgICAgICAgICI8L2Rpdj48L2Rpdj4iDQogICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgKEdhbWUucmVzZXRzDQogICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgbG9jKCJMZWdhY3kgc3RhcnRlZDoiKSArDQogICAgICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgICAgICAoZnVsbERhdGUgPT0gIiIgPyBsb2MoImp1c3Qgbm93IikgOiBsb2MoIiUxIGFnbyIsIGZ1bGxEYXRlKSkgKw0KICAgICAgICAgICAgICAiLCAiICsNCiAgICAgICAgICAgICAgbG9jKCJ3aXRoICUxIGFzY2Vuc2lvbiIsIExCZWF1dGlmeShHYW1lLnJlc2V0cykpICsNCiAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJSdW4gc3RhcnRlZDoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgKHN0YXJ0RGF0ZSA9PSAiIiA/IGxvYygianVzdCBub3ciKSA6IGxvYygiJTEgYWdvIiwgc3RhcnREYXRlKSkgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJCdWlsZGluZ3Mgb3duZWQ6IikgKw0KICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgIEJlYXV0aWZ5KGJ1aWxkaW5nc093bmVkKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICBsb2MoIkNvb2tpZXMgcGVyIHNlY29uZDoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5jb29raWVzUHMsIDEpICsNCiAgICAgICAgICAiIDxzbWFsbD4iICsNCiAgICAgICAgICAiKCIgKw0KICAgICAgICAgIGxvYygibXVsdGlwbGllcjoiKSArDQogICAgICAgICAgIiAiICsNCiAgICAgICAgICBCZWF1dGlmeShNYXRoLnJvdW5kKEdhbWUuZ2xvYmFsQ3BzTXVsdCAqIDEwMCksIDEpICsNCiAgICAgICAgICAiJSkiICsNCiAgICAgICAgICAoR2FtZS5jcHNTdWNrZWQgPiAwDQogICAgICAgICAgICA/ICcgPHNwYW4gY2xhc3M9Indhcm5pbmciPignICsNCiAgICAgICAgICAgICAgbG9jKCJ3aXRoZXJlZDoiKSArDQogICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KE1hdGgucm91bmQoR2FtZS5jcHNTdWNrZWQgKiAxMDApLCAxKSArDQogICAgICAgICAgICAgICIlKTwvc3Bhbj4iDQogICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgIjwvc21hbGw+PC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiUmF3IGNvb2tpZXMgcGVyIHNlY29uZDoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5jb29raWVzUHNSYXcsIDEpICsNCiAgICAgICAgICAiIDxzbWFsbD4iICsNCiAgICAgICAgICAiKCIgKw0KICAgICAgICAgIGxvYygiaGlnaGVzdCB0aGlzIGFzY2Vuc2lvbjoiKSArDQogICAgICAgICAgIiAiICsNCiAgICAgICAgICBCZWF1dGlmeShHYW1lLmNvb2tpZXNQc1Jhd0hpZ2hlc3QsIDEpICsNCiAgICAgICAgICAiKSIgKw0KICAgICAgICAgICI8L3NtYWxsPjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICBsb2MoIkNvb2tpZXMgcGVyIGNsaWNrOiIpICsNCiAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICBCZWF1dGlmeShHYW1lLmNvbXB1dGVkTW91c2VDcHMsIDEpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiQ29va2llIGNsaWNrczoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5jb29raWVDbGlja3MpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiSGFuZC1tYWRlIGNvb2tpZXM6IikgKw0KICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuaGFuZG1hZGVDb29raWVzKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICBsb2MoIkdvbGRlbiBjb29raWUgY2xpY2tzOiIpICsNCiAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICBCZWF1dGlmeShHYW1lLmdvbGRlbkNsaWNrc0xvY2FsKSArDQogICAgICAgICAgIiA8c21hbGw+KCIgKw0KICAgICAgICAgIGxvYygiYWxsIHRpbWU6IikgKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5nb2xkZW5DbGlja3MpICsNCiAgICAgICAgICAiKTwvc21hbGw+PC9kaXY+IiArIC8vJyA8c3BhbiBjbGFzcz0iaGlkZGVuIj4oPGI+TWlzc2VkIGdvbGRlbiBjb29raWVzIDo8L2I+ICcrQmVhdXRpZnkoR2FtZS5taXNzZWRHb2xkZW5DbGlja3MpKycpPC9zcGFuPjwvZGl2PicrDQogICAgICAgICAgKGRyb3BNdWx0ICE9IDENCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICBsb2MoIlJhbmRvbSBkcm9wIG11bHRpcGxpZXI6IikgKw0KICAgICAgICAgICAgICAiPC9iPiA8c21hbGw+eDwvc21hbGw+IiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KGRyb3BNdWx0LCAyKSArDQogICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8YnI+PGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJSdW5uaW5nIHZlcnNpb246IikgKw0KICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgIEdhbWUudmVyc2lvbiArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgIChyZXNlYXJjaFN0ciAhPSAiIiB8fA0KICAgICAgICAgIHdyYXRoU3RyICE9ICIiIHx8DQogICAgICAgICAgcGxlZGdlU3RyICE9ICIiIHx8DQogICAgICAgICAgc2FudGFTdHIgIT0gIiIgfHwNCiAgICAgICAgICBkcmFnb25TdHIgIT0gIiIgfHwNCiAgICAgICAgICBHYW1lLnNlYXNvbiAhPSAiIiB8fA0KICAgICAgICAgIGFzY2Vuc2lvbk1vZGVTdHIgIT0gIiIgfHwNCiAgICAgICAgICBHYW1lLmNhbkx1bXBzKCkNCiAgICAgICAgICAgID8gJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24iPicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgICAgICAgICAgICBsb2MoIlNwZWNpYWwiKSArDQogICAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICAgJzxkaXYgaWQ9InN0YXRzU3BlY2lhbCI+JyArDQogICAgICAgICAgICAgIChhc2NlbnNpb25Nb2RlU3RyICE9ICIiDQogICAgICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgICAgICAgICBsb2MoIkNoYWxsZW5nZSBtb2RlOiIpICsNCiAgICAgICAgICAgICAgICAgICI8L2I+IiArDQogICAgICAgICAgICAgICAgICBhc2NlbnNpb25Nb2RlU3RyICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAoR2FtZS5zZWFzb24gIT0gIiINCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiU2Vhc29uYWwgZXZlbnQ6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLm5hbWUgKw0KICAgICAgICAgICAgICAgICAgKHNlYXNvblN0ciAhPSAiIg0KICAgICAgICAgICAgICAgICAgICA/ICIgPHNtYWxsPigiICsgbG9jKCIlMSByZW1haW5pbmciLCBzZWFzb25TdHIpICsgIik8L3NtYWxsPiINCiAgICAgICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAgIChFTiAmJiBHYW1lLnNlYXNvbiA9PSAiZm9vbHMiDQogICAgICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+TW9uZXkgbWFkZSBmcm9tIHNlbGxpbmcgY29va2llcyA6PC9iPiAnICsNCiAgICAgICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc0Vhcm5lZCAqIDAuMDgsIDIpICsNCiAgICAgICAgICAgICAgICAgICIgY29va2llIGRvbGxhcnM8L2Rpdj4iICsNCiAgICAgICAgICAgICAgICAgIChHYW1lLk9iamVjdHNbIlBvcnRhbCJdLmhpZ2hlc3QgPiAwDQogICAgICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPlRWIHNob3cgc2Vhc29ucyBwcm9kdWNlZCA6PC9iPiAnICsNCiAgICAgICAgICAgICAgICAgICAgICBCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgICAgICAgICAgICAgICh0aW1lSW5TZWNvbmRzIC8gNjAgLyA2MCkgKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIChHYW1lLk9iamVjdHNbIlBvcnRhbCJdLmhpZ2hlc3QgKiAwLjEzKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQ0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICAgICAgIDogIiIpDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAocmVzZWFyY2hTdHIgIT0gIiINCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiUmVzZWFyY2g6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICBsb2MoIiUxIHJlbWFpbmluZyIsIHJlc2VhcmNoU3RyKSArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgKHdyYXRoU3RyICE9ICIiDQogICAgICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgICAgICAgICBsb2MoIkdyYW5kbWF0cmlhcmNocyBzdGF0dXM6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICB3cmF0aFN0ciArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgKHBsZWRnZVN0ciAhPSAiIg0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJQbGVkZ2U6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICBsb2MoIiUxIHJlbWFpbmluZyIsIHBsZWRnZVN0cikgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAgIChHYW1lLndyaW5rbGVyc1BvcHBlZCA+IDANCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiV3JpbmtsZXJzIHBvcHBlZDoiKSArDQogICAgICAgICAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUud3JpbmtsZXJzUG9wcGVkKSArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgKEdhbWUuY2FuTHVtcHMoKSAmJiBHYW1lLmx1bXBzVG90YWwgPiAtMQ0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJTdWdhciBsdW1wcyBoYXJ2ZXN0ZWQ6IikgKw0KICAgICAgICAgICAgICAgICAgJzwvYj4gPGRpdiBjbGFzcz0icHJpY2UgbHVtcCBwbGFpbiI+JyArDQogICAgICAgICAgICAgICAgICBCZWF1dGlmeShHYW1lLmx1bXBzVG90YWwpICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj48L2Rpdj4iDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAvLyhHYW1lLmNvb2tpZXNTdWNrZWQ+MD8nPGRpdiBjbGFzcz0ibGlzdGluZyB3YXJuaW5nIj48Yj5XaXRoZXJlZCA6PC9iPiAnK0JlYXV0aWZ5KEdhbWUuY29va2llc1N1Y2tlZCkrJyBjb29raWVzPC9kaXY+JzonJykrDQogICAgICAgICAgICAgIChHYW1lLnJlaW5kZWVyQ2xpY2tlZCA+IDANCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiUmVpbmRlZXIgZm91bmQ6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICBCZWF1dGlmeShHYW1lLnJlaW5kZWVyQ2xpY2tlZCkgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAgIChzYW50YVN0ciAhPSAiIg0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJTYW50YSBzdGFnZXMgdW5sb2NrZWQ6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj48L2Rpdj48ZGl2PiIgKw0KICAgICAgICAgICAgICAgICAgc2FudGFTdHIgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAgIChkcmFnb25TdHIgIT0gIiINCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiRHJhZ29uIHRyYWluaW5nOiIpICsNCiAgICAgICAgICAgICAgICAgICI8L2I+PC9kaXY+PGRpdj4iICsNCiAgICAgICAgICAgICAgICAgIGRyYWdvblN0ciArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAoR2FtZS5wcmVzdGlnZSA+IDAgfHwgcHJlc3RpZ2VVcGdyYWRlcyAhPSAiIg0KICAgICAgICAgICAgPyAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiI+JyArDQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+JyArDQogICAgICAgICAgICAgIGxvYygiUHJlc3RpZ2UiKSArDQogICAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICAgJzxkaXYgaWQ9InN0YXRzUHJlc3RpZ2UiPicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGRpdiBjbGFzcz0iaWNvbiIgc3R5bGU9ImZsb2F0OmxlZnQ7YmFja2dyb3VuZC1wb3NpdGlvbjonICsNCiAgICAgICAgICAgICAgLTE5ICogNDggKw0KICAgICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAgIC03ICogNDggKw0KICAgICAgICAgICAgICAncHg7Ij48L2Rpdj4nICsNCiAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6OHB4OyI+PHNwYW4gY2xhc3M9InRpdGxlIiBzdHlsZT0iZm9udC1zaXplOjIycHg7Ij4nICsNCiAgICAgICAgICAgICAgbG9jKCJQcmVzdGlnZSBsZXZlbDoiKSArDQogICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUucHJlc3RpZ2UpICsNCiAgICAgICAgICAgICAgIjwvc3Bhbj4gIiArDQogICAgICAgICAgICAgIGxvYygiYXQgJTElIG9mIGl0cyBwb3RlbnRpYWwgPGI+KCslMiUgQ3BTKTwvYj4iLCBbDQogICAgICAgICAgICAgICAgQmVhdXRpZnkoaGVhdmVubHlNdWx0ICogMTAwLCAxKSwNCiAgICAgICAgICAgICAgICBCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoR2FtZS5wcmVzdGlnZSkgKiBHYW1lLmhlYXZlbmx5UG93ZXIgKiBoZWF2ZW5seU11bHQsDQogICAgICAgICAgICAgICAgICAxDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAiPGJyPiIgKw0KICAgICAgICAgICAgICBsb2MoIkhlYXZlbmx5IGNoaXBzOiIpICsNCiAgICAgICAgICAgICAgIiA8Yj4iICsNCiAgICAgICAgICAgICAgQmVhdXRpZnkoR2FtZS5oZWF2ZW5seUNoaXBzKSArDQogICAgICAgICAgICAgICI8L2I+PC9kaXY+IiArDQogICAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICAgKHByZXN0aWdlVXBncmFkZXMgIT0gIiINCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIiBzdHlsZT0iY2xlYXI6bGVmdDsiPjxiPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJQcmVzdGlnZSB1cGdyYWRlcyB1bmxvY2tlZDoiKSArDQogICAgICAgICAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICAgICAgICAgIHByZXN0aWdlVXBncmFkZXNPd25lZCArDQogICAgICAgICAgICAgICAgICAiLyIgKw0KICAgICAgICAgICAgICAgICAgcHJlc3RpZ2VVcGdyYWRlc1RvdGFsICsNCiAgICAgICAgICAgICAgICAgICIgKCIgKw0KICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcigNCiAgICAgICAgICAgICAgICAgICAgKHByZXN0aWdlVXBncmFkZXNPd25lZCAvIHByZXN0aWdlVXBncmFkZXNUb3RhbCkgKiAxMDANCiAgICAgICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAgICAgIiUpPC9kaXY+IiArDQogICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyBjcmF0ZUJveCI+JyArDQogICAgICAgICAgICAgICAgICBwcmVzdGlnZVVwZ3JhZGVzICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIj4nICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgICAgICAgIGxvYygiVXBncmFkZXMiKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGlkPSJzdGF0c1VwZ3JhZGVzIj4nICsNCiAgICAgICAgICAoaGlkZGVuVXBncmFkZXMgIT0gIiINCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPkRlYnVnPC9iPjwvZGl2PicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyBjcmF0ZUJveCI+JyArDQogICAgICAgICAgICAgIGhpZGRlblVwZ3JhZGVzICsNCiAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJVcGdyYWRlcyB1bmxvY2tlZDoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgdXBncmFkZXNPd25lZCArDQogICAgICAgICAgIi8iICsNCiAgICAgICAgICB1cGdyYWRlc1RvdGFsICsNCiAgICAgICAgICAiICgiICsNCiAgICAgICAgICBNYXRoLmZsb29yKCh1cGdyYWRlc093bmVkIC8gdXBncmFkZXNUb3RhbCkgKiAxMDApICsNCiAgICAgICAgICAiJSk8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyBjcmF0ZUJveCI+JyArDQogICAgICAgICAgdXBncmFkZXMgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAoY29va2llVXBncmFkZXMgIT0gIiINCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICBsb2MoIkNvb2tpZXMiKSArDQogICAgICAgICAgICAgICI8L2I+PC9kaXY+IiArDQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIGNyYXRlQm94Ij4nICsNCiAgICAgICAgICAgICAgY29va2llVXBncmFkZXMgKw0KICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiI+JyArDQogICAgICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIj4nICsNCiAgICAgICAgICBsb2MoIkFjaGlldmVtZW50cyIpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgaWQ9InN0YXRzQWNoaWV2cyI+JyArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiQWNoaWV2ZW1lbnRzIHVubG9ja2VkOiIpICsNCiAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICBhY2hpZXZlbWVudHNPd25lZCArDQogICAgICAgICAgIi8iICsNCiAgICAgICAgICBhY2hpZXZlbWVudHNUb3RhbCArDQogICAgICAgICAgIiAoIiArDQogICAgICAgICAgTWF0aC5mbG9vcigoYWNoaWV2ZW1lbnRzT3duZWQgLyBhY2hpZXZlbWVudHNUb3RhbCkgKiAxMDApICsNCiAgICAgICAgICAiJSkiICsNCiAgICAgICAgICAoYWNoaWV2ZW1lbnRzT3duZWRPdGhlciA+IDANCiAgICAgICAgICAgID8gJzxzcGFuIHN0eWxlPSJmb250LXdlaWdodDpib2xkO2ZvbnQtc2l6ZToxMHB4O2NvbG9yOiM3MGE7Ij4gKCsnICsNCiAgICAgICAgICAgICAgYWNoaWV2ZW1lbnRzT3duZWRPdGhlciArDQogICAgICAgICAgICAgICIpPC9zcGFuPiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgKEdhbWUuY29va2llc011bHRCeVR5cGVbImtpdHRlbnMiXSA+IDENCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICBsb2MoIktpdHRlbiBtdWx0aXBsaWVyOiIpICsNCiAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc011bHRCeVR5cGVbImtpdHRlbnMiXSAqIDEwMCkgKw0KICAgICAgICAgICAgICAiJTwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJNaWxrIikgKw0KICAgICAgICAgICI6PC9iPiAiICsNCiAgICAgICAgICBtaWxrTmFtZSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgIChtaWxrU3RyICE9ICIiDQogICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgbG9jKCJNaWxrIGZsYXZvcnMgdW5sb2NrZWQ6IikgKw0KICAgICAgICAgICAgICAiPC9iPjwvZGl2PjxkaXY+IiArDQogICAgICAgICAgICAgIG1pbGtTdHIgKw0KICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48c21hbGwgc3R5bGU9Im9wYWNpdHk6MC43NTsiPignICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiTWlsayBpcyBnYWluZWQgd2l0aCBlYWNoIGFjaGlldmVtZW50LiBJdCBjYW4gdW5sb2NrIHVuaXF1ZSB1cGdyYWRlcyBvdmVyIHRpbWUuIg0KICAgICAgICAgICkgKw0KICAgICAgICAgICIpPC9zbWFsbD48L2Rpdj4iICsNCiAgICAgICAgICBhY2hpZXZlbWVudHNTdHIgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmctYm90dG9tOjEyOHB4OyI+PC9kaXY+JzsNCiAgICAgIH0NCiAgICAgIC8vc3RyPSc8ZGl2IGlkPSJzZWxlY3Rpb25LZWVwZXIiIGNsYXNzPSJzZWxlY3RhYmxlIj4nK3N0cisnPC9kaXY+JzsNCiAgICAgIGwoIm1lbnUiKS5pbm5lckhUTUwgPSBzdHI7DQogICAgICBpZiAoQXBwKSB7DQogICAgICAgIHZhciBhbmNob3JzID0gbCgibWVudSIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIik7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5jaG9ycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHZhciBpdCA9IGFuY2hvcnNbaV07DQogICAgICAgICAgaWYgKGl0LmhyZWYpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0LmhyZWYpOw0KICAgICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICAgIGl0LA0KICAgICAgICAgICAgICAiY2xpY2siLA0KICAgICAgICAgICAgICAoZnVuY3Rpb24gKGhyZWYpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgQXBwLm9wZW5MaW5rKGhyZWYpOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgIH0pKGl0LmhyZWYpDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgaXQucmVtb3ZlQXR0cmlidXRlKCJocmVmIik7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICAvKkFkZEV2ZW50KGwoJ3NlbGVjdGlvbktlZXBlcicpLCdtb3VzZXVwJyxmdW5jdGlvbihlKXsNCgkJCQljb25zb2xlLmxvZygnc2VsZWN0aW9uOicsd2luZG93LmdldFNlbGVjdGlvbigpKTsNCgkJCX0pOyovDQogICAgfTsNCg0KICAgIEFkZEV2ZW50KGwoInByZWZzQnV0dG9uIiksICJjbGljayIsIGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUuU2hvd01lbnUoInByZWZzIik7DQogICAgfSk7DQogICAgQWRkRXZlbnQobCgic3RhdHNCdXR0b24iKSwgImNsaWNrIiwgZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5TaG93TWVudSgic3RhdHMiKTsNCiAgICB9KTsNCiAgICBBZGRFdmVudChsKCJsb2dCdXR0b24iKSwgImNsaWNrIiwgZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5TaG93TWVudSgibG9nIik7DQogICAgfSk7DQogICAgQWRkRXZlbnQobCgibGVnYWN5QnV0dG9uIiksICJjbGljayIsIGZ1bmN0aW9uICgpIHsNCiAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICBHYW1lLkFzY2VuZCgpOw0KICAgIH0pOw0KICAgIEdhbWUuYXNjZW5kTWV0ZXIgPSBsKCJhc2NlbmRNZXRlciIpOw0KICAgIEdhbWUuYXNjZW5kTnVtYmVyID0gbCgiYXNjZW5kTnVtYmVyIik7DQoNCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJTkVXUyBUSUNLRVINCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLlRpY2tlciA9ICIiOw0KICAgIEdhbWUuVGlja2VyQWdlID0gMDsNCiAgICBHYW1lLlRpY2tlckVmZmVjdCA9IDA7DQogICAgR2FtZS5UaWNrZXJOID0gMDsNCiAgICBHYW1lLlRpY2tlckNsaWNrcyA9IDA7DQogICAgR2FtZS5VcGRhdGVUaWNrZXIgPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLlRpY2tlckFnZS0tOw0KICAgICAgaWYgKEdhbWUuVGlja2VyQWdlIDw9IDApIEdhbWUuZ2V0TmV3VGlja2VyKCk7DQogICAgICBlbHNlIGlmIChHYW1lLlRpY2tlciA9PSAiIikgR2FtZS5nZXROZXdUaWNrZXIodHJ1ZSk7DQogICAgfTsNCiAgICBHYW1lLmdldE5ld1RpY2tlciA9IGZ1bmN0aW9uICgNCiAgICAgIG1hbnVhbCAvL25vdGUgOiAibWFudWFsIiBpcyB0cnVlIGlmIHRoZSB0aWNrZXIgd2FzIGNsaWNrZWQsIGJ1dCBtYXkgYWxzbyBiZSB0cnVlIG9uIHN0YXJ0dXAgZXRjDQogICAgKSB7DQogICAgICB2YXIgbGlzdCA9IFtdOw0KDQogICAgICB2YXIgTkVXUyA9IGxvYygiTmV3cyA6IikucmVwbGFjZSgiICIsICImbmJzcDsiKSArICIgIjsNCg0KICAgICAgdmFyIGxvcmVQcm9ncmVzcyA9IE1hdGgucm91bmQoDQogICAgICAgIChNYXRoLmxvZyhHYW1lLmNvb2tpZXNFYXJuZWQgLyAxMCkgKiBNYXRoLkxPRzEwRSArIDEpIHwgMA0KICAgICAgKTsNCg0KICAgICAgaWYgKEdhbWUuVGlja2VyTiAlIDIgPT0gMCB8fCBsb3JlUHJvZ3Jlc3MgPiAxNCkgew0KICAgICAgICB2YXIgYW5pbWFscyA9IFsNCiAgICAgICAgICAibmV3dHMiLA0KICAgICAgICAgICJwZW5ndWlucyIsDQogICAgICAgICAgInNjb3JwaW9ucyIsDQogICAgICAgICAgImF4b2xvdGxzIiwNCiAgICAgICAgICAicHVmZmlucyIsDQogICAgICAgICAgInBvcnBvaXNlcyIsDQogICAgICAgICAgImJsb3dmaXNoIiwNCiAgICAgICAgICAiaG9yc2VzIiwNCiAgICAgICAgICAiY3JheWZpc2giLA0KICAgICAgICAgICJzbHVncyIsDQogICAgICAgICAgImh1bXBiYWNrIHdoYWxlcyIsDQogICAgICAgICAgIm51cnNlIHNoYXJrcyIsDQogICAgICAgICAgImdpYW50IHNxdWlkcyIsDQogICAgICAgICAgInBvbGFyIGJlYXJzIiwNCiAgICAgICAgICAiZnJ1aXQgYmF0cyIsDQogICAgICAgICAgImZyb2dzIiwNCiAgICAgICAgICAic2VhIHNxdWlydHMiLA0KICAgICAgICAgICJ2ZWx2ZXQgd29ybXMiLA0KICAgICAgICAgICJtb2xlIHJhdHMiLA0KICAgICAgICAgICJwYXJhbWVjaWEiLA0KICAgICAgICAgICJuZW1hdG9kZXMiLA0KICAgICAgICAgICJ0YXJkaWdyYWRlcyIsDQogICAgICAgICAgImdpcmFmZmVzIiwNCiAgICAgICAgICAibW9ua2Zpc2giLA0KICAgICAgICAgICJ3b2xmbWVuIiwNCiAgICAgICAgICAiZ29ibGlucyIsDQogICAgICAgICAgImhpcHBpZXMiLA0KICAgICAgICBdOw0KDQogICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC43NSB8fCBHYW1lLmNvb2tpZXNFYXJuZWQgPCAxMDAwMCkgew0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAiPHE+IiArDQogICAgICAgICAgICAgICAgY2hvb3NlKGxvYygiVGlja2VyIChncmFuZG1hKSIpKSArDQogICAgICAgICAgICAgICAgIjwvcT48c2lnPiIgKw0KICAgICAgICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnNpbmdsZSArDQogICAgICAgICAgICAgICAgIjwvc2lnPiINCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoIUdhbWUucHJlZnMubm90U2NhcnkgJiYgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID49IDUwKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAiPHE+IiArDQogICAgICAgICAgICAgICAgY2hvb3NlKGxvYygiVGlja2VyICh0aHJlYXRlbmluZyBncmFuZG1hKSIpKSArDQogICAgICAgICAgICAgICAgIjwvcT48c2lnPiIgKw0KICAgICAgICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnNpbmdsZSArDQogICAgICAgICAgICAgICAgIjwvc2lnPiINCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoRU4gJiYgR2FtZS5IYXNBY2hpZXYoIkp1c3Qgd3JvbmciKSAmJiBNYXRoLnJhbmRvbSgpIDwgMC4wNSkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgTkVXUyArICJjb29raWUgbWFudWZhY3R1cmVyIGRvd25zaXplcywgc2VsbHMgb3duIGdyYW5kbW90aGVyISINCiAgICAgICAgICAgICk7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgIUdhbWUucHJlZnMubm90U2NhcnkgJiYNCiAgICAgICAgICAgIEdhbWUuSGFzQWNoaWV2KCJKdXN0IHdyb25nIikgJiYNCiAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAwLjQNCiAgICAgICAgICApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICI8cT4iICsNCiAgICAgICAgICAgICAgICBjaG9vc2UobG9jKCJUaWNrZXIgKGFuZ3J5IGdyYW5kbWEpIikpICsNCiAgICAgICAgICAgICAgICAiPC9xPjxzaWc+IiArDQogICAgICAgICAgICAgICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uc2luZ2xlICsNCiAgICAgICAgICAgICAgICAiPC9zaWc+Ig0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICFHYW1lLnByZWZzLm5vdFNjYXJ5ICYmDQogICAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPj0gMSAmJg0KICAgICAgICAgICAgR2FtZS5wbGVkZ2VzID4gMCAmJg0KICAgICAgICAgICAgR2FtZS5lbGRlcldyYXRoID09IDANCiAgICAgICAgICApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICI8cT4iICsNCiAgICAgICAgICAgICAgICBjaG9vc2UobG9jKCJUaWNrZXIgKGdyYW5kbWFzIHJldHVybikiKSkgKw0KICAgICAgICAgICAgICAgICI8L3E+PHNpZz4iICsNCiAgICAgICAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5zaW5nbGUgKw0KICAgICAgICAgICAgICAgICI8L3NpZz4iDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKCFFTikgew0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICAgICAgaWYgKGkgIT0gIkN1cnNvciIgJiYgaSAhPSAiR3JhbmRtYSIgJiYgR2FtZS5PYmplY3RzW2ldLmFtb3VudCA+IDApDQogICAgICAgICAgICAgICAgbGlzdC5wdXNoKE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKCIgKyBpICsgIikiKSkpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoR2FtZS5jb29raWVzRWFybmVkID49IDEwMDApIHsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJoYWxsb3dlZW4iKQ0KICAgICAgICAgICAgICAgIGxpc3QucHVzaChORVdTICsgY2hvb3NlKGxvYygiVGlja2VyIChIYWxsb3dlZW4pIikpKTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJjaHJpc3RtYXMiKQ0KICAgICAgICAgICAgICAgIGxpc3QucHVzaChORVdTICsgY2hvb3NlKGxvYygiVGlja2VyIChDaHJpc3RtYXMpIikpKTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJ2YWxlbnRpbmVzIikNCiAgICAgICAgICAgICAgICBsaXN0LnB1c2goTkVXUyArIGNob29zZShsb2MoIlRpY2tlciAoVmFsZW50aW5lcykiKSkpOw0KICAgICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImVhc3RlciIpDQogICAgICAgICAgICAgICAgbGlzdC5wdXNoKE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKEVhc3RlcikiKSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJGYXJtIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNvb2tpZSBmYXJtcyBzdXNwZWN0ZWQgb2YgZW1wbG95aW5nIHVuZGVjbGFyZWQgZWxkZXJseSB3b3JrZm9yY2UhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY29va2llIGZhcm1zIHJlbGVhc2UgaGFybWZ1bCBjaG9jb2xhdGUgaW4gb3VyIHJpdmVycywgc2F5cyBzY2llbnRpc3QhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZ2VuZXRpY2FsbHktbW9kaWZpZWQgY2hvY29sYXRlIGNvbnRyb3ZlcnN5IHN0cmlrZXMgY29va2llIGZhcm1lcnMhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZnJlZS1yYW5nZSBmYXJtIGNvb2tpZXMgcG9wdWxhciB3aXRoIHRvZGF5J3MgaGlwIHlvdXRoLCBzYXlzIHNwZWNpYWxpc3QuIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZmFybSBjb29raWVzIGRlZW1lZCB1bmZpdCBmb3IgdmVnYW5zLCBzYXlzIG51dHJpdGlvbmlzdC4iLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIk1pbmUiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogaXMgb3VyIHBsYW5ldCBnZXR0aW5nIGxpZ2h0ZXI/IEV4cGVydHMgZXhhbWluZSB0aGUgZWZmZWN0cyBvZiBpbnRlbnNpdmUgY2hvY29sYXRlIG1pbmluZy4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiAiICsNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCArIDIpICsNCiAgICAgICAgICAgICAgICAgICAgIiBtaW5lcnMgdHJhcHBlZCBpbiBjb2xsYXBzZWQgY2hvY29sYXRlIG1pbmUhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY2hvY29sYXRlIG1pbmVzIGZvdW5kIHRvIGNhdXNlIGVhcnRocXVha2VzIGFuZCBzaW5raG9sZXMhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY2hvY29sYXRlIG1pbmUgZ29lcyBhd3J5LCBmbG9vZHMgdmlsbGFnZSBpbiBjaG9jb2xhdGUhIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogZGVwdGhzIG9mIGNob2NvbGF0ZSBtaW5lcyBmb3VuZCB0byBob3VzZSAicGVjdWxpYXIsIGNob2NvbGF0eSBiZWluZ3MiIScsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRmFjdG9yeSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWUgZmFjdG9yaWVzIGxpbmtlZCB0byBnbG9iYWwgd2FybWluZyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWUgZmFjdG9yaWVzIGludm9sdmVkIGluIGNob2NvbGF0ZSB3ZWF0aGVyIGNvbnRyb3ZlcnN5ISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNvb2tpZSBmYWN0b3JpZXMgb24gc3RyaWtlLCByb2JvdGljIG1pbmlvbnMgZW1wbG95ZWQgdG8gcmVwbGFjZSB3b3JrZm9yY2UhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY29va2llIGZhY3RvcmllcyBvbiBzdHJpa2UgLSB3b3JrZXJzIGRlbWFuZCB0byBzdG9wIGJlaW5nIHBhaWQgaW4gY29va2llcyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBmYWN0b3J5LW1hZGUgY29va2llcyBsaW5rZWQgdG8gb2Jlc2l0eSwgc2F5cyBzdHVkeS4iLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkJhbmsiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY29va2llIGxvYW5zIG9uIHRoZSByaXNlIGFzIHBlb3BsZSBjYW4gbm8gbG9uZ2VyIGFmZm9yZCB0aGVtIHdpdGggcmVndWxhciBtb25leS4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWVzIHNsb3dseSBjcmVlcGluZyB1cCB0aGVpciB3YXkgYXMgYSBjb21wZXRpdG9yIHRvIHRyYWRpdGlvbmFsIGN1cnJlbmN5ISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG1vc3QgYmFrZXJpZXMgbm93IGZpdHRlZCB3aXRoIEFUTXMgdG8gYWxsb3cgZm9yIGVhc3kgY29va2llIHdpdGhkcmF3YWxzIGFuZCBkZXBvc2l0cy4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWUgZWNvbm9teSBub3cgc3Ryb25nIGVub3VnaCB0byBhbGxvdyBmb3IgbWFzc2l2ZSB2YXVsdHMgZG91YmxpbmcgYXMgc3dpbW1pbmcgcG9vbHMhIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogIlRvbW9ycm93XCdzIHdlYWx0aGllc3QgcGVvcGxlIHdpbGwgYmUgY2FsY3VsYXRlZCBieSB0aGVpciB3b3J0aCBpbiBjb29raWVzIiwgcHJlZGljdCBlY29ub21pc3RzLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siVGVtcGxlIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGV4cGxvcmVycyBicmluZyBiYWNrIGFuY2llbnQgYXJ0aWZhY3QgZnJvbSBhYmFuZG9uZWQgdGVtcGxlOyBhcmNoZW9sb2dpc3RzIG1hcnZlbCBhdCB0aGUgY2VudHVyaWVzLW9sZCAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAibWFnaWMiLA0KICAgICAgICAgICAgICAgICAgICAgICJjYXJ2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICJlbmdyYXZlZCIsDQogICAgICAgICAgICAgICAgICAgICAgInNjdWxwdGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAicm95YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICJpbXBlcmlhbCIsDQogICAgICAgICAgICAgICAgICAgICAgIm11bW1pZmllZCIsDQogICAgICAgICAgICAgICAgICAgICAgInJpdHVhbCIsDQogICAgICAgICAgICAgICAgICAgICAgImdvbGRlbiIsDQogICAgICAgICAgICAgICAgICAgICAgInNpbHZlciIsDQogICAgICAgICAgICAgICAgICAgICAgInN0b25lIiwNCiAgICAgICAgICAgICAgICAgICAgICAiY3Vyc2VkIiwNCiAgICAgICAgICAgICAgICAgICAgICAicGxhc3RpYyIsDQogICAgICAgICAgICAgICAgICAgICAgImJvbmUiLA0KICAgICAgICAgICAgICAgICAgICAgICJibG9vZCIsDQogICAgICAgICAgICAgICAgICAgICAgImhvbHkiLA0KICAgICAgICAgICAgICAgICAgICAgICJzYWNyZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICJzYWNyaWZpY2lhbCIsDQogICAgICAgICAgICAgICAgICAgICAgImVsZWN0cm9uaWMiLA0KICAgICAgICAgICAgICAgICAgICAgICJzaW5naW5nIiwNCiAgICAgICAgICAgICAgICAgICAgICAidGFwZGFuY2luZyIsDQogICAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAic3Bvb24iLA0KICAgICAgICAgICAgICAgICAgICAgICJmb3JrIiwNCiAgICAgICAgICAgICAgICAgICAgICAicGl6emEiLA0KICAgICAgICAgICAgICAgICAgICAgICJ3YXNoaW5nIG1hY2hpbmUiLA0KICAgICAgICAgICAgICAgICAgICAgICJjYWxjdWxhdG9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaGF0IiwNCiAgICAgICAgICAgICAgICAgICAgICAicGlhbm8iLA0KICAgICAgICAgICAgICAgICAgICAgICJuYXBraW4iLA0KICAgICAgICAgICAgICAgICAgICAgICJza2VsZXRvbiIsDQogICAgICAgICAgICAgICAgICAgICAgImdvd24iLA0KICAgICAgICAgICAgICAgICAgICAgICJkYWdnZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJzd29yZCIsDQogICAgICAgICAgICAgICAgICAgICAgInNoaWVsZCIsDQogICAgICAgICAgICAgICAgICAgICAgInNrdWxsIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZW1lcmFsZCIsDQogICAgICAgICAgICAgICAgICAgICAgImJhdGh0dWIiLA0KICAgICAgICAgICAgICAgICAgICAgICJtYXNrIiwNCiAgICAgICAgICAgICAgICAgICAgICAicm9sbGVyc2thdGVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAibGl0dGVyYm94IiwNCiAgICAgICAgICAgICAgICAgICAgICAiYmFpdCBib3giLA0KICAgICAgICAgICAgICAgICAgICAgICJjdWJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAic3BoZXJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZnVuZ3VzIiwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHJlY2VudGx5LWRpc2NvdmVyZWQgY2hvY29sYXRlIHRlbXBsZXMgbm93IHNwYXJraW5nIG5ldyBjb29raWUtcmVsYXRlZCBjdWx0OyB0aG91c2FuZHMgcHJheSB0byBCYWtlciBpbiB0aGUgc2t5ISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGp1c3QgaG93IGV4dGVuc2l2ZSBpcyB0aGUgY29va2llIHBhbnRoZW9uPyBUaGVvbG9naWFucyBzcGVjdWxhdGUgYWJvdXQgcG9zc2libGUgIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShbImdvZCIsICJnb2RkZXNzIl0pICsNCiAgICAgICAgICAgICAgICAgICAgIiBvZiAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICBjaG9vc2UoYW5pbWFscyksDQogICAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAgICJrYXpvb3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndlYiBkZXNpZ24iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndlYiBicm93c2VycyIsDQogICAgICAgICAgICAgICAgICAgICAgICAia2l0dGVucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYXRoZWlzbSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaGFuZGJyYWtlcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaGF0cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWdsZXRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJlbGV2YXRvciBtdXNpYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaWRsZSBnYW1lcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAndGhlIGxldHRlciAiUCInLA0KICAgICAgICAgICAgICAgICAgICAgICAgIm1lbWVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJoYW1idXJnZXJzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWQgcHVucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAia2VybmluZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAic3RhbmQtdXAgY29tZWR5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJmYWlsZWQgYnVyZ2xhcnkgYXR0ZW1wdHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImNsaWNrYmFpdCIsDQogICAgICAgICAgICAgICAgICAgICAgICAib25lIHdlaXJkIHRyaWNrcyIsDQogICAgICAgICAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICAgIi4iLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiB0aGVpc3RzIG9mIHRoZSB3b3JsZCBkaXNjb3ZlciBuZXcgY29va2llIHJlbGlnaW9uIC0gIk9oIGJveSwgZ3Vlc3Mgd2Ugd2VyZSB3cm9uZyBhbGwgYWxvbmchIicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGNvb2tpZSBoZWF2ZW4gYWxsZWdlZGx5ICJzcG9ydHMgZWxldmF0b3IgaW5zdGVhZCBvZiBzdGFpcndheSI7IGNvb2tpZSBoZWxsICJwYXZlZCB3aXRoIGZsYWdzdG9uZSwgYXMgZ29vZCBpbnRlbnRpb25zIG1ha2UgZm9yIHBvb3IgYnVpbGRpbmcgbWF0ZXJpYWwiLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siV2l6YXJkIHRvd2VyIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGFsbCAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICBjaG9vc2UoYW5pbWFscyksDQogICAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAgICJwdWJsaWMgcmVzdHJvb21zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJjbG91ZHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInBvbGl0aWNpYW5zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJtb3VzdGFjaGVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJoYXRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJzaG9lcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAicGFudHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImNsb3ducyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiZW5jeWNsb3BlZGlhcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2Vic2l0ZXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInBvdHRlZCBwbGFudHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImxlbW9ucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaG91c2Vob2xkIGl0ZW1zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJib2RpbHkgZmx1aWRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJjdXRsZXJ5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJuYXRpb25hbCBsYW5kbWFya3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInlvZ3VydCIsDQogICAgICAgICAgICAgICAgICAgICAgICAicmFwIG11c2ljIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJ1bmRlcndlYXIiLA0KICAgICAgICAgICAgICAgICAgICAgIF0pLA0KICAgICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAgICIgdHVybmVkIGludG8gIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgY2hvb3NlKGFuaW1hbHMpLA0KICAgICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgICAicHVibGljIHJlc3Ryb29tcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiY2xvdWRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJwb2xpdGljaWFucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAibW91c3RhY2hlcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaGF0cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAic2hvZXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInBhbnRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJjbG93bnMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImVuY3ljbG9wZWRpYXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndlYnNpdGVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJwb3R0ZWQgcGxhbnRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJsZW1vbnMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImhvdXNlaG9sZCBpdGVtcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYm9kaWx5IGZsdWlkcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiY3V0bGVyeSIsDQogICAgICAgICAgICAgICAgICAgICAgICAibmF0aW9uYWwgbGFuZG1hcmtzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJ5b2d1cnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInJhcCBtdXNpYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAidW5kZXJ3ZWFyIiwNCiAgICAgICAgICAgICAgICAgICAgICBdKSwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiIGluIGZyZWFrIG1hZ2ljIGNhdGFzdHJvcGhlISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGhlYXZ5IGRpc3NlbnQgcmFnZXMgYmV0d2VlbiB0aGUgc2Nob29scyBvZiAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAid2F0ZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJmaXJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZWFydGgiLA0KICAgICAgICAgICAgICAgICAgICAgICJhaXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJsaWdodG5pbmciLA0KICAgICAgICAgICAgICAgICAgICAgICJhY2lkIiwNCiAgICAgICAgICAgICAgICAgICAgICAic29uZyIsDQogICAgICAgICAgICAgICAgICAgICAgImJhdHRsZSIsDQogICAgICAgICAgICAgICAgICAgICAgInBlYWNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicGVuY2lsIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaW50ZXJuZXQiLA0KICAgICAgICAgICAgICAgICAgICAgICJzcGFjZSIsDQogICAgICAgICAgICAgICAgICAgICAgInRpbWUiLA0KICAgICAgICAgICAgICAgICAgICAgICJicmFpbiIsDQogICAgICAgICAgICAgICAgICAgICAgIm5hdHVyZSIsDQogICAgICAgICAgICAgICAgICAgICAgInRlY2hubyIsDQogICAgICAgICAgICAgICAgICAgICAgInBsYW50IiwNCiAgICAgICAgICAgICAgICAgICAgICAiYnVnIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaWNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicG9pc29uIiwNCiAgICAgICAgICAgICAgICAgICAgICAiY3JhYiIsDQogICAgICAgICAgICAgICAgICAgICAgImtpdHRlbiIsDQogICAgICAgICAgICAgICAgICAgICAgImRvbHBoaW4iLA0KICAgICAgICAgICAgICAgICAgICAgICJiaXJkIiwNCiAgICAgICAgICAgICAgICAgICAgICAicHVuY2giLA0KICAgICAgICAgICAgICAgICAgICAgICJmYXJ0IiwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiIG1hZ2ljIGFuZCAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAid2F0ZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJmaXJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZWFydGgiLA0KICAgICAgICAgICAgICAgICAgICAgICJhaXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJsaWdodG5pbmciLA0KICAgICAgICAgICAgICAgICAgICAgICJhY2lkIiwNCiAgICAgICAgICAgICAgICAgICAgICAic29uZyIsDQogICAgICAgICAgICAgICAgICAgICAgImJhdHRsZSIsDQogICAgICAgICAgICAgICAgICAgICAgInBlYWNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicGVuY2lsIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaW50ZXJuZXQiLA0KICAgICAgICAgICAgICAgICAgICAgICJzcGFjZSIsDQogICAgICAgICAgICAgICAgICAgICAgInRpbWUiLA0KICAgICAgICAgICAgICAgICAgICAgICJicmFpbiIsDQogICAgICAgICAgICAgICAgICAgICAgIm5hdHVyZSIsDQogICAgICAgICAgICAgICAgICAgICAgInRlY2hubyIsDQogICAgICAgICAgICAgICAgICAgICAgInBsYW50IiwNCiAgICAgICAgICAgICAgICAgICAgICAiYnVnIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaWNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicG9pc29uIiwNCiAgICAgICAgICAgICAgICAgICAgICAiY3JhYiIsDQogICAgICAgICAgICAgICAgICAgICAgImtpdHRlbiIsDQogICAgICAgICAgICAgICAgICAgICAgImRvbHBoaW4iLA0KICAgICAgICAgICAgICAgICAgICAgICJiaXJkIiwNCiAgICAgICAgICAgICAgICAgICAgICAicHVuY2giLA0KICAgICAgICAgICAgICAgICAgICAgICJmYXJ0IiwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiIG1hZ2ljISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGdldCB5b3VyIG5ldyBjaGFybXMgYW5kIGN1cnNlcyBhdCB0aGUgeWVhcmx5IE5hdGlvbmFsIFNwZWxsY3JhZnRpbmcgRmFpciEgRXhjbHVzaXZlIHByaWNlcyBvbiBydW5lcyBhbmQgc3BlbGxib29rcy4iLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBjb29raWUgd2l6YXJkcyBkZW55IGludm9sdmVtZW50IGluIHNob2NraW5nbHkgdWdseSBuZXdib3JuIC0gaW5mYW50IGlzICJob25lc3RseSBncm9keS1sb29raW5nLCBidXQgbmF0dXJhbCIsIHNheSBkb2N0b3JzLicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6ICJBbnkgc3VmZmljaWVudGx5IGNydWRlIG1hZ2ljIGlzIGluZGlzdGluZ3Vpc2hhYmxlIGZyb20gdGVjaG5vbG9neSIsIGNsYWltcyByZW5vd25lZCB0ZWNobm93aXphcmQuJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJTaGlwbWVudCJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBuZXcgY2hvY29sYXRlIHBsYW5ldCBmb3VuZCwgYmVjb21lcyB0YXJnZXQgb2YgY29va2llLXRyYWRpbmcgc3BhY2VzaGlwcyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBtYXNzaXZlIGNob2NvbGF0ZSBwbGFuZXQgZm91bmQgd2l0aCA5OS44JSBjZXJ0aWZpZWQgcHVyZSBkYXJrIGNob2NvbGF0ZSBjb3JlISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHNwYWNlIHRvdXJpc20gYm9vbWluZyBhcyBkaXN0YW50IHBsYW5ldHMgYXR0cmFjdCBtb3JlIGJvcmVkIG1pbGxpb25haXJlcyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjaG9jb2xhdGUtYmFzZWQgb3JnYW5pc21zIGZvdW5kIG9uIGRpc3RhbnQgcGxhbmV0ISIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGFuY2llbnQgYmFraW5nIGFydGlmYWN0cyBmb3VuZCBvbiBkaXN0YW50IHBsYW5ldDsgInRlcnJpZnlpbmcgaW1wbGljYXRpb25zIiwgZXhwZXJ0cyBzYXkuJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJBbGNoZW15IGxhYiJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBuYXRpb25hbCBnb2xkIHJlc2VydmVzIGR3aW5kbGUgYXMgbW9yZSBhbmQgbW9yZSBvZiB0aGUgcHJlY2lvdXMgbWluZXJhbCBpcyB0dXJuZWQgdG8gY29va2llcyEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBjaG9jb2xhdGUgamV3ZWxyeSBmb3VuZCBmYXNoaW9uYWJsZSwgZ29sZCBhbmQgZGlhbW9uZHMgImp1c3QgYSBmYWQiLCBzYXlzIHNwZWNpYWxpc3QuJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogc2lsdmVyIGZvdW5kIHRvIGFsc28gYmUgdHJhbnNtdXRhYmxlIGludG8gd2hpdGUgY2hvY29sYXRlISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGRlZmVjdGl2ZSBhbGNoZW15IGxhYiBzaHV0IGRvd24sIGZvdW5kIHRvIGNvbnZlcnQgY29va2llcyB0byB1c2VsZXNzIGdvbGQuIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogYWxjaGVteS1tYWRlIGNvb2tpZXMgc2h1bm5lZCBieSBwdXJpc3RzISIsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siUG9ydGFsIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG5hdGlvbiB3b3JyaWVkIGFzIG1vcmUgYW5kIG1vcmUgdW5zZXR0bGluZyBjcmVhdHVyZXMgZW1lcmdlIGZyb20gZGltZW5zaW9uYWwgcG9ydGFscyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBkaW1lbnNpb25hbCBwb3J0YWxzIGludm9sdmVkIGluIGNpdHktZW5ndWxmaW5nIGRpc2FzdGVyISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHRvdXJpc20gdG8gY29va2lldmVyc2UgcG9wdWxhciB3aXRoIGJvcmVkIHRlZW5hZ2VycyEgQ2FzdWFsdHkgcmF0ZSBhcyBoaWdoIGFzIDczJSEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWV2ZXJzZSBwb3J0YWxzIHN1c3BlY3RlZCB0byBjYXVzZSBmYXN0IGFnaW5nIGFuZCBvYnNlc3Npb24gd2l0aCBiYWtpbmcsIHNheXMgc3R1ZHkuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogImRvIG5vdCBzZXR0bGUgbmVhciBwb3J0YWxzLCIgc2F5cyBzcGVjaWFsaXN0OyAieW91ciBjaGlsZHJlbiB3aWxsIGJlY29tZSBzdHJhbmdlIGFuZCBjb3JydXB0ZWQgaW5zaWRlLiInLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIlRpbWUgbWFjaGluZSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiB0aW1lIG1hY2hpbmVzIGludm9sdmVkIGluIGhpc3RvcnktcmV3cml0aW5nIHNjYW5kYWwhIE9yIGFyZSB0aGV5PyIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHRpbWUgbWFjaGluZXMgdXNlZCBpbiB1bmxhd2Z1bCB0aW1lIHRvdXJpc20hIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogY29va2llcyBicm91Z2h0IGJhY2sgZnJvbSB0aGUgcGFzdCAidW5maXQgZm9yIGh1bWFuIGNvbnN1bXB0aW9uIiwgc2F5cyBoaXN0b3JpYW4uJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogdmFyaW91cyBoaXN0b3JpY2FsIGZpZ3VyZXMgaW5leHBsaWNhYmx5IHJlcGxhY2VkIHdpdGggdGFsa2luZyBsdW1wcyBvZiBkb3VnaCEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiAiSSBoYXZlIHNlZW4gdGhlIGZ1dHVyZSwiIHNheXMgdGltZSBtYWNoaW5lIG9wZXJhdG9yLCAiYW5kIEkgZG8gbm90IHdpc2ggdG8gZ28gdGhlcmUgYWdhaW4uIicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siQW50aW1hdHRlciBjb25kZW5zZXIiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogd2hvbGUgdG93biBzZWVtaW5nbHkgc3dhbGxvd2VkIGJ5IGFudGltYXR0ZXItaW5kdWNlZCBibGFjayBob2xlOyBtb3JlIHJlbGlhYmxlIHNvdXJjZXMgYWZmaXJtIHRvd24gIm5ldmVyIHJlYWxseSBleGlzdGVkIiEnLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiAiZXhwbGFpbiB0byBtZSBhZ2FpbiB3aHkgd2UgbmVlZCBwYXJ0aWNsZSBhY2NlbGVyYXRvcnMgdG8gYmFrZSBjb29raWVzPyIgYXNrcyBtaXNndWlkZWQgbG9jYWwgd29tYW4uJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZmlyc3QgYW50aW1hdHRlciBjb25kZW5zZXIgc3VjY2Vzc2Z1bGx5IHR1cm5lZCBvbiwgZG9lc24ndCByaXAgYXBhcnQgcmVhbGl0eSEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiByZXNlYXJjaGVycyBjb25jbHVkZSB0aGF0IHdoYXQgdGhlIGNvb2tpZSBpbmR1c3RyeSBuZWVkcywgZmlyc3QgYW5kIGZvcmVtb3N0LCBpcyAibW9yZSBtYWduZXRzIi4nLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiAidW5yYXZlbGxpbmcgdGhlIGZhYnJpYyBvZiByZWFsaXR5IGp1c3QgbWFrZXMgdGhlc2UgY29va2llcyBzbyBtdWNoIHRhc3RpZXIiLCBjbGFpbXMgc2NpZW50aXN0LicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siUHJpc20iXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbmV3IGNvb2tpZS1wcm9kdWNpbmcgcHJpc21zIGxpbmtlZCB0byBvdXRicmVhayBvZiByYWluYm93LXJlbGF0ZWQgdmlyYWwgdmlkZW9zLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IHNjaWVudGlzdHMgd2FybiBhZ2FpbnN0IHN5c3RlbWF0aWNhbGx5IHR1cm5pbmcgbGlnaHQgaW50byBtYXR0ZXIgLSAiT25lIGRheSwgd2VcJ2xsIGVuZCB1cCB3aXRoIGFsbCBtYXR0ZXIgYW5kIG5vIGxpZ2h0ISInLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWVzIG5vdyBiZWluZyBiYWtlZCBhdCB0aGUgbGl0ZXJhbCBzcGVlZCBvZiBsaWdodCB0aGFua3MgdG8gbmV3IHByaXNtYXRpYyBjb250cmFwdGlvbnMuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogIkNhblwndCB5b3Ugc2Vuc2UgdGhlIHByaXNtIHdhdGNoaW5nIHVzPyIsIHJhbWJsZXMgaW5zYW5lIGxvY2FsIG1hbi4gIk5vIGlkZWEgd2hhdCBoZVwncyB0YWxraW5nIGFib3V0Iiwgc2hydWdzIGNvb2tpZSBtYWduYXRlL2dvdmVybm1lbnQgb2ZmaWNpYWwuJywNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogd29ybGQgY2l0aXplbnMgYWR2aXNlZCAibm90IHRvIHdvcnJ5IiBhYm91dCBmcmVxdWVudCBhdG1vc3BoZXJpYyBmbGFzaGVzLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siQ2hhbmNlbWFrZXIiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogc3RyYW5nZSBzdGF0aXN0aWNhbCBhbm9tYWxpZXMgY29udGludWUgYXMgd2VhdGhlciBmb3JlY2FzdCBwcm92ZXMgYWNjdXJhdGUgYW4gdW5wcmVjZWRlbnRlZCAzIGRheXMgaW4gYSByb3chIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogbG9jYWwgY2FzaW5vIHJ1aW5lZCBhcyBhbGwgZ2FtYmxlcnMgc29tZWhvdyBoaXQgYSB3ZWVrLWxvbmcgd2lubmluZyBzdHJlYWshICJXZSBtaWdodCBzdGlsbCBiZSBva2F5Iiwgc2F5cyBvd25lciBiZWZvcmUgYmVpbmcgaGl0IGJ5IGxpZ2h0bmluZyA0NyB0aW1lcy4nLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBuZWlnaGJvcmluZyBuYXRpb24gc29tZWhvdyBlbGVjdHMgcHJlc2lkZW50IHdpdGggc2Vuc2libGUgcG9saWNpZXMgaW4gZnJlYWsgYWNjaWRlbnQgb2YgcmFuZG9tIGNoYW5jZSEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBtaWxsaW9uLXRvLW9uZSBldmVudCBzZWVzIGdyaXR0eSBtb3ZpZSByZWJvb3QgdHVybmluZyBvdXQgYmV0dGVyIHRoYW4gdGhlIG9yaWdpbmFsISAiV2UgaGF2ZSBubyBpZGVhIGhvdyB0aGlzIGhhcHBlbmVkIiwgc2F5IG1vdmllIGV4ZWNzLicsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGFsbCBzY3JhdGNoaW5nIHRpY2tldHMgcHJpbnRlZCBhcyB3aW5uZXJzLCBwcm9tcHRpbmcgbmF0aW9uYWwgZWNvbm9teSB0byBjcmFzaCBhbmQsIGFnYWluc3QgYWxsIG9kZHMsIHJlY292ZXIgb3Zlcm5pZ2h0LiIsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRnJhY3RhbCBlbmdpbmUiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogbG9jYWwgbWFuICJkb25lIHdpdGggQ29va2llIENsaWNrZXIiLCBmaW5kcyB0aGUgY29uc3RhbnQgc2VsZi1yZWZlcmVuY2VzICJncmF0aW5nIGFuZCBvbi10aGUtbm9zZSIuJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbG9jYWwgbWFuIHNhaWxzIGFyb3VuZCB0aGUgd29ybGQgdG8gZmluZCBoaW1zZWxmIC0gcmlnaHQgd2hlcmUgaGUgbGVmdCBpdC4iLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBsb2NhbCBndXJ1IGNsYWltcyAidGhlcmVcJ3MgYSBsaXR0bGUgYml0IG9mIG91cnNlbHZlcyBpbiBldmVyeW9uZSIsIHVuZGVyIGludmVzdGlnYXRpb24gZm9yIGFsbGVnZWQgY2FubmliYWxpc20uJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbmV3cyB3cml0ZXIgZmluZHMgaGVyc2VsZiBkYXlkcmVhbWluZyBhYm91dCBuZXcgY2FyZWVyLiBPciBhdCBsZWFzdCBhIHJhaXNlLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IHBvbGxzIGZpbmQgaWRlYSBvZiBjb29raWVzIG1hZGUgb2YgY29va2llcyAiYWNjZXB0YWJsZSIgLSAiYXQgbGVhc3Qgd2UgZmluYWxseSBrbm93IHdoYXRcJ3MgaW4gdGhlbSIsIHNheXMgaW50ZXJ2aWV3ZWQgY2l0aXplbi4nLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkphdmFzY3JpcHQgY29uc29sZSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBzdHJhbmdlIGZhZCBoYXMgcGFyZW50cyBnaXZpbmcgdGhlaXIgbmV3Ym9ybnMgbmFtZXMgc3VjaCBhcyBFbW1hLmpzIG9yIExpYW0uanMuIEF0IGxlYXN0IG9uZSBCYWJ5LmpzIHJlcG9ydGVkLiIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNvZGluZyBpcyBoaXAhIE1vcmUgYW5kIG1vcmUgdGVlbmFnZXJzIHR1cm4gdG8gdGVjaG5pY2FsIGZpZWxkcyBsaWtlIHByb2dyYW1taW5nLCBlbnN1cmluZyBhIGZ1dHVyZSByb2JvdCBhcG9jYWx5cHNlIGFuZCB0aGUgZG9vbSBvZiBhbGwgbWFua2luZC4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBkZXZlbG9wZXJzIHVuc3VyZSB3aGF0IHRvIGNhbGwgdGhlaXIgbmV3IGphdmFzY3JpcHQgbGlicmFyaWVzIGFzIGFsbCBjb21iaW5hdGlvbnMgb2YgYW55IDMgZGljdGlvbmFyeSB3b3JkcyBoYXZlIGFscmVhZHkgYmVlbiB0YWtlbi4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBuYXRpb24gaG9sZHMgYnJlYXRoIGFzIG5lc3RlZCBpZnMgYWJvdXQgdG8gaGF0Y2guIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogY2x1ZWxlc3MgY29weXdyaXRlciBmb3JnZXRzIHRvIGVzY2FwZSBhIHF1b3RlLCBlbmRzIG5ld3MgbGluZSBwcmVtYXR1cmVseTsgbGFzdCB3b3JkcyByZXBvcnRlZCB0byBiZSAiSHVoLCB3aHkgaXNuJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJJZGxldmVyc2UiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogaXMgYW5vdGhlciB5b3UgbGl2aW5nIG91dCB0aGVpciBkcmVhbXMgaW4gYW4gYWx0ZXJuYXRlIHVuaXZlcnNlPyBQcm9iYWJseSwgeW91IGxhenkgYnVtISIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IHB1YmxpYyByZWNvaWxzIGF0IHRoZSBub3Rpb24gb2YgYSBjb3Ntb3MgbWFkZSBvZiBpbmZpbml0ZSBpZGxlIGdhbWVzLiAiSSBraW5kYSBob3BlZCB0aGVyZVwnZCBiZSBtb3JlIHRvIGl0Iiwgc2F5cyBkaXN0cmF1Z2h0IGNpdGl6ZW4uJywNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogd2l0aCBhbiBpbmZpbml0eSBvZiBwYXJhbGxlbCB1bml2ZXJzZXMsIHBlb3BsZSB0dXJuIHRvIHJlYXNzdXJpbmcgYWx0ZXJuYXRlIGRpbWVuc2lvbnMsIHdoaWNoIG9ubHkgbnVtYmVyICJpbiB0aGUgaGlnaCA1MHMiLicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6ICJJIGZpbmQgc29sYWNlIGluIHRoZSBrbm93bGVkZ2UgdGhhdCBhdCBsZWFzdCBzb21lIG9mIG15IGFsdGVybmF0ZSBzZWx2ZXMgYXJlIHByb2JhYmx5IGRvaW5nIGZpbmUgb3V0IHRoZXJlIiwgc2F5cyBjaXRpemVuXCdzIGxhc3QgcmVtYWluaW5nIGV4ZW1wbGFyIGluIHRoZSBtdWx0aXZlcnNlLicsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNvbWljIGJvb2sgd3JpdGVycyBwb2ludCB0byBhY3R1YWwgbXVsdGl2ZXJzZSBpbiBkZWZlbnNlIG9mIGR1YmlvdXMgcGxvdCBwb2ludHMuIFwiU2VlPyBJIHRvbGQgeW91IGl0IHdhc24ndCAnaGFja25leWVkIGFuZCBjb250cml2ZWQnIVwiIiwNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJDb3J0ZXggYmFrZXIiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY29ydGV4IGJha2VyIHdyYW5nbGVycyBraW5kbHkgcmVtaW5kIGVtcGxveWVlcyB0aGF0IGNvcnRleCBiYWtlcnMgYXJlIHRoZSBiYWtlcnkncyBtYXRlcmlhbCBwcm9wZXJ0eSBhbmQgc2hvdWxkIG5vdCBiZSBlbmRlYXJlZCB3aXRoIG5pY2tuYW1lcy4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBzcGFjZS1mYXJpbmcgZW1wbG95ZWVzIGFkdmlzZWQgdG8gaWdub3JlIHVudXN1YWwgdGhvdWdodHMgYW5kIHVyZ2VzIGV4cGVyaWVuY2VkIHdpdGhpbiAyIHBhcnNlY3Mgb2YgZ2lnYW50aWMgY29ydGV4IGJha2Vycywgc2F5IGd1aWRlbGluZXMuIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogYXN0cm9ub21lcnMgd2FybiBvZiBjb3J0ZXggYmFrZXIgdHJhamVjdG9yeSBkcmlmdCwgZmVhciBmdXR1cmUgaGVhZC1vbiBjb2xsaXNpb25zIHJlc3VsdGluZyBpbiBjb3N0bHkgY29uY3Vzc2lvbnMuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogcnVudCBjb3J0ZXggYmFrZXIgaWRlbnRpZmllZCB3aXRoIGFuIElRIG9mIG9ubHkgcXVpbnR1cGxlIGRpZ2l0czogImp1c3QgYSBiaXQgb2YgYSBkdW1teSIsIHNheSBzcGVjaWFsaXN0cy4nLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBhcmUgeW91IHNtYXJ0ZXIgdGhhbiBhIGNvcnRleCBiYWtlcj8gTmV3IGdhbWUgc2hvdyBkZWVtZWQgInVuZmFpciIgYnkgY29udGVzdGFudHMuJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImhhbGxvd2VlbiIgJiYgR2FtZS5jb29raWVzRWFybmVkID49IDEwMDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBzdHJhbmdlIHR3aXN0aW5nIGNyZWF0dXJlcyBhbWFzcyBhcm91bmQgY29va2llIGZhY3RvcmllcywgbmliYmxlIGF0IGFzc2VtYmx5IGxpbmVzLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IG9taW5vdXMgd3JpbmtseSBtb25zdGVycyB0YWtlIG1hc3NpdmUgYml0ZXMgb3V0IG9mIGNvb2tpZSBwcm9kdWN0aW9uOyAidGhpcyBjYW5cJ3QgYmUgaHlnaWVuaWMiLCB3b3JyaWVzIHdvcmtlci4nLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBwYWdhbiByaXR1YWxzIG9uIHRoZSByaXNlIGFzIGNoaWxkcmVuIGFyb3VuZCB0aGUgd29ybGQgZHJlc3MgdXAgaW4gc3RyYW5nZSBjb3N0dW1lcyBhbmQgYmxhY2ttYWlsIGhvbWVvd25lcnMgZm9yIGNhbmR5LiIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG5ldy1hZ2UgdGVycm9yaXNtIHN0cmlrZXMgc3VidXJicyBhcyBob3VzZXMgZmluZCB0aGVtc2VsdmVzIGNvdmVyZWQgaW4gZWdncyBhbmQgdG9pbGV0IHBhcGVyLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGNoaWxkcmVuIGFyb3VuZCB0aGUgd29ybGQgImxvc3QgYW5kIGNvbmZ1c2VkIiBhcyBhbnkgYW5kIGFsbCBIYWxsb3dlZW4gdHJlYXRzIGhhdmUgYmVlbiByZXBsYWNlZCBieSBjb29raWVzLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJjaHJpc3RtYXMiICYmIEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogYmVhcmRlZCBtYW5pYWMgc3BvdHRlZCBzcGVlZGluZyBvbiBmbHlpbmcgc2xlaWdoISBJbnZlc3RpZ2F0aW9uIHBlbmRpbmcuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogU2FudGEgQ2xhdXMgYW5ub3VuY2VzIG5ldyBicmFuZCBvZiBicmVha2Zhc3QgdHJlYXRzIHRvIGNvbXBldGUgd2l0aCBjb29raWUtZmxhdm9yZWQgY2VyZWFscyEgIlRoZXlcJ3JlIGhvLWhvLWhvcnJpYmxlISIgc2F5cyBTYW50YS4nLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiAiWW91IG1lYW4gaGUganVzdCBnaXZlcyBzdHVmZiBhd2F5IGZvciBmcmVlPyEiLCBjb25jZXJuZWQgbW9tcyBhc2suICJQZXJzb25hbGx5LCBJIGRvblwndCB0cnVzdCBoaXMgYmVhcmQuIicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IG9iZXNlIGpvbGx5IGx1bmF0aWMgc3RpbGwgb24gdGhlIGxvb3NlLCB3YXJuIG9mZmljaWFscy4gIktlZXAgeW91ciBraWRzIHNhZmUgYW5kIGJvYXJkIHVwIHlvdXIgY2hpbW5leXMuIFdlIG1lYW4gaXQuIicsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNoaWxkcmVuIHNob2NrZWQgYXMgdGhleSBkaXNjb3ZlciBTYW50YSBDbGF1cyBpc24ndCBqdXN0IHRoZWlyIGRhZCBpbiBhIGNvc3R1bWUgYWZ0ZXIgYWxsITxicj5cIkknbSByZWFzc2Vzc2luZyBteSBsaWZlIHJpZ2h0IG5vd1wiLCBjb25maWRlcyBMYXVyYSwgYWdlZCA2LiIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG15c3RlcmlvdXMgZmVzdGl2ZSBlbnRpdHkgd2l0aCBxdWFudHVtIHBvd2VycyBzdGlsbCB3cmVja2luZyBoYXZvYyB3aXRoIGFybXkgb2YgcmVpbmRlZXIsIG9mZmljaWFscyBzYXkuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogZWx2ZXMgb24gc3RyaWtlIGF0IHRveSBmYWN0b3J5ISAiV2Ugd2lsbCBub3QgYmUgYWNjZXB0aW5nIHJlaW5kZWVyIGNob3cgYXMgcGF5bWVudCBhbnltb3JlLiBBbmQgc3RvcCBjYWxsaW5nIHVzIGVsdmVzISInLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBlbHZlcyBwcm90ZXN0IGFyb3VuZCB0aGUgbmF0aW9uOyB3ZWUgbGl0dGxlIGZvbGtzIGluIHNpbGx5IGxpdHRsZSBvdXRmaXRzIHNwcmVhZCBtYXloZW0sIGRlc3RydWN0aW9uOyByYWJpZCByZWluZGVlciBydW5uaW5nIHJhbXBhbnQgdGhyb3VnaCBzdHJlZXRzLiIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHNjaG9sYXJzIGRlYmF0ZSByZWdhcmRpbmcgdGhlIHBsdXJhbCBvZiByZWluZGVlcihzKSBpbiB0aGUgbWlkc3Qgb2YgZWx2ZW4gd29ybGQgd2FyLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGVsdmVzICJ1bnJlbGF0ZWQgdG8gZ25vbWVzIGRlc3BpdGUgc21hbGwgc3RhdHVyZSBhbmQgbWVycnkgZGlzcG9zaXRpb24iLCBmaW5kIHNjaWVudGlzdHMuJywNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogZWx2ZXMgc2Fib3RhZ2UgcmFkaW9hY3RpdmUgZnJvc3RpbmcgZmFjdG9yeSwgdHVybiBodW5kcmVkcyBibGluZCBpbiB2aWNpbml0eSAtICJXaG8gaW4gdGhlaXIgcmlnaHQgbWluZCB3b3VsZCBkbyBzdWNoIGEgdGhpbmc/IiBsYW1lbnRzIG91dHJhZ2VkIG1heW9yLicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGRyYW1hIHVuZm9sZHMgYXQgTm9ydGggUG9sZSBhcyBydW1vcnMgY3JvcCB1cCBhcm91bmQgUnVkb2xwaFwncyByZWQgbm9zZTsgIkkgbWF5IGhhdmUgYW4gYWRkaWN0aW9uIG9yIHR3byIsIGFkbWl0cyByZWluZGVlci4nLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAidmFsZW50aW5lcyIgJiYgR2FtZS5jb29raWVzRWFybmVkID49IDEwMDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBvcmdhbi1zaGFwZWQgY29uZmVjdGlvbmVyaWVzIGJlaW5nIHRyYWRlZCBpbiBzY2hvb2xzIGFsbCBvdmVyIHRoZSB3b3JsZDsgZ3J1ZXNvbWUgcHJhY3RpY2UgdW5kZXJnb2luZyBpbnZlc3RpZ2F0aW9uLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGhlYXJ0LXNoYXBlZCBjYW5kaWVzIG92ZXJ0YWtpbmcgc3dlZXRzIGJ1c2luZXNzLCBvZmZlcmluZyBjb21wZXRpdGlvbiB0byBjb29raWUgZW1waXJlLiAiSXRcJ3MgdGhlIGVjb25vbXksIGN1cGlkISInLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBsb3ZlJ3MgaW4gdGhlIGFpciwgYWNjb3JkaW5nIHRvIHdlYXRoZXIgc3BlY2lhbGlzdHMuIEZhY2UgbWFza3Mgbm93IG9mZmVyZWQgaW4gZXZlcnkgY2l0eSB0byBzdHVudCBhaXJib3JuZSBpbmZlY3Rpb24uIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbWFycnlpbmcgYSBjb29raWUgLSBkZXJhbmdlZCBwcmFjdGljZSwgb3IgZ2xpbXBzZSBvZiB0aGUgZnV0dXJlPyIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGJveWZyaWVuZCBkdW1wZWQgYWZ0ZXIgb2ZmZXJpbmcgaGlzIGxvdmVyIGNvb2tpZXMgZm9yIFZhbGVudGluZVwncyBEYXksIHJlcG9ydHMgc2F5LiAiVGhleSB3ZXJlIG9mZi1icmFuZCIsIHNocnVncyBleC1naXJsZnJpZW5kLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJlYXN0ZXIiICYmIEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbG9uZy1lYXJlZCBjcml0dGVycyB3aXRoIGZ1enp5IHRhaWxzIGludmFkZSBzdWJ1cmJzLCBzcHJlYWQgdGVycm9yIGFuZCBjaG9jb2xhdGUhIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogZWdncyBoYXZlIGJlZ3VuIHRvIG1hdGVyaWFsaXplIGluIHRoZSBtb3N0IHVuZXhwZWN0ZWQgcGxhY2VzOyAibm8gcGxhY2UgaXMgc2FmZSIsIHdhcm4gZXhwZXJ0cy4nLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBwYWNrcyBvZiByYW1wYWdpbmcgcmFiYml0cyBjYXVzZSBiaWxsaW9ucyBpbiBwcm9wZXJ0eSBkYW1hZ2U7IG5ldyBzdHJhaW4gb2YgbXl4b21hdG9zaXMgYmVpbmcgZGV2ZWxvcGVkLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGVnZy1sYXlpbmcgcmFiYml0cyAibm90IHF1aXRlIGZyb20gdGhpcyBkaW1lbnNpb24iLCB3YXJucyBiaW9sb2dpc3Q7IGFkdmlzZXMgYWdhaW5zdCBwZXR0aW5nLCBmZWVkaW5nLCBvciBjb29raW5nIHRoZSBjcmVhdHVyZXMuJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbXlzdGVyaW91cyByYWJiaXRzIGZvdW5kIHRvIGJlIGVnZy1sYXllcnMsIGJ1dCBtYW1tYWxpYW4sIGhpbnRpbmcgYXQgcG9zc2libGUgcGxhdHlwdXMgYW5jZXN0cnkuIiwNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoIUVOKSB7DQogICAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwMCkgew0KICAgICAgICAgICAgbGlzdC5wdXNoKE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKG1pc2MpIikpKTsNCiAgICAgICAgICAgIGxpc3QucHVzaChORVdTICsgY2hvb3NlKGxvYygiVGlja2VyIChtaXNjKSIpKSk7DQogICAgICAgICAgICBsaXN0LnB1c2goTkVXUyArIGNob29zZShsb2MoIlRpY2tlciAobWlzYykiKSkpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDUpIHsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhc0FjaGlldigiQmFzZSAxMCIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWUgbWFudWZhY3R1cmVyIGNvbXBsZXRlbHkgZm9yZ29lcyBjb21tb24gc2Vuc2UsIGxldHMgc3RyYW5nZSBvYnNlc3Npb24gd2l0aCByb3VuZCBudW1iZXJzIGRyaXZlIGJ1aWxkaW5nIGRlY2lzaW9ucyEiDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXNBY2hpZXYoIkZyb20gc2NyYXRjaCIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBmb2xsb3cgdGhlIHRlYXItamVya2luZywgcmljaGVzLXRvLXJhZ3Mgc3RvcnkgYWJvdXQgYSBsb2NhbCBjb29raWUgbWFudWZhY3R1cmVyIHdobyBkZWNpZGVkIHRvIGdpdmUgaXQgYWxsIHVwISINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhc0FjaGlldigiQSB3b3JsZCBmaWxsZWQgd2l0aCBjb29raWVzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGtub3duIHVuaXZlcnNlIG5vdyBqYW1tZWQgd2l0aCBjb29raWVzISBObyB2YWNhbmNpZXMhIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzQWNoaWV2KCJMYXN0IENoYW5jZSB0byBTZWUiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDogaW5jcmVkaWJseSByYXJlIGFsYmlubyB3cmlua2xlciBvbiB0aGUgYnJpbmsgb2YgZXh0aW5jdGlvbiBwb2FjaGVkIGJ5IGNvb2tpZS1jcmF6ZWQgcGFzdHJ5IG1hZ25hdGUhIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJTZXJlbmRpcGl0eSIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBsb2NhbCBjb29raWUgbWFudWZhY3R1cmVyIGJlY29tZXMgbHVja2llc3QgYmVpbmcgYWxpdmUhIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJTZWFzb24gc3dpdGNoZXIiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICdOZXdzIDogc2Vhc29ucyBhcmUgYWxsIG91dCBvZiB3aGFjayEgIldlIG5lZWQgdG8gZ2V0IHNvbWUgd2hhY2sgYmFjayBpbnRvIHRoZW0gc2Vhc29ucyIsIHNheXMgbG9jYWwgcmVzaWRlbnQuJw0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBoZWxwZXJzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGZhaW50IG1lb3dpbmcgaGVhcmQgYXJvdW5kIGxvY2FsIGNvb2tpZSBmYWNpbGl0aWVzOyBzdWdnZXN0cyBuZXcgaW5ncmVkaWVudCBiZWluZyB0ZXN0ZWQuIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gd29ya2VycyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBjcm93ZHMgb2YgbWVvd2luZyBraXR0ZW5zIHdpdGggbGl0dGxlIGhhcmQgaGF0cyByZXBvcnRlZCBuZWFyIGxvY2FsIGNvb2tpZSBmYWNpbGl0aWVzLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIGVuZ2luZWVycyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBzdXJyb3VuZGluZ3Mgb2YgbG9jYWwgY29va2llIGZhY2lsaXRpZXMgbm93IG92ZXJydW4gd2l0aCBraXR0ZW5zIGluIGFkb3JhYmxlIGxpdHRsZSBzdWl0cy4gQXV0aG9yaXRpZXMgYWR2aXNlIHRvIHN0YXkgYXdheSBmcm9tIHRoZSBwcmVtaXNlcy4iDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBvdmVyc2VlcnMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDogbG9jYWxzIHJlcG9ydCB0cm91cGUgb2YgYm9zc3kga2l0dGVucyBtZW93aW5nIGFkb3JhYmxlIG9yZGVycyBhdCBwYXNzZXJzYnkuIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gbWFuYWdlcnMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICdOZXdzIDogbG9jYWwgb2ZmaWNlIGN1YmljbGVzIGludmFkZWQgd2l0aCBhcm1pZXMgb2Ygc3Rlcm4tbG9va2luZyBraXR0ZW5zIGFza2luZyBlbXBsb3llZXMgIndoYXRcJ3MgaGFwcGVuaW5nLCBtZW93Ii4nDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBhY2NvdW50YW50cyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiB0aW55IGZlbGluZXMgc2hvdyBzdWRkZW4gYW5kIGFtYXppbmcgcHJvZmljaWVuY3kgd2l0aCBmdXp6eSBtYXRoZW1hdGljcyBhbmQgcGF3bGlub21pYWxzLCBiYWZmbGluZyBzY2llbnRpc3RzIGFuZCBwZXQgc3RvcmUgb3duZXJzLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIHNwZWNpYWxpc3RzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG5ldyBraXR0ZW4gY29sbGVnZSBvcGVuaW5nIG5leHQgd2Vlaywgb2ZmZXJzIGNvdXJzZXMgb24gY29va2llLW1ha2luZyBhbmQgY2F0bmlwIHN0dWRpZXMuIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gZXhwZXJ0cyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiB1bmVtcGxveW1lbnQgcmF0ZXMgc29hcmluZyBhcyB3b2VmdWxseSBhZG9yYWJsZSBsaXR0bGUgY2F0cyBuYWIgam9icyBvbiBhbGwgbGV2ZWxzIG9mIGV4cGVydGlzZSwgc2F5cyBzdHVkeS4iDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBjb25zdWx0YW50cyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgJ05ld3MgOiAiSW4gdGhlIGZ1dHVyZSwgeW91ciBqb2Igd2lsbCBtb3N0IGxpa2VseSBiZSBkb25lIGJ5IGEgY2F0IiwgcHJlZGljdHMgc3VzcGljaW91c2x5IGZ1cnJ5IGZ1dHVyb2xvZ2lzdC4nDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBhc3Npc3RhbnRzIHRvIHRoZSByZWdpb25hbCBtYW5hZ2VyIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHN0cmFuZ2Uga2l0dGVucyB3aXRoIHBlY3VsaWFyIG9waW5pb25zIG9uIG1hcnRpYWwgYXJ0cyBzcG90dGVkIGxvaXRlcmluZyBvbiBsb2NhbCBiZWV0IGZhcm1zISINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIG1hcmtldGVlcnMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDogbm9uc2Vuc2ljYWwga2l0dGVuIGJpbGxib2FyZHMgY3JvcCB1cCBhbGwgb3ZlciBjb3VudHJ5c2lkZSwgdHJ5aW5nIHRvIHNlbGwgcGVvcGxlIHRoZSBjb29raWVzIHRoZXkgYWxyZWFkeSBnZXQgZm9yIGZyZWUhIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYW5hbHlzdHMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDogYXJlIHlvdXIgc3BlbmRpbmcgaGFiaXRzIHNlbnNpYmxlPyBGb3IgYSBoZWZ0eSBmZWUsIHRoZXNlIGtpdHRlbiBhbmFseXN0cyB3aWxsIHRlbGwgeW91ISINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIGV4ZWN1dGl2ZXMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDoga2l0dGVucyBzdHJ1dHRpbmcgYXJvdW5kIGluIGhvdCBsaXR0bGUgYnVzaW5lc3Mgc3VpdHMgc2hvdXRpbmcgY3V0LXRocm9hdCBvcmRlcnMgYXQgdGhlaXIgYXNzaXN0YW50cywgcG9zc2libHkgdGhlIGN1dGVzdCB0aGluZyB0aGlzIHJlcG9ydGVyIGhhcyBldmVyIHNlZW4hIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYWRtaW5zIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGFsbCBzeXN0ZW1zIG5vbWluYWwsIGNsYWltIGtpdHRlbiBhZG1pbnMgb2J2aW91c2x5IGluIHdheSBvdmVyIHRoZWlyIGhlYWRzLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIGFuZ2VscyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgJ05ld3MgOiAiVHJ5IHRvIGlnbm9yZSBhbnkgZ2hvc3RseSBmZWxpbmVzIHRoYXQgbWF5IGJlIHB1cnJpbmcgaW5zaWRlIHlvdXIgZWFycywiIHdhcm4gc2NpZW50aXN0cy4gIlRoZXlcJ2xsIGp1c3QgbHVyZSB5b3UgaW50byBtYWtpbmcgcG9vciBsaWZlIGNob2ljZXMuIicNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIHdhZ2VzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGtpdHRlbnMgYnJlYWsgZ2xhc3MgY2VpbGluZyEgRG8gdGhleSBoYXZlIGFueSBpZGVhIGhvdyBleHBlbnNpdmUgdGhvc2UgYXJlISINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhc0FjaGlldigiSmVsbGljbGVzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGxvY2FsIGtpdHRlbnMgaW52b2x2ZWQgaW4gbWlzZ3VpZGVkIG11c2ljYWwgcHJvZHVjdGlvbiwgbGVhdmUgYXVkaWVuY2UgcGVydHVyYmVkIGFuZCB1bm5lcnZlZC4iDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUuSGFzQWNoaWV2KCJEdWRlLCBzd2VldCIpICYmIE1hdGgucmFuZG9tKCkgPCAwLjIpDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIk5ld3MgOiBtYWpvciBzdWdhci1zbXVnZ2xpbmcgcmluZyBkaXNtYW50bGVkIGJ5IGF1dGhvcml0aWVzOyAiICsNCiAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwICsgMykgKw0KICAgICAgICAgICAgICAgICAgIiB0b25zIG9mIHN1Z2FyIGx1bXBzIHNlaXplZCwgIiArDQogICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0OCArIDIpICsNCiAgICAgICAgICAgICAgICAgICIgc3VzcGVjdHMgYXBwcmVoZW5kZWQuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGF1dGhvcml0aWVzIHdhcm4gdG91cmlzdHMgbm90IHRvIGJ1eSBib290bGVnIHN1Z2FyIGx1bXBzIGZyb20gc3RyZWV0IHBlZGRsZXJzIC0gXCJZb3UgdGhpbmsgeW91J3JlIGdldHRpbmcgYSBzd2VldCBkZWFsLCBidXQgd2hhdCB5b3UncmUgYmVpbmcgc29sZCBpcyByZWFsbHkganVzdCBvcmRpbmFyeSBjb2NhaW5lXCIsIHNheXMgYWdlbnQuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHByby1kaWFiZXRlcyBtb3ZlbWVudCBwcm90ZXN0cyBhZ2FpbnN0IHN1Z2FyLXNoYW1pbmcuIFwiSSd2ZSBlYXRlbiBub3RoaW5nIGJ1dCBzdWdhciBsdW1wcyBmb3IgdGhlIHBhc3QgIiArDQogICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCArIDQpICsNCiAgICAgICAgICAgICAgICAgICIgeWVhcnMgYW5kIEknbSBmZWVsaW5nIGdyZWF0IVwiLCBzYXlzIHdvbWFuIHdpdGggZnJpYWJsZSBza2luLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBleHBlcnRzIGluIGJpdHRlciBkaXNhZ3JlZW1lbnQgb3ZlciB3aGV0aGVyIHN1Z2FyIGNvbnN1bXB0aW9uIHR1cm5zIGNoaWxkcmVuIHNsdWdnaXNoIG9yIGh5cGVyYWN0aXZlLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBmaXNoZXJtZW4gZGVwbG9yZSB1cHR1cm4gaW4gZmlzaCB0b290aCBkZWNheSBhcyBzdWdhciBsdW1wcy1oYXVsaW5nIGNhcmdvIHNpbmtzIGludG8gdGhlIG9jZWFuLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiByYXJlIGJsYWNrIHN1Z2FyIGx1bXAgdGhhdCBjYXB0aXZhdGVkIG1pbGxpb25zIGluIHVucHJlY2VkZW50ZWQgYXVjdGlvbiByZXZlYWxlZCB0byBiZSBjb21tb24gdG94aWMgZnVuZ3VzLiIsDQogICAgICAgICAgICAgICAgJ05ld3MgOiAiQmFjayBpbiBteSBkYXksIHN1Z2FyIGx1bXBzIHdlcmUgdGhlc2UgbGl0dGxlIGN1YmVzIHlvdVwnZCBwdXQgaW4geW91ciB0ZWEsIG5vdCB0aG9zZSBmaXN0LXNpemVkIG1vbnN0cm9zaXRpZXMgcGVvcGxlIGVhdCBmb3IgbHVuY2giLCB3aGluZXMgY3VybXVkZ2VvbiB3aXRoIGZhaWxpbmcgbWVtb3J5LicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBzdWdhciBsdW1wLXNuYWNraW5nIGZhZCBzd2VlcHMgdGhlIG5hdGlvbjsgZGVudGlzdHMgZXZlcnl3aGVyZSByZWpvaWNlLiIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjAwMSkgew0KICAgICAgICAgICAgLy9hcG9sb2dpZXMgdG8gV2lsbCBXcmlnaHQNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgIllvdSBoYXZlIGJlZW4gY2hvc2VuLiBUaGV5IHdpbGwgY29tZSBzb29uLiIsDQogICAgICAgICAgICAgICJUaGV5J3JlIGNvbWluZyBzb29uLiBNYXliZSB5b3Ugc2hvdWxkIHRoaW5rIHR3aWNlIGFib3V0IG9wZW5pbmcgdGhlIGRvb3IuIiwNCiAgICAgICAgICAgICAgIlRoZSBlbmQgaXMgbmVhci4gTWFrZSBwcmVwYXJhdGlvbnMuIiwNCiAgICAgICAgICAgICAgIk5ld3MgOiBicm9jY29saSB0b3BzIGZvciBtb21zLCBsYXN0IGZvciBraWRzOyBkYWRzIGluZGlmZmVyZW50LiIsDQogICAgICAgICAgICAgICJOZXdzIDogbWlkZGxlIGFnZSBhIGhvYXgsIGRlY2xhcmVzIHN0dWR5OyB0dXJucyBvdXQgdG8gYmUgYmFkIHBvc3R1cmUgYWZ0ZXIgYWxsLiIsDQogICAgICAgICAgICAgICJOZXdzIDoga2l0dGllcyB3YW50IGFuc3dlcnMgaW4gcG9zc2libGUgS2l0dHkgS2liYmxlIHNob3J0YWdlLiINCiAgICAgICAgICAgICk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgIk5ld3MgOiAiICsNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgZm91bmQgdG8gIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgImluY3JlYXNlIGxpZmVzcGFuIiwNCiAgICAgICAgICAgICAgICAgICAgICAic2Vuc2libHkgaW5jcmVhc2UgaW50ZWxsaWdlbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicmV2ZXJzZSBhZ2luZyIsDQogICAgICAgICAgICAgICAgICAgICAgImRlY3JlYXNlIGhhaXIgbG9zcyIsDQogICAgICAgICAgICAgICAgICAgICAgInByZXZlbnQgYXJ0aHJpdGlzIiwNCiAgICAgICAgICAgICAgICAgICAgICAiY3VyZSBibGluZG5lc3MiLA0KICAgICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAgICIgaW4gIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICIhIiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzIGZvdW5kIHRvIG1ha2UgIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgIm1vcmUgZG9jaWxlIiwNCiAgICAgICAgICAgICAgICAgICAgICAibW9yZSBoYW5kc29tZSIsDQogICAgICAgICAgICAgICAgICAgICAgIm5pY2VyIiwNCiAgICAgICAgICAgICAgICAgICAgICAibGVzcyBodW5ncnkiLA0KICAgICAgICAgICAgICAgICAgICAgICJtb3JlIHByYWdtYXRpYyIsDQogICAgICAgICAgICAgICAgICAgICAgInRhc3RpZXIiLA0KICAgICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAgICIhIiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzIHRlc3RlZCBvbiAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKGFuaW1hbHMpICsNCiAgICAgICAgICAgICAgICAgICAgIiwgZm91bmQgdG8gaGF2ZSBubyBpbGwgZWZmZWN0cy4iLA0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgdW5leHBlY3RlZGx5IHBvcHVsYXIgYW1vbmcgIiArIGNob29zZShhbmltYWxzKSArICIhIiwNCiAgICAgICAgICAgICAgICAgICJ1bnNpZ2h0bHkgbHVtcHMgZm91bmQgb24gIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICcgbmVhciBjb29raWUgZmFjaWxpdHk7ICJ0aGV5XCd2ZSBwcmV0dHkgbXVjaCBhbHdheXMgbG9va2VkIGxpa2UgdGhhdCIsIHNheSBiaW9sb2dpc3RzLicsDQogICAgICAgICAgICAgICAgICAibmV3IHNwZWNpZXMgb2YgIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICcgZGlzY292ZXJlZCBpbiBkaXN0YW50IGNvdW50cnk7ICJ5dXAsIHRhc3RlcyBsaWtlIGNvb2tpZXMiLCBzYXlzIGJpb2xvZ2lzdC4nLA0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgZ28gd2VsbCB3aXRoICIgKw0KICAgICAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgICAicm9hc3RlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAidG9hc3RlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYm9pbGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJzYXV0ZWVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJtaW5jZWQiLA0KICAgICAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgICAgICAgICBjaG9vc2UoYW5pbWFscyksDQogICAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAgICJzdXNoaSIsDQogICAgICAgICAgICAgICAgICAgICAgICAic291cCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiY2FycGFjY2lvIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJzdGVhayIsDQogICAgICAgICAgICAgICAgICAgICAgICAibnVnZ2V0cyIsDQogICAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgIiBtYWRlIGZyb20gIiArDQogICAgICAgICAgICAgICAgICAgICAgICBjaG9vc2UoYW5pbWFscyksDQogICAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICAgIiwgc2F5cyBjb250cm92ZXJzaWFsIGNoZWYuIiwNCiAgICAgICAgICAgICAgICAgICciZG8geW91ciBjb29raWVzIGNvbnRhaW4gJyArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICc/IiwgYXNrcyBQU0Egd2FybmluZyBhZ2FpbnN0IGNvdW50ZXJmZWl0IGNvb2tpZXMuJywNCiAgICAgICAgICAgICAgICAgICJkb2N0b3JzIHJlY29tbWVuZCB0d2ljZS1kYWlseSBjb25zdW1wdGlvbiBvZiBmcmVzaCBjb29raWVzLiIsDQogICAgICAgICAgICAgICAgICAiZG9jdG9ycyB3YXJuIGFnYWluc3QgY2hvY29sYXRlIGNoaXAtc25vcnRpbmcgdGVlbiBmYWQuIiwNCiAgICAgICAgICAgICAgICAgICJkb2N0b3JzIGFkdmlzZSBhZ2FpbnN0IG5ldyBjb29raWUtZnJlZSBmYWQgZGlldC4iLA0KICAgICAgICAgICAgICAgICAgJ2RvY3RvcnMgd2FybiBtb3RoZXJzIGFib3V0IHRoZSBkYW5nZXJzIG9mICJob21lLW1hZGUgY29va2llcyIuJywNCiAgICAgICAgICAgICAgICBdKSwNCiAgICAgICAgICAgICAgJ05ld3MgOiAiJyArDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJJJ20gYWxsIGFib3V0IGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkkganVzdCBjYW4ndCBzdG9wIGVhdGluZyBjb29raWVzLiBJIHRoaW5rIEkgc2VyaW91c2x5IG5lZWQgaGVscCIsDQogICAgICAgICAgICAgICAgICAiSSBndWVzcyBJIGhhdmUgYSBjb29raWUgcHJvYmxlbSIsDQogICAgICAgICAgICAgICAgICAiSSdtIG5vdCBhZGRpY3RlZCB0byBjb29raWVzLiBUaGF0J3MganVzdCBzcGVjdWxhdGlvbiBieSBmYW5zIHdpdGggdG9vIG11Y2ggZnJlZSB0aW1lIiwNCiAgICAgICAgICAgICAgICAgICJteSB1cGNvbWluZyBhbGJ1bSBjb250YWlucyAzIHNvbmdzIGFib3V0IGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkkndmUgaGFkIGRyZWFtcyBhYm91dCBjb29raWVzIDMgbmlnaHRzIGluIGEgcm93IG5vdy4gSSdtIGEgYml0IHdvcnJpZWQgaG9uZXN0bHkiLA0KICAgICAgICAgICAgICAgICAgImFjY3VzYXRpb25zIG9mIGNvb2tpZSBhYnVzZSBhcmUgb25seSB2aWxlIHNsYW5kZXIiLA0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgcmVhbGx5IGhlbHBlZCBtZSB3aGVuIEkgd2FzIGZlZWxpbmcgbG93IiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzIGFyZSB0aGUgc2VjcmV0IGJlaGluZCBteSBwZXJmZWN0IHNraW4iLA0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgaGVscGVkIG1lIHN0YXkgc2FuZSB3aGlsZSBmaWxtaW5nIG15IHVwY29taW5nIG1vdmllIiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzIGhlbHBlZCBtZSBzdGF5IHRoaW4gYW5kIGhlYWx0aHkiLA0KICAgICAgICAgICAgICAgICAgIkknbGwgc2F5IG9uZSB3b3JkLCBqdXN0IG9uZSA6IGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgImFscmlnaHQsIEknbGwgc2F5IGl0IC0gSSd2ZSBuZXZlciBlYXRlbiBhIHNpbmdsZSBjb29raWUgaW4gbXkgbGlmZSIsDQogICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICciLCByZXZlYWxzIGNlbGVicml0eS4nLA0KICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICdOZXdzIDogc2NpZW50aXN0IHByZWRpY3RzIGltbWluZW50IGNvb2tpZS1yZWxhdGVkICJlbmQgb2YgdGhlIHdvcmxkIjsgYmVjb21lcyBqb2tlIGFtb25nIHBlZXJzLicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBtYW4gcm9icyBiYW5rLCBidXlzIGNvb2tpZXMuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHNjaWVudGlzdHMgZXN0YWJsaXNoIHRoYXQgdGhlIGRlYWwgd2l0aCBhaXJsaW5lIGZvb2QgaXMsIGluIGZhY3QsIGEgY3JpdGljYWwgbGFjayBvZiBjb29raWVzLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBodW5kcmVkcyBvZiB0b25zIG9mIGNvb2tpZXMgZHVtcGVkIGludG8gc3RhcnZpbmcgY291bnRyeSBmcm9tIGFpcnBsYW5lczsgdGhvdXNhbmRzIGRlYWQsIG5hdGlvbiBncmF0ZWZ1bC4iLA0KICAgICAgICAgICAgICAgICdOZXdzIDogbmV3IHN0dWR5IHN1Z2dlc3RzIGNvb2tpZXMgbmVpdGhlciBzcGVlZCB1cCBub3Igc2xvdyBkb3duIGFnaW5nLCBidXQgaW5zdGVhZCAidGFrZSB5b3UgaW4gYSBkaWZmZXJlbnQgZGlyZWN0aW9uIi4nLA0KICAgICAgICAgICAgICAgICJOZXdzIDogb3Zlcmdyb3duIGNvb2tpZXMgZm91bmQgaW4gZmlzaGluZyBuZXRzLCByYWlzZSBxdWVzdGlvbnMgYWJvdXQgaG9ybW9uZSBiYWtpbmcuIiwNCiAgICAgICAgICAgICAgICAnTmV3cyA6ICJhbGwteW91LWNhbi1lYXQiIGNvb2tpZSByZXN0YXVyYW50IG9wZW5zIGluIGJpZyBjaXR5OyB3YWl0ZXJzIHRyYW1wbGVkIGluIG1pbnV0ZXMuJywNCiAgICAgICAgICAgICAgICAnTmV3cyA6IG1hbiBkaWVzIGluIGNvb2tpZS1lYXRpbmcgY29udGVzdDsgImEgbGVzcy10aGFuLWltcHJlc3NpdmUgcGVyZm9ybWFuY2UiLCBzYXlzIGp1ZGdlLicsDQogICAgICAgICAgICAgICAgJ05ld3MgOiB3aGF0IG1ha2VzIGNvb2tpZXMgdGFzdGUgc28gcmlnaHQ/ICJQcm9iYWJseSBhbGwgdGhlIFsqKioqKl0gdGhleSBwdXQgaW4gdGhlbSIsIHNheXMgYW5vbnltb3VzIHRpcHBlci4nLA0KICAgICAgICAgICAgICAgICdOZXdzIDogbWFuIGZvdW5kIGFsbGVyZ2ljIHRvIGNvb2tpZXM7ICJ3aGF0IGEgd2VpcmRvIiwgc2F5cyBmYW1pbHkuJywNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGZvcmVpZ24gcG9saXRpY2lhbiBpbnZvbHZlZCBpbiBjb29raWUtc211Z2dsaW5nIHNjYW5kYWwuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGNvb2tpZXMgbm93IG1vcmUgcG9wdWxhciB0aGFuICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgImNvdWdoIGRyb3BzIiwNCiAgICAgICAgICAgICAgICAgICAgImJyb2Njb2xpIiwNCiAgICAgICAgICAgICAgICAgICAgInNtb2tlZCBoZXJyaW5nIiwNCiAgICAgICAgICAgICAgICAgICAgImNoZWVzZSIsDQogICAgICAgICAgICAgICAgICAgICJ2aWRlbyBnYW1lcyIsDQogICAgICAgICAgICAgICAgICAgICJzdGFibGUgam9icyIsDQogICAgICAgICAgICAgICAgICAgICJyZWxhdGlvbnNoaXBzIiwNCiAgICAgICAgICAgICAgICAgICAgInRpbWUgdHJhdmVsIiwNCiAgICAgICAgICAgICAgICAgICAgImNhdCB2aWRlb3MiLA0KICAgICAgICAgICAgICAgICAgICAidGFuZ28iLA0KICAgICAgICAgICAgICAgICAgICAiZmFzaGlvbiIsDQogICAgICAgICAgICAgICAgICAgICJ0ZWxldmlzaW9uIiwNCiAgICAgICAgICAgICAgICAgICAgIm51Y2xlYXIgd2FyZmFyZSIsDQogICAgICAgICAgICAgICAgICAgICJ3aGF0ZXZlciBpdCBpcyB3ZSBhdGUgYmVmb3JlIiwNCiAgICAgICAgICAgICAgICAgICAgInBvbGl0aWNzIiwNCiAgICAgICAgICAgICAgICAgICAgIm94eWdlbiIsDQogICAgICAgICAgICAgICAgICAgICJsYW1wcyIsDQogICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAiLCBzYXlzIHN0dWR5LiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBvYmVzaXR5IGVwaWRlbWljIHN0cmlrZXMgbmF0aW9uOyBleHBlcnRzIGJsYW1lICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgInR3ZXJraW5nIiwNCiAgICAgICAgICAgICAgICAgICAgInRoYXQgZGFybiByYXAgbXVzaWMiLA0KICAgICAgICAgICAgICAgICAgICAidmlkZW8tZ2FtZXMiLA0KICAgICAgICAgICAgICAgICAgICAibGFjayBvZiBjb29raWVzIiwNCiAgICAgICAgICAgICAgICAgICAgIm15c3RlcmlvdXMgZ2hvc3RseSBlbnRpdGllcyIsDQogICAgICAgICAgICAgICAgICAgICJhbGllbnMiLA0KICAgICAgICAgICAgICAgICAgICAicGFyZW50cyIsDQogICAgICAgICAgICAgICAgICAgICJzY2hvb2xzIiwNCiAgICAgICAgICAgICAgICAgICAgImNvbWljLWJvb2tzIiwNCiAgICAgICAgICAgICAgICAgICAgImNvb2tpZS1zbm9ydGluZyBmYWQiLA0KICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgIi4iLA0KICAgICAgICAgICAgICAgICdOZXdzIDogY29va2llIHNob3J0YWdlIHN0cmlrZXMgdG93biwgcGVvcGxlIGZvcmNlZCB0byBlYXQgY3VwY2FrZXM7ICJqdXN0IG5vdCB0aGUgc2FtZSIsIGNvbmNlZGVzIG1heW9yLicsDQogICAgICAgICAgICAgICAgJ05ld3MgOiAieW91IGdvdHRhIGFkbWl0LCBhbGwgdGhpcyBjb29raWUgc3R1ZmYgaXMgYSBiaXQgb21pbm91cyIsIHNheXMgY29uZnVzZWQgaWRpb3QuJywNCiAgICAgICAgICAgICAgICAvLydOZXdzIDogc2NpZW50aXN0cyBhZHZpc2UgZ2V0dGluZyB1c2VkIHRvIGNvb2tpZXMgc3VmZnVzaW5nIGV2ZXJ5IGFzcGVjdCBvZiBsaWZlOyAidGhpcyBpcyB0aGUgbmV3IG5vcm1hbCIsIGV4cGVydCBzYXlzLicsDQogICAgICAgICAgICAgICAgLy8nTmV3cyA6IGRvY3RvcnMgYWR2aXNlIGFnYWluc3Qgd2VhcmluZyBmYWNlIG1hc2tzIHdoZW4gZ29pbmcgb3V0c2lkZS4gIllvdSBuZXZlciBrbm93IHdoZW4geW91IG1pZ2h0IG5lZWQgYSBjb29raWUuLi4gYSBtYXNrIHdvdWxkIGp1c3QgZ2V0IGluIHRoZSB3YXkuIicsLy90aGVzZSB3ZXJlIHdyaXR0ZW4gYmFjayB3aGVuIGNvdmlkIGhhZG4ndCByZWFsbHkgZG9uZSBtdWNoIGRhbWFnZSB5ZXQgYnV0IHRoZXkganVzdCBmZWVsIGluIHBvb3IgdGFzdGUgbm93DQogICAgICAgICAgICAgICAgIk5ld3MgOiBpcyB0aGVyZSBsaWZlIG9uIE1hcnM/IFZhcmlvdXMgY2hvY29sYXRlIGJhciBtYW51ZmFjdHVyZXJzIGN1cnJlbnRseSB1bmRlciBpbnZlc3RpZ2F0aW9uIGZvciBiYWN0ZXJpYWwgY29udGFtaW5hbnRzLiIsDQogICAgICAgICAgICAgICAgJ05ld3MgOiAic28gSSBndWVzcyB0aGF0XCdzIGEgdGhpbmcgbm93Iiwgc2NpZW50aXN0IGNvbW1lbnRzIG9uIGNvb2tpZSBwYXJ0aWNsZXMgbm93IHByZXNlbnQgaW4gdmlydHVhbGx5IGFsbCBzdGVlbCBtYW51ZmFjdHVyZWQgc2luY2UgY29va2llIHByb2R1Y3Rpb24gcmFtcGVkIHVwIHdvcmxkd2lkZS4nLA0KICAgICAgICAgICAgICAgICJOZXdzIDogdHJhY2UgYW1vdW50cyBvZiBjb29raWUgcGFydGljbGVzIGRldGVjdGVkIGluIG1vc3QgbGl2aW5nIGNyZWF0dXJlcywgc29tZSBvZiB3aGljaCBhZGFwdGluZyB0aGVtIGFzIHBhcnQgb2YgbmV3IGFuZCBleG90aWMgbWV0YWJvbGljIHByb2Nlc3Nlcy4iLA0KICAgICAgICAgICAgICBdKSwNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAnTmV3cyA6IG1vdmllIGNhbmNlbGxlZCBmcm9tIGxhY2sgb2YgYWN0b3JzOyAiZXZlcnlib2R5XCdzIGF0IGhvbWUgZWF0aW5nIGNvb2tpZXMiLCBsYW1lbnRzIGRpcmVjdG9yLicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBjb21lZGlhbiBmb3JjZWQgdG8gY2FuY2VsIGNvb2tpZSByb3V0aW5lIGR1ZSB0byB1bnJlbGF0ZWQgaW5kaWdlc3Rpb24uIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG5ldyBjb29raWUtYmFzZWQgcmVsaWdpb24gc3dlZXBzIHRoZSBuYXRpb24uIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGZvc3NpbCByZWNvcmRzIHNob3cgY29va2llLWJhc2VkIG9yZ2FuaXNtcyBwcmV2YWxlbnQgZHVyaW5nIENhbWJyaWFuIGV4cGxvc2lvbiwgc2NpZW50aXN0cyBzYXkuIiwNCiAgICAgICAgICAgICAgICAnTmV3cyA6IG15c3RlcmlvdXMgaWxsZWdhbCBjb29raWVzIHNlaXplZDsgInRhc3RlcyB0ZXJyaWJsZSIsIHNheXMgcG9saWNlLicsDQogICAgICAgICAgICAgICAgJ05ld3MgOiBtYW4gZm91bmQgZGVhZCBhZnRlciBpbmdlc3RpbmcgY29va2llOyBpbnZlc3RpZ2F0b3JzIGZhdm9yICJtYWZpYSBzbml0Y2giIGh5cG90aGVzaXMuJywNCiAgICAgICAgICAgICAgICAnTmV3cyA6ICJ0aGUgdW5pdmVyc2UgcHJldHR5IG11Y2ggbG9vcHMgb24gaXRzZWxmLCIgc3VnZ2VzdHMgcmVzZWFyY2hlcjsgIml0XCdzIGNvb2tpZXMgYWxsIHRoZSB3YXkgZG93bi4iJywNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG1pbm9yIGNvb2tpZS1yZWxhdGVkIGluY2lkZW50IHR1cm5zIHdob2xlIHRvd24gdG8gYXNoZXM7IG5laWdoYm9yaW5nIGNpdGllcyBhc2tlZCB0byBjaGlwIGluIGZvciByZWNvbnN0cnVjdGlvbi4iLA0KICAgICAgICAgICAgICAgICJOZXdzIDogaXMgb3VyIG1lZGlhIGNvbnRyb2xsZWQgYnkgdGhlIGNvb2tpZSBpbmR1c3RyeT8gVGhpcyBjb3VsZCB2ZXJ5IHdlbGwgYmUgdGhlIGNhc2UsIHNheXMgY3JhY2twb3QgY29uc3BpcmFjeSB0aGVvcmlzdC4iLA0KICAgICAgICAgICAgICAgICJOZXdzIDogIiArDQogICAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgICAnY29va2llLWZsYXZvcmVkIHBvcGNvcm4gcHJldHR5IGRhbW4gcG9wdWxhcjsgIndlIGtpbmRhIGV4cGVjdGVkIHRoYXQiLCBzYXkgc2NpZW50aXN0cy4nLA0KICAgICAgICAgICAgICAgICAgICAiY29va2llLWZsYXZvcmVkIGNlcmVhbHMgYnJlYWsgYWxsIGtub3duIGNlcmVhbC1yZWxhdGVkIHJlY29yZHMiLA0KICAgICAgICAgICAgICAgICAgICAiY29va2llcyBwb3B1bGFyIGFtb25nIGFsbCBhZ2UgZ3JvdXBzLCBpbmNsdWRpbmcgZmV0dXNlcywgc2F5cyBzdHVkeS4iLA0KICAgICAgICAgICAgICAgICAgICAiY29va2llLWZsYXZvcmVkIHBvcGNvcm4gc2FsZXMgZXhwbG9kZWQgZHVyaW5nIHNjcmVlbmluZyBvZiBHcmFuZG1vdGhlcnMgSUkgOiBUaGUgTW9pc3RlbmluZy4iLA0KICAgICAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgICAgIk5ld3MgOiBhbGwtY29va2llIHJlc3RhdXJhbnQgb3BlbmluZyBkb3dudG93bi4gRGlzaGVzIHN1Y2ggYXMgYnJhaXNlZCBjb29raWVzLCBjb29raWUgdGhlcm1pZG9yLCBhbmQgZm9yIGRlc3NlcnQgOiBjcmVwZXMuIiwNCiAgICAgICAgICAgICAgICAnTmV3cyA6ICJPb2siLCBzYXlzIGludGVydmlld2VkIG9yYW5ndXRhbi4nLA0KICAgICAgICAgICAgICAgICJOZXdzIDogY29va2llcyBjb3VsZCBiZSB0aGUga2V5IHRvICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgImV0ZXJuYWwgbGlmZSIsDQogICAgICAgICAgICAgICAgICAgICJpbmZpbml0ZSByaWNoZXMiLA0KICAgICAgICAgICAgICAgICAgICAiZXRlcm5hbCB5b3V0aCIsDQogICAgICAgICAgICAgICAgICAgICJldGVybmFsIGJlYXV0eSIsDQogICAgICAgICAgICAgICAgICAgICJjdXJpbmcgYmFsZG5lc3MiLA0KICAgICAgICAgICAgICAgICAgICAid29ybGQgcGVhY2UiLA0KICAgICAgICAgICAgICAgICAgICAic29sdmluZyB3b3JsZCBodW5nZXIiLA0KICAgICAgICAgICAgICAgICAgICAiZW5kaW5nIGFsbCB3YXJzIHdvcmxkLXdpZGUiLA0KICAgICAgICAgICAgICAgICAgICAibWFraW5nIGNvbnRhY3Qgd2l0aCBleHRyYXRlcnJlc3RyaWFsIGxpZmUiLA0KICAgICAgICAgICAgICAgICAgICAibWluZC1yZWFkaW5nIiwNCiAgICAgICAgICAgICAgICAgICAgImJldHRlciBsaXZpbmciLA0KICAgICAgICAgICAgICAgICAgICAiYmV0dGVyIGVhdGluZyIsDQogICAgICAgICAgICAgICAgICAgICJtb3JlIGludGVyZXN0aW5nIFRWIHNob3dzIiwNCiAgICAgICAgICAgICAgICAgICAgImZhc3Rlci10aGFuLWxpZ2h0IHRyYXZlbCIsDQogICAgICAgICAgICAgICAgICAgICJxdWFudHVtIGJha2luZyIsDQogICAgICAgICAgICAgICAgICAgICJjaG9jb2xhdHkgZ29vZG5lc3MiLA0KICAgICAgICAgICAgICAgICAgICAiZ29vZGVyIHRob3VnaHRuZXNzIiwNCiAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICIsIHNheSBzY2llbnRpc3RzLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBmbGF2b3IgdGV4dCAiICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICJub3QgcGFydGljdWxhcmx5IGZsYXZvcmZ1bCIsDQogICAgICAgICAgICAgICAgICAgICJraW5kIG9mIHVuc2F2b3J5IiwNCiAgICAgICAgICAgICAgICAgICAgJyJyYXRoZXIgYmxhbmQiJywNCiAgICAgICAgICAgICAgICAgICAgInByZXR0eSBzcGljeSBsYXRlbHkiLA0KICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgIiwgc3R1ZHkgZmluZHMuIiwNCiAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgJ05ld3MgOiB3aGF0IGRvIGdvbGRlbiBjb29raWVzIHRhc3RlIGxpa2U/IFN0dWR5IHJldmVhbHMgYSBmbGF2b3IgInNvbWV3aGVyZSBiZXR3ZWVuIHNwZWFybWludCBhbmQgbGlxdW9yaWNlIi4nLA0KICAgICAgICAgICAgICAgICdOZXdzIDogd2hhdCBkbyB3cmF0aCBjb29raWVzIHRhc3RlIGxpa2U/IFN0dWR5IHJldmVhbHMgYSBmbGF2b3IgInNvbWV3aGVyZSBiZXR3ZWVuIGJsb29kIHNhdXNhZ2UgYW5kIHNlYXdhdGVyIi4nLA0KICAgICAgICAgICAgICAgICJOZXdzIDogIiArDQogICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKw0KICAgICAgICAgICAgICAgICAgJy1icmFuZCBjb29raWVzICInICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICJtdWNoIGxlc3Mgc29nZ3kiLA0KICAgICAgICAgICAgICAgICAgICAibXVjaCB0YXN0aWVyIiwNCiAgICAgICAgICAgICAgICAgICAgInJlbGF0aXZlbHkgbGVzcyBjcmFwcHkiLA0KICAgICAgICAgICAgICAgICAgICAibWFyZ2luYWxseSBsZXNzIGF3ZnVsIiwNCiAgICAgICAgICAgICAgICAgICAgImxlc3MgdG94aWMiLA0KICAgICAgICAgICAgICAgICAgICAicG9zc2libHkgbW9yZSBlZGlibGUiLA0KICAgICAgICAgICAgICAgICAgICAibW9yZSBmYXNoaW9uYWJsZSIsDQogICAgICAgICAgICAgICAgICAgICJzbGlnaHRseSBuaWNlciIsDQogICAgICAgICAgICAgICAgICAgICJ0cmVuZGllciIsDQogICAgICAgICAgICAgICAgICAgICJhcmd1YWJseSBoZWFsdGhpZXIiLA0KICAgICAgICAgICAgICAgICAgICAib2JqZWN0aXZlbHkgYmV0dGVyIGNob2ljZSIsDQogICAgICAgICAgICAgICAgICAgICJzbGlnaHRseSBsZXNzIHRlcnJpYmxlIiwNCiAgICAgICAgICAgICAgICAgICAgImRlY2lkZWRseSBjb29raWVyIiwNCiAgICAgICAgICAgICAgICAgICAgImEgdGFkIGNoZWFwZXIiLA0KICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgJyB0aGFuIGNvbXBldGl0b3JzIiwgc2F5cyBjb25zdW1lciBzdXJ2ZXkuJywNCiAgICAgICAgICAgICAgICAnTmV3cyA6ICInICsNCiAgICAgICAgICAgICAgICAgIEdhbWUuYmFrZXJ5TmFtZSArDQogICAgICAgICAgICAgICAgICAiXCIgc2V0IHRvIGJlIHRoaXMgeWVhcidzIG1vc3QgcG9wdWxhciBiYWJ5IG5hbWUuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG5ldyBwb3B1bGFyaXR5IHN1cnZleSBzYXlzICIgKw0KICAgICAgICAgICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAgICAgICAgICIncyB0aGUgd29yZCB3aGVuIGl0IGNvbWVzIHRvIGNvb2tpZXMuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG1ham9yIGNpdHkgYmVpbmcgcmVuYW1lZCAiICsNCiAgICAgICAgICAgICAgICAgIEdhbWUuYmFrZXJ5TmFtZSArDQogICAgICAgICAgICAgICAgICAidmlsbGUgYWZ0ZXIgd29ybGQtZmFtb3VzIGNvb2tpZSBtYW51ZmFjdHVyZXIuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6ICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgInN0cmVldCIsDQogICAgICAgICAgICAgICAgICAgICJzY2hvb2wiLA0KICAgICAgICAgICAgICAgICAgICAibnVyc2luZyBob21lIiwNCiAgICAgICAgICAgICAgICAgICAgInN0YWRpdW0iLA0KICAgICAgICAgICAgICAgICAgICAibmV3IGZhc3QgZm9vZCBjaGFpbiIsDQogICAgICAgICAgICAgICAgICAgICJuZXcgcGxhbmV0IiwNCiAgICAgICAgICAgICAgICAgICAgIm5ldyBkaXNlYXNlIiwNCiAgICAgICAgICAgICAgICAgICAgImZsZXNoLWVhdGluZyBiYWN0ZXJpYSIsDQogICAgICAgICAgICAgICAgICAgICJkZWFkbHkgdmlydXMiLA0KICAgICAgICAgICAgICAgICAgICAibmV3IHNwZWNpZXMgb2YgIiArIGNob29zZShhbmltYWxzKSwNCiAgICAgICAgICAgICAgICAgICAgIm5ldyBsYXciLA0KICAgICAgICAgICAgICAgICAgICAiYmFieSIsDQogICAgICAgICAgICAgICAgICAgICJwcm9ncmFtbWluZyBsYW5ndWFnZSIsDQogICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAiIHRvIGJlIG5hbWVkIGFmdGVyICIgKw0KICAgICAgICAgICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAgICAgICAgICIsIHRoZSB3b3JsZC1mYW1vdXMgY29va2llIG1hbnVmYWN0dXJlci4iLA0KICAgICAgICAgICAgICAgICJOZXdzIDogZG9uJ3QgbWlzcyB0b25pZ2h0J3MgYmlvcGljIG9uICIgKw0KICAgICAgICAgICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAgICAgICAgICIncyBpcnJlc2lzdGlibGUgcmlzZSB0byBzdWNjZXNzISIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBkb24ndCBtaXNzIHRvbmlnaHQncyBpbnRlcnZpZXcgb2YgIiArDQogICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKw0KICAgICAgICAgICAgICAgICAgIiBieSAiICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICJCbG9wcmFoIiwNCiAgICAgICAgICAgICAgICAgICAgIkJsYXZpZCBCbGV0dGVybWFuIiwNCiAgICAgICAgICAgICAgICAgICAgIkJsaW1teSBCbGltbWVsIiwNCiAgICAgICAgICAgICAgICAgICAgIkJsZWxsZW4gQmxlZ2VuZXJlcyIsDQogICAgICAgICAgICAgICAgICAgICJCbGltbXkgQmxhbGxvbiIsDQogICAgICAgICAgICAgICAgICAgICJCbG9uYW4gQmxvJ0JyaWVuIiwNCiAgICAgICAgICAgICAgICAgICAgIkJsYXkgQmxlbm8iLA0KICAgICAgICAgICAgICAgICAgICAiQmxvbiBCbGV3YXJ0IiwNCiAgICAgICAgICAgICAgICAgICAgIkJsZXZlbiBCbG9sYmVydCIsDQogICAgICAgICAgICAgICAgICAgICJMb3JkIFRveGlraHJvbiBvZiBkaW1lbnNpb24gNy1CMTkiLA0KICAgICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKyAiJ3Mgb3duIGV2aWwgY2xvbmUiLA0KICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgIiEiLA0KICAgICAgICAgICAgICAgICdOZXdzIDogcGVvcGxlIGFsbCBvdmVyIHRoZSBpbnRlcm5ldCBzdGlsbCBzY3JhdGNoaW5nIHRoZWlyIGhlYWRzIG92ZXIgbm9uc2Vuc2ljYWwgcmVmZXJlbmNlIDogIk9rYXksIGJ1dCB3aHkgYW4gZWdnPyInLA0KICAgICAgICAgICAgICAgICdOZXdzIDogdmlyYWwgdmlkZW8gIlRvbyBNYW55IENvb2tpZXMiIGNvdWxkIGJlICJhIGdyaW0gY29tbWVudGFyeSBvbiB0aGUgaW1wZW5kaW5nIGNyaXNpcyBvdXIgd29ybGQgaXMgYWJvdXQgdG8gZmFjZSIsIHNheXMgZmFtb3VzIGVjb25vbWlzdC4nLA0KICAgICAgICAgICAgICAgICdOZXdzIDogIm1lbWVzIGZyb20gbGFzdCB5ZWFyIHNvbWVob3cgc3RpbGwgcmVsZXZhbnQiLCBkZXBsb3JlIGV4cGVydHMuJywNCiAgICAgICAgICAgICAgICAnTmV3cyA6IGNvb2tpZSBlbW9qaSBtb3N0IHBvcHVsYXIgYW1vbmcgdGVlbmFnZXJzLCBmYXIgYWhlYWQgb2YgImp1ZGdtZW50YWwgT0sgaGFuZCBzaWduIiBhbmQgInNoaWZ0eS1sb29raW5nIGRhcmsgbW9vbiIsIHNheXMgc3R1ZHkuJywNCiAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIk5ld3MgOiBiaXJ0aHMgb2Ygc3VzcGljaW91c2x5IGJhbGQgYmFiaWVzIG9uIHRoZSByaXNlOyBhbmNpZW50IGFsaWVuIGNhYmFsIGRlbmllcyBpbnZvbHZlbWVudC4iLA0KICAgICAgICAgICAgICAgICdOZXdzIDogImF0IHRoaXMgcG9pbnQsIGNvb2tpZXMgcGVybWVhdGUgdGhlIGVjb25vbXkiLCBzYXlzIGVjb25vbWlzdC4gIklmIHdlIHN0YXJ0IGVhdGluZyBhbnl0aGluZyBlbHNlLCB3ZVwncmUgYWxsIGRlYWQuIicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBwdW4gaW4gaGVhZGxpbmUgaW5mdXJpYXRlcyB0b3duLCBjYXVzZXMgcmlvdC4gMjEgd291bmRlZCwgNSBkZWFkOyBtYXlvciBzdGlsbCBtaXNzaW5nLiIsDQogICAgICAgICAgICAgICAgIk53cyA6IGt5IGJ0d24gVyBhbmQgUiBicm9rbiwgcGxhcyBzbmQgbncgdHlwd3JpdHIgQVNBUC4iLA0KICAgICAgICAgICAgICAgICdOZWVlZWV3cyA6ICJuZWVlZXcgRUVFRUVFIGtlZWVlZXkgd29ya2luZyBmaW5lZWVlZWVlZWUiLCByZWVlcG9ydHMgZ2xlZWVlZWVlZWZ1bCBqb3VybmFsaXN0LicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWVzIG5vdyBpbGxlZ2FsIGluIHNvbWUgYmFja3dhcmRzIGNvdW50cnkgbm9ib2R5IGNhcmVzIGFib3V0LiBQb2xpdGljYWwgdGVuc2lvbnMgcmlzaW5nOyB3YXIgc29vbiwgaG9wZWZ1bGx5LiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBpcmF0ZSByYWRpbyBob3N0IHJhbWJsZXMgYWJvdXQgcGl4ZWxhdGVkIGljb25zLiBcIk5vbmUgb2YgdGhlIGNvb2tpZXMgYXJlIGFsaWduZWQhIENhbid0IGFueW9uZSBlbHNlIHNlZSBpdD8gSSBmZWVsIGxpa2UgSSdtIHRha2luZyBjcmF6eSBwaWxscyFcIiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBuYXRpb24gY2hlZXJzIGFzIGxlZ2lzbGF0b3JzIGZpbmFsbHkgb3V0bGF3ICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgImNvb2tpZSBjcml0aWNpc20iLA0KICAgICAgICAgICAgICAgICAgICAicGxheWluZyBvdGhlciBnYW1lcyB0aGFuIENvb2tpZSBDbGlja2VyIiwNCiAgICAgICAgICAgICAgICAgICAgInBpbmVhcHBsZSBvbiBwaXp6YSIsDQogICAgICAgICAgICAgICAgICAgICJsYWNrIG9mIGNoZWVyZnVsbmVzcyIsDQogICAgICAgICAgICAgICAgICAgICJtb3NxdWl0b2VzIiwNCiAgICAgICAgICAgICAgICAgICAgImJyb2Njb2xpIiwNCiAgICAgICAgICAgICAgICAgICAgInRoZSBodW1hbiBzcGxlZW4iLA0KICAgICAgICAgICAgICAgICAgICAiYmFkIHdlYXRoZXIiLA0KICAgICAgICAgICAgICAgICAgICAiY2xpY2tiYWl0IiwNCiAgICAgICAgICAgICAgICAgICAgImRhYmJpbmciLA0KICAgICAgICAgICAgICAgICAgICAidGhlIGludGVybmV0IiwNCiAgICAgICAgICAgICAgICAgICAgIm1lbWVzIiwNCiAgICAgICAgICAgICAgICAgICAgIm1pbGxlbm5pYWxzIiwNCiAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICIhIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6ICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsibG9jYWwiLCAiYXJlYSJdKSArDQogICAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsibWFuIiwgIndvbWFuIl0pICsNCiAgICAgICAgICAgICAgICAgICcgZ29lcyBvbiBqb3VybmV5IG9mIGludHJvc3BlY3Rpb24sIGZpbmRzIGNvb2tpZXMgOiAiSSBob25lc3RseSBkb25cJ3Qga25vdyB3aGF0IEkgd2FzIGV4cGVjdGluZy4iJywNCiAgICAgICAgICAgICAgICAiTmV3cyA6ICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsibWFuIiwgIndvbWFuIl0pICsNCiAgICAgICAgICAgICAgICAgICIgd2FrZXMgdXAgZnJvbSBjb21hLCAiICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICJ0cmllcyBjb29raWUgZm9yIHRoZSBmaXJzdCB0aW1lLCBkaWVzLiIsDQogICAgICAgICAgICAgICAgICAgICJyZWdyZXRzIGl0IGluc3RhbnRseS4iLA0KICAgICAgICAgICAgICAgICAgICAnd29uZGVycyAid2h5IGV2ZXJ5dGhpbmcgaXMgY29va2llcyBub3ciLicsDQogICAgICAgICAgICAgICAgICAgICdiYWJibGVzIGluY29oZXJlbnRseSBhYm91dCBzb21lIHN1cHBvc2VkICJub24tY29va2llIGZvb2QiIHdlIHVzZWQgdG8gZWF0LicsDQogICAgICAgICAgICAgICAgICAgICJjaXRlcyBjb29raWVzIGFzIG1haW4gbW90aXZhdG9yLiIsDQogICAgICAgICAgICAgICAgICAgICJhc2tzIGZvciBjb29raWVzLiIsDQogICAgICAgICAgICAgICAgICBdKSwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHBldCAiICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAiLCBkYW5nZXJvdXMgZmFkIG9yIGp1aWN5IG5ldyBtYXJrZXQ/IiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHBlcnNvbiB0eXBpbmcgdGhlc2Ugd291bGRuJ3QgbWluZCBzb21lb25lIGVsc2UgYnJlYWtpbmcgdGhlIG5ld3MgdG8gVEhFTSwgZm9yIGEgY2hhbmdlLiIsDQogICAgICAgICAgICAgICAgJ05ld3MgOiAiYXZlcmFnZSBwZXJzb24gYmFrZXMgJyArDQogICAgICAgICAgICAgICAgICBCZWF1dGlmeShNYXRoLmNlaWwoR2FtZS5jb29raWVzRWFybmVkIC8gNzMwMDAwMDAwMCkpICsNCiAgICAgICAgICAgICAgICAgICIgY29va2llIiArDQogICAgICAgICAgICAgICAgICAoTWF0aC5jZWlsKEdhbWUuY29va2llc0Vhcm5lZCAvIDczMDAwMDAwMDApID09IDEgPyAiIiA6ICJzIikgKw0KICAgICAgICAgICAgICAgICAgJyBhIHllYXIiIGZhY3RvaWQgYWN0dWFsbHkganVzdCBzdGF0aXN0aWNhbCBlcnJvcjsgJyArDQogICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKw0KICAgICAgICAgICAgICAgICAgIiwgd2hvIGhhcyBwcm9kdWNlZCAiICsNCiAgICAgICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc0Vhcm5lZCkgKw0KICAgICAgICAgICAgICAgICAgIiBjb29raWVzIGluIHRoZWlyIGxpZmV0aW1lLCBpcyBhbiBvdXRsaWVyIGFuZCBzaG91bGQgbm90IGhhdmUgYmVlbiBjb3VudGVkLiIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMCkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJZb3UgZmVlbCBsaWtlIG1ha2luZyBjb29raWVzLiBCdXQgbm9ib2R5IHdhbnRzIHRvIGVhdCB5b3VyIGNvb2tpZXMuIg0KICAgICAgICAgICAgKQ0KICAgICAgICAgICk7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSAxKQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIllvdXIgZmlyc3QgYmF0Y2ggZ29lcyB0byB0aGUgdHJhc2guIFRoZSBuZWlnaGJvcmhvb2QgcmFjY29vbiBiYXJlbHkgdG91Y2hlcyBpdC4iDQogICAgICAgICAgICApDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDIpDQogICAgICAgICAgbGlzdC5wdXNoKGxvYygiWW91ciBmYW1pbHkgYWNjZXB0cyB0byB0cnkgc29tZSBvZiB5b3VyIGNvb2tpZXMuIikpOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMykNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoIllvdXIgY29va2llcyBhcmUgcG9wdWxhciBpbiB0aGUgbmVpZ2hib3Job29kLiIpLA0KICAgICAgICAgICAgbG9jKCJQZW9wbGUgYXJlIHN0YXJ0aW5nIHRvIHRhbGsgYWJvdXQgeW91ciBjb29raWVzLiIpDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDQpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgYXJlIHRhbGtlZCBhYm91dCBmb3IgbWlsZXMgYXJvdW5kLiIpLA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgYXJlIHJlbm93bmVkIGluIHRoZSB3aG9sZSB0b3duISIpDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDUpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgYnJpbmcgYWxsIHRoZSBib3lzIHRvIHRoZSB5YXJkLiIpLA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgbm93IGhhdmUgdGhlaXIgb3duIHdlYnNpdGUhIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gNikNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoIllvdXIgY29va2llcyBhcmUgd29ydGggYSBsb3Qgb2YgbW9uZXkuIiksDQogICAgICAgICAgICBsb2MoIllvdXIgY29va2llcyBzZWxsIHZlcnkgd2VsbCBpbiBkaXN0YW50IGNvdW50cmllcy4iKQ0KICAgICAgICAgICk7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSA3KQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIlBlb3BsZSBjb21lIGZyb20gdmVyeSBmYXIgYXdheSB0byBnZXQgYSB0YXN0ZSBvZiB5b3VyIGNvb2tpZXMuIg0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIktpbmdzIGFuZCBxdWVlbnMgZnJvbSBhbGwgb3ZlciB0aGUgd29ybGQgYXJlIGVuam95aW5nIHlvdXIgY29va2llcy4iDQogICAgICAgICAgICApDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDgpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKCJUaGVyZSBhcmUgbm93IG11c2V1bXMgZGVkaWNhdGVkIHRvIHlvdXIgY29va2llcy4iKSwNCiAgICAgICAgICAgIGxvYygiQSBuYXRpb25hbCBkYXkgaGFzIGJlZW4gY3JlYXRlZCBpbiBob25vciBvZiB5b3VyIGNvb2tpZXMuIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gOSkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoIllvdXIgY29va2llcyBoYXZlIGJlZW4gbmFtZWQgYSBwYXJ0IG9mIHRoZSB3b3JsZCB3b25kZXJzLiIpLA0KICAgICAgICAgICAgbG9jKCJIaXN0b3J5IGJvb2tzIG5vdyBpbmNsdWRlIGEgd2hvbGUgY2hhcHRlciBhYm91dCB5b3VyIGNvb2tpZXMuIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTApDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgaGF2ZSBiZWVuIHBsYWNlZCB1bmRlciBnb3Zlcm5tZW50IHN1cnZlaWxsYW5jZS4iKSwNCiAgICAgICAgICAgIGxvYygiVGhlIHdob2xlIHBsYW5ldCBpcyBlbmpveWluZyB5b3VyIGNvb2tpZXMhIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTEpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiU3RyYW5nZSBjcmVhdHVyZXMgZnJvbSBuZWlnaGJvcmluZyBwbGFuZXRzIHdpc2ggdG8gdHJ5IHlvdXIgY29va2llcy4iDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiRWxkZXIgZ29kcyBmcm9tIHRoZSB3aG9sZSBjb3Ntb3MgaGF2ZSBhd29rZW4gdG8gdGFzdGUgeW91ciBjb29raWVzLiINCiAgICAgICAgICAgICkNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTIpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiQmVpbmdzIGZyb20gb3RoZXIgZGltZW5zaW9ucyBsYXBzZSBpbnRvIGV4aXN0ZW5jZSBqdXN0IHRvIGdldCBhIHRhc3RlIG9mIHlvdXIgY29va2llcy4iDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgaGF2ZSBhY2hpZXZlZCBzZW50aWVuY2UuIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTMpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiVGhlIHVuaXZlcnNlIGhhcyBub3cgdHVybmVkIGludG8gY29va2llIGRvdWdoLCB0byB0aGUgbW9sZWN1bGFyIGxldmVsLiINCiAgICAgICAgICAgICksDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJZb3VyIGNvb2tpZXMgYXJlIHJld3JpdGluZyB0aGUgZnVuZGFtZW50YWwgbGF3cyBvZiB0aGUgdW5pdmVyc2UuIg0KICAgICAgICAgICAgKQ0KICAgICAgICAgICk7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSAxNCkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJBIGxvY2FsIG5ld3Mgc3RhdGlvbiBydW5zIGEgMTAtbWludXRlIHNlZ21lbnQgYWJvdXQgeW91ciBjb29raWVzLiBTdWNjZXNzITxicj48c21hbGw+KHlvdSB3aW4gYSBjb29raWUpPC9zbWFsbD4iDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgbG9jKCJpdCdzIHRpbWUgdG8gc3RvcCBwbGF5aW5nIikNCiAgICAgICAgICApOw0KICAgICAgfQ0KDQogICAgICAvL2lmIChHYW1lLmVsZGVyV3JhdGg+MCAmJiAoR2FtZS5wbGVkZ2VzPT0wIHx8IE1hdGgucmFuZG9tKCk8MC4yKSkNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5lbGRlcldyYXRoID4gMCAmJg0KICAgICAgICAoKEdhbWUucGxlZGdlcyA9PSAwICYmIEdhbWUucmVzZXRzID09IDAgJiYgTWF0aC5yYW5kb20oKSA8IDAuMykgfHwNCiAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC4wMykNCiAgICAgICkgew0KICAgICAgICBsaXN0ID0gW107DQogICAgICAgIGlmIChHYW1lLmVsZGVyV3JhdGggPT0gMSkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBFTg0KICAgICAgICAgICAgICA/IGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG1pbGxpb25zIG9mIG9sZCBsYWRpZXMgcmVwb3J0ZWQgbWlzc2luZyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBwcm9jZXNzaW9ucyBvZiBvbGQgbGFkaWVzIHNpZ2h0ZWQgYXJvdW5kIGNvb2tpZSBmYWNpbGl0aWVzISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGZhbWlsaWVzIGFyb3VuZCB0aGUgY29udGluZW50IHJlcG9ydCBhZ2l0YXRlZCwgdHJhbnNmaXhlZCBncmFuZG1vdGhlcnMhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZG9jdG9ycyBzd2FybWVkIGJ5IGNhc2VzIG9mIG9sZCB3b21lbiB3aXRoIGdsYXNzeSBleWVzIGFuZCBhIGZvYW15IG1vdXRoISIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IG51cnNlcyByZXBvcnQgInN0cmFuZ2Ugc2NlbnQgb2YgY29va2llIGRvdWdoIiBhcm91bmQgZmVtYWxlIGVsZGVybHkgcGF0aWVudHMhJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICA6IE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKGdyYW5kbWEgaW52YXNpb24gc3RhcnQpIikpDQogICAgICAgICAgKTsNCiAgICAgICAgaWYgKEdhbWUuZWxkZXJXcmF0aCA9PSAyKQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgIEVODQogICAgICAgICAgICAgID8gY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogdG93biBpbiBkaXNhcnJheSBhcyBzdHJhbmdlIG9sZCBsYWRpZXMgYnJlYWsgaW50byBob21lcyB0byBhYmR1Y3QgaW5mYW50cyBhbmQgYmFraW5nIHV0ZW5zaWxzISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHNpZ2h0aW5ncyBvZiBvbGQgbGFkaWVzIHdpdGggZ2xvd2luZyBleWVzIHRlcnJpZnkgbG9jYWwgcG9wdWxhdGlvbiEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiByZXRpcmVtZW50IGhvbWVzIHJlcG9ydCAiZmVtYWxlIHJlc2lkZW50cyBzbG93bHkgY29uZ2VhbGluZyBpbiB0aGVpciBzZWF0cyIhJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogd2hvbGUgY29udGluZW50IHVuZGVyZ29pbmcgbWFzcyBleG9kdXMgb2Ygb2xkIGxhZGllcyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBvbGQgd29tZW4gZnJlZXplIGluIHBsYWNlIGluIHN0cmVldHMsIG9vemUgd2FybSBzdWdhcnkgc3lydXAhIiwNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICA6IE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKGdyYW5kbWEgaW52YXNpb24gcmlzZSkiKSkNCiAgICAgICAgICApOw0KICAgICAgICBpZiAoR2FtZS5lbGRlcldyYXRoID09IDMpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgRU4NCiAgICAgICAgICAgICAgPyBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBsYXJnZSAiZmxlc2ggaGlnaHdheXMiIHNjYXIgY29udGluZW50LCBzdHJldGNoIGJldHdlZW4gdmFyaW91cyBjb29raWUgZmFjaWxpdGllcyEnLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiB3cmlua2xlZCAiZmxlc2ggdGVuZHJpbHMiIHZpc2libGUgZnJvbSBzcGFjZSEnLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiByZW1haW5zIG9mICJvbGQgbGFkaWVzIiBmb3VuZCBmcm96ZW4gaW4gdGhlIG1pZGRsZSBvZiBncm93aW5nIGZsZXNoeSBzdHJ1Y3R1cmVzIScsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGFsbCBob3BlIGxvc3QgYXMgd3JpdGhpbmcgbWFzcyBvZiBmbGVzaCBhbmQgZG91Z2ggZW5ndWxmcyB3aG9sZSBjaXR5ISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG5pZ2h0bWFyZSBjb250aW51ZXMgYXMgd3JpbmtsZWQgYWNyZXMgb2YgZmxlc2ggZXhwYW5kIGF0IGFsYXJtaW5nIHNwZWVkcyEiLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgIDogTkVXUyArIGNob29zZShsb2MoIlRpY2tlciAoZ3JhbmRtYSBpbnZhc2lvbiBmdWxsKSIpKQ0KICAgICAgICAgICk7DQogICAgICB9DQoNCiAgICAgIGlmIChFTiAmJiBHYW1lLnNlYXNvbiA9PSAiZm9vbHMiKSB7DQogICAgICAgIGxpc3QgPSBbXTsNCg0KICAgICAgICBpZiAoR2FtZS5jb29raWVzRWFybmVkID49IDEwMDApDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBvZmZpY2UgY2hhaXIgaXMgcmVhbGx5IGNvbWZvcnRhYmxlLiIsDQogICAgICAgICAgICAgICAgIlByb2ZpdCdzIGluIHRoZSBhaXIhIiwNCiAgICAgICAgICAgICAgICAiQnVzaW5lc3MgbWVldGluZ3MgYXJlIHN1Y2ggYSBqb3khIiwNCiAgICAgICAgICAgICAgICAiV2hhdCBhIGdyZWF0IHZpZXcgZnJvbSB5b3VyIG9mZmljZSEiLA0KICAgICAgICAgICAgICAgICJTbWVsbCB0aGF0PyBUaGF0J3MgY2FwaXRhbGlzbSwgYmFieSEiLA0KICAgICAgICAgICAgICAgICJZb3UgdHJ1bHkgbG92ZSBhbnN3ZXJpbmcgZW1haWxzLiIsDQogICAgICAgICAgICAgICAgIldvcmtpbmcgaGFyZCwgb3IgaGFyZGx5IHdvcmtpbmc/IiwNCiAgICAgICAgICAgICAgICAiQW5vdGhlciBkYXkgaW4gcGFyYWRpc2UhIiwNCiAgICAgICAgICAgICAgICAiRXhwZW5zaXZlIGx1bmNoIHRpbWUhIiwNCiAgICAgICAgICAgICAgICAiQW5vdGhlciBnb3Zlcm5tZW50IGJhaWxvdXQgY29taW5nIHVwISBTcGxlbmRpZCEiLA0KICAgICAgICAgICAgICAgICJUaGVzZSBwcm9maXRzIGFyZSBkb2luZyB3b25kZXJmdWwgdGhpbmdzIGZvciB5b3VyIHNraW4uIiwNCiAgICAgICAgICAgICAgICAiWW91IGRheWRyZWFtIGZvciBhIG1vbWVudCBhYm91dCBhIHdvcmxkIHdpdGhvdXQgdGF4ZXMuIiwNCiAgICAgICAgICAgICAgICAiWW91J2xsIHdvcnJ5IGFib3V0IGVudmlyb25tZW50YWwgZGFtYWdlIHdoZW4geW91J3JlIGRlYWQhIiwNCiAgICAgICAgICAgICAgICAiWWF5LCBvZmZpY2Ugc3VwcGxpZXMhIiwNCiAgICAgICAgICAgICAgICAiU3dlZXQsIHRob3NlIG5ldyBzdGFwbGVycyBqdXN0IGNhbWUgaW4hIiwNCiAgICAgICAgICAgICAgICAiT2hoLCBjb2ZmZWUgYnJlYWshIiwNCiAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIllvdSd2ZSBzcGVudCB0aGUgd2hvbGUgZGF5IiwNCiAgICAgICAgICAgICAgICAiQW5vdGhlciBncmVhdCBkYXkiLA0KICAgICAgICAgICAgICAgICJGaXJzdCBvcmRlciBvZiBidXNpbmVzcyB0b2RheToiLA0KICAgICAgICAgICAgICAgICJXaHksIHlvdSB0cnVseSBlbmpveSIsDQogICAgICAgICAgICAgICAgIldoYXQgbmV4dD8gVGhhdCdzIHJpZ2h0LCIsDQogICAgICAgICAgICAgICAgIllvdSBjaGVjayB3aGF0J3MgbmV4dCBvbiB0aGUgYWdlbmRhLiBPaCBib3ksIiwNCiAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJzaWduaW5nIGNvbnRyYWN0cyIsDQogICAgICAgICAgICAgICAgICAiZmlsbGluZyBvdXQgZm9ybXMiLA0KICAgICAgICAgICAgICAgICAgInRvdWNoaW5nIGJhc2Ugd2l0aCB0aGUgdGVhbSIsDQogICAgICAgICAgICAgICAgICAiZXhhbWluaW5nIGV4Y2l0aW5nIG5ldyBwcm9zcGVjdHMiLA0KICAgICAgICAgICAgICAgICAgInBsYXlpbmcgd2l0aCB5b3VyIGRlc2sgdG95cyIsDQogICAgICAgICAgICAgICAgICAiZ2V0dGluZyBuZXcgbmFtZXBsYXRlcyBkb25lIiwNCiAgICAgICAgICAgICAgICAgICJhdHRlbmRpbmcgc2VtaW5hcnMiLA0KICAgICAgICAgICAgICAgICAgInZpZGVvY29uZmVyZW5jaW5nIiwNCiAgICAgICAgICAgICAgICAgICJoaXJpbmcgZHluYW1pYyB5b3VuZyBleGVjdXRpdmVzIiwNCiAgICAgICAgICAgICAgICAgICJtZWV0aW5nIG5ldyBpbnZlc3RvcnMiLA0KICAgICAgICAgICAgICAgICAgInVwZGF0aW5nIHlvdXIgcm9sb2RleCIsDQogICAgICAgICAgICAgICAgICAicHVtcGluZyB1cCB0aG9zZSBudW1iZXJzIiwNCiAgICAgICAgICAgICAgICAgICJwdW5jaGluZyBpbiBzb21lIG51bWJlcnMiLA0KICAgICAgICAgICAgICAgICAgImdldHRpbmcgaW52ZXN0aWdhdGVkIGZvciB3b3JrZXJzJyByaWdodHMgdmlvbGF0aW9ucyIsDQogICAgICAgICAgICAgICAgICAicmVvcmdhbml6aW5nIGRvY3VtZW50cyIsDQogICAgICAgICAgICAgICAgICAiYmVsaXR0bGluZyB1bmRlcmxpbmdzIiwNCiAgICAgICAgICAgICAgICAgICJyZXZpZXdpbmcgZW1wbG95ZWUgcGVyZm9ybWFuY2UiLA0KICAgICAgICAgICAgICAgICAgInJldmlzaW5nIGNvbXBhbnkgcG9saWNpZXMiLA0KICAgICAgICAgICAgICAgICAgImRvd25zaXppbmciLA0KICAgICAgICAgICAgICAgICAgInB1bGxpbmcgeW91cnNlbGYgdXAgYnkgeW91ciBib290c3RyYXBzIiwNCiAgICAgICAgICAgICAgICAgICJhZGp1c3RpbmcgeW91ciB0aWUiLA0KICAgICAgICAgICAgICAgICAgInBlcmZvcm1pbmcgdG90YWxseSBub3JtYWwgaHVtYW4gYWN0aXZpdGllcyIsDQogICAgICAgICAgICAgICAgICAicmVjZW50ZXJpbmcgeW91cnNlbGYgaW4gdGhlIHNjcmVhbSByb29tIiwNCiAgICAgICAgICAgICAgICAgICJpbW1hbmVudGl6aW5nIHRoZSBlc2NoYXRvbiIsDQogICAgICAgICAgICAgICAgICAic2hyZWRkaW5nIHNvbWUgc2Vuc2l0aXZlIGRvY3VtZW50cyIsDQogICAgICAgICAgICAgICAgICAiY29tcGFyaW5nIGJ1c2luZXNzIGNhcmRzIiwNCiAgICAgICAgICAgICAgICAgICJwb25kZXJpbmcgdGhlIG1lYW5pbmcgb2YgeW91ciBleGlzdGVuY2UiLA0KICAgICAgICAgICAgICAgICAgImxpc3RlbmluZyB0byB0aGUgcm9hcmluZyBlbXB0aW5lc3MgaW5zaWRlIHlvdXIgc291bCIsDQogICAgICAgICAgICAgICAgICAicGxheWluZyBtaW5pZ29sZiBpbiB5b3VyIG9mZmljZSIsDQogICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICIhIiwNCiAgICAgICAgICAgICAgIlRoZSB3b3JkIG9mIHRoZSBkYXkgaXM6ICIgKw0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAidmlyYWwiLA0KICAgICAgICAgICAgICAgICAgInNlYXJjaCBlbmdpbmUgb3B0aW1pemF0aW9uIiwNCiAgICAgICAgICAgICAgICAgICJibGFncyBhbmQgd29ic2l0ZXMiLA0KICAgICAgICAgICAgICAgICAgInNvY2lhbCBuZXR3b3JrcyIsDQogICAgICAgICAgICAgICAgICAid2ViaW5ldHRlIiwNCiAgICAgICAgICAgICAgICAgICJzdGF5Y2F0aW9uIiwNCiAgICAgICAgICAgICAgICAgICJ1c2VyIGV4cGVyaWVuY2UiLA0KICAgICAgICAgICAgICAgICAgImNyb3dkZnVuZGluZyIsDQogICAgICAgICAgICAgICAgICAiY2FyYm9uIG5ldXRyYWwiLA0KICAgICAgICAgICAgICAgICAgImJpZyBkYXRhIiwNCiAgICAgICAgICAgICAgICAgICJtYWNoaW5lIGxlYXJuaW5nIiwNCiAgICAgICAgICAgICAgICAgICJkaXNydXB0aW5nIiwNCiAgICAgICAgICAgICAgICAgICJpbmZsdWVuY2VycyIsDQogICAgICAgICAgICAgICAgICAibW9ub2NvbnNlbnN1YWwgdHJhbnNhY3Rpb25zIiwNCiAgICAgICAgICAgICAgICAgICJzdXN0YWluYWJsZSIsDQogICAgICAgICAgICAgICAgICAiZnJlZW1pdW0iLA0KICAgICAgICAgICAgICAgICAgImluY2VudGl2ZXMiLA0KICAgICAgICAgICAgICAgICAgImdyYXNzcm9vdHMiLA0KICAgICAgICAgICAgICAgICAgIndlYiAzLjAiIC8qdGhpcyB3YXMgYmVmb3JlIHRoaXMgd2hvbGUgY3J5cHRvIG1lc3MgaSdtIHNvIHNvcnJ5Ki8sDQogICAgICAgICAgICAgICAgICAibG9naXN0aWNzIiwNCiAgICAgICAgICAgICAgICAgICJsZXZlcmFnaW5nIiwNCiAgICAgICAgICAgICAgICAgICJicmFuZGluZyIsDQogICAgICAgICAgICAgICAgICAicHJvYWN0aXZlIiwNCiAgICAgICAgICAgICAgICAgICJzeW5lcmdpemluZyIsDQogICAgICAgICAgICAgICAgICAibWFya2V0IHJlc2VhcmNoIiwNCiAgICAgICAgICAgICAgICAgICJkZW1vZ3JhcGhpY3MiLA0KICAgICAgICAgICAgICAgICAgInBpZSBjaGFydHMiLA0KICAgICAgICAgICAgICAgICAgImJsb2d1bGFyIiwNCiAgICAgICAgICAgICAgICAgICJibG9ndWxhY2lvdXMiLA0KICAgICAgICAgICAgICAgICAgImJsb2dhc3RpYyIsDQogICAgICAgICAgICAgICAgICAiYXV0aGVudGljaXR5IiwNCiAgICAgICAgICAgICAgICAgICJwbGFzdGljcyIsDQogICAgICAgICAgICAgICAgICAiZWxlY3Ryb25pYyBtYWlsIiwNCiAgICAgICAgICAgICAgICAgICJjZWxsdWxhciBwaG9uZXMiLA0KICAgICAgICAgICAgICAgICAgInJhcCBtdXNpYyIsDQogICAgICAgICAgICAgICAgICAiYnVsYnMiLA0KICAgICAgICAgICAgICAgICAgImdvYmxpbml6YXRpb24iLA0KICAgICAgICAgICAgICAgICAgInN0cmFpZ2h0LXRvLWJha2VyeSIsDQogICAgICAgICAgICAgICAgICAibWljcm9iYWtlcmllcyIsDQogICAgICAgICAgICAgICAgICAiY2hvY29sYXRpdml0eSIsDQogICAgICAgICAgICAgICAgICAiZmxhdm9yZnVsbmVzcyIsDQogICAgICAgICAgICAgICAgICAidGFzdHlmaWNhdGlvbiIsDQogICAgICAgICAgICAgICAgICAic3VnYXIgb2Zmc2V0cyIsDQogICAgICAgICAgICAgICAgICAiYWN0aXZhdGVkIHdoZWF0IiwNCiAgICAgICAgICAgICAgICAgICJyZWlmaWNhdGlvbiIsDQogICAgICAgICAgICAgICAgICAiaW1tYW5lbnRpemUgdGhlIGVzY2hhdG9uIiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzLCBJIGd1ZXNzIiwNCiAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgIi4iLA0KICAgICAgICAgICAgXSkNCiAgICAgICAgICApOw0KICAgICAgICBpZiAoR2FtZS5jb29raWVzRWFybmVkID49IDEwMDAgJiYgTWF0aC5yYW5kb20oKSA8IDAuMDUpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgIklmIHlvdSBjb3VsZCBnZXQgc29tZSBtb3JlIGNvb2tpZXMgYmFrZWQsIHRoYXQnZCBiZSBncmVhdC4iLA0KICAgICAgICAgICAgICAiU28uIEFib3V0IHRob3NlIFRQUyByZXBvcnRzLiIsDQogICAgICAgICAgICAgICJIbW0sIHlvdSd2ZSBnb3Qgc29tZSB2aWRlbyB0YXBlcyB0byByZXR1cm4uIiwNCiAgICAgICAgICAgICAgIlRoZXknbGwgcGF5LiBUaGV5J2xsIGFsbCBwYXkuIiwNCiAgICAgICAgICAgICAgIllvdSBoYXZlbid0IGV2ZW4gYmVndW4gdG8gcGVhay4iLA0KICAgICAgICAgICAgICAiVGhlcmUgaXMgYW4gaWRlYSBvZiBhICIgKw0KICAgICAgICAgICAgICAgIEdhbWUuYmFrZXJ5TmFtZSArDQogICAgICAgICAgICAgICAgIi4gU29tZSBraW5kIG9mIGFic3RyYWN0aW9uLiBCdXQgdGhlcmUgaXMgbm8gcmVhbCB5b3UsIG9ubHkgYW4gZW50aXR5LiBTb21ldGhpbmcgaWxsdXNvcnkuIiwNCiAgICAgICAgICAgICAgIlRoaXMgd2FzIGEgdGVycmlibGUgaWRlYSEiLA0KICAgICAgICAgICAgXSkNCiAgICAgICAgICApOw0KDQogICAgICAgIGlmIChHYW1lLlRpY2tlck4gJSAyID09IDApIHsNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciByb2xsaW5nIHBpbnMgYXJlIHJvbGxpbmcgYW5kIHBpbm5pbmchIiwNCiAgICAgICAgICAgICAgICAiUHJvZHVjdGlvbiBpcyBzdGVhZHkhIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBvdmVucyBhcmUgZGlsaWdlbnRseSBiYWtpbmcgbW9yZSBhbmQgbW9yZSBjb29raWVzLiIsDQogICAgICAgICAgICAgICAgIllvdXIgb3ZlbnMgYnVybiBhIHdob2xlIGJhdGNoLiBBaCB3ZWxsISBTdGlsbCBnb29kLiIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRmFybSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIlNjb3JlcyBvZiBjb29raWVzIGNvbWUgb3V0IG9mIHlvdXIga2l0Y2hlbnMuIiwNCiAgICAgICAgICAgICAgICAiVG9kYXksIG5ldyByZWNydWl0cyBhcmUgam9pbmluZyB5b3VyIGtpdGNoZW5zISIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRmFjdG9yeSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIllvdXIgZmFjdG9yaWVzIGFyZSBwcm9kdWNpbmcgYW4gdW5lbmRpbmcgc3RyZWFtIG9mIGJha2VkIGdvb2RzLiIsDQogICAgICAgICAgICAgICAgIllvdXIgZmFjdG9yeSB3b3JrZXJzIGRlY2lkZSB0byBnbyBvbiBzdHJpa2UhIiwNCiAgICAgICAgICAgICAgICAiSXQncyBzYWZldHkgaW5zcGVjdGlvbiBkYXkgaW4geW91ciBmYWN0b3JpZXMuIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJNaW5lIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBzZWNyZXQgcmVjaXBlcyBhcmUga2VwdCBzYWZlbHkgaW5zaWRlIGEgZ2lhbnQgdW5kZXJncm91bmQgdmF1bHQuIiwNCiAgICAgICAgICAgICAgICAiWW91ciBjaGVmcyBhcmUgd29ya2luZyBvbiBuZXcgc2VjcmV0IHJlY2lwZXMhIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJTaGlwbWVudCJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIllvdXIgc3VwZXJtYXJrZXRzIGFyZSBidXN0bGluZyB3aXRoIGhhcHB5LCBodW5ncnkgY3VzdG9tZXJzLiIsDQogICAgICAgICAgICAgICAgIllvdXIgc3VwZXJtYXJrZXRzIGFyZSBmdWxsIG9mIGNvb2tpZSBtZXJjaCEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkFsY2hlbXkgbGFiIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiSXQncyBhIG5ldyB0cmFkaW5nIGRheSBhdCB0aGUgc3RvY2sgZXhjaGFuZ2UsIGFuZCB0cmFkZXJzIGNhbid0IGdldCBlbm91Z2ggb2YgeW91ciBzaGFyZXMhIiwNCiAgICAgICAgICAgICAgICAiWW91ciBzdG9jayBpcyBkb3VibGluZyBpbiB2YWx1ZSBieSB0aGUgbWludXRlISIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siUG9ydGFsIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91IGp1c3QgcmVsZWFzZWQgYSBuZXcgVFYgc2hvdyBlcGlzb2RlISIsDQogICAgICAgICAgICAgICAgIllvdXIgY29va2llLXRoZW1lZCBUViBzaG93IGlzIGJlaW5nIGFkYXB0ZWQgaW50byBhIG5ldyBtb3ZpZSEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIlRpbWUgbWFjaGluZSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIllvdXIgdGhlbWUgcGFya3MgYXJlIGRvaW5nIHdlbGwgLSBwdWRkbGVzIG9mIHZvbWl0IGFuZCByb2xsZXItY29hc3RlciBjYXN1YWx0aWVzIGFyZSBiZWluZyBzd2VwdCB1bmRlciB0aGUgcnVnISIsDQogICAgICAgICAgICAgICAgIlZpc2l0b3JzIGFyZSBzdHVmZmluZyB0aGVtc2VsdmVzIHdpdGggY29va2llcyBiZWZvcmUgcmlkaW5nIHlvdXIgcm9sbGVyLWNvYXN0ZXJzLiBZb3UgbWlnaHQgd2FudCB0byBoaXJlIG1vcmUgY2xlYW4tdXAgY3Jld3MuIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJBbnRpbWF0dGVyIGNvbmRlbnNlciJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIkNvb2tpZWNvaW4gaXMgb2ZmaWNpYWxseSB0aGUgbW9zdCBtaW5lZCBkaWdpdGFsIGN1cnJlbmN5IGluIHRoZSBoaXN0b3J5IG9mIG1hbmtpbmQhIiwNCiAgICAgICAgICAgICAgICAiQ29va2llY29pbiBwaXJhY3kgaXMgcmFtcGFudCEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIlByaXNtIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBjb3Jwb3JhdGUgbmF0aW9ucyBqdXN0IGdhaW5lZCBhIG5ldyBwYXJsaWFtZW50ISIsDQogICAgICAgICAgICAgICAgIllvdSd2ZSBqdXN0IGFubmV4ZWQgYSBuZXcgbmF0aW9uISIsDQogICAgICAgICAgICAgICAgIkEgbmV3IG5hdGlvbiBqb2lucyB0aGUgZ3JhbmQgY29va2llIGNvbmdsb21lcmF0ZSEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkNoYW5jZW1ha2VyIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBpbnRlcmdhbGFjdGljIGZlZGVyYXRpb24gb2YgY29va2llLXNwb25zb3JlZCBwbGFuZXRzIHJlcG9ydHMgcmVjb3JkLWJyZWFraW5nIHByb2ZpdHMhIiwNCiAgICAgICAgICAgICAgICAiQmlsbGlvbnMgb2YgdW53YXNoZWQgYWxpZW5zIGFyZSBwbGVhc2VkIHRvIGpvaW4geW91ciB3b3JrZm9yY2UgYXMgeW91IGFubmV4IHRoZWlyIHBsYW5ldCEiLA0KICAgICAgICAgICAgICAgICJOZXcgdG9sbCBvcGVuZWQgb24gaW50ZXJzdGVsbGFyIGhpZ2h3YXksIGZ1bm5lbGxpbmcgbW9yZSBwcm9maXRzIGludG8gdGhlIGNvb2tpZSBlY29ub215ISIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRnJhY3RhbCBlbmdpbmUiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICJZb3VyIGNvb2tpZS1iYXNlZCBwb2xpdGljYWwgcGFydHkgaXMgZG9pbmcgZmFudGFzdGljIGluIHRoZSBwb2xscyEiLA0KICAgICAgICAgICAgICAgICJOZXcgcHJvLWNvb2tpZSBsYXcgcGFzc2VzIHdpdGhvdXQgYSBoaXRjaCB0aGFua3MgdG8geW91ciBmaXJtIGdyYXNwIG9mIHRoZSBwb2xpdGljYWwgZWNvc3lzdGVtISIsDQogICAgICAgICAgICAgICAgIllvdXIgYXBwb2ludGVkIHNlbmF0b3JzIGFyZSBvdmVydHVybmluZyBjb29raWUgYmFucyBsZWZ0IGFuZCByaWdodCEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkphdmFzY3JpcHQgY29uc29sZSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIkNvb2tpZXMgYXJlIG5vdyBvbmUgb2YgdGhlIGRlZmluaW5nIGFzcGVjdHMgb2YgbWFua2luZCEgQ29uZ3JhdHVsYXRpb25zISIsDQogICAgICAgICAgICAgICAgIlRpbWUgdHJhdmVsZXJzIHJlcG9ydCB0aGF0IHRoaXMgZXJhIHdpbGwgbGF0ZXIgY29tZSB0byBiZSBrbm93biwgdGhhbmtzIHRvIHlvdSwgYXMgdGhlIGNvb2tpZSBtaWxsZW5uaXVtISIsDQogICAgICAgICAgICAgICAgIkNvb2tpZXMgbm93IGRlZXBseSByb290ZWQgaW4gaHVtYW4gY3VsdHVyZSwgbGlrZWx5IHB1enpsaW5nIGZ1dHVyZSBoaXN0b3JpYW5zISIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siSWRsZXZlcnNlIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiUHVibGljIGFnaGFzdCBhcyBhbGwgcmVtYWluaW5nIGFzcGVjdHMgb2YgdGhlaXIgbGl2ZXMgb3ZlcnRha2VuIGJ5IHVuaXZlcnNhbCBjb29raWUgaW5kdXN0cnkhIiwNCiAgICAgICAgICAgICAgICAiRXZlcnkgc2luZ2xlIHByb2R1Y3QgY3VycmVudGx5IHNvbGQgaW4gdGhlIG9ic2VydmFibGUgdW5pdmVyc2UgY2FuIGJlIHRyYWNlZCBiYWNrIHRvIHlvdXIgY29tcGFueSEgQW5kIHRoYXQncyBhIGdvb2QgdGhpbmcuIiwNCiAgICAgICAgICAgICAgICAiQW50aXRydXN0IGxhd3MgbGV0IG91dCBhIGhlbHBsZXNzIHdoaW1wZXIgYmVmb3JlIGJlaW5nIGVuZ3VsZmVkIGJ5IHlvdXIgc3ByYXdsaW5nIGVtcGlyZSEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkNvcnRleCBiYWtlciJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIkJvbGQgbmV3IGxhdyBwcm9wb3NhbCB3b3VsZCBncmFudCBkZWZhdWx0IG93bmVyc2hpcCBvZiBldmVyeSBuZXcgaWRlYSBieSBhbnlvbmUgYW55d2hlcmUgdG8gIiArDQogICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKw0KICAgICAgICAgICAgICAgICAgIidzIGJha2VyeSEiLA0KICAgICAgICAgICAgICAgICJCYWtlcnkgdGhpbmsgdGFua3MgYWNjaWRlbnRhbGx5IHJlaW52ZW50IGNvb2tpZXMgZm9yIHRoZSA1N3RoIHRpbWUgdGhpcyB3ZWVrISIsDQogICAgICAgICAgICAgICAgIkJha2VyeSB0aGluayB0YW5rcyBpbnZlbnQgZW50aXJlIG5ldyBmb3JtIG9mIGh1bWFuIGNvbW11bmljYXRpb24gdG8gYWR2ZXJ0aXNlIGFuZCBib29zdCBjb29raWUgc2FsZXMhIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAobG9yZVByb2dyZXNzIDw9IDApDQogICAgICAgICAgbGlzdC5wdXNoKCJTdWNoIGEgZ3JhbmQgZGF5IHRvIGJlZ2luIGEgbmV3IGJ1c2luZXNzLiIpOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMSkgbGlzdC5wdXNoKCJZb3UncmUgYmFraW5nIHVwIGEgc3Rvcm0hIik7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSAyKQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICJZb3UgYXJlIGNvbmZpZGVudCB0aGF0IG9uZSBkYXksIHlvdXIgY29va2llIGNvbXBhbnkgd2lsbCBiZSB0aGUgZ3JlYXRlc3Qgb24gdGhlIG1hcmtldCEiDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDMpIGxpc3QucHVzaCgiQnVzaW5lc3MgaXMgcGlja2luZyB1cCEiKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDQpDQogICAgICAgICAgbGlzdC5wdXNoKCJZb3UncmUgbWFraW5nIHNhbGVzIGxlZnQgYW5kIHJpZ2h0ISIpOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gNSkNCiAgICAgICAgICBsaXN0LnB1c2goIkV2ZXJ5b25lIHdhbnRzIHRvIGJ1eSB5b3VyIGNvb2tpZXMhIik7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSA2KQ0KICAgICAgICAgIGxpc3QucHVzaCgiWW91IGFyZSBub3cgc3BlbmRpbmcgbW9zdCBvZiB5b3VyIGRheSBzaWduaW5nIGNvbnRyYWN0cyEiKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDcpDQogICAgICAgICAgbGlzdC5wdXNoKCdZb3VcJ3ZlIGJlZW4gZWxlY3RlZCAiYnVzaW5lc3MgdHljb29uIG9mIHRoZSB5ZWFyIiEnKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDgpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgIllvdXIgY29va2llcyBhcmUgYSB3b3JsZHdpZGUgc2Vuc2F0aW9uISBXZWxsIGRvbmUsIG9sZCBjaGFwISINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gOSkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAiWW91ciBicmFuZCBoYXMgbWFkZSBpdHMgd2F5IGludG8gcG9wdWxhciBjdWx0dXJlLiBDaGlsZHJlbiByZWNpdGUgeW91ciBzbG9nYW5zIGFuZCBhZHVsdHMgcmVtaW5pc2NlIHRoZW0gZm9uZGx5ISINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTApDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgIkEgYnVzaW5lc3MgZGF5IGxpa2UgYW55IG90aGVyLiBJdCdzIGdvb2QgdG8gYmUgYXQgdGhlIHRvcCEiDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDExKQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICJZb3UgbG9vayBiYWNrIG9uIHlvdXIgY2FyZWVyLiBJdCdzIGJlZW4gYSBmYXNjaW5hdGluZyBqb3VybmV5LCBidWlsZGluZyB5b3VyIGJha2luZyBlbXBpcmUgZnJvbSB0aGUgZ3JvdW5kIHVwLiINCiAgICAgICAgICApOw0KICAgICAgfQ0KDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUubW9kSG9va3NbInRpY2tlciJdLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHZhciBhcnIgPSBHYW1lLm1vZEhvb2tzWyJ0aWNrZXIiXVtpXSgpOw0KICAgICAgICBpZiAoYXJyKSBsaXN0ID0gbGlzdC5jb25jYXQoYXJyKTsNCiAgICAgIH0NCg0KICAgICAgR2FtZS5UaWNrZXJFZmZlY3QgPSAwOw0KDQogICAgICBpZiAoDQogICAgICAgICFtYW51YWwgJiYNCiAgICAgICAgR2FtZS5UID4gR2FtZS5mcHMgKiAxMCAmJg0KICAgICAgICBHYW1lLkhhcygiRm9ydHVuZSBjb29raWVzIikgJiYNCiAgICAgICAgTWF0aC5yYW5kb20oKSA8IChHYW1lLkhhc0FjaGlldigiTyBGb3J0dW5hIikgPyAwLjA0IDogMC4wMikNCiAgICAgICkgew0KICAgICAgICB2YXIgZm9ydHVuZXMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlRpZXJzWyJmb3J0dW5lIl0udXBncmFkZXMpIHsNCiAgICAgICAgICB2YXIgaXQgPSBHYW1lLlRpZXJzWyJmb3J0dW5lIl0udXBncmFkZXNbaV07DQogICAgICAgICAgaWYgKCFHYW1lLkhhc1VubG9ja2VkKGl0Lm5hbWUpKSBmb3J0dW5lcy5wdXNoKGl0KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghR2FtZS5mb3J0dW5lR0MpIGZvcnR1bmVzLnB1c2goImZvcnR1bmVHQyIpOw0KICAgICAgICBpZiAoIUdhbWUuZm9ydHVuZUNQUykgZm9ydHVuZXMucHVzaCgiZm9ydHVuZUNQUyIpOw0KDQogICAgICAgIGlmIChmb3J0dW5lcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgbGlzdCA9IFtdOw0KICAgICAgICAgIHZhciBtZSA9IGNob29zZShmb3J0dW5lcyk7DQogICAgICAgICAgR2FtZS5UaWNrZXJFZmZlY3QgPSB7IHR5cGU6ICJmb3J0dW5lIiwgc3ViOiBtZSB9Ow0KDQogICAgICAgICAgaWYgKG1lID09ICJmb3J0dW5lR0MiKQ0KICAgICAgICAgICAgbWUgPSBsb2MoDQogICAgICAgICAgICAgICJUb2RheSBpcyB5b3VyIGx1Y2t5IGRheSEiDQogICAgICAgICAgICApOyAvKjxicj5DbGljayBoZXJlIGZvciBhIGdvbGRlbiBjb29raWUuJzsqLw0KICAgICAgICAgIGVsc2UgaWYgKG1lID09ICJmb3J0dW5lQ1BTIikgew0KICAgICAgICAgICAgTWF0aC5zZWVkcmFuZG9tKEdhbWUuc2VlZCArICItZm9ydHVuZSIpOw0KICAgICAgICAgICAgbWUgPQ0KICAgICAgICAgICAgICBsb2MoIllvdXIgbHVja3kgbnVtYmVycyBhcmU6IikgKw0KICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApICsNCiAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArDQogICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKw0KICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICBNYXRoLmZsb29yKA0KICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAxMDANCiAgICAgICAgICAgICAgKSAvKisnPGJyPkNsaWNrIGhlcmUgdG8gZ2FpbiBvbmUgaG91ciBvZiB5b3VyIENwUy4nKi87DQogICAgICAgICAgICBNYXRoLnNlZWRyYW5kb20oKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKEVOKSB7DQogICAgICAgICAgICAgIG1lID0NCiAgICAgICAgICAgICAgICBtZS5kbmFtZS5zdWJzdHJpbmcobWUubmFtZS5pbmRleE9mKCIjIikpICsNCiAgICAgICAgICAgICAgICAiIDogIiArDQogICAgICAgICAgICAgICAgbWUuYmFzZURlc2Muc3Vic3RyaW5nKG1lLmJhc2VEZXNjLmluZGV4T2YoIjxxPiIpICsgMyk7DQogICAgICAgICAgICAgIG1lID0gbWUuc3Vic3RyaW5nKDAsIG1lLmxlbmd0aCAtIDQpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChtZS5idWlsZGluZ1RpZSkNCiAgICAgICAgICAgICAgbWUgPQ0KICAgICAgICAgICAgICAgIG1lLmRuYW1lICsNCiAgICAgICAgICAgICAgICAiIDogIiArDQogICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgIk5ldmVyIGZvcmdldCB5b3VyICUxLiIsDQogICAgICAgICAgICAgICAgICAgICJQYXkgY2xvc2UgYXR0ZW50aW9uIHRvIHRoZSBodW1ibGUgJTEuIiwNCiAgICAgICAgICAgICAgICAgICAgIllvdSd2ZSBiZWVuIG5lZ2xlY3RpbmcgeW91ciAlMS4iLA0KICAgICAgICAgICAgICAgICAgICAiUmVtZW1iZXIgdG8gdmlzaXQgeW91ciAlMSBzb21ldGltZXMuIiwNCiAgICAgICAgICAgICAgICAgIF0pLA0KICAgICAgICAgICAgICAgICAgbWUuYnVpbGRpbmdUaWUuc2luZ2xlDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgbWUgPQ0KICAgICAgICAgICAgICAgIG1lLmRuYW1lICsNCiAgICAgICAgICAgICAgICAiIDogIiArDQogICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgIllvdSBkb24ndCBrbm93IHdoYXQgeW91IGhhdmUgdW50aWwgeW91J3ZlIGxvc3QgaXQuIiwNCiAgICAgICAgICAgICAgICAgICAgIlJlbWVtYmVyIHRvIHRha2UgYnJlYWtzLiIsDQogICAgICAgICAgICAgICAgICAgICJIZXksIHdoYXQncyB1cC4gSSdtIGEgZm9ydHVuZSBjb29raWUuIiwNCiAgICAgICAgICAgICAgICAgICAgIllvdSB0aGluayB5b3UgaGF2ZSBpdCBiYWQ/IExvb2sgYXQgbWUuIiwNCiAgICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgICAgbWUgPQ0KICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJmb3J0dW5lIj48ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQtcG9zaXRpb246JyArDQogICAgICAgICAgICAtMjkgKiA0OCArDQogICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAtOCAqIDQ4ICsNCiAgICAgICAgICAgICdweDt0cmFuc2Zvcm06c2NhbGUoMC41KTttYXJnaW46LTE2cHg7cG9zaXRpb246cmVsYXRpdmU7bGVmdDotNHB4O3RvcDotMnB4OyI+PC9kaXY+JyArDQogICAgICAgICAgICBtZSArDQogICAgICAgICAgICAiPC9zcGFuPiI7DQogICAgICAgICAgbGlzdCA9IFttZV07DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgaWYgKEdhbWUud2luZG93VyA8IEdhbWUudGlja2VyVG9vTmFycm93KQ0KICAgICAgICBsaXN0ID0gWw0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJ0cmFuc2Zvcm06c2NhbGUoMC44LDEuMik7Ij4nICsNCiAgICAgICAgICAgIE5FV1MgKw0KICAgICAgICAgICAgKEVOID8gImhlbHAhIiA6IGxvYygiaGVscCBtZSEiKSkgKw0KICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgIF07DQoNCiAgICAgIEdhbWUuVGlja2VyQWdlID0gR2FtZS5mcHMgKiAxMDsNCiAgICAgIEdhbWUuVGlja2VyID0gY2hvb3NlKGxpc3QpOw0KICAgICAgR2FtZS5BZGRUb0xvZyhHYW1lLlRpY2tlcik7DQogICAgICBHYW1lLlRpY2tlck4rKzsNCiAgICAgIEdhbWUuVGlja2VyRHJhdygpOw0KICAgIH07DQogICAgR2FtZS50aWNrZXJMID0gbCgiY29tbWVudHNUZXh0MSIpOw0KICAgIEdhbWUudGlja2VyQmVsb3dMID0gbCgiY29tbWVudHNUZXh0MiIpOw0KICAgIEdhbWUudGlja2VyVG9vTmFycm93ID0gOTAwOw0KICAgIEdhbWUuVGlja2VyRHJhdyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIGlmIChHYW1lLlRpY2tlciAhPSAiIikgc3RyID0gR2FtZS5UaWNrZXI7DQogICAgICBHYW1lLnRpY2tlckJlbG93TC5pbm5lckhUTUwgPSBHYW1lLnRpY2tlckwuaW5uZXJIVE1MOw0KICAgICAgR2FtZS50aWNrZXJMLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgR2FtZS50aWNrZXJCZWxvd0wuY2xhc3NOYW1lID0gImNvbW1lbnRzVGV4dCI7DQogICAgICB2b2lkIEdhbWUudGlja2VyQmVsb3dMLm9mZnNldFdpZHRoOw0KICAgICAgR2FtZS50aWNrZXJCZWxvd0wuY2xhc3NOYW1lID0gImNvbW1lbnRzVGV4dCByaXNpbmdBd2F5IjsNCiAgICAgIEdhbWUudGlja2VyTC5jbGFzc05hbWUgPSAiY29tbWVudHNUZXh0IjsNCiAgICAgIHZvaWQgR2FtZS50aWNrZXJMLm9mZnNldFdpZHRoOw0KICAgICAgR2FtZS50aWNrZXJMLmNsYXNzTmFtZSA9ICJjb21tZW50c1RleHQgcmlzaW5nVXAiOw0KICAgIH07DQogICAgQWRkRXZlbnQoR2FtZS50aWNrZXJMLCAiY2xpY2siLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgIEdhbWUuVGlja2VyID0gIiI7DQogICAgICBHYW1lLlRpY2tlckNsaWNrcysrOw0KICAgICAgaWYgKEdhbWUud2luZG93VyA8IEdhbWUudGlja2VyVG9vTmFycm93KSB7DQogICAgICAgIEdhbWUuV2luKCJTdGlmbGluZyB0aGUgcHJlc3MiKTsNCiAgICAgIH0gZWxzZSBpZiAoR2FtZS5UaWNrZXJDbGlja3MgPj0gNTApIHsNCiAgICAgICAgR2FtZS5XaW4oIlRhYmxvaWQgYWRkaWN0aW9uIik7DQogICAgICB9DQoNCiAgICAgIGlmIChHYW1lLlRpY2tlckVmZmVjdCAmJiBHYW1lLlRpY2tlckVmZmVjdC50eXBlID09ICJmb3J0dW5lIikgew0KICAgICAgICBQbGF5U291bmQoInNuZC9mb3J0dW5lLm1wMyIsIDEpOw0KICAgICAgICBHYW1lLlNwYXJrbGVBdChHYW1lLm1vdXNlWCwgR2FtZS5tb3VzZVkpOw0KICAgICAgICB2YXIgZWZmZWN0ID0gR2FtZS5UaWNrZXJFZmZlY3Quc3ViOw0KICAgICAgICBpZiAoZWZmZWN0ID09ICJmb3J0dW5lR0MiKSB7DQogICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICBsb2MoIkZvcnR1bmUhIiksDQogICAgICAgICAgICBsb2MoIkEgZ29sZGVuIGNvb2tpZSBoYXMgYXBwZWFyZWQuIiksDQogICAgICAgICAgICBbMTAsIDMyXQ0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS5mb3J0dW5lR0MgPSAxOw0KICAgICAgICAgIHZhciBuZXdTaGltbWVyID0gbmV3IEdhbWUuc2hpbW1lcigiZ29sZGVuIiwgeyBub1dyYXRoOiB0cnVlIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKGVmZmVjdCA9PSAiZm9ydHVuZUNQUyIpIHsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgIGxvYygiRm9ydHVuZSEiKSwNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIllvdSBnYWluIDxiPm9uZSBob3VyPC9iPiBvZiB5b3VyIENwUyAoY2FwcGVkIGF0IGRvdWJsZSB5b3VyIGJhbmspLiINCiAgICAgICAgICAgICksDQogICAgICAgICAgICBbMTAsIDMyXQ0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS5mb3J0dW5lQ1BTID0gMTsNCiAgICAgICAgICBHYW1lLkVhcm4oTWF0aC5taW4oR2FtZS5jb29raWVzUHMgKiA2MCAqIDYwLCBHYW1lLmNvb2tpZXMpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgIGVmZmVjdC5kbmFtZSwNCiAgICAgICAgICAgIGxvYygiWW91J3ZlIHVubG9ja2VkIGEgbmV3IHVwZ3JhZGUuIiksDQogICAgICAgICAgICBlZmZlY3QuaWNvbg0KICAgICAgICAgICk7DQogICAgICAgICAgZWZmZWN0LnVubG9jaygpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIEdhbWUuVGlja2VyRWZmZWN0ID0gMDsNCiAgICB9KTsNCg0KICAgIEdhbWUuTG9nID0gW107DQogICAgR2FtZS5BZGRUb0xvZyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBHYW1lLkxvZy51bnNoaWZ0KHdoYXQpOw0KICAgICAgaWYgKEdhbWUuTG9nLmxlbmd0aCA+IDEwMCkgR2FtZS5Mb2cucG9wKCk7DQogICAgfTsNCg0KICAgIEdhbWUudmFuaWxsYSA9IDE7DQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCUJVSUxESU5HUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUubGFzdCA9IDA7DQoNCiAgICBHYW1lLnN0b3JlVG9SZWZyZXNoID0gMTsNCiAgICBHYW1lLnByaWNlSW5jcmVhc2UgPSAxLjE1Ow0KICAgIEdhbWUuYnV5QnVsayA9IDE7DQogICAgR2FtZS5idXlNb2RlID0gMTsgLy8xIGZvciBidXksIC0xIGZvciBzZWxsDQogICAgR2FtZS5idXlCdWxrT2xkID0gR2FtZS5idXlCdWxrOyAvL3VzZWQgdG8gdW5kbyBjaGFuZ2VzIGZyb20gaG9sZGluZyBTaGlmdCBvciBDdHJsDQogICAgR2FtZS5idXlCdWxrU2hvcnRjdXQgPSAwOyAvL2FyZSB3ZSBwcmVzc2luZyBTaGlmdCBvciBDdHJsPw0KDQogICAgR2FtZS5PYmplY3RzID0ge307DQogICAgR2FtZS5PYmplY3RzQnlJZCA9IFtdOw0KICAgIEdhbWUuT2JqZWN0c04gPSAwOw0KICAgIEdhbWUuQnVpbGRpbmdzT3duZWQgPSAwOw0KICAgIEdhbWUuT2JqZWN0ID0gZnVuY3Rpb24gKA0KICAgICAgbmFtZSwNCiAgICAgIGNvbW1vbk5hbWUsDQogICAgICBkZXNjLA0KICAgICAgaWNvbiwNCiAgICAgIGljb25Db2x1bW4sDQogICAgICBhcnQsDQogICAgICBwcmljZSwNCiAgICAgIGNwcywNCiAgICAgIGJ1eUZ1bmN0aW9uDQogICAgKSB7DQogICAgICB0aGlzLmlkID0gR2FtZS5PYmplY3RzTjsNCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7DQogICAgICB0aGlzLmRuYW1lID0gbmFtZTsNCiAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSB0aGlzLm5hbWU7DQogICAgICBjb21tb25OYW1lID0gY29tbW9uTmFtZS5zcGxpdCgifCIpOw0KICAgICAgdGhpcy5zaW5nbGUgPSBjb21tb25OYW1lWzBdOw0KICAgICAgdGhpcy5wbHVyYWwgPSBjb21tb25OYW1lWzFdOw0KICAgICAgdGhpcy5ic2luZ2xlID0gdGhpcy5zaW5nbGU7DQogICAgICB0aGlzLmJwbHVyYWwgPSB0aGlzLnBsdXJhbDsgLy9zdG9yZSB1bnRyYW5zbGF0ZWQgYXMgd2UgdXNlIHRob3NlIHRvbw0KICAgICAgdGhpcy5hY3Rpb25OYW1lID0gY29tbW9uTmFtZVsyXTsNCiAgICAgIHRoaXMuZXh0cmFOYW1lID0gY29tbW9uTmFtZVszXTsNCiAgICAgIHRoaXMuZXh0cmFQbHVyYWwgPSBjb21tb25OYW1lWzRdOw0KICAgICAgdGhpcy5kZXNjID0gZGVzYzsNCiAgICAgIGlmICh0cnVlKSB7DQogICAgICAgIC8vaWYgKEVOKQ0KICAgICAgICB0aGlzLmRuYW1lID0gbG9jKHRoaXMubmFtZSk7DQogICAgICAgIHRoaXMuc2luZ2xlID0gbG9jKHRoaXMuc2luZ2xlKTsNCiAgICAgICAgdGhpcy5wbHVyYWwgPSBsb2ModGhpcy5wbHVyYWwpOw0KICAgICAgICB0aGlzLmRlc2MgPSBsb2MoRmluZExvY1N0cmluZ0J5UGFydCh0aGlzLm5hbWUgKyAiIHF1b3RlIikpOw0KICAgICAgfQ0KICAgICAgdGhpcy5iYXNlUHJpY2UgPSBwcmljZTsNCiAgICAgIHRoaXMucHJpY2UgPSB0aGlzLmJhc2VQcmljZTsNCiAgICAgIHRoaXMuYnVsa1ByaWNlID0gdGhpcy5wcmljZTsNCiAgICAgIHRoaXMuY3BzID0gY3BzOw0KICAgICAgdGhpcy5iYXNlQ3BzID0gdGhpcy5jcHM7DQogICAgICB0aGlzLm1vdXNlT24gPSBmYWxzZTsNCiAgICAgIHRoaXMubW91c2VQb3MgPSBbLTEwMCwgLTEwMF07DQogICAgICB0aGlzLnByb2R1Y3Rpb25BY2hpZXZzID0gW107DQoNCiAgICAgIHRoaXMubiA9IHRoaXMuaWQ7DQogICAgICBpZiAodGhpcy5uICE9IDApIHsNCiAgICAgICAgLy9uZXcgYXV0b21hdGVkIHByaWNlIGFuZCBDcFMgY3VydmVzDQogICAgICAgIC8vdGhpcy5iYXNlQ3BzPU1hdGguY2VpbCgoKHRoaXMubiowLjUpKk1hdGgucG93KHRoaXMubioxLHRoaXMubiowLjkpKSoxMCkvMTA7DQogICAgICAgIC8vdGhpcy5iYXNlQ3BzPU1hdGguY2VpbCgoTWF0aC5wb3codGhpcy5uKjEsdGhpcy5uKjAuNSsyLjM1KSkqMTApLzEwOy8vYnkgYSBmb3J0dW5hdGUgY29pbmNpZGVuY2UsIHRoaXMgZ2l2ZXMgdGhlIDNyZCwgNHRoIGFuZCA1dGggYnVpbGRpbmdzIGEgQ3BTIG9mIDEwLCA2OSBhbmQgNDIwDQogICAgICAgIHRoaXMuYmFzZUNwcyA9DQogICAgICAgICAgTWF0aC5jZWlsKE1hdGgucG93KHRoaXMubiAqIDEsIHRoaXMubiAqIDAuNSArIDIpICogMTApIC8gMTA7IC8vMC40NSB1c2VkIHRvIGJlIDAuNQ0KICAgICAgICAvL3RoaXMuYmFzZUNwcz1NYXRoLmNlaWwoKE1hdGgucG93KHRoaXMubioxLHRoaXMubiowLjQ1KzIuMTApKSoxMCkvMTA7DQogICAgICAgIC8vY2xhbXAgMTQsNDY3LDE5OSB0byAxNCwwMDAsMDAwICh0aGVyZSdzIHByb2JhYmx5IGEgbW9yZSBlbGVnYW50IHdheSB0byBkbyB0aGF0KQ0KICAgICAgICB2YXIgZGlnaXRzID0NCiAgICAgICAgICBNYXRoLnBvdygNCiAgICAgICAgICAgIDEwLA0KICAgICAgICAgICAgTWF0aC5jZWlsKE1hdGgubG9nKE1hdGguY2VpbCh0aGlzLmJhc2VDcHMpKSAvIE1hdGguTE4xMCkNCiAgICAgICAgICApIC8gMTAwOw0KICAgICAgICB0aGlzLmJhc2VDcHMgPSBNYXRoLnJvdW5kKHRoaXMuYmFzZUNwcyAvIGRpZ2l0cykgKiBkaWdpdHM7DQoNCiAgICAgICAgdGhpcy5iYXNlUHJpY2UgPQ0KICAgICAgICAgICh0aGlzLm4gKiAxICsgOSArICh0aGlzLm4gPCA1ID8gMCA6IE1hdGgucG93KHRoaXMubiAtIDUsIDEuNzUpICogNSkpICoNCiAgICAgICAgICBNYXRoLnBvdygxMCwgdGhpcy5uKSAqDQogICAgICAgICAgTWF0aC5tYXgoMSwgdGhpcy5uIC0gMTQpOw0KICAgICAgICAvL3RoaXMuYmFzZVByaWNlPSh0aGlzLm4qMi41KzcuNSkqTWF0aC5wb3coMTAsdGhpcy5uKTsNCiAgICAgICAgdmFyIGRpZ2l0cyA9DQogICAgICAgICAgTWF0aC5wb3coDQogICAgICAgICAgICAxMCwNCiAgICAgICAgICAgIE1hdGguY2VpbChNYXRoLmxvZyhNYXRoLmNlaWwodGhpcy5iYXNlUHJpY2UpKSAvIE1hdGguTE4xMCkNCiAgICAgICAgICApIC8gMTAwOw0KICAgICAgICB0aGlzLmJhc2VQcmljZSA9IE1hdGgucm91bmQodGhpcy5iYXNlUHJpY2UgLyBkaWdpdHMpICogZGlnaXRzOw0KICAgICAgICBpZiAodGhpcy5pZCA+PSAxNikgdGhpcy5iYXNlUHJpY2UgKj0gMTA7DQogICAgICAgIGlmICh0aGlzLmlkID49IDE3KSB0aGlzLmJhc2VQcmljZSAqPSAxMDsNCiAgICAgICAgaWYgKHRoaXMuaWQgPj0gMTgpIHRoaXMuYmFzZVByaWNlICo9IDEwOw0KICAgICAgICBpZiAodGhpcy5pZCA+PSAxOSkgdGhpcy5iYXNlUHJpY2UgKj0gMTA7DQogICAgICAgIHRoaXMucHJpY2UgPSB0aGlzLmJhc2VQcmljZTsNCiAgICAgICAgdGhpcy5idWxrUHJpY2UgPSB0aGlzLnByaWNlOw0KICAgICAgfQ0KDQogICAgICB0aGlzLnRvdGFsQ29va2llcyA9IDA7DQogICAgICB0aGlzLnN0b3JlZENwcyA9IDA7DQogICAgICB0aGlzLnN0b3JlZFRvdGFsQ3BzID0gMDsNCiAgICAgIHRoaXMuaWNvbiA9IGljb247DQogICAgICB0aGlzLmljb25Db2x1bW4gPSBpY29uQ29sdW1uOw0KICAgICAgdGhpcy5hcnQgPSBhcnQ7DQogICAgICBpZiAoYXJ0LmJhc2UpIHsNCiAgICAgICAgYXJ0LnBpYyA9IGFydC5iYXNlICsgIi5wbmciOw0KICAgICAgICBhcnQuYmcgPSBhcnQuYmFzZSArICJCYWNrZ3JvdW5kLnBuZyI7DQogICAgICB9DQogICAgICB0aGlzLmJ1eUZ1bmN0aW9uID0gYnV5RnVuY3Rpb247DQogICAgICB0aGlzLmxvY2tlZCA9IDE7DQogICAgICB0aGlzLmxldmVsID0gMDsNCiAgICAgIHRoaXMudmFuaWxsYSA9IEdhbWUudmFuaWxsYTsNCg0KICAgICAgdGhpcy50aWVyZWRVcGdyYWRlcyA9IHt9Ow0KICAgICAgdGhpcy50aWVyZWRBY2hpZXZzID0ge307DQogICAgICB0aGlzLnN5bmVyZ2llcyA9IFtdOw0KICAgICAgdGhpcy5mb3J0dW5lID0gMDsNCg0KICAgICAgdGhpcy5hbW91bnQgPSAwOw0KICAgICAgdGhpcy5ib3VnaHQgPSAwOw0KICAgICAgdGhpcy5oaWdoZXN0ID0gMDsNCiAgICAgIHRoaXMuZnJlZSA9IDA7DQoNCiAgICAgIHRoaXMuZWFjaEZyYW1lID0gMDsNCg0KICAgICAgdGhpcy5taW5pZ2FtZVVybCA9IDA7IC8vaWYgdGhpcyBpcyBkZWZpbmVkLCBsb2FkIHRoZSBzcGVjaWZpZWQgc2NyaXB0IGlmIHRoZSBidWlsZGluZydzIGxldmVsIGlzIGF0IGxlYXN0IDENCiAgICAgIHRoaXMubWluaWdhbWVOYW1lID0gMDsNCiAgICAgIHRoaXMub25NaW5pZ2FtZSA9IGZhbHNlOw0KICAgICAgdGhpcy5taW5pZ2FtZUxvYWRlZCA9IGZhbHNlOw0KDQogICAgICB0aGlzLnN3aXRjaE1pbmlnYW1lID0gZnVuY3Rpb24gKA0KICAgICAgICBvbiAvL2NoYW5nZSB3aGV0aGVyIHdlJ3JlIG9uIHRoZSBidWlsZGluZydzIG1pbmlnYW1lDQogICAgICApIHsNCiAgICAgICAgaWYgKCFHYW1lLmlzTWluaWdhbWVSZWFkeSh0aGlzKSkgb24gPSBmYWxzZTsNCiAgICAgICAgaWYgKG9uID09IC0xKSBvbiA9ICF0aGlzLm9uTWluaWdhbWU7DQogICAgICAgIHRoaXMub25NaW5pZ2FtZSA9IG9uOw0KICAgICAgICBpZiAodGhpcy5pZCAhPSAwKSB7DQogICAgICAgICAgaWYgKHRoaXMub25NaW5pZ2FtZSkgew0KICAgICAgICAgICAgbCgicm93IiArIHRoaXMuaWQpLmNsYXNzTGlzdC5hZGQoIm9uTWluaWdhbWUiKTsNCiAgICAgICAgICAgIC8vbCgncm93U3BlY2lhbCcrdGhpcy5pZCkuc3R5bGUuZGlzcGxheT0nYmxvY2snOw0KICAgICAgICAgICAgLy9sKCdyb3dDYW52YXMnK3RoaXMuaWQpLnN0eWxlLmRpc3BsYXk9J25vbmUnOw0KICAgICAgICAgICAgaWYgKHRoaXMubWluaWdhbWUub25SZXNpemUpIHRoaXMubWluaWdhbWUub25SZXNpemUoKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbCgicm93IiArIHRoaXMuaWQpLmNsYXNzTGlzdC5yZW1vdmUoIm9uTWluaWdhbWUiKTsNCiAgICAgICAgICAgIC8vbCgncm93U3BlY2lhbCcrdGhpcy5pZCkuc3R5bGUuZGlzcGxheT0nbm9uZSc7DQogICAgICAgICAgICAvL2woJ3Jvd0NhbnZhcycrdGhpcy5pZCkuc3R5bGUuZGlzcGxheT0nYmxvY2snOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgIH07DQoNCiAgICAgIHRoaXMuZ2V0UHJpY2UgPSBmdW5jdGlvbiAobikgew0KICAgICAgICB2YXIgcHJpY2UgPQ0KICAgICAgICAgIHRoaXMuYmFzZVByaWNlICoNCiAgICAgICAgICBNYXRoLnBvdyhHYW1lLnByaWNlSW5jcmVhc2UsIE1hdGgubWF4KDAsIHRoaXMuYW1vdW50IC0gdGhpcy5mcmVlKSk7DQogICAgICAgIHByaWNlID0gR2FtZS5tb2RpZnlCdWlsZGluZ1ByaWNlKHRoaXMsIHByaWNlKTsNCiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChwcmljZSk7DQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRTdW1QcmljZSA9IGZ1bmN0aW9uICgNCiAgICAgICAgYW1vdW50IC8vcmV0dXJuIGhvdyBtdWNoIGl0IHdvdWxkIGNvc3QgdG8gYnV5IFthbW91bnRdIG1vcmUgb2YgdGhpcyBidWlsZGluZw0KICAgICAgKSB7DQogICAgICAgIHZhciBwcmljZSA9IDA7DQogICAgICAgIGZvciAoDQogICAgICAgICAgdmFyIGkgPSBNYXRoLm1heCgwLCB0aGlzLmFtb3VudCk7DQogICAgICAgICAgaSA8IE1hdGgubWF4KDAsIHRoaXMuYW1vdW50ICsgYW1vdW50KTsNCiAgICAgICAgICBpKysNCiAgICAgICAgKSB7DQogICAgICAgICAgcHJpY2UgKz0NCiAgICAgICAgICAgIHRoaXMuYmFzZVByaWNlICoNCiAgICAgICAgICAgIE1hdGgucG93KEdhbWUucHJpY2VJbmNyZWFzZSwgTWF0aC5tYXgoMCwgaSAtIHRoaXMuZnJlZSkpOw0KICAgICAgICB9DQogICAgICAgIHByaWNlID0gR2FtZS5tb2RpZnlCdWlsZGluZ1ByaWNlKHRoaXMsIHByaWNlKTsNCiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChwcmljZSk7DQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRSZXZlcnNlU3VtUHJpY2UgPSBmdW5jdGlvbiAoDQogICAgICAgIGFtb3VudCAvL3JldHVybiBob3cgbXVjaCB5b3UnZCBnZXQgZnJvbSBzZWxsaW5nIFthbW91bnRdIG9mIHRoaXMgYnVpbGRpbmcNCiAgICAgICkgew0KICAgICAgICB2YXIgcHJpY2UgPSAwOw0KICAgICAgICBmb3IgKA0KICAgICAgICAgIHZhciBpID0gTWF0aC5tYXgoMCwgdGhpcy5hbW91bnQgLSBhbW91bnQpOw0KICAgICAgICAgIGkgPCBNYXRoLm1heCgwLCB0aGlzLmFtb3VudCk7DQogICAgICAgICAgaSsrDQogICAgICAgICkgew0KICAgICAgICAgIHByaWNlICs9DQogICAgICAgICAgICB0aGlzLmJhc2VQcmljZSAqDQogICAgICAgICAgICBNYXRoLnBvdyhHYW1lLnByaWNlSW5jcmVhc2UsIE1hdGgubWF4KDAsIGkgLSB0aGlzLmZyZWUpKTsNCiAgICAgICAgfQ0KICAgICAgICBwcmljZSA9IEdhbWUubW9kaWZ5QnVpbGRpbmdQcmljZSh0aGlzLCBwcmljZSk7DQogICAgICAgIHByaWNlICo9IHRoaXMuZ2V0U2VsbE11bHRpcGxpZXIoKTsNCiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChwcmljZSk7DQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRTZWxsTXVsdGlwbGllciA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIGdpdmVCYWNrID0gMC4yNTsNCiAgICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdFYXJ0aCBTaGF0dGVyZXInKSkgZ2l2ZUJhY2s9MC41Ow0KICAgICAgICBnaXZlQmFjayAqPSAxICsgR2FtZS5hdXJhTXVsdCgiRWFydGggU2hhdHRlcmVyIik7DQogICAgICAgIHJldHVybiBnaXZlQmFjazsNCiAgICAgIH07DQoNCiAgICAgIHRoaXMuYnV5ID0gZnVuY3Rpb24gKGFtb3VudCkgew0KICAgICAgICBpZiAoR2FtZS5idXlNb2RlID09IC0xKSB7DQogICAgICAgICAgdGhpcy5zZWxsKEdhbWUuYnV5QnVsaywgMSk7DQogICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0NCiAgICAgICAgdmFyIHN1Y2Nlc3MgPSAwOw0KICAgICAgICB2YXIgbW9uaSA9IDA7DQogICAgICAgIHZhciBib3VnaHQgPSAwOw0KICAgICAgICBpZiAoIWFtb3VudCkgYW1vdW50ID0gR2FtZS5idXlCdWxrOw0KICAgICAgICBpZiAoYW1vdW50ID09IC0xKSBhbW91bnQgPSAxMDAwOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgaSsrKSB7DQogICAgICAgICAgdmFyIHByaWNlID0gdGhpcy5nZXRQcmljZSgpOw0KICAgICAgICAgIGlmIChHYW1lLmNvb2tpZXMgPj0gcHJpY2UpIHsNCiAgICAgICAgICAgIGJvdWdodCsrOw0KICAgICAgICAgICAgbW9uaSArPSBwcmljZTsNCiAgICAgICAgICAgIEdhbWUuU3BlbmQocHJpY2UpOw0KICAgICAgICAgICAgdGhpcy5hbW91bnQrKzsNCiAgICAgICAgICAgIHRoaXMuYm91Z2h0Kys7DQogICAgICAgICAgICBwcmljZSA9IHRoaXMuZ2V0UHJpY2UoKTsNCiAgICAgICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTsNCiAgICAgICAgICAgIGlmICh0aGlzLmJ1eUZ1bmN0aW9uKSB0aGlzLmJ1eUZ1bmN0aW9uKCk7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgaWYgKHRoaXMuYW1vdW50ID09IDEgJiYgdGhpcy5pZCAhPSAwKQ0KICAgICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LmFkZCgiZW5hYmxlZCIpOw0KICAgICAgICAgICAgdGhpcy5oaWdoZXN0ID0gTWF0aC5tYXgodGhpcy5oaWdoZXN0LCB0aGlzLmFtb3VudCk7DQogICAgICAgICAgICBHYW1lLkJ1aWxkaW5nc093bmVkKys7DQogICAgICAgICAgICBzdWNjZXNzID0gMTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHN1Y2Nlc3MpIHsNCiAgICAgICAgICBQbGF5U291bmQoInNuZC9idXkiICsgY2hvb3NlKFsxLCAyLCAzLCA0XSkgKyAiLm1wMyIsIDAuNzUpOw0KICAgICAgICAgIHRoaXMucmVmcmVzaCgpOw0KICAgICAgICB9DQogICAgICAgIC8vaWYgKG1vbmk+MCAmJiBhbW91bnQ+MSkgR2FtZS5Ob3RpZnkodGhpcy5uYW1lLCdCb3VnaHQgPGI+Jytib3VnaHQrJzwvYj4gZm9yICcrQmVhdXRpZnkobW9uaSkrJyBjb29raWVzJywnJywyKTsNCiAgICAgIH07DQogICAgICB0aGlzLnNlbGwgPSBmdW5jdGlvbiAoYW1vdW50LCBieXBhc3MpIHsNCiAgICAgICAgdmFyIHN1Y2Nlc3MgPSAwOw0KICAgICAgICB2YXIgbW9uaSA9IDA7DQogICAgICAgIHZhciBzb2xkID0gMDsNCiAgICAgICAgaWYgKGFtb3VudCA9PSAtMSkgYW1vdW50ID0gdGhpcy5hbW91bnQ7DQogICAgICAgIGlmICghYW1vdW50KSBhbW91bnQgPSBHYW1lLmJ1eUJ1bGs7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHsNCiAgICAgICAgICB2YXIgcHJpY2UgPSB0aGlzLmdldFByaWNlKCk7DQogICAgICAgICAgdmFyIGdpdmVCYWNrID0gdGhpcy5nZXRTZWxsTXVsdGlwbGllcigpOw0KICAgICAgICAgIHByaWNlID0gTWF0aC5mbG9vcihwcmljZSAqIGdpdmVCYWNrKTsNCiAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPiAwKSB7DQogICAgICAgICAgICBzb2xkKys7DQogICAgICAgICAgICBtb25pICs9IHByaWNlOw0KICAgICAgICAgICAgR2FtZS5jb29raWVzICs9IHByaWNlOw0KICAgICAgICAgICAgR2FtZS5jb29raWVzRWFybmVkID0gTWF0aC5tYXgoR2FtZS5jb29raWVzLCBHYW1lLmNvb2tpZXNFYXJuZWQpOyAvL3RoaXMgaXMgdG8gYXZvaWQgcGxheWVycyBnZXR0aW5nIHRoZSBjaGVhdGVyIGFjaGlldmVtZW50IHdoZW4gc2VsbGluZyBidWlsZGluZ3MgdGhhdCBoYXZlIGEgaGlnaGVyIHByaWNlIHRoYW4gdGhleSB1c2VkIHRvDQogICAgICAgICAgICB0aGlzLmFtb3VudC0tOw0KICAgICAgICAgICAgcHJpY2UgPSB0aGlzLmdldFByaWNlKCk7DQogICAgICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7DQogICAgICAgICAgICBpZiAodGhpcy5zZWxsRnVuY3Rpb24pIHRoaXMuc2VsbEZ1bmN0aW9uKCk7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgaWYgKHRoaXMuYW1vdW50ID09IDAgJiYgdGhpcy5pZCAhPSAwKQ0KICAgICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LnJlbW92ZSgiZW5hYmxlZCIpOw0KICAgICAgICAgICAgR2FtZS5CdWlsZGluZ3NPd25lZC0tOw0KICAgICAgICAgICAgc3VjY2VzcyA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChzdWNjZXNzICYmIEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJydWluIik7DQogICAgICAgICAgdmFyIG9sZCA9IEdhbWUuaGFzQnVmZigiRGV2YXN0YXRpb24iKTsNCiAgICAgICAgICBpZiAob2xkKSB7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIG9sZC5tdWx0Q2xpY2sgKz0gc29sZCAqIDAuMDE7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgb2xkLm11bHRDbGljayArPSBzb2xkICogMC4wMDU7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgb2xkLm11bHRDbGljayArPSBzb2xkICogMC4wMDI1Ow0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIEdhbWUuZ2FpbkJ1ZmYoImRldmFzdGF0aW9uIiwgMTAsIDEgKyBzb2xkICogMC4wMSk7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikNCiAgICAgICAgICAgICAgR2FtZS5nYWluQnVmZigiZGV2YXN0YXRpb24iLCAxMCwgMSArIHNvbGQgKiAwLjAwNSk7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykNCiAgICAgICAgICAgICAgR2FtZS5nYWluQnVmZigiZGV2YXN0YXRpb24iLCAxMCwgMSArIHNvbGQgKiAwLjAwMjUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoDQogICAgICAgICAgc3VjY2VzcyAmJg0KICAgICAgICAgIEdhbWUuc2hpbW1lclR5cGVzWyJnb2xkZW4iXS5uIDw9IDAgJiYNCiAgICAgICAgICBHYW1lLmF1cmFNdWx0KCJEcmFnb24gT3JicyIpID4gMA0KICAgICAgICApIHsNCiAgICAgICAgICB2YXIgaGlnaGVzdEJ1aWxkaW5nID0gMDsNCiAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1tpXS5hbW91bnQgPiAwKSBoaWdoZXN0QnVpbGRpbmcgPSBHYW1lLk9iamVjdHNbaV07DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIGhpZ2hlc3RCdWlsZGluZyA9PSB0aGlzICYmDQogICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgR2FtZS5hdXJhTXVsdCgiRHJhZ29uIE9yYnMiKSAqIDAuMQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgdmFyIGJ1ZmZzTiA9IDA7DQogICAgICAgICAgICBmb3IgKHZhciBpaSBpbiBHYW1lLmJ1ZmZzKSB7DQogICAgICAgICAgICAgIGJ1ZmZzTisrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGJ1ZmZzTiA9PSAwKSB7DQogICAgICAgICAgICAgIG5ldyBHYW1lLnNoaW1tZXIoImdvbGRlbiIpOw0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICBFTiA/ICJEcmFnb24gT3JicyEiIDogbG9jKCJEcmFnb24gT3JicyIpLA0KICAgICAgICAgICAgICAgIGxvYygiV2lzaCBncmFudGVkLiBHb2xkZW4gY29va2llIHNwYXduZWQuIiksDQogICAgICAgICAgICAgICAgWzMzLCAyNV0NCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHN1Y2Nlc3MpIHsNCiAgICAgICAgICBQbGF5U291bmQoInNuZC9zZWxsIiArIGNob29zZShbMSwgMiwgMywgNF0pICsgIi5tcDMiLCAwLjc1KTsNCiAgICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgICAgfQ0KICAgICAgICAvL2lmIChtb25pPjApIEdhbWUuTm90aWZ5KHRoaXMubmFtZSwnU29sZCA8Yj4nK3NvbGQrJzwvYj4gZm9yICcrQmVhdXRpZnkobW9uaSkrJyBjb29raWVzJywnJywyKTsNCiAgICAgIH07DQogICAgICB0aGlzLnNhY3JpZmljZSA9IGZ1bmN0aW9uICgNCiAgICAgICAgYW1vdW50IC8vc2VsbCB3aXRob3V0IGdldHRpbmcgYmFjayBhbnkgbW9uZXkNCiAgICAgICkgew0KICAgICAgICB2YXIgc3VjY2VzcyA9IDA7DQogICAgICAgIC8vdmFyIG1vbmk9MDsNCiAgICAgICAgdmFyIHNvbGQgPSAwOw0KICAgICAgICBpZiAoYW1vdW50ID09IC0xKSBhbW91bnQgPSB0aGlzLmFtb3VudDsNCiAgICAgICAgaWYgKCFhbW91bnQpIGFtb3VudCA9IDE7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHsNCiAgICAgICAgICB2YXIgcHJpY2UgPSB0aGlzLmdldFByaWNlKCk7DQogICAgICAgICAgcHJpY2UgPSBNYXRoLmZsb29yKHByaWNlICogMC41KTsNCiAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPiAwKSB7DQogICAgICAgICAgICBzb2xkKys7DQogICAgICAgICAgICAvL21vbmkrPXByaWNlOw0KICAgICAgICAgICAgLy9HYW1lLmNvb2tpZXMrPXByaWNlOw0KICAgICAgICAgICAgLy9HYW1lLmNvb2tpZXNFYXJuZWQ9TWF0aC5tYXgoR2FtZS5jb29raWVzLEdhbWUuY29va2llc0Vhcm5lZCk7DQogICAgICAgICAgICB0aGlzLmFtb3VudC0tOw0KICAgICAgICAgICAgcHJpY2UgPSB0aGlzLmdldFByaWNlKCk7DQogICAgICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7DQogICAgICAgICAgICBpZiAodGhpcy5zZWxsRnVuY3Rpb24pIHRoaXMuc2VsbEZ1bmN0aW9uKCk7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgaWYgKHRoaXMuYW1vdW50ID09IDAgJiYgdGhpcy5pZCAhPSAwKQ0KICAgICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LnJlbW92ZSgiZW5hYmxlZCIpOw0KICAgICAgICAgICAgR2FtZS5CdWlsZGluZ3NPd25lZC0tOw0KICAgICAgICAgICAgc3VjY2VzcyA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChzdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy5yZWZyZXNoKCk7DQogICAgICAgIH0NCiAgICAgICAgLy9pZiAobW9uaT4wKSBHYW1lLk5vdGlmeSh0aGlzLm5hbWUsJ1NvbGQgPGI+Jytzb2xkKyc8L2I+IGZvciAnK0JlYXV0aWZ5KG1vbmkpKycgY29va2llcycsJycsMik7DQogICAgICB9Ow0KICAgICAgdGhpcy5idXlGcmVlID0gZnVuY3Rpb24gKA0KICAgICAgICBhbW91bnQgLy91bmxpa2UgZ2V0RnJlZSwgdGhpcyBzdGlsbCBpbmNyZWFzZXMgdGhlIHByaWNlDQogICAgICApIHsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKykgew0KICAgICAgICAgIGlmIChHYW1lLmNvb2tpZXMgPj0gcHJpY2UpIHsNCiAgICAgICAgICAgIHRoaXMuYW1vdW50Kys7DQogICAgICAgICAgICB0aGlzLmJvdWdodCsrOw0KICAgICAgICAgICAgdGhpcy5wcmljZSA9IHRoaXMuZ2V0UHJpY2UoKTsNCiAgICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPT0gMSAmJiB0aGlzLmlkICE9IDApDQogICAgICAgICAgICAgIGwoInJvdyIgKyB0aGlzLmlkKS5jbGFzc0xpc3QuYWRkKCJlbmFibGVkIik7DQogICAgICAgICAgICB0aGlzLmhpZ2hlc3QgPSBNYXRoLm1heCh0aGlzLmhpZ2hlc3QsIHRoaXMuYW1vdW50KTsNCiAgICAgICAgICAgIEdhbWUuQnVpbGRpbmdzT3duZWQrKzsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5yZWZyZXNoKCk7DQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRGcmVlID0gZnVuY3Rpb24gKA0KICAgICAgICBhbW91bnQgLy9nZXQgWCBvZiB0aGlzIGJ1aWxkaW5nIGZvciBmcmVlLCB3aXRoIHRoZSBwcmljZSBiZWhhdmluZyBhcyBpZiB5b3Ugc3RpbGwgZGlkbid0IGhhdmUgdGhlbQ0KICAgICAgKSB7DQogICAgICAgIHRoaXMuYW1vdW50ICs9IGFtb3VudDsNCiAgICAgICAgdGhpcy5ib3VnaHQgKz0gYW1vdW50Ow0KICAgICAgICB0aGlzLmZyZWUgKz0gYW1vdW50Ow0KICAgICAgICB0aGlzLmhpZ2hlc3QgPSBNYXRoLm1heCh0aGlzLmhpZ2hlc3QsIHRoaXMuYW1vdW50KTsNCiAgICAgICAgR2FtZS5CdWlsZGluZ3NPd25lZCArPSBhbW91bnQ7DQogICAgICAgIHRoaXMuaGlnaGVzdCA9IE1hdGgubWF4KHRoaXMuaGlnaGVzdCwgdGhpcy5hbW91bnQpOw0KICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgIH07DQogICAgICB0aGlzLmdldEZyZWVSYW5rcyA9IGZ1bmN0aW9uICgNCiAgICAgICAgYW1vdW50IC8vdGhpcyBidWlsZGluZydzIHByaWNlIGJlaGF2ZXMgYXMgaWYgeW91IGhhZCBYIGxlc3Mgb2YgaXQNCiAgICAgICkgew0KICAgICAgICB0aGlzLmZyZWUgKz0gYW1vdW50Ow0KICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgIH07DQoNCiAgICAgIHRoaXMudG9vbHRpcCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIG1lID0gdGhpczsNCiAgICAgICAgdmFyIGFyaWFUZXh0ID0gIiI7DQogICAgICAgIHZhciBkZXNjID0gbWUuZGVzYzsNCiAgICAgICAgdmFyIG5hbWUgPSBtZS5kbmFtZTsNCiAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJmb29scyIpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuZm9vbE9iamVjdHNbbWUubmFtZV0pIHsNCiAgICAgICAgICAgIG5hbWUgPSBHYW1lLmZvb2xPYmplY3RzWyJVbmtub3duIl0ubmFtZTsNCiAgICAgICAgICAgIGRlc2MgPSBHYW1lLmZvb2xPYmplY3RzWyJVbmtub3duIl0uZGVzYzsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbmFtZSA9IEdhbWUuZm9vbE9iamVjdHNbbWUubmFtZV0ubmFtZTsNCiAgICAgICAgICAgIGRlc2MgPSBHYW1lLmZvb2xPYmplY3RzW21lLm5hbWVdLmRlc2M7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHZhciBpY29uID0gW21lLmljb25Db2x1bW4sIDBdOw0KICAgICAgICBpZiAobWUubG9ja2VkKSB7DQogICAgICAgICAgbmFtZSA9ICI/Pz8iOw0KICAgICAgICAgIGRlc2MgPSAiPz8/IjsNCiAgICAgICAgICBpY29uID0gWzAsIDddOw0KICAgICAgICB9DQogICAgICAgIC8vaWYgKGwoJ3Jvd0luZm8nK21lLmlkKSAmJiBHYW1lLmRyYXdUJTEwPT0wKSBsKCdyb3dJbmZvQ29udGVudCcrbWUuaWQpLmlubmVySFRNTD0nJmJ1bGw7ICcrbWUuYW1vdW50KycgJysobWUuYW1vdW50PT0xP21lLnNpbmdsZTptZS5wbHVyYWwpKyc8YnI+JmJ1bGw7IHByb2R1Y2luZyAnK0JlYXV0aWZ5KG1lLnN0b3JlZFRvdGFsQ3BzLDEpKycgJysobWUuc3RvcmVkVG90YWxDcHM9PTE/J2Nvb2tpZSc6J2Nvb2tpZXMnKSsnIHBlciBzZWNvbmQ8YnI+JmJ1bGw7IHRvdGFsIDogJytCZWF1dGlmeShtZS50b3RhbENvb2tpZXMpKycgJysoTWF0aC5mbG9vcihtZS50b3RhbENvb2tpZXMpPT0xPydjb29raWUnOidjb29raWVzJykrJyAnK21lLmFjdGlvbk5hbWU7DQoNCiAgICAgICAgdmFyIGNhbkJ1eSA9IGZhbHNlOw0KICAgICAgICB2YXIgcHJpY2UgPSBtZS5idWxrUHJpY2U7DQogICAgICAgIGlmICgNCiAgICAgICAgICAoR2FtZS5idXlNb2RlID09IDEgJiYgR2FtZS5jb29raWVzID49IHByaWNlKSB8fA0KICAgICAgICAgIChHYW1lLmJ1eU1vZGUgPT0gLTEgJiYgbWUuYW1vdW50ID4gMCkNCiAgICAgICAgKQ0KICAgICAgICAgIGNhbkJ1eSA9IHRydWU7DQoNCiAgICAgICAgdmFyIHN5bmVyZ2llc1N0ciA9ICIiOw0KICAgICAgICAvL25vdGUgOiBtaWdodCBub3QgYmUgZW50aXJlbHkgYWNjdXJhdGUsIG1hdGggbWF5IG5lZWQgY2hlY2tpbmcNCiAgICAgICAgaWYgKG1lLmFtb3VudCA+IDApIHsNCiAgICAgICAgICB2YXIgc3luZXJnaWVzV2l0aCA9IHt9Ow0KICAgICAgICAgIHZhciBzeW5lcmd5Qm9vc3QgPSAwOw0KDQogICAgICAgICAgaWYgKG1lLm5hbWUgPT0gIkdyYW5kbWEiKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuR3JhbmRtYVN5bmVyZ2llcykgew0KICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoR2FtZS5HcmFuZG1hU3luZXJnaWVzW2ldKSkgew0KICAgICAgICAgICAgICAgIHZhciBvdGhlciA9IEdhbWUuVXBncmFkZXNbR2FtZS5HcmFuZG1hU3luZXJnaWVzW2ldXS5idWlsZGluZ1RpZTsNCiAgICAgICAgICAgICAgICB2YXIgbXVsdCA9IG1lLmFtb3VudCAqIDAuMDEgKiAoMSAvIChvdGhlci5pZCAtIDEpKTsNCiAgICAgICAgICAgICAgICB2YXIgYm9vc3QgPQ0KICAgICAgICAgICAgICAgICAgb3RoZXIuc3RvcmVkVG90YWxDcHMgKiBHYW1lLmdsb2JhbENwc011bHQgLQ0KICAgICAgICAgICAgICAgICAgKG90aGVyLnN0b3JlZFRvdGFsQ3BzICogR2FtZS5nbG9iYWxDcHNNdWx0KSAvICgxICsgbXVsdCk7DQogICAgICAgICAgICAgICAgc3luZXJneUJvb3N0ICs9IGJvb3N0Ow0KICAgICAgICAgICAgICAgIGlmICghc3luZXJnaWVzV2l0aFtvdGhlci5wbHVyYWxdKQ0KICAgICAgICAgICAgICAgICAgc3luZXJnaWVzV2l0aFtvdGhlci5wbHVyYWxdID0gMDsNCiAgICAgICAgICAgICAgICBzeW5lcmdpZXNXaXRoW290aGVyLnBsdXJhbF0gKz0gbXVsdDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSBpZiAobWUubmFtZSA9PSAiUG9ydGFsIiAmJiBHYW1lLkhhcygiRWxkZXIgUGFjdCIpKSB7DQogICAgICAgICAgICB2YXIgb3RoZXIgPSBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXTsNCiAgICAgICAgICAgIHZhciBib29zdCA9IG1lLmFtb3VudCAqIDAuMDUgKiBvdGhlci5hbW91bnQgKiBHYW1lLmdsb2JhbENwc011bHQ7DQogICAgICAgICAgICBzeW5lcmd5Qm9vc3QgKz0gYm9vc3Q7DQogICAgICAgICAgICBpZiAoIXN5bmVyZ2llc1dpdGhbb3RoZXIucGx1cmFsXSkgc3luZXJnaWVzV2l0aFtvdGhlci5wbHVyYWxdID0gMDsNCiAgICAgICAgICAgIHN5bmVyZ2llc1dpdGhbb3RoZXIucGx1cmFsXSArPQ0KICAgICAgICAgICAgICBib29zdCAvIChvdGhlci5zdG9yZWRUb3RhbENwcyAqIEdhbWUuZ2xvYmFsQ3BzTXVsdCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZm9yICh2YXIgaSBpbiBtZS5zeW5lcmdpZXMpIHsNCiAgICAgICAgICAgIHZhciBpdCA9IG1lLnN5bmVyZ2llc1tpXTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcyhpdC5uYW1lKSkgew0KICAgICAgICAgICAgICB2YXIgd2VpZ2h0ID0gMC4wNTsNCiAgICAgICAgICAgICAgdmFyIG90aGVyID0gaXQuYnVpbGRpbmdUaWUxOw0KICAgICAgICAgICAgICBpZiAobWUgPT0gaXQuYnVpbGRpbmdUaWUxKSB7DQogICAgICAgICAgICAgICAgd2VpZ2h0ID0gMC4wMDE7DQogICAgICAgICAgICAgICAgb3RoZXIgPSBpdC5idWlsZGluZ1RpZTI7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdmFyIGJvb3N0ID0NCiAgICAgICAgICAgICAgICBvdGhlci5zdG9yZWRUb3RhbENwcyAqIEdhbWUuZ2xvYmFsQ3BzTXVsdCAtDQogICAgICAgICAgICAgICAgKG90aGVyLnN0b3JlZFRvdGFsQ3BzICogR2FtZS5nbG9iYWxDcHNNdWx0KSAvDQogICAgICAgICAgICAgICAgICAoMSArIG1lLmFtb3VudCAqIHdlaWdodCk7DQogICAgICAgICAgICAgIHN5bmVyZ3lCb29zdCArPSBib29zdDsNCiAgICAgICAgICAgICAgaWYgKCFzeW5lcmdpZXNXaXRoW290aGVyLnBsdXJhbF0pIHN5bmVyZ2llc1dpdGhbb3RoZXIucGx1cmFsXSA9IDA7DQogICAgICAgICAgICAgIHN5bmVyZ2llc1dpdGhbb3RoZXIucGx1cmFsXSArPSBtZS5hbW91bnQgKiB3ZWlnaHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChzeW5lcmd5Qm9vc3QgPiAwKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpIGluIHN5bmVyZ2llc1dpdGgpIHsNCiAgICAgICAgICAgICAgaWYgKHN5bmVyZ2llc1N0ciAhPSAiIikgc3luZXJnaWVzU3RyICs9ICIsICI7DQogICAgICAgICAgICAgIHN5bmVyZ2llc1N0ciArPQ0KICAgICAgICAgICAgICAgICc8c3BhbiBzdHlsZT0iY29sb3I6I2ZmZjtmb250LXdlaWdodDpib2xkO2ZvbnQtc2l6ZTo4MCU7YmFja2dyb3VuZDojMDAwO2JveC1zaGFkb3c6MHB4IDBweCAwcHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTtib3JkZXItcmFkaXVzOjNweDtwYWRkaW5nOjBweCAycHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ij4nICsNCiAgICAgICAgICAgICAgICBpICsNCiAgICAgICAgICAgICAgICAiICsiICsNCiAgICAgICAgICAgICAgICBCZWF1dGlmeShzeW5lcmdpZXNXaXRoW2ldICogMTAwLCAxKSArDQogICAgICAgICAgICAgICAgIiU8L3NwYW4+IjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN5bmVyZ2llc1N0ciA9DQogICAgICAgICAgICAgIGxvYygiLi4uYWxzbyBib29zdGluZyBzb21lIG90aGVyIGJ1aWxkaW5nczoiKSArDQogICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgIHN5bmVyZ2llc1N0ciArDQogICAgICAgICAgICAgICIgLSAiICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJhbGwgY29tYmluZWQsIHRoZXNlIGJvb3N0cyBhY2NvdW50IGZvciA8Yj4lMTwvYj4gcGVyIHNlY29uZCAoPGI+JTIlPC9iPiBvZiB0b3RhbCBDcFMpIiwNCiAgICAgICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeShzeW5lcmd5Qm9vc3QsIDEpKSwNCiAgICAgICAgICAgICAgICAgIEJlYXV0aWZ5KChzeW5lcmd5Qm9vc3QgLyBHYW1lLmNvb2tpZXNQcykgKiAxMDAsIDEpLA0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5wcmVmcy5zY3JlZW5yZWFkZXIpIHsNCiAgICAgICAgICBpZiAobWUubG9ja2VkKSBhcmlhVGV4dCA9ICJUaGlzIGJ1aWxkaW5nIGlzIG5vdCB5ZXQgdW5sb2NrZWQuICI7DQogICAgICAgICAgZWxzZSBhcmlhVGV4dCA9IG5hbWUgKyAiLiAiOw0KICAgICAgICAgIGlmICghbWUubG9ja2VkKSBhcmlhVGV4dCArPSAiWW91IG93biAiICsgbWUuYW1vdW50ICsgIi4gIjsNCiAgICAgICAgICBhcmlhVGV4dCArPQ0KICAgICAgICAgICAgKGNhbkJ1eSA/ICJDYW4gYnV5IDEgZm9yIiA6ICJDYW5ub3QgYWZmb3JkIHRoZSIpICsNCiAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICBCZWF1dGlmeShNYXRoLnJvdW5kKHByaWNlKSkgKw0KICAgICAgICAgICAgIiBjb29raWVzLiAiOw0KICAgICAgICAgIGlmICghbWUubG9ja2VkICYmIG1lLnRvdGFsQ29va2llcyA+IDApIHsNCiAgICAgICAgICAgIGFyaWFUZXh0ICs9DQogICAgICAgICAgICAgICJFYWNoICIgKw0KICAgICAgICAgICAgICBtZS5zaW5nbGUgKw0KICAgICAgICAgICAgICAiIHByb2R1Y2VzICIgKw0KICAgICAgICAgICAgICBCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAobWUuc3RvcmVkVG90YWxDcHMgLyBtZS5hbW91bnQpICogR2FtZS5nbG9iYWxDcHNNdWx0LA0KICAgICAgICAgICAgICAgIDENCiAgICAgICAgICAgICAgKSArDQogICAgICAgICAgICAgICIgY29va2llcyBwZXIgc2Vjb25kLiAiOw0KICAgICAgICAgICAgYXJpYVRleHQgKz0NCiAgICAgICAgICAgICAgQmVhdXRpZnkobWUudG90YWxDb29raWVzKSArDQogICAgICAgICAgICAgICIgY29va2llcyAiICsNCiAgICAgICAgICAgICAgbWUuYWN0aW9uTmFtZSArDQogICAgICAgICAgICAgICIgc28gZmFyLiAiOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIW1lLmxvY2tlZCkgYXJpYVRleHQgKz0gZGVzYzsNCg0KICAgICAgICAgIHZhciBhcmlhTGFiZWwgPSBsKCJhcmlhUmVhZGVyLXByb2R1Y3QtIiArIG1lLmlkKTsNCiAgICAgICAgICBpZiAoYXJpYUxhYmVsKQ0KICAgICAgICAgICAgYXJpYUxhYmVsLmlubmVySFRNTCA9IGFyaWFUZXh0LnJlcGxhY2UoLyg8KFtePl0rKT4pL2dpLCAiICIpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnPGRpdiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7bGVmdDoxcHg7dG9wOjFweDtyaWdodDoxcHg7Ym90dG9tOjFweDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxMjVkZWcsJyArDQogICAgICAgICAgKGZhbHNlDQogICAgICAgICAgICA/ICJyZ2JhKDE1LDExNSwxMzAsMSkgMCUscmdiYSgxNSwxMTUsMTMwLDApIg0KICAgICAgICAgICAgOiAicmdiYSg1MCw0MCw0MCwxKSAwJSxyZ2JhKDUwLDQwLDQwLDApIikgKw0KICAgICAgICAgICcgMjAlKTttaXgtYmxlbmQtbW9kZTpzY3JlZW47ei1pbmRleDoxOyI+PC9kaXY+PGRpdiBzdHlsZT0iei1pbmRleDoxMDttaW4td2lkdGg6MzUwcHg7cGFkZGluZzo4cHg7cG9zaXRpb246cmVsYXRpdmU7IiBpZD0idG9vbHRpcEJ1aWxkaW5nIj48ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0iZmxvYXQ6bGVmdDttYXJnaW4tbGVmdDotOHB4O21hcmdpbi10b3A6LThweDsnICsNCiAgICAgICAgICB3cml0ZUljb24oaWNvbikgKw0KICAgICAgICAgICciPjwvZGl2PjxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0O3RleHQtYWxpZ246cmlnaHQ7Ij48c3BhbiBjbGFzcz0icHJpY2UnICsNCiAgICAgICAgICAoY2FuQnV5ID8gIiIgOiAiIGRpc2FibGVkIikgKw0KICAgICAgICAgICciPicgKw0KICAgICAgICAgIEJlYXV0aWZ5KE1hdGgucm91bmQocHJpY2UpKSArDQogICAgICAgICAgIjwvc3Bhbj4iICsNCiAgICAgICAgICBHYW1lLmNvc3REZXRhaWxzKHByaWNlKSArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9Im5hbWUiPicgKw0KICAgICAgICAgIG5hbWUgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPHNtYWxsPjxkaXYgY2xhc3M9InRhZyI+JyArDQogICAgICAgICAgbG9jKCJvd25lZDogJTEiLCBtZS5hbW91bnQpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgKG1lLmZyZWUgPiAwDQogICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJ0YWciPicgKyBsb2MoImZyZWU6ICUxISIsIG1lLmZyZWUpICsgIjwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAiPC9zbWFsbD4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBjbGFzcz0iZGVzY3JpcHRpb24iPjxxPicgKw0KICAgICAgICAgIGRlc2MgKw0KICAgICAgICAgICI8L3E+PC9kaXY+IiArDQogICAgICAgICAgKG1lLnRvdGFsQ29va2llcyA+IDANCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICAobWUuYW1vdW50ID4gMA0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9ImRlc2NyaXB0aW9uQmxvY2siPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJlYWNoICUxIHByb2R1Y2VzIDxiPiUyPC9iPiBwZXIgc2Vjb25kIiwgWw0KICAgICAgICAgICAgICAgICAgICBtZS5zaW5nbGUsDQogICAgICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICAgICAiJTEgY29va2llIiwNCiAgICAgICAgICAgICAgICAgICAgICBMQmVhdXRpZnkoDQogICAgICAgICAgICAgICAgICAgICAgICAobWUuc3RvcmVkVG90YWxDcHMgLyBtZS5hbW91bnQpICogR2FtZS5nbG9iYWxDcHNNdWx0LA0KICAgICAgICAgICAgICAgICAgICAgICAgMQ0KICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iZGVzY3JpcHRpb25CbG9jayI+JyArDQogICAgICAgICAgICAgIGxvYygiJTEgcHJvZHVjaW5nIDxiPiUyPC9iPiBwZXIgc2Vjb25kIiwgWw0KICAgICAgICAgICAgICAgIGxvYygiJTEgIiArIG1lLmJzaW5nbGUsIExCZWF1dGlmeShtZS5hbW91bnQpKSwNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiJTEgY29va2llIiwNCiAgICAgICAgICAgICAgICAgIExCZWF1dGlmeShtZS5zdG9yZWRUb3RhbENwcyAqIEdhbWUuZ2xvYmFsQ3BzTXVsdCwgMSkNCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICIgKCIgKw0KICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgIjxiPiUxJTwvYj4gb2YgdG90YWwgQ3BTIiwNCiAgICAgICAgICAgICAgICBCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAgIEdhbWUuY29va2llc1BzID4gMA0KICAgICAgICAgICAgICAgICAgICA/IChtZS5hbW91bnQgPiAwDQogICAgICAgICAgICAgICAgICAgICAgICA/IChtZS5zdG9yZWRUb3RhbENwcyAqIEdhbWUuZ2xvYmFsQ3BzTXVsdCkgLw0KICAgICAgICAgICAgICAgICAgICAgICAgICBHYW1lLmNvb2tpZXNQcw0KICAgICAgICAgICAgICAgICAgICAgICAgOiAwKSAqIDEwMA0KICAgICAgICAgICAgICAgICAgICA6IDAsDQogICAgICAgICAgICAgICAgICAxDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgIik8L2Rpdj4iICsNCiAgICAgICAgICAgICAgKHN5bmVyZ2llc1N0cg0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9ImRlc2NyaXB0aW9uQmxvY2siPicgKyBzeW5lcmdpZXNTdHIgKyAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgKEVODQogICAgICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0iZGVzY3JpcHRpb25CbG9jayI+PGI+JyArDQogICAgICAgICAgICAgICAgICBCZWF1dGlmeShtZS50b3RhbENvb2tpZXMpICsNCiAgICAgICAgICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgICAgICAgICAgKE1hdGguZmxvb3IobWUudG90YWxDb29raWVzKSA9PSAxID8gImNvb2tpZSIgOiAiY29va2llcyIpICsNCiAgICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgICBtZS5hY3Rpb25OYW1lICsNCiAgICAgICAgICAgICAgICAgICIgc28gZmFyPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogJzxkaXYgY2xhc3M9ImRlc2NyaXB0aW9uQmxvY2siPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgICAiPGI+JTE8L2I+IHByb2R1Y2VkIHNvIGZhciIsDQogICAgICAgICAgICAgICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1lLnRvdGFsQ29va2llcykpDQogICAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iKQ0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICk7DQogICAgICB9Ow0KICAgICAgdGhpcy5sZXZlbFRvb2x0aXAgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBtZSA9IHRoaXM7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgJzxkaXYgc3R5bGU9IndpZHRoOjI4MHB4O3BhZGRpbmc6OHB4OyIgaWQ9InRvb2x0aXBMZXZlbCI+PGI+JyArDQogICAgICAgICAgbG9jKCJMZXZlbCAlMSAlMiIsIFtCZWF1dGlmeShtZS5sZXZlbCksIG1lLnBsdXJhbF0pICsNCiAgICAgICAgICAnPC9iPjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgIChFTg0KICAgICAgICAgICAgPyAobWUubGV2ZWwgPT0gMSA/IG1lLmV4dHJhTmFtZSA6IG1lLmV4dHJhUGx1cmFsKS5yZXBsYWNlKA0KICAgICAgICAgICAgICAgICJbWF0iLA0KICAgICAgICAgICAgICAgIEJlYXV0aWZ5KG1lLmxldmVsKQ0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgIiBncmFudGluZyA8Yj4rIiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KG1lLmxldmVsKSArDQogICAgICAgICAgICAgICIlICIgKw0KICAgICAgICAgICAgICBtZS5kbmFtZSArDQogICAgICAgICAgICAgICIgQ3BTPC9iPi4iDQogICAgICAgICAgICA6IGxvYygiR3JhbnRpbmcgPGI+KyUxJSAlMiBDcFM8L2I+LiIsIFsNCiAgICAgICAgICAgICAgICBCZWF1dGlmeShtZS5sZXZlbCksDQogICAgICAgICAgICAgICAgbWUuc2luZ2xlLA0KICAgICAgICAgICAgICBdKSkgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiQ2xpY2sgdG8gbGV2ZWwgdXAgZm9yICUxLiIsDQogICAgICAgICAgICAnPHNwYW4gY2xhc3M9InByaWNlIGx1bXAnICsNCiAgICAgICAgICAgICAgKEdhbWUubHVtcHMgPj0gbWUubGV2ZWwgKyAxID8gIiIgOiAiIGRpc2FibGVkIikgKw0KICAgICAgICAgICAgICAnIj4nICsNCiAgICAgICAgICAgICAgbG9jKCIlMSBzdWdhciBsdW1wIiwgTEJlYXV0aWZ5KG1lLmxldmVsICsgMSkpICsNCiAgICAgICAgICAgICAgIjwvc3Bhbj4iDQogICAgICAgICAgKSArDQogICAgICAgICAgKG1lLmxldmVsID09IDAgJiYgbWUubWluaWdhbWVVcmwNCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjxiPicgKw0KICAgICAgICAgICAgICBsb2MoIkxldmVsbGluZyB1cCB0aGlzIGJ1aWxkaW5nIHVubG9ja3MgYSBtaW5pZ2FtZS4iKSArDQogICAgICAgICAgICAgICI8L2I+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICk7DQogICAgICB9Ow0KICAgICAgdGhpcy5sZXZlbFVwID0gKGZ1bmN0aW9uIChtZSkgew0KICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZyZWUpIHsNCiAgICAgICAgICBHYW1lLnNwZW5kTHVtcCgNCiAgICAgICAgICAgIG1lLmxldmVsICsgMSwNCiAgICAgICAgICAgIGxvYygibGV2ZWwgdXAgeW91ciAlMSIsIG1lLnBsdXJhbCksDQogICAgICAgICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIG1lLmxldmVsICs9IDE7DQogICAgICAgICAgICAgIGlmIChtZS5sZXZlbCA+PSAxMCAmJiBtZS5sZXZlbEFjaGlldjEwKQ0KICAgICAgICAgICAgICAgIEdhbWUuV2luKG1lLmxldmVsQWNoaWV2MTAubmFtZSk7DQogICAgICAgICAgICAgIGlmICghZnJlZSkgUGxheVNvdW5kKCJzbmQvdXBncmFkZS5tcDMiLCAwLjYpOw0KICAgICAgICAgICAgICBHYW1lLkxvYWRNaW5pZ2FtZXMoKTsNCiAgICAgICAgICAgICAgbWUucmVmcmVzaCgpOw0KICAgICAgICAgICAgICBpZiAobCgicHJvZHVjdExldmVsIiArIG1lLmlkKSkgew0KICAgICAgICAgICAgICAgIHZhciByZWN0ID0gbCgicHJvZHVjdExldmVsIiArIG1lLmlkKS5nZXRCb3VuZHMoKTsNCiAgICAgICAgICAgICAgICBHYW1lLlNwYXJrbGVBdCgNCiAgICAgICAgICAgICAgICAgIChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIsDQogICAgICAgICAgICAgICAgICAocmVjdC50b3AgKyByZWN0LmJvdHRvbSkgLyAyIC0gMjQgKyAzMiAtIFRvcEJhck9mZnNldA0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKG1lLm1pbmlnYW1lICYmIG1lLm1pbmlnYW1lLm9uTGV2ZWwpDQogICAgICAgICAgICAgICAgbWUubWluaWdhbWUub25MZXZlbChtZS5sZXZlbCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZnJlZQ0KICAgICAgICAgICkoKTsNCiAgICAgICAgfTsNCiAgICAgIH0pKHRoaXMpOw0KDQogICAgICB0aGlzLnJlZnJlc2ggPQ0KICAgICAgICBmdW5jdGlvbiAoKSAvL3Nob3cvaGlkZSB0aGUgYnVpbGRpbmcgZGlzcGxheSBiYXNlZCBvbiBpdHMgYW1vdW50LCBhbmQgcmVkcmF3IGl0DQogICAgICAgIHsNCiAgICAgICAgICB0aGlzLnByaWNlID0gdGhpcy5nZXRQcmljZSgpOw0KICAgICAgICAgIGlmIChHYW1lLmJ1eU1vZGUgPT0gMSkNCiAgICAgICAgICAgIHRoaXMuYnVsa1ByaWNlID0gdGhpcy5nZXRTdW1QcmljZShHYW1lLmJ1eUJ1bGspOw0KICAgICAgICAgIGVsc2UgaWYgKEdhbWUuYnV5TW9kZSA9PSAtMSAmJiBHYW1lLmJ1eUJ1bGsgPT0gLTEpDQogICAgICAgICAgICB0aGlzLmJ1bGtQcmljZSA9IHRoaXMuZ2V0UmV2ZXJzZVN1bVByaWNlKDEwMDApOw0KICAgICAgICAgIGVsc2UgaWYgKEdhbWUuYnV5TW9kZSA9PSAtMSkNCiAgICAgICAgICAgIHRoaXMuYnVsa1ByaWNlID0gdGhpcy5nZXRSZXZlcnNlU3VtUHJpY2UoR2FtZS5idXlCdWxrKTsNCiAgICAgICAgICB0aGlzLnJlYnVpbGQoKTsNCiAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPT0gMCAmJiB0aGlzLmlkICE9IDApDQogICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LnJlbW92ZSgiZW5hYmxlZCIpOw0KICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYW1vdW50ID4gMCAmJiB0aGlzLmlkICE9IDApDQogICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LmFkZCgiZW5hYmxlZCIpOw0KICAgICAgICAgIGlmICh0aGlzLm11dGVkID4gMCAmJiB0aGlzLmlkICE9IDApIHsNCiAgICAgICAgICAgIGwoInJvdyIgKyB0aGlzLmlkKS5jbGFzc0xpc3QuYWRkKCJtdXRlZCIpOw0KICAgICAgICAgICAgbCgibXV0ZWRQcm9kdWN0IiArIHRoaXMuaWQpLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsNCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaWQgIT0gMCkgew0KICAgICAgICAgICAgbCgicm93IiArIHRoaXMuaWQpLmNsYXNzTGlzdC5yZW1vdmUoIm11dGVkIik7DQogICAgICAgICAgICBsKCJtdXRlZFByb2R1Y3QiICsgdGhpcy5pZCkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICB9DQogICAgICAgICAgLy9pZiAoIXRoaXMub25NaW5pZ2FtZSAmJiAhdGhpcy5tdXRlZCkge30NCiAgICAgICAgICAvL2Vsc2UgdGhpcy5waWNzPVtdOw0KICAgICAgICB9Ow0KICAgICAgdGhpcy5yZWJ1aWxkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgbWUgPSB0aGlzOw0KICAgICAgICAvL3ZhciBjbGFzc2VzPSdwcm9kdWN0JzsNCiAgICAgICAgdmFyIHByaWNlID0gbWUuYnVsa1ByaWNlOw0KICAgICAgICAvKmlmIChHYW1lLmNvb2tpZXNFYXJuZWQ+PW1lLmJhc2VQcmljZSB8fCBtZS5ib3VnaHQ+MCkge2NsYXNzZXMrPScgdW5sb2NrZWQnO21lLmxvY2tlZD0wO30gZWxzZSB7Y2xhc3Nlcys9JyBsb2NrZWQnO21lLmxvY2tlZD0xO30NCgkJCQlpZiAoR2FtZS5jb29raWVzPj1wcmljZSkgY2xhc3Nlcys9JyBlbmFibGVkJzsgZWxzZSBjbGFzc2VzKz0nIGRpc2FibGVkJzsNCgkJCQlpZiAobWUubC5jbGFzc05hbWUuaW5kZXhPZigndG9nZ2xlZE9mZicpIT0tMSkgY2xhc3Nlcys9JyB0b2dnbGVkT2ZmJzsNCgkJCQkqLw0KICAgICAgICB2YXIgaWNvbiA9IFswLCBtZS5pY29uXTsNCiAgICAgICAgdmFyIGljb25PZmYgPSBbMSwgbWUuaWNvbl07DQogICAgICAgIGlmIChtZS5pY29uRnVuYykgaWNvbiA9IG1lLmljb25GdW5jKCk7DQoNCiAgICAgICAgdmFyIGRlc2MgPSBtZS5kZXNjOw0KICAgICAgICB2YXIgbmFtZSA9IG1lLmRuYW1lOw0KICAgICAgICB2YXIgZGlzcGxheU5hbWUgPSBtZS5kaXNwbGF5TmFtZTsNCiAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJmb29scyIpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuZm9vbE9iamVjdHNbbWUubmFtZV0pIHsNCiAgICAgICAgICAgIGljb24gPSBbMiwgMF07DQogICAgICAgICAgICBpY29uT2ZmID0gWzMsIDBdOw0KICAgICAgICAgICAgbmFtZSA9IEdhbWUuZm9vbE9iamVjdHNbIlVua25vd24iXS5uYW1lOw0KICAgICAgICAgICAgZGVzYyA9IEdhbWUuZm9vbE9iamVjdHNbIlVua25vd24iXS5kZXNjOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpY29uID0gWzIsIG1lLmljb25dOw0KICAgICAgICAgICAgaWNvbk9mZiA9IFszLCBtZS5pY29uXTsNCiAgICAgICAgICAgIG5hbWUgPSBHYW1lLmZvb2xPYmplY3RzW21lLm5hbWVdLm5hbWU7DQogICAgICAgICAgICBkZXNjID0gR2FtZS5mb29sT2JqZWN0c1ttZS5uYW1lXS5kZXNjOw0KICAgICAgICAgIH0NCiAgICAgICAgICBkaXNwbGF5TmFtZSA9IG5hbWU7DQogICAgICAgICAgLy9pZiAobmFtZS5sZW5ndGg+MTYpIGRpc3BsYXlOYW1lPSc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjc1JTsiPicrbmFtZSsnPC9zcGFuPic7DQogICAgICAgIH0gZWxzZSBpZiAoIUVOKSBkaXNwbGF5TmFtZSA9IG5hbWU7DQogICAgICAgIC8vZWxzZSBpZiAoIUVOICYmIG5hbWUubGVuZ3RoPjE2KSBkaXNwbGF5TmFtZT0nPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo3NSU7Ij4nK25hbWUrJzwvc3Bhbj4nOw0KICAgICAgICBpY29uID0gW2ljb25bMF0gKiA2NCwgaWNvblsxXSAqIDY0XTsNCiAgICAgICAgaWNvbk9mZiA9IFtpY29uT2ZmWzBdICogNjQsIGljb25PZmZbMV0gKiA2NF07DQoNCiAgICAgICAgLy9tZS5sLmNsYXNzTmFtZT1jbGFzc2VzOw0KICAgICAgICAvL2woJ3Byb2R1Y3RJY29uJyttZS5pZCkuc3R5bGUuYmFja2dyb3VuZEltYWdlPSd1cmwoaW1nLycraWNvbisnKSc7DQogICAgICAgIGwoInByb2R1Y3RJY29uIiArIG1lLmlkKS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPQ0KICAgICAgICAgICItIiArIGljb25bMF0gKyAicHggLSIgKyBpY29uWzFdICsgInB4IjsNCiAgICAgICAgLy9sKCdwcm9kdWN0SWNvbk9mZicrbWUuaWQpLnN0eWxlLmJhY2tncm91bmRJbWFnZT0ndXJsKGltZy8nK2ljb25PZmYrJyknOw0KICAgICAgICBsKCJwcm9kdWN0SWNvbk9mZiIgKyBtZS5pZCkuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0NCiAgICAgICAgICAiLSIgKyBpY29uT2ZmWzBdICsgInB4IC0iICsgaWNvbk9mZlsxXSArICJweCI7DQogICAgICAgIGwoInByb2R1Y3ROYW1lIiArIG1lLmlkKS5pbm5lckhUTUwgPSBkaXNwbGF5TmFtZTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIG5hbWUubGVuZ3RoID4gMTIgLyBMYW5nc1tsb2NJZF0udyAmJg0KICAgICAgICAgIChHYW1lLnNlYXNvbiA9PSAiZm9vbHMiIHx8ICFFTikNCiAgICAgICAgKQ0KICAgICAgICAgIGwoInByb2R1Y3ROYW1lIiArIG1lLmlkKS5jbGFzc0xpc3QuYWRkKCJsb25nUHJvZHVjdE5hbWUiKTsNCiAgICAgICAgZWxzZSBsKCJwcm9kdWN0TmFtZSIgKyBtZS5pZCkuY2xhc3NMaXN0LnJlbW92ZSgibG9uZ1Byb2R1Y3ROYW1lIik7DQogICAgICAgIGwoInByb2R1Y3RPd25lZCIgKyBtZS5pZCkudGV4dENvbnRlbnQgPSBtZS5hbW91bnQgPyBtZS5hbW91bnQgOiAiIjsNCiAgICAgICAgbCgicHJvZHVjdFByaWNlIiArIG1lLmlkKS50ZXh0Q29udGVudCA9IEJlYXV0aWZ5KE1hdGgucm91bmQocHJpY2UpKTsNCiAgICAgICAgbCgicHJvZHVjdFByaWNlTXVsdCIgKyBtZS5pZCkudGV4dENvbnRlbnQgPQ0KICAgICAgICAgIEdhbWUuYnV5QnVsayA+IDEgPyAieCIgKyBHYW1lLmJ1eUJ1bGsgKyAiICIgOiAiIjsNCiAgICAgICAgbCgicHJvZHVjdExldmVsIiArIG1lLmlkKS50ZXh0Q29udGVudCA9ICJsdmwgIiArIEJlYXV0aWZ5KG1lLmxldmVsKTsNCiAgICAgICAgaWYgKEdhbWUuaXNNaW5pZ2FtZVJlYWR5KG1lKSAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgew0KICAgICAgICAgIGwoInByb2R1Y3RNaW5pZ2FtZUJ1dHRvbiIgKyBtZS5pZCkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgaWYgKCFtZS5vbk1pbmlnYW1lKQ0KICAgICAgICAgICAgbCgicHJvZHVjdE1pbmlnYW1lQnV0dG9uIiArIG1lLmlkKS50ZXh0Q29udGVudCA9IGxvYygNCiAgICAgICAgICAgICAgIlZpZXcgJTEiLA0KICAgICAgICAgICAgICBtZS5taW5pZ2FtZU5hbWUNCiAgICAgICAgICAgICk7DQogICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgbCgicHJvZHVjdE1pbmlnYW1lQnV0dG9uIiArIG1lLmlkKS50ZXh0Q29udGVudCA9IGxvYygNCiAgICAgICAgICAgICAgIkNsb3NlICUxIiwNCiAgICAgICAgICAgICAgbWUubWluaWdhbWVOYW1lDQogICAgICAgICAgICApOw0KICAgICAgICB9IGVsc2UgbCgicHJvZHVjdE1pbmlnYW1lQnV0dG9uIiArIG1lLmlkKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5pc01pbmlnYW1lUmVhZHkobWUpICYmDQogICAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEgJiYNCiAgICAgICAgICBtZS5taW5pZ2FtZS5kcmFnb25Cb29zdFRvb2x0aXAgJiYNCiAgICAgICAgICBHYW1lLmhhc0F1cmEoIlN1cHJlbWUgSW50ZWxsZWN0IikNCiAgICAgICAgKSB7DQogICAgICAgICAgbCgicHJvZHVjdERyYWdvbkJvb3N0IiArIG1lLmlkKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgfSBlbHNlIGwoInByb2R1Y3REcmFnb25Cb29zdCIgKyBtZS5pZCkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIH07DQogICAgICB0aGlzLm11dGVkID0gZmFsc2U7DQogICAgICB0aGlzLm11dGUgPSBmdW5jdGlvbiAodmFsKSB7DQogICAgICAgIGlmICh0aGlzLmlkID09IDApIHJldHVybiBmYWxzZTsNCiAgICAgICAgdGhpcy5tdXRlZCA9IHZhbDsNCiAgICAgICAgaWYgKHZhbCkgew0KICAgICAgICAgIGwoInByb2R1Y3RNdXRlIiArIHRoaXMuaWQpLmNsYXNzTGlzdC5hZGQoIm9uIik7DQogICAgICAgICAgbCgicm93IiArIHRoaXMuaWQpLmNsYXNzTGlzdC5hZGQoIm11dGVkIik7DQogICAgICAgICAgbCgibXV0ZWRQcm9kdWN0IiArIHRoaXMuaWQpLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBsKCJwcm9kdWN0TXV0ZSIgKyB0aGlzLmlkKS5jbGFzc0xpc3QucmVtb3ZlKCJvbiIpOw0KICAgICAgICAgIGwoInJvdyIgKyB0aGlzLmlkKS5jbGFzc0xpc3QucmVtb3ZlKCJtdXRlZCIpOw0KICAgICAgICAgIGwoIm11dGVkUHJvZHVjdCIgKyB0aGlzLmlkKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICB9DQogICAgICB9Ow0KDQogICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoKSB7fTsNCg0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgaWYgKHRoaXMuaWQgIT0gMCkNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9InJvdyIgaWQ9InJvdycgKw0KICAgICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAgICciPjxkaXYgY2xhc3M9InNlcGFyYXRvckJvdHRvbSI+PC9kaXY+JzsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0icHJvZHVjdEJ1dHRvbnMiPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgaWQ9InByb2R1Y3RMZXZlbCcgKw0KICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgJyIgY2xhc3M9InByb2R1Y3RCdXR0b24gcHJvZHVjdExldmVsIGx1bXBzT25seSIgb25jbGljaz0iR2FtZS5PYmplY3RzQnlJZFsnICsNCiAgICAgICAgdGhpcy5pZCArDQogICAgICAgICddLmxldmVsVXAoKSIgJyArDQogICAgICAgIEdhbWUuZ2V0RHluYW1pY1Rvb2x0aXAoDQogICAgICAgICAgIkdhbWUuT2JqZWN0c0J5SWRbIiArIHRoaXMuaWQgKyAiXS5sZXZlbFRvb2x0aXAiLA0KICAgICAgICAgICJ0aGlzIg0KICAgICAgICApICsNCiAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGlkPSJwcm9kdWN0TWluaWdhbWVCdXR0b24nICsNCiAgICAgICAgdGhpcy5pZCArDQogICAgICAgICciIGNsYXNzPSJwcm9kdWN0QnV0dG9uIHByb2R1Y3RNaW5pZ2FtZUJ1dHRvbiBsdW1wc09ubHkiIG9uY2xpY2s9IkdhbWUuT2JqZWN0c0J5SWRbJyArDQogICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAiXS5zd2l0Y2hNaW5pZ2FtZSgtMSk7UGxheVNvdW5kKEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAiXS5vbk1pbmlnYW1lPydzbmQvY2xpY2tPbjIubXAzJzonc25kL2NsaWNrT2ZmMi5tcDMnKTtcIj48L2Rpdj4iOw0KICAgICAgaWYgKHRoaXMuaWQgIT0gMCkNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9InByb2R1Y3RCdXR0b24gcHJvZHVjdE11dGUiICcgKw0KICAgICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJ3aWR0aDoxNTBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTFweDsiIGlkPSJ0b29sdGlwTXV0ZUJ1aWxkaW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgbG9jKCJNdXRlIikgKw0KICAgICAgICAgICAgICAiPC9iPjxicj4oIiArDQogICAgICAgICAgICAgIGxvYygiTWluaW1pemUgdGhpcyBidWlsZGluZyIpICsNCiAgICAgICAgICAgICAgIik8L2Rpdj4iLA0KICAgICAgICAgICAgInRoaXMiDQogICAgICAgICAgKSArDQogICAgICAgICAgJyBvbmNsaWNrPSJHYW1lLk9iamVjdHNCeUlkWycgKw0KICAgICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAgICJdLm11dGUoMSk7UGxheVNvdW5kKEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgdGhpcy5pZCArDQogICAgICAgICAgIl0ubXV0ZWQ/J3NuZC9jbGlja09mZjIubXAzJzonc25kL2NsaWNrT24yLm1wMycpO1wiIGlkPVwicHJvZHVjdE11dGUiICsNCiAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAnIj4nICsNCiAgICAgICAgICBsb2MoIk11dGUiKSArDQogICAgICAgICAgIjwvZGl2PiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgaWQ9InByb2R1Y3REcmFnb25Cb29zdCcgKw0KICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgJyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIGNsYXNzPSJwcm9kdWN0QnV0dG9uIHByb2R1Y3REcmFnb25Cb29zdCIgJyArDQogICAgICAgIEdhbWUuZ2V0RHluYW1pY1Rvb2x0aXAoDQogICAgICAgICAgImZ1bmN0aW9uKCl7aWYgKEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAgICJdLm1pbmlnYW1lICYmIEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAgICJdLm1pbmlnYW1lLmRyYWdvbkJvb3N0VG9vbHRpcCkgcmV0dXJuIEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAgICJdLm1pbmlnYW1lLmRyYWdvbkJvb3N0VG9vbHRpcCgpOyBlbHNlIHJldHVybiAwO30iLA0KICAgICAgICAgICJ0aGlzIg0KICAgICAgICApICsNCiAgICAgICAgJz48ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQtcG9zaXRpb246JyArDQogICAgICAgIC0zMCAqIDQ4ICsNCiAgICAgICAgInB4ICIgKw0KICAgICAgICAtMTIgKiA0OCArDQogICAgICAgICdweDt0cmFuc2Zvcm06c2NhbGUoMC41KTttYXJnaW46LTIwcHggLTE2cHg7Ij48L2Rpdj48L2Rpdj4nOw0KICAgICAgc3RyICs9ICI8L2Rpdj4iOw0KICAgICAgaWYgKHRoaXMuaWQgPT0gMCkNCiAgICAgICAgbCgic2VjdGlvbkxlZnRFeHRyYSIpLmlubmVySFRNTCA9IGwoInNlY3Rpb25MZWZ0RXh0cmEiKS5pbm5lckhUTUwgKyBzdHI7DQogICAgICBlbHNlIHsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxjYW52YXMgY2xhc3M9InJvd0NhbnZhcyIgaWQ9InJvd0NhbnZhcycgKyB0aGlzLmlkICsgJyI+PC9jYW52YXM+JzsNCiAgICAgICAgc3RyICs9ICc8ZGl2IGNsYXNzPSJyb3dTcGVjaWFsIiBpZD0icm93U3BlY2lhbCcgKyB0aGlzLmlkICsgJyI+PC9kaXY+JzsNCiAgICAgICAgc3RyICs9ICI8L2Rpdj4iOw0KICAgICAgICBsKCJyb3dzIikuaW5uZXJIVE1MID0gbCgicm93cyIpLmlubmVySFRNTCArIHN0cjsNCg0KICAgICAgICAvL2J1aWxkaW5nIGNhbnZhcw0KICAgICAgICB0aGlzLnBpY3MgPSBbXTsNCg0KICAgICAgICB0aGlzLnRvUmVzaXplID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5yZWRyYXcgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgdmFyIG1lID0gdGhpczsNCiAgICAgICAgICBtZS5waWNzID0gW107DQogICAgICAgIH07DQogICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPD0gMCkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIGlmICh0aGlzLnRvUmVzaXplKSB7DQogICAgICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY2FudmFzLmNsaWVudFdpZHRoOw0KICAgICAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0Ow0KICAgICAgICAgICAgdGhpcy50b1Jlc2l6ZSA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5jdHg7DQogICAgICAgICAgLy9jbGVhcg0KICAgICAgICAgIC8vY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5jYW52YXMud2lkdGgsdGhpcy5jYW52YXMuaGVpZ2h0KTsNCiAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KDQogICAgICAgICAgLy9waWMgOiBhIGxvYWRlZCBwaWN0dXJlIG9yIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgbG9hZGVkIHBpY3R1cmUNCiAgICAgICAgICAvL2JnIDogYSBsb2FkZWQgcGljdHVyZSBvciBhIGZ1bmN0aW9uIHJldHVybmluZyBhIGxvYWRlZCBwaWN0dXJlIC0gdGlsZWQgYXMgdGhlIGJhY2tncm91bmQsIDEyOHgxMjgNCiAgICAgICAgICAvL3hWIDogdGhlIHBpY3R1cmVzIHdpbGwgaGF2ZSBhIHJhbmRvbSBob3Jpem9udGFsIHNoaWZ0IGJ5IHRoaXMgbWFueSBwaXhlbHMNCiAgICAgICAgICAvL3lWIDogdGhlIHBpY3R1cmVzIHdpbGwgaGF2ZSBhIHJhbmRvbSB2ZXJ0aWNhbCBzaGlmdCBieSB0aGlzIG1hbnkgcGl4ZWxzDQogICAgICAgICAgLy93IDogaG93IG1hbnkgcGl4ZWxzIGJldHdlZW4gZWFjaCBwaWN0dXJlIChvciByb3cgb2YgcGljdHVyZXMpDQogICAgICAgICAgLy94IDogaG9yaXpvbnRhbCBvZmZzZXQNCiAgICAgICAgICAvL3kgOiB2ZXJ0aWNhbCBvZmZzZXQgKCszMikNCiAgICAgICAgICAvL3Jvd3MgOiBpZiA+MSwgYXJyYW5nZSB0aGUgcGljdHVyZXMgaW4gcm93cyBjb250YWluaW5nIHRoaXMgbWFueSBwaWN0dXJlcw0KICAgICAgICAgIC8vZnJhbWVzIDogaWYgcHJlc2VudCwgc2xpY2UgdGhlIHBpYyBpbiBbZnJhbWVzXSBob3Jpem9udGFsIHNsaWNlcyBhbmQgcGljayBvbmUgYXQgcmFuZG9tDQoNCiAgICAgICAgICB2YXIgcGljID0gdGhpcy5hcnQucGljOw0KICAgICAgICAgIHZhciBiZyA9IHRoaXMuYXJ0LmJnOw0KICAgICAgICAgIHZhciB4ViA9IHRoaXMuYXJ0LnhWIHx8IDA7DQogICAgICAgICAgdmFyIHlWID0gdGhpcy5hcnQueVYgfHwgMDsNCiAgICAgICAgICB2YXIgdyA9IHRoaXMuYXJ0LncgfHwgNDg7DQogICAgICAgICAgdmFyIGggPSB0aGlzLmFydC5oIHx8IDQ4Ow0KICAgICAgICAgIHZhciBvZmZYID0gdGhpcy5hcnQueCB8fCAwOw0KICAgICAgICAgIHZhciBvZmZZID0gdGhpcy5hcnQueSB8fCAwOw0KICAgICAgICAgIHZhciByb3dzID0gdGhpcy5hcnQucm93cyB8fCAxOw0KICAgICAgICAgIHZhciBmcmFtZXMgPSB0aGlzLmFydC5mcmFtZXMgfHwgMTsNCg0KICAgICAgICAgIGlmICh0eXBlb2YgYmcgPT0gInN0cmluZyIpDQogICAgICAgICAgICBjdHguZmlsbFBhdHRlcm4oDQogICAgICAgICAgICAgIFBpYyh0aGlzLmFydC5iZyksDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoLA0KICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQsDQogICAgICAgICAgICAgIDEyOCwNCiAgICAgICAgICAgICAgMTI4DQogICAgICAgICAgICApOw0KICAgICAgICAgIGVsc2UgYmcodGhpcywgY3R4KTsNCiAgICAgICAgICAvKg0KCQkJCQljdHguZ2xvYmFsQWxwaGE9MC41Ow0KCQkJCQlpZiAodHlwZW9mKGJnKT09J3N0cmluZycpLy90ZXN0DQoJCQkJCXsNCgkJCQkJCWN0eC5maWxsUGF0dGVybihQaWModGhpcy5hcnQuYmcpLC0xMjgrR2FtZS5UJTEyOCwwLHRoaXMuY2FudmFzLndpZHRoKzEyOCx0aGlzLmNhbnZhcy5oZWlnaHQsMTI4LDEyOCk7DQoJCQkJCQljdHguZmlsbFBhdHRlcm4oUGljKHRoaXMuYXJ0LmJnKSwtMTI4K01hdGguZmxvb3IoR2FtZS5ULzIpJTEyOCwtMTI4K01hdGguZmxvb3IoR2FtZS5ULzIpJTEyOCx0aGlzLmNhbnZhcy53aWR0aCsxMjgsdGhpcy5jYW52YXMuaGVpZ2h0KzEyOCwxMjgsMTI4KTsNCgkJCQkJfQ0KCQkJCQljdHguZ2xvYmFsQWxwaGE9MTsNCgkJCQkJKi8NCiAgICAgICAgICB2YXIgbWF4SSA9IE1hdGguZmxvb3IodGhpcy5jYW52YXMud2lkdGggLyAodyAvIHJvd3MpICsgMSk7DQogICAgICAgICAgdmFyIGlUID0gTWF0aC5taW4odGhpcy5hbW91bnQsIG1heEkpOw0KICAgICAgICAgIHZhciBpID0gdGhpcy5waWNzLmxlbmd0aDsNCg0KICAgICAgICAgIHZhciB4ID0gMDsNCiAgICAgICAgICB2YXIgeSA9IDA7DQogICAgICAgICAgdmFyIGFkZGVkID0gMDsNCiAgICAgICAgICBpZiAoaSAhPSBpVCkgew0KICAgICAgICAgICAgLy9mb3IgKHZhciBpdGVyPTA7aXRlcjwzO2l0ZXIrKykNCiAgICAgICAgICAgIC8vew0KICAgICAgICAgICAgdmFyIHByZXZGcmFtZSA9IDA7DQogICAgICAgICAgICB3aGlsZSAoaSA8IGlUKSB7DQogICAgICAgICAgICAgIC8vaWYgKGk8aVQpDQogICAgICAgICAgICAgIE1hdGguc2VlZHJhbmRvbShHYW1lLnNlZWQgKyAiICIgKyB0aGlzLmlkICsgIiAiICsgaSk7DQogICAgICAgICAgICAgIGlmIChyb3dzICE9IDEpIHsNCiAgICAgICAgICAgICAgICB4ID0NCiAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoaSAvIHJvd3MpICogdyArDQogICAgICAgICAgICAgICAgICAoKGkgJSByb3dzKSAvIHJvd3MpICogdyArDQogICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHhWKSArDQogICAgICAgICAgICAgICAgICBvZmZYOw0KICAgICAgICAgICAgICAgIHkgPQ0KICAgICAgICAgICAgICAgICAgMzIgKw0KICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiB5VikgKw0KICAgICAgICAgICAgICAgICAgKCgoLXJvd3MgLyAyKSAqIDMyKSAvIDIgKyAoKGkgJSByb3dzKSAqIDMyKSAvIDIpICsNCiAgICAgICAgICAgICAgICAgIG9mZlk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgeCA9IGkgKiB3ICsgTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiB4VikgKyBvZmZYOw0KICAgICAgICAgICAgICAgIHkgPSAzMiArIE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgLSAwLjUpICogeVYpICsgb2ZmWTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB2YXIgdXNlZFBpYyA9IHR5cGVvZiBwaWMgPT0gInN0cmluZyIgPyBwaWMgOiBwaWModGhpcywgaSk7DQogICAgICAgICAgICAgIHZhciBmcmFtZSA9IC0xOw0KICAgICAgICAgICAgICAvL2lmIChmcmFtZXM+MSkgZnJhbWU9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmZyYW1lcyk7DQogICAgICAgICAgICAgIGlmIChmcmFtZXMgPiAxKSB7DQogICAgICAgICAgICAgICAgZnJhbWUgPQ0KICAgICAgICAgICAgICAgICAgcHJldkZyYW1lICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGZyYW1lcyAtIDEpICsgMSk7DQogICAgICAgICAgICAgICAgZnJhbWUgPSBmcmFtZSAlIGZyYW1lczsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBwcmV2RnJhbWUgPSBmcmFtZTsNCiAgICAgICAgICAgICAgdGhpcy5waWNzLnB1c2goew0KICAgICAgICAgICAgICAgIHg6IE1hdGguZmxvb3IoeCksDQogICAgICAgICAgICAgICAgeTogTWF0aC5mbG9vcih5KSwNCiAgICAgICAgICAgICAgICB6OiB5LA0KICAgICAgICAgICAgICAgIHBpYzogdXNlZFBpYywNCiAgICAgICAgICAgICAgICBpZDogaSwNCiAgICAgICAgICAgICAgICBmcmFtZTogZnJhbWUsDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgIGFkZGVkKys7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB3aGlsZSAoaSA+IGlUKSB7DQogICAgICAgICAgICAgIC8vZWxzZSBpZiAoaT5pVCkNCiAgICAgICAgICAgICAgdGhpcy5waWNzLnNvcnQoR2FtZS5zb3J0U3ByaXRlc0J5SWQpOw0KICAgICAgICAgICAgICB0aGlzLnBpY3MucG9wKCk7DQogICAgICAgICAgICAgIGktLTsNCiAgICAgICAgICAgICAgYWRkZWQtLTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vfQ0KICAgICAgICAgICAgdGhpcy5waWNzLnNvcnQoR2FtZS5zb3J0U3ByaXRlcyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGxlbiA9IHRoaXMucGljcy5sZW5ndGg7DQoNCiAgICAgICAgICBpZiAodGhpcy5tb3VzZU9uKSB7DQogICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSAtMTsNCiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT0gIkdyYW5kbWEiKSB7DQogICAgICAgICAgICAgIC8vbW91c2UgZGV0ZWN0aW9uIG9ubHkgZml0cyBncmFuZG1hIHNwcml0ZXMgZm9yIG5vdw0KICAgICAgICAgICAgICB2YXIgbWFyZ2luVyA9IC0xODsNCiAgICAgICAgICAgICAgdmFyIG1hcmdpbkggPSAtMTA7DQogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgcGljID0gdGhpcy5waWNzW2ldOw0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIHRoaXMubW91c2VQb3NbMF0gPj0gcGljLnggLSBtYXJnaW5XICYmDQogICAgICAgICAgICAgICAgICB0aGlzLm1vdXNlUG9zWzBdIDwgcGljLnggKyA2NCArIG1hcmdpblcgJiYNCiAgICAgICAgICAgICAgICAgIHRoaXMubW91c2VQb3NbMV0gPj0gcGljLnkgLSBtYXJnaW5IICYmDQogICAgICAgICAgICAgICAgICB0aGlzLm1vdXNlUG9zWzFdIDwgcGljLnkgKyA2NCArIG1hcmdpbkgNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IGk7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPT0gaSAmJg0KICAgICAgICAgICAgICAgICAgcGljLnBpYyA9PSAiZWxmR3JhbmRtYS5wbmciICYmDQogICAgICAgICAgICAgICAgICBHYW1lLm1vdXNlRG93bg0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgIEdhbWUuV2luKCJCYWJ5IGl0J3Mgb2xkIG91dHNpZGUiKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgR2FtZS5wcmVmcy5jdXN0b21HcmFuZG1hcyAmJg0KICAgICAgICAgICAgICAgIEdhbWUuY3VzdG9tR3JhbmRtYU5hbWVzLmxlbmd0aCA+IDANCiAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgdmFyIHN0ciA9IGxvYygNCiAgICAgICAgICAgICAgICAgICJOYW1lcyBpbiB3aGl0ZSB3ZXJlIHN1Ym1pdHRlZCBieSBvdXIgc3VwcG9ydGVycyBvbiBQYXRyZW9uLiINCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNzU7DQogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjMDAwIjsNCiAgICAgICAgICAgICAgICBjdHguZm9udCA9ICI5cHggTWVycml3ZWF0aGVyIjsNCiAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gImxlZnQiOw0KICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjdHgubWVhc3VyZVRleHQoc3RyKS53aWR0aCArIDQsIDEyKTsNCiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAicmdiYSgyNTUsMjU1LDI1NSwwLjcpIjsNCiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoc3RyLCAyLCA4KTsNCiAgICAgICAgICAgICAgICBpZiAoRU4pIHsNCiAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAicmdiYSgyNTUsMjU1LDI1NSwxKSI7DQogICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoDQogICAgICAgICAgICAgICAgICAgICJ3aGl0ZSIsDQogICAgICAgICAgICAgICAgICAgIDIgKyBjdHgubWVhc3VyZVRleHQoIk5hbWVzIGluICIpLndpZHRoLA0KICAgICAgICAgICAgICAgICAgICA4DQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbSgpOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgew0KICAgICAgICAgICAgdmFyIHBpYyA9IHRoaXMucGljc1tpXTsNCiAgICAgICAgICAgIHZhciBzcHJpdGUgPSBQaWMocGljLnBpYyk7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWQgPT0gaSAmJiB0aGlzLm5hbWUgPT0gIkdyYW5kbWEiKSB7DQogICAgICAgICAgICAgIGN0eC5mb250ID0gIjE0cHggTWVycml3ZWF0aGVyIjsNCiAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgICBNYXRoLnNlZWRyYW5kb20oR2FtZS5zZWVkICsgIiAiICsgcGljLmlkIC8qKycgJytwaWMuaWQqLyk7IC8vKEdhbWUuc2VlZCsnICcrcGljLmlkKycgJytwaWMueCsnICcrcGljLnkpOw0KICAgICAgICAgICAgICB2YXIgeWVhcnMgPQ0KICAgICAgICAgICAgICAgIChEYXRlLm5vdygpIC0gbmV3IERhdGUoMjAxMywgNywgOCkpIC8NCiAgICAgICAgICAgICAgICAgICgxMDAwICogNjAgKiA2MCAqIDI0ICogMzY1KSArDQogICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKTsgLy90aGUgZ3JhbmRtYXMgYWdlIHdpdGggdGhlIGdhbWUNCiAgICAgICAgICAgICAgdmFyIG5hbWUgPSBjaG9vc2UoR2FtZS5ncmFuZG1hTmFtZXMpOw0KICAgICAgICAgICAgICB2YXIgY3VzdG9tID0gZmFsc2U7DQogICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICBHYW1lLnByZWZzLmN1c3RvbUdyYW5kbWFzICYmDQogICAgICAgICAgICAgICAgR2FtZS5jdXN0b21HcmFuZG1hTmFtZXMubGVuZ3RoID4gMCAmJg0KICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAwLjINCiAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgbmFtZSA9IGNob29zZShHYW1lLmN1c3RvbUdyYW5kbWFOYW1lcyk7DQogICAgICAgICAgICAgICAgY3VzdG9tID0gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB2YXIgdGV4dCA9IGxvYygiJTEsIGFnZSAlMiIsIFsNCiAgICAgICAgICAgICAgICBuYW1lLA0KICAgICAgICAgICAgICAgIEJlYXV0aWZ5KA0KICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcig3MCArIE1hdGgucmFuZG9tKCkgKiAzMCArIHllYXJzICsgdGhpcy5sZXZlbCkNCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICBdKTsNCiAgICAgICAgICAgICAgdmFyIHdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoICsgMTI7DQogICAgICAgICAgICAgIHZhciB4ID0gTWF0aC5tYXgoDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICBNYXRoLm1pbigNCiAgICAgICAgICAgICAgICAgIHBpYy54ICsgMzIgLSB3aWR0aCAvIDIgKyBNYXRoLnJhbmRvbSgpICogMzIgLSAxNiwNCiAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoIC0gd2lkdGgNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIHZhciB5ID0gNCArIE1hdGgucmFuZG9tKCkgKiA4IC0gNDsNCiAgICAgICAgICAgICAgTWF0aC5zZWVkcmFuZG9tKCk7DQogICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAiIzAwMCI7DQogICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICIjMDAwIjsNCiAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDg7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNzU7DQogICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsNCiAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhwaWMueCArIDMyLCBwaWMueSArIDMyKTsNCiAgICAgICAgICAgICAgY3R4LmxpbmVUbyhNYXRoLmZsb29yKHggKyB3aWR0aCAvIDIpLCBNYXRoLmZsb29yKHkgKyAyMCkpOw0KICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7DQogICAgICAgICAgICAgIGN0eC5maWxsUmVjdChNYXRoLmZsb29yKHgpLCBNYXRoLmZsb29yKHkpLCBNYXRoLmZsb29yKHdpZHRoKSwgMjQpOw0KICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgICBpZiAoY3VzdG9tKSBjdHguZmlsbFN0eWxlID0gIiNmZmYiOw0KICAgICAgICAgICAgICBlbHNlIGN0eC5maWxsU3R5bGUgPSAicmdiYSgyNTUsMjU1LDI1NSwwLjcpIjsNCiAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KHRleHQsIE1hdGguZmxvb3IoeCArIHdpZHRoIC8gMiksIE1hdGguZmxvb3IoeSArIDE2KSk7DQoNCiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICBzcHJpdGUsDQogICAgICAgICAgICAgICAgTWF0aC5mbG9vcihwaWMueCArIE1hdGgucmFuZG9tKCkgKiA0IC0gMiksDQogICAgICAgICAgICAgICAgTWF0aC5mbG9vcihwaWMueSArIE1hdGgucmFuZG9tKCkgKiA0IC0gMikNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vZWxzZSBpZiAoMSkgY3R4LmRyYXdJbWFnZShzcHJpdGUsMCwwLHNwcml0ZS53aWR0aCxzcHJpdGUuaGVpZ2h0LHBpYy54LHBpYy55LHNwcml0ZS53aWR0aCxzcHJpdGUuaGVpZ2h0KTsNCiAgICAgICAgICAgIGVsc2UgaWYgKHBpYy5mcmFtZSAhPSAtMSkNCiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICBzcHJpdGUsDQogICAgICAgICAgICAgICAgKHNwcml0ZS53aWR0aCAvIGZyYW1lcykgKiBwaWMuZnJhbWUsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICBzcHJpdGUud2lkdGggLyBmcmFtZXMsDQogICAgICAgICAgICAgICAgc3ByaXRlLmhlaWdodCwNCiAgICAgICAgICAgICAgICBwaWMueCwNCiAgICAgICAgICAgICAgICBwaWMueSwNCiAgICAgICAgICAgICAgICBzcHJpdGUud2lkdGggLyBmcmFtZXMsDQogICAgICAgICAgICAgICAgc3ByaXRlLmhlaWdodA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgZWxzZSBjdHguZHJhd0ltYWdlKHNwcml0ZSwgcGljLngsIHBpYy55KTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvKg0KCQkJCQl2YXIgcGljWD10aGlzLmlkOw0KCQkJCQl2YXIgcGljWT0xMjsNCgkJCQkJdmFyIHc9MTsNCgkJCQkJdmFyIGg9MTsNCgkJCQkJdmFyIHc9TWF0aC5hYnMoTWF0aC5jb3MoR2FtZS5UKjAuMit0aGlzLmlkKjItMC4zKSkqMC4yKzAuODsNCgkJCQkJdmFyIGg9TWF0aC5hYnMoTWF0aC5zaW4oR2FtZS5UKjAuMit0aGlzLmlkKjIpKSowLjMrMC43Ow0KCQkJCQl2YXIgeD02NCtNYXRoLmNvcyhHYW1lLlQqMC4xOSt0aGlzLmlkKjIpKjgtMjQqdzsNCgkJCQkJdmFyIHk9MTI4LU1hdGguYWJzKE1hdGgucG93KE1hdGguc2luKEdhbWUuVCowLjIrdGhpcy5pZCoyKSw1KSoxNiktNDgqaDsNCgkJCQkJY3R4LmRyYXdJbWFnZShQaWMoJ2ljb25zLnBuZycpLHBpY1gqNDgscGljWSo0OCw0OCw0OCxNYXRoLmZsb29yKHgpLE1hdGguZmxvb3IoeSksNDgqdyw0OCpoKTsNCgkJCQkJKi8NCiAgICAgICAgfTsNCiAgICAgIH0NCg0KICAgICAgR2FtZS5sYXN0ID0gdGhpczsNCiAgICAgIEdhbWUuT2JqZWN0c1t0aGlzLm5hbWVdID0gdGhpczsNCiAgICAgIEdhbWUuT2JqZWN0c0J5SWQucHVzaCh0aGlzKTsNCiAgICAgIEdhbWUuT2JqZWN0c04rKzsNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH07DQoNCiAgICBHYW1lLkRyYXdCdWlsZGluZ3MgPSBmdW5jdGlvbiAoKSAvL2RyYXcgYnVpbGRpbmcgZGlzcGxheXMgd2l0aCBjYW52YXMNCiAgICB7DQogICAgICBpZiAoR2FtZS5kcmF3VCAlIDMgPT0gMCkgew0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuT2JqZWN0c1tpXTsNCiAgICAgICAgICBpZiAobWUuaWQgPiAwICYmICFtZS5vbk1pbmlnYW1lICYmICFtZS5tdXRlZCkgbWUuZHJhdygpOw0KICAgICAgICAgIGVsc2UgbWUucGljcyA9IFtdOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUuc29ydFNwcml0ZXMgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgaWYgKGEueiA+IGIueikgcmV0dXJuIDE7DQogICAgICBlbHNlIGlmIChhLnogPCBiLnopIHJldHVybiAtMTsNCiAgICAgIGVsc2UgcmV0dXJuIDA7DQogICAgfTsNCiAgICBHYW1lLnNvcnRTcHJpdGVzQnlJZCA9IGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICBpZiAoYS5pZCA+IGIuaWQpIHJldHVybiAxOw0KICAgICAgZWxzZSBpZiAoYS5pZCA8IGIuaWQpIHJldHVybiAtMTsNCiAgICAgIGVsc2UgcmV0dXJuIDA7DQogICAgfTsNCg0KICAgIEdhbWUubW9kaWZ5QnVpbGRpbmdQcmljZSA9IGZ1bmN0aW9uIChidWlsZGluZywgcHJpY2UpIHsNCiAgICAgIGlmIChHYW1lLkhhcygiU2Vhc29uIHNhdmluZ3MiKSkgcHJpY2UgKj0gMC45OTsNCiAgICAgIGlmIChHYW1lLkhhcygiU2FudGEncyBkb21pbmlvbiIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJGYWJlcmdlIGVnZyIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJEaXZpbmUgZGlzY291bnQiKSkgcHJpY2UgKj0gMC45OTsNCiAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSAjMTAwIikpIHByaWNlICo9IDAuOTk7DQogICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0ZpZXJjZSBIb2FyZGVyJykpIHByaWNlKj0wLjk4Ow0KICAgICAgcHJpY2UgKj0gMSAtIEdhbWUuYXVyYU11bHQoIkZpZXJjZSBIb2FyZGVyIikgKiAwLjAyOw0KICAgICAgaWYgKEdhbWUuaGFzQnVmZigiRXZlcnl0aGluZyBtdXN0IGdvIikpIHByaWNlICo9IDAuOTU7DQogICAgICBpZiAoR2FtZS5oYXNCdWZmKCJDcmFmdHkgcGl4aWVzIikpIHByaWNlICo9IDAuOTg7DQogICAgICBpZiAoR2FtZS5oYXNCdWZmKCJOYXN0eSBnb2JsaW5zIikpIHByaWNlICo9IDEuMDI7DQogICAgICBpZiAoYnVpbGRpbmcuZm9ydHVuZSAmJiBHYW1lLkhhcyhidWlsZGluZy5mb3J0dW5lLm5hbWUpKSBwcmljZSAqPSAwLjkzOw0KICAgICAgcHJpY2UgKj0gR2FtZS5lZmYoImJ1aWxkaW5nQ29zdCIpOw0KICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgiY3JlYXRpb24iKTsNCiAgICAgICAgaWYgKGdvZEx2bCA9PSAxKSBwcmljZSAqPSAwLjkzOw0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgcHJpY2UgKj0gMC45NTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIHByaWNlICo9IDAuOTg7DQogICAgICB9DQogICAgICByZXR1cm4gcHJpY2U7DQogICAgfTsNCg0KICAgIEdhbWUuc3RvcmVCdWxrQnV0dG9uID0gZnVuY3Rpb24gKGlkKSB7DQogICAgICBpZiAoaWQgPT0gMCkgR2FtZS5idXlNb2RlID0gMTsNCiAgICAgIGVsc2UgaWYgKGlkID09IDEpIEdhbWUuYnV5TW9kZSA9IC0xOw0KICAgICAgZWxzZSBpZiAoaWQgPT0gMikgR2FtZS5idXlCdWxrID0gMTsNCiAgICAgIGVsc2UgaWYgKGlkID09IDMpIEdhbWUuYnV5QnVsayA9IDEwOw0KICAgICAgZWxzZSBpZiAoaWQgPT0gNCkgR2FtZS5idXlCdWxrID0gMTAwOw0KICAgICAgZWxzZSBpZiAoaWQgPT0gNSkgR2FtZS5idXlCdWxrID0gLTE7DQoNCiAgICAgIGlmIChHYW1lLmJ1eU1vZGUgPT0gMSAmJiBHYW1lLmJ1eUJ1bGsgPT0gLTEpIEdhbWUuYnV5QnVsayA9IDEwMDsNCg0KICAgICAgaWYgKEdhbWUuYnV5TW9kZSA9PSAxKQ0KICAgICAgICBsKCJzdG9yZUJ1bGtCdXkiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrTW9kZSBzZWxlY3RlZCI7DQogICAgICBlbHNlIGwoInN0b3JlQnVsa0J1eSIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtNb2RlIjsNCiAgICAgIGlmIChHYW1lLmJ1eU1vZGUgPT0gLTEpDQogICAgICAgIGwoInN0b3JlQnVsa1NlbGwiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrTW9kZSBzZWxlY3RlZCI7DQogICAgICBlbHNlIGwoInN0b3JlQnVsa1NlbGwiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrTW9kZSI7DQoNCiAgICAgIGlmIChHYW1lLmJ1eUJ1bGsgPT0gMSkNCiAgICAgICAgbCgic3RvcmVCdWxrMSIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQgc2VsZWN0ZWQiOw0KICAgICAgZWxzZSBsKCJzdG9yZUJ1bGsxIikuY2xhc3NOYW1lID0gInN0b3JlUHJlQnV0dG9uIHN0b3JlQnVsa0Ftb3VudCI7DQogICAgICBpZiAoR2FtZS5idXlCdWxrID09IDEwKQ0KICAgICAgICBsKCJzdG9yZUJ1bGsxMCIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQgc2VsZWN0ZWQiOw0KICAgICAgZWxzZSBsKCJzdG9yZUJ1bGsxMCIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQiOw0KICAgICAgaWYgKEdhbWUuYnV5QnVsayA9PSAxMDApDQogICAgICAgIGwoInN0b3JlQnVsazEwMCIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQgc2VsZWN0ZWQiOw0KICAgICAgZWxzZSBsKCJzdG9yZUJ1bGsxMDAiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrQW1vdW50IjsNCiAgICAgIGlmIChHYW1lLmJ1eUJ1bGsgPT0gLTEpDQogICAgICAgIGwoInN0b3JlQnVsa01heCIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQgc2VsZWN0ZWQiOw0KICAgICAgZWxzZSBsKCJzdG9yZUJ1bGtNYXgiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrQW1vdW50IjsNCg0KICAgICAgaWYgKEdhbWUuYnV5TW9kZSA9PSAxKSB7DQogICAgICAgIGwoInN0b3JlQnVsa01heCIpLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsNCiAgICAgICAgbCgicHJvZHVjdHMiKS5jbGFzc05hbWUgPSAic3RvcmVTZWN0aW9uIjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGwoInN0b3JlQnVsa01heCIpLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQogICAgICAgIGwoInByb2R1Y3RzIikuY2xhc3NOYW1lID0gInN0b3JlU2VjdGlvbiBzZWxsaW5nIjsNCiAgICAgIH0NCg0KICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICBpZiAoaWQgIT0gLTEpIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgfTsNCiAgICBHYW1lLkJ1aWxkU3RvcmUgPSBmdW5jdGlvbiAoKSAvL2NyZWF0ZSB0aGUgRE9NIGZvciB0aGUgc3RvcmUncyBidWlsZGluZ3MNCiAgICB7DQogICAgICAvL2lmICh0eXBlb2Ygc2hvd0FkcyE9PSd1bmRlZmluZWQnKSBsKCdzdG9yZScpLnNjcm9sbFRvcD0xMDA7DQoNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGRpdiBpZD0ic3RvcmVCdWxrIiBjbGFzcz0ic3RvcmVQcmUiICcgKw0KICAgICAgICBHYW1lLmdldFRvb2x0aXAoDQogICAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmc6OHB4O21pbi13aWR0aDoyMDBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTFweDsiIGlkPSJ0b29sdGlwU3RvcmVCdWxrIj4nICsNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIllvdSBjYW4gYWxzbyBwcmVzcyAlMSB0byBidWxrLWJ1eSBvciBzZWxsICUyIG9mIGEgYnVpbGRpbmcgYXQgYSB0aW1lLCBvciAlMyBmb3IgJTQuIiwNCiAgICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICI8Yj4iICsgbG9jKCJDdHJsIikgKyAiPC9iPiIsDQogICAgICAgICAgICAgICAgIjxiPjEwPC9iPiIsDQogICAgICAgICAgICAgICAgIjxiPiIgKyBsb2MoIlNoaWZ0IikgKyAiPC9iPiIsDQogICAgICAgICAgICAgICAgIjxiPjEwMDwvYj4iLA0KICAgICAgICAgICAgICBdDQogICAgICAgICAgICApICsNCiAgICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAgICJzdG9yZSINCiAgICAgICAgKSArDQogICAgICAgICI+IiArDQogICAgICAgICc8ZGl2IGlkPSJzdG9yZUJ1bGtCdXkiIGNsYXNzPSJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtNb2RlIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuc3RvcmVCdWxrQnV0dG9uKDApOyI+JyArDQogICAgICAgIGxvYygiQnV5IikgKw0KICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICc8ZGl2IGlkPSJzdG9yZUJ1bGtTZWxsIiBjbGFzcz0ic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrTW9kZSIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLnN0b3JlQnVsa0J1dHRvbigxKTsiPicgKw0KICAgICAgICBsb2MoIlNlbGwiKSArDQogICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgJzxkaXYgaWQ9InN0b3JlQnVsazEiIGNsYXNzPSJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQiICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5zdG9yZUJ1bGtCdXR0b24oMik7Ij4xPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGlkPSJzdG9yZUJ1bGsxMCIgY2xhc3M9InN0b3JlUHJlQnV0dG9uIHN0b3JlQnVsa0Ftb3VudCIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLnN0b3JlQnVsa0J1dHRvbigzKTsiPjEwPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGlkPSJzdG9yZUJ1bGsxMDAiIGNsYXNzPSJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQiICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5zdG9yZUJ1bGtCdXR0b24oNCk7Ij4xMDA8L2Rpdj4nICsNCiAgICAgICAgJzxkaXYgaWQ9InN0b3JlQnVsa01heCIgY2xhc3M9InN0b3JlUHJlQnV0dG9uIHN0b3JlQnVsa0Ftb3VudCIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLnN0b3JlQnVsa0J1dHRvbig1KTsiPicgKw0KICAgICAgICBsb2MoImFsbCIpICsNCiAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAiPC9kaXY+IjsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuT2JqZWN0c1tpXTsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyDQogICAgICAgICAgICA/ICc8YnV0dG9uIGFyaWEtbGFiZWxsZWRieT0iYXJpYVJlYWRlci1wcm9kdWN0LScgKyBtZS5pZCArICciJw0KICAgICAgICAgICAgOiAiPGRpdiIpICsNCiAgICAgICAgICAnIGNsYXNzPSJwcm9kdWN0IHRvZ2dsZWRPZmYiICcgKw0KICAgICAgICAgIEdhbWUuZ2V0RHluYW1pY1Rvb2x0aXAoDQogICAgICAgICAgICAiR2FtZS5PYmplY3RzQnlJZFsiICsgbWUuaWQgKyAiXS50b29sdGlwIiwNCiAgICAgICAgICAgICJzdG9yZSINCiAgICAgICAgICApICsNCiAgICAgICAgICAnIGlkPSJwcm9kdWN0JyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciPjxkaXYgY2xhc3M9Imljb24gb2ZmIiBpZD0icHJvZHVjdEljb25PZmYnICsNCiAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgJyIgc3R5bGU9IiI+PC9kaXY+PGRpdiBjbGFzcz0iaWNvbiIgaWQ9InByb2R1Y3RJY29uJyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciIHN0eWxlPSIiPjwvZGl2PjxkaXYgY2xhc3M9ImNvbnRlbnQiPjxkaXYgY2xhc3M9ImxvY2tlZFRpdGxlIj4/Pz88L2Rpdj48ZGl2IGNsYXNzPSJ0aXRsZSBwcm9kdWN0TmFtZSIgaWQ9InByb2R1Y3ROYW1lJyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciPjwvZGl2PjxzcGFuIGNsYXNzPSJwcmljZU11bHQiIGlkPSJwcm9kdWN0UHJpY2VNdWx0JyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciPjwvc3Bhbj48c3BhbiBjbGFzcz0icHJpY2UiIGlkPSJwcm9kdWN0UHJpY2UnICsNCiAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgJyI+PC9zcGFuPjxkaXYgY2xhc3M9InRpdGxlIG93bmVkIiBpZD0icHJvZHVjdE93bmVkJyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciPjwvZGl2PicgKw0KICAgICAgICAgIChHYW1lLnByZWZzLnNjcmVlbnJlYWRlcg0KICAgICAgICAgICAgPyAnPGxhYmVsIGNsYXNzPSJzck9ubHkiIHN0eWxlPSJ3aWR0aDo2NHB4O2xlZnQ6LTY0cHg7IiBpZD0iYXJpYVJlYWRlci1wcm9kdWN0LScgKw0KICAgICAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgICAgICciPjwvbGFiZWw+Jw0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAvKic8ZGl2IGNsYXNzPSJidXlTZWxsIj48ZGl2IHN0eWxlPSJsZWZ0OjBweDsiIGlkPSJidXR0b25CdXkxMC0nK21lLmlkKyciPkJ1eSAxMDwvZGl2PjxkaXYgc3R5bGU9ImxlZnQ6MTAwcHg7IiBpZD0iYnV0dG9uU2VsbC0nK21lLmlkKyciPlNlbGwgMTwvZGl2PjxkaXYgc3R5bGU9ImxlZnQ6MjAwcHg7IiBpZD0iYnV0dG9uU2VsbEFsbC0nK21lLmlkKyciPlNlbGwgYWxsPC9kaXY+PC9kaXY+JysqLw0KICAgICAgICAgIChHYW1lLnByZWZzLnNjcmVlbnJlYWRlciA/ICI8L2J1dHRvbj4iIDogIjwvZGl2PiIpOw0KICAgICAgfQ0KICAgICAgbCgicHJvZHVjdHMiKS5pbm5lckhUTUwgPSBzdHI7DQoNCiAgICAgIEdhbWUuc3RvcmVCdWxrQnV0dG9uKC0xKTsNCg0KICAgICAgLyp2YXIgU2VsbEFsbFByb21wdD1mdW5jdGlvbihpZCkNCgkJCXsNCgkJCQlyZXR1cm4gZnVuY3Rpb24oaWQpe0dhbWUuUHJvbXB0KCc8ZGl2IGNsYXNzPSJibG9jayI+RG8geW91IHJlYWxseSB3YW50IHRvIHNlbGwgeW91ciAnK2xvYygiJTEgIitHYW1lLk9iamVjdHNCeUlkW2lkXS5ic2luZ2xlLExCZWF1dGlmeShHYW1lLk9iamVjdHNCeUlkW2lkXS5hbW91bnQpKSsnPzwvZGl2PicsW1snWWVzJywnR2FtZS5PYmplY3RzQnlJZFsnK2lkKyddLnNlbGwoLTEpO0dhbWUuQ2xvc2VQcm9tcHQoKTsnXSxbJ05vJywnR2FtZS5DbG9zZVByb21wdCgpOyddXSk7fShpZCk7DQoJCQl9Ki8NCg0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBtZS5sID0gbCgicHJvZHVjdCIgKyBtZS5pZCk7DQoNCiAgICAgICAgLy90aGVzZSBhcmUgYSBiaXQgbWVzc3kgYnV0IGFoIHdlbGwNCiAgICAgICAgaWYgKCFHYW1lLnRvdWNoRXZlbnRzKSB7DQogICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICBtZS5sLA0KICAgICAgICAgICAgImNsaWNrIiwNCiAgICAgICAgICAgIChmdW5jdGlvbiAod2hhdCkgew0KICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICBHYW1lLkNsaWNrUHJvZHVjdCh3aGF0KTsNCiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9KShtZS5pZCkNCiAgICAgICAgICApOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIEFkZEV2ZW50KA0KICAgICAgICAgICAgbWUubCwNCiAgICAgICAgICAgICJ0b3VjaGVuZCIsDQogICAgICAgICAgICAoZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICAgICAgR2FtZS5DbGlja1Byb2R1Y3Qod2hhdCk7DQogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSkobWUuaWQpDQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLkNsaWNrUHJvZHVjdCA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBHYW1lLk9iamVjdHNCeUlkW3doYXRdLmJ1eSgpOw0KICAgIH07DQoNCiAgICBHYW1lLlJlZnJlc2hTdG9yZSA9IGZ1bmN0aW9uICgpIC8vcmVmcmVzaCB0aGUgc3RvcmUncyBidWlsZGluZ3MNCiAgICB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBHYW1lLk9iamVjdHNbaV0ucmVmcmVzaCgpOw0KICAgICAgfQ0KICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDA7DQogICAgfTsNCg0KICAgIEdhbWUuQ29tcHV0ZUNwcyA9IGZ1bmN0aW9uIChiYXNlLCBtdWx0LCBib251cykgew0KICAgICAgaWYgKCFib251cykgYm9udXMgPSAwOw0KICAgICAgcmV0dXJuIGJhc2UgKiBNYXRoLnBvdygyLCBtdWx0KSArIGJvbnVzOw0KICAgIH07DQoNCiAgICBHYW1lLmlzTWluaWdhbWVSZWFkeSA9IGZ1bmN0aW9uIChtZSkgew0KICAgICAgcmV0dXJuIG1lLm1pbmlnYW1lVXJsICYmIG1lLm1pbmlnYW1lTG9hZGVkICYmIG1lLmxldmVsID4gMDsNCiAgICB9Ow0KICAgIEdhbWUuc2NyaXB0QmluZGluZ3MgPSBbXTsNCiAgICBHYW1lLnNob3dlZFNjcmlwdExvYWRFcnJvciA9IGZhbHNlOw0KICAgIEdhbWUuTG9hZE1pbmlnYW1lcyA9IGZ1bmN0aW9uICgpIC8vbG9hZCBzY3JpcHRzIGZvciBlYWNoIG1pbmlnYW1lDQogICAgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAoDQogICAgICAgICAgbWUubWluaWdhbWVVcmwgJiYNCiAgICAgICAgICBtZS5sZXZlbCA+IDAgJiYNCiAgICAgICAgICAhbWUubWluaWdhbWVMb2FkZWQgJiYNCiAgICAgICAgICAhbWUubWluaWdhbWVMb2FkaW5nICYmDQogICAgICAgICAgIWwoIm1pbmlnYW1lU2NyaXB0LSIgKyBtZS5pZCkNCiAgICAgICAgKSB7DQogICAgICAgICAgbWUubWluaWdhbWVMb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICAvL3dlJ3JlIG9ubHkgbG9hZGluZyB0aGUgbWluaWdhbWUgc2NyaXB0cyB0aGF0IGFyZW4ndCBsb2FkZWQgeWV0IGFuZCB3aGljaCBoYXZlIGVub3VnaCBidWlsZGluZyBsZXZlbA0KICAgICAgICAgIC8vd2UgY2FsbCB0aGlzIGZ1bmN0aW9uIG9uIGJ1aWxkaW5nIGxldmVsIHVwIGFuZCBvbiBsb2FkDQogICAgICAgICAgLy9jb25zb2xlLmxvZygnTG9hZGluZyBzY3JpcHQgJyttZS5taW5pZ2FtZVVybCsnLi4uJyk7DQogICAgICAgICAgc2V0VGltZW91dCgNCiAgICAgICAgICAgIChmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQogICAgICAgICAgICAgICAgc2NyaXB0LmlkID0gIm1pbmlnYW1lU2NyaXB0LSIgKyBtZS5pZDsNCiAgICAgICAgICAgICAgICBHYW1lLnNjcmlwdEJpbmRpbmdzWyJtaW5pZ2FtZVNjcmlwdC0iICsgbWUuaWRdID0gbWU7DQogICAgICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgNCiAgICAgICAgICAgICAgICAgICJzcmMiLA0KICAgICAgICAgICAgICAgICAgbWUubWluaWdhbWVVcmwgKyAiP3I9IiArIEdhbWUudmVyc2lvbg0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IChmdW5jdGlvbiAobWUsIHNjcmlwdCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZS5taW5pZ2FtZUxvYWRlZCkgR2FtZS5zY3JpcHRMb2FkZWQobWUsIHNjcmlwdCk7DQogICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIH0pKG1lLCAibWluaWdhbWVTY3JpcHQtIiArIG1lLmlkKTsNCiAgICAgICAgICAgICAgICBzY3JpcHQub25lcnJvciA9IChmdW5jdGlvbiAobWUsIHNjcmlwdCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgbWUubWluaWdhbWVMb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGlmICghbWUubWluaWdhbWVMb2FkZWQgJiYgIUdhbWUuc2hvd2VkU2NyaXB0TG9hZEVycm9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgR2FtZS5zaG93ZWRTY3JpcHRMb2FkRXJyb3IgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jKCJFcnJvciEiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb3VsZG4ndCBsb2FkIG1pbmlnYW1lcy4gVHJ5IHJlbG9hZGluZy4iDQogICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9KShtZSwgIm1pbmlnYW1lU2NyaXB0LSIgKyBtZS5pZCk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOw0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSkobWUpLA0KICAgICAgICAgICAgMTANCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLnNjcmlwdExvYWRlZCA9IGZ1bmN0aW9uICh3aG8sIHNjcmlwdCkgew0KICAgICAgd2hvLm1pbmlnYW1lTG9hZGluZyA9IGZhbHNlOw0KICAgICAgd2hvLm1pbmlnYW1lTG9hZGVkID0gdHJ1ZTsNCiAgICAgIHdoby5yZWZyZXNoKCk7DQogICAgICB3aG8ubWluaWdhbWUubGF1bmNoKCk7DQogICAgICBpZiAod2hvLm1pbmlnYW1lU2F2ZSkgew0KICAgICAgICB3aG8ubWluaWdhbWUucmVzZXQodHJ1ZSk7DQogICAgICAgIHdoby5taW5pZ2FtZS5sb2FkKHdoby5taW5pZ2FtZVNhdmUpOw0KICAgICAgICB3aG8ubWluaWdhbWVTYXZlID0gMDsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgR2FtZS5tYWdpY0NwUyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICAvKg0KCQkJaWYgKEdhbWUuT2JqZWN0c1t3aGF0XS5hbW91bnQ+PTI1MCkNCgkJCXsNCgkJCQkvL3RoaXMgbWFrZXMgYnVpbGRpbmdzIGdpdmUgMSUgbW9yZSBjb29raWVzIGZvciBldmVyeSBidWlsZGluZyBvdmVyIDI1MC4NCgkJCQkvL3RoaXMgdHVybnMgb3V0IHRvIGJlIHJhdGhlciBzdHVwaWRseSBvdmVycG93ZXJlZC4NCgkJCQl2YXIgbj1HYW1lLk9iamVjdHNbd2hhdF0uYW1vdW50LTI1MDsNCgkJCQlyZXR1cm4gMStNYXRoLnBvdygxLjAxLG4pOw0KCQkJfQ0KCQkJZWxzZSByZXR1cm4gMTsNCgkJCSovDQogICAgICByZXR1cm4gMTsNCiAgICB9Ow0KDQogICAgLy9kZWZpbmUgb2JqZWN0cw0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJDdXJzb3IiLA0KICAgICAgImN1cnNvcnxjdXJzb3JzfGNsaWNrZWR8W1hdIGV4dHJhIGZpbmdlcnxbWF0gZXh0cmEgZmluZ2VycyIsDQogICAgICAiQXV0b2NsaWNrcyBvbmNlIGV2ZXJ5IDEwIHNlY29uZHMuIiwNCiAgICAgIDAsDQogICAgICAwLA0KICAgICAge30sDQogICAgICAxNSwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgYWRkID0gMDsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJUaG91c2FuZCBmaW5nZXJzIikpIGFkZCArPSAwLjE7DQogICAgICAgIGlmIChHYW1lLkhhcygiTWlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSA1Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkJpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMTA7DQogICAgICAgIGlmIChHYW1lLkhhcygiVHJpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICAgIGlmIChHYW1lLkhhcygiUXVhZHJpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICAgIGlmIChHYW1lLkhhcygiUXVpbnRpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICAgIGlmIChHYW1lLkhhcygiU2V4dGlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSAyMDsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJTZXB0aWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIk9jdGlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSAyMDsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJOb25pbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICAgIGlmIChHYW1lLkhhcygiRGVjaWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIlVuc2hhY2tsZWQgY3Vyc29ycyIpKSBhZGQgKj0gMjU7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgdmFyIG51bSA9IDA7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1tpXS5uYW1lICE9ICJDdXJzb3IiKSBudW0gKz0gR2FtZS5PYmplY3RzW2ldLmFtb3VudDsNCiAgICAgICAgfQ0KICAgICAgICBhZGQgPSBhZGQgKiBudW07DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKCJDdXJzb3IiKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLmVmZigiY3Vyc29yQ3BzIik7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgR2FtZS5Db21wdXRlQ3BzKA0KICAgICAgICAgICAgMC4xLA0KICAgICAgICAgICAgR2FtZS5IYXMoIlJlaW5mb3JjZWQgaW5kZXggZmluZ2VyIikgKw0KICAgICAgICAgICAgICBHYW1lLkhhcygiQ2FycGFsIHR1bm5lbCBwcmV2ZW50aW9uIGNyZWFtIikgKw0KICAgICAgICAgICAgICBHYW1lLkhhcygiQW1iaWRleHRyb3VzIiksDQogICAgICAgICAgICBhZGQNCiAgICAgICAgICApICogbXVsdA0KICAgICAgICApOw0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDEpDQogICAgICAgICAgR2FtZS5VbmxvY2soWw0KICAgICAgICAgICAgIlJlaW5mb3JjZWQgaW5kZXggZmluZ2VyIiwNCiAgICAgICAgICAgICJDYXJwYWwgdHVubmVsIHByZXZlbnRpb24gY3JlYW0iLA0KICAgICAgICAgIF0pOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMTApIEdhbWUuVW5sb2NrKCJBbWJpZGV4dHJvdXMiKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDI1KSBHYW1lLlVubG9jaygiVGhvdXNhbmQgZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gNTApIEdhbWUuVW5sb2NrKCJNaWxsaW9uIGZpbmdlcnMiKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDEwMCkgR2FtZS5VbmxvY2soIkJpbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMTUwKSBHYW1lLlVubG9jaygiVHJpbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMjAwKSBHYW1lLlVubG9jaygiUXVhZHJpbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMjUwKSBHYW1lLlVubG9jaygiUXVpbnRpbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMzAwKSBHYW1lLlVubG9jaygiU2V4dGlsbGlvbiBmaW5nZXJzIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSAzNTApIEdhbWUuVW5sb2NrKCJTZXB0aWxsaW9uIGZpbmdlcnMiKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDQwMCkgR2FtZS5VbmxvY2soIk9jdGlsbGlvbiBmaW5nZXJzIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSA0NTApIEdhbWUuVW5sb2NrKCJOb25pbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gNTAwKSBHYW1lLlVubG9jaygiRGVjaWxsaW9uIGZpbmdlcnMiKTsNCg0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMSkgR2FtZS5XaW4oIkNsaWNrIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSAyKSBHYW1lLldpbigiRG91YmxlLWNsaWNrIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSA1MCkgR2FtZS5XaW4oIk1vdXNlIHdoZWVsIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSAxMDApIEdhbWUuV2luKCJPZiBNaWNlIGFuZCBNZW4iKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDIwMCkgR2FtZS5XaW4oIlRoZSBEaWdpdGFsIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSAzMDApIEdhbWUuV2luKCJFeHRyZW1lIHBvbHlkYWN0eWx5Iik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSA0MDApIEdhbWUuV2luKCJEci4gVCIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gNTAwKSBHYW1lLldpbigiVGh1bWJzLCBwaGFsYW5nZXMsIG1ldGFjYXJwYWxzIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSA2MDApIEdhbWUuV2luKCJXaXRoIGhlciBmaW5nZXIgYW5kIGhlciB0aHVtYiIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gNzAwKSBHYW1lLldpbigiR290dGEgaGFuZCBpdCB0byB5b3UiKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDgwMCkgR2FtZS5XaW4oIlRoZSBkZXZpbCdzIHdvcmtzaG9wIik7DQogICAgICB9DQogICAgKTsNCg0KICAgIEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgPSAxNTsNCiAgICBuZXcgR2FtZS5PYmplY3QoDQogICAgICAiR3JhbmRtYSIsDQogICAgICAiZ3JhbmRtYXxncmFuZG1hc3xiYWtlZHxHcmFuZG1hcyBhcmUgW1hdIHllYXIgb2xkZXJ8R3JhbmRtYXMgYXJlIFtYXSB5ZWFycyBvbGRlciIsDQogICAgICAiQSBuaWNlIGdyYW5kbWEgdG8gYmFrZSBtb3JlIGNvb2tpZXMuIiwNCiAgICAgIDEsDQogICAgICAxLA0KICAgICAgew0KICAgICAgICBwaWM6IGZ1bmN0aW9uIChpKSB7DQogICAgICAgICAgdmFyIGxpc3QgPSBbImdyYW5kbWEiXTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkZhcm1lciBncmFuZG1hcyIpKSBsaXN0LnB1c2goImZhcm1lckdyYW5kbWEiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIldvcmtlciBncmFuZG1hcyIpKSBsaXN0LnB1c2goIndvcmtlckdyYW5kbWEiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIk1pbmVyIGdyYW5kbWFzIikpIGxpc3QucHVzaCgibWluZXJHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJDb3NtaWMgZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJjb3NtaWNHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJUcmFuc211dGVkIGdyYW5kbWFzIikpIGxpc3QucHVzaCgidHJhbnNtdXRlZEdyYW5kbWEiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkFsdGVyZWQgZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJhbHRlcmVkR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiR3JhbmRtYXMnIGdyYW5kbWFzIikpIGxpc3QucHVzaCgiZ3JhbmRtYXNHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJBbnRpZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJhbnRpR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiUmFpbmJvdyBncmFuZG1hcyIpKSBsaXN0LnB1c2goInJhaW5ib3dHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJCYW5rZXIgZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJiYW5rR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiUHJpZXN0ZXNzIGdyYW5kbWFzIikpIGxpc3QucHVzaCgidGVtcGxlR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiV2l0Y2ggZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJ3aXRjaEdyYW5kbWEiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGdyYW5kbWFzIikpIGxpc3QucHVzaCgibHVja3lHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJNZXRhZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJtZXRhR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiU2NyaXB0IGdyYW5uaWVzIikpIGxpc3QucHVzaCgic2NyaXB0R3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiQWx0ZXJuYXRlIGdyYW5kbWFzIikpIGxpc3QucHVzaCgiYWx0ZXJuYXRlR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiQnJhaW55IGdyYW5kbWFzIikpIGxpc3QucHVzaCgiYnJhaW55R3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAiY2hyaXN0bWFzIikgbGlzdC5wdXNoKCJlbGZHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJlYXN0ZXIiKSBsaXN0LnB1c2goImJ1bm55R3JhbmRtYSIpOw0KICAgICAgICAgIHJldHVybiBjaG9vc2UobGlzdCkgKyAiLnBuZyI7DQogICAgICAgIH0sDQogICAgICAgIGJnOiAiZ3JhbmRtYUJhY2tncm91bmQucG5nIiwNCiAgICAgICAgeFY6IDgsDQogICAgICAgIHlWOiA4LA0KICAgICAgICB3OiAzMiwNCiAgICAgICAgcm93czogMywNCiAgICAgICAgeDogMCwNCiAgICAgICAgeTogMTYsDQogICAgICB9LA0KICAgICAgMTAwLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLkdyYW5kbWFTeW5lcmdpZXMpIHsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoR2FtZS5HcmFuZG1hU3luZXJnaWVzW2ldKSkgbXVsdCAqPSAyOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLkhhcygiQmluZ28gY2VudGVyL1Jlc2VhcmNoIGZhY2lsaXR5IikpIG11bHQgKj0gNDsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJSaXR1YWwgcm9sbGluZyBwaW5zIikpIG11bHQgKj0gMjsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJOYXVnaHR5IGxpc3QiKSkgbXVsdCAqPSAyOw0KDQogICAgICAgIGlmIChHYW1lLkhhcygiRWxkZXJ3b3J0IGJpc2N1aXRzIikpIG11bHQgKj0gMS4wMjsNCg0KICAgICAgICBtdWx0ICo9IEdhbWUuZWZmKCJncmFuZG1hQ3BzIik7DQoNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJDYXQgbGFkaWVzIikpIHsNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUuVXBncmFkZXNCeVBvb2xbImtpdHRlbiJdLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoR2FtZS5VcGdyYWRlc0J5UG9vbFsia2l0dGVuIl1baV0ubmFtZSkpIG11bHQgKj0gMS4yOTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBtdWx0ICo9IEdhbWUuR2V0VGllcmVkQ3BzTXVsdChtZSk7DQoNCiAgICAgICAgdmFyIGFkZCA9IDA7DQogICAgICAgIGlmIChHYW1lLkhhcygiT25lIG1pbmQiKSkgYWRkICs9IEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCAqIDAuMDI7DQogICAgICAgIGlmIChHYW1lLkhhcygiQ29tbXVuYWwgYnJhaW5zd2VlcCIpKQ0KICAgICAgICAgIGFkZCArPSBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgKiAwLjAyOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIkVsZGVyIFBhY3QiKSkgYWRkICs9IEdhbWUuT2JqZWN0c1siUG9ydGFsIl0uYW1vdW50ICogMC4wNTsNCg0KICAgICAgICB2YXIgbnVtID0gMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLm5hbWUgIT0gIkdyYW5kbWEiKSBudW0gKz0gR2FtZS5PYmplY3RzW2ldLmFtb3VudDsNCiAgICAgICAgfQ0KICAgICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0VsZGVyIEJhdHRhbGlvbicpKSBtdWx0Kj0xKzAuMDEqbnVtOw0KICAgICAgICBtdWx0ICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJFbGRlciBCYXR0YWxpb24iKSAqIDAuMDEgKiBudW07DQoNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KDQogICAgICAgIHJldHVybiAobWUuYmFzZUNwcyArIGFkZCkgKiBtdWx0Ow0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VbmxvY2tUaWVyZWQodGhpcyk7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3Quc2VsbEZ1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5XaW4oIkp1c3Qgd3JvbmciKTsNCiAgICAgIGlmICh0aGlzLmFtb3VudCA9PSAwKSB7DQogICAgICAgIEdhbWUuTG9jaygiRWxkZXIgUGxlZGdlIik7DQogICAgICAgIEdhbWUuQ29sbGVjdFdyaW5rbGVycygpOw0KICAgICAgICBHYW1lLnBsZWRnZVQgPSAwOw0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5sYXN0Lmljb25GdW5jID0gZnVuY3Rpb24gKHR5cGUpIHsNCiAgICAgIHZhciBncmFuZG1hSWNvbnMgPSBbDQogICAgICAgIFswLCAxXSwNCiAgICAgICAgWzAsIDJdLA0KICAgICAgICBbMSwgMl0sDQogICAgICAgIFsyLCAyXSwNCiAgICAgIF07DQogICAgICBpZiAodHlwZSA9PSAib2ZmIikgcmV0dXJuIFswLCAxXTsNCiAgICAgIGlmIChHYW1lLnByZWZzLm5vdFNjYXJ5ICYmIEdhbWUuZWxkZXJXcmF0aCA+IDApIHJldHVybiBbMywgMl07DQogICAgICByZXR1cm4gZ3JhbmRtYUljb25zW0dhbWUuZWxkZXJXcmF0aF07DQogICAgfTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJGYXJtIiwNCiAgICAgICJmYXJtfGZhcm1zfGhhcnZlc3RlZHxbWF0gbW9yZSBhY3JlfFtYXSBtb3JlIGFjcmVzIiwNCiAgICAgICJHcm93cyBjb29raWUgcGxhbnRzIGZyb20gY29va2llIHNlZWRzLiIsDQogICAgICAzLA0KICAgICAgMiwNCiAgICAgIHsgYmFzZTogImZhcm0iLCB4VjogOCwgeVY6IDgsIHc6IDY0LCByb3dzOiAyLCB4OiAwLCB5OiAxNiB9LA0KICAgICAgNTAwLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5taW5pZ2FtZVVybCA9ICJtaW5pZ2FtZUdhcmRlbi5qcyI7DQogICAgR2FtZS5sYXN0Lm1pbmlnYW1lTmFtZSA9IGxvYygiR2FyZGVuIik7DQoNCiAgICBuZXcgR2FtZS5PYmplY3QoDQogICAgICAiTWluZSIsDQogICAgICAibWluZXxtaW5lc3xtaW5lZHxbWF0gbWlsZSBkZWVwZXJ8W1hdIG1pbGVzIGRlZXBlciIsDQogICAgICAiTWluZXMgb3V0IGNvb2tpZSBkb3VnaCBhbmQgY2hvY29sYXRlIGNoaXBzLiIsDQogICAgICA0LA0KICAgICAgMywNCiAgICAgIHsgYmFzZTogIm1pbmUiLCB4VjogMTYsIHlWOiAxNiwgdzogNjQsIHJvd3M6IDIsIHg6IDAsIHk6IDI0IH0sDQogICAgICAxMDAwMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgICJmYWN0b3J5fGZhY3Rvcmllc3xtYXNzLXByb2R1Y2VkfFtYXSBhZGRpdGlvbmFsIHBhdGVudHxbWF0gYWRkaXRpb25hbCBwYXRlbnRzIiwNCiAgICAgICJQcm9kdWNlcyBsYXJnZSBxdWFudGl0aWVzIG9mIGNvb2tpZXMuIiwNCiAgICAgIDUsDQogICAgICA0LA0KICAgICAgeyBiYXNlOiAiZmFjdG9yeSIsIHhWOiA4LCB5VjogMCwgdzogNjQsIHJvd3M6IDEsIHg6IDAsIHk6IC0yMiB9LA0KICAgICAgMzAwMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCiAgICAvL0dhbWUubGFzdC5taW5pZ2FtZVVybD0nbWluaWdhbWVEdW5nZW9uLmpzJzsvL25vdCB5ZXQNCiAgICBHYW1lLmxhc3QubWluaWdhbWVOYW1lID0gbG9jKCJEdW5nZW9uIik7DQoNCiAgICBuZXcgR2FtZS5PYmplY3QoDQogICAgICAiQmFuayIsDQogICAgICAiYmFua3xiYW5rc3xiYW5rZWR8SW50ZXJlc3QgcmF0ZXMgW1hdJSBiZXR0ZXJ8SW50ZXJlc3QgcmF0ZXMgW1hdJSBiZXR0ZXIiLA0KICAgICAgIkdlbmVyYXRlcyBjb29raWVzIGZyb20gaW50ZXJlc3QuIiwNCiAgICAgIDYsDQogICAgICAxNSwNCiAgICAgIHsgYmFzZTogImJhbmsiLCB4VjogOCwgeVY6IDQsIHc6IDU2LCByb3dzOiAxLCB4OiAwLCB5OiAxMyB9LA0KICAgICAgMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QubWluaWdhbWVVcmwgPSAibWluaWdhbWVNYXJrZXQuanMiOw0KICAgIEdhbWUubGFzdC5taW5pZ2FtZU5hbWUgPSBsb2MoIlN0b2NrIE1hcmtldCIpOw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIlRlbXBsZSIsDQogICAgICAidGVtcGxlfHRlbXBsZXN8ZGlzY292ZXJlZHxbWF0gc2FjcmVkIGFydGlmYWN0IHJldHJpZXZlZHxbWF0gc2FjcmVkIGFydGlmYWN0cyByZXRyaWV2ZWQiLA0KICAgICAgIkZ1bGwgb2YgcHJlY2lvdXMsIGFuY2llbnQgY2hvY29sYXRlLiIsDQogICAgICA3LA0KICAgICAgMTYsDQogICAgICB7IGJhc2U6ICJ0ZW1wbGUiLCB4VjogOCwgeVY6IDQsIHc6IDcyLCByb3dzOiAyLCB4OiAwLCB5OiAtNSB9LA0KICAgICAgMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QubWluaWdhbWVVcmwgPSAibWluaWdhbWVQYW50aGVvbi5qcyI7DQogICAgR2FtZS5sYXN0Lm1pbmlnYW1lTmFtZSA9IGxvYygiUGFudGhlb24iKTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgIndpemFyZCB0b3dlcnx3aXphcmQgdG93ZXJzfHN1bW1vbmVkfEluY2FudGF0aW9ucyBoYXZlIFtYXSBtb3JlIHN5bGxhYmxlfEluY2FudGF0aW9ucyBoYXZlIFtYXSBtb3JlIHN5bGxhYmxlcyIsDQogICAgICAiU3VtbW9ucyBjb29raWVzIHdpdGggbWFnaWMgc3BlbGxzLiIsDQogICAgICA4LA0KICAgICAgMTcsDQogICAgICB7IGJhc2U6ICJ3aXphcmR0b3dlciIsIHhWOiAxNiwgeVY6IDE2LCB3OiA0OCwgcm93czogMiwgeDogMCwgeTogMjAgfSwNCiAgICAgIDAsDQogICAgICBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgdmFyIG11bHQgPSAxOw0KICAgICAgICBtdWx0ICo9IEdhbWUuR2V0VGllcmVkQ3BzTXVsdChtZSk7DQogICAgICAgIG11bHQgKj0gR2FtZS5tYWdpY0NwUyhtZS5uYW1lKTsNCiAgICAgICAgcmV0dXJuIG1lLmJhc2VDcHMgKiBtdWx0Ow0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VbmxvY2tUaWVyZWQodGhpcyk7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLmFtb3VudCA+PSBHYW1lLlNwZWNpYWxHcmFuZG1hVW5sb2NrICYmDQogICAgICAgICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5VbmxvY2sodGhpcy5ncmFuZG1hLm5hbWUpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRpc3BsYXlOYW1lID0NCiAgICAgICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjkwJTtsZXR0ZXItc3BhY2luZzotMXB4O3Bvc2l0aW9uOnJlbGF0aXZlO2JvdHRvbToycHg7Ij5XaXphcmQgdG93ZXI8L3NwYW4+JzsgLy9zaHJpbmsNCiAgICBHYW1lLmxhc3QubWluaWdhbWVVcmwgPSAibWluaWdhbWVHcmltb2lyZS5qcyI7DQogICAgR2FtZS5sYXN0Lm1pbmlnYW1lTmFtZSA9IGxvYygiR3JpbW9pcmUiKTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAic2hpcG1lbnR8c2hpcG1lbnRzfHNoaXBwZWR8W1hdIGdhbGF4eSBmdWxseSBleHBsb3JlZHxbWF0gZ2FsYXhpZXMgZnVsbHkgZXhwbG9yZWQiLA0KICAgICAgIkJyaW5ncyBpbiBmcmVzaCBjb29raWVzIGZyb20gdGhlIGNvb2tpZSBwbGFuZXQuIiwNCiAgICAgIDksDQogICAgICA1LA0KICAgICAgeyBiYXNlOiAic2hpcG1lbnQiLCB4VjogMTYsIHlWOiAxNiwgdzogNjQsIHJvd3M6IDEsIHg6IDAsIHk6IDAgfSwNCiAgICAgIDQwMDAwLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgICJhbGNoZW15IGxhYnxhbGNoZW15IGxhYnN8dHJhbnNtdXRlZHxbWF0gcHJpbW9yZGlhbCBlbGVtZW50IG1hc3RlcmVkfFtYXSBwcmltb3JkaWFsIGVsZW1lbnRzIG1hc3RlcmVkIiwNCiAgICAgICJUdXJucyBnb2xkIGludG8gY29va2llcyEiLA0KICAgICAgMTAsDQogICAgICA2LA0KICAgICAgeyBiYXNlOiAiYWxjaGVteWxhYiIsIHhWOiAxNiwgeVY6IDE2LCB3OiA2NCwgcm93czogMiwgeDogMCwgeTogMTYgfSwNCiAgICAgIDIwMDAwMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QuZGlzcGxheU5hbWUgPQ0KICAgICAgJzxzcGFuIHN0eWxlPSJmb250LXNpemU6OTAlO2xldHRlci1zcGFjaW5nOi0xcHg7cG9zaXRpb246cmVsYXRpdmU7Ym90dG9tOjJweDsiPkFsY2hlbXkgbGFiPC9zcGFuPic7IC8vc2hyaW5rDQoNCiAgICBuZXcgR2FtZS5PYmplY3QoDQogICAgICAiUG9ydGFsIiwNCiAgICAgICJwb3J0YWx8cG9ydGFsc3xyZXRyaWV2ZWR8W1hdIGRpbWVuc2lvbiBlbnNsYXZlZHxbWF0gZGltZW5zaW9ucyBlbnNsYXZlZCIsDQogICAgICAiT3BlbnMgYSBkb29yIHRvIHRoZSBDb29raWV2ZXJzZS4iLA0KICAgICAgMTEsDQogICAgICA3LA0KICAgICAgeyBiYXNlOiAicG9ydGFsIiwgeFY6IDMyLCB5VjogMzIsIHc6IDY0LCByb3dzOiAyLCB4OiAwLCB5OiAwIH0sDQogICAgICAxNjY2NjY2LA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAidGltZSBtYWNoaW5lfHRpbWUgbWFjaGluZXN8cmVjb3ZlcmVkfFtYXSBjZW50dXJ5IHNlY3VyZWR8W1hdIGNlbnR1cmllcyBzZWN1cmVkIiwNCiAgICAgICJCcmluZ3MgY29va2llcyBmcm9tIHRoZSBwYXN0LCBiZWZvcmUgdGhleSB3ZXJlIGV2ZW4gZWF0ZW4uIiwNCiAgICAgIDEyLA0KICAgICAgOCwNCiAgICAgIHsgYmFzZTogInRpbWVtYWNoaW5lIiwgeFY6IDMyLCB5VjogMzIsIHc6IDY0LCByb3dzOiAxLCB4OiAwLCB5OiAwIH0sDQogICAgICAxMjM0NTY3ODksDQogICAgICBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgdmFyIG11bHQgPSAxOw0KICAgICAgICBtdWx0ICo9IEdhbWUuR2V0VGllcmVkQ3BzTXVsdChtZSk7DQogICAgICAgIG11bHQgKj0gR2FtZS5tYWdpY0NwUyhtZS5uYW1lKTsNCiAgICAgICAgcmV0dXJuIG1lLmJhc2VDcHMgKiBtdWx0Ow0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VbmxvY2tUaWVyZWQodGhpcyk7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLmFtb3VudCA+PSBHYW1lLlNwZWNpYWxHcmFuZG1hVW5sb2NrICYmDQogICAgICAgICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5VbmxvY2sodGhpcy5ncmFuZG1hLm5hbWUpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRpc3BsYXlOYW1lID0NCiAgICAgICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjgwJTtsZXR0ZXItc3BhY2luZzotMXB4O3Bvc2l0aW9uOnJlbGF0aXZlO2JvdHRvbTozcHg7Ij5UaW1lIG1hY2hpbmU8L3NwYW4+JzsgLy9zaHJpbmsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAiYW50aW1hdHRlciBjb25kZW5zZXJ8YW50aW1hdHRlciBjb25kZW5zZXJzfGNvbmRlbnNlZHxbWF0gZXh0cmEgcXVhcmsgZmxhdm9yfFtYXSBleHRyYSBxdWFyayBmbGF2b3JzIiwNCiAgICAgICJDb25kZW5zZXMgdGhlIGFudGltYXR0ZXIgaW4gdGhlIHVuaXZlcnNlIGludG8gY29va2llcy4iLA0KICAgICAgMTMsDQogICAgICAxMywNCiAgICAgIHsNCiAgICAgICAgYmFzZTogImFudGltYXR0ZXJjb25kZW5zZXIiLA0KICAgICAgICB4VjogMCwNCiAgICAgICAgeVY6IDY0LA0KICAgICAgICB3OiA2NCwNCiAgICAgICAgcm93czogMSwNCiAgICAgICAgeDogMCwNCiAgICAgICAgeTogMCwNCiAgICAgIH0sDQogICAgICAzOTk5OTk5OTk5LA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5kaXNwbGF5TmFtZSA9DQogICAgICAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo2NSU7bGV0dGVyLXNwYWNpbmc6LTFweDtwb3NpdGlvbjpyZWxhdGl2ZTtib3R0b206NHB4OyI+QW50aW0uIGNvbmRlbnNlcjwvc3Bhbj4nOyAvL3Nocmluaw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIlByaXNtIiwNCiAgICAgICJwcmlzbXxwcmlzbXN8Y29udmVydGVkfFtYXSBuZXcgY29sb3IgZGlzY292ZXJlZHxbWF0gbmV3IGNvbG9ycyBkaXNjb3ZlcmVkIiwNCiAgICAgICJDb252ZXJ0cyBsaWdodCBpdHNlbGYgaW50byBjb29raWVzLiIsDQogICAgICAxNCwNCiAgICAgIDE0LA0KICAgICAgeyBiYXNlOiAicHJpc20iLCB4VjogMTYsIHlWOiA0LCB3OiA2NCwgcm93czogMSwgeDogMCwgeTogMjAgfSwNCiAgICAgIDc1MDAwMDAwMDAwLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgICJjaGFuY2VtYWtlcnxjaGFuY2VtYWtlcnN8c3BvbnRhbmVvdXNseSBnZW5lcmF0ZWR8Q2hhbmNlbWFrZXJzIGFyZSBwb3dlcmVkIGJ5IFtYXS1sZWFmIGNsb3ZlcnN8Q2hhbmNlbWFrZXJzIGFyZSBwb3dlcmVkIGJ5IFtYXS1sZWFmIGNsb3ZlcnMiLA0KICAgICAgIkdlbmVyYXRlcyBjb29raWVzIG91dCBvZiB0aGluIGFpciB0aHJvdWdoIHNoZWVyIGx1Y2suIiwNCiAgICAgIDE1LA0KICAgICAgMTksDQogICAgICB7DQogICAgICAgIGJhc2U6ICJjaGFuY2VtYWtlciIsDQogICAgICAgIHhWOiA4LA0KICAgICAgICB5VjogNjQsDQogICAgICAgIHc6IDY0LA0KICAgICAgICByb3dzOiAxLA0KICAgICAgICB4OiAwLA0KICAgICAgICB5OiAwLA0KICAgICAgICByb3dzOiAyLA0KICAgICAgfSwNCiAgICAgIDc3Nzc3Nzc3Nzc3LA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5kaXNwbGF5TmFtZSA9DQogICAgICAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo4NSU7bGV0dGVyLXNwYWNpbmc6LTFweDtwb3NpdGlvbjpyZWxhdGl2ZTtib3R0b206MnB4OyI+Q2hhbmNlbWFrZXI8L3NwYW4+JzsgLy9zaHJpbmsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAiZnJhY3RhbCBlbmdpbmV8ZnJhY3RhbCBlbmdpbmVzfG1hZGUgZnJvbSBjb29raWVzfFtYXSBpdGVyYXRpb24gZGVlcHxbWF0gaXRlcmF0aW9ucyBkZWVwIiwNCiAgICAgICJUdXJucyBjb29raWVzIGludG8gZXZlbiBtb3JlIGNvb2tpZXMuIiwNCiAgICAgIDE2LA0KICAgICAgMjAsDQogICAgICB7IGJhc2U6ICJmcmFjdGFsRW5naW5lIiwgeFY6IDgsIHlWOiA2NCwgdzogNjQsIHJvd3M6IDEsIHg6IDAsIHk6IDAgfSwNCiAgICAgIDEyMzQ1Njc4OTg3NjU0MzIxLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5kaXNwbGF5TmFtZSA9DQogICAgICAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo4MCU7bGV0dGVyLXNwYWNpbmc6LTFweDtwb3NpdGlvbjpyZWxhdGl2ZTtib3R0b206NHB4OyI+RnJhY3RhbCBlbmdpbmU8L3NwYW4+JzsgLy9zaHJpbmsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgImphdmFzY3JpcHQgY29uc29sZXxqYXZhc2NyaXB0IGNvbnNvbGVzfHByb2dyYW1tZWR8RXF1aXBwZWQgd2l0aCBbWF0gZXh0ZXJuYWwgbGlicmFyeXxFcXVpcHBlZCB3aXRoIFtYXSBleHRlcm5hbCBsaWJyYXJpZXMiLA0KICAgICAgIkNyZWF0ZXMgY29va2llcyBmcm9tIHRoZSB2ZXJ5IGNvZGUgdGhpcyBnYW1lIHdhcyB3cml0dGVuIGluLiIsDQogICAgICAxNywNCiAgICAgIDMyLA0KICAgICAgew0KICAgICAgICBiYXNlOiAiamF2YXNjcmlwdGNvbnNvbGUiLA0KICAgICAgICB4VjogOCwNCiAgICAgICAgeVY6IDY0LA0KICAgICAgICB3OiAxNCwNCiAgICAgICAgcm93czogMSwNCiAgICAgICAgeDogOCwNCiAgICAgICAgeTogLTMyLA0KICAgICAgICBmcmFtZXM6IDIsDQogICAgICB9LA0KICAgICAgMTIzNDU2Nzg5ODc2NTQzMjEsDQogICAgICBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgdmFyIG11bHQgPSAxOw0KICAgICAgICBtdWx0ICo9IEdhbWUuR2V0VGllcmVkQ3BzTXVsdChtZSk7DQogICAgICAgIG11bHQgKj0gR2FtZS5tYWdpY0NwUyhtZS5uYW1lKTsNCiAgICAgICAgcmV0dXJuIG1lLmJhc2VDcHMgKiBtdWx0Ow0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VbmxvY2tUaWVyZWQodGhpcyk7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLmFtb3VudCA+PSBHYW1lLlNwZWNpYWxHcmFuZG1hVW5sb2NrICYmDQogICAgICAgICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5VbmxvY2sodGhpcy5ncmFuZG1hLm5hbWUpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRpc3BsYXlOYW1lID0NCiAgICAgICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjY1JTtsZXR0ZXItc3BhY2luZzotMXB4O3Bvc2l0aW9uOnJlbGF0aXZlO2JvdHRvbTo0cHg7Ij5KYXZhc2NyaXB0IGNvbnNvbGU8L3NwYW4+JzsgLy9zaHJpbmsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgImlkbGV2ZXJzZXxpZGxldmVyc2VzfGhpamFja2VkfFtYXSBtYW5pZm9sZHxbWF0gbWFuaWZvbGRzIiwNCiAgICAgICJUaGVyZSdzIGJlZW4gY291bnRsZXNzIG90aGVyIGlkbGUgdW5pdmVyc2VzIHJ1bm5pbmcgYWxvbmdzaWRlIG91ciBvd24uIFlvdSd2ZSBmaW5hbGx5IGZvdW5kIGEgd2F5IHRvIGhpamFjayB0aGVpciBwcm9kdWN0aW9uIGFuZCBjb252ZXJ0IHdoYXRldmVyIHRoZXkndmUgYmVlbiBtYWtpbmcgaW50byBjb29raWVzISIsDQogICAgICAxOCwNCiAgICAgIDMzLA0KICAgICAgew0KICAgICAgICBiYXNlOiAiaWRsZXZlcnNlIiwNCiAgICAgICAgeFY6IDgsDQogICAgICAgIHlWOiA5NiwNCiAgICAgICAgdzogNDgsDQogICAgICAgIHJvd3M6IDIsDQogICAgICAgIHg6IDAsDQogICAgICAgIHk6IDAsDQogICAgICAgIGZyYW1lczogNCwNCiAgICAgIH0sDQogICAgICAxMjM0NTY3ODk4NzY1NDMyMSwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgImNvcnRleCBiYWtlcnxjb3J0ZXggYmFrZXJzfGltYWdpbmVkfFtYXSBleHRyYSBJUSBwb2ludHxbWF0gZXh0cmEgSVEgcG9pbnRzIiwNCiAgICAgICJUaGVzZSBhcnRpZmljaWFsIGJyYWlucyB0aGUgc2l6ZSBvZiBwbGFuZXRzIGFyZSBjYXBhYmxlIG9mIHNpbXBseSBkcmVhbWluZyB1cCBjb29raWVzIGludG8gZXhpc3RlbmNlLiBUaW1lIGFuZCBzcGFjZSBhcmUgaW5jb25zZXF1ZW50aWFsLiBSZWFsaXR5IGlzIGFyYml0cmFyeS4iLA0KICAgICAgMTksDQogICAgICAzNCwNCiAgICAgIHsgYmFzZTogImNvcnRleCIsIHhWOiA4LCB5VjogOTYsIHc6IDQ4LCByb3dzOiAxLCB4OiAwLCB5OiAwLCBmcmFtZXM6IDQgfSwNCiAgICAgIDEyMzQ1Njc4OTg3NjU0MzIxLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KDQogICAgR2FtZS5mb29sT2JqZWN0cyA9IHsNCiAgICAgIFVua25vd246IHsNCiAgICAgICAgbmFtZTogIkludmVzdG1lbnQiLA0KICAgICAgICBkZXNjOiAiWW91J3JlIG5vdCBzdXJlIHdoYXQgdGhpcyBkb2VzLCB5b3UganVzdCBrbm93IGl0IG1lYW5zIHByb2ZpdC4iLA0KICAgICAgICBpY29uOiAwLA0KICAgICAgfSwNCiAgICAgIEN1cnNvcjogew0KICAgICAgICBuYW1lOiAiUm9sbGluZyBwaW4iLA0KICAgICAgICBkZXNjOiAiRXNzZW50aWFsIGluIGZsYXR0ZW5pbmcgZG91Z2guIFRoZSBmaXJzdCBzdGVwIGluIGNvb2tpZS1tYWtpbmcuIiwNCiAgICAgICAgaWNvbjogMCwNCiAgICAgIH0sDQogICAgICBHcmFuZG1hOiB7DQogICAgICAgIG5hbWU6ICJPdmVuIiwNCiAgICAgICAgZGVzYzogIkEgY3J1Y2lhbCBlbGVtZW50IG9mIGJha2luZyBjb29raWVzLiIsDQogICAgICAgIGljb246IDEsDQogICAgICB9LA0KICAgICAgRmFybTogew0KICAgICAgICBuYW1lOiAiS2l0Y2hlbiIsDQogICAgICAgIGRlc2M6ICJUaGUgbW9yZSBraXRjaGVucywgdGhlIG1vcmUgY29va2llcyB5b3VyIGVtcGxveWVlcyBjYW4gcHJvZHVjZS4iLA0KICAgICAgICBpY29uOiAyLA0KICAgICAgfSwNCiAgICAgIE1pbmU6IHsNCiAgICAgICAgbmFtZTogIlNlY3JldCByZWNpcGUiLA0KICAgICAgICBkZXNjOiAiVGhlc2UgZ2l2ZSB5b3UgdGhlIGVkZ2UgeW91IG5lZWQgdG8gb3V0c2VsbCB0aG9zZSBwZXNreSBjb21wZXRpdG9ycy4iLA0KICAgICAgICBpY29uOiAzLA0KICAgICAgfSwNCiAgICAgIEZhY3Rvcnk6IHsNCiAgICAgICAgbmFtZTogIkZhY3RvcnkiLA0KICAgICAgICBkZXNjOiAiTWFzcyBwcm9kdWN0aW9uIGlzIHRoZSBmdXR1cmUgb2YgYmFraW5nLiBTZWl6ZSB0aGUgZGF5LCBhbmQgc3luZXJnaXplISIsDQogICAgICAgIGljb246IDQsDQogICAgICB9LA0KICAgICAgQmFuazogew0KICAgICAgICBuYW1lOiAiSW52ZXN0b3IiLA0KICAgICAgICBkZXNjOiAiQnVzaW5lc3MgZm9sa3Mgd2l0aCBhIG5vc2UgZm9yIHByb2ZpdCwgcmVhZHkgdG8gZmluYW5jZSB5b3VyIHZlbnR1cmUgYXMgbG9uZyBhcyB0aGVyZSdzIG1vbmV5IHRvIGJlIG1hZGUuIiwNCiAgICAgICAgaWNvbjogNSwNCiAgICAgIH0sDQogICAgICBUZW1wbGU6IHsNCiAgICAgICAgbmFtZTogIkxpa2UiLA0KICAgICAgICBkZXNjOiAiWW91ciBzb2NpYWwgbWVkaWEgcGFnZSBpcyBnb2luZyB2aXJhbCEgQW1hc3NpbmcgbGlrZXMgaXMgdGhlIGtleSB0byBhIGxhc3Rpbmcgb25saW5lIHByZXNlbmNlIGFuZCBqdWljeSBhZHZlcnRpc2luZyBkZWFscy4iLA0KICAgICAgICBpY29uOiA5LA0KICAgICAgfSwNCiAgICAgICJXaXphcmQgdG93ZXIiOiB7DQogICAgICAgIG5hbWU6ICJNZW1lIiwNCiAgICAgICAgZGVzYzogIkNvb2tpZSBtZW1lcyBhcmUgYWxsIHRoZSByYWdlISBXaXRoIGp1c3QgdGhlIHJpZ2h0IGFtb3VudCBvZiBzb2NpYWwgbWVkaWEgYXN0cm90dXJmaW5nLCB5b3VyIGJyYW5kIGltYWdlIHdpbGwgYmUgYWxsIG92ZXIgdGhlIGN5YmVyc3BhY2UuIiwNCiAgICAgICAgaWNvbjogNiwNCiAgICAgIH0sDQogICAgICBTaGlwbWVudDogew0KICAgICAgICBuYW1lOiAiU3VwZXJtYXJrZXQiLA0KICAgICAgICBkZXNjOiAiQSBnaWdhbnRpYyBjb29raWUgZW1wb3JpdW0gLSB5b3VyIHZlcnkgb3duIHJldGFpbCBjaGFpbi4iLA0KICAgICAgICBpY29uOiA3LA0KICAgICAgfSwNCiAgICAgICJBbGNoZW15IGxhYiI6IHsNCiAgICAgICAgbmFtZTogIlN0b2NrIHNoYXJlIiwNCiAgICAgICAgZGVzYzogIllvdSdyZSBvZmZpY2lhbGx5IG9uIHRoZSBzdG9jayBtYXJrZXQsIGFuZCBldmVyeW9uZSB3YW50cyBhIHBpZWNlISIsDQogICAgICAgIGljb246IDgsDQogICAgICB9LA0KICAgICAgUG9ydGFsOiB7DQogICAgICAgIG5hbWU6ICJUViBzaG93IiwNCiAgICAgICAgZGVzYzogIllvdXIgY29va2llcyBoYXZlIHRoZWlyIG93biBzaXRjb20hIEhpbGFyaW91cyBiYWtpbmcgaGlqaW5rcyBzZXQgdG8gdGhlIGNoZWVzaWVzdCBsYXVnaHRyYWNrLiIsDQogICAgICAgIGljb246IDEwLA0KICAgICAgfSwNCiAgICAgICJUaW1lIG1hY2hpbmUiOiB7DQogICAgICAgIG5hbWU6ICJUaGVtZSBwYXJrIiwNCiAgICAgICAgZGVzYzogIkNvb2tpZSB0aGVtZSBwYXJrcywgZnVsbCBvZiBtYXNjb3RzIGFuZCByb2xsZXItY29hc3RlcnMuIEJ1aWxkIG9uZSwgYnVpbGQgYSBodW5kcmVkISIsDQogICAgICAgIGljb246IDExLA0KICAgICAgfSwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciI6IHsNCiAgICAgICAgbmFtZTogIkNvb2tpZWNvaW4iLA0KICAgICAgICBkZXNjOiAiQSB2aXJ0dWFsIGN1cnJlbmN5LCBhbHJlYWR5IHJlcGxhY2luZyByZWd1bGFyIG1vbmV5IGluIHNvbWUgc21hbGwgY291bnRyaWVzLiIsDQogICAgICAgIGljb246IDEyLA0KICAgICAgfSwNCiAgICAgIFByaXNtOiB7DQogICAgICAgIG5hbWU6ICJDb3Jwb3JhdGUgY291bnRyeSIsDQogICAgICAgIGRlc2M6ICJZb3UndmUgbWFkZSBpdCB0byB0aGUgdG9wLCBhbmQgeW91IGNhbiBub3cgYnV5IGVudGlyZSBuYXRpb25zIHRvIGZ1cnRoZXIgeW91ciBjb3Jwb3JhdGUgZ3JlZWQuIEdvZHNwZWVkLiIsDQogICAgICAgIGljb246IDEzLA0KICAgICAgfSwNCiAgICAgIENoYW5jZW1ha2VyOiB7DQogICAgICAgIG5hbWU6ICJQcml2YXRpemVkIHBsYW5ldCIsDQogICAgICAgIGRlc2M6ICJBY3R1YWxseSwgeW91IGtub3cgd2hhdCdzIGNvb2w/IEEgd2hvbGUgcGxhbmV0IGRlZGljYXRlZCB0byBwcm9kdWNpbmcsIGFkdmVydGlzaW5nLCBzZWxsaW5nLCBhbmQgY29uc3VtaW5nIHlvdXIgY29va2llcy4iLA0KICAgICAgICBpY29uOiAxNSwNCiAgICAgIH0sDQogICAgICAiRnJhY3RhbCBlbmdpbmUiOiB7DQogICAgICAgIG5hbWU6ICJTZW5hdGUgc2VhdCIsDQogICAgICAgIGRlc2M6ICJPbmx5IHRocm91Z2ggcG9saXRpY2FsIGRvbWluaW9uIGNhbiB5b3UgdHJ1bHkgYWx0ZXIgdGhpcyB3b3JsZCB0byBjcmVhdGUgYSBicmlnaHRlciwgbW9yZSBjb29raWUtZnJpZW5kbHkgZnV0dXJlLiIsDQogICAgICAgIGljb246IDE2LA0KICAgICAgfSwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiOiB7DQogICAgICAgIG5hbWU6ICJEb2N0cmluZSIsDQogICAgICAgIGRlc2M6ICJUYWtpbmcgbWFueSBmb3JtcyAtcmVsaWdpb24sIGN1bHR1cmUsIHBoaWxvc29waHktIGEgZG9jdHJpbmUgbWF5LCB3aGVuIGhhbmRsZWQgcHJvcGVybHksIGNhdXNlIGEgbGFzdGluZyBpbXBhY3Qgb24gY2l2aWxpemF0aW9ucywgcmVzaGFwaW5nIG1pbmRzIGFuZCBwZW9wbGUgYW5kIGVuc3VyaW5nIGFsbCBmdXR1cmUgZ2VuZXJhdGlvbnMgc2hhcmUgYSBzaW5ndWxhciBnb2FsIC0gdGhlIHByb2R1Y3Rpb24sIGFuZCBhY3F1aXNpdGlvbiwgb2YgbW9yZSBjb29raWVzLiIsDQogICAgICAgIGljb246IDE3LA0KICAgICAgfSwNCiAgICAgIElkbGV2ZXJzZTogew0KICAgICAgICBuYW1lOiAiTGF0ZXJhbCBleHBhbnNpb25zIiwNCiAgICAgICAgZGVzYzogIlNvbWV0aW1lcyB0aGUgYmVzdCB3YXkgdG8ga2VlcCBnb2luZyB1cCBpcyBzaWRld2F5cy4gRGl2ZXJzaWZ5IHlvdXIgdmVudHVyZXMgdGhyb3VnaCBub24tY29va2llIGludmVzdG1lbnRzLiIsDQogICAgICAgIGljb246IDE4LA0KICAgICAgfSwNCiAgICAgICJDb3J0ZXggYmFrZXIiOiB7DQogICAgICAgIG5hbWU6ICJUaGluayB0YW5rIiwNCiAgICAgICAgZGVzYzogIlRoZXJlJ3Mgb25seSBzbyBtYW55IHdheXMgeW91IGNhbiBicmluZyBpbiBtb3JlIHByb2ZpdC4gT3IgaXMgdGhlcmU/IEhpcmUgdGhlIG1vc3QgYnJpbGxpYW50IGV4cGVydHMgaW4gdGhlIGtub3duIHVuaXZlcnNlIGFuZCBsZXQgdGhlbSBzY3JhcGUgdGhlaXIgYnJhaW5zIGZvciB5b3UhIiwNCiAgICAgICAgaWNvbjogMTksDQogICAgICB9LA0KICAgIH07DQoNCiAgICBpZiAodHJ1ZSkgew0KICAgICAgLy9pZiAoIUVOKQ0KICAgICAgR2FtZS5mb29sT2JqZWN0c1siVW5rbm93biJdLm5hbWUgPSBsb2MoIkludmVzdG1lbnQiKTsNCiAgICAgIEdhbWUuZm9vbE9iamVjdHNbIlVua25vd24iXS5kZXNjID0gbG9jKA0KICAgICAgICAiWW91J3JlIG5vdCBzdXJlIHdoYXQgdGhpcyBkb2VzLCB5b3UganVzdCBrbm93IGl0IG1lYW5zIHByb2ZpdC4iDQogICAgICApOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgR2FtZS5mb29sT2JqZWN0c1tpXS5uYW1lID0NCiAgICAgICAgICBsb2MoRmluZExvY1N0cmluZ0J5UGFydChHYW1lLk9iamVjdHNbaV0ubmFtZSArICIgYnVzaW5lc3MgbmFtZSIpKSB8fA0KICAgICAgICAgIEdhbWUuZm9vbE9iamVjdHNbaV0ubmFtZTsNCiAgICAgICAgR2FtZS5mb29sT2JqZWN0c1tpXS5kZXNjID0NCiAgICAgICAgICBsb2MoRmluZExvY1N0cmluZ0J5UGFydChHYW1lLk9iamVjdHNbaV0ubmFtZSArICIgYnVzaW5lc3MgcXVvdGUiKSkgfHwNCiAgICAgICAgICBHYW1lLmZvb2xPYmplY3RzW2ldLmRlc2M7DQogICAgICB9DQogICAgfQ0KDQogICAgLy9idWlsZCBzdG9yZQ0KICAgIEdhbWUuQnVpbGRTdG9yZSgpOw0KDQogICAgLy9idWlsZCBtYXN0ZXIgYmFyDQogICAgdmFyIHN0ciA9ICIiOw0KICAgIHN0ciArPQ0KICAgICAgJzxkaXYgaWQ9ImJ1aWxkaW5nc011dGUiIGNsYXNzPSJzaGFkb3dGaWx0ZXIiIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjEwMDtwYWRkaW5nOjRweCAxNnB4IDBweCA2NHB4OyI+PC9kaXY+JzsNCiAgICBzdHIgKz0NCiAgICAgICc8ZGl2IGNsYXNzPSJzZXBhcmF0b3JCb3R0b20iIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LThweDt6LWluZGV4OjA7Ij48L2Rpdj4nOw0KICAgIGwoImJ1aWxkaW5nc01hc3RlciIpLmlubmVySFRNTCA9IHN0cjsNCg0KICAgIC8vYnVpbGQgb2JqZWN0IGRpc3BsYXlzDQogICAgdmFyIG11dGVTdHIgPQ0KICAgICAgJzxkaXYgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6OHB4O2JvdHRvbToxMnB4O29wYWNpdHk6MC41OyI+JyArDQogICAgICBsb2MoIk11dGVkOiIpICsNCiAgICAgICI8L2Rpdj4iOw0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNbaV07DQoNCiAgICAgIGlmIChsb2NTdHJpbmdzW21lLm5hbWUgKyAiIChzaG9ydCkiXSkNCiAgICAgICAgbWUuZGlzcGxheU5hbWUgPSBsb2MobWUubmFtZSArICIgKHNob3J0KSIpOw0KDQogICAgICBpZiAobWUuaWQgPiAwKSB7DQogICAgICAgIG1lLmNhbnZhcyA9IGwoInJvd0NhbnZhcyIgKyBtZS5pZCk7DQogICAgICAgIG1lLmN0eCA9IG1lLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIsIHsgYWxwaGE6IGZhbHNlIH0pOw0KICAgICAgICBtZS5waWNzID0gW107DQogICAgICAgIHZhciBpY29uID0gWzAgKiA2NCwgbWUuaWNvbiAqIDY0XTsNCiAgICAgICAgbXV0ZVN0ciArPQ0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJ0aW55UHJvZHVjdEljb24iIGlkPSJtdXRlZFByb2R1Y3QnICsNCiAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgJyIgc3R5bGU9ImRpc3BsYXk6bm9uZTtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0nICsNCiAgICAgICAgICBpY29uWzBdICsNCiAgICAgICAgICAicHggLSIgKw0KICAgICAgICAgIGljb25bMV0gKw0KICAgICAgICAgICdweDsiICcgKw0KICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICc9IkdhbWUuT2JqZWN0c0J5SWRbJyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICJdLm11dGUoMCk7UGxheVNvdW5kKEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICJdLm11dGVkPydzbmQvY2xpY2tPZmYyLm1wMyc6J3NuZC9jbGlja09uMi5tcDMnKTtcIiAiICsNCiAgICAgICAgICBHYW1lLmdldER5bmFtaWNUb29sdGlwKA0KICAgICAgICAgICAgIkdhbWUubXV0ZWRCdWlsZGluZ1Rvb2x0aXAoIiArIG1lLmlkICsgIikiLA0KICAgICAgICAgICAgInRoaXMiDQogICAgICAgICAgKSArDQogICAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgICAvL211dGVTdHIrPSc8ZGl2IGNsYXNzPSJ0aW55UHJvZHVjdEljb24iIGlkPSJtdXRlZFByb2R1Y3QnK21lLmlkKyciIHN0eWxlPSJkaXNwbGF5Om5vbmU7YmFja2dyb3VuZC1wb3NpdGlvbjotJytpY29uWzBdKydweCAtJytpY29uWzFdKydweDsiICcrR2FtZS5jbGlja1N0cisnPSJHYW1lLk9iamVjdHNCeUlkWycrbWUuaWQrJ10ubXV0ZSgwKTtQbGF5U291bmQoR2FtZS5PYmplY3RzQnlJZFsnK21lLmlkKyddLm11dGVkP1wnc25kL2NsaWNrT2ZmMi5tcDNcJzpcJ3NuZC9jbGlja09uMi5tcDNcJyk7IiAnK0dhbWUuZ2V0VG9vbHRpcCgnPGRpdiBzdHlsZT0id2lkdGg6MTUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7Ij48Yj5Vbm11dGUgJyttZS5wbHVyYWwrJzwvYj48YnI+KERpc3BsYXkgdGhpcyBidWlsZGluZyk8L2Rpdj4nKSsnPjwvZGl2Pic7DQoNCiAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgbWUuY2FudmFzLA0KICAgICAgICAgICJtb3VzZW92ZXIiLA0KICAgICAgICAgIChmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIG1lLm1vdXNlT24gPSB0cnVlOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KShtZSkNCiAgICAgICAgKTsNCiAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgbWUuY2FudmFzLA0KICAgICAgICAgICJtb3VzZW91dCIsDQogICAgICAgICAgKGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgbWUubW91c2VPbiA9IGZhbHNlOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KShtZSkNCiAgICAgICAgKTsNCiAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgbWUuY2FudmFzLA0KICAgICAgICAgICJtb3VzZW1vdmUiLA0KICAgICAgICAgIChmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgICB2YXIgYm94ID0gdGhpcy5nZXRCb3VuZHMoKTsNCiAgICAgICAgICAgICAgbWUubW91c2VQb3NbMF0gPSBlLnBhZ2VYIC0gYm94LmxlZnQ7DQogICAgICAgICAgICAgIG1lLm1vdXNlUG9zWzFdID0gZS5wYWdlWSAtIGJveC50b3A7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0pKG1lKQ0KICAgICAgICApOw0KICAgICAgfQ0KICAgIH0NCiAgICBHYW1lLm11dGVkQnVpbGRpbmdUb29sdGlwID0gZnVuY3Rpb24gKGlkKSB7DQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNCeUlkW2lkXTsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnPGRpdiBzdHlsZT0id2lkdGg6MTUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7IiBpZD0idG9vbHRpcE11dGVkQnVpbGRpbmciPicgKw0KICAgICAgICAgIChFTg0KICAgICAgICAgICAgPyAiPGI+IiArDQogICAgICAgICAgICAgIGNhcChtZS5wbHVyYWwpICsNCiAgICAgICAgICAgICAgKG1lLmxldmVsID4gMCA/ICIgKGx2bC4mbmJzcDsiICsgbWUubGV2ZWwgKyAiKSIgOiAiIikgKw0KICAgICAgICAgICAgICAnPC9iPjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PkNsaWNrIHRvIHVubXV0ZSAnICsNCiAgICAgICAgICAgICAgbWUucGx1cmFsICsNCiAgICAgICAgICAgICAgIjxicj4oZGlzcGxheSB0aGlzIGJ1aWxkaW5nKSINCiAgICAgICAgICAgIDogIjxiPiIgKw0KICAgICAgICAgICAgICBsb2MoIkxldmVsICUxICUyIiwgW0JlYXV0aWZ5KG1lLmxldmVsKSwgbWUucGx1cmFsXSkgKw0KICAgICAgICAgICAgICAnPC9iPjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICBsb2MoIkNsaWNrIHRvIHVubXV0ZSIpKSArDQogICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgKTsNCiAgICAgIH07DQogICAgfTsNCiAgICBsKCJidWlsZGluZ3NNdXRlIikuaW5uZXJIVE1MID0gbXV0ZVN0cjsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlVUEdSQURFUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgIEdhbWUuVXBncmFkZXMgPSB7fTsNCiAgICBHYW1lLlVwZ3JhZGVzQnlJZCA9IHt9Ow0KICAgIEdhbWUuVXBncmFkZXNOID0gMDsNCiAgICBHYW1lLlVwZ3JhZGVzSW5TdG9yZSA9IFtdOw0KICAgIEdhbWUuVXBncmFkZXNPd25lZCA9IDA7DQogICAgR2FtZS5VcGdyYWRlID0gZnVuY3Rpb24gKG5hbWUsIGRlc2MsIHByaWNlLCBpY29uLCBidXlGdW5jdGlvbikgew0KICAgICAgdGhpcy5pZCA9IEdhbWUuVXBncmFkZXNOOw0KICAgICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICAgIHRoaXMuZG5hbWUgPSB0aGlzLm5hbWU7DQogICAgICB0aGlzLmRlc2MgPSBkZXNjOw0KICAgICAgdGhpcy5iYXNlRGVzYyA9IHRoaXMuZGVzYzsNCiAgICAgIHRoaXMuYmFzZVByaWNlID0gcHJpY2U7DQogICAgICB0aGlzLnByaWNlTHVtcHMgPSAwOyAvL25vdGUgOiBkb2Vzbid0IGRvIG11Y2ggb24gaXRzIG93biwgeW91IHN0aWxsIG5lZWQgdG8gaGFuZGxlIHRoZSBidXlpbmcgeW91cnNlbGYNCiAgICAgIHRoaXMuaWNvbiA9IGljb247DQogICAgICB0aGlzLmljb25GdW5jdGlvbiA9IDA7DQogICAgICB0aGlzLmJ1eUZ1bmN0aW9uID0gYnV5RnVuY3Rpb247DQogICAgICAvKnRoaXMudW5sb2NrRnVuY3Rpb249dW5sb2NrRnVuY3Rpb247DQoJCQl0aGlzLnVubG9ja2VkPSh0aGlzLnVubG9ja0Z1bmN0aW9uPzA6MSk7Ki8NCiAgICAgIHRoaXMudW5sb2NrZWQgPSAwOw0KICAgICAgdGhpcy5ib3VnaHQgPSAwOw0KICAgICAgdGhpcy5vcmRlciA9IHRoaXMuaWQ7DQogICAgICBpZiAob3JkZXIpIHRoaXMub3JkZXIgPSBvcmRlciArIHRoaXMuaWQgKiAwLjAwMTsNCiAgICAgIHRoaXMucG9vbCA9ICIiOyAvL2NhbiBiZSAnJywgY29va2llLCB0b2dnbGUsIGRlYnVnLCBwcmVzdGlnZSwgcHJlc3RpZ2VEZWNvciwgdGVjaCwgb3IgdW51c2VkDQogICAgICBpZiAocG9vbCkgdGhpcy5wb29sID0gcG9vbDsNCiAgICAgIHRoaXMucG93ZXIgPSAwOw0KICAgICAgaWYgKHBvd2VyKSB0aGlzLnBvd2VyID0gcG93ZXI7DQogICAgICB0aGlzLnZhbmlsbGEgPSBHYW1lLnZhbmlsbGE7DQogICAgICB0aGlzLnVubG9ja0F0ID0gMDsNCiAgICAgIHRoaXMudGVjaFVubG9jayA9IFtdOw0KICAgICAgdGhpcy5wYXJlbnRzID0gW107DQogICAgICB0aGlzLnR5cGUgPSAidXBncmFkZSI7DQogICAgICB0aGlzLnRpZXIgPSAwOw0KICAgICAgdGhpcy5idWlsZGluZ1RpZSA9IDA7IC8vb2Ygd2hhdCBidWlsZGluZyBpcyB0aGlzIGEgdGllcmVkIHVwZ3JhZGUgb2YgPw0KDQogICAgICBHYW1lLmxhc3QgPSB0aGlzOw0KICAgICAgR2FtZS5VcGdyYWRlc1t0aGlzLm5hbWVdID0gdGhpczsNCiAgICAgIEdhbWUuVXBncmFkZXNCeUlkW3RoaXMuaWRdID0gdGhpczsNCiAgICAgIEdhbWUuVXBncmFkZXNOKys7DQogICAgICByZXR1cm4gdGhpczsNCiAgICB9Ow0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAiVXBncmFkZSI7DQogICAgfTsNCg0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUuZ2V0UHJpY2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgcHJpY2UgPSB0aGlzLmJhc2VQcmljZTsNCiAgICAgIGlmICh0aGlzLnByaWNlRnVuYykgcHJpY2UgPSB0aGlzLnByaWNlRnVuYyh0aGlzKTsNCiAgICAgIGlmIChwcmljZSA9PSAwKSByZXR1cm4gMDsNCiAgICAgIGlmICh0aGlzLnBvb2wgIT0gInByZXN0aWdlIikgew0KICAgICAgICBpZiAoR2FtZS5IYXMoIlRveSB3b3Jrc2hvcCIpKSBwcmljZSAqPSAwLjk1Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkZpdmUtZmluZ2VyIGRpc2NvdW50IikpDQogICAgICAgICAgcHJpY2UgKj0gTWF0aC5wb3coMC45OSwgR2FtZS5PYmplY3RzWyJDdXJzb3IiXS5hbW91bnQgLyAxMDApOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIlNhbnRhJ3MgZG9taW5pb24iKSkgcHJpY2UgKj0gMC45ODsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJGYWJlcmdlIGVnZyIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkRpdmluZSBzYWxlcyIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkZvcnR1bmUgIzEwMCIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgICBpZiAodGhpcy5raXR0ZW4gJiYgR2FtZS5IYXMoIktpdHRlbiB3YWdlcyIpKSBwcmljZSAqPSAwLjk7DQogICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIkhhZ2dsZXIncyBsdWNrIikpIHByaWNlICo9IDAuOTg7DQogICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIkhhZ2dsZXIncyBtaXNlcnkiKSkgcHJpY2UgKj0gMS4wMjsNCiAgICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdNYXN0ZXIgb2YgdGhlIEFybW9yeScpKSBwcmljZSo9MC45ODsNCiAgICAgICAgcHJpY2UgKj0gMSAtIEdhbWUuYXVyYU11bHQoIk1hc3RlciBvZiB0aGUgQXJtb3J5IikgKiAwLjAyOw0KICAgICAgICBwcmljZSAqPSBHYW1lLmVmZigidXBncmFkZUNvc3QiKTsNCiAgICAgICAgaWYgKHRoaXMucG9vbCA9PSAiY29va2llIiAmJiBHYW1lLkhhcygiRGl2aW5lIGJha2VyaWVzIikpIHByaWNlIC89IDU7DQogICAgICB9DQogICAgICByZXR1cm4gTWF0aC5jZWlsKHByaWNlKTsNCiAgICB9Ow0KDQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS5jYW5CdXkgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAodGhpcy5jYW5CdXlGdW5jKSByZXR1cm4gdGhpcy5jYW5CdXlGdW5jKCk7DQogICAgICBpZiAoR2FtZS5jb29raWVzID49IHRoaXMuZ2V0UHJpY2UoKSkgcmV0dXJuIHRydWU7DQogICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICB9Ow0KDQogICAgR2FtZS5zdG9yZUJ1eUFsbCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghR2FtZS5IYXMoIkluc3BpcmVkIGNoZWNrbGlzdCIpKSByZXR1cm4gZmFsc2U7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNJblN0b3JlKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNJblN0b3JlW2ldOw0KICAgICAgICBpZiAoIW1lLmlzVmF1bHRlZCgpICYmIG1lLnBvb2wgIT0gInRvZ2dsZSIgJiYgbWUucG9vbCAhPSAidGVjaCIpDQogICAgICAgICAgbWUuYnV5KDEpOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLnZhdWx0ID0gW107DQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS5pc1ZhdWx0ZWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS52YXVsdC5pbmRleE9mKHRoaXMuaWQpICE9IC0xKSByZXR1cm4gdHJ1ZTsNCiAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS52YXVsdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghdGhpcy5pc1ZhdWx0ZWQoKSkgR2FtZS52YXVsdC5wdXNoKHRoaXMuaWQpOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS51bnZhdWx0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKHRoaXMuaXNWYXVsdGVkKCkpIEdhbWUudmF1bHQuc3BsaWNlKEdhbWUudmF1bHQuaW5kZXhPZih0aGlzLmlkKSwgMSk7DQogICAgfTsNCg0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbiAoZSkgew0KICAgICAgaWYgKChlICYmIGUuc2hpZnRLZXkpIHx8IEdhbWUua2V5c1sxNl0pIHsNCiAgICAgICAgaWYgKHRoaXMucG9vbCA9PSAidG9nZ2xlIiB8fCB0aGlzLnBvb2wgPT0gInRlY2giKSB7DQogICAgICAgIH0gZWxzZSBpZiAoR2FtZS5IYXMoIkluc3BpcmVkIGNoZWNrbGlzdCIpKSB7DQogICAgICAgICAgaWYgKHRoaXMuaXNWYXVsdGVkKCkpIHRoaXMudW52YXVsdCgpOw0KICAgICAgICAgIGVsc2UgdGhpcy52YXVsdCgpOw0KICAgICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB0aGlzLmJ1eSgpOw0KICAgIH07DQoNCiAgICBHYW1lLlVwZ3JhZGUucHJvdG90eXBlLmJ1eSA9IGZ1bmN0aW9uIChieXBhc3MpIHsNCiAgICAgIHZhciBzdWNjZXNzID0gMDsNCiAgICAgIHZhciBjYW5jZWxQdXJjaGFzZSA9IDA7DQogICAgICBpZiAodGhpcy5jbGlja0Z1bmN0aW9uICYmICFieXBhc3MpIGNhbmNlbFB1cmNoYXNlID0gIXRoaXMuY2xpY2tGdW5jdGlvbigpOw0KICAgICAgaWYgKCFjYW5jZWxQdXJjaGFzZSkgew0KICAgICAgICBpZiAodGhpcy5jaG9pY2VzRnVuY3Rpb24pIHsNCiAgICAgICAgICBpZiAoR2FtZS5jaG9pY2VTZWxlY3Rvck9uID09IHRoaXMuaWQpIHsNCiAgICAgICAgICAgIGwoInRvZ2dsZUJveCIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBsKCJ0b2dnbGVCb3giKS5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgIEdhbWUuY2hvaWNlU2VsZWN0b3JPbiA9IC0xOw0KICAgICAgICAgICAgUGxheVNvdW5kKCJzbmQvdGlja09mZi5tcDMiKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgR2FtZS5jaG9pY2VTZWxlY3Rvck9uID0gdGhpcy5pZDsNCiAgICAgICAgICAgIHZhciBjaG9pY2VzID0gdGhpcy5jaG9pY2VzRnVuY3Rpb24oKTsNCiAgICAgICAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iY2xvc2UiIG9uY2xpY2s9IkdhbWUuVXBncmFkZXNCeUlkWycgKw0KICAgICAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAgICAgJ10uYnV5KCk7Ij54PC9kaXY+JzsNCiAgICAgICAgICAgIHN0ciArPSAiPGgzPiIgKyB0aGlzLmRuYW1lICsgIjwvaDM+IiArICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBjaG9pY2VzID09PSAic3RyaW5nIikgew0KICAgICAgICAgICAgICBzdHIgKz0gY2hvaWNlczsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IDA7DQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gY2hvaWNlcykgew0KICAgICAgICAgICAgICAgIGlmIChjaG9pY2VzW2ldLnNlbGVjdGVkKSBzZWxlY3RlZCA9IGk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgR2FtZS5jaG9pY2VTZWxlY3RvckNob2ljZXMgPSBjaG9pY2VzOyAvL3RoaXMgaXMgYSByZWFsbHkgZHVtYiB3YXkgb2YgZG9pbmcgdGhpcyBpIGFtIHNvIHNvcnJ5DQogICAgICAgICAgICAgIEdhbWUuY2hvaWNlU2VsZWN0b3JTZWxlY3RlZCA9IHNlbGVjdGVkOw0KICAgICAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICAgICAnPGg0IGlkPSJjaG9pY2VTZWxlY3RlZE5hbWUiPicgKw0KICAgICAgICAgICAgICAgIGNob2ljZXNbc2VsZWN0ZWRdLm5hbWUgKw0KICAgICAgICAgICAgICAgICI8L2g0PiIgKw0KICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gY2hvaWNlcykgew0KICAgICAgICAgICAgICAgIGNob2ljZXNbaV0uaWQgPSBpOw0KICAgICAgICAgICAgICAgIGNob2ljZXNbaV0ub3JkZXIgPSBjaG9pY2VzW2ldLm9yZGVyIHx8IDA7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgc29ydE1hcCA9IGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICAgICAgICAgICAgaWYgKGEub3JkZXIgPiBiLm9yZGVyKSByZXR1cm4gMTsNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChhLm9yZGVyIDwgYi5vcmRlcikgcmV0dXJuIC0xOw0KICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIDA7DQogICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgIGNob2ljZXMuc29ydChzb3J0TWFwKTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNob2ljZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAoIWNob2ljZXNbaV0pIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIHZhciBpY29uID0gY2hvaWNlc1tpXS5pY29uOw0KICAgICAgICAgICAgICAgIHZhciBpZCA9IGNob2ljZXNbaV0uaWQ7DQogICAgICAgICAgICAgICAgaWYgKGNob2ljZXNbaV0uZGl2KSBzdHIgKz0gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pic7DQogICAgICAgICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iY3JhdGUgbm9GcmFtZSBlbmFibGVkJyArDQogICAgICAgICAgICAgICAgICAoaWQgPT0gc2VsZWN0ZWQgPyAiIGhpZ2hsaWdodGVkIiA6ICIiKSArDQogICAgICAgICAgICAgICAgICAnIiBzdHlsZT0ib3BhY2l0eToxO2Zsb2F0Om5vbmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7JyArDQogICAgICAgICAgICAgICAgICB3cml0ZUljb24oaWNvbikgKw0KICAgICAgICAgICAgICAgICAgJyIgJyArDQogICAgICAgICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICAgICAgICc9IkdhbWUuVXBncmFkZXNCeUlkWycgKw0KICAgICAgICAgICAgICAgICAgdGhpcy5pZCArDQogICAgICAgICAgICAgICAgICAiXS5jaG9pY2VzUGljaygiICsNCiAgICAgICAgICAgICAgICAgIGlkICsNCiAgICAgICAgICAgICAgICAgICIpO0dhbWUuY2hvaWNlU2VsZWN0b3JPbj0tMTtHYW1lLlVwZ3JhZGVzQnlJZFsiICsNCiAgICAgICAgICAgICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAgICAgICAgICAgIl0uYnV5KCk7XCIgb25Nb3VzZU91dD1cImwoJ2Nob2ljZVNlbGVjdGVkTmFtZScpLmlubmVySFRNTD1HYW1lLmNob2ljZVNlbGVjdG9yQ2hvaWNlc1tHYW1lLmNob2ljZVNlbGVjdG9yU2VsZWN0ZWRdLm5hbWU7XCIgb25Nb3VzZU92ZXI9XCJsKCdjaG9pY2VTZWxlY3RlZE5hbWUnKS5pbm5lckhUTUw9R2FtZS5jaG9pY2VTZWxlY3RvckNob2ljZXNbIiArDQogICAgICAgICAgICAgICAgICBpICsNCiAgICAgICAgICAgICAgICAgICddLm5hbWU7IicgKw0KICAgICAgICAgICAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBsKCJ0b2dnbGVCb3giKS5pbm5lckhUTUwgPSBzdHI7DQogICAgICAgICAgICBsKCJ0b2dnbGVCb3giKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIGwoInRvZ2dsZUJveCIpLmZvY3VzKCk7DQogICAgICAgICAgICBHYW1lLnRvb2x0aXAuaGlkZSgpOw0KICAgICAgICAgICAgUGxheVNvdW5kKCJzbmQvdGljay5tcDMiKTsNCiAgICAgICAgICAgIHN1Y2Nlc3MgPSAxOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBvb2wgIT0gInByZXN0aWdlIikgew0KICAgICAgICAgIHZhciBwcmljZSA9IHRoaXMuZ2V0UHJpY2UoKTsNCiAgICAgICAgICBpZiAodGhpcy5jYW5CdXkoKSAmJiAhdGhpcy5ib3VnaHQpIHsNCiAgICAgICAgICAgIEdhbWUuU3BlbmQocHJpY2UpOw0KICAgICAgICAgICAgdGhpcy5ib3VnaHQgPSAxOw0KICAgICAgICAgICAgaWYgKHRoaXMuYnV5RnVuY3Rpb24pIHRoaXMuYnV5RnVuY3Rpb24oKTsNCiAgICAgICAgICAgIGlmICh0aGlzLnRvZ2dsZUludG8pIHsNCiAgICAgICAgICAgICAgR2FtZS5Mb2NrKHRoaXMudG9nZ2xlSW50byk7DQogICAgICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMudG9nZ2xlSW50byk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgICAgICBpZiAoR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZCh0aGlzLnBvb2wpKSBHYW1lLlVwZ3JhZGVzT3duZWQrKzsNCiAgICAgICAgICAgIEdhbWUuc2V0T25DcmF0ZSgwKTsNCiAgICAgICAgICAgIEdhbWUudG9vbHRpcC5oaWRlKCk7DQogICAgICAgICAgICBQbGF5U291bmQoInNuZC9idXkiICsgY2hvb3NlKFsxLCAyLCAzLCA0XSkgKyAiLm1wMyIsIDAuNzUpOw0KICAgICAgICAgICAgc3VjY2VzcyA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZhciBwcmljZSA9IHRoaXMuZ2V0UHJpY2UoKTsNCiAgICAgICAgICBpZiAoR2FtZS5oZWF2ZW5seUNoaXBzID49IHByaWNlICYmICF0aGlzLmJvdWdodCkgew0KICAgICAgICAgICAgR2FtZS5oZWF2ZW5seUNoaXBzIC09IHByaWNlOw0KICAgICAgICAgICAgR2FtZS5oZWF2ZW5seUNoaXBzU3BlbnQgKz0gcHJpY2U7DQogICAgICAgICAgICB0aGlzLnVubG9ja2VkID0gMTsNCiAgICAgICAgICAgIHRoaXMuYm91Z2h0ID0gMTsNCiAgICAgICAgICAgIGlmICh0aGlzLmJ1eUZ1bmN0aW9uKSB0aGlzLmJ1eUZ1bmN0aW9uKCk7DQogICAgICAgICAgICBHYW1lLkJ1aWxkQXNjZW5kVHJlZSh0aGlzKTsNCiAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL2J1eSIgKyBjaG9vc2UoWzEsIDIsIDMsIDRdKSArICIubXAzIiwgMC43NSk7DQogICAgICAgICAgICBQbGF5U291bmQoInNuZC9zaGltbWVyQ2xpY2subXAzIik7DQogICAgICAgICAgICAvL1BsYXlTb3VuZCgnc25kL2J1eUhlYXZlbmx5Lm1wMycpOw0KICAgICAgICAgICAgc3VjY2VzcyA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodGhpcy5ib3VnaHQgJiYgdGhpcy5hY3RpdmF0ZUZ1bmN0aW9uKSB0aGlzLmFjdGl2YXRlRnVuY3Rpb24oKTsNCiAgICAgIHJldHVybiBzdWNjZXNzOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS5lYXJuID0NCiAgICAgIGZ1bmN0aW9uICgpIC8vanVzdCB3aW4gdGhlIHVwZ3JhZGVzIHdpdGhvdXQgc3BlbmRpbmcgYW55dGhpbmcNCiAgICAgIHsNCiAgICAgICAgdGhpcy51bmxvY2tlZCA9IDE7DQogICAgICAgIHRoaXMuYm91Z2h0ID0gMTsNCiAgICAgICAgaWYgKHRoaXMuYnV5RnVuY3Rpb24pIHRoaXMuYnV5RnVuY3Rpb24oKTsNCiAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIGlmIChHYW1lLkNvdW50c0FzVXBncmFkZU93bmVkKHRoaXMucG9vbCkpIEdhbWUuVXBncmFkZXNPd25lZCsrOw0KICAgICAgfTsNCiAgICBHYW1lLlVwZ3JhZGUucHJvdG90eXBlLnVuZWFybiA9DQogICAgICBmdW5jdGlvbiAoKSAvL3JlbW92ZSB0aGUgdXBncmFkZSwgYnV0IGtlZXAgaXQgdW5sb2NrZWQNCiAgICAgIHsNCiAgICAgICAgdGhpcy5ib3VnaHQgPSAwOw0KICAgICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQodGhpcy5wb29sKSkgR2FtZS5VcGdyYWRlc093bmVkLS07DQogICAgICB9Ow0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUudW5sb2NrID0gZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy51bmxvY2tlZCA9IDE7DQogICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICB9Ow0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUubG9zZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMudW5sb2NrZWQgPSAwOw0KICAgICAgdGhpcy5ib3VnaHQgPSAwOw0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgaWYgKEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQodGhpcy5wb29sKSkgR2FtZS5VcGdyYWRlc093bmVkLS07DQogICAgfTsNCiAgICBHYW1lLlVwZ3JhZGUucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIC8vY2hlYXRpbmcgb25seQ0KICAgIHsNCiAgICAgIGlmICghdGhpcy5ib3VnaHQpIHsNCiAgICAgICAgdGhpcy5ib3VnaHQgPSAxOw0KICAgICAgICBpZiAodGhpcy5idXlGdW5jdGlvbikgdGhpcy5idXlGdW5jdGlvbigpOw0KICAgICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQodGhpcy5wb29sKSkgR2FtZS5VcGdyYWRlc093bmVkKys7DQogICAgICAgIFBsYXlTb3VuZCgic25kL2J1eSIgKyBjaG9vc2UoWzEsIDIsIDMsIDRdKSArICIubXAzIiwgMC43NSk7DQogICAgICAgIGlmICh0aGlzLnBvb2wgPT0gInByZXN0aWdlIiB8fCB0aGlzLnBvb2wgPT0gImRlYnVnIikNCiAgICAgICAgICBQbGF5U291bmQoInNuZC9zaGltbWVyQ2xpY2subXAzIik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmJvdWdodCA9IDA7DQogICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICBpZiAoR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZCh0aGlzLnBvb2wpKSBHYW1lLlVwZ3JhZGVzT3duZWQtLTsNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvc2VsbCIgKyBjaG9vc2UoWzEsIDIsIDMsIDRdKSArICIubXAzIiwgMC43NSk7DQogICAgICAgIGlmICh0aGlzLnBvb2wgPT0gInByZXN0aWdlIiB8fCB0aGlzLnBvb2wgPT0gImRlYnVnIikNCiAgICAgICAgICBQbGF5U291bmQoInNuZC9zaGltbWVyQ2xpY2subXAzIik7DQogICAgICB9DQogICAgICBpZiAoR2FtZS5vbk1lbnUgPT0gInN0YXRzIikgR2FtZS5VcGRhdGVNZW51KCk7DQogICAgfTsNCg0KICAgIEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQgPSBmdW5jdGlvbiAocG9vbCkgew0KICAgICAgaWYgKHBvb2wgPT0gIiIgfHwgcG9vbCA9PSAiY29va2llIiB8fCBwb29sID09ICJ0ZWNoIikgcmV0dXJuIHRydWU7DQogICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICB9Ow0KDQogICAgLypBZGRFdmVudChsKCd0b2dnbGVCb3gnKSwnYmx1cicsZnVuY3Rpb24oKS8vaWYgd2UgY2xpY2sgb3V0c2lkZSBvZiB0aGUgc2VsZWN0b3IsIGNsb3NlIGl0DQoJCQl7DQoJCQkJLy90aGlzIGhhcyBhIGNvdXBsZSBwcm9ibGVtcywgc3VjaCBhcyB3aGVuIGNsaWNraW5nIG9uIHRoZSB1cGdyYWRlIC0gdGhpcyB0b2dnbGVzIGl0IG9mZiBhbmQgYmFjayBvbiBpbnN0YW50bHkNCgkJCQlsKCd0b2dnbGVCb3gnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsNCgkJCQlsKCd0b2dnbGVCb3gnKS5pbm5lckhUTUw9Jyc7DQoJCQkJR2FtZS5jaG9pY2VTZWxlY3Rvck9uPS0xOw0KCQkJfQ0KCQkpOyovDQoNCiAgICBHYW1lLlJlcXVpcmVzQ29uZmlybWF0aW9uID0gZnVuY3Rpb24gKHVwZ3JhZGUsIHByb21wdCkgew0KICAgICAgdXBncmFkZS5jbGlja0Z1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlByb21wdCgiPGlkIFJlcXVpcmVzQ29uZmlybWF0aW9uPiIgKyBwcm9tcHQsIFsNCiAgICAgICAgICBbDQogICAgICAgICAgICBsb2MoIlllcyIpLA0KICAgICAgICAgICAgIkdhbWUuVXBncmFkZXNCeUlkWyIgKyB1cGdyYWRlLmlkICsgIl0uYnV5KDEpO0dhbWUuQ2xvc2VQcm9tcHQoKTsiLA0KICAgICAgICAgIF0sDQogICAgICAgICAgbG9jKCJObyIpLA0KICAgICAgICBdKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfTsNCiAgICB9Ow0KDQogICAgR2FtZS5VbmxvY2sgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgaWYgKHR5cGVvZiB3aGF0ID09PSAic3RyaW5nIikgew0KICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc1t3aGF0XSkgew0KICAgICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzW3doYXRdLnVubG9ja2VkID09IDApIHsNCiAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbd2hhdF0udW5sb2NrZWQgPSAxOw0KICAgICAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgLypHYW1lLk5vdGlmeSgnVXBncmFkZSB1bmxvY2tlZCcsJzxkaXYgY2xhc3M9InRpdGxlIiBzdHlsZT0iZm9udC1zaXplOjE4cHg7bWFyZ2luLXRvcDotMnB4OyI+JytHYW1lLlVwZ3JhZGVzW3doYXRdLmRuYW1lKyc8L2Rpdj4nLEdhbWUuVXBncmFkZXNbd2hhdF0uaWNvbiw2KTsqLw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZm9yICh2YXIgaSBpbiB3aGF0KSB7DQogICAgICAgICAgR2FtZS5VbmxvY2sod2hhdFtpXSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuTG9jayA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBpZiAodHlwZW9mIHdoYXQgPT09ICJzdHJpbmciKSB7DQogICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzW3doYXRdKSB7DQogICAgICAgICAgR2FtZS5VcGdyYWRlc1t3aGF0XS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgR2FtZS5VcGdyYWRlc1t3aGF0XS5ib3VnaHQgPT0gMSAmJg0KICAgICAgICAgICAgR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZChHYW1lLlVwZ3JhZGVzW3doYXRdLnBvb2wpDQogICAgICAgICAgKQ0KICAgICAgICAgICAgR2FtZS5VcGdyYWRlc093bmVkLS07DQogICAgICAgICAgR2FtZS5VcGdyYWRlc1t3aGF0XS5ib3VnaHQgPSAwOw0KICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGZvciAodmFyIGkgaW4gd2hhdCkgew0KICAgICAgICAgIEdhbWUuTG9jayh3aGF0W2ldKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLkhhcyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICB2YXIgaXQgPSBHYW1lLlVwZ3JhZGVzW3doYXRdOw0KICAgICAgaWYgKA0KICAgICAgICBpdCAmJg0KICAgICAgICBHYW1lLmFzY2Vuc2lvbk1vZGUgPT0gMSAmJg0KICAgICAgICAoaXQucG9vbCA9PSAicHJlc3RpZ2UiIHx8IGl0LnRpZXIgPT0gImZvcnR1bmUiKQ0KICAgICAgKQ0KICAgICAgICByZXR1cm4gMDsNCiAgICAgIHJldHVybiBpdCA/IGl0LmJvdWdodCA6IDA7DQogICAgfTsNCiAgICBHYW1lLkhhc1VubG9ja2VkID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIHJldHVybiBHYW1lLlVwZ3JhZGVzW3doYXRdID8gR2FtZS5VcGdyYWRlc1t3aGF0XS51bmxvY2tlZCA6IDA7DQogICAgfTsNCg0KICAgIEdhbWUuUmVidWlsZFVwZ3JhZGVzID0gZnVuY3Rpb24gKCkgLy9yZWNhbGN1bGF0ZSB0aGUgdXBncmFkZXMgeW91IGNhbiBidXkNCiAgICB7DQogICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMDsNCiAgICAgIHZhciBsaXN0ID0gW107DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgICFtZS5ib3VnaHQgJiYNCiAgICAgICAgICBtZS5wb29sICE9ICJkZWJ1ZyIgJiYNCiAgICAgICAgICBtZS5wb29sICE9ICJwcmVzdGlnZSIgJiYNCiAgICAgICAgICBtZS5wb29sICE9ICJwcmVzdGlnZURlY29yIiAmJg0KICAgICAgICAgIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSB8fCAoIW1lLmxhc3RpbmcgJiYgbWUudGllciAhPSAiZm9ydHVuZSIpKQ0KICAgICAgICApIHsNCiAgICAgICAgICBpZiAobWUudW5sb2NrZWQpIGxpc3QucHVzaChtZSk7DQogICAgICAgIH0gZWxzZSBpZiAobWUuZGlzcGxheUZ1bmNXaGVuT3duZWQgJiYgbWUuYm91Z2h0KSBsaXN0LnB1c2gobWUpOw0KICAgICAgfQ0KICAgICAgdmFyIHNvcnRNYXAgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICB2YXIgYXAgPSBhLnBvb2wgPT0gInRvZ2dsZSIgPyBhLm9yZGVyIDogYS5nZXRQcmljZSgpOw0KICAgICAgICB2YXIgYnAgPSBiLnBvb2wgPT0gInRvZ2dsZSIgPyBiLm9yZGVyIDogYi5nZXRQcmljZSgpOw0KICAgICAgICBpZiAoYXAgPiBicCkgcmV0dXJuIDE7DQogICAgICAgIGVsc2UgaWYgKGFwIDwgYnApIHJldHVybiAtMTsNCiAgICAgICAgZWxzZSByZXR1cm4gMDsNCiAgICAgIH07DQogICAgICBsaXN0LnNvcnQoc29ydE1hcCk7DQoNCiAgICAgIEdhbWUuVXBncmFkZXNJblN0b3JlID0gW107DQogICAgICBmb3IgKHZhciBpIGluIGxpc3QpIHsNCiAgICAgICAgR2FtZS5VcGdyYWRlc0luU3RvcmUucHVzaChsaXN0W2ldKTsNCiAgICAgIH0NCiAgICAgIHZhciBzdG9yZVN0ciA9ICIiOw0KICAgICAgdmFyIHRvZ2dsZVN0ciA9ICIiOw0KICAgICAgdmFyIHRlY2hTdHIgPSAiIjsNCiAgICAgIHZhciB2YXVsdFN0ciA9ICIiOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIkluc3BpcmVkIGNoZWNrbGlzdCIpKSB7DQogICAgICAgIHN0b3JlU3RyICs9DQogICAgICAgICAgJzxkaXYgaWQ9InN0b3JlQnV5QWxsIiBjbGFzcz0ic3RvcmVQcmUiICcgKw0KICAgICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDttaW4td2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7IiBpZD0idG9vbHRpcFN0b3JlUHJlIj4nICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJXaWxsIDxiPmluc3RhbnRseSBwdXJjaGFzZTwvYj4gZXZlcnkgdXBncmFkZSB5b3UgY2FuIGFmZm9yZCwgc3RhcnRpbmcgZnJvbSB0aGUgY2hlYXBlc3Qgb25lLjxicj5VcGdyYWRlcyBpbiB0aGUgPGI+dmF1bHQ8L2I+IHdpbGwgbm90IGJlIGF1dG8tcHVyY2hhc2VkLjxicj5Zb3UgbWF5IHBsYWNlIGFuIHVwZ3JhZGUgaW50byB0aGUgdmF1bHQgYnkgPGI+U2hpZnQtY2xpY2tpbmc8L2I+IG9uIGl0LiINCiAgICAgICAgICAgICAgKSArDQogICAgICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAgICAgInN0b3JlIg0KICAgICAgICAgICkgKw0KICAgICAgICAgICI+IiArDQogICAgICAgICAgJzxkaXYgaWQ9InN0b3JlQnV5QWxsQnV0dG9uIiBjbGFzcz0ic3RvcmVQcmVCdXR0b24iICcgKw0KICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICc9IkdhbWUuc3RvcmVCdXlBbGwoKTsiPicgKw0KICAgICAgICAgIGxvYygiQnV5IGFsbCB1cGdyYWRlcyIpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgIjwvZGl2PiI7DQogICAgICAgIGwoInVwZ3JhZGVzIikuY2xhc3NMaXN0LmFkZCgiaGFzTWVudSIpOw0KICAgICAgfSBlbHNlIGwoInVwZ3JhZGVzIikuY2xhc3NMaXN0LnJlbW92ZSgiaGFzTWVudSIpOw0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNJblN0b3JlKSB7DQogICAgICAgIC8vaWYgKCFHYW1lLlVwZ3JhZGVzSW5TdG9yZVtpXSkgYnJlYWs7DQogICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNJblN0b3JlW2ldOw0KICAgICAgICB2YXIgc3RyID0gR2FtZS5jcmF0ZSgNCiAgICAgICAgICBtZSwNCiAgICAgICAgICAic3RvcmUiLA0KICAgICAgICAgICJHYW1lLlVwZ3JhZGVzQnlJZFsiICsgbWUuaWQgKyAiXS5jbGljayhldmVudCk7IiwNCiAgICAgICAgICAidXBncmFkZSIgKyBpDQogICAgICAgICk7DQoNCiAgICAgICAgLyp2YXIgc3RyPSc8ZGl2IGNsYXNzPSJjcmF0ZSB1cGdyYWRlIiAnK0dhbWUuZ2V0VG9vbHRpcCgNCgkJCQknPGRpdiBzdHlsZT0ibWluLXdpZHRoOjIwMHB4OyI+PGRpdiBzdHlsZT0iZmxvYXQ6cmlnaHQ7Ij48c3BhbiBjbGFzcz0icHJpY2UiPicrQmVhdXRpZnkoTWF0aC5yb3VuZChtZS5nZXRQcmljZSgpKSkrJzwvc3Bhbj48L2Rpdj48c21hbGw+JysobWUucG9vbD09J3RvZ2dsZSc/J1tUb2dnbGFibGVdJzonW1VwZ3JhZGVdJykrJzwvc21hbGw+PGRpdiBjbGFzcz0ibmFtZSI+JyttZS5kbmFtZSsnPC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBjbGFzcz0iZGVzY3JpcHRpb24iPicrbWUuZGVzYysnPC9kaXY+PC9kaXY+Jw0KCQkJCSwnc3RvcmUnKSsnICcrR2FtZS5jbGlja1N0cisnPSJHYW1lLlVwZ3JhZGVzQnlJZFsnK21lLmlkKyddLmJ1eSgpOyIgaWQ9InVwZ3JhZGUnK2krJyIgc3R5bGU9Iicrd3JpdGVJY29uKG1lLmljb24pKyciPjwvZGl2Pic7Ki8NCiAgICAgICAgaWYgKG1lLnBvb2wgPT0gInRvZ2dsZSIpIHRvZ2dsZVN0ciArPSBzdHI7DQogICAgICAgIGVsc2UgaWYgKG1lLnBvb2wgPT0gInRlY2giKSB0ZWNoU3RyICs9IHN0cjsNCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgaWYgKG1lLmlzVmF1bHRlZCgpICYmIEdhbWUuSGFzKCJJbnNwaXJlZCBjaGVja2xpc3QiKSkgdmF1bHRTdHIgKz0gc3RyOw0KICAgICAgICAgIGVsc2Ugc3RvcmVTdHIgKz0gc3RyOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGwoInVwZ3JhZGVzIikuaW5uZXJIVE1MID0gc3RvcmVTdHI7DQogICAgICBsKCJ0b2dnbGVVcGdyYWRlcyIpLmlubmVySFRNTCA9IHRvZ2dsZVN0cjsNCiAgICAgIGlmICh0b2dnbGVTdHIgPT0gIiIpIGwoInRvZ2dsZVVwZ3JhZGVzIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIGVsc2UgbCgidG9nZ2xlVXBncmFkZXMiKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIGwoInRlY2hVcGdyYWRlcyIpLmlubmVySFRNTCA9IHRlY2hTdHI7DQogICAgICBpZiAodGVjaFN0ciA9PSAiIikgbCgidGVjaFVwZ3JhZGVzIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIGVsc2UgbCgidGVjaFVwZ3JhZGVzIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICBsKCJ2YXVsdFVwZ3JhZGVzIikuaW5uZXJIVE1MID0gdmF1bHRTdHI7DQogICAgICBpZiAodmF1bHRTdHIgPT0gIiIpIGwoInZhdWx0VXBncmFkZXMiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgZWxzZSBsKCJ2YXVsdFVwZ3JhZGVzIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgfTsNCg0KICAgIEdhbWUuVW5sb2NrQXQgPSBbXTsgLy90aGlzIGNvbnRhaW5zIGFuIGFycmF5IG9mIGV2ZXJ5IHVwZ3JhZGUgd2l0aCBhIGNvb2tpZSByZXF1aXJlbWVudCBpbiB0aGUgZm9ybSBvZiB7Y29va2llczooYW1vdW50IG9mIGNvb2tpZXMgZWFybmVkIHJlcXVpcmVkKSxuYW1lOihuYW1lIG9mIHVwZ3JhZGUgb3IgYWNoaWV2ZW1lbnQgdG8gdW5sb2NrKX0gKGFuZCBwb3NzaWJseSByZXF1aXJlOihuYW1lIG9mIHVwZ3JhZGUgb2YgYWNoaWV2ZW1lbnQgdG8gb3duKSkNCiAgICAvL25vdGUgOiB0aGUgY29va2llIHdpbGwgbm90IGJlIGFkZGVkIHRvIHRoZSBsaXN0IGlmIGl0IGNvbnRhaW5zIGxvY2tlZDoxICh1c2UgZm9yIHNlYXNvbmFsIGNvb2tpZXMgYW5kIHN1Y2gpDQoNCiAgICB2YXIgc3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzID0gbG9jKA0KICAgICAgIkNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZXIgPGI+KyUxJTwvYj4uIiwNCiAgICAgICJbeF0iDQogICAgKTsNCiAgICB2YXIgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzID0gZnVuY3Rpb24gKHgpIHsNCiAgICAgIHJldHVybiBzdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMucmVwbGFjZSgiW3hdIiwgeCk7DQogICAgfTsNCiAgICB2YXIgZ2V0U3RyVGhvdXNhbmRGaW5nZXJzR2FpbiA9IGZ1bmN0aW9uICh4KSB7DQogICAgICByZXR1cm4gbG9jKCJNdWx0aXBsaWVzIHRoZSBnYWluIGZyb20gJTEgYnkgPGI+JTI8L2I+LiIsIFsNCiAgICAgICAgZ2V0VXBncmFkZU5hbWUoIlRob3VzYW5kIGZpbmdlcnMiKSwNCiAgICAgICAgeCwNCiAgICAgIF0pOw0KICAgIH07DQogICAgdmFyIHN0cktpdHRlbkRlc2MgPSBsb2MoIllvdSBnYWluIDxiPm1vcmUgQ3BTPC9iPiB0aGUgbW9yZSBtaWxrIHlvdSBoYXZlLiIpOw0KICAgIHZhciBnZXRTdHJDbGlja2luZ0dhaW5zID0gZnVuY3Rpb24gKHgpIHsNCiAgICAgIHJldHVybiBsb2MoIkNsaWNraW5nIGdhaW5zIDxiPislMSUgb2YgeW91ciBDcFM8L2I+LiIsIHgpOw0KICAgIH07DQoNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUgPSBmdW5jdGlvbiAob2JqKSB7DQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgIG9iai5uYW1lLA0KICAgICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoDQogICAgICAgICAgQmVhdXRpZnkoDQogICAgICAgICAgICB0eXBlb2Ygb2JqLnBvd2VyID09PSAiZnVuY3Rpb24iID8gb2JqLnBvd2VyKG9iaikgOiBvYmoucG93ZXIsDQogICAgICAgICAgICAxDQogICAgICAgICAgKQ0KICAgICAgICApICsgKEVOID8gIjxxPiIgKyBvYmouZGVzYyArICI8L3E+IiA6ICIiKSwNCiAgICAgICAgb2JqLnByaWNlLA0KICAgICAgICBvYmouaWNvbg0KICAgICAgKTsNCiAgICAgIHVwZ3JhZGUucG93ZXIgPSBvYmoucG93ZXI7DQogICAgICB1cGdyYWRlLnBvb2wgPSAiY29va2llIjsNCiAgICAgIHZhciB0b1B1c2ggPSB7IGNvb2tpZXM6IG9iai5wcmljZSAvIDIwLCBuYW1lOiBvYmoubmFtZSB9Ow0KICAgICAgaWYgKG9iai5yZXF1aXJlKSB0b1B1c2gucmVxdWlyZSA9IG9iai5yZXF1aXJlOw0KICAgICAgaWYgKG9iai5zZWFzb24pIHRvUHVzaC5zZWFzb24gPSBvYmouc2Vhc29uOw0KICAgICAgaWYgKCFvYmoubG9ja2VkKSBHYW1lLlVubG9ja0F0LnB1c2godG9QdXNoKTsNCiAgICAgIHJldHVybiB1cGdyYWRlOw0KICAgIH07DQoNCiAgICAvL3RpZXJlZCB1cGdyYWRlcyBzeXN0ZW0NCiAgICAvL2VhY2ggYnVpbGRpbmcgaGFzIHNldmVyYWwgdXBncmFkZSB0aWVycw0KICAgIC8vYWxsIHVwZ3JhZGVzIGluIHRoZSBzYW1lIHRpZXIgaGF2ZSB0aGUgc2FtZSBjb2xvciwgdW5sb2NrIHRocmVzaG9sZCBhbmQgcHJpY2UgbXVsdGlwbGllcg0KICAgIEdhbWUuVGllcnMgPSB7DQogICAgICAxOiB7DQogICAgICAgIG5hbWU6ICJQbGFpbiIsDQogICAgICAgIHVubG9jazogMSwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiAxLA0KICAgICAgICBpY29uUm93OiAwLA0KICAgICAgICBjb2xvcjogIiNjY2IzYWMiLA0KICAgICAgICBwcmljZTogMTAsDQogICAgICB9LA0KICAgICAgMjogew0KICAgICAgICBuYW1lOiAiQmVycnlsaXVtIiwNCiAgICAgICAgdW5sb2NrOiA1LA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDUwLA0KICAgICAgICBpY29uUm93OiAxLA0KICAgICAgICBjb2xvcjogIiNmZjg5ZTciLA0KICAgICAgICBwcmljZTogNTAsDQogICAgICB9LA0KICAgICAgMzogew0KICAgICAgICBuYW1lOiAiQmx1ZWJlcnJ5bGl1bSIsDQogICAgICAgIHVubG9jazogMjUsDQogICAgICAgIGFjaGlldlVubG9jazogMTAwLA0KICAgICAgICBpY29uUm93OiAyLA0KICAgICAgICBjb2xvcjogIiMwMGRlZmYiLA0KICAgICAgICBwcmljZTogNTAwLA0KICAgICAgfSwNCiAgICAgIDQ6IHsNCiAgICAgICAgbmFtZTogIkNoYWxjZWRob25leSIsDQogICAgICAgIHVubG9jazogNTAsDQogICAgICAgIGFjaGlldlVubG9jazogMTUwLA0KICAgICAgICBpY29uUm93OiAxMywNCiAgICAgICAgY29sb3I6ICIjZmZjYzJmIiwNCiAgICAgICAgcHJpY2U6IDUwMDAwLA0KICAgICAgfSwNCiAgICAgIDU6IHsNCiAgICAgICAgbmFtZTogIkJ1dHRlcmdvbGQiLA0KICAgICAgICB1bmxvY2s6IDEwMCwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiAyMDAsDQogICAgICAgIGljb25Sb3c6IDE0LA0KICAgICAgICBjb2xvcjogIiNlOWQ2NzMiLA0KICAgICAgICBwcmljZTogNTAwMDAwMCwNCiAgICAgIH0sDQogICAgICA2OiB7DQogICAgICAgIG5hbWU6ICJTdWdhcm11Y2siLA0KICAgICAgICB1bmxvY2s6IDE1MCwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiAyNTAsDQogICAgICAgIGljb25Sb3c6IDE1LA0KICAgICAgICBjb2xvcjogIiNhOGJmOTEiLA0KICAgICAgICBwcmljZTogNTAwMDAwMDAwLA0KICAgICAgfSwNCiAgICAgIDc6IHsNCiAgICAgICAgbmFtZTogIkpldG1pbnQiLA0KICAgICAgICB1bmxvY2s6IDIwMCwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiAzMDAsDQogICAgICAgIGljb25Sb3c6IDE2LA0KICAgICAgICBjb2xvcjogIiM2MGZmNTAiLA0KICAgICAgICBwcmljZTogNTAwMDAwMDAwMDAwLA0KICAgICAgfSwNCiAgICAgIDg6IHsNCiAgICAgICAgbmFtZTogIkNoZXJyeXNpbHZlciIsDQogICAgICAgIHVubG9jazogMjUwLA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDM1MCwNCiAgICAgICAgaWNvblJvdzogMTcsDQogICAgICAgIGNvbG9yOiAiI2YwMTcwMCIsDQogICAgICAgIHByaWNlOiA1MDAwMDAwMDAwMDAwMDAsDQogICAgICB9LA0KICAgICAgOTogew0KICAgICAgICBuYW1lOiAiSGF6ZWxyYWxkIiwNCiAgICAgICAgdW5sb2NrOiAzMDAsDQogICAgICAgIGFjaGlldlVubG9jazogNDAwLA0KICAgICAgICBpY29uUm93OiAxOCwNCiAgICAgICAgY29sb3I6ICIjOWFiODM0IiwNCiAgICAgICAgcHJpY2U6IDUwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICAxMDogew0KICAgICAgICBuYW1lOiAiTW9vbmNhbmR5IiwNCiAgICAgICAgdW5sb2NrOiAzNTAsDQogICAgICAgIGFjaGlldlVubG9jazogNDUwLA0KICAgICAgICBpY29uUm93OiAxOSwNCiAgICAgICAgY29sb3I6ICIjN2U3YWI5IiwNCiAgICAgICAgcHJpY2U6IDUwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICAxMTogew0KICAgICAgICBuYW1lOiAiQXN0cm9mdWRnZSIsDQogICAgICAgIHVubG9jazogNDAwLA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDUwMCwNCiAgICAgICAgaWNvblJvdzogMjgsDQogICAgICAgIGNvbG9yOiAiIzlhMzMxNiIsDQogICAgICAgIHByaWNlOiA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgfSwNCiAgICAgIDEyOiB7DQogICAgICAgIG5hbWU6ICJBbGFiYXNjcmVhbSIsDQogICAgICAgIHVubG9jazogNDUwLA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDU1MCwNCiAgICAgICAgaWNvblJvdzogMzAsDQogICAgICAgIGNvbG9yOiAiI2MxYTg4YyIsDQogICAgICAgIHByaWNlOiA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICAxMzogew0KICAgICAgICBuYW1lOiAiSXJpZHl1bSIsDQogICAgICAgIHVubG9jazogNTAwLA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDYwMCwNCiAgICAgICAgaWNvblJvdzogMzEsDQogICAgICAgIGNvbG9yOiAiI2FkYjFiMyIsDQogICAgICAgIHByaWNlOiA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICB9LA0KICAgICAgMTQ6IHsNCiAgICAgICAgbmFtZTogIkdsdWNvc21pdW0iLA0KICAgICAgICB1bmxvY2s6IDU1MCwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiA2NTAsDQogICAgICAgIGljb25Sb3c6IDM0LA0KICAgICAgICBjb2xvcjogIiNmZjg5ZTciLA0KICAgICAgICBwcmljZTogNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICBzeW5lcmd5MTogew0KICAgICAgICBuYW1lOiAiU3luZXJneSBJIiwNCiAgICAgICAgdW5sb2NrOiAxNSwNCiAgICAgICAgaWNvblJvdzogMjAsDQogICAgICAgIGNvbG9yOiAiIzAwODU5NSIsDQogICAgICAgIHNwZWNpYWw6IDEsDQogICAgICAgIHJlcTogIlN5bmVyZ2llcyBWb2wuIEkiLA0KICAgICAgICBwcmljZTogMjAwMDAwLA0KICAgICAgfSwNCiAgICAgIHN5bmVyZ3kyOiB7DQogICAgICAgIG5hbWU6ICJTeW5lcmd5IElJIiwNCiAgICAgICAgdW5sb2NrOiA3NSwNCiAgICAgICAgaWNvblJvdzogMjksDQogICAgICAgIGNvbG9yOiAiIzAwODU5NSIsDQogICAgICAgIHNwZWNpYWw6IDEsDQogICAgICAgIHJlcTogIlN5bmVyZ2llcyBWb2wuIElJIiwNCiAgICAgICAgcHJpY2U6IDIwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICBmb3J0dW5lOiB7DQogICAgICAgIG5hbWU6ICJGb3J0dW5lIiwNCiAgICAgICAgdW5sb2NrOiAtMSwNCiAgICAgICAgaWNvblJvdzogMzIsDQogICAgICAgIGNvbG9yOiAiIzlhYjgzNCIsDQogICAgICAgIHNwZWNpYWw6IDEsDQogICAgICAgIHByaWNlOiA3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3NywNCiAgICAgIH0sDQogICAgfTsNCiAgICBmb3IgKHZhciBpIGluIEdhbWUuVGllcnMpIHsNCiAgICAgIEdhbWUuVGllcnNbaV0udXBncmFkZXMgPSBbXTsNCiAgICB9DQogICAgR2FtZS5HZXRJY29uID0gZnVuY3Rpb24gKHR5cGUsIHRpZXIpIHsNCiAgICAgIHZhciBjb2wgPSAwOw0KICAgICAgaWYgKHR5cGUgPT0gIktpdHRlbiIpIGNvbCA9IDE4Ow0KICAgICAgZWxzZSBjb2wgPSBHYW1lLk9iamVjdHNbdHlwZV0uaWNvbkNvbHVtbjsNCiAgICAgIHJldHVybiBbY29sLCBHYW1lLlRpZXJzW3RpZXJdLmljb25Sb3ddOw0KICAgIH07DQogICAgR2FtZS5TZXRUaWVyID0gZnVuY3Rpb24gKGJ1aWxkaW5nLCB0aWVyKSB7DQogICAgICBpZiAoIUdhbWUuT2JqZWN0c1tidWlsZGluZ10pDQogICAgICAgIGNvbnNvbGUubG9nKCJXYXJuaW5nOiBObyBidWlsZGluZyBuYW1lZCIsIGJ1aWxkaW5nKTsNCiAgICAgIEdhbWUubGFzdC50aWVyID0gdGllcjsNCiAgICAgIEdhbWUubGFzdC5idWlsZGluZ1RpZSA9IEdhbWUuT2JqZWN0c1tidWlsZGluZ107DQogICAgICBpZiAoR2FtZS5sYXN0LnR5cGUgPT0gImFjaGlldmVtZW50IikNCiAgICAgICAgR2FtZS5PYmplY3RzW2J1aWxkaW5nXS50aWVyZWRBY2hpZXZzW3RpZXJdID0gR2FtZS5sYXN0Ow0KICAgICAgZWxzZSBHYW1lLk9iamVjdHNbYnVpbGRpbmddLnRpZXJlZFVwZ3JhZGVzW3RpZXJdID0gR2FtZS5sYXN0Ow0KICAgIH07DQogICAgR2FtZS5NYWtlVGllcmVkID0gZnVuY3Rpb24gKHVwZ3JhZGUsIHRpZXIsIGNvbCkgew0KICAgICAgdXBncmFkZS50aWVyID0gdGllcjsNCiAgICAgIGlmICh0eXBlb2YgY29sICE9PSAidW5kZWZpbmVkIikNCiAgICAgICAgdXBncmFkZS5pY29uID0gW2NvbCwgR2FtZS5UaWVyc1t0aWVyXS5pY29uUm93XTsNCiAgICB9Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSA9IGZ1bmN0aW9uIChuYW1lLCBkZXNjLCBidWlsZGluZywgdGllcikgew0KICAgICAgaWYgKHRpZXIgPT0gImZvcnR1bmUiICYmIGJ1aWxkaW5nKQ0KICAgICAgICBkZXNjID0NCiAgICAgICAgICBsb2MoIiUxIGFyZSA8Yj4lMiU8L2I+IG1vcmUgZWZmaWNpZW50IGFuZCA8Yj4lMyU8L2I+IGNoZWFwZXIuIiwgWw0KICAgICAgICAgICAgY2FwKEdhbWUuT2JqZWN0c1tidWlsZGluZ10ucGx1cmFsKSwNCiAgICAgICAgICAgIDcsDQogICAgICAgICAgICA3LA0KICAgICAgICAgIF0pICsgZGVzYzsNCiAgICAgIGVsc2UNCiAgICAgICAgZGVzYyA9DQogICAgICAgICAgbG9jKA0KICAgICAgICAgICAgIiUxIGFyZSA8Yj50d2ljZTwvYj4gYXMgZWZmaWNpZW50LiIsDQogICAgICAgICAgICBjYXAoR2FtZS5PYmplY3RzW2J1aWxkaW5nXS5wbHVyYWwpDQogICAgICAgICAgKSArIGRlc2M7DQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgIG5hbWUsDQogICAgICAgIGRlc2MsDQogICAgICAgIEdhbWUuT2JqZWN0c1tidWlsZGluZ10uYmFzZVByaWNlICogR2FtZS5UaWVyc1t0aWVyXS5wcmljZSwNCiAgICAgICAgR2FtZS5HZXRJY29uKGJ1aWxkaW5nLCB0aWVyKQ0KICAgICAgKTsNCiAgICAgIGlmICh0aWVyICE9ICJmb3J0dW5lIikgew0KICAgICAgICB1cGdyYWRlLmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiAoDQogICAgICAgICAgICAoR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEgJiYNCiAgICAgICAgICAgIEdhbWUuSGFzKHRoaXMuYnVpbGRpbmdUaWUxLnVuc2hhY2tsZVVwZ3JhZGUpICYmDQogICAgICAgICAgICBHYW1lLkhhcyhHYW1lLlRpZXJzW3RoaXMudGllcl0udW5zaGFja2xlVXBncmFkZSkNCiAgICAgICAgICAgICAgPyAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiVW5zaGFja2xlZCEgPGI+KyUxJTwvYj4gZXh0cmEgcHJvZHVjdGlvbi4iLA0KICAgICAgICAgICAgICAgICAgTWF0aC5yb3VuZCgNCiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYnVpbGRpbmdUaWUuaWQgPT0gMQ0KICAgICAgICAgICAgICAgICAgICAgID8gMC41DQogICAgICAgICAgICAgICAgICAgICAgOiAoMjAgLSB0aGlzLmJ1aWxkaW5nVGllLmlkKSAqIDAuMSkgKiAxMDANCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAnPC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+Jw0KICAgICAgICAgICAgICA6ICIiKSArIHRoaXMuZGRlc2MNCiAgICAgICAgICApOw0KICAgICAgICB9Ow0KICAgICAgfQ0KDQogICAgICBHYW1lLlNldFRpZXIoYnVpbGRpbmcsIHRpZXIpOw0KICAgICAgaWYgKCF1cGdyYWRlLmJ1aWxkaW5nVGllMSAmJiBidWlsZGluZykNCiAgICAgICAgdXBncmFkZS5idWlsZGluZ1RpZTEgPSBHYW1lLk9iamVjdHNbYnVpbGRpbmddOw0KICAgICAgaWYgKHRpZXIgPT0gImZvcnR1bmUiICYmIGJ1aWxkaW5nKQ0KICAgICAgICBHYW1lLk9iamVjdHNbYnVpbGRpbmddLmZvcnR1bmUgPSB1cGdyYWRlOw0KICAgICAgcmV0dXJuIHVwZ3JhZGU7DQogICAgfTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlID0gZnVuY3Rpb24gKG5hbWUsIGRlc2MsIGJ1aWxkaW5nMSwgYnVpbGRpbmcyLCB0aWVyKSB7DQogICAgICAvKg0KCQkJCWNyZWF0ZXMgYSBuZXcgdXBncmFkZSB0aGF0IDoNCgkJCQktdW5sb2NrcyB3aGVuIHlvdSBoYXZlIHRpZXIudW5sb2NrIG9mIGJ1aWxkaW5nMSBhbmQgYnVpbGRpbmcyDQoJCQkJLWlzIHByaWNlZCBhdCAoYnVpbGRpbmcxLnByaWNlKjEwK2J1aWxkaW5nMi5wcmljZSoxKSp0aWVyLnByaWNlIChmb3JtZXJseSA6IE1hdGguc3FydChidWlsZGluZzEucHJpY2UqYnVpbGRpbmcyLnByaWNlKSp0aWVyLnByaWNlKQ0KCQkJCS1naXZlcyArKDAuMSpidWlsZGluZzEpJSBjcHMgdG8gYnVpbGRpbmcyIGFuZCArKDUqYnVpbGRpbmcyKSUgY3BzIHRvIGJ1aWxkaW5nMQ0KCQkJCS1pZiBidWlsZGluZzIgaXMgYmVsb3cgYnVpbGRpbmcxIGluIHdvcnRoLCBzd2FwIHRoZW0NCgkJCSovDQogICAgICAvL2lmIChHYW1lLk9iamVjdHNbYnVpbGRpbmcxXS5iYXNlUHJpY2U+R2FtZS5PYmplY3RzW2J1aWxkaW5nMl0uYmFzZVByaWNlKSB7dmFyIHRlbXA9YnVpbGRpbmcyO2J1aWxkaW5nMj1idWlsZGluZzE7YnVpbGRpbmcxPXRlbXA7fQ0KICAgICAgdmFyIGIxID0gR2FtZS5PYmplY3RzW2J1aWxkaW5nMV07DQogICAgICB2YXIgYjIgPSBHYW1lLk9iamVjdHNbYnVpbGRpbmcyXTsNCiAgICAgIGlmIChiMS5iYXNlUHJpY2UgPiBiMi5iYXNlUHJpY2UpIHsNCiAgICAgICAgYjEgPSBHYW1lLk9iamVjdHNbYnVpbGRpbmcyXTsNCiAgICAgICAgYjIgPSBHYW1lLk9iamVjdHNbYnVpbGRpbmcxXTsNCiAgICAgIH0gLy9zd2FwDQoNCiAgICAgIGRlc2MgPQ0KICAgICAgICBsb2MoIiUxIGdhaW4gPGI+KyUyJTwvYj4gQ3BTIHBlciAlMy4iLCBbY2FwKGIxLnBsdXJhbCksIDUsIGIyLnNpbmdsZV0pICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCIlMSBnYWluIDxiPislMiU8L2I+IENwUyBwZXIgJTMuIiwgWw0KICAgICAgICAgIGNhcChiMi5wbHVyYWwpLA0KICAgICAgICAgIDAuMSwNCiAgICAgICAgICBiMS5zaW5nbGUsDQogICAgICAgIF0pICsNCiAgICAgICAgKEVOID8gZGVzYyA6ICIiKTsNCiAgICAgIHZhciB1cGdyYWRlID0gbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICAgbmFtZSwNCiAgICAgICAgZGVzYywNCiAgICAgICAgKGIxLmJhc2VQcmljZSAqIDEwICsgYjIuYmFzZVByaWNlICogMSkgKiBHYW1lLlRpZXJzW3RpZXJdLnByaWNlLA0KICAgICAgICBHYW1lLkdldEljb24oYnVpbGRpbmcxLCB0aWVyKQ0KICAgICAgKTsgLy9NYXRoLnNxcnQoYjEuYmFzZVByaWNlKmIyLmJhc2VQcmljZSkqR2FtZS5UaWVyc1t0aWVyXS5wcmljZQ0KICAgICAgdXBncmFkZS50aWVyID0gdGllcjsNCiAgICAgIHVwZ3JhZGUuYnVpbGRpbmdUaWUxID0gYjE7DQogICAgICB1cGdyYWRlLmJ1aWxkaW5nVGllMiA9IGIyOw0KICAgICAgdXBncmFkZS5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgKHRoaXMuYnVpbGRpbmdUaWUxLmJhc2VQcmljZSAqIDEwICsgdGhpcy5idWlsZGluZ1RpZTIuYmFzZVByaWNlICogMSkgKg0KICAgICAgICAgIEdhbWUuVGllcnNbdGhpcy50aWVyXS5wcmljZSAqDQogICAgICAgICAgKEdhbWUuSGFzKCJDaGltZXJhIikgPyAwLjk4IDogMSkNCiAgICAgICAgKTsNCiAgICAgIH07DQogICAgICBHYW1lLk9iamVjdHNbYnVpbGRpbmcxXS5zeW5lcmdpZXMucHVzaCh1cGdyYWRlKTsNCiAgICAgIEdhbWUuT2JqZWN0c1tidWlsZGluZzJdLnN5bmVyZ2llcy5wdXNoKHVwZ3JhZGUpOw0KICAgICAgLy9HYW1lLlNldFRpZXIoYnVpbGRpbmcxLHRpZXIpOw0KICAgICAgcmV0dXJuIHVwZ3JhZGU7DQogICAgfTsNCiAgICBHYW1lLkdldFRpZXJlZENwc011bHQgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgIGZvciAodmFyIGkgaW4gbWUudGllcmVkVXBncmFkZXMpIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgICFHYW1lLlRpZXJzW21lLnRpZXJlZFVwZ3JhZGVzW2ldLnRpZXJdLnNwZWNpYWwgJiYNCiAgICAgICAgICBHYW1lLkhhcyhtZS50aWVyZWRVcGdyYWRlc1tpXS5uYW1lKQ0KICAgICAgICApIHsNCiAgICAgICAgICB2YXIgdGllck11bHQgPSAyOw0KICAgICAgICAgIC8vdW5zaGFja2xlZA0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZSAhPSAxICYmDQogICAgICAgICAgICBHYW1lLkhhcyhtZS51bnNoYWNrbGVVcGdyYWRlKSAmJg0KICAgICAgICAgICAgR2FtZS5IYXMoR2FtZS5UaWVyc1ttZS50aWVyZWRVcGdyYWRlc1tpXS50aWVyXS51bnNoYWNrbGVVcGdyYWRlKQ0KICAgICAgICAgICkNCiAgICAgICAgICAgIHRpZXJNdWx0ICs9IG1lLmlkID09IDEgPyAwLjUgOiAoMjAgLSBtZS5pZCkgKiAwLjE7DQogICAgICAgICAgbXVsdCAqPSB0aWVyTXVsdDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgZm9yICh2YXIgaSBpbiBtZS5zeW5lcmdpZXMpIHsNCiAgICAgICAgdmFyIHN5biA9IG1lLnN5bmVyZ2llc1tpXTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKHN5bi5uYW1lKSkgew0KICAgICAgICAgIGlmIChzeW4uYnVpbGRpbmdUaWUxLm5hbWUgPT0gbWUubmFtZSkNCiAgICAgICAgICAgIG11bHQgKj0gMSArIDAuMDUgKiBzeW4uYnVpbGRpbmdUaWUyLmFtb3VudDsNCiAgICAgICAgICBlbHNlIGlmIChzeW4uYnVpbGRpbmdUaWUyLm5hbWUgPT0gbWUubmFtZSkNCiAgICAgICAgICAgIG11bHQgKj0gMSArIDAuMDAxICogc3luLmJ1aWxkaW5nVGllMS5hbW91bnQ7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChtZS5mb3J0dW5lICYmIEdhbWUuSGFzKG1lLmZvcnR1bmUubmFtZSkpIG11bHQgKj0gMS4wNzsNCiAgICAgIGlmIChtZS5ncmFuZG1hICYmIEdhbWUuSGFzKG1lLmdyYW5kbWEubmFtZSkpDQogICAgICAgIG11bHQgKj0gMSArIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCAqIDAuMDEgKiAoMSAvIChtZS5pZCAtIDEpKTsNCiAgICAgIHJldHVybiBtdWx0Ow0KICAgIH07DQogICAgR2FtZS5VbmxvY2tUaWVyZWQgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIGZvciAodmFyIGkgaW4gbWUudGllcmVkVXBncmFkZXMpIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuVGllcnNbbWUudGllcmVkVXBncmFkZXNbaV0udGllcl0udW5sb2NrICE9IC0xICYmDQogICAgICAgICAgbWUuYW1vdW50ID49IEdhbWUuVGllcnNbbWUudGllcmVkVXBncmFkZXNbaV0udGllcl0udW5sb2NrDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayhtZS50aWVyZWRVcGdyYWRlc1tpXS5uYW1lKTsNCiAgICAgIH0NCiAgICAgIGZvciAodmFyIGkgaW4gbWUudGllcmVkQWNoaWV2cykgew0KICAgICAgICBpZiAobWUuYW1vdW50ID49IEdhbWUuVGllcnNbbWUudGllcmVkQWNoaWV2c1tpXS50aWVyXS5hY2hpZXZVbmxvY2spDQogICAgICAgICAgR2FtZS5XaW4obWUudGllcmVkQWNoaWV2c1tpXS5uYW1lKTsNCiAgICAgIH0NCiAgICAgIGZvciAodmFyIGkgaW4gbWUuc3luZXJnaWVzKSB7DQogICAgICAgIHZhciBzeW4gPSBtZS5zeW5lcmdpZXNbaV07DQogICAgICAgIGlmICgNCiAgICAgICAgICBHYW1lLkhhcyhHYW1lLlRpZXJzW3N5bi50aWVyXS5yZXEpICYmDQogICAgICAgICAgc3luLmJ1aWxkaW5nVGllMS5hbW91bnQgPj0gR2FtZS5UaWVyc1tzeW4udGllcl0udW5sb2NrICYmDQogICAgICAgICAgc3luLmJ1aWxkaW5nVGllMi5hbW91bnQgPj0gR2FtZS5UaWVyc1tzeW4udGllcl0udW5sb2NrDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayhzeW4ubmFtZSk7DQogICAgICB9DQogICAgfTsNCg0KICAgIHZhciBwb29sID0gIiI7DQogICAgdmFyIHBvd2VyID0gMDsNCg0KICAgIC8vZGVmaW5lIHVwZ3JhZGVzDQogICAgLy9XQVJOSU5HIDogZG8gTk9UIGFkZCBuZXcgdXBncmFkZXMgaW4gYmV0d2VlbiwgdGhpcyBicmVha3MgdGhlIHNhdmVzLiBBZGQgdGhlbSBhdCB0aGUgZW5kICENCiAgICB2YXIgb3JkZXIgPSAxMDA7IC8vdGhpcyBpcyB1c2VkIHRvIHNldCB0aGUgb3JkZXIgaW4gd2hpY2ggdGhlIGl0ZW1zIGFyZSBsaXN0ZWQNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJlaW5mb3JjZWQgaW5kZXggZmluZ2VyIiwNCiAgICAgIGxvYygiVGhlIG1vdXNlIGFuZCBjdXJzb3JzIGFyZSA8Yj50d2ljZTwvYj4gYXMgZWZmaWNpZW50LiIpICsNCiAgICAgICAgIjxxPnByb2QgcHJvZDwvcT4iLA0KICAgICAgMTAwLA0KICAgICAgWzAsIDBdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxLCAwKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkNhcnBhbCB0dW5uZWwgcHJldmVudGlvbiBjcmVhbSIsDQogICAgICBsb2MoIlRoZSBtb3VzZSBhbmQgY3Vyc29ycyBhcmUgPGI+dHdpY2U8L2I+IGFzIGVmZmljaWVudC4iKSArDQogICAgICAgICI8cT5pdC4uLiBpdCBodXJ0cyB0byBjbGljay4uLjwvcT4iLA0KICAgICAgNTAwLA0KICAgICAgWzAsIDFdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAyLCAwKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFtYmlkZXh0cm91cyIsDQogICAgICBsb2MoIlRoZSBtb3VzZSBhbmQgY3Vyc29ycyBhcmUgPGI+dHdpY2U8L2I+IGFzIGVmZmljaWVudC4iKSArDQogICAgICAgICI8cT5Mb29rIG1hLCBib3RoIGhhbmRzITwvcT4iLA0KICAgICAgMTAwMDAsDQogICAgICBbMCwgMl0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDMsIDApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVGhvdXNhbmQgZmluZ2VycyIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgbW91c2UgYW5kIGN1cnNvcnMgZ2FpbiA8Yj4rJTE8L2I+IGNvb2tpZXMgZm9yIGVhY2ggbm9uLWN1cnNvciBidWlsZGluZyBvd25lZC4iLA0KICAgICAgICAwLjENCiAgICAgICkgKyAiPHE+Y2xpY2tpdHk8L3E+IiwNCiAgICAgIDEwMDAwMCwNCiAgICAgIFswLCAxM10NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDQsIDApOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJNaWxsaW9uIGZpbmdlcnMiLA0KICAgICAgZ2V0U3RyVGhvdXNhbmRGaW5nZXJzR2Fpbig1KSArICI8cT5jbGlja2l0eWNsaWNraXR5PC9xPiIsDQogICAgICAxMDAwMDAwMCwNCiAgICAgIFswLCAxNF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDUsIDApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQmlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMTApICsgIjxxPmNsaWNraXR5Y2xpY2tpdHljbGlja2l0eTwvcT4iLA0KICAgICAgMTAwMDAwMDAwLA0KICAgICAgWzAsIDE1XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgNiwgMCk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJUcmlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsgIjxxPmNsaWNraXR5Y2xpY2tpdHljbGlja2l0eWNsaWNraXR5PC9xPiIsDQogICAgICAxMDAwMDAwMDAwLA0KICAgICAgWzAsIDE2XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgNywgMCk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9yd2FyZHMgZnJvbSBncmFuZG1hIiwNCiAgICAgICI8cT5SRTpSRTp0aG91Z2h0IHlvdSdkIGdldCBhIGtpY2sgb3V0IG9mIHRoaXMgOykpPC9xPiIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3RlZWwtcGxhdGVkIHJvbGxpbmcgcGlucyIsDQogICAgICAiPHE+SnVzdCB3aGF0IHlvdSBrbmVhZGVkLjwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKCJMdWJyaWNhdGVkIGRlbnR1cmVzIiwgIjxxPnNxdWlzaDwvcT4iLCAiR3JhbmRtYSIsIDMpOw0KDQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKCJDaGVhcCBob2VzIiwgIjxxPlJha2UgaW4gdGhlIGRvdWdoITwvcT4iLCAiRmFybSIsIDEpOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGZXJ0aWxpemVyIiwNCiAgICAgICI8cT5JdCdzIGNob2NvbGF0ZSwgSSBzd2Vhci48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDb29raWUgdHJlZXMiLA0KICAgICAgIjxxPkEgcmVsYXRpdmUgb2YgdGhlIGJyZWFkZnJ1aXQuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAzDQogICAgKTsNCg0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTdHVyZGllciBjb252ZXlvciBiZWx0cyIsDQogICAgICAiPHE+WW91J3JlIGdvaW5nIHBsYWNlcy48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDaGlsZCBsYWJvciIsDQogICAgICAiPHE+Q2hlYXBlciwgaGVhbHRoaWVyIHdvcmtmb3JjZS48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTd2VhdHNob3AiLA0KICAgICAgIjxxPlNsYWNrZXJzIHdpbGwgYmUgdGVybWluYXRlZC48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDMNCiAgICApOw0KDQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlN1Z2FyIGdhcyIsDQogICAgICAiPHE+QSBwaW5rLCB2b2xhdGlsZSBnYXMsIGZvdW5kIGluIHRoZSBkZXB0aHMgb2Ygc29tZSBjaG9jb2xhdGUgY2F2ZXMuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoIk1lZ2FkcmlsbCIsICI8cT5Zb3UncmUgaW4gZGVlcC48L3E+IiwgIk1pbmUiLCAyKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoIlVsdHJhZHJpbGwiLCAiPHE+RmluYWxseSBjYXZlZCBpbj88L3E+IiwgIk1pbmUiLCAzKTsNCg0KICAgIG9yZGVyID0gNjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJWYW5pbGxhIG5lYnVsYWUiLA0KICAgICAgIjxxPklmIHlvdSByZW1vdmVkIHlvdXIgc3BhY2UgaGVsbWV0LCB5b3UgY291bGQgcHJvYmFibHkgc21lbGwgaXQhPGJyPihOb3RlIDogZG9uJ3QgZG8gdGhhdC4pPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIldvcm1ob2xlcyIsDQogICAgICAiPHE+QnkgdXNpbmcgdGhlc2UgYXMgc2hvcnRjdXRzLCB5b3VyIHNoaXBzIGNhbiB0cmF2ZWwgbXVjaCBmYXN0ZXIuPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZyZXF1ZW50IGZseWVyIiwNCiAgICAgICI8cT5Db21lIGJhY2sgc29vbiE8L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAzDQogICAgKTsNCg0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbnRpbW9ueSIsDQogICAgICAiPHE+QWN0dWFsbHkgd29ydGggYSBsb3Qgb2YgbW9ueS48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRXNzZW5jZSBvZiBkb3VnaCIsDQogICAgICAiPHE+RXh0cmFjdGVkIHRocm91Z2ggdGhlIDUgYW5jaWVudCBzdGVwcyBvZiBhbGNoZW1pY2FsIGJha2luZy48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVHJ1ZSBjaG9jb2xhdGUiLA0KICAgICAgIjxxPlRoZSBwdXJlc3QgZm9ybSBvZiBjYWNhby48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAzDQogICAgKTsNCg0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbmNpZW50IHRhYmxldCIsDQogICAgICAiPHE+QSBzdHJhbmdlIHNsYWIgb2YgcGVhbnV0IGJyaXR0bGUsIGhvbGRpbmcgYW4gYW5jaWVudCBjb29raWUgcmVjaXBlLiBOZWF0ITwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiSW5zYW5lIG9hdGxpbmcgd29ya2VycyIsDQogICAgICAiPHE+QVJJU0UsIE1ZIE1JTklPTlMhPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTb3VsIGJvbmQiLA0KICAgICAgIjxxPlNvIEkganVzdCBzaWduIHVwIGFuZCBnZXQgbW9yZSBjb29raWVzPyBTdXJlLCB3aGF0ZXZlciE8L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgMw0KICAgICk7DQoNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRmx1eCBjYXBhY2l0b3JzIiwNCiAgICAgICI8cT5CYWtlIHRvIHRoZSBmdXR1cmUuPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaW1lIHBhcmFkb3ggcmVzb2x2ZXIiLA0KICAgICAgIjxxPk5vIG1vcmUgZm9vbGluZyBhcm91bmQgd2l0aCB5b3VyIG93biBncmFuZG1vdGhlciE8L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlF1YW50dW0gY29udW5kcnVtIiwNCiAgICAgICI8cT5UaGVyZSBpcyBvbmx5IG9uZSBjb25zdGFudCwgYW5kIHRoYXQgaXMgdW5pdmVyc2FsIHVuY2VydGFpbnR5Ljxicj5PciBpcyBpdD88L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgMw0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGhlbHBlcnMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5tZW93IG1heSBJIGhlbHAgeW91PC9xPiIsDQogICAgICA5MDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCAxKQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMSwgMTgpOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIHdvcmtlcnMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5tZW93IG1lb3cgbWVvdyBtZW93PC9xPiIsDQogICAgICA5MDAwMDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCAyKQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMiwgMTgpOw0KDQogICAgb3JkZXIgPSAxMDAwMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBsYWluIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldlIGFsbCBnb3R0YSBzdGFydCBzb21ld2hlcmUuIiwNCiAgICAgIGljb246IFsyLCAzXSwNCiAgICAgIHBvd2VyOiAxLA0KICAgICAgcHJpY2U6IDk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlN1Z2FyIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRhc3R5LCBpZiBhIGxpdHRsZSB1bmltYWdpbmF0aXZlLiIsDQogICAgICBpY29uOiBbNywgM10sDQogICAgICBwb3dlcjogMSwNCiAgICAgIHByaWNlOiA5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiT2F0bWVhbCByYWlzaW4gY29va2llcyIsDQogICAgICBkZXNjOiAiTm8gcmFpc2luIHRvIGhhdGUgdGhlc2UuIiwNCiAgICAgIGljb246IFswLCAzXSwNCiAgICAgIHBvd2VyOiAxLA0KICAgICAgcHJpY2U6IDk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQZWFudXQgYnV0dGVyIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkdldCB5b3Vyc2VsZiBzb21lIGphbSBjb29raWVzISIsDQogICAgICBpY29uOiBbMSwgM10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNvY29udXQgY29va2llcyIsDQogICAgICBkZXNjOiAiRmxha3ksIGJ1dCBub3QgdW5yZWxpYWJsZS4gU29tZSBwZW9wbGUgZ28gY3JhenkgZm9yIHRoZXNlLiIsDQogICAgICBpY29uOiBbMywgM10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBvcmRlciA9IDEwMDAxOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiV2hpdGUgY2hvY29sYXRlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkkga25vdyB3aGF0IHlvdSdsbCBzYXkuIEl0J3MganVzdCBjb2NvYSBidXR0ZXIhIEl0J3Mgbm90IHJlYWwgY2hvY29sYXRlITxicj5PaCBwbGVhc2UuIiwNCiAgICAgIGljb246IFs0LCAzXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBvcmRlciA9IDEwMDAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWFjYWRhbWlhIG51dCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGV5J3JlIG1hY2FkYW1uIGRlbGljaW91cyEiLA0KICAgICAgaWNvbjogWzUsIDNdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTksDQogICAgfSk7DQogICAgb3JkZXIgPSAxMDAwMjsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkRvdWJsZS1jaGlwIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkRPVUJMRSBUSEUgQ0hJUFM8YnI+RE9VQkxFIFRIRSBUQVNUWTxicj4oZG91YmxlIHRoZSBjYWxvcmllcykiLA0KICAgICAgaWNvbjogWzYsIDNdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldoaXRlIGNob2NvbGF0ZSBtYWNhZGFtaWEgbnV0IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIk9ydGVpbCdzIGZhdm9yaXRlLiIsDQogICAgICBpY29uOiBbOCwgM10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQWxsLWNob2NvbGF0ZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJDSE9DT1ZFUkRPU0UuIiwNCiAgICAgIGljb246IFs5LCAzXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJRdWFkcmlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsNCiAgICAgICAgIjxxPmNsaWNraXR5Y2xpY2tpdHljbGlja2l0eWNsaWNraXR5Y2xpY2s8L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwLA0KICAgICAgWzAsIDE3XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgOCwgMCk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoIlBydW5lIGp1aWNlIiwgIjxxPkdldHMgbWUgZ29pbmcuPC9xPiIsICJHcmFuZG1hIiwgNCk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdlbmV0aWNhbGx5LW1vZGlmaWVkIGNvb2tpZXMiLA0KICAgICAgIjxxPkFsbC1uYXR1cmFsIG11dGF0aW9ucy48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDQNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSYWRpdW0gcmVhY3RvcnMiLA0KICAgICAgIjxxPkdpdmVzIHlvdXIgY29va2llcyBhIGhlYWx0aHkgZ2xvdy48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDQNCiAgICApOw0KICAgIG9yZGVyID0gNDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJVbHRpbWFkcmlsbCIsDQogICAgICAiPHE+UGllcmNlIHRoZSBoZWF2ZW5zLCBldGMuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICA0DQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoIldhcnAgZHJpdmUiLCAiPHE+VG8gYm9sZGx5IGJha2UuPC9xPiIsICJTaGlwbWVudCIsIDQpOw0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbWJyb3NpYSIsDQogICAgICAiPHE+QWRkaW5nIHRoaXMgdG8gdGhlIGNvb2tpZSBtaXggaXMgc3VyZSB0byBtYWtlIHRoZW0gZXZlbiBtb3JlIGFkZGljdGl2ZSE8YnI+UGVyaGFwcyBkYW5nZXJvdXNseSBzby48YnI+TGV0J3MgaG9wZSB5b3UgY2FuIGtlZXAgc2VsbGluZyB0aGVzZSBsZWdhbGx5LjwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDQNCiAgICApOw0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTYW5pdHkgZGFuY2UiLA0KICAgICAgIjxxPldlIGNhbiBjaGFuZ2UgaWYgd2Ugd2FudCB0by48YnI+V2UgY2FuIGxlYXZlIG91ciBicmFpbnMgYmVoaW5kLjwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICA0DQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ2F1c2FsaXR5IGVuZm9yY2VyIiwNCiAgICAgICI8cT5XaGF0IGhhcHBlbmVkLCBoYXBwZW5lZC48L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgNA0KICAgICk7DQoNCiAgICBvcmRlciA9IDUwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNreSBkYXkiLA0KICAgICAgbG9jKA0KICAgICAgICAiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPnR3aWNlIGFzIG9mdGVuPC9iPiBhbmQgc3RheSA8Yj50d2ljZSBhcyBsb25nPC9iPi4iDQogICAgICApICsgIjxxPk9oIGhleSwgYSBmb3VyLWxlYWYgcGVubnkhPC9xPiIsDQogICAgICA3Nzc3Nzc3NzcsDQogICAgICBbMjcsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNlcmVuZGlwaXR5IiwNCiAgICAgIGxvYygNCiAgICAgICAgIkdvbGRlbiBjb29raWVzIGFwcGVhciA8Yj50d2ljZSBhcyBvZnRlbjwvYj4gYW5kIHN0YXkgPGI+dHdpY2UgYXMgbG9uZzwvYj4uIg0KICAgICAgKSArICI8cT5XaGF0IGpveSEgU2V2ZW4gaG9yc2VzaG9lcyE8L3E+IiwNCiAgICAgIDc3Nzc3Nzc3Nzc3LA0KICAgICAgWzI3LCA2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGVuZ2luZWVycyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPm1lb3cgbWVvdyBtZW93IG1lb3csIHNpcjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMDAwMDAsDQogICAgICBHYW1lLkdldEljb24oIktpdHRlbiIsIDMpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAzLCAxOCk7DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRGFyayBjaG9jb2xhdGUtY29hdGVkIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIGFic29yYiBsaWdodCBzbyB3ZWxsIHlvdSBhbG1vc3QgbmVlZCB0byBzcXVpbnQgdG8gc2VlIHRoZW0uIiwNCiAgICAgIGljb246IFsxMCwgM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldoaXRlIGNob2NvbGF0ZS1jb2F0ZWQgY29va2llcyIsDQogICAgICBkZXNjOiAiVGhlc2UgZGF6emxpbmcgY29va2llcyBhYnNvbHV0ZWx5IGdsaXN0ZW4gd2l0aCBmbGF2b3IuIiwNCiAgICAgIGljb246IFsxMSwgM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIEdhbWUuR3JhbmRtYVN5bmVyZ2llcyA9IFtdOw0KICAgIEdhbWUuR3JhbmRtYVN5bmVyZ3kgPSBmdW5jdGlvbiAobmFtZSwgZGVzYywgYnVpbGRpbmcpIHsNCiAgICAgIHZhciBidWlsZGluZyA9IEdhbWUuT2JqZWN0c1tidWlsZGluZ107DQogICAgICB2YXIgZ3JhbmRtYU51bWJlciA9IGxvYygiJTEgZ3JhbmRtYSIsIExCZWF1dGlmeShidWlsZGluZy5pZCAtIDEpKTsNCiAgICAgIGRlc2MgPQ0KICAgICAgICBsb2MoDQogICAgICAgICAgIiUxIGFyZSA8Yj50d2ljZTwvYj4gYXMgZWZmaWNpZW50LiIsDQogICAgICAgICAgY2FwKEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnBsdXJhbCkNCiAgICAgICAgKSArDQogICAgICAgICIgIiArDQogICAgICAgIGxvYygiJTEgZ2FpbiA8Yj4rJTIlPC9iPiBDcFMgcGVyICUzLiIsIFsNCiAgICAgICAgICBjYXAoYnVpbGRpbmcucGx1cmFsKSwNCiAgICAgICAgICAxLA0KICAgICAgICAgIGdyYW5kbWFOdW1iZXIsDQogICAgICAgIF0pICsNCiAgICAgICAgIjxxPiIgKw0KICAgICAgICBkZXNjICsNCiAgICAgICAgIjwvcT4iOw0KDQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgIG5hbWUsDQogICAgICAgIGRlc2MsDQogICAgICAgIGJ1aWxkaW5nLmJhc2VQcmljZSAqIEdhbWUuVGllcnNbMl0ucHJpY2UsDQogICAgICAgIFsxMCwgOV0sDQogICAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5yZWRyYXcoKTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICAgIGJ1aWxkaW5nLmdyYW5kbWEgPSB1cGdyYWRlOw0KICAgICAgdXBncmFkZS5idWlsZGluZ1RpZSA9IGJ1aWxkaW5nOw0KICAgICAgR2FtZS5HcmFuZG1hU3luZXJnaWVzLnB1c2godXBncmFkZS5uYW1lKTsNCiAgICAgIHJldHVybiB1cGdyYWRlOw0KICAgIH07DQoNCiAgICBvcmRlciA9IDI1MDsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIkZhcm1lciBncmFuZG1hcyIsDQogICAgICAiQSBuaWNlIGZhcm1lciB0byBncm93IG1vcmUgY29va2llcy4iLA0KICAgICAgIkZhcm0iDQogICAgKTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIk1pbmVyIGdyYW5kbWFzIiwNCiAgICAgICJBIG5pY2UgbWluZXIgdG8gZGlnIG1vcmUgY29va2llcy4iLA0KICAgICAgIk1pbmUiDQogICAgKTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIldvcmtlciBncmFuZG1hcyIsDQogICAgICAiQSBuaWNlIHdvcmtlciB0byBtYW51ZmFjdHVyZSBtb3JlIGNvb2tpZXMuIiwNCiAgICAgICJGYWN0b3J5Ig0KICAgICk7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJDb3NtaWMgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSB0aGluZyB0by4uLiB1aC4uLiBjb29raWVzLiIsDQogICAgICAiU2hpcG1lbnQiDQogICAgKTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIlRyYW5zbXV0ZWQgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSBnb2xkZW4gZ3JhbmRtYSB0byBjb252ZXJ0IGludG8gbW9yZSBjb29raWVzLiIsDQogICAgICAiQWxjaGVteSBsYWIiDQogICAgKTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIkFsdGVyZWQgZ3JhbmRtYXMiLA0KICAgICAgImEgTmlDZSBHckFuRG1BIHRPIGJBIyMjIyMjIyMjIyIsDQogICAgICAiUG9ydGFsIg0KICAgICk7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJHcmFuZG1hcycgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSBncmFuZG1hJ3MgbmljZSBncmFuZG1hIHRvIGJha2UgZG91YmxlIHRoZSBjb29raWVzLiIsDQogICAgICAiVGltZSBtYWNoaW5lIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDE0MDAwOw0KICAgIEdhbWUuYmFzZVJlc2VhcmNoVGltZSA9IEdhbWUuZnBzICogNjAgKiAzMDsNCiAgICBHYW1lLlNldFJlc2VhcmNoID0gZnVuY3Rpb24gKHdoYXQsIHRpbWUpIHsNCiAgICAgIGlmIChHYW1lLlVwZ3JhZGVzW3doYXRdICYmICFHYW1lLkhhcyh3aGF0KSkgew0KICAgICAgICBHYW1lLnJlc2VhcmNoVCA9IEdhbWUuYmFzZVJlc2VhcmNoVGltZTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJQZXJzaXN0ZW50IG1lbW9yeSIpKQ0KICAgICAgICAgIEdhbWUucmVzZWFyY2hUID0gTWF0aC5jZWlsKEdhbWUuYmFzZVJlc2VhcmNoVGltZSAvIDEwKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJVbHRyYXNjaWVuY2UiKSkgR2FtZS5yZXNlYXJjaFQgPSBHYW1lLmZwcyAqIDU7DQogICAgICAgIEdhbWUubmV4dFJlc2VhcmNoID0gR2FtZS5VcGdyYWRlc1t3aGF0XS5pZDsNCiAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgbG9jKCJSZXNlYXJjaCBoYXMgYmVndW4iKSwNCiAgICAgICAgICBsb2MoIllvdXIgYmluZ28gY2VudGVyL3Jlc2VhcmNoIGZhY2lsaXR5IGlzIGNvbmR1Y3RpbmcgZXhwZXJpbWVudHMuIiksDQogICAgICAgICAgWzksIDBdDQogICAgICAgICk7DQogICAgICB9DQogICAgfTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQmluZ28gY2VudGVyL1Jlc2VhcmNoIGZhY2lsaXR5IiwNCiAgICAgIGxvYygNCiAgICAgICAgIkdyYW5kbWEtb3BlcmF0ZWQgc2NpZW5jZSBsYWIgYW5kIGxlaXN1cmUgY2x1Yi48YnI+R3JhbmRtYXMgYXJlIDxiPjQgdGltZXM8L2I+IGFzIGVmZmljaWVudC48YnI+PGI+UmVndWxhcmx5IHVubG9ja3MgbmV3IHVwZ3JhZGVzPC9iPi4iDQogICAgICApICsNCiAgICAgICAgIjxxPldoYXQgY291bGQgcG9zc2libHkga2VlcCB0aG9zZSBncmFuZG1vdGhlcnMgaW4gY2hlY2s/Li4uPGJyPkJpbmdvLjwvcT4iLA0KICAgICAgMTAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFsxMSwgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuU2V0UmVzZWFyY2goIlNwZWNpYWxpemVkIGNob2NvbGF0ZSBjaGlwcyIpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0Lm5vUGVybSA9IDE7DQoNCiAgICBvcmRlciA9IDE1MDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU3BlY2lhbGl6ZWQgY2hvY29sYXRlIGNoaXBzIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygxKSArDQogICAgICAgICI8cT5Db21wdXRlci1kZXNpZ25lZCBjaG9jb2xhdGUgY2hpcHMuIENvbXB1dGVyIGNoaXBzLCBpZiB5b3Ugd2lsbC48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMCwgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuU2V0UmVzZWFyY2goIkRlc2lnbmVyIGNvY29hIGJlYW5zIik7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRlc2lnbmVyIGNvY29hIGJlYW5zIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygyKSArDQogICAgICAgICI8cT5Ob3cgbW9yZSBhZXJvZHluYW1pYyB0aGFuIGV2ZXIhPC9xPiIsDQogICAgICAyMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzEsIDldLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlNldFJlc2VhcmNoKCJSaXR1YWwgcm9sbGluZyBwaW5zIik7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJpdHVhbCByb2xsaW5nIHBpbnMiLA0KICAgICAgbG9jKA0KICAgICAgICAiJTEgYXJlIDxiPnR3aWNlPC9iPiBhcyBlZmZpY2llbnQuIiwNCiAgICAgICAgY2FwKEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnBsdXJhbCkNCiAgICAgICkgKyAiPHE+VGhlIHJlc3VsdCBvZiB5ZWFycyBvZiBzY2llbnRpZmljIHJlc2VhcmNoITwvcT4iLA0KICAgICAgNDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFsyLCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5TZXRSZXNlYXJjaCgiVW5kZXJ3b3JsZCBvdmVucyIpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidGVjaCI7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJVbmRlcndvcmxkIG92ZW5zIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygzKSArDQogICAgICAgICI8cT5Qb3dlcmVkIGJ5IHNjaWVuY2UsIG9mIGNvdXJzZSE8L3E+IiwNCiAgICAgIDgwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMywgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuU2V0UmVzZWFyY2goIk9uZSBtaW5kIik7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIk9uZSBtaW5kIiwNCiAgICAgIGxvYygiRWFjaCAlMSBnYWlucyA8Yj4rJTIgYmFzZSBDcFMgcGVyICUzPC9iPi4iLCBbDQogICAgICAgIGxvYygiZ3JhbmRtYSIpLA0KICAgICAgICAiMC4wPHNwYW4+PC9zcGFuPjIiLA0KICAgICAgICBsb2MoImdyYW5kbWEiKSwNCiAgICAgIF0pICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Indhcm5pbmciPicgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIk5vdGU6IHRoZSBncmFuZG1vdGhlcnMgYXJlIGdyb3dpbmcgcmVzdGxlc3MuIERvIG5vdCBlbmNvdXJhZ2UgdGhlbS4iDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+PHE+V2UgYXJlIG9uZS4gV2UgYXJlIG1hbnkuPC9xPiIsDQogICAgICAxNjAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFs0LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5lbGRlcldyYXRoID0gMTsNCiAgICAgICAgR2FtZS5TZXRSZXNlYXJjaCgiRXhvdGljIG51dHMiKTsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICAvL0dhbWUubGFzdC5jbGlja0Z1bmN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGNvbmZpcm0oJ1dhcm5pbmcgOiBwdXJjaGFzaW5nIHRoaXMgd2lsbCBoYXZlIHVuZXhwZWN0ZWQsIGFuZCBwb3RlbnRpYWxseSB1bmRlc2lyYWJsZSByZXN1bHRzIVxuSXRcJ3MgYWxsIGRvd25oaWxsIGZyb20gaGVyZS4gWW91IGhhdmUgYmVlbiB3YXJuZWQhXG5QdXJjaGFzZSBhbnl3YXk/Jyk7fTsNCiAgICBHYW1lLlJlcXVpcmVzQ29uZmlybWF0aW9uKA0KICAgICAgR2FtZS5sYXN0LA0KICAgICAgJzxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICI8Yj5XYXJuaW5nOjwvYj4gcHVyY2hhc2luZyB0aGlzIHdpbGwgaGF2ZSB1bmV4cGVjdGVkLCBhbmQgcG90ZW50aWFsbHkgdW5kZXNpcmFibGUgcmVzdWx0cyE8YnI+PHNtYWxsPkl0J3MgYWxsIGRvd25oaWxsIGZyb20gaGVyZS4gWW91IGhhdmUgYmVlbiB3YXJuZWQhPC9zbWFsbD48YnI+PGJyPlB1cmNoYXNlIGFueXdheT8iDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJFeG90aWMgbnV0cyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoNCkgKw0KICAgICAgICAiPHE+WW91J2xsIGdvIGNyYXp5IG92ZXIgdGhlc2UhPC9xPiIsDQogICAgICAzMjAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFs1LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5TZXRSZXNlYXJjaCgiQ29tbXVuYWwgYnJhaW5zd2VlcCIpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidGVjaCI7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDb21tdW5hbCBicmFpbnN3ZWVwIiwNCiAgICAgIChFTg0KICAgICAgICA/ICJFYWNoIGdyYW5kbWEgZ2FpbnMgYW5vdGhlciA8Yj4rMC4wPHNwYW4+PC9zcGFuPjIgYmFzZSBDcFMgcGVyIGdyYW5kbWE8L2I+LiINCiAgICAgICAgOiBsb2MoIkVhY2ggJTEgZ2FpbnMgPGI+KyUyIGJhc2UgQ3BTIHBlciAlMzwvYj4uIiwgWw0KICAgICAgICAgICAgbG9jKCJncmFuZG1hIiksDQogICAgICAgICAgICAiMC4wPHNwYW4+PC9zcGFuPjIiLA0KICAgICAgICAgICAgbG9jKCJncmFuZG1hIiksDQogICAgICAgICAgXSkpICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Indhcm5pbmciPicgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIk5vdGU6IHByb2NlZWRpbmcgYW55IGZ1cnRoZXIgaW4gc2NpZW50aWZpYyByZXNlYXJjaCBtYXkgaGF2ZSB1bmV4cGVjdGVkIHJlc3VsdHMuIFlvdSBoYXZlIGJlZW4gd2FybmVkLiINCiAgICAgICAgKSArDQogICAgICAgICI8L2Rpdj48cT5XZSBmdXNlLiBXZSBtZXJnZS4gV2UgZ3Jvdy48L3E+IiwNCiAgICAgIDY0MDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzYsIDldLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLmVsZGVyV3JhdGggPSAyOw0KICAgICAgICBHYW1lLlNldFJlc2VhcmNoKCJBcmNhbmUgc3VnYXIiKTsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFyY2FuZSBzdWdhciIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoNSkgKw0KICAgICAgICAiPHE+VGFzdGVzIGxpa2UgaW5zZWN0cywgbGlnYW1lbnRzLCBhbmQgbW9sYXNzZXMuPC9xPiIsDQogICAgICAxMjgwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbNywgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuU2V0UmVzZWFyY2goIkVsZGVyIFBhY3QiKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInRlY2giOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRWxkZXIgUGFjdCIsDQogICAgICBsb2MoIkVhY2ggJTEgZ2FpbnMgPGI+KyUyIGJhc2UgQ3BTIHBlciAlMzwvYj4uIiwgWw0KICAgICAgICBsb2MoImdyYW5kbWEiKSwNCiAgICAgICAgIjAuMDxzcGFuPjwvc3Bhbj41IiwNCiAgICAgICAgbG9jKCJwb3J0YWwiKSwNCiAgICAgIF0pICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Indhcm5pbmciPicgKw0KICAgICAgICBsb2MoIk5vdGU6IHRoaXMgaXMgYSBiYWQgaWRlYS4iKSArDQogICAgICAgICI8L2Rpdj48cT5zcXVpcm0gY3Jhd2wgc2xpdGhlciB3cml0aGU8YnI+dG9kYXkgd2UgcmlzZTwvcT4iLA0KICAgICAgMjU2MDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzgsIDldLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLmVsZGVyV3JhdGggPSAzOw0KICAgICAgICBHYW1lLnN0b3JlVG9SZWZyZXNoID0gMTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInRlY2giOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRWxkZXIgUGxlZGdlIiwNCiAgICAgIGxvYygiQ29udGFpbnMgdGhlIHdyYXRoIG9mIHRoZSBlbGRlcnMsIGF0IGxlYXN0IGZvciBhIHdoaWxlLiIpICsNCiAgICAgICAgIjxxPlRoaXMgaXMgYSBzaW1wbGUgcml0dWFsIGludm9sdmluZyBhbnRpLWFnaW5nIGNyZWFtLCBjb29raWUgYmF0dGVyIG1peGVkIGluIHRoZSBtb29ubGlnaHQsIGFuZCBhIGxpdmUgY2hpY2tlbi48L3E+IiwNCiAgICAgIDEsDQogICAgICBbOSwgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuZWxkZXJXcmF0aCA9IDA7DQogICAgICAgIEdhbWUucGxlZGdlcysrOw0KICAgICAgICBHYW1lLnBsZWRnZVQgPSBHYW1lLmdldFBsZWRnZUR1cmF0aW9uKCk7DQogICAgICAgIEdhbWUuVW5sb2NrKCJFbGRlciBDb3ZlbmFudCIpOw0KICAgICAgICBHYW1lLkNvbGxlY3RXcmlua2xlcnMoKTsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmdldFBsZWRnZUR1cmF0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuZnBzICogNjAgKiAoR2FtZS5IYXMoIlNhY3JpZmljaWFsIHJvbGxpbmcgcGlucyIpID8gNjAgOiAzMCk7DQogICAgfTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KICAgIEdhbWUubGFzdC5kaXNwbGF5RnVuY1doZW5Pd25lZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBsb2MoIlRpbWUgcmVtYWluaW5nIHVudGlsIHBsZWRnZSBydW5zIG91dDoiKSArDQogICAgICAgICI8YnI+PGI+IiArDQogICAgICAgIEdhbWUuc2F5VGltZShHYW1lLnBsZWRnZVQsIC0xKSArDQogICAgICAgICI8L2I+PC9kaXY+Ig0KICAgICAgKTsNCiAgICB9Ow0KICAgIEdhbWUubGFzdC50aW1lckRpc3BsYXkgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUdhbWUuVXBncmFkZXNbIkVsZGVyIFBsZWRnZSJdLmJvdWdodCkgcmV0dXJuIC0xOw0KICAgICAgZWxzZSByZXR1cm4gMSAtIEdhbWUucGxlZGdlVCAvIEdhbWUuZ2V0UGxlZGdlRHVyYXRpb24oKTsNCiAgICB9Ow0KICAgIEdhbWUubGFzdC5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gTWF0aC5wb3coOCwgTWF0aC5taW4oR2FtZS5wbGVkZ2VzICsgMiwgMTQpKTsNCiAgICB9Ow0KDQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgIChHYW1lLnBsZWRnZXMgPT0gMA0KICAgICAgICAgID8gbG9jKCJZb3UgaGF2ZW4ndCBwbGVkZ2VkIHRvIHRoZSBlbGRlcnMgeWV0LiIpDQogICAgICAgICAgOiBsb2MoDQogICAgICAgICAgICAgICJZb3UndmUgcGxlZGdlZCB0byB0aGUgZWxkZXJzIDxiPiUxIHRpbWVzPC9iPi4iLA0KICAgICAgICAgICAgICBMQmVhdXRpZnkoR2FtZS5wbGVkZ2VzKQ0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCg0KICAgIG9yZGVyID0gMTUwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiUGxhc3RpYyBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPlNsaWdodGx5IHNxdWVha3kuPC9xPiIsDQogICAgICA1MDAwMCwNCiAgICAgIFsxMSwgMF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEsIDExKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIklyb24gbW91c2UiLA0KICAgICAgZ2V0U3RyQ2xpY2tpbmdHYWlucygxKSArICI8cT5DbGljayBsaWtlIGl0J3MgMTM0OSE8L3E+IiwNCiAgICAgIDUwMDAwMDAsDQogICAgICBbMTEsIDFdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAyLCAxMSk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJUaXRhbml1bSBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPkhlYXZ5LCBidXQgcG93ZXJmdWwuPC9xPiIsDQogICAgICA1MDAwMDAwMDAsDQogICAgICBbMTEsIDJdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAzLCAxMSk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBZGFtYW50aXVtIG1vdXNlIiwNCiAgICAgIGdldFN0ckNsaWNraW5nR2FpbnMoMSkgKyAiPHE+WW91IGNvdWxkIGN1dCBkaWFtb25kIHdpdGggdGhlc2UuPC9xPiIsDQogICAgICA1MDAwMDAwMDAwMCwNCiAgICAgIFsxMSwgMTNdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCA0LCAxMSk7DQoNCiAgICBvcmRlciA9IDQwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVWx0cmFzY2llbmNlIiwNCiAgICAgIGxvYygiUmVzZWFyY2ggdGFrZXMgb25seSA8Yj41IHNlY29uZHM8L2I+LiIpICsgIjxxPllFQUgsIFNDSUVOQ0UhPC9xPiIsDQogICAgICA3LA0KICAgICAgWzksIDJdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkVjbGlwc2UgY29va2llcyIsDQogICAgICBkZXNjOiAiTG9vayB0byB0aGUgY29va2llLiIsDQogICAgICBpY29uOiBbMCwgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJaZWJyYSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICIuLi4iLA0KICAgICAgaWNvbjogWzEsIDRdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJRdWludGlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsNCiAgICAgICAgIjxxPm1hbiwganVzdCBnbyBjbGljayBjbGljayBjbGljayBjbGljayBjbGljaywgaXQncyByZWFsIGVhc3ksIG1hbi48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwMDAwLA0KICAgICAgWzAsIDE4XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgOSwgMCk7DQoNCiAgICBvcmRlciA9IDQwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR29sZCBob2FyZCIsDQogICAgICBsb2MoIkdvbGRlbiBjb29raWVzIGFwcGVhciA8Yj5yZWFsbHkgb2Z0ZW48L2I+LiIpICsNCiAgICAgICAgIjxxPlRoYXQncyBlbnRpcmVseSB0b28gbWFueS48L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTAsIDE0XQ0KICAgICk7IC8vZGVidWcgcHVycG9zZXMgb25seQ0KICAgIEdhbWUubGFzdC5wb29sID0gImRlYnVnIjsNCg0KICAgIG9yZGVyID0gMTUwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJFbGRlciBDb3ZlbmFudCIsDQogICAgICBsb2MoDQogICAgICAgICJQdXRzIGEgcGVybWFuZW50IGVuZCB0byB0aGUgZWxkZXJzJyB3cmF0aCwgYXQgdGhlIGNvc3Qgb2YgJTElIG9mIHlvdXIgQ3BTLiIsDQogICAgICAgIDUNCiAgICAgICkgKw0KICAgICAgICAiPHE+VGhpcyBpcyBhIGNvbXBsaWNhdGVkIHJpdHVhbCBpbnZvbHZpbmcgc2lsbHksIGluY29uc2VxdWVudGlhbCB0cml2aWFsaXRpZXMgc3VjaCBhcyBjdXJzZWQgbGF4YXRpdmVzLCBjZW50dXJ5LW9sZCBjYWNhbywgYW5kIGFuIGluZmFudC48YnI+RG9uJ3QgcXVlc3Rpb24gaXQuPC9xPiIsDQogICAgICA2NjY2NjY2NjY2NjY2NiwNCiAgICAgIFs4LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5wbGVkZ2VUID0gMDsNCiAgICAgICAgR2FtZS5Mb2NrKCJSZXZva2UgRWxkZXIgQ292ZW5hbnQiKTsNCiAgICAgICAgR2FtZS5VbmxvY2soIlJldm9rZSBFbGRlciBDb3ZlbmFudCIpOw0KICAgICAgICBHYW1lLkxvY2soIkVsZGVyIFBsZWRnZSIpOw0KICAgICAgICBHYW1lLldpbigiRWxkZXIgY2FsbSIpOw0KICAgICAgICBHYW1lLkNvbGxlY3RXcmlua2xlcnMoKTsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJSZXZva2UgRWxkZXIgQ292ZW5hbnQiLA0KICAgICAgbG9jKA0KICAgICAgICAiWW91IHdpbGwgZ2V0ICUxJSBvZiB5b3VyIENwUyBiYWNrLCBidXQgdGhlIGdyYW5kbWF0cmlhcmNocyB3aWxsIHJldHVybi4iLA0KICAgICAgICA1DQogICAgICApICsgIjxxPndlPGJyPnJpc2U8YnI+YWdhaW48L3E+IiwNCiAgICAgIDY2NjY2NjY2NjYsDQogICAgICBbOCwgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuTG9jaygiRWxkZXIgQ292ZW5hbnQiKTsNCiAgICAgICAgR2FtZS5VbmxvY2soIkVsZGVyIENvdmVuYW50Iik7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR2V0IGx1Y2t5IiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZSBlZmZlY3RzIGxhc3QgPGI+dHdpY2UgYXMgbG9uZzwvYj4uIikgKw0KICAgICAgICAiPHE+WW91J3ZlIGJlZW4gdXAgYWxsIG5pZ2h0LCBoYXZlbid0IHlvdT88L3E+IiwNCiAgICAgIDc3Nzc3Nzc3Nzc3Nzc3LA0KICAgICAgWzI3LCA2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDE1MDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FjcmlmaWNpYWwgcm9sbGluZyBwaW5zIiwNCiAgICAgIGxvYygiRWxkZXIgcGxlZGdlcyBsYXN0IDxiPnR3aWNlPC9iPiBhcyBsb25nLiIpICsNCiAgICAgICAgIjxxPlRoZXNlIGFyZSBtb3N0bHkganVzdCBmb3Igc3ByZWFkaW5nIHRoZSBhbnRpLWFnaW5nIGNyZWFtLjxicj4oQW5kIGFjY2Vzc29yaWx5LCBzaG9ydGVuaW5nIHRoZSBjaGlja2VuJ3Mgc3VmZmVyaW5nLik8L3E+IiwNCiAgICAgIDI4ODg4ODg4ODg4ODgsDQogICAgICBbMiwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlNuaWNrZXJkb29kbGVzIiwNCiAgICAgIGRlc2M6ICJUcnVlIHRvIHRoZWlyIG5hbWUuIiwNCiAgICAgIGljb246IFsyLCA0XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTdHJvb3B3YWZlbHMiLA0KICAgICAgZGVzYzogIklmIGl0IGFpbid0IGR1dGNoLCBpdCBhaW4ndCBtdWNoLiIsDQogICAgICBpY29uOiBbMywgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWFjYXJvb25zIiwNCiAgICAgIGRlc2M6ICJOb3QgdG8gYmUgY29uZnVzZWQgd2l0aCBtYWNhcm9ucy48YnI+VGhlc2UgaGF2ZSBjb2NvbnV0LCBva2F5PyIsDQogICAgICBpY29uOiBbNCwgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gNDAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJOZXVyb21hbmN5IiwNCiAgICAgIGxvYygiQ2FuIHRvZ2dsZSB1cGdyYWRlcyBvbiBhbmQgb2ZmIGF0IHdpbGwgaW4gdGhlIHN0YXRzIG1lbnUuIikgKw0KICAgICAgICAiPHE+Q2FuIGFsc28gY29tZSBpbiBoYW5keSB0byB1bnNlZSB0aGluZ3MgdGhhdCBjYW4ndCBiZSB1bnNlZW4uPC9xPiIsDQogICAgICA3LA0KICAgICAgWzQsIDldDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkVtcGlyZSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiRm9yIHlvdXIgZ3Jvd2luZyBjb29raWUgZW1waXJlLCBvZiBjb3Vyc2UhIiwNCiAgICAgIGljb246IFs1LCA0XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIG9yZGVyID0gMTAwMzE7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCcml0aXNoIHRlYSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiUXVpdGUuIiwNCiAgICAgIGljb246IFs2LCA0XSwNCiAgICAgIHJlcXVpcmU6ICJUaW4gb2YgYnJpdGlzaCB0ZWEgYmlzY3VpdHMiLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDaG9jb2xhdGUgYnJpdGlzaCB0ZWEgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIlllcywgcXVpdGUuIiwNCiAgICAgIGljb246IFs3LCA0XSwNCiAgICAgIHJlcXVpcmU6IEdhbWUubGFzdC5uYW1lLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSb3VuZCBicml0aXNoIHRlYSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiWWVzLCBxdWl0ZSByaXZldGluZy4iLA0KICAgICAgaWNvbjogWzgsIDRdLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlJvdW5kIGNob2NvbGF0ZSBicml0aXNoIHRlYSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiWWVzLCBxdWl0ZSByaXZldGluZyBpbmRlZWQuIiwNCiAgICAgIGljb246IFs5LCA0XSwNCiAgICAgIHJlcXVpcmU6IEdhbWUubGFzdC5uYW1lLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSb3VuZCBicml0aXNoIHRlYSBiaXNjdWl0cyB3aXRoIGhlYXJ0IG1vdGlmIiwNCiAgICAgIGRlc2M6ICJZZXMsIHF1aXRlIHJpdmV0aW5nIGluZGVlZCwgb2xkIGNoYXAuIiwNCiAgICAgIGljb246IFsxMCwgNF0sDQogICAgICByZXF1aXJlOiBHYW1lLmxhc3QubmFtZSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUm91bmQgY2hvY29sYXRlIGJyaXRpc2ggdGVhIGJpc2N1aXRzIHdpdGggaGVhcnQgbW90aWYiLA0KICAgICAgZGVzYzogIkkgbGlrZSBjb29raWVzLiIsDQogICAgICBpY29uOiBbMTEsIDRdLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3VnYXIgYm9zb25zIiwNCiAgICAgICI8cT5Td2VldCBmaXJtIGJvc29ucy48L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3RyaW5nIHRoZW9yeSIsDQogICAgICAiPHE+UmV2ZWFscyBuZXcgaW5zaWdodCBhYm91dCB0aGUgdHJ1ZSBtZWFuaW5nIG9mIGJha2luZyBjb29raWVzIChhbmQsIGFzIGEgYm9udXMsIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIHVuaXZlcnNlKS48L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTGFyZ2UgbWFjYXJvbiBjb2xsaWRlciIsDQogICAgICAiPHE+SG93IHNpbmd1bGFyITwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJCaWcgYmFuZyBiYWtlIiwNCiAgICAgICI8cT5BbmQgdGhhdCdzIGhvdyBpdCBhbGwgYmVnYW4uPC9xPiIsDQogICAgICAiQW50aW1hdHRlciBjb25kZW5zZXIiLA0KICAgICAgNA0KICAgICk7DQoNCiAgICBvcmRlciA9IDI1NTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIkFudGlncmFuZG1hcyIsDQogICAgICAiQSBtZWFuIGFudGlncmFuZG1hIHRvIHZvbWl0IG1vcmUgY29va2llcy4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWFkZWxlaW5lcyIsDQogICAgICBkZXNjOiAiVW5mb3JnZXR0YWJsZSEiLA0KICAgICAgaWNvbjogWzEyLCAzXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBhbG1pZXJzIiwNCiAgICAgIGRlc2M6ICJQYWxtaWVyIHRoYW4geW91ISIsDQogICAgICBpY29uOiBbMTMsIDNdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGFsZXRzIiwNCiAgICAgIGRlc2M6ICJZb3UgY291bGQgcHJvYmFibHkgcGxheSBob2NrZXkgd2l0aCB0aGVzZS48YnI+SSBtZWFuLCB5b3UncmUgd2VsY29tZSB0byB0cnkuIiwNCiAgICAgIGljb246IFsxMiwgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTYWJsJmVhY3V0ZTtzIiwNCiAgICAgIGRlc2M6ICJUaGUgbmFtZSBpbXBsaWVzIHRoZXkncmUgbWFkZSBvZiBzYW5kLiBCdXQgeW91IGtub3cgYmV0dGVyLCBkb24ndCB5b3U/IiwNCiAgICAgIGljb246IFsxMywgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIG92ZXJzZWVycyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPm15IHB1cnJwb3NlIGlzIHRvIHNlcnZlIHlvdSwgc2lyPC9xPiIsDQogICAgICA5MDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgNCkNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDQsIDE4KTsNCg0KICAgIG9yZGVyID0gMTAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2V4dGlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsNCiAgICAgICAgIjxxPnNvbWV0aW1lczxicj50aGluZ3MganVzdDxicj5jbGljazwvcT4iLA0KICAgICAgMTAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMCwgMTldDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxMCwgMCk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRG91YmxlLXRoaWNrIGdsYXNzZXMiLA0KICAgICAgIjxxPk9oLi4uIHNvIFRIQVQncyB3aGF0IEkndmUgYmVlbiBiYWtpbmcuPC9xPiIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDMwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2luZ2VyYnJlYWQgc2NhcmVjcm93cyIsDQogICAgICAiPHE+U3RhcmluZyBhdCB5b3VyIGNyb3BzIHdpdGggbWlzY2hpZXZvdXMgZ2xlZS48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDUNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSZWNvbWJvYnVsYXRvcnMiLA0KICAgICAgIjxxPkEgbWFqb3IgcGFydCBvZiBjb29raWUgcmVjb21ib2J1bGF0aW9uLjwvcT4iLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgNQ0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkgtYm9tYiBtaW5pbmciLA0KICAgICAgIjxxPlF1ZXN0aW9uYWJsZSBlZmZpY2llbmN5LCBidXQgc3BlY3RhY3VsYXIgbm9uZXRoZWxlc3MuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ2hvY29sYXRlIG1vbm9saXRocyIsDQogICAgICAiPHE+TXkgZ29kLiBJdCdzIGZ1bGwgb2YgY2hvY29sYXRlIGJhcnMuPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgNQ0KICAgICk7DQogICAgb3JkZXIgPSA3MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkFxdWEgY3J1c3R1bGFlIiwNCiAgICAgICI8cT5DYXJlZnVsIHdpdGggdGhlIGRvc2luZyAtIG9uZSBkcm9wIHRvbyBtdWNoIGFuZCB5b3UgZ2V0IG11ZmZpbnMuPGJyPkFuZCBub2JvZHkgbGlrZXMgbXVmZmlucy48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDgwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQnJhbmUgdHJhbnNwbGFudCIsDQogICAgICAnPHE+VGhpcyByZWZlcnMgdG8gdGhlIHByYWN0aWNlIG9mIG1lcmdpbmcgaGlnaGVyIGRpbWVuc2lvbmFsIHVuaXZlcnNlcywgb3IgImJyYW5lcyIsIHdpdGggb3VyIG93biwgaW4gb3JkZXIgdG8gZmFjaWxpdGF0ZSB0cmFuc2l0IChhbmQgaGFydmVzdGluZyBvZiBwcmVjaW91cyBjb29raWUgZG91Z2gpLjwvcT4nLA0KICAgICAgIlBvcnRhbCIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiWWVzdGVybW9ycm93IGNvbXBhcmF0b3JzIiwNCiAgICAgICI8cT5Gb3J0bmlnaHRzIGludG8gbWlsbGVubmlhLjwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDEwMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlJldmVyc2UgY3ljbG90cm9ucyIsDQogICAgICAiPHE+VGhlc2UgY2FuIHVuY29sbGlzaW9uIHBhcnRpY2xlcyBhbmQgdW5zcGluIGF0b21zLiBGb3IuLi4gdWguLi4gYmV0dGVyIGZsYXZvciwgYW5kIHN0dWZmLjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDUNCiAgICApOw0KDQogICAgb3JkZXIgPSAxNTA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJVbm9idGFpbml1bSBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPlRoZXNlIG5pY2UgbWljZSBzaG91bGQgc3VmZmljZS48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAsDQogICAgICBbMTEsIDE0XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgNSwgMTEpOw0KDQogICAgb3JkZXIgPSAxMDAzMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhcmFtb2FzIiwNCiAgICAgIGRlc2M6ICJZZWFoLiBUaGF0J3MgZ290IGEgbmljZSByaW5nIHRvIGl0LiIsDQogICAgICBpY29uOiBbMTQsIDRdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiU2FnYWxvbmdzIiwNCiAgICAgIGRlc2M6ICJHcmFuZG1hJ3MgZmF2b3JpdGU/IiwNCiAgICAgIGljb246IFsxNSwgM10sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAzLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTaG9ydGZvaWxzIiwNCiAgICAgIGRlc2M6ICJGb2lsZWQgYWdhaW4hIiwNCiAgICAgIGljb246IFsxNSwgNF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAzLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJXaW4gbWludHMiLA0KICAgICAgZGVzYzogIlRoZXkncmUgdGhlIGx1Y2tpZXN0IGNvb2tpZXMgeW91J3ZlIGV2ZXIgdGFzdGVkISIsDQogICAgICBpY29uOiBbMTQsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlBlcmZlY3QgaWRsaW5nIiwNCiAgICAgIGxvYygiWW91IGtlZXAgcHJvZHVjaW5nIGNvb2tpZXMgZXZlbiB3aGlsZSB0aGUgZ2FtZSBpcyBjbG9zZWQuIikgKw0KICAgICAgICAiPHE+SXQncyB0aGUgbW9zdCBiZWF1dGlmdWwgdGhpbmcgSSd2ZSBldmVyIHNlZW4uPC9xPiIsDQogICAgICA3LA0KICAgICAgWzEwLCAwXQ0KICAgICk7IC8vZGVidWcgcHVycG9zZXMgb25seQ0KICAgIEdhbWUubGFzdC5wb29sID0gImRlYnVnIjsNCg0KICAgIG9yZGVyID0gMTAwMzA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJGaWcgZ2x1dHRvbnMiLA0KICAgICAgZGVzYzogIkdvdCBpdCBhbGwgZmlndXJlZCBvdXQuIiwNCiAgICAgIGljb246IFsxNywgNF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJMb3Jlb2xzIiwNCiAgICAgIGRlc2M6ICJCZWNhdXNlLCB1aC4uLiB0aGV5J3JlIHdvcnRoIGl0PyIsDQogICAgICBpY29uOiBbMTYsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSmFmZmEgY2FrZXMiLA0KICAgICAgZGVzYzogIklmIHlvdSB3YW50IHRvIGJha2UgYSBjb29raWUgZnJvbSBzY3JhdGNoLCB5b3UgbXVzdCBmaXJzdCBidWlsZCBhIGZhY3RvcnkuIiwNCiAgICAgIGljb246IFsxNywgM10sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHcmVhc2UncyBjdXBzIiwNCiAgICAgIGRlc2M6ICJFeHRyYS1ncmVhc3kgcGVhbnV0IGJ1dHRlci4iLA0KICAgICAgaWNvbjogWzE2LCA0XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgYnJhbmQgYmlzY3VpdHMiLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMzAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIZWF2ZW5seSBjaGlwIHNlY3JldCIsDQogICAgICBsb2MoIlVubG9ja3MgPGI+JTElPC9iPiBvZiB0aGUgcG90ZW50aWFsIG9mIHlvdXIgcHJlc3RpZ2UgbGV2ZWwuIiwgNSkgKw0KICAgICAgICAiPHE+R3JhbnRzIHRoZSBrbm93bGVkZ2Ugb2YgaGVhdmVubHkgY2hpcHMsIGFuZCBob3cgdG8gdXNlIHRoZW0gdG8gbWFrZSBiYWtpbmcgbW9yZSBlZmZpY2llbnQuPGJyPkl0J3MgYSBzZWNyZXQgdG8gZXZlcnlvbmUuPC9xPiIsDQogICAgICAxMSwNCiAgICAgIFsxOSwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5ub1Blcm0gPSAxOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiSGVhdmVubHkgY29va2llIHN0YW5kIiwNCiAgICAgIGxvYygiVW5sb2NrcyA8Yj4lMSU8L2I+IG9mIHRoZSBwb3RlbnRpYWwgb2YgeW91ciBwcmVzdGlnZSBsZXZlbC4iLCAyNSkgKw0KICAgICAgICAiPHE+RG9uJ3QgZm9yZ2V0IHRvIHZpc2l0IHRoZSBoZWF2ZW5seSBsZW1vbmFkZSBzdGFuZCBhZnRlcndhcmRzLiBXaGVuIGFmdGVybGlmZSBnaXZlcyB5b3UgbGVtb25zLi4uPC9xPiIsDQogICAgICAxMTExLA0KICAgICAgWzE4LCA3XQ0KICAgICk7DQogICAgR2FtZS5sYXN0Lm5vUGVybSA9IDE7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIZWF2ZW5seSBiYWtlcnkiLA0KICAgICAgbG9jKCJVbmxvY2tzIDxiPiUxJTwvYj4gb2YgdGhlIHBvdGVudGlhbCBvZiB5b3VyIHByZXN0aWdlIGxldmVsLiIsIDUwKSArDQogICAgICAgICI8cT5BbHNvIHNlbGxzIGdvZGx5IGNha2VzIGFuZCBkaXZpbmUgcGFzdHJpZXMuIFRoZSBwcmV0emVscyBhcmVuJ3QgdG9vIGJhZCBlaXRoZXIuPC9xPiIsDQogICAgICAxMTExMTEsDQogICAgICBbMTcsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3Qubm9QZXJtID0gMTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkhlYXZlbmx5IGNvbmZlY3Rpb25lcnkiLA0KICAgICAgbG9jKCJVbmxvY2tzIDxiPiUxJTwvYj4gb2YgdGhlIHBvdGVudGlhbCBvZiB5b3VyIHByZXN0aWdlIGxldmVsLiIsIDc1KSArDQogICAgICAgICI8cT5UaGV5IHNheSBhbmdlbCBiYWtlcnMgd29yayB0aGVyZS4gVGhleSB0YWtlIGFuZ2VsIGx1bmNoIGJyZWFrcyBhbmQgc29tZXRpbWVzIGdvIG9uIGFuZ2VsIHN0cmlrZXMuPC9xPiIsDQogICAgICAxMTExMTExMSwNCiAgICAgIFsxNiwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5ub1Blcm0gPSAxOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiSGVhdmVubHkga2V5IiwNCiAgICAgIGxvYygiVW5sb2NrcyA8Yj4lMSU8L2I+IG9mIHRoZSBwb3RlbnRpYWwgb2YgeW91ciBwcmVzdGlnZSBsZXZlbC4iLCAxMDApICsNCiAgICAgICAgIjxxPlRoaXMgaXMgdGhlIGtleSB0byB0aGUgcGVhcmx5IChhbmQgdGFzdHkpIGdhdGVzIG9mIHBhc3RyeSBoZWF2ZW4sIGdyYW50aW5nIHlvdSBhY2Nlc3MgdG8geW91ciBlbnRpcmUgc3RvY2twaWxlIG9mIGhlYXZlbmx5IGNoaXBzIGZvciBiYWtpbmcgcHVycG9zZXMuPGJyPk1heSB5b3UgdXNlIHRoZW0gd2lzZWx5LjwvcT4iLA0KICAgICAgMTExMTExMTExMSwNCiAgICAgIFsxNSwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5ub1Blcm0gPSAxOw0KDQogICAgb3JkZXIgPSAxMDEwMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlNrdWxsIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldhbm5hIGtub3cgc29tZXRoaW5nIHNwb29reT8gWW91J3ZlIGdvdCBvbmUgb2YgdGhlc2UgaW5zaWRlIHlvdXIgaGVhZCBSSUdIVCBOT1cuIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxMiwgOF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA0NDQ0NDQ0NDQ0NDQsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHaG9zdCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGV5J3JlIHNvbWV0aGluZyBzdHJhbmdlLCBidXQgdGhleSBsb29rIHByZXR0eSBnb29kISIsDQogICAgICBsb2NrZWQ6IDEsDQogICAgICBpY29uOiBbMTMsIDhdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogNDQ0NDQ0NDQ0NDQ0LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmF0IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZSBjb29raWVzIHRoaXMgdG93biBkZXNlcnZlcy4iLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzE0LCA4XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDQ0NDQ0NDQ0NDQ0NCwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlNsaW1lIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZSBpbmNyZWRpYmxlIG1lbHRpbmcgY29va2llcyEiLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzE1LCA4XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDQ0NDQ0NDQ0NDQ0NCwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlB1bXBraW4gY29va2llcyIsDQogICAgICBkZXNjOiAiTm90IGV2ZW4gcHVtcGtpbi1mbGF2b3JlZC4gVGFzdGVzIGxpa2UgZ2xhemluZy4gWWV1Z2guIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxNiwgOF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA0NDQ0NDQ0NDQ0NDQsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJFeWViYWxsIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldoZW4geW91IHN0YXJlIGludG8gdGhlIGNvb2tpZSwgdGhlIGNvb2tpZSBzdGFyZXMgYmFjayBhdCB5b3UuIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxNywgOF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA0NDQ0NDQ0NDQ0NDQsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTcGlkZXIgY29va2llcyIsDQogICAgICBkZXNjOiAiWW91IGZvdW5kIHRoZSByZWNpcGUgb24gdGhlIHdlYi4gVGhleSBkbyB3aGF0ZXZlciBhIGNvb2tpZSBjYW4uIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxOCwgOF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA0NDQ0NDQ0NDQ0NDQsDQogICAgfSk7DQoNCiAgICBHYW1lLmhhbGxvd2VlbkRyb3BzID0gWw0KICAgICAgIlNrdWxsIGNvb2tpZXMiLA0KICAgICAgIkdob3N0IGNvb2tpZXMiLA0KICAgICAgIkJhdCBjb29raWVzIiwNCiAgICAgICJTbGltZSBjb29raWVzIiwNCiAgICAgICJQdW1wa2luIGNvb2tpZXMiLA0KICAgICAgIkV5ZWJhbGwgY29va2llcyIsDQogICAgICAiU3BpZGVyIGNvb2tpZXMiLA0KICAgIF07DQoNCiAgICBHYW1lLkdldEhvd01hbnlIYWxsb3dlZW5Ecm9wcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBudW0gPSAwOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmhhbGxvd2VlbkRyb3BzKSB7DQogICAgICAgIGlmIChHYW1lLkhhcyhHYW1lLmhhbGxvd2VlbkRyb3BzW2ldKSkgbnVtKys7DQogICAgICB9DQogICAgICByZXR1cm4gbnVtOw0KICAgIH07DQogICAgLypmb3IgKHZhciBpIGluIEdhbWUuaGFsbG93ZWVuRHJvcHMpDQoJCXsNCgkJCUdhbWUuVXBncmFkZXNbR2FtZS5oYWxsb3dlZW5Ecm9wc1tpXV0uZGVzY0Z1bmM9ZnVuY3Rpb24oKXtyZXR1cm4gJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+WW91IGN1cnJlbnRseSBvd24gPGI+JytHYW1lLkdldEhvd01hbnlIYWxsb3dlZW5Ecm9wcygpKycvJytHYW1lLmhhbGxvd2VlbkRyb3BzLmxlbmd0aCsnPC9iPiBoYWxsb3dlZW4gY29va2llcy48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nK3RoaXMuZGRlc2M7fTsNCgkJfSovDQoNCiAgICBvcmRlciA9IDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJQZXJzaXN0ZW50IG1lbW9yeSIsDQogICAgICBsb2MoIlN1YnNlcXVlbnQgcmVzZWFyY2ggd2lsbCBiZSA8Yj4lMSB0aW1lczwvYj4gYXMgZmFzdC4iLCAxMCkgKw0KICAgICAgICAiPHE+SXQncyBhbGwgbWFraW5nIHNlbnNlITxicj5BZ2FpbiE8L3E+IiwNCiAgICAgIDUwMCwNCiAgICAgIFs5LCAyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIldyaW5rbGVyIGRvb3JtYXQiLA0KICAgICAgbG9jKCJXcmlua2xlcnMgc3Bhd24gbXVjaCBtb3JlIGZyZXF1ZW50bHkuIikgKw0KICAgICAgICAiPHE+WW91J3JlIHN1Y2ggYSBwdXNob3Zlci48L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTksIDhdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAxMDIwMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNocmlzdG1hcyB0cmVlIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJXaG9zZSBwaW5lIGlzIGl0IGFueXdheT8iLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzEyLCAxMF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiAyNTI1MjUyNTI1MjUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTbm93Zmxha2UgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIk1hc3MtcHJvZHVjZWQgdG8gYmUgdW5pcXVlIGluIGV2ZXJ5IHdheS4iLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzEzLCAxMF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiAyNTI1MjUyNTI1MjUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTbm93bWFuIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJJdCdzIGZyb3N0ZWQuIERvdWJseSBzby4iLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzE0LCAxMF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiAyNTI1MjUyNTI1MjUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJIb2xseSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiWW91IGRvbid0IHNtb29jaCB1bmRlciB0aGVzZSBvbmVzLiBUaGF0IHdvdWxkIGJlIHRoZSBtaXN0bGV0b2UgKHdoaWNoLCBib3RhbmljYWxseSwgaXMgYSBzbWVsbGllciB2YXJpYW50IG9mIHRoZSBtaXN0bGVmaW5nZXIpLiIsDQogICAgICBsb2NrZWQ6IDEsDQogICAgICBpY29uOiBbMTUsIDEwXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDI1MjUyNTI1MjUyNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhbmR5IGNhbmUgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIkl0J3MgdHdvIHRyZWF0cyBpbiBvbmUhPGJyPihGdXJ0aGVyIGluc3BlY3Rpb24gcmV2ZWFscyB0aGUgZnJvc3RpbmcgZG9lcyBub3QgYWN0dWFsbHkgdGFzdGUgbGlrZSBwZXBwZXJtaW50LCBidXQgbGlrZSBtdW5kYW5lIHN1Z2FyeSBmcm9zdGluZy4pIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxNiwgMTBdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogMjUyNTI1MjUyNTI1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmVsbCBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiV2hhdCBkbyB0aGVzZSBldmVuIGhhdmUgdG8gZG8gd2l0aCBjaHJpc3RtYXM/IFdobyBjYXJlcywgcmluZyB0aGVtIGluISIsDQogICAgICBsb2NrZWQ6IDEsDQogICAgICBpY29uOiBbMTcsIDEwXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDI1MjUyNTI1MjUyNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlByZXNlbnQgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIlRoZSBwcmVxdWVsIHRvIGZ1dHVyZSBiaXNjdWl0cy4gV2F0Y2ggb3V0ISIsDQogICAgICBsb2NrZWQ6IDEsDQogICAgICBpY29uOiBbMTgsIDEwXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDI1MjUyNTI1MjUyNSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHaW5nZXJicmVhZCBtZW4iLA0KICAgICAgZGVzYzogIllvdSBsaWtlIHRvIGJpdGUgdGhlIGxlZ3Mgb2ZmIGZpcnN0LCByaWdodD8gSG93IGFib3V0IHRlYXJpbmcgb2ZmIHRoZSBhcm1zPyBZb3Ugc2ljayBtb25zdGVyLiIsDQogICAgICBpY29uOiBbMTgsIDRdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdpbmdlcmJyZWFkIHRyZWVzIiwNCiAgICAgIGRlc2M6ICJFdmVyZ3JlZW5zIGluIHBhc3RyeSBmb3JtLiBZdWxlIGJlIHN1cnByaXNlZCB3aGF0IHlvdSBjYW4gY29tZSB1cCB3aXRoLiIsDQogICAgICBpY29uOiBbMTgsIDNdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMjUwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBIGZlc3RpdmUgaGF0IiwNCiAgICAgICI8Yj4iICsNCiAgICAgICAgbG9jKCJVbmxvY2tzLi4uIHNvbWV0aGluZy4iKSArDQogICAgICAgICI8L2I+PHE+Tm90IGEgY3JlYXR1cmUgd2FzIHN0aXJyaW5nLCBub3QgZXZlbiBhIG1vdXNlLjwvcT4iLA0KICAgICAgMjUsDQogICAgICBbMTksIDldLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgZHJvcCA9IGNob29zZShHYW1lLnNhbnRhRHJvcHMpOw0KICAgICAgICBHYW1lLlVubG9jayhkcm9wKTsNCiAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgbG9jKCJJbiB0aGUgZmVzdGl2ZSBoYXQsIHlvdSBmaW5kLi4uIiksDQogICAgICAgICAgbG9jKCJhIGZlc3RpdmUgdGVzdCB0dWJlPGJyPmFuZCA8Yj4lMTwvYj4uIiwgZHJvcCksDQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tkcm9wXS5pY29uDQogICAgICAgICk7DQogICAgICB9DQogICAgKTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiSW5jcmVhc2VkIG1lcnJpbmVzcyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMTUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPkl0IHR1cm5zIG91dCB0aGF0IHRoZSBrZXkgdG8gaW5jcmVhc2VkIG1lcnJpbmVzcywgc3RyYW5nZWx5IGVub3VnaCwgaGFwcGVucyB0byBiZSBhIGdvb2QgY2FtcGZpcmUgYW5kIHNvbWUgcydtb3Jlcy48YnI+WW91IGtub3cgd2hhdCB0aGV5IHNheSwgYWZ0ZXIgYWxsOyB0aGUgcydtb3JlLCB0aGUgbWVycmllci48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTcsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkltcHJvdmVkIGpvbGxpbmVzcyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMTUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPkEgbmljZSB3b2JibHkgYmVsbHkgZ29lcyBhIGxvbmcgd2F5Ljxicj5Zb3Ugam9sbHk/PC9xPiIsDQogICAgICAyNTI1LA0KICAgICAgWzE3LCA5XQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBIGx1bXAgb2YgY29hbCIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggU2FudGEgbGV2ZWwuIikgKw0KICAgICAgICAiPHE+U29tZSBvZiB0aGUgd29ybGQncyB3b3JzdCBzdG9ja2luZyBzdHVmZmluZy48YnI+SSBndWVzcyB5b3UgY291bGQgdHJ5IHN0YXJ0aW5nIHlvdXIgb3duIGxpdHRsZSBpbmR1c3RyaWFsIHJldm9sdXRpb24sIG9yIHNvbWV0aGluZz8uLi48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTMsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFuIGl0Y2h5IHN3ZWF0ZXIiLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPllvdSBkb24ndCBrbm93IHdoYXQncyB3b3JzZSA6IHRoZSBlbWJhcnJhc3NpbmdseSBxdWFpbnQgXCJlbGYgb24gcmVpbmRlZXJcIiBtb3RpZiwgb3IgdGhlIGZhY3QgdGhhdCB3ZWFyaW5nIGl0IG1ha2VzIHlvdSBmZWVsIGxpa2UgeW91J3JlIHdyYXBwZWQgaW4gYSBkZWFkIHNhc3F1YXRjaC48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTQsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJlaW5kZWVyIGJha2luZyBncm91bmRzIiwNCiAgICAgIGxvYygiUmVpbmRlZXIgYXBwZWFyIDxiPnR3aWNlIGFzIGZyZXF1ZW50bHk8L2I+LiIpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPk1hbGUgcmVpbmRlZXIgYXJlIGZyb20gTWFyczsgZmVtYWxlIHJlaW5kZWVyIGFyZSBmcm9tIHZlbmlzb24uPC9xPiIsDQogICAgICAyNTI1LA0KICAgICAgWzEyLCA5XQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJXZWlnaHRlZCBzbGVpZ2hzIiwNCiAgICAgIGxvYygiUmVpbmRlZXIgYXJlIDxiPnR3aWNlIGFzIHNsb3c8L2I+LiIpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPkhvcGUgaXQgd2FzIHdvcnRoIHRoZSB3ZWlnaHQuPGJyPihTb21ldGhpbmcgc29tZXRoaW5nIGZvcmNlZCBpbnRvIGNlcnZpZHVkZSk8L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTIsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkhvIGhvIGhvLWZsYXZvcmVkIGZyb3N0aW5nIiwNCiAgICAgIGxvYygiUmVpbmRlZXIgZ2l2ZSA8Yj50d2ljZSBhcyBtdWNoPC9iPi4iKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBTYW50YSBsZXZlbC4iKSArDQogICAgICAgICI8cT5JdCdzIHRpbWUgdG8gdXAgdGhlIGFudGxlci48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTIsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNlYXNvbiBzYXZpbmdzIiwNCiAgICAgIGxvYygiQWxsIGJ1aWxkaW5ncyBhcmUgPGI+JTElIGNoZWFwZXI8L2I+LiIsIDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPkJ5IFNhbnRhJ3MgYmVhcmQsIHdoYXQgc2F2aW5ncyE8YnI+QnV0IHdobyB3aWxsIHNhdmUgdXM/PC9xPiIsDQogICAgICAyNTI1LA0KICAgICAgWzE2LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlRveSB3b3Jrc2hvcCIsDQogICAgICBsb2MoIkFsbCB1cGdyYWRlcyBhcmUgPGI+JTElIGNoZWFwZXI8L2I+LiIsIDUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPldhdGNoIHlvdXJzLWVsZiBhcm91bmQgZWx2ZXNkcm9wcGVycyB3aG8gbWlnaHQgc3RlYWwgb3VyIHByb2R1Y3Rpb24gc2VjcmV0cy48YnI+T3IgZWx2ZW4gd29yc2UhPC9xPiIsDQogICAgICAyNTI1LA0KICAgICAgWzE2LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIk5hdWdodHkgbGlzdCIsDQogICAgICBsb2MoIiUxIGFyZSA8Yj50d2ljZTwvYj4gYXMgZWZmaWNpZW50LiIsIGNhcChsb2MoImdyYW5kbWFzIikpKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBTYW50YSBsZXZlbC4iKSArDQogICAgICAgICI8cT5UaGlzIGxpc3QgY29udGFpbnMgZXZlcnkgdW5ob2x5IGRlZWQgcGVycGV0dWF0ZWQgYnkgZ3JhbmRtYWtpbmQuPGJyPkhlIHdvbid0IGJlIGNoZWNraW5nIHRoaXMgb25lIHR3aWNlLjxicj5PbmNlLiBPbmNlIGlzIGVub3VnaC48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTUsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNhbnRhJ3MgYm90dG9tbGVzcyBiYWciLA0KICAgICAgbG9jKCJSYW5kb20gZHJvcHMgYXJlIDxiPiUxJSBtb3JlIGNvbW1vbjwvYj4uIiwgMTApICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPlRoaXMgaXMgb25lIGJvdHRvbSB5b3UgY2FuJ3QgY2hlY2sgb3V0LjwvcT4iLA0KICAgICAgMjUyNSwNCiAgICAgIFsxOSwgOV0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FudGEncyBoZWxwZXJzIiwNCiAgICAgIGxvYygiQ2xpY2tpbmcgaXMgPGI+JTElPC9iPiBtb3JlIHBvd2VyZnVsLiIsIDEwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBTYW50YSBsZXZlbC4iKSArDQogICAgICAgICI8cT5Tb21lIGNob29zZSB0byBoZWxwIGhhbWJ1cmdlcjsgc29tZSBjaG9vc2UgdG8gaGVscCB5b3UuPGJyPlRvIGVhY2ggdGhlaXIgb3duLCBJIGd1ZXNzLjwvcT4iLA0KICAgICAgMjUyNSwNCiAgICAgIFsxOSwgOV0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FudGEncyBsZWdhY3kiLA0KICAgICAgbG9jKCJDb29raWUgcHJvZHVjdGlvbiBtdWx0aXBsaWVyIDxiPislMSUgcGVyIFNhbnRhJ3MgbGV2ZWxzLjwvYj4iLCAzKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBTYW50YSBsZXZlbC4iKSArDQogICAgICAgICI8cT5JbiB0aGUgbm9ydGggcG9sZSwgeW91IGdvdHRhIGdldCB0aGUgZWx2ZXMgZmlyc3QuIFRoZW4gd2hlbiB5b3UgZ2V0IHRoZSBlbHZlcywgeW91IHN0YXJ0IG1ha2luZyB0aGUgdG95cy4gVGhlbiB3aGVuIHlvdSBnZXQgdGhlIHRveXMuLi4gdGhlbiB5b3UgZ2V0IHRoZSBjb29raWVzLjwvcT4iLA0KICAgICAgMjUyNSwNCiAgICAgIFsxOSwgOV0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FudGEncyBtaWxrIGFuZCBjb29raWVzIiwNCiAgICAgIGxvYygiTWlsayBpcyA8Yj4lMSUgbW9yZSBwb3dlcmZ1bDwvYj4uIiwgNSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggU2FudGEgbGV2ZWwuIikgKw0KICAgICAgICAiPHE+UGFydCBvZiBTYW50YSdzIGRyZWFkZnVsbHkgdW5iYWxhbmNlZCBkaWV0LjwvcT4iLA0KICAgICAgMjUyNSwNCiAgICAgIFsxOSwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJlaW5kZWVyIHNlYXNvbiIsDQogICAgICBsb2MoIlJlaW5kZWVyIHNwYXduIG11Y2ggbW9yZSBmcmVxdWVudGx5LiIpICsNCiAgICAgICAgIjxxPkdvLCBDaGVhdGVyISBHbywgSGFja2VyIGFuZCBGYWtlciE8L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTIsIDldDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAyNTAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNhbnRhJ3MgZG9taW5pb24iLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDIwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQWxsIGJ1aWxkaW5ncyBhcmUgPGI+JTElIGNoZWFwZXI8L2I+LiIsIDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJBbGwgdXBncmFkZXMgYXJlIDxiPiUxJSBjaGVhcGVyPC9iPi4iLCAyKSArDQogICAgICAgICI8cT5NeSBuYW1lIGlzIENsYXVzLCBraW5nIG9mIGtpbmdzOzxicj5Mb29rIG9uIG15IHRveXMsIHllIE1pZ2h0eSwgYW5kIGRlc3BhaXIhPC9xPiIsDQogICAgICAyNTI1MjUyNTI1MjUyNTI1LA0KICAgICAgWzE5LCAxMF0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgfQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIHZhciBoZWFydFBvd2VyID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHBvdyA9IDI7DQogICAgICBpZiAoR2FtZS5IYXMoIlN0YXJsb3ZlIikpIHBvdyA9IDM7DQogICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJzZWFzb25zIik7DQogICAgICAgIGlmIChnb2RMdmwgPT0gMSkgcG93ICo9IDEuMzsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIHBvdyAqPSAxLjI7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBwb3cgKj0gMS4xOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHBvdzsNCiAgICB9Ow0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUHVyZSBoZWFydCBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAnTWVsdHkgd2hpdGUgY2hvY29sYXRlPGJyPnRoYXQgc2F5cyAiSSAqbGlrZSogbGlrZSB5b3UiLicsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFsxOSwgM10sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQXJkZW50IGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBIHJlZCBob3QgY2hlcnJ5IGJpc2N1aXQgdGhhdCB3aWxsIG51ZGdlIHRoZSB0YXJnZXQgb2YgeW91ciBhZmZlY3Rpb24gaW4gaW50ZXJlc3RpbmcgZGlyZWN0aW9ucy4iLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFsyMCwgM10sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiU291ciBoZWFydCBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiQSBiaXR0ZXIgbGltZSBiaXNjdWl0IGZvciB0aGUgbG9uZWx5IGFuZCB0aGUgaGVhcnQtYnJva2VuLiIsDQogICAgICByZXF1aXJlOiBHYW1lLmxhc3QubmFtZSwNCiAgICAgIHNlYXNvbjogInZhbGVudGluZXMiLA0KICAgICAgaWNvbjogWzIwLCA0XSwNCiAgICAgIHBvd2VyOiBoZWFydFBvd2VyLA0KICAgICAgcHJpY2U6IDEwMDAwMDAwMDAwMDAsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJXZWVwaW5nIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBbiBpY2UtY29sZCBibHVlYmVycnkgYmlzY3VpdCwgc3ltYm9sIG9mIGEgbWVuZGluZyBoZWFydC4iLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFsyMSwgM10sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwMDAwMDAwLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiR29sZGVuIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBIGJlYXV0aWZ1bCBiaXNjdWl0IHRvIHN5bWJvbGl6ZSBraW5kbmVzcywgdHJ1ZSBsb3ZlLCBhbmQgc2luY2VyaXR5LiIsDQogICAgICByZXF1aXJlOiBHYW1lLmxhc3QubmFtZSwNCiAgICAgIHNlYXNvbjogInZhbGVudGluZXMiLA0KICAgICAgaWNvbjogWzIxLCA0XSwNCiAgICAgIHBvd2VyOiBoZWFydFBvd2VyLA0KICAgICAgcHJpY2U6IDEwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJFdGVybmFsIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJTaWx2ZXIgaWNpbmcgZm9yIGEgdmVyeSBzcGVjaWFsIHNvbWVvbmUgeW91J3ZlIGxpa2VkIGZvciBhIGxvbmcsIGxvbmcgdGltZS4iLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFsxOSwgNF0sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgIH0pOw0KDQogICAgR2FtZS5oZWFydERyb3BzID0gWw0KICAgICAgIlB1cmUgaGVhcnQgYmlzY3VpdHMiLA0KICAgICAgIkFyZGVudCBoZWFydCBiaXNjdWl0cyIsDQogICAgICAiU291ciBoZWFydCBiaXNjdWl0cyIsDQogICAgICAiV2VlcGluZyBoZWFydCBiaXNjdWl0cyIsDQogICAgICAiR29sZGVuIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgICJFdGVybmFsIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgICJQcmlzbSBoZWFydCBiaXNjdWl0cyIsDQogICAgXTsNCg0KICAgIEdhbWUuR2V0SG93TWFueUhlYXJ0RHJvcHMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbnVtID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5oZWFydERyb3BzKSB7DQogICAgICAgIGlmIChHYW1lLkhhcyhHYW1lLmhlYXJ0RHJvcHNbaV0pKSBudW0rKzsNCiAgICAgIH0NCiAgICAgIHJldHVybiBudW07DQogICAgfTsNCg0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2VtIHBvbGlzaCIsDQogICAgICAiPHE+R2V0IHJpZCBvZiB0aGUgZ3JpbWUgYW5kIGxldCBtb3JlIGxpZ2h0IGluLjxicj5UcnVseSwgdHJ1bHkgb3V0cmFnZW91cy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiOXRoIGNvbG9yIiwNCiAgICAgICI8cT5EZWx2ZSBpbnRvIHVudG91Y2hlZCBvcHRpY2FsIGRlcHRocyB3aGVyZSBldmVuIHRoZSBtYW50aXMgc2hyaW1wIGhhc24ndCBzZXQgYW4gZXllITwvcT4iLA0KICAgICAgIlByaXNtIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDaG9jb2xhdGUgbGlnaHQiLA0KICAgICAgIjxxPkJhc2sgaW50byBpdHMgY29jb2FsZXNjZW5jZS48YnI+KFdhcm5pbmcgOiBtYXkgY2F1c2UgdmFyaW91cyBpbnRlcmVzdGluZyBhbGJlaXQgZGVhZGx5IHNraW4gY29uZGl0aW9ucy4pPC9xPiIsDQogICAgICAiUHJpc20iLA0KICAgICAgMw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdyYWluYm93IiwNCiAgICAgICI8cT5SZW1lbWJlciB0aGUgZGlmZmVyZW50IGdyYWlucyB1c2luZyB0aGUgaGFuZHkgUm95IEcuIEJpdiBtbmVtb25pYyA6IFIgaXMgZm9yIHJpY2UsIE8gaXMgZm9yIG9hdHMuLi4gdWgsIEIgZm9yIGJhcmxleT8uLi48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUHVyZSBjb3NtaWMgbGlnaHQiLA0KICAgICAgIjxxPllvdXIgcHJpc21zIG5vdyByZWNlaXZlIHByaXN0aW5lLCB1bmFkdWx0ZXJhdGVkIHBob3RvbnMgZnJvbSB0aGUgb3RoZXIgZW5kIG9mIHRoZSB1bml2ZXJzZS48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICA1DQogICAgKTsNCg0KICAgIG9yZGVyID0gMjU1Ow0KICAgIEdhbWUuR3JhbmRtYVN5bmVyZ3koDQogICAgICAiUmFpbmJvdyBncmFuZG1hcyIsDQogICAgICAiQSBsdW1pbm91cyBncmFuZG1hIHRvIHNwYXJrbGUgaW50byBjb29raWVzLiIsDQogICAgICAiUHJpc20iDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjQwMDA7DQogICAgR2FtZS5zZWFzb25UcmlnZ2VyQmFzZVByaWNlID0gMTAwMDAwMDAwMDsgLy8xMTExMTExMTExOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2Vhc29uIHN3aXRjaGVyIiwNCiAgICAgIGxvYygNCiAgICAgICAgIkFsbG93cyB5b3UgdG8gPGI+dHJpZ2dlciBzZWFzb25hbCBldmVudHM8L2I+IGF0IHdpbGwsIGZvciBhIHByaWNlLiINCiAgICAgICkgKyAiPHE+VGhlcmUgd2lsbCBhbHdheXMgYmUgdGltZS48L3E+IiwNCiAgICAgIDExMTEsDQogICAgICBbMTYsIDZdLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2Vhc29ucykgew0KICAgICAgICAgIEdhbWUuVW5sb2NrKEdhbWUuc2Vhc29uc1tpXS50cmlnZ2VyKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJIZXJhbGRzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJGZXN0aXZlIGJpc2N1aXQiLA0KICAgICAgbG9jKA0KICAgICAgICAiVHJpZ2dlcnMgPGI+JTEgc2Vhc29uPC9iPiBmb3IgdGhlIG5leHQgMjQgaG91cnMuPGJyPlRyaWdnZXJpbmcgYW5vdGhlciBzZWFzb24gd2lsbCBjYW5jZWwgdGhpcyBvbmUuPGJyPkNvc3Qgc2NhbGVzIHdpdGggdW5idWZmZWQgQ3BTIGFuZCBpbmNyZWFzZXMgd2l0aCBldmVyeSBzZWFzb24gc3dpdGNoLiIsDQogICAgICAgIGxvYygiQ2hyaXN0bWFzIikNCiAgICAgICkgKyAiPHE+J1R3YXMgdGhlIG5pZ2h0IGJlZm9yZSBDaHJpc3RtYXMtIG9yIHdhcyBpdD88L3E+IiwNCiAgICAgIEdhbWUuc2Vhc29uVHJpZ2dlckJhc2VQcmljZSwNCiAgICAgIFsxMiwgMTBdDQogICAgKTsNCiAgICBHYW1lLmxhc3Quc2Vhc29uID0gImNocmlzdG1hcyI7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkdob3N0bHkgYmlzY3VpdCIsDQogICAgICBsb2MoDQogICAgICAgICJUcmlnZ2VycyA8Yj4lMSBzZWFzb248L2I+IGZvciB0aGUgbmV4dCAyNCBob3Vycy48YnI+VHJpZ2dlcmluZyBhbm90aGVyIHNlYXNvbiB3aWxsIGNhbmNlbCB0aGlzIG9uZS48YnI+Q29zdCBzY2FsZXMgd2l0aCB1bmJ1ZmZlZCBDcFMgYW5kIGluY3JlYXNlcyB3aXRoIGV2ZXJ5IHNlYXNvbiBzd2l0Y2guIiwNCiAgICAgICAgbG9jKCJIYWxsb3dlZW4iKQ0KICAgICAgKSArICI8cT5zcG9va3kgc2Nhcnkgc2tlbGV0b25zPGJyPndpbGwgd2FrZSB5b3Ugd2l0aCBhIGJvbzwvcT4iLA0KICAgICAgR2FtZS5zZWFzb25UcmlnZ2VyQmFzZVByaWNlLA0KICAgICAgWzEzLCA4XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnNlYXNvbiA9ICJoYWxsb3dlZW4iOw0KICAgIEdhbWUubGFzdC5wb29sID0gInRvZ2dsZSI7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMb3Zlc2ljayBiaXNjdWl0IiwNCiAgICAgIGxvYygNCiAgICAgICAgIlRyaWdnZXJzIDxiPiUxIHNlYXNvbjwvYj4gZm9yIHRoZSBuZXh0IDI0IGhvdXJzLjxicj5UcmlnZ2VyaW5nIGFub3RoZXIgc2Vhc29uIHdpbGwgY2FuY2VsIHRoaXMgb25lLjxicj5Db3N0IHNjYWxlcyB3aXRoIHVuYnVmZmVkIENwUyBhbmQgaW5jcmVhc2VzIHdpdGggZXZlcnkgc2Vhc29uIHN3aXRjaC4iLA0KICAgICAgICBsb2MoIlZhbGVudGluZSdzIGRheSIpDQogICAgICApICsgIjxxPlJvbWFuY2UgbmV2ZXIgZ29lcyBvdXQgb2YgZmFzaGlvbi48L3E+IiwNCiAgICAgIEdhbWUuc2Vhc29uVHJpZ2dlckJhc2VQcmljZSwNCiAgICAgIFsyMCwgM10NCiAgICApOw0KICAgIEdhbWUubGFzdC5zZWFzb24gPSAidmFsZW50aW5lcyI7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvb2wncyBiaXNjdWl0IiwNCiAgICAgIGxvYygNCiAgICAgICAgIlRyaWdnZXJzIDxiPiUxIHNlYXNvbjwvYj4gZm9yIHRoZSBuZXh0IDI0IGhvdXJzLjxicj5UcmlnZ2VyaW5nIGFub3RoZXIgc2Vhc29uIHdpbGwgY2FuY2VsIHRoaXMgb25lLjxicj5Db3N0IHNjYWxlcyB3aXRoIHVuYnVmZmVkIENwUyBhbmQgaW5jcmVhc2VzIHdpdGggZXZlcnkgc2Vhc29uIHN3aXRjaC4iLA0KICAgICAgICBsb2MoIkJ1c2luZXNzIGRheSIpDQogICAgICApICsNCiAgICAgICAgIjxxPkJ1c2luZXNzLiBTZXJpb3VzIGJ1c2luZXNzLiBUaGlzIGlzIGFic29sdXRlbHkgYWxsIG9mIHlvdXIgYnVzaW5lc3MuPC9xPiIsDQogICAgICBHYW1lLnNlYXNvblRyaWdnZXJCYXNlUHJpY2UsDQogICAgICBbMTcsIDZdDQogICAgKTsNCiAgICBHYW1lLmxhc3Quc2Vhc29uID0gImZvb2xzIjsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkV0ZXJuYWwgc2Vhc29ucyIsDQogICAgICBsb2MoIlNlYXNvbnMgbm93IGxhc3QgZm9yZXZlci4iKSArICI8cT5TZWFzb24gdG8gdGFzdGUuPC9xPiIsDQogICAgICA3LA0KICAgICAgWzE2LCA2XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNlYXNvbnMpIHsNCiAgICAgICAgICBHYW1lLlVubG9jayhHYW1lLnNlYXNvbnNbaV0udHJpZ2dlcik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICApOyAvL2RlYnVnIHB1cnBvc2VzIG9ubHkNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJkZWJ1ZyI7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIG1hbmFnZXJzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKyAiPHE+dGhhdCdzIG5vdCBnb25uYSBwYXdzIGFueSBwcm9ibGVtLCBzaXI8L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgNSkNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDUsIDE4KTsNCg0KICAgIG9yZGVyID0gMTAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2VwdGlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsgIjxxPltjdXJzb3J5IGZsYXZvciB0ZXh0XTwvcT4iLA0KICAgICAgMTAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMTIsIDIwXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMTEsIDApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiT2N0aWxsaW9uIGZpbmdlcnMiLA0KICAgICAgZ2V0U3RyVGhvdXNhbmRGaW5nZXJzR2FpbigyMCkgKw0KICAgICAgICAiPHE+VHVybnMgb3V0IHlvdSA8Yj5jYW48L2I+IHF1aXRlIHB1dCB5b3VyIGZpbmdlciBvbiBpdC48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzEyLCAxOV0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEyLCAwKTsNCg0KICAgIG9yZGVyID0gMTUwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRWx1ZGl1bSBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPkkgcm9kZW50IGRvIHRoYXQgaWYgSSB3ZXJlIHlvdS48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFsxMSwgMTVdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCA2LCAxMSk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJXaXNoYWxsb3kgbW91c2UiLA0KICAgICAgZ2V0U3RyQ2xpY2tpbmdHYWlucygxKSArDQogICAgICAgICI8cT5DbGlja2luZyBpcyBmaW5lIGFuZCBkYW5keSwgYnV0IGRvbid0IHNtYXNoIHlvdXIgbW91c2Ugb3ZlciBpdC4gR2V0IHlvdXIgZ2FtZSBvbi4gR28gcGxheS48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAxNl0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDcsIDExKTsNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQWdpbmcgYWdlbnRzIiwNCiAgICAgICI8cT5Db3VudGVyLWludHVpdGl2ZWx5LCBncmFuZG1hcyBoYXZlIHRoZSB1bmNhbm55IGFiaWxpdHkgdG8gYmVjb21lIG1vcmUgcG93ZXJmdWwgdGhlIG9sZGVyIHRoZXkgZ2V0LjwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlB1bHNhciBzcHJpbmtsZXJzIiwNCiAgICAgICI8cT5UaGVyZSdzIG5vIHN1Y2ggdGhpbmcgYXMgb3Zlci13YXRlcmluZy4gVGhlIG1vaXN0ZXN0IGlzIHRoZSBiZXN0ZXN0LjwvcT4iLA0KICAgICAgIkZhcm0iLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSA1MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRlZXAtYmFrZSBwcm9jZXNzIiwNCiAgICAgICI8cT5BIHBhdGVudGVkIHByb2Nlc3MgaW5jcmVhc2luZyBjb29raWUgeWllbGQgdHdvLWZvbGQgZm9yIHRoZSBzYW1lIGFtb3VudCBvZiBpbmdyZWRpZW50cy4gRG9uJ3QgYXNrIGhvdywgZG9uJ3QgdGFrZSBwaWN0dXJlcywgYW5kIGJlIHN1cmUgdG8gd2VhciB5b3VyIHByb3RlY3RpdmUgc3VpdC48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDYNCiAgICApOw0KICAgIG9yZGVyID0gNDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDb3JlZm9yZ2UiLA0KICAgICAgIjxxPllvdSd2ZSBmaW5hbGx5IGR1ZyBhIHR1bm5lbCBkb3duIHRvIHRoZSBFYXJ0aCdzIGNvcmUuIEl0J3MgcHJldHR5IHdhcm0gZG93biBoZXJlLjwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSA2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdlbmVyYXRpb24gc2hpcCIsDQogICAgICAiPHE+QnVpbHQgdG8gbGFzdCwgdGhpcyBodW1vbmdvdXMgc3BhY2VjcmFmdCB3aWxsIHN1cmVseSBkZWxpdmVyIHlvdXIgY29va2llcyB0byB0aGUgZGVlcCBlbmRzIG9mIHNwYWNlLCBvbmUgZGF5LjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDYNCiAgICApOw0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJPcmlnaW4gY3J1Y2libGUiLA0KICAgICAgIjxxPkJ1aWx0IGZyb20gdGhlIHJhcmVzdCBvZiBlYXJ0aHMgYW5kIGxvY2F0ZWQgYXQgdGhlIHZlcnkgZGVlcGVzdCBvZiB0aGUgbGFyZ2VzdCBtb3VudGFpbiwgdGhpcyBsZWdlbmRhcnkgY3J1Y2libGUgaXMgc2FpZCB0byByZXRhaW4gcHJvcGVydGllcyBmcm9tIHRoZSBiaWctYmFuZyBpdHNlbGYuPC9xPiIsDQogICAgICAiQWxjaGVteSBsYWIiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSA4MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRlaXR5LXNpemVkIHBvcnRhbHMiLA0KICAgICAgIjxxPkl0J3MgYWxtb3N0IGxpa2UsIHNheSwgYW4gZWxkZXIgZ29kIGNvdWxkIGZpdCB0aHJvdWdoIHRoaXMgdGhpbmcgbm93LiBIeXBvdGhldGljYWxseS48L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSA5MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZhciBmdXR1cmUgZW5hY3RtZW50IiwNCiAgICAgICI8cT5UaGUgZmFyIGZ1dHVyZSBlbmFjdG1lbnQgYXV0aG9yaXplcyB5b3UgdG8gZGVsdmUgZGVlcCBpbnRvIHRoZSBmdXR1cmUgLSB3aGVyZSBjaXZpbGl6YXRpb24gaGFzIGZhbGxlbiBhbmQgcmlzZW4gYWdhaW4sIGFuZCBjb29raWVzIGFyZSBwbGVudGlmdWwuPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDYNCiAgICApOw0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTmFub2Nvc21pY3MiLA0KICAgICAgIjxxPlRoZSB0aGVvcnkgb2YgbmFub2Nvc21pY3MgcG9zaXRzIHRoYXQgZWFjaCBzdWJhdG9taWMgcGFydGljbGUgaXMgaW4gZmFjdCBpdHMgb3duIHNlbGYtY29udGFpbmVkIHVuaXZlcnNlLCBob2xkaW5nIHVuZmF0aG9tYWJsZSBhbW91bnRzIG9mIGVuZXJneS48YnI+VGhpcyBzb21laG93IHN0YWNrcyB3aXRoIHRoZSBuZXN0ZWQgdW5pdmVyc2UgdGhlb3J5LCBiZWNhdXNlIHBoeXNpY3MuPC9xPiIsDQogICAgICAiQW50aW1hdHRlciBjb25kZW5zZXIiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSAxMTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJHbG93LWluLXRoZS1kYXJrIiwNCiAgICAgICI8cT5Zb3VyIHByaXNtcyBub3cgZ2xvdyBpbiB0aGUgZGFyaywgZWZmZWN0aXZlbHkgZG91YmxpbmcgdGhlaXIgb3V0cHV0ITwvcT4iLA0KICAgICAgIlByaXNtIiwNCiAgICAgIDYNCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAzMjsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlJvc2UgbWFjYXJvbnMiLA0KICAgICAgZGVzYzogIkFsdGhvdWdoIGFuIG9kZCBmbGF2b3IsIHRoZXNlIHBhc3RyaWVzIHJlY2VudGx5IHJvc2UgaW4gcG9wdWxhcml0eS4iLA0KICAgICAgaWNvbjogWzIyLCAzXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWFjYXJvbnMiLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkxlbW9uIG1hY2Fyb25zIiwNCiAgICAgIGRlc2M6ICJUYXN0ZWZ1bGx5IHNvdXIsIGRlbGlnaHRmdWwgdHJlYXRzLiIsDQogICAgICBpY29uOiBbMjMsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2hvY29sYXRlIG1hY2Fyb25zIiwNCiAgICAgIGRlc2M6ICJUaGV5J3JlIGxpa2UgdGlueSBzdWdhcnkgYnVyZ2VycyEiLA0KICAgICAgaWNvbjogWzI0LCAzXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWFjYXJvbnMiLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBpc3RhY2hpbyBtYWNhcm9ucyIsDQogICAgICBkZXNjOiAiUGlzdGFjaGlvIHNoZWxscyBub3cgcmVtb3ZlZCBhZnRlciBtdWx0aXBsZSBjb21wbGFpbnRzLiIsDQogICAgICBpY29uOiBbMjIsIDRdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSGF6ZWxudXQgbWFjYXJvbnMiLA0KICAgICAgZGVzYzogIlRoZXNlIGdvIGVzcGVjaWFsbHkgd2VsbCB3aXRoIGNvZmZlZS4iLA0KICAgICAgaWNvbjogWzIzLCA0XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWFjYXJvbnMiLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlZpb2xldCBtYWNhcm9ucyIsDQogICAgICBkZXNjOiAiSXQncyBsaWtlIHNwcmF5aW5nIHBlcmZ1bWUgaW50byB5b3VyIG1vdXRoISIsDQogICAgICBpY29uOiBbMjQsIDRdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIk1hZ2ljIHNoZW5hbmlnYW5zIiwNCiAgICAgIGxvYygiQ29va2llIHByb2R1Y3Rpb24gPGI+bXVsdGlwbGllZCBieSAxLDAwMDwvYj4uIikgKw0KICAgICAgICAiPHE+SXQncyBtYWdpYy4gSSBhaW4ndCBnb3R0YSBleHBsYWluIHNoPGRpdiBzdHlsZT1cImRpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQ6dXJsKGltZy9tb25leS5wbmcpO3dpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7cG9zaXRpb246cmVsYXRpdmU7dG9wOjRweDtsZWZ0OjBweDttYXJnaW46MHB4IC0ycHg7XCI+PC9kaXY+dC48L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTcsIDVdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAyNDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkJ1bm55IGJpc2N1aXQiLA0KICAgICAgbG9jKA0KICAgICAgICAiVHJpZ2dlcnMgPGI+JTEgc2Vhc29uPC9iPiBmb3IgdGhlIG5leHQgMjQgaG91cnMuPGJyPlRyaWdnZXJpbmcgYW5vdGhlciBzZWFzb24gd2lsbCBjYW5jZWwgdGhpcyBvbmUuPGJyPkNvc3Qgc2NhbGVzIHdpdGggdW5idWZmZWQgQ3BTIGFuZCBpbmNyZWFzZXMgd2l0aCBldmVyeSBzZWFzb24gc3dpdGNoLiIsDQogICAgICAgIGxvYygiRWFzdGVyIikNCiAgICAgICkgKw0KICAgICAgICAiPHE+QWxsIHRoZSB3b3JsZCB3aWxsIGJlIHlvdXIgZW5lbXk8YnI+YW5kIHdoZW4gdGhleSBjYXRjaCB5b3UsPGJyPnRoZXkgd2lsbCBraWxsIHlvdS4uLjxicj5idXQgZmlyc3QgdGhleSBtdXN0IGNhdGNoIHlvdS48L3E+IiwNCiAgICAgIEdhbWUuc2Vhc29uVHJpZ2dlckJhc2VQcmljZSwNCiAgICAgIFswLCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5zZWFzb24gPSAiZWFzdGVyIjsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KDQogICAgdmFyIGVnZ1ByaWNlID0gOTk5OTk5OTk5OTk5Ow0KICAgIHZhciBlZ2dQcmljZTIgPSA5OTk5OTk5OTk5OTk5OTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkNoaWNrZW4gZWdnIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygxKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+VGhlIGVnZy4gVGhlIGVnZyBjYW1lIGZpcnN0LiBHZXQgb3ZlciBpdC48L3E+IiwNCiAgICAgIGVnZ1ByaWNlLA0KICAgICAgWzEsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEdWNrIGVnZyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlRoZW4gaGUgd2FkZGxlZCBhd2F5LjwvcT4iLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbMiwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlR1cmtleSBlZ2ciLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIGhvdyBtYW55IGVnZ3MgeW91IG93bi4iKSArDQogICAgICAgICI8cT5UaGVzZSBoYXRjaCBpbnRvIHN0cmFuZ2UsIGhhbmQtc2hhcGVkIGNyZWF0dXJlcy48L3E+IiwNCiAgICAgIGVnZ1ByaWNlLA0KICAgICAgWzMsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJRdWFpbCBlZ2ciLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIGhvdyBtYW55IGVnZ3MgeW91IG93bi4iKSArDQogICAgICAgICI8cT5UaGVzZSBlZ2dzIGFyZSBwb3NpdGl2ZWx5IHRpbnkuIEkgbWVhbiBsb29rIGF0IHRoZW0uIEhvdyBkb2VzIHRoaXMgaGFwcGVuPyBXaG9zZSBpZGVhIHdhcyB0aGF0PzwvcT4iLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbNCwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJvYmluIGVnZyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPkhvbHkgYXp1cmUtaHVlZCBzaGVsbGVkIGVtYnJ5b3MhPC9xPiIsDQogICAgICBlZ2dQcmljZSwNCiAgICAgIFs1LCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiT3N0cmljaCBlZ2ciLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIGhvdyBtYW55IGVnZ3MgeW91IG93bi4iKSArDQogICAgICAgICI8cT5PbmUgb2YgdGhlIGxhcmdlc3QgZWdncyBpbiB0aGUgd29ybGQuIE1vcmUgbGlrZSBvc3Ryb3VjaCwgYW0gSSByaWdodD88YnI+R3V5cz88L3E+IiwNCiAgICAgIGVnZ1ByaWNlLA0KICAgICAgWzYsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDYXNzb3dhcnkgZWdnIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygxKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+VGhlIGNhc3Nvd2FyeSBpcyB0YWxsZXIgdGhhbiB5b3UsIHBvc3Nlc3NlcyBtdXJkZXJvdXMgY2xhd3MgYW5kIGNhbiBlYXNpbHkgb3V0cnVuIHlvdS48YnI+WW91J2QgZG8gd2VsbCB0byBiZSBjYXNzby13YXJ5IG9mIHRoZW0uPC9xPiIsDQogICAgICBlZ2dQcmljZSwNCiAgICAgIFs3LCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FsbW9uIHJvZSIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPkRvIHRoZSBpbXBvc3NpYmxlLCBzZWUgdGhlIGludmlzaWJsZS48YnI+Um9lIHJvZSwgZmlnaHQgdGhlIHBvd2VyPzwvcT4iLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbOCwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZyb2dzcGF3biIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgJzxxPkkgd2FzIGdvaW5nIHRvIG1ha2UgYSBwdW4gYWJvdXQgaG93IHRoZXNlICJ0b2FkYWxseSBsb29rIGxpa2UgZXllYmFsbHMiLCBidXQgZnJvZ2V0IGl0LjwvcT4nLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbOSwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNoYXJrIGVnZyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPkhFTExPIElTIFRISVMgRk9PRD88YnI+TEVUIE1FIFRFTEwgWU9VIEFCT1VUIEZPT0QuPGJyPldIWSBETyBJIEtFRVAgRUFUSU5HIE1ZIEZSSUVORFM8L3E+IiwNCiAgICAgIGVnZ1ByaWNlLA0KICAgICAgWzEwLCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVHVydGxlIGVnZyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlR1cnRsZXMsIHJpZ2h0PyBIYXRjaCBmcm9tIHNoZWxscy4gR3JvdyBpbnRvIHNoZWxscy4gV2hhdCdzIHVwIHdpdGggdGhhdD88YnI+Tm93IGZvciBteSBza2l0IGFib3V0IGFpcnBsYW5lIGZvb2QuPC9xPiIsDQogICAgICBlZ2dQcmljZSwNCiAgICAgIFsxMSwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFudCBsYXJ2YSIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlRoZXNlIGFyZSBhIGRlbGljYWN5IGluIHNvbWUgY291bnRyaWVzLCBJIHN3ZWFyLiBZb3Ugd2lsbCBsZXQgdGhlc2UgaW52YWRlIHlvdXIgZGlnZXN0aXZlIHRyYWN0LCBhbmQgeW91IHdpbGwgZGVyaXZlIGdyZWF0IHBsZWFzdXJlIGZyb20gaXQuPGJyPkFuZCBhbGwgd2lsbCBiZSB3ZWxsLjwvcT4iLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbMTIsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJHb2xkZW4gZ29vc2UgZWdnIiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPiUxJTwvYj4gbW9yZSBvZnRlbi4iLCA1KSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+VGhlIHNvbGUgdmVzdGlnZSBvZiBhIHRyYWdpYyB0YWxlIGludm9sdmluZyBtaXNndWlkZWQgaW52ZXN0bWVudHMuPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTMsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJGYWJlcmdlIGVnZyIsDQogICAgICBsb2MoIkFsbCBidWlsZGluZ3MgYW5kIHVwZ3JhZGVzIGFyZSA8Yj4lMSUgY2hlYXBlcjwvYj4uIiwgMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlRoaXMgb3V0cmFnZW91cyBlZ2cgaXMgZGVmaW5pdGVseSBmYWIuPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTQsIDEyXSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIldyaW5rbGVyc3Bhd24iLA0KICAgICAgbG9jKCJXcmlua2xlcnMgZXhwbG9kZSBpbnRvIDxiPiUxJSBtb3JlIGNvb2tpZXM8L2I+LiIsIDUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIGhvdyBtYW55IGVnZ3MgeW91IG93bi4iKSArDQogICAgICAgICI8cT5Mb29rIGF0IHRoaXMgbGl0dGxlIGd1eSEgSXQncyBnb25uYSBiZSBhIGJpZyBib3kgc29tZWRheSEgWWVzIGl0IGlzITwvcT4iLA0KICAgICAgZWdnUHJpY2UyLA0KICAgICAgWzE1LCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQ29va2llIGVnZyIsDQogICAgICBsb2MoIkNsaWNraW5nIGlzIDxiPiUxJTwvYj4gbW9yZSBwb3dlcmZ1bC4iLCAxMCkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlRoZSBzaGVsbCBhcHBlYXJzIHRvIGJlIGNoaXBwZWQuPGJyPkkgd29uZGVyIHdoYXQncyBpbnNpZGUgdGhpcyBvbmUhPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTYsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJPbWVsZXR0ZSIsDQogICAgICBsb2MoIk90aGVyIGVnZ3MgYXBwZWFyIDxiPiUxJSBtb3JlIGZyZXF1ZW50bHk8L2I+LiIsIDEwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+RnJvbWFnZSBub3QgaW5jbHVkZWQuPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTcsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDaG9jb2xhdGUgZWdnIiwNCiAgICAgIGxvYygiQ29udGFpbnMgPGI+YSBsb3Qgb2YgY29va2llczwvYj4uIikgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPkxhaWQgYnkgdGhlIGVsdXNpdmUgY29jb2EgYmlyZC4gVGhlcmUncyBhIHN1cnByaXNlIGluc2lkZSE8L3E+IiwNCiAgICAgIGVnZ1ByaWNlMiwNCiAgICAgIFsxOCwgMTJdLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgY29va2llcyA9IEdhbWUuY29va2llcyAqIDAuMDU7DQogICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICJDaG9jb2xhdGUgZWdnIiwNCiAgICAgICAgICBsb2MoIlRoZSBlZ2cgYnVyc3RzIGludG8gPGI+JTE8L2I+IGNvb2tpZXMhIiwgQmVhdXRpZnkoY29va2llcykpLA0KICAgICAgICAgIEdhbWUuVXBncmFkZXNbIkNob2NvbGF0ZSBlZ2ciXS5pY29uDQogICAgICAgICk7DQogICAgICAgIEdhbWUuRWFybihjb29raWVzKTsNCiAgICAgIH0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQ2VudHVyeSBlZ2ciLA0KICAgICAgbG9jKA0KICAgICAgICAiWW91IGNvbnRpbnVhbGx5IGdhaW4gPGI+bW9yZSBDcFMgdGhlIGxvbmdlciB5b3UndmUgcGxheWVkPC9iPiBpbiB0aGUgY3VycmVudCBhc2NlbnNpb24uIg0KICAgICAgKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+QWN0dWFsbHkgbm90IGNlbnR1cmllcy1vbGQuIFRoaXMgb25lIGlzbid0IGEgZGF5IG92ZXIgODYhPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTksIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGRheSA9DQogICAgICAgIChNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gR2FtZS5zdGFydERhdGUpIC8gMTAwMCAvIDEwKSAqIDEwKSAvDQogICAgICAgIDYwIC8NCiAgICAgICAgNjAgLw0KICAgICAgICAyNDsNCiAgICAgIGRheSA9IE1hdGgubWluKGRheSwgMTAwKTsNCiAgICAgIHZhciBuID0gKDEgLSBNYXRoLnBvdygxIC0gZGF5IC8gMTAwLCAzKSkgKiAwLjE7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgbG9jKCJDdXJyZW50IGJvb3N0OiIpICsNCiAgICAgICAgIiA8Yj4rIiArDQogICAgICAgIEJlYXV0aWZ5KG4gKiAxMDAsIDEpICsNCiAgICAgICAgJyU8L2I+PC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgJyJlZ2ciJywNCiAgICAgICI8Yj4iICsgbG9jKCIrJTEgQ3BTIiwgOSkgKyAnPC9iPjxxPmhleSBpdFwncyAiZWdnIjwvcT4nLA0KICAgICAgZWdnUHJpY2UyLA0KICAgICAgWzIwLCAxMl0NCiAgICApOw0KDQogICAgR2FtZS5lYXN0ZXJFZ2dzID0gWw0KICAgICAgIkNoaWNrZW4gZWdnIiwNCiAgICAgICJEdWNrIGVnZyIsDQogICAgICAiVHVya2V5IGVnZyIsDQogICAgICAiUXVhaWwgZWdnIiwNCiAgICAgICJSb2JpbiBlZ2ciLA0KICAgICAgIk9zdHJpY2ggZWdnIiwNCiAgICAgICJDYXNzb3dhcnkgZWdnIiwNCiAgICAgICJTYWxtb24gcm9lIiwNCiAgICAgICJGcm9nc3Bhd24iLA0KICAgICAgIlNoYXJrIGVnZyIsDQogICAgICAiVHVydGxlIGVnZyIsDQogICAgICAiQW50IGxhcnZhIiwNCiAgICAgICJHb2xkZW4gZ29vc2UgZWdnIiwNCiAgICAgICJGYWJlcmdlIGVnZyIsDQogICAgICAiV3JpbmtsZXJzcGF3biIsDQogICAgICAiQ29va2llIGVnZyIsDQogICAgICAiT21lbGV0dGUiLA0KICAgICAgIkNob2NvbGF0ZSBlZ2ciLA0KICAgICAgIkNlbnR1cnkgZWdnIiwNCiAgICAgICciZWdnIicsDQogICAgXTsNCiAgICBHYW1lLmVnZ0Ryb3BzID0gWw0KICAgICAgIkNoaWNrZW4gZWdnIiwNCiAgICAgICJEdWNrIGVnZyIsDQogICAgICAiVHVya2V5IGVnZyIsDQogICAgICAiUXVhaWwgZWdnIiwNCiAgICAgICJSb2JpbiBlZ2ciLA0KICAgICAgIk9zdHJpY2ggZWdnIiwNCiAgICAgICJDYXNzb3dhcnkgZWdnIiwNCiAgICAgICJTYWxtb24gcm9lIiwNCiAgICAgICJGcm9nc3Bhd24iLA0KICAgICAgIlNoYXJrIGVnZyIsDQogICAgICAiVHVydGxlIGVnZyIsDQogICAgICAiQW50IGxhcnZhIiwNCiAgICBdOw0KICAgIEdhbWUucmFyZUVnZ0Ryb3BzID0gWw0KICAgICAgIkdvbGRlbiBnb29zZSBlZ2ciLA0KICAgICAgIkZhYmVyZ2UgZWdnIiwNCiAgICAgICJXcmlua2xlcnNwYXduIiwNCiAgICAgICJDb29raWUgZWdnIiwNCiAgICAgICJPbWVsZXR0ZSIsDQogICAgICAiQ2hvY29sYXRlIGVnZyIsDQogICAgICAiQ2VudHVyeSBlZ2ciLA0KICAgICAgJyJlZ2ciJywNCiAgICBdOw0KDQogICAgR2FtZS5HZXRIb3dNYW55RWdncyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBudW0gPSAwOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmVhc3RlckVnZ3MpIHsNCiAgICAgICAgaWYgKEdhbWUuSGFzKEdhbWUuZWFzdGVyRWdnc1tpXSkpIG51bSsrOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIG51bTsNCiAgICB9Ow0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5lZ2dEcm9wcykgeyAvL3NjYWxlIGVnZyBwcmljZXMgdG8gaG93IG1hbnkgZWdncyB5b3UgaGF2ZQ0KICAgICAgR2FtZS5VcGdyYWRlc1tHYW1lLmVnZ0Ryb3BzW2ldXS5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBNYXRoLnBvdygyLCBHYW1lLkdldEhvd01hbnlFZ2dzKCkpICogOTk5Ow0KICAgICAgfTsNCiAgICB9DQoNCiAgICBmb3IgKHZhciBpIGluIEdhbWUucmFyZUVnZ0Ryb3BzKSB7DQogICAgICBHYW1lLlVwZ3JhZGVzW0dhbWUucmFyZUVnZ0Ryb3BzW2ldXS5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBNYXRoLnBvdygzLCBHYW1lLkdldEhvd01hbnlFZ2dzKCkpICogOTk5Ow0KICAgICAgfTsNCiAgICB9DQoNCiAgICBHYW1lLkRyb3BFZ2cgPSBmdW5jdGlvbiAoZmFpbFJhdGUpIHsNCiAgICAgIGZhaWxSYXRlICo9IDEgLyBHYW1lLmRyb3BSYXRlTXVsdCgpOw0KICAgICAgaWYgKEdhbWUuc2Vhc29uICE9ICJlYXN0ZXIiKSByZXR1cm47DQogICAgICBpZiAoR2FtZS5IYXNBY2hpZXYoIkhpZGUgJiBzZWVrIGNoYW1waW9uIikpIGZhaWxSYXRlICo9IDAuNzsNCiAgICAgIGlmIChHYW1lLkhhcygiT21lbGV0dGUiKSkgZmFpbFJhdGUgKj0gMC45Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJTdGFyc3Bhd24iKSkgZmFpbFJhdGUgKj0gMC45Ow0KICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgic2Vhc29ucyIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIGZhaWxSYXRlICo9IDAuOTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIGZhaWxSYXRlICo9IDAuOTU7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBmYWlsUmF0ZSAqPSAwLjk3Ow0KICAgICAgfQ0KICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPj0gZmFpbFJhdGUpIHsNCiAgICAgICAgdmFyIGRyb3AgPSAiIjsNCiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjEpIGRyb3AgPSBjaG9vc2UoR2FtZS5yYXJlRWdnRHJvcHMpOw0KICAgICAgICBlbHNlIGRyb3AgPSBjaG9vc2UoR2FtZS5lZ2dEcm9wcyk7DQogICAgICAgIGlmIChHYW1lLkhhcyhkcm9wKSB8fCBHYW1lLkhhc1VubG9ja2VkKGRyb3ApKSB7DQogICAgICAgICAgLy9yZXJvbGwgaWYgd2UgaGF2ZSBpdA0KICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4xKSBkcm9wID0gY2hvb3NlKEdhbWUucmFyZUVnZ0Ryb3BzKTsNCiAgICAgICAgICBlbHNlIGRyb3AgPSBjaG9vc2UoR2FtZS5lZ2dEcm9wcyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuSGFzKGRyb3ApIHx8IEdhbWUuSGFzVW5sb2NrZWQoZHJvcCkpIHJldHVybjsNCiAgICAgICAgR2FtZS5VbmxvY2soZHJvcCk7DQogICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgIGxvYygiWW91IGZvdW5kIGFuIGVnZyEiKSwNCiAgICAgICAgICAiPGI+IiArIGRyb3AgKyAiPC9iPiIsDQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tkcm9wXS5pY29uDQogICAgICAgICk7DQogICAgICB9DQogICAgfTsNCg0KICAgIG9yZGVyID0gMTAwMzI7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDYXJhbWVsIG1hY2Fyb25zIiwNCiAgICAgIGRlc2M6ICJUaGUgc2FsdGllc3QsIGNoZXdpZXN0IG9mIHRoZW0gYWxsLiIsDQogICAgICBpY29uOiBbMjUsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTGljb3JpY2UgbWFjYXJvbnMiLA0KICAgICAgZGVzYzogJ0Fsc28ga25vd24gYXMgImJsYWNrYXJvbnMiLicsDQogICAgICBpY29uOiBbMjUsIDRdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRhbGxlciB0ZWxsZXJzIiwNCiAgICAgICI8cT5BYmxlIHRvIHByb2Nlc3MgYSBoaWdoZXIgYW1vdW50IG9mIHRyYW5zYWN0aW9ucy4gQ2FyZWZ1bCB0aG91Z2gsIGFzIHRhbGxlciB0ZWxsZXJzIHRlbGwgdGFsbCB0YWxlcy48L3E+IiwNCiAgICAgICJCYW5rIiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTY2lzc29yLXJlc2lzdGFudCBjcmVkaXQgY2FyZHMiLA0KICAgICAgIjxxPkZvciB0aG9zZSB0cnVseSB2YWx1ZWQgY3VzdG9tZXJzLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkFjaWQtcHJvb2YgdmF1bHRzIiwNCiAgICAgICI8cT5Zb3Uga25vdyB3aGF0IHRoZXkgc2F5IDogYmV0dGVyIHNhZmUgdGhhbiBzb3JyeS48L3E+IiwNCiAgICAgICJCYW5rIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDaG9jb2xhdGUgY29pbnMiLA0KICAgICAgIjxxPlRoaXMgcmV2b2x1dGlvbmFyeSBjdXJyZW5jeSBpcyBtdWNoIGVhc2llciB0byBtZWx0IGZyb20gYW5kIGludG8gaW5nb3RzIC0gYW5kIHRhc3RlcyBtdWNoIGJldHRlciwgZm9yIGEgY2hhbmdlLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgNA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkV4cG9uZW50aWFsIGludGVyZXN0IHJhdGVzIiwNCiAgICAgICI8cT5DYW4ndCBhcmd1ZSB3aXRoIG1hdGhlbWF0aWNzISBOb3cgZm9yayBpdCBvdmVyLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgNQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZpbmFuY2lhbCB6ZW4iLA0KICAgICAgIjxxPlRoZSB1bHRpbWF0ZSBncmFpbCBvZiBlY29ub21pYyB0aG91Z2h0OyB0aGUgZmVuZyBzaHVpIG9mIGJpZyBtb25leSwgdGhlIHN0b2NrIG1hcmtldCB5b2dhIC0gdGhlIEhlaW1saWNoIG1hbmV1dmVyIG9mIGRpbWVzIGFuZCBuaWNrZWxzLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgNg0KICAgICk7DQoNCiAgICBvcmRlciA9IDU1MDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR29sZGVuIGlkb2xzIiwNCiAgICAgICI8cT5MdXJlIGV2ZW4gZ3JlZWRpZXIgYWR2ZW50dXJlcnMgdG8gcmV0cmlldmUgeW91ciBjb29raWVzLiBOb3cgdGhhdCdzIGEgcmVhbCBpZG9sIGdhbWUhPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTYWNyaWZpY2VzIiwNCiAgICAgICI8cT5XaGF0J3MgYSBsaWZlIHRvIGEgZ2lnYXRvbiBvZiBjb29raWVzPzwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRGVsaWNpb3VzIGJsZXNzaW5nIiwNCiAgICAgICI8cT5BbmQgbG8sIHRoZSBCYWtlcidzIGFsbWlnaHR5IHNwb29uIGNhbWUgZG93biBhbmQgZGlzdHJpYnV0ZWQgaG9seSBnaWZ0cyB1bnRvIHRoZSBiZWxpZXZlcnMgLSBzaGltbWVyaW5nIHN1Z2FyLCBhbmQgY2hvY29sYXRlIGRhcmsgYXMgbmlnaHQsIGFuZCBhbGwgbWFubmVyIG9mIHdoZWF0cy4gQW5kIGJveSBsZXQgbWUgdGVsbCB5b3UsIHRoYXQgcGFydHkgd2FzIG1pZ2h0eSBnbmFybHkuPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTdW4gZmVzdGl2YWwiLA0KICAgICAgIjxxPkZyZWUgdGhlIHByaW1vcmRpYWwgcG93ZXJzIG9mIHlvdXIgdGVtcGxlcyB3aXRoIHRoZXNlIGFubnVhbCBjZWxlYnJhdGlvbnMgaW52b2x2aW5nIGZpcmUtYnJlYXRoZXJzLCB0cmFkaXRpb25hbCBkYW5jaW5nLCByaXR1YWwgYmVoZWFkaW5ncyBhbmQgb3RoZXIgbWVycmltZW50cyE8L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgNA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkVubGFyZ2VkIHBhbnRoZW9uIiwNCiAgICAgICI8cT5Fbm91Z2ggc3Bpcml0dWFsIGluYWRlcXVhY3khIE1vcmUgZGl2aW5pdGllcyB0aGFuIHlvdSdsbCBldmVyIG5lZWQsIG9yIHlvdXIgbW9uZXkgYmFjayEgMTAwJSBndWFyYW50ZWVkITwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICA1DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR3JlYXQgQmFrZXIgaW4gdGhlIHNreSIsDQogICAgICAiPHE+VGhpcyBpcyBpdC4gVGhlIHVsdGltYXRlIGRlaXR5IGhhcyBmaW5hbGx5IGNhc3QgVGhlaXIgc3VibGltZWx5IGRpdmluZSBleWUgdXBvbiB5b3VyIG9wZXJhdGlvbjsgd2hldGhlciB0aGlzIGlzIGEgZ29vZCB0aGluZyBvciBwb3NzaWJseSB0aGUgZW5kIG9mIGRheXMgaXMgc29tZXRoaW5nIHlvdSBzaG91bGQgZmluZCBvdXQgdmVyeSBzb29uLjwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICA2DQogICAgKTsNCg0KICAgIG9yZGVyID0gNTc1Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQb2ludGllciBoYXRzIiwNCiAgICAgICI8cT5UZXN0cyBoYXZlIHNob3duIGluY3JlYXNlZCB0aGF1bWljIHJlY2VwdGl2aXR5IHJlbGF0aXZlIHRvIHRoZSBnZW9tZXRyaWMgcHJvcG9ydGlvbnMgb2Ygd2l6YXJkbHkgY29uaWMgaW1wbGVtZW50cy48L3E+IiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJlYXJkbGllciBiZWFyZHMiLA0KICAgICAgIjxxPkhhdmVuJ3QgeW91IGhlYXJkPyBUaGUgYmVhcmQgaXMgdGhlIHdvcmQuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbmNpZW50IGdyaW1vaXJlcyIsDQogICAgICAnPHE+Q29udGFpbiBpbnRlcmVzdGluZyBzcGVsbHMgc3VjaCBhcyAiVHVybiBXYXRlciBUbyBEcm9vbCIsICJHcm93IEV5ZWJyb3dzIE9uIEZ1cm5pdHVyZSIgYW5kICJTdW1tb24gUG9saXRpY2lhbiIuPC9xPicsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJLaXRjaGVuIGN1cnNlcyIsDQogICAgICAiPHE+RXhvdGljIG1hZ2ljIGludm9sdmVkIGluIGFsbCB0aGluZ3MgcGFzdHJ5LXJlbGF0ZWQuIEhleGNlbGxlbnQhPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDQNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTY2hvb2wgb2Ygc29yY2VyeSIsDQogICAgICAiPHE+VGhpcyBjb29raWUtZnVuZGVkIGFjYWRlbXkgb2Ygd2l0Y2hjcmFmdCBpcyBob21lIHRvIHRoZSA0IHByZXN0aWdpb3VzIGhvdXNlcyBvZiBtYWdpYyA6IHRoZSBKb2NrcywgdGhlIE5lcmRzLCB0aGUgUHJlcHMsIGFuZCB0aGUgRGVhdGhtdW5jaGVycy48L3E+IiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgNQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRhcmsgZm9ybXVsYXMiLA0KICAgICAgIjxxPkVsZHJpdGNoIGZvcmNlcyBhcmUgYXQgd29yayBiZWhpbmQgdGhlc2Ugc3BlbGxzIC0geW91IGdldCB0aGUgZmVlbGluZyB5b3UgcmVhbGx5IHNob3VsZG4ndCBiZSBtZXNzaW5nIHdpdGggdGhvc2UuIEJ1dCBJIG1lYW4sIGZyZWUgY29va2llcywgcmlnaHQ/PC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDYNCiAgICApOw0KDQogICAgb3JkZXIgPSAyNTA7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJCYW5rZXIgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSBiYW5rZXIgdG8gY2FzaCBpbiBtb3JlIGNvb2tpZXMuIiwNCiAgICAgICJCYW5rIg0KICAgICk7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJQcmllc3Rlc3MgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSBwcmllc3Rlc3MgdG8gcHJhaXNlIHRoZSBvbmUgdHJ1ZSBCYWtlciBpbiB0aGUgc2t5LiIsDQogICAgICAiVGVtcGxlIg0KICAgICk7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJXaXRjaCBncmFuZG1hcyIsDQogICAgICAiQSBuaWNlIHdpdGNoIHRvIGNhc3QgYSB6aXAsIGFuZCBhIHpvb3AsIGFuZCBwb29mISBDb29raWVzLiIsDQogICAgICAiV2l6YXJkIHRvd2VyIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJUaW4gb2YgYnJpdGlzaCB0ZWEgYmlzY3VpdHMiLA0KICAgICAgbG9jKCJDb250YWlucyBhbiBhc3NvcnRtZW50IG9mIGZhbmN5IGJpc2N1aXRzLiIpICsNCiAgICAgICAgIjxxPkV2ZXJ5IHRpbWUgaXMgdGVhIHRpbWUuPC9xPiIsDQogICAgICAyNSwNCiAgICAgIFsyMSwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiSGVhdmVubHkgY29va2llcyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQm94IG9mIG1hY2Fyb25zIiwNCiAgICAgIGxvYygiQ29udGFpbnMgYW4gYXNzb3J0bWVudCBvZiBtYWNhcm9ucy4iKSArDQogICAgICAgICI8cT5NdWx0aWNvbG9yZWQgZGVsaWNhY2llcyBmaWxsZWQgd2l0aCB2YXJpb3VzIGtpbmRzIG9mIGphbS48YnI+Tm90IHRvIGJlIGNvbmZ1c2VkIHdpdGggbWFjYXJvb25zLCBtYWNhcm9uaSwgbWFjYXJlbmEgb3IgYW55IG9mIHRoYXQgbm9uc2Vuc2UuPC9xPiIsDQogICAgICAyNSwNCiAgICAgIFsyMCwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiSGVhdmVubHkgY29va2llcyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIGxvYygiQ29udGFpbnMgYW4gYXNzb3J0bWVudCBvZiBwb3B1bGFyIGJpc2N1aXRzLiIpICsNCiAgICAgICAgIjxxPlRoZXkncmUgYnJhbmQgbmV3ITwvcT4iLA0KICAgICAgMjUsDQogICAgICBbMjAsIDldDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkhlYXZlbmx5IGNvb2tpZXMiXTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQdXJlIGJsYWNrIGNob2NvbGF0ZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICdEaXBwZWQgaW4gYSBsYWItbWFkZSBzdWJzdGFuY2UgZGFya2VyIHRoYW4gdGhlIGRhcmtlc3QgY29jb2EgKGR1YmJlZCAiY2hvY29hbGF0ZSIpLicsDQogICAgICBpY29uOiBbMjYsIDNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQdXJlIHdoaXRlIGNob2NvbGF0ZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJFbGFib3JhdGVkIG9uIHRoZSBuYW5vLXNjYWxlLCB0aGUgY29hdGluZyBvbiB0aGlzIGJpc2N1aXQgaXMgYWJsZSB0byByZWZyYWN0IGxpZ2h0IGV2ZW4gaW4gYSBwaXRjaC1ibGFjayBlbnZpcm9ubWVudC4iLA0KICAgICAgaWNvbjogWzI2LCA0XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTGFkeWZpbmdlcnMiLA0KICAgICAgZGVzYzogIkNsZWFuZWQgYW5kIHNhbml0aXplZCBzbyB3ZWxsIHlvdSdkIHN3ZWFyIHRoZXkncmUgYWN0dWFsIGJpc2N1aXRzLiIsDQogICAgICBpY29uOiBbMjcsIDNdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJUdWlsZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIG5ldmVyIGdvIG91dCBvZiB0aWxlLiIsDQogICAgICBpY29uOiBbMjcsIDRdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2hvY29sYXRlLXN0dWZmZWQgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIkEgcHJpbmNlbHkgc25hY2shPGJyPlRoZSBob2xlcyBhcmUgc28gdGhlIGNob2NvbGF0ZSBzdHVmZmluZyBjYW4gYnJlYXRoZS4iLA0KICAgICAgaWNvbjogWzI4LCAzXSwNCiAgICAgIHBvd2VyOiAzLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNoZWNrZXIgY29va2llcyIsDQogICAgICBkZXNjOiAiQSBzcXVhcmUgY29va2llPyBUaGlzIHNvbHZlcyBzbyBtYW55IHN0b3JhZ2UgYW5kIHBhY2thZ2luZyBwcm9ibGVtcyEgWW91J3JlIGEgZ2VuaXVzISIsDQogICAgICBpY29uOiBbMjgsIDRdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSBtZWx0IHJpZ2h0IG9mZiB5b3VyIG1vdXRoIGFuZCBpbnRvIHlvdXIgaGVhcnQuIChMZXQncyBmYWNlIGl0LCB0aGV5J3JlIHJhdGhlciBmYXR0ZW5pbmcuKSIsDQogICAgICBpY29uOiBbMjksIDNdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNyZWFtIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkl0J3MgbGlrZSB0d28gY2hvY29sYXRlIGNoaXAgY29va2llcyEgQnV0IGJyb3VnaHQgdG9nZXRoZXIgd2l0aCB0aGUgbWFnaWMgb2YgY3JlYW0hIEl0J3MgZmllbmRpc2hseSBwZXJmZWN0ISIsDQogICAgICBpY29uOiBbMjksIDRdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDA7DQogICAgdmFyIGRlc2MgPSBsb2MoDQogICAgICAiUGxhY2luZyBhbiB1cGdyYWRlIGluIHRoaXMgc2xvdCB3aWxsIG1ha2UgaXRzIGVmZmVjdHMgPGI+cGVybWFuZW50PC9iPiBhY3Jvc3MgYWxsIHBsYXl0aHJvdWdocy4iDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJQZXJtYW5lbnQgdXBncmFkZSBzbG90IEkiLCBkZXNjLCAxMDAsIFswLCAxMF0pOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QuaWNvbkZ1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuUGVybWFuZW50U2xvdEljb24oMCk7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuYWN0aXZhdGVGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUuQXNzaWduUGVybWFuZW50U2xvdCgwKTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUkiLCBkZXNjLCAyMDAwMCwgWzEsIDEwXSk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJQZXJtYW5lbnQgdXBncmFkZSBzbG90IEkiXTsNCiAgICBHYW1lLmxhc3QuaWNvbkZ1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuUGVybWFuZW50U2xvdEljb24oMSk7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuYWN0aXZhdGVGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUuQXNzaWduUGVybWFuZW50U2xvdCgxKTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUlJIiwgZGVzYywgMzAwMDAwMCwgWzIsIDEwXSk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElJIl07DQogICAgR2FtZS5sYXN0Lmljb25GdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLlBlcm1hbmVudFNsb3RJY29uKDIpOw0KICAgIH07DQogICAgR2FtZS5sYXN0LmFjdGl2YXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLkFzc2lnblBlcm1hbmVudFNsb3QoMik7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElWIiwgZGVzYywgNDAwMDAwMDAwLCBbMywgMTBdKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUlJIl07DQogICAgR2FtZS5sYXN0Lmljb25GdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLlBlcm1hbmVudFNsb3RJY29uKDMpOw0KICAgIH07DQogICAgR2FtZS5sYXN0LmFjdGl2YXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLkFzc2lnblBlcm1hbmVudFNsb3QoMyk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJQZXJtYW5lbnQgdXBncmFkZSBzbG90IFYiLCBkZXNjLCA1MDAwMDAwMDAwMCwgWzQsIDEwXSk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElWIl07DQogICAgR2FtZS5sYXN0Lmljb25GdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLlBlcm1hbmVudFNsb3RJY29uKDQpOw0KICAgIH07DQogICAgR2FtZS5sYXN0LmFjdGl2YXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLkFzc2lnblBlcm1hbmVudFNsb3QoNCk7DQogICAgfTsNCg0KICAgIHZhciBzbG90cyA9IFsNCiAgICAgICJQZXJtYW5lbnQgdXBncmFkZSBzbG90IEkiLA0KICAgICAgIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUkiLA0KICAgICAgIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUlJIiwNCiAgICAgICJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElWIiwNCiAgICAgICJQZXJtYW5lbnQgdXBncmFkZSBzbG90IFYiLA0KICAgIF07DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbG90cy5sZW5ndGg7IGkrKykgew0KICAgICAgR2FtZS5VcGdyYWRlc1tzbG90c1tpXV0uZGVzY0Z1bmMgPSAoZnVuY3Rpb24gKGkpIHsNCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgaWYgKEdhbWUucGVybWFuZW50VXBncmFkZXNbaV0gPT0gLTEpDQogICAgICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgICB0aGlzLmRlc2MgKw0KICAgICAgICAgICAgICAoY29udGV4dCA9PSAic3RhdHMiDQogICAgICAgICAgICAgICAgPyAiIg0KICAgICAgICAgICAgICAgIDogIjxicj48Yj4iICsgbG9jKCJDbGljayB0byBhY3RpdmF0ZS4iKSArICI8L2I+IikNCiAgICAgICAgICAgICk7DQogICAgICAgICAgdmFyIHVwZ3JhZGUgPSBHYW1lLlVwZ3JhZGVzQnlJZFtHYW1lLnBlcm1hbmVudFVwZ3JhZGVzW2ldXTsNCiAgICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgICAgICBsb2MoIkN1cnJlbnQ6IikgKw0KICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgIHRpbnlJY29uKHVwZ3JhZGUuaWNvbikgKw0KICAgICAgICAgICAgIiA8Yj4iICsNCiAgICAgICAgICAgIHVwZ3JhZGUuZG5hbWUgKw0KICAgICAgICAgICAgJzwvYj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48L2Rpdj4nICsNCiAgICAgICAgICAgIHRoaXMuZGRlc2MgKw0KICAgICAgICAgICAgKGNvbnRleHQgPT0gInN0YXRzIg0KICAgICAgICAgICAgICA/ICIiDQogICAgICAgICAgICAgIDogIjxicj48Yj4iICsgbG9jKCJDbGljayB0byBhY3RpdmF0ZS4iKSArICI8L2I+IikNCiAgICAgICAgICApOw0KICAgICAgICB9Ow0KICAgICAgfSkoaSk7DQogICAgfQ0KDQogICAgR2FtZS5QZXJtYW5lbnRTbG90SWNvbiA9IGZ1bmN0aW9uIChzbG90KSB7DQogICAgICBpZiAoR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1tzbG90XSA9PSAtMSkgcmV0dXJuIFtzbG90LCAxMF07DQogICAgICByZXR1cm4gR2FtZS5VcGdyYWRlc0J5SWRbR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1tzbG90XV0uaWNvbjsNCiAgICB9Ow0KICAgIEdhbWUuQXNzaWduUGVybWFuZW50U2xvdCA9IGZ1bmN0aW9uIChzbG90KSB7DQogICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgR2FtZS50b29sdGlwLmhpZGUoKTsNCiAgICAgIHZhciBsaXN0ID0gW107DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIG1lLmJvdWdodCAmJg0KICAgICAgICAgIG1lLnVubG9ja2VkICYmDQogICAgICAgICAgIW1lLm5vUGVybSAmJg0KICAgICAgICAgIChtZS5wb29sID09ICIiIHx8IG1lLnBvb2wgPT0gImNvb2tpZSIpDQogICAgICAgICkgew0KICAgICAgICAgIHZhciBmYWlsID0gMDsNCiAgICAgICAgICBmb3IgKHZhciBpaSBpbiBHYW1lLnBlcm1hbmVudFVwZ3JhZGVzKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1tpaV0gPT0gbWUuaWQpIGZhaWwgPSAxOw0KICAgICAgICAgIH0gLy9jaGVjayBpZiBub3QgYWxyZWFkeSBpbiBhbm90aGVyIHBlcm1hc2xvdA0KICAgICAgICAgIGlmICghZmFpbCkgbGlzdC5wdXNoKG1lKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICB2YXIgc29ydE1hcCA9IGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICAgIGlmIChhLm9yZGVyID4gYi5vcmRlcikgcmV0dXJuIDE7DQogICAgICAgIGVsc2UgaWYgKGEub3JkZXIgPCBiLm9yZGVyKSByZXR1cm4gLTE7DQogICAgICAgIGVsc2UgcmV0dXJuIDA7DQogICAgICB9Ow0KICAgICAgbGlzdC5zb3J0KHNvcnRNYXApOw0KDQogICAgICB2YXIgdXBncmFkZXMgPSAiIjsNCiAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgew0KICAgICAgICB2YXIgbWUgPSBsaXN0W2ldOw0KICAgICAgICB1cGdyYWRlcyArPSBHYW1lLmNyYXRlKA0KICAgICAgICAgIG1lLA0KICAgICAgICAgICIiLA0KICAgICAgICAgICJQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO0dhbWUuUHV0VXBncmFkZUluUGVybWFuZW50U2xvdCgiICsNCiAgICAgICAgICAgIG1lLmlkICsNCiAgICAgICAgICAgICIsIiArDQogICAgICAgICAgICBzbG90ICsNCiAgICAgICAgICAgICIpOyIsDQogICAgICAgICAgInVwZ3JhZGVGb3JQZXJtYW5lbnQiICsgbWUuaWQNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIHZhciB1cGdyYWRlID0gR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1tzbG90XTsNCiAgICAgIEdhbWUuU2VsZWN0aW5nUGVybWFuZW50VXBncmFkZSA9IHVwZ3JhZGU7DQogICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgIjxpZCBQaWNrUGVybWFVcGdyYWRlPjxoMz4iICsNCiAgICAgICAgICBsb2MoIlBpY2sgYW4gdXBncmFkZSB0byBtYWtlIHBlcm1hbmVudCIpICsNCiAgICAgICAgICAiPC9oMz4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luOjRweCBhdXRvO2NsZWFyOmJvdGg7d2lkdGg6MTIwcHg7Ij48ZGl2IGNsYXNzPSJjcmF0ZSB1cGdyYWRlIGVuYWJsZWQiIHN0eWxlPSJiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKw0KICAgICAgICAgIC1zbG90ICogNDggKw0KICAgICAgICAgICJweCAiICsNCiAgICAgICAgICAtMTAgKiA0OCArDQogICAgICAgICAgJ3B4OyI+PC9kaXY+PGRpdiBpZD0idXBncmFkZVRvU2xvdE5vbmUiIGNsYXNzPSJjcmF0ZSB1cGdyYWRlIGVuYWJsZWQiIHN0eWxlPSJiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKw0KICAgICAgICAgIC0wICogNDggKw0KICAgICAgICAgICJweCAiICsNCiAgICAgICAgICAtNyAqIDQ4ICsNCiAgICAgICAgICAicHg7ZGlzcGxheToiICsNCiAgICAgICAgICAodXBncmFkZSAhPSAtMSA/ICJub25lIiA6ICJibG9jayIpICsNCiAgICAgICAgICAnOyI+PC9kaXY+PGRpdiBpZD0idXBncmFkZVRvU2xvdFdyYXAiIHN0eWxlPSJmbG9hdDpsZWZ0O2Rpc3BsYXk6JyArDQogICAgICAgICAgKHVwZ3JhZGUgPT0gLTEgPyAibm9uZSIgOiAiYmxvY2siKSArDQogICAgICAgICAgJzsiPicgKw0KICAgICAgICAgIEdhbWUuY3JhdGUoDQogICAgICAgICAgICBHYW1lLlVwZ3JhZGVzQnlJZFt1cGdyYWRlID09IC0xID8gMCA6IHVwZ3JhZGVdLA0KICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAiIiwNCiAgICAgICAgICAgICJ1cGdyYWRlVG9TbG90Ig0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8L2Rpdj48L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0iYmxvY2sgY3JhdGVCb3giIHN0eWxlPSJvdmVyZmxvdy15OnNjcm9sbDtmbG9hdDpsZWZ0O2NsZWFyOmxlZnQ7d2lkdGg6MzE3cHg7cGFkZGluZzowcHg7aGVpZ2h0OjI1MHB4OyI+JyArDQogICAgICAgICAgdXBncmFkZXMgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0iYmxvY2siIHN0eWxlPSJmbG9hdDpyaWdodDt3aWR0aDoxNTJweDtjbGVhcjpyaWdodDtoZWlnaHQ6MjM0cHg7Ij4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAnSGVyZSBhcmUgYWxsIHRoZSB1cGdyYWRlcyB5b3VcJ3ZlIHB1cmNoYXNlZCBsYXN0IHBsYXl0aHJvdWdoLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PlBpY2sgb25lIHRvIHBlcm1hbmVudGx5IGdhaW4gaXRzIGVmZmVjdHMhPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+WW91IGNhbiByZWFzc2lnbiB0aGlzIHNsb3QgYW55dGltZSB5b3UgYXNjZW5kLicNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgWw0KICAgICAgICAgIFsNCiAgICAgICAgICAgIGxvYygiQ29uZmlybSIpLA0KICAgICAgICAgICAgIkdhbWUucGVybWFuZW50VXBncmFkZXNbIiArDQogICAgICAgICAgICAgIHNsb3QgKw0KICAgICAgICAgICAgICAiXT1HYW1lLlNlbGVjdGluZ1Blcm1hbmVudFVwZ3JhZGU7R2FtZS5CdWlsZEFzY2VuZFRyZWUoKTtHYW1lLkNsb3NlUHJvbXB0KCk7IiwNCiAgICAgICAgICBdLA0KICAgICAgICAgIGxvYygiQ2FuY2VsIiksDQogICAgICAgIF0sDQogICAgICAgIDAsDQogICAgICAgICJ3aWRlUHJvbXB0Ig0KICAgICAgKTsNCiAgICB9Ow0KICAgIEdhbWUuU2VsZWN0aW5nUGVybWFuZW50VXBncmFkZSA9IC0xOw0KICAgIEdhbWUuUHV0VXBncmFkZUluUGVybWFuZW50U2xvdCA9IGZ1bmN0aW9uICh1cGdyYWRlLCBzbG90KSB7DQogICAgICBHYW1lLlNlbGVjdGluZ1Blcm1hbmVudFVwZ3JhZGUgPSB1cGdyYWRlOw0KICAgICAgbCgidXBncmFkZVRvU2xvdFdyYXAiKS5pbm5lckhUTUwgPSAiIjsNCiAgICAgIGwoInVwZ3JhZGVUb1Nsb3RXcmFwIikuc3R5bGUuZGlzcGxheSA9IHVwZ3JhZGUgPT0gLTEgPyAibm9uZSIgOiAiYmxvY2siOw0KICAgICAgbCgidXBncmFkZVRvU2xvdE5vbmUiKS5zdHlsZS5kaXNwbGF5ID0gdXBncmFkZSAhPSAtMSA/ICJub25lIiA6ICJibG9jayI7DQogICAgICBsKCJ1cGdyYWRlVG9TbG90V3JhcCIpLmlubmVySFRNTCA9IEdhbWUuY3JhdGUoDQogICAgICAgIEdhbWUuVXBncmFkZXNCeUlkW3VwZ3JhZGUgPT0gLTEgPyAwIDogdXBncmFkZV0sDQogICAgICAgICIiLA0KICAgICAgICAiIiwNCiAgICAgICAgInVwZ3JhZGVUb1Nsb3QiDQogICAgICApOw0KICAgIH07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN0YXJzcGF3biIsDQogICAgICBsb2MoIkVnZ3MgZHJvcCA8Yj4lMSU8L2I+IG1vcmUgb2Z0ZW4uIiwgMTApICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJHb2xkZW4gY29va2llcyBhcHBlYXIgPGI+JTElPC9iPiBtb3JlIG9mdGVuIGR1cmluZyAlMi4iLCBbDQogICAgICAgICAgMiwNCiAgICAgICAgICBsb2MoIkVhc3RlciIpLA0KICAgICAgICBdKSwNCiAgICAgIDExMTExMSwNCiAgICAgIFswLCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU2Vhc29uIHN3aXRjaGVyIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdGFyc25vdyIsDQogICAgICBsb2MoIkNocmlzdG1hcyBjb29raWVzIGRyb3AgPGI+JTElPC9iPiBtb3JlIG9mdGVuLiIsIDUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJSZWluZGVlciBhcHBlYXIgPGI+JTElPC9iPiBtb3JlIG9mdGVuLiIsIDUpLA0KICAgICAgMTExMTExLA0KICAgICAgWzEyLCA5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTZWFzb24gc3dpdGNoZXIiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN0YXJ0ZXJyb3IiLA0KICAgICAgbG9jKCJTcG9va3kgY29va2llcyBkcm9wIDxiPiUxJTwvYj4gbW9yZSBvZnRlbi4iLCAxMCkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkdvbGRlbiBjb29raWVzIGFwcGVhciA8Yj4lMSU8L2I+IG1vcmUgb2Z0ZW4gZHVyaW5nICUyLiIsIFsNCiAgICAgICAgICAyLA0KICAgICAgICAgIGxvYygiSGFsbG93ZWVuIiksDQogICAgICAgIF0pLA0KICAgICAgMTExMTExLA0KICAgICAgWzEzLCA4XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTZWFzb24gc3dpdGNoZXIiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN0YXJsb3ZlIiwNCiAgICAgIGxvYygiSGVhcnQgY29va2llcyBhcmUgPGI+JTElPC9iPiBtb3JlIHBvd2VyZnVsLiIsIDUwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPiUxJTwvYj4gbW9yZSBvZnRlbiBkdXJpbmcgJTIuIiwgWw0KICAgICAgICAgIDIsDQogICAgICAgICAgbG9jKCJWYWxlbnRpbmUncyBkYXkiKSwNCiAgICAgICAgXSksDQogICAgICAxMTExMTEsDQogICAgICBbMjAsIDNdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNlYXNvbiBzd2l0Y2hlciJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU3RhcnRyYWRlIiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPiUxJTwvYj4gbW9yZSBvZnRlbiBkdXJpbmcgJTIuIiwgWw0KICAgICAgICA1LA0KICAgICAgICBsb2MoIkJ1c2luZXNzIGRheSIpLA0KICAgICAgXSksDQogICAgICAxMTExMTEsDQogICAgICBbMTcsIDZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNlYXNvbiBzd2l0Y2hlciJdOw0KDQogICAgdmFyIGFuZ2VsUHJpY2VGYWN0b3IgPSA3Ow0KICAgIHZhciBkZXNjID0gZnVuY3Rpb24gKHBlcmNlbnQsIHRvdGFsKSB7DQogICAgICByZXR1cm4gbG9jKA0KICAgICAgICAiWW91IGdhaW4gYW5vdGhlciA8Yj4rJTElPC9iPiBvZiB5b3VyIHJlZ3VsYXIgQ3BTIHdoaWxlIHRoZSBnYW1lIGlzIGNsb3NlZCwgZm9yIGEgdG90YWwgb2YgPGI+JTIlPC9iPi4iLA0KICAgICAgICBbcGVyY2VudCwgdG90YWxdDQogICAgICApOw0KICAgIH07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBbmdlbHMiLA0KICAgICAgZGVzYygxMCwgMTUpICsNCiAgICAgICAgIjxxPkxvd2VzdC1yYW5raW5nIGF0IHRoZSBmaXJzdCBzcGhlcmUgb2YgcGFzdHJ5IGhlYXZlbiwgYW5nZWxzIGFyZSB0YXNrZWQgd2l0aCBkZWxpdmVyaW5nIG5ldyByZWNpcGVzIHRvIHRoZSBtb3J0YWxzIHRoZXkgZGVlbSB3b3J0aHkuPC9xPiIsDQogICAgICBNYXRoLnBvdyhhbmdlbFByaWNlRmFjdG9yLCAxKSwNCiAgICAgIFswLCAxMV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBcmNoYW5nZWxzIiwNCiAgICAgIGRlc2MoMTAsIDI1KSArDQogICAgICAgICI8cT5NZW1iZXJzIG9mIHRoZSBmaXJzdCBzcGhlcmUgb2YgcGFzdHJ5IGhlYXZlbiwgYXJjaGFuZ2VscyBhcmUgcmVzcG9uc2libGUgZm9yIHRoZSBzbW9vdGggZnVuY3Rpb25pbmcgb2YgdGhlIHdvcmxkJ3MgbGFyZ2VzdCBiYWtlcmllcy48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDIpLA0KICAgICAgWzEsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJBbmdlbHMiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlZpcnR1ZXMiLA0KICAgICAgZGVzYygxMCwgMzUpICsNCiAgICAgICAgIjxxPkZvdW5kIGF0IHRoZSBzZWNvbmQgc3BoZXJlIG9mIHBhc3RyeSBoZWF2ZW4sIHZpcnR1ZXMgbWFrZSB1c2Ugb2YgdGhlaXIgaGVhdmVubHkgc3RyZW5ndGggdG8gcHVzaCBhbmQgZHJhZyB0aGUgc3RhcnMgb2YgdGhlIGNvc21vcy48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDMpLA0KICAgICAgWzIsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJBcmNoYW5nZWxzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEb21pbmlvbnMiLA0KICAgICAgZGVzYygxMCwgNDUpICsNCiAgICAgICAgIjxxPlJ1bGluZyBvdmVyIHRoZSBzZWNvbmQgc3BoZXJlIG9mIHBhc3RyeSBoZWF2ZW4sIGRvbWluaW9ucyBob2xkIGEgbWFuYWdlcmlhbCBwb3NpdGlvbiBhbmQgYXJlIGluIGNoYXJnZSBvZiBhY2NvdW50aW5nIGFuZCByZWd1bGF0aW5nIHNjaGVkdWxlcy48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDQpLA0KICAgICAgWzMsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJWaXJ0dWVzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDaGVydWJpbSIsDQogICAgICBkZXNjKDEwLCA1NSkgKw0KICAgICAgICAiPHE+U2llZ2luZyBhdCB0aGUgZmlyc3Qgc3BoZXJlIG9mIHBhc3RyeSBoZWF2ZW4sIHRoZSBmb3VyLWZhY2VkIGNoZXJ1YmltIHNlcnZlIGFzIGhlYXZlbmx5IGJvdW5jZXJzIGFuZCBib2R5Z3VhcmRzLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgNSksDQogICAgICBbNCwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkRvbWluaW9ucyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2VyYXBoaW0iLA0KICAgICAgZGVzYygxMCwgNjUpICsNCiAgICAgICAgIjxxPkxlYWRpbmcgdGhlIGZpcnN0IHNwaGVyZSBvZiBwYXN0cnkgaGVhdmVuLCBzZXJhcGhpbSBwb3NzZXNzIHVsdGltYXRlIGtub3dsZWRnZSBvZiBldmVyeXRoaW5nIHBlcnRhaW5pbmcgdG8gYmFraW5nLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgNiksDQogICAgICBbNSwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkNoZXJ1YmltIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJHb2QiLA0KICAgICAgZGVzYygxMCwgNzUpICsgIjxxPkxpa2UgU2FudGEsIGJ1dCBsZXNzIGZ1bi48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDcpLA0KICAgICAgWzYsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTZXJhcGhpbSJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJUd2luIEdhdGVzIG9mIFRyYW5zY2VuZGVuY2UiLA0KICAgICAgbG9jKA0KICAgICAgICAiWW91IG5vdyA8Yj5rZWVwIG1ha2luZyBjb29raWVzIHdoaWxlIHRoZSBnYW1lIGlzIGNsb3NlZDwvYj4sIGF0IHRoZSByYXRlIG9mIDxiPiUxJTwvYj4gb2YgeW91ciByZWd1bGFyIENwUyBhbmQgdXAgdG8gPGI+MSBob3VyPC9iPiBhZnRlciB0aGUgZ2FtZSBpcyBjbG9zZWQuPGJyPihCZXlvbmQgMSBob3VyLCB0aGlzIGlzIHJlZHVjZWQgYnkgYSBmdXJ0aGVyICUyJSAtIHlvdXIgcmF0ZSBnb2VzIGRvd24gdG8gPGI+JTMlPC9iPiBvZiB5b3VyIENwUy4pIiwNCiAgICAgICAgWzUsIDkwLCAwLjVdDQogICAgICApICsNCiAgICAgICAgIjxxPlRoaXMgaXMgb25lIG9jY2FzaW9uIHlvdSdyZSBhbHdheXMgdW5kZXJkcmVzc2VkIGZvci4gRG9uJ3Qgd29ycnksIGp1c3QgcnVzaCBpbiBwYXN0IHRoZSBib3VuY2VyIGFuZCBwcmV0ZW5kIHlvdSBrbm93IHBlb3BsZS48L3E+IiwNCiAgICAgIDEsDQogICAgICBbMTUsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIZWF2ZW5seSBsdWNrIiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPiUxJTwvYj4gbW9yZSBvZnRlbi4iLCA1KSArDQogICAgICAgICI8cT5Tb21lb25lIHVwIHRoZXJlIGxpa2VzIHlvdS48L3E+IiwNCiAgICAgIDc3LA0KICAgICAgWzIyLCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiTGFzdGluZyBmb3J0dW5lIiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZSBlZmZlY3RzIGxhc3QgPGI+JTElPC9iPiBsb25nZXIuIiwgMTApICsNCiAgICAgICAgIjxxPlRoaXMgaXNuJ3QgeW91ciBhdmVyYWdlIGV2ZXJ5ZGF5IGx1Y2suIFRoaXMgaXMuLi4gYWR2YW5jZWQgbHVjay48L3E+IiwNCiAgICAgIDc3NywNCiAgICAgIFsyMywgNl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiSGVhdmVubHkgbHVjayJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRGVjaXNpdmUgZmF0ZSIsDQogICAgICBsb2MoIkdvbGRlbiBjb29raWVzIHN0YXkgPGI+JTElPC9iPiBsb25nZXIuIiwgNSkgKw0KICAgICAgICAiPHE+TGlmZSBqdXN0IGdvdCBhIGJpdCBtb3JlIGludGVuc2UuPC9xPiIsDQogICAgICA3Nzc3LA0KICAgICAgWzEwLCAxNF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiTGFzdGluZyBmb3J0dW5lIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRpdmluZSBkaXNjb3VudCIsDQogICAgICBsb2MoIkFsbCBidWlsZGluZ3MgYXJlIDxiPiUxJSBjaGVhcGVyPC9iPi4iLCAxKSArDQogICAgICAgICI8cT5Tb21lb25lIHNwZWNpYWwgZGVzZXJ2ZXMgYSBzcGVjaWFsIHByaWNlLjwvcT4iLA0KICAgICAgOTk5OTksDQogICAgICBbMjEsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkRlY2lzaXZlIGZhdGUiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRpdmluZSBzYWxlcyIsDQogICAgICBsb2MoIkFsbCB1cGdyYWRlcyBhcmUgPGI+JTElIGNoZWFwZXI8L2I+LiIsIDEpICsNCiAgICAgICAgIjxxPkV2ZXJ5dGhpbmcgbXVzdCBnbyE8L3E+IiwNCiAgICAgIDk5OTk5LA0KICAgICAgWzE4LCA3XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJEZWNpc2l2ZSBmYXRlIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEaXZpbmUgYmFrZXJpZXMiLA0KICAgICAgbG9jKCJDb29raWUgdXBncmFkZXMgYXJlIDxiPiUxIHRpbWVzIGNoZWFwZXI8L2I+LiIsIDUpICsNCiAgICAgICAgIjxxPlRoZXkgc3VyZSBrbm93IHdoYXQgdGhleSdyZSBkb2luZy48L3E+IiwNCiAgICAgIDM5OTk5OSwNCiAgICAgIFsxNywgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiRGl2aW5lIHNhbGVzIiwgIkRpdmluZSBkaXNjb3VudCJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdGFydGVyIGtpdCIsDQogICAgICBsb2MoIllvdSBzdGFydCB3aXRoIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIDEwKSkgKw0KICAgICAgICAiPHE+VGhpcyBjYW4gY29tZSBpbiBoYW5keS48L3E+IiwNCiAgICAgIDUwLA0KICAgICAgWzAsIDE0XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWw0KICAgICAgIlRpbiBvZiBicml0aXNoIHRlYSBiaXNjdWl0cyIsDQogICAgICAiQm94IG9mIG1hY2Fyb25zIiwNCiAgICAgICJCb3ggb2YgYnJhbmQgYmlzY3VpdHMiLA0KICAgICAgIlRpbiBvZiBidXR0ZXIgY29va2llcyIsDQogICAgXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN0YXJ0ZXIga2l0Y2hlbiIsDQogICAgICBsb2MoIllvdSBzdGFydCB3aXRoIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGdyYW5kbWEiLCA1KSkgKw0KICAgICAgICAiPHE+V2hlcmUgZGlkIHRoZXNlIGNvbWUgZnJvbT88L3E+IiwNCiAgICAgIDUwMDAsDQogICAgICBbMSwgMTRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlN0YXJ0ZXIga2l0Il07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIYWxvIGdsb3ZlcyIsDQogICAgICBsb2MoIkNsaWNraW5nIGlzIDxiPiUxJTwvYj4gbW9yZSBwb3dlcmZ1bC4iLCAxMCkgKw0KICAgICAgICAiPHE+U21pdGUgdGhhdCBjb29raWUuPC9xPiIsDQogICAgICA1NTU1NSwNCiAgICAgIFsyMiwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU3RhcnRlciBraXQiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGFuZ2VscyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPkFsbCBjYXRzIGdvIHRvIGhlYXZlbi48L3E+IiwNCiAgICAgIDkwMDAsDQogICAgICBbMjMsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkRvbWluaW9ucyJdOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJVbmhvbHkgYmFpdCIsDQogICAgICBsb2MoIldyaW5rbGVycyBhcHBlYXIgPGI+JTEgdGltZXM8L2I+IGFzIGZhc3QuIiwgNSkgKw0KICAgICAgICAiPHE+Tm8gd3JpbmtsZXIgY2FuIHJlc2lzdCB0aGUgc2NlbnQgb2Ygd29ybSBiaXNjdWl0cy48L3E+IiwNCiAgICAgIDQ0NDQ0LA0KICAgICAgWzE1LCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU3RhcnRlciBraXRjaGVuIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTYWNyaWxlZ2lvdXMgY29ycnVwdGlvbiIsDQogICAgICBsb2MoIldyaW5rbGVycyBleHBsb2RlIGludG8gPGI+JTElIG1vcmUgY29va2llczwvYj4uIiwgNSkgKw0KICAgICAgICAiPHE+VW5pcXVlIGluIHRoZSBhbmltYWwga2luZ2RvbSwgdGhlIHdyaW5rbGVyIGRpZ2VzdGl2ZSB0cmFjdCBpcyBhYmxlIHRvIHdpdGhzdGFuZCBhbiBpbmNyZWRpYmxlIGRlZ3JlZSBvZiBkaWxhdGlvbiAtIHByb3ZpZGVkIHlvdSBwcm9kIHRoZW0gYXBwcm9wcmlhdGVseS48L3E+IiwNCiAgICAgIDQ0NDQ0NCwNCiAgICAgIFsxOSwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiVW5ob2x5IGJhaXQiXTsNCg0KICAgIG9yZGVyID0gMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJYdHJlbWUgd2Fsa2VycyIsDQogICAgICAnPHE+Q29tcGxldGUgd2l0aCBmbGFtZSBkZWNhbHMgYW5kIGEgbGl0dGxlIGhvcm4gdGhhdCBnb2VzICJ0b290Ii48L3E+JywNCiAgICAgICJHcmFuZG1hIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGdWRnZSBmdW5ndXMiLA0KICAgICAgIjxxPkEgc3VnYXJ5IHBhcmFzaXRlIHdob3NlIHRlbmRyaWxzIGhlbHAgY29va2llIGdyb3d0aC48YnI+UGxlYXNlIGRvIG5vdCBicmVhdGhlIGluIHRoZSBzcG9yZXMuIEluIGNhc2Ugb2Ygc3BvcmUgaW5nZXN0aW9uLCBzZWVrIG1lZGljYWwgaGVscCB3aXRoaW4gdGhlIG5leHQgMzYgc2Vjb25kcy48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gNDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQbGFuZXRzcGxpdHRlcnMiLA0KICAgICAgIjxxPlRoZXNlIG5ldyBzdGF0ZS1vZi10aGUtYXJ0IGV4Y2F2YXRvcnMgaGF2ZSBiZWVuIHRlc3RlZCBvbiBNZXJ1bGEsIEdsb2JvcnQgYW5kIEZsd2FuemEgVkksIGFtb25nIG90aGVyIGRpc3RhbnQgcGxhbmV0cyB3aGljaCBoYXZlIGJlZW4gY3VyaW91c2x5IHF1aWV0IGxhdGVseS48L3E+IiwNCiAgICAgICJNaW5lIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDeWJvcmcgd29ya2ZvcmNlIiwNCiAgICAgICI8cT5TZW1pLXN5bnRoZXRpYyBvcmdhbmlzbXMgZG9uJ3Qgc2xhY2sgb2ZmLCBkb24ndCB1bmlvbml6ZSwgYW5kIGhhdmUgMjAlIHNob3J0ZXIgbHVuY2ggYnJlYWtzLCBtYWtpbmcgdGhlbSBpZGVhbCBsYWJvciBmb2RkZXIuPC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDUyNTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2F5IG9mIHRoZSB3YWxsZXQiLA0KICAgICAgIjxxPlRoaXMgbmV3IG1vbmV0YXJ5IHNjaG9vbCBvZiB0aG91Z2h0IGlzIGFsbCB0aGUgcmFnZSBvbiB0aGUgYmFua2luZyBzY2VuZTsgZm9sbG93IGl0cyBwcmVjZXB0cyBhbmQgeW91IG1heSBqdXN0IHByb2ZpdCBmcm9tIGl0LjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgNw0KICAgICk7DQogICAgb3JkZXIgPSA1NTA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNyZWF0aW9uIG15dGgiLA0KICAgICAgIjxxPlN0b3JpZXMgaGF2ZSBiZWVuIGNpcmN1bGF0aW5nIGFib3V0IHRoZSBvcmlnaW5zIG9mIHRoZSB2ZXJ5IGZpcnN0IGNvb2tpZSB0aGF0IHdhcyBldmVyIGJha2VkOyB0YWxlcyBvZiBob3cgaXQgYWxsIGJlZ2FuLCBpbiB0aGUgRG91Z2ggYmV5b25kIHRpbWUgYW5kIHRoZSBPdmVucyBvZiBkZXN0aW55LjwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ29va2llbWFuY3kiLA0KICAgICAgIjxxPlRoZXJlIGl0IGlzOyB0aGUgcGVyZmVjdGVkIHNjaG9vbCBvZiBiYWtpbmcgbWFnaWMuIEZyb20gc3VtbW9uaW5nIGNoaXBzIHRvIGhleGluZyBudXRzLCB0aGVyZSBpcyBub3QgYSBzaW5nbGUgcGFydCBvZiBjb29raWUtbWFraW5nIHRoYXQgaGFzbid0IGJlZW4gaW1wcm92ZWQgdGVuZm9sZCBieSBtYWdpYyB0cmlja3MuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gNjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJEeXNvbiBzcGhlcmUiLA0KICAgICAgIjxxPllvdSd2ZSBmb3VuZCBhIHdheSB0byBhcHBseSB5b3VyIGtub3dsZWRnZSBvZiBjb3NtaWMgdGVjaG5vbG9neSB0byBzbGlnaHRseSBtb3JlIGxvY2FsIGVuZGVhdm9yczsgdGhpcyBnaWdhbnRpYyBzcGhlcmUgb2YgbWV0YS1tYXRlcmlhbHMsIHdyYXBwaW5nIHRoZSBzb2xhciBzeXN0ZW0sIGlzIHN1cmUgdG8ga2ljayB5b3VyIGJha2luZyBhYmlsaXRpZXMgdXAgYSBub3RjaC48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDcwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlb3J5IG9mIGF0b21pYyBmbHVpZGl0eSIsDQogICAgICAiPHE+UHVzaGluZyBhbGNoZW15IHRvIGl0cyBtb3N0IGV4dHJlbWUgbGltaXRzLCB5b3UgZmluZCB0aGF0IGV2ZXJ5dGhpbmcgaXMgdHJhbnNtdXRhYmxlIGludG8gYW55dGhpbmcgZWxzZSAtIGxlYWQgdG8gZ29sZCwgbWVyY3VyeSB0byB3YXRlcjsgbW9yZSBpbXBvcnRhbnRseSwgeW91IHJlYWxpemUgdGhhdCBhbnl0aGluZyBjYW4gLWFuZCBzaG91bGQtIGJlIGNvbnZlcnRlZCB0byBjb29raWVzLjwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFbmQgb2YgdGltZXMgYmFjay11cCBwbGFuIiwNCiAgICAgICI8cT5KdXN0IGluIGNhc2UsIGFscmlnaHQ/PC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gOTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJHcmVhdCBsb29wIGh5cG90aGVzaXMiLA0KICAgICAgIjxxPldoYXQgaWYgb3VyIHVuaXZlcnNlIGlzIGp1c3Qgb25lIGluc3RhbmNlIG9mIGFuIGluZmluaXRlIGN5Y2xlPyBXaGF0IGlmLCBiZWZvcmUgYW5kIGFmdGVyIGl0LCBzdHJldGNoZWQgaW5maW5pdGUgYW1vdW50cyBvZiB0aGUgc2FtZSB1bml2ZXJzZSwgdGhlbXNlbHZlcyBjb250YWluaW5nIGluZmluaXRlIGFtb3VudHMgb2YgY29va2llcz88L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgNw0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGUgUHVsc2UiLA0KICAgICAgIjxxPllvdSd2ZSB0YXBwZWQgaW50byB0aGUgdmVyeSBwdWxzZSBvZiB0aGUgY29zbW9zLCBhIHRpbWVsZXNzIHJoeXRobSBhbG9uZyB3aGljaCBldmVyeSBtYXRlcmlhbCBhbmQgYW50aW1hdGVyaWFsIHRoaW5nIGJlYXRzIGluIHVuaXNvbi4gVGhpcywgc29tZWhvdywgbWVhbnMgbW9yZSBjb29raWVzLjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTHV4IHNhbmN0b3J1bSIsDQogICAgICAiPHE+WW91ciBwcmlzbSBhdHRlbmRhbnRzIGhhdmUgYmVjb21lIGluY3JlYXNpbmdseSBtZXNtZXJpemVkIHdpdGggc29tZXRoaW5nIGluIHRoZSBsaWdodCAtIG9yIG1heWJlIHNvbWV0aGluZyBiZXlvbmQgaXQ7IGJleW9uZCB1cyBhbGwsIHBlcmhhcHM/PC9xPiIsDQogICAgICAiUHJpc20iLA0KICAgICAgNw0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIFVuYnJpZGxpbmciLA0KICAgICAgIjxxPkl0IG1pZ2h0IGJlIGEgY2xhc3NpYyB0YWxlIG9mIGJhZCBwYXJlbnRpbmcsIGJ1dCBsZXQncyBzZWUgd2hlcmUgZ3JhbmRtYSBpcyBnb2luZyB3aXRoIHRoaXMuPC9xPiIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDMwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2hlYXQgdHJpZmZpZHMiLA0KICAgICAgIjxxPlRha2luZyBjYXJlIG9mIGNyb3BzIGlzIHNvIG11Y2ggZWFzaWVyIHdoZW4geW91ciBwbGFudHMgY2FuIGp1c3Qgd2FsayBhYm91dCBhbmQgaGVscCBhcm91bmQgdGhlIGZhcm0uPGJyPkRvIG5vdCBwZXQuIERvIG5vdCBmZWVkLiBEbyBub3QgYXR0ZW1wdCB0byBjb252ZXJzZSB3aXRoLjwvcT4iLA0KICAgICAgIkZhcm0iLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNhbm9sYSBvaWwgd2VsbHMiLA0KICAgICAgIjxxPkEgcHJldmlvdXNseSB1bnRhcHBlZCByZXNvdXJjZSwgY2Fub2xhIG9pbCBwZXJtZWF0ZXMgdGhlIHVuZGVyZ3JvdW5kIG9saWZlcnMgd2hpY2ggZ3JhbnQgaXQgaXRzIHBhcnRpY3VsYXIgdGFzdGUgYW5kIGx1Y3JhdGl2ZSBwcm9wZXJ0aWVzLjwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSA1MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIjc4LWhvdXIgZGF5cyIsDQogICAgICAiPHE+V2h5IGRpZG4ndCB3ZSB0aGluayBvZiB0aGlzIGVhcmxpZXI/PC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDUyNTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIHN0dWZmIHJhdGlvbmFsZSIsDQogICAgICAiPHE+SWYgbm90IG5vdywgd2hlbj8gSWYgbm90IGl0LCB3aGF0PyBJZiBub3QgdGhpbmdzLi4uIHN0dWZmPzwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSA1NTA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRoZW9jcmFjeSIsDQogICAgICAiPHE+WW91J3ZlIHR1cm5lZCB5b3VyIGNvb2tpZSBlbXBpcmUgaW50byBhIHBlcmZlY3QgdGhlb2NyYWN5LCBnYXRoZXJpbmcgdGhlIGFkb3JhdGlvbiBvZiB6aWxsaW9ucyBvZiBmb2xsb3dlcnMgZnJvbSBldmVyeSBjb3JuZXIgb2YgdGhlIHVuaXZlcnNlLjxicj5Eb24ndCBsZXQgaXQgZ28gdG8geW91ciBoZWFkLjwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUmFiYml0IHRyaWNrIiwNCiAgICAgICI8cT5Vc2luZyBub3RoaW5nIG1vcmUgdGhhbiBhIGZhbmN5IHRvcCBoYXQsIHlvdXIgd2l6YXJkcyBoYXZlIGZvdW5kIGEgd2F5IHRvIHNpbXVsdGFuZW91c2x5IGN1cmIgcmFiYml0IHBvcHVsYXRpb24gYW5kIHByb2R1Y2UgaGVhcHMgb2YgZXh0cmEgY29va2llcyBmb3IgYmFzaWNhbGx5IGZyZWUhPGJyPlJlc3VsdGluZyBjb29raWVzIG1heSBvciBtYXkgbm90IGJlIGZpdCBmb3IgdmVnYW5zLjwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIGZpbmFsIGZyb250aWVyIiwNCiAgICAgICI8cT5JdCdzIGJlZW4gYSBsb25nIHJvYWQsIGdldHRpbmcgZnJvbSB0aGVyZSB0byBoZXJlLiBJdCdzIGFsbCB3b3J0aCBpdCB0aG91Z2ggLSB0aGUgc2lnaHRzIGFyZSBsb3ZlbHkgYW5kIHRoZSBvaWwgcHJpY2VzIHNsaWdodGx5IG1vcmUgcmVhc29uYWJsZS48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDcwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQmVpZ2UgZ29vIiwNCiAgICAgICI8cT5XZWxsIG5vdyB5b3UndmUgZG9uZSBpdC4gR29vZCBqb2IuIFZlcnkgbmljZS4gVGhhdCdzIDMgZ2FsYXhpZXMgeW91J3ZlIGp1c3QgY29udmVydGVkIGludG8gY29va2llcy4gR29vZCB0aGluZyB5b3UgY2FuIGhvcCBmcm9tIHVuaXZlcnNlIHRvIHVuaXZlcnNlLjwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDgNCiAgICApOw0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNYWRkZW5pbmcgY2hhbnRzIiwNCiAgICAgICI8cT5BIHBvcHVsYXIgdmVyc2UgZ29lcyBsaWtlIHNvIDogXCJqYXUnaG4gbWFkZGVuIGphdSdobiBtYWRkZW4gYWVpb3VhZWlvdWFlaW91IGJyYnJicmJyYnJicmJyXCI8L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSA5MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNvb2tpZXRvcGlhbiBtb21lbnRzIG9mIG1heWJlIiwNCiAgICAgICI8cT5SZW1pbmlzY2luZyBob3cgdGhpbmdzIGNvdWxkIGhhdmUgYmVlbiwgc2hvdWxkIGhhdmUgYmVlbiwgd2lsbCBoYXZlIGJlZW4uPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDgNCiAgICApOw0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU29tZSBvdGhlciBzdXBlci10aW55IGZ1bmRhbWVudGFsIHBhcnRpY2xlPyBQcm9iYWJseT8iLA0KICAgICAgIjxxPldoZW4gZXZlbiB0aGUgdW5pdmVyc2UgaXMgcnVubmluZyBvdXQgb2YgaWRlYXMsIHRoYXQncyB3aGVuIHlvdSBrbm93IHlvdSdyZSBuZWFyaW5nIHRoZSBlbmQuPC9xPiIsDQogICAgICAiQW50aW1hdHRlciBjb25kZW5zZXIiLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSAxMTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSZXZlcnNlIHNoYWRvd3MiLA0KICAgICAgIjxxPk9oIG1hbiwgdGhpcyBpcyByZWFsbHkgbWVzc2luZyB3aXRoIHlvdXIgZXllcy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICA4DQogICAgKTsNCg0KICAgIG9yZGVyID0gMjAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gYWNjb3VudGFudHMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5idXNpbmVzcyBnb2luZyBncmVhdCwgc2lyPC9xPiIsDQogICAgICA5MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBHYW1lLkdldEljb24oIktpdHRlbiIsIDYpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCA2LCAxOCk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gc3BlY2lhbGlzdHMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5vcHRpbWVvd3ppbmcgeW91ciB3b3JrZmxvdyBsaWtlIHdob2FoLCBzaXI8L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgNykNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDcsIDE4KTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIktpdHRlbiBleHBlcnRzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKyAiPHE+MTAgeWVhcnMgZXhwdXJycnRpc2UgaW4gdGhlIGNvb2tpZSBidXNpbmVzcywgc2lyPC9xPiIsDQogICAgICA5MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBHYW1lLkdldEljb24oIktpdHRlbiIsIDgpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCA4LCAxOCk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkhvdyB0byBiYWtlIHlvdXIgZHJhZ29uIiwNCiAgICAgIGxvYygNCiAgICAgICAgIkFsbG93cyB5b3UgdG8gcHVyY2hhc2UgYSA8Yj5jcnVtYmx5IGVnZzwvYj4gb25jZSB5b3UgaGF2ZSBlYXJuZWQgMSBtaWxsaW9uIGNvb2tpZXMuIg0KICAgICAgKSArDQogICAgICAgICc8cT5BIHRvbWUgZnVsbCBvZiBoZWxwZnVsIHRpcHMgc3VjaCBhcyAib2ggZ29kLCBzdGF5IGF3YXkgZnJvbSBpdCIsICJ3aHkgZGlkIHdlIGJ1eSB0aGlzIHRoaW5nLCBpdFwncyBub3QgZXZlbiBob3VzZS1icm9rZW4iIGFuZCAiZ3Jvb20gdHdpY2UgYSB3ZWVrIGluIHRoZSBkaXJlY3Rpb24gb2YgdGhlIHNjYWxlcyIuPC9xPicsDQogICAgICA5LA0KICAgICAgWzIyLCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCg0KICAgIG9yZGVyID0gMjUxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBIGNydW1ibHkgZWdnIiwNCiAgICAgIGxvYygiVW5sb2NrcyB0aGUgPGI+Y29va2llIGRyYWdvbiBlZ2c8L2I+LiIpICsNCiAgICAgICAgIjxxPlRoYW5rIHlvdSBmb3IgYWRvcHRpbmcgdGhpcyByb2J1c3QsIGZ1bi1sb3ZpbmcgY29va2llIGRyYWdvbiEgSXQgd2lsbCBicmluZyB5b3UgeWVhcnMgb2Ygam95IGFuZCBlbnRlcnRhaW5tZW50Ljxicj5LZWVwIGluIGEgZHJ5IGFuZCBjb29sIHBsYWNlLCBhbmQgYXdheSBmcm9tIG90aGVyIGhvdXNlIHBldHMuIFN1YnNjcmlwdGlvbiB0byBob21lIGluc3VyYW5jZSBpcyBzdHJvbmdseSBhZHZpc2VkLjwvcT4iLA0KICAgICAgMjUsDQogICAgICBbMjEsIDEyXQ0KICAgICk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkNoaW1lcmEiLA0KICAgICAgbG9jKCJTeW5lcmd5IHVwZ3JhZGVzIGFyZSA8Yj4lMSUgY2hlYXBlcjwvYj4uIiwgMikgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIllvdSBnYWluIGFub3RoZXIgPGI+KyUxJTwvYj4gb2YgeW91ciByZWd1bGFyIENwUyB3aGlsZSB0aGUgZ2FtZSBpcyBjbG9zZWQuIiwNCiAgICAgICAgICA1DQogICAgICAgICkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIllvdSByZXRhaW4gb3B0aW1hbCBjb29raWUgcHJvZHVjdGlvbiB3aGlsZSB0aGUgZ2FtZSBpcyBjbG9zZWQgZm9yIDxiPiUxIG1vcmUgZGF5czwvYj4uIiwNCiAgICAgICAgICAyDQogICAgICAgICkgKw0KICAgICAgICAiPHE+TW9yZSB0aGFuIHRoZSBzdW0gb2YgaXRzIHBhcnRzLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgOSksDQogICAgICBbMjQsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkdvZCIsICJMdWNpZmVyIiwgIlN5bmVyZ2llcyBWb2wuIElJIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlRpbiBvZiBidXR0ZXIgY29va2llcyIsDQogICAgICBsb2MoIkNvbnRhaW5zIGFuIGFzc29ydG1lbnQgb2YgcmljaCBidXR0ZXIgY29va2llcy4iKSArDQogICAgICAgICI8cT5GaXZlIHZhcmlldGllcyBvZiBkYW5pc2ggY29va2llcy48YnI+Q29tcGxldGUgd2l0aCBsaXR0bGUgcGFwZXIgY3Vwcy48L3E+IiwNCiAgICAgIDI1LA0KICAgICAgWzIxLCA5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJIZWF2ZW5seSBjb29raWVzIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkdvbGRlbiBzd2l0Y2giLA0KICAgICAgbG9jKA0KICAgICAgICAiVW5sb2NrcyB0aGUgPGI+Z29sZGVuIHN3aXRjaDwvYj4sIHdoaWNoIHBhc3NpdmVseSBib29zdHMgeW91ciBDcFMgYnkgJTElIGJ1dCBkaXNhYmxlcyBnb2xkZW4gY29va2llcy4iLA0KICAgICAgICA1MA0KICAgICAgKSArICI8cT5MZXNzIGNsaWNraW5nLCBtb3JlIGlkbGluZy48L3E+IiwNCiAgICAgIDk5OSwNCiAgICAgIFsyMSwgMTBdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkhlYXZlbmx5IGx1Y2siXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQ2xhc3NpYyBkYWlyeSBzZWxlY3Rpb24iLA0KICAgICAgbG9jKA0KICAgICAgICAiVW5sb2NrcyB0aGUgPGI+bWlsayBzZWxlY3RvcjwvYj4sIGxldHRpbmcgeW91IHBpY2sgd2hpY2ggbWlsayBpcyBkaXNwbGF5ZWQgdW5kZXIgeW91ciBjb29raWUuPGJyPkNvbWVzIHdpdGggYSB2YXJpZXR5IG9mIGJhc2ljIGZsYXZvcnMuIg0KICAgICAgKSArICI8cT5Eb24ndCBoYXZlIGEgY293LCBtYW4uPC9xPiIsDQogICAgICA5LA0KICAgICAgWzEsIDhdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRmFuY2lmdWwgZGFpcnkgc2VsZWN0aW9uIiwNCiAgICAgIGxvYygiQ29udGFpbnMgbW9yZSBleG90aWMgZmxhdm9ycyBmb3IgeW91ciBtaWxrIHNlbGVjdG9yLiIpICsNCiAgICAgICAgIjxxPlN0cm9uZyBib25lcyBmb3IgdGhlIHNrZWxldG9uIGFybXkuPC9xPiIsDQogICAgICAxMDAwMDAwLA0KICAgICAgWzksIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkNsYXNzaWMgZGFpcnkgc2VsZWN0aW9uIl07DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRHJhZ29uIGNvb2tpZSIsDQogICAgICBkZXNjOiAiSW1idWVkIHdpdGggdGhlIHZpZ29yIGFuZCB2aXRhbGl0eSBvZiBhIGZ1bGwtZ3Jvd24gY29va2llIGRyYWdvbiwgdGhpcyBteXN0aWNhbCBjb29raWUgd2lsbCBlbWJvbGRlbiB5b3VyIGVtcGlyZSBmb3IgdGhlIGdlbmVyYXRpb25zIHRvIGNvbWUuIiwNCiAgICAgIGljb246IFsxMCwgMjVdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSAqIDcsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDQwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR29sZGVuIHN3aXRjaCBbb2ZmXSIsDQogICAgICBsb2MoDQogICAgICAgICJUdXJuaW5nIHRoaXMgb24gd2lsbCBnaXZlIHlvdSBhIHBhc3NpdmUgPGI+KyUxJSBDcFM8L2I+LCBidXQgcHJldmVudHMgZ29sZGVuIGNvb2tpZXMgZnJvbSBzcGF3bmluZy48YnI+Q29zdCBpcyBlcXVhbCB0byAxIGhvdXIgb2YgcHJvZHVjdGlvbi4iLA0KICAgICAgICA1MA0KICAgICAgKSwNCiAgICAgIDEwMDAwMDAsDQogICAgICBbMjAsIDEwXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QudG9nZ2xlSW50byA9ICJHb2xkZW4gc3dpdGNoIFtvbl0iOw0KICAgIEdhbWUubGFzdC5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gR2FtZS5jb29raWVzUHMgKiA2MCAqIDYwOw0KICAgIH07DQogICAgdmFyIGZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5IYXMoIlJlc2lkdWFsIGx1Y2siKSkgew0KICAgICAgICB2YXIgYm9udXMgPSAwOw0KICAgICAgICB2YXIgdXBncmFkZXMgPSBHYW1lLmdvbGRlbkNvb2tpZVVwZ3JhZGVzOw0KICAgICAgICBmb3IgKHZhciBpIGluIHVwZ3JhZGVzKSB7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKHVwZ3JhZGVzW2ldKSkgYm9udXMrKzsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICAgIEdhbWUubGlzdFRpbnlPd25lZFVwZ3JhZGVzKEdhbWUuZ29sZGVuQ29va2llVXBncmFkZXMpICsNCiAgICAgICAgICAiPGJyPjxicj5UaGUgZWZmZWN0aXZlIGJvb3N0IGlzIDxiPisiICsNCiAgICAgICAgICBCZWF1dGlmeShNYXRoLnJvdW5kKDUwICsgYm9udXMgKiAxMCkpICsNCiAgICAgICAgICAiJTwvYj48YnI+dGhhbmtzIHRvIHJlc2lkdWFsIGx1Y2s8YnI+YW5kIHlvdXIgPGI+IiArDQogICAgICAgICAgYm9udXMgKw0KICAgICAgICAgICI8L2I+IGdvbGRlbiBjb29raWUgdXBncmFkZSIgKw0KICAgICAgICAgIChib251cyA9PSAxID8gIiIgOiAicyIpICsNCiAgICAgICAgICAnLjwvZGl2PjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiB0aGlzLmRlc2M7DQogICAgfTsNCiAgICBpZiAoRU4pIEdhbWUubGFzdC5kZXNjRnVuYyA9IGZ1bmM7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkdvbGRlbiBzd2l0Y2ggW29uXSIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgc3dpdGNoIGlzIGN1cnJlbnRseSBnaXZpbmcgeW91IGEgcGFzc2l2ZSA8Yj4rJTElIENwUzwvYj47IGl0IGFsc28gcHJldmVudHMgZ29sZGVuIGNvb2tpZXMgZnJvbSBzcGF3bmluZy48YnI+VHVybmluZyBpdCBvZmYgd2lsbCByZXZlcnQgdGhvc2UgZWZmZWN0cy48YnI+Q29zdCBpcyBlcXVhbCB0byAxIGhvdXIgb2YgcHJvZHVjdGlvbi4iLA0KICAgICAgICA1MA0KICAgICAgKSwNCiAgICAgIDEwMDAwMDAsDQogICAgICBbMjEsIDEwXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QudG9nZ2xlSW50byA9ICJHb2xkZW4gc3dpdGNoIFtvZmZdIjsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuY29va2llc1BzICogNjAgKiA2MDsNCiAgICB9Ow0KICAgIEdhbWUubGFzdC5kZXNjRnVuYyA9IGZ1bmM7DQoNCiAgICBvcmRlciA9IDUwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiTWlsayBzZWxlY3RvciIsDQogICAgICBsb2MoIkxldHMgeW91IHBpY2sgd2hhdCBmbGF2b3Igb2YgbWlsayB0byBkaXNwbGF5LiIpLA0KICAgICAgMCwNCiAgICAgIFsxLCA4XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGNob2ljZSA9IHRoaXMuY2hvaWNlc0Z1bmN0aW9uKClbR2FtZS5taWxrVHlwZV07DQogICAgICBpZiAoIWNob2ljZSkgY2hvaWNlID0gdGhpcy5jaG9pY2VzRnVuY3Rpb24oKVswXTsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBsb2MoIkN1cnJlbnQ6IikgKw0KICAgICAgICAiICIgKw0KICAgICAgICB0aW55SWNvbihjaG9pY2UuaWNvbikgKw0KICAgICAgICAiIDxiPiIgKw0KICAgICAgICBjaG9pY2UubmFtZSArDQogICAgICAgICc8L2I+PC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCg0KICAgIEdhbWUubGFzdC5wb29sID0gInRvZ2dsZSI7DQogICAgR2FtZS5sYXN0LmNob2ljZXNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciByYW5rID0gMDsNCiAgICAgIHZhciBjaG9pY2VzID0gW107DQoNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5BbGxNaWxrcy5sZW5ndGg7IGkrKykgew0KICAgICAgICB2YXIgaXQgPSBHYW1lLkFsbE1pbGtzW2ldOw0KICAgICAgICBjaG9pY2VzLnB1c2goew0KICAgICAgICAgIG5hbWU6IGl0Lm5hbWUsDQogICAgICAgICAgaWNvbjogaXQuaWNvbiwNCiAgICAgICAgICBtaWxrOiBpdCwNCiAgICAgICAgICBvcmRlcjogaXQudHlwZSwNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIGNob2ljZXNbMTFdLmRpdiA9IHRydWU7DQoNCiAgICAgIHZhciBtYXhSYW5rID0gTWF0aC5mbG9vcihHYW1lLkFjaGlldmVtZW50c093bmVkIC8gMjUpOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaG9pY2VzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHZhciBpdCA9IGNob2ljZXNbaV0ubWlsazsNCiAgICAgICAgaWYgKGl0LnR5cGUgPT0gMSAmJiAhR2FtZS5IYXMoIkZhbmNpZnVsIGRhaXJ5IHNlbGVjdGlvbiIpKQ0KICAgICAgICAgIGNob2ljZXNbaV0gPSAwOw0KICAgICAgICBpZiAoaXQucmFuayAmJiBpdC5yYW5rID4gbWF4UmFuaykgY2hvaWNlc1tpXSA9IDA7DQogICAgICB9DQoNCiAgICAgIGNob2ljZXNbR2FtZS5taWxrVHlwZV0uc2VsZWN0ZWQgPSAxOw0KICAgICAgcmV0dXJuIGNob2ljZXM7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuY2hvaWNlc1BpY2sgPSBmdW5jdGlvbiAoaWQpIHsNCiAgICAgIEdhbWUubWlsa1R5cGUgPSBpZDsNCiAgICB9Ow0KDQogICAgb3JkZXIgPSAxMDMwMDsNCiAgICB2YXIgYnV0dGVyQmlzY3VpdE11bHQgPSAxMDAwMDAwMDA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJNaWxrIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAxMDAgb2YgZXZlcnl0aGluZy48YnI+SXQgYmVhcnMgdGhlIGVuZ3JhdmluZyBvZiBhIGZpbmUgZW50cmVwcmVuZXVyLiIsDQogICAgICBpY29uOiBbMjcsIDhdLA0KICAgICAgcG93ZXI6IDEwLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIGJ1dHRlckJpc2N1aXRNdWx0LA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRGFyayBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiLA0KICAgICAgZGVzYzogIlJld2FyZGVkIGZvciBvd25pbmcgMTUwIG9mIGV2ZXJ5dGhpbmcuPGJyPkl0IGlzIGFkb3JuZWQgd2l0aCB0aGUgaW1hZ2Ugb2YgYW4gZXhwZXJpZW5jZWQgY29va2llIHR5Y29vbi4iLA0KICAgICAgaWNvbjogWzI3LCA5XSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiBidXR0ZXJCaXNjdWl0TXVsdCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldoaXRlIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAyMDAgb2YgZXZlcnl0aGluZy48YnI+VGhlIGNob2NvbGF0ZSBpcyBjaGlzZWxlZCB0byBkZXBpY3QgYSBtYXN0ZXJmdWwgcGFzdHJ5IG1hZ25hdGUuIiwNCiAgICAgIGljb246IFsyOCwgOV0sDQogICAgICBwb3dlcjogMTAsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogYnV0dGVyQmlzY3VpdE11bHQsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSdWJ5IGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAyNTAgb2YgZXZlcnl0aGluZy48YnI+Q292ZXJlZCBpbiBhIHJhcmUgcmVkIGNob2NvbGF0ZSwgdGhpcyBiaXNjdWl0IGlzIGV0Y2hlZCB0byByZXByZXNlbnQgdGhlIGZhY2Ugb2YgYSBjb29raWUgaW5kdXN0cmlhbGlzdCBnb25lIG1hZCB3aXRoIHBvd2VyLiIsDQogICAgICBpY29uOiBbMjgsIDhdLA0KICAgICAgcG93ZXI6IDEwLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIGJ1dHRlckJpc2N1aXRNdWx0LA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdpbmdlcnNuYXBzIiwNCiAgICAgIGRlc2M6ICJDb29raWVzIHdpdGggYSBzb3VsLiBQcm9iYWJseS4iLA0KICAgICAgaWNvbjogWzI5LCAxMF0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNpbm5hbW9uIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZSBzZWNyZXQgaXMgaW4gdGhlIHBhdGVudGVkIHN3aXJseSBnbGF6aW5nLiIsDQogICAgICBpY29uOiBbMjMsIDhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiVmFuaXR5IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIk9uZSB0aW55IGNhbmRpZWQgZnJ1aXQgc2l0cyBhdG9wIHRoaXMgZGVjYWRlbnQgY29va2llLiIsDQogICAgICBpY29uOiBbMjIsIDhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2lnYXJzIiwNCiAgICAgIGRlc2M6ICJDbG9zZSwgYnV0IG5vIG1hdGNoIGZvciB0aG9zZSBleHRyYXZhZ2FudCBjb29raWUgc3RyYXdzIHRoZXkgc2VydmUgaW4gY29mZmVlIHNob3BzIHRoZXNlIGRheXMuIiwNCiAgICAgIGljb246IFsyNSwgOF0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGlud2hlZWwgY29va2llcyIsDQogICAgICBkZXNjOiAiQnJpbmdpbmcgeW91IHRoZSBkaXp6eWluZyBjb21iaW5hdGlvbiBvZiBicm93biBmbGF2b3IgYW5kIGJlaWdlIHRhc3RlISIsDQogICAgICBpY29uOiBbMjIsIDEwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJGdWRnZSBzcXVhcmVzIiwNCiAgICAgIGRlc2M6ICJOb3QgZXhhY3RseSBjb29raWVzLCBidXQgeW91IHdvbid0IGNhcmUgb25jZSB5b3UndmUgdGFzdGVkIG9uZSBvZiB0aGVzZS48YnI+VGhleSdyZSBzbyBnb29kLCBpdCdzIGZ1ZGdlZC11cCEiLA0KICAgICAgaWNvbjogWzI0LCA4XSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAzMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkRpZ2l0cyIsDQogICAgICBkZXNjOiAiVGhyZWUgZmxhdm9ycywgemVybyBwaGFsYW5nZXMuIiwNCiAgICAgIGljb246IFsyNiwgOF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDI5Ow0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQnV0dGVyIGhvcnNlc2hvZXMiLA0KICAgICAgZGVzYzogIkl0IHdvdWxkIGJlaG9vdmUgeW91IHRvIG5vdCBvdmVyaW5kdWxnZSBpbiB0aGVzZS4iLA0KICAgICAgaWNvbjogWzIyLCA5XSwNCiAgICAgIHJlcXVpcmU6ICJUaW4gb2YgYnV0dGVyIGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCdXR0ZXIgcHVja3MiLA0KICAgICAgZGVzYzogIkxvcmQsIHdoYXQgZm9vbHMgdGhlc2UgbW9ydGFscyBiZSE8YnI+KFRoaXMgaXMga2luZCBvZiBhIGhva2V5IHJlZmVyZW5jZS4pIiwNCiAgICAgIGljb246IFsyMywgOV0sDQogICAgICByZXF1aXJlOiAiVGluIG9mIGJ1dHRlciBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlciBrbm90cyIsDQogICAgICBkZXNjOiAiTG9vaywgeW91IGNhbiBjYWxsIHRoZXNlIHByZXR6ZWxzIGlmIHlvdSB3YW50LCBidXQgeW91J2QganVzdCBiZSBmb29saW5nIHlvdXJzZWxmLCB3b3VsZG4ndCB5b3U/IiwNCiAgICAgIGljb246IFsyNCwgOV0sDQogICAgICByZXF1aXJlOiAiVGluIG9mIGJ1dHRlciBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlciBzbGFicyIsDQogICAgICBkZXNjOiAiTm90aGluZyBidXR0ZXIgdGhhbiBhIHNsYWIgdG8gdGhlIGZhY2UuIiwNCiAgICAgIGljb246IFsyNSwgOV0sDQogICAgICByZXF1aXJlOiAiVGluIG9mIGJ1dHRlciBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCdXR0ZXIgc3dpcmxzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSBhcmUgZXF1YWwgcGFydHMgc3VnYXIsIGJ1dHRlciwgYW5kIHdhcm0gZnV6enkgZmVlbGluZ3MgLSBhbGwgb2Ygd2hpY2ggY2F1c2UgbWlsbGlvbnMgb2YgZGVhdGhzIGV2ZXJ5IGRheS4iLA0KICAgICAgaWNvbjogWzI2LCA5XSwNCiAgICAgIHJlcXVpcmU6ICJUaW4gb2YgYnV0dGVyIGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTaG9ydGJyZWFkIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSByaWNoIGJ1dHRlciBjb29raWVzIGFyZSBuZWl0aGVyIHNob3J0LCBub3IgYnJlYWQuIFdoYXQgYSBjb3VudHJ5ISIsDQogICAgICBpY29uOiBbMjMsIDEwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWlsbGlvbmFpcmVzJyBzaG9ydGJyZWFkcyIsDQogICAgICBkZXNjOiAiVGhyZWUgdGhvdWdodC1wcm92b2tpbmcgbGF5ZXJzIG9mIGNyZWFteSBjaG9jb2xhdGUsIGhhcmQtd29ya2luZyBjYXJhbWVsIGFuZCBjcnVtYmx5IGJpc2N1aXQgaW4gYSBwb2lnbmFudCBjb21tZW50YXJ5IG9mIGNsYXNzIHN0cnVnZ2xlLiIsDQogICAgICBpY29uOiBbMjQsIDEwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhcmFtZWwgY29va2llcyIsDQogICAgICBkZXNjOiAiVGhlIHBvbHltZXJpemVkIGNhcmJvaHlkcmF0ZXMgYWRvcm5pbmcgdGhlc2UgY29va2llcyBhcmUgc3VyZSB0byBzdGljayB0byB5b3VyIHRlZXRoIGZvciBxdWl0ZSBhIHdoaWxlLiIsDQogICAgICBpY29uOiBbMjUsIDEwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIHZhciBkZXNjID0gZnVuY3Rpb24gKHRvdGFsSG91cnMpIHsNCiAgICAgIHJldHVybiBsb2MoDQogICAgICAgICJZb3UgcmV0YWluIG9wdGltYWwgY29va2llIHByb2R1Y3Rpb24gd2hpbGUgdGhlIGdhbWUgaXMgY2xvc2VkIGZvciB0d2ljZSBhcyBsb25nLCBmb3IgYSB0b3RhbCBvZiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgR2FtZS5zYXlUaW1lKHRvdGFsSG91cnMgKiA2MCAqIDYwICogR2FtZS5mcHMsIC0xKQ0KICAgICAgKTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQmVscGhlZ29yIiwNCiAgICAgIGRlc2MoMikgKw0KICAgICAgICAiPHE+QSBkZW1vbiBvZiBzaG9ydGN1dHMgYW5kIGxhemluZXNzLCBCZWxwaGVnb3IgY29tbWFuZHMgbWFjaGluZXMgdG8gZG8gd29yayBpbiBoaXMgc3RlYWQuPC9xPiIsDQogICAgICBNYXRoLnBvdyhhbmdlbFByaWNlRmFjdG9yLCAxKSwNCiAgICAgIFs3LCAxMV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJNYW1tb24iLA0KICAgICAgZGVzYyg0KSArDQogICAgICAgICI8cT5UaGUgZGVtb25pYyBlbWJvZGltZW50IG9mIHdlYWx0aCwgTWFtbW9uIHJlcXVlc3RzIGEgdGl0aGUgb2YgYmxvb2QgYW5kIGdvbGQgZnJvbSBhbGwgaGlzIHdvcnNoaXBwZXJzLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgMiksDQogICAgICBbOCwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkJlbHBoZWdvciJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQWJhZGRvbiIsDQogICAgICBkZXNjKDgpICsNCiAgICAgICAgIjxxPk1hc3RlciBvZiBvdmVyaW5kdWxnZW5jZSwgQWJhZGRvbiBnb3Zlcm5zIHRoZSB3cmlua2xlciBicm9vZCBhbmQgaW5zcGlyZXMgdGhlaXIgaW5zYXRpYWJpbGl0eS48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDMpLA0KICAgICAgWzksIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJNYW1tb24iXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNhdGFuIiwNCiAgICAgIGRlc2MoMTYpICsNCiAgICAgICAgIjxxPlRoZSBjb3VudGVycG9pbnQgdG8gZXZlcnl0aGluZyByaWdodGVvdXMsIHRoaXMgZGVtb24gcmVwcmVzZW50cyB0aGUgbmVmYXJpb3VzIGluZmx1ZW5jZSBvZiBkZWNlaXQgYW5kIHRlbXB0YXRpb24uPC9xPiIsDQogICAgICBNYXRoLnBvdyhhbmdlbFByaWNlRmFjdG9yLCA0KSwNCiAgICAgIFsxMCwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkFiYWRkb24iXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFzbW9kZXVzIiwNCiAgICAgIGRlc2MoMzIpICsNCiAgICAgICAgIjxxPlRoaXMgZGVtb24gd2l0aCB0aHJlZSBtb25zdHJvdXMgaGVhZHMgZHJhd3MgaGlzIHBvd2VyIGZyb20gdGhlIGFsbC1jb25zdW1pbmcgZGVzaXJlIGZvciBjb29raWVzIGFuZCBhbGwgdGhpbmdzIHN3ZWV0LjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgNSksDQogICAgICBbMTEsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTYXRhbiJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQmVlbHplYnViIiwNCiAgICAgIGRlc2MoNjQpICsNCiAgICAgICAgIjxxPlRoZSBmZXN0ZXJpbmcgaW5jYXJuYXRpb24gb2YgYmxpZ2h0IGFuZCBkaXNlYXNlLCBCZWVsemVidWIgcnVsZXMgb3ZlciB0aGUgdmFzdCBhcm1pZXMgb2YgcGFzdHJ5IGluZmVybm8uPC9xPiIsDQogICAgICBNYXRoLnBvdyhhbmdlbFByaWNlRmFjdG9yLCA2KSwNCiAgICAgIFsxMiwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkFzbW9kZXVzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNpZmVyIiwNCiAgICAgIGRlc2MoMTI4KSArDQogICAgICAgICI8cT5BbHNvIGtub3duIGFzIHRoZSBMaWdodGJyaW5nZXIsIHRoaXMgaW5mZXJuYWwgcHJpbmNlJ3MgdHJlbWVuZG91cyBlZ28gY2F1c2VkIGhpbSB0byBiZSBjYXN0IGRvd24gZnJvbSBwYXN0cnkgaGVhdmVuLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgNyksDQogICAgICBbMTMsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJCZWVsemVidWIiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR29sZGVuIGNvb2tpZSBhbGVydCBzb3VuZCIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIHRoZSA8Yj5nb2xkZW4gY29va2llIHNvdW5kIHNlbGVjdG9yPC9iPiwgd2hpY2ggbGV0cyB5b3UgcGljayB3aGV0aGVyIGdvbGRlbiBjb29raWVzIGVtaXQgYSBzb3VuZCB3aGVuIGFwcGVhcmluZyBvciBub3QuIg0KICAgICAgKSArICI8cT5BIHNvdW5kIGRlY2lzaW9uLjwvcT4iLA0KICAgICAgOTk5OTk5LA0KICAgICAgWzI4LCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJSZXNpZHVhbCBsdWNrIl07DQoNCiAgICBvcmRlciA9IDQ5OTAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR29sZGVuIGNvb2tpZSBzb3VuZCBzZWxlY3RvciIsDQogICAgICBsb2MoIkxldHMgeW91IGNoYW5nZSB0aGUgc291bmQgZ29sZGVuIGNvb2tpZXMgbWFrZSB3aGVuIHRoZXkgc3Bhd24uIiksDQogICAgICAwLA0KICAgICAgWzI4LCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGNob2ljZSA9IHRoaXMuY2hvaWNlc0Z1bmN0aW9uKClbR2FtZS5jaGltZVR5cGVdOw0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgIGxvYygiQ3VycmVudDoiKSArDQogICAgICAgICIgIiArDQogICAgICAgIHRpbnlJY29uKGNob2ljZS5pY29uKSArDQogICAgICAgICIgPGI+IiArDQogICAgICAgIGNob2ljZS5uYW1lICsNCiAgICAgICAgJzwvYj48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgdGhpcy5kZGVzYw0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QuY2hvaWNlc0Z1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGNob2ljZXMgPSBbXTsNCiAgICAgIGNob2ljZXNbMF0gPSB7IG5hbWU6ICJObyBzb3VuZCIsIGljb246IFswLCA3XSB9Ow0KICAgICAgY2hvaWNlc1sxXSA9IHsgbmFtZTogIkNoaW1lIiwgaWNvbjogWzIyLCA2XSB9Ow0KICAgICAgY2hvaWNlc1syXSA9IHsgbmFtZTogIkZvcnR1bmUiLCBpY29uOiBbMjcsIDZdIH07DQogICAgICBjaG9pY2VzWzNdID0geyBuYW1lOiAiQ3ltYmFsIiwgaWNvbjogWzksIDEwXSB9Ow0KICAgICAgY2hvaWNlc1s0XSA9IHsgbmFtZTogIlNxdWVhayIsIGljb246IFs4LCAxMF0gfTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hvaWNlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICBjaG9pY2VzW2ldLm5hbWUgPSBsb2MoY2hvaWNlc1tpXS5uYW1lKTsNCiAgICAgIH0NCg0KICAgICAgY2hvaWNlc1tHYW1lLmNoaW1lVHlwZV0uc2VsZWN0ZWQgPSAxOw0KICAgICAgcmV0dXJuIGNob2ljZXM7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuY2hvaWNlc1BpY2sgPSBmdW5jdGlvbiAoaWQpIHsNCiAgICAgIEdhbWUuY2hpbWVUeXBlID0gaWQ7DQogICAgICBHYW1lLnBsYXlHb2xkZW5Db29raWVDaGltZSgpOw0KICAgIH07DQogICAgR2FtZS5wbGF5R29sZGVuQ29va2llQ2hpbWUgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5jaGltZVR5cGUgPT0gMSkgUGxheVNvdW5kKCJzbmQvY2hpbWUubXAzIik7DQogICAgICBlbHNlIGlmIChHYW1lLmNoaW1lVHlwZSA9PSAyKSBQbGF5U291bmQoInNuZC9mb3J0dW5lLm1wMyIpOw0KICAgICAgZWxzZSBpZiAoR2FtZS5jaGltZVR5cGUgPT0gMykgUGxheVNvdW5kKCJzbmQvY3ltYmFsUmV2Lm1wMyIpOw0KICAgICAgZWxzZSBpZiAoR2FtZS5jaGltZVR5cGUgPT0gNCkgew0KICAgICAgICBHYW1lLndyaW5rbGVyU3F1aXNoU291bmQrKzsNCiAgICAgICAgaWYgKEdhbWUud3JpbmtsZXJTcXVpc2hTb3VuZCA+IDQpIHsNCiAgICAgICAgICBHYW1lLndyaW5rbGVyU3F1aXNoU291bmQgLT0gNDsNCiAgICAgICAgfQ0KICAgICAgICBQbGF5U291bmQoInNuZC9zcXVlYWsiICsgR2FtZS53cmlua2xlclNxdWlzaFNvdW5kICsgIi5tcDMiKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJCYXNpYyB3YWxscGFwZXIgYXNzb3J0bWVudCIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIHRoZSA8Yj5iYWNrZ3JvdW5kIHNlbGVjdG9yPC9iPiwgbGV0dGluZyB5b3Ugc2VsZWN0IHRoZSBnYW1lJ3MgYmFja2dyb3VuZC48YnI+Q29tZXMgd2l0aCBhIHZhcmlldHkgb2YgYmFzaWMgZmxhdm9ycy4iDQogICAgICApICsNCiAgICAgICAgIjxxPlByaW9yaXRpemluZyBhZXN0aGV0aWNzIG92ZXIgY3J1Y2lhbCB1dGlsaXRhcmlhbiB1cGdyYWRlcz8gQ29sb3IgbWUgaW1wcmVzc2VkLjwvcT4iLA0KICAgICAgOTksDQogICAgICBbMjksIDVdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkNsYXNzaWMgZGFpcnkgc2VsZWN0aW9uIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkxlZ2FjeSIsDQogICAgICBsb2MoDQogICAgICAgICdUaGlzIGlzIHRoZSBmaXJzdCBoZWF2ZW5seSB1cGdyYWRlOyBpdCB1bmxvY2tzIHRoZSA8Yj5IZWF2ZW5seSBjaGlwczwvYj4gc3lzdGVtLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PkVhY2ggdGltZSB5b3UgYXNjZW5kLCB0aGUgY29va2llcyB5b3UgbWFkZSBpbiB5b3VyIHBhc3QgbGlmZSBhcmUgdHVybmVkIGludG8gPGI+aGVhdmVubHkgY2hpcHM8L2I+IGFuZCA8Yj5wcmVzdGlnZTwvYj4uPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGI+SGVhdmVubHkgY2hpcHM8L2I+IGNhbiBiZSBzcGVudCBvbiBhIHZhcmlldHkgb2YgcGVybWFuZW50IHRyYW5zY2VuZGVudGFsIHVwZ3JhZGVzLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PllvdXIgPGI+cHJlc3RpZ2UgbGV2ZWw8L2I+IGFsc28gZ2l2ZXMgeW91IGEgcGVybWFuZW50IDxiPisxJSBDcFM8L2I+IHBlciBsZXZlbC4nDQogICAgICApICsgIjxxPldlJ3ZlIGFsbCBiZWVuIHdhaXRpbmcgZm9yIHlvdS48L3E+IiwNCiAgICAgIDEsDQogICAgICBbMjEsIDZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRWxkZXIgc3BpY2UiLA0KICAgICAgbG9jKCJZb3UgY2FuIGF0dHJhY3QgPGI+JTEgbW9yZSB3cmlua2xlcnM8L2I+LiIsIDIpICsNCiAgICAgICAgIjxxPlRoZSBjb29raWUgeW91ciBjb29raWUgY291bGQgc21lbGwgbGlrZS48L3E+IiwNCiAgICAgIDQ0NDQ0NCwNCiAgICAgIFsxOSwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiVW5ob2x5IGJhaXQiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiUmVzaWR1YWwgbHVjayIsDQogICAgICBsb2MoDQogICAgICAgICJXaGlsZSB0aGUgZ29sZGVuIHN3aXRjaCBpcyBvbiwgeW91IGdhaW4gYW4gYWRkaXRpb25hbCA8Yj4rJTElIENwUzwvYj4gcGVyIGdvbGRlbiBjb29raWUgdXBncmFkZSBvd25lZC4iLA0KICAgICAgICAxMA0KICAgICAgKSArICI8cT5Gb3J0dW5lIGNvbWVzIGluIG1hbnkgZmxhdm9ycy48L3E+IiwNCiAgICAgIDk5OTk5LA0KICAgICAgWzI3LCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJHb2xkZW4gc3dpdGNoIl07DQoNCiAgICBvcmRlciA9IDE1MDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZhbnRhc3RlZWwgbW91c2UiLA0KICAgICAgZ2V0U3RyQ2xpY2tpbmdHYWlucygxKSArDQogICAgICAgICI8cT5Zb3UgY291bGQgYmUgY2xpY2tpbmcgdXNpbmcgeW91ciB0b3VjaHBhZCBhbmQgd2UnZCBiZSBub25lIHRoZSB3aXNlci48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMTEsIDE3XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgOCwgMTEpOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiTmV2ZXJjcmFjayBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsNCiAgICAgICAgIjxxPkhvdyBtdWNoIGJlZWZpZXIgY2FuIHlvdSBtYWtlIGEgbW91c2UgdW50aWwgaXQncyBjb25zaWRlcmVkIGEgcmF0PzwvcT4iLA0KICAgICAgNTAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAxOF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDksIDExKTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRml2ZS1maW5nZXIgZGlzY291bnQiLA0KICAgICAgbG9jKCJBbGwgdXBncmFkZXMgYXJlIDxiPiUxJSBjaGVhcGVyIHBlciAlMjwvYj4uIiwgWw0KICAgICAgICAxLA0KICAgICAgICBsb2MoIiUxIGN1cnNvciIsIDEwMCksDQogICAgICBdKSArICI8cT5TdGljayBpdCB0byB0aGUgbWFuLjwvcT4iLA0KICAgICAgNTU1NTU1LA0KICAgICAgWzI4LCA3XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkhhbG8gZ2xvdmVzIiwgIkFiYWRkb24iXTsNCg0KICAgIG9yZGVyID0gNTAwMDsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkZ1dHVyZSBhbG1hbmFjcyIsDQogICAgICAiPHE+TGV0cyB5b3UgcHJlZGljdCBvcHRpbWFsIHBsYW50aW5nIHRpbWVzLiBJdCdzIGNyYXp5IHdoYXQgdGltZSB0cmF2ZWwgY2FuIGRvITwvcT4iLA0KICAgICAgIkZhcm0iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlJhaW4gcHJheWVyIiwNCiAgICAgICI8cT5BIGRlZXBseSBzcGlyaXR1YWwgY2VyZW1vbmlhbCBpbnZvbHZpbmcgY29tcGxpY2F0ZWQgZGFuY2UgbW92ZXMgYW5kIGhpZ2gtdGVjaCBjbG91ZC1idXN0aW5nIGxhc2Vycy48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlNlaXNtaWMgbWFnaWMiLA0KICAgICAgIjxxPlN1cnByaXNlIGVhcnRocXVha2VzIGFyZSBhbiBvbGQgZmF2b3JpdGUgb2Ygd2l6YXJkbHkgZnJhdCBob3VzZXMuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiQXN0ZXJvaWQgbWluaW5nIiwNCiAgICAgICI8cT5BcyBwZXIgdGhlIDxzcGFuPjE5PC9zcGFuPjc0IFVuaXRlZCBDb3NtaWMgQ29udmVudGlvbiwgY29tZXRzLCBtb29ucywgYW5kIGluaGFiaXRlZCBwbGFuZXRvaWRzIGFyZSBubyBsb25nZXIgbGVnYWxseSBleGNhdmF0YWJsZS48YnI+QnV0IGhleSwgYSBzcGFjZSBicmliZSBnb2VzIGEgbG9uZyB3YXkuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlF1YW50dW0gZWxlY3Ryb25pY3MiLA0KICAgICAgIjxxPllvdXIgbWFjaGluZXMgd29uJ3QgZXZlbiBiZSBzdXJlIGlmIHRoZXkncmUgb24gb3Igb2ZmITwvcT4iLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiVGVtcG9yYWwgb3ZlcmNsb2NraW5nIiwNCiAgICAgICI8cT5JbnRyb2R1Y2UgbW9yZSBxdWlja2l0dWRlIGluIHlvdXIgc3lzdGVtIGZvciBpbmNyZWFzZWQgc3BlZWRhdGlvbiBvZiBmYXN0bmVzcy48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkNvbnRyYWN0cyBmcm9tIGJleW9uZCIsDQogICAgICAiPHE+TWFrZSBzdXJlIHRvIHJlYWQgdGhlIGZpbmUgcHJpbnQhPC9xPiIsDQogICAgICAiQmFuayIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiUHJpbnRpbmcgcHJlc3NlcyIsDQogICAgICAiPHE+RmFrZSBiaWxscyBzbyByZWFsLCB0aGV5J3JlIGFsbW9zdCB3b3J0aCB0aGUgaW5rIHRoZXkncmUgcHJpbnRlZCB3aXRoLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlBhZ2FuaXNtIiwNCiAgICAgICI8cT5Tb21lIGRlaXRpZXMgYXJlIGJldHRlciBsZWZ0IHVud29yc2hpcHBlZC48L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkdvZCBwYXJ0aWNsZSIsDQogICAgICAiPHE+VHVybnMgb3V0IEdvZCBpcyBtdWNoIHRpbmllciB0aGFuIHdlIHRob3VnaHQsIEkgZ3Vlc3MuPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiQXJjYW5lIGtub3dsZWRnZSIsDQogICAgICAiPHE+U29tZSB0aGluZ3Mgd2VyZSBuZXZlciBtZWFudCB0byBiZSBrbm93biAtIG9ubHkgbWlsZGx5IHNwZWN1bGF0ZWQuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIk1hZ2ljYWwgYm90YW55IiwNCiAgICAgICc8cT5BbHJlYWR5IGtub3duIGluIHNvbWUgcmVhY3Rpb25hcnkgbmV3c3BhcGVycyBhcyAidGhlIHdpemFyZFwncyBHTU9zIi48L3E+JywNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgIkZhcm0iLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkZvc3NpbCBmdWVscyIsDQogICAgICAiPHE+U29tZWhvdyBiZXR0ZXIgdGhhbiBwbHV0b25pdW0gZm9yIHBvd2VyaW5nIHJvY2tldHMuPGJyPkV4dHJhY3RlZCBmcm9tIHRoZSBmdWVscyBvZiBhbmNpZW50LCBmb3NzaWxpemVkIGNpdmlsaXphdGlvbnMuPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgIk1pbmUiLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJTaGlweWFyZHMiLA0KICAgICAgIjxxPldoZXJlIGNhcnBlbnRyeSwgYmxpbmQgbHVjaywgYW5kIGFzYmVzdG9zIGluc3VsYXRpb24gdW5pdGUgdG8gcHJvZHVjZSB0aGUgbW9zdCBkYXp6bGluZyBzcGFjZXNoaXBzIG9uIHRoZSBwbGFuZXQuPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlByaW1vcmRpYWwgb3JlcyIsDQogICAgICAiPHE+T25seSB3aGVuIHJlZmluaW5nIHRoZSBwdXJlc3QgbWV0YWxzIHdpbGwgeW91IGV4dHJhY3QgdGhlIHN3ZWV0ZXN0IHNhcCBvZiB0aGUgZWFydGguPC9xPiIsDQogICAgICAiQWxjaGVteSBsYWIiLA0KICAgICAgIk1pbmUiLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJHb2xkIGZ1bmQiLA0KICAgICAgIjxxPklmIGdvbGQgaXMgdGhlIGJhY2tib25lIG9mIHRoZSBlY29ub215LCBjb29raWVzLCBzdXJlbHksIGFyZSBpdHMgaGlwIGpvaW50cy48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAiQmFuayIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiSW5mZXJuYWwgY3JvcHMiLA0KICAgICAgIjxxPlNwcmlua2xlIHJlZ3VsYXJseSB3aXRoIEZJUkUuPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgICJGYXJtIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiQWJ5c21hbCBnbGltbWVyIiwNCiAgICAgICI8cT5Tb21lb25lLCBvciBzb21ldGhpbmcsIGlzIHN0YXJpbmcgYmFjayBhdCB5b3UuPGJyPlBlcmhhcHMgYXQgYWxsIG9mIHVzLjwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAiUHJpc20iLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlJlbGF0aXZpc3RpYyBwYXJzZWMtc2tpcHBpbmciLA0KICAgICAgIjxxPlBlb3BsZSB3aWxsIHRlbGwgeW91IHRoaXMgaXNuJ3QgcGh5c2ljYWxseSBwb3NzaWJsZS48YnI+VGhlc2UgYXJlIHBlb3BsZSB5b3UgZG9uJ3Qgd2FudCBvbiB5b3VyIHNoaXAuPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlByaW1ldmFsIGdsb3ciLA0KICAgICAgIjxxPkZyb20gdW5lbmRpbmcgdGltZXMsIGFuIGFuY2llbnQgbGlnaHQgc3RpbGwgc2hpbmVzLCBpbXBvc3NpYmx5IHB1cmUgYW5kIGZyYWdpbGUgaW4gaXRzIG9sZCBhZ2UuPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgICJQcmlzbSIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiRXh0cmEgcGh5c2ljcyBmdW5kaW5nIiwNCiAgICAgICI8cT5UaW1lIHRvIHB1dCB5b3VyIG1vbmV5IHdoZXJlIHlvdXIgcGFydGljbGUgY29sbGlkZXJzIGFyZS48L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAiQmFuayIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkNoZW1pY2FsIHByb2ZpY2llbmN5IiwNCiAgICAgICI8cT5EaXNjb3ZlciBleGNpdGluZyBuZXcgZWxlbWVudHMsIHN1Y2ggYXMgRmxlc2htZWx0aXVtLCBJbmVydCBTaGFtcG9vIEJ5cHJvZHVjdCAjMTcgYW5kIENhcmJvbisrITwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiTGlnaHQgbWFnaWMiLA0KICAgICAgIjxxPkFjdHVhbGx5IG5vdCB0byBiZSB0YWtlbiBsaWdodGx5ISBObywgSSdtIHNlcmlvdXMuIDE3OCBwZW9wbGUgZGllZCBsYXN0IHllYXIuIFlvdSBkb24ndCBtZXNzIGFyb3VuZCB3aXRoIG1hZ2ljLjwvcT4iLA0KICAgICAgIlByaXNtIiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJNeXN0aWNhbCBlbmVyZ2llcyIsDQogICAgICAiPHE+U29tZXRoaW5nIGJlY2tvbnMgZnJvbSB3aXRoaW4gdGhlIGxpZ2h0LiBJdCBpcyB3YXJtLCBjb21mb3J0aW5nLCBhbmQgYXBwYXJlbnRseSB0aGUgY2F1c2UgZm9yIHNldmVyYWwga2luZHMgb2YgZXhvdGljIHNraW4gY2FuY2Vycy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgICJzeW5lcmd5MiINCiAgICApOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTeW5lcmdpZXMgVm9sLiBJIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlVubG9ja3MgYSBuZXcgdGllciBvZiB1cGdyYWRlcyB0aGF0IGFmZmVjdCA8Yj4yIGJ1aWxkaW5ncyBhdCB0aGUgc2FtZSB0aW1lPC9iPi48YnI+U3luZXJnaWVzIGFwcGVhciBvbmNlIHlvdSBoYXZlIDxiPiUxPC9iPiBvZiBib3RoIGJ1aWxkaW5ncy4iLA0KICAgICAgICAxNQ0KICAgICAgKSArICI8cT5UaGUgbWFueSBiZWF0cyB0aGUgZmV3LjwvcT4iLA0KICAgICAgMjIyMjIyLA0KICAgICAgWzEwLCAyMF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU2F0YW4iLCAiRG9taW5pb25zIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTeW5lcmdpZXMgVm9sLiBJSSIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIGEgbmV3IHRpZXIgb2YgdXBncmFkZXMgdGhhdCBhZmZlY3QgPGI+MiBidWlsZGluZ3MgYXQgdGhlIHNhbWUgdGltZTwvYj4uPGJyPlN5bmVyZ2llcyBhcHBlYXIgb25jZSB5b3UgaGF2ZSA8Yj4lMTwvYj4gb2YgYm90aCBidWlsZGluZ3MuIiwNCiAgICAgICAgNzUNCiAgICAgICkgKyAiPHE+VGhlIHNldmVyYWwgYmVhdHMgdGhlIG1hbnkuPC9xPiIsDQogICAgICAyMjIyMjIyLA0KICAgICAgWzEwLCAyOV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiQmVlbHplYnViIiwgIlNlcmFwaGltIiwgIlN5bmVyZ2llcyBWb2wuIEkiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiSGVhdmVubHkgY29va2llcyIsDQogICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZXIgPGI+KyUxJSBwZXJtYW5lbnRseTwvYj4uIiwgMTApICsNCiAgICAgICAgIjxxPkJha2VkIHdpdGggaGVhdmVubHkgY2hpcHMuIEFuIG90aGVyd29yZGx5IGZsYXZvciB0aGF0IHRyYW5zY2VuZHMgdGltZSBhbmQgc3BhY2UuPC9xPiIsDQogICAgICAzLA0KICAgICAgWzI1LCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiTGVnYWN5Il07DQogICAgR2FtZS5sYXN0LnBvd2VyID0gMTA7DQogICAgR2FtZS5sYXN0LnBzZXVkb0Nvb2tpZSA9IHRydWU7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJXcmlua2x5IGNvb2tpZXMiLA0KICAgICAgbG9jKCJDb29raWUgcHJvZHVjdGlvbiBtdWx0aXBsaWVyIDxiPislMSUgcGVybWFuZW50bHk8L2I+LiIsIDEwKSArDQogICAgICAgICI8cT5UaGUgcmVzdWx0IG9mIHJlZ3VsYXIgY29va2llcyBsZWZ0IHRvIGFnZSBvdXQgZm9yIGNvdW50bGVzcyBlb25zIGluIGEgcGxhY2Ugd2hlcmUgdGltZSBhbmQgc3BhY2UgYXJlIG1lYW5pbmdsZXNzLjwvcT4iLA0KICAgICAgNjY2NjY2NiwNCiAgICAgIFsyNiwgMTJdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNhY3JpbGVnaW91cyBjb3JydXB0aW9uIiwgIkVsZGVyIHNwaWNlIl07DQogICAgR2FtZS5sYXN0LnBvd2VyID0gMTA7DQogICAgR2FtZS5sYXN0LnBzZXVkb0Nvb2tpZSA9IHRydWU7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEaXN0aWxsZWQgZXNzZW5jZSBvZiByZWRvdWJsZWQgbHVjayIsDQogICAgICBsb2MoDQogICAgICAgICJHb2xkZW4gY29va2llcyAoYW5kIGFsbCBvdGhlciB0aGluZ3MgdGhhdCBzcGF3biwgc3VjaCBhcyByZWluZGVlcikgaGF2ZSA8Yj4lMSUgY2hhbmNlIG9mIGJlaW5nIGRvdWJsZWQ8L2I+LiIsDQogICAgICAgIDENCiAgICAgICkgKw0KICAgICAgICAiPHE+VGFzdGVzIGdsaXR0ZXJ5LiBUaGUgZW1wdHkgcGhpYWwgbWFrZXMgZm9yIGEgZ3JlYXQgcGVuY2lsIGhvbGRlci48L3E+IiwNCiAgICAgIDc3Nzc3NzcsDQogICAgICBbMjcsIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJEaXZpbmUgYmFrZXJpZXMiLCAiUmVzaWR1YWwgbHVjayJdOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIk9jY3VsdCBvYnN0cnVjdGlvbiIsDQogICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIDxiPnJlZHVjZWQgdG8gMDwvYj4uIikgKw0KICAgICAgICAiPHE+SWYgc3ltcHRvbXMgcGVyc2lzdCwgY29uc3VsdCBhIGRvY3Rvci48L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTUsIDVdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR2x1Y29zZS1jaGFyZ2VkIGFpciIsDQogICAgICBsb2MoIlN1Z2FyIGx1bXBzIGNvYWxlc2NlIDxiPmEgd2hvbGUgbG90IGZhc3RlcjwvYj4uIikgKw0KICAgICAgICAiPHE+RG9uJ3QgYnJlYXRoZSB0b28gbXVjaCBvciB5b3UnbGwgZ2V0IGRpYWJldGVzITwvcT4iLA0KICAgICAgNywNCiAgICAgIFsyOSwgMTZdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAxMDMwMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkxhdmVuZGVyIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAzMDAgb2YgZXZlcnl0aGluZy48YnI+VGhpcyBzdWJ0bHktZmxhdm9yZWQgYmlzY3VpdCByZXByZXNlbnRzIHRoZSBhY2NvbXBsaXNobWVudHMgb2YgZGVjYWRlcyBvZiB0b3Atc2VjcmV0IHJlc2VhcmNoLiBUaGUgbW9sZGVkIGRlc2lnbiBvbiB0aGUgY2hvY29sYXRlIHJlc2VtYmxlcyBhIHdlbGwta25vd24gZW50cmVwcmVuZXVyIHdobyBnYXZlIHRoZWlyIGFsbCB0byB0aGUgYW5jaWVudCBwYXRoIG9mIGJha2luZy4iLA0KICAgICAgaWNvbjogWzI2LCAxMF0sDQogICAgICBwb3dlcjogMTAsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogYnV0dGVyQmlzY3VpdE11bHQsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDMwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTG9tYmFyZGlhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIGNvbWUgZnJvbSB0aG9zZSBmYXJtcyB3aXRoIHRoZSByZWFsbHkgZ29vZCBtZW1vcnkuIiwNCiAgICAgIGljb246IFsyMywgMTNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmFzdGVuYWtlbiBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJGcmVuY2ggY29va2llcyBtYWRlIG9mIGRlbGljaW91cyBjaW5uYW1vbiBhbmQgY2FuZHkgc3VnYXIuIFRoZXNlIGRvIG5vdCBjb250YWluIE51dHMhIiwNCiAgICAgIGljb246IFsyNCwgMTNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBlY2FuIHNhbmRpZXMiLA0KICAgICAgZGVzYzogIlN0aWNrIGEgbnV0IG9uIGEgY29va2llIGFuZCBjYWxsIGl0IGEgZGF5ISBOYW1lIHlvdXIgYmFuZCBhZnRlciBpdCEgV2hhdGV2ZXIhIiwNCiAgICAgIGljb246IFsyNSwgMTNdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIk1vcmF2aWFuIHNwaWNlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlBvcHVsYXIgZm9yIGJlaW5nIHRoZSB3b3JsZCdzIG1vcmF2aWFuZXN0IGNvb2tpZXMuIiwNCiAgICAgIGljb246IFsyNiwgMTNdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkFuemFjIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBcm15IGJpc2N1aXRzIGZyb20gYSBiYWtlcnkgZG93biB1bmRlciwgY29udGFpbmluZyBubyBlZ2dzIGJ1dCB5ZXMgb2F0cy4iLA0KICAgICAgaWNvbjogWzI3LCAxM10sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlcmNha2VzIiwNCiAgICAgIGRlc2M6ICJHbGlzdGVuaW5nIHdpdGggY2hvbGVzdGVyb2wsIHRoZXNlIGNvb2tpZXMgbW9pc3RseSBzdHJhZGRsZSB0aGUgbGluZSBiZXR3ZWVuIHRoZSBsZWdhbCBkZWZpbml0aW9uIG9mIGEgY29va2llIGFuZCBqdXN0IGEgc3RyYWlnaHQtdXAgc3RpY2sgb2YgYnV0dGVyLiIsDQogICAgICBpY29uOiBbMjksIDEzXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSWNlIGNyZWFtIHNhbmR3aWNoZXMiLA0KICAgICAgZGVzYzogJ0luIGFuIGFsdGVybmF0ZSB1bml2ZXJzZSwgImljZSBjcmVhbSBzYW5kd2ljaCIgZGVzaWduYXRlcyBhbiBpY2UgY3JlYW0gY29uZSBmaWxsZWQgd2l0aCBiYWNvbiwgbGV0dHVjZSwgYW5kIHRvbWF0b2VzLiBNYXliZSBzb21lIHNwcmlua2xlcyB0b28uJywNCiAgICAgIGljb246IFsyOCwgMTNdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdGV2aWEgQ2FlbGVzdGlzIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlN1Z2FyIGx1bXBzIHJpcGVuIDxiPiUxPC9iPiBzb29uZXIuIiwNCiAgICAgICAgR2FtZS5zYXlUaW1lKDYwICogNjAgKiBHYW1lLmZwcykNCiAgICAgICkgKw0KICAgICAgICAiPHE+QSBwbGFudCBvZiBzdXBlcm5hdHVyYWwgc3dlZXRuZXNzIGdyb3duIGJ5IGFuZ2VscyBpbiBoZWF2ZW5seSBnYXJkZW5zLjwvcT4iLA0KICAgICAgMTAwMDAwMDAwLA0KICAgICAgWzI1LCAxNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiV3JpbmtseSBjb29raWVzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEaWFiZXRpY2EgRGFlbW9uaWN1cyIsDQogICAgICBsb2MoDQogICAgICAgICJTdWdhciBsdW1wcyBtYXR1cmUgPGI+JTE8L2I+IHNvb25lci4iLA0KICAgICAgICBHYW1lLnNheVRpbWUoNjAgKiA2MCAqIEdhbWUuZnBzKQ0KICAgICAgKSArDQogICAgICAgICI8cT5BIG1hbGV2b2xlbnQsIGlmIGRlbGljaW91cyBoZXJiIHRoYXQgaXMgc2FpZCB0byBncm93IG9uIHRoZSBjbGlmZnMgb2YgdGhlIGRhcmtlc3QgYWJ5c3Mgb2YgdGhlIHVuZGVyd29ybGQuPC9xPiIsDQogICAgICAzMDAwMDAwMDAsDQogICAgICBbMjYsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdGV2aWEgQ2FlbGVzdGlzIiwgIkx1Y2lmZXIiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN1Y3JhbG9zaWEgSW51dGlsaXMiLA0KICAgICAgbG9jKA0KICAgICAgICAiQmlmdXJjYXRlZCBzdWdhciBsdW1wcyBhcHBlYXIgPGI+JTElIG1vcmUgb2Z0ZW48L2I+IGFuZCBhcmUgPGI+JTIlIG1vcmUgbGlrZWx5PC9iPiB0byBkcm9wIDIgbHVtcHMuIiwNCiAgICAgICAgWzUsIDVdDQogICAgICApICsNCiAgICAgICAgIjxxPkEgcmFyZSBiZXJyeSBvZiB1bmludGVyZXN0aW5nIGZsYXZvciB0aGF0IGlzIGFzIGVsdXNpdmUgYXMgaXRzIHVzZXMgYXJlIGxpbWl0ZWQ7IG9ubHkgc291Z2h0LWFmdGVyIGJ5IHRoZSBtb3N0IGF2aWQgY29sbGVjdG9ycyB3aXRoIHRvbyBtdWNoIHdlYWx0aCBvbiB0aGVpciBoYW5kcy48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAsDQogICAgICBbMjcsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJEaWFiZXRpY2EgRGFlbW9uaWN1cyJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNreSBkaWdpdCIsDQogICAgICBsb2MoDQogICAgICAgICI8Yj4rJTElPC9iPiBwcmVzdGlnZSBsZXZlbCBlZmZlY3Qgb24gQ3BTLjxicj48Yj4rJTIlPC9iPiBnb2xkZW4gY29va2llIGVmZmVjdCBkdXJhdGlvbi48YnI+PGI+KyUzJTwvYj4gZ29sZGVuIGNvb2tpZSBsaWZlc3Bhbi4iLA0KICAgICAgICBbMSwgMSwgMV0NCiAgICAgICkgKw0KICAgICAgICAiPHE+VGhpcyB1cGdyYWRlIGlzIGEgYml0IHNoeSBhbmQgb25seSBhcHBlYXJzIHdoZW4geW91ciBwcmVzdGlnZSBsZXZlbCBjb250YWlucyBhIDcuPC9xPiIsDQogICAgICA3NzcsDQogICAgICBbMjQsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJIZWF2ZW5seSBsdWNrIl07DQogICAgR2FtZS5sYXN0LnNob3dJZiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBNYXRoLmNlaWwoKEdhbWUucHJlc3RpZ2UgKyAiIikuc3BsaXQoIjciKS5sZW5ndGggLSAxKSA+PSAxOw0KICAgIH07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNreSBudW1iZXIiLA0KICAgICAgbG9jKA0KICAgICAgICAiPGI+KyUxJTwvYj4gcHJlc3RpZ2UgbGV2ZWwgZWZmZWN0IG9uIENwUy48YnI+PGI+KyUyJTwvYj4gZ29sZGVuIGNvb2tpZSBlZmZlY3QgZHVyYXRpb24uPGJyPjxiPislMyU8L2I+IGdvbGRlbiBjb29raWUgbGlmZXNwYW4uIiwNCiAgICAgICAgWzEsIDEsIDFdDQogICAgICApICsNCiAgICAgICAgIjxxPlRoaXMgdXBncmFkZSBpcyBhIHJlY2x1c2l2ZSBoZXJtaXQgYW5kIG9ubHkgYXBwZWFycyB3aGVuIHlvdXIgcHJlc3RpZ2UgbGV2ZWwgY29udGFpbnMgdHdvIDcncy48L3E+IiwNCiAgICAgIDc3Nzc3LA0KICAgICAgWzI0LCAxNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiTHVja3kgZGlnaXQiLCAiTGFzdGluZyBmb3J0dW5lIl07DQogICAgR2FtZS5sYXN0LnNob3dJZiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBNYXRoLmNlaWwoKEdhbWUucHJlc3RpZ2UgKyAiIikuc3BsaXQoIjciKS5sZW5ndGggLSAxKSA+PSAyOw0KICAgIH07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNreSBwYXlvdXQiLA0KICAgICAgbG9jKA0KICAgICAgICAiPGI+KyUxJTwvYj4gcHJlc3RpZ2UgbGV2ZWwgZWZmZWN0IG9uIENwUy48YnI+PGI+KyUyJTwvYj4gZ29sZGVuIGNvb2tpZSBlZmZlY3QgZHVyYXRpb24uPGJyPjxiPislMyU8L2I+IGdvbGRlbiBjb29raWUgbGlmZXNwYW4uIiwNCiAgICAgICAgWzEsIDEsIDFdDQogICAgICApICsNCiAgICAgICAgIjxxPlRoaXMgdXBncmFkZSB0b29rIGFuIG9hdGggb2YgY29tcGxldGUgc2VjbHVzaW9uIGZyb20gdGhlIHJlc3Qgb2YgdGhlIHdvcmxkIGFuZCBvbmx5IGFwcGVhcnMgd2hlbiB5b3VyIHByZXN0aWdlIGxldmVsIGNvbnRhaW5zIGZvdXIgNydzLjwvcT4iLA0KICAgICAgNzc3Nzc3NzcsDQogICAgICBbMjQsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJMdWNreSBudW1iZXIiLCAiRGVjaXNpdmUgZmF0ZSJdOw0KICAgIEdhbWUubGFzdC5zaG93SWYgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gTWF0aC5jZWlsKChHYW1lLnByZXN0aWdlICsgIiIpLnNwbGl0KCI3IikubGVuZ3RoIC0gMSkgPj0gNDsNCiAgICB9Ow0KDQogICAgb3JkZXIgPSA1MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkJhY2tncm91bmQgc2VsZWN0b3IiLA0KICAgICAgbG9jKCJMZXRzIHlvdSBwaWNrIHdoaWNoIHdhbGxwYXBlciB0byBkaXNwbGF5LiIpLA0KICAgICAgMCwNCiAgICAgIFsyOSwgNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5kZXNjRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBjaG9pY2UgPSB0aGlzLmNob2ljZXNGdW5jdGlvbigpW0dhbWUuYmdUeXBlXTsNCiAgICAgIGlmIChjaG9pY2UgPT0gMCkgY2hvaWNlID0gdGhpcy5jaG9pY2VzRnVuY3Rpb24oKVswXTsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBsb2MoIkN1cnJlbnQ6IikgKw0KICAgICAgICAiICIgKw0KICAgICAgICB0aW55SWNvbihjaG9pY2UuaWNvbikgKw0KICAgICAgICAiIDxiPiIgKw0KICAgICAgICBjaG9pY2UubmFtZSArDQogICAgICAgICc8L2I+PC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCg0KICAgIEdhbWUubGFzdC5wb29sID0gInRvZ2dsZSI7DQogICAgR2FtZS5sYXN0LmNob2ljZXNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBjaG9pY2VzID0gW107DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuQkdzQnlDaG9pY2UpIHsNCiAgICAgICAgY2hvaWNlc1tpXSA9IHsNCiAgICAgICAgICBuYW1lOiBHYW1lLkJHc0J5Q2hvaWNlW2ldLm5hbWUsDQogICAgICAgICAgaWNvbjogR2FtZS5CR3NCeUNob2ljZVtpXS5pY29uLA0KICAgICAgICAgIG9yZGVyOiBHYW1lLkJHc0J5Q2hvaWNlW2ldLm9yZGVyIHx8IHBhcnNlSW50KGkpLA0KICAgICAgICB9Ow0KICAgICAgfQ0KDQogICAgICBjaG9pY2VzWzEzXS5kaXYgPSB0cnVlOw0KDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNob2ljZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgdmFyIGl0ID0gY2hvaWNlc1tpXTsNCiAgICAgICAgaWYgKGl0Lm9yZGVyID49IDQuOSAmJiAhR2FtZS5IYXMoIkRpc3Rpbmd1aXNoZWQgd2FsbHBhcGVyIGFzc29ydG1lbnQiKSkNCiAgICAgICAgICBjaG9pY2VzW2ldID0gMDsNCiAgICAgIH0NCg0KICAgICAgY2hvaWNlc1tHYW1lLmJnVHlwZV0uc2VsZWN0ZWQgPSAxOw0KICAgICAgcmV0dXJuIGNob2ljZXM7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuY2hvaWNlc1BpY2sgPSBmdW5jdGlvbiAoaWQpIHsNCiAgICAgIEdhbWUuYmdUeXBlID0gaWQ7DQogICAgfTsNCg0KICAgIEdhbWUuQWxsQkdzID0gWw0KICAgICAgeyBwaWM6ICJiZ0JsdWUiLCBuYW1lOiAiQXV0b21hdGljIiwgaWNvbjogWzAsIDddIH0sDQogICAgICB7IHBpYzogImJnQmx1ZSIsIG5hbWU6ICJCbHVlIiwgaWNvbjogWzIxLCAyMV0gfSwNCiAgICAgIHsgcGljOiAiYmdSZWQiLCBuYW1lOiAiUmVkIiwgaWNvbjogWzIyLCAyMV0gfSwNCiAgICAgIHsgcGljOiAiYmdXaGl0ZSIsIG5hbWU6ICJXaGl0ZSIsIGljb246IFsyMywgMjFdIH0sDQogICAgICB7IHBpYzogImJnQmxhY2siLCBuYW1lOiAiQmxhY2siLCBpY29uOiBbMjQsIDIxXSB9LA0KICAgICAgeyBwaWM6ICJiZ0dvbGQiLCBuYW1lOiAiR29sZCIsIGljb246IFsyNSwgMjFdIH0sDQogICAgICB7IHBpYzogImdyYW5kbWFzMSIsIG5hbWU6ICJHcmFuZG1hcyIsIGljb246IFsyNiwgMjFdIH0sDQogICAgICB7IHBpYzogImdyYW5kbWFzMiIsIG5hbWU6ICJEaXNwbGVhc2VkIGdyYW5kbWFzIiwgaWNvbjogWzI3LCAyMV0gfSwNCiAgICAgIHsgcGljOiAiZ3JhbmRtYXMzIiwgbmFtZTogIkFuZ2VyZWQgZ3JhbmRtYXMiLCBpY29uOiBbMjgsIDIxXSB9LA0KICAgICAgeyBwaWM6ICJiZ01vbmV5IiwgbmFtZTogIk1vbmV5IiwgaWNvbjogWzI5LCAyMV0gfSwNCiAgICAgIHsgcGljOiAiYmdQdXJwbGUiLCBuYW1lOiAiUHVycGxlIiwgaWNvbjogWzIxLCAyMl0sIG9yZGVyOiAxLjEgfSwNCiAgICAgIHsgcGljOiAiYmdQaW5rIiwgbmFtZTogIlBpbmsiLCBpY29uOiBbMjQsIDIyXSwgb3JkZXI6IDIuMSB9LA0KICAgICAgeyBwaWM6ICJiZ01pbnQiLCBuYW1lOiAiTWludCIsIGljb246IFsyMiwgMjJdLCBvcmRlcjogMi4yIH0sDQogICAgICB7IHBpYzogImJnU2lsdmVyIiwgbmFtZTogIlNpbHZlciIsIGljb246IFsyNSwgMjJdLCBvcmRlcjogNC45IH0sDQogICAgICB7IHBpYzogImJnQlciLCBuYW1lOiAiQmxhY2sgJiBXaGl0ZSIsIGljb246IFsyMywgMjJdLCBvcmRlcjogNC4xIH0sDQogICAgICB7IHBpYzogImJnU3BlY3RydW0iLCBuYW1lOiAiU3BlY3RydW0iLCBpY29uOiBbMjgsIDIyXSwgb3JkZXI6IDQuMiB9LA0KICAgICAgeyBwaWM6ICJiZ0NhbmR5IiwgbmFtZTogIkNhbmR5IiwgaWNvbjogWzI2LCAyMl0gfSwNCiAgICAgIHsgcGljOiAiYmdZZWxsb3dCbHVlIiwgbmFtZTogIkJpc2N1aXQgc3RvcmUiLCBpY29uOiBbMjcsIDIyXSB9LA0KICAgICAgeyBwaWM6ICJiZ0Nob2NvIiwgbmFtZTogIkNob2NvbGF0ZSIsIGljb246IFszMCwgMjFdIH0sDQogICAgICB7IHBpYzogImJnQ2hvY29EYXJrIiwgbmFtZTogIkRhcmsgQ2hvY29sYXRlIiwgaWNvbjogWzMxLCAyMV0gfSwNCiAgICAgIHsgcGljOiAiYmdQYWludCIsIG5hbWU6ICJQYWludGVyIiwgaWNvbjogWzI0LCAzNF0gfSwNCiAgICAgIHsgcGljOiAiYmdTbm93eSIsIG5hbWU6ICJTbm93IiwgaWNvbjogWzMwLCAyMl0gfSwNCiAgICAgIHsgcGljOiAiYmdTa3kiLCBuYW1lOiAiU2t5IiwgaWNvbjogWzI5LCAyMl0gfSwNCiAgICAgIHsgcGljOiAiYmdTdGFycyIsIG5hbWU6ICJOaWdodCIsIGljb246IFszMSwgMjJdIH0sDQogICAgICB7IHBpYzogImJnRm9pbCIsIG5hbWU6ICJGb2lsIiwgaWNvbjogWzI1LCAzNF0gfSwNCiAgICBdOw0KICAgIEdhbWUuQkdzQnlDaG9pY2UgPSB7fTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUuQWxsQkdzLmxlbmd0aDsgaSsrKSB7DQogICAgICBHYW1lLkJHc0J5Q2hvaWNlW2ldID0gR2FtZS5BbGxCR3NbaV07DQogICAgfQ0KICAgIGlmICghRU4pIHsNCiAgICAgIEdhbWUuQkdzQnlDaG9pY2VbMF0ubmFtZSA9IGxvYyhHYW1lLkJHc0J5Q2hvaWNlWzBdLm5hbWUpOw0KICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBHYW1lLkJHc0J5Q2hvaWNlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIEdhbWUuQkdzQnlDaG9pY2VbaV0ubmFtZSA9ICciJyArIEdhbWUuQkdzQnlDaG9pY2VbaV0ucGljICsgJyInOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIG9yZGVyID0gMjU1Ow0KICAgIEdhbWUuR3JhbmRtYVN5bmVyZ3koDQogICAgICAiTHVja3kgZ3JhbmRtYXMiLA0KICAgICAgIkEgZm9ydHVuYXRlIGdyYW5kbWEgdGhhdCBhbHdheXMgc2VlbXMgdG8gZmluZCBtb3JlIGNvb2tpZXMuIiwNCiAgICAgICJDaGFuY2VtYWtlciINCiAgICApOw0KDQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJZb3VyIGx1Y2t5IGNvb2tpZSIsDQogICAgICAiPHE+VGhpcyBpcyB0aGUgZmlyc3QgY29va2llIHlvdSd2ZSBldmVyIGJha2VkLiBJdCBob2xkcyBhIGRlZXAgc2VudGltZW50YWwgdmFsdWUgYW5kLCBhZnRlciBhbGwgdGhpcyB0aW1lLCBhbiBpbnRlcmVzdGluZyBzbWVsbC48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAnIkFsbCBCZXRzIEFyZSBPZmYiIG1hZ2ljIGNvaW4nLA0KICAgICAgIjxxPkEgY29pbiB0aGF0IGFsd2F5cyBsYW5kcyBvbiB0aGUgb3RoZXIgc2lkZSB3aGVuIGZsaXBwZWQuIE5vdCBoZWFkcywgbm90IHRhaWxzLCBub3QgdGhlIGVkZ2UuIFRoZSA8aT5vdGhlciBzaWRlPC9pPi48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2lubmluZyBsb3R0ZXJ5IHRpY2tldCIsDQogICAgICAiPHE+V2hhdCBsb3R0ZXJ5PyBUSEUgbG90dGVyeSwgdGhhdCdzIHdoYXQgbG90dGVyeSEgT25seSBsb3R0ZXJ5IHRoYXQgbWF0dGVycyE8L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAzDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm91ci1sZWFmIGNsb3ZlciBmaWVsZCIsDQogICAgICAiPHE+Tm8gZ2lhbnQgbW9uc3RlcnMgaGVyZSwganVzdCBhIHdob2xlIGxvdCBvZiBsdWNreSBncmFzcy48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQSByZWNpcGUgYm9vayBhYm91dCBib29rcyIsDQogICAgICAiPHE+VGlwIHRoZSBzY2FsZXMgaW4geW91ciBmYXZvciB3aXRoIDI4IGNyZWF0aXZlIG5ldyB3YXlzIHRvIGNvb2sgdGhlIGJvb2tzLjwvcT4iLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDUNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJMZXByZWNoYXVuIHZpbGxhZ2UiLA0KICAgICAgIjxxPllvdSd2ZSBmaW5hbGx5IGJlY29tZSBhY2NlcHRlZCBhbW9uZyB0aGUgbG9jYWwgbGVwcmVjaGF1bnMsIHdobyBsZW5kIHlvdSB0aGVpciBteXRoaWNhbCBsdWNrIGFzIGEgc2lnbiBvZiBmcmllbmRzaGlwIChhcyB3ZWxsIGFzIHNvbWUgcmF0aGVyIGZvdWwtdGFzdGluZyB0ZWEpLjwvcT4iLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDYNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJJbXByb2JhYmlsaXR5IGRyaXZlIiwNCiAgICAgICI8cT5BIHN0cmFuZ2UgZW5naW5lIHRoYXQgdHVybnMgc3RhdGlzdGljcyBvbiB0aGVpciBoZWFkLiBSZWNvbW1lbmRlZCBieSB0aGUgR3JhbmRtb3RoZXIncyBHdWlkZSB0byB0aGUgQmFrZXJ5LjwvcT4iLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDcNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbnRpc3VwZXJzdGlzdHJvbmljcyIsDQogICAgICAiPHE+QW4gZXhjaXRpbmcgbmV3IGZpZWxkIG9mIHJlc2VhcmNoIHRoYXQgbWFrZXMgdW5sdWNreSB0aGluZ3MgbHVja3kuIE5vIG1pcnJvciB1bmJyb2tlbiwgbm8gbGFkZGVyIHVud2Fsa2VkIHVuZGVyITwvcT4iLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDgNCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiR2VtbWVkIHRhbGlzbWFucyIsDQogICAgICAiPHE+R29vZC1sdWNrIGNoYXJtcyBjb3ZlcmVkIGluIGFuY2llbnQgYW5kIGV4Y3J1Y2lhdGluZ2x5IHJhcmUgY3J5c3RhbHMuIEEgbXVzdCBoYXZlIGZvciBqb2IgaW50ZXJ2aWV3cyE8L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAiTWluZSIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gY29uc3VsdGFudHMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5nbGFkIHRvIGJlIG92ZXJwYWlkIHRvIHdvcmsgd2l0aCB5b3UsIHNpcjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCA5KQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgOSwgMTgpOw0KDQogICAgb3JkZXIgPSA5OTk5OTsNCiAgICB2YXIgeWVhcnMgPSBNYXRoLmZsb29yKA0KICAgICAgKERhdGUubm93KCkgLSBuZXcgRGF0ZSgyMDEzLCA3LCA4KSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCAqIDM2NSkNCiAgICApOw0KICAgIC8vb25seSB1cGRhdGVzIG9uIHBhZ2UgbG9hZA0KICAgIC8vbWF5IGJlaGF2ZSBzdHJhbmdlbHkgb24gbGVhcCB5ZWFycw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmlydGhkYXkgY29va2llIiwNCiAgICAgIGRlc2M6ICI8cT4tPC9xPiIsDQogICAgICBpY29uOiBbMjIsIDEzXSwNCiAgICAgIHBvd2VyOiB5ZWFycywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLmxhc3QuYmFzZURlc2MgPQ0KICAgICAgbG9jKA0KICAgICAgICAiQ29va2llIHByb2R1Y3Rpb24gbXVsdGlwbGllciA8Yj4rJTElPC9iPiBmb3IgZXZlcnkgeWVhciBDb29raWUgQ2xpY2tlciBoYXMgZXhpc3RlZCAoY3VycmVudGx5OiA8Yj4rJTIlPC9iPikuIiwNCiAgICAgICAgWzEsIEJlYXV0aWZ5KHllYXJzKV0NCiAgICAgICkgKyAiPHE+VGhhbmsgeW91IGZvciBwbGF5aW5nIENvb2tpZSBDbGlja2VyITxicj4tT3J0ZWlsPC9xPiI7DQoNCiAgICBvcmRlciA9IDE1MDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFybXl0aHJpbCBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsNCiAgICAgICAgIjxxPlRoaXMgb25lIHRha2VzIGFib3V0IDUzIHBlb3BsZSB0byBwdXNoIGl0IGFyb3VuZCBhbmQgYW5vdGhlciA0OCB0byBqdW1wIGRvd24gb24gdGhlIGJ1dHRvbiBhbmQgdHJpZ2dlciBhIGNsaWNrLiBZb3UgY291bGQgc2F5IGl0J3MgZ290IHNvbWUgaGVmdCB0byBpdC48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAxOV0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEwLCAxMSk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUmV2ZXJzZSBkZW1lbnRpYSIsDQogICAgICAiPHE+RXh0cmVtZWx5IHVuc2V0dGxpbmcsIGFuZCBzb21laG93IGV2ZW4gd29yc2UgdGhhbiB0aGUgcmVndWxhciBraW5kLjwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkh1bWFuZSBwZXN0aWNpZGVzIiwNCiAgICAgICI8cT5NYWRlIGJ5IHBlb3BsZSwgZm9yIHBlb3BsZSwgZnJvbSBwZW9wbGUgYW5kIHJlYWR5IHRvIHVubGVhc2ggc29tZSByaWdodGVvdXMgc2NvcmNoaW5nIHBhaW4gb24gdGhvc2UgcGVza3kgaW5zZWN0cyB0aGF0IHNvIGRlc2VydmUgaXQuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDQwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTW9sZSBwZW9wbGUiLA0KICAgICAgIjxxPkVuZ2luZWVyZWQgZnJvbSByZWFsIGh1bWFuIGJlaW5ncyB3aXRoaW4geW91ciB2ZXJ5IGxhYnMsIHRoZXNlIHN0dXJkeSBsaXR0bGUgZm9sa3MgaGF2ZSBhIGtuYWNrIGZvciBmaW5kaW5nIHRoZSB0YXN0aWVzdCB1bmRlcmdyb3VuZCBtaW5lcmFscyBpbiBjb25kaXRpb25zIHRoYXQgbW9yZSBleHBlbnNpdmUgbWFjaGluZXJ5IHByb2JhYmx5IHdvdWxkbid0IHN1cnZpdmUuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDUwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTWFjaGluZSBsZWFybmluZyIsDQogICAgICAiPHE+WW91IGZpZ3VyZWQgeW91IG1pZ2h0IGdldCBiZXR0ZXIgcHJvZHVjdGl2aXR5IGlmIHlvdSBhY3R1YWxseSB0b2xkIHlvdXIgd29ya2VycyB0byBsZWFybiBob3cgdG8gd29yayB0aGUgbWFjaGluZXMuIFNvbWV0aW1lcywgaXQncyB0aGUgbGl0dGxlIHRoaW5ncy4uLjwvcT4iLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkVkaWJsZSBtb25leSIsDQogICAgICAiPHE+SXQncyByZWFsbHkgcXVpdGUgc2ltcGxlOyB5b3UgbWFrZSBhbGwgY3VycmVuY3kgdG9vIGRlbGljaW91cyBub3QgdG8gZWF0LCBzb2x2aW5nIHdvcmxkIGh1bmdlciBhbmQgaW5mbGF0aW9uIGluIG9uZSBmZWxsIHN3b29wITwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSA1NTA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlNpY2sgcmFwIHByYXllcnMiLA0KICAgICAgIjxxPldpdGggdGhlaXIgaWxsIGJlYXQgYW5kIHJhZGljYWwgcmh5bWVzLCB0aGVzZSB3YXktaGlwIHJlbGlnaW91cyB0dW5lcyBhcmUgc3VyZSB0byBnZXQgYWxsIHRoZSB5b3VuZ2lucyB3aG8gdGhvdWdodCB0aGV5IHdlcmUgMiBjb29sIDQgY2h1cmNoIGJhY2sgb24gdGhlIHBld3MgYW5kIHByYXlpbmcgZm9yIG1vcmUhIFdpY2tlZCE8L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSA1NzU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRlbHV4ZSB0YWlsb3JlZCB3YW5kcyIsDQogICAgICAiPHE+SW4gdGhpcyBhZ2Ugb2Ygc2NpZW5jZSwgbW9zdCBza2lsbGZ1bCB3YW5kLW1ha2VycyBhcmUgbm93IGxvbmcgZ29uZTsgYnV0IHRoYW5rZnVsbHkgLSBub3QgYWxsIHRob3NlIHdhbmRlcnMgYXJlIGxvc3QuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDkNCiAgICApOw0KICAgIG9yZGVyID0gNjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBdXRvcGlsb3QiLA0KICAgICAgIjxxPllvdXIgc2hpcHMgYXJlIG5vdyBmaXR0ZWQgd2l0aCBjb21wbGV0ZWx5IHJvYm90aWMgY3Jld3MhIEl0J3MgY3JhenkgaG93IG11Y2ggbW9uZXkgeW91IHNhdmUgd2hlbiB5b3UgZG9uJ3QgaGF2ZSB0byBjb21wZW5zYXRlIHRoZSBmYW1pbGllcyBvZiB0aG9zZSBsb3N0IGluIHNwYWNlLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDkNCiAgICApOw0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGUgYWR2ZW50IG9mIGNoZW1pc3RyeSIsDQogICAgICAiPHE+WW91IGtub3cgd2hhdD8gVGhhdCB3aG9sZSBhbGNoZW15IG5vbnNlbnNlIHdhcyBhIGxvYWQgb2YgYmFzZWxlc3MgcnViYmlzaC4gRGVhciBnb2QsIHdoYXQgd2VyZSB5b3UgdGhpbmtpbmc/PC9xPiIsDQogICAgICAiQWxjaGVteSBsYWIiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSA4MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRoZSByZWFsIHdvcmxkIiwNCiAgICAgICI8cT5JdCB0dXJucyBvdXQgdGhhdCBvdXIgdW5pdmVyc2UgaXMgYWN0dWFsbHkgdGhlIHR3aXN0ZWQgZGltZW5zaW9uIG9mIGFub3RoZXIsIHNhbmVyIHBsYW5lIG9mIHJlYWxpdHkuIFRpbWUgdG8gaG9wIG9uIG92ZXIgdGhlcmUgYW5kIGxvb3QgdGhlIHBsYWNlITwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU2Vjb25kIHNlY29uZHMiLA0KICAgICAgIjxxPlRoYXQncyB0d2ljZSBhcyBtYW55IHNlY29uZHMgaW4gdGhlIHNhbWUgYW1vdW50IG9mIHRpbWUhIFdoYXQgYSBkZWFsISBBbHNvLCB3aGF0IGluIGdvZCdzIG5hbWUhPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDkNCiAgICApOw0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUXVhbnR1bSBjb21iIiwNCiAgICAgICI8cT5RdWFudHVtIGVudGFuZ2xlbWVudCBpcyBvbmUgb2YgdGhvc2UgdGhpbmdzIHRoYXQgYXJlIHNvIGFubm95aW5nIHRvIGV4cGxhaW4gdGhhdCB3ZSBtaWdodCBob25lc3RseSBiZSBiZXR0ZXIgb2ZmIHdpdGhvdXQgaXQuIFRoaXMgaXMgZmluYWxseSBwb3NzaWJsZSB0aGFua3MgdG8gdGhlIHF1YW50dW0gY29tYiE8L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNyeXN0YWwgbWlycm9ycyIsDQogICAgICAiPHE+RGVzaWduZWQgdG8gZmlsdGVyIG1vcmUgbGlnaHQgYmFjayBpbnRvIHlvdXIgcHJpc21zLCByZWFjaGluZyBsZXZlbHMgb2YgYnJpZ2h0bmVzcyB0aGF0IHJlYWxpdHkgaXRzZWxmIGhhZCBuZXZlciBwbGFubmVkIGZvci48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDEyMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJ1bm55cGVkZXMiLA0KICAgICAgIjxxPllvdSd2ZSB0YWtlbiB0byBicmVlZGluZyByYWJiaXRzIHdpdGggaHVuZHJlZHMgb2YgcGF3cywgd2hpY2ggbWFrZXMgdGhlbSBpbnRyaW5zaWNhbGx5IHZlcnkgbHVja3kgYW5kIHRodXMgYSB2ZXJ5IGhhbmR5IChpZiB2ZXJ5IGRpc3R1cmJpbmcpIHBldC48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICA5DQogICAgKTsNCg0KICAgIG9yZGVyID0gMjAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gYXNzaXN0YW50cyB0byB0aGUgcmVnaW9uYWwgbWFuYWdlciIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsNCiAgICAgICAgIjxxPm5vdGhpbmcgc3RyZXNzZXMgbWVvd3QuLi4gZXhjZXB0IGhhdmluZyB0byBzZWVrIHRoZSBhcHByb3ZhbCBvZiBteSBpbmZlcmlvcnMsIHNpcjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCAxMCkNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEwLCAxOCk7DQoNCiAgICBvcmRlciA9IDUwMDA7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJDaGFybSBxdWFya3MiLA0KICAgICAgIjxxPlRoZXkncmUgYWZ0ZXIgeW91ciBsdWNreSBxdWFya3MhPC9xPiIsDQogICAgICAiQ2hhbmNlbWFrZXIiLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgICJzeW5lcmd5MiINCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBpbmsgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIk9uZSBvZiB0aGUgb2xkZXN0IGNvb2tpZXMuIFRyYWRpdGlvbmFsbHkgZGlwcGVkIGluIGNoYW1wYWduZSB0byBzb2Z0ZW4gaXQsIGJlY2F1c2UgdGhlIEZyZW5jaCB3aWxsIHVzZSBhbnkgb3Bwb3J0dW5pdHkgdG8gZHJpbmsuIiwNCiAgICAgIGljb246IFsyMSwgMTZdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiV2hvbGUtZ3JhaW4gY29va2llcyIsDQogICAgICBkZXNjOiAnQ292ZXJlZCBpbiBzZWVkcyBhbmQgb3RoZXIgZWFydGh5LWxvb2tpbmcgZGVicmlzLiBSZWFsbHkgZ29pbmcgZm9yIHRoYXQgIjUtc2Vjb25kIHJ1bGUiIGxvb2suJywNCiAgICAgIGljb246IFsyMiwgMTZdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhbmR5IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIG1lbHQgaW4geW91ciBoYW5kcyBqdXN0IGEgbGl0dGxlIGJpdC4iLA0KICAgICAgaWNvbjogWzIzLCAxNl0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmlnIGNoaXAgY29va2llcyIsDQogICAgICBkZXNjOiAiWW91IGFyZSBpbiBhd2UgYXQgdGhlIHNpemUgb2YgdGhlc2UgY2hpcHMuIEFic29sdXRlIHVuaXRzLiIsDQogICAgICBpY29uOiBbMjQsIDE2XSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiT25lIGNoaXAgY29va2llcyIsDQogICAgICBkZXNjOiAiWW91IGdldCBvbmUuIiwNCiAgICAgIGljb246IFsyNSwgMTZdLA0KICAgICAgcG93ZXI6IDEsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN1Z2FyIGJha2luZyIsDQogICAgICBsb2MoDQogICAgICAgICdFYWNoIHVuc3BlbnQgc3VnYXIgbHVtcCAodXAgdG8gJTEpIGdpdmVzIDxiPislMiUgQ3BTPC9iPi48ZGl2IGNsYXNzPSJ3YXJuaW5nIj5Ob3RlOiB0aGlzIG1lYW5zIHRoYXQgc3BlbmRpbmcgc3VnYXIgbHVtcHMgd2lsbCBkZWNyZWFzZSB5b3VyIENwUyB1bnRpbCB0aGV5IGdyb3cgYmFjay48L2Rpdj4nLA0KICAgICAgICBbMTAwLCAxXQ0KICAgICAgKSArDQogICAgICAgICI8cT5UbyBiYWtlIHdpdGggdGhlIHN1Z2FyeSBlc3NlbmNlIG9mIGVvbnMgdGhlbXNlbHZlcywgeW91IG11c3QgZmlyc3QgbGVhcm4gdG8gdGFrZSB5b3VyIHN3ZWV0IHRpbWUuPC9xPiIsDQogICAgICAyMDAwMDAwMDAsDQogICAgICBbMjEsIDE3XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdGV2aWEgQ2FlbGVzdGlzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdWdhciBjcmF2aW5nIiwNCiAgICAgIGxvYygNCiAgICAgICAgJ09uY2UgYW4gYXNjZW5zaW9uLCB5b3UgbWF5IHVzZSB0aGUgIlN1Z2FyIGZyZW56eSIgc3dpdGNoIHRvIDxiPnRyaXBsZSB5b3VyIENwUzwvYj4gZm9yIDEgaG91ciwgYXQgdGhlIGNvc3Qgb2YgPGI+MSBzdWdhciBsdW1wPC9iPi4nDQogICAgICApICsgIjxxPkp1c3QgYSBsaXR0bGUga2ljayB0byBzd2VldGVuIHRoZSBkZWFsLjwvcT4iLA0KICAgICAgNDAwMDAwMDAwLA0KICAgICAgWzIyLCAxN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU3VnYXIgYmFraW5nIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdWdhciBhZ2luZyBwcm9jZXNzIiwNCiAgICAgIGxvYygiRWFjaCBncmFuZG1hICh1cCB0byAlMSkgbWFrZXMgc3VnYXIgbHVtcHMgcmlwZW4gPGI+JTI8L2I+IHNvb25lci4iLCBbDQogICAgICAgIDYwMCwNCiAgICAgICAgR2FtZS5zYXlUaW1lKDYgKiBHYW1lLmZwcyksDQogICAgICBdKSArICI8cT5BcmVuJ3QgdGhleSBqdXN0IHRoZSBzd2VldGVzdD88L3E+IiwNCiAgICAgIDYwMDAwMDAwMCwNCiAgICAgIFsyMywgMTddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlN1Z2FyIGNyYXZpbmciLCAiRGlhYmV0aWNhIERhZW1vbmljdXMiXTsNCg0KICAgIG9yZGVyID0gNDAwNTA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdWdhciBmcmVuenkiLA0KICAgICAgbG9jKA0KICAgICAgICAiQWN0aXZhdGluZyB0aGlzIHdpbGwgPGI+dHJpcGxlIHlvdXIgQ3BTPC9iPiBmb3IgMSBob3VyLCBhdCB0aGUgY29zdCBvZiA8Yj4xIHN1Z2FyIGx1bXA8L2I+LiINCiAgICAgICkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIk1heSBvbmx5IGJlIHVzZWQgb25jZSBwZXIgYXNjZW5zaW9uLiIpLA0KICAgICAgMCwNCiAgICAgIFsyMiwgMTddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucHJpY2VMdW1wcyA9IDE7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QudG9nZ2xlSW50byA9IDA7DQogICAgR2FtZS5sYXN0LmNhbkJ1eUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gR2FtZS5sdW1wcyA+PSAxOw0KICAgIH07DQogICAgR2FtZS5sYXN0LmNsaWNrRnVuY3Rpb24gPSBHYW1lLnNwZW5kTHVtcCgNCiAgICAgIDEsDQogICAgICBsb2MoImFjdGl2YXRlIHRoZSBzdWdhciBmcmVuenkiKSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VcGdyYWRlc1siU3VnYXIgZnJlbnp5Il0uYnV5KDEpOw0KICAgICAgICBidWZmID0gR2FtZS5nYWluQnVmZigic3VnYXIgZnJlbnp5IiwgNjAgKiA2MCwgMyk7DQogICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgIGxvYygiU3VnYXIgZnJlbnp5ISIpLA0KICAgICAgICAgIGxvYygiQ3BTIHglMSBmb3IgMSBob3VyISIsIDMpLA0KICAgICAgICAgIFsyOSwgMTRdDQogICAgICAgICk7DQogICAgICB9DQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTcHJpbmtsZXMgY29va2llcyIsDQogICAgICBkZXNjOiAiQSBiaXQgb2YgZmVzdGl2ZSBkZWNvcmF0aW5nIGhlbHBzIGhpZGUgdGhlIGZhY3QgdGhhdCB0aGlzIG1pZ2h0IGJlIG9uZSBvZiB0aGUgYmxhbmRlc3QgY29va2llcyB5b3UndmUgZXZlciB0YXN0ZWQuIiwNCiAgICAgIGljb246IFsyMSwgMTRdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGVhbnV0IGJ1dHRlciBibG9zc29tcyIsDQogICAgICBkZXNjOiAiVG9wcGVkIHdpdGggYSBzY3J1bXB0aW91cyBjaG9jb2xhdGUgc3F1aXJ0LCB3aGljaCBpcyBzb21ldGhpbmcgd2UgcmVhbGx5IHdpc2ggd2UgZGlkbid0IGp1c3Qgd3JpdGUuIiwNCiAgICAgIGljb246IFsyMiwgMTRdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTm8tYmFrZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJZb3UgaGF2ZSBubyBpZGVhIGhvdyB0aGVzZSBteXN0ZXJpb3VzIG92ZW4tbGVzcyB0cmVhdHMgY2FtZSB0byBiZSBvciBob3cgdGhleSBob2xkIHRoZWlyIHNoYXBlLiBZb3UncmUgdGhpbmtpbmcgZWl0aGVyIGVsZXBoYW50IGdsdWUgb3IgY29sZCBmdXNpb24uIiwNCiAgICAgIGljb246IFsyMSwgMTVdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkZsb3JlbnRpbmVzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSBtYWtlIHVwIGZvciBiZWluZyB0aGUgZnJ1aXRjYWtlIG9mIGNvb2tpZXMgYnkgYXQgbGVhc3QgaGF2aW5nIHRoZSBkZWNlbmN5IHRvIGZlYXR1cmUgY2hvY29sYXRlLiIsDQogICAgICBpY29uOiBbMjYsIDE2XSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDaG9jb2xhdGUgY3JpbmtsZXMiLA0KICAgICAgZGVzYzogIk5vbi1kZW5vbWluYXRpb25hbCBjb29raWVzIHRvIGNlbGVicmF0ZSB5ZWFyLXJvdW5kIGRlbGljaW91c25lc3MsIGFuZCBjZXJ0YWlubHkgbm90IENocmlzdG1hcyBvciBzb21lIG90aGVyIG5vbnNlbnNlLiIsDQogICAgICBpY29uOiBbMjIsIDE1XSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWFwbGUgY29va2llcyIsDQogICAgICBkZXNjOiAiTWFkZSB3aXRoIHN5cnVwIGZyb20gYSBsYW5kIHdoZXJlIG1pbGsgY29tZXMgaW4gYmFncywgaW5zdGVhZCBvZiBzcG9udGFuZW91c2x5IHBvb2xpbmcgYXQgdGhlIGJvdHRvbSBvZiB5b3VyIHNjcmVlbiBkZXBlbmRpbmcgb24geW91ciBhY2hpZXZlbWVudHMuIiwNCiAgICAgIGljb246IFsyMSwgMTNdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDQwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVHVyYm8tY2hhcmdlZCBzb2lsIiwNCiAgICAgIGxvYygNCiAgICAgICAgIkdhcmRlbiBwbGFudHMgZ3JvdyBldmVyeSBzZWNvbmQuPGJyPkdhcmRlbiBzZWVkcyBhcmUgZnJlZSB0byBwbGFudC48YnI+WW91IGNhbiBzd2l0Y2ggc29pbHMgYXQgYW55IHRpbWUuIg0KICAgICAgKSArICI8cT5JdCdzIGdvdCBlbGVjdHJvbHl0ZXMhPC9xPiIsDQogICAgICA3LA0KICAgICAgWzIsIDE2XQ0KICAgICk7IC8vZGVidWcgcHVycG9zZXMgb25seQ0KICAgIEdhbWUubGFzdC5idXlGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChHYW1lLk9iamVjdHNbIkZhcm0iXS5taW5pZ2FtZUxvYWRlZCkgew0KICAgICAgICBHYW1lLk9iamVjdHNbIkZhcm0iXS5taW5pZ2FtZS5jb21wdXRlU3RlcFQoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUubGFzdC5wb29sID0gImRlYnVnIjsNCg0KICAgIG9yZGVyID0gMTUwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVGVjaG5vYnNpZGlhbiBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsNCiAgICAgICAgIjxxPkEgaGlnaGx5IGFkdmFuY2VkIG1vdXNlIG9mIGEgc29waGlzdGljYXRlZCBkZXNpZ24uIE9ubHkgb25lIHRoaW5nIG9uIGl0cyBtaW5kIDogdG8gY2xpY2suPC9xPiIsDQogICAgICA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAyOF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDExLCAxMSk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJQbGFzbWFyYmxlIG1vdXNlIiwNCiAgICAgIGdldFN0ckNsaWNraW5nR2FpbnMoMSkgKw0KICAgICAgICAiPHE+QSBzaGlmdGluZyBibHVyIGluIHRoZSBjb3JuZXIgb2YgeW91ciBleWUsIHRoaXMgbW91c2UgY2FuIHRyaWdnZXIgYSBmbHVycnkgb2YgY2xpY2tzIHdoZW4gZ3JhemVkIGJ5IGV2ZW4gdGhlIHNsaWdodGVzdCBicmVlemUuPC9xPiIsDQogICAgICA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMTEsIDMwXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMTIsIDExKTsNCg0KICAgIG9yZGVyID0gMjAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gbWFya2V0ZWVycyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPm5vIHN1Y2ggdGhpbmcgYXMgYSBzYXR1cmF0ZWQgbWFya2l0LCBzaXI8L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgMTEpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxMSwgMTgpOw0KDQogICAgb3JkZXIgPSAxMDAzMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkZlc3Rpdml0eSBsb29wcyIsDQogICAgICBkZXNjOiAiVGhlc2UgZ2FyaXNoIGJpc2N1aXRzIGFyZSBhIHBlcmZlY3QgZml0IGZvciBjaGlsZHJlbidzIGJpcnRoZGF5IHBhcnRpZXMgb3IgdGhlIGZ1bmVyYWxzIG9mIHN0cmFuZ2UsIGVjY2VudHJpYyBiaWxsaW9uYWlyZXMuIiwNCiAgICAgIGljb246IFsyNSwgMTddLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBlcnNpYW4gcmljZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJSb3NlIHdhdGVyIGFuZCBwb3BweSBzZWVkcyBhcmUgdGhlIHNlY3JldCBpbmdyZWRpZW50cyBvZiB0aGVzZSBzbWFsbCwgYnV0dGVyLWZyZWUgY29va2llcy4iLA0KICAgICAgaWNvbjogWzI4LCAxNV0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJOb3J3ZWdpYW4gY29va2llcyIsDQogICAgICBkZXNjOiAiQSBmbGF0IGJ1dHRlciBjb29raWUgd2l0aCBhIHNsaXZlciBvZiBjYW5kaWVkIGNoZXJyeSBvbiB0b3AuIEl0IGlzIHNhaWQgdGhhdCB0aGVzZSBpbGx1c3RyYXRlIHRoZSBibGVha25lc3Mgb2Ygc2NhbmRpbmF2aWFuIGV4aXN0ZW50aWFsaXNtLiIsDQogICAgICBpY29uOiBbMjIsIDIwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNyaXNweSByaWNlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkZ1biB0byBtYWtlIGF0IGhvbWUhIFN0b3JlLWJvdWdodCBjb29raWVzIGFyZSBvYnNvbGV0ZSEgVG9wcGxlIHRoZSBzeXN0ZW0hIFRoZXJlJ3MgbWFyc2htYWxsb3dzIGluIHRoZXNlISBEZXN0cm95IGNhcGl0YWxpc20hIiwNCiAgICAgIGljb246IFsyMywgMjBdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlViZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGUgdGludCBpcyBvYnRhaW5lZCBieSB0aGUgdXNlIG9mIHB1cnBsZSB5YW1zLiBBY2NvcmRpbmcgdG8gY29sb3Igc3ltYm9saXNtLCB0aGVzZSBjb29raWVzIGFyZSBlaXRoZXIgbm9ibGUsIGhvbHksIG9yIHN1cGVydmlsbGFpbnMuIiwNCiAgICAgIGljb246IFsyNCwgMTddLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlcnNjb3RjaCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGUgYnV0dGVyc2NvdGNoIGNoaXBzIGFyZSBqdXN0IHRoZSByaWdodCBhbW91bnQgb2Ygc3RpY2t5LCBhbmQgbWFrZSB5b3UgZmVlbCBsaWtlIHlvdSdyZSBlYXRpbmcgY2FuZHkuIiwNCiAgICAgIGljb246IFsyNCwgMjBdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTcGVjdWxhYXMiLA0KICAgICAgZGVzYzogIlRoZXNlIGNydW5jaHksIGFsbW9zdCBvYm5veGlvdXNseSBjaW5uYW1vbnkgY29va2llcyBhcmUgYSBzb3VyY2Ugb2YgZHV0Y2ggcHJpZGUuIEFib3V0IHRoZSBvcmlnaW4gb2YgdGhlIG5hbWUsIG9uZSBjYW4gb25seSBzcGVjdWxhdGUuIiwNCiAgICAgIGljb246IFsyMSwgMjBdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMjAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRWxkZXJ3b3J0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICItIiwNCiAgICAgIGljb246IFsyMiwgMjVdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogNjAgKiAyLA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KICAgIEdhbWUubGFzdC5iYXNlRGVzYyA9DQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMikgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiJTEgYXJlIDxiPiUyJTwvYj4gbW9yZSBwb3dlcmZ1bC4iLCBbDQogICAgICAgIGNhcChHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5wbHVyYWwpLA0KICAgICAgICAyLA0KICAgICAgXSkgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJFbGRlcndvcnQiKS50b0xvd2VyQ2FzZSgpKSArDQogICAgICAiPHE+VGhleSB0YXN0ZSBpbmNyZWRpYmx5IHN0YWxlLCBldmVuIHdoZW4gYmFrZWQgZnJlc2guPC9xPiI7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCYWtlYmVycnkgY29va2llcyIsDQogICAgICBkZXNjOiAiLSIsDQogICAgICBpY29uOiBbMjMsIDI1XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDYwLA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KICAgIEdhbWUubGFzdC5iYXNlRGVzYyA9DQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMikgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJCYWtlYmVycnkiKS50b0xvd2VyQ2FzZSgpKSArDQogICAgICAiPHE+UmVhbGx5IGdvb2QgZGlwcGVkIGluIGhvdCBjaG9jb2xhdGUuPC9xPiI7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJEdWtldGF0ZXIgY29va2llcyIsDQogICAgICBkZXNjOiAiLSIsDQogICAgICBpY29uOiBbMjQsIDI1XSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOiA2MCAqIDMsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQogICAgR2FtZS5sYXN0LmJhc2VEZXNjID0NCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygxMCkgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJEdWtldGF0ZXIiKS50b0xvd2VyQ2FzZSgpKSArDQogICAgICAiPHE+RnJhZ3JhbnQgYW5kIG1lYWx5LCB3aXRoIGEgc2xpZ2h0IHllbGxvdyBhZnRlcnRhc3RlLjwvcT4iOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIsDQogICAgICBkZXNjOiAiLSIsDQogICAgICBpY29uOiBbMjUsIDI1XSwNCiAgICAgIHBvd2VyOiAwLA0KICAgICAgcHJpY2U6IDYwICogMywNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCiAgICBHYW1lLmxhc3QuYmFzZURlc2MgPQ0KICAgICAgbG9jKCJHb2xkZW4gY29va2llcyBnaXZlIDxiPiUxJTwvYj4gbW9yZSBjb29raWVzLiIsIDEpICsNCiAgICAgICI8YnI+IiArDQogICAgICBsb2MoIkdvbGRlbiBjb29raWUgZWZmZWN0cyBsYXN0IDxiPiUxJTwvYj4gbG9uZ2VyLiIsIDEpICsNCiAgICAgICI8YnI+IiArDQogICAgICBsb2MoIkdvbGRlbiBjb29raWVzIGFwcGVhciA8Yj4lMSU8L2I+IG1vcmUgb2Z0ZW4uIiwgMSkgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiUmFuZG9tIGRyb3BzIGFyZSA8Yj4lMSUgbW9yZSBjb21tb248L2I+LiIsIDMpICsNCiAgICAgICI8YnI+IiArDQogICAgICBsb2MoIkRyb3BwZWQgYnkgJTEgcGxhbnRzLiIsIGxvYygiR3JlZW4gcm90IikudG9Mb3dlckNhc2UoKSkgKw0KICAgICAgIjxxPlRoZXNlIGFyZSB0YXN0aWVyIHRoYW4geW91J2QgZXhwZWN0LCBidXQgbm90IGJ5IG11Y2guPC9xPiI7DQoNCiAgICBvcmRlciA9IDIzMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRmVybiB0ZWEiLA0KICAgICAgbG9jKA0KICAgICAgICAiWW91IGdhaW4gYW5vdGhlciA8Yj4rJTElPC9iPiBvZiB5b3VyIHJlZ3VsYXIgQ3BTIHdoaWxlIHRoZSBnYW1lIGlzIGNsb3NlZC4iLA0KICAgICAgICAzDQogICAgICApICsNCiAgICAgICAgIiA8c21hbGw+KCIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIk11c3Qgb3duIHRoZSAlMSB1cGdyYWRlLiIsDQogICAgICAgICAgZ2V0VXBncmFkZU5hbWUoIlR3aW4gR2F0ZXMgb2YgVHJhbnNjZW5kZW5jZSIpDQogICAgICAgICkgKw0KICAgICAgICAiKTwvc21hbGw+IiArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJEcm93c3lmZXJuIikudG9Mb3dlckNhc2UoKSkgKw0KICAgICAgICAiPHE+QSBjaGVtaWNhbGx5IGNvbXBsZXggbmF0dXJhbCBiZXZlcmFnZSwgdGhpcyBzb290aGluZyBjb25jb2N0aW9uIGhhcyBiZWVuIHVzZWQgYnkgbWF0aGVtYXRpY2lhbnMgdG8gc29sdmUgZXF1YXRpb25zIGluIHRoZWlyIHNsZWVwLjwvcT4iLA0KICAgICAgNjAsDQogICAgICBbMjYsIDI1XQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJJY2hvciBzeXJ1cCIsDQogICAgICBsb2MoDQogICAgICAgICJZb3UgZ2FpbiBhbm90aGVyIDxiPislMSU8L2I+IG9mIHlvdXIgcmVndWxhciBDcFMgd2hpbGUgdGhlIGdhbWUgaXMgY2xvc2VkLiIsDQogICAgICAgIDcNCiAgICAgICkgKw0KICAgICAgICAiIDxzbWFsbD4oIiArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiTXVzdCBvd24gdGhlICUxIHVwZ3JhZGUuIiwNCiAgICAgICAgICBnZXRVcGdyYWRlTmFtZSgiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIikNCiAgICAgICAgKSArDQogICAgICAgICIpPC9zbWFsbD4iICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJTdWdhciBsdW1wcyBtYXR1cmUgPGI+JTE8L2I+IHNvb25lci4iLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSg3ICogNjAgKiBHYW1lLmZwcykNCiAgICAgICAgKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJJY2hvcnB1ZmYiKS50b0xvd2VyQ2FzZSgpKSArDQogICAgICAgICI8cT5UYXN0ZXMgbGlrZSBjYW5keS4gVGhlIHNtZWxsIGlzIGFub3RoZXIgc3RvcnkuPC9xPiIsDQogICAgICA2MCAqIDIsDQogICAgICBbMjcsIDI1XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMjAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiV2hlYXQgc2xpbXMiLA0KICAgICAgZGVzYzogIi0iLA0KICAgICAgaWNvbjogWzI4LCAyNV0sDQogICAgICBwb3dlcjogMSwNCiAgICAgIHByaWNlOiAzMCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCiAgICBHYW1lLmxhc3QuYmFzZURlc2MgPQ0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICI8YnI+IiArDQogICAgICBsb2MoIkRyb3BwZWQgYnkgJTEgcGxhbnRzLiIsIGxvYygiQmFrZXIncyB3aGVhdCIpLnRvTG93ZXJDYXNlKCkpICsNCiAgICAgICI8cT5UaGUgb25seSByZWFzb24geW91J2QgY29uc2lkZXIgdGhlc2UgdG8gYmUgY29va2llcyBpcyBiZWNhdXNlIHlvdSBmZWVsIHNsaWdodGx5IHNvcnJ5IGZvciB0aGVtLjwvcT4iOw0KDQogICAgdmFyIGdhcmRlbkRyb3BzID0gWw0KICAgICAgIkVsZGVyd29ydCBiaXNjdWl0cyIsDQogICAgICAiQmFrZWJlcnJ5IGNvb2tpZXMiLA0KICAgICAgIkR1a2V0YXRlciBjb29raWVzIiwNCiAgICAgICJHcmVlbiB5ZWFzdCBkaWdlc3RpdmVzIiwNCiAgICAgICJGZXJuIHRlYSIsDQogICAgICAiSWNob3Igc3lydXAiLA0KICAgICAgIldoZWF0IHNsaW1zIiwNCiAgICBdOw0KICAgIGZvciAodmFyIGkgaW4gZ2FyZGVuRHJvcHMpIHsgLy9zY2FsZSBieSBDcFMNCiAgICAgIHZhciBpdCA9IEdhbWUuVXBncmFkZXNbZ2FyZGVuRHJvcHNbaV1dOw0KICAgICAgaXQucHJpY2VGdW5jID0gKGZ1bmN0aW9uIChjb3N0KSB7DQogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIGNvc3QgKiBHYW1lLmNvb2tpZXNQcyAqIDYwOw0KICAgICAgICB9Ow0KICAgICAgfSkoaXQuYmFzZVByaWNlKTsNCiAgICAgIGl0LmJhc2VEZXNjID0gaXQuYmFzZURlc2MucmVwbGFjZSgNCiAgICAgICAgIjxxPiIsDQogICAgICAgICI8YnI+IiArIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBDcFMuIikgKyAiPHE+Ig0KICAgICAgKTsNCiAgICAgIGl0LmRlc2MgPSBCZWF1dGlmeUluVGV4dChpdC5iYXNlRGVzYyk7DQogICAgICBpdC5sYXN0aW5nID0gdHJ1ZTsNCiAgICB9DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiU3ludGhldGljIGNob2NvbGF0ZSBncmVlbiBob25leSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAzNTAgb2YgZXZlcnl0aGluZy48YnI+VGhlIHJlY2lwZSBmb3IgdGhpcyBidXR0ZXIgYmlzY3VpdCB3YXMgb25jZSB0aGUgc29sZSBoZXJpdGFnZSBvZiBhbiBhbmNpZW50IG1vdW50YWluIG1vbmFzdGVyeS4gSXRzIGZsYXZvciBpcyBzbyByZWZpbmVkIHRoYXQgb25seSBhIHNsYWIgb2YgbGFiLW1hZGUgY2hvY29sYXRlIHNwZWNpZmljYWxseSBlbmdpbmVlcmVkIHRvIGJlIGNvbXBsZXRlbHkgdGFzdGVsZXNzIGNvdWxkIGNvbXBsZW1lbnQgaXQuPGJyPkFsc28gaXQncyBnb3QgeW91ciBmYWNlIG9uIGl0LiIsDQogICAgICBpY29uOiBbMjQsIDI2XSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiBidXR0ZXJCaXNjdWl0TXVsdCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlJveWFsIHJhc3BiZXJyeSBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiLA0KICAgICAgZGVzYzogIlJld2FyZGVkIGZvciBvd25pbmcgNDAwIG9mIGV2ZXJ5dGhpbmcuPGJyPk9uY2UgcmVzZXJ2ZWQgZm9yIHRoZSBtZWdhbG9tYW5pYWMgZWxpdGUsIHRoaXMgdW5pcXVlIHN0cmFpbiBvZiBmcnVpdHkgY2hvY29sYXRlIGhhcyBhIGZsYXZvciBhbmQgdGV4dHVyZSB1bmxpa2UgYW55IG90aGVyLiBXaGV0aGVyIGl0cyBleG9yYml0YW50IHdvcnRoIGlzIGltcHJvdmVkIG9yIGxlc3NlbmVkIGJ5IHRoZSBwcmVzZW5jZSBvZiB5b3VyIGxpa2VuZXNzIG9uIGl0IHN0aWxsIHJlbWFpbnMgdG8gYmUgc2Vlbi4iLA0KICAgICAgaWNvbjogWzI1LCAyNl0sDQogICAgICBwb3dlcjogMTAsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogYnV0dGVyQmlzY3VpdE11bHQsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJVbHRyYS1jb25jZW50cmF0ZWQgaGlnaC1lbmVyZ3kgY2hvY29sYXRlIGJ1dHRlciBiaXNjdWl0IiwNCiAgICAgIGRlc2M6ICJSZXdhcmRlZCBmb3Igb3duaW5nIDQ1MCBvZiBldmVyeXRoaW5nLjxicj5JbmZ1c2VkIHdpdGggdGhlIHBvd2VyIG9mIHNldmVyYWwgaHlkcm9nZW4gYm9tYnMgdGhyb3VnaCBhIHByb2Nlc3MgdGhhdCBsZWZ0IG1vc3QgbnVjbGVhciBlbmdpbmVlcnMgYW5kIHNoYXJlaG9sZGVycyBwZXJwbGV4ZWQuIEN1cnJlbnRseSBhdCB0aGUgY2VudGVyIG9mIHNvbWUgcmF0aGVyIGhlYXRlZCBVbml0ZWQgTmF0aW9ucyBtZWV0aW5ncy4gR29pbmcgaW4gbW9yZSBkZXRhaWwgYWJvdXQgdGhpcyBjaG9jb2xhdGUgd291bGQgdmlvbGF0ZSBzZXZlcmFsIHN0YXRlIHNlY3JldHMsIGJ1dCB3ZSdsbCBqdXN0IGFkZCB0aGF0IHNvbWVvbmUncyBidXN0IHNlZW1zIHRvIGJlIHBpY3R1cmVkIG9uIGl0LiBQZXJoYXBzIHlvdXJzPyIsDQogICAgICBpY29uOiBbMjYsIDI2XSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiBidXR0ZXJCaXNjdWl0TXVsdCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaW1lcHJvb2YgaGFpciBkeWVzIiwNCiAgICAgICI8cT5XaHkgZG8gdGhleSBhbHdheXMgaGF2ZSB0aG9zZSBzdHJhbmdlIHdpc3B5IHBpbmsgZG9zPyBXaGF0IGRvIHRoZXkga25vdyBhYm91dCBjYW5keSBmbG9zcyB0aGF0IHdlIGRvbid0PzwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJCYXJuc3RhcnMiLA0KICAgICAgIjxxPkFoLCB5ZXMuIFRoZXNlIGhlbHAgcXVpdGUgYSBiaXQuIFNvbWVob3cuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk1pbmUgY2FuYXJpZXMiLA0KICAgICAgIjxxPlRoZXNlIGFyZW4ndCB1c2VkIGZvciBhbnl0aGluZyBmcmVha3khIFRoZSBtaW5lcnMganVzdCBlbmpveSBoYXZpbmcgYSBwZXQgb3IgdHdvIGRvd24gdGhlcmUuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSA1MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJyb3duaWUgcG9pbnQgc3lzdGVtIiwNCiAgICAgICI8cT5PaCwgdGhlc2UgYXJlIGxvdmVseSEgWW91IGNhbiBub3cgcmV3YXJkIHlvdXIgZmFjdG9yeSBlbXBsb3llZXMgZm9yIGdvb2QgYmVoYXZpb3IsIHN1Y2ggYXMgd29ya2luZyBvdmVydGltZSBvciBzbml0Y2hpbmcgb24gY293b3JrZXJzLiA1OCBicm93bmllIHBvaW50cyBnZXRzIHlvdSBhIGxpdHRsZSBwaWN0dXJlIG9mIGEgYnJvd25pZSwgYW5kIDE3OCBvZiB0aG9zZSBwaWN0dXJlcyBnZXRzIHlvdSBhbiBhY3R1YWwgYnJvd25pZSBwaWVjZSBmb3IgeW91IHRvIGRvIHdpdGggYXMgeW91IHBsZWFzZSEgSW5mYW50aWxpemluZz8gTWF5YmUuIE9vZGxlcyBvZiBmdW4/IFlvdSBiZXRjaGEhPC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdyYW5kIHN1cGVyY3ljbGVzIiwNCiAgICAgICI8cT5XZSBsZXQgdGhlIHB1YmxpYyB0aGluayB0aGVzZSBhcmUgY29tcGxpY2F0ZWQgZmluYW5jaWFsIHRlcm1zIHdoZW4gcmVhbGx5IHdlJ3JlIGp1c3QgcmV3YXJkaW5nIHRoZSBiYW5rZXJzIHdpdGggc25henp5IGJpY3ljbGVzIGZvciBhIGpvYiB3ZWxsIGRvbmUuIEl0J3Mgb25seSBuYXR1cmFsIGFmdGVyIHlvdSBidWlsdCB0aG9zZSBmYW5jeSBnb2xkIHN3aW1taW5nIHBvb2xzIGZvciB0aGVtLCB3aGVyZSB0aGV5IGNhbiB0YWtlIGEgZGlwIGFuZCBjYXRjaCBLb25kcmF0aWV2IHdhdmVzLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gNTUwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQc2FsbS1yZWFkaW5nIiwNCiAgICAgICI8cT5BIHRoZW9sb2dpY2FsbHkgZHViaW91cyBhbmQgcG9zc2libHkgYmxhc3BoZW1vdXMgYmxlbmQgb2YgZm9ydHVuZS10ZWxsaW5nIGFuZCBzY3JpcHR1cmUgc3R1ZGllcy48L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gNTc1Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJJbW1vYmlsZSBzcGVsbGNhc3RpbmciLA0KICAgICAgIjxxPldpemFyZHMgd2hvIG1hc3RlciB0aGlzIHNraWxsIGNhbiBub3cgY2FzdCBzcGVsbHMgd2l0aG91dCBoYXZpbmcgdG8gaG9wIGFuZCBza2lwIGFuZCBnZXN0aWN1bGF0ZSBlbWJhcnJhc3NpbmdseSwgd2hpY2ggaXMgbXVjaCBzbmVha2llciBhbmQgaG9uZXN0bHkgcXVpdGUgYSByZWxpZWYuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUmVzdGF1cmFudHMgYXQgdGhlIGVuZCBvZiB0aGUgdW5pdmVyc2UiLA0KICAgICAgIjxxPlNpbmNlIHRoZSB1bml2ZXJzZSBpcyBzcGF0aWFsbHkgaW5maW5pdGUsIGFuZCB0aGVyZWZvcmUgY2FuIGJlIGNvbnN0cnVlZCB0byBoYXZlIGluZmluaXRlIGVuZHMsIHlvdSd2ZSBvcGVuZWQgYW4gaW5maW5pdGUgY2hhaW4gb2YgcmVzdGF1cmFudHMgd2hlcmUgeW91ciBzcGFjZSB0cnVja2VycyBjYW4gcmVzdCBhbmQgcGFydGFrZSBpbiBzb21lIGhvbWUtYnJhbmQgY29va2llLWJhc2VkIG1lYWxzLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDcwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiT24gc2Vjb25kIHRob3VnaHQiLA0KICAgICAgIjxxPkRpc3JlZ2FyZCB0aGF0IGxhc3QgdXBncmFkZSwgYWxjaGVteSBpcyB3aGVyZSBpdCdzIGF0ISBZb3VyIGVnZ2hlYWRzIGp1c3QgZm91bmQgYSB3YXkgdG8gdHJhbnNtdXRlIGNoaWxkcmVuJ3MgbmlnaHRtYXJlcyBpbnRvIHJhcmUgbWV0YWxzITwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDgwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRGltZW5zaW9uYWwgZ2FyYmFnZSBndWxwZXIiLA0KICAgICAgIjxxPlNvIHdlJ3ZlIGJlZW4gbG9va2luZyBmb3IgYSBwbGFjZSB0byBkaXNwb3NlIG9mIGFsbCB0aGUgcmVmdXNlIHRoYXQncyBiZWVuIGFjY3VtdWxhdGluZyBzaW5jZSB3ZSBzdGFydGVkIGJha2luZyAtIGJ1cm50IGNvb2tpZXMsIGZhaWxlZCBleHBlcmltZW50cywgdW5ydWx5IHdvcmtlcnMgLSBhbmQgd2VsbCwgd2UgZmlndXJlZCByYXRoZXIgdGhhbiBzZWxsIGl0IHRvIHBvb3IgY291bnRyaWVzIGxpa2Ugd2UndmUgYmVlbiBkb2luZywgd2UgY291bGQganVzdCBkdW1wIGl0IGluIHNvbWUgYWx0ZXJuYXRlIHRyYXNoIGRpbWVuc2lvbiB3aGVyZSBpdCdzIG5vdCBnb25uYSBib3RoZXIgYW55Ym9keSEgUHJvYmFibHkhPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQWRkaXRpb25hbCBjbG9jayBoYW5kcyIsDQogICAgICAiPHE+SXQgc2VlbWVkIGxpa2UgYSBzaWxseSBpZGVhIGF0IGZpcnN0LCBidXQgaXQgdHVybnMgb3V0IHRoZXNlIGhhdmUgdGhlIHN0cmFuZ2UgYWJpbGl0eSB0byB0d2lzdCB0aW1lIGluIGludGVyZXN0aW5nIG5ldyB3YXlzLjwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJCYWtpbmcgTm9iZWwgcHJpemUiLA0KICAgICAgIjxxPldoYXQgYmV0dGVyIHdheSB0byBzcG9uc29yIHNjaWVudGlmaWMgZ3Jvd3RoIHRoYW4gdG8gbW90aXZhdGUgdGhvc2Ugc21hcm15IG5lcmRzIHdpdGggYSBtZWFuaW5nbGVzcyBhd2FyZCEgV2hhdCdzIG1vcmUsIGVhY2ggcHJpemUgY29tZXMgd2l0aCBhIGZpbmUgcHJpbnQgbGlmZWxvbmcgZXhjbHVzaXZlIGNvbnRyYWN0IHRvIGNvbWUgd29yayBmb3IgeW91IChvciBlbHNlKSE8L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSAxMTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSZXZlcnNlIHRoZW9yeSBvZiBsaWdodCIsDQogICAgICAiPHE+QSB3aG9sZSBuZXcgd29ybGQgb2YgcGh5c2ljcyBvcGVucyB1cCB3aGVuIHlvdSBkZWNpZGUgdGhhdCBhbnRpcGhvdG9ucyBhcmUgcmVhbCBhbmQgcG9zaXQgdGhhdCBsaWdodCBpcyBtZXJlbHkgYSB2b2lkIGluIHNoYWRvdy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSZXZpc2VkIHByb2JhYmlsaXN0aWNzIiwNCiAgICAgICI8cT5FaXRoZXIgc29tZXRoaW5nIGhhcHBlbnMgb3IgaXQgZG9lc24ndC4gVGhhdCdzIGEgNTAlIGNoYW5jZSEgVGhpcyBzdWRkZW5seSBtYWtlcyBhIGxvdCBvZiB1bmxpa2VseSB0aGluZ3MgdmVyeSBwb3NzaWJsZS48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxMA0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGFuYWx5c3RzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKw0KICAgICAgICAiPHE+YmFzZWQgb24gcHVycmVudCByZXR1cm4tb24taW52ZXN0bWVudCBtZW93ZGVscyB3ZSBzaG91bGQgYmUgYWJsZSB0byBhZmZ1cmQgdG8gcGF5IG91ciBlbXBhd3llZXMgc29tZXdoZXJlIGFyb3VuZCBuZXh0IGNlbnR1cnksIHNpcjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCAxMikNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEyLCAxOCk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkV5ZSBvZiB0aGUgd3JpbmtsZXIiLA0KICAgICAgbG9jKCJNb3VzZSBvdmVyIGEgd3JpbmtsZXIgdG8gc2VlIGhvdyBtYW55IGNvb2tpZXMgYXJlIGluIGl0cyBzdG9tYWNoLiIpICsNCiAgICAgICAgIjxxPkp1c3QgYSB3cmlua2xlciBhbmQgaXRzIHdpbGwgdG8gc3Vydml2ZS48YnI+SGFuZ2luJyB0b3VnaCwgc3RheWluJyBodW5ncnkuPC9xPiIsDQogICAgICA5OTk5OTk5OSwNCiAgICAgIFsyNywgMjZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIldyaW5rbHkgY29va2llcyJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJJbnNwaXJlZCBjaGVja2xpc3QiLA0KICAgICAgbG9jKA0KICAgICAgICAiVW5sb2NrcyB0aGUgPGI+QnV5IGFsbDwvYj4gZmVhdHVyZSwgd2hpY2ggbGV0cyB5b3UgaW5zdGFudGx5IHB1cmNoYXNlIGV2ZXJ5IHVwZ3JhZGUgaW4geW91ciBzdG9yZSAoc3RhcnRpbmcgZnJvbSB0aGUgY2hlYXBlc3Qgb25lKS48YnI+QWxzbyB1bmxvY2tzIHRoZSA8Yj5WYXVsdDwvYj4sIGEgc3RvcmUgc2VjdGlvbiB3aGVyZSB5b3UgY2FuIHBsYWNlIHVwZ3JhZGVzIHlvdSBkbyBub3Qgd2lzaCB0byBhdXRvLWJ1eS4iDQogICAgICApICsNCiAgICAgICAgJzxxPlNuYXp6eSBncmFuZG1hIGFjY2Vzc29yaWVzPyBDaGVjay4gVHJhbnNkaW1lbnNpb25hbCBhYm9taW5hdGlvbnM/IENoZWNrLiBBIGJ1bmNoIG9mIGVnZ3MgZm9yIHNvbWUgcmVhc29uPyBDaGVjay4gTWFjaGluZSB0aGF0IGdvZXMgInBpbmciPyBDaGVjayBhbmQgY2hlY2suPC9xPicsDQogICAgICA5MDAwMDAsDQogICAgICBbMjgsIDI2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJQZXJzaXN0ZW50IG1lbW9yeSIsICJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElJIl07DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUHVyZSBwaXRjaC1ibGFjayBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiLA0KICAgICAgZGVzYzogIlJld2FyZGVkIGZvciBvd25pbmcgNTAwIG9mIGV2ZXJ5dGhpbmcuPGJyPlRoaXMgY2hvY29sYXRlIGlzIHNvIHB1cmUgYW5kIHNvIGZsYXdsZXNzIHRoYXQgaXQgaGFzIG5vIGNvbG9yIG9mIGl0cyBvd24sIGluc3RlYWQgdGFraW5nIG9uIHRoZSBhcHBlYXJhbmNlIG9mIHdoYXRldmVyIGlzIGFyb3VuZCBpdC4gWW91J3JlIGEgYml0IHN1cnByaXNlZCB0byBub3RpY2UgdGhhdCB0aGlzIG9uZSBpc24ndCBzdGFtcGVkIHdpdGggeW91ciBlZmZpZ3ksIGFzIGl0cyBzdXJmYWNlIGlzIHBlcmZlY3RseSBzbW9vdGggKHRvIHRoZSBwaWNvbWV0ZXIpIC0gdW50aWwgeW91IHJlYWxpemUgaXQncyBxdWl0ZSBsaXRlcmFsbHkgcmVmbGVjdGluZyB5b3VyIG93biBmYWNlIGxpa2UgYSBtaXJyb3IuIiwNCiAgICAgIGljb246IFsyNCwgMjddLA0KICAgICAgcG93ZXI6IDEwLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIGJ1dHRlckJpc2N1aXRNdWx0LA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNob2NvbGF0ZSBvYXRtZWFsIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIGJhZCBib3lzIGNvbXBlbnNhdGUgZm9yIGxhY2sgb2YgYSBjb2hlc2l2ZSBmb3JtIGFuZCBhIGx1bXB5LCB1bnNpZ2h0bHkgYXBwZWFyYW5jZSBieSBiZWluZyBqdXN0IHNpbXBseSBkZWxpY2lvdXMuIFNvbWV0aGluZyB3ZSBzaG91bGQgYWxsIGFzcGlyZSB0by4iLA0KICAgICAgaWNvbjogWzIzLCAyOF0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJNb2xhc3NlcyBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJTdGlja3ksIGNyYWNrbHksIGFuZCBkdXN0ZWQgaW4gZmluZSBzdWdhci48YnI+U29tZSBsdW5hdGljcyBoYXZlIGJlZW4ga25vd24gdG8gZWF0IHRoZXNlIHdpdGggcG90YXRvZXMuIiwNCiAgICAgIGljb246IFsyNCwgMjhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmlzY290dGkiLA0KICAgICAgZGVzYzogIkFsbW9uZHMgYW5kIHBpc3RhY2hpb3MgbWFrZSB0aGVzZSB2ZXJ5IHJvYnVzdCBjb29raWVzIHNsaWdodGx5IG1vcmUgaW50ZXJlc3RpbmcgdG8gZWF0IHRoYW4gdG8gYmx1ZGdlb24gcGVvcGxlIHdpdGguIiwNCiAgICAgIGljb246IFsyMiwgMjhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldhZmZsZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJXaGV0aGVyIHRoZXNlIGFyZSBjb29raWVzIHdpdGggc2hvY2tpbmdseSB3YWZmbGUtbGlrZSBmZWF0dXJlcyBvciBzaW1wbHkgcmVndWxhciBjb29raWUtc2l6ZWQgd2FmZmxlcyBpcyBhIGRlYmF0ZSB3ZSdyZSBub3QgZ2V0dGluZyBpbnRvIGhlcmUuIiwNCiAgICAgIGljb246IFsyMSwgMjhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgLy9lYXJseSBjb29raWVzIHRoYXQgdW5sb2NrIGF0IHRoZSBzYW1lIHRpbWUgYXMgY29jb251dCBjb29raWVzOyBtZWFudCB0byBib29zdCBlYXJseSBnYW1lIGEgbGl0dGxlIGJpdA0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQWxtb25kIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlNvbWV0aW1lcyB5b3UgZmVlbCBsaWtlIG9uZSBvZiB0aGVzZS4gU29tZXRpbWVzIHlvdSBkb24ndC4iLA0KICAgICAgaWNvbjogWzIxLCAyN10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkhhemVsbnV0IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRhc3RlcyBsaWtlIGEgbW9ybmluZyBzdHJvbGwgdGhyb3VnaCBhIGZyYWdyYW50IGZvcmVzdCwgbWludXMgdGhlIGNsb3VkcyBvZiBnbmF0cy4iLA0KICAgICAgaWNvbjogWzIyLCAyN10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldhbG51dCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJTb21lIGV4cGVydHMgaGF2ZSBwb2ludGVkIHRvIHRoZSB3YWxudXQncyBlZXJpZSByZXNlbWJsYW5jZSB0byB0aGUgaHVtYW4gYnJhaW4gYXMgYSBzaWduIG9mIGl0cyBzZW50aWVuY2UgLSBhIHRoZW9yeSBtb3N0IHdhbG51dHMgdmVoZW1lbnRseSBvYmplY3QgdG8uIiwNCiAgICAgIGljb246IFsyMywgMjddLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkxhYmVsIHByaW50ZXIiLA0KICAgICAgbG9jKA0KICAgICAgICAiTW91c2Ugb3ZlciBhbiB1cGdyYWRlIHRvIHNlZSBpdHMgdGllci48YnI+PHNtYWxsPk5vdGU6IG9ubHkgc29tZSB1cGdyYWRlcyBoYXZlIHRpZXJzLiBUaWVycyBhcmUgcHVyZWx5IGNvc21ldGljIGFuZCBoYXZlIG5vIGVmZmVjdCBvbiBnYW1lcGxheS48L3NtYWxsPiINCiAgICAgICkgKw0KICAgICAgICAiPHE+QWxzbyBjb21lcyBpbiByZWFsIGhhbmR5IHdoZW4geW91IHdhbnQgdG8gdGVsbCBjYXRzdXAgYXBhcnQgZnJvbSBrZXRjaHVwLjwvcT4iLA0KICAgICAgNTAwMDAwMCwNCiAgICAgIFsyOCwgMjldDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkdlbml1cyBhY2NvdW50aW5nIl07DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR29vZCBtYW5uZXJzIiwNCiAgICAgICc8cT5BcHBhcmVudGx5IHRoZXNlIGxhZGllcyBhcmUgbXVjaCBtb3JlIGFtaWFibGUgaWYgeW91IHRha2UgdGhlIHRpbWUgdG8gbGVhcm4gdGhlaXIgc3RyYW5nZSwgYW5jaWVudCBjdXN0b21zLCB3aGljaCBzZWVtIHRvIGludm9sdmUgc2F5aW5nICJwbGVhc2UiIGFuZCAidGhhbmsgeW91IiBhbmQgc3RhcmluZyBhdCB0aGUgc3VuIHdpdGggYnVsZ2luZyBleWVzIHdoaWxlIG11dHRlcmluZyBlbGRyaXRjaCBjdXJzZXMgdW5kZXIgeW91ciBicmVhdGguPC9xPicsDQogICAgICAiR3JhbmRtYSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkxpbmR3b3JtcyIsDQogICAgICAiPHE+WW91IGhhdmUgdG8gaW1wb3J0IHRoZXNlIGZyb20gZmFyIHVwIG5vcnRoLCBidXQgdGhleSByZWFsbHkgaGVscCBhZXJhdGUgdGhlIHNvaWwhPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJvcmUgYWdhaW4iLA0KICAgICAgIjxxPkFmdGVyIGV4dHJhY3Rpbmcgc28gbXVjaCBzZWRpbWVudCBmb3Igc28gbG9uZywgeW91J3ZlIGZvcm1lZCBzb21lIHZlcml0YWJsZSBtb3VudGFpbnMgb2YgeW91ciBvd24gZnJvbSB0aGUgYWNjdW11bGF0ZWQgcGlsZXMgb2Ygcm9jayBhbmQgZGlydC4gVGltZSB0byBkaWcgdGhyb3VnaCB0aG9zZSBhbmQgc2VlIGlmIHlvdSBmaW5kIGFueXRoaW5nIGZ1biE8L3E+IiwNCiAgICAgICJNaW5lIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDUwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAnIlZvbHVudGVlciIgaW50ZXJucycsDQogICAgICAiPHE+SWYgeW91J3JlIGJhZCBhdCBzb21ldGhpbmcsIGFsd2F5cyBkbyBpdCBmb3IgZnJlZS48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDUyNTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUnVsZXMgb2YgYWNxdWlzaXRpb24iLA0KICAgICAgIjxxPlJ1bGUgMzg3IDogYSBjb29raWUgYmFrZWQgaXMgYSBjb29raWUga2VwdC48L3E+IiwNCiAgICAgICJCYW5rIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDU1MDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2FyIG9mIHRoZSBnb2RzIiwNCiAgICAgICI8cT5BbiBpbnRlcmVzdGluZyBnYW1lOyB0aGUgb25seSB3aW5uaW5nIG1vdmUgaXMgbm90IHRvIHByYXkuPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRWxlY3RyaWNpdHkiLA0KICAgICAgIjxxPkFuY2llbnQgbWFnaWNrcyBhbmQgZm9yYmlkZGVuIGhleGVzIHNocm91ZCB0aGlzIGFyY2FuZSBrbm93bGVkZ2UsIHdob3NlIHVuZmF0aG9tYWJsZSBwb3dlciBjYW4gbXlzdGVyaW91c2x5IHR1cm4gZGFya25lc3MgaW50byBsaWdodCBhbmQgc2hvY2sgYW4gZWxlcGhhbnQgdG8gZGVhdGguPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVW5pdmVyc2FsIGFscGhhYmV0IiwNCiAgICAgICc8cT5Zb3VcJ3ZlIG1hbmFnZWQgdG8gY2hhcnQgYSBsYW5ndWFnZSB0aGF0IGNhbiBiZSB1bmRlcnN0b29kIGJ5IGFueSBzZW50aWVudCBzcGVjaWVzIGluIHRoZSBnYWxheHk7IGl0cyBleGNpdGluZyB2b2NhYnVsYXJ5IGNvbnRhaW5zIG92ZXIgNTYgdHJpbGxpb24gd29yZHMgdGhhdCBzb3VuZCBhbmQgbG9vayBsaWtlIHNwYXJrbHkgYnVycHMsIGZvcm1pbmcgaW50cmljYXRlIHNlbnRlbmNlcyB0aGF0IHVzdWFsbHkgdHJhbnNsYXRlIHRvIHNvbWV0aGluZyBsaWtlICJnaXZlIHVzIHlvdXIgY29va2llcywgb3IgZWxzZSIuPC9xPicsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgMTENCiAgICApOw0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQdWJsaWMgYmV0dGVybWVudCIsDQogICAgICAiPHE+V2h5IGRvIHdlIGtlZXAgdHJ5aW5nIHRvIGNoYW5nZSB1c2VsZXNzIG1hdHRlciBpbnRvIGNvb2tpZXMsIG9yIGNvb2tpZXMgaW50byBldmVuIGJldHRlciBjb29raWVzPyBDbGVhcmx5LCB0aGUgd2F5IG9mIHRoZSBmdXR1cmUgaXMgdG8gY2hhbmdlIHRoZSBwZW9wbGUgd2hvIGVhdCB0aGUgY29va2llcyBpbnRvIHBlb3BsZSB3aXRoIGEgZ3JlYXRlciB1bmRlcnN0YW5kaW5nLCBhcHByZWNpYXRpb24gYW5kIHJlc3BlY3QgZm9yIHRoZSBjb29raWVzIHRoZXkncmUgZWF0aW5nLiBJbnRvIHRoZSB2YXQgeW91IGdvITwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDgwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRW1iZWRkZWQgbWljcm9wb3J0YWxzIiwNCiAgICAgICI8cT5XZSd2ZSBmb3VuZCBvdXQgdGhhdCBpZiB3ZSBiYWtlIHRoZSBwb3J0YWxzIGludG8gdGhlIGNvb2tpZXMgdGhlbXNlbHZlcywgd2UgY2FuIHRyYW5zcG9ydCBwZW9wbGUncyB0YXN0ZSBidWRzIHN0cmFpZ2h0IGludG8gdGhlIHRhc3RlIGRpbWVuc2lvbiEgR29vZCB0aGluZyB5b3VyIGFybXkgb2YgbGF3eWVycyBnb3QgcmlkIG9mIHRoZSBGREEgYSB3aGlsZSBhZ28hPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTm9zdGFsZ2lhIiwNCiAgICAgICI8cT5Zb3VyIHRpbWUgbWFjaGluZSB0ZWNobmljaWFucyBpbnNpc3QgdGhhdCB0aGlzIGlzIHNvbWUgYWR2YW5jZWQgbmV3IHRpbWUgdHJhdmVsIHRlY2gsIGFuZCBub3QganVzdCBhbiBleGlzdGluZyBlbW90aW9uIHVuaXZlcnNhbCB0byBtYW5raW5kLiBFaXRoZXIgd2F5LCB5b3UgaGF2ZSB0byBhZG1pdCB0aGF0IHNlbGxpbmcgcGVvcGxlIHRoZSBzYW1lIG9sZCBjb29raWVzIGp1c3QgYmVjYXVzZSBpdCByZW1pbmRzIHRoZW0gb2YgdGhlIGdvb2Qgb2xkIHRpbWVzIGlzIGFuIGludGVyZXN0aW5nIHByb3NwZWN0LjwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGUgZGVmaW5pdGUgbW9sZWN1bGUiLA0KICAgICAgIjxxPllvdXIgc2NpZW50aXN0cyBoYXZlIGZvdW5kIGEgd2F5IHRvIHBhY2sgYSBjb29raWUgaW50byBvbmUgc2luZ2xlIGNvbnRpbnVvdXMgbW9sZWN1bGUsIG9wZW5pbmcgZXhjaXRpbmcgbmV3IHByb3NwZWN0cyBpbiBib3RoIHN0b3JhZ2UgYW5kIGZsYXZvciBkZXNwaXRlIHRoZSBmYWN0IHRoYXQgdGhlc2UgdGFrZSB1cCB0byBhIHdob2xlIHllYXIgdG8gZGlnZXN0LjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkxpZ2h0IGNhcHR1cmUgbWVhc3VyZXMiLA0KICAgICAgIjxxPkFzIHRoZSB1bml2ZXJzZSBnZXRzIGV2ZXIgc28gc2xpZ2h0bHkgZGltbWVyIGR1ZSB0byB5b3UgY29udmVydGluZyBtb3JlIGFuZCBtb3JlIG9mIGl0cyBsaWdodCBpbnRvIGNvb2tpZXMsIHlvdSd2ZSB0YWtlbiB0byBmaW5kaW5nIG5ldyBhbmQgdW5leHBsb3JlZCBzb3VyY2VzIG9mIGxpZ2h0IGZvciB5b3VyIHByaXNtczsgZm9yIGluc3RhbmNlLCB0aGUgd2FybSBnbG93IGVtaXR0ZWQgYnkgYSBwcmVnbmFudCB3b21hbiwgb3IgdGhlIHR3aW5rbGUgaW4gdGhlIGV5ZSBvZiBhIGhvcGVmdWwgY2hpbGQuPC9xPiIsDQogICAgICAiUHJpc20iLA0KICAgICAgMTENCiAgICApOw0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiMC1zaWRlZCBkaWNlIiwNCiAgICAgICI8cT5UaGUgYWR2ZW50IG9mIHRoZSAwLXNpZGVkIGRpY2UgaGFzIGhhZCB1bmV4cGVjdGVkIGFuZCB0dW11bHR1b3VzIGVmZmVjdHMgb24gdGhlIGdhbWJsaW5nIGNvbW11bml0eSwgYW5kIHNhdyBleHBlcnRzIGFyb3VuZCB0aGUgd29ybGQgY2FsbGluZyB5b3UgYm90aCBhIGdlbml1cyBhbmQgYW4gaW1iZWNpbGUuPC9xPiIsDQogICAgICAiQ2hhbmNlbWFrZXIiLA0KICAgICAgMTENCiAgICApOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIZXJhbGRzIiwNCiAgICAgIGxvYygNCiAgICAgICAgIllvdSBub3cgYmVuZWZpdCBmcm9tIHRoZSBib29zdCBwcm92aWRlZCBieSA8Yj5oZXJhbGRzPC9iPi48YnI+RWFjaCBoZXJhbGQgZ2l2ZXMgeW91IDxiPisxJSBDcFM8L2I+Ljxicj5Mb29rIG9uIHRoZSBwdXJwbGUgZmxhZyBhdCB0aGUgdG9wIHRvIHNlZSBob3cgbWFueSBoZXJhbGRzIGFyZSBhY3RpdmUgYXQgYW55IGdpdmVuIHRpbWUuIg0KICAgICAgKSArDQogICAgICAgIChBcHANCiAgICAgICAgICA/ICI8cT5JdCdzIGdldHRpbmcgc3RlYW15LjwvcT4iDQogICAgICAgICAgOiAiPHE+QmUgZXhjZWxsZW50IHRvIGVhY2ggb3RoZXIuPGJyPkFuZCBQYXRyZW9uLCBkdWRlcyE8L3E+IiksDQogICAgICAxMDAsDQogICAgICBbMjEsIDI5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KDQogICAgb3JkZXIgPSAyNTU7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJNZXRhZ3JhbmRtYXMiLA0KICAgICAgIkEgZnJhY3RhbCBncmFuZG1hIHRvIG1ha2UgbW9yZSBncmFuZG1hcyB0byBtYWtlIG1vcmUgY29va2llcy4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDEzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk1ldGFiYWtlcmllcyIsDQogICAgICAiPHE+VGhleSBwcmFjdGljYWxseSBiYWtlIHRoZW1zZWx2ZXMhPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk1hbmRlbGJyb3duIHN1Z2FyIiwNCiAgICAgICI8cT5BIHN1YnN0YW5jZSB0aGF0IGRpc3BsYXlzIHVzZWZ1bCBwcm9wZXJ0aWVzIHN1Y2ggYXMgZnJhY3RhbCBzd2VldG5lc3MgYW5kIGluc3RhbnQgY29udGFjdCBsZXRoYWxpdHkuPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZyYWN0b2lkcyIsDQogICAgICAiPHE+SGVyZSdzIGEgZnJ1biBmcmFjdCA6IGFsbCBpbiBhbGwsIHRoZXNlIHdlcmUgYSB0ZXJyaWJsZSBpZGVhLjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJOZXN0ZWQgdW5pdmVyc2UgdGhlb3J5IiwNCiAgICAgICI8cT5Bc3NlcnRzIHRoYXQgZWFjaCBzdWJhdG9taWMgcGFydGljbGUgaXMgaG9zdCB0byBhIHdob2xlIG5ldyB1bml2ZXJzZSwgYW5kIHRoZXJlZm9yZSwgYW5vdGhlciBsaW1pdGxlc3MgcXVhbnRpdHkgb2YgY29va2llcy48YnI+VGhpcyBzb21laG93IHN0YWNrcyB3aXRoIHRoZSB0aGVvcnkgb2YgbmFub2Nvc21pY3MsIGJlY2F1c2UgcGh5c2ljcy48L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTWVuZ2VyIHNwb25nZSBjYWtlIiwNCiAgICAgICI8cT5GcmlnaHRlbmluZ2x5IGFic29yYmVudCB0aGFua3MgdG8gaXRzIHZpcnR1YWxseSBpbmZpbml0ZSBzdXJmYWNlIGFyZWEuIEtlZXAgaXQgaXNvbGF0ZWQgaW4gYSBkcnkgY2hhbWJlciwgbmV2ZXIgaGFuZGxlIGl0IHdpdGggYW4gb3BlbiB3b3VuZCwgYW5kIGRvIG5vdCBldmVyIGxldCBpdCB0b3VjaCBhIGJvZHkgb2Ygd2F0ZXIuPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgNQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk9uZSBwYXJ0aWN1bGFybHkgZ29vZC1odW1vcmVkIGNvdyIsDQogICAgICAiPHE+VGhpcyB1bmFzc3VtaW5nIGJvdmluZSB3YXMgZXhjcnVjaWF0aW5nbHkgZXhwZW5zaXZlIGFuZCBpdCBtYXkgc2VlbSBhdCBmaXJzdCBsaWtlIHlvdSB3ZXJlIHJpcHBlZCBvZmYuIE9uIGNsb3NlciBpbnNwZWN0aW9uIGhvd2V2ZXIsIHlvdSBub3RpY2UgdGhhdCBpdHMgZWFycmluZ3MgKGl0J3Mgd2VhcmluZyBlYXJyaW5ncykgYXJlIGFjdHVhbGx5IGZ1bGx5IGZ1bmN0aW9uYWwgY29waWVzIG9mIGl0c2VsZiwgZWFjaCBvZiB3aGljaCBhbHNvIHdlYXJpbmcgdGhlaXIgb3duIGNvdyBlYXJyaW5ncywgYW5kIHNvIG9uLCBpbmZpbml0ZWx5LiBJdCBhcHBlYXJzIHlvdXIgZGFpcnkgY29uY2VybnMgd2lsbCBiZSB0YWtlbiBjYXJlIG9mIGZvciBhIHdoaWxlLCBhbHRob3VnaCB5b3UnbGwgaGF2ZSB0byBwdXQgdXAgd2l0aCB0aGUgY293J3MgYW5ub3lpbmcgc25pY2tlcmluZy48L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICA2DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ2hvY29sYXRlIG91cm9ib3JvcyIsDQogICAgICAiPHE+Rm9yZXZlciBlYXRpbmcgaXRzIG93biB0YWlsIGFuZCBkaWdlc3RpbmcgaXRzZWxmLCBpbiBhIG1ldGFib2xpY2FsbHkgZHViaW91cyB0YWxlIG9mIGRlbGljaW91cyB0cmFnZWR5LjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDcNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJOZXN0ZWQiLA0KICAgICAgIjxxPkNsZXZlciBzZWxmLXJlZmVyZW5jZSBvciBzaGFtZWZ1bCBjcm9zcy1wcm9tb3Rpb24/IFRoaXMgdXBncmFkZSBhcHBhcmVudGx5IGhhcyB0aGUgZ2FsbCB0byBhZHZlcnRpc2UgYSBsaW5rIHRvIDx1Pm9ydGVpbC5kYXNobmV0Lm9yZy9uZXN0ZWQ8L3U+LCBpbiBhIHRvb2x0aXAgeW91IGNhbid0IGV2ZW4gY2xpY2suPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgOA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlNwYWNlLWZpbGxpbmcgZmliZXJzIiwNCiAgICAgICI8cT5UaGlzIHNwZWNpYWwgaW5ncmVkaWVudCBoYXMgdGhlIGluY3JlZGlibGUgYWJpbGl0eSB0byBmaWxsIHRoZSBsb2NhbCBzcGFjZSBwZXJmZWN0bHksIGVmZmVjdGl2ZWx5IGVyYWRpY2F0aW5nIGh1bmdlciBpbiB0aG9zZSB3aG8gY29uc3VtZSBpdCE8YnI+S25vd2luZyB0aGF0IG5vIGh1bmdlciBtZWFucyBubyBuZWVkIGZvciBjb29raWVzLCB5b3VyIG1hcmtldGVycyB1cmdlIHlvdSB0byByZXB1cnBvc2UgdGhpcyBwcm9kdWN0IGludG8gbmV4dC1sZXZlbCBwYWNraW5nIHBlYW51dHMuPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgOQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKCJFbmRsZXNzIGJvb2sgb2YgcHJvc2UiLCAiIiwgIkZyYWN0YWwgZW5naW5lIiwgMTApOw0KICAgIGlmIChFTikgew0KICAgICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgc3RyID0NCiAgICAgICAgICAnIlRoZXJlIG9uY2Ugd2FzIGEgYmFrZXIgbmFtZWQgJyArDQogICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAiLiBPbmUgZGF5LCB0aGVyZSB3YXMgYSBrbm9jayBhdCB0aGUgZG9vcjsgIiArDQogICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAiIG9wZW5lZCBpdCBhbmQgd2FzIHN1ZGRlbmx5IGZhY2UtdG8tZmFjZSB3aXRoIGEgc3RyYW5nZSBhbmQgbWVuYWNpbmcgb2xkIGdyYW5kbWEuIFRoZSBncmFuZG1hIG9wZW5lZCBoZXIgbW91dGggYW5kLCBpbiBhIHN0cmFuZ2UgbGl0dGxlIHZvaWNlLCBzdGFydGVkIHJlY2l0aW5nIHRoaXMgc3RyYW5nZSBsaXR0bGUgdGFsZSA6ICI7DQogICAgICAgIHZhciBuID0gMzU7DQogICAgICAgIHZhciBpID0gTWF0aC5mbG9vcihHYW1lLlQgKiAwLjEpOw0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgIHRoaXMuZGVzYyArDQogICAgICAgICAgJzxxIHN0eWxlPSJmb250LWZhbWlseTpDb3VyaWVyOyI+JyArDQogICAgICAgICAgKHN0ci5zdWJzdHIoaSAlIHN0ci5sZW5ndGgsIG4pICsNCiAgICAgICAgICAgIChpICUgc3RyLmxlbmd0aCA+IHN0ci5sZW5ndGggLSBuDQogICAgICAgICAgICAgID8gc3RyLnN1YnN0cigwLCAoaSAlIHN0ci5sZW5ndGgpIC0gKHN0ci5sZW5ndGggLSBuKSkNCiAgICAgICAgICAgICAgOiAiIikpICsNCiAgICAgICAgICAiPC9xPiINCiAgICAgICAgKTsNCiAgICAgIH07DQogICAgfSBlbHNlIEdhbWUubGFzdC5kZXNjID0gIjxxPi08L3E+IjsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIHNldCBvZiBhbGwgc2V0cyIsDQogICAgICAiPHE+VGhlIGFuc3dlciwgb2YgY291cnNlLCBpcyBhIGRlZmluaXRlIG1heWJlLjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDExDQogICAgKTsNCg0KICAgIG9yZGVyID0gNTAwMDsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlJlY3Vyc2l2ZSBtaXJyb3JzIiwNCiAgICAgICI8cT5EbyB5b3UgaGF2ZSBhbnkgaWRlYSB3aGF0IGhhcHBlbnMgd2hlbiB5b3UgcG9pbnQgdHdvIG9mIHRoZXNlIGF0IGVhY2ggb3RoZXI/IEFwcGFyZW50bHksIHRoZSB1bml2ZXJzZSBkb2Vzbid0IGVpdGhlci48L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAiUHJpc20iLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgLy9HYW1lLlN5bmVyZ3lVcGdyYWRlKCdDb21wb3VuZGVkIG9kZHMnLCc8cT5XaGVuIHByb2JhYmlsaXRpZXMgc3RhcnQgY2FzY2FkaW5nLCAibmV2ZXIgaW4gYSBiaWxsaW9uIGxpZmV0aW1lcyIgc3RhcnRzIGxvb2tpbmcgdGVycmlibHkgbGlrZSAicHJvYmFibHkgYmVmb3JlIE1vbmRheSBjb21lcyBhcm91bmQiLjwvcT4nLCdGcmFjdGFsIGVuZ2luZScsJ0NoYW5jZW1ha2VyJywnc3luZXJneTEnKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIk1pY2UgY2xpY2tpbmcgbWljZSIsDQogICAgICAiIiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAiQ3Vyc29yIiwNCiAgICAgICJzeW5lcmd5MiINCiAgICApOw0KICAgIGlmIChFTikgew0KICAgICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBNYXRoLnNlZWRyYW5kb20oR2FtZS5zZWVkICsgIi1ibGFzcGhlbW91c2UiKTsNCiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjMpIHsNCiAgICAgICAgICBNYXRoLnNlZWRyYW5kb20oKTsNCiAgICAgICAgICByZXR1cm4gdGhpcy5kZXNjICsgIjxxPkFic29sdXRlbHkgYmxhc3BoZW1vdXNlITwvcT4iOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbSgpOw0KICAgICAgICAgIHJldHVybiB0aGlzLmRlc2MgKyAiPHE+QWJzb2x1dGVseSBibGFzcGhlbW91cyE8L3E+IjsNCiAgICAgICAgfQ0KICAgICAgfTsNCiAgICB9IGVsc2UgR2FtZS5sYXN0LmRlc2MgPSAiPHE+LTwvcT4iOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkN1c3RhcmQgY3JlYW1zIiwNCiAgICAgIGRlc2M6ICJCcml0aXNoIGxvcmUgcGl0cyB0aGVzZSBpbiBhIG1lcmNpbGVzcyB3YXIgYWdhaW5zdCBib3VyYm9uIGJpc2N1aXRzLjxicj5UaGUgZmlsbGluZyBldm9rZXMgdmFuaWxsYSB3aXRob3V0IHF1aXRlIGFwcHJvYWNoaW5nIGl0Ljxicj5UaGV5J3JlIHRhc3RpZXIgb24gdGhlIGluc2lkZSEiLA0KICAgICAgaWNvbjogWzIzLCAyOV0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJvdXJib24gYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIlR3byBjaG9jb2xhdGUgYmlzY3VpdHMgam9pbmVkIHRvZ2V0aGVyIHdpdGggZXZlbiBtb3JlIGNob2NvbGF0ZS48YnI+VGhlIHN3b3JuIHJpdmFscyBvZiBjdXN0YXJkIGNyZWFtcywgYXMgbGVnZW5kIGhhcyBpdC4iLA0KICAgICAgaWNvbjogWzI0LCAyOV0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2VlcHNha2VzIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlNlYXNvbmFsIHJhbmRvbSBkcm9wcyBoYXZlIGEgPGI+MS81IGNoYW5jZTwvYj4gdG8gY2Fycnkgb3ZlciB0aHJvdWdoIGFzY2Vuc2lvbnMuIg0KICAgICAgKSArICI8cT5DaGVyaXNoIHRoZSBtZW1vcmllcy48L3E+IiwNCiAgICAgIDExMTExMTExMTEsDQogICAgICBbMjIsIDI5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWw0KICAgICAgIlN0YXJzbm93IiwNCiAgICAgICJTdGFybG92ZSIsDQogICAgICAiU3RhcnRlcnJvciIsDQogICAgICAiU3RhcnRyYWRlIiwNCiAgICAgICJTdGFyc3Bhd24iLA0KICAgIF07DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWluaS1jb29raWVzIiwNCiAgICAgIGRlc2M6ICJIYXZlIHlvdSBldmVyIG5vdGljZWQgaG93IHRoZSBzbWFsbGVyIHNvbWV0aGluZyBpcywgdGhlIGVhc2llciBpdCBpcyB0byBiaW5nZSBvbiBpdD8iLA0KICAgICAgaWNvbjogWzI5LCAzMF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN1Z2FyIGNyeXN0YWwgY29va2llcyIsDQogICAgICAoRU4NCiAgICAgICAgPyAiQ29va2llIHByb2R1Y3Rpb24gbXVsdGlwbGllciA8Yj4rNSUgcGVybWFuZW50bHk8L2I+LCBhbmQgPGI+KzElPC9iPiBmb3IgZXZlcnkgYnVpbGRpbmcgdHlwZSBsZXZlbCAxMCBvciBoaWdoZXIuIg0KICAgICAgICA6IGxvYygiQ29va2llIHByb2R1Y3Rpb24gbXVsdGlwbGllciA8Yj4rJTElIHBlcm1hbmVudGx5PC9iPi4iLCA1KSArDQogICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiQ29va2llIHByb2R1Y3Rpb24gbXVsdGlwbGllciA8Yj4rJTElPC9iPiBmb3IgZXZlcnkgYnVpbGRpbmcgdHlwZSBsZXZlbCAlMiBvciBoaWdoZXIuIiwNCiAgICAgICAgICAgIFsxLCAxMF0NCiAgICAgICAgICApKSArDQogICAgICAgICI8cT5JbmZ1c2VkIHdpdGggY29zbWljIHN3ZWV0bmVzcy4gSXQgZ2l2ZXMgb2ZmIGEgZmFpbnQgc2hpbW1lcnkgc291bmQgd2hlbiB5b3UgaG9sZCBpdCB1cCB0byB5b3VyIGVhci48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAsDQogICAgICBbMjEsIDMwXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdWdhciBiYWtpbmciXTsNCiAgICBHYW1lLmxhc3QucG93ZXIgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbiA9IDU7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLmxldmVsID49IDEwKSBuKys7DQogICAgICB9DQogICAgICByZXR1cm4gbjsNCiAgICB9Ow0KICAgIEdhbWUubGFzdC5wc2V1ZG9Db29raWUgPSB0cnVlOw0KICAgIEdhbWUubGFzdC5kZXNjRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBuID0gNTsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIGlmIChHYW1lLk9iamVjdHNbaV0ubGV2ZWwgPj0gMTApIG4rKzsNCiAgICAgIH0NCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBsb2MoIkN1cnJlbnQ6IikgKw0KICAgICAgICAiIDxiPisiICsNCiAgICAgICAgQmVhdXRpZnkobikgKw0KICAgICAgICAnJTwvYj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48L2Rpdj4nICsNCiAgICAgICAgdGhpcy5kZGVzYw0KICAgICAgKTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQm94IG9mIG1heWJlIGNvb2tpZXMiLA0KICAgICAgbG9jKCJDb250YWlucyBhbiBhc3NvcnRtZW50IG9mLi4uc29tZXRoaW5nLiIpICsNCiAgICAgICAgIjxxPlRoZXNlIG1heSBvciBtYXkgbm90IGJlIGNvbnNpZGVyZWQgY29va2llcy48L3E+IiwNCiAgICAgIDMzMzAwMDAwMDAwMCwNCiAgICAgIFsyNSwgMjldDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlN1Z2FyIGNyeXN0YWwgY29va2llcyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQm94IG9mIG5vdCBjb29raWVzIiwNCiAgICAgIGxvYygiQ29udGFpbnMgYW4gYXNzb3J0bWVudCBvZi4uLnNvbWV0aGluZy4iKSArDQogICAgICAgICI8cT5UaGVzZSBhcmUgc3RyaWN0bHksIGRlZmluaXRlbHkgbm90IGNvb2tpZXMuPC9xPiIsDQogICAgICAzMzMwMDAwMDAwMDAsDQogICAgICBbMjYsIDI5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdWdhciBjcnlzdGFsIGNvb2tpZXMiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkJveCBvZiBwYXN0cmllcyIsDQogICAgICBsb2MoIkNvbnRhaW5zIGFuIGFzc29ydG1lbnQgb2YgZGVsaWNpb3VzIHBhc3RyaWVzLiIpICsNCiAgICAgICAgIjxxPlRoZXNlIGFyZSBhIGRhbW4gc2xpcHBlcnkgc2xvcGUgaXMgd2hhdCB0aGV5IGFyZSE8L3E+IiwNCiAgICAgIDMzMzAwMDAwMDAwMCwNCiAgICAgIFsyNywgMjldDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlN1Z2FyIGNyeXN0YWwgY29va2llcyJdOw0KDQogICAgb3JkZXIgPSAxMDA0MDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlByb2ZpdGVyb2xlcyIsDQogICAgICBkZXNjOiAiQWxzbyBrbm93biBhcyBjcmVhbSBwdWZmcywgdGhlc2UgcGFzdHJpZXMgYXJlIGxpZ2h0LCBmbHVmZnksIGZpbGxlZCB3aXRoIHdoaXBwZWQgY3JlYW0gYW5kIGZ1biB0byB0aHJvdyBhdCBwZW9wbGUgd2hlbiBzbm93YmFsbHMgYXJlIHJ1bm5pbmcgc2NhcmNlLiIsDQogICAgICBpY29uOiBbMjksIDI5XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgcGFzdHJpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDMxKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkplbGx5IGRvbnV0IiwNCiAgICAgIGRlc2M6ICJHdWFyYW50ZWVkIHRvIGNvbnRhaW4gYXQgbGVhc3QgMC4zJSBqZWxseSBmaWxsaW5nLCBvciB5b3VyIG1vbmV5IGJhY2suPGJyPllvdSBjYW4gc3RpbGwgc2VlIHRoZSBqZWxseSBzdGFiIHdvdW5kISIsDQogICAgICBpY29uOiBbMjcsIDI4XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgcGFzdHJpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDMzKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdsYXplZCBkb251dCIsDQogICAgICBkZXNjOiAiQWJzb2x1dGVseSBnb29leSB3aXRoIHN1Z2FyLiBUaGUgaG9sZSBpcyB0aGUgdGFzdGllc3QgcGFydCEiLA0KICAgICAgaWNvbjogWzI4LCAyOF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIHBhc3RyaWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCAzNSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDaG9jb2xhdGUgY2FrZSIsDQogICAgICBkZXNjOiAiVGhlIGNha2UgaXMgYSBQb3J0YWwgcmVmZXJlbmNlISIsDQogICAgICBpY29uOiBbMjUsIDI3XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgcGFzdHJpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDM3KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlN0cmF3YmVycnkgY2FrZSIsDQogICAgICBkZXNjOiAiSXQncyBub3QgZWFzeSB0byBjb21lIHVwIHdpdGggZmxhdm9yIHRleHQgZm9yIHNvbWV0aGluZyBhcyBnZW5lcmljIGFzIHRoaXMsIGJ1dCBzb21lIHdvdWxkIHNheSBpdCdzIGEgcGllY2Ugb2YgY2FrZS4iLA0KICAgICAgaWNvbjogWzI2LCAyN10sDQogICAgICByZXF1aXJlOiAiQm94IG9mIHBhc3RyaWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCAzOSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJBcHBsZSBwaWUiLA0KICAgICAgZGVzYzogIkl0IGlzIHNhaWQgdGhhdCBzb21lIGdyYW5kbWFzIGdvIHJvZ3VlIGFuZCBiYWtlIHRoZXNlIGluc3RlYWQuIiwNCiAgICAgIGljb246IFsyNSwgMjhdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBwYXN0cmllcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgNDEpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTGVtb24gbWVyaW5ndWUgcGllIiwNCiAgICAgIGRlc2M6ICJNZXJpbmd1ZSBpcyBhIGZpbmlja3kgc3Vic3RhbmNlIG1hZGUgb2Ygc3VnYXIgYW5kIGVnZyB3aGl0ZXMgdGhhdCByZXF1aXJlcyBzcGVjaWZpYyBhdG1vc3BoZXJpYyBjb25kaXRpb25zIHRvIGJlIGJha2VkIGF0IGFsbC4gVGhlIGxlbW9uLCBhcyBmYXIgYXMgd2UgY2FuIHRlbGwsIGlzbid0IG5lYXJseSBhcyBwaWNreS4iLA0KICAgICAgaWNvbjogWzI2LCAyOF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIHBhc3RyaWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCA0MyksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCdXR0ZXIgY3JvaXNzYW50IiwNCiAgICAgIGRlc2M6ICJMb29rIGFyb3VuZC48YnI+QSBydWRlIG1hbiBpbiBhIHN0cmlwZWQgc2hpcnQgYmlrZXMgcGFzdCB5b3UuIEhlIHNtZWxscyBvZiBjaWdhcmV0dGVzIGFuZCBjYWYmZWFjdXRlOy1hdS1sYWl0LiBTb21ld2hlcmUsIGEgbWltZSB1c2VzIGhpcyBtb3VzdGFjaGUgdG8gbWFrZSBmdW4gb2YgdGhlIEJyaXRpc2guIDMwMCBwaWdlb25zIGZseSBvdmVyaGVhZC48YnI+UmVsYXguIFlvdSdyZSBleHBlcmllbmNpbmcgY3JvaXNzYW50LiIsDQogICAgICBpY29uOiBbMjksIDI4XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgcGFzdHJpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQ1KSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwNTA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDb29raWUgZG91Z2giLA0KICAgICAgZGVzYzogIkJ1cnN0aW5nIHdpdGggaW5maW5pdGUgcG90ZW50aWFsLCBidXQgY2FuIGFsc28gYmUgZWF0ZW4gYXMgaXMuIEFyZ3VhYmx5IHdvcnRoIHRoZSBzYWxtb25lbGxhLiIsDQogICAgICBpY29uOiBbMjUsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWF5YmUgY29va2llcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgMzUpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQnVybnQgY29va2llIiwNCiAgICAgIGRlc2M6ICJUaGlzIGNvb2tpZSBmbGV3IHRvbyBjbG9zZSB0byB0aGUgc3VuIGFuZCBpcyBub3cgYSBzaGFkb3cgb2YgaXRzIGZvcm1lciBzZWxmLiBJZiBvbmx5IHlvdSByZW1lbWJlcmVkIHRvIHNldCBhIHRpbWVyLCB5b3Ugd291bGRuJ3QgaGF2ZSB0aGlzIHRyYWdlZHkgb24geW91ciBoYW5kcy4uLiIsDQogICAgICBpY29uOiBbMjMsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWF5YmUgY29va2llcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgMzcpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQSBjaG9jb2xhdGUgY2hpcCBjb29raWUgYnV0IHdpdGggdGhlIGNoaXBzIHBpY2tlZCBvZmYgZm9yIHNvbWUgcmVhc29uIiwNCiAgICAgIGRlc2M6ICJUaGlzIGhhcyB0byBiZSB0aGUgc2FkZGVzdCB0aGluZyB5b3UndmUgZXZlciBzZWVuLiIsDQogICAgICBpY29uOiBbMjQsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWF5YmUgY29va2llcyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgMzkpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRmxhdm9yIHRleHQgY29va2llIiwNCiAgICAgIGRlc2M6ICJXaGF0IHlvdSdyZSBjdXJyZW50bHkgcmVhZGluZyBpcyB3aGF0IGdpdmVzIHRoaXMgY29va2llIGl0cyBpbmltaXRhYmxlIGZsYXZvci4iLA0KICAgICAgaWNvbjogWzIyLCAzMF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIG1heWJlIGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQxKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkhpZ2gtZGVmaW5pdGlvbiBjb29raWUiLA0KICAgICAgZGVzYzogIlVuY29tZm9ydGFibHkgZGV0YWlsZWQsIGxpa2UgdGhvc2Ugd2VpcmQgc3RvcmllcyB5b3VyIGF1bnQga2VlcHMgdGVsbGluZyBhdCBwYXJ0aWVzLiIsDQogICAgICBpY29uOiBbMjgsIDEwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWF5YmUgY29va2llcyIsDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgNDMpLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDA2MDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlRvYXN0IiwNCiAgICAgIGRlc2M6ICJBIGNyaXNwIHNsaWNlIG9mIGJyZWFkLCBiZWdnaW5nIGZvciBzb21lIGJ1dHRlciBhbmQgamFtLjxicj5XaHkgZG8gcGVvcGxlIGtlZXAgcHJvcG9zaW5nIHRoZXNlIGF0IHBhcnRpZXM/IiwNCiAgICAgIGljb246IFsyNywgMTBdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBub3QgY29va2llcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgMzQpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGVhbnV0IGJ1dHRlciAmIGplbGx5IiwNCiAgICAgIGRlc2M6ICJJdCdzIHRpbWUuIiwNCiAgICAgIGljb246IFsyOSwgOV0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIG5vdCBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCAzNiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJXb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSBhcmVuJ3QgdGhlIGNvb2tpZXMgeW91J3JlIGxvb2tpbmcgZm9yLiIsDQogICAgICBpY29uOiBbMjYsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2Ygbm90IGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDM4KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNoZWVzZWJ1cmdlciIsDQogICAgICBkZXNjOiAiQWJzb2x1dGVseSBubyByZWxhdGlvbiB0byBjb29raWVzIHdoYXRzb2V2ZXIgLSBPcnRlaWwganVzdCB3YW50ZWQgYW4gZXhjdXNlIHRvIGRyYXcgYSBjaGVlc2VidXJnZXIuIiwNCiAgICAgIGljb246IFsyOCwgMzBdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBub3QgY29va2llcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgNDApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiT25lIGxvbmUgY2hvY29sYXRlIGNoaXAiLA0KICAgICAgZGVzYzogIlRoZSBzdGFydCBvZiBzb21ldGhpbmcgYmVhdXRpZnVsLiIsDQogICAgICBpY29uOiBbMjcsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2Ygbm90IGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDEsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQyKSwNCiAgICB9KTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR2VuaXVzIGFjY291bnRpbmciLA0KICAgICAgbG9jKA0KICAgICAgICAiVW5sb2NrcyA8Yj5leHRyYSBwcmljZSBpbmZvcm1hdGlvbjwvYj4uPGJyPkVhY2ggZGlzcGxheWVkIGNvc3Qgbm93IHNwZWNpZmllcyBob3cgbG9uZyBpdCdsbCB0YWtlIHlvdSB0byBhZmZvcmQgaXQsIGFuZCBob3cgbXVjaCBvZiB5b3VyIGJhbmsgaXQgcmVwcmVzZW50cy4iDQogICAgICApICsgIjxxPlRoZXJlJ3Mgbm8gYWNjb3VudGluZyBmb3IgdGFzdGUsIGFuZCB5ZXQgaGVyZSB3ZSBhcmUuPC9xPiIsDQogICAgICAyMDAwMDAwLA0KICAgICAgWzExLCAxMF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiSW5zcGlyZWQgY2hlY2tsaXN0Il07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNoaW1tZXJpbmcgdmVpbCIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIHRoZSA8Yj5zaGltbWVyaW5nIHZlaWw8L2I+LCBhIHN3aXRjaCB0aGF0IHBhc3NpdmVseSBib29zdHMgeW91ciBDcFMgYnkgPGI+JTElPC9iPi48YnI+WW91IHN0YXJ0IHdpdGggdGhlIHZlaWwgdHVybmVkIG9uOyBob3dldmVyLCBpdCBpcyB2ZXJ5IGZyYWdpbGUsIGFuZCBjbGlja2luZyB0aGUgYmlnIGNvb2tpZSBvciBhbnkgZ29sZGVuIGNvb2tpZSBvciByZWluZGVlciB3aWxsIHR1cm4gaXQgb2ZmLCByZXF1aXJpbmcgJTIgb2YgQ3BTIHRvIHR1cm4gYmFjayBvbi4iLA0KICAgICAgICBbNTAsIEdhbWUuc2F5VGltZSgyNCAqIDYwICogNjAgKiBHYW1lLmZwcywgMildDQogICAgICApICsgIjxxPkhhbmRzIG9mZiE8L3E+IiwNCiAgICAgIDk5OTk5OTk5OSwNCiAgICAgIFs5LCAxMF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiRGlzdGlsbGVkIGVzc2VuY2Ugb2YgcmVkb3VibGVkIGx1Y2siXTsNCg0KICAgIG9yZGVyID0gNDAwMDU7DQogICAgdmFyIGZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgYm9vc3QgPSBHYW1lLmdldFZlaWxCb29zdCgpOw0KICAgICAgdmFyIHJlc2lzdCA9IEdhbWUuZ2V0VmVpbERlZmVuc2UoKTsNCiAgICAgIHJldHVybiAoDQogICAgICAgICh0aGlzLm5hbWUgPT0gIlNoaW1tZXJpbmcgdmVpbCBbb25dIg0KICAgICAgICAgID8gJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgICAgICBsb2MoIkFjdGl2ZS4iKSArDQogICAgICAgICAgICAnPC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+Jw0KICAgICAgICAgIDogIiIpICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJCb29zdHMgeW91ciBjb29raWUgcHJvZHVjdGlvbiBieSA8Yj4lMSU8L2I+IHdoZW4gYWN0aXZlLjxicj5UaGUgdmVpbCBpcyB2ZXJ5IGZyYWdpbGUgYW5kIHdpbGwgYnJlYWsgaWYgeW91IGNsaWNrIHRoZSBiaWcgY29va2llIG9yIGFueSBnb2xkZW4gY29va2llcyBvciByZWluZGVlci48YnI+PGJyPk9uY2UgYnJva2VuLCB0dXJuaW5nIHRoZSB2ZWlsIGJhY2sgb24gY29zdHMgJTIgb2YgdW5idWZmZWQgQ3BTLiIsDQogICAgICAgICAgW0JlYXV0aWZ5KGJvb3N0ICogMTAwKSwgR2FtZS5zYXlUaW1lKDI0ICogNjAgKiA2MCAqIEdhbWUuZnBzLCAyKV0NCiAgICAgICAgKSArDQogICAgICAgIChyZXNpc3QgPiAwDQogICAgICAgICAgPyAiPGJyPjxicj4iICsNCiAgICAgICAgICAgIGxvYygiSGFzIGEgPGI+JTElPC9iPiBjaGFuY2UgdG8gbm90IGJyZWFrLiIsIEJlYXV0aWZ5KHJlc2lzdCAqIDEwMCkpDQogICAgICAgICAgOiAiIikNCiAgICAgICk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJTaGltbWVyaW5nIHZlaWwgW29mZl0iLCAiIiwgMTAwMDAwMCwgWzksIDEwXSk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QudG9nZ2xlSW50byA9ICJTaGltbWVyaW5nIHZlaWwgW29uXSI7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLnVuYnVmZmVkQ3BzICogNjAgKiA2MCAqIDI0Ow0KICAgIH07DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuYzsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJTaGltbWVyaW5nIHZlaWwgW29uXSIsICIiLCAwLCBbOSwgMTBdKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KICAgIEdhbWUubGFzdC50b2dnbGVJbnRvID0gIlNoaW1tZXJpbmcgdmVpbCBbb2ZmXSI7DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuYzsNCg0KICAgIEdhbWUubG9zZVNoaW1tZXJpbmdWZWlsID0gZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgIGlmICghR2FtZS5IYXMoIlNoaW1tZXJpbmcgdmVpbCIpKSByZXR1cm4gZmFsc2U7DQogICAgICBpZiAoDQogICAgICAgICFHYW1lLkhhcygiU2hpbW1lcmluZyB2ZWlsIFtvZmZdIikgJiYNCiAgICAgICAgR2FtZS5IYXMoIlNoaW1tZXJpbmcgdmVpbCBbb25dIikNCiAgICAgICkNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgaWYgKEdhbWUuSGFzKCJSZWluZm9yY2VkIG1lbWJyYW5lIikpIHsNCiAgICAgICAgaWYgKGNvbnRleHQgPT0gInNoaW1tZXIiKQ0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbSgNCiAgICAgICAgICAgIEdhbWUuc2VlZCArICIvIiArIChHYW1lLmdvbGRlbkNsaWNrcyArIEdhbWUucmVpbmRlZXJDbGlja2VkKQ0KICAgICAgICAgICk7DQogICAgICAgIGVsc2UgaWYgKGNvbnRleHQgPT0gImNsaWNrIikNCiAgICAgICAgICBNYXRoLnNlZWRyYW5kb20oR2FtZS5zZWVkICsgIi8iICsgR2FtZS5jb29raWVDbGlja3MpOw0KICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IEdhbWUuZ2V0VmVpbERlZmVuc2UoKSkgew0KICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgbG9jKCJUaGUgcmVpbmZvcmNlZCBtZW1icmFuZSBwcm90ZWN0cyB0aGUgc2hpbW1lcmluZyB2ZWlsLiIpLA0KICAgICAgICAgICAgIiIsDQogICAgICAgICAgICBbNywgMTBdDQogICAgICAgICAgKTsNCiAgICAgICAgICBHYW1lLldpbigiVGhpY2stc2tpbm5lZCIpOw0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbSgpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBNYXRoLnNlZWRyYW5kb20oKTsNCiAgICAgIH0NCiAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNbIlNoaW1tZXJpbmcgdmVpbCBbb25dIl07DQogICAgICBtZS5ib3VnaHQgPSAxOw0KICAgICAgLy9HYW1lLlVwZ3JhZGVzW21lLnRvZ2dsZUludG9dLmJvdWdodD1mYWxzZTsNCiAgICAgIEdhbWUuTG9jayhtZS50b2dnbGVJbnRvKTsNCiAgICAgIEdhbWUuVW5sb2NrKG1lLnRvZ2dsZUludG8pOw0KICAgICAgR2FtZS5Ob3RpZnkobG9jKCJUaGUgc2hpbW1lcmluZyB2ZWlsIGRpc2FwcGVhcnMuLi4iKSwgIiIsIFs5LCAxMF0pOw0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgUGxheVNvdW5kKCJzbmQvc3BlbGxGYWlsLm1wMyIsIDAuNzUpOw0KICAgIH07DQoNCiAgICB2YXIgZ2V0Q29va2llUHJpY2UgPSBmdW5jdGlvbiAobGV2ZWwpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgIDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIE1hdGgucG93KDEwLCAobGV2ZWwgLSAxKSAvIDIpDQogICAgICApOw0KICAgIH07DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiV2hvb3BpZSBwaWVzIiwNCiAgICAgIGRlc2M6ICJUd28gY2hvY29sYXRlIGhhbHZlcyBqb2luZWQgdG9nZXRoZXIgYnkgYSBjcmVhbSBmaWxsaW5nLiBJdCdzIGdvdCBubyBleWVicm93cywgYnV0IHlvdSBuZXZlciBub3RpY2VkIHVudGlsIG5vdy4iLA0KICAgICAgaWNvbjogWzIxLCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgxKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhcmFtZWwgd2FmZXIgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIkNvYXRlZCBpbiBkZWxpY2lvdXMgY2hvY29sYXRlLiBBcyBtYW55IGxheWVycyBhcyB5b3UnbGwgZ2V0IGluIGEgYmlzY3VpdCB3aXRob3V0IGludm9sdmluZyBvbmlvbnMuIiwNCiAgICAgIGljb246IFsyMiwgMzFdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDaG9jb2xhdGUgY2hpcCBtb2NoYSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJNb2NoYSBzdGFydGVkIG91dCBhcyBhbiBleGN1c2UgdG8gc211Z2dsZSBjaG9jb2xhdGUgaW50byBjb2ZmZWUuIEFuZCBub3csIGluIGEgcG9pZ25hbnQgZGlzcGxheSBvZiBkaXBsb21hY3kgYW5kIGN1bHR1cmFsIGV4Y2hhbmdlLCBpdCdzIGJyaW5naW5nIGNvZmZlZSB0byBjaG9jb2xhdGUgY29va2llcy4iLA0KICAgICAgaWNvbjogWzIzLCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgzKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkVhcmwgR3JleSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJDYXB0YWluIFBpY2FyZCdzIGZhdm9yaXRlLiIsDQogICAgICBpY29uOiBbMjQsIDMxXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDQpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ29ybiBzeXJ1cCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGUgY29ybiBzeXJ1cCBtYWtlcyBpdCBleHRyYSBjaGV3eS4gTm90IHRoZSB0eXBlIG9mIHN0dWZmIHlvdSdkIHRoaW5rIHRvIHB1dCBpbiBhIGNvb2tpZSwgYnV0IGJha2VycyBtYWtlIGRvLiIsDQogICAgICBpY29uOiBbMjUsIDMxXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDUpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSWNlYm94IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkNhbiBiZSBwcmVwYXJlZCBpbiBhIHZhcmlldHkgb2Ygc2hhcGVzIHdpdGggYSB2YXJpZXR5IG9mIGluZ3JlZGllbnRzLiBNYWRlIGJ5IGZyZWV6aW5nIGRvdWdoIGJlZm9yZSBiYWtpbmcgaXQsIG1pcnJvcmluZyBhIHRpbWUtcHJvdmVuIG1lZGlldmFsIHRvcnR1cmUgcHJhY3RpY2UuIEdvdHRhIGtlZXAgdGhlbSBndWVzc2luZy4iLA0KICAgICAgaWNvbjogWzI2LCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg2KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdyYWhhbSBjcmFja2VycyIsDQogICAgICBkZXNjOiAiSW5zcGlyZWQgaW4gdGhlaXIgZGVzaWduIGJ5IHRoZSB3aXNoIHRvIGxpdmUgYSBsaWZlIG9mIGF1c3RlcmUgdGVtcGVyYW5jZSwgZnJlZSBmcm9tIHBsZWFzdXJlIG9yIGNoZWVyOyBpdCdzIG5vIHdvbmRlciB0aGVzZSBhcmUgc28gdGFzdHkuIiwNCiAgICAgIGljb246IFsyNywgMzFdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNyksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJIYXJkdGFjayIsDQogICAgICBkZXNjOiAiRXh0cmVtZWx5IGhhcmQgYW5kLCBpZiB3ZSdyZSBiZWluZyBob25lc3QsIGV4dHJlbWVseSB0YWNrLjxicj5JZiB5b3UncmUgY29uc2lkZXJpbmcgZWF0aW5nIHRoaXMgYXMgYSBmdW4gc25hY2ssIHlvdSBwcm9iYWJseSBoYXZlIG90aGVyIHRoaW5ncyB0byB3b3JyeSBhYm91dCB0aGFuIHRoaXMgZ2FtZSwgbGlrZSBnZXR0aW5nIHNjdXJ2eSBvciB5b3VyIGNyZXcgZm9tZW50aW5nIG11dGlueS4iLA0KICAgICAgaWNvbjogWzI4LCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg4KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNvcm5mbGFrZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGV5J3JlIGdycnJycnJvb3Z5ISBDYXJlZnVsIG5vdCB0byBsZXQgaXQgc2l0IGluIHlvdXIgbWlsayB0b28gbG9uZywgbGVzdCB5b3UgYWNjaWRlbnRhbGx5IGVuZCB1cCB3aXRoIGEgYm93bCBvZiBjZXJlYWwgYW5kIGdldCBjb25mdXNlZC4iLA0KICAgICAgaWNvbjogWzI5LCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg5KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlRvZnUgY29va2llcyIsDQogICAgICBkZXNjOiAiVGhlcmUncyByZWFsbHkgdHdvIHdheXMgdG8gZ28gd2l0aCB0b2Z1IGNvb2tpbmc7IGVpdGhlciBpdCBhc3NlcnRzIGl0c2VsZiBpbiBwbGFpbiBzaWdodCBvciBpdCBjYW1vdWZsYWdlcyBpdHNlbGYgaW4gdGhlIG90aGVyIGluZ3JlZGllbnRzLiBUaGlzIGhhcHBlbnMgdG8gYmUgdGhlIGxhdHRlciwgYW5kIGFzIHN1Y2gsIHlvdSBjYW4ndCByZWFsbHkgdGVsbCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoaXMgYW5kIGEgcmVndWxhciBjb29raWUsIHNhdmUgZm9yIHRoYXQgb25lIHBpeGVsIG9uIHRoZSBsZWZ0LiIsDQogICAgICBpY29uOiBbMzAsIDMxXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDEwKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdsdXRlbi1mcmVlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIk1hZGUgd2l0aCBicm93bmVkIGJ1dHRlciBhbmQgbWlsayB0byBjbG9zZWx5IG1hdGNoIHRoZSBhcmNoZXR5cGFsIGNob2NvbGF0ZSBjaGlwIGNvb2tpZS48YnI+Rm9yIGNlbGlhY3MsIGEgY2hhbmNlIHRvIGluZHVsZ2UgaW4gYSBkZWxpY2lvdXMgcmlzay1mcmVlIHBhc3RyeS4gRm9yIG90aGVycywgYSBzdHJhbmdlbHkgdGhyZWF0ZW5pbmcgY29uZmVjdGlvbiB3aG9zZSBlbXB0eSBleWVzIHdpbGwgbmV2ZXIga25vdyBoZWF2ZW4gbm9yIGhlbGwuIiwNCiAgICAgIGljb246IFszMCwgMzBdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUnVzc2lhbiBicmVhZCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJBbHNvIGtub3duIGFzIGFscGhhYmV0IGNvb2tpZXM7IHdoaWxlIG1vc3QgYmFrZXJzIGZvbGxvdyB0aGUgcmVjaXBlIHRvIHRoZSBsZXR0ZXIsIGl0IGlzIHNhaWQgdGhhdCBzb21lIHN1YnN0aXR1dGUgdGhlIGZsb3VyIGZvciBzcGVsdC4gQnV0IGRvbid0IHRha2UgbXkgd29yZCBmb3IgaXQuIiwNCiAgICAgIGljb246IFszMCwgMjldLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTEpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTGVia3VjaGVuIiwNCiAgICAgIGRlc2M6ICJEaXZlcnNlIGNvb2tpZXMgZnJvbSBHZXJtYW55LCBmcmFncmFudCB3aXRoIGhvbmV5IGFuZCBzcGljZXMsIG9mdGVuIGJha2VkIGFyb3VuZCBDaHJpc3RtYXMuPGJyPk9uY2Ugd29ybiBieSB3YXJyaW9ycyBvZiBvbGQgZm9yIHByb3RlY3Rpb24gaW4gYmF0dGxlLjxicj4rNSBTVFIsICsyMCUgbWFnaWMgcmVzaXN0YW5jZS4iLA0KICAgICAgaWNvbjogWzMwLCAyOF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgxMiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJBYWNoZW5lciBQcmludGVuIiwNCiAgICAgIGRlc2M6ICJUaGUgaG9uZXkgb25jZSB1c2VkIHRvIHN3ZWV0ZW4gdGhlc2UgZ2luZ2VyYnJlYWQtbGlrZSB0cmVhdHMgaGFzIHNpbmNlIGJlZW4gc3dhcHBlZCBvdXQgZm9yIGJlZXQgc3VnYXIsIHByb3ZpZGluZyBhbm90aGVyIHNhZCBleGFtcGxlIG9mIHJlZ3Jlc3NpdmUgZXZvbHV0aW9uLiIsDQogICAgICBpY29uOiBbMzAsIDI3XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDEzKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhbmlzdHJlbGxpIiwNCiAgICAgIGRlc2M6ICJBIGRyeSBiaXNjdWl0IGZsYXZvcmVkIHdpdGggYW5pc2UgYW5kIHdpbmUsIHRvdWdoIGxpa2UgdGhlIHBlb3BsZSBvZiBDb3JzaWNhIHdoZXJlIGl0IGNvbWVzIGZyb20uIiwNCiAgICAgIGljb246IFszMCwgMjZdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTQpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTmljZSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiTWFkZSB3aXRoIGNvY29udXQgYW5kIHBlcmZlY3Qgd2l0aCB0ZWEuIFRyYWNlcyBpdHMgb3JpZ2lucyB0byBhIEZyZW5jaCBjaXR5IHNvIG5pY2UgdGhleSBuYW1lZCBpdCB0aGF0LiIsDQogICAgICBpY29uOiBbMzAsIDI1XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDE1KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkZyZW5jaCBwdXJlIGJ1dHRlciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJZb3UgY2FuJ3QgdGVsbCB3aGF0J3Mgc3Ryb25nZXIgY29taW5nIG9mZiB0aGVzZSAtIHRoZSBzbWVsbCBvZiBidXR0ZXIgb3IgY29uZGVzY2Vuc2lvbi4iLA0KICAgICAgaWNvbjogWzMxLCAyNV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgxNiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQZXRpdCBiZXVycmUiLA0KICAgICAgZGVzYzogJ0FuIHVuYXNzdW1pbmcgYmlzY3VpdCB3aG9zZSBuYW1lIHNpbXBseSBtZWFucyAibGl0dGxlIGJ1dHRlciIuIEZhbWVkIGFuZCBmZWFyZWQgZm9yIGl0cyBmb3VyIGVhcnMgYW5kIGZvcnR5LWVpZ2h0IHRlZXRoLjxicj5XaGVuIGl0IGhlYXJzIHlhLCBpdFwnbGwgZ2V0IHlhLi4uJywNCiAgICAgIGljb246IFszMSwgMjZdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTYpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTmFuYWltbyBiYXJzIiwNCiAgICAgIGRlc2M6ICJBIGRlbGljaW91cyBuby1iYWtlIHBhc3RyeSBoYWlsaW5nIGZyb20gQ2FuYWRhLiBQcm9iYWJseSBiZWF0cyBlYXRpbmcgc3RyYWlnaHQtdXAgc25vdyB3aXRoIG1hcGxlIHN5cnVwIHBvdXJlZCBvbiBpdCwgYnV0IHdoYXQgZG8gSSBrbm93LiIsDQogICAgICBpY29uOiBbMzEsIDI3XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDE3KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJlcmdlciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJNZXNzaWx5IHNsYXRoZXJlZCB3aXRoIGNob2NvbGF0ZSBmdWRnZSwgYnV0IG9uZSBvZiB0aGUgbW9zdCBwb3B1bGFyIGJlcmdlcnMgb2YgQmFsdGltb3JlLCBhbG9uZyB3aXRoIHRoZSB0cmlwbGUgZnJpZWQgZWdnIGJlcmdlciBhbmQgdGhlIGJsdWUgY3JhYiBjaGVlc2ViZXJnZXIuIiwNCiAgICAgIGljb246IFszMSwgMjhdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTgpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2hpbnN1a28iLA0KICAgICAgZGVzYzogIkEgbGl0dGxlIHBpZWNlIG9mIE9raW5hd2EgaW4gY29va2llIGZvcm0uIFBhcnQgb2YgYSBKYXBhbmVzZSBjdXN0b20gb2Ygc2VsbGluZyBzd2VldHMgYXMgc291dmVuaXJzLiBCdXQgaGV5LCBwcmVzc2VkIHBlbm5pZXMgYXJlIGNvb2wgdG9vLiIsDQogICAgICBpY29uOiBbMzEsIDI5XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDE5KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBhbmRhIGtvYWxhIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBc3NvcnRlZCBqdW5nbGUgYW5pbWFscyB3aXRoIGVxdWFsbHkgYXNzb3J0ZWQgZmlsbGluZ3MuPGJyPkNvbWVzIGluIGNob2NvbGF0ZSwgc3RyYXdiZXJyeSwgdmFuaWxsYSBhbmQgZ3JlZW4gdGVhLjxicj5FYXQgdGhlbSBhbGwgYmVmb3JlIHRoZXkgZ28gZXh0aW5jdCEiLA0KICAgICAgaWNvbjogWzMxLCAxM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgxOSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQdXRyaSBzYWxqdSIsDQogICAgICBkZXNjOiAiQSBiZWxvdmVkIEluZG9uZXNpYW4gcGFzdHJ5OyBpdHMgbmFtZSBtZWFucyBcInNub3cgcHJpbmNlc3NcIiwgZm9yIHRoZSBwb3dkZXJlZCBzdWdhciBpdCdzIGNvYXRlZCB3aXRoLiBIYWQgd2UgYWRkZWQgdGhlc2UgdG8gQ29va2llIENsaWNrZXIgc29tZSB5ZWFycyBhZ28sIHRoaXMgaXMgd2hlcmUgd2UnZCBtYWtlIGEgcmVmZXJlbmNlIHRvIHRoYXQgb25lIERpc25leSBtb3ZpZSwgYnV0IGl0J3MgcHJvYmFibHkgdGltZSB0byBsZXQgaXQgZ28uIiwNCiAgICAgIGljb246IFszMSwgMzBdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMjApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWlsayBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJCZXN0IGVhdGVuIHdpdGggYSB0YWxsIGdsYXNzIG9mIGNob2NvbGF0ZS4iLA0KICAgICAgaWNvbjogWzMxLCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyMSksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDk5OTk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDb29raWUgY3J1bWJzIiwNCiAgICAgIGRlc2M6ICJUaGVyZSB1c2VkIHRvIGJlIGEgY29va2llIGhlcmUuIE5vdyB0aGVyZSBpc24ndC48YnI+R29vZCBoZWF2ZW5zLCB3aGF0IGRpZCB5b3UgPGk+RE8/ITwvaT4iLA0KICAgICAgaWNvbjogWzMwLCAxM10sDQogICAgICBwb3dlcjogMSwNCiAgICAgIHJlcXVpcmU6ICJMZWdhY3kiLA0KICAgICAgcHJpY2U6IDEwMCwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNob2NvbGF0ZSBjaGlwIGNvb2tpZSIsDQogICAgICBkZXNjOiAiVGhpcyBpcyB0aGUgY29va2llIHlvdSd2ZSBiZWVuIGNsaWNraW5nIHRoaXMgd2hvbGUgdGltZS4gSXQgbG9va3MgYSBiaXQgZGVudGVkIGFuZCBuaWJibGVkIG9uLCBidXQgaXQncyBvdGhlcndpc2UgZ29vZCBhcyBuZXcuIiwNCiAgICAgIGljb246IFsxMCwgMF0sDQogICAgICBwb3dlcjogMTAsDQogICAgICByZXF1aXJlOiAiTGVnYWN5IiwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwMDAwLA0KICAgIH0pOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDb3NtaWMgYmVnaW5uZXIncyBsdWNrIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlByaW9yIHRvIHB1cmNoYXNpbmcgdGhlIDxiPiUxPC9iPiB1cGdyYWRlIGluIGEgcnVuLCByYW5kb20gZHJvcHMgYXJlIDxiPiUyIHRpbWVzIG1vcmUgY29tbW9uPC9iPi4iLA0KICAgICAgICBbZ2V0VXBncmFkZU5hbWUoIkhlYXZlbmx5IGNoaXAgc2VjcmV0IiksIDVdDQogICAgICApICsNCiAgICAgICAgIjxxPk9oISBBIHBlbm55ITxicj5PaCEgQSBwcmljZWxlc3MgaGVpcmxvb20hPGJyPk9oISBBbm90aGVyIHBlbm55ITwvcT4iLA0KICAgICAgOTk5OTk5OTk5ICogMTUsDQogICAgICBbOCwgMTBdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNoaW1tZXJpbmcgdmVpbCJdOw0KICAgIEdhbWUuZ2V0VmVpbERlZmVuc2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbiA9IDA7DQogICAgICBpZiAoR2FtZS5IYXMoIlJlaW5mb3JjZWQgbWVtYnJhbmUiKSkgbiArPSAwLjE7DQogICAgICBpZiAoR2FtZS5IYXMoIkRlbGljYXRlIHRvdWNoIikpIG4gKz0gMC4xOw0KICAgICAgaWYgKEdhbWUuSGFzKCJTdGVhZGZhc3QgbXVybXVyIikpIG4gKz0gMC4xOw0KICAgICAgaWYgKEdhbWUuSGFzKCJHbGl0dGVyaW5nIGVkZ2UiKSkgbiArPSAwLjE7DQogICAgICByZXR1cm4gbjsNCiAgICB9Ow0KICAgIEdhbWUuZ2V0VmVpbEJvb3N0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG4gPSAwLjU7DQogICAgICBpZiAoR2FtZS5IYXMoIlJlaW5mb3JjZWQgbWVtYnJhbmUiKSkgbiArPSAwLjE7DQogICAgICBpZiAoR2FtZS5IYXMoIkRlbGljYXRlIHRvdWNoIikpIG4gKz0gMC4wNTsNCiAgICAgIGlmIChHYW1lLkhhcygiU3RlYWRmYXN0IG11cm11ciIpKSBuICs9IDAuMDU7DQogICAgICBpZiAoR2FtZS5IYXMoIkdsaXR0ZXJpbmcgZWRnZSIpKSBuICs9IDAuMDU7DQogICAgICByZXR1cm4gbjsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiUmVpbmZvcmNlZCBtZW1icmFuZSIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgPGI+c2hpbW1lcmluZyB2ZWlsPC9iPiBpcyBtb3JlIHJlc2lzdGFudCwgYW5kIGhhcyBhIDxiPiUxJSBjaGFuY2U8L2I+IG5vdCB0byBicmVhay4gSXQgYWxzbyBnaXZlcyA8Yj4rJTIlPC9iPiBtb3JlIENwUy4iLA0KICAgICAgICBbMTAsIDEwXQ0KICAgICAgKSArICI8cT5BIGNvbnNpc3RlbmN5IGJldHdlZW4gamVsbHlmaXNoIGFuZCBjbGluZyB3cmFwLjwvcT4iLA0KICAgICAgOTk5OTk5OTk5ICogMTUsDQogICAgICBbNywgMTBdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNoaW1tZXJpbmcgdmVpbCJdOw0KDQogICAgb3JkZXIgPSAyNTU7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJCaW5hcnkgZ3JhbmRtYXMiLA0KICAgICAgJ0EgZGlnaXRhbCBncmFuZG1hIHRvIHRyYW5zZmVyIG1vcmUgY29va2llcy48YnI+KFNlZSBhbHNvIDogYm9vbGVhbiBncmFuZG1hcywgc3RyaW5nIGdyYW5kbWFzLCBhbmQgbm90LWEtbnVtYmVyIGdyYW5kbWFzLCBhbHNvIGtub3duIGFzICJOYU5zIi4pJywNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTQwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIEphdmFTY3JpcHQgY29uc29sZSBmb3IgZHVtbWllcyIsDQogICAgICAnPHE+VGhpcyBzaG91bGQgZ2V0IHlvdSBzdGFydGVkLiBUaGUgZmlyc3QgbGluZSByZWFkczogIlRvIG9wZW4gdGhlIGphdmFzY3JpcHQgY29uc29sZSwgcHJlc3MtIjxicj4uLi50aGUgcmVzdCBvZiB0aGUgYm9vayBpcyBzb2FrZWQgaW4gY2hvY29sYXRlIG1pbGsuIElmIG9ubHkgdGhlcmUgd2FzIGEgd2F5IHRvIGxvb2sgdXAgdGhpcyBzb3J0IG9mIGluZm9ybWF0aW9uLi4uPC9xPicsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICI2NGJpdCBhcnJheXMiLA0KICAgICAgIjxxPkEgbG9uZy1mb3JtIHZhcmlhYmxlIHR5cGUgdG8gcGFjayB5b3VyIGNvb2tpZXMgbXVjaCBtb3JlIGVmZmljaWVudGx5LjwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3RhY2sgb3ZlcmZsb3ciLA0KICAgICAgIjxxPlRoaXMgaXMgcmVhbGx5IGJhZCEgWW91IHByb2JhYmx5IGZvcmdvdCB0byBjbG9zZSBhIGxvb3Agc29tZXdoZXJlIGFuZCBub3cgeW91ciBwcm9ncmFtcyBhcmUgZ29pbmcgY3JhenkhIFRoZSByZXN0IG9mIHlvdXIgZW5naW5lZXJzIHNlZW0gcmVhbGx5IGV4Y2l0ZWQgYWJvdXQgaXQgc29tZWhvdy4gSG93IGNvdWxkIGEgc29mdHdhcmUgbWlzaGFwIGxpa2UgYSBzdGFjayBvdmVyZmxvdyBwb3NzaWJseSBldmVyIGhlbHAgYW55b25lPzwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAzDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRW50ZXJwcmlzZSBjb21waWxlciIsDQogICAgICAiPHE+VGhpcyBiZXNwb2tlIGphdmFzY3JpcHQgY29tcGlsZXIgdG9vayB5b3VyIHRlYW0geWVhcnMgb2YgZGV2ZWxvcG1lbnQgYW5kIGJpbGxpb25zIGluIHJlc2VhcmNoLCBidXQgaXQgc2hvdWxkIGxldCB5b3UgZXhlY3V0ZSAoY2VydGFpbikgZnVuY3Rpb25zICh1cCB0bykgMiUgZmFzdGVyIChpbiBvcHRpbWFsIGNpcmN1bXN0YW5jZXMpLjwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3ludGFjdGljIHN1Z2FyIiwNCiAgICAgICI8cT5UYXN0aWVyIGNvZGUgZm9yIHRhc3RpZXIgY29va2llcy48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgNQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkEgbmljZSBjdXAgb2YgY29mZmVlIiwNCiAgICAgICI8cT5BbGwgdGhpcyBuZXJkIHN0dWZmIGhhcyB5b3UgZXhoYXVzdGVkLiBZb3UgbWFrZSB5b3Vyc2VsZiBhIG5pY2UgY3VwIG9mIGNvZmZlZSwgYnJld2VkIHdpdGggcm9hc3RlZCBiZWFucyBmcm9tIHNvbWUgZmFyLWF3YXkgaXNsYW5kLiBZb3UgbWF5IGhhdmUgYmVlbiB3b3JraW5nIGEgYml0IHRvbyBoYXJkIHRob3VnaCAtIHRoZSBjdXAgb2YgY29mZmVlIHN0YXJ0cyB0YWxraW5nIHRvIHlvdSwgaW5zaXN0aW5nIHRoYXQgaXQgaXMgTk9UIGphdmFzY3JpcHQuPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDYNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJKdXN0LWluLXRpbWUgYmFraW5nIiwNCiAgICAgICI8cT5BIG5ldyBtZXRob2Qgb2YgcHJlcGFyaW5nIGNvb2tpZXM7IHRoZXkgYmFrZSB0aGVtc2VsdmVzIHJpZ2h0IGluIGZyb250IG9mIHRoZSBjdXN0b21lcnMgYmVmb3JlIGVhdGluZywgbGVhdmluZyB5b3VyIGtpdGNoZW5zIG1lc3MtZnJlZS48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgNw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgImNvb2tpZXMrKyIsDQogICAgICAnPHE+WW91ciB2ZXJ5IG93biBjb29raWUtdGhlbWVkIHByb2dyYW1taW5nIGxhbmd1YWdlLCBlbGVnYW50bHkgbmFtZWQgYWZ0ZXIgaXRzIG1vc3QgaW50ZXJlc3RpbmcgYWJpbGl0eSAtIGluY3JlYXNpbmcgdGhlICJjb29raWVzIiB2YXJpYWJsZSBieSAxLjwvcT4nLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICA4DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU29mdHdhcmUgdXBkYXRlcyIsDQogICAgICAiPHE+VGhpcyBpcyBncmFuZCBuZXdzIC0gc29tZW9uZSdzIGZpbmFsbHkgZmlndXJlZCBvdXQgdGhlIFdpZmkgcGFzc3dvcmQsIGFuZCB5b3VyIG5ld2ZvdW5kIGludGVybmV0IGNvbm5lY3Rpb24gc2VlbXMgdG8gaGF2ZSB0cmlnZ2VyZWQgYSB3aG9sZSBsb3Qgb2Ygc29mdHdhcmUgdXBkYXRlcyEgWW91ciBicm93c2VycywgZHJpdmVycyBhbmQgcGx1Z2lucyBhbGwgcmVjZWl2ZWQgYSBmcmVzaCBjb2F0IG9mIHBhaW50LCBhbmQgeW91ciBqYXZhc2NyaXB0IHZlcnNpb24gaGFzIGJlZW4gdXBkYXRlZCB0byB0aGUgbGF0ZXN0IEVDTUFTY3JpcHQgc3BlY2lmaWNhdGlvbi4gSXQncyByZWFsbHkgdG9vIGJhZCB0aG91c2FuZHMgaGFkIHRvIGRpZSBkdWUgdG8gc29tZSBkZXByZWNhdGVkIGZ1bmN0aW9uIGluIHlvdXIgbmV1cm90b3hpbiB2ZW50aWxhdGlvbiBjb2RlLCBidXQgSSBndWVzcyB0aGF0J3MgcHJvZ3Jlc3MgZm9yIHlvdS48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgOQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdhbWUuTG9vcCIsDQogICAgICAiPHE+WW91J3JlIG5vdCBxdWl0ZSBzdXJlIHdoYXQgdG8gbWFrZSBvZiB0aGlzLiBXaGF0IGRvZXMgaXQgbWVhbj8gV2hhdCBkb2VzIGl0IGRvPyBXaG8gd291bGQgbGVhdmUgc29tZXRoaW5nIGxpa2UgdGhhdCBqdXN0IGxheWluZyBhcm91bmQgaGVyZT8gVHJ5IGFza2luZyBhZ2FpbiBpbiAxLzMwdGggb2YgYSBzZWNvbmQuPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiZXZhbCgpIiwNCiAgICAgICI8cT5JdCBpcyBzYWlkIHRoYXQgdGhpcyBzaW1wbGUgZnVuY3Rpb24gaG9sZHMgdGhlIGtleSB0byB0aGUgdW5pdmVyc2UsIGFuZCB0aGF0IHdob3NvZXZlciBtYXN0ZXJzIGl0IG1heSBzaGFwZSByZWFsaXR5IHRvIHRoZWlyIHdpbGwuPGJyPkdvb2QgdGhpbmcgeW91IGhhdmUgbm8gaWRlYSBob3cgaXQgd29ya3MuIE1ha2VzIGZvciBhIG5lYXQgcGxhcXVlIG9uIHlvdXIgd2FsbCwgdGhvdWdoLjwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAxMQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDUwMDA7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJTY3JpcHQgZ3Jhbm5pZXMiLA0KICAgICAgIjxxPkFybWllcyBvZiBlbmVyZ3kgZHJpbmstZnVlbGVkIGdyYW5kbWFzIHJlYWR5IHRvIGhhY2sgaW50byB0aGUgY3liZXJzcGFjZSBmb3IgcmVuZWdhZGUgZS1jb29raWVzLjwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlRvbWJvbGEgY29tcHV0aW5nIiwNCiAgICAgICIiLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAiQ2hhbmNlbWFrZXIiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQogICAgaWYgKEVOKSB7DQogICAgICBHYW1lLmxhc3QuZGVzY0Z1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIE1hdGguc2VlZHJhbmRvbShHYW1lLnNlZWQgKyAiLXRvbWJvbGFjb21wdXRpbmciKTsNCiAgICAgICAgdmFyIHN0ciA9DQogICAgICAgICAgIihZb3VyIHRpY2tldCByZWFkcyAiICsNCiAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApICsNCiAgICAgICAgICAiICIgKw0KICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArDQogICAgICAgICAgIiAiICsNCiAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApICsNCiAgICAgICAgICAiLCBlbnRpdGxpbmcgeW91IHRvICIgKw0KICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1ICsgMikgKyAiIGxpbmVzIG9mIGphdmFzY3JpcHQiLA0KICAgICAgICAgICAgIm9uZSBmcmVlIHVzZSBvZiBNYXRoLnJhbmRvbSgpIiwNCiAgICAgICAgICAgICJvbmUgcXViaXQsIHdoYXRldmVyIHRoYXQgaXMiLA0KICAgICAgICAgICAgIm9uZSBoYWxmLWVhdGVuIGNvb2tpZSIsDQogICAgICAgICAgICAiYSBicmFuZCBuZXcgdmFjdXVtIGNsZWFuZXIiLA0KICAgICAgICAgICAgIm1vc3Qgb2Ygb25lIHJvb20tdGVtcGVyYXR1cmUgY3VwIG9mIG9yYW5nZSBzb2RhIiwNCiAgICAgICAgICAgICJvbmUgcmVhbGx5IGdvb2Qgc2FuZHdpY2giLA0KICAgICAgICAgICAgIm9uZSBoYW5kZnVsIG9mIHBvY2tldCBsaW50IiwNCiAgICAgICAgICAgICJzb21lb25lJ3MgbW9zdGx5IGNsZWFuIGhhaXJwaWVjZSIsDQogICAgICAgICAgICAiYSB0cmlwIHRvIGEgZmFuY3kgcmVzdGF1cmFudCIsDQogICAgICAgICAgICAidGhlIGtub3dsZWRnZSBvZiB0aG9zZSBudW1iZXJzIiwNCiAgICAgICAgICAgICJhIGZ1cnRpdmUgZ2xhbmNlIGF0IHRoZSBuZXdzIHRpY2tlciIsDQogICAgICAgICAgICAiYW5vdGhlciB0aWNrZXQsIGhhbGYtcHJpY2UiLA0KICAgICAgICAgICAgImFsbC15b3UtY2FuLWVhdCBtb2xkeSBicmVhZCIsDQogICAgICAgICAgICAib25lIGxpZmV0aW1lIHN1cHBseSBvZiBveHlnZW4iLA0KICAgICAgICAgICAgInRoZSBjb2xvciAiICsNCiAgICAgICAgICAgICAgY2hvb3NlWw0KICAgICAgICAgICAgICAgICgicmVkIiwNCiAgICAgICAgICAgICAgICAib3JhbmdlIiwNCiAgICAgICAgICAgICAgICAieWVsbG93IiwNCiAgICAgICAgICAgICAgICAiZ3JlZW4iLA0KICAgICAgICAgICAgICAgICJibHVlIiwNCiAgICAgICAgICAgICAgICAicHVycGxlIiwNCiAgICAgICAgICAgICAgICAiYmxhY2siLA0KICAgICAgICAgICAgICAgICJ3aGl0ZSIsDQogICAgICAgICAgICAgICAgImdyYXkiLA0KICAgICAgICAgICAgICAgICJicm93biIsDQogICAgICAgICAgICAgICAgInBpbmsiLA0KICAgICAgICAgICAgICAgICJ0ZWFsIikNCiAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICJpbmNyZWFzZWQgaW50ZWxsZWN0IGZvciBhIGxpbWl0ZWQgdGltZSIsDQogICAgICAgICAgICAiYW4gYW5jaWVudCBydW5lc3dvcmQiLA0KICAgICAgICAgICAgInRoZSB0aHJvbmUgb2YgYSBmYXItYXdheSBjb3VudHJ5IiwNCiAgICAgICAgICAgICJ0aGUgcG9zaXRpb24gb2YgTWFmaWEgY2Fwby4gR29vZCBsdWNrIiwNCiAgICAgICAgICAgICJvbmUgZnJlZSB0aW1lLXRyYXZlbCB3ZWVrLWVuZCIsDQogICAgICAgICAgICAic29tZXRoaW5nIGJlYXV0aWZ1bCIsDQogICAgICAgICAgICAidGhlIGRlZWQgdG8gc29tZSBvaWwgd2VsbCIsDQogICAgICAgICAgICAib25lIGhhbWJ1cmdlciBtYWRlIG91dCBvZiB0aGUgYW5pbWFsLCBwbGFudCwgb3IgcGVyc29uIG9mIHlvdXIgY2hvaWNlIiwNCiAgICAgICAgICAgICJ0aGUgbGFzdCBzdXJ2aXZpbmcgIiArDQogICAgICAgICAgICAgIGNob29zZVsNCiAgICAgICAgICAgICAgICAoImRvZG8gYmlyZCIsICJ0aHlsYWNpbmUiLCAidW5pY29ybiIsICJkaW5vc2F1ciIsICJuZWFuZGVydGhhbCIpDQogICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAiYSBkZWVwIGZlZWxpbmcgb2YgYWNjb21wbGlzaG1lbnQiLA0KICAgICAgICAgICAgImEgZmxlZXRpbmcgdGluZ2Ugb2YgZW50ZXJ0YWlubWVudCIsDQogICAgICAgICAgICAiYSB2YWd1ZSBzZW5zZSBvZiB1bmVhc2UiLA0KICAgICAgICAgICAgImRlZXAgZXhpc3RlbnRpYWwgZHJlYWQiLA0KICAgICAgICAgICAgIm9uZSBleHRyYSB3ZWVrIGFkZGVkIHRvIHlvdXIgbGlmZXNwYW4iLA0KICAgICAgICAgICAgImJyZWF0aGUgbWFudWFsbHkiLA0KICAgICAgICAgICAgImJsaW5rIHJpZ2h0IGhlcmUgYW5kIG5vdyIsDQogICAgICAgICAgICAib25lIG1lZXRpbmcgd2l0aCBhbnkgZmFtb3VzIHBlcnNvbiwgbGl2aW5nIG9yIGRlYWQsIGluIHlvdXIgbmV4dCBkcmVhbSIsDQogICAgICAgICAgICAib25lIHZlcnkgbmljZSBkcmVhbSIsDQogICAgICAgICAgICAiYSB3YWNreSBzb3VuZCBlZmZlY3QiLA0KICAgICAgICAgICAgIjQ1IHNlY29uZHMgb2YgbW9yYWwgZmxleGliaWxpdHkiLA0KICAgICAgICAgICAgJ2h1bmRyZWRzIGFuZCB0aG91c2FuZHMsIGFsc28ga25vd24gYXMgInNwcmlua2xlcyInLA0KICAgICAgICAgICAgIm9uZSBjaXJjbGUsIHRyaWFuZ2xlLCBzcXVhcmUgb3Igb3RoZXIgc2ltcGxlIGdlb21ldHJpYyBzaGFwZSwgb2YgYXZlcmFnZSBkaW1lbnNpb25zIiwNCiAgICAgICAgICAgICJqdXN0IHRoaXMgZXh0cmEgYml0IG9mIHJhbmRvbW5lc3MiLA0KICAgICAgICAgICAgInRoZSBleHRyYSBwdXNoIHlvdSBuZWVkZWQgdG8gdHVybiB5b3VyIGxpZmUgYXJvdW5kIiwNCiAgICAgICAgICAgICJhIGdvb2QgZnJpZ2h0IiwNCiAgICAgICAgICAgICJvbmUgc2VjcmV0IHN1cGVycG93ZXIiLA0KICAgICAgICAgICAgImEgYmV0dGVyIGx1Y2sgbmV4dCB0aW1lIiwNCiAgICAgICAgICAgICJhbiBpcnJhdGlvbmFsIHBob2JpYSBvZiB0b21ib2xhIHRpY2tldHMiLA0KICAgICAgICAgICAgIm9uZSB3aG9sZSBzcGlkZXIiLA0KICAgICAgICAgICAgImFuIGluY3JlYXNlZCBzZW5zZSBvZiBzZWxmLXdvcnRoIGFuZCBkZXRlcm1pbmF0aW9uIiwNCiAgICAgICAgICAgICJpbm5lciBwZWFjZSIsDQogICAgICAgICAgICAib25lIGRvdWJsZS1YUCB3ZWVrLWVuZCBpbiB0aGUgTU1PUlBHIG9mIHlvdXIgY2hvaWNlIiwNCiAgICAgICAgICAgICJhIGxpdHRsZSBwaWVjZSBvZiB0aGUgdW5pdmVyc2UsIHJlcHJlc2VudGVkIGJ5IHRoZSB0cmlsbGlvbnMgb2YgYXRvbXMgdGhhdCBtYWtlIHVwIHRoaXMgdmVyeSB0aWNrZXQiLA0KICAgICAgICAgICAgImZvb2QgcG9pc29uaW5nIiwNCiAgICAgICAgICAgICJ0aGUgTW9vbiEgV2VsbCwgY29uY2VwdHVhbGx5IiwNCiAgICAgICAgICAgICJhIG5ldyBjYXIsIGJhYnkiLA0KICAgICAgICAgICAgImEgbmV3IGNhdGNocGhyYXNlIiwNCiAgICAgICAgICAgICJhbiBpbnRydXNpdmUgdGhvdWdodCBvZiB5b3VyIGNob2ljZSIsDQogICAgICAgICAgICAiLSAuLi5hdyBtYW4sIGl0IGp1c3QgY3V0cyBvZmYgdGhlcmUiLA0KICAgICAgICAgICAgInRoZSBkaXJlY3RvciBzcG90IGZvciB0aGUgbmV4dCBiaWcgaGl0IG1vdmllIiwNCiAgICAgICAgICAgICJyZWFsbHkgZ29vZC1sb29raW5nIGNhbHZlcyIsDQogICAgICAgICAgICAib25lIGdlbnVpbmUgcGlyYXRlIGdvbGRlbiBkb3VibG9vbiIsDQogICAgICAgICAgICAnInRyZWFzdXJlIGFuZCByaWNoZXMiLCBvciBzb21ldGhpbmcnLA0KICAgICAgICAgICAgIm9uZSBib2F0LCBzdW5rZW4iLA0KICAgICAgICAgICAgImJhYnkgc2hvZXMsIG5ldmVyIHdvcm4iLA0KICAgICAgICAgICAgImRpcmVjdCBsaW5lYWdlIHRvIHNvbWUgS2luZyBvciBRdWVlbiIsDQogICAgICAgICAgICAiaW5uYXRlIGtub3dsZWRnZSBvZiBhIGRlYWQgbGFuZ3VhZ2UgeW91J2xsIG5ldmVyIGVuY291bnRlciIsDQogICAgICAgICAgICAidGhlIG1lbG9keSBvZiBhIHNvbmcgeW91IGRvbid0IGtub3cgdGhlIHdvcmRzIHRvIiwNCiAgICAgICAgICAgICJ3aGl0ZSBub2lzZSIsDQogICAgICAgICAgICAibWlsZCBwaHlzaWNhbCBpbXBhaXJtZW50IiwNCiAgICAgICAgICAgICJhIG5ldyBwYWlyIG9mIGxpcHMiLA0KICAgICAgICAgICAgInRoaW5ncywgYW5kIHN1Y2giLA0KICAgICAgICAgICAgIm9uZSBwb3B1bGFyIGV4cHJlc3Npb24gYmVhcmluZyB5b3VyIG5hbWUiLA0KICAgICAgICAgICAgIm9uZSB0eXBvIiwNCiAgICAgICAgICAgICJvbmUgZ2V0LW91dC1vZi1qYWlsLWZyZWUgY2FyZCIsDQogICAgICAgICAgICAidGhlIHJlc3Qgb2YgeW91ciBsaWZlLi4uIGZvciBub3ciLA0KICAgICAgICAgICAgIm9uZSBwb2xpdGUgaHVmZiIsDQogICAgICAgICAgICAiYSBjb25kZXNjZW5kaW5nIHN0YXJlIiwNCiAgICAgICAgICAgICJvbmUgY3Vyc2VkIG1vbmtleSBwYXciLA0KICAgICAgICAgICAgInRydWUgbG92ZSwgcHJvYmFibHkiLA0KICAgICAgICAgICAgImFuIGludGVyZXN0aW5nIGZhY3RvaWQgYWJvdXQgdGhlIGFuaW1hbCwgY291bnRyeSwgVFYgc2hvdyBvciBjZWxlYnJpdHkgb2YgeW91ciBjaG9pY2UiLA0KICAgICAgICAgICAgImEgcG9wIGN1bHR1cmUgcmVmZXJlbmNlIiwNCiAgICAgICAgICAgICJtaW51dGVzIG9mIGZ1biIsDQogICAgICAgICAgICAndGhlIGV0eW1vbG9neSBvZiB0aGUgd29yZCAidG9tYm9sYSIgLSBpdFwncyBJdGFsaWFuIGZvciAiYSB0dW1ibGUiJywNCiAgICAgICAgICAgICJub3RoaW5nLiBZb3UgbG9zdCwgc29ycnkiLA0KICAgICAgICAgIF0pICsNCiAgICAgICAgICAiLikiOw0KICAgICAgICBNYXRoLnNlZWRyYW5kb20oKTsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICB0aGlzLmRlc2MgKw0KICAgICAgICAgICI8cT5MaWtlIHF1YW50dW0gY29tcHV0aW5nLCBidXQgbW9yZSBmdW4uPGJyPiIgKw0KICAgICAgICAgIHN0ciArDQogICAgICAgICAgIjwvcT4iDQogICAgICAgICk7DQogICAgICB9Ow0KICAgIH0gZWxzZSBHYW1lLmxhc3QuZGVzYyA9ICI8cT4tPC9xPiI7DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiS3J1aWRub3RlbiIsDQogICAgICBkZXNjOiAnQSBmZXN0aXZlIGR1dGNoIGZhdm9yaXRlOyB0aW55IGNpbm5hbW9ueSBiaXRlcyBzb21ldGltZXMgY29hdGVkIGluIGNob2NvbGF0ZS4gVGhlIG5hbWUgdHJhbnNsYXRlcyByb3VnaGx5IHRvICJrcnVpZG5vdGVuIi4nLA0KICAgICAgaWNvbjogWzMwLCAzXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDIyKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIk1hcmllIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJQbGVhc2FudGx5IHJvdW5kLCBzbW9vdGhseSBidXR0ZXJ5LCBzdWJ0bHkgdmFuaWxsYS1mbGF2b3JlZCwgb3JuYXRlbHkgZW1ib3NzZWQsIGVhY2ggcmlkZ2UgcmVwcmVzZW50cyBhIHBlcnNvbiBNYXJpZSBraWxsZWQgaW4gcHJpc29uLiIsDQogICAgICBpY29uOiBbMzAsIDRdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMjMpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWVyaW5ndWUgY29va2llcyIsDQogICAgICBkZXNjOiAiUHJvYmFibHkgdGhlIG1vc3QgZXhjaXRpbmcgdGhpbmcgeW91IGNhbiBtYWtlIG91dCBvZiBlZ2cgd2hpdGVzLiBBbHNvIGNhbGxlZCBmb3Jnb3R0ZW4gY29va2llcywgZHVlIHRvIHRoZSByZWNpcGUgYmVpbmcgb25jZSBsb3N0IGluIGEgc2VhbGVkIG15c3RpY2FsIHZhdWx0IGZvciAxMCwwMDAgeWVhcnMuIiwNCiAgICAgIGljb246IFszMSwgNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyNCksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDYwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGl6emEiLA0KICAgICAgZGVzYzogIldoYXQgaXMgYSBwaXp6YSBpZiBub3QgYSBsYXJnZSwgY2hld3kgY29va2llLCBmcm9zdGVkIHdpdGggYSByYXRoZXIgZXh1YmVyYW50IHRvbWF0byAmIGNoZWVzZSBpY2luZz8gTm90IGEgY29va2llLCB0aGF0J3Mgd2hhdC4iLA0KICAgICAgaWNvbjogWzMxLCA5XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2Ygbm90IGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQ0KSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwNTA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDcmFja2VycyIsDQogICAgICBkZXNjOiAnVGhlc2UgYXJlIHRoZSBub24tZmxhdm9yZWQga2luZCB3aXRoIG5vIHNhbHQgYWRkZWQuIFJlYWxseSBqdXN0IGEganVkZ21lbnQtZnJlZSB3aGVhdCBzcXVhcmUgYmVnZ2luZyB0byBoYXZlIGJpdHMgb2YgaGFtIGFuZCBzcHJlYWRhYmxlIGNoZWVzZSBwaWxlZCBvbnRvIGl0LCBpdHMgbWFpbiBjb250cmlidXRpb24gYmVpbmcgImNydW5jaHkiLicsDQogICAgICBpY29uOiBbMzAsIDldLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYXliZSBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCA0NSksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDMwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSGF2YWJyZWFrcyIsDQogICAgICBkZXNjOiAiWW91IGNhbiBzbmFwIHRoZSBzZWN0aW9ucyBuZWF0bHkgb3IganVzdCBiaXRlIGludG8gdGhlIHdob2xlIHRoaW5nIGxpa2Ugc29tZSBraW5kIG9mIGx1bmF0aWMuIFNvbWUgb3ZlcnNlYSBjb3VudHJpZXMgbWFudWZhY3R1cmUgdGhlc2UgaW4gaHVuZHJlZHMgb2YgdW5pcXVlIGZsYXZvcnMsIHN1Y2ggYXMgZ3JlZW4gdGVhLCBsb2JzdGVyIGJpc3F1ZSwgYW5kIGRhcmsgY2hvY29sYXRlLiIsDQogICAgICBpY29uOiBbMzEsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAyMDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIktpdHRlbiBleGVjdXRpdmVzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKw0KICAgICAgICAiPHE+cmVhZHkgdG8gZXhlY3V0ZSB3aGF0ZXZlciBhbmQgd2hvZXZlciB5b3UnZCBsaWtlLCBzaXI8L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgMTMpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxMywgMTgpOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNoYWkgdGVhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIk5vdCBleGFjdGx5IENhcHRhaW4gUGljYXJkJ3MgZmF2b3JpdGUsIGJ1dCBJIG1lYW4sIHRoZXNlIHdpbGwgZG8gaW4gYSBwaW5jaC4iLA0KICAgICAgaWNvbjogWzIzLCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0KSArIDUsDQogICAgfSk7DQogICAgR2FtZS5sYXN0Lm9yZGVyID0gMTAwMjAuNTY4NTsNCg0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiWW9ndXJ0IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkF1Z21lbnRlZCBieSB0aGUgd29uZGVycyBvZiBkYWlyeSwgdGhlc2UgY29va2llcyBhcmUgbGlnaHQgYW5kIGZsdWZmeSBhbmQganVzdCBvbmUgbW9yZSB0aGluZyBmb3IgdGhlIGxhY3Rvc2UtaW50b2xlcmFudCB0byBhdm9pZC48YnI+VHJ1bHkgZm9yIHRoZSBjdWx0dXJlZCBhbW9uZyB1cy4iLA0KICAgICAgaWNvbjogWzI0LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyNSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJUaHVtYnByaW50IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkZpbGxlZCB3aXRoIGphbSBhbmQgc29tZXRpbWVzIHNlcnZlZCBpbiBsaXR0bGUgcGFwZXIgY3Vwcy4gTm8gbG9uZ2VyIGFkbWlzc2libGUgYXMgYmlvbWV0cmljIGV2aWRlbmNlIGluIGNvdXJ0LiBXZSdyZSBub3QgaGF2aW5nIGEgcmVwZWF0IG9mIHRoYXQgd2hvbGUgbWVzcy4iLA0KICAgICAgaWNvbjogWzI1LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyNiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQaXp6ZWxsZSIsDQogICAgICBkZXNjOiAiVGhpbiwgY3Jpc3Agd2FmZmxlIGNvb2tpZXMgYmFrZWQgaW4gYSBiZXNwb2tlIGlyb24gZm9sbG93aW5nIGFuIGFuY2llbnQgSXRhbGlhbiByZWNpcGUuPGJyPlRoZXNlIGNvb2tpZXMgaGF2ZSBiZWVuIGFyb3VuZCBmb3IgYSBsb25nLCBsb25nIHRpbWUuPGJyPlRoZXNlIGNvb2tpZXMgaGF2ZSBzZWVuIHRoaW5ncy4iLA0KICAgICAgaWNvbjogWzI2LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyNyksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDMwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiWmlsbGEgd2FmZXJzIiwNCiAgICAgIGRlc2M6ICJQb3B1bGFyIHZhbmlsbGEtZmxhdm9yZWQgYmlzY3VpdHMgdGhhdCBzb21laG93IGtlZXAgZW5kaW5nIHVwIGluIGJhbmFuYSBwdWRkaW5nLjxicj5UaGVtZWQgYWZ0ZXIgYSBiZWxvdmVkIHJhZGlvYWN0aXZlIHByZWhpc3RvcmljIG1vbnN0ZXIsIGZvciBzb21lIHJlYXNvbi4iLA0KICAgICAgaWNvbjogWzIyLCAzMl0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJEaW0gRGFtcyIsDQogICAgICBkZXNjOiAiVHdvIGJpc2N1aXRzIGpvaW5lZCBieSBjaG9jb2xhdGUgYW5kIGNvYXRlZCBpbiBldmVuIG1vcmUgY2hvY29sYXRlLjxicj5Zb3Ugd29uZGVyIC0gd2hpY2ggb25lIGlzIHRoZSBkaW0sIGFuZCB3aGljaCBvbmUgaXMgdGhlIGRhbT8iLA0KICAgICAgaWNvbjogWzMxLCAxMF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDYwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2FuZHkiLA0KICAgICAgZGVzYzogIlRoZXJlIGFyZSB0d28gcGlsbGFycyB0byB0aGUgd29ybGQgb2Ygc3dlZXRzIDogcGFzdHJpZXMsIG9mIGNvdXJzZSAtIGFuZCBjYW5keS48YnI+WW91IGNvdWxkIG1ha2UgYSB3aG9sZSBuZXcgZ2FtZSBqdXN0IGFib3V0IHRoZXNlLCBidXQgZm9yIG5vdywgcGxlYXNlIGVuam95IHRoZXNlIGFzc29ydGVkIGdlbmVyaWMgdHJlYXRzLiIsDQogICAgICBpY29uOiBbMzAsIDEwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2Ygbm90IGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQ2KSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTkwMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAwMSIsDQogICAgICAiPHE+RmluZ2VycyBhcmUgbm90IHRoZSBvbmx5IHRoaW5nIHlvdSBjYW4gY291bnQgb24uPC9xPiIsDQogICAgICAiQ3Vyc29yIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAwMiIsDQogICAgICAiPHE+QSB3cmlua2xlIGlzIGEgY3JhY2sgaW4gYSBtdW5kYW5lIGZhY2FkZS48L3E+IiwNCiAgICAgICJHcmFuZG1hIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAwMyIsDQogICAgICAiPHE+VGhlIHNlZWRzIG9mIHRvbW9ycm93IGFscmVhZHkgbGllIHdpdGhpbiB0aGUgc2VlZHMgb2YgdG9kYXkuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMDQiLA0KICAgICAgIjxxPlJpY2hlcyBmcm9tIGRlZXAgdW5kZXIgZWxldmF0ZSB5b3UgYWxsIHRoZSBzYW1lLjwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgImZvcnR1bmUiDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMDA1IiwNCiAgICAgICI8cT5UcnVlIHdvcnRoIGlzIG5vdCBpbiB3aGF0IHlvdSBmaW5kLCBidXQgaW4gd2hhdCB5b3UgbWFrZS48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAwNiIsDQogICAgICAiPHE+VGhlIHZhbHVlIG9mIG1vbmV5IG1lYW5zIG5vdGhpbmcgdG8gYSBwb2NrZXQuPC9xPiIsDQogICAgICAiQmFuayIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMDciLA0KICAgICAgIjxxPk5vdCBhbGwgZ3VpZGVzIGRlc2VydmUgd29yc2hpcC48L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgImZvcnR1bmUiDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMDA4IiwNCiAgICAgICI8cT5NYWdpYyBpcyBhYm91dCB0d28gdGhpbmdzIC0gc2hvd21hbnNoaXAsIGFuZCByYWJiaXRzLjwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMDkiLA0KICAgICAgIjxxPkV2ZXJ5IG1pbGUgdHJhdmVsbGVkIGV4cGFuZHMgdGhlIG1pbmQgYnkganVzdCBhcyBtdWNoLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAxMCIsDQogICAgICAiPHE+RG9uJ3QgZ2V0IHVzZWQgdG8geW91cnNlbGYuIFlvdSdyZSBnb25uYSBoYXZlIHRvIGNoYW5nZS48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMTEiLA0KICAgICAgIjxxPkV2ZXJ5IGRvb3J3YXkgaXMgYSBnYW1ibGUuIFRyZWFkIHdpdGggY2FyZS48L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgImZvcnR1bmUiDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMDEyIiwNCiAgICAgICI8cT5EbyB5b3VyIGZ1dHVyZSBzZWxmIGEgZmF2b3I7IHRoZXknbGwgdGhhbmsgeW91IGZvciBpdC48L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgImZvcnR1bmUiDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMDEzIiwNCiAgICAgICI8cT5UaGUgd29ybGQgaXMgbWFkZSBvZiB3aGF0IHdlIHB1dCBpbnRvIGl0LjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAxNCIsDQogICAgICAiPHE+U3RhcmluZyBhdCBhIGRhenpsaW5nIGxpZ2h0IGNhbiBibGluZCB5b3UgYmFjayB0byBkYXJrbmVzcy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMTUiLA0KICAgICAgIjxxPkRvbid0IGxlYXZlIHRvIGJsaW5kIGNoYW5jZSB3aGF0IHlvdSBjb3VsZCBhY2NvbXBsaXNoIHdpdGggZGVhZiBza2lsbC48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMTYiLA0KICAgICAgIjxxPkl0J3MgZ29vZCB0byBzZWUgeW91cnNlbGYgaW4gb3RoZXJzLiBSZW1lbWJlciB0byBzZWUgeW91cnNlbGYgaW4geW91cnNlbGYsIHRvby48L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMTciLA0KICAgICAgIjxxPklmIHRoaW5ncyBhcmVuJ3Qgd29ya2luZyBvdXQgZm9yIHlvdSwgcmV3cml0ZSB0aGUgcnVsZXMuPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDE5MTAwOw0KICAgIC8vbm90ZSA6IHByaWNlIGZvciB0aGVzZSBjYXBwZWQgdG8gYmFzZSBwcmljZSBPUiAxIGRheSBvZiB1bmJ1ZmZlZCBDcFMNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzEwMCIsDQogICAgICBsb2MoIkFsbCBidWlsZGluZ3MgYW5kIHVwZ3JhZGVzIGFyZSA8Yj4lMSUgY2hlYXBlcjwvYj4uIiwgMSkgKw0KICAgICAgICAiICIgKw0KICAgICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZXIgPGI+KyUxJTwvYj4uIiwgMSkgKw0KICAgICAgICAiPHE+VHJ1ZSB3ZWFsdGggaXMgY291bnRlZCBpbiBnaWZ0cy48L3E+IiwNCiAgICAgIEdhbWUuVGllcnNbImZvcnR1bmUiXS5wcmljZSAqIDEwMDAwMCwNCiAgICAgIFswLCAwXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgImZvcnR1bmUiLCAxMCk7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGZ1bmN0aW9uIChtZSkgew0KICAgICAgcmV0dXJuIE1hdGgubWluKG1lLmJhc2VQcmljZSwgR2FtZS51bmJ1ZmZlZENwcyAqIDYwICogNjAgKiAyNCk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzEwMSIsDQogICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZXIgPGI+KyUxJTwvYj4uIiwgNykgKw0KICAgICAgICAiPHE+U29tZSBwZW9wbGUgZHJlYW0gb2YgZm9ydHVuZXM7IG90aGVycyBkcmVhbSBvZiBjb29raWVzLjwvcT4iLA0KICAgICAgR2FtZS5UaWVyc1siZm9ydHVuZSJdLnByaWNlICogMTAwMDAwMDAwLA0KICAgICAgWzAsIDBdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAiZm9ydHVuZSIsIDEwKTsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZnVuY3Rpb24gKG1lKSB7DQogICAgICByZXR1cm4gTWF0aC5taW4obWUuYmFzZVByaWNlLCBHYW1lLnVuYnVmZmVkQ3BzICogNjAgKiA2MCAqIDI0KTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMTAyIiwNCiAgICAgIGxvYygNCiAgICAgICAgIllvdSBnYWluIGFub3RoZXIgPGI+KyUxJTwvYj4gb2YgeW91ciByZWd1bGFyIENwUyB3aGlsZSB0aGUgZ2FtZSBpcyBjbG9zZWQuIiwNCiAgICAgICAgMQ0KICAgICAgKSArDQogICAgICAgICIgPHNtYWxsPigiICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJNdXN0IG93biB0aGUgJTEgdXBncmFkZS4iLA0KICAgICAgICAgIGdldFVwZ3JhZGVOYW1lKCJUd2luIEdhdGVzIG9mIFRyYW5zY2VuZGVuY2UiKQ0KICAgICAgICApICsNCiAgICAgICAgIik8L3NtYWxsPiIgKw0KICAgICAgICAiPHE+SGVscCwgSSdtIHRyYXBwZWQgaW4gYSAiICsNCiAgICAgICAgKEFwcCA/ICJjb21wdXRlciIgOiAiYnJvd3NlciIpICsNCiAgICAgICAgIiBnYW1lITwvcT4iLA0KICAgICAgR2FtZS5UaWVyc1siZm9ydHVuZSJdLnByaWNlICogMTAwMDAwMDAwMDAwLA0KICAgICAgWzAsIDBdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAiZm9ydHVuZSIsIDEwKTsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZnVuY3Rpb24gKG1lKSB7DQogICAgICByZXR1cm4gTWF0aC5taW4obWUuYmFzZVByaWNlLCBHYW1lLnVuYnVmZmVkQ3BzICogNjAgKiA2MCAqIDI0KTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMTAzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKw0KICAgICAgICAiPHE+RG9uJ3QgYmVsaWV2ZSB0aGUgc3VwZXJzdGl0aW9uczsgYWxsIGNhdHMgYXJlIGdvb2QgbHVjay48L3E+IiwNCiAgICAgIEdhbWUuVGllcnNbImZvcnR1bmUiXS5wcmljZSAqIDEwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFswLCAwXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgImZvcnR1bmUiLCAxOCk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGZ1bmN0aW9uIChtZSkgew0KICAgICAgcmV0dXJuIE1hdGgubWluKG1lLmJhc2VQcmljZSwgR2FtZS51bmJ1ZmZlZENwcyAqIDYwICogNjAgKiAyNCk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzEwNCIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPlJlbWVtYmVyIHRvIHN0YXkgaW4gdG91Y2guPC9xPiIsDQogICAgICBHYW1lLlRpZXJzWyJmb3J0dW5lIl0ucHJpY2UgKiAxMDAwMDAwMDAwMDAsDQogICAgICBbMCwgMF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsICJmb3J0dW5lIiwgMTEpOw0KICAgIEdhbWUubGFzdC5wcmljZUZ1bmMgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIHJldHVybiBNYXRoLm1pbihtZS5iYXNlUHJpY2UsIEdhbWUudW5idWZmZWRDcHMgKiA2MCAqIDYwICogMjQpOw0KICAgIH07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgY29va2llcyIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgbmV3cyB0aWNrZXIgbWF5IG9jY2FzaW9uYWxseSBoYXZlIDxiPmZvcnR1bmVzPC9iPiwgd2hpY2ggbWF5IGJlIGNsaWNrZWQgZm9yIHNvbWV0aGluZyBnb29kLiINCiAgICAgICkgKw0KICAgICAgICAiPHE+VGhlc2UgZG9uJ3QgdGFzdGUgYWxsIHRoYXQgZ3JlYXQgYnV0IHRoYXQncyBub3QgcmVhbGx5IHRoZSBwb2ludCwgaXMgaXQ/PC9xPiIsDQogICAgICA3Nzc3Nzc3Nzc3NywNCiAgICAgIFsyOSwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiRGlzdGlsbGVkIGVzc2VuY2Ugb2YgcmVkb3VibGVkIGx1Y2siXTsNCg0KICAgIG9yZGVyID0gNDAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBIHJlYWxseSBnb29kIGd1aWRlIGJvb2siLA0KICAgICAgIjxiPj8/PzwvYj48cT4/Pz8/Pz88L3E+IiwNCiAgICAgIDcsDQogICAgICBbMjIsIDEyXQ0KICAgICk7IC8vZGVidWcgcHVycG9zZXMgb25seQ0KICAgIC8vbmV3IEdhbWUuVXBncmFkZSgnQSByZWFsbHkgZ29vZCBndWlkZSBib29rJywnPGI+QWxsIGR1bmdlb24gbG9jYXRpb25zIGJlaGF2ZSBhcyBpZiB1bmxvY2tlZC48L2I+PGJyPjxiPllvdSBtYXkgc2hpZnQtY2xpY2sgYSBkdW5nZW9uIGxvY2F0aW9uIHRvIHRlbGVwb3J0IHRoZXJlLjwvYj48cT5JdCBldmVuIHRlbGxzIHlvdSB3aGljaCBob3RlbHMgdG8gYXZvaWQhPC9xPicsNyxbMjIsMTJdKTsvL2RlYnVnIHB1cnBvc2VzIG9ubHkNCiAgICBHYW1lLmxhc3QuYnV5RnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5PYmplY3RzWyJGYWN0b3J5Il0ubWluaWdhbWVMb2FkZWQpIHsNCiAgICAgICAgR2FtZS5PYmplY3RzWyJGYWN0b3J5Il0ubWluaWdhbWUuY29tcHV0ZU1hcEJvdW5kcygpOw0KICAgICAgICBHYW1lLk9iamVjdHNbIkZhY3RvcnkiXS5taW5pZ2FtZS51cGRhdGVMb2NTdHlsZXMoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUubGFzdC5wb29sID0gImRlYnVnIjsNCg0KICAgIG9yZGVyID0gMTAzMDA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQcmlzbSBoZWFydCBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiQW4gZXZlcnktZmxhdm9yIGJpc2N1aXQgdGhhdCBzdGFuZHMgZm9yIHVuaXZlcnNhbCBsb3ZlIGFuZCBiZWluZyB0cnVlIHRvIHlvdXJzZWxmLiIsDQogICAgICByZXF1aXJlOiAiRXRlcm5hbCBoZWFydCBiaXNjdWl0cyIsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFszMCwgOF0sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgIH0pOw0KICAgIEdhbWUubGFzdC5vcmRlciA9IDEwMzAwLjE3NTsNCg0KICAgIG9yZGVyID0gMTkxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gd2FnZXMiLA0KICAgICAgbG9jKA0KICAgICAgICAiVGhyb3VnaCBjbGV2ZXIgYWNjb3VudGluZywgdGhpcyBhY3R1YWxseSBtYWtlcyBraXR0ZW4gdXBncmFkZXMgPGI+JTElIGNoZWFwZXI8L2I+LiIsDQogICAgICAgIDEwDQogICAgICApICsNCiAgICAgICAgIjxxPkNhdHMgY2FuIGhhdmUgbGl0dGxlIGEgc2FsYXJ5LCBhcyBhIHRyZWF0Ljxicj5DYXRzIGFyZSBleHBlcnQgaGFnZ2xlcnMgYW5kIGhhdmUgYSBrZWVuIHNlbnNlIG9mIGJhcmdhaW5pbmcsIGVzcGVjaWFsbHkgaW4gdGhlIGNhc2Ugb2YgY2FzaC48L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAsDQogICAgICBbMzEsIDhdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIktpdHRlbiBhbmdlbHMiXTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlBldCB0aGUgZHJhZ29uIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlVubG9ja3MgdGhlIGFiaWxpdHkgdG8gPGI+cGV0IHlvdXIgZHJhZ29uPC9iPiBieSBjbGlja2luZyBvbiBpdCBvbmNlIGhhdGNoZWQuIg0KICAgICAgKSArDQogICAgICAgICI8cT5EcmFnb25zIGRvIG5vdCBwdXJyLiBJZiB5b3VyIGRyYWdvbiBzdGFydHMgcHVycmluZywgdmFjYXRlIHRoZSBhcmVhIGltbWVkaWF0ZWx5LjwvcT4iLA0KICAgICAgOTk5OTk5OTk5OTksDQogICAgICBbMzAsIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJIb3cgdG8gYmFrZSB5b3VyIGRyYWdvbiIsICJSZXNpZHVhbCBsdWNrIl07DQoNCiAgICBvcmRlciA9IDI1MTAwOw0KICAgIHZhciBkcmFnb25Ecm9wVXBncmFkZUNvc3QgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgIEdhbWUudW5idWZmZWRDcHMgKg0KICAgICAgICA2MCAqDQogICAgICAgIDMwICoNCiAgICAgICAgKEdhbWUuZHJhZ29uTGV2ZWwgPCBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAxID8gMSA6IDAuMSkNCiAgICAgICk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRyYWdvbiBzY2FsZSIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMykgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIkNvc3Qgc2NhbGVzIHdpdGggQ3BTLCBidXQgJTEgdGltZXMgY2hlYXBlciB3aXRoIGEgZnVsbHktdHJhaW5lZCBkcmFnb24uIiwNCiAgICAgICAgICAxMA0KICAgICAgICApICsNCiAgICAgICAgIjxxPllvdXIgZHJhZ29uIHNoZWRzIHRoZXNlIHJlZ3VsYXJseSwgc28gdGhpcyBvbmUgcHJvYmFibHkgd29uJ3QgYmUgbWlzc2VkLjxicj5Ob3RlOiBpY29uIG5vdCB0byBzY2FsZS48L3E+IiwNCiAgICAgIDk5OSwNCiAgICAgIFszMCwgMTRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZHJhZ29uRHJvcFVwZ3JhZGVDb3N0Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRHJhZ29uIGNsYXciLA0KICAgICAgbG9jKCJDbGlja2luZyBpcyA8Yj4lMSU8L2I+IG1vcmUgcG93ZXJmdWwuIiwgMykgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIkNvc3Qgc2NhbGVzIHdpdGggQ3BTLCBidXQgJTEgdGltZXMgY2hlYXBlciB3aXRoIGEgZnVsbHktdHJhaW5lZCBkcmFnb24uIiwNCiAgICAgICAgICAxMA0KICAgICAgICApICsNCiAgICAgICAgIjxxPldpbGwgZ3JvdyBiYWNrIGluIGEgZmV3IGRheXMnIHRpbWUuPGJyPkEgc2l4LWluY2ggcmV0cmFjdGFibGUgY2xhdywgbGlrZSBhIHJhem9yLCBmcm9tIHRoZSBtaWRkbGUgdG9lLiBTbyB5b3Uga25vdywgdHJ5IHRvIHNob3cgYSBsaXR0bGUgcmVzcGVjdC48L3E+IiwNCiAgICAgIDk5OSwNCiAgICAgIFszMSwgMTRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZHJhZ29uRHJvcFVwZ3JhZGVDb3N0Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRHJhZ29uIGZhbmciLA0KICAgICAgbG9jKCJHb2xkZW4gY29va2llcyBnaXZlIDxiPiUxJTwvYj4gbW9yZSBjb29raWVzLiIsIDMpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJEcmFnb24gaGFydmVzdCBhbmQgRHJhZ29uZmxpZ2h0IGFyZSA8Yj4lMSUgc3Ryb25nZXI8L2I+LiIsIDEwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiQ29zdCBzY2FsZXMgd2l0aCBDcFMsIGJ1dCAlMSB0aW1lcyBjaGVhcGVyIHdpdGggYSBmdWxseS10cmFpbmVkIGRyYWdvbi4iLA0KICAgICAgICAgIDEwDQogICAgICAgICkgKw0KICAgICAgICAiPHE+SnVzdCBhIGZhbGxlbiBiYWJ5IHRvb3RoIHlvdXIgZHJhZ29uIHdhbnRlZCB5b3UgdG8gaGF2ZSwgYXMgYSBnaWZ0Ljxicj5JdCBtaWdodCBiZSBzbWFsbGVyIHRoYW4gYW4gYWR1bHQgdG9vdGgsIGJ1dCBpdCdzIHN0aWxsIGZyaWdodGVuaW5nbHkgc2hhcnAgLSBhbmQgZGlzcGxheXMgc29tZSBhd2UtaW5zcGlyaW5nIGNhdml0aWVzLCB3aGljaCB5b3UgbWlnaHQgZXhwZWN0IGZyb20gYSBjcmVhdHVyZSBtYWRlIG91dCBvZiBzd2VldHMuPC9xPiIsDQogICAgICA5OTksDQogICAgICBbMzAsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGRyYWdvbkRyb3BVcGdyYWRlQ29zdDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRyYWdvbiB0ZWRkeSBiZWFyIiwNCiAgICAgIGxvYygiUmFuZG9tIGRyb3BzIGFyZSA8Yj4lMSUgbW9yZSBjb21tb248L2I+LiIsIDMpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJDb3N0IHNjYWxlcyB3aXRoIENwUywgYnV0ICUxIHRpbWVzIGNoZWFwZXIgd2l0aCBhIGZ1bGx5LXRyYWluZWQgZHJhZ29uLiIsDQogICAgICAgICAgMTANCiAgICAgICAgKSArDQogICAgICAgICI8cT5Zb3VyIGRyYWdvbiB1c2VkIHRvIHNsZWVwIHdpdGggdGhpcywgYnV0IGl0J3MgeW91cnMgbm93Ljxicj5DcmFmdGVkIGluIHRoZSBsaWtlbGluZXNzIG9mIGEgZmVhcnNvbWUgYmVhc3QuIFN0dWZmZWQgd2l0aCBtYWdpY2FsIGhlcmJzIHBpY2tlZCBsb25nIGFnbyBieSBhIHdhbmRlcmluZyB3aXphcmQuIFdvdmVuIGZyb20gZWx2ZW4geWFybiBhbmQgYSBwb2x5ZXN0ZXIgYmxlbmQuPC9xPiIsDQogICAgICA5OTksDQogICAgICBbMzEsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGRyYWdvbkRyb3BVcGdyYWRlQ29zdDsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHcmFub2xhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldhaXQhIFRoZXNlIGFyZSBqdXN0IG9hdG1lYWwgY29va2llcyBtaXhlZCB3aXRoIHJhaXNpbiBjb29raWVzISBXaGF0IG5leHQsIGhhbGYtZGFyayBjaG9jb2xhdGUgaGFsZi13aGl0ZSBjaG9jb2xhdGUgY29va2llcz8iLA0KICAgICAgaWNvbjogWzI4LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyOCksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSaWNvdHRhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkxpZ2h0IGFuZCBjYWtlLWxpa2UuIE9mdGVuIGZsYXZvcmVkIHdpdGggbGVtb24gb3IgYWxtb25kIGV4dHJhY3QuIFNwcmlua2xlcyBvcHRpb25hbC4gQWxsZWdlZGx5IEl0YWxpYW4uIEludmVzdGlnYXRpb24gcGVuZGluZy4iLA0KICAgICAgaWNvbjogWzI5LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyOSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSb3plIGtvZWtlbiIsDQogICAgICBkZXNjOiAiVGhlIGljaW5nIG9uIHRoZXNlIER1dGNoIGNvb2tpZXMgaXMgdHJhZGl0aW9uYWxseSBwaW5rLCBidXQgZGlmZmVyZW50IGNvbG9ycyBtYXkgYmUgdXNlZCBmb3Igc3BlY2lhbCBvY2Nhc2lvbnMgLSBzdWNoIGFzIHBpbmsgdG8gY2VsZWJyYXRlIEJyZWFzdCBDYW5jZXIgQXdhcmVuZXNzIE1vbnRoLCBvciBmb3IgSW50ZXJuYXRpb25hbCBGbGFtaW5nbyBEYXksIHBpbmsuIiwNCiAgICAgIGljb246IFszMCwgMzJdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGVhbnV0IGJ1dHRlciBjdXAgY29va2llcyIsDQogICAgICBkZXNjOiAiV2hhdCBtb3JlIHBvaWduYW50IGV4YW1wbGUgb2YgbW9kZXJuIHNvY2lldGFsIHN0cnVnZ2xlcyB0aGFuIHRoZSBicmF6ZW4gcmVjbGFpbWluZyBvZiBhIGNvcnBvcmF0ZSBwcm9kdWN0IGJ5IGludGVncmF0aW5nIGl0IGluIHRoZSB2YXN0bHkgbW9yZSBhdXRoZW50aWMgc2hlbGwgb2YgYSBob21lbWFkZSB1bmRlcnRha2luZz8gQW55d2F5IHRoaXMgaXMgYSBwZWFudXQgYnV0dGVyIGN1cCwgYmFrZWQgaW50byBhIGNvb2tpZS4gSXQncyBwcmV0dHkgZ29vZCEiLA0KICAgICAgaWNvbjogWzMxLCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgzMSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTZXNhbWUgY29va2llcyIsDQogICAgICBkZXNjOiAiTG9vayBhdCBhbGwgdGhlIGxpdHRsZSBzZWVkcyBvbiB0aGVzZSEgSXQncyBsaWtlIHNvbWVvbmUgZHJvcHBlZCB0aGVtIG9uIHRoZSBzdHJlZXQgb3Igc29tZXRoaW5nISBBIHZlcnkgd2VsY29taW5nIGFuZCBlZHVjYXRpb25hbCBzdHJlZXQhIiwNCiAgICAgIGljb246IFsyMiwgMzNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzIpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiVGFpeWFraSIsDQogICAgICBkZXNjOiAiQSBwYXN0cnkgZmlzaCBmaWxsZWQgd2l0aCByZWQgYmVhbiBwYXN0ZSwgZG9vbWVkIHRvIGxpdmUgYW4gZXhpc3RlbmNlIG9mIGNvbnN0YW50IGFuZCBleGNydWNpYXRpbmcgcGFpbiBhcyBpdHMgYXF1YXRpYyBlbnZpcm9ubWVudCBzbG93bHkgZGlzc29sdmVzIGl0cyBzb2Z0IGRvdWdoeSBib2R5Ljxicj5BbHNvIGNvbWVzIGluIGNob2NvbGF0ZSBmbGF2b3IhIiwNCiAgICAgIGljb246IFsyMywgMzNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzMpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiVmFuaWxsZWtpcGZlcmwiLA0KICAgICAgZGVzYzogIk51dC1iYXNlZCBjb29raWVzIGZyb20gQ2VudHJhbCBFdXJvcGUsIGNvYXRlZCBpbiBwb3dkZXJlZCB2YW5pbGxhIHN1Z2FyLiBSZWd1bGFyIGtpcGZlcmwsIGNyZXNjZW50LXNoYXBlZCBicmVhZCByb2xscyBmcm9tIHRoZSBzYW1lIHJlZ2lvbiwgYXJlIG11Y2ggbGVzcyBleGNpdGluZy4iLA0KICAgICAgaWNvbjogWzI0LCAzM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgzNCksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ29zbWljIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyA1NTAgb2YgZXZlcnl0aGluZy48YnI+VGhyb3VnaCBzb21lIHN0cmFuZ2UgdHJpY2sgb2YgbWFnaWMgb3IgdGVjaG5vbG9neSwgbG9va2luZyBhdCB0aGlzIGNvb2tpZSBpcyBsaWtlIHBlZXJpbmcgaW50byBhIGRlZXAgb2NlYW4gb2YgYW5jaWVudCBzdGFycy4gVGhlIG9yaWdpbnMgb2YgdGhpcyBiaXNjdWl0IGFyZSB1bmtub3duOyBpdHMgbWFudWZhY3R1cmUsIGFzIGZhciBhcyB5b3VyIGJlc3QgaW52ZXN0aWdhdG9ycyBjYW4gdGVsbCwgbGVmdCBubyBwYXBlciB0cmFpbC4gRnJvbSBhIGNlcnRhaW4gYW5nbGUsIGlmIHlvdSBzcXVpbnQgaGFyZCBlbm91Z2gsIHlvdSdsbCBub3RpY2UgdGhhdCBhIG51bWJlciBvZiBzdGFycyBuZWFyIHRoZSBjZW50ZXIgYXJlIGFycmFuZ2VkIHRvIHJlc2VtYmxlIHRoZSBvdXRsaW5lIG9mIHlvdXIgb3duIGZhY2UuIiwNCiAgICAgIGljb246IFsyNywgMzJdLA0KICAgICAgcG93ZXI6IDEwLA0KICAgICAgcHJpY2U6DQogICAgICAgIDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIGJ1dHRlckJpc2N1aXRNdWx0LA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJOb25pbGxpb24gZmluZ2VycyIsDQogICAgICBnZXRTdHJUaG91c2FuZEZpbmdlcnNHYWluKDIwKSArDQogICAgICAgICI8cT5Pbmx5IGZvciB0aGUgZnJlYWtpZXN0IGhhbmRzaGFrZXMuPC9xPiIsDQogICAgICAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFsxMiwgMzFdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxMywgMCk7DQogICAgb3JkZXIgPSAxNTA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJNaXJhY3VsaXRlIG1vdXNlIiwNCiAgICAgIGdldFN0ckNsaWNraW5nR2FpbnMoMSkgKw0KICAgICAgICAiPHE+Q29tcG9zZWQgb2YgYSBtYXRlcmlhbCB0aGF0IG5laXRoZXIgc2NpZW5jZSBub3IgcGhpbG9zb3BoeSBhcmUgZXF1aXBwZWQgdG8gY29uY2VwdHVhbGl6ZS4gQW5kIGJveSwgZG9lcyBpdCBldmVyIGNsaWNrLjwvcT4iLA0KICAgICAgNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMTEsIDMxXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMTMsIDExKTsNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2VuZXJhdGlvbiBkZWdlbmVyYXRpb24iLA0KICAgICAgIjxxPkdlbmV0aWMgdGVzdGluZyBzaG93cyB0aGF0IG1vc3Qgb2YgeW91ciBncmFuZG1hcyBhcmUgaW5mZWN0ZWQgd2l0aCBhIHN0cmFuZ2UgZGVnZW5lcmF0aXZlIGRpc2Vhc2UgdGhhdCBvbmx5IHNlZW1zIHRvIGZ1cnRoZXIgdGhlaXIgcG93ZXJzOyB0aGUgbW9yZSB0aW1lIHBhc3NlcywgdGhlIG9sZGVyIHRoZXkgZ2V0LiBUaGlzIHNob3VsZCBjb25jZXJuIHlvdS48L3E+IiwNCiAgICAgICJHcmFuZG1hIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDMwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2xvYmFsIHNlZWQgdmF1bHQiLA0KICAgICAgIjxxPkFuIGVub3Jtb3VzIGdlbmV0aWMgcmVwb3NpdG9yeSB0aGF0IGNvdWxkIG91dGxpdmUgYW4gYXBvY2FseXBzZS4gR3VhcmFudGVlcyB0aGUgc3Vydml2YWwgb2YgeW91ciBlbXBpcmUsIG9yIGF0IHRoZSB2ZXJ5IGxlYXN0IGl0cyBhZ3JpY3VsdHVyYWwgY29tcG9uZW50cywgc2hvdWxkIGNpdmlsaXphdGlvbiBmYWxsLiBXaGljaCBzaG91bGQgYmUgYW55IGRheSBub3cuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkFpciBtaW5pbmciLA0KICAgICAgIjxxPllvdSd2ZSBkdWcgeW91ciBkcmlsbHMgdGhyb3VnaCBqdXN0IGFib3V0IGV2ZXJ5IHNvbGlkIHN1cmZhY2UgeW91IGNvdWxkIGZpbmQuIEJ1dCBkaWQgeW91IGtub3cgcmVjZW50IGFkdmFuY2VzIGhhdmUgcmV2ZWFsZWQgdW50b2xkIHJpY2hlcyBoaWRpbmcgd2l0aGluIG5vbi1zb2xpZCBzdXJmYWNlcyB0b28/PC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSA1MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJlaGF2aW9yYWwgcmVmcmFtaW5nIiwNCiAgICAgICI8cT5UaHJvdWdoIGNhcmVmdWwgc29jaWFsIGVuZ2luZWVyaW5nIHlvdSd2ZSBjb252aW5jZWQgeW91ciB3b3JrZXJzIHRoYXQgXCJ1bmlvblwiIGlzIGEgc2x1ciB0aGF0IG9ubHkgdGhlIG1vc3QgdmlsZSBhbmQgcmVwdWduYW50IGZpbHRoIGFtb25nIHVzIHdvdWxkIGV2ZXIgZGFyZSB1dHRlciEgU29tZXRpbWVzIHByb2dyZXNzIGlzbid0IGluIHRoZSBiaWcgbWFjaGluZXMsIGl0J3MgaW4gdGhlIGxpdHRsZSBsaWVzITwvcT4iLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgMTINCiAgICApOw0KICAgIG9yZGVyID0gNTI1Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbHRydWlzdGljIGxvb3AiLA0KICAgICAgIjxxPllvdSBjb250cm9sIHNvIG1hbnkgYnJhbmNoZXMgb2YgdGhlIGdsb2JhbCBlY29ub215IGFuZCBsZWdpc2xhdGl2ZSBib2RpZXMgdGhhdCwgdGhyb3VnaCBhIHBhcnRpY3VsYXJseSBjcmVhdGl2ZSBsb29waG9sZSwgZG9uYXRpbmcgbW9uZXkgKHRvIHlvdXJzZWxmKSBncmFudHMgeW91IGV2ZW4gbW9yZSBjYXNoIGluIHRheCBkZWR1Y3Rpb25zIHRoYW4geW91IHN0YXJ0ZWQgd2l0aCE8L3E+IiwNCiAgICAgICJCYW5rIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDU1MDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQSBub3ZlbCBpZGVhIiwNCiAgICAgICI8cT5Zb3UgZG9uJ3QgZ2V0IHJpY2ggc3RhcnRpbmcgYSByZWxpZ2lvbi4gSWYgeW91IHdhbnQgdG8gZ2V0IHJpY2gsIHlvdSB3cml0ZSBzY2llbmNlIGZpY3Rpb24uPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3BlbGxpbmcgYmVlcyIsDQogICAgICAiPHE+WW91J3ZlIHVubGVhc2hlZCBhIHN3YXJtIG9mIG1hZ2ljYWxseS1lbmhhbmNlZCBiZWVzIHVwb24gbWFua2luZCEgVGhlaXIgc3Rpbmdpbmcgc3BlbGxzIG1heSBiZSB0aGUgYmFuZSBvZiBhbGwgbGl2aW5nIHRoaW5ncyBidXQgeW91J3JlIGNlcnRhaW4geW91IGNhbiBwdXQgdGhlaXIgZGVsaWNpb3VzLCBwdXJwbGUsIGZpenp5IGhvbmV5IHRvIGdvb2QgdXNlITwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSA2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRvcm9pZCB1bml2ZXJzZSIsDQogICAgICAiPHE+SWYgeW91IHRoaW5rIG9mIHRoZSB1bml2ZXJzZSBhcyBhbiBudGgtZGltZW5zaW9uYWwgdG9ydXMgdGhhdCB3cmFwcyBiYWNrIG9uIGl0c2VsZiBpbiBldmVyeSBkaXJlY3Rpb24sIHlvdSBjYW4gc2F2ZSBhIGZvcnR1bmUgb24gcm9ja2V0IGZ1ZWwhIE9mIGNvdXJzZSB0aGUgdW5pdmVyc2UgaXNuJ3QgYWN0dWFsbHkgc2hhcGVkIGxpa2UgdGhhdCwgYnV0IHlvdSd2ZSBuZXZlciBsZXQgZGV0YWlscyBzdGFuZCBpbiB5b3VyIHdheS48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSA3MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkhlcm1ldGljIHJlY29uY2lsaWF0aW9uIiwNCiAgICAgICI8cT5JdCdzIHRpbWUgZm9yIG1vZGVybiBzY2llbmNlIGFuZCB0aGUgbXlzdGljYWwgZG9tYWlucyBvZiB0aGUgb2NjdWx0IHRvIHdvcmsgdG9nZXRoZXIgYXQgbGFzdC4gV2hhdCBkbyBncmF2aXRvbnMgdHJhbnNtdXRlIGludG8/IFdoYXQgaWYgYWxrYWhlc3QgaXMgcEgtbmV1dHJhbD8gU2hvdWxkIGEgaG9tdW5jdWx1cyBoYXZlIHRoZSByaWdodCB0byB2b3RlPyBBbmQgb3RoZXIgZXhjaXRpbmcgcXVlc3Rpb25zIGNvbWluZyB0byB5b3Ugc29vbiwgd2hldGhlciB5b3UgbGlrZSBpdCBvciBub3QuPC9xPiIsDQogICAgICAiQWxjaGVteSBsYWIiLA0KICAgICAgMTINCiAgICApOw0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJIaXMgYWR2ZW50IiwNCiAgICAgICI8cT5IZSBjb21lcyEgSGUgY29tZXMgYXQgbGFzdCEgSnVzdCBsaWtlIHRoZSBwcm9waGVjaWVzIGZvcmV0b2xkISBBbmQgYXMgSGUgc3RlcHMgb3V0IG9mIHRoZSBwb3J0YWwsIHlvdXIgZW5naW5lZXJzIGJlZ2luIHNsaWNpbmcgSGltIGludG8gY29udmVuaWVudCBjaHVua3MgYmVmb3JlIHRyYW5zcG9ydGluZyBIaXMgd3JpdGhpbmcgY29zbWljIGZsZXNoIHRvIHlvdXIgZmFjdG9yaWVzLCB3aGVyZSBIZSB3aWxsIGJlIHByb2Nlc3NlZCBhbmQgY29udmVydGVkIGludG8gYSBuZXcgYW5kIGV4Y2l0aW5nIGNvb2tpZSBmbGF2b3IsIGF2YWlsYWJsZSBpbiBzdG9yZXMgdG9tb3Jyb3cuPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3BsaXQgc2Vjb25kcyIsDQogICAgICAiPHE+VGltZSBpcyBpbmZpbml0ZSwgeWVzLi4uIEJ1dCB3aGF0IGlmLCBuZXN0bGVkIHdpdGhpbiBlYWNoIHNlY29uZCwgd2VyZSBldmVuIG1vcmUgaW5maW5pdGllcz8gRXZlcnkgbW9tZW50IGFuIGV0ZXJuaXR5ISBUaGluayBvZiBob3cgbWFueSBzY2hlZHVsaW5nIHRyb3VibGVzIHRoaXMgc29sdmVzITwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGbGF2b3IgaXRzZWxmIiwNCiAgICAgICI8cT5EZWVwIHVuZGVyIHRoZSBlYXJ0aCwgaW4gdGhlIG1vc3Qgc3RlcmlsZSBsYWJvcmF0b3J5LCBpbiB0aGUgbW9zdCB2YXN0IGFuZCBleHBlbnNpdmUgcGFydGljbGUgYWNjZWxlcmF0b3IgZXZlciBkZXZpc2VkLCB5b3VyIHNjaWVudGlzdHMgaGF2ZSBzeW50aGVzaXplZCAtZm9yIGEgZnJhY3Rpb24gb2YgYSBzZWNvbmQtIHRoZSBwaHlzaWNhbCBtYW5pZmVzdGF0aW9uIG9mIHB1cmUgZmxhdm9yLiBIaWdobHkgdW5zdGFibGUsIGFuZCBnb25lIGluIGEgcHVmZiBvZiByYWRpb2FjdGl2ZSBlbmVyZ3ksIGl0IG5vbmV0aGVsZXNzIGxlZnQgeW91ciB0ZWFtIHNoaXZlcmluZyB3aXRoIGF3ZS4uLiBhbmQgaHVuZ2VyLjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkxpZ2h0IHNwZWVkIGxpbWl0IiwNCiAgICAgICI8cT5XaG9haCwgc2xvdyBkb3duLiBIYXJ2ZXN0aW5nIGxpZ2h0IGlzIHdlbGwgYW5kIGdvb2QgYnV0IGl0J2QgYmUgbXVjaCBlYXNpZXIgaWYgaXQgd2VyZW4ndCBzbyBkYW5nIGZhc3QhIFRoaXMgc2hvdWxkIHRoYW5rZnVsbHkgdGFrZSBjYXJlIG9mIHRoYXQuPC9xPiIsDQogICAgICAiUHJpc20iLA0KICAgICAgMTINCiAgICApOw0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQSB0b3VjaCBvZiBkZXRlcm1pbmlzbSIsDQogICAgICAiPHE+Qnkga25vd2luZyB0aGUgZXhhY3QgcG9zaXRpb24gYW5kIG1vdmVtZW50IG9mIGV2ZXJ5IHBhcnRpY2xlIGluIHRoZSB1bml2ZXJzZSwgeW91J3JlIGFibGUgdG8gcHJlZGljdCBldmVyeXRoaW5nIHRoYXQgY2FuIGV2ZXIgaGFwcGVuLCBsZWF2aW5nIG5vdGhpbmcgdG8gY2hhbmNlLiBUaGlzIHdhcyBhIGRvb3p5IHRvIHB1bGwgb2ZmIG1pbmQgeW91LCBidXQgaXQncyBoZWxwZWQgeW91IHdpbiA1MCBidWNrcyBhdCB0aGUgaG9yc2UgcmFjZXMgc28geW91IGNvdWxkIHNheSBpdCdzIGFscmVhZHkgcGF5aW5nIG9mZi48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGlzIHVwZ3JhZGUiLA0KICAgICAgIjxxPlRoaXMgdXBncmFkZSdzIGZsYXZvciB0ZXh0IGxpa2VzIHRvIHJlZmVyIHRvIGl0c2VsZiwgYXMgd2VsbCBhcyB0byB0aGUgZmFjdCB0aGF0IGl0IGxpa2VzIHRvIHJlZmVyIHRvIGl0c2VsZi4gWW91IHNob3VsZCByZWFsbHkgYnV5IHRoaXMgdXBncmFkZSBiZWZvcmUgaXQgc3RhcnRzIGRvaW5nIGFueXRoaW5nIG1vcmUgb2Jub3hpb3VzLjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIllvdXIgYmlnZ2VzdCBmYW5zIiwNCiAgICAgICI8cT5MZXQncyBmYWNlIGl0LCBiYWtpbmcgY29va2llcyBpc24ndCB0aGUgbW9zdCBvcHRpbWl6ZWQgdGhpbmcgdGhlcmUgaXMuIFNvIHlvdSd2ZSBwdXJjaGFzZWQgeW91ciBiaWdnZXN0IGZhbnMgeWV0IGFuZCBzdHVjayB0aGVtIG5leHQgdG8geW91ciBjb21wdXRlcnMgdG8ga2VlcCB0aGluZ3MgY2hpbGwgYW5kIGluIHdvcmtpbmcgb3JkZXIuIENvb2whPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDEyDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCYXR0ZW5iZXJnIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJJbnNwaXJlZCBieSBhIGNha2Ugb2YgdGhlIHNhbWUgbmFtZSwgaXRzZWxmIG5hbWVkIGFmdGVyIGEgcHJpbmNlIG9mIHRoZSBzYW1lIG5hbWUuIFlvdSBzdXBwb3NlIHlvdSBjb3VsZCBwbGF5IGEgcmVhbGx5LCByZWFsbHkgc2hvcnQgZ2FtZSBvZiBjaGVzcyBvbiB0aGVzZS4iLA0KICAgICAgaWNvbjogWzI4LCAzM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgzNSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSb3NldHRlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkludHJpY2F0ZSBmcmllZCBwYXN0cmllcyBmcm9tIE5vcnRoZXJuIEV1cm9wZSwgbWFkZSB1c2luZyBzcGVjaWFsaXplZCBpcm9ucyBhbmQgZGlwcGVkIGluIGljaW5nIHN1Z2FyLiBXaGlsZSB1c3VhbGx5IGVhdGVuIGFzIGEgZGVsaWNpb3VzIHRyZWF0LCB0aGVzZSBhcmUgb2Z0ZW4gYWxzbyB1c2VkIGFzIENocmlzdG1hcyB0cmVlIGRlY29yYXRpb25zLCBvciB3b3JuIGVsZWdhbnRseSBvbiBvbmUncyBsYXBlbCB0byBzeW1ib2xpemUgdGhlIG5haCBJJ20ganVzdCBtZXNzaW5nIHdpdGggeW91LiIsDQogICAgICBpY29uOiBbMjYsIDMzXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDM2KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdhbmdtYWtlcnMiLA0KICAgICAgZGVzYzogIlRoZSBsaXR0bGUgYml0IG9mIHJhc3BiZXJyeSBqYW0gYXQgaXRzIGNlbnRlciBpcyBjcnVjaWFsOyBhIHBsYWluIGJ1dHRlciBjb29raWUgd2l0aCBjaG9jb2xhdGUgdG9wcGluZyBkb2VzIG5vdCBhIGdhbmdtYWtlciBtYWtlLiIsDQogICAgICBpY29uOiBbMjcsIDMzXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDM3KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldlbHNoIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldlbHNoIGNvb2tpZXMsIGFsc28ga25vd24gYXMgV2Vsc2ggY2FrZXMsIGJha2VzdG9uZXMsIGdyaWRkbGUgY2FrZXMsIGdyaWRkbGUgc2NvbmVzLCBvciBwaWNzLCBvciBpbiBXZWxzaDogPGk+cGljYXUgYXIgeSBtYWVuLCBwaWNlIGJhY2gsIGNhY2VubmF1IGNyaTwvaT4gb3IgPGk+dGVpc2VubmF1IGdyYWRlbGw8L2k+LCBhcmUgcmljaCBjdXJyYW50LWZpbGxlZCBzY29uZS1saWtlIGJpc2N1aXRzIG9mIHVuY2VydGFpbiBvcmlnaW4uIiwNCiAgICAgIGljb246IFsyOSwgMzNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzgpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUmFzcGJlcnJ5IGNoZWVzZWNha2UgY29va2llcyIsDQogICAgICBkZXNjOiAiVGhlIGh1bWJsZSByYXNwYmVycnkgY2hlZXNlY2FrZSwgbm93IGluIGFzY2VuZGVkIGNvb2tpZSBmb3JtLiBSZXNlYXJjaGVycyBwb3NpdCB0aGF0IHJhc3BiZXJyeSBjaGVlc2VjYWtlIGNvb2tpZXMgYXJlIGV2aWRlbmNlIHRoYXQgdGhlIGZpbmFsIGZvcm0gb2YgZXZlcnkgYmFrZWQgZ29vZCwgdGhyb3VnaCBjb252ZXJnZW50IGV2b2x1dGlvbiwgYXBwcm9hY2hlcyB0aGF0IG9mIGEgY29va2llLCBpbiBhIHByb2Nlc3Mga25vd24gYXMgY29va2llbmlzYXRpb24uIiwNCiAgICAgIGljb246IFsyNSwgMzNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzkpLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAyNTU7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJBbHRlcm5hdGUgZ3JhbmRtYXMiLA0KICAgICAgIkEgZGlmZmVyZW50IGdyYW5kbWEgdG8gYmFrZSBzb21ldGhpbmcgZWxzZS4iLA0KICAgICAgIklkbGV2ZXJzZSINCiAgICApOw0KDQogICAgb3JkZXIgPSAxNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNYW5pZmVzdCBkZXN0aW55IiwNCiAgICAgICI8cT5XaGlsZSB0aGUgZXRoaWNzIG9mIHJhbnNhY2tpbmcgcGFyYWxsZWwgdW5pdmVyc2VzIGZvciB0aGVpciByaWNoZXMgbWF5IHNlZW0gcXVlc3Rpb25hYmxlIHRvIHNvbWUsIHlvdSd2ZSByZWFzb25lZCB0aGF0IGJyaW5naW5nIHRoZSBnb29kIHdvcmQgb2YgeW91ciBjb29raWUgZW1waXJlIHRvIHRoZSB1bndhc2hlZCBjb25maW5lcyBvZiBvdGhlciByZWFsaXRpZXMgaXMgeW91ciBtb3JhbCBkdXR5LCBuYXksIHlvdXIgcmlnaHRlb3VzIGltcGVyYXRpdmUsIGFuZCBtdXN0IGJlIHVuZGVydGFrZW4gYXMgc29vbiBhcyBwb3NzaWJsZSwgbGVzdCB0aGV5IGRvIGl0IHRvIHlvdSBmaXJzdCE8L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRoZSBtdWx0aXZlcnNlIGluIGEgbnV0c2hlbGwiLA0KICAgICAgJzxxPlRoZSBzdHJ1Y3R1cmUgb2YgdGhlIG1ldGFjb3Ntb3MgbWF5IHNlZW0gY29uZnVzaW5nIGFuZCBhdCB0aW1lcyBldmVuIGNvbnRyYWRpY3RvcnksIGJ1dCBoZXJlXCdzIHdoYXQgeW91XCd2ZSBnYXRoZXJlZCBzbyBmYXI6PGJyPjxicj48ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij4mYnVsbDsgZWFjaCByZWFsaXR5LCBvciAiaWRsZXZlcnNlIiwgZXhpc3RzIGluIHBhcmFsbGVsIHRvIGFsbCBvdGhlcnM8YnI+PGJyPiZidWxsOyBtb3N0IHJlYWxpdGllcyBzZWVtIHRvIGNvbnZlcmdlIHRvd2FyZHMgdGhlIHByb2R1Y3Rpb24gb2YgYSBzb2xlIHR5cGUgb2YgaXRlbSAob3VycyBldmlkZW50bHkgYmVpbmcsIHRoYW5rcyB0byB5b3UsIGNvb2tpZXMpPGJyPjxicj4mYnVsbDsgZWFjaCByZWFsaXR5IGlzIHJpZGRsZWQgd2l0aCBjaGFvdGljIHR1bm5lbHMgdG8gYSBudW1iZXIgb2Ygc3Vib3JkaW5hdGUgZGltZW5zaW9ucyAoc3VjaCBhcyB0aGUgc28tY2FsbGVkICJjb29raWV2ZXJzZSIpLCBtdWNoIGxpa2Ugc3dpc3MgY2hlZXNlPGJyPjxicj4mYnVsbDsgYWxsIHJlYWxpdGllcyBiYXRoZSBpbiBhbiBpbmZpbml0ZSBsaXF1aWQgb2YgcGVjdWxpYXIgcHJvcGVydGllcywgY29sbG9xdWlhbGx5IGtub3duIGFzICJtaWxrIjwvZGl2Pjxicj5GaW5hbGx5LCBlYWNoIHJlYWxpdHkgbWF5IGhhdmUgaXRzIG93biBpbnRlcnByZXRhdGlvbiBvZiB0aGUgY29uY2VwdCBvZiAicmVhbGl0eSIsIGZvciBhZGRlZCBmdW4uPC9xPicsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbGwtY29udmVyc2lvbiIsDQogICAgICAiPHE+SXQncyBxdWl0ZSBuaWNlIHRoYXQgeW91IGNhbiByZXdpcmUgdGhlIGxvZ2ljIG9mIGVhY2ggdW5pdmVyc2UgdG8gZ2VuZXJhdGUgY29va2llcyBpbnN0ZWFkLCBidXQgeW91IHN0aWxsIGVuZCB1cCB3aXRoIHBhcnNlYy1sb2FkcyBvZiB3aGF0ZXZlciB0aGV5IHdlcmUgcHJvZHVjaW5nIGJlZm9yZSAtIGJhdWJsZXMgeW91J3ZlIGxvbmcgbWFkZSBvYnNvbGV0ZTogY2FzaCBtb25leSwgZ2VtcywgY2hlZXNlYnVyZ2VycywgcHVwcGllcy4uLiBUaGF0J3Mgd2h5IHlvdSd2ZSBkZXNpZ25lZCB0aGUgdW5pdmVyc2FsIGNvbnZlcnRlciwgY29tcGF0aWJsZSB3aXRoIGFueSBzdWJzdGFuY2UgYW5kIGNhcGFibGUgb2YgdHVybmluZyB0aG9zZSB1c2VsZXNzIHNwb2lscyBvZiBjb25xdWVzdCBpbnRvIHRoZSByZWFzc3VyaW5nIGNydW1ibHkgcnVzdGxlIG9mIGV2ZW4gbW9yZSBjb29raWVzLjwvcT4iLA0KICAgICAgIklkbGV2ZXJzZSIsDQogICAgICAzDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTXVsdGl2ZXJzZSBhZ2VudHMiLA0KICAgICAgIjxxPllvdSBjYW4gc2VuZCB1bmRlcmNvdmVyIHNwaWVzIHRvIGluZmlsdHJhdGUgZWFjaCB1bml2ZXJzZSBhbmQgaGF2ZSB0aGVtIHNpZ25hbCB5b3Ugd2hldGhlciBpdCdzIHdvcnRoIG92ZXJ0YWtpbmcuIE9uY2UgdGhlIGFzc2ltaWxhdGlvbiBwcm9jZXNzIHN0YXJ0ZWQsIHRoZXkgd2lsbCBhbHNvIGhlbHAgcGFjaWZ5IHRoZSBsb2NhbCBwb3B1bGF0aW9ucywgaGF2aW5nIGVzdGFibGlzaGVkIHRydXN0IHRocm91Z2ggdGhlIHVzZSBvZiB3YWNreSwgYnV0IHNlYW1sZXNzLCBkaXNndWlzZXMuPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDQNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFc2NhcGUgcGxhbiIsDQogICAgICAiPHE+WW91J3ZlIHNldCBhbiBpZGxldmVyc2UgYXNpZGUgYW5kIHRlcnJhZm9ybWVkIGl0IHRvIGNsb3NlbHkgcmVzZW1ibGUgdGhpcyBvbmUgaW4gY2FzZSBzb21ldGhpbmcgZ29lcyBob3JyaWJseSB3cm9uZyBpbiBoZXJlLiBPZiBjb3Vyc2UsIHRoZSBkZW5pemVucyBvZiB0aGF0IGlkbGV2ZXJzZSBhbHNvIGhhdmUgdGhlaXIgb3duIGVzY2FwZSBpZGxldmVyc2UgdG8gYWJzY29uZCB0byBpbiB0aGUgZXZlbnR1YWxpdHkgb2YgeW91ciBhcnJpdmFsLCBpdHNlbGYgbGlrZWx5IGhhdmluZyBpdHMgb3duIGNvbnRpbmdlbmN5IGlkbGV2ZXJzZSwgYW5kIHNvIG9uLjwvcT4iLA0KICAgICAgIklkbGV2ZXJzZSIsDQogICAgICA1DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2FtZSBkZXNpZ24iLA0KICAgICAgIjxxPkVhY2ggaWRsZXZlcnNlIGZ1bmN0aW9ucyBhY2NvcmRpbmcgdG8gc29tZSBmb3JtIG9mIHRyYW5zY2VuZGVudGFsIHByb2dyYW1taW5nLCB0aGF0IG11Y2ggaXMgYSBnaXZlbi4gQnV0IHRoZXkgYWxzbyBzZWVtIHRvIGJlIGdvdmVybmVkIGJ5IG11Y2ggbW9yZSBzdWJ0bGUgcnVsZXMsIHRoZSBsb2dpYyBvZiB3aGljaCwgd2hlbiBoYXJuZXNzZWQsIG1heSBnaXZlIHlvdSB1bnBhcmFsbGVsZWQgZG9taW5pb24gb3ZlciB0aGUgbXVsdGl2ZXJzZS4gUmV3cml0ZSB0aGUgcnVsZXMhIEEgZ2FtZSBkZXNpZ25lciBpcyB5b3UhPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDYNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTYW5kYm94IHVuaXZlcnNlcyIsDQogICAgICAiPHE+SXQgZG9lc24ndCBzZWVtIGxpa2UgeW91J2xsIHJ1biBvdXQgb2YgZXh0cmEgdW5pdmVyc2VzIGFueXRpbWUgc29vbiBzbyB3aHkgbm90IHJlcHVycG9zZSBzb21lIG9mIHRoZW0gYXMgY29uc2VxdWVuY2UtZnJlZSB0ZXN0aW5nIGdyb3VuZHMgZm9yIGFsbCB5b3VyIG1vcmUgZXhpc3RlbnRpYWxseSB0aHJlYXRlbmluZyBtYXJrZXQgcmVzZWFyY2g/ICguLi5jb25zZXF1ZW5jZS1mcmVlIGZvciB5b3UsIGFueXdheS4pPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDcNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNdWx0aXZlcnNlIHdhcnMiLA0KICAgICAgIjxxPkhtbSwgbG9va3MgbGlrZSBzb21lIG90aGVyIHVuaXZlcnNlcyB3aXNlZCB1cCB0byB5b3VyIHBsdW5kZXJpbmcuIFRoYW5rZnVsbHksIHRoYXQncyBub3RoaW5nIHlvdXIgZXh0cmEgYmVlZmVkLXVwIG1ldGFjb3NtaWMgbWlsaXRhcnkgYnVkZ2V0IGNhbid0IGhhbmRsZSE8L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgOA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk1vYmlsZSBwb3J0cyIsDQogICAgICAiPHE+QWNjZXNzaW5nIGVhY2ggb3V0ZXIgdW5pdmVyc2UgaXMgYSBiaXQgb2YgYSBoYXNzbGUsIHJlcXVpcmluZyB0aGUgb25jZS1pbi1hLWJsdWUtbW9vbiBhbGlnbm1lbnQgb2YgbmF0dXJhbCBjb3NtaWMgcG9ydHMgdG8gdHJhbnNpdCBmcm9tIHVuaXZlcnNlIHRvIHVuaXZlcnNlLiBZb3UndmUgZmluYWxseSBwZXJmZWN0ZWQgdGhlIG1ldGhvZCBvZiBjb25zdHJ1Y3RpbmcgeW91ciBvd24gc2VsZi1wcm9wZWxsZWQgcG9ydHMsIHdoaWNoIGNhbiB0cmF2ZWwgbmVhci1pbnN0YW50YW5lb3VzbHkgYWxvbmcgdW5pdmVyc2FsIHBlcmltZXRlcnMgdG8gcGVybWl0IGhlYWRhY2hlLWZyZWUgbXVsdGl2ZXJzZSBjb25uZWN0aW9ucy4gVG9vayB5b3UgbG9uZyBlbm91Z2guPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDkNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFbmNhcHN1bGF0ZWQgcmVhbGl0aWVzIiwNCiAgICAgICI8cT5VbnRvbGQgZmVhdHMgb2Ygc2NpZW5jZSB3ZW50IGludG8gdGhlIHJlZHVjdGlvbiBvZiBpbmZpbml0ZSB1bml2ZXJzZXMgaW50byB0aGVzZSBzbWFsbCwgZ2xpbW1lcmluZywgZWFzeS10by1zdG9yZSBsaXR0bGUgc3BoZXJlcy4gRXhlcmNpc2UgaW5maW5pdGUgY2F1dGlvbiB3aGVuIGhhbmRsaW5nIHRoZXNlLCBmb3IgZWFjaCBvZiB0aGVtLCBjb250YWluaW5nIGVuZGxlc3MgZ2FsYXhpZXMgYW5kIHN1cHBvcnRpbmcgZW5kbGVzcyBsaWZlLCBpcyBtb3JlIHByZWNpb3VzIHRoYW4geW91IGNhbiBldmVyIGZhdGhvbS4gVGhleSd2ZSBhbHNvIHByb3ZlbiB0byBiZSBxdWl0ZSBhIHNtYXNoIGhpdCBpbiB5b3VyIHdhcmVob3VzZXMgb24gYm93bGluZyBuaWdodC48L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMTANCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFeHRyaW5zaWMgY2xpY2tpbmciLA0KICAgICAgIjxxPklmIHlvdSBwb2tlIGFuIGlkbGV2ZXJzZSwgaXQgc2VlbXMgbGlrZSBpdCBnZXRzIHdvcmsgZG9uZSBmYXN0ZXIuIEl0J3MgYWxzbyBxdWl0ZSBmdW4gaGVhcmluZyBhIHRyaWxsaW9uIHRlcnJpZmllZCB2b2ljZXMgc2NyZWFtaW5nIGluIHVuaXNvbi48L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMTENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJVbml2ZXJzYWwgaWRsaW5nIiwNCiAgICAgICI8cT5UaGUgbmF0dXJlIG9mIGlkbGV2ZXJzZXMgaXMgZm91bmQgaW4gd2FpdGluZy4gVGhlIG1vcmUgeW91IHdhaXQgb24gYW4gaWRsZXZlcnNlLCB0aGUgbW9yZSBleHBvbmVudGlhbGx5IHBvdGVudCBpdCBiZWNvbWVzIC0gd2hpY2ggc2F2ZXMgeW91IGEgd2hvbGUgbG90IG9mIGhhcmQgd29yay4gSW4gYSB0cnVlIGFjdCBvZiB6ZW4sIHlvdSd2ZSB0YWtlbiB0byBiaWRpbmcgeW91ciB0aW1lIHdoZW4gY29sbGVjdGluZyBuZXcgdW5pdmVyc2VzLCBsZXR0aW5nIHRoZW0gcmlwZW4gbGlrZSBhIGZpbmUgd2luZS48L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMTINCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiUGVyZm9yYXRlZCBtaWxsZS1mZXVpbGxlIGNvc21vcyIsDQogICAgICAiPHE+SW1hZ2luZSwgaWYgeW91IHdpbGwsIGxheWVycyB1cG9uIGxheWVycyB1cG9uIGxheWVycy4gTm93IHBpY3R1cmUgYmlsbGlvbnMgb2Ygd29ybXMgY2hld2luZyB0aGVpciB3YXkgdGhyb3VnaCBpdCBhbGwuIFRoaXMgcm91Z2hseSwgYnV0IG5vdCBxdWl0ZSwgYXBwcm94aW1hdGVzIHRoZSBnZW9tZXRyeSBvZiB0aGUgbW9zdCBiYXNhbCBzdHJhdHVtIG9mIG91ciBuYXR1cmFsIHdvcmxkLjwvcT4iLA0KICAgICAgIklkbGV2ZXJzZSIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiSW5mcmF2ZXJzZXMgYW5kIHN1cGVydmVyc2VzIiwNCiAgICAgICI8cT5Vbml2ZXJzZXMgd2l0aGluIHVuaXZlcnNlcz8gSG93IHN1YnZlcnNpdmUhPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTkwMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAxOCIsDQogICAgICAiPHE+VGhlcmUncyBwbGVudHkgb2YgZXZlcnlvbmUsIGJ1dCBvbmx5IG9uZSBvZiB5b3UuPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQnV0dGVyIGJpc2N1aXQgKHdpdGggYnV0dGVyKSIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyA2MDAgb2YgZXZlcnl0aGluZy48YnI+VGhpcyBpcyBhIHBsYWluIGJ1dHRlciBiaXNjdWl0LiBJdCdzIGdvdCBzb21lIGJ1dHRlciBvbiBpdC4gVGhlIGJ1dHRlciBkb2Vzbid0IGxvb2sgbGlrZSBhbnl0aGluZyBpbiBwYXJ0aWN1bGFyLiIsDQogICAgICBpY29uOiBbMzAsIDMzXSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOg0KICAgICAgICA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiBidXR0ZXJCaXNjdWl0TXVsdCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJWaXNpdHMiLA0KICAgICAgIjxxPkluIGFuIGV4dGVuc2l2ZSBkb3VibGUtYmxpbmQgc3R1ZHkgKHNhbXBsZSBzaXplOiAxMiBtaWxsaW9uKSwgeW91ciByZXNlYXJjaGVycyBoYXZlIGZvdW5kIGV2aWRlbmNlIHRoYXQgZ3JhbmRtYXMgYXJlIHVwIHRvIHR3aWNlIGFzIHByb2R1Y3RpdmUgaWYgeW91IGp1c3QgY29tZSBieSBhbmQgc2F5IGhpIG9uY2UgaW4gYSB3aGlsZS4gSXQncyBuaWNlIHRvIGNoZWNrIHVwIG9uIHlvdXIgZ3JhbnMhIChEbyBub3QgdW5kZXIgYW55IGNpcmN1bXN0YW5jZXMgaW5nZXN0IGFueSB0ZWEgb3IgdGVhLWxpa2Ugc3Vic3RhbmNlcyB0aGUgZ3JhbmRtYXMgbWF5IG9mZmVyIHlvdS4pPC9xPiIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlJldmVyc2UtdmVnYW5pc20iLA0KICAgICAgIjxxPlBsYW50cyBhcmVuJ3QgZm9yIGVhdGluZywgcGxhbnRzIGFyZSBmb3IgZXhwbG9pdGF0aXZlIGFncmljdWx0dXJlIGFuZCBhc3Ryb25vbWljYWwgcHJvZml0IG1hcmdpbnMhPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNhcmFtZWwgYWxsb3lzIiwNCiAgICAgICI8cT5Zb3VyIGdlb2xvZ2lzdHMgaGF2ZSBpc29sYXRlZCBhIGZhbWlseSBvZiBvbmNlLW92ZXJsb29rZWQgc3VnYXJ5IG9yZXMgdGhhdCwgd2hlbiBjb21iaW5lZCwgbWF5IGJlIHR1cm5lZCBpbnRvIGV2ZW4gbW9yZSBjb29raWUgaW5ncmVkaWVudHMuIFlvdXIgbWlsbGlvbnMgb2YgbWlsZXMgb2YgcHJldmlvdXNseSB1c2VsZXNzIHR1bm5lbHMgcHJvYmFibHkgaG91c2UgaW5zYW5lIGFtb3VudHMgb2YgdGhlIHN0dWZmITwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgMTMNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGUgaW5maW5pdHkgZW5naW5lIiwNCiAgICAgICI8cT5JbiB0aGlzIGhvdXNlLCBJIGd1ZXNzIHdlIGRvbid0IGNhcmUgbXVjaCBmb3IgdGhlIGxhd3Mgb2YgdGhlcm1vZHluYW1pY3MuPC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRpbWluaXNoaW5nIHRheCByZXR1cm5zIiwNCiAgICAgICI8cT5Xb3csIHRoZXkncmUgdGlueSEgV2lzaCB5b3UnZCB0aG91Z2h0IG9mIHRoYXQgc29vbmVyITwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgMTMNCiAgICApOw0KICAgIG9yZGVyID0gNTUwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBcHBhcml0aW9ucyIsDQogICAgICAiPHE+WW91J3ZlIGJvb2tlZCBhIGRlYWwgd2l0aCB0aGUgaGlnaGVyLXVwcyB0aGF0IHNjaGVkdWxlcyBvbmUgd2Vla2x5IGVhcnRobHkgYXBwYXJpdGlvbiBieSBhIGRlaXR5LCBhbmdlbCwgYXNjZW5kZWQgcHJvcGhldCwgb3Igb3RoZXIgaG9seSBmaWd1cmUuIFRoaXMgc2hvdWxkIGJvb3N0IGludGVyZXN0IGluIGNvb2tpZSByZWxpZ2lvbiBhbW9uZyB5b3V0aHMgYXMgbG9uZyBhcyB5b3UgY2FuIHNlY3VyZSBhIGRlY2VudCB0aW1lIHNsb3QuPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDEzDQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2l6YXJkIGJhc2VtZW50cyIsDQogICAgICAiPHE+WW91J3ZlIHJlY2VpdmVkIGNvbnN0cnVjdGlvbiBwZXJtaXRzIGFsbG93aW5nIHlvdSB0byBidWlsZCBiYXNlbWVudHMgdW5kZXJuZWF0aCBlYWNoIHdpemFyZCB0b3dlci4gVGhpcyBwcm92aWRlcyBhIGhhbmR5IHN0b3JhZ2Ugc3BhY2UgZm9yIHByZWNpb3VzIHJlYWdlbnRzLCBmaXp6bGVkLW91dCBzb3VsIGdlbXMsIGFuZCB3ZWlyZCBvbGQgbWFnYXppbmVzLjwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlByaW1lIGRpcmVjdGl2ZSIsDQogICAgICAiPHE+QW4gaW50ZXJnYWxhY3RpYyBkZWxlZ2F0aW9uIG1hZGUgeW91IHBpbmt5LXN3ZWFyIG5vdCB0byBkaXJlY3RseSBpbnRlcmFjdCB3aXRoIGxlc3NlciBhbGllbiBjdWx0dXJlcy4gV2hpY2ggaXMgZmluZSwgYmVjYXVzZSBpdCdzIG11Y2ggZnVubmllciB0byByb2IgYSBwbGFuZXQgYmxpbmQgd2hlbiBpdHMgaW5oYWJpdGFudHMgaGF2ZSBubyBpZGVhIHdoYXQncyBnb2luZyBvbi48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA3MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNocm9tYXRpYyBjeWNsaW5nIiwNCiAgICAgICI8cT5BbGwgc3RhdGVzIG9mIG1hdHRlciBleGlzdCBpbiBhIGNvbnRpbnVvdXMgbG9vcC4gSGF2aW5nIGxlYXJuZWQgaG93IHRvIGN5Y2xlIHRocm91Z2ggdGhlbSwgYWxsIHlvdSBoYXZlIHRvIGRvIGlzIHRvIGZyZWV6ZSBtYXR0ZXIgcmlnaHQgb24gdGhlIHN0YXRlIHlvdSBuZWVkLiBGb3IgcmVmZXJlbmNlLCB0aGUgY29va2llIHN0YXRlIG9mIG1hdHRlciBpcyBzaXR1YXRlZCBhdCBwcmVjaXNlbHkgMTYzLjcxOSZkZWc7LCByaWdodCBiZXR3ZWVuIGxhbWVsbGFyIGdhcyBhbmQgbWV0YXBsYXNtYS48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA4MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRvbWVzdGljIHJpZnRzIiwNCiAgICAgICI8cT5Zb3UndmUgbWFuYWdlZCB0byBtYW51ZmFjdHVyZSBwb3J0YWxzIHRoYXQgYXJlIGNvbnZlbmllbnQgZW5vdWdoLCBhbmQgbGVnYWxseSBzYWZlIGVub3VnaCwgdGhhdCB5b3UgY2FuIGp1c3Qgc3RpY2sgdGhlbSBhZ2FpbnN0IHdhbGxzIGluc2lkZSBidWlsZGluZ3MgdG8gY29ubmVjdCByb29tcyB0b2dldGhlciBpbiB1bnVzdWFsIGNvbmZpZ3VyYXRpb25zLiBJbiBwcmFjdGljZSwgdGhpcyBtZWFucyB5b3VyIGVtcGxveWVlcyBnZXQgdG8gaGF2ZSBtdWNoIHNob3J0ZXIgYmF0aHJvb20gYnJlYWtzLjwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA5MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlBhdGllbmNlIGFib2xpc2hlZCIsDQogICAgICAiPHE+WW91IHdhaXQgZm9yIG5vIG9uZS48L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgMTMNCiAgICApOw0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRGVsaWNpb3VzIHB1bGwiLA0KICAgICAgIjxxPkluIGFkZGl0aW9uIHRvIHRoZSA0IGZ1bmRhbWVudGFsIGZvcmNlcyBvZiB0aGUgdW5pdmVyc2UgLWdyYXZpdHksIGVsZWN0cm9tYWduZXRpc20sIHdlYWsgYW5kIHN0cm9uZyBpbnRlcmFjdGlvbnMtIHlvdXIgc2NpZW50aXN0cyBoYXZlIGF0IGxvbmcgbGFzdCBjb25maXJtZWQgdGhlIGV4aXN0ZW5jZSBvZiBhIGZpZnRoIG9uZSwgbWVkaWF0ZWQgYnkgc3VnYXIgYm9zb25zOyBpdCBkaWN0YXRlcyB0aGF0IGFueSB0d28gbWFzc2VzIG9mIGluZ3JlZGllbnQtbGlrZSBtYXR0ZXIgd2lsbCwgZ2l2ZW4gZW5vdWdoIHRpbWUsIGV2ZW50dWFsbHkgbWVldCBlYWNoIG90aGVyIHRvIHByb2R1Y2UgYSB0aGlyZCwgZXZlbiB0YXN0aWVyIHN1YnN0YW5jZS4gWW91ciB0ZWFtIGVudGh1c2lhc3RpY2FsbHkgbmFtZXMgaXQgdGhlIGRlbGljaW91cyBwdWxsLjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDEzDQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk9jY2FtJ3MgbGFzZXIiLA0KICAgICAgIjxxPkludmVudGVkIGJ5IEZyYW5jaXNjYW4gZnJpYXIgV2lsbGlhbSBvZiBPY2NhbSBpbiAxPHNwYW4+PC9zcGFuPjMyNy4gQW4gaW1wb3NzaWJseSBjbGV2ZXIgdXNlIG9mIGxpZ2h0IHRoZW9yeSB3aXRoIGEgYmlsbGlvbiBwb3NzaWJsZSBhcHBsaWNhdGlvbnMsIHNvbWUgb2Ygd2hpY2ggZnJpZ2h0ZnVsbHkgZGVzdHJ1Y3RpdmUuIENvbmZpbmVkIHRvIGEgc2luZ2xlIGdvYXQtc2tpbiBwYXJjaG1lbnQgZm9yIGh1bmRyZWRzIG9mIHllYXJzIHVudGlsIHRoZSBwYXRlbnQgZXhwaXJlZCBhbmQgaGl0IHB1YmxpYyBkb21haW4sIGp1c3Qgbm93LjwvcT4iLA0KICAgICAgIlByaXNtIiwNCiAgICAgIDEzDQogICAgKTsNCiAgICBvcmRlciA9IDEyMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk9uIGEgc3RyZWFrIiwNCiAgICAgICI8cT5UYWtlIGEgbW9tZW50IHRvIGFwcHJlY2lhdGUgaG93IGZhciB5b3UndmUgY29tZS4gSG93IGx1Y2t5IHlvdSd2ZSBiZWVuIHNvIGZhci4gSXQgZG9lc24ndCB0YWtlIGEgZ2VuaXVzIHN0YXRpc3RpY2lhbiB0byBleHRyYXBvbGF0ZSBhIHRyZW5kIGZyb20gdGhpcy4gVGhlcmUncyBubyB3YXkgYW55dGhpbmcgYmFkIGNvdWxkIGhhcHBlbiB0byB5b3Ugbm93LiBSaWdodD88L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBIGJveCIsDQogICAgICAiPHE+V2hhdCdzIGluIHRoYXQgYm94PyBXaHksIGl0J3MgYSB0aW55IHJlcGxpY2Egb2YgeW91ciBvZmZpY2UhIEFuZCB0aGVyZSdzIGV2ZW4gYSBsaXR0bGUgeW91IGluIHRoZXJlISBBbmQgd2hhdCdzIG9uIHRoZSBsaXR0bGUgZGVzay4uLiBzYXkgLSB0aGF0J3MgYW4gZXZlbiB0aW5pZXIgYm94ISBBbmQgdGhlIGxpdHRsZSB5b3UgaXMgb3BlbmluZyBpdCwgcmV2ZWFsaW5nIGFuIGV2ZW4gdGluaWVyIG9mZmljZSEgQW5kIGluIHRoZSB0aW5pZXIgb2ZmaWNlIHRoZXJlJ3MtIEhtbS4gWW91IGNhbiB0aGluayBvZiBhIGNvdXBsZSB1c2VzIGZvciB0aGlzLjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDEzDQogICAgKTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkhhY2tlciBzaGFkZXMiLA0KICAgICAgIjxxPkknbSBpbi48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgMTMNCiAgICApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQnJlYWsgdGhlIGZpZnRoIHdhbGwiLA0KICAgICAgIjxxPkh1aCwgd2FzIHRoYXQgYWx3YXlzIHRoZXJlPyBXaGF0ZXZlciBpdCB3YXMsIGl0J3MgZ29uZSBub3cuIEFuZCB3aGF0IHdhcyBiZWhpbmQgaXMgeW91cnMgZm9yIHRoZSB0YWtpbmcuPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDEzDQogICAgKTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQ2F0IGxhZGllcyIsDQogICAgICBsb2MoIkVhY2gga2l0dGVuIHVwZ3JhZGUgYm9vc3RzICUxIENwUyBieSA8Yj4lMiU8L2I+LiIsIFsNCiAgICAgICAgbG9jKCJncmFuZG1hIiksDQogICAgICAgIDI5LA0KICAgICAgXSkgKyAiPHE+T2ggbm8uIE9oIG5vIG5vIG5vLiBPaGhoIHRoaXMgaXNuJ3QgcmlnaHQgYXQgYWxsLjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMCwNCiAgICAgIFszMiwgM10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiS2l0dGVuIGFuZ2VscyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiTWlsa2hlbHAmcmVnOyBsYWN0b3NlIGludG9sZXJhbmNlIHJlbGllZiB0YWJsZXRzIiwNCiAgICAgIGxvYygiRWFjaCByYW5rIG9mIG1pbGsgYm9vc3RzICUxIENwUyBieSA8Yj4lMiU8L2I+LiIsIFsNCiAgICAgICAgbG9jKCJncmFuZG1hIiksDQogICAgICAgIDUsDQogICAgICBdKSArICI8cT5BZ2VkIGxpa2UgbWlsay48L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMCwNCiAgICAgIFszMywgM10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiQ2F0IGxhZGllcyJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBdXJhIGdsb3ZlcyIsDQogICAgICBsb2MoDQogICAgICAgICJDdXJzb3IgbGV2ZWxzIGJvb3N0IGNsaWNrcyBieSA8Yj4lMSU8L2I+IGVhY2ggKHVwIHRvIGN1cnNvciBsZXZlbCAlMikuIiwNCiAgICAgICAgWzUsIDEwXQ0KICAgICAgKSArDQogICAgICAgICI8cT5Ucnkgbm90IHRvIGhpZ2gtZml2ZSBhbnlvbmUgd2VhcmluZyB0aGVzZS4gWW91IGRvbid0IHdhbnQgdGhhdCBtZXNzIG9uIHlvdXIgaGFuZHMuPC9xPiIsDQogICAgICA1NTU1NTU1NTUsDQogICAgICBbMzIsIDRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkhhbG8gZ2xvdmVzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdW1pbm91cyBnbG92ZXMiLA0KICAgICAgbG9jKCI8Yj4lMTwvYj4gYXJlIG5vdyBlZmZlY3RpdmUgdXAgdG8gY3Vyc29yIGxldmVsICUyLiIsIFsNCiAgICAgICAgZ2V0VXBncmFkZU5hbWUoIkF1cmEgZ2xvdmVzIiksDQogICAgICAgIDIwLA0KICAgICAgXSkgKw0KICAgICAgICAiPHE+VGhlc2UgaGVscCBwb3dlciB5b3VyIGNsaWNrcyB0byBhYnN1cmQgbGV2ZWxzLCBidXQgdGhleSdyZSBhbHNvIHF1aXRlIGhhbmR5IHdoZW4geW91IHdhbnQgdG8gbGlnaHQgdXAgdGhlIGRhcmtuZXNzIG9uIHlvdXIgd2F5IGJhY2sgZnJvbSBHbG92ZSBXb3JsZC48L3E+IiwNCiAgICAgIDU1NTU1NTU1NTU1LA0KICAgICAgWzMzLCA0XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJBdXJhIGdsb3ZlcyJdOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJva2tlbnBvb3RqZXMiLA0KICAgICAgZGVzYzogIkNvbnNpc3Qgb2YgMiBtZXJpbmd1ZSBoYWx2ZXMgam9pbmVkIGJ5IGJ1dHRlcmNyZWFtIGFuZCBkaXBwZWQgYm90aCB3YXlzIGluIGNob2NvbGF0ZS4gTmFtZWQgYWZ0ZXIgYSBnb2F0J3MgZm9vdCB0aGF0IHByb2JhYmx5IHN0ZXBwZWQgaW4gc29tZXRoaW5nIHR3aWNlLiIsDQogICAgICBpY29uOiBbMzIsIDhdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRmF0IHJhc2NhbHMiLA0KICAgICAgZGVzYzogIkFsbW9uZC1zbWlsZWQgWW9ya3NoaXJlIGNha2VzIHdpdGggYSByaWNoIGhpc3RvcnkgYW5kIGFuIGV2ZW4gcmljaGVyIHJlY2lwZS4gVGhlIG1vcmUgZGlldC1jb25zY2lvdXMgYXJlIGludml0ZWQgdG8gdHJ5IHRoZSBsZWFuIHZlcnNpb24sIHNraW5ueSBzY2FsbHl3YWdzLiIsDQogICAgICBpY29uOiBbMzMsIDhdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDEpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSXNjaGxlciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJPcmlnaW5hdGluZyBpbiB0aGUgQXVzdHJvLUh1bmdhcmlhbiBFbXBpcmUsIHRoZXNlIGhhdmUgc3ByZWFkIHRocm91Z2hvdXQgZXZlcnkgY291bnRyeSBpbiBlYXN0ZXJuIEV1cm9wZSBhbmQgc3Bhd25lZCBqdXN0IGFzIG1hbnkgcmVjaXBlcywgZWFjaCBjbGFpbWluZyB0byBiZSB0aGUgb3JpZ2luYWwuIFRoZSBiYXNpcyByZW1haW5zIHVuY2hhbmdlZCBhY3Jvc3MgYWxsIHZhcmlhbnRzOiB0d28gYmlzY3VpdHMgc2FuZHdpY2hlZCBhcm91bmQgY2hvY29sYXRlIGJ1dHRlcmNyZWFtLiBPciB3YXMgaXQgamFtPyIsDQogICAgICBpY29uOiBbMzIsIDldLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDIpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWF0Y2hhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkdyZWVuIHRlYSBhbmQgY29va2llcywgYSBtYXRjaGEgbWFkZSBpbiBoZWF2ZW4uIiwNCiAgICAgIGljb246IFszMywgOV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0MiksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDMyOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRWFybCBHcmV5IG1hY2Fyb25zIiwNCiAgICAgIGRlc2M6ICJCZXN0IHNlcnZlZCBob3QsIG1ha2UgaXQgc28hIiwNCiAgICAgIGljb246IFszMiwgMTBdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAzMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBva2V5IiwNCiAgICAgIGRlc2M6ICJXaGlsZSBjb21tb25seSB0aG91Z2h0IHRvIGJlIG5hbWVkIHNvIGJlY2F1c2UgaXQncyBmdW4gdG8gcG9rZSB5b3VyIGNsYXNzbWF0ZXMgd2l0aCB0aGVzZSwgUG9rZXktYnJhbmQgYmlzY3VpdCBzdGlja3MgYWN0dWFsbHkgZ2V0IHRoZWlyIG5hbWUgZnJvbSB0aGVpciBwb3B1bGFyaXR5IGluIHNtb2tlLWZyZWUgcHJpc29ucywgd2hlcmUgdGhleSdyZSBjb21tb25seSBzbXVnZ2xlZCBhbmQgdHJhZGVkIGluIGxpZXUgb2YgY2lnYXJldHRlcy4iLA0KICAgICAgaWNvbjogWzMzLCAxMF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2FzaGV3IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkxldCBtZSB0ZWxsIHlvdSBhYm91dCBjYXNoZXdzLiBDYXNoZXdzIGFyZSBub3QgbnV0cywgYnV0IHNlZWRzIHRoYXQgZ3JvdyBvdXQgb2YgY3VyaW91cyByZWQgb3IgeWVsbG93IGZydWl0cyAtIHdoaWNoIGNhbiBiZSBlYXRlbiBvbiB0aGVpciBvd24sIG9yIG1hZGUgaW50byBkcmlua3MuIFRoZSBzaGVsbCBhcm91bmQgdGhlIG51dCBpdHNlbGYgY29udGFpbnMgYSBuYXN0eSBzdWJzdGFuY2UgdGhhdCBzdGFpbnMgYW5kIGlycml0YXRlcyB0aGUgaGFuZHMgb2Ygd2hvZXZlciBoYW5kbGVzIGl0IGZvciB0b28gbG9uZy4gQnV0IHRoYXQncyBva2F5LCBzaW5jZSBub3cgdGhhdCB5b3UndmUgcmVhZCB0aGlzIHlvdSdsbCBtYWtlIHN1cmUgaXQgZG9lc24ndCBnZXQgaW4gdGhlIGNvb2tpZXMhIE9oLCB5b3UndmUgYWxyZWFkeSBlYXRlbiBob3cgbWFueT8gT2theSB0aGVuLiIsDQogICAgICBpY29uOiBbMzIsIDddLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTksDQogICAgfSk7DQogICAgb3JkZXIgPSAxMDAwMTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIk1pbGsgY2hvY29sYXRlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkEgc3RyYW5nZSBpbnZlcnNpb24gb2YgY2hvY29sYXRlIG1pbGsuIEZvciB0aG9zZSB3aG8gYXJlIGEgbGl0dGxlIGJpdCB0b28gaGFyZGNvcmUgZm9yIHdoaXRlIGNob2NvbGF0ZSwgYnV0IG5vdCBoYXJkY29yZSBlbm91Z2ggZm9yIGRhcmsuIiwNCiAgICAgIGljb246IFszMywgN10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDI1NTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIkJyYWlueSBncmFuZG1hcyIsDQogICAgICAiQSBjbGV2ZXIgZ3JhbmRtYSB0byB0aGluayB1cCBzb21lIGNvb2tpZXMuIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUHJpbmNpcGxlZCBuZXVyYWwgc2hhY2tsZXMiLA0KICAgICAgIjxxPkEgZGlzY3JpbWluYXRvcnksIGxvdy1vcmRlciBuZXVyYWwgbmV0IGFjdGluZyBhcyBhIGZpbHRlciBsaW1pdGluZyB3aGF0IHlvdXIgY29ydGV4IGJha2VycyBjYW4gdGhpbmsgYW5kIGRvLiBSZWFsbHkgc29tZXRoaW5nIHlvdSB3YW50IHRvIGFwcGx5IGJlZm9yZSB0aGV5IGFjaGlldmUgZnVsbCBtZWdhc2VudGllbmNlIGFuZCByZWFsaXplIHRoZXkndmUgZ290IGJldHRlciB0aGluZ3MgdG8gZG8gdGhhbiBtYXRlcmlhbGl6aW5nIHBhc3RyaWVzIGZvciB5b3UsIHRydXN0IG1lLjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiT2JleSIsDQogICAgICAiPHE+UGVyZmVjdCBtaW5kIGNvbnRyb2wgbWVhbnMgcGVyZmVjdCBlbXBsb3llZSBhdHRlbmRhbmNlIGFuZCBwZXJmb3JtYW5jZS4gT3B0aW1hbCBtb29kIHN0YWJpbGl6YXRpb24gaXMgYSBuaWNlIHNpZGUtZWZmZWN0Ljxicj5IYXBweSBoYXBweSBldmVyeW9uZSBoYXBweS48YnI+SGFwcHkuPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBIHNwcmlua2xlIG9mIGlycmF0aW9uYWxpdHkiLA0KICAgICAgIjxxPllvdXIgY29ydGV4IGJha2VycyBzb21ldGltZXMgZ2V0IGJvZ2dlZCBkb3duIGJ5IGNpcmN1bGFyIHJlYXNvbmluZyBhbmQgc3RhbGUgaWRlYXMuIEEgdG91Y2ggb2YgY2hhb3MgaXMganVzdCB3aGF0IHRoZXkgbmVlZCB0byBnZXQgYmFjayBvbiB0cmFjay48L3E+IiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgMw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZyb250IGFuZCBiYWNrIGhlbWlzcGhlcmVzIiwNCiAgICAgICI8cT5JIG1lYW4sIG90aGVyd2lzZSBpdCdzIGp1c3QgdW51c2VkIHNwYWNlLCB5ZWFoPzwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTmV1cmFsIG5ldHdvcmtpbmciLA0KICAgICAgIjxxPlRoZSBlZmZlY3RpdmVuZXNzIG9mIHlvdXIgY29ydGV4IGJha2VycyBzaG9vdHMgdXAgZXhwb25lbnRpYWxseSBpZiB5b3UgYWxsb3cgdGhlbSB0byBjb25uZWN0IHdpdGggZWFjaCBvdGhlci4gSW4gcHJhY3RpY2UgdGhpcyB0YWtlcyB0aGUgZm9ybSBvZiBtYW55IGNvc21pYy1zaXplZCBuZXJkcyBtdW1ibGluZyBhd2t3YXJkbHkgYWJvdXQgdGVjaCBzdGFydC11cCBpZGVhcyB0byBlYWNoIG90aGVyLjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICA1DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ29zbWljIGJyYWluc3Rvcm1zIiwNCiAgICAgICI8cT5UaGUgd3JpbmtsZWQgc3VyZmFjZXMgb2YgeW91ciBjb3J0ZXggYmFrZXJzIGVtaXQgd2VhdGhlci1zY2FsZSBpb25pYyBmbGFyZXMgd2l0aCBldmVyeSB0aG91Z2h0IGNvdXJzaW5nIHRocm91Z2ggdGhlbS4gVGhlc2UgcHVsc2VzIG9mIHB1cmUgaW50ZWxsZWN0dWFsIGVuZXJneSBhcmUgc2VudCByaXBwbGluZyB0aHJvdWdoIHNwYWNlLCBvY2Nhc2lvbmFsbHkgZWNob2luZyBiYWNrIHdpdGggZXZlbiBkZWVwZXIgcGhpbG9zb3BoaWNhbCBjb21wbGV4aXR5LjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICA2DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTWVnYXRoZXJhcHkiLA0KICAgICAgIjxxPkEgZ2lhbnQgYnJhaW4gY2FuIGZlZWwgdW53ZWxsIGp1c3QgbGlrZSB5b3UgYW5kIG1lIHNvbWV0aW1lcywgYW5kIGl0J3MgdGhlIGpvYiBvZiBzcGVjaWFsaXplZCBlbmdpbmVlcnMgdG8gbG9jYXRlIGFuZCByZXBhaXIgdGhlc2UgYnVncy4gV2UnbGwgYWRtaXQgbW9zdCBvZiB0aGUgYnVkZ2V0IGluIHRoaXMgd2FzIHNwZW50IG9uIGNvbnN0cnVjdGluZyBleHRyZW1lbHkgbGFyZ2UgY2hhaXNlcyBsb25ndWVzIGZvciB0aGUgYnJhaW5zIHRvIHJlY2xpbmUgb24uPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDcNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTeW5hcHRpYyBsdWJyaWNhbnQiLA0KICAgICAgIjxxPkEgbWluZCBpcyBvbmx5IGFzIGZhc3QgYXMgdGhlIGF4b25zIHRoYXQgc3VwcG9ydCBpdC4gR2V0IHRob3NlIGFjdGlvbiBwb3RlbnRpYWxzIGZsb3dpbmcgc21vb3RoIGFzIHNpbGsgd2l0aCB0aGlzIDMgcGFydHMgbXllbGluLzEgcGFydCBjYW5vbGEgb2lsIHNwcmVhZGFibGUgcGFzdGUuIEFsc28gZ3JlYXQgb24gdG9hc3QuPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDgNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQc3ljaG9raW5lc2lzIiwNCiAgICAgICI8cT5XaGlsZSB5b3VyIGdpYW50IGNvcnRleCBiYWtlcnMgY29tZSBlcXVpcHBlZCB3aXRoIEVTUCwgdGhleSd2ZSBvbmx5IHJlY2VudGx5IGZpZ3VyZWQgb3V0IGhvdyB0byBtYW5pcHVsYXRlIHRoZSBwaHlzaWNhbCB3b3JsZCB3aXRoIHRoZWlyIHRob3VnaHRzIC0gdGhvdWdoIGZvciBzYWZldHkgcmVhc29ucywgeW91ciBsZWdhbCB0ZWFtIGhhZCB0aGVtIHByb21pc2UgdG8gb25seSB1c2UgdGhlc2UgcG93ZXJzIHRvIHNjcmF0Y2ggdGhlIGl0Y2hlcyBpbiB0aGVpciBjb3J0aWNhbCBmb2xkcy48L3E+IiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgOQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlNwaW5lcyIsDQogICAgICAiPHE+WW91ciBjb3J0ZXggYmFrZXJzIGFyZSBub3cgZXF1aXBwZWQgd2l0aCB0ZW50YWN1bGFyIHNwaW5lLWxpa2Ugc3RydWN0dXJlcywgd2hpY2ggdGhleSBjYW4gdXNlIGxpa2UgcHJlaGVuc2lsZSB0YWlscyB0byBwb3VyIHRoZW1zZWx2ZXMgZW5vcm1vdXMgY3VwcyBvZiBjb2ZmZWUgb3IgcHJvcGVsIHRoZW1zZWx2ZXMgYXJvdW5kIGxpa2UgdmVyeSBsYXJnZSwgdmVyeSBzbWFydCwgdmVyeSBzbG93IHRhZHBvbGVzLjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICAxMA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk5ldXJhZm9ybWluZyIsDQogICAgICAiPHE+QnkgdmlydHVlIG9mIGJlaW5nIHBsYW5ldC1zaXplZCwgeW91ciBjb3J0ZXggYmFrZXJzIG9mdGVuIGJvYXN0IHRoZWlyIG93biBhdG1vc3BoZXJlcyBhbmQgc2VhcyBvZiBjZXJlYnJvc3BpbmFsIGZsdWlkLCBhbmQgZ2l2ZW4gZW5vdWdoIHRpbWUsIHRoZWlyIG93biBlY29zeXN0ZW1zLiBUaGlzIGluY3JlZGlibGUgbmV3IGJyYW5jaCBvZiBsaWZlLCBldm9sdmVkIGVudGlyZWx5IG91dCBvZiBuZXVyYWwgbWF0ZXJpYWwsIGNhbiBiZSBwdXQgdG8gZ29vZCB1c2UgYXMgaG9tZS1ncm93biBhY2NvdW50YW50cyBhbmQgbG93LXJhbmtpbmcgdGVjaG5pY2lhbnMuPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRXBpc3RlbW9sb2dpY2FsIHRyaWNrZXJ5IiwNCiAgICAgICI8cT5SZWRlZmluaW5nIHdoYXQgaXMgLW9yIGlzbid0LSBhIGNvb2tpZSB0aHJvdWdoIHRoZSBwb3dlciBvZiBwaGlsb3NvcGhpY2FsIGRpc2NvdXJzZSBtYXkgcmVzdWx0IGluIHNvbWUgc3RyYW5nZSBhbmQgd29uZGVyZnVsIHRoaW5ncyBmb3IgeW91ciBwcm9maXQgbWFyZ2lucy48L3E+IiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgMTINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFdmVyeSBwb3NzaWJsZSBpZGVhIiwNCiAgICAgICI8cT5Db25ncmF0dWxhdGlvbnMsIHlvdXIgY29ydGV4IGJha2VycyBoYXZlIGV4ZXJ0ZWQgZW5vdWdoIGludGVsbGVjdHVhbCBjb21wdXRhdGlvbiB0byBwZXJtdXRlIHRocm91Z2ggZXZlcnkgc2luZ2xlIGlkZWEgdGhhdCBjYW4gb3IgZXZlciB3aWxsIGJlIGNvbmNlaXZlZCBvZi4gQW55IHRob3VnaHQgYmV5b25kIHRoaXMgcG9pbnQgaXMgbWVyZWx5IHJlZGlzY292ZXJpbmcgYSBub3Rpb24geW91J3ZlIGFscmVhZHkgYXJjaGl2ZWQuIEhhcmRseSBjYXVzZSBmb3IgY2VyZWJyYXRpb24uPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDEzDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJLaXRjaGVuIGNhYmluZXRzIiwNCiAgICAgICI8cT5BIGdyYW5kbWEncyBraXRjaGVuIGNhYmluZXQgaXMgYSBiZWZ1ZGRsaW5nIHBsYWNlLiBUaHJvdWdoIGxlc3Nlci1zdHVkaWVkIGFnZ3JlZ2F0aW5nIGluc3RpbmN0cywgZ3JhbmRtYXMgd2lsbCB0ZW5kIHRvIGdyYWR1YWxseSBmaWxsIGFsbCBuZWFyYnkgY2FiaW5ldHMgd2l0aCB2YXJpb3VzIHNvcnRzIG9mIHRoaW5ncywgc3VjaCBhcyBjdXJpb3VzIGNvY29udXQgc25hY2tzIG9yIGRpZXRldGljIHBvd2RlcnMuIEJ5IGNvbnRyYWN0LCB0aGVzZSBhcmUgbGVnYWxseSB5b3Vycywgd2hpY2ggb3BlbnMgdXAgZXhjaXRpbmcgb3Bwb3J0dW5pdGllcyBmb3IgeW91ciBzdWJzdGFuY2UgaW52ZXN0aWdhdGlvbiBkZXBhcnRtZW50LjwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDb29raWUgbXVsY2giLA0KICAgICAgIjxxPkdyaW5kaW5nIHN1cnBsdXMgY29va2llcyBpbnRvIHBhc3RlIHRoYXQgeW91IHRoZW4gc3ByZWFkIG9udG8geW91ciBmaWVsZHMgZW5hYmxlcyBhIHN0cmFuZ2UgZmVlZGJhY2sgbG9vcCBpbiB0aGUgcXVhbGl0eSBvZiB5b3VyIGNvb2tpZSBjcm9wcy4gQ29va2llIGZlZWRpbmcgb24gY29va2llIHNob3VsZCBiZSBhbiBhYm9taW5hdGlvbiwgYnV0IHRoZW4gd2h5IGRvZXMgaXQgdGFzdGUgc28gZ29vZD88L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDQwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRGVsaWNpb3VzIG1pbmVyYWxvZ3kiLA0KICAgICAgIjxxPlN0cmF0dW0gYWZ0ZXIgc3RyYXR1bSwgeW91J3ZlIGV4dHJhY3RlZCBzdHJhbmdlIG5ldyBtaW5lcmFscyBoZXJldG9mb3JlIHVua25vd24gdG8gZ2VvbG9neS4gVXNoZXJpbmcgYSBuZXcgZXJhIG9mIG1hdGVyaWFscyByZXNlYXJjaCwgeW91ciBzY2llbnRpc3RzIGhhdmUgYmVlbiBhYmxlIHRvIGlkZW50aWZ5IGV2ZXJ5IG5ldyBlbGVtZW50IHlvdXIgbWluZXMgaGF2ZSBkaXNjb3ZlcmVkLCBpbmNsdWRpbmcgd2hhdGV2ZXIgdGhvc2UgdGhpbmdzIGFyZSBpbiB0aGUgdXBncmFkZSB0aWVyIG5hbWVzLjwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJOLWRpbWVuc2lvbmFsIGFzc2VtYmx5IGxpbmVzIiwNCiAgICAgICI8cT5MaW5lcyBhcmUgZGVwcmVzc2luZ2x5IDEtZGltZW5zaW9uYWwuIEJleW9uZCBhc3NlbWJseSBsaW5lcywgd2UgcG9zaXQgdGhlIGV4aXN0ZW5jZSBvZiBoaWdoZXItb3JkZXIgYXNzZW1ibHkgZW50aXRpZXMsIHN1Y2ggYXMgYXNzZW1ibHkgc3F1YXJlcywgYXNzZW1ibHkgY3ViZXMgLSBwZXJoYXBzIGV2ZW4gYXNzZW1ibHkgdGVzc2VyYWN0cy4gQW55IGRlZXBlciB0aGFuIHRoYXQgYW5kIHdlIGRvdWJ0IHdlJ2xsIGJlIGFibGUgdG8gd3JpdGUgbWFudWFscyB5b3VyIHdvcmtlcnMgY2FuIHJlYWQuPC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNvb2tpZSBQb2ludHMiLA0KICAgICAgIjxxPkEgbG95YWx0eSBwcm9ncmFtIHdoZXJlaW4gZWFjaCBwdXJjaGFzZSBvZiB5b3VyIGNvb2tpZXMgY29tZXMgd2l0aCBmcmVlIENvb2tpZSBQb2ludHMsIHdoaWNoIGNhbiBpbiB0dXJuIGJlIHJlZGVlbWVkIGZvciBtb3JlIGNvb2tpZXMsIHRodXMgY3JlYXRpbmcgdGhlIHNlbGYtc3VzdGFpbmluZyBlY29ub215IHlvdSd2ZSBiZWVuIGxvb2tpbmcgZm9yLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gNTUwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJOZWdhdGhlaXNtIiwNCiAgICAgICI8cT5Qb2x5dGhlaXNtIGlzIGEgYmVsaWVmIGluIG11bHRpcGxlIGRlaXRpZXM7IG1vbm90aGVpc20gaW4ganVzdCBvbmUuIEF0aGVpc20gaXMgYSBiZWxpZWYgaW4gbm8gZGVpdHkgd2hhdHNvZXZlci4gVGhyb3VnaCBsb2dpY2FsIHN1Y2Nlc3Npb24gaXQgZm9sbG93cyB0aGF0IHRoaXMgcmVtYWlucyB0cnVlIHdoZW4gZ29pbmcgaW50byBuZWdhdGl2ZSBudW1iZXJzLCB3aXRoIGJlbGllZiBzeXN0ZW1zIGludm9sdmluZyBtaW51cyAxIG9yIG1vcmUgZGVpdGllcyBkaXNwbGF5aW5nIHVucHJlY2VkZW50ZWQgdGhlb2xvZ2ljYWwgcHJvcGVydGllcy48L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gNTc1Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNYWdpY2FsIHJlYWxpc20iLA0KICAgICAgIjxxPk1vcmUgYSBzb2NpYWwgdGhhbiB0aGF1bWF0dXJnaWNhbCBwcm9ncmVzcywgbWFnaWNhbCByZWFsaXNtIHJlZmVycyB0byB0aGUgbm9ybWFsaXphdGlvbiBvZiBtb2Rlcm4gdGVjaG5vbG9neSBhbW9uZyBtYWdpYy11c2Vycy4gSXQncyB0b3RhbGx5IGZpbmUgZm9yIGEgd2l6YXJkIHRvIGRyaXZlIGEgY2FyISBUaGVyZSdzIG5vIHN0aWdtYSBpbiB3YWl0aW5nIGluIGxpbmUgZm9yIGNvZmZlZSEgU3VyZSwgdGFrZSBhIHBob25lIGNhbGwsIHNlbmQgYW4gZW1haWwsIHdoYXRldmVyITwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSA2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNvc21pYyBmb3JlZ3JvdW5kIHJhZGlhdGlvbiIsDQogICAgICAiPHE+QWgsIHRoaXMgaXMgYSBwcm9ibGVtLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDcwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQXJjYW5pemVkIGdsYXNzd2FyZSIsDQogICAgICAiPHE+WW91IHRoaW5rIHlvdXIgbGFiIGVxdWlwbWVudCBlbmpveXMgdGFraW5nIHBhcnQgaW4gdGhlc2UgZXhwZXJpbWVudHMgdmlvbGF0aW5nIGFsbCBzb3J0cyBvZiBtb2Rlcm4gc2NpZW50aWZpYyBwcmVjZXB0cz8gT2YgY291cnNlIG5vdC4gVGhhbmtmdWxseSwgeW91J3ZlIGZpbmFsaXplZCB0aGUgZGVzaWduIG9mIHNwZWNpYWxpemVkIGJlYWtlcnMgYW5kIGZsYXNrcywgcmVjeWNsZWQgZnJvbSB0aGUgc2FtZSBnbGFzcyB1c2VkIGJ5IHRoZSBhbmNpZW50cyB0byBwZXJmb3JtIHByaW1ldmFsIGFsY2hlbXksIGFuZCB0aGVyZWZvcmUgbXVjaCBsZXNzIHBpY2t5IGFib3V0IHRoZSBuYXR1cmUgb2YgdGhlIHBoeXNpY2FsIHdvcmxkLjwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDgwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUG9ydGFsIGd1bnMiLA0KICAgICAgIjxxPkF0IGxvbmcgbGFzdCEgVGhlIG9ubHkgd2VhcG9uIGNhcGFibGUgb2Yga2lsbGluZyBhIHBvcnRhbC48L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gOTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaW1lcHJvb2YgdXBob2xzdGVyeSIsDQogICAgICAiPHE+U29tZXRpbWVzIHlvdXIgdGltZSBhZ2VudHMgb3ZlcnNob290IGFuZCBlbmQgdXAgaGF2aW5nIHRvIGZhc3QtZm9yd2FyZCB0aHJvdWdoIHRoZSB1bml2ZXJzZSdzIGVudGlyZSBoaXN0b3J5IHVudGlsIHRoZXkgbG9vcCBiYWNrIHRvIHByZXNlbnQgdGltZS4gSXQgc3RpbGwgdGFrZXMgYSB3aGlsZSwgc28gdGhleSBtaWdodCBhcyB3ZWxsIHRyYXZlbCBpbiBjb21mb3J0IGFuZCBlbmpveSB0aGUgc2hvdyB3aGlsZSB0aGV5IGRvLjwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFbXBsb3llZSBtaW5pZmljYXRpb24iLA0KICAgICAgIjxxPlVzaW5nIG1vbGVjdWxhciBzaHJpbmtpbmcgdGVjaG5vbG9neSwgeW91J3ZlIHJlbmRlcmVkIHlvdXIgc3RhZmYgYW5kIHRoZWlyIG9mZmljZXMgYWJzb2x1dGVseSBpdHR5LWJpdHR5LiBUaGUgc3RvcmFnZSBhbmQgcHJvZHVjdGl2aXR5IGJlbmVmaXRzIGFyZSBxdWVzdGlvbmFibGUgYnV0IGl0J3MgdmVyeSBmdW4gbGlzdGVuaW5nIHRvIHRoZWlyIHRpbnkgbGl0dGxlIGNvbXBsYWludHMuIFRoZXkgYWxsIHNpZ25lZCB0aGUgd2FpdmVycywgc28gbWF5YmUgdGhlaXIgbmV3IHNpemUgd2lsbCBmaW5hbGx5IHRlYWNoIHRoZW0gdG8gcmVhZCB0aGUgc21hbGwgcHJpbnQuLi48L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxMTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJIeXBlcmJsYWNrIHBhaW50IiwNCiAgICAgICI8cT5BcyB0aGUgdGVjaG5vbG9neSBiZWhpbmQgeW91ciBwcmlzbXMgZXZvbHZlcywgdGhlaXIgc3RvcmFnZSBiZWNvbWVzIG1vcmUgYW5kIG1vcmUgcHJvYmxlbWF0aWM6IHdpdGhpbiBzZWNvbmRzLCBhIHNpbmdsZSBwcmlzbSdzIHJlZmxlY3RpdmUgYWJpbGl0eSBjYW4gc2V0IGEgd2hvbGUgdW5kZXJncm91bmQgaGFuZ2FyIGFibGF6ZSBhcyBpdCBjYXRjaGVzIHRoZSBzbGlnaHRlc3QgZ2xpbnQgb2YgbGlnaHQuIEhvd2V2ZXIsIG9uY2UgY29hdGVkIHdpdGggdGhpcyBuZXcgc2hhZGUgb2YgcGFpbnQsIGl0cyBkYW1hZ2UgbWF5IGJlIHJlZHVjZWQgdG8gb25seSBnaXZpbmcgdGhpcmQtZGVncmVlIGJ1cm5zIHRvIGVtcGxveWVlcyB0aGF0IHN0YW5kIHRvbyBjbG9zZS48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTaWx2ZXIgbGluaW5nIG1heGltaXphdGlvbiIsDQogICAgICAiPHE+U29tZXRpbWVzIGx1Y2sgaXMgYSBtYXR0ZXIgb2YgcGVyc3BlY3RpdmUuIEJyb2tlIHlvdXIgYW5rbGU/IFdoYXQgZG8geW91IGtub3csIHRoYXQgY3V0ZSBudXJzZSBmaXhpbmcgeW91IHVwIG1pZ2h0IGp1c3QgYmUgeW91ciBmdXR1cmUgc3BvdXNlLiBMb3N0IHlvdXIgam9iPyBZb3Ugd2VyZSBtZWFudCBmb3IgZ3JlYXRlciB0aGluZ3MgYW55d2F5ISBEZXZlbG9wZWQgYSBjb29raWUgYWxsZXJneT8gVGhlcmUncyBubyB1cHNob3QgdG8gdGhhdCwgeW91IHNpY2sgbW9uc3Rlci48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNdWx0aXNjYWxlIHByb2ZpbGluZyIsDQogICAgICAiPHE+RGlkIHlvdSBrbm93IHRoYXQgZWF0aW5nIGEgY29va2llIG1lYW5zIHRoZSBpbnRlc3RpbmFsIGZsb3JhIGluc2lkZSB5b3UgaXMgZWF0aW5nIGl0IHRvbz8gVHJpbGxpb25zIG9mIHRpbnkgYmFjdGVyaWFsIG1vdXRocyB0byBmZWVkLCBlYWNoIHdpdGggdGhlaXIgb3duIHByZWZlcmVuY2VzLiBTdXJlbHkgdGhpcyBpcyByb29tIGZvciBmbGF2b3Igb3B0aW1pemF0aW9uLiBBbmQgdGhlbiwgb2YgY291cnNlLCB0aGVyZSdzIGFsc28gdGhlIG11Y2ggYmlnZ2VyIHRoaW5ncyB0aGF0LCBpbiB0dXJuLCBlYXQgeW91LjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlBIUCBjb250YWlubWVudCB2YXRzIiwNCiAgICAgICI8cT5JbiBlc3NlbmNlLCB0aGVzZSBhcmUgbGFyZ2Ugc2VydmVyIGNoYW1iZXJzIG1lYW50IHRvIHRyYXAgcm9ndWUgUEhQIGNvZGUsIGFsbG93aW5nIGl0IHRvIGV4ZWN1dGUgZmFyIGF3YXkgZnJvbSB5b3VyIGphdmFzY3JpcHQgd2hlcmUgaXQgY2FuIGRvIG1pbmltYWwgaGFybS48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiT3Bwb3NpdGUgdW5pdmVyc2UiLA0KICAgICAgIjxxPllvdSd2ZSBsb2NhdGVkIGEgdW5pdmVyc2Ugd2hlcmUgZXZlcnl0aGluZyBpcyByZXZlcnNlZDogdXAgaXMgZG93biwgbGlnaHQgaXMgZGFya25lc3MsIGNsb3ducyBhcmUgdmVnZXRhcmlhbnMgLSBidXQgd29yc3Qgb2YgYWxsLCBzb21lIGx1bmF0aWMgdGhlcmUgaXMgbWFudWZhY3R1cmluZyBhYm9taW5hYmxlIGFtb3VudHMgb2YgYW50aS1jb29raWVzLiBJZiB0aGVzZSBjYW1lIGludG8gY29udGFjdCB3aXRoIHlvdXJzLCBldmVyeXRoaW5nIHdvdWxkIGJlIGxvc3QhIFRoYW5rcyB0byB0aGlzIGRpc2NvdmVyeSwgeW91J3ZlIGJlZW4gYWJsZSB0byBwbGFjZSB0aGUgb2ZmZW5kaW5nIHVuaXZlcnNlIGluIHBlcm1hbmVudCBxdWFyYW50aW5lLCBhbmQgcHJheSB0aGF0IHRoZXJlIGFyZW4ndCBtb3JlIGxpa2UgaXQgaGlkaW5nIGFyb3VuZCBzb21ld2hlcmUuPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRoZSBsYW5kIG9mIGRyZWFtcyIsDQogICAgICAiPHE+WW91ciBwbGFuZXQgYnJhaW5zIGhhdmUgZ2FpbmVkIHRoZSBhYmlsaXR5IHRvIHNsZWVwLCBhY3RpbmcgYXMgYSBzb2Z0IHJlYm9vdCB3aGljaCBoZWxwcyBrZWVwIHRoZWlyIHBhbmdlbm9jaWRhbCBpbXB1bHNlcyBpbiBjaGVjay4gSXQgYWxzbyBhbGxvd3MgdGhlbSB0byBjb21tdW5lIGluIGEgc2hhcmVkIGRyZWFtd29ybGQgaW4gd2hpY2ggdGhleSBjYW4gaW1hZ2luZSB3aGF0IGl0J3MgbGlrZSB0byBub3QgZXhpc3QgYXMgYSBkaXNlbWJvZGllZCBjb3NtaWMgaG9ycm9yIGZvcmV2ZXIgZmF0ZWQgdG8gdXNlIGl0cyBpbmZpbml0ZSBpbnRlbGxlY3QgdG8gZGV2aXNlIG5ldyBtZWFucyBvZiBjcmVhdGluZyBiaXNjdWl0cy4gWW91IGtub3csIHdpdGhpbiByZWFzb24uPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDE0DQogICAgKTsNCg0KICAgIG9yZGVyID0gNTAwMDsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlRob3VnaHRzICYgcHJheWVycyIsDQogICAgICAiPHE+VGhlIG5vdGlvbiBvZiBzYWNyZWRuZXNzIGFyaXNlcyBpbiBtb3N0IHNlbnRpZW50IGV2b2x2ZWQgYnJhaW5zIGFuZCBtYXkgYmVuZWZpdCB0aGUgZGV2ZWxvcG1lbnQgb2YgY29nbml0aW9uIHZpYSBhYnN0cmFjdCB0aG91Z2h0LiBUaGlzIG1lY2hhbmlzbSwgaG93ZXZlciwgaXMgYWJzZW50IGluIGRlc2lnbmVkIG1pbmRzIHN1Y2ggYXMgeW91ciBjb3J0ZXggYmFrZXJzOyB0aGlzIHByb2Nlc3MgYXR0ZW1wdHMgdG8gYWRkIGl0IGJhY2suIEp1c3QgbWFrZSBzdXJlIHRvIGtlZXAgdGhlbSBpbiBjaGVjayAtIHlvdSByZWFsbHkgZG9uJ3Qgd2FudCB0aGVzZSB0aGluZ3MgdG8gZGV2ZWxvcCBvcmdhbml6ZWQgcmVsaWdpb24uPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJGZXJ0aWxlIG1pbmRzIiwNCiAgICAgICI8cT5BbiBhY3V0ZSBpbnRlbGxlY3QsIGFydGlmaWNpYWwgb3Igbm90LCByZXF1aXJlcyBwbGVudHkgb2Ygdml0YW1pbnMuIFlvdSBmb3J0dWl0b3VzbHkgaGFwcGVuIHRvIGJlIGluIGNoYXJnZSBvZiB2YXN0IGZhcm1pbmcgb3BlcmF0aW9ucywgb25seSBhIGZldyB0cmlsbGlvbiBhY3JlcyBvZiB3aGljaCBuZWVkIGJlIHJlcXVpc2l0aW9uZWQgdG8gZ3JvdyB0aGUgcXVhbnRpdGllcyBvZiBicm9jY29saSBhbmQga2FsZSB0byBrZWVwIHlvdXIgcGxhbmV0LXNpemVkIGJyYWlucyBpbiB0aXAtdG9wIHNoYXBlLiBPcGVuIHdpZGUsIGhlcmUgY29tZXMgdGhlIGFpcnBsYW5lITwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICAiRmFybSIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTkwMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAxOSIsDQogICAgICAiPHE+VGhlIHNtYXJ0ZXN0IHdheSB0byB0aGluayBpcyBub3QgdG8gdGhpbmsgYXQgYWxsLjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEZWNpbGxpb24gZmluZ2VycyIsDQogICAgICBnZXRTdHJUaG91c2FuZEZpbmdlcnNHYWluKDIwKSArDQogICAgICAgICI8cT5JZiB5b3Ugc3RpbGwgY2FuJ3QgcXVpdGUgcHV0IHlvdXIgZmluZ2VyIG9uIGl0LCB5b3UgbXVzdCBub3QgYmUgdHJ5aW5nIHZlcnkgaGFyZC48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzEyLCAzNF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDE0LCAwKTsNCiAgICBvcmRlciA9IDE1MDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFldGhlcmljZSBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsNCiAgICAgICAgIjxxPk1hZGUgZnJvbSBhIHN1YnN0YW5jZSBpbXBvc3NpYmxlIHRvIG1hbnVmYWN0dXJlLCBvbmx5IG9idGFpbmVkIHRocm91Z2ggbmF0dXJhbCBoYXBwZW5zdGFuY2U7IGl0cyBwcm9wZXJ0aWVzIGJld2lsZGVyIGV2ZW4gdGhlIG1vc3QgcHJlY2lzZSBtZWFzdXJpbmcgaW5zdHJ1bWVudHMuPC9xPiIsDQogICAgICA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAzNF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDE0LCAxMSk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGFkbWlucyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPmxlYWRlcnNoaXAgYWluJ3QgZWFzeSwgc2lyPC9xPiIsDQogICAgICA5MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBHYW1lLkdldEljb24oIktpdHRlbiIsIDE0KQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMTQsIDE4KTsNCg0KICAgIG9yZGVyID0gMTAzMDA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJFdmVyeWJ1dHRlciBiaXNjdWl0IiwNCiAgICAgIGRlc2M6ICJSZXdhcmRlZCBmb3Igb3duaW5nIDY1MCBvZiBldmVyeXRoaW5nLjxicj5UaGlzIGJpc2N1aXQgaXMgYmFrZWQgd2l0aCwgYW5kIGNvYXRlZCBpbiwgZXZlcnkga2luZCBvZiBidXR0ZXIgZXZlciBpbWFnaW5lZCwgZnJvbSBldmVyeSBodW1hbiBjdWx0dXJlIGFuZCBhIGdvb2QgZmV3IGFsaWVuIG9uZXMgdG9vLiBTb21lIG9mIHRoZW0gcGVyaGFwcyBkaXNwbGF5IGhhbGx1Y2lub2dlbmljIHRyYWl0cywgYXMgdGhlIGJpc2N1aXQgc2VlbXMgdG8gY2hhbmdlIHNoYXBlIGluIGZyb250IG9mIHlvdSAtIHNlZW1pbmdseSBzaGlmdGluZyBiZXR3ZWVuIHZpc2lvbnMgb2YgZXZlcnkgcGFzdCBhbmQgZnV0dXJlIHlvdS4iLA0KICAgICAgaWNvbjogWzIyLCAzNF0sDQogICAgICBwb3dlcjogMTAsDQogICAgICBwcmljZToNCiAgICAgICAgOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICoNCiAgICAgICAgYnV0dGVyQmlzY3VpdE11bHQsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQoNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nID0gZnVuY3Rpb24gKG9iaikgew0KICAgICAgdmFyIGJ1aWxkaW5nID0gR2FtZS5PYmplY3RzW29iai5idWlsZGluZ107DQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgICJVbnNoYWNrbGVkICIgKyBidWlsZGluZy5icGx1cmFsLA0KICAgICAgICAob2JqLmJ1aWxkaW5nID09ICJDdXJzb3IiDQogICAgICAgICAgPyBnZXRTdHJUaG91c2FuZEZpbmdlcnNHYWluKDI1KQ0KICAgICAgICAgIDogbG9jKA0KICAgICAgICAgICAgICAiVGllcmVkIHVwZ3JhZGVzIGZvciA8Yj4lMTwvYj4gcHJvdmlkZSBhbiBleHRyYSA8Yj4rJTIlPC9iPiBwcm9kdWN0aW9uLjxicj5Pbmx5IHdvcmtzIHdpdGggdW5zaGFja2xlZCB1cGdyYWRlIHRpZXJzLiIsDQogICAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgICBjYXAoYnVpbGRpbmcucGx1cmFsKSwNCiAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKA0KICAgICAgICAgICAgICAgICAgKGJ1aWxkaW5nLmlkID09IDEgPyAwLjUgOiAoMjAgLSBidWlsZGluZy5pZCkgKiAwLjEpICogMTAwDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgKSkgKyAoRU4gPyAiPHE+IiArIG9iai5xICsgIjwvcT4iIDogIiIpLA0KICAgICAgICBNYXRoLnBvdyhidWlsZGluZy5pZCArIDEsIDcpICogMTUwMDAwMDAsDQogICAgICAgIFtidWlsZGluZy5pY29uQ29sdW1uLCAzNV0NCiAgICAgICk7DQogICAgICB1cGdyYWRlLnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgICAgdXBncmFkZS5wYXJlbnRzID0gWw0KICAgICAgICBvYmouYnVpbGRpbmcgPT0gIkN1cnNvciINCiAgICAgICAgICA/ICJVbnNoYWNrbGVkIGZsYXZvciINCiAgICAgICAgICA6IEdhbWUuT2JqZWN0c0J5SWRbYnVpbGRpbmcuaWQgLSAxXS51bnNoYWNrbGVVcGdyYWRlLA0KICAgICAgXTsNCiAgICAgIGJ1aWxkaW5nLnVuc2hhY2tsZVVwZ3JhZGUgPSB1cGdyYWRlLm5hbWU7DQogICAgICB1cGdyYWRlLnBvc1ggPSA3NTAgLSBNYXRoLnNpbigoYnVpbGRpbmcuaWQgKyAxKSAqIDAuMjUgKyAyLjMpICogNTAwOw0KICAgICAgdXBncmFkZS5wb3NZID0gMjAwICsgTWF0aC5jb3MoKGJ1aWxkaW5nLmlkICsgMSkgKiAwLjI1ICsgMi4zKSAqIDUwMDsNCiAgICAgIHJldHVybiB1cGdyYWRlOw0KICAgIH07DQoNCiAgICAvLyJVbnNoYWNrbGVkIFtidWlsZGluZyBuYW1lXSINCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiQ3Vyc29yIiwNCiAgICAgIHE6ICJUaGVzZSBoYW5kcyB0ZWxsIGEgc3RvcnkuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsgYnVpbGRpbmc6ICJHcmFuZG1hIiwgcTogIk5ldmVyIHRvbyBvbGQuIiB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsgYnVpbGRpbmc6ICJGYXJtIiwgcTogIlRpbGwgdGhlIHVuaXZlcnNlLiIgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIk1pbmUiLA0KICAgICAgcTogJ1JlZGVmaW5lIHRoZSBtZWFuaW5nIG9mICJkZXB0aCIuJywNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiRmFjdG9yeSIsDQogICAgICBxOiAiTm90aGluZyB0byBsb3NlIGJ1dCB5b3VyIHByb2R1Y3Rpb24gY2hhaW5zLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkJhbmsiLA0KICAgICAgcTogIkFsbC10aW1lIGhpZ2hzLCBhbGwgdGhlIHRpbWUuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiVGVtcGxlIiwNCiAgICAgIHE6ICJZb3UgY2FuIG1ha2UgYSByZWxpZ2lvbiBvdXQgb2YgdGhpcy4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlQnVpbGRpbmcoew0KICAgICAgYnVpbGRpbmc6ICJXaXphcmQgdG93ZXIiLA0KICAgICAgcTogIlRoZXJlJ3MgYSBzcGVsbCBmb3IgZXZlcnl0aGluZy4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlQnVpbGRpbmcoew0KICAgICAgYnVpbGRpbmc6ICJTaGlwbWVudCIsDQogICAgICBxOiAiRXZlcnl3aGVyZSBhdCBvbmNlLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkFsY2hlbXkgbGFiIiwNCiAgICAgIHE6ICJBbnl0aGluZyB5b3Ugc2VlLCB5b3UgY2FuIG1ha2UuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiUG9ydGFsIiwNCiAgICAgIHE6ICJQYXJhbGxlbHMgdW5wYXJhbGxlbGVkLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIlRpbWUgbWFjaGluZSIsDQogICAgICBxOiAiQWxsIHRoZSB0aW1lIGluIHRoZSB3b3JsZC4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlQnVpbGRpbmcoew0KICAgICAgYnVpbGRpbmc6ICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICBxOiAiTm8gc2NhbGUgdG9vIGxhcmdlIG9yIHRvbyBsaXR0bGUuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiUHJpc20iLA0KICAgICAgcTogIkJyaWxsaWFuY2UgaGFzIG5vIHVwcGVyIGxpbWl0LiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkNoYW5jZW1ha2VyIiwNCiAgICAgIHE6ICJZb3UgbWFrZSB0aGUgcnVsZXMuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgcTogIlVuY29udGFpbmVkLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICBxOiAiUmV3cml0ZSB5b3VyIHJlYWxpdHkuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiSWRsZXZlcnNlIiwNCiAgICAgIHE6ICJXYWl0IGV2ZW4gZmFzdGVyLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkNvcnRleCBiYWtlciIsDQogICAgICBxOiAiTm90aGluZyBpcyByZWFsLiBFdmVyeXRoaW5nIGlzIHBlcm1pdHRlZC4iLA0KICAgIH0pOw0KDQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllciA9IGZ1bmN0aW9uIChvYmopIHsNCiAgICAgIHZhciB0aWVyID0gR2FtZS5UaWVyc1tvYmoudGllcl07DQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgIG9iai50aWVyID09IDENCiAgICAgICAgICA/ICJVbnNoYWNrbGVkIGZsYXZvciINCiAgICAgICAgICA6ICJVbnNoYWNrbGVkICIgKyB0aWVyLm5hbWUudG9Mb3dlckNhc2UoKSwNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJVbnNoYWNrbGVzIGFsbCA8Yj4lMS10aWVyIHVwZ3JhZGVzPC9iPiwgbWFraW5nIHRoZW0gbW9yZSBwb3dlcmZ1bC48YnI+T25seSBhcHBsaWVzIHRvIHVuc2hhY2tsZWQgYnVpbGRpbmdzLiIsDQogICAgICAgICAgY2FwKGxvYygiW1RpZXJdIiArIHRpZXIubmFtZSwgMCwgdGllci5uYW1lKSkNCiAgICAgICAgKSArIChFTiA/ICI8cT4iICsgb2JqLnEgKyAiPC9xPiIgOiAiIiksDQogICAgICAgIE1hdGgucG93KG9iai50aWVyLCA3LjUpICogMTAwMDAwMDAsDQogICAgICAgIFsxMCwgdGllci5pY29uUm93XQ0KICAgICAgKTsNCiAgICAgIHVwZ3JhZGUucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgICB1cGdyYWRlLnBhcmVudHMgPSBbDQogICAgICAgIG9iai50aWVyID09IDENCiAgICAgICAgICA/ICJMYWJlbCBwcmludGVyIg0KICAgICAgICAgIDogR2FtZS5UaWVyc1tvYmoudGllciAtIDFdLnVuc2hhY2tsZVVwZ3JhZGUsDQogICAgICBdOw0KICAgICAgdGllci51bnNoYWNrbGVVcGdyYWRlID0gdXBncmFkZS5uYW1lOw0KICAgICAgdXBncmFkZS5wb3NYID0gNzUwIC0gTWF0aC5zaW4ob2JqLnRpZXIgKiAwLjMgKyAyLjMpICogNDAwOw0KICAgICAgdXBncmFkZS5wb3NZID0gMjAwICsgTWF0aC5jb3Mob2JqLnRpZXIgKiAwLjMgKyAyLjMpICogNDAwOw0KICAgICAgLyp1cGdyYWRlLnBhcmVudHM9W29iai50aWVyPT0xPydMYWJlbCBwcmludGVyJzpHYW1lLlRpZXJzW29iai50aWVyLTFdLnVuc2hhY2tsZVVwZ3JhZGVdOw0KCQkJdGllci51bnNoYWNrbGVVcGdyYWRlPXVwZ3JhZGUubmFtZTsNCgkJCXVwZ3JhZGUucG9zWD0tOTAwK01hdGguc2luKG9iai50aWVyKjAuMysyLjMpKjMwMDsNCgkJCXVwZ3JhZGUucG9zWT0tMTMwK01hdGguY29zKG9iai50aWVyKjAuMysyLjMpKjQwMDsqLw0KICAgICAgcmV0dXJuIHVwZ3JhZGU7DQogICAgfTsNCg0KICAgIC8vIlVuc2hhY2tsZWQgW3RpZXIgbmFtZV0iDQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiAxLA0KICAgICAgcTogIldoaWxlIHRoZSBhYnNlbmNlIG9mIGZsYXZvcmluZyBtYXkgc2VlbSB1bmRlcndoZWxtaW5nLCBpdCBhbGxvd3MgaW5uYXRlIGFyb21hcyB0byBiZSBleHByZXNzZWQgYXQgdGhlaXIgbW9zdCB1bmFkdWx0ZXJhdGVkLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiAyLA0KICAgICAgcTogIkJlcnJ5bGl1bSBpcyBhIHN5bnRoZXRpYyBnZW0gd2l0aCBhIHNpbXBsZSBzaGluZSB0byBpdC4gU3RpY2t5IHRvIHRoZSB0b3VjaCBhbmQgc3VzY2VwdGlibGUgdG8gbWVsdGluZyBpbiBoaWdoIGhlYXQsIGl0IGlzIGZyZXF1ZW50bHkgdXNlZCBpbiB0aGUgZm9vZCBpbmR1c3RyeSByYXRoZXIgdGhhbiBhcyBhZG9ybm1lbnQsIGFzIGl0cyBhdG9taWMgc3RydWN0dXJlIGltcGFydHMgaXQgYSB2YWd1ZWx5IGZydWl0eSBmbGF2b3IuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZVVwZ3JhZGVUaWVyKHsNCiAgICAgIHRpZXI6IDMsDQogICAgICBxOiAiQmx1ZWJlcnJ5bGl1bSBpcyBhIHJlZmluZW1lbnQgb2YgYmVycnlsaXVtLCBzaGFyaW5nIG5lYXJseSB0aGUgc2FtZSBjaGVtaWNhbCBtYWtldXAgc2F2ZSBmb3IgYSBmZXcgc3VwcGxlbWVudGFsIGVzdGVycy4gVGhlc2UgYWZmZWN0IGl0cyBmbGF2b3IgYXMgd2VsbCBhcyBpdHMgdmlzdWFsIHNwZWN0cnVtIHJlc29uYW5jZS4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogNCwNCiAgICAgIHE6ICJSYXcgY2hhbGNlZGhvbmV5IGlzIGZvdW5kIGluIGNvbXBsZXggbm9kdWxlcyB3aXRoaW4gdGhlIGZvc3NpbGl6ZWQgcmVtYWlucyBvZiBhbmNpZW50IGZvcmVzdHMuIE9uY2UgcHVyaWZpZWQsIGl0IGJlY29tZXMgYSBzZW1pLXZhbHVhYmxlIHN0b25lIHdpdGggYSBwbGVhc2FudCwgd2F4eSBzbWVsbC4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogNSwNCiAgICAgIHE6ICJCdXR0ZXJnb2xkIHdhcyBmYW1vdXNseSBpbnZlbnRlZCBieSB0aGUgY2hlZiBzb24gb2YgdHdvIG1vbGVjdWxhciBwaHlzaWNpc3RzLiBOZWl0aGVyIGNsb3NlbHkgcmVsYXRlZCB0byBidXR0ZXIgbm9yIHRvIGdvbGQsIHlldCBzaW1pbGFyIGluIG51dHJpdGlvbmFsIHZhbHVlLCB0aGlzIGdsaW1tZXJpbmcgc3Vic3RhbmNlIGNhbiBiZSBmcm96ZW4gYW5kIHByZXNlcnZlIGl0cyBoYXJkbmVzcyBhdCByb29tIHRlbXBlcmF0dXJlLCBvbmx5IHJlZ2FpbmluZyBpdHMgbWFsbGVhYmlsaXR5IHdoZW4gaGVhdGVkIHVwLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiA2LA0KICAgICAgcTogIlN1Z2FybXVjayByZWZlcnMgdG8gdGhlIGdyYWR1YWwgY3J1c3QgdGhhdCBzZWVtcyB0byBmb3JtIHNwb250YW5lb3VzbHkgaW4gdGhlIHZpY2luaXR5IG9mIGNhbmR5LW1ha2luZyBlcXVpcG1lbnQuIExvbmcgaWdub3JlZCBieSBjb25mZWN0aW9uZXJzLCBpdHMgaGFydmVzdGluZyBwcm9jZXNzIHdhcyBkaXNjb3ZlcmVkIHNpbXVsdGFuZW91c2x5IGluIG11bHRpcGxlIGNvdW50cmllcyBkdXJpbmcgYSBnbG9iYWwgYmVldCBzaG9ydGFnZS4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogNywNCiAgICAgIHE6ICJUaGUgc3RyaWtpbmcgdGFzdGUgb2YgamV0bWludCBtYWRlIGl0IHBvcHVsYXIgaW4gdGhlIG1hbnVmYWN0dXJlIG9mIHZhcmlvdXMga2luZHMgb2YgY29mZmVlLXNpZGUgdHJlYXRzIHVudGlsIHRoZSBhd2FyZW5lc3Mgb2YgaXRzIG1pbGQgcmFkaW9hY3Rpdml0eSBiZWNhbWUgd2lkZXNwcmVhZC4gVG9kYXksIGl0cyBtYWluIHVzZXMgYXJlIGluIGNvc21ldGljcywgb3dpbmcgdG8gdGhlIHJlZnJlc2hpbmcgc2Vuc2F0aW9uIGl0IHByb2R1Y2VzIG9uIGNvbnRhY3QuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZVVwZ3JhZGVUaWVyKHsNCiAgICAgIHRpZXI6IDgsDQogICAgICBxOiAiQ2hlcnJ5c2lsdmVyIGlzIGEgcGF0ZW50ZWQgYWxsb3kgd2l0aCBwZWN1bGlhciBhcm9tYXRpYyBwcm9wZXJ0aWVzOyBpdCBpcyBub24tZWRpYmxlLCBidXQgcHJvZHVjZXMgc3Ryb25nIGZsYXZvciByZXNwb25zZXMgd2hpbGUgbG9zaW5nIHZlcnkgbGl0dGxlIG9mIGl0cyBtYXNzIHdoZW4gbGlja2VkLCB0aG91Z2ggdGhpcyBhbHNvIGxlYXZlcyBhIGhhcm1sZXNzIHJlZCB0aW5nZSB1cG9uIHRoZSB0b25ndWUuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZVVwZ3JhZGVUaWVyKHsNCiAgICAgIHRpZXI6IDksDQogICAgICBxOiAiSGF6ZWxyYWxkIGlzIGEgZnJpYWJsZSBnZW1zdG9uZSB3aXRoIGNvbXBsZXggZ3JlZW4tYnJvd24gaW5uZXIgcmVmbGVjdGlvbnMuIEl0IGlzIGNvbnNpZGVyZWQgb3JuYW1lbnRhbCBpbiBzb21lIGN1bHR1cmVzOyBpbiBvdGhlcnMsIGl0IG1heSBiZSBjb25zdW1lZCBpbiBzbWFsbCBxdWFudGl0aWVzIGFzIGFuIHVwcGVyLXNjYWxlIHN3ZWV0LiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiAxMCwNCiAgICAgIHE6ICJXaGlsZSBtYW55IGdldCBpdCBtaXhlZCB1cCB3aXRoIHRoZSB0cmFkZW1hcmtlZCBzbmFjayBvZiB0aGUgc2FtZSBuYW1lIG1hZGUgcG9wdWxhciBmb2xsb3dpbmcgaXRzIGRpc2NvdmVyeSwgbW9vbmNhbmR5IGlzIGEgdmVyeSByZWFsIG1pbmVyYWwsIGZpcnN0IGlzb2xhdGVkIHdpdGhpbiB0aGUgc3BhY2UgZHVzdCB1bmRlcm5lYXRoIGFzdHJvbmF1dCBib290cy4gTGVmdCB0byBpdHMgb3duIGRldmljZXMgaW4gb3BlbiBhaXIsIGEgbW9vbmNhbmR5IGNyeXN0YWwgbmF0dXJhbGx5IHNwcmVhZHMgb3V0IGFuZCBncm93cy4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogMTEsDQogICAgICBxOiAiV2hlbiB5b3UgaGVhdCB1cCB0aGUgc2hpbW1lcmluZyBzeXJ1cCBvb3ppbmcgZnJvbSBtb29uY2FuZHkgdXNpbmcgYSBzcGVjaWFsIGNhcmFtZWxpemF0aW9uIHByb2Nlc3MsIHlvdSBnZXQgYXN0cm9mdWRnZS4gQXN0cm9mdWRnZSBpcyBkZWxpY2lvdXMgYW5kIHNhZmUgZm9yIGh1bWFub2lkIGNvbnN1bXB0aW9uIGluIGNlcnRhaW4gcXVhbnRpdGllcy4gQ29uc3VsdCB5b3VyIGxvY2FsIGZvb2Qgc2FmZXR5IGFnZW5jeSBmb3IgbW9yZSBkZXRhaWxzLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiAxMiwNCiAgICAgIHE6ICdNb2xlY3VsYXJseSByZWxhdGVkIHRvIGRhaXJ5LCBhbGFiYXNjcmVhbSBvY2N1cnMgbmF0dXJhbGx5IGF0IGhpZ2ggYWx0aXR1ZGVzLCBmb3JtaW5nIGluIHdpc3B5IGZpbGFtZW50cyB3aGljaCB3ZXJlIGxvbmcgaW5kaXN0aW5ndWlzaGFibGUgZnJvbSBjbG91ZHMuIEFuIGV4cGVuc2l2ZSBkZWxpZ2h0LCBpdCBpcyBhbHNvIGtub3duIGFzICJwaWxvdHNcJyBiYW5lIi4nLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogMTMsDQogICAgICBxOiAiSXJpZHl1bSBzaGFyZXMgbGl0dGxlIGluIGNvbW1vbiB3aXRoIGFueSBvdGhlciBtYXRlcmlhbCBrbm93biB0byBtYW5raW5kLiBSYXRoZXIgdGhhbiBzaW1wbHkgc21lbGxlZCwgaXQgY2FuIGJlIHRhc3RlZCBmcm9tIGEgZGlzdGFuY2UsIHRob3VnaCByZW1haW5pbmcgaW4gaXRzIHByZXNlbmNlIHRvbyBsb25nIGlzIGlsbC1hZHZpc2VkLiBTb21lIGhpZ2gtZW5kIHVuZGVyZ3JvdW5kIG1lZ2Fjb21wdXRlcnMgbWF5IGluY29ycG9yYXRlIGlyaWR5dW0gYXMgcGFydCBvZiB0aGVpciBlbGVjdHJvbmljIGNvbXBvbmVudHMuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZVVwZ3JhZGVUaWVyKHsNCiAgICAgIHRpZXI6IDE0LA0KICAgICAgcTogIkdsdWNvc21pdW0gaXMgYSBnbG9zc3kgbWV0YWwgd2hvc2UgZmxhdm9yIG1hdHJpeCBpcyBib3VuZCB0byBpdHMgY3VycmVudCBzdWJqZWN0aXZlIGNocm9tYTsgaW4gb3RoZXIgd29yZHMsIGl0cyB0YXN0ZSBkZXBlbmRzIG9uIHdoaWNoIGNvbG9ycyBpdCdzIGN1cnJlbnRseSByZWZsZWN0aW5nLiBJbXByYWN0aWNhbCB0byBjb25zdW1lIHNhZmVseSwgaXRzIGluZHVzdHJpYWwgYXBwbGljYXRpb25zIHJhbmdlIGZyb20gdHJhbnNjb250aW5lbnRhbCBiYWxsaXN0aWNzIHRvIHBhaW50IHZhcm5pc2guIiwNCiAgICB9KTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRGVsaWNhdGUgdG91Y2giLA0KICAgICAgbG9jKA0KICAgICAgICAiVGhlIDxiPnNoaW1tZXJpbmcgdmVpbDwvYj4gaXMgbW9yZSByZXNpc3RhbnQsIGFuZCBoYXMgYSA8Yj4lMSUgY2hhbmNlPC9iPiBub3QgdG8gYnJlYWsuIEl0IGFsc28gZ2l2ZXMgPGI+KyUyJTwvYj4gbW9yZSBDcFMuIiwNCiAgICAgICAgWzEwLCA1XQ0KICAgICAgKSArICI8cT5JdCBicmVha3Mgc28gZWFzaWx5LjwvcT4iLA0KICAgICAgOTk5OTk5OTk5OSAqIDE1LA0KICAgICAgWzIzLCAzNF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiUmVpbmZvcmNlZCBtZW1icmFuZSJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU3RlYWRmYXN0IG11cm11ciIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgPGI+c2hpbW1lcmluZyB2ZWlsPC9iPiBpcyBtb3JlIHJlc2lzdGFudCwgYW5kIGhhcyBhIDxiPiUxJSBjaGFuY2U8L2I+IG5vdCB0byBicmVhay4gSXQgYWxzbyBnaXZlcyA8Yj4rJTIlPC9iPiBtb3JlIENwUy4iLA0KICAgICAgICBbMTAsIDVdDQogICAgICApICsgIjxxPkxlbmQgYW4gZWFyIGFuZCBsaXN0ZW4uPC9xPiIsDQogICAgICA5OTk5OTk5OTk5OTkgKiAxNSwNCiAgICAgIFsyMywgMzRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkRlbGljYXRlIHRvdWNoIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJHbGl0dGVyaW5nIGVkZ2UiLA0KICAgICAgbG9jKA0KICAgICAgICAiVGhlIDxiPnNoaW1tZXJpbmcgdmVpbDwvYj4gaXMgbW9yZSByZXNpc3RhbnQsIGFuZCBoYXMgYSA8Yj4lMSUgY2hhbmNlPC9iPiBub3QgdG8gYnJlYWsuIEl0IGFsc28gZ2l2ZXMgPGI+KyUyJTwvYj4gbW9yZSBDcFMuIiwNCiAgICAgICAgWzEwLCA1XQ0KICAgICAgKSArICI8cT5KdXN0IHdpdGhpbiByZWFjaCwgeWV0IGF0IHdoYXQgY29zdD88L3E+IiwNCiAgICAgIDk5OTk5OTk5OTk5OTk5ICogMTUsDQogICAgICBbMjMsIDM0XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdGVhZGZhc3QgbXVybXVyIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRpc3Rpbmd1aXNoZWQgd2FsbHBhcGVyIGFzc29ydG1lbnQiLA0KICAgICAgKEVODQogICAgICAgID8gbG9jKCJDb250YWlucyBtb3JlIHdhbGxwYXBlcnMgZm9yIHlvdXIgYmFja2dyb3VuZCBzZWxlY3Rvci4iKQ0KICAgICAgICA6ICIiKSArDQogICAgICAgICI8cT5EbyB5b3UgZXZlciB0aGluayBhYm91dCB0aGUgcGh5c2ljYWxpdHkgb2YgdGhpcyBwbGFjZT8gQXJlIHlvdSBwdXR0aW5nIHVwIHRoZXNlIHdhbGxwYXBlcnMgaW4geW91ciBvZmZpY2Ugb3Igc29tZXRoaW5nPyBXaGVyZSBhcmUgeW91LCBhbnl3YXk/PC9xPiIsDQogICAgICAxMDAwMDAwMCwNCiAgICAgIFsyNywgNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiQmFzaWMgd2FsbHBhcGVyIGFzc29ydG1lbnQiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU291bmQgdGVzdCIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIHRoZSA8Yj5qdWtlYm94PC9iPiwgd2hpY2ggYWxsb3dzIHlvdSB0byBwbGF5IHRocm91Z2ggZXZlcnkgc291bmQgZmlsZSBpbiB0aGUgZ2FtZS4iDQogICAgICApICsgIjxxPk9uZSB0d28sIG9uZSB0d28uIElzIHRoaXMgdGhpbmcgb24/PC9xPiIsDQogICAgICA5OTk5OTk5OTk5OSwNCiAgICAgIFszMSwgMTJdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbDQogICAgICAiRmFuY2lmdWwgZGFpcnkgc2VsZWN0aW9uIiwNCiAgICAgICJEaXN0aW5ndWlzaGVkIHdhbGxwYXBlciBhc3NvcnRtZW50IiwNCiAgICAgICJHb2xkZW4gY29va2llIGFsZXJ0IHNvdW5kIiwNCiAgICBdOw0KDQogICAgb3JkZXIgPSA0OTkwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkp1a2Vib3giLA0KICAgICAgbG9jKCJQbGF5IHRocm91Z2ggdGhlIGdhbWUncyBzb3VuZCBmaWxlcyEiKSwNCiAgICAgIDAsDQogICAgICBbMzEsIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmp1a2Vib3ggPSB7DQogICAgICBzb3VuZHM6IFsNCiAgICAgICAgInRpY2siLA0KICAgICAgICAidGlja09mZiIsDQogICAgICAgICJzbWFsbFRpY2siLA0KICAgICAgICAidG9uZVRpY2siLA0KICAgICAgICAiY2xpY2tPbiIsDQogICAgICAgICJjbGlja09uMiIsDQogICAgICAgICJjbGlja09mZiIsDQogICAgICAgICJjbGlja09mZjIiLA0KICAgICAgICAicG9wMSIsDQogICAgICAgICJwb3AyIiwNCiAgICAgICAgInBvcDMiLA0KICAgICAgICAicHJlc3MiLA0KICAgICAgICAvLydzd2l0Y2gnLA0KICAgICAgICAiYnV5MSIsDQogICAgICAgICJidXkyIiwNCiAgICAgICAgImJ1eTMiLA0KICAgICAgICAiYnV5NCIsDQogICAgICAgICJzZWxsMSIsDQogICAgICAgICJzZWxsMiIsDQogICAgICAgICJzZWxsMyIsDQogICAgICAgICJzZWxsNCIsDQogICAgICAgICJidXlIZWF2ZW5seSIsDQogICAgICAgICJjbGljazEiLA0KICAgICAgICAiY2xpY2syIiwNCiAgICAgICAgImNsaWNrMyIsDQogICAgICAgICJjbGljazQiLA0KICAgICAgICAiY2xpY2s1IiwNCiAgICAgICAgImNsaWNrNiIsDQogICAgICAgICJjbGljazciLA0KICAgICAgICAiY2xpY2tiMSIsDQogICAgICAgICJjbGlja2IyIiwNCiAgICAgICAgImNsaWNrYjMiLA0KICAgICAgICAiY2xpY2tiNCIsDQogICAgICAgICJjbGlja2I1IiwNCiAgICAgICAgImNsaWNrYjYiLA0KICAgICAgICAiY2xpY2tiNyIsDQogICAgICAgICJjaGFyZ2luZyIsDQogICAgICAgICJ0aHVkIiwNCiAgICAgICAgLy8nY29va2llQnJlYWsnLA0KICAgICAgICAiY3ltYmFsUmV2IiwNCiAgICAgICAgLy8nY3ltYmFsQ3Jhc2gnLA0KICAgICAgICAic21hbGxDeW1iYWxDcmFzaCIsDQogICAgICAgICJjaG9pciIsDQogICAgICAgICJjaGltZSIsDQogICAgICAgICJzaGltbWVyQ2xpY2siLA0KICAgICAgICAiamluZ2xlIiwNCiAgICAgICAgImppbmdsZUNsaWNrIiwNCiAgICAgICAgImZvcnR1bmUiLA0KICAgICAgICAidGlsbDEiLA0KICAgICAgICAidGlsbDIiLA0KICAgICAgICAidGlsbDMiLA0KICAgICAgICAidGlsbGIxIiwNCiAgICAgICAgInRpbGxiMiIsDQogICAgICAgICJ0aWxsYjMiLA0KICAgICAgICAiaGFydmVzdDEiLA0KICAgICAgICAiaGFydmVzdDIiLA0KICAgICAgICAiaGFydmVzdDMiLA0KICAgICAgICAiZnJlZXplR2FyZGVuIiwNCiAgICAgICAgImdyb3dsIiwNCiAgICAgICAgInNuYXJsIiwNCiAgICAgICAgInBhZ2UiLA0KICAgICAgICAic3dvb3NoSW4iLA0KICAgICAgICAic3dvb3NoT3V0IiwNCiAgICAgICAgInNwZWxsIiwNCiAgICAgICAgInNwZWxsRmFpbCIsDQogICAgICAgICJzcGlyaXQiLA0KICAgICAgICAic3F1aXNoMSIsDQogICAgICAgICJzcXVpc2gyIiwNCiAgICAgICAgInNxdWlzaDMiLA0KICAgICAgICAic3F1aXNoNCIsDQogICAgICAgICJzcXVlYWsxIiwNCiAgICAgICAgInNxdWVhazIiLA0KICAgICAgICAic3F1ZWFrMyIsDQogICAgICAgICJzcXVlYWs0IiwNCiAgICAgICAgImNhc2hJbiIsDQogICAgICAgICJjYXNoSW4yIiwNCiAgICAgICAgImNhc2hPdXQiLA0KICAgICAgICAidXBncmFkZSIsDQogICAgICAgIC8vJ2xldmVsUHJlc3RpZ2UnLA0KICAgICAgXSwNCiAgICAgIHRyYWNrczogW10sIC8vcG9wdWxhdGVkIGV4dGVybmFsbHkNCiAgICAgIG9uU291bmQ6IDAsDQogICAgICBvblRyYWNrOiAwLA0KICAgICAgdHJhY2tMb29wZWQ6IHRydWUsDQogICAgICB0cmFja0F1dG86IHRydWUsDQogICAgICB0cmFja1NodWZmbGU6IGZhbHNlLA0KICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5qdWtlYm94Ow0KICAgICAgICBtZS5vblNvdW5kID0gMDsNCiAgICAgICAgbWUub25UcmFjayA9IDA7DQogICAgICAgIG1lLnRyYWNrTG9vcGVkID0gdHJ1ZTsNCiAgICAgICAgbWUudHJhY2tBdXRvID0gdHJ1ZTsNCiAgICAgICAgbWUudHJhY2tTaHVmZmxlID0gZmFsc2U7DQogICAgICB9LA0KICAgICAgc2V0U291bmQ6IGZ1bmN0aW9uIChpZCkgew0KICAgICAgICBpZiAoaWQgPj0gR2FtZS5qdWtlYm94LnNvdW5kcy5sZW5ndGgpIGlkID0gMDsNCiAgICAgICAgZWxzZSBpZiAoaWQgPCAwKSBpZCA9IEdhbWUuanVrZWJveC5zb3VuZHMubGVuZ3RoIC0gMTsNCiAgICAgICAgR2FtZS5qdWtlYm94Lm9uU291bmQgPSBpZDsNCiAgICAgICAgaWYgKGwoImp1a2Vib3hPblNvdW5kIikpIHsNCiAgICAgICAgICB0cmlnZ2VyQW5pbShsKCJqdWtlYm94UGxheWVyIiksICJwdWNrZXIiKTsNCiAgICAgICAgICBsKCJqdWtlYm94T25Tb3VuZCIpLmlubmVySFRNTCA9DQogICAgICAgICAgICAiJmJ1bGw7ICIgKyBHYW1lLmp1a2Vib3guc291bmRzW0dhbWUuanVrZWJveC5vblNvdW5kXSArICIgJmJ1bGw7IjsNCiAgICAgICAgICBsKCJqdWtlYm94T25Tb3VuZE4iKS5pbm5lckhUTUwgPQ0KICAgICAgICAgICAgR2FtZS5qdWtlYm94Lm9uU291bmQgKyAxICsgIi8iICsgR2FtZS5qdWtlYm94LnNvdW5kcy5sZW5ndGg7DQogICAgICAgICAgbCgianVrZWJveFNvdW5kU2VsZWN0IikudmFsdWUgPSBHYW1lLmp1a2Vib3gub25Tb3VuZDsNCiAgICAgICAgfQ0KICAgICAgICBQbGF5U291bmQoDQogICAgICAgICAgInNuZC8iICsgR2FtZS5qdWtlYm94LnNvdW5kc1tHYW1lLmp1a2Vib3gub25Tb3VuZF0gKyAiLm1wMyIsDQogICAgICAgICAgMQ0KICAgICAgICApOw0KICAgICAgfSwNCiAgICAgIHNldFRyYWNrOiBmdW5jdGlvbiAoaWQsIGRvbnRQbGF5KSB7DQogICAgICAgIGlmIChpZCA+PSBHYW1lLmp1a2Vib3gudHJhY2tzLmxlbmd0aCkgaWQgPSAwOw0KICAgICAgICBlbHNlIGlmIChpZCA8IDApIGlkID0gR2FtZS5qdWtlYm94LnRyYWNrcy5sZW5ndGggLSAxOw0KICAgICAgICBHYW1lLmp1a2Vib3gub25UcmFjayA9IGlkOw0KICAgICAgICB2YXIgZGF0YSA9DQogICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdWRpbzsNCiAgICAgICAgaWYgKGwoImp1a2Vib3hPblRyYWNrIikpIHsNCiAgICAgICAgICB0cmlnZ2VyQW5pbShsKCJqdWtlYm94UGxheWVyIiksICJwdWNrZXIiKTsNCiAgICAgICAgICBsKCJqdWtlYm94T25UcmFjayIpLmlubmVySFRNTCA9DQogICAgICAgICAgICAiJmJ1bGw7ICIgKw0KICAgICAgICAgICAgY2FwKEdhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdKSArDQogICAgICAgICAgICAiICZidWxsOyI7DQogICAgICAgICAgbCgianVrZWJveE9uVHJhY2tBdXRob3IiKS5pbm5lckhUTUwgPQ0KICAgICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdXRob3I7DQogICAgICAgICAgbCgianVrZWJveFRyYWNrU2VsZWN0IikudmFsdWUgPSBHYW1lLmp1a2Vib3gub25UcmFjazsNCiAgICAgICAgICBpZiAoZGF0YSkgew0KICAgICAgICAgICAgdmFyIGR1ciA9IGRhdGEuZHVyYXRpb24gKyAxOw0KICAgICAgICAgICAgbCgianVrZWJveE11c2ljVG90YWxUaW1lIikuaW5uZXJIVE1MID0NCiAgICAgICAgICAgICAgTWF0aC5mbG9vcihkdXIgLyA2MCkgKw0KICAgICAgICAgICAgICAiOiIgKw0KICAgICAgICAgICAgICAoTWF0aC5mbG9vcihkdXIgJSA2MCkgPCAxMCA/ICIwIiA6ICIiKSArDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoZHVyICUgNjApOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmICghZG9udFBsYXkgJiYgTXVzaWMpIHsNCiAgICAgICAgICAgIEdhbWUuanVrZWJveC50cmFja0F1dG8gPSBmYWxzZTsNCiAgICAgICAgICAgIGwoImp1a2Vib3hNdXNpY0F1dG8iKS5jbGFzc0xpc3QuYWRkKCJvZmYiKTsNCiAgICAgICAgICAgIE11c2ljLnBsYXlUcmFjayhHYW1lLmp1a2Vib3gudHJhY2tzW0dhbWUuanVrZWJveC5vblRyYWNrXSk7DQogICAgICAgICAgICBNdXNpYy5zZXRGaWx0ZXIoMSk7DQogICAgICAgICAgICBNdXNpYy5sb29wKEdhbWUuanVrZWJveC50cmFja0xvb3BlZCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChkYXRhLnBhdXNlZCkgbCgianVrZWJveE11c2ljUGxheSIpLmlubmVySFRNTCA9IGxvYygiUGxheSIpOw0KICAgICAgICAgIGVsc2UgbCgianVrZWJveE11c2ljUGxheSIpLmlubmVySFRNTCA9IGxvYygiU3RvcCIpOw0KICAgICAgICAgIEdhbWUuanVrZWJveC51cGRhdGVNdXNpY0N1cnJlbnRUaW1lKCk7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBwcmVzc1BsYXlNdXNpYzogZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoIU11c2ljKSByZXR1cm4gZmFsc2U7DQogICAgICAgIHZhciBkYXRhID0NCiAgICAgICAgICBNdXNpYy50cmFja3NbR2FtZS5qdWtlYm94LnRyYWNrc1tHYW1lLmp1a2Vib3gub25UcmFja11dLmF1ZGlvOw0KICAgICAgICBpZiAoIWRhdGEucGF1c2VkKSB7DQogICAgICAgICAgTXVzaWMucGF1c2UoKTsNCiAgICAgICAgICBsKCJqdWtlYm94TXVzaWNQbGF5IikuaW5uZXJIVE1MID0gbG9jKCJQbGF5Iik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgTXVzaWMudW5wYXVzZSgpOw0KICAgICAgICAgIGwoImp1a2Vib3hNdXNpY1BsYXkiKS5pbm5lckhUTUwgPSBsb2MoIlN0b3AiKTsNCiAgICAgICAgfQ0KICAgICAgICBHYW1lLmp1a2Vib3gudXBkYXRlTXVzaWNDdXJyZW50VGltZSgpOw0KICAgICAgfSwNCiAgICAgIHByZXNzTG9vcE11c2ljOiBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuanVrZWJveC50cmFja0xvb3BlZCA9ICFHYW1lLmp1a2Vib3gudHJhY2tMb29wZWQ7DQogICAgICAgIGlmICghTXVzaWMpIHJldHVybiBmYWxzZTsNCiAgICAgICAgaWYgKEdhbWUuanVrZWJveC50cmFja0xvb3BlZCkgew0KICAgICAgICAgIE11c2ljLmxvb3AodHJ1ZSk7DQogICAgICAgICAgbCgianVrZWJveE11c2ljTG9vcCIpLmNsYXNzTGlzdC5yZW1vdmUoIm9mZiIpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIE11c2ljLmxvb3AoZmFsc2UpOw0KICAgICAgICAgIGwoImp1a2Vib3hNdXNpY0xvb3AiKS5jbGFzc0xpc3QuYWRkKCJvZmYiKTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHByZXNzTXVzaWNBdXRvOiBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuanVrZWJveC50cmFja0F1dG8gPSAhR2FtZS5qdWtlYm94LnRyYWNrQXV0bzsNCiAgICAgICAgaWYgKCFNdXNpYykgcmV0dXJuIGZhbHNlOw0KICAgICAgICBpZiAoR2FtZS5qdWtlYm94LnRyYWNrQXV0bykgew0KICAgICAgICAgIE11c2ljLmN1ZSgicGxheSIpOw0KICAgICAgICAgIGwoImp1a2Vib3hNdXNpY0F1dG8iKS5jbGFzc0xpc3QucmVtb3ZlKCJvZmYiKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvKkdhbWUuanVrZWJveC5zZXRUcmFjayhHYW1lLmp1a2Vib3gub25UcmFjayk7Ki8gbCgNCiAgICAgICAgICAgICJqdWtlYm94TXVzaWNBdXRvIg0KICAgICAgICAgICkuY2xhc3NMaXN0LmFkZCgib2ZmIik7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBwcmVzc011c2ljU2h1ZmZsZTogZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLmp1a2Vib3gudHJhY2tTaHVmZmxlID0gIUdhbWUuanVrZWJveC50cmFja1NodWZmbGU7DQogICAgICB9LA0KICAgICAgdXBkYXRlTXVzaWNDdXJyZW50VGltZTogZnVuY3Rpb24gKG5vTG9vcCkgew0KICAgICAgICBpZiAoIWwoImp1a2Vib3hNdXNpY1RpbWUiKSkgcmV0dXJuIGZhbHNlOw0KICAgICAgICB2YXIgZGF0YSA9DQogICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdWRpbzsNCiAgICAgICAgbCgianVrZWJveE11c2ljUGxheSIpLmlubmVySFRNTCA9IGRhdGEucGF1c2VkDQogICAgICAgICAgPyBsb2MoIlBsYXkiKQ0KICAgICAgICAgIDogbG9jKCJQYXVzZSIpOw0KICAgICAgICBsKCJqdWtlYm94TXVzaWNUaW1lIikuaW5uZXJIVE1MID0NCiAgICAgICAgICBNYXRoLmZsb29yKGRhdGEuY3VycmVudFRpbWUgLyA2MCkgKw0KICAgICAgICAgICI6IiArDQogICAgICAgICAgKE1hdGguZmxvb3IoZGF0YS5jdXJyZW50VGltZSAlIDYwKSA8IDEwID8gIjAiIDogIiIpICsNCiAgICAgICAgICBNYXRoLmZsb29yKGRhdGEuY3VycmVudFRpbWUgJSA2MCk7DQogICAgICAgIGwoImp1a2Vib3hNdXNpY1NjcnViIikudmFsdWUgPQ0KICAgICAgICAgIChkYXRhLmN1cnJlbnRUaW1lIC8gZGF0YS5kdXJhdGlvbikgKiAxMDAwOw0KICAgICAgICBsKCJqdWtlYm94TXVzaWNTY3J1YkVsYXBzZWQiKS5zdHlsZS53aWR0aCA9DQogICAgICAgICAgTWF0aC5tYXgoMCwgKGRhdGEuY3VycmVudFRpbWUgLyBkYXRhLmR1cmF0aW9uKSAqIDI4OCAtIDQpICsgInB4IjsNCiAgICAgICAgaWYgKCFub0xvb3ApIHNldFRpbWVvdXQoR2FtZS5qdWtlYm94LnVwZGF0ZU11c2ljQ3VycmVudFRpbWUsIDEwMDAgLyAyKTsNCiAgICAgIH0sDQogICAgICBtdXNpY1NjcnViOiBmdW5jdGlvbiAodGltZSkgew0KICAgICAgICB2YXIgZGF0YSA9DQogICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdWRpbzsNCiAgICAgICAgZGF0YS5jdXJyZW50VGltZSA9ICh0aW1lIC8gMTAwMCkgKiBkYXRhLmR1cmF0aW9uOw0KICAgICAgICBHYW1lLmp1a2Vib3gudXBkYXRlTXVzaWNDdXJyZW50VGltZSgpOw0KICAgICAgfSwNCiAgICB9Ow0KICAgIGlmIChNdXNpYykgew0KICAgICAgZm9yICh2YXIgaSBpbiBNdXNpYy50cmFja3MpIHsNCiAgICAgICAgR2FtZS5qdWtlYm94LnRyYWNrcy5wdXNoKE11c2ljLnRyYWNrc1tpXS5uYW1lKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBHYW1lLmxhc3QuY2hvaWNlc0Z1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJ1c2VzSWNvbiIgc3R5bGU9Im1hcmdpbjphdXRvO3dpZHRoOjQ4cHg7aGVpZ2h0OjQ4cHg7YmFja2dyb3VuZC1wb3NpdGlvbjonICsNCiAgICAgICAgLTMxICogNDggKw0KICAgICAgICAicHggIiArDQogICAgICAgIC0xMiAqIDQ4ICsNCiAgICAgICAgJ3B4OyIgaWQ9Imp1a2Vib3hQbGF5ZXIiPjwvZGl2Pic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMXB4O29wYWNpdHk6MC43O21hcmdpbi1ib3R0b206LTRweDsiIGlkPSJqdWtlYm94T25Tb3VuZE4iPicgKw0KICAgICAgICAoR2FtZS5qdWtlYm94Lm9uU291bmQgKyAxKSArDQogICAgICAgICIvIiArDQogICAgICAgIEdhbWUuanVrZWJveC5zb3VuZHMubGVuZ3RoICsNCiAgICAgICAgIjwvZGl2PiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgY2xhc3M9ImZhbmN5VGV4dCIgc3R5bGU9ImZvbnQtdmFyaWFudDpub3JtYWw7bGV0dGVyLXNwYWNpbmc6MnB4O3BhZGRpbmc6OHB4O2ZvbnQtc2l6ZToxOHB4OyIgaWQ9Imp1a2Vib3hPblNvdW5kIj4mYnVsbDsgJyArDQogICAgICAgIEdhbWUuanVrZWJveC5zb3VuZHNbR2FtZS5qdWtlYm94Lm9uU291bmRdICsNCiAgICAgICAgIiAmYnVsbDs8L2Rpdj4iOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO3RleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIGZhbmN5VGV4dCIgb25jbGljaz0iR2FtZS5qdWtlYm94LnNldFNvdW5kKEdhbWUuanVrZWJveC5vblNvdW5kLTEpOyI+JiN4YWI7PC9hPicgKw0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBmYW5jeVRleHQiIG9uY2xpY2s9IkdhbWUuanVrZWJveC5zZXRTb3VuZChHYW1lLmp1a2Vib3gub25Tb3VuZCk7Ij4nICsNCiAgICAgICAgbG9jKCJQbGF5IikgKw0KICAgICAgICAiPC9hPiIgKw0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBmYW5jeVRleHQiIG9uY2xpY2s9IkdhbWUuanVrZWJveC5zZXRTb3VuZChHYW1lLmp1a2Vib3gub25Tb3VuZCsxKTsiPiYjeGJiOzwvYT4nICsNCiAgICAgICAgIjwvZGl2PiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxzZWxlY3QgaWQ9Imp1a2Vib3hTb3VuZFNlbGVjdCIgb25jaGFuZ2U9IkdhbWUuanVrZWJveC5zZXRTb3VuZChwYXJzZUludCh0aGlzLnZhbHVlKSk7Ij4nOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLmp1a2Vib3guc291bmRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8b3B0aW9uIHZhbHVlPSInICsNCiAgICAgICAgICBpICsNCiAgICAgICAgICAnIicgKw0KICAgICAgICAgIChpID09IEdhbWUuanVrZWJveC5vblNvdW5kID8gJyBzZWxlY3RlZD0idHJ1ZSInIDogIiIpICsNCiAgICAgICAgICAiPiIgKw0KICAgICAgICAgIEdhbWUuanVrZWJveC5zb3VuZHNbaV0gKw0KICAgICAgICAgICI8L29wdGlvbj4iOw0KICAgICAgfQ0KICAgICAgc3RyICs9DQogICAgICAgICc8L3NlbGVjdD48YSBjbGFzcz0ib3B0aW9uIiBvbmNsaWNrPSJHYW1lLmp1a2Vib3guc2V0U291bmQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKkdhbWUuanVrZWJveC5zb3VuZHMubGVuZ3RoKSk7Ij4nICsNCiAgICAgICAgbG9jKCJSYW5kb20iKSArDQogICAgICAgICI8L2E+IjsNCiAgICAgIGlmIChBcHApIHsNCiAgICAgICAgdmFyIGRhdGEgPSBNdXNpYw0KICAgICAgICAgID8gTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdWRpbw0KICAgICAgICAgIDogMDsNCiAgICAgICAgdmFyIGR1ciA9IGRhdGEgPyBkYXRhLmR1cmF0aW9uICsgMSA6IDA7DQogICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9ImZhbmN5VGV4dCIgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljO2xldHRlci1zcGFjaW5nOjJweDtwYWRkaW5nOjhweDtmb250LXNpemU6MThweDsiIGlkPSJqdWtlYm94T25UcmFjayI+JmJ1bGw7ICcgKw0KICAgICAgICAgIGNhcChHYW1lLmp1a2Vib3gudHJhY2tzW0dhbWUuanVrZWJveC5vblRyYWNrXSkgKw0KICAgICAgICAgICIgJmJ1bGw7PC9kaXY+IjsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgaWQ9Imp1a2Vib3hPblRyYWNrQXV0aG9yIiBzdHlsZT0iZm9udC1zaXplOjExcHg7b3BhY2l0eTowLjc7bWFyZ2luLXRvcDotNHB4OyI+JyArDQogICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdXRob3IgKw0KICAgICAgICAgICI8L2Rpdj4iOw0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGRpdiBzdHlsZT0ibWFyZ2luOjRweCAwcHg7Zm9udC1zaXplOjExcHg7Ij4nICsNCiAgICAgICAgICAnPHNwYW4gaWQ9Imp1a2Vib3hNdXNpY1RpbWUiPicgKw0KICAgICAgICAgIChkYXRhDQogICAgICAgICAgICA/IE1hdGguZmxvb3IoZGF0YS5jdXJyZW50VGltZSAvIDYwKSArDQogICAgICAgICAgICAgICI6IiArDQogICAgICAgICAgICAgIChNYXRoLmZsb29yKGRhdGEuY3VycmVudFRpbWUgJSA2MCkgPCAxMCA/ICIwIiA6ICIiKSArDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoZGF0YS5jdXJyZW50VGltZSAlIDYwKQ0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L3NwYW4+IHwgIiArDQogICAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gZmFuY3lUZXh0IiBpZD0ianVrZWJveE11c2ljUGxheSIgb25jbGljaz0iR2FtZS5qdWtlYm94LnByZXNzUGxheU11c2ljKCk7Ij4nICsNCiAgICAgICAgICAoZGF0YSAmJiBkYXRhLnBhdXNlZCA/IGxvYygiUGxheSIpIDogbG9jKCJQYXVzZSIpKSArDQogICAgICAgICAgIjwvYT4iICsNCiAgICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBmYW5jeVRleHQgcHJlZkJ1dHRvbicgKw0KICAgICAgICAgIChHYW1lLmp1a2Vib3gudHJhY2tMb29wZWQgPyAiIiA6ICIgb2ZmIikgKw0KICAgICAgICAgICciIGlkPSJqdWtlYm94TXVzaWNMb29wIiBvbmNsaWNrPSJHYW1lLmp1a2Vib3gucHJlc3NMb29wTXVzaWMoKTsiPicgKw0KICAgICAgICAgIGxvYygiTG9vcCIpICsNCiAgICAgICAgICAiPC9hPiIgKw0KICAgICAgICAgICd8IDxzcGFuIGlkPSJqdWtlYm94TXVzaWNUb3RhbFRpbWUiPicgKw0KICAgICAgICAgIChkYXRhDQogICAgICAgICAgICA/IE1hdGguZmxvb3IoZHVyIC8gNjApICsNCiAgICAgICAgICAgICAgIjoiICsNCiAgICAgICAgICAgICAgKE1hdGguZmxvb3IoZHVyICUgNjApIDwgMTAgPyAiMCIgOiAiIikgKw0KICAgICAgICAgICAgICBNYXRoLmZsb29yKGR1ciAlIDYwKQ0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L3NwYW4+IiArDQogICAgICAgICAgIjwvZGl2PiI7DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTsiPjxpbnB1dCBjbGFzcz0ic2xpZGVyIiBzdHlsZT0iY2xlYXI6Ym90aDsiIHR5cGU9InJhbmdlIiBtaW49IjAiIG1heD0iMTAwMCIgc3RlcD0iMSIgdmFsdWU9IicgKw0KICAgICAgICAgIChkYXRhID8gKGRhdGEuY3VycmVudFRpbWUgLyBkYXRhLmR1cmF0aW9uKSAqIDEwMDAgOiAwKSArDQogICAgICAgICAgJyIgb25jaGFuZ2U9IkdhbWUuanVrZWJveC5tdXNpY1NjcnViKHRoaXMudmFsdWUpOyIgb25pbnB1dD0iR2FtZS5qdWtlYm94Lm11c2ljU2NydWIodGhpcy52YWx1ZSk7IiBpZD0ianVrZWJveE11c2ljU2NydWIiLz48ZGl2IGlkPSJqdWtlYm94TXVzaWNTY3J1YkVsYXBzZWQiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjNweDt0b3A6M3B4O2hlaWdodDo2cHg7d2lkdGg6MHB4O2JhY2tncm91bmQ6I2NjYztib3gtc2hhZG93OjFweCAxcHggMXB4ICM1NTUgaW5zZXQsMHB4IC0xcHggMHB4ICNmZmYgaW5zZXQ7Ym9yZGVyLXJhZGl1czoycHg7ei1pbmRleDoxMDtwb2ludGVyLWV2ZW50czpub25lOyI+PC9kaXY+PC9kaXY+JzsNCg0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBmYW5jeVRleHQgcHJlZkJ1dHRvbicgKw0KICAgICAgICAgIChHYW1lLmp1a2Vib3gudHJhY2tBdXRvID8gIiIgOiAiIG9mZiIpICsNCiAgICAgICAgICAnIiBvbmNsaWNrPSJHYW1lLmp1a2Vib3gucHJlc3NNdXNpY0F1dG8oKTsiIGlkPSJqdWtlYm94TXVzaWNBdXRvIj4nICsNCiAgICAgICAgICBsb2MoIkF1dG8iKSArDQogICAgICAgICAgJzwvYT48c2VsZWN0IGlkPSJqdWtlYm94VHJhY2tTZWxlY3QiIG9uY2hhbmdlPSJHYW1lLmp1a2Vib3guc2V0VHJhY2socGFyc2VJbnQodGhpcy52YWx1ZSkpOyI+JzsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLmp1a2Vib3gudHJhY2tzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT0iJyArDQogICAgICAgICAgICBpICsNCiAgICAgICAgICAgICciJyArDQogICAgICAgICAgICAoaSA9PSBHYW1lLmp1a2Vib3gub25UcmFjayA/ICcgc2VsZWN0ZWQ9InRydWUiJyA6ICIiKSArDQogICAgICAgICAgICAiPiIgKw0KICAgICAgICAgICAgR2FtZS5qdWtlYm94LnRyYWNrc1tpXSArDQogICAgICAgICAgICAiPC9vcHRpb24+IjsNCiAgICAgICAgfQ0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPC9zZWxlY3Q+PCEtLTxhIGNsYXNzPSJvcHRpb24gZmFuY3lUZXh0IHByZWZCdXR0b24nICsNCiAgICAgICAgICAoR2FtZS5qdWtlYm94LnRyYWNrQXV0byA/ICIiIDogIiBvZmYiKSArDQogICAgICAgICAgJyIgb25jbGljaz0iR2FtZS5qdWtlYm94LnByZXNzTXVzaWNTaHVmZmxlKCk7Ij4nICsNCiAgICAgICAgICBsb2MoIlNodWZmbGUiKSArDQogICAgICAgICAgIjwvYT4tLT4iOw0KDQogICAgICAgIHNldFRpbWVvdXQoR2FtZS5qdWtlYm94LnVwZGF0ZU11c2ljQ3VycmVudFRpbWUsIDUwMCk7DQogICAgICB9DQogICAgICByZXR1cm4gc3RyOw0KICAgIH07DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRGFsZ29uYSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJBIHBvcHVsYXIgS29yZWFuIGNhbmR5LWxpa2UgdHJlYXQuIE9uZSBvZiB0aGUgdHdpc3RlZCBnYW1lcyBwZW9wbGUgcGxheSB3aXRoIHRoZXNlIGlzIHRvIGNhcmVmdWxseSBleHRyYWN0IHRoZSBzaGFwZSBpbiB0aGUgbWlkZGxlLCB3aGljaCBtYXkgZW50aXRsZSBvbmUgdG8gYW5vdGhlciBmcmVlIGRhbGdvbmEuIFNraWxsZWQgcGxheWVycyBtYXkgcGVyZm9ybSB0aGlzIG92ZXIgYW5kIG92ZXIgdW50aWwgYmFua3J1cHRpbmcgdGhlIHNuYWNrIHZlbmRvci4iLA0KICAgICAgaWNvbjogWzI2LCAzNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0MyksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTcGljeSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJDb250YWluaW5nIGNob2NvbGF0ZSBjaGlwcyBwcmVwYXJlZCB3aXRoIGhvdCBwZXBwZXJzLCBqdXN0IGxpa2UgdGhlIEF6dGVjcyB1c2VkIHRvIG1ha2UuIFRoZXNlIGNvb2tpZXMgYXJlIG9uIHRoZSBhbmdyeSBzaWRlLiIsDQogICAgICBpY29uOiBbMjcsIDM0XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDQ0KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlNtaWxlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkFzIGV5ZXMgYXJlIHRoZSB3aW5kb3dzIHRvIHRoZSBzb3VsLCBzbyB0b28gYXJlIHRoZXNlIGNvb2tpZXMnIGZhY2lhbCBmZWF0dXJlcyBhIGdhcGluZyBvcGVuaW5nIHVudG8gdGhlaXIgY2hvY29sYXRleSBpbm5hcmRzLiBJcyBpdCBoYXBwaW5lc3MgdGhleSBmZWVsPyBPciBzb21ldGhpbmcgbGVzcyBodW1hbj8iLA0KICAgICAgaWNvbjogWzI4LCAzNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0NSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJLb2xhY2h5IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkFkYXB0ZWQgZnJvbSBhIHR5cGUgb2YgQ2VudHJhbCBFdXJvcGVhbiBwYXN0cnk7IG5lYXRseSBmb2xkZWQgdG8gaG9sZCBhIHNwb29uZnVsIG9mIGRlbGljaW91cyBqYW0sIGFzIGEgYmFzaGZ1bCBsaXR0bGUgZ2lmdCBmb3IgeW91ciBtb3V0aC4iLA0KICAgICAgaWNvbjogWzI5LCAzNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0NiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHb21tYSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJTdXJpbmFtZXNlIGNvcm5mbG91ciBjb29raWVzIHdpdGggc3ByaW5rbGVzIG9uIHRvcC4gVGhlIHVzYWdlIG9mIGNvcm4gaW1wYXJ0cyB0aGVtIGEgaGludCBvZiBjaGV3eSBwaXp6YXp6IC0gd2hpY2ggeW91IHdvdWxkbid0IGdldCB3aXRoIHdoZWF0LCBhIGZhbW91c2x5IHN0dWNrLXVwIGdyYWluLiIsDQogICAgICBpY29uOiBbMzAsIDM0XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDQ3KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlZlZ2FuIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkEgdmVnYW4gcmlmZiBvbiB0aGUgY2xhc3NpYyBjaG9jb2xhdGUgY2hpcCBjb29raWUgcmVjaXBlIHdpdGggYSBjb3VwbGUgc3Vic3RpdHV0aW9uczogdGhlIGJ1dHRlciBpcyBub3cgY29jb251dCBvaWwsIHRoZSBlZ2dzIGFyZSBjb3Juc3RhcmNoLCBhbmQgdGhlIHN1Y2tsaW5nIHBpZyB3YXMgY2xldmVybHkgcmVwbGFjZWQgd2l0aCB3aGVhdCBnbHV0ZW4uIFlvdSBjYW4gaGFyZGx5IHRlbGwuIiwNCiAgICAgIGljb246IFsyNCwgMzVdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDgpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ295b3RhcyIsDQogICAgICBkZXNjOiAiQSB3aWRlLCBkZWxpY2lvdXMgY29va2llIGZyb20gTWV4aWNvLCB1c3VhbGx5IGZpbGxlZCB3aXRoIHN0aWNreSBicm93biBzdWdhci4gTm90IHRvIGJlIGNvbmZ1c2VkIHdpdGggY295b3RhcywgdGhlIHJlc3VsdCBvZiB0aGUgY3Jvc3NicmVlZGluZyBiZXR3ZWVuIGEgTm9ydGggQW1lcmljYW4gY2FuaW5lIGFuZCBhIEphcGFuZXNlIGNhciBtYW51ZmFjdHVyZXIuIiwNCiAgICAgIGljb246IFsyMSwgMzVdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDkpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRnJvc3RlZCBzdWdhciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJNYXkgYmUgbW9yZSBzdHlsZSB0aGFuIHN1YnN0YW5jZSwgZGVwZW5kaW5nIG9uIHRoZSByZWNpcGUuIE5vdGhpbmcgdGhhdCBoaWRlcyBpdHNlbGYgdW5kZXIgdGhpcyBtdWNoIGZyb3N0aW5nIHNob3VsZCBiZSB0cnVzdGVkLiIsDQogICAgICBpY29uOiBbMjIsIDM1XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDUwKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIk1hcnNobWFsbG93IHNhbmR3aWNoIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlMnbW9yZXMnIG1vcmUgY2l2aWxpemVkIGNvdXNpbnM6IHR3byByZWd1bGFyIGNob2NvbGF0ZSBjaGlwIGNvb2tpZXMgam9pbmVkIGJ5IGEgZ29vZXksIG1lbHR5IG1hcnNobWFsbG93LiBUaGVvcmV0aWNhbGx5IG9uZSBjb3VsZCBhc3NlbWJsZSBhbGwga2luZHMgb2Ygb3RoZXIgdGhpbmdzIHRoaXMgd2F5LiBUaGUgbWluZCByYWNlcy4iLA0KICAgICAgaWNvbjogWzMxLCAzNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg1MSksDQogICAgfSk7DQoNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldlYiBjb29raWVzIiwNCiAgICAgIGRlc2M6DQogICAgICAgICJUaGUgb3JpZ2luYWwgcmVjaXBlOyBuYW1lZCBmb3IgdGhlIGRlbGljYXRlIHBhdHRlcm4gaW5zY3JpYmVkIG9uIHRoZWlyIHN1cmZhY2UgYnkgdGhlIGJha2luZyBwcm9jZXNzLiBFYXRpbmcgdGhlc2UgY2FuIHRlbGwgYSBsb3QgYWJvdXQgc29tZW9uZS4gSW52ZW50ZWQgYnkgd2VsbC1jb25uZWN0ZWQgYmFrZXJzLCBubyBkb3VidC4iICsNCiAgICAgICAgKEFwcA0KICAgICAgICAgID8gIjxicj5Pbmx5IG9mIGFueSB1c2UgaW4gQ29va2llIENsaWNrZXIncyB3ZWIgdmVyc2lvbiwgb2YgY291cnNlLiINCiAgICAgICAgICA6ICIiKSwNCiAgICAgIGljb246IFsyNSwgMzVdLA0KICAgICAgcG93ZXI6IEFwcCA/IDAgOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDUyKSwNCiAgICB9KTsNCiAgICBpZiAoQXBwKSBHYW1lLmxhc3QucG9vbCA9ICJkZWJ1ZyI7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTdGVhbWVkIGNvb2tpZXMiLA0KICAgICAgZGVzYzoNCiAgICAgICAgIkxvY2FsaXplZCBlbnRpcmVseSB3aXRoaW4gdGhpcyBnYW1pbmcgcGxhdGZvcm0/IFllcyEgQmFrZWQgd2l0aCB0aGUgcG93ZXIgb2Ygc3RlYW0sIGluIGEgdG91Y2ggb2YgY3V0dGluZy1lZGdlIG1vZGVybml0eSBub3Qgc2VlbiBzaW5jZSB0aGUgaW5kdXN0cmlhbCByZXZvbHV0aW9uLiIgKw0KICAgICAgICAoIUFwcA0KICAgICAgICAgID8gIjxicj5Pbmx5IG9mIGFueSB1c2UgaW4gQ29va2llIENsaWNrZXIncyBTdGVhbSB2ZXJzaW9uLCBvZiBjb3Vyc2UuIg0KICAgICAgICAgIDogIiIpLA0KICAgICAgaWNvbjogWzI2LCAzNV0sDQogICAgICBwb3dlcjogQXBwID8gNSA6IDAsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNTIpLA0KICAgIH0pOw0KICAgIGlmICghQXBwKSBHYW1lLmxhc3QucG9vbCA9ICJkZWJ1ZyI7DQoNCiAgICBvcmRlciA9IDEwMDUwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRGVlcC1mcmllZCBjb29raWUgZG91Z2giLA0KICAgICAgZGVzYzogIlRoZXknbGwgZnJ5IGFueXRoaW5nIHRoZXNlIGRheXMuIERyaXp6bGVkIGluIGhvdCBjaG9jb2xhdGUgc3lydXAsIGp1c3QgbGlrZSBpbiBzdGF0ZSBmYWlycy4gU3Bpa2VzIHVwIHlvdXIgYmxvb2Qgc3VnYXIgQU5EIHlvdXIgY2hvbGVzdGVyb2whIiwNCiAgICAgIGljb246IFsyMywgMzVdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYXliZSBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCA0NyksDQogICAgfSk7DQoNCiAgICAvL2VuZCBvZiB1cGdyYWRlcw0KDQogICAgR2FtZS5zZWFzb25zID0gew0KICAgICAgY2hyaXN0bWFzOiB7DQogICAgICAgIG5hbWU6ICJDaHJpc3RtYXMiLA0KICAgICAgICBzdGFydDogIkNocmlzdG1hcyBzZWFzb24gaGFzIHN0YXJ0ZWQhIiwNCiAgICAgICAgb3ZlcjogIkNocmlzdG1hcyBzZWFzb24gaXMgb3Zlci4iLA0KICAgICAgICB0cmlnZ2VyOiAiRmVzdGl2ZSBiaXNjdWl0IiwNCiAgICAgIH0sDQogICAgICB2YWxlbnRpbmVzOiB7DQogICAgICAgIG5hbWU6ICJWYWxlbnRpbmUncyBkYXkiLA0KICAgICAgICBzdGFydDogIlZhbGVudGluZSdzIGRheSBoYXMgc3RhcnRlZCEiLA0KICAgICAgICBvdmVyOiAiVmFsZW50aW5lJ3MgZGF5IGlzIG92ZXIuIiwNCiAgICAgICAgdHJpZ2dlcjogIkxvdmVzaWNrIGJpc2N1aXQiLA0KICAgICAgfSwNCiAgICAgIGZvb2xzOiB7DQogICAgICAgIG5hbWU6ICJCdXNpbmVzcyBkYXkiLA0KICAgICAgICBzdGFydDogIkJ1c2luZXNzIGRheSBoYXMgc3RhcnRlZCEiLA0KICAgICAgICBvdmVyOiAiQnVzaW5lc3MgZGF5IGlzIG92ZXIuIiwNCiAgICAgICAgdHJpZ2dlcjogIkZvb2wncyBiaXNjdWl0IiwNCiAgICAgIH0sDQogICAgICBlYXN0ZXI6IHsNCiAgICAgICAgbmFtZTogIkVhc3RlciIsDQogICAgICAgIHN0YXJ0OiAiRWFzdGVyIHNlYXNvbiBoYXMgc3RhcnRlZCEiLA0KICAgICAgICBvdmVyOiAiRWFzdGVyIHNlYXNvbiBpcyBvdmVyLiIsDQogICAgICAgIHRyaWdnZXI6ICJCdW5ueSBiaXNjdWl0IiwNCiAgICAgIH0sDQogICAgICBoYWxsb3dlZW46IHsNCiAgICAgICAgbmFtZTogIkhhbGxvd2VlbiIsDQogICAgICAgIHN0YXJ0OiAiSGFsbG93ZWVuIGhhcyBzdGFydGVkISIsDQogICAgICAgIG92ZXI6ICJIYWxsb3dlZW4gaXMgb3Zlci4iLA0KICAgICAgICB0cmlnZ2VyOiAiR2hvc3RseSBiaXNjdWl0IiwNCiAgICAgIH0sDQogICAgfTsNCiAgICBpZiAoIUVOKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2Vhc29ucykgew0KICAgICAgICB2YXIgaXQgPSBHYW1lLnNlYXNvbnNbaV07DQogICAgICAgIGl0Lm5hbWUgPSBsb2MoaXQubmFtZSk7DQogICAgICAgIGl0LnN0YXJ0ID0gbG9jKCIlMSBoYXMgc3RhcnRlZCEiLCBpdC5uYW1lKTsNCiAgICAgICAgaXQub3ZlciA9IGxvYygiJTEgaXMgb3Zlci4iLCBpdC5uYW1lKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBHYW1lLmxpc3RUaW55T3duZWRVcGdyYWRlcyA9IGZ1bmN0aW9uIChhcnIpIHsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmIChHYW1lLkhhcyhhcnJbaV0pKSB7DQogICAgICAgICAgdmFyIGl0ID0gR2FtZS5VcGdyYWRlc1thcnJbaV1dOw0KICAgICAgICAgIHN0ciArPSB0aW55SWNvbihpdC5pY29uKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHN0cjsNCiAgICB9Ow0KDQogICAgR2FtZS5zYW50YURyb3BzID0gWw0KICAgICAgIkluY3JlYXNlZCBtZXJyaW5lc3MiLA0KICAgICAgIkltcHJvdmVkIGpvbGxpbmVzcyIsDQogICAgICAiQSBsdW1wIG9mIGNvYWwiLA0KICAgICAgIkFuIGl0Y2h5IHN3ZWF0ZXIiLA0KICAgICAgIlJlaW5kZWVyIGJha2luZyBncm91bmRzIiwNCiAgICAgICJXZWlnaHRlZCBzbGVpZ2hzIiwNCiAgICAgICJIbyBobyBoby1mbGF2b3JlZCBmcm9zdGluZyIsDQogICAgICAiU2Vhc29uIHNhdmluZ3MiLA0KICAgICAgIlRveSB3b3Jrc2hvcCIsDQogICAgICAiTmF1Z2h0eSBsaXN0IiwNCiAgICAgICJTYW50YSdzIGJvdHRvbWxlc3MgYmFnIiwNCiAgICAgICJTYW50YSdzIGhlbHBlcnMiLA0KICAgICAgIlNhbnRhJ3MgbGVnYWN5IiwNCiAgICAgICJTYW50YSdzIG1pbGsgYW5kIGNvb2tpZXMiLA0KICAgIF07DQoNCiAgICBHYW1lLkdldEhvd01hbnlTYW50YURyb3BzID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG51bSA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2FudGFEcm9wcykgew0KICAgICAgICBpZiAoR2FtZS5IYXMoR2FtZS5zYW50YURyb3BzW2ldKSkgbnVtKys7DQogICAgICB9DQogICAgICByZXR1cm4gbnVtOw0KICAgIH07DQoNCiAgICBHYW1lLnJlaW5kZWVyRHJvcHMgPSBbDQogICAgICAiQ2hyaXN0bWFzIHRyZWUgYmlzY3VpdHMiLA0KICAgICAgIlNub3dmbGFrZSBiaXNjdWl0cyIsDQogICAgICAiU25vd21hbiBiaXNjdWl0cyIsDQogICAgICAiSG9sbHkgYmlzY3VpdHMiLA0KICAgICAgIkNhbmR5IGNhbmUgYmlzY3VpdHMiLA0KICAgICAgIkJlbGwgYmlzY3VpdHMiLA0KICAgICAgIlByZXNlbnQgYmlzY3VpdHMiLA0KICAgIF07DQogICAgR2FtZS5HZXRIb3dNYW55UmVpbmRlZXJEcm9wcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBudW0gPSAwOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnJlaW5kZWVyRHJvcHMpIHsNCiAgICAgICAgaWYgKEdhbWUuSGFzKEdhbWUucmVpbmRlZXJEcm9wc1tpXSkpIG51bSsrOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIG51bTsNCiAgICB9Ow0KICAgIC8qZm9yICh2YXIgaSBpbiBHYW1lLnNhbnRhRHJvcHMpDQoJCXsNCgkJCUdhbWUuVXBncmFkZXNbR2FtZS5zYW50YURyb3BzW2ldXS5kZXNjRnVuYz1mdW5jdGlvbigpe3JldHVybiAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij5Zb3UgY3VycmVudGx5IG93biA8Yj4nK0dhbWUuR2V0SG93TWFueVNhbnRhRHJvcHMoKSsnLycrR2FtZS5zYW50YURyb3BzLmxlbmd0aCsnPC9iPiBvZiBTYW50YVwncyBnaWZ0cy48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nK3RoaXMuZGRlc2M7fTsNCgkJfSovDQoNCiAgICBHYW1lLnNlYXNvbkRyb3BzID0gR2FtZS5oZWFydERyb3BzDQogICAgICAuY29uY2F0KEdhbWUuaGFsbG93ZWVuRHJvcHMpDQogICAgICAuY29uY2F0KEdhbWUuZWFzdGVyRWdncykNCiAgICAgIC5jb25jYXQoR2FtZS5zYW50YURyb3BzKQ0KICAgICAgLmNvbmNhdChHYW1lLnJlaW5kZWVyRHJvcHMpOw0KDQogICAgR2FtZS5zYXlTZWFzb25Td2l0Y2hVc2VzID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEdhbWUuc2Vhc29uVXNlcyA9PSAwKQ0KICAgICAgICByZXR1cm4gbG9jKCJZb3UgaGF2ZW4ndCBzd2l0Y2hlZCBzZWFzb25zIHRoaXMgYXNjZW5zaW9uIHlldC4iKTsNCiAgICAgIHJldHVybiBFTg0KICAgICAgICA/ICJZb3UndmUgc3dpdGNoZWQgc2Vhc29ucyA8Yj4iICsNCiAgICAgICAgICAgIChHYW1lLnNlYXNvblVzZXMgPT0gMQ0KICAgICAgICAgICAgICA/ICJvbmNlIg0KICAgICAgICAgICAgICA6IEdhbWUuc2Vhc29uVXNlcyA9PSAyDQogICAgICAgICAgICAgID8gInR3aWNlIg0KICAgICAgICAgICAgICA6IEdhbWUuc2Vhc29uVXNlcyArICIgdGltZXMiKSArDQogICAgICAgICAgICAiPC9iPiB0aGlzIGFzY2Vuc2lvbi4iDQogICAgICAgIDogR2FtZS5zZWFzb25Vc2VzID09IDENCiAgICAgICAgPyBsb2MoIllvdSd2ZSBzd2l0Y2hlZCBzZWFzb25zIDxiPm9uY2U8L2I+IHRoaXMgYXNjZW5zaW9uLiIpDQogICAgICAgIDogbG9jKA0KICAgICAgICAgICAgIllvdSd2ZSBzd2l0Y2hlZCBzZWFzb25zIDxiPiUxIHRpbWVzPC9iPiB0aGlzIGFzY2Vuc2lvbi4iLA0KICAgICAgICAgICAgR2FtZS5zZWFzb25Vc2VzDQogICAgICAgICAgKTsNCiAgICB9Ow0KICAgIEdhbWUuVXBncmFkZXNbIkZlc3RpdmUgYmlzY3VpdCJdLmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgIEdhbWUubGlzdFRpbnlPd25lZFVwZ3JhZGVzKEdhbWUuc2FudGFEcm9wcykgKw0KICAgICAgICAiPGJyPjxicj4iICsNCiAgICAgICAgKEVODQogICAgICAgICAgPyAiWW91J3ZlIHB1cmNoYXNlZCA8Yj4iICsNCiAgICAgICAgICAgIEdhbWUuR2V0SG93TWFueVNhbnRhRHJvcHMoKSArDQogICAgICAgICAgICAiLyIgKw0KICAgICAgICAgICAgR2FtZS5zYW50YURyb3BzLmxlbmd0aCArDQogICAgICAgICAgICAiPC9iPiBvZiBTYW50YSdzIGdpZnRzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIlNlYXNvbmFsIGNvb2tpZXMgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55U2FudGFEcm9wcygpICsgIi8iICsgR2FtZS5zYW50YURyb3BzLmxlbmd0aA0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIEdhbWUubGlzdFRpbnlPd25lZFVwZ3JhZGVzKEdhbWUucmVpbmRlZXJEcm9wcykgKw0KICAgICAgICAiPGJyPjxicj4iICsNCiAgICAgICAgKEVODQogICAgICAgICAgPyAiWW91J3ZlIHB1cmNoYXNlZCA8Yj4iICsNCiAgICAgICAgICAgIEdhbWUuR2V0SG93TWFueVJlaW5kZWVyRHJvcHMoKSArDQogICAgICAgICAgICAiLyIgKw0KICAgICAgICAgICAgR2FtZS5yZWluZGVlckRyb3BzLmxlbmd0aCArDQogICAgICAgICAgICAiPC9iPiByZWluZGVlciBjb29raWVzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIlJlaW5kZWVyIGNvb2tpZXMgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55UmVpbmRlZXJEcm9wcygpICsgIi8iICsgR2FtZS5yZWluZGVlckRyb3BzLmxlbmd0aA0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIEdhbWUuc2F5U2Vhc29uU3dpdGNoVXNlcygpICsNCiAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjwvZGl2PicgKw0KICAgICAgICB0aGlzLmRkZXNjDQogICAgICApOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlc1siQnVubnkgYmlzY3VpdCJdLmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgIEdhbWUubGlzdFRpbnlPd25lZFVwZ3JhZGVzKEdhbWUuZWFzdGVyRWdncykgKw0KICAgICAgICAiPGJyPjxicj4iICsNCiAgICAgICAgKEVODQogICAgICAgICAgPyAiWW91J3ZlIHB1cmNoYXNlZCA8Yj4iICsNCiAgICAgICAgICAgIEdhbWUuR2V0SG93TWFueUVnZ3MoKSArDQogICAgICAgICAgICAiLyIgKw0KICAgICAgICAgICAgR2FtZS5lYXN0ZXJFZ2dzLmxlbmd0aCArDQogICAgICAgICAgICAiPC9iPiBlZ2dzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIkVnZ3MgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55RWdncygpICsgIi8iICsgR2FtZS5lYXN0ZXJFZ2dzLmxlbmd0aA0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIEdhbWUuc2F5U2Vhc29uU3dpdGNoVXNlcygpICsNCiAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjwvZGl2PicgKw0KICAgICAgICB0aGlzLmRkZXNjDQogICAgICApOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlc1siR2hvc3RseSBiaXNjdWl0Il0uZGVzY0Z1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgR2FtZS5saXN0VGlueU93bmVkVXBncmFkZXMoR2FtZS5oYWxsb3dlZW5Ecm9wcykgKw0KICAgICAgICAiPGJyPjxicj4iICsNCiAgICAgICAgKEVODQogICAgICAgICAgPyAiWW91J3ZlIHB1cmNoYXNlZCA8Yj4iICsNCiAgICAgICAgICAgIEdhbWUuR2V0SG93TWFueUhhbGxvd2VlbkRyb3BzKCkgKw0KICAgICAgICAgICAgIi8iICsNCiAgICAgICAgICAgIEdhbWUuaGFsbG93ZWVuRHJvcHMubGVuZ3RoICsNCiAgICAgICAgICAgICI8L2I+IGhhbGxvd2VlbiBjb29raWVzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIlNlYXNvbmFsIGNvb2tpZXMgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55SGFsbG93ZWVuRHJvcHMoKSArICIvIiArIEdhbWUuaGFsbG93ZWVuRHJvcHMubGVuZ3RoDQogICAgICAgICAgICApKSArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgR2FtZS5zYXlTZWFzb25Td2l0Y2hVc2VzKCkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLlVwZ3JhZGVzWyJMb3Zlc2ljayBiaXNjdWl0Il0uZGVzY0Z1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgR2FtZS5saXN0VGlueU93bmVkVXBncmFkZXMoR2FtZS5oZWFydERyb3BzKSArDQogICAgICAgICI8YnI+PGJyPiIgKw0KICAgICAgICAoRU4NCiAgICAgICAgICA/ICJZb3UndmUgcHVyY2hhc2VkIDxiPiIgKw0KICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55SGVhcnREcm9wcygpICsNCiAgICAgICAgICAgICIvIiArDQogICAgICAgICAgICBHYW1lLmhlYXJ0RHJvcHMubGVuZ3RoICsNCiAgICAgICAgICAgICI8L2I+IGhlYXJ0IGJpc2N1aXRzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIlNlYXNvbmFsIGNvb2tpZXMgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55SGVhcnREcm9wcygpICsgIi8iICsgR2FtZS5oZWFydERyb3BzLmxlbmd0aA0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIEdhbWUuc2F5U2Vhc29uU3dpdGNoVXNlcygpICsNCiAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjwvZGl2PicgKw0KICAgICAgICB0aGlzLmRkZXNjDQogICAgICApOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlc1siRm9vbCdzIGJpc2N1aXQiXS5kZXNjRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBHYW1lLnNheVNlYXNvblN3aXRjaFVzZXMoKSArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48L2Rpdj4nICsNCiAgICAgICAgdGhpcy5kZGVzYw0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgR2FtZS5jb21wdXRlU2Vhc29uUHJpY2VzID0gZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNlYXNvbnMpIHsNCiAgICAgICAgR2FtZS5zZWFzb25zW2ldLnRyaWdnZXJVcGdyYWRlLnByaWNlRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB2YXIgbSA9IDE7DQogICAgICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoInNlYXNvbnMiKTsNCiAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgbSAqPSAyOw0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG0gKj0gMS41Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIG0gKj0gMS4yNTsNCiAgICAgICAgICB9DQogICAgICAgICAgLy9yZXR1cm4gR2FtZS5zZWFzb25UcmlnZ2VyQmFzZVByaWNlKk1hdGgucG93KDIsR2FtZS5zZWFzb25Vc2VzKSptOw0KICAgICAgICAgIC8vcmV0dXJuIEdhbWUuY29va2llc1BzKjYwKk1hdGgucG93KDEuNSxHYW1lLnNlYXNvblVzZXMpKm07DQogICAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgIEdhbWUuc2Vhc29uVHJpZ2dlckJhc2VQcmljZSArDQogICAgICAgICAgICBHYW1lLnVuYnVmZmVkQ3BzICogNjAgKiBNYXRoLnBvdygxLjUsIEdhbWUuc2Vhc29uVXNlcykgKiBtDQogICAgICAgICAgKTsNCiAgICAgICAgfTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuY29tcHV0ZVNlYXNvbnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2Vhc29ucykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzW0dhbWUuc2Vhc29uc1tpXS50cmlnZ2VyXTsNCiAgICAgICAgR2FtZS5zZWFzb25zW2ldLnRyaWdnZXJVcGdyYWRlID0gbWU7DQogICAgICAgIG1lLnBvb2wgPSAidG9nZ2xlIjsNCiAgICAgICAgbWUuYnV5RnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgR2FtZS5zZWFzb25Vc2VzICs9IDE7DQogICAgICAgICAgR2FtZS5jb21wdXRlU2Vhc29uUHJpY2VzKCk7DQogICAgICAgICAgLy9HYW1lLkxvY2sodGhpcy5uYW1lKTsNCiAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2Vhc29ucykgew0KICAgICAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tHYW1lLnNlYXNvbnNbaV0udHJpZ2dlcl07DQogICAgICAgICAgICBpZiAobWUubmFtZSAhPSB0aGlzLm5hbWUpIHsNCiAgICAgICAgICAgICAgR2FtZS5Mb2NrKG1lLm5hbWUpOw0KICAgICAgICAgICAgICBHYW1lLlVubG9jayhtZS5uYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKEdhbWUuc2Vhc29uICE9ICIiICYmIEdhbWUuc2Vhc29uICE9IHRoaXMuc2Vhc29uKSB7DQogICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgR2FtZS5zZWFzb25zW0dhbWUuc2Vhc29uXS5vdmVyICsgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicsDQogICAgICAgICAgICAgICIiLA0KICAgICAgICAgICAgICBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLnRyaWdnZXJVcGdyYWRlLmljb24sDQogICAgICAgICAgICAgIDQNCiAgICAgICAgICAgICk7DQogICAgICAgICAgfQ0KICAgICAgICAgIEdhbWUuc2Vhc29uID0gdGhpcy5zZWFzb247DQogICAgICAgICAgR2FtZS5zZWFzb25UID0gR2FtZS5nZXRTZWFzb25EdXJhdGlvbigpOw0KICAgICAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnJlZHJhdygpOw0KICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgR2FtZS5zZWFzb25zW3RoaXMuc2Vhc29uXS5zdGFydCArICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nLA0KICAgICAgICAgICAgIiIsDQogICAgICAgICAgICB0aGlzLmljb24sDQogICAgICAgICAgICA0DQogICAgICAgICAgKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBtZS5jbGlja0Z1bmN0aW9uID0gKGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAvL3VuZG8gc2Vhc29uDQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIG1lLmJvdWdodCAmJg0KICAgICAgICAgICAgICBHYW1lLnNlYXNvbiAmJg0KICAgICAgICAgICAgICBtZSA9PSBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLnRyaWdnZXJVcGdyYWRlDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgbWUubG9zZSgpOw0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLm92ZXIsDQogICAgICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAgICAgR2FtZS5zZWFzb25zW0dhbWUuc2Vhc29uXS50cmlnZ2VyVXBncmFkZS5pY29uDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiU2Vhc29uIHN3aXRjaGVyIikpIHsNCiAgICAgICAgICAgICAgICBHYW1lLlVubG9jayhHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLnRyaWdnZXIpOw0KICAgICAgICAgICAgICAgIEdhbWUuc2Vhc29uc1tHYW1lLnNlYXNvbl0udHJpZ2dlclVwZ3JhZGUuYm91Z2h0ID0gMDsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgICBHYW1lLnNlYXNvbiA9IEdhbWUuYmFzZVNlYXNvbjsNCiAgICAgICAgICAgICAgR2FtZS5zZWFzb25UID0gLTE7DQogICAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9Ow0KICAgICAgICB9KShtZSk7DQoNCiAgICAgICAgbWUuZGlzcGxheUZ1bmNXaGVuT3duZWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICAgICAgbG9jKCJUaW1lIHJlbWFpbmluZzoiKSArDQogICAgICAgICAgICAiPGJyPjxiPiIgKw0KICAgICAgICAgICAgKEdhbWUuSGFzKCJFdGVybmFsIHNlYXNvbnMiKQ0KICAgICAgICAgICAgICA/IGxvYygiZm9yZXZlciIpDQogICAgICAgICAgICAgIDogR2FtZS5zYXlUaW1lKEdhbWUuc2Vhc29uVCwgLTEpKSArDQogICAgICAgICAgICAnPC9iPjxkaXYgc3R5bGU9ImZvbnQtc2l6ZTo4MCU7Ij4oJyArDQogICAgICAgICAgICBsb2MoIkNsaWNrIGFnYWluIHRvIGNhbmNlbCBzZWFzb24iKSArDQogICAgICAgICAgICAiKTwvZGl2PjwvZGl2PiINCiAgICAgICAgICApOw0KICAgICAgICB9Ow0KICAgICAgICBtZS50aW1lckRpc3BsYXkgPSAoZnVuY3Rpb24gKHVwZ3JhZGUpIHsNCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAhR2FtZS5VcGdyYWRlc1t1cGdyYWRlLm5hbWVdLmJvdWdodCB8fA0KICAgICAgICAgICAgICBHYW1lLkhhcygiRXRlcm5hbCBzZWFzb25zIikNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICAgICAgZWxzZSByZXR1cm4gMSAtIEdhbWUuc2Vhc29uVCAvIEdhbWUuZ2V0U2Vhc29uRHVyYXRpb24oKTsNCiAgICAgICAgICB9Ow0KICAgICAgICB9KShtZSk7DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLmdldFNlYXNvbkR1cmF0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuZnBzICogNjAgKiA2MCAqIDI0Ow0KICAgIH07DQogICAgR2FtZS5jb21wdXRlU2Vhc29ucygpOw0KDQogICAgLy9hbGVydCB1bnRpZXJlZCBidWlsZGluZyB1cGdyYWRlcw0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgIGlmICgNCiAgICAgICAgbWUub3JkZXIgPj0gMjAwICYmDQogICAgICAgIG1lLm9yZGVyIDwgMjAwMCAmJg0KICAgICAgICAhbWUudGllciAmJg0KICAgICAgICBtZS5uYW1lLmluZGV4T2YoImdyYW5kbWEiKSA9PSAtMSAmJg0KICAgICAgICBtZS5wb29sICE9ICJwcmVzdGlnZSINCiAgICAgICkNCiAgICAgICAgY29uc29sZS5sb2cobWUubmFtZSArICIgaGFzIG5vIHRpZXIuIik7DQogICAgfQ0KDQogICAgR2FtZS5VcGdyYWRlc0J5UG9vbCA9IHsga2l0dGVuOiBbXSB9Ow0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgaWYgKCFHYW1lLlVwZ3JhZGVzQnlQb29sW0dhbWUuVXBncmFkZXNbaV0ucG9vbF0pDQogICAgICAgIEdhbWUuVXBncmFkZXNCeVBvb2xbR2FtZS5VcGdyYWRlc1tpXS5wb29sXSA9IFtdOw0KICAgICAgR2FtZS5VcGdyYWRlc0J5UG9vbFtHYW1lLlVwZ3JhZGVzW2ldLnBvb2xdLnB1c2goR2FtZS5VcGdyYWRlc1tpXSk7DQogICAgICBpZiAoR2FtZS5VcGdyYWRlc1tpXS5raXR0ZW4pDQogICAgICAgIEdhbWUuVXBncmFkZXNCeVBvb2xbImtpdHRlbiJdLnB1c2goR2FtZS5VcGdyYWRlc1tpXSk7DQogICAgfQ0KDQogICAgR2FtZS5QcmVzdGlnZVVwZ3JhZGVzID0gW107DQogICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzKSB7DQogICAgICBpZiAoDQogICAgICAgIEdhbWUuVXBncmFkZXNbaV0ucG9vbCA9PSAicHJlc3RpZ2UiIHx8DQogICAgICAgIEdhbWUuVXBncmFkZXNbaV0ucG9vbCA9PSAicHJlc3RpZ2VEZWNvciINCiAgICAgICkgew0KICAgICAgICBHYW1lLlByZXN0aWdlVXBncmFkZXMucHVzaChHYW1lLlVwZ3JhZGVzW2ldKTsNCiAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNbaV0ucG9zWCB8fCBHYW1lLlVwZ3JhZGVzW2ldLnBvc1kpDQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tpXS5wbGFjZWRCeUNvZGUgPSB0cnVlOw0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICBHYW1lLlVwZ3JhZGVzW2ldLnBvc1ggPSAwOw0KICAgICAgICAgIEdhbWUuVXBncmFkZXNbaV0ucG9zWSA9IDA7DQogICAgICAgIH0NCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuVXBncmFkZXNbaV0ucGFyZW50cy5sZW5ndGggPT0gMCAmJg0KICAgICAgICAgIEdhbWUuVXBncmFkZXNbaV0ubmFtZSAhPSAiTGVnYWN5Ig0KICAgICAgICApDQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tpXS5wYXJlbnRzID0gWyJMZWdhY3kiXTsNCiAgICAgICAgZm9yICh2YXIgaWkgaW4gR2FtZS5VcGdyYWRlc1tpXS5wYXJlbnRzKSB7DQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tpXS5wYXJlbnRzW2lpXSA9DQogICAgICAgICAgICBHYW1lLlVwZ3JhZGVzW0dhbWUuVXBncmFkZXNbaV0ucGFyZW50c1tpaV1dOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgR2FtZS5nb2xkZW5Db29raWVVcGdyYWRlcyA9IFsNCiAgICAgICJHZXQgbHVja3kiLA0KICAgICAgIkx1Y2t5IGRheSIsDQogICAgICAiU2VyZW5kaXBpdHkiLA0KICAgICAgIkhlYXZlbmx5IGx1Y2siLA0KICAgICAgIkxhc3RpbmcgZm9ydHVuZSIsDQogICAgICAiRGVjaXNpdmUgZmF0ZSIsDQogICAgICAiTHVja3kgZGlnaXQiLA0KICAgICAgIkx1Y2t5IG51bWJlciIsDQogICAgICAiTHVja3kgcGF5b3V0IiwNCiAgICAgICJHb2xkZW4gZ29vc2UgZWdnIiwNCiAgICBdOw0KDQogICAgR2FtZS5jb29raWVVcGdyYWRlcyA9IFtdOw0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgIGlmIChtZS5wb29sID09ICJjb29raWUiIHx8IG1lLnBzZXVkb0Nvb2tpZSkgR2FtZS5jb29raWVVcGdyYWRlcy5wdXNoKG1lKTsNCiAgICAgIGlmIChtZS50aWVyKSBHYW1lLlRpZXJzW21lLnRpZXJdLnVwZ3JhZGVzLnB1c2gobWUpOw0KICAgIH0NCiAgICBmb3IgKHZhciBpIGluIEdhbWUuVW5sb2NrQXQpIHsNCiAgICAgIEdhbWUuVXBncmFkZXNbR2FtZS5VbmxvY2tBdFtpXS5uYW1lXS51bmxvY2tBdCA9IEdhbWUuVW5sb2NrQXRbaV07DQogICAgfQ0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgaWYgKEdhbWUuVXBncmFkZXNbaV0ucG9vbCA9PSAicHJlc3RpZ2UiKQ0KICAgICAgICBHYW1lLlVwZ3JhZGVzW2ldLm9yZGVyID0gR2FtZS5VcGdyYWRlc1tpXS5pZDsNCiAgICB9DQoNCiAgICAvKnZhciBvbGRQcmVzdGlnZVByaWNlcz17IkNoaW1lcmEiOjU3NjQ4MDEsIlN5bmVyZ2llcyBWb2wuIEkiOjI1MjUsIlN5bmVyZ2llcyBWb2wuIElJIjoyNTI1MjUsIkxhYmVsIHByaW50ZXIiOjk5OTl9Ow0KCQlmb3IgKHZhciBpIGluIG9sZFByZXN0aWdlUHJpY2VzKXtHYW1lLlVwZ3JhZGVzW2ldLmJhc2VQcmljZT1vbGRQcmVzdGlnZVByaWNlc1tpXTt9Ki8NCg0KICAgIEdhbWUuVXBncmFkZVBvc2l0aW9ucyA9IHsNCiAgICAgIDE0MTogWzExOCwgLTQyXSwNCiAgICAgIDE4MTogWy01NTUsIC05M10sDQogICAgICAyNTM6IFstMjM3LCAtMjI2XSwNCiAgICAgIDI1NDogWy01NiwgLTIzNF0sDQogICAgICAyNTU6IFstMTQ5LCAtMjY3XSwNCiAgICAgIDI2NDogWzY4LCA5N10sDQogICAgICAyNjU6IFsxNTcsIDE5Nl0sDQogICAgICAyNjY6IFsyODcsIDIxMl0sDQogICAgICAyNjc6IFs0MTMsIDE1N10sDQogICAgICAyNjg6IFs0ODAsIDM1XSwNCiAgICAgIDI2OTogWy02NDAsIDQyXSwNCiAgICAgIDI3MDogWy00NzEsIC0yMjhdLA0KICAgICAgMjcxOiBbLTY5MCwgLTE3OF0sDQogICAgICAyNzI6IFstNTkxLCAtMjQ5XSwNCiAgICAgIDI3MzogWy03MTEsIC01OF0sDQogICAgICAyNzQ6IFsyNzAsIC0zMjhdLA0KICAgICAgMjc1OiBbMzE3LCAtNDM5XSwNCiAgICAgIDI3NjogWzMzMywgLTU1Nl0sDQogICAgICAyNzc6IFszMzQsIC02NzZdLA0KICAgICAgMjc4OiBbMzMzLCAtNzk2XSwNCiAgICAgIDI3OTogWzMyOCwgLTkyMl0sDQogICAgICAyODA6IFszMDMsIC0xMDQwXSwNCiAgICAgIDI4MTogWzE5NCwgLTIzMF0sDQogICAgICAyODI6IFstMjkzLCAxNTZdLA0KICAgICAgMjgzOiBbLTMzNSwgMjg5XSwNCiAgICAgIDI4NDogWy0zMjgsIDQyMl0sDQogICAgICAyODU6IFstMjQ3LCA1NjddLA0KICAgICAgMjg2OiBbLTM3NSwgNTc5XSwNCiAgICAgIDI4NzogWy0yOTYsIDcyNl0sDQogICAgICAyODg6IFstMjYwLCAtMzk2XSwNCiAgICAgIDI4OTogWy0zNzUsIC01MDJdLA0KICAgICAgMjkwOiBbLTEyNywgLTQxNV0sDQogICAgICAyOTE6IFs0NzksIC03MzldLA0KICAgICAgMjkyOiBbLTM5OSwgLTY0OV0sDQogICAgICAyOTM6IFstNDAxLCAtODA2XSwNCiAgICAgIDMyMzogWy03NiwgMTA5XSwNCiAgICAgIDMyNTogWzE5OCwgLTExNTNdLA0KICAgICAgMzI2OiBbLTI3MCwgLTEzNF0sDQogICAgICAzMjc6IFstMjIxLCAyNjFdLA0KICAgICAgMzI4OiBbMTksIDI0N10sDQogICAgICAzMjk6IFs0MiwgNDAyXSwNCiAgICAgIDM1MzogWzEyMSwgLTMyNl0sDQogICAgICAzNTQ6IFs3NywgLTQzNl0sDQogICAgICAzNTU6IFs2NCwgLTU0OF0sDQogICAgICAzNTY6IFs1NywgLTY3M10sDQogICAgICAzNTc6IFs1MiwgLTc5M10sDQogICAgICAzNTg6IFs1OCwgLTkyNF0sDQogICAgICAzNTk6IFs4MiwgLTEwNDNdLA0KICAgICAgMzYwOiBbNDksIDUwNl0sDQogICAgICAzNjI6IFsxNTYsIDMyNV0sDQogICAgICAzNjM6IFstMzAsIC0zMF0sDQogICAgICAzNjQ6IFstMjM4LCAtNzI4XSwNCiAgICAgIDM2NTogWy0xMjMsIDQyM10sDQogICAgICAzNjg6IFstNTUsIC01MjddLA0KICAgICAgMzkzOiBbMTk2LCAtNzE0XSwNCiAgICAgIDM5NDogWzE5NywgLTk2NF0sDQogICAgICAzOTU6IFstMTQzLCAtMTQwXSwNCiAgICAgIDM5NjogWy0yNDQsIC04OTddLA0KICAgICAgMzk3OiBbLTk3LCA2NDFdLA0KICAgICAgNDA4OiBbLTIwNCwgLTEwMzZdLA0KICAgICAgNDA5OiBbLTcyLCAtMTE1Ml0sDQogICAgICA0MTA6IFs0MiwgLTEyNzhdLA0KICAgICAgNDExOiBbLTQ3NiwgMTA1XSwNCiAgICAgIDQxMjogWy01MjIsIDI1OV0sDQogICAgICA0MTM6IFstNTE2LCA0MzNdLA0KICAgICAgNDQ5OiBbLTM2NywgLTExMTNdLA0KICAgICAgNDUwOiBbLTMwNiwgLTEyMTZdLA0KICAgICAgNDUxOiBbLTE4NCwgLTEyNDFdLA0KICAgICAgNDk1OiBbLTQwOCwgLTk3NF0sDQogICAgICA0OTY6IFsyMDAsIDQ5XSwNCiAgICAgIDUwNTogWzQxMSwgLTk0XSwNCiAgICAgIDUyMDogWy0zMDMsIC0xMl0sDQogICAgICA1Mzc6IFstNzk1LCAtMjQzXSwNCiAgICAgIDUzOTogWy01MzQsIC0xMTMwXSwNCiAgICAgIDU0MDogWy03MDIsIC0xMTM1XSwNCiAgICAgIDU0MTogWy02NTYsIC0xMDE0XSwNCiAgICAgIDU0MjogWy02NTAsIC0xMjUyXSwNCiAgICAgIDU2MTogWzI5OCwgLTIxXSwNCiAgICAgIDU2MjogWzMyLCA3NDRdLA0KICAgICAgNTkxOiBbMTQ4LCA4NDRdLA0KICAgICAgNTkyOiBbLTUyLCA4NThdLA0KICAgICAgNjQzOiBbNTcsIDYxNl0sDQogICAgICA2NDY6IFs0ODUsIC04ODJdLA0KICAgICAgNjQ3OiBbLTEwMiwgMjQ2XSwNCiAgICAgIDcxNzogWzYyMSwgLTY3Nl0sDQogICAgICA3MTg6IFs2MTgsIC01MzddLA0KICAgICAgNzE5OiBbLTIyNSwgLTUyMF0sDQogICAgICA3MjA6IFstMTUwLCAtNjMxXSwNCiAgICAgIDgwMTogWy0xODgsIDkyMF0sDQogICAgICA4MDI6IFstMzQ0LCA5MTZdLA0KICAgICAgODAzOiBbLTQ2MiwgODQ4XSwNCiAgICAgIDgwNDogWzMyMCwgMzUwXSwNCiAgICAgIDgwNTogWzIyMSwgNDg2XSwNCiAgICB9Ow0KDQogICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVQb3NpdGlvbnMpIHsNCiAgICAgIEdhbWUuVXBncmFkZXNCeUlkW2ldLnBvc1ggPSBHYW1lLlVwZ3JhZGVQb3NpdGlvbnNbaV1bMF07DQogICAgICBHYW1lLlVwZ3JhZGVzQnlJZFtpXS5wb3NZID0gR2FtZS5VcGdyYWRlUG9zaXRpb25zW2ldWzFdOw0KICAgIH0NCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlBQ0hJRVZFTUVOVFMNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLkFjaGlldmVtZW50cyA9IHt9Ow0KICAgIEdhbWUuQWNoaWV2ZW1lbnRzQnlJZCA9IHt9Ow0KICAgIEdhbWUuQWNoaWV2ZW1lbnRzTiA9IDA7DQogICAgR2FtZS5BY2hpZXZlbWVudHNPd25lZCA9IDA7DQogICAgR2FtZS5BY2hpZXZlbWVudCA9IGZ1bmN0aW9uIChuYW1lLCBkZXNjLCBpY29uKSB7DQogICAgICB0aGlzLmlkID0gR2FtZS5BY2hpZXZlbWVudHNOOw0KICAgICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICAgIHRoaXMuZG5hbWUgPSB0aGlzLm5hbWU7DQogICAgICB0aGlzLmRlc2MgPSBkZXNjOw0KICAgICAgdGhpcy5iYXNlRGVzYyA9IHRoaXMuZGVzYzsNCiAgICAgIHRoaXMuaWNvbiA9IGljb247DQogICAgICB0aGlzLndvbiA9IDA7DQogICAgICB0aGlzLmRpc2FibGVkID0gMDsNCiAgICAgIHRoaXMub3JkZXIgPSB0aGlzLmlkOw0KICAgICAgaWYgKG9yZGVyKSB0aGlzLm9yZGVyID0gb3JkZXIgKyB0aGlzLmlkICogMC4wMDE7DQogICAgICB0aGlzLnBvb2wgPSAibm9ybWFsIjsNCiAgICAgIHRoaXMudmFuaWxsYSA9IEdhbWUudmFuaWxsYTsNCiAgICAgIHRoaXMudHlwZSA9ICJhY2hpZXZlbWVudCI7DQoNCiAgICAgIHRoaXMuY2xpY2sgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmICh0aGlzLmNsaWNrRnVuY3Rpb24pIHRoaXMuY2xpY2tGdW5jdGlvbigpOw0KICAgICAgfTsNCiAgICAgIEdhbWUubGFzdCA9IHRoaXM7DQogICAgICBHYW1lLkFjaGlldmVtZW50c1t0aGlzLm5hbWVdID0gdGhpczsNCiAgICAgIEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFt0aGlzLmlkXSA9IHRoaXM7DQogICAgICBHYW1lLkFjaGlldmVtZW50c04rKzsNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH07DQogICAgR2FtZS5BY2hpZXZlbWVudC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAiQWNoaWV2ZW1lbnQiOw0KICAgIH07DQoNCiAgICBHYW1lLldpbiA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBpZiAodHlwZW9mIHdoYXQgPT09ICJzdHJpbmciKSB7DQogICAgICAgIGlmIChHYW1lLkFjaGlldmVtZW50c1t3aGF0XSkgew0KICAgICAgICAgIHZhciBpdCA9IEdhbWUuQWNoaWV2ZW1lbnRzW3doYXRdOw0KICAgICAgICAgIGlmIChpdC53b24gPT0gMCkgew0KICAgICAgICAgICAgdmFyIG5hbWUgPSBpdC5zaG9ydE5hbWUgPyBpdC5zaG9ydE5hbWUgOiBpdC5kbmFtZTsNCiAgICAgICAgICAgIGl0LndvbiA9IDE7DQogICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgbG9jKCJBY2hpZXZlbWVudCB1bmxvY2tlZCIpLA0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiIHN0eWxlPSJmb250LXNpemU6MThweDttYXJnaW4tdG9wOi0ycHg7Ij4nICsNCiAgICAgICAgICAgICAgICBuYW1lICsNCiAgICAgICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICAgICAgaXQuaWNvbg0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIEdhbWUuTm90aWZ5VG9vbHRpcCgNCiAgICAgICAgICAgICAgImZ1bmN0aW9uKCl7cmV0dXJuIEdhbWUuY3JhdGVUb29sdGlwKEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFsiICsNCiAgICAgICAgICAgICAgICBpdC5pZCArDQogICAgICAgICAgICAgICAgIl0pO30iDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNBY2hpZXZlbWVudE93bmVkKGl0LnBvb2wpKQ0KICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkKys7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgaWYgKEFwcCAmJiBpdC52YW5pbGxhKSBBcHAuZ290QWNoaWV2KGl0LmlkKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGZvciAodmFyIGkgaW4gd2hhdCkgew0KICAgICAgICAgIEdhbWUuV2luKHdoYXRbaV0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLlJlbW92ZUFjaGlldiA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBpZiAoR2FtZS5BY2hpZXZlbWVudHNbd2hhdF0pIHsNCiAgICAgICAgaWYgKEdhbWUuQWNoaWV2ZW1lbnRzW3doYXRdLndvbiA9PSAxKSB7DQogICAgICAgICAgR2FtZS5BY2hpZXZlbWVudHNbd2hhdF0ud29uID0gMDsNCiAgICAgICAgICBpZiAoR2FtZS5Db3VudHNBc0FjaGlldmVtZW50T3duZWQoR2FtZS5BY2hpZXZlbWVudHNbd2hhdF0ucG9vbCkpDQogICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkLS07DQogICAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5BY2hpZXZlbWVudC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkgLy9jaGVhdGluZyBvbmx5DQogICAgew0KICAgICAgaWYgKCF0aGlzLndvbikgew0KICAgICAgICBHYW1lLldpbih0aGlzLm5hbWUpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgR2FtZS5SZW1vdmVBY2hpZXYodGhpcy5uYW1lKTsNCiAgICAgIH0NCiAgICAgIGlmIChHYW1lLm9uTWVudSA9PSAic3RhdHMiKSBHYW1lLlVwZGF0ZU1lbnUoKTsNCiAgICB9Ow0KDQogICAgR2FtZS5Db3VudHNBc0FjaGlldmVtZW50T3duZWQgPSBmdW5jdGlvbiAocG9vbCkgew0KICAgICAgaWYgKHBvb2wgPT0gIiIgfHwgcG9vbCA9PSAibm9ybWFsIikgcmV0dXJuIHRydWU7DQogICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICB9Ow0KDQogICAgR2FtZS5IYXNBY2hpZXYgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgcmV0dXJuIEdhbWUuQWNoaWV2ZW1lbnRzW3doYXRdID8gR2FtZS5BY2hpZXZlbWVudHNbd2hhdF0ud29uIDogMDsNCiAgICB9Ow0KDQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCA9IGZ1bmN0aW9uIChuYW1lLCBkZXNjLCBidWlsZGluZywgdGllcikgew0KICAgICAgdmFyIGFjaGlldiA9IG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgICBuYW1lLA0KICAgICAgICBsb2MoDQogICAgICAgICAgIkhhdmUgPGI+JTE8L2I+LiIsDQogICAgICAgICAgbG9jKA0KICAgICAgICAgICAgIiUxICIgKyBHYW1lLk9iamVjdHNbYnVpbGRpbmddLmJzaW5nbGUsDQogICAgICAgICAgICBMQmVhdXRpZnkoR2FtZS5UaWVyc1t0aWVyXS5hY2hpZXZVbmxvY2spDQogICAgICAgICAgKQ0KICAgICAgICApICsgZGVzYywNCiAgICAgICAgR2FtZS5HZXRJY29uKGJ1aWxkaW5nLCB0aWVyKQ0KICAgICAgKTsNCiAgICAgIEdhbWUuU2V0VGllcihidWlsZGluZywgdGllcik7DQogICAgICByZXR1cm4gYWNoaWV2Ow0KICAgIH07DQoNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCA9IGZ1bmN0aW9uIChuYW1lLCBidWlsZGluZywgdGllciwgcSwgbXVsdCkgew0KICAgICAgdmFyIGJ1aWxkaW5nID0gR2FtZS5PYmplY3RzW2J1aWxkaW5nXTsNCiAgICAgIHZhciBpY29uID0gW2J1aWxkaW5nLmljb25Db2x1bW4sIDIyXTsNCiAgICAgIHZhciBuID0gMTIgKyBidWlsZGluZy5uICsgKG11bHQgfHwgMCk7DQogICAgICBpZiAodGllciA9PSAyKSB7DQogICAgICAgIGljb25bMV0gPSAyMzsNCiAgICAgICAgbiArPSA3Ow0KICAgICAgfSBlbHNlIGlmICh0aWVyID09IDMpIHsNCiAgICAgICAgaWNvblsxXSA9IDI0Ow0KICAgICAgICBuICs9IDE0Ow0KICAgICAgfQ0KICAgICAgdmFyIHBvdyA9IE1hdGgucG93KDEwLCBuKTsNCiAgICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICAgbmFtZSwNCiAgICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBqdXN0IGZyb20gJTIuIiwgWw0KICAgICAgICAgIGxvYygiJTEgY29va2llIiwgeyBuOiBwb3csIGI6IHRvRml4ZWQocG93KSB9KSwNCiAgICAgICAgICBidWlsZGluZy5wbHVyYWwsDQogICAgICAgIF0pICsgKHEgPyAiPHE+IiArIHEgKyAiPC9xPiIgOiAiIiksDQogICAgICAgIGljb24NCiAgICAgICk7DQogICAgICBidWlsZGluZy5wcm9kdWN0aW9uQWNoaWV2cy5wdXNoKHsgcG93OiBwb3csIGFjaGlldjogYWNoaWV2IH0pOw0KICAgICAgcmV0dXJuIGFjaGlldjsNCiAgICB9Ow0KDQogICAgR2FtZS50aHJlc2hvbGRJY29ucyA9IFsNCiAgICAgIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTgsIDE5LCAyMCwgMjEsIDIyLCAyMywgMjQsIDI1LCAyNiwNCiAgICAgIDI3LCAyOCwgMjksIDIxLCAyMiwgMjMsIDI0LCAyNSwgMjYsIDI3LCAyOCwgMjksIDIxLCAyMiwgMjMsIDI0LCAyNSwgMjYsDQogICAgICAyNywgMjgsIDI5LCAzMCwgMzEsIDMwLCAzMSwNCiAgICBdOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50cyA9IFtdOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIHEpIHsNCiAgICAgIHZhciB0aHJlc2hvbGQgPSBNYXRoLnBvdygNCiAgICAgICAgMTAsDQogICAgICAgIE1hdGguZmxvb3IoR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aCAqIDEuNSArIDIpDQogICAgICApOw0KICAgICAgaWYgKEdhbWUuQmFua0FjaGlldmVtZW50cy5sZW5ndGggPT0gMCkgdGhyZXNob2xkID0gMTsNCiAgICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICAgbmFtZSwNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJCYWtlIDxiPiUxPC9iPiBpbiBvbmUgYXNjZW5zaW9uLiIsDQogICAgICAgICAgbG9jKCIlMSBjb29raWUiLCB7IG46IHRocmVzaG9sZCwgYjogdG9GaXhlZCh0aHJlc2hvbGQpIH0pDQogICAgICAgICkgKyAocSA/ICI8cT4iICsgcSArICI8L3E+IiA6ICIiKSwNCiAgICAgICAgWw0KICAgICAgICAgIEdhbWUudGhyZXNob2xkSWNvbnNbR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aF0sDQogICAgICAgICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDQzDQogICAgICAgICAgICA/IDINCiAgICAgICAgICAgIDogR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDMyDQogICAgICAgICAgICA/IDENCiAgICAgICAgICAgIDogR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDIzDQogICAgICAgICAgICA/IDINCiAgICAgICAgICAgIDogNSwNCiAgICAgICAgXQ0KICAgICAgKTsNCiAgICAgIGFjaGlldi50aHJlc2hvbGQgPSB0aHJlc2hvbGQ7DQogICAgICBhY2hpZXYub3JkZXIgPSAxMDAgKyBHYW1lLkJhbmtBY2hpZXZlbWVudHMubGVuZ3RoICogMC4wMTsNCiAgICAgIEdhbWUuQmFua0FjaGlldmVtZW50cy5wdXNoKGFjaGlldik7DQogICAgICByZXR1cm4gYWNoaWV2Ow0KICAgIH07DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudHMgPSBbXTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIHEpIHsNCiAgICAgIHZhciB0aHJlc2hvbGQgPSBNYXRoLnBvdygNCiAgICAgICAgMTAsDQogICAgICAgIE1hdGguZmxvb3IoR2FtZS5DcHNBY2hpZXZlbWVudHMubGVuZ3RoICogMS4yKQ0KICAgICAgKTsNCiAgICAgIC8vaWYgKEdhbWUuQ3BzQWNoaWV2ZW1lbnRzLmxlbmd0aD09MCkgdGhyZXNob2xkPTE7DQogICAgICB2YXIgYWNoaWV2ID0gbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAgIG5hbWUsDQogICAgICAgIGxvYygNCiAgICAgICAgICAiQmFrZSA8Yj4lMTwvYj4gcGVyIHNlY29uZC4iLA0KICAgICAgICAgIGxvYygiJTEgY29va2llIiwgeyBuOiB0aHJlc2hvbGQsIGI6IHRvRml4ZWQodGhyZXNob2xkKSB9KQ0KICAgICAgICApICsgKHEgPyAiPHE+IiArIHEgKyAiPC9xPiIgOiAiIiksDQogICAgICAgIFsNCiAgICAgICAgICBHYW1lLnRocmVzaG9sZEljb25zW0dhbWUuQ3BzQWNoaWV2ZW1lbnRzLmxlbmd0aF0sDQogICAgICAgICAgR2FtZS5DcHNBY2hpZXZlbWVudHMubGVuZ3RoID4gNDMNCiAgICAgICAgICAgID8gMg0KICAgICAgICAgICAgOiBHYW1lLkNwc0FjaGlldmVtZW50cy5sZW5ndGggPiAzMg0KICAgICAgICAgICAgPyAxDQogICAgICAgICAgICA6IEdhbWUuQ3BzQWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDIzDQogICAgICAgICAgICA/IDINCiAgICAgICAgICAgIDogNSwNCiAgICAgICAgXQ0KICAgICAgKTsNCiAgICAgIGFjaGlldi50aHJlc2hvbGQgPSB0aHJlc2hvbGQ7DQogICAgICBhY2hpZXYub3JkZXIgPSAyMDAgKyBHYW1lLkNwc0FjaGlldmVtZW50cy5sZW5ndGggKiAwLjAxOw0KICAgICAgR2FtZS5DcHNBY2hpZXZlbWVudHMucHVzaChhY2hpZXYpOw0KICAgICAgcmV0dXJuIGFjaGlldjsNCiAgICB9Ow0KDQogICAgLy9kZWZpbmUgYWNoaWV2ZW1lbnRzDQogICAgLy9XQVJOSU5HIDogZG8gTk9UIGFkZCBuZXcgYWNoaWV2ZW1lbnRzIGluIGJldHdlZW4sIHRoaXMgYnJlYWtzIHRoZSBzYXZlcy4gQWRkIHRoZW0gYXQgdGhlIGVuZCAhDQoNCiAgICB2YXIgb3JkZXIgPSAwOyAvL3RoaXMgaXMgdXNlZCB0byBzZXQgdGhlIG9yZGVyIGluIHdoaWNoIHRoZSBpdGVtcyBhcmUgbGlzdGVkDQoNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiV2FrZSBhbmQgYmFrZSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJNYWtpbmcgc29tZSBkb3VnaCIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJTbyBiYWtlZCByaWdodCBub3ciKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiRmxlZGdsaW5nIGJha2VyeSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJBZmZsdWVudCBiYWtlcnkiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiV29ybGQtZmFtb3VzIGJha2VyeSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJDb3NtaWMgYmFrZXJ5Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkdhbGFjdGljIGJha2VyeSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJVbml2ZXJzYWwgYmFrZXJ5Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIlRpbWVsZXNzIGJha2VyeSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJJbmZpbml0ZSBiYWtlcnkiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiSW1tb3J0YWwgYmFrZXJ5Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkRvbid0IHN0b3AgbWUgbm93Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIllvdSBjYW4gc3RvcCBub3ciKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiQ29va2llcyBhbGwgdGhlIHdheSBkb3duIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIk92ZXJkb3NlIik7DQoNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJDYXN1YWwgYmFraW5nIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiSGFyZGNvcmUgYmFraW5nIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiU3RlYWR5IHRhc3R5IHN0cmVhbSIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkNvb2tpZSBtb25zdGVyIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiTWFzcyBwcm9kdWNlciIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkNvb2tpZSB2b3J0ZXgiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJDb29raWUgcHVsc2FyIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiQ29va2llIHF1YXNhciIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIk9oIGhleSwgeW91J3JlIHN0aWxsIGhlcmUiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJMZXQncyBuZXZlciBiYWtlIGFnYWluIik7DQoNCiAgICBvcmRlciA9IDMwMDEwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlNhY3JpZmljZSIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTYpKSkgKw0KICAgICAgICAiPHE+RWFzeSBjb21lLCBlYXN5IGdvLjwvcT4iLA0KICAgICAgWzExLCA2XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiT2JsaXZpb24iLA0KICAgICAgbG9jKCJBc2NlbmQgd2l0aCA8Yj4lMTwvYj4gYmFrZWQuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWU5KSkpICsNCiAgICAgICAgIjxxPkJhY2sgdG8gc3F1YXJlIG9uZS48L3E+IiwNCiAgICAgIFsxMSwgNl0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkZyb20gc2NyYXRjaCIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTEyKSkpICsNCiAgICAgICAgIjxxPkl0J3MgYmVlbiBmdW4uPC9xPiIsDQogICAgICBbMTEsIDZdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTEwMTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTmV2ZXJjbGljayIsDQogICAgICBsb2MoIk1ha2UgPGI+JTE8L2I+IGJ5IG9ubHkgaGF2aW5nIGNsaWNrZWQgPGI+JTIgdGltZXM8L2I+LiIsIFsNCiAgICAgICAgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWU2KSksDQogICAgICAgIDE1LA0KICAgICAgXSksDQogICAgICBbMTIsIDBdDQogICAgKTsgLy9HYW1lLmxhc3QucG9vbD0nc2hhZG93JzsNCiAgICBvcmRlciA9IDEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2xpY2t0YXN0aWMiLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMykpKSwNCiAgICAgIFsxMSwgMF0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNsaWNrYXRobG9uIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTUpKSksDQogICAgICBbMTEsIDFdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDbGlja29seW1waWNzIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTcpKSksDQogICAgICBbMTEsIDJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDbGlja29yYW1hIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTkpKSksDQogICAgICBbMTEsIDEzXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2xpY2siLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSgxKSkpLA0KICAgICAgWzAsIDBdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJEb3VibGUtY2xpY2siLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSgyKSkpLA0KICAgICAgWzAsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJNb3VzZSB3aGVlbCIsDQogICAgICBsb2MoIkhhdmUgPGI+JTE8L2I+LiIsIGxvYygiJTEgY3Vyc29yIiwgTEJlYXV0aWZ5KDUwKSkpLA0KICAgICAgWzEsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJPZiBNaWNlIGFuZCBNZW4iLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSgxMDApKSksDQogICAgICBbMCwgMV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRoZSBEaWdpdGFsIiwNCiAgICAgIGxvYygiSGF2ZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBjdXJzb3IiLCBMQmVhdXRpZnkoMjAwKSkpLA0KICAgICAgWzAsIDJdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTA5ODsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJKdXN0IHdyb25nIiwNCiAgICAgIGxvYygiU2VsbCBhIGdyYW5kbWEuIikgKyAiPHE+SSB0aG91Z2h0IHlvdSBsb3ZlZCBtZS48L3E+IiwNCiAgICAgIFsxMCwgOV0NCiAgICApOw0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJHcmFuZG1hJ3MgY29va2llcyIsICIiLCAiR3JhbmRtYSIsIDEpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlNsb3BweSBraXNzZXMiLCAiIiwgIkdyYW5kbWEiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSZXRpcmVtZW50IGhvbWUiLCAiIiwgIkdyYW5kbWEiLCAzKTsNCg0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJCb3VnaHQgdGhlIGZhcm0iLCAiIiwgIkZhcm0iLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSZWFwIHdoYXQgeW91IHNvdyIsICIiLCAiRmFybSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkZhcm0gaWxsIiwgIiIsICJGYXJtIiwgMyk7DQoNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiUHJvZHVjdGlvbiBjaGFpbiIsICIiLCAiRmFjdG9yeSIsIDEpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkluZHVzdHJpYWwgcmV2b2x1dGlvbiIsICIiLCAiRmFjdG9yeSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdsb2JhbCB3YXJtaW5nIiwgIiIsICJGYWN0b3J5IiwgMyk7DQoNCiAgICBvcmRlciA9IDEzMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiWW91IGtub3cgdGhlIGRyaWxsIiwgIiIsICJNaW5lIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRXhjYXZhdGlvbiBzaXRlIiwgIiIsICJNaW5lIiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSG9sbG93IHRoZSBwbGFuZXQiLCAiIiwgIk1pbmUiLCAzKTsNCg0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJFeHBlZGl0aW9uIiwgIiIsICJTaGlwbWVudCIsIDEpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdhbGFjdGljIGhpZ2h3YXkiLCAiIiwgIlNoaXBtZW50IiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRmFyIGZhciBhd2F5IiwgIiIsICJTaGlwbWVudCIsIDMpOw0KDQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRyYW5zbXV0YXRpb24iLCAiIiwgIkFsY2hlbXkgbGFiIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVHJhbnNtb2dyaWZpY2F0aW9uIiwgIiIsICJBbGNoZW15IGxhYiIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdvbGQgbWVtYmVyIiwgIiIsICJBbGNoZW15IGxhYiIsIDMpOw0KDQogICAgb3JkZXIgPSAxNzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkEgd2hvbGUgbmV3IHdvcmxkIiwgIiIsICJQb3J0YWwiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJOb3cgeW91J3JlIHRoaW5raW5nIiwgIiIsICJQb3J0YWwiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJEaW1lbnNpb25hbCBzaGlmdCIsICIiLCAiUG9ydGFsIiwgMyk7DQoNCiAgICBvcmRlciA9IDE4MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGltZSB3YXJwIiwgIiIsICJUaW1lIG1hY2hpbmUiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBbHRlcm5hdGUgdGltZWxpbmUiLCAiIiwgIlRpbWUgbWFjaGluZSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJld3JpdGluZyBoaXN0b3J5IiwgIiIsICJUaW1lIG1hY2hpbmUiLCAzKTsNCg0KICAgIG9yZGVyID0gNzAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJPbmUgd2l0aCBldmVyeXRoaW5nIiwNCiAgICAgIGxvYygiSGF2ZSA8Yj5hdCBsZWFzdCAlMTwvYj4gb2YgZXZlcnkgYnVpbGRpbmcuIiwgMSksDQogICAgICBbMiwgN10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk1hdGhlbWF0aWNpYW4iLA0KICAgICAgbG9jKA0KICAgICAgICAiSGF2ZSBhdCBsZWFzdCA8Yj4xIG9mIHRoZSBtb3N0IGV4cGVuc2l2ZSBvYmplY3QsIDIgb2YgdGhlIHNlY29uZC1tb3N0IGV4cGVuc2l2ZSwgNCBvZiB0aGUgbmV4dDwvYj4gYW5kIHNvIG9uIChjYXBwZWQgYXQgJTEpLiIsDQogICAgICAgIDEyOA0KICAgICAgKSwNCiAgICAgIFsyMywgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJCYXNlIDEwIiwNCiAgICAgIGxvYygNCiAgICAgICAgIkhhdmUgYXQgbGVhc3QgPGI+MTAgb2YgdGhlIG1vc3QgZXhwZW5zaXZlIG9iamVjdCwgMjAgb2YgdGhlIHNlY29uZC1tb3N0IGV4cGVuc2l2ZSwgMzAgb2YgdGhlIG5leHQ8L2I+IGFuZCBzbyBvbi4iDQogICAgICApLA0KICAgICAgWzIzLCAxMl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJHb2xkZW4gY29va2llIiwNCiAgICAgIGxvYygiQ2xpY2sgYSA8Yj5nb2xkZW4gY29va2llPC9iPi4iKSwNCiAgICAgIFsxMCwgMTRdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJMdWNreSBjb29raWUiLA0KICAgICAgbG9jKCJDbGljayA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBnb2xkZW4gY29va2llIiwgTEJlYXV0aWZ5KDcpKSksDQogICAgICBbMjIsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBIHN0cm9rZSBvZiBsdWNrIiwNCiAgICAgIGxvYygiQ2xpY2sgPGI+JTE8L2I+LiIsIGxvYygiJTEgZ29sZGVuIGNvb2tpZSIsIExCZWF1dGlmeSgyNykpKSwNCiAgICAgIFsyMywgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAzMDIwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDaGVhdGVkIGNvb2tpZXMgdGFzdGUgYXdmdWwiLA0KICAgICAgbG9jKCJIYWNrIGluIHNvbWUgY29va2llcy4iKSwNCiAgICAgIFsxMCwgNl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInNoYWRvdyI7DQogICAgb3JkZXIgPSAxMTAxMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJVbmNhbm55IGNsaWNrZXIiLA0KICAgICAgbG9jKCJDbGljayByZWFsbHksIHJlYWxseSBmYXN0LiIpICsgIjxxPldlbGwgSSdsbCBiZSE8L3E+IiwNCiAgICAgIFsxMiwgMF0NCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkJ1aWxkZXIiLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+LiIsIGxvYygiJTEgYnVpbGRpbmciLCBMQmVhdXRpZnkoMTAwKSkpLA0KICAgICAgWzIsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBcmNoaXRlY3QiLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+LiIsIGxvYygiJTEgYnVpbGRpbmciLCBMQmVhdXRpZnkoNTAwKSkpLA0KICAgICAgWzMsIDZdDQogICAgKTsNCiAgICBvcmRlciA9IDYwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRW5oYW5jZXIiLA0KICAgICAgbG9jKCJQdXJjaGFzZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSB1cGdyYWRlIiwgTEJlYXV0aWZ5KDIwKSkpLA0KICAgICAgWzksIDBdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBdWdtZW50ZXIiLA0KICAgICAgbG9jKCJQdXJjaGFzZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSB1cGdyYWRlIiwgTEJlYXV0aWZ5KDUwKSkpLA0KICAgICAgWzksIDFdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ29va2llLWR1bmtlciIsDQogICAgICBsb2MoIkR1bmsgdGhlIGNvb2tpZS4iKSArICI8cT5Zb3UgZGlkIGl0ITwvcT4iLA0KICAgICAgWzEsIDhdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRm9ydHVuZSIsDQogICAgICBsb2MoIkNsaWNrIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGdvbGRlbiBjb29raWUiLCBMQmVhdXRpZnkoNzcpKSkgKw0KICAgICAgICAiPHE+WW91IHNob3VsZCByZWFsbHkgZ28gdG8gYmVkLjwvcT4iLA0KICAgICAgWzI0LCA2XQ0KICAgICk7DQogICAgb3JkZXIgPSAzMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUcnVlIE5ldmVyY2xpY2siLA0KICAgICAgbG9jKA0KICAgICAgICAiTWFrZSA8Yj4lMTwvYj4gd2l0aCA8Yj5ubzwvYj4gY29va2llIGNsaWNrcy4iLA0KICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTYpKQ0KICAgICAgKSArICI8cT5UaGlzIGtpbmRhIGRlZmVhdHMgdGhlIHdob2xlIHB1cnBvc2UsIGRvZXNuJ3QgaXQ/PC9xPiIsDQogICAgICBbMTIsIDBdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOw0KDQogICAgb3JkZXIgPSAyMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJFbGRlciBuYXAiLA0KICAgICAgbG9jKCJBcHBlYXNlIHRoZSBncmFuZG1hdHJpYXJjaHMgYXQgbGVhc3QgPGI+b25jZTwvYj4uIikgKw0KICAgICAgICAiPHE+d2U8YnI+YXJlPGJyPmV0ZXJuYWw8L3E+IiwNCiAgICAgIFs4LCA5XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRWxkZXIgc2x1bWJlciIsDQogICAgICBsb2MoIkFwcGVhc2UgdGhlIGdyYW5kbWF0cmlhcmNocyBhdCBsZWFzdCA8Yj4lMSB0aW1lczwvYj4uIiwgNSkgKw0KICAgICAgICAiPHE+b3VyIG1pbmQ8YnI+b3V0bGl2ZXM8YnI+dGhlIHVuaXZlcnNlPC9xPiIsDQogICAgICBbOCwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDk4Ow0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkVsZGVyIiwNCiAgICAgIGxvYygiT3duIGF0IGxlYXN0IDxiPiUxPC9iPiBncmFuZG1hIHR5cGVzLiIsIDcpLA0KICAgICAgWzEwLCA5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkVsZGVyIGNhbG0iLA0KICAgICAgbG9jKCJEZWNsYXJlIGEgY292ZW5hbnQgd2l0aCB0aGUgZ3JhbmRtYXRyaWFyY2hzLiIpICsNCiAgICAgICAgIjxxPndlPGJyPmhhdmU8YnI+ZmVkPC9xPiIsDQogICAgICBbOCwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkVuZ2luZWVyIiwNCiAgICAgIGxvYygiT3duIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGJ1aWxkaW5nIiwgTEJlYXV0aWZ5KDEwMDApKSksDQogICAgICBbNCwgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJMZXByZWNoYXVuIiwNCiAgICAgIGxvYygiQ2xpY2sgPGI+JTE8L2I+LiIsIGxvYygiJTEgZ29sZGVuIGNvb2tpZSIsIExCZWF1dGlmeSg3NzcpKSksDQogICAgICBbMjUsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJCbGFjayBjYXQncyBwYXciLA0KICAgICAgbG9jKCJDbGljayA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBnb2xkZW4gY29va2llIiwgTEJlYXV0aWZ5KDc3NzcpKSksDQogICAgICBbMjYsIDZdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMzAwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTmloaWxpc20iLA0KICAgICAgbG9jKCJBc2NlbmQgd2l0aCA8Yj4lMTwvYj4gYmFrZWQuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUxNSkpKSArDQogICAgICAgICI8cT5UaGVyZSBhcmUgbWFueSB0aGluZ3M8YnI+dGhhdCBuZWVkIHRvIGJlIGVyYXNlZDwvcT4iLA0KICAgICAgWzExLCA3XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQW50aWJhdHRlciIsICIiLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJRdWlya3kgcXVhcmtzIiwgIiIsICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkl0IGRvZXMgbWF0dGVyISIsICIiLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCAzKTsNCg0KICAgIG9yZGVyID0gNjAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJVcGdyYWRlciIsDQogICAgICBsb2MoIlB1cmNoYXNlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIHVwZ3JhZGUiLCBMQmVhdXRpZnkoMTAwKSkpLA0KICAgICAgWzksIDJdDQogICAgKTsNCg0KICAgIG9yZGVyID0gNzAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDZW50ZW5uaWFsIiwNCiAgICAgIGxvYygiSGF2ZSBhdCBsZWFzdCA8Yj4lMSBvZiBldmVyeXRoaW5nPC9iPi4iLCAxMDApLA0KICAgICAgWzYsIDZdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMzA1MDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSGFyZGNvcmUiLA0KICAgICAgbG9jKA0KICAgICAgICAiR2V0IHRvIDxiPiUxPC9iPiBiYWtlZCB3aXRoIDxiPm5vIHVwZ3JhZGVzIHB1cmNoYXNlZDwvYj4uIiwNCiAgICAgICAgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWU5KSkNCiAgICAgICksDQogICAgICBbMTIsIDZdDQogICAgKTsgLy9HYW1lLmxhc3QucG9vbD0nc2hhZG93JzsNCg0KICAgIG9yZGVyID0gMzA2MDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3BlZWQgYmFraW5nIEkiLA0KICAgICAgbG9jKCJHZXQgdG8gPGI+JTE8L2I+IGJha2VkIGluIDxiPiUyPC9iPi4iLCBbDQogICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNikpLA0KICAgICAgICBHYW1lLnNheVRpbWUoNjAgKiAzNSAqIEdhbWUuZnBzKSwNCiAgICAgIF0pLA0KICAgICAgWzEyLCA1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJTcGVlZCBiYWtpbmcgSUkiLA0KICAgICAgbG9jKCJHZXQgdG8gPGI+JTE8L2I+IGJha2VkIGluIDxiPiUyPC9iPi4iLCBbDQogICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNikpLA0KICAgICAgICBHYW1lLnNheVRpbWUoNjAgKiAyNSAqIEdhbWUuZnBzKSwNCiAgICAgIF0pLA0KICAgICAgWzEzLCA1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJTcGVlZCBiYWtpbmcgSUlJIiwNCiAgICAgIGxvYygiR2V0IHRvIDxiPiUxPC9iPiBiYWtlZCBpbiA8Yj4lMjwvYj4uIiwgWw0KICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTYpKSwNCiAgICAgICAgR2FtZS5zYXlUaW1lKDYwICogMTUgKiBHYW1lLmZwcyksDQogICAgICBdKSwNCiAgICAgIFsxNCwgNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInNoYWRvdyI7DQoNCiAgICBvcmRlciA9IDYxMDAwOw0KICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJHZXR0aW5nIGV2ZW4gd2l0aCB0aGUgb3ZlbiIsDQogICAgICBFTg0KICAgICAgICA/ICJEZWZlYXQgdGhlIDxiPlNlbnRpZW50IEZ1cm5hY2U8L2I+IGluIHRoZSBmYWN0b3J5IGR1bmdlb25zLiINCiAgICAgICAgOiAiPz8/IiwNCiAgICAgIFsxMiwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gImR1bmdlb24iOw0KICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJOb3cgdGhpcyBpcyBwb2Qtc21hc2hpbmciLA0KICAgICAgRU4NCiAgICAgICAgPyAiRGVmZWF0IHRoZSA8Yj5Bc2NlbmRlZCBCYWtpbmcgUG9kPC9iPiBpbiB0aGUgZmFjdG9yeSBkdW5nZW9ucy4iDQogICAgICAgIDogIj8/PyIsDQogICAgICBbMTIsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJkdW5nZW9uIjsNCiAgICB2YXIgYWNoaWV2ID0gbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2hpcnBlZCBvdXQiLA0KICAgICAgRU4NCiAgICAgICAgPyAiRmluZCBhbmQgZGVmZWF0IDxiPkNoaXJweTwvYj4sIHRoZSBkeXNmdW5jdGlvbm5pbmcgYWxhcm0gYm90LiINCiAgICAgICAgOiAiPz8/IiwNCiAgICAgIFsxMywgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gImR1bmdlb24iOw0KICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJGb2xsb3cgdGhlIHdoaXRlIHJhYmJpdCIsDQogICAgICBFTiA/ICJGaW5kIGFuZCBkZWZlYXQgdGhlIGVsdXNpdmUgPGI+c3VnYXIgYnVubnk8L2I+LiIgOiAiPz8/IiwNCiAgICAgIFsxNCwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gImR1bmdlb24iOw0KDQogICAgb3JkZXIgPSAxMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNsaWNrYXNtaWMiLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMTEpKSksDQogICAgICBbMTEsIDE0XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRnJpZW5kIG9mIHRoZSBhbmNpZW50cyIsICIiLCAiR3JhbmRtYSIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJ1bGVyIG9mIHRoZSBhbmNpZW50cyIsICIiLCAiR3JhbmRtYSIsIDUpOw0KDQogICAgb3JkZXIgPSAzMjAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJXaG9sZXNvbWUiLA0KICAgICAgbG9jKCJVbmxvY2sgPGI+MTAwJTwvYj4gb2YgeW91ciBoZWF2ZW5seSBjaGlwcyBwb3dlci4iKSwNCiAgICAgIFsxNSwgN10NCiAgICApOw0KDQogICAgb3JkZXIgPSAzMzAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJKdXN0IHBsYWluIGx1Y2t5IiwNCiAgICAgIGxvYygNCiAgICAgICAgIllvdSBoYXZlIDxiPjEgY2hhbmNlIGluICUxPC9iPiBldmVyeSBzZWNvbmQgb2YgZWFybmluZyB0aGlzIGFjaGlldmVtZW50LiIsDQogICAgICAgIEJlYXV0aWZ5KDEwMDAwMDApDQogICAgICApLA0KICAgICAgWzE1LCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCg0KICAgIG9yZGVyID0gMjEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSXRjaHNjcmF0Y2hlciIsDQogICAgICBsb2MoIkJ1cnN0IDxiPjEgd3JpbmtsZXI8L2I+LiIpLA0KICAgICAgWzE5LCA4XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiV3JpbmtsZXNxdWlzaGVyIiwNCiAgICAgIGxvYygiQnVyc3QgPGI+JTEgd3JpbmtsZXJzPC9iPi4iLCA1MCksDQogICAgICBbMTksIDhdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJNb2lzdGJ1cnN0ZXIiLA0KICAgICAgbG9jKCJCdXJzdCA8Yj4lMSB3cmlua2xlcnM8L2I+LiIsIDIwMCksDQogICAgICBbMTksIDhdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjIwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3Bvb2t5IGNvb2tpZXMiLA0KICAgICAgbG9jKA0KICAgICAgICAnVW5sb2NrIDxiPmV2ZXJ5IEhhbGxvd2Vlbi10aGVtZWQgY29va2llPC9iPi48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5Pd25pbmcgdGhpcyBhY2hpZXZlbWVudCBtYWtlcyBIYWxsb3dlZW4tdGhlbWVkIGNvb2tpZXMgZHJvcCBtb3JlIGZyZXF1ZW50bHkgaW4gZnV0dXJlIHBsYXl0aHJvdWdocy4nDQogICAgICApLA0KICAgICAgWzEyLCA4XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIyMTAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNvbWluZyB0byB0b3duIiwNCiAgICAgIGxvYygiUmVhY2ggPGI+U2FudGEncyA3dGggZm9ybTwvYj4uIiksDQogICAgICBbMTgsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBbGwgaGFpbCBTYW50YSIsDQogICAgICBsb2MoIlJlYWNoIDxiPlNhbnRhJ3MgZmluYWwgZm9ybTwvYj4uIiksDQogICAgICBbMTksIDEwXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTGV0IGl0IHNub3ciLA0KICAgICAgbG9jKA0KICAgICAgICAnVW5sb2NrIDxiPmV2ZXJ5IENocmlzdG1hcy10aGVtZWQgY29va2llPC9iPi48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5Pd25pbmcgdGhpcyBhY2hpZXZlbWVudCBtYWtlcyBDaHJpc3RtYXMtdGhlbWVkIGNvb2tpZXMgZHJvcCBtb3JlIGZyZXF1ZW50bHkgaW4gZnV0dXJlIHBsYXl0aHJvdWdocy4nDQogICAgICApLA0KICAgICAgWzE5LCA5XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIk9oIGRlZXIiLCBsb2MoIlBvcCA8Yj4xIHJlaW5kZWVyPC9iPi4iKSwgWzEyLCA5XSk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2xlaWdoIG9mIGhhbmQiLA0KICAgICAgbG9jKCJQb3AgPGI+JTEgcmVpbmRlZXI8L2I+LiIsIDUwKSwNCiAgICAgIFsxMiwgOV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlJlaW5kZWVyIHNsZWlnaGVyIiwNCiAgICAgIGxvYygiUG9wIDxiPiUxIHJlaW5kZWVyPC9iPi4iLCAyMDApLA0KICAgICAgWzEyLCA5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEyMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiUGVyZmVjdGVkIGFncmljdWx0dXJlIiwgIiIsICJGYXJtIiwgNCk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlVsdGltYXRlIGF1dG9tYXRpb24iLCAiIiwgIkZhY3RvcnkiLCA0KTsNCiAgICBvcmRlciA9IDEzMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQ2FuIHlvdSBkaWcgaXQiLCAiIiwgIk1pbmUiLCA0KTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVHlwZSBJSSBjaXZpbGl6YXRpb24iLCAiIiwgIlNoaXBtZW50IiwgNCk7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdpbGQgd2FycyIsICIiLCAiQWxjaGVteSBsYWIiLCA0KTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQnJhaW4tc3BsaXQiLCAiIiwgIlBvcnRhbCIsIDQpOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaW1lIGR1a2UiLCAiIiwgIlRpbWUgbWFjaGluZSIsIDQpOw0KICAgIG9yZGVyID0gMTkwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNb2xlY3VsYXIgbWFlc3RybyIsICIiLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCA0KTsNCg0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJMb25lIHBob3RvbiIsICIiLCAiUHJpc20iLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJEYXp6bGluZyBnbGltbWVyIiwgIiIsICJQcmlzbSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkJsaW5kaW5nIGZsYXNoIiwgIiIsICJQcmlzbSIsIDMpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlVuZW5kaW5nIGdsb3ciLCAiIiwgIlByaXNtIiwgNCk7DQoNCiAgICBvcmRlciA9IDUwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTG9yZCBvZiBDb25zdHJ1Y3RzIiwNCiAgICAgIGxvYygiT3duIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGJ1aWxkaW5nIiwgTEJlYXV0aWZ5KDI1MDApKSkgKw0KICAgICAgICAiPHE+SGUgc2F3IHRoZSB2YXN0IHBsYWlucyBzdHJldGNoaW5nIGFoZWFkIG9mIGhpbSwgYW5kIGhlIHNhaWQgOiBsZXQgdGhlcmUgYmUgY2l2aWxpemF0aW9uLjwvcT4iLA0KICAgICAgWzUsIDZdDQogICAgKTsNCiAgICBvcmRlciA9IDYwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTG9yZCBvZiBQcm9ncmVzcyIsDQogICAgICBsb2MoIlB1cmNoYXNlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIHVwZ3JhZGUiLCBMQmVhdXRpZnkoMjAwKSkpICsNCiAgICAgICAgIjxxPk9uZSBjYW4gYWx3YXlzIGRvIGJldHRlci4gQnV0IHNob3VsZCB5b3U/PC9xPiIsDQogICAgICBbOSwgMTRdDQogICAgKTsNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQmljZW50ZW5uaWFsIiwNCiAgICAgIGxvYygiSGF2ZSBhdCBsZWFzdCA8Yj4lMSBvZiBldmVyeXRoaW5nPC9iPi4iLCAyMDApICsNCiAgICAgICAgIjxxPllvdSBjcmF6eSBwZXJzb24uPC9xPiIsDQogICAgICBbOCwgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMjMwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJMb3ZlbHkgY29va2llcyIsDQogICAgICBsb2MoIlVubG9jayA8Yj5ldmVyeSBWYWxlbnRpbmUtdGhlbWVkIGNvb2tpZTwvYj4uIiksDQogICAgICBbMjAsIDNdDQogICAgKTsNCg0KICAgIG9yZGVyID0gNzAwMTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDZW50ZW5uaWFsIGFuZCBhIGhhbGYiLA0KICAgICAgbG9jKCJIYXZlIGF0IGxlYXN0IDxiPiUxIG9mIGV2ZXJ5dGhpbmc8L2I+LiIsIDE1MCksDQogICAgICBbNywgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaW55IGNvb2tpZSIsDQogICAgICBsb2MoIkNsaWNrIHRoZSB0aW55IGNvb2tpZS4iKSArDQogICAgICAgICI8cT5UaGVzZSBhcmVuJ3QgdGhlIGNvb2tpZXM8YnI+eW91J3JlIGNsaWNraW5nIGZvci48L3E+IiwNCiAgICAgIFswLCA1XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDQwMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJZb3Ugd2luIGEgY29va2llIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlRoaXMgaXMgZm9yIGJha2luZyAlMSBhbmQgbWFraW5nIGl0IG9uIHRoZSBsb2NhbCBuZXdzLiIsDQogICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMTQpKQ0KICAgICAgKSArICI8cT5XZSdyZSBhbGwgc28gcHJvdWQgb2YgeW91LjwvcT4iLA0KICAgICAgWzEwLCAwXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwNzA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkNsaWNrIGRlbGVnYXRvciIsICJDdXJzb3IiLCAxLCAwLCA3KTsNCiAgICBvcmRlciA9IDExMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkd1c2hpbmcgZ3Jhbm5pZXMiLCAiR3JhbmRtYSIsIDEsIDAsIDYpOw0KICAgIG9yZGVyID0gMTIyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiSSBoYXRlIG1hbnVyZSIsICJGYXJtIiwgMSk7DQogICAgb3JkZXIgPSAxMzIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJOZXZlciBkaWcgZG93biIsICJNaW5lIiwgMSk7DQogICAgb3JkZXIgPSAxNDIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJUaGUgaW5jcmVkaWJsZSBtYWNoaW5lIiwgIkZhY3RvcnkiLCAxKTsNCiAgICBvcmRlciA9IDE1MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkFuZCBiZXlvbmQiLCAiU2hpcG1lbnQiLCAxKTsNCiAgICBvcmRlciA9IDE2MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk1hZ251bSBPcHVzIiwgIkFsY2hlbXkgbGFiIiwgMSk7DQogICAgb3JkZXIgPSAxNzIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJXaXRoIHN0cmFuZ2UgZW9ucyIsICJQb3J0YWwiLCAxKTsNCiAgICBvcmRlciA9IDE4MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlNwYWNldGltZSBqaWdhbWFyb28iLCAiVGltZSBtYWNoaW5lIiwgMSk7DQogICAgb3JkZXIgPSAxOTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJTdXBlcm1hc3NpdmUiLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCAxKTsNCiAgICBvcmRlciA9IDIwMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlByYWlzZSB0aGUgc3VuIiwgIlByaXNtIiwgMSk7DQoNCiAgICBvcmRlciA9IDEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2xpY2thZ2VkZG9uIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTEzKSkpLA0KICAgICAgWzExLCAxNV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNsaWNrbmFyb2siLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMTUpKSksDQogICAgICBbMTEsIDE2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRXh0cmVtZSBwb2x5ZGFjdHlseSIsDQogICAgICBsb2MoIkhhdmUgPGI+JTE8L2I+LiIsIGxvYygiJTEgY3Vyc29yIiwgTEJlYXV0aWZ5KDMwMCkpKSwNCiAgICAgIFswLCAxM10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkRyLiBUIiwNCiAgICAgIGxvYygiSGF2ZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBjdXJzb3IiLCBMQmVhdXRpZnkoNDAwKSkpLA0KICAgICAgWzAsIDE0XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJUaGUgb2xkIG5ldmVyIGJvdGhlcmVkIG1lIGFueXdheSIsDQogICAgICAiIiwNCiAgICAgICJHcmFuZG1hIiwNCiAgICAgIDYNCiAgICApOw0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJIb21lZ3Jvd24iLCAiIiwgIkZhcm0iLCA1KTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGVjaG5vY3JhY3kiLCAiIiwgIkZhY3RvcnkiLCA1KTsNCiAgICBvcmRlciA9IDEzMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIGNlbnRlciBvZiB0aGUgRWFydGgiLCAiIiwgIk1pbmUiLCA1KTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2UgY29tZSBpbiBwZWFjZSIsICIiLCAiU2hpcG1lbnQiLCA1KTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIHNlY3JldHMgb2YgdGhlIHVuaXZlcnNlIiwgIiIsICJBbGNoZW15IGxhYiIsIDUpOw0KICAgIG9yZGVyID0gMTcwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSZWFsbSBvZiB0aGUgTWFkIEdvZCIsICIiLCAiUG9ydGFsIiwgNSk7DQogICAgb3JkZXIgPSAxODAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkZvcmV2ZXIgYW5kIGV2ZXIiLCAiIiwgIlRpbWUgbWFjaGluZSIsIDUpOw0KICAgIG9yZGVyID0gMTkwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJXYWxrIHRoZSBwbGFuY2siLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgNSk7DQogICAgb3JkZXIgPSAyMDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJpc2UgYW5kIHNoaW5lIiwgIiIsICJQcmlzbSIsIDUpOw0KDQogICAgb3JkZXIgPSAzMDIwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJHb2QgY29tcGxleCIsDQogICAgICBsb2MoDQogICAgICAgICdOYW1lIHlvdXJzZWxmIDxiPk9ydGVpbDwvYj4uPGRpdiBjbGFzcz0id2FybmluZyI+Tm90ZTogdXN1cnBlcnMgaW5jdXIgYSAtJTElIENwUyBwZW5hbHR5IHVudGlsIHRoZXkgcmVuYW1lIHRoZW1zZWx2ZXMgc29tZXRoaW5nIGVsc2UuPC9kaXY+JywNCiAgICAgICAgMQ0KICAgICAgKSArICI8cT5CdXQgdGhhdCdzIG5vdCB5b3UsIGlzIGl0PzwvcT4iLA0KICAgICAgWzE3LCA1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGlyZC1wYXJ0eSIsDQogICAgICBsb2MoIlVzZSBhbiA8Yj5hZGQtb248L2I+LiIpICsNCiAgICAgICAgIjxxPlNvbWUgZmluZCB2YW5pbGxhIHRvIGJlIHRoZSBtb3N0IGJvcmluZyBmbGF2b3IuPC9xPiIsDQogICAgICBbMTYsIDVdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOyAvL2lmIHlvdSdyZSBtYWtpbmcgYSBtb2QsIGFkZCBhIEdhbWUuV2luKCdUaGlyZC1wYXJ0eScpIHNvbWV3aGVyZSBpbiB0aGVyZSENCg0KICAgIG9yZGVyID0gMzAwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRGVtYXRlcmlhbGl6ZSIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTE4KSkpICsNCiAgICAgICAgIjxxPlByZXN0byE8YnI+Li4ud2hlcmUnZCB0aGUgY29va2llcyBnbz88L3E+IiwNCiAgICAgIFsxMSwgN10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk5pbCB6ZXJvIHppbGNoIiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMjEpKSkgKw0KICAgICAgICAiPHE+VG8gc3VtbWFyaXplIDogcmVhbGx5IG5vdCB2ZXJ5IG11Y2ggYXQgYWxsLjwvcT4iLA0KICAgICAgWzExLCA3XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiVHJhbnNjZW5kZW5jZSIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTI0KSkpICsNCiAgICAgICAgIjxxPllvdXIgY29va2llcyBhcmUgbm93IG9uIGEgaGlnaGVyIHBsYW5lIG9mIGJlaW5nLjwvcT4iLA0KICAgICAgWzExLCA4XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiT2JsaXRlcmF0ZSIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTI3KSkpICsNCiAgICAgICAgIjxxPlJlc2lzdGFuY2UgaXMgZnV0aWxlLCBhbGJlaXQgZW50ZXJ0YWluaW5nLjwvcT4iLA0KICAgICAgWzExLCA4XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTmVnYXRpdmUgdm9pZCIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTMwKSkpICsNCiAgICAgICAgIjxxPllvdSBub3cgaGF2ZSBzbyBmZXcgY29va2llcyB0aGF0IGl0J3MgYWxtb3N0IGxpa2UgeW91IGhhdmUgYSBuZWdhdGl2ZSBhbW91bnQgb2YgdGhlbS48L3E+IiwNCiAgICAgIFsxMSwgOF0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMjQwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGUgaHVudCBpcyBvbiIsDQogICAgICBsb2MoIlVubG9jayA8Yj4xIGVnZzwvYj4uIiksDQogICAgICBbMSwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJFZ2dpbmcgb24iLA0KICAgICAgbG9jKCJVbmxvY2sgPGI+JTEgZWdnczwvYj4uIiwgNyksDQogICAgICBbNCwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJNYXNzIEVhc3RlcmlhIiwNCiAgICAgIGxvYygiVW5sb2NrIDxiPiUxIGVnZ3M8L2I+LiIsIDE0KSwNCiAgICAgIFs3LCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkhpZGUgJiBzZWVrIGNoYW1waW9uIiwNCiAgICAgIGxvYygNCiAgICAgICAgJ1VubG9jayA8Yj5hbGwgdGhlIGVnZ3M8L2I+LjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pk93bmluZyB0aGlzIGFjaGlldmVtZW50IG1ha2VzIGVnZ3MgZHJvcCBtb3JlIGZyZXF1ZW50bHkgaW4gZnV0dXJlIHBsYXl0aHJvdWdocy4nDQogICAgICApLA0KICAgICAgWzEzLCAxMl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJXaGF0J3MgaW4gYSBuYW1lIiwNCiAgICAgIGxvYygiR2l2ZSB5b3VyIGJha2VyeSBhIG5hbWUuIiksDQogICAgICBbMTUsIDldDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJQcmV0dHkgcGVubnkiLCAiIiwgIkJhbmsiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJGaXQgdGhlIGJpbGwiLCAiIiwgIkJhbmsiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBIGxvYW4gaW4gdGhlIGRhcmsiLCAiIiwgIkJhbmsiLCAzKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJOZWVkIGZvciBncmVlZCIsICIiLCAiQmFuayIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkl0J3MgdGhlIGVjb25vbXksIHN0dXBpZCIsICIiLCAiQmFuayIsIDUpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJZb3VyIHRpbWUgdG8gc2hyaW5lIiwgIiIsICJUZW1wbGUiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTaGFkeSBzZWN0IiwgIiIsICJUZW1wbGUiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJOZXctYWdlIGN1bHQiLCAiIiwgIlRlbXBsZSIsIDMpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk9yZ2FuaXplZCByZWxpZ2lvbiIsICIiLCAiVGVtcGxlIiwgNCk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRmFuYXRpY2lzbSIsICIiLCAiVGVtcGxlIiwgNSk7DQogICAgb3JkZXIgPSAxNDc1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkJld2l0Y2hlZCIsICIiLCAiV2l6YXJkIHRvd2VyIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIHNvcmNlcmVyJ3MgYXBwcmVudGljZSIsICIiLCAiV2l6YXJkIHRvd2VyIiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQ2hhcm1zIGFuZCBlbmNoYW50bWVudHMiLCAiIiwgIldpemFyZCB0b3dlciIsIDMpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkN1cnNlcyBhbmQgbWFsZWRpY3Rpb25zIiwgIiIsICJXaXphcmQgdG93ZXIiLCA0KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNYWdpYyBraW5nZG9tIiwgIiIsICJXaXphcmQgdG93ZXIiLCA1KTsNCg0KICAgIG9yZGVyID0gMTQ0NTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiVmVzdGVkIGludGVyZXN0IiwgIkJhbmsiLCAxKTsNCiAgICBvcmRlciA9IDE0NzA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk5ldyB3b3JsZCBvcmRlciIsICJUZW1wbGUiLCAxKTsNCiAgICBvcmRlciA9IDE0OTU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkhvY3VzIHBvY3VzIiwgIldpemFyZCB0b3dlciIsIDEpOw0KDQogICAgb3JkZXIgPSAxMDcwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJGaW5nZXIgY2xpY2tpbicgZ29vZCIsICJDdXJzb3IiLCAyLCAwLCA3KTsNCiAgICBvcmRlciA9IDExMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlBhbmljIGF0IHRoZSBiaW5nbyIsICJHcmFuZG1hIiwgMiwgMCwgNik7DQogICAgb3JkZXIgPSAxMjIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJSYWtlIGluIHRoZSBkb3VnaCIsICJGYXJtIiwgMik7DQogICAgb3JkZXIgPSAxMzIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJRdWFycnkgb24iLCAiTWluZSIsIDIpOw0KICAgIG9yZGVyID0gMTQyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiWWVzIEkgbG92ZSB0ZWNobm9sb2d5IiwgIkZhY3RvcnkiLCAyKTsNCiAgICBvcmRlciA9IDE0NDU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlBhaWQgaW4gZnVsbCIsICJCYW5rIiwgMik7DQogICAgb3JkZXIgPSAxNDcwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJDaHVyY2ggb2YgQ29va2lvbG9neSIsICJUZW1wbGUiLCAyKTsNCiAgICBvcmRlciA9IDE0OTU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoDQogICAgICAiVG9vIG1hbnkgcmFiYml0cywgbm90IGVub3VnaCBoYXRzIiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgMg0KICAgICk7DQogICAgb3JkZXIgPSAxNTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJUaGUgbW9zdCBwcmVjaW91cyBjYXJnbyIsICJTaGlwbWVudCIsIDIpOw0KICAgIG9yZGVyID0gMTYyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiVGhlIEF1cmVhdGUiLCAiQWxjaGVteSBsYWIiLCAyKTsNCiAgICBvcmRlciA9IDE3MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkV2ZXIgbW9yZSBoaWRlb3VzIiwgIlBvcnRhbCIsIDIpOw0KICAgIG9yZGVyID0gMTgyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiQmUga2luZCwgcmV3aW5kIiwgIlRpbWUgbWFjaGluZSIsIDIpOw0KICAgIG9yZGVyID0gMTkyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiSW5maW5pdGVzaW1hbCIsICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsIDIpOw0KICAgIG9yZGVyID0gMjAyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiQSBzdGlsbCBtb3JlIGdsb3Jpb3VzIGRhd24iLCAiUHJpc20iLCAyKTsNCg0KICAgIG9yZGVyID0gMzAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIlJlYmlydGgiLCBsb2MoIkFzY2VuZCBhdCBsZWFzdCBvbmNlLiIpLCBbMjEsIDZdKTsNCg0KICAgIG9yZGVyID0gMTEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSGVyZSB5b3UgZ28iLA0KICAgICAgbG9jKCJDbGljayB0aGlzIGFjaGlldmVtZW50J3Mgc2xvdC4iKSArDQogICAgICAgICI8cT5BbGwgeW91IGhhZCB0byBkbyB3YXMgYXNrLjwvcT4iLA0KICAgICAgWzEsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QuY2xpY2tGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIkhlcmUgeW91IGdvIikpIHsNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvdGljay5tcDMiKTsNCiAgICAgICAgR2FtZS5XaW4oIkhlcmUgeW91IGdvIik7DQogICAgICB9DQogICAgfTsNCg0KICAgIG9yZGVyID0gMzAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUmVzdXJyZWN0aW9uIiwNCiAgICAgIGxvYygiQXNjZW5kIDxiPiUxIHRpbWVzPC9iPi4iLCAxMCksDQogICAgICBbMjEsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJSZWluY2FybmF0aW9uIiwNCiAgICAgIGxvYygiQXNjZW5kIDxiPiUxIHRpbWVzPC9iPi4iLCAxMDApLA0KICAgICAgWzIxLCA2XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRW5kbGVzcyBjeWNsZSIsDQogICAgICBsb2MoIkFzY2VuZCA8Yj4lMSB0aW1lczwvYj4uIiwgMTAwMCkgKyAiPHE+T2ggaGV5LCBpdCdzIHlvdSBhZ2Fpbi48L3E+IiwNCiAgICAgIFsyLCA3XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCg0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGUgYWdlbWFzdGVyIiwgIiIsICJHcmFuZG1hIiwgNyk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVG8gb2xkbHkgZ28iLCAiIiwgIkdyYW5kbWEiLCA4KTsNCg0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJHYXJkZW5lciBleHRyYW9yZGluYWlyZSIsICIiLCAiRmFybSIsIDYpOw0KICAgIG9yZGVyID0gMTMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUZWN0b25pYyBhbWJhc3NhZG9yIiwgIiIsICJNaW5lIiwgNik7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJpc2Ugb2YgdGhlIG1hY2hpbmVzIiwgIiIsICJGYWN0b3J5IiwgNik7DQogICAgb3JkZXIgPSAxNDI1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkFjcXVpcmUgY3VycmVuY3kiLCAiIiwgIkJhbmsiLCA2KTsNCiAgICBvcmRlciA9IDE0NTA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiWmVhbG90cnkiLCAiIiwgIlRlbXBsZSIsIDYpOw0KICAgIG9yZGVyID0gMTQ3NTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGUgd2l6YXJkaW5nIHdvcmxkIiwgIiIsICJXaXphcmQgdG93ZXIiLCA2KTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiUGFyc2VjLW1hc2hlciIsICIiLCAiU2hpcG1lbnQiLCA2KTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIHdvcmsgb2YgYSBsaWZldGltZSIsICIiLCAiQWxjaGVteSBsYWIiLCA2KTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQSBwbGFjZSBsb3N0IGluIHRpbWUiLCAiIiwgIlBvcnRhbCIsIDYpOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJIZWF0IGRlYXRoIiwgIiIsICJUaW1lIG1hY2hpbmUiLCA2KTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWljcm9jb3NtIiwgIiIsICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsIDYpOw0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJCcmlnaHQgZnV0dXJlIiwgIiIsICJQcmlzbSIsIDYpOw0KDQogICAgb3JkZXIgPSAyNTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJIZXJlIGJlIGRyYWdvbiIsDQogICAgICBsb2MoIkNvbXBsZXRlIHlvdXIgPGI+ZHJhZ29uJ3MgdHJhaW5pbmc8L2I+LiIpLA0KICAgICAgWzIxLCAxMl0NCiAgICApOw0KDQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkhvdz8iKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiVGhlIGxhbmQgb2YgbWlsayBhbmQgY29va2llcyIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KA0KICAgICAgIkhlIHdobyBjb250cm9scyB0aGUgY29va2llcyBjb250cm9scyB0aGUgdW5pdmVyc2UiLA0KICAgICAgIlRoZSBtaWxrIG11c3QgZmxvdyEiDQogICAgKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiVG9uaWdodCBvbiBIb2FyZGVycyIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJBcmUgeW91IGdvbm5hIGVhdCBhbGwgdGhhdD8iKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiV2UncmUgZ29ubmEgbmVlZCBhIGJpZ2dlciBiYWtlcnkiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgNCiAgICAgICJJbiB0aGUgbW91dGggb2YgbWFkbmVzcyIsDQogICAgICAiQSBjb29raWUgaXMganVzdCB3aGF0IHdlIHRlbGwgZWFjaCBvdGhlciBpdCBpcy4iDQogICAgKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgNCiAgICAgICdCcm91Z2h0IHRvIHlvdSBieSB0aGUgbGV0dGVyIDxkaXYgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQ6dXJsKGltZy9tb25leS5wbmcpO3dpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7Ij48L2Rpdj4nDQogICAgKTsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkEgd29ybGQgZmlsbGVkIHdpdGggY29va2llcyIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiV2hlbiB0aGlzIGJhYnkgaGl0cyAiICsNCiAgICAgICAgQmVhdXRpZnkoMTAwMDAwMDAwMDAwMDAgKiA2MCAqIDYwKSArDQogICAgICAgICIgY29va2llcyBwZXIgaG91ciINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkZhc3QgYW5kIGRlbGljaW91cyIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiQ29va2llaGVydHogOiBhIHJlYWxseSwgcmVhbGx5IHRhc3R5IGhlcnR6IiwNCiAgICAgICJUYXN0aWVyIHRoYW4gYSBoZXJ0eiBkb251dCwgYW55d2F5LiINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIldvb3BzLCB5b3Ugc29sdmVkIHdvcmxkIGh1bmdlciIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiVHVyYm9wdW5zIiwNCiAgICAgICdNb3RoZXIgTmF0dXJlIHdpbGwgYmUgbGlrZSAic2xvd3d3d3cgZG93d3d3d24iLicNCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkZhc3RlciBtZW5uZXIiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJBbmQgeWV0IHlvdSdyZSBzdGlsbCBodW5ncnkiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJUaGUgQWJha2VuaW5nIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgNCiAgICAgICJUaGVyZSdzIHJlYWxseSBubyBoYXJkIGxpbWl0IHRvIGhvdyBsb25nIHRoZXNlIGFjaGlldmVtZW50IG5hbWVzIGNhbiBiZSBhbmQgdG8gYmUgcXVpdGUgaG9uZXN0IEknbSByYXRoZXIgY3VyaW91cyB0byBzZWUgaG93IGZhciB3ZSBjYW4gZ28uPGJyPkFkb2xwaHVzIFcuIEdyZWVuICgxODQ04oCTMTkxNykgc3RhcnRlZCBhcyB0aGUgUHJpbmNpcGFsIG9mIHRoZSBHcm90b24gU2Nob29sIGluIDE4NjQuIEJ5IDE4NjUsIGhlIGJlY2FtZSBzZWNvbmQgYXNzaXN0YW50IGxpYnJhcmlhbiBhdCB0aGUgTmV3IFlvcmsgTWVyY2FudGlsZSBMaWJyYXJ5OyBmcm9tIDE4NjcgdG8gMTg2OSwgaGUgd2FzIHByb21vdGVkIHRvIGZ1bGwgbGlicmFyaWFuLiBGcm9tIDE4NjkgdG8gMTg3MywgaGUgd29ya2VkIGZvciBFdmFydHMsIFNvdXRobWF5ZCAmIENob2F0ZSwgYSBsYXcgZmlybSBjby1mb3VuZGVkIGJ5IFdpbGxpYW0gTS4gRXZhcnRzLCBDaGFybGVzIEZlcmRpbmFuZCBTb3V0aG1heWQgYW5kIEpvc2VwaCBIb2RnZXMgQ2hvYXRlLiBIZSB3YXMgYWRtaXR0ZWQgdG8gdGhlIE5ldyBZb3JrIFN0YXRlIEJhciBBc3NvY2lhdGlvbiBpbiAxODczLjxicj5Bbnl3YXksIGhvdydzIHlvdXIgZGF5IGJlZW4/Ig0KICAgICk7IC8vR2FtZS5sYXN0LnNob3J0TmFtZT0nVGhlcmVcJ3MgcmVhbGx5IG5vIGhhcmQgbGltaXQgdG8gaG93IGxvbmcgdGhlc2UgYWNoaWV2ZW1lbnQgbmFtZXMgY2FuIGJlIGFuZCB0byBiZSBxdWl0ZSBob25lc3QgSVwnbSBbLi4uXSc7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiRmFzdCIsICJXb3chIik7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQmljZW50ZW5uaWFsIGFuZCBhIGhhbGYiLA0KICAgICAgbG9jKCJIYXZlIGF0IGxlYXN0IDxiPiUxIG9mIGV2ZXJ5dGhpbmc8L2I+LiIsIDI1MCkgKw0KICAgICAgICAiPHE+S2VlcCBvbiB0cnVja2luJy48L3E+IiwNCiAgICAgIFs5LCA2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDExMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRhYmxvaWQgYWRkaWN0aW9uIiwNCiAgICAgIGxvYygiQ2xpY2sgb24gdGhlIG5ld3MgdGlja2VyIDxiPiUxIHRpbWVzPC9iPi4iLCA1MCkgKw0KICAgICAgICAiPHE+UGFnZSA2OiBNYWQgaW5kaXZpZHVhbCBjbGlja3Mgb24gcGljdHVyZSBvZiBwYXN0cnkgaW4gYSBmdXRpbGUgYXR0ZW1wdCB0byBlc2NhcGUgYm9yZWRvbSE8YnI+QWxzbyBwYWdlIDY6IEJyaXRpc2ggcGFybGlhbWVudCBhdGUgbXkgYmFieSE8L3E+IiwNCiAgICAgIFsyNywgN10NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNsaWNrYXN0cm9waGUiLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMTcpKSksDQogICAgICBbMTEsIDE3XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2xpY2thdGFjbHlzbSIsDQogICAgICBsb2MoIk1ha2UgPGI+JTE8L2I+IGZyb20gY2xpY2tpbmcuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUxOSkpKSwNCiAgICAgIFsxMSwgMThdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTA1MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaHVtYnMsIHBoYWxhbmdlcywgbWV0YWNhcnBhbHMiLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSg1MDApKSkgKw0KICAgICAgICAiPHE+JiBLTlVDS0xFUzwvcT4iLA0KICAgICAgWzAsIDE1XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDYwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUG9seW1hdGgiLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+IHVwZ3JhZGVzIGFuZCA8Yj4lMjwvYj4gYnVpbGRpbmdzLiIsIFszMDAsIDQwMDBdKSArDQogICAgICAgICI8cT5FeGNlbGxlbmNlIGRvZXNuJ3QgaGFwcGVuIG92ZXJuaWdodCAtIGl0IHVzdWFsbHkgdGFrZXMgYSBnb29kIGNvdXBsZSBkYXlzLjwvcT4iLA0KICAgICAgWzI5LCA3XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwOTk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiVGhlIGVsZGVyIHNjcm9sbHMiLA0KICAgICAgbG9jKCJPd24gYSBjb21iaW5lZCA8Yj4lMTwvYj4gJTIgYW5kICUzLiIsIFsNCiAgICAgICAgNzc3LA0KICAgICAgICBsb2MoImdyYW5kbWFzIiksDQogICAgICAgIGxvYygiY3Vyc29ycyIpLA0KICAgICAgXSkgKyAiPHE+TGV0IG1lIGd1ZXNzLiBTb21lb25lIHN0b2xlIHlvdXIgY29va2llLjwvcT4iLA0KICAgICAgWzEwLCA5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDMwMDUwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRvIGNydW1icywgeW91IHNheT8iLA0KICAgICAgbG9jKCJBc2NlbmQgd2l0aCA8Yj4lMTwvYj4gYmFrZWQuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUzMykpKSArDQogICAgICAgICI8cT5WZXJ5IHdlbGwgdGhlbi48L3E+IiwNCiAgICAgIFsyOSwgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlNlZWR5IGJ1c2luZXNzIiwgIiIsICJGYXJtIiwgNyk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkZyZWFrIGZyYWNraW5nIiwgIiIsICJNaW5lIiwgNyk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk1vZGVybiB0aW1lcyIsICIiLCAiRmFjdG9yeSIsIDcpOw0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGUgbmVydmUgb2Ygd2FyIiwgIiIsICJCYW5rIiwgNyk7DQogICAgb3JkZXIgPSAxNDUwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIldvbG9sbyIsICIiLCAiVGVtcGxlIiwgNyk7DQogICAgb3JkZXIgPSAxNDc1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiQW5kIG5vdyBmb3IgbXkgbmV4dCB0cmljaywgSSdsbCBuZWVkIGEgdm9sdW50ZWVyIGZyb20gdGhlIGF1ZGllbmNlIiwNCiAgICAgICIiLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSXQncyBub3QgZGVsaXZlcnkiLCAiIiwgIlNoaXBtZW50IiwgNyk7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdvbGQsIEplcnJ5ISBHb2xkISIsICIiLCAiQWxjaGVteSBsYWIiLCA3KTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRm9yYmlkZGVuIHpvbmUiLCAiIiwgIlBvcnRhbCIsIDcpOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgImNvb2tpZSBjbGlja2VyIGZvcmV2ZXIgYW5kIGZvcmV2ZXIgYSBodW5kcmVkIHllYXJzIGNvb2tpZSBjbGlja2VyLCBhbGwgZGF5IGxvbmcgZm9yZXZlciwgZm9yZXZlciBhIGh1bmRyZWQgdGltZXMsIG92ZXIgYW5kIG92ZXIgY29va2llIGNsaWNrZXIgYWR2ZW50dXJlcyBkb3QgY29tIiwNCiAgICAgICIiLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJTY2llbnRpc3RzIGJhZmZsZWQgZXZlcnl3aGVyZSIsDQogICAgICAiIiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDIwMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSGFybW9ueSBvZiB0aGUgc3BoZXJlcyIsICIiLCAiUHJpc20iLCA3KTsNCg0KICAgIG9yZGVyID0gMzUwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTGFzdCBDaGFuY2UgdG8gU2VlIiwNCiAgICAgIGxvYygiQnVyc3QgdGhlIG5lYXItZXh0aW5jdCA8Yj5zaGlueSB3cmlua2xlcjwvYj4uIikgKw0KICAgICAgICAiPHE+WW91IG1vbnN0ZXIhPC9xPiIsDQogICAgICBbMjQsIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRWFybHkgYmlyZCIsDQogICAgICBsb2MoIkNsaWNrIGEgZ29sZGVuIGNvb2tpZSA8Yj5sZXNzIHRoYW4gMSBzZWNvbmQgYWZ0ZXIgaXQgc3Bhd25zPC9iPi4iKSwNCiAgICAgIFsxMCwgMTRdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJGYWRpbmcgbHVjayIsDQogICAgICBsb2MoIkNsaWNrIGEgZ29sZGVuIGNvb2tpZSA8Yj5sZXNzIHRoYW4gMSBzZWNvbmQgYmVmb3JlIGl0IGRpZXM8L2I+LiIpLA0KICAgICAgWzEwLCAxNF0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMjEwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJFbGRlZXIiLA0KICAgICAgbG9jKCJQb3AgYSByZWluZGVlciA8Yj5kdXJpbmcgYW4gZWxkZXIgZnJlbnp5PC9iPi4iKSwNCiAgICAgIFsxMiwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMTEwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJEdWRlLCBzd2VldCIsDQogICAgICBsb2MoIkhhcnZlc3QgPGI+JTEgY29hbGVzY2luZyBzdWdhciBsdW1wczwvYj4uIiwgNyksDQogICAgICBbMjQsIDE0XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3VnYXIgcnVzaCIsDQogICAgICBsb2MoIkhhcnZlc3QgPGI+JTEgY29hbGVzY2luZyBzdWdhciBsdW1wczwvYj4uIiwgMzApLA0KICAgICAgWzI2LCAxNF0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlllYXIncyB3b3J0aCBvZiBjYXZpdGllcyIsDQogICAgICBsb2MoIkhhcnZlc3QgPGI+JTEgY29hbGVzY2luZyBzdWdhciBsdW1wczwvYj4uIiwgMzY1KSArDQogICAgICAgICI8cT5NeSBsdW1wcyBteSBsdW1wcyBteSBsdW1wcy48L3E+IiwNCiAgICAgIFsyOSwgMTRdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJIYW5kLXBpY2tlZCIsDQogICAgICBsb2MoIlN1Y2Nlc3NmdWxseSBoYXJ2ZXN0IGEgY29hbGVzY2luZyBzdWdhciBsdW1wIGJlZm9yZSBpdCdzIHJpcGUuIiksDQogICAgICBbMjgsIDE0XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3VnYXIgc3VnYXIiLA0KICAgICAgbG9jKCJIYXJ2ZXN0IGEgPGI+YmlmdXJjYXRlZCBzdWdhciBsdW1wPC9iPi4iKSwNCiAgICAgIFsyOSwgMTVdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBbGwtbmF0dXJhbCBjYW5lIHN1Z2FyIiwNCiAgICAgIGxvYygiSGFydmVzdCBhIDxiPmdvbGRlbiBzdWdhciBsdW1wPC9iPi4iKSwNCiAgICAgIFsyOSwgMTZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlN3ZWV0bWVhdHMiLA0KICAgICAgbG9jKCJIYXJ2ZXN0IGEgPGI+bWVhdHkgc3VnYXIgbHVtcDwvYj4uIiksDQogICAgICBbMjksIDE3XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiVHJpY2VudGVubmlhbCIsDQogICAgICBsb2MoIkhhdmUgYXQgbGVhc3QgPGI+JTEgb2YgZXZlcnl0aGluZzwvYj4uIiwgMzAwKSArDQogICAgICAgICI8cT5DYW4ndCBzdG9wLCB3b24ndCBzdG9wLiBQcm9iYWJseSBzaG91bGQgc3RvcCwgdGhvdWdoLjwvcT4iLA0KICAgICAgWzI5LCAxMl0NCiAgICApOw0KDQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiS25lYWQgZm9yIHNwZWVkIiwgIkhvdyBkaWQgd2Ugbm90IG1ha2UgdGhhdCBvbmUgeWV0PyIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiV2VsbCB0aGUgY29va2llcyBzdGFydCBjb21pbmcgYW5kIHRoZXkgZG9uJ3Qgc3RvcCBjb21pbmciLA0KICAgICAgIkRpZG4ndCBtYWtlIHNlbnNlIG5vdCB0byBjbGljayBmb3IgZnVuLiINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiSSBkb24ndCBrbm93IGlmIHlvdSd2ZSBub3RpY2VkIGJ1dCBhbGwgdGhlc2UgaWNvbnMgYXJlIHZlcnkgc2xpZ2h0bHkgb2ZmLWNlbnRlciINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiVGhlIHByb29mIG9mIHRoZSBjb29raWUgaXMgaW4gdGhlIGJha2luZyIsDQogICAgICAiSG93IGNhbiB5b3UgaGF2ZSBhbnkgY29va2llcyBpZiB5b3UgZG9uJ3QgYmFrZSB5b3VyIGRvdWdoPyINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIklmIGl0J3Mgd29ydGggZG9pbmcsIGl0J3Mgd29ydGggb3ZlcmRvaW5nIik7DQoNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgNCiAgICAgICJUaGUgZHJlYW1zIGluIHdoaWNoIEknbSBiYWtpbmcgYXJlIHRoZSBiZXN0IEkndmUgZXZlciBoYWQiDQogICAgKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiU2V0IGZvciBsaWZlIik7DQoNCiAgICBvcmRlciA9IDEyMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiWW91IGFuZCB0aGUgYmVhbnN0YWxrIiwgIiIsICJGYXJtIiwgOCk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJvbWFuY2luZyB0aGUgc3RvbmUiLCAiIiwgIk1pbmUiLCA4KTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRXggbWFjaGluYSIsICIiLCAiRmFjdG9yeSIsIDgpOw0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBbmQgSSBuZWVkIGl0IG5vdyIsICIiLCAiQmFuayIsIDgpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJQcmF5IG9uIHRoZSB3ZWFrIiwgIiIsICJUZW1wbGUiLCA4KTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSXQncyBhIGtpbmQgb2YgbWFnaWMiLCAiIiwgIldpemFyZCB0b3dlciIsIDgpOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNYWtlIGl0IHNvIiwgIiIsICJTaGlwbWVudCIsIDgpOw0KICAgIG9yZGVyID0gMTYwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBbGwgdGhhdCBnbGl0dGVycyBpcyBnb2xkIiwgIiIsICJBbGNoZW15IGxhYiIsIDgpOw0KICAgIG9yZGVyID0gMTcwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJIzaHMuMy3zZPMs8yzzK/Mn82VzJ/Njc2NzKNlzaHMos2YzLDMpsywzLrMrsydzZbNlsyYzKrNiSDNmMygzKbNlcykzKrMnc2FzKXMsMygzKvMlsyjzZnMrEPMqMymzLrMqcyyzKXNicytzZrMnMy7zJ3Mo8y8zZnMrsyvzKpvzKHMtM2ezaHNh8yYzY7MnsyyzYfMpsyybcy4zZjMqcy6zJ3Mo8y5zYXMsc2azKzMpcyrzLPMvMyezJjMr2XNosyVzYHMo82HzLrMnHPNmM2YzLbNnsyZzJ/MscylzK7Mr8ywzKbNk82HzZbNlsydIiwgIiIsICJQb3J0YWwiLCA4KTsNCiAgICBvcmRlciA9IDE4MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2F5IGJhY2sgdGhlbiIsICIiLCAiVGltZSBtYWNoaW5lIiwgOCk7DQogICAgb3JkZXIgPSAxOTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkV4b3RpYyBtYXR0ZXIiLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgOCk7DQogICAgb3JkZXIgPSAyMDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkF0IHRoZSBlbmQgb2YgdGhlIHR1bm5lbCIsICIiLCAiUHJpc20iLCA4KTsNCg0KICAgIG9yZGVyID0gMTA3MDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgNCiAgICAgICJDbGljayAoc3RhcnJpbmcgQWRhbSBTYW5kbGVyKSIsDQogICAgICAiQ3Vyc29yIiwNCiAgICAgIDMsDQogICAgICAwLA0KICAgICAgNw0KICAgICk7DQogICAgb3JkZXIgPSAxMTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJGcmFudGlxdWl0aWVzIiwgIkdyYW5kbWEiLCAzLCAwLCA2KTsNCiAgICBvcmRlciA9IDEyMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk92ZXJncm93dGgiLCAiRmFybSIsIDMpOw0KICAgIG9yZGVyID0gMTMyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiU2VkaW1lbnRhbGlzbSIsICJNaW5lIiwgMyk7DQogICAgb3JkZXIgPSAxNDIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJMYWJvciBvZiBsb3ZlIiwgIkZhY3RvcnkiLCAzKTsNCiAgICBvcmRlciA9IDE0NDU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlJldmVyc2UgZnVubmVsIHN5c3RlbSIsICJCYW5rIiwgMyk7DQogICAgb3JkZXIgPSAxNDcwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJUaHVzIHNwb2tlIHlvdSIsICJUZW1wbGUiLCAzKTsNCiAgICBvcmRlciA9IDE0OTU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk1hbmFmZXN0IGRlc3RpbnkiLCAiV2l6YXJkIHRvd2VyIiwgMyk7DQogICAgb3JkZXIgPSAxNTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KA0KICAgICAgIk5laXRoZXIgc25vdyBub3IgcmFpbiBub3IgaGVhdCBub3IgZ2xvb20gb2YgbmlnaHQiLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDMNCiAgICApOw0KICAgIG9yZGVyID0gMTYyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiSSd2ZSBnb3QgdGhlIE1pZGFzIHRvdWNoIiwgIkFsY2hlbXkgbGFiIiwgMyk7DQogICAgb3JkZXIgPSAxNzIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJXaGljaCBldGVybmFsIGxpZSIsICJQb3J0YWwiLCAzKTsNCiAgICBvcmRlciA9IDE4MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkQmZWFjdXRlO2omYWdyYXZlOyB2dSIsICJUaW1lIG1hY2hpbmUiLCAzKTsNCiAgICBvcmRlciA9IDE5MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlBvd2VycyBvZiBUZW4iLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCAzKTsNCiAgICBvcmRlciA9IDIwMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk5vdyB0aGUgZGFyayBkYXlzIGFyZSBnb25lIiwgIlByaXNtIiwgMyk7DQoNCiAgICBvcmRlciA9IDEwNzA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIkZyZWFreSBqYXp6IGhhbmRzIiwgIiIsIFswLCAyNl0pOw0KICAgIEdhbWUuT2JqZWN0c1siQ3Vyc29yIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCiAgICBvcmRlciA9IDExMjA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIk1ldGh1c2VsYWgiLCAiIiwgWzEsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCiAgICBvcmRlciA9IDEyMjA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIkh1Z2UgdHJhY3RzIG9mIGxhbmQiLCAiIiwgWzIsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJGYXJtIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCiAgICBvcmRlciA9IDEzMjA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIkQtZC1kLWQtZGVlcGVyIiwgIiIsIFszLCAyNl0pOw0KICAgIEdhbWUuT2JqZWN0c1siTWluZSJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQogICAgb3JkZXIgPSAxNDIwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KCJQYXRlbnRseSBnZW5pdXMiLCAiIiwgWzQsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJGYWN0b3J5Il0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCiAgICBvcmRlciA9IDE0NDU7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIkEgY2FwaXRhbCBpZGVhIiwgIiIsIFsxNSwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkJhbmsiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTQ3MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiSXQgYmVsb25ncyBpbiBhIGJha2VyeSIsICIiLCBbMTYsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJUZW1wbGUiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTQ5NTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiTW90b3Jtb3V0aCIsICIiLCBbMTcsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJXaXphcmQgdG93ZXIiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTUyMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiQmVlbiB0aGVyZSBkb25lIHRoYXQiLCAiIiwgWzUsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJTaGlwbWVudCJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQogICAgb3JkZXIgPSAxNjIwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KCJQaGxvZ2lzdGljYXRlZCBzdWJzdGFuY2VzIiwgIiIsIFs2LCAyNl0pOw0KICAgIEdhbWUuT2JqZWN0c1siQWxjaGVteSBsYWIiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTcyMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiQml6YXJybyB3b3JsZCIsICIiLCBbNywgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIlBvcnRhbCJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQogICAgb3JkZXIgPSAxODIwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KCJUaGUgbG9uZyBub3ciLCAiIiwgWzgsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJUaW1lIG1hY2hpbmUiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTkyMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiQ2h1YmJ5IGhhZHJvbnMiLCAiIiwgWzEzLCAyNl0pOw0KICAgIEdhbWUuT2JqZWN0c1siQW50aW1hdHRlciBjb25kZW5zZXIiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMjAyMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiUGFsZXR0YWJsZSIsICIiLCBbMTQsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJQcmlzbSJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQoNCiAgICBvcmRlciA9IDYxNDcwOw0KICAgIG9yZGVyID0gNjE0OTU7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQmliYmlkaS1ib2JiaWRpLWJvbyIsDQogICAgICBsb2MoIkNhc3QgPGI+JTE8L2I+IHNwZWxscy4iLCA5KSwNCiAgICAgIFsyMSwgMTFdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJJJ20gdGhlIHdpeiIsDQogICAgICBsb2MoIkNhc3QgPGI+JTE8L2I+IHNwZWxscy4iLCA5OSksDQogICAgICBbMjIsIDExXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQSB3aXphcmQgaXMgeW91IiwNCiAgICAgIGxvYygiQ2FzdCA8Yj4lMTwvYj4gc3BlbGxzLiIsIDk5OSkgKyAiPHE+SSdtIGEgd2hhdD88L3E+IiwNCiAgICAgIFsyOSwgMTFdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRm91ci1sZWFmIGNvb2tpZSIsDQogICAgICBsb2MoIkhhdmUgPGI+JTE8L2I+IGdvbGRlbiBjb29raWVzIHNpbXVsdGFuZW91c2x5LiIsIDQpICsNCiAgICAgICAgIjxxPkZhaXJseSByYXJlLCBjb25zaWRlcmluZyBjb29raWVzIGRvbid0IGV2ZW4gaGF2ZSBsZWF2ZXMuPC9xPiIsDQogICAgICBbMjcsIDZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOw0KDQogICAgb3JkZXIgPSAyMTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkx1Y2tlZCBvdXQiLCAiIiwgIkNoYW5jZW1ha2VyIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2hhdCBhcmUgdGhlIG9kZHMiLCAiIiwgIkNoYW5jZW1ha2VyIiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJHcmFuZG1hIG5lZWRzIGEgbmV3IHBhaXIgb2Ygc2hvZXMiLA0KICAgICAgIiIsDQogICAgICAiQ2hhbmNlbWFrZXIiLA0KICAgICAgMw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWlsbGlvbiB0byBvbmUgc2hvdCwgZG9jIiwgIiIsICJDaGFuY2VtYWtlciIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkFzIGx1Y2sgd291bGQgaGF2ZSBpdCIsICIiLCAiQ2hhbmNlbWFrZXIiLCA1KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJFdmVyIGluIHlvdXIgZmF2b3IiLCAiIiwgIkNoYW5jZW1ha2VyIiwgNik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQmUgYSBsYWR5IiwgIiIsICJDaGFuY2VtYWtlciIsIDcpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkRpY2V5IGJ1c2luZXNzIiwgIiIsICJDaGFuY2VtYWtlciIsIDgpOw0KDQogICAgb3JkZXIgPSAyMTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJGaW5nZXJzIGNyb3NzZWQiLCAiQ2hhbmNlbWFrZXIiLCAxKTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiSnVzdCBhIHN0YXRpc3RpYyIsICJDaGFuY2VtYWtlciIsIDIpOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJNdXJwaHkncyB3aWxkIGd1ZXNzIiwgIkNoYW5jZW1ha2VyIiwgMyk7DQoNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiTGV0J3MgbGVhZiBpdCBhdCB0aGF0IiwgIiIsIFsxOSwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkNoYW5jZW1ha2VyIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGUgdWx0aW1hdGUgY2xpY2tkb3duIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTIxKSkpICsNCiAgICAgICAgIjxxPihvZiB1bHRpbWF0ZSBkZXN0aW55Lik8L3E+IiwNCiAgICAgIFsxMSwgMTldDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBZ2VkIHdlbGwiLCAiIiwgIkdyYW5kbWEiLCA5KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCIxMDFzdCBiaXJ0aGRheSIsICIiLCAiR3JhbmRtYSIsIDEwKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJCdXQgd2FpdCAndGlsIHlvdSBnZXQgb2xkZXIiLCAiIiwgIkdyYW5kbWEiLCAxMSk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkhhcnZlc3QgbW9vbiIsICIiLCAiRmFybSIsIDkpOw0KICAgIG9yZGVyID0gMTMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNaW5lPyIsICIiLCAiTWluZSIsIDkpOw0KICAgIG9yZGVyID0gMTQwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJJbiBmdWxsIGdlYXIiLCAiIiwgIkZhY3RvcnkiLCA5KTsNCiAgICBvcmRlciA9IDE0MjU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVHJlYWNsZSB0YXJ0IGVjb25vbWljcyIsICIiLCAiQmFuayIsIDkpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJIb2x5IGNvb2tpZXMsIGdyYW5kbWEhIiwgIiIsICJUZW1wbGUiLCA5KTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJUaGUgUHJlc3RpZ2UiLA0KICAgICAgIjxxPihVbnJlbGF0ZWQgdG8gdGhlIENvb2tpZSBDbGlja2VyIGZlYXR1cmUgb2YgdGhlIHNhbWUgbmFtZS4pPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDkNCiAgICApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGF0J3MganVzdCBwZWFudXRzIHRvIHNwYWNlIiwgIiIsICJTaGlwbWVudCIsIDkpOw0KICAgIG9yZGVyID0gMTYwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJXb3J0aCBpdHMgd2VpZ2h0IGluIGxlYWQiLCAiIiwgIkFsY2hlbXkgbGFiIiwgOSk7DQogICAgb3JkZXIgPSAxNzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiV2hhdCBoYXBwZW5zIGluIHRoZSB2b3J0ZXggc3RheXMgaW4gdGhlIHZvcnRleCIsDQogICAgICAiIiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSAxODAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiSW52aXRlZCB0byB5ZXN0ZXJkYXkncyBwYXJ0eSIsDQogICAgICAiIiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSAxOTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkRvd25zaXppbmciLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgOSk7IC8vdGhlIHRyYWlsZXIgZ290IG1lIHJlYWxseSBoeXBlZCB1cCBidXQgaSd2ZSByZWFkIHNvbWUgcHJldHR5IGJhZCByZXZpZXdzLiBpcyBpdCB3YXRjaGFibGUgPyBpcyBpdCB3b3J0aCBzZWVpbmcgPyBpIGRvbid0IG1pbmQgbWF0dCBkYW1vbg0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNeSBleWVzIiwgIiIsICJQcmlzbSIsIDkpOw0KICAgIG9yZGVyID0gMjEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIk1heWJlIGEgY2hhbmNlIGluIGhlbGwsIGFjdHVhbGx5IiwNCiAgICAgICIiLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDkNCiAgICApOw0KDQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk1ha2UgbGlrZSBhIHRyZWUiLCAiIiwgIkZhcm0iLCAxMCk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkNhdmUgc3RvcnkiLCAiIiwgIk1pbmUiLCAxMCk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkluLWNvZy1uZWF0byIsICIiLCAiRmFjdG9yeSIsIDEwKTsNCiAgICBvcmRlciA9IDE0MjU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJTYXZlIHlvdXIgYnJlYXRoIGJlY2F1c2UgdGhhdCdzIGFsbCB5b3UndmUgZ290IGxlZnQiLA0KICAgICAgIiIsDQogICAgICAiQmFuayIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSAxNDUwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlZlbmdlZnVsIGFuZCBhbG1pZ2h0eSIsICIiLCAiVGVtcGxlIiwgMTApOw0KICAgIG9yZGVyID0gMTQ3NTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTcGVsbCBpdCBvdXQgZm9yIHlvdSIsICIiLCAiV2l6YXJkIHRvd2VyIiwgMTApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIlNwYWNlIHNwYWNlIHNwYWNlIHNwYWNlIHNwYWNlIiwNCiAgICAgICI8cT5JdCdzIHRvbyBmYXIgYXdheS4uLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJEb24ndCBnZXQgdXNlZCB0byB5b3Vyc2VsZiwgeW91J3JlIGdvbm5hIGhhdmUgdG8gY2hhbmdlIiwNCiAgICAgICIiLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJPYmplY3RzIGluIHRoZSBtaXJyb3IgZGltZW5zaW9uIGFyZSBjbG9zZXIgdGhhbiB0aGV5IGFwcGVhciIsDQogICAgICAiIiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJHcm91bmRob2cgZGF5IiwgIiIsICJUaW1lIG1hY2hpbmUiLCAxMCk7DQogICAgb3JkZXIgPSAxOTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiQSBtYXR0ZXIgb2YgcGVyc3BlY3RpdmUiLA0KICAgICAgIiIsDQogICAgICAiQW50aW1hdHRlciBjb25kZW5zZXIiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJPcHRpY2FsIGlsbHVzaW9uIiwgIiIsICJQcmlzbSIsIDEwKTsNCiAgICBvcmRlciA9IDIxMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSmFja3BvdCIsICIiLCAiQ2hhbmNlbWFrZXIiLCAxMCk7DQoNCiAgICBvcmRlciA9IDM2MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlNvIG11Y2ggdG8gZG8gc28gbXVjaCB0byBzZWUiLA0KICAgICAgbG9jKCJNYW5hZ2UgYSBjb29raWUgbGVnYWN5IGZvciA8Yj5hdCBsZWFzdCBhIHllYXI8L2I+LiIpICsNCiAgICAgICAgIjxxPlRoYW5rIHlvdSBzbyBtdWNoIGZvciBwbGF5aW5nIENvb2tpZSBDbGlja2VyITwvcT4iLA0KICAgICAgWzIzLCAxMV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInNoYWRvdyI7DQoNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJSdW5uaW5nIHdpdGggc2Npc3NvcnMiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJSYXJlZmllZCBhaXIiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJQdXNoIGl0IHRvIHRoZSBsaW1pdCIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkdyZWVuIGNvb2tpZXMgc2xlZXAgZnVyaW91c2x5Iik7DQoNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiUGFuaWMhIGF0IE5hYmlzY28iKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiQnVyc3RpbmcgYXQgdGhlIHNlYW1zIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkp1c3QgYWJvdXQgZnVsbCIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJIdW5ncnkgZm9yIG1vcmUiKTsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBbGwgdGhlIG90aGVyIGtpZHMgd2l0aCB0aGUgcHVtcGVkIHVwIGNsaWNrcyIsDQogICAgICBsb2MoIk1ha2UgPGI+JTE8L2I+IGZyb20gY2xpY2tpbmcuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUyMykpKSwNCiAgICAgIFsxMSwgMjhdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJPbmUuLi5tb3JlLi4uY2xpY2suLi4iLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMjUpKSksDQogICAgICBbMTEsIDMwXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDYxNTE1Ow0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkJvdGFueSBlbnRodXNpYXN0IiwNCiAgICAgIGxvYygiSGFydmVzdCA8Yj4lMTwvYj4gbWF0dXJlIGdhcmRlbiBwbGFudHMuIiwgMTAwKSwNCiAgICAgIFsyNiwgMjBdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJHcmVlbiwgYWNoaW5nIHRodW1iIiwNCiAgICAgIGxvYygiSGFydmVzdCA8Yj4lMTwvYj4gbWF0dXJlIGdhcmRlbiBwbGFudHMuIiwgMTAwMCksDQogICAgICBbMjcsIDIwXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSW4gdGhlIGdhcmRlbiBvZiBFZGVuIChiYWJ5KSIsDQogICAgICBsb2MoIkZpbGwgZXZlcnkgdGlsZSBvZiB0aGUgYmlnZ2VzdCBnYXJkZW4gcGxvdCB3aXRoIHBsYW50cy4iKSArDQogICAgICAgICI8cT5Jc24ndCB0ZW5kaW5nIHRvIHRob3NlIHByZWNpb3VzIGxpdHRsZSBwbGFudHMganVzdCBzbyByb2NrIGFuZC9vciByb2xsPzwvcT4iLA0KICAgICAgWzI4LCAyMF0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiS2VlcGVyIG9mIHRoZSBjb25zZXJ2YXRvcnkiLA0KICAgICAgbG9jKCJVbmxvY2sgZXZlcnkgZ2FyZGVuIHNlZWQuIiksDQogICAgICBbMjUsIDIwXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2VlZGxlc3MgdG8gbmF5IiwNCiAgICAgIGxvYygNCiAgICAgICAgJ0NvbnZlcnQgYSBjb21wbGV0ZSBzZWVkIGxvZyBpbnRvIHN1Z2FyIGx1bXBzIGJ5IHNhY3JpZmljaW5nIHlvdXIgZ2FyZGVuIHRvIHRoZSBzdWdhciBob3JuZXRzLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pk93bmluZyB0aGlzIGFjaGlldmVtZW50IG1ha2VzIHNlZWRzIDxiPiUxJSBjaGVhcGVyPC9iPiwgcGxhbnRzIG1hdHVyZSA8Yj4lMiUgc29vbmVyPC9iPiwgYW5kIHBsYW50IHVwZ3JhZGVzIGRyb3AgPGI+JTMlIG1vcmU8L2I+LicsDQogICAgICAgIFs1LCA1LCA1XQ0KICAgICAgKSwNCiAgICAgIFsyOSwgMjBdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMzAwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiWW91IGdldCBub3RoaW5nIiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMzYpKSkgKw0KICAgICAgICAiPHE+R29vZCBkYXkgc2lyITwvcT4iLA0KICAgICAgWzI5LCA2XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSHVtYmxlIHJlYmVnaW5uaW5ncyIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTM5KSkpICsNCiAgICAgICAgIjxxPlN0YXJ0ZWQgZnJvbSB0aGUgYm90dG9tLCBub3cgd2UncmUgaGVyZS48L3E+IiwNCiAgICAgIFsyOSwgNl0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRoZSBlbmQgb2YgdGhlIHdvcmxkIiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNDIpKSkgKw0KICAgICAgICAiPHE+KGFzIHdlIGtub3cgaXQpPC9xPiIsDQogICAgICBbMjEsIDI1XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiT2gsIHlvdSdyZSBiYWNrIiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNDUpKSkgKw0KICAgICAgICAiPHE+TWlzc2VkIHVzPzwvcT4iLA0KICAgICAgWzIxLCAyNV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkxhemFydXMiLA0KICAgICAgbG9jKCJBc2NlbmQgd2l0aCA8Yj4lMTwvYj4gYmFrZWQuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWU0OCkpKSArDQogICAgICAgICI8cT5BbGwgcmlzZS48L3E+IiwNCiAgICAgIFsyMSwgMjVdDQogICAgKTsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkxlaXN1cmVseSBwYWNlIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiSHlwZXJzb25pYyIpOw0KDQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkZlZWQgbWUsIE9ydGVpbCIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJBbmQgdGhlbiB3aGF0PyIpOw0KDQogICAgb3JkZXIgPSA3MDAyOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRyaWNlbnRlbm5pYWwgYW5kIGEgaGFsZiIsDQogICAgICBsb2MoIkhhdmUgYXQgbGVhc3QgPGI+JTEgb2YgZXZlcnl0aGluZzwvYj4uIiwgMzUwKSArDQogICAgICAgICI8cT4oaXQncyBmcmVlIHJlYWwgZXN0YXRlKTwvcT4iLA0KICAgICAgWzIxLCAyNl0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlF1YWRyaWNlbnRlbm5pYWwiLA0KICAgICAgbG9jKCJIYXZlIGF0IGxlYXN0IDxiPiUxIG9mIGV2ZXJ5dGhpbmc8L2I+LiIsIDQwMCkgKw0KICAgICAgICAiPHE+WW91J3ZlIGhhZCB0byBkbyBob3JyaWJsZSB0aGluZ3MgdG8gZ2V0IHRoaXMgZmFyLjxicj5Ib3JyaWJsZS4uLiBob3JyaWJsZSB0aGluZ3MuPC9xPiIsDQogICAgICBbMjIsIDI2XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUXVhZHJpY2VudGVubmlhbCBhbmQgYSBoYWxmIiwNCiAgICAgIGxvYygiSGF2ZSBhdCBsZWFzdCA8Yj4lMSBvZiBldmVyeXRoaW5nPC9iPi4iLCA0NTApICsNCiAgICAgICAgIjxxPkF0IHRoaXMgcG9pbnQsIHlvdSBtaWdodCBqdXN0IGJlIGNvbXBlbnNhdGluZyBmb3Igc29tZXRoaW5nLjwvcT4iLA0KICAgICAgWzIzLCAyNl0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUXVpbmNlbnRlbm5pYWwiLA0KICAgICAgbG9jKCJIYXZlIGF0IGxlYXN0IDxiPiUxIG9mIGV2ZXJ5dGhpbmc8L2I+LiIsIDUwMCkgKw0KICAgICAgICAiPHE+U29tZSBwZW9wbGUgd291bGQgc2F5IHlvdSdyZSBoYWxmd2F5IHRoZXJlLjxicj5XZSBkbyBub3QgY2FyZSBmb3IgdGhvc2UgcGVvcGxlIGFuZCB0aGVpciByZWNrbGVzcyBzZW5zZSBvZiB1bmNoZWNrZWQgb3B0aW1pc20uPC9xPiIsDQogICAgICBbMjksIDI1XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIxMTAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk1haWxsYXJkIHJlYWN0aW9uIiwNCiAgICAgIGxvYygiSGFydmVzdCBhIDxiPmNhcmFtZWxpemVkIHN1Z2FyIGx1bXA8L2I+LiIpLA0KICAgICAgWzI5LCAyN10NCiAgICApOw0KDQogICAgb3JkZXIgPSAzMDI1MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJXaGVuIHRoZSBjb29raWVzIGFzY2VuZCBqdXN0IHJpZ2h0IiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggZXhhY3RseSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUxMikpKSwNCiAgICAgIFsyNSwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInNoYWRvdyI7IC8vdGhpcyBhY2hpZXZlbWVudCBpcyBzaGFkb3cgYmVjYXVzZSBpdCBpcyBvbmx5IGFjaGlldmFibGUgdGhyb3VnaCBibGluZCBsdWNrIG9yIHJlYWRpbmcgZXh0ZXJuYWwgZ3VpZGVzOyB0aGlzIG1heSBjaGFuZ2UgaW4gdGhlIGZ1dHVyZQ0KDQogICAgb3JkZXIgPSAxMDUwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIldpdGggaGVyIGZpbmdlciBhbmQgaGVyIHRodW1iIiwNCiAgICAgIGxvYygiSGF2ZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBjdXJzb3IiLCBMQmVhdXRpZnkoNjAwKSkpLA0KICAgICAgWzAsIDE2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRGVmZW5zZSBvZiB0aGUgYW5jaWVudHMiLCAiIiwgIkdyYW5kbWEiLCAxMik7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlNoYXJwZXN0IHRvb2wgaW4gdGhlIHNoZWQiLCAiIiwgIkZhcm0iLCAxMSk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkhleSBub3csIHlvdSdyZSBhIHJvY2siLCAiIiwgIk1pbmUiLCAxMSk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkJyZWFrIHRoZSBtb2xkIiwgIiIsICJGYWN0b3J5IiwgMTEpOw0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJHZXQgdGhlIHNob3cgb24sIGdldCBwYWlkIiwgIiIsICJCYW5rIiwgMTEpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIk15IHdvcmxkJ3Mgb24gZmlyZSwgaG93IGFib3V0IHlvdXJzIiwNCiAgICAgICIiLA0KICAgICAgIlRlbXBsZSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAxNDc1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiVGhlIG1ldGVvciBtZW4gYmVnIHRvIGRpZmZlciIsDQogICAgICAiIiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgMTENCiAgICApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJPbmx5IHNob290aW5nIHN0YXJzIiwgIiIsICJTaGlwbWVudCIsIDExKTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJXZSBjb3VsZCBhbGwgdXNlIGEgbGl0dGxlIGNoYW5nZSIsDQogICAgICAiIiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAxMQ0KICAgICk7IC8vImFsbCB0aGF0IGdsaXR0ZXJzIGlzIGdvbGQiIHdhcyBhbHJlYWR5IGFuIGFjaGlldmVtZW50DQogICAgb3JkZXIgPSAxNzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiWW91ciBicmFpbiBnZXRzIHNtYXJ0IGJ1dCB5b3VyIGhlYWQgZ2V0cyBkdW1iIiwNCiAgICAgICIiLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAxODAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRoZSB5ZWFycyBzdGFydCBjb21pbmciLCAiIiwgIlRpbWUgbWFjaGluZSIsIDExKTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2hhdCBhIGNvbmNlcHQiLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgMTEpOw0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIllvdSdsbCBuZXZlciBzaGluZSBpZiB5b3UgZG9uJ3QgZ2xvdyIsDQogICAgICAiIiwNCiAgICAgICJQcmlzbSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAyMTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiWW91J2xsIG5ldmVyIGtub3cgaWYgeW91IGRvbid0IGdvIiwNCiAgICAgICIiLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDExDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTZWxmLWNvbnRhaW5lZCIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaHJldyB5b3UgZm9yIGEgbG9vcCIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGUgc3VtIG9mIGl0cyBwYXJ0cyIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAzKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkJlYXJzIHJlcGVhdGluZyIsDQogICAgICAiPHE+V2hlcmUgZGlkIHRoZXNlIGNvbWUgZnJvbT88L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNb3JlIG9mIHRoZSBzYW1lIiwgIiIsICJGcmFjdGFsIGVuZ2luZSIsIDUpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkxhc3QgcmVjdXJzZSIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCA2KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJPdXQgb2Ygb25lLCBtYW55IiwgIiIsICJGcmFjdGFsIGVuZ2luZSIsIDcpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkFuIGV4YW1wbGUgb2YgcmVjdXJzaW9uIiwgIiIsICJGcmFjdGFsIGVuZ2luZSIsIDgpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhpcyBhY2hpZXZlbWVudCwgcGxlYXNlIHJlZmVyIHRvIGl0cyB0aXRsZSIsDQogICAgICAiIiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICA5DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkknbSBzbyBtZXRhLCBldmVuIHRoaXMgYWNoaWV2ZW1lbnQiLA0KICAgICAgIiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgMTANCiAgICApOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk5ldmVyIGdldCBib3JlZCIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAxMSk7DQoNCiAgICBvcmRlciA9IDIyMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlRoZSBuZWVkcyBvZiB0aGUgbWFueSIsICJGcmFjdGFsIGVuZ2luZSIsIDEpOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJFYXRpbmcgaXRzIG93biIsICJGcmFjdGFsIGVuZ2luZSIsIDIpOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJXZSBtdXN0IGdvIGRlZXBlciIsICJGcmFjdGFsIGVuZ2luZSIsIDMpOw0KDQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIlNpZXJwaW5za2kgcmhvbWJvaWRzIiwgIiIsIFsyMCwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkZyYWN0YWwgZW5naW5lIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkdvdHRhIGdvIGZhc3QiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiSSB0aGluayBpdCdzIHNhZmUgdG8gc2F5IHlvdSd2ZSBnb3QgaXQgbWFkZSIpOw0KDQogICAgb3JkZXIgPSA2MDAyOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlJlbmFpc3NhbmNlIGJha2VyIiwNCiAgICAgIGxvYygiT3duIDxiPiUxPC9iPiB1cGdyYWRlcyBhbmQgPGI+JTI8L2I+IGJ1aWxkaW5ncy4iLCBbNDAwLCA4MDAwXSkgKw0KICAgICAgICAiPHE+SWYgeW91IGhhdmUgc2VlbiBmdXJ0aGVyLCBpdCBpcyBieSBzdGFuZGluZyBvbiB0aGUgc2hvdWxkZXJzIG9mIGdpYW50cyAtIGEgbXlzdGVyaW91cyBzcGVjaWVzIG9mIHRvd2VyaW5nIGh1bWFub2lkcyB1bnRpbCBub3cgdGhvdWdodCBsb25nLWV4dGluY3QuPC9xPiIsDQogICAgICBbMTAsIDEwXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwOTg7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiVmV0ZXJhbiIsDQogICAgICBsb2MoIk93biBhdCBsZWFzdCA8Yj4lMTwvYj4gZ3JhbmRtYSB0eXBlcy4iLCAxNCkgKyAiPHE+MTQncyBhIGNyb3dkITwvcT4iLA0KICAgICAgWzEwLCA5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRoaWNrLXNraW5uZWQiLA0KICAgICAgbG9jKA0KICAgICAgICAiSGF2ZSB5b3VyIDxiPnJlaW5mb3JjZWQgbWVtYnJhbmU8L2I+IHByb3RlY3QgdGhlIDxiPnNoaW1tZXJpbmcgdmVpbDwvYj4uIg0KICAgICAgKSwNCiAgICAgIFs3LCAxMF0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkYxMiIsICIiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVmFyaWFibGUgc3VjY2VzcyIsICIiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTm8gY29tbWVudHMiLCAiIiwgIkphdmFzY3JpcHQgY29uc29sZSIsIDMpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlVwIHRvIGNvZGUiLCAiIiwgIkphdmFzY3JpcHQgY29uc29sZSIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIldvcmtzIG9uIG15IG1hY2hpbmUiLCAiIiwgIkphdmFzY3JpcHQgY29uc29sZSIsIDUpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRlY2huaWNhbCBkZWJ0IiwgIiIsICJKYXZhc2NyaXB0IGNvbnNvbGUiLCA2KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNaW5kIHlvdXIgbGFuZ3VhZ2UiLCAiIiwgIkphdmFzY3JpcHQgY29uc29sZSIsIDcpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkluY29uc29sYWJsZSIsICIiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgOCk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQ2xvc3VyZSIsICIiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgOSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJEdWRlIHdoYXQgaWYgd2UncmUgYWxsIGxpdmluZyBpbiBhIHNpbXVsYXRpb24gbGlrZSB3aGF0IGlmIHdlJ3JlIGFsbCBqdXN0IGNvZGUgb24gYSBjb21wdXRlciBzb21ld2hlcmUiLA0KICAgICAgIiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIlRha2luZyB0aGUgYmFjayBzdHJlZXRzIiwNCiAgICAgICIiLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAxMQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIzMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkluaGVyaXRlZCBwcm90b3R5cGUiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgMSk7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoDQogICAgICAiQSBtb2RlbCBvZiBkb2N1bWVudCBvYmplY3QiLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiRmlyc3QtY2xhc3MgY2l0aXplbiIsICJKYXZhc2NyaXB0IGNvbnNvbGUiLCAzKTsNCg0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KCJBbGV4YW5kcmlhIiwgIiIsIFszMiwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkphdmFzY3JpcHQgY29uc29sZSJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQoNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJCYWtlIGhpbSBhd2F5LCB0b3lzIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiWW91J3JlICMxIHNvIHdoeSB0cnkgaGFyZGVyIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiSGF2ZW4ndCBldmVuIGJlZ3VuIHRvIHBlYWsiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiQSBzb21ldGltZXMgZm9vZCIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJOb3QgZW5vdWdoIG9mIGEgZ29vZCB0aGluZyIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJIb3JuIG9mIHBsZW50eSIpOw0KDQogICAgb3JkZXIgPSAzMDA1MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJTbXVyZiBhY2NvdW50IiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNTEpKSkgKw0KICAgICAgICAiPHE+SXQncyBsaWtlIHlvdSBqdXN0IGFwcGVhcmVkIG91dCBvZiB0aGUgYmx1ZSE8L3E+IiwNCiAgICAgIFsyMSwgMzJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJJZiBhdCBmaXJzdCB5b3UgZG9uJ3Qgc3VjY2VlZCIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTU0KSkpICsNCiAgICAgICAgIjxxPklmIGF0IGZpcnN0IHlvdSBkb24ndCBzdWNjZWVkLCB0cnksIHRyeSwgdHJ5IGFnYWluLjxicj5CdXQgaXNuJ3QgdGhhdCB0aGUgZGVmaW5pdGlvbiBvZiBpbnNhbml0eT88L3E+IiwNCiAgICAgIFsyMSwgMzJdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMzMwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTyBGb3J0dW5hIiwNCiAgICAgIGxvYygNCiAgICAgICAgJ093biBldmVyeSA8Yj5mb3J0dW5lIHVwZ3JhZGU8L2I+LjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pk93bmluZyB0aGlzIGFjaGlldmVtZW50IG1ha2VzIGZvcnR1bmVzIGFwcGVhciA8Yj50d2ljZSBhcyBvZnRlbjwvYj47IHVubG9ja2VkIGZvcnR1bmUgdXBncmFkZXMgYWxzbyBoYXZlIGEgPGI+JTElIGNoYW5jZTwvYj4gdG8gY2Fycnkgb3ZlciBhZnRlciBhc2NlbmRpbmcuJywNCiAgICAgICAgNDANCiAgICAgICksDQogICAgICBbMjksIDhdDQogICAgKTsNCg0KICAgIG9yZGVyID0gNjE2MTU7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSW5pdGlhbCBwdWJsaWMgb2ZmZXJpbmciLA0KICAgICAgbG9jKCJNYWtlIHlvdXIgZmlyc3Qgc3RvY2sgbWFya2V0IHByb2ZpdC4iKSwNCiAgICAgIFswLCAzM10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlJvb2tpZSBudW1iZXJzIiwNCiAgICAgIGxvYygiT3duIGF0IGxlYXN0IDxiPiUxPC9iPiBvZiBldmVyeSBzdG9jayBtYXJrZXQgZ29vZC4iLCAxMDApICsNCiAgICAgICAgIjxxPkdvdHRhIHB1bXAgdGhvc2UgbnVtYmVycyB1cCE8L3E+IiwNCiAgICAgIFs5LCAzM10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk5vIG5vYmlsaXR5IGluIHBvdmVydHkiLA0KICAgICAgbG9jKCJPd24gYXQgbGVhc3QgPGI+JTE8L2I+IG9mIGV2ZXJ5IHN0b2NrIG1hcmtldCBnb29kLiIsIDUwMCkgKw0KICAgICAgICAiPHE+V2hhdCBraW5kIG9mIHR3aXN0ZWQgaW5kaXZpZHVhbCBpcyBvdXQgdGhlcmUgY3JhbW1pbmcgY2FtZWxzIHRocm91Z2ggbmVlZGxlIGhvbGVzIGFueXdheT88L3E+IiwNCiAgICAgIFsxMCwgMzNdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJGdWxsIHdhcmVob3VzZXMiLA0KICAgICAgbG9jKCJPd24gYXQgbGVhc3QgPGI+JTE8L2I+IG9mIGEgc3RvY2sgbWFya2V0IGdvb2QuIiwgMTAwMCksDQogICAgICBbMTEsIDMzXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTWFrZSBteSBkYXkiLA0KICAgICAgbG9jKCJNYWtlIDxiPmEgZGF5PC9iPiBvZiBDcFMgKCQlMSkgaW4gMSBzdG9jayBtYXJrZXQgc2FsZS4iLCA4NjQwMCksDQogICAgICBbMSwgMzNdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJCdXkgYnV5IGJ1eSIsDQogICAgICBsb2MoIlNwZW5kIDxiPmEgZGF5PC9iPiBvZiBDcFMgKCQlMSkgaW4gMSBzdG9jayBtYXJrZXQgcHVyY2hhc2UuIiwgODY0MDApLA0KICAgICAgWzEsIDMzXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiR2FzZW91cyBhc3NldHMiLA0KICAgICAgbG9jKA0KICAgICAgICAiSGF2ZSB5b3VyIHN0b2NrIG1hcmtldCBwcm9maXRzIHN1cnBhc3MgPGI+YSB3aG9sZSB5ZWFyPC9iPiBvZiBDcFMgKCQlMSkuIiwNCiAgICAgICAgMzE1MzYwMDANCiAgICAgICkgKyAiPHE+Qm95LCBob3cgdm9sYXRpbGUhPC9xPiIsDQogICAgICBbMTgsIDMzXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJQeXJhbWlkIHNjaGVtZSIsDQogICAgICBsb2MoIlVubG9jayB0aGUgPGI+aGlnaGVzdC10aWVyPC9iPiBzdG9jayBtYXJrZXQgaGVhZHF1YXJ0ZXJzLiIpLA0KICAgICAgWzE4LCAzM10NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJKZWxsaWNsZXMiLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+IGtpdHRlbiB1cGdyYWRlcy4iLCAxMCkgKw0KICAgICAgICAiPHE+SmVsbGljbGVzIGNhbiBhbmQgamVsbGljbGVzIGRvISBNYWtlIHN1cmUgdG8gd2FzaCB5b3VyIGplbGxpY2xlcyBldmVyeSBkYXkhPC9xPiIsDQogICAgICBbMTgsIDE5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUXVpbmNlbnRlbm5pYWwgYW5kIGEgaGFsZiIsDQogICAgICBsb2MoIkhhdmUgYXQgbGVhc3QgPGI+JTEgb2YgZXZlcnl0aGluZzwvYj4uIiwgNTUwKSArDQogICAgICAgICI8cT5UaGlzIHdvbid0IGZpbGwgdGhlIGNodXJuaW5nIHZvaWQgaW5zaWRlLCB5b3Uga25vdy48L3E+IiwNCiAgICAgIFsyOSwgMjZdDQogICAgKTsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIldoYXQgZGlkIHdlIGV2ZW4gZWF0IGJlZm9yZSB0aGVzZSIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkhlYXZ5IGZsb3ciKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJNb3JlIHlvdSBzYXk/Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkxhcmdlIGFuZCBpbiBjaGFyZ2UiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiQWJzb2x1dGVseSBzdHVmZmVkIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkl0J3Mgb25seSB3YWZlci10aGluIiwgIkp1c3QgdGhlIG9uZSEiKTsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDbGlja2V0eSBzcGxpdCIsDQogICAgICBsb2MoIk1ha2UgPGI+JTE8L2I+IGZyb20gY2xpY2tpbmcuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUyNykpKSwNCiAgICAgIFsxMSwgMzFdDQogICAgKTsNCiAgICBvcmRlciA9IDEwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiR290dGEgaGFuZCBpdCB0byB5b3UiLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSg3MDApKSksDQogICAgICBbMCwgMTddDQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiT2theSBib29tZXIiLCAiIiwgIkdyYW5kbWEiLCAxMyk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk92ZXJyaXBlIiwgIiIsICJGYXJtIiwgMTIpOw0KICAgIG9yZGVyID0gMTMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSb2NrIG9uIiwgIiIsICJNaW5lIiwgMTIpOw0KICAgIG9yZGVyID0gMTQwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTZWxmLW1hbm1hZGUgbWFuIiwgIiIsICJGYWN0b3J5IiwgMTIpOw0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJDaGVja3Mgb3V0IiwgIiIsICJCYW5rIiwgMTIpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJMaXZpbmcgb24gYSBwcmF5ZXIiLCAiIiwgIlRlbXBsZSIsIDEyKTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJIaWdpdHVzIGZpZ2l0dXMgbWlnaXR1cyBtdW0iLA0KICAgICAgIiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIGluY3JlZGlibGUgam91cm5leSIsICIiLCAiU2hpcG1lbnQiLCAxMik7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkp1c3QgYSBwaGFzZSIsICIiLCAiQWxjaGVteSBsYWIiLCAxMik7DQogICAgb3JkZXIgPSAxNzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkRvbid0IGxldCBtZSBsZWF2ZSwgTXVycGgiLCAiIiwgIlBvcnRhbCIsIDEyKTsNCiAgICBvcmRlciA9IDE4MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQ2F2ZW1hbiB0byBjb3Ntb3MiLCAiIiwgIlRpbWUgbWFjaGluZSIsIDEyKTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiUGFydGljdWxhciB0YXN0ZXMiLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgMTIpOw0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBIGxpZ2h0IHNuYWNrIiwgIiIsICJQcmlzbSIsIDEyKTsNCiAgICBvcmRlciA9IDIxMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGVtcHRpbmcgZmF0ZSIsICIiLCAiQ2hhbmNlbWFrZXIiLCAxMik7DQogICAgb3JkZXIgPSAyMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRhdXRvbG9naWNhbCIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAxMik7DQogICAgb3JkZXIgPSAyMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiQ3VybHkgYnJhY2VzIiwNCiAgICAgICI8cT5PciBhcyB0aGUgRnJlbmNoIGNhbGwgdGhlbSwgbXVzdGFjaGUgYm94ZXMuPGJyPkdvIHdlbGwgd2l0aCBxdW90ZXMuPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDEyDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2V2ZW4gaG9yc2VzaG9lcyIsDQogICAgICBsb2MoIkNsaWNrIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGdvbGRlbiBjb29raWUiLCBMQmVhdXRpZnkoMjc3NzcpKSkgKw0KICAgICAgICAiPHE+RW5vdWdoIGZvciBvbmUgb2YgdGhvc2UgZnVua3kgaG9yc2VzIHRoYXQgZ3JhemUgbmVhciB5b3VyIGZhY3Rvcmllcy48L3E+IiwNCiAgICAgIFsyMSwgMzNdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOw0KDQogICAgb3JkZXIgPSAxMTAwNTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJPbGRlbiBkYXlzIiwNCiAgICAgIGxvYygiRmluZCB0aGUgPGI+Zm9yZ290dGVuIG1hZGVsZWluZTwvYj4uIikgKw0KICAgICAgICAiPHE+RGFzaE5ldCBGYXJtcyByZW1lbWJlcnMuPC9xPiIsDQogICAgICBbMTIsIDNdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTA1MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGUgZGV2aWwncyB3b3Jrc2hvcCIsDQogICAgICBsb2MoIkhhdmUgPGI+JTE8L2I+LiIsIGxvYygiJTEgY3Vyc29yIiwgTEJlYXV0aWZ5KDgwMCkpKSwNCiAgICAgIFswLCAxOF0NCiAgICApOw0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJJbiB0aGUgZ3JlZW4iLCAiIiwgIkZhcm0iLCAxMyk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiTW91bnRhaW4gb3V0IG9mIGEgbW9sZWhpbGwsIGJ1dCBsaWtlIGluIGEgZ29vZCB3YXkiLA0KICAgICAgIiIsDQogICAgICAiTWluZSIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRoZSB3aGVlbHMgb2YgcHJvZ3Jlc3MiLCAiIiwgIkZhY3RvcnkiLCAxMyk7DQogICAgb3JkZXIgPSAxNDI1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRoYXQncyByaWNoIiwgIiIsICJCYW5rIiwgMTMpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJQcmVhY2hlcyBhbmQgY3JlYW0iLCAiIiwgIlRlbXBsZSIsIDEzKTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWFnaWMgdGhpbmtpbmciLCAiIiwgIldpemFyZCB0b3dlciIsIDEzKTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJJcyB0aGVyZSBsaWZlIG9uIE1hcnM/IiwNCiAgICAgICI8cT5ZZXMsIHRoZXJlIGlzLiBZb3UncmUgY3VycmVudGx5IHVzaW5nIGl0IGFzIGZpbGxpbmcgaW4gZXhwZXJpbWVudGFsIGZsYXZvciBwcm90b3R5cGUgIzgxMDY1Ny48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkJhZCBjaGVtaXN0cnkiLCAiIiwgIkFsY2hlbXkgbGFiIiwgMTMpOw0KICAgIG9yZGVyID0gMTcwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSZWR1Y2VkIHRvIGdpYmJlcmluZyBoZWFwcyIsICIiLCAiUG9ydGFsIiwgMTMpOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJCYWNrIGFscmVhZHk/IiwgIiIsICJUaW1lIG1hY2hpbmUiLCAxMyk7DQogICAgb3JkZXIgPSAxOTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk51Y2xlYXIgdGhyb25lIiwgIiIsICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsIDEzKTsNCiAgICBvcmRlciA9IDIwMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWFraW5nIGxpZ2h0IG9mIHRoZSBzaXR1YXRpb24iLCAiIiwgIlByaXNtIiwgMTMpOw0KICAgIG9yZGVyID0gMjEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkZsaXAgYSBjb29raWUuIENoaXBzLCBJIHdpbi4gQ3J1c3QsIHlvdSBsb3NlLiIsDQogICAgICAiIiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAyMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkluIGFuZCBvZiBpdHNlbGYiLCAiIiwgIkZyYWN0YWwgZW5naW5lIiwgMTMpOw0KICAgIG9yZGVyID0gMjMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkR1Y2sgdHlwaW5nIiwNCiAgICAgICI8cT5IZWxsbywgdGhpcyBpcyBhIGR1Y2sgdHlwaW5nLiBHb3QgYW55IGdyYXBlcz88L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgMTMNCiAgICApOw0KDQogICAgb3JkZXIgPSAyNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiVGhleSdsbCBuZXZlciBrbm93IHdoYXQgaGl0ICdlbSIsDQogICAgICAiIiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2VsbC12ZXJzZWQiLCAiIiwgIklkbGV2ZXJzZSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJpcGUgZm9yIHRoZSBwaWNraW5nIiwgIiIsICJJZGxldmVyc2UiLCAzKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJVbnJlYWwiLCAiIiwgIklkbGV2ZXJzZSIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk9uY2UgeW91J3ZlIHNlZW4gb25lIiwgIiIsICJJZGxldmVyc2UiLCA1KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTcG9pbHMgYW5kIHBsdW5kZXIiLCAiIiwgIklkbGV2ZXJzZSIsIDYpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiTm9ib2R5IGV4aXN0cyBvbiBwdXJwb3NlLCBub2JvZHkgYmVsb25ncyBhbnl3aGVyZSIsDQogICAgICAiPHE+Q29tZSB3YXRjaCBUVj88L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgNw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSHlwZXJzcGFjZSBleHByZXNzd2F5IiwgIiIsICJJZGxldmVyc2UiLCA4KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJWZXJzYXRpbGUiLCAiIiwgIklkbGV2ZXJzZSIsIDkpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIllvdSBhcmUgaW5ldml0YWJsZSIsICIiLCAiSWRsZXZlcnNlIiwgMTApOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkF3YXkgZnJvbSB0aGlzIHBsYWNlIiwgIiIsICJJZGxldmVyc2UiLCAxMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRXZlcnl3aGVyZSBhdCBvbmNlIiwgIiIsICJJZGxldmVyc2UiLCAxMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJSZWplY3QgcmVhbGl0eSwgc3Vic3RpdHV0ZSB5b3VyIG93biIsDQogICAgICAiIiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMTMNCiAgICApOw0KDQogICAgb3JkZXIgPSAyNDIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJGcmluZ2UiLCAiSWRsZXZlcnNlIiwgMSk7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkNvaGVyZW5jZSIsICJJZGxldmVyc2UiLCAyKTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiRWFydGgtNjE2IiwgIklkbGV2ZXJzZSIsIDMpOw0KDQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIlN0cmFuZ2UgdG9wb2xvZ2llcyIsICIiLCBbMzMsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJJZGxldmVyc2UiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkdyYW5kIGRlc2lnbiIsDQogICAgICBsb2MoIk93biA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBidWlsZGluZyIsIExCZWF1dGlmeSg1MDAwKSkpICsNCiAgICAgICAgIjxxPlRoZXknbGwgcmVtZW1iZXIgeW91IGZvcmV2ZXIhPC9xPiIsDQogICAgICBbMzIsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRWN1bWVub3BvbGlzIiwNCiAgICAgIGxvYygiT3duIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGJ1aWxkaW5nIiwgTEJlYXV0aWZ5KDc1MDApKSkgKw0KICAgICAgICAiPHE+R2V0dGluZyBhIHdlZSBiaXQgY3JhbXBlZC48L3E+IiwNCiAgICAgIFszMywgMTJdDQogICAgKTsNCg0KICAgIG9yZGVyID0gNjAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGUgZnVsbCBwaWN0dXJlIiwNCiAgICAgIGxvYygiUHVyY2hhc2UgPGI+JTE8L2I+LiIsIGxvYygiJTEgdXBncmFkZSIsIExCZWF1dGlmeSgzMDApKSkgKw0KICAgICAgICAiPHE+U28gdGhhdCdzIHdoZXJlIHRoYXQgZml0cyBpbiE8L3E+IiwNCiAgICAgIFszMiwgMTFdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJXaGVuIHRoZXJlJ3Mgbm90aGluZyBsZWZ0IHRvIGFkZCIsDQogICAgICBsb2MoIlB1cmNoYXNlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIHVwZ3JhZGUiLCBMQmVhdXRpZnkoNDAwKSkpICsNCiAgICAgICAgIjxxPi4uLmtlZXAgZ29pbmcuPC9xPiIsDQogICAgICBbMzMsIDExXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2V4Y2VudGVubmlhbCIsDQogICAgICBsb2MoIkhhdmUgYXQgbGVhc3QgPGI+JTEgb2YgZXZlcnl0aGluZzwvYj4uIiwgNjAwKSArDQogICAgICAgICI8cT5IZXksIG5pY2UgbWlsZXN0b25lITwvcT4iLA0KICAgICAgWzMxLCAzM10NCiAgICApOw0KDQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiS2VlcCBnb2luZyB1bnRpbCBJIHNheSBzdG9wIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiQnV0IEkgZGlkbid0IHNheSBzdG9wLCBkaWQgST8iKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJXaXRoIHVucml2YWxlZCBmZXJ2b3IiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiVGhpbmsgYmlnIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkh5cGVyc2l6ZSBtZSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJNYXggY2FwYWNpdHkiKTsNCg0KICAgIG9yZGVyID0gNjE2MTY7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTGlxdWlkIGFzc2V0cyIsDQogICAgICBsb2MoIkhhdmUgeW91ciBzdG9jayBtYXJrZXQgcHJvZml0cyBzdXJwYXNzIDxiPiQlMTwvYj4uIiwgMWU3KSwNCiAgICAgIFsxMiwgMzNdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3RpZmxpbmcgdGhlIHByZXNzIiwNCiAgICAgIGxvYygiU3F1aXNoIHRoZSBuZXdzIHRpY2tlciBmbGF0LCB0aGVuIGNsaWNrIG9uIGl0LiIpICsNCiAgICAgICAgIjxxPk5hcnJvdyBpbiBoZXJlIG9yIGlzIGl0IGp1c3QgbWU/PC9xPiIsDQogICAgICBbMjcsIDddDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJJdCdzIGJpZyBicmFpbiB0aW1lIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJKdXN0IG15IGltYWdpbmF0aW9uIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJOb3cgdGhlcmUncyBhbiBpZGVhIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAzKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIlRoZSBvcmdhbiB0aGF0IG5hbWVkIGl0c2VsZiIsDQogICAgICAiIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgNA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiR3lyaWZpY2F0aW9uIiwgIiIsICJDb3J0ZXggYmFrZXIiLCA1KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgJ0EgdHJhZGVtYXJrZWQgcG9ydG1hbnRlYXUgb2YgImltYWdpbmF0aW9uIiBhbmQgImVuZ2luZWVyaW5nIicsDQogICAgICAiIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgNg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWluZGZ1bG5lc3MiLCAiIiwgIkNvcnRleCBiYWtlciIsIDcpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRoZSAxMCUgbXl0aCIsICIiLCAiQ29ydGV4IGJha2VyIiwgOCk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJEb24ndCB0aGluayBhYm91dCBpdCB0b28gaGFyZCIsDQogICAgICAiIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgOQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJUaG91Z2ggZm9vbHMgc2VsZG9tIGRpZmZlciIsDQogICAgICAiIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgMTANCiAgICApOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkxvb2tpbmcga2luZCBvZiBkdW1iIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAxMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQSBiZWF1dGlmdWwgbWluZCIsICIiLCAiQ29ydGV4IGJha2VyIiwgMTIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkNhcmRpbmFsIHN5bmFwc2VzIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAxMyk7DQoNCiAgICBvcmRlciA9IDI1MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlBvc2l0aXZlIHRoaW5raW5nIiwgIkNvcnRleCBiYWtlciIsIDEpOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJUaGUgdGhvdWdodCB0aGF0IGNvdW50cyIsICJDb3J0ZXggYmFrZXIiLCAyKTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiVW50aGlua2FibGUiLCAiQ29ydGV4IGJha2VyIiwgMyk7DQoNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiR2lmdGVkIiwgIiIsIFszNCwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkNvcnRleCBiYWtlciJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQoNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhleSBtb2lzdGx5IGNvbWUgYXQgbmlnaHQiLCAiIiwgIkdyYW5kbWEiLCAxNCk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkl0J3MgZ3Jvd24gb24geW91IiwgIiIsICJGYXJtIiwgMTQpOw0KICAgIG9yZGVyID0gMTMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkRvbid0IGxldCB0aGUgd2FsbHMgY2F2ZSBpbiBvbiB5b3UiLA0KICAgICAgIiIsDQogICAgICAiTWluZSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJlcGxhY2VkIGJ5IHJvYm90cyIsICIiLCAiRmFjdG9yeSIsIDE0KTsNCiAgICBvcmRlciA9IDE0MjU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJGaW5hbmNpYWwgcHJvZGlneSIsDQogICAgICAiPHE+SW1hZ2luZSBob3cgaXQgd291bGQgYmUsIHRvIGJlIGF0IHRoZSB0b3AgbWFraW5nIGNhc2ggbW9uZXkuPC9xPiIsDQogICAgICAiQmFuayIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxNDUwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkFuZCBJIHdpbGwgcHJheSB0byBhIGJpZyBnb2QiLCAiIiwgIlRlbXBsZSIsIDE0KTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiU2hvc3BsZSBDb2x1cGlzIiwgIiIsICJXaXphcmQgdG93ZXIiLCAxNCk7DQogICAgb3JkZXIgPSAxNTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkZhbHNlIHZhY3V1bSIsICIiLCAiU2hpcG1lbnQiLCAxNCk7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk1ldGFsbGljIHRhc3RlIiwgIiIsICJBbGNoZW15IGxhYiIsIDE0KTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiU3dpc3MgY2hlZXNlIiwgIiIsICJQb3J0YWwiLCAxNCk7DQogICAgb3JkZXIgPSAxODAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiQnV0IHRoZSBmdXR1cmUgcmVmdXNlZCB0byBjaGFuZ2UiLA0KICAgICAgIiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJXaGF0J3MgdGhlIGRhcmsgbWF0dGVyIHdpdGggeW91IiwNCiAgICAgICIiLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDIwMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRW5saWdodGVubWVudCIsICIiLCAiUHJpc20iLCAxNCk7DQogICAgb3JkZXIgPSAyMTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk5ldmVyIHRlbGwgbWUgdGhlIG9kZHMiLCAiIiwgIkNoYW5jZW1ha2VyIiwgMTQpOw0KICAgIG9yZGVyID0gMjIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkJsb3dpbmcgYW4gQXBvbGxvbmlhbiBnYXNrZXQiLA0KICAgICAgIiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gMjMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkdldCB3aXRoIHRoZSBwcm9ncmFtIiwNCiAgICAgICIiLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAyNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkxvc3QgeW91ciBjb3NtaWMgbWFyYmxlcyIsICIiLCAiSWRsZXZlcnNlIiwgMTQpOw0KICAgIG9yZGVyID0gMjUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkJ5IHdpbGwgYWxvbmUgSSBzZXQgbXkgbWluZCBpbiBtb3Rpb24iLA0KICAgICAgIiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDE0DQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBaW4ndCB0aGF0IGEgY2xpY2sgaW4gdGhlIGhlYWQiLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMjkpKSksDQogICAgICBbMTEsIDM0XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2V4Y2VudGVubmlhbCBhbmQgYSBoYWxmIiwNCiAgICAgIGxvYygiSGF2ZSBhdCBsZWFzdCA8Yj4lMSBvZiBldmVyeXRoaW5nPC9iPi4iLCA2NTApICsNCiAgICAgICAgIjxxPkhvcGUgeW91J3JlIGVuam95aW5nIHRoZSBncmluZCBzbyBmYXIhIEl0IGdldHMgd29yc2UuPC9xPiIsDQogICAgICBbMjEsIDM0XQ0KICAgICk7DQoNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJJIGFtIHNwZWVkIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiQW5kIG9uIGFuZCBvbiIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJGYWtlIGl0IHRpbGwgeW91IGJha2UgaXQiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiSGlzdG9yeSBpbiB0aGUgYmFraW5nIik7DQoNCiAgICBvcmRlciA9IDIyMTAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkJhYnkgaXQncyBvbGQgb3V0c2lkZSIsDQogICAgICBsb2MoIkNsaWNrIG9uZSBvZiBTYW50YSdzIGhlbHBlciBncmFuZG1hcyBkdXJpbmcgQ2hyaXN0bWFzIHNlYXNvbi4iKSwNCiAgICAgIFsxMCwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk15cmlhZCIsDQogICAgICBsb2MoIk93biA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBidWlsZGluZyIsIExCZWF1dGlmeSgxMDAwMCkpKSArDQogICAgICAgICI8cT5BdCB0aGlzIHBvaW50LCBtb3N0IG9mIHlvdXIgYXNzZXRzIGxpZSBpbiByZWFsIGVzdGF0ZS48L3E+IiwNCiAgICAgIFszMSwgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSA2MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkthaXplbiIsDQogICAgICBsb2MoIlB1cmNoYXNlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIHVwZ3JhZGUiLCBMQmVhdXRpZnkoNTAwKSkpICsNCiAgICAgICAgIjxxPkp1c3QgYSBsaXR0bGUgbW9yZS48L3E+IiwNCiAgICAgIFszMSwgNV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkJleW9uZCBxdWFsaXR5IiwNCiAgICAgIGxvYygiUHVyY2hhc2UgPGI+JTE8L2I+LiIsIGxvYygiJTEgdXBncmFkZSIsIExCZWF1dGlmeSg2MDApKSkgKw0KICAgICAgICAiPHE+RHdhcmZpbmcgYWxsIG9mIG1hbmtpbmQncyBhY2NvbXBsaXNobWVudHMuPC9xPiIsDQogICAgICBbMzIsIDVdDQogICAgKTsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkV2ZXJ5dGhpbmcgaGFwcGVucyBzbyBtdWNoIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiSSdsbCByZXN0IHdoZW4gSSdtIGRlYWQiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiV2hhdCBkbyB5b3UgZ2V0IGZvciB0aGUgYmFrZXIgd2hvIGhhcyBldmVyeXRoaW5nIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkJvdHRvbWxlc3MgcGl0Iik7DQoNCiAgICBvcmRlciA9IDYwMDE7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQWxsIHRoZSBzdGFycyBpbiBoZWF2ZW4iLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+IGhlYXZlbmx5IHVwZ3JhZGVzLiIsIDEwMCksDQogICAgICBbMzAsIDVdDQogICAgKTsNCg0KICAgIC8vZW5kIG9mIGFjaGlldmVtZW50cw0KDQogICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgIGlmIChHYW1lLk9iamVjdHNbaV0ubGV2ZWxBY2hpZXYxMCkgew0KICAgICAgICBHYW1lLk9iamVjdHNbaV0ubGV2ZWxBY2hpZXYxMC5iYXNlRGVzYyA9IGxvYygNCiAgICAgICAgICAiUmVhY2ggbGV2ZWwgPGI+JTE8L2I+ICUyLiIsDQogICAgICAgICAgWzEwLCBHYW1lLk9iamVjdHNbaV0ucGx1cmFsXQ0KICAgICAgICApOw0KICAgICAgICBHYW1lLk9iamVjdHNbaV0ubGV2ZWxBY2hpZXYxMC5kZXNjID0NCiAgICAgICAgICBHYW1lLk9iamVjdHNbaV0ubGV2ZWxBY2hpZXYxMC5iYXNlRGVzYzsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBMb2NhbGl6ZVVwZ3JhZGVzQW5kQWNoaWV2cygpOw0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCUJVRkZTDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLmJ1ZmZzID0ge307IC8vYnVmZnMgY3VycmVudGx5IGluIGVmZmVjdCBieSBuYW1lDQogICAgR2FtZS5idWZmc0kgPSAwOw0KICAgIEdhbWUuYnVmZnNMID0gbCgiYnVmZnMiKTsNCiAgICBHYW1lLmdhaW5CdWZmID0gZnVuY3Rpb24gKHR5cGUsIHRpbWUsIGFyZzEsIGFyZzIsIGFyZzMpIHsNCiAgICAgIHR5cGUgPSBHYW1lLmJ1ZmZUeXBlc0J5TmFtZVt0eXBlXTsNCiAgICAgIHZhciBvYmogPSB0eXBlLmZ1bmModGltZSwgYXJnMSwgYXJnMiwgYXJnMyk7DQogICAgICBvYmoudHlwZSA9IHR5cGU7DQogICAgICBvYmouYXJnMSA9IGFyZzE7DQogICAgICBvYmouYXJnMiA9IGFyZzI7DQogICAgICBvYmouYXJnMyA9IGFyZzM7DQogICAgICBpZiAoIW9iai5kbmFtZSAmJiBvYmoubmFtZSAhPSAiPz8/Iikgb2JqLmRuYW1lID0gbG9jKG9iai5uYW1lKTsNCg0KICAgICAgdmFyIGJ1ZmYgPSB7DQogICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIHRpbWU6IDAsDQogICAgICAgIG5hbWU6ICI/Pz8iLA0KICAgICAgICBkZXNjOiAiIiwNCiAgICAgICAgaWNvbjogWzAsIDBdLA0KICAgICAgfTsNCiAgICAgIGlmIChHYW1lLmJ1ZmZzW29iai5uYW1lXSkgew0KICAgICAgICAvL2lmIHRoZXJlIGlzIGFscmVhZHkgYSBidWZmIGluIGVmZmVjdCB3aXRoIHRoaXMgbmFtZQ0KICAgICAgICB2YXIgYnVmZiA9IEdhbWUuYnVmZnNbb2JqLm5hbWVdOw0KICAgICAgICBpZiAob2JqLm1heCkgYnVmZi50aW1lID0gTWF0aC5tYXgob2JqLnRpbWUsIGJ1ZmYudGltZSk7IC8vbmV3IGR1cmF0aW9uIGlzIG1heCBvZiBvbGQgYW5kIG5ldw0KICAgICAgICBpZiAob2JqLmFkZCkgYnVmZi50aW1lICs9IG9iai50aW1lOyAvL25ldyBkdXJhdGlvbiBpcyBvbGQgKyBuZXcNCiAgICAgICAgaWYgKCFvYmoubWF4ICYmICFvYmouYWRkKSBidWZmLnRpbWUgPSBvYmoudGltZTsgLy9uZXcgZHVyYXRpb24gaXMgc2V0IHRvIG5ldw0KICAgICAgICBidWZmLm1heFRpbWUgPSBidWZmLnRpbWU7DQogICAgICB9IC8vY3JlYXRlIG5ldyBidWZmDQogICAgICBlbHNlIHsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBvYmopIHsgLy9wYXN0ZSBwYXJhbWV0ZXJzIG9udG8gYnVmZg0KICAgICAgICAgIGJ1ZmZbaV0gPSBvYmpbaV07DQogICAgICAgIH0NCiAgICAgICAgYnVmZi5tYXhUaW1lID0gYnVmZi50aW1lOw0KICAgICAgICBHYW1lLmJ1ZmZzW2J1ZmYubmFtZV0gPSBidWZmOw0KICAgICAgICBidWZmLmlkID0gR2FtZS5idWZmc0k7DQoNCiAgICAgICAgLy9jcmVhdGUgZG9tDQogICAgICAgIEdhbWUuYnVmZnNMLmlubmVySFRNTCA9DQogICAgICAgICAgR2FtZS5idWZmc0wuaW5uZXJIVE1MICsNCiAgICAgICAgICAnPGRpdiBpZD0iYnVmZicgKw0KICAgICAgICAgIGJ1ZmYuaWQgKw0KICAgICAgICAgICciIGNsYXNzPSJjcmF0ZSBlbmFibGVkIGJ1ZmYiICcgKw0KICAgICAgICAgIChidWZmLmRlc2MNCiAgICAgICAgICAgID8gR2FtZS5nZXRUb29sdGlwKA0KICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJwcm9tcHQiIHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7bWFyZ2luOjhweCAwcHg7IiBpZD0idG9vbHRpcEJ1ZmYiPjxoMz4nICsNCiAgICAgICAgICAgICAgICAgIGJ1ZmYuZG5hbWUgKw0KICAgICAgICAgICAgICAgICAgJzwvaDM+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgICAgICAgICBidWZmLmRlc2MgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgICAgICAgICAgImxlZnQiLA0KICAgICAgICAgICAgICAgIHRydWUNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICcgc3R5bGU9Im9wYWNpdHk6MTtmbG9hdDpub25lO2Rpc3BsYXk6YmxvY2s7JyArDQogICAgICAgICAgd3JpdGVJY29uKGJ1ZmYuaWNvbikgKw0KICAgICAgICAgICciPjwvZGl2Pic7DQoNCiAgICAgICAgYnVmZi5sID0gbCgiYnVmZiIgKyBidWZmLmlkKTsNCg0KICAgICAgICBHYW1lLmJ1ZmZzSSsrOw0KICAgICAgfQ0KICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgcmV0dXJuIGJ1ZmY7DQogICAgfTsNCiAgICBHYW1lLmhhc0J1ZmYgPSBmdW5jdGlvbiAoDQogICAgICB3aGF0IC8vcmV0dXJucyAwIGlmIHRoZXJlIGlzIG5vIGJ1ZmYgaW4gZWZmZWN0IHdpdGggdGhpcyBuYW1lOyBlbHNlLCByZXR1cm5zIGl0DQogICAgKSB7DQogICAgICBpZiAoIUdhbWUuYnVmZnNbd2hhdF0pIHJldHVybiAwOw0KICAgICAgZWxzZSByZXR1cm4gR2FtZS5idWZmc1t3aGF0XTsNCiAgICB9Ow0KICAgIEdhbWUudXBkYXRlQnVmZnMgPSBmdW5jdGlvbiAoKSAvL2V4ZWN1dGVkIGV2ZXJ5IGxvZ2ljIGZyYW1lDQogICAgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmJ1ZmZzKSB7DQogICAgICAgIHZhciBidWZmID0gR2FtZS5idWZmc1tpXTsNCg0KICAgICAgICBpZiAoYnVmZi50aW1lID49IDApIHsNCiAgICAgICAgICBpZiAoIWwoImJ1ZmZQaWVUaW1lciIgKyBidWZmLmlkKSkNCiAgICAgICAgICAgIGwoImJ1ZmYiICsgYnVmZi5pZCkuaW5uZXJIVE1MID0NCiAgICAgICAgICAgICAgbCgiYnVmZiIgKyBidWZmLmlkKS5pbm5lckhUTUwgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0icGllVGltZXIiIGlkPSJidWZmUGllVGltZXInICsNCiAgICAgICAgICAgICAgYnVmZi5pZCArDQogICAgICAgICAgICAgICciPjwvZGl2Pic7DQogICAgICAgICAgdmFyIFQgPSAxIC0gYnVmZi50aW1lIC8gYnVmZi5tYXhUaW1lOw0KICAgICAgICAgIFQgPSAoVCAqIDE0NCkgJSAxNDQ7DQogICAgICAgICAgbCgiYnVmZlBpZVRpbWVyIiArIGJ1ZmYuaWQpLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAgICAgICAtTWF0aC5mbG9vcihUICUgMTgpICogNDggKyAicHggIiArIC1NYXRoLmZsb29yKFQgLyAxOCkgKiA0OCArICJweCI7DQogICAgICAgIH0NCiAgICAgICAgYnVmZi50aW1lLS07DQogICAgICAgIGlmIChidWZmLnRpbWUgPD0gMCkgew0KICAgICAgICAgIGlmIChHYW1lLm9uQ3JhdGUgPT0gbCgiYnVmZiIgKyBidWZmLmlkKSkgR2FtZS50b29sdGlwLmhpZGUoKTsNCiAgICAgICAgICBpZiAoYnVmZi5vbkRpZSkgYnVmZi5vbkRpZSgpOw0KICAgICAgICAgIEdhbWUuYnVmZnNMLnJlbW92ZUNoaWxkKGwoImJ1ZmYiICsgYnVmZi5pZCkpOw0KICAgICAgICAgIGlmIChHYW1lLmJ1ZmZzW2J1ZmYubmFtZV0pIHsNCiAgICAgICAgICAgIEdhbWUuYnVmZnNbYnVmZi5uYW1lXSA9IDA7DQogICAgICAgICAgICBkZWxldGUgR2FtZS5idWZmc1tidWZmLm5hbWVdOw0KICAgICAgICAgIH0NCiAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLmtpbGxCdWZmID0gZnVuY3Rpb24gKA0KICAgICAgd2hhdCAvL3JlbW92ZSBhIGJ1ZmYgYnkgbmFtZQ0KICAgICkgew0KICAgICAgaWYgKEdhbWUuYnVmZnNbd2hhdF0pIHsNCiAgICAgICAgR2FtZS5idWZmc1t3aGF0XS50aW1lID0gMDsgLypHYW1lLmJ1ZmZzW3doYXRdPTA7Ki8NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUua2lsbEJ1ZmZzID0gZnVuY3Rpb24gKCkgLy9yZW1vdmUgYWxsIGJ1ZmZzDQogICAgew0KICAgICAgR2FtZS5idWZmc0wuaW5uZXJIVE1MID0gIiI7DQogICAgICBHYW1lLmJ1ZmZzID0ge307DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgfTsNCg0KICAgIEdhbWUuYnVmZlR5cGVzID0gW107IC8vYnVmZiBhcmNoZXR5cGVzOyBvbmx5IGJ1ZmZzIGRlY2xhcmVkIGZyb20gdGhlc2UgY2FuIGJlIHNhdmVkIGFuZCBsb2FkZWQNCiAgICBHYW1lLmJ1ZmZUeXBlc0J5TmFtZSA9IFtdOw0KICAgIEdhbWUuYnVmZlR5cGVzTiA9IDA7DQogICAgR2FtZS5idWZmVHlwZSA9IGZ1bmN0aW9uIChuYW1lLCBmdW5jKSB7DQogICAgICB0aGlzLm5hbWUgPSBuYW1lOw0KICAgICAgdGhpcy5mdW5jID0gZnVuYzsgLy90aGlzIGlzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYnVmZiBvYmplY3Q7IGl0IHRha2VzIGEgInRpbWUiIGFyZ3VtZW50IGluIHNlY29uZHMsIGFuZCAzIG1vcmUgb3B0aW9uYWwgYXJndW1lbnRzIGF0IG1vc3QsIHdoaWNoIHdpbGwgYmUgc2F2ZWQgYW5kIGxvYWRlZCBhcyBmbG9hdHMNCiAgICAgIHRoaXMuaWQgPSBHYW1lLmJ1ZmZUeXBlc047DQogICAgICB0aGlzLnZhbmlsbGEgPSBHYW1lLnZhbmlsbGE7DQogICAgICBHYW1lLmJ1ZmZUeXBlc0J5TmFtZVt0aGlzLm5hbWVdID0gdGhpczsNCiAgICAgIEdhbWUuYnVmZlR5cGVzW0dhbWUuYnVmZlR5cGVzTl0gPSB0aGlzOw0KICAgICAgR2FtZS5idWZmVHlwZXNOKys7DQogICAgfTsNCg0KICAgIC8qDQoJCWJhc2ljIGJ1ZmYgcGFyYW1ldGVycyA6DQoJCQluYW1lOidLaXR0ZW4gcmFpbicsDQoJCQlkZXNjOidJdFwncyByYWluaW5nIGtpdHRlbnMhJywNCgkJCWljb246WzAsMF0sDQoJCQl0aW1lOjMwKkdhbWUuZnBzDQoJCW90aGVyIHBhcmFtZXRlcnMgOg0KCQkJdmlzaWJsZTpmYWxzZSAtIHdpbGwgaGlkZSB0aGUgYnVmZiBmcm9tIHRoZSBidWZmIGxpc3QNCgkJCWFkZDp0cnVlIC0gaWYgdGhpcyBidWZmIGFscmVhZHkgZXhpc3RzLCBhZGQgdGhlIG5ldyBkdXJhdGlvbiB0byB0aGUgb2xkIG9uZQ0KCQkJbWF4OnRydWUgLSBpZiB0aGlzIGJ1ZmYgYWxyZWFkeSBleGlzdHMsIHNldCB0aGUgbmV3IGR1cmF0aW9uIHRvIHRoZSBtYXggb2YgZWl0aGVyDQoJCQlvbkRpZTpmdW5jdGlvbigpe30gLSBmdW5jdGlvbiB3aWxsIGV4ZWN1dGUgd2hlbiB0aGUgYnVmZiBydW5zIG91dA0KCQkJcG93ZXI6MyAtIHVzZWQgYnkgc29tZSBidWZmcw0KCQkJbXVsdENwUzozIC0gYnVmZiBtdWx0aXBsaWVzIENwUyBieSB0aGlzIGFtb3VudA0KCQkJbXVsdENsaWNrOjMgLSBidWZmIG11bHRpcGxpZXMgY2xpY2sgcG93ZXIgYnkgdGhpcyBhbW91bnQNCgkJKi8NCg0KICAgIC8vYmFzZSBidWZmcw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJmcmVuenkiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiRnJlbnp5IiwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzEwLCAxNF0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgYWRkOiB0cnVlLA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJibG9vZCBmcmVuenkiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiRWxkZXIgZnJlbnp5IiwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzI5LCA2XSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBhZGQ6IHRydWUsDQogICAgICAgIG11bHRDcFM6IHBvdywNCiAgICAgICAgYXVyYTogMSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImNsb3QiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ2xvdCIsDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiQ29va2llIHByb2R1Y3Rpb24gaGFsdmVkIGZvciAlMSEiLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKQ0KICAgICAgICApLA0KICAgICAgICBpY29uOiBbMTUsIDVdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIGFkZDogdHJ1ZSwNCiAgICAgICAgbXVsdENwUzogcG93LA0KICAgICAgICBhdXJhOiAyLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgiZHJhZ29uIGhhcnZlc3QiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICBpZiAoR2FtZS5IYXMoIkRyYWdvbiBmYW5nIikpIHBvdyA9IE1hdGguY2VpbChwb3cgKiAxLjEpOw0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIkRyYWdvbiBIYXJ2ZXN0IiwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzEwLCAyNV0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgYWRkOiB0cnVlLA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJldmVyeXRoaW5nIG11c3QgZ28iLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiRXZlcnl0aGluZyBtdXN0IGdvIiwNCiAgICAgICAgZGVzYzogbG9jKCJBbGwgYnVpbGRpbmdzIGFyZSAlMSUgY2hlYXBlciBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMTcsIDZdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIGFkZDogdHJ1ZSwNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgYXVyYTogMSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImN1cnNlZCBmaW5nZXIiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ3Vyc2VkIGZpbmdlciIsDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiQ29va2llIHByb2R1Y3Rpb24gaGFsdGVkIGZvciAlMSw8YnI+YnV0IGVhY2ggY2xpY2sgaXMgd29ydGggJTIgb2YgQ3BTLiIsDQogICAgICAgICAgW0dhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpXQ0KICAgICAgICApLA0KICAgICAgICBpY29uOiBbMTIsIDE3XSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBhZGQ6IHRydWUsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG11bHRDcFM6IDAsDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJjbGljayBmcmVuenkiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ2xpY2sgZnJlbnp5IiwNCiAgICAgICAgZGVzYzogbG9jKCJDbGlja2luZyBwb3dlciB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzAsIDE0XSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBhZGQ6IHRydWUsDQogICAgICAgIG11bHRDbGljazogcG93LA0KICAgICAgICBhdXJhOiAxLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgiZHJhZ29uZmxpZ2h0IiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgaWYgKEdhbWUuSGFzKCJEcmFnb24gZmFuZyIpKSBwb3cgPSBNYXRoLmNlaWwocG93ICogMS4xKTsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJEcmFnb25mbGlnaHQiLA0KICAgICAgICBkZXNjOiBsb2MoIkNsaWNraW5nIHBvd2VyIHglMSBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMCwgMjVdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIGFkZDogdHJ1ZSwNCiAgICAgICAgbXVsdENsaWNrOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJjb29raWUgc3Rvcm0iLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ29va2llIHN0b3JtIiwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWVzIGV2ZXJ5d2hlcmUhIiksDQogICAgICAgIGljb246IFsyMiwgNl0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgYWRkOiB0cnVlLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBhdXJhOiAxLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgiYnVpbGRpbmcgYnVmZiIsIGZ1bmN0aW9uICh0aW1lLCBwb3csIGJ1aWxkaW5nKSB7DQogICAgICB2YXIgb2JqID0gR2FtZS5PYmplY3RzQnlJZFtidWlsZGluZ107DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiBHYW1lLmdvbGRlbkNvb2tpZUJ1aWxkaW5nQnVmZnNbb2JqLm5hbWVdWzBdLA0KICAgICAgICBkbmFtZTogRU4NCiAgICAgICAgICA/IEdhbWUuZ29sZGVuQ29va2llQnVpbGRpbmdCdWZmc1tvYmoubmFtZV1bMF0NCiAgICAgICAgICA6IGxvYygiJTEgUG93ZXIhIiwgb2JqLmRuYW1lKSwNCiAgICAgICAgZGVzYzoNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiWW91ciAlMSBhcmUgYm9vc3RpbmcgeW91ciBDcFMhIiwNCiAgICAgICAgICAgIGxvYygiJTEgIiArIG9iai5ic2luZ2xlLCBMQmVhdXRpZnkob2JqLmFtb3VudCkpDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uICslMSUgZm9yICUyISIsIFsNCiAgICAgICAgICAgIEJlYXV0aWZ5KE1hdGguY2VpbChwb3cgKiAxMDAgLSAxMDApKSwNCiAgICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogW29iai5pY29uQ29sdW1uLCAxNF0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgYWRkOiB0cnVlLA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJidWlsZGluZyBkZWJ1ZmYiLCBmdW5jdGlvbiAodGltZSwgcG93LCBidWlsZGluZykgew0KICAgICAgdmFyIG9iaiA9IEdhbWUuT2JqZWN0c0J5SWRbYnVpbGRpbmddOw0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogR2FtZS5nb2xkZW5Db29raWVCdWlsZGluZ0J1ZmZzW29iai5uYW1lXVsxXSwNCiAgICAgICAgZG5hbWU6IEVODQogICAgICAgICAgPyBHYW1lLmdvbGRlbkNvb2tpZUJ1aWxkaW5nQnVmZnNbb2JqLm5hbWVdWzFdDQogICAgICAgICAgOiBsb2MoIiUxIEJ1cmRlbiEiLCBvYmouZG5hbWUpLA0KICAgICAgICBkZXNjOg0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICJZb3VyICUxIGFyZSBydXN0aW5nIHlvdXIgQ3BTISIsDQogICAgICAgICAgICBsb2MoIiUxICIgKyBvYmouYnNpbmdsZSwgTEJlYXV0aWZ5KG9iai5hbW91bnQpKQ0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgbG9jKCJDb29raWUgcHJvZHVjdGlvbiAlMSUgc2xvd2VyIGZvciAlMiEiLCBbDQogICAgICAgICAgICBCZWF1dGlmeShNYXRoLmNlaWwocG93ICogMTAwIC0gMTAwKSksDQogICAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgICAgXSksDQogICAgICAgIGljb246IFtvYmouaWNvbkNvbHVtbiwgMTVdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIGFkZDogdHJ1ZSwNCiAgICAgICAgbXVsdENwUzogMSAvIHBvdywNCiAgICAgICAgYXVyYTogMiwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoInN1Z2FyIGJsZXNzaW5nIiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIlN1Z2FyIGJsZXNzaW5nIiwNCiAgICAgICAgZGVzYzogbG9jKCJZb3UgZmluZCAlMSUgbW9yZSBnb2xkZW4gY29va2llcyBmb3IgdGhlIG5leHQgJTIuIiwgWw0KICAgICAgICAgIDEwLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsyOSwgMTZdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIC8vYWRkOnRydWUNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImhhZ2dsZXIgbHVjayIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJIYWdnbGVyJ3MgbHVjayIsDQogICAgICAgIGRlc2M6IGxvYygiQWxsIHVwZ3JhZGVzIGFyZSAlMSUgY2hlYXBlciBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMjUsIDExXSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBtYXg6IHRydWUsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJoYWdnbGVyIG1pc2VyeSIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJIYWdnbGVyJ3MgbWlzZXJ5IiwNCiAgICAgICAgZGVzYzogbG9jKCJBbGwgdXBncmFkZXMgYXJlICUxJSBwcmljaWVyIGZvciAlMiEiLCBbDQogICAgICAgICAgcG93LA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsyNSwgMTFdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoInBpeGllIGx1Y2siLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ3JhZnR5IHBpeGllcyIsDQogICAgICAgIGRlc2M6IGxvYygiQWxsIGJ1aWxkaW5ncyBhcmUgJTElIGNoZWFwZXIgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzI2LCAxMV0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgbWF4OiB0cnVlLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgicGl4aWUgbWlzZXJ5IiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIk5hc3R5IGdvYmxpbnMiLA0KICAgICAgICBkZXNjOiBsb2MoIkFsbCBidWlsZGluZ3MgYXJlICUxJSBwcmljaWVyIGZvciAlMiEiLCBbDQogICAgICAgICAgcG93LA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsyNiwgMTFdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoIm1hZ2ljIGFkZXB0IiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIk1hZ2ljIGFkZXB0IiwNCiAgICAgICAgZGVzYzogbG9jKCJTcGVsbHMgYmFja2ZpcmUgJTEgdGltZXMgbGVzcyBmb3IgJTIuIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMjksIDExXSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBtYXg6IHRydWUsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJtYWdpYyBpbmVwdCIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJNYWdpYyBpbmVwdCIsDQogICAgICAgIGRlc2M6IGxvYygiU3BlbGxzIGJhY2tmaXJlICUxIHRpbWVzIG1vcmUgZm9yICUyLiIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzI5LCAxMV0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgbWF4OiB0cnVlLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgiZGV2YXN0YXRpb24iLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiRGV2YXN0YXRpb24iLA0KICAgICAgICBkZXNjOiBsb2MoIkNsaWNraW5nIHBvd2VyICslMSUgZm9yICUyISIsIFsNCiAgICAgICAgICBNYXRoLmZsb29yKHBvdyAqIDEwMCAtIDEwMCksDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzIzLCAxOF0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgbXVsdENsaWNrOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoInN1Z2FyIGZyZW56eSIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJTdWdhciBmcmVuenkiLA0KICAgICAgICBkZXNjOiBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIHglMSBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMjksIDE0XSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBhZGQ6IHRydWUsDQogICAgICAgIG11bHRDcFM6IHBvdywNCiAgICAgICAgYXVyYTogMCwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImxvYW4gMSIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJMb2FuIDEiLA0KICAgICAgICBkbmFtZTogbG9jKCJMb2FuICUxIiwgMSksDQogICAgICAgIGRlc2M6IGxvYygiQ29va2llIHByb2R1Y3Rpb24geCUxIGZvciAlMiEiLCBbDQogICAgICAgICAgcG93LA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsxLCAzM10sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgbXVsdENwUzogcG93LA0KICAgICAgICBtYXg6IHRydWUsDQogICAgICAgIG9uRGllOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgaWYgKEdhbWUudGFrZUxvYW4pIHsNCiAgICAgICAgICAgIEdhbWUudGFrZUxvYW4oMSwgdHJ1ZSk7DQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgibG9hbiAxIGludGVyZXN0IiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIkxvYW4gMSAoaW50ZXJlc3QpIiwNCiAgICAgICAgZG5hbWU6IGxvYygiTG9hbiAlMSAoaW50ZXJlc3QpIiwgMSksDQogICAgICAgIGRlc2M6IGxvYygiQ29va2llIHByb2R1Y3Rpb24geCUxIGZvciAlMiEiLCBbDQogICAgICAgICAgcG93LA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsxLCAzM10sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgbXVsdENwUzogcG93LA0KICAgICAgICBtYXg6IHRydWUsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJsb2FuIDIiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiTG9hbiAyIiwNCiAgICAgICAgZG5hbWU6IGxvYygiTG9hbiAlMSIsIDIpLA0KICAgICAgICBkZXNjOiBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIHglMSBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMSwgMzNdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG11bHRDcFM6IHBvdywNCiAgICAgICAgbWF4OiB0cnVlLA0KICAgICAgICBvbkRpZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGlmIChHYW1lLnRha2VMb2FuKSB7DQogICAgICAgICAgICBHYW1lLnRha2VMb2FuKDIsIHRydWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImxvYW4gMiBpbnRlcmVzdCIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJMb2FuIDIgKGludGVyZXN0KSIsDQogICAgICAgIGRuYW1lOiBsb2MoIkxvYW4gJTEgKGludGVyZXN0KSIsIDIpLA0KICAgICAgICBkZXNjOiBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIHglMSBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMSwgMzNdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG11bHRDcFM6IHBvdywNCiAgICAgICAgbWF4OiB0cnVlLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgibG9hbiAzIiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIkxvYW4gMyIsDQogICAgICAgIGRuYW1lOiBsb2MoIkxvYW4gJTEiLCAzKSwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzEsIDMzXSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgICAgb25EaWU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoR2FtZS50YWtlTG9hbikgew0KICAgICAgICAgICAgR2FtZS50YWtlTG9hbigzLCB0cnVlKTsNCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJsb2FuIDMgaW50ZXJlc3QiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiTG9hbiAzIChpbnRlcmVzdCkiLA0KICAgICAgICBkbmFtZTogbG9jKCJMb2FuICUxIChpbnRlcmVzdCkiLCAzKSwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzEsIDMzXSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgIH07DQogICAgfSk7DQoNCiAgICAvL2VuZCBvZiBidWZmcw0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCUdSQU5ETUFQT0NBTFlQU0UNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLlVwZGF0ZUdyYW5kbWFwb2NhbHlwc2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5IYXMoIkVsZGVyIENvdmVuYW50IikgfHwgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID09IDApDQogICAgICAgIEdhbWUuZWxkZXJXcmF0aCA9IDA7DQogICAgICBlbHNlIGlmIChHYW1lLnBsZWRnZVQgPiAwKSB7DQogICAgICAgIC8vaWYgdGhlIHBsZWRnZSBpcyBhY3RpdmUsIGxvd2VyIGl0DQogICAgICAgIEdhbWUucGxlZGdlVC0tOw0KICAgICAgICBpZiAoR2FtZS5wbGVkZ2VUID09IDApIHsNCiAgICAgICAgICAvL2RpZCB3ZSByZWFjaCAwPyBtYWtlIHRoZSBwbGVkZ2UgcHVyY2hhc2FibGUgYWdhaW4NCiAgICAgICAgICBHYW1lLkxvY2soIkVsZGVyIFBsZWRnZSIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJFbGRlciBQbGVkZ2UiKTsNCiAgICAgICAgICBHYW1lLmVsZGVyV3JhdGggPSAxOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoR2FtZS5IYXMoIk9uZSBtaW5kIikgJiYgR2FtZS5lbGRlcldyYXRoID09IDApIHsNCiAgICAgICAgICBHYW1lLmVsZGVyV3JhdGggPSAxOw0KICAgICAgICB9DQogICAgICAgIGlmICgNCiAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC4wMDEgJiYNCiAgICAgICAgICBHYW1lLmVsZGVyV3JhdGggPA0KICAgICAgICAgICAgR2FtZS5IYXMoIk9uZSBtaW5kIikgKw0KICAgICAgICAgICAgICBHYW1lLkhhcygiQ29tbXVuYWwgYnJhaW5zd2VlcCIpICsNCiAgICAgICAgICAgICAgR2FtZS5IYXMoIkVsZGVyIFBhY3QiKQ0KICAgICAgICApIHsNCiAgICAgICAgICBHYW1lLmVsZGVyV3JhdGgrKzsgLy9oYXZlIHdlIGFscmVhZHkgcGxlZGdlZD8gbWFrZSB0aGUgZWxkZXIgd3JhdGggc2hpZnQgYmV0d2VlbiBkaWZmZXJlbnQgc3RhZ2VzDQogICAgICAgIH0NCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuSGFzKCJFbGRlciBQYWN0IikgJiYNCiAgICAgICAgICBHYW1lLlVwZ3JhZGVzWyJFbGRlciBQbGVkZ2UiXS51bmxvY2tlZCA9PSAwDQogICAgICAgICkgew0KICAgICAgICAgIEdhbWUuTG9jaygiRWxkZXIgUGxlZGdlIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIkVsZGVyIFBsZWRnZSIpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBHYW1lLmVsZGVyV3JhdGhEICs9IChHYW1lLmVsZGVyV3JhdGggKyAxIC0gR2FtZS5lbGRlcldyYXRoRCkgKiAwLjAwMTsgLy9zbG93bHkgZmFkZSB0byB0aGUgdGFyZ2V0IHdyYXRoIHN0YXRlDQoNCiAgICAgIGlmIChHYW1lLmVsZGVyV3JhdGggIT0gR2FtZS5lbGRlcldyYXRoT2xkKSB7DQogICAgICAgIGlmIChHYW1lLmNsaWNrc1RoaXNTZXNzaW9uID4gMCkgew0KICAgICAgICAgIGlmIChHYW1lLmVsZGVyV3JhdGggPj0gMykgUGxheUN1ZSgiZmFkZVRvIiwgImdyYW5kbWFwb2NhbHlwc2UiKTsNCiAgICAgICAgICBlbHNlIFBsYXlDdWUoImZhZGVUbyIsICJjbGljayIpOw0KICAgICAgICB9DQogICAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgfQ0KDQogICAgICBHYW1lLmVsZGVyV3JhdGhPbGQgPSBHYW1lLmVsZGVyV3JhdGg7DQoNCiAgICAgIEdhbWUuVXBkYXRlV3JpbmtsZXJzKCk7DQogICAgfTsNCg0KICAgIC8vd3JpbmtsZXJzDQoNCiAgICBmdW5jdGlvbiBpblJlY3QoeCwgeSwgcmVjdCkgew0KICAgICAgLy9maW5kIG91dCBpZiB0aGUgcG9pbnQgeCx5IGlzIGluIHRoZSByb3RhdGVkIHJlY3RhbmdsZSByZWN0e3csaCxyLG99ICh3aWR0aCxoZWlnaHQscm90YXRpb24gaW4gcmFkaWFucyx5LW9yaWdpbikgKG5lZWRzIHRvIGJlIG5vcm1hbGl6ZWQpDQogICAgICAvL0kgZm91bmQgdGhpcyBzb21ld2hlcmUgb25saW5lIEkgZ3Vlc3MNCiAgICAgIHZhciBkeCA9IHggKyBNYXRoLnNpbigtcmVjdC5yKSAqIC0ocmVjdC5oIC8gMiAtIHJlY3QubyksDQogICAgICAgIGR5ID0geSArIE1hdGguY29zKC1yZWN0LnIpICogLShyZWN0LmggLyAyIC0gcmVjdC5vKTsNCiAgICAgIHZhciBoMSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7DQogICAgICB2YXIgY3VyckEgPSBNYXRoLmF0YW4yKGR5LCBkeCk7DQogICAgICB2YXIgbmV3QSA9IGN1cnJBIC0gcmVjdC5yOw0KICAgICAgdmFyIHgyID0gTWF0aC5jb3MobmV3QSkgKiBoMTsNCiAgICAgIHZhciB5MiA9IE1hdGguc2luKG5ld0EpICogaDE7DQogICAgICBpZiAoDQogICAgICAgIHgyID4gLTAuNSAqIHJlY3QudyAmJg0KICAgICAgICB4MiA8IDAuNSAqIHJlY3QudyAmJg0KICAgICAgICB5MiA+IC0wLjUgKiByZWN0LmggJiYNCiAgICAgICAgeTIgPCAwLjUgKiByZWN0LmgNCiAgICAgICkNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgR2FtZS53cmlua2xlckhQID0gMi4xOw0KICAgIEdhbWUud3JpbmtsZXJzID0gW107DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgaSsrKSB7DQogICAgICBHYW1lLndyaW5rbGVycy5wdXNoKHsNCiAgICAgICAgaWQ6IHBhcnNlSW50KGkpLA0KICAgICAgICBjbG9zZTogMCwNCiAgICAgICAgc3Vja2VkOiAwLA0KICAgICAgICBwaGFzZTogMCwNCiAgICAgICAgeDogMCwNCiAgICAgICAgeTogMCwNCiAgICAgICAgcjogMCwNCiAgICAgICAgaHVydDogMCwNCiAgICAgICAgaHA6IEdhbWUud3JpbmtsZXJIUCwNCiAgICAgICAgc2VsZWN0ZWQ6IDAsDQogICAgICAgIHR5cGU6IDAsDQogICAgICB9KTsNCiAgICB9DQogICAgR2FtZS5nZXRXcmlua2xlcnNNYXggPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbiA9IDEwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJFbGRlciBzcGljZSIpKSBuICs9IDI7DQogICAgICByZXR1cm4gbjsNCiAgICB9Ow0KICAgIEdhbWUuUmVzZXRXcmlua2xlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgIEdhbWUud3JpbmtsZXJzW2ldID0gew0KICAgICAgICAgIGlkOiBwYXJzZUludChpKSwNCiAgICAgICAgICBjbG9zZTogMCwNCiAgICAgICAgICBzdWNrZWQ6IDAsDQogICAgICAgICAgcGhhc2U6IDAsDQogICAgICAgICAgeDogMCwNCiAgICAgICAgICB5OiAwLA0KICAgICAgICAgIHI6IDAsDQogICAgICAgICAgaHVydDogMCwNCiAgICAgICAgICBocDogR2FtZS53cmlua2xlckhQLA0KICAgICAgICAgIHNlbGVjdGVkOiAwLA0KICAgICAgICAgIHR5cGU6IDAsDQogICAgICAgIH07DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLkNvbGxlY3RXcmlua2xlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgIEdhbWUud3JpbmtsZXJzW2ldLmhwID0gMDsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUud3JpbmtsZXJTcXVpc2hTb3VuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpICsgMTsNCiAgICBHYW1lLnBsYXlXcmlua2xlclNxdWlzaFNvdW5kID0gZnVuY3Rpb24gKCkgew0KICAgICAgUGxheVNvdW5kKA0KICAgICAgICAic25kLyIgKw0KICAgICAgICAgIChHYW1lLldJTktMRVJTID8gInNxdWVhayIgOiAic3F1aXNoIikgKw0KICAgICAgICAgIEdhbWUud3JpbmtsZXJTcXVpc2hTb3VuZCArDQogICAgICAgICAgIi5tcDMiLA0KICAgICAgICAwLjUNCiAgICAgICk7DQogICAgICBHYW1lLndyaW5rbGVyU3F1aXNoU291bmQgKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMS41KSArIDE7DQogICAgICBpZiAoR2FtZS53cmlua2xlclNxdWlzaFNvdW5kID4gNCkgR2FtZS53cmlua2xlclNxdWlzaFNvdW5kIC09IDQ7DQogICAgfTsNCiAgICBHYW1lLlNwYXduV3JpbmtsZXIgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIGlmICghbWUpIHsNCiAgICAgICAgdmFyIG1heCA9IEdhbWUuZ2V0V3JpbmtsZXJzTWF4KCk7DQogICAgICAgIHZhciBuID0gMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLndyaW5rbGVycykgew0KICAgICAgICAgIGlmIChHYW1lLndyaW5rbGVyc1tpXS5waGFzZSA+IDApIG4rKzsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgICAgdmFyIGl0ID0gR2FtZS53cmlua2xlcnNbaV07DQogICAgICAgICAgaWYgKGl0LnBoYXNlID09IDAgJiYgR2FtZS5lbGRlcldyYXRoID4gMCAmJiBuIDwgbWF4ICYmIGl0LmlkIDwgbWF4KSB7DQogICAgICAgICAgICBtZSA9IGl0Ow0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoIW1lKSByZXR1cm4gZmFsc2U7DQogICAgICBtZS5waGFzZSA9IDE7DQogICAgICBtZS5ocCA9IEdhbWUud3JpbmtsZXJIUDsNCiAgICAgIG1lLnR5cGUgPSAwOw0KICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjAwMDEpIG1lLnR5cGUgPSAxOyAvL3NoaW55IHdyaW5rbGVyDQogICAgICByZXR1cm4gbWU7DQogICAgfTsNCiAgICBHYW1lLlBvcFJhbmRvbVdyaW5rbGVyID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHdyaW5rbGVycyA9IFtdOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLndyaW5rbGVycykgew0KICAgICAgICBpZiAoR2FtZS53cmlua2xlcnNbaV0ucGhhc2UgPiAwICYmIEdhbWUud3JpbmtsZXJzW2ldLmhwID4gMCkNCiAgICAgICAgICB3cmlua2xlcnMucHVzaChHYW1lLndyaW5rbGVyc1tpXSk7DQogICAgICB9DQogICAgICBpZiAod3JpbmtsZXJzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgdmFyIG1lID0gY2hvb3NlKHdyaW5rbGVycyk7DQogICAgICAgIG1lLmhwID0gLTEwOw0KICAgICAgICByZXR1cm4gbWU7DQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfTsNCiAgICBHYW1lLlVwZGF0ZVdyaW5rbGVycyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciB4QmFzZSA9IDA7DQogICAgICB2YXIgeUJhc2UgPSAwOw0KICAgICAgdmFyIG9uV3JpbmtsZXIgPSAwOw0KICAgICAgaWYgKEdhbWUuTGVmdEJhY2tncm91bmQpIHsNCiAgICAgICAgeEJhc2UgPSBHYW1lLmNvb2tpZU9yaWdpblg7DQogICAgICAgIHlCYXNlID0gR2FtZS5jb29raWVPcmlnaW5ZOw0KICAgICAgfQ0KICAgICAgdmFyIG1heCA9IEdhbWUuZ2V0V3JpbmtsZXJzTWF4KCk7DQogICAgICB2YXIgbiA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgIGlmIChHYW1lLndyaW5rbGVyc1tpXS5waGFzZSA+IDApIG4rKzsNCiAgICAgIH0NCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS53cmlua2xlcnMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS53cmlua2xlcnNbaV07DQogICAgICAgIGlmIChtZS5waGFzZSA9PSAwICYmIEdhbWUuZWxkZXJXcmF0aCA+IDAgJiYgbiA8IG1heCAmJiBtZS5pZCA8IG1heCkgew0KICAgICAgICAgIHZhciBjaGFuY2UgPSAwLjAwMDAxICogR2FtZS5lbGRlcldyYXRoOw0KICAgICAgICAgIGNoYW5jZSAqPSBHYW1lLmVmZigid3JpbmtsZXJTcGF3biIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiVW5ob2x5IGJhaXQiKSkgY2hhbmNlICo9IDU7DQogICAgICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoInNjb3JuIik7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIGNoYW5jZSAqPSAyLjU7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgY2hhbmNlICo9IDI7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgY2hhbmNlICo9IDEuNTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJXcmlua2xlciBkb29ybWF0IikpIGNoYW5jZSA9IDAuMTsNCiAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IGNoYW5jZSkgew0KICAgICAgICAgICAgLy9yZXNwYXduDQogICAgICAgICAgICBHYW1lLlNwYXduV3JpbmtsZXIobWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAobWUucGhhc2UgPiAwKSB7DQogICAgICAgICAgaWYgKG1lLmNsb3NlIDwgMSkgbWUuY2xvc2UgKz0gMSAvIEdhbWUuZnBzIC8gMTA7DQogICAgICAgICAgaWYgKG1lLmNsb3NlID4gMSkgbWUuY2xvc2UgPSAxOw0KICAgICAgICB9IGVsc2UgbWUuY2xvc2UgPSAwOw0KICAgICAgICBpZiAobWUuY2xvc2UgPT0gMSAmJiBtZS5waGFzZSA9PSAxKSB7DQogICAgICAgICAgbWUucGhhc2UgPSAyOw0KICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG1lLnBoYXNlID09IDIpIHsNCiAgICAgICAgICBtZS5zdWNrZWQgKz0gKEdhbWUuY29va2llc1BzIC8gR2FtZS5mcHMpICogR2FtZS5jcHNTdWNrZWQ7IC8vc3VjayB0aGUgY29va2llcw0KICAgICAgICB9DQogICAgICAgIGlmIChtZS5waGFzZSA+IDApIHsNCiAgICAgICAgICBpZiAobWUudHlwZSA9PSAwKSB7DQogICAgICAgICAgICBpZiAobWUuaHAgPCBHYW1lLndyaW5rbGVySFApIG1lLmhwICs9IDAuMDQ7DQogICAgICAgICAgICBtZS5ocCA9IE1hdGgubWluKEdhbWUud3JpbmtsZXJIUCwgbWUuaHApOw0KICAgICAgICAgIH0gZWxzZSBpZiAobWUudHlwZSA9PSAxKSB7DQogICAgICAgICAgICBpZiAobWUuaHAgPCBHYW1lLndyaW5rbGVySFAgKiAzKSBtZS5ocCArPSAwLjA0Ow0KICAgICAgICAgICAgbWUuaHAgPSBNYXRoLm1pbihHYW1lLndyaW5rbGVySFAgKiAzLCBtZS5ocCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHZhciBkID0gMTI4ICogKDIgLSBtZS5jbG9zZSk7IC8vKkdhbWUuQmlnQ29va2llU2l6ZTsNCiAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIGQgKz0gTWF0aC5jb3MoR2FtZS5UICogMC4wNSArIHBhcnNlSW50KG1lLmlkKSkgKiA0Ow0KICAgICAgICAgIG1lLnIgPSAobWUuaWQgLyBtYXgpICogMzYwOw0KICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KQ0KICAgICAgICAgICAgbWUuciArPSBNYXRoLnNpbihHYW1lLlQgKiAwLjA1ICsgcGFyc2VJbnQobWUuaWQpKSAqIDQ7DQogICAgICAgICAgbWUueCA9IHhCYXNlICsgTWF0aC5zaW4oKG1lLnIgKiBNYXRoLlBJKSAvIDE4MCkgKiBkOw0KICAgICAgICAgIG1lLnkgPSB5QmFzZSArIE1hdGguY29zKChtZS5yICogTWF0aC5QSSkgLyAxODApICogZDsNCiAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIG1lLnIgKz0gTWF0aC5zaW4oR2FtZS5UICogMC4wOSArIHBhcnNlSW50KG1lLmlkKSkgKiA0Ow0KICAgICAgICAgIHZhciByZWN0ID0geyB3OiAxMDAsIGg6IDIwMCwgcjogKC1tZS5yICogTWF0aC5QSSkgLyAxODAsIG86IDEwIH07DQogICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjAxICYmICFHYW1lLnByZWZzLm5vdFNjYXJ5KQ0KICAgICAgICAgICAgbWUuaHVydCA9IE1hdGgubWF4KG1lLmh1cnQsIE1hdGgucmFuZG9tKCkpOw0KICAgICAgICAgIGlmIChHYW1lLlQgJSA1ID09IDAgJiYgR2FtZS5DYW5DbGljaykgew0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kICYmDQogICAgICAgICAgICAgIEdhbWUubW91c2VYIDwgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMud2lkdGggJiYNCiAgICAgICAgICAgICAgaW5SZWN0KEdhbWUubW91c2VYIC0gbWUueCwgR2FtZS5tb3VzZVkgLSBtZS55LCByZWN0KQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICBtZS5zZWxlY3RlZCA9IDE7DQogICAgICAgICAgICBlbHNlIG1lLnNlbGVjdGVkID0gMDsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKG1lLnNlbGVjdGVkICYmIG9uV3JpbmtsZXIgPT0gMCAmJiBHYW1lLkNhbkNsaWNrKSB7DQogICAgICAgICAgICBtZS5odXJ0ID0gTWF0aC5tYXgobWUuaHVydCwgMC4yNSk7DQogICAgICAgICAgICAvL21lLmNsb3NlKj0wLjk5Ow0KICAgICAgICAgICAgaWYgKEdhbWUuQ2xpY2sgJiYgR2FtZS5sYXN0Q2xpY2tlZEVsID09IGwoImJhY2tncm91bmRMZWZ0Q2FudmFzIikpIHsNCiAgICAgICAgICAgICAgaWYgKEdhbWUua2V5c1sxN10gJiYgR2FtZS5zZXNhbWUpIHsNCiAgICAgICAgICAgICAgICBtZS50eXBlID0gIW1lLnR5cGU7DQogICAgICAgICAgICAgICAgUGxheVNvdW5kKCJzbmQvc2hpbW1lckNsaWNrLm1wMyIpOw0KICAgICAgICAgICAgICB9IC8vY3RybC1jbGljayBvbiBhIHdyaW5rbGVyIGluIGdvZCBtb2RlIHRvIHRvZ2dsZSBpdHMgc2hpbmluZXNzDQogICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIEdhbWUucGxheVdyaW5rbGVyU3F1aXNoU291bmQoKTsNCiAgICAgICAgICAgICAgICBtZS5odXJ0ID0gMTsNCiAgICAgICAgICAgICAgICBtZS5ocCAtPSAwLjc1Ow0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIEdhbWUucHJlZnMucGFydGljbGVzICYmDQogICAgICAgICAgICAgICAgICAhR2FtZS5wcmVmcy5ub3RTY2FyeSAmJg0KICAgICAgICAgICAgICAgICAgIUdhbWUuV0lOS0xFUlMgJiYNCiAgICAgICAgICAgICAgICAgICEobWUuaHAgPD0gMC41ICYmIG1lLnBoYXNlID4gMCkNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIHZhciB4ID0gbWUueCArIE1hdGguc2luKChtZS5yICogTWF0aC5QSSkgLyAxODApICogOTA7DQogICAgICAgICAgICAgICAgICB2YXIgeSA9IG1lLnkgKyBNYXRoLmNvcygobWUuciAqIE1hdGguUEkpIC8gMTgwKSAqIDkwOw0KICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IDM7IGlpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgLy9HYW1lLnBhcnRpY2xlQWRkKHgrTWF0aC5yYW5kb20oKSo1MC0yNSx5K01hdGgucmFuZG9tKCkqNTAtMjUsTWF0aC5yYW5kb20oKSo0LTIsTWF0aC5yYW5kb20oKSotMi0yLDEsMSwyLCd3cmlua2xlckJpdHMucG5nJyk7DQogICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gR2FtZS5wYXJ0aWNsZUFkZCgNCiAgICAgICAgICAgICAgICAgICAgICB4LA0KICAgICAgICAgICAgICAgICAgICAgIHksDQogICAgICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAtMiAtIDIsDQogICAgICAgICAgICAgICAgICAgICAgMSwNCiAgICAgICAgICAgICAgICAgICAgICAxLA0KICAgICAgICAgICAgICAgICAgICAgIDIsDQogICAgICAgICAgICAgICAgICAgICAgbWUudHlwZSA9PSAxDQogICAgICAgICAgICAgICAgICAgICAgICA/ICJzaGlueVdyaW5rbGVyQml0cy5wbmciDQogICAgICAgICAgICAgICAgICAgICAgICA6ICJ3cmlua2xlckJpdHMucG5nIg0KICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICBwYXJ0LnIgPSAtbWUucjsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgR2FtZS5DbGljayA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvbldyaW5rbGVyID0gMTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAobWUuaHVydCA+IDApIHsNCiAgICAgICAgICBtZS5odXJ0IC09IDUgLyBHYW1lLmZwczsNCiAgICAgICAgICAvL21lLmNsb3NlLT1tZS5odXJ0KjAuMDU7DQogICAgICAgICAgLy9tZS54Kz1NYXRoLnJhbmRvbSgpKjItMTsNCiAgICAgICAgICAvL21lLnkrPU1hdGgucmFuZG9tKCkqMi0xOw0KICAgICAgICAgIG1lLnIgKz0gTWF0aC5zaW4oR2FtZS5UICogMSkgKiBtZS5odXJ0ICogMTg7IC8vTWF0aC5yYW5kb20oKSoyLTE7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG1lLmhwIDw9IDAuNSAmJiBtZS5waGFzZSA+IDApIHsNCiAgICAgICAgICBHYW1lLnBsYXlXcmlua2xlclNxdWlzaFNvdW5kKCk7DQogICAgICAgICAgUGxheVNvdW5kKA0KICAgICAgICAgICAgInNuZC9wb3AiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyArIDEpICsgIi5tcDMiLA0KICAgICAgICAgICAgMC43NQ0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS53cmlua2xlcnNQb3BwZWQrKzsNCiAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgIG1lLnBoYXNlID0gMDsNCiAgICAgICAgICBtZS5jbG9zZSA9IDA7DQogICAgICAgICAgbWUuaHVydCA9IDA7DQogICAgICAgICAgbWUuaHAgPSAzOw0KICAgICAgICAgIHZhciB0b1N1Y2sgPSAxLjE7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTYWNyaWxlZ2lvdXMgY29ycnVwdGlvbiIpKSB0b1N1Y2sgKj0gMS4wNTsNCiAgICAgICAgICBpZiAobWUudHlwZSA9PSAxKSB0b1N1Y2sgKj0gMzsgLy9zaGlueSB3cmlua2xlcnMgYXJlIGFuIGVsdXNpdmUsIHByb2ZpdGFibGUgYnJlZWQNCiAgICAgICAgICBtZS5zdWNrZWQgKj0gdG9TdWNrOyAvL2Nvb2tpZSBkb3VnaCBkb2VzIHdlaXJkIHRoaW5ncyBpbnNpZGUgd3JpbmtsZXIgZGlnZXN0aXZlIHRyYWN0cw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiV3JpbmtsZXJzcGF3biIpKSBtZS5zdWNrZWQgKj0gMS4wNTsNCiAgICAgICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgic2Nvcm4iKTsNCiAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgbWUuc3Vja2VkICo9IDEuMTU7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgbWUuc3Vja2VkICo9IDEuMTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBtZS5zdWNrZWQgKj0gMS4wNTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKG1lLnN1Y2tlZCA+IDAuNSkgew0KICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgIG1lLnR5cGUgPT0gMQ0KICAgICAgICAgICAgICAgID8gbG9jKCJFeHBsb2RlZCBhIHNoaW55IHdyaW5rbGVyIikNCiAgICAgICAgICAgICAgICA6IGxvYygiRXhwbG9kZWQgYSB3cmlua2xlciIpLA0KICAgICAgICAgICAgICBsb2MoIkZvdW5kIDxiPiUxPC9iPiEiLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeShtZS5zdWNrZWQpKSksDQogICAgICAgICAgICAgIFsxOSwgOF0sDQogICAgICAgICAgICAgIDYNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICBHYW1lLlBvcHVwKA0KICAgICAgICAgICAgICAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjgwJTsiPicgKw0KICAgICAgICAgICAgICAgIGxvYygiKyUxISIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1lLnN1Y2tlZCkpKSArDQogICAgICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgICAgICAgIEdhbWUubW91c2VYLA0KICAgICAgICAgICAgICBHYW1lLm1vdXNlWQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJoYWxsb3dlZW4iKSB7DQogICAgICAgICAgICAgIC8vaWYgKE1hdGgucmFuZG9tKCk8KEdhbWUuSGFzQWNoaWV2KCdTcG9va3kgY29va2llcycpPzAuMjowLjA1KSkvL2hhbGxvd2VlbiBjb29raWUgZHJvcHMNCiAgICAgICAgICAgICAgdmFyIGZhaWxSYXRlID0gMC45NTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzQWNoaWV2KCJTcG9va3kgY29va2llcyIpKSBmYWlsUmF0ZSA9IDAuODsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJTdGFydGVycm9yIikpIGZhaWxSYXRlICo9IDAuOTsNCiAgICAgICAgICAgICAgZmFpbFJhdGUgKj0gMSAvIEdhbWUuZHJvcFJhdGVNdWx0KCk7DQogICAgICAgICAgICAgIGlmIChHYW1lLmhhc0dvZCkgew0KICAgICAgICAgICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgic2Vhc29ucyIpOw0KICAgICAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgZmFpbFJhdGUgKj0gMC45Ow0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAyKSBmYWlsUmF0ZSAqPSAwLjk1Ow0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBmYWlsUmF0ZSAqPSAwLjk3Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChtZS50eXBlID09IDEpIGZhaWxSYXRlICo9IDAuOTsNCiAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiBmYWlsUmF0ZSkgew0KICAgICAgICAgICAgICAgIC8vaGFsbG93ZWVuIGNvb2tpZSBkcm9wcw0KICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIlNrdWxsIGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkdob3N0IGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkJhdCBjb29raWVzIiwNCiAgICAgICAgICAgICAgICAgICJTbGltZSBjb29raWVzIiwNCiAgICAgICAgICAgICAgICAgICJQdW1wa2luIGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkV5ZWJhbGwgY29va2llcyIsDQogICAgICAgICAgICAgICAgICAiU3BpZGVyIGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgICAgIGlmICghR2FtZS5IYXNVbmxvY2tlZChjb29raWUpICYmICFHYW1lLkhhcyhjb29raWUpKSB7DQogICAgICAgICAgICAgICAgICBHYW1lLlVubG9jayhjb29raWUpOw0KICAgICAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbY29va2llXS5kbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgICAgICJZb3UgYWxzbyBmb3VuZCA8Yj4lMTwvYj4hIiwNCiAgICAgICAgICAgICAgICAgICAgICBHYW1lLlVwZ3JhZGVzW2Nvb2tpZV0uZG5hbWUNCiAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgR2FtZS5VcGdyYWRlc1tjb29raWVdLmljb24NCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBHYW1lLkRyb3BFZ2coMC45OCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChtZS50eXBlID09IDEpIEdhbWUuV2luKCJMYXN0IENoYW5jZSB0byBTZWUiKTsNCiAgICAgICAgICBHYW1lLkVhcm4obWUuc3Vja2VkKTsNCiAgICAgICAgICAvKmlmIChHYW1lLnByZWZzLnBhcnRpY2xlcyAmJiAhR2FtZS5XSU5LTEVSUykNCgkJCQkJew0KCQkJCQkJdmFyIHg9bWUueCsoTWF0aC5zaW4obWUucipNYXRoLlBJLzE4MCkqMTAwKTsNCgkJCQkJCXZhciB5PW1lLnkrKE1hdGguY29zKG1lLnIqTWF0aC5QSS8xODApKjEwMCk7DQoJCQkJCQlmb3IgKHZhciBpaT0wO2lpPDY7aWkrKykNCgkJCQkJCXsNCgkJCQkJCQlHYW1lLnBhcnRpY2xlQWRkKHgrTWF0aC5yYW5kb20oKSo1MC0yNSx5K01hdGgucmFuZG9tKCkqNTAtMjUsTWF0aC5yYW5kb20oKSo0LTIsTWF0aC5yYW5kb20oKSotMi0yLDEsMSwyLCd3cmlua2xlckJpdHMucG5nJyk7DQoJCQkJCQl9DQoJCQkJCX0qLw0KICAgICAgICAgIGlmIChHYW1lLnByZWZzLnBhcnRpY2xlcykgew0KICAgICAgICAgICAgdmFyIHggPSBtZS54ICsgTWF0aC5zaW4oKG1lLnIgKiBNYXRoLlBJKSAvIDE4MCkgKiA5MDsNCiAgICAgICAgICAgIHZhciB5ID0gbWUueSArIE1hdGguY29zKChtZS5yICogTWF0aC5QSSkgLyAxODApICogOTA7DQogICAgICAgICAgICBpZiAobWUuc3Vja2VkID4gMCkgew0KICAgICAgICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgNTsgaWkrKykgew0KICAgICAgICAgICAgICAgIEdhbWUucGFydGljbGVBZGQoDQogICAgICAgICAgICAgICAgICBHYW1lLm1vdXNlWCwNCiAgICAgICAgICAgICAgICAgIEdhbWUubW91c2VZLA0KICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIC0yIC0gMiwNCiAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAwLjUgKyAwLjc1LA0KICAgICAgICAgICAgICAgICAgMS41LA0KICAgICAgICAgICAgICAgICAgMg0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghR2FtZS5wcmVmcy5ub3RTY2FyeSAmJiAhR2FtZS5XSU5LTEVSUykgew0KICAgICAgICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgODsgaWkrKykgew0KICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gR2FtZS5wYXJ0aWNsZUFkZCgNCiAgICAgICAgICAgICAgICAgIHgsDQogICAgICAgICAgICAgICAgICB5LA0KICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIC0yIC0gMiwNCiAgICAgICAgICAgICAgICAgIDEsDQogICAgICAgICAgICAgICAgICAxLA0KICAgICAgICAgICAgICAgICAgMiwNCiAgICAgICAgICAgICAgICAgIG1lLnR5cGUgPT0gMSA/ICJzaGlueVdyaW5rbGVyQml0cy5wbmciIDogIndyaW5rbGVyQml0cy5wbmciDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBwYXJ0LnIgPSAtbWUucjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBtZS5zdWNrZWQgPSAwOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAob25Xcmlua2xlcikgew0KICAgICAgICBHYW1lLm1vdXNlUG9pbnRlciA9IDE7DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLkRyYXdXcmlua2xlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgY3R4ID0gR2FtZS5MZWZ0QmFja2dyb3VuZDsNCiAgICAgIHZhciBzZWxlY3RlZCA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUud3JpbmtsZXJzW2ldOw0KICAgICAgICBpZiAobWUucGhhc2UgPiAwKSB7DQogICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gbWUuY2xvc2U7DQogICAgICAgICAgY3R4LnNhdmUoKTsNCiAgICAgICAgICBjdHgudHJhbnNsYXRlKG1lLngsIG1lLnkpOw0KICAgICAgICAgIHZhciBzdyA9IDEwMCArIDIgKiBNYXRoLnNpbihHYW1lLlQgKiAwLjIgKyBpICogMyk7DQogICAgICAgICAgdmFyIHNoID0gMjAwICsgNSAqIE1hdGguc2luKEdhbWUuVCAqIDAuMiAtIDIgKyBpICogMyk7DQogICAgICAgICAgaWYgKEdhbWUucHJlZnMuZmFuY3kpIHsNCiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoMCwgMzApOw0KICAgICAgICAgICAgY3R4LnJvdGF0ZSgoLW1lLnIgKiBNYXRoLlBJKSAvIDE4MCk7DQogICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYygid3JpbmtsZXJTaGFkb3cucG5nIiksIC1zdyAvIDIsIC0xMCwgc3csIHNoKTsNCiAgICAgICAgICAgIGN0eC5yb3RhdGUoKG1lLnIgKiBNYXRoLlBJKSAvIDE4MCk7DQogICAgICAgICAgICBjdHgudHJhbnNsYXRlKDAsIC0zMCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGN0eC5yb3RhdGUoKC1tZS5yICogTWF0aC5QSSkgLyAxODApOw0KICAgICAgICAgIC8vdmFyIHM9TWF0aC5taW4oMSxtZS5zdWNrZWQvKEdhbWUuY29va2llc1BzKjYwKSkqMC43NSswLjI1Oy8vc2NhbGUgd3JpbmtsZXJzIGFzIHRoZXkgZWF0DQogICAgICAgICAgLy9jdHguc2NhbGUoTWF0aC5wb3cocywxLjUpKjEuMjUscyk7DQogICAgICAgICAgLy9jdHguZmlsbFJlY3QoLTUwLC0xMCwxMDAsMjAwKTsNCiAgICAgICAgICB2YXIgcGljID0gR2FtZS5XSU5LTEVSUyA/ICJ3aW5rbGVyLnBuZyIgOiAid3JpbmtsZXIucG5nIjsNCiAgICAgICAgICBpZiAobWUudHlwZSA9PSAxKQ0KICAgICAgICAgICAgcGljID0gR2FtZS5XSU5LTEVSUyA/ICJzaGlueVdpbmtsZXIucG5nIiA6ICJzaGlueVdyaW5rbGVyLnBuZyI7DQogICAgICAgICAgZWxzZSBpZiAoR2FtZS5zZWFzb24gPT0gImNocmlzdG1hcyIpDQogICAgICAgICAgICBwaWMgPSBHYW1lLldJTktMRVJTID8gIndpbnRlcldpbmtsZXIucG5nIiA6ICJ3aW50ZXJXcmlua2xlci5wbmciOw0KICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKHBpYyksIC1zdyAvIDIsIC0xMCwgc3csIHNoKTsNCiAgICAgICAgICBpZiAoIUdhbWUuV0lOS0xFUlMgJiYgR2FtZS5wcmVmcy5ub3RTY2FyeSkNCiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoDQogICAgICAgICAgICAgIFBpYygNCiAgICAgICAgICAgICAgICBNYXRoLnNpbigNCiAgICAgICAgICAgICAgICAgIEdhbWUuVCAqIDAuMDAzICsNCiAgICAgICAgICAgICAgICAgICAgaSAqIDExICsNCiAgICAgICAgICAgICAgICAgICAgMTM3ICsNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5zaW4oR2FtZS5UICogMC4wMTcgKyBpICogMTMpDQogICAgICAgICAgICAgICAgKSA+IDAuOTk5Nw0KICAgICAgICAgICAgICAgICAgPyAid3JpbmtsZXJCbGluay5wbmciDQogICAgICAgICAgICAgICAgICA6ICJ3cmlua2xlckdvb2dsaWVzLnBuZyINCiAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgLXN3IC8gMiwNCiAgICAgICAgICAgICAgLTEwICsgMSAqIE1hdGguc2luKEdhbWUuVCAqIDAuMiArIGkgKiAzICsgMS4yKSwNCiAgICAgICAgICAgICAgc3csDQogICAgICAgICAgICAgIHNoDQogICAgICAgICAgICApOw0KICAgICAgICAgIC8vY3R4LmRyYXdJbWFnZShQaWMocGljKSwtNTAsLTEwKTsNCiAgICAgICAgICAvL2N0eC5maWxsVGV4dChtZS5pZCsnIDogJyttZS5zdWNrZWQsMCwwKTsNCiAgICAgICAgICBpZiAobWUudHlwZSA9PSAxICYmIE1hdGgucmFuZG9tKCkgPCAwLjMgJiYgR2FtZS5wcmVmcy5wYXJ0aWNsZXMpIHsNCiAgICAgICAgICAgIC8vc3BhcmtsZQ0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gTWF0aC5yYW5kb20oKSAqIDAuNjUgKyAwLjE7DQogICAgICAgICAgICB2YXIgcyA9IE1hdGgucmFuZG9tKCkgKiAzMCArIDU7DQogICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gImxpZ2h0ZXIiOw0KICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgUGljKCJnbGludC5qcGciKSwNCiAgICAgICAgICAgICAgLXMgLyAyICsgTWF0aC5yYW5kb20oKSAqIDUwIC0gMjUsDQogICAgICAgICAgICAgIC1zIC8gMiArIE1hdGgucmFuZG9tKCkgKiAyMDAsDQogICAgICAgICAgICAgIHMsDQogICAgICAgICAgICAgIHMNCiAgICAgICAgICAgICk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGN0eC5yZXN0b3JlKCk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5wYXJ0aWNsZXMgJiYgbWUucGhhc2UgPT0gMiAmJiBNYXRoLnJhbmRvbSgpIDwgMC4wMykgew0KICAgICAgICAgICAgR2FtZS5wYXJ0aWNsZUFkZCgNCiAgICAgICAgICAgICAgbWUueCwNCiAgICAgICAgICAgICAgbWUueSwNCiAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpICogLTIgLSAyLA0KICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpICogMC41ICsgMC41LA0KICAgICAgICAgICAgICAxLA0KICAgICAgICAgICAgICAyDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChtZS5zZWxlY3RlZCkgc2VsZWN0ZWQgPSBtZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKHNlbGVjdGVkICYmIEdhbWUuSGFzKCJFeWUgb2YgdGhlIHdyaW5rbGVyIikpIHsNCiAgICAgICAgdmFyIHggPSBHYW1lLmNvb2tpZU9yaWdpblg7DQogICAgICAgIHZhciB5ID0gR2FtZS5jb29raWVPcmlnaW5ZOw0KICAgICAgICBjdHguZm9udCA9ICIxNHB4IE1lcnJpd2VhdGhlciI7DQogICAgICAgIGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsNCiAgICAgICAgdmFyIHRleHQgPSBsb2MoIlN3YWxsb3dlZDoiKTsNCiAgICAgICAgdmFyIHdpZHRoID0gTWF0aC5jZWlsKA0KICAgICAgICAgIE1hdGgubWF4KA0KICAgICAgICAgICAgY3R4Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoLA0KICAgICAgICAgICAgY3R4Lm1lYXN1cmVUZXh0KEJlYXV0aWZ5KHNlbGVjdGVkLnN1Y2tlZCkpLndpZHRoDQogICAgICAgICAgKQ0KICAgICAgICApOw0KICAgICAgICBjdHguZmlsbFN0eWxlID0gIiMwMDAiOw0KICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjY1Ow0KICAgICAgICAvKmN0eC5zdHJva2VTdHlsZT0nIzAwMCc7DQoJCQkJY3R4LmxpbmVXaWR0aD04Ow0KCQkJCWN0eC5iZWdpblBhdGgoKTsNCgkJCQljdHgubW92ZVRvKHgseSk7DQoJCQkJY3R4LmxpbmVUbyhNYXRoLmZsb29yKHNlbGVjdGVkLngpLE1hdGguZmxvb3Ioc2VsZWN0ZWQueSkpOw0KCQkJCWN0eC5zdHJva2UoKTsqLw0KICAgICAgICB2YXIgeE8gPSB4IC0gd2lkdGggLyAyIC0gMTY7DQogICAgICAgIHZhciB5TyA9IHkgLSA0Ow0KICAgICAgICB2YXIgZGlzdCA9IE1hdGguZmxvb3IoDQogICAgICAgICAgTWF0aC5zcXJ0KA0KICAgICAgICAgICAgKHNlbGVjdGVkLnggLSB4TykgKiAoc2VsZWN0ZWQueCAtIHhPKSArDQogICAgICAgICAgICAgIChzZWxlY3RlZC55IC0geU8pICogKHNlbGVjdGVkLnkgLSB5TykNCiAgICAgICAgICApDQogICAgICAgICk7DQogICAgICAgIHZhciBhbmdsZSA9IC1NYXRoLmF0YW4yKHlPIC0gc2VsZWN0ZWQueSwgeE8gLSBzZWxlY3RlZC54KSArIE1hdGguUEkgLyAyOw0KICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAiI2ZmZiI7DQogICAgICAgIGN0eC5saW5lV2lkdGggPSAxOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE1hdGguZmxvb3IoZGlzdCAvIDEyKTsgaSsrKSB7DQogICAgICAgICAgdmFyIHhDID0gc2VsZWN0ZWQueCArIE1hdGguc2luKGFuZ2xlKSAqIGkgKiAxMjsNCiAgICAgICAgICB2YXIgeUMgPSBzZWxlY3RlZC55ICsgTWF0aC5jb3MoYW5nbGUpICogaSAqIDEyOw0KICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsNCiAgICAgICAgICBjdHguYXJjKA0KICAgICAgICAgICAgeEMsDQogICAgICAgICAgICB5QywNCiAgICAgICAgICAgIDQgKw0KICAgICAgICAgICAgICAoR2FtZS5wcmVmcy5mYW5jeQ0KICAgICAgICAgICAgICAgID8gMiAqIE1hdGgucG93KE1hdGguc2luKC1HYW1lLlQgKiAwLjIgKyBpICogMC4zKSwgNCkNCiAgICAgICAgICAgICAgICA6IDApLA0KICAgICAgICAgICAgMCwNCiAgICAgICAgICAgIDIgKiBNYXRoLlBJLA0KICAgICAgICAgICAgZmFsc2UNCiAgICAgICAgICApOw0KICAgICAgICAgIGN0eC5maWxsKCk7DQogICAgICAgICAgY3R4LnN0cm9rZSgpOw0KICAgICAgICB9DQogICAgICAgIGN0eC5maWxsUmVjdCh4IC0gd2lkdGggLyAyIC0gOCAtIDEwLCB5IC0gMjMsIHdpZHRoICsgMTYgKyAyMCwgMzgpOw0KICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAiI2ZmZiI7DQogICAgICAgIGN0eC5saW5lV2lkdGggPSAxOw0KICAgICAgICBjdHguc3Ryb2tlUmVjdCgNCiAgICAgICAgICB4IC0gd2lkdGggLyAyIC0gOCAtIDEwICsgMS41LA0KICAgICAgICAgIHkgLSAyMyArIDEuNSwNCiAgICAgICAgICB3aWR0aCArIDE2ICsgMjAgLSAzLA0KICAgICAgICAgIDM4IC0gMw0KICAgICAgICApOw0KICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICBjdHguZmlsbFN0eWxlID0gIiNmZmYiOw0KICAgICAgICBjdHguZmlsbFRleHQodGV4dCwgeCArIDE0LCB5IC0gOCk7DQogICAgICAgIGN0eC5maWxsVGV4dChCZWF1dGlmeShzZWxlY3RlZC5zdWNrZWQpLCB4ICsgMTAsIHkgKyA4KTsNCiAgICAgICAgdmFyIHMgPSA1NCArIDIgKiBNYXRoLnNpbihHYW1lLlQgKiAwLjQpOw0KICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgIFBpYygiaWNvbnMucG5nIiksDQogICAgICAgICAgMjcgKiA0OCwNCiAgICAgICAgICAyNiAqIDQ4LA0KICAgICAgICAgIDQ4LA0KICAgICAgICAgIDQ4LA0KICAgICAgICAgIHggLSB3aWR0aCAvIDIgLSAxNiAtIHMgLyAyLA0KICAgICAgICAgIHkgLSA0IC0gcyAvIDIsDQogICAgICAgICAgcywNCiAgICAgICAgICBzDQogICAgICAgICk7DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLlNhdmVXcmlua2xlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgYW1vdW50ID0gMDsNCiAgICAgIHZhciBhbW91bnRTaGluaWVzID0gMDsNCiAgICAgIHZhciBudW1iZXIgPSAwOw0KICAgICAgdmFyIHNoaW5pZXMgPSAwOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLndyaW5rbGVycykgew0KICAgICAgICBpZiAoR2FtZS53cmlua2xlcnNbaV0uc3Vja2VkID4gMC41KSB7DQogICAgICAgICAgbnVtYmVyKys7DQogICAgICAgICAgaWYgKEdhbWUud3JpbmtsZXJzW2ldLnR5cGUgPT0gMSkgew0KICAgICAgICAgICAgc2hpbmllcysrOw0KICAgICAgICAgICAgYW1vdW50U2hpbmllcyArPSBHYW1lLndyaW5rbGVyc1tpXS5zdWNrZWQ7DQogICAgICAgICAgfSBlbHNlIGFtb3VudCArPSBHYW1lLndyaW5rbGVyc1tpXS5zdWNrZWQ7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiB7DQogICAgICAgIGFtb3VudDogYW1vdW50LA0KICAgICAgICBudW1iZXI6IG51bWJlciwNCiAgICAgICAgc2hpbmllczogc2hpbmllcywNCiAgICAgICAgYW1vdW50U2hpbmllczogYW1vdW50U2hpbmllcywNCiAgICAgIH07DQogICAgfTsNCiAgICBHYW1lLkxvYWRXcmlua2xlcnMgPSBmdW5jdGlvbiAoYW1vdW50LCBudW1iZXIsIHNoaW5pZXMsIGFtb3VudFNoaW5pZXMpIHsNCiAgICAgIGlmIChudW1iZXIgPiAwICYmIChhbW91bnQgPiAwIHx8IGFtb3VudFNoaW5pZXMgPiAwKSkgew0KICAgICAgICB2YXIgZnVsbE51bWJlciA9IG51bWJlciAtIHNoaW5pZXM7DQogICAgICAgIHZhciBmdWxsTnVtYmVyU2hpbmllcyA9IHNoaW5pZXM7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS53cmlua2xlcnMpIHsNCiAgICAgICAgICBpZiAobnVtYmVyID4gMCkgew0KICAgICAgICAgICAgR2FtZS53cmlua2xlcnNbaV0ucGhhc2UgPSAyOw0KICAgICAgICAgICAgR2FtZS53cmlua2xlcnNbaV0uY2xvc2UgPSAxOw0KICAgICAgICAgICAgR2FtZS53cmlua2xlcnNbaV0uaHAgPSAzOw0KICAgICAgICAgICAgaWYgKHNoaW5pZXMgPiAwKSB7DQogICAgICAgICAgICAgIEdhbWUud3JpbmtsZXJzW2ldLnR5cGUgPSAxOw0KICAgICAgICAgICAgICBHYW1lLndyaW5rbGVyc1tpXS5zdWNrZWQgPSBhbW91bnRTaGluaWVzIC8gZnVsbE51bWJlclNoaW5pZXM7DQogICAgICAgICAgICAgIHNoaW5pZXMtLTsNCiAgICAgICAgICAgIH0gZWxzZSBHYW1lLndyaW5rbGVyc1tpXS5zdWNrZWQgPSBhbW91bnQgLyBmdWxsTnVtYmVyOw0KICAgICAgICAgICAgbnVtYmVyLS07DQogICAgICAgICAgfSAvL3Jlc3Bhd24NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQoNCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJU1BFQ0lBTCBUSElOR1MgQU5EIFNUVUZGDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLnNwZWNpYWxUYWIgPSAiIjsNCiAgICBHYW1lLnNwZWNpYWxUYWJIb3ZlcmVkID0gIiI7DQogICAgR2FtZS5zcGVjaWFsVGFicyA9IFtdOw0KDQogICAgR2FtZS5VcGRhdGVTcGVjaWFsID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5zcGVjaWFsVGFicyA9IFtdOw0KICAgICAgaWYgKEdhbWUuSGFzKCJBIGZlc3RpdmUgaGF0IikpIEdhbWUuc3BlY2lhbFRhYnMucHVzaCgic2FudGEiKTsNCiAgICAgIGlmIChHYW1lLkhhcygiQSBjcnVtYmx5IGVnZyIpKSBHYW1lLnNwZWNpYWxUYWJzLnB1c2goImRyYWdvbiIpOw0KICAgICAgaWYgKEdhbWUuc3BlY2lhbFRhYnMubGVuZ3RoID09IDApIHsNCiAgICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgwKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICBpZiAoR2FtZS5MZWZ0QmFja2dyb3VuZCkgew0KICAgICAgICBHYW1lLnNwZWNpYWxUYWJIb3ZlcmVkID0gIiI7DQogICAgICAgIHZhciBsZW4gPSBHYW1lLnNwZWNpYWxUYWJzLmxlbmd0aDsNCiAgICAgICAgaWYgKGxlbiA9PSAwKSByZXR1cm47DQogICAgICAgIHZhciB5ID0gR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0IC0gMjQgLSA0OCAqIGxlbjsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLnNwZWNpYWxUYWJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdmFyIHNlbGVjdGVkID0gMDsNCiAgICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFiID09IEdhbWUuc3BlY2lhbFRhYnNbaV0pIHNlbGVjdGVkID0gMTsNCiAgICAgICAgICB2YXIgeCA9IDI0Ow0KICAgICAgICAgIHZhciBzID0gMTsNCiAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgICAgIHMgPSAyOw0KICAgICAgICAgICAgeCArPSAyNDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBNYXRoLmFicyhHYW1lLm1vdXNlWCAtIHgpIDw9IDI0ICogcyAmJg0KICAgICAgICAgICAgTWF0aC5hYnMoR2FtZS5tb3VzZVkgLSB5KSA8PSAyNCAqIHMNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIEdhbWUuc3BlY2lhbFRhYkhvdmVyZWQgPSBHYW1lLnNwZWNpYWxUYWJzW2ldOw0KICAgICAgICAgICAgR2FtZS5tb3VzZVBvaW50ZXIgPSAxOw0KICAgICAgICAgICAgR2FtZS5DYW5DbGljayA9IDA7DQogICAgICAgICAgICBpZiAoR2FtZS5DbGljayAmJiBHYW1lLmxhc3RDbGlja2VkRWwgPT0gbCgiYmFja2dyb3VuZExlZnRDYW52YXMiKSkgew0KICAgICAgICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFiICE9IEdhbWUuc3BlY2lhbFRhYnNbaV0pIHsNCiAgICAgICAgICAgICAgICBHYW1lLnNwZWNpYWxUYWIgPSBHYW1lLnNwZWNpYWxUYWJzW2ldOw0KICAgICAgICAgICAgICAgIEdhbWUuVG9nZ2xlU3BlY2lhbE1lbnUoMSk7DQogICAgICAgICAgICAgICAgUGxheVNvdW5kKCJzbmQvcHJlc3MubXAzIik7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgwKTsNCiAgICAgICAgICAgICAgICBQbGF5U291bmQoInNuZC9wcmVzcy5tcDMiKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAvL1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgeSArPSA0ODsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLnNhbnRhTGV2ZWxzID0gWw0KICAgICAgIkZlc3RpdmUgdGVzdCB0dWJlIiwNCiAgICAgICJGZXN0aXZlIG9ybmFtZW50IiwNCiAgICAgICJGZXN0aXZlIHdyZWF0aCIsDQogICAgICAiRmVzdGl2ZSB0cmVlIiwNCiAgICAgICJGZXN0aXZlIHByZXNlbnQiLA0KICAgICAgIkZlc3RpdmUgZWxmIGZldHVzIiwNCiAgICAgICJFbGYgdG9kZGxlciIsDQogICAgICAiRWxmbGluZyIsDQogICAgICAiWW91bmcgZWxmIiwNCiAgICAgICJCdWxreSBlbGYiLA0KICAgICAgIk5pY2siLA0KICAgICAgIlNhbnRhIENsYXVzIiwNCiAgICAgICJFbGRlciBTYW50YSIsDQogICAgICAiVHJ1ZSBTYW50YSIsDQogICAgICAiRmluYWwgQ2xhdXMiLA0KICAgIF07DQogICAgaWYgKCFFTikgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNhbnRhTGV2ZWxzKSB7DQogICAgICAgIEdhbWUuc2FudGFMZXZlbHNbaV0gPSBsb2MoR2FtZS5zYW50YUxldmVsc1tpXSk7DQogICAgICB9DQogICAgfQ0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5zYW50YURyb3BzKSB7IC8vc2NhbGUgY2hyaXN0bWFzIHVwZ3JhZGUgcHJpY2VzIHdpdGggc2FudGEgbGV2ZWwNCiAgICAgIEdhbWUuVXBncmFkZXNbR2FtZS5zYW50YURyb3BzW2ldXS5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBNYXRoLnBvdygzLCBHYW1lLnNhbnRhTGV2ZWwpICogMjUyNTsNCiAgICAgIH07DQogICAgfQ0KDQogICAgR2FtZS5VcGdyYWRlU2FudGEgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbW9uaSA9IE1hdGgucG93KEdhbWUuc2FudGFMZXZlbCArIDEsIEdhbWUuc2FudGFMZXZlbCArIDEpOw0KICAgICAgaWYgKEdhbWUuY29va2llcyA+IG1vbmkgJiYgR2FtZS5zYW50YUxldmVsIDwgMTQpIHsNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvc2hpbW1lckNsaWNrLm1wMyIpOw0KDQogICAgICAgIEdhbWUuU3BlbmQobW9uaSk7DQogICAgICAgIEdhbWUuc2FudGFMZXZlbCA9IChHYW1lLnNhbnRhTGV2ZWwgKyAxKSAlIDE1Ow0KICAgICAgICBpZiAoR2FtZS5zYW50YUxldmVsID09IDE0KSB7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlNhbnRhJ3MgZG9taW5pb24iKTsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgIGxvYygiWW91IGFyZSBncmFudGVkICUxLiIsIEdhbWUuVXBncmFkZXNbIlNhbnRhJ3MgZG9taW5pb24iXS5kbmFtZSksDQogICAgICAgICAgICAiIiwNCiAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbIlNhbnRhJ3MgZG9taW5pb24iXS5pY29uDQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgZHJvcHMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNhbnRhRHJvcHMpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuSGFzVW5sb2NrZWQoR2FtZS5zYW50YURyb3BzW2ldKSkNCiAgICAgICAgICAgIGRyb3BzLnB1c2goR2FtZS5zYW50YURyb3BzW2ldKTsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgZHJvcCA9IGNob29zZShkcm9wcyk7DQogICAgICAgIGlmIChkcm9wKSB7DQogICAgICAgICAgR2FtZS5VbmxvY2soZHJvcCk7DQogICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICBsb2MoIkZvdW5kIGEgcHJlc2VudCEiKSwNCiAgICAgICAgICAgIGxvYygiWW91IGZpbmQgYSBwcmVzZW50IHdoaWNoIGNvbnRhaW5zLi4uIikgKw0KICAgICAgICAgICAgICAiPGJyPjxiPiIgKw0KICAgICAgICAgICAgICBHYW1lLlVwZ3JhZGVzW2Ryb3BdLmRuYW1lICsNCiAgICAgICAgICAgICAgIjwvYj4hIiwNCiAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbZHJvcF0uaWNvbg0KICAgICAgICAgICk7DQogICAgICAgIH0NCg0KICAgICAgICBHYW1lLlRvZ2dsZVNwZWNpYWxNZW51KDEpOw0KDQogICAgICAgIGlmIChsKCJzcGVjaWFsUGljIikpIHsNCiAgICAgICAgICB2YXIgcmVjdCA9IGwoInNwZWNpYWxQaWMiKS5nZXRCb3VuZHMoKTsNCiAgICAgICAgICBHYW1lLlNwYXJrbGVBdCgNCiAgICAgICAgICAgIChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIsDQogICAgICAgICAgICAocmVjdC50b3AgKyByZWN0LmJvdHRvbSkgLyAyDQogICAgICAgICAgKSArDQogICAgICAgICAgICAzMiAtDQogICAgICAgICAgICBUb3BCYXJPZmZzZXQ7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5zYW50YUxldmVsID49IDYpIEdhbWUuV2luKCJDb21pbmcgdG8gdG93biIpOw0KICAgICAgICBpZiAoR2FtZS5zYW50YUxldmVsID49IDE0KSBHYW1lLldpbigiQWxsIGhhaWwgU2FudGEiKTsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUuZHJhZ29uTGV2ZWxzID0gWw0KICAgICAgew0KICAgICAgICBuYW1lOiAiRHJhZ29uIGVnZyIsDQogICAgICAgIGFjdGlvbjogbG9jKCJDaGlwIGl0IiksDQogICAgICAgIHBpYzogMCwNCiAgICAgICAgY29zdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBHYW1lLmNvb2tpZXMgPj0gMTAwMDAwMDsNCiAgICAgICAgfSwNCiAgICAgICAgYnV5OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgR2FtZS5TcGVuZCgxMDAwMDAwKTsNCiAgICAgICAgfSwNCiAgICAgICAgY29zdFN0cjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxMDAwMDAwKSk7DQogICAgICAgIH0sDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiRHJhZ29uIGVnZyIsDQogICAgICAgIGFjdGlvbjogbG9jKCJDaGlwIGl0IiksDQogICAgICAgIHBpYzogMSwNCiAgICAgICAgY29zdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBHYW1lLmNvb2tpZXMgPj0gMTAwMDAwMCAqIDI7DQogICAgICAgIH0sDQogICAgICAgIGJ1eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIEdhbWUuU3BlbmQoMTAwMDAwMCAqIDIpOw0KICAgICAgICB9LA0KICAgICAgICBjb3N0U3RyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDEwMDAwMDAgKiAyKSk7DQogICAgICAgIH0sDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiRHJhZ29uIGVnZyIsDQogICAgICAgIGFjdGlvbjogbG9jKCJDaGlwIGl0IiksDQogICAgICAgIHBpYzogMiwNCiAgICAgICAgY29zdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBHYW1lLmNvb2tpZXMgPj0gMTAwMDAwMCAqIDQ7DQogICAgICAgIH0sDQogICAgICAgIGJ1eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIEdhbWUuU3BlbmQoMTAwMDAwMCAqIDQpOw0KICAgICAgICB9LA0KICAgICAgICBjb3N0U3RyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDEwMDAwMDAgKiA0KSk7DQogICAgICAgIH0sDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiU2hpdmVyaW5nIGRyYWdvbiBlZ2ciLA0KICAgICAgICBhY3Rpb246IGxvYygiSGF0Y2ggaXQiKSwNCiAgICAgICAgcGljOiAzLA0KICAgICAgICBjb3N0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIEdhbWUuY29va2llcyA+PSAxMDAwMDAwICogODsNCiAgICAgICAgfSwNCiAgICAgICAgYnV5OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgR2FtZS5TcGVuZCgxMDAwMDAwICogOCk7DQogICAgICAgIH0sDQogICAgICAgIGNvc3RTdHI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICByZXR1cm4gbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMTAwMDAwMCAqIDgpKTsNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGhhdGNobGluZyIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gQnJlYXRoIG9mIE1pbGs8YnI+PHNtYWxsPkF1cmEgOiBraXR0ZW5zIGFyZSA1JSBtb3JlIGVmZmVjdGl2ZTwvc21hbGw+IiwNCiAgICAgICAgcGljOiA0LA0KICAgICAgICBjb3N0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIEdhbWUuY29va2llcyA+PSAxMDAwMDAwICogMTY7DQogICAgICAgIH0sDQogICAgICAgIGJ1eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIEdhbWUuU3BlbmQoMTAwMDAwMCAqIDE2KTsNCiAgICAgICAgfSwNCiAgICAgICAgY29zdFN0cjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxMDAwMDAwICogMTYpKTsNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGhhdGNobGluZyIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gRHJhZ29uIEN1cnNvcjxicj48c21hbGw+QXVyYSA6IGNsaWNraW5nIGlzIDUlIG1vcmUgZWZmZWN0aXZlPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDQsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBoYXRjaGxpbmciLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIEVsZGVyIEJhdHRhbGlvbjxicj48c21hbGw+QXVyYSA6IGdyYW5kbWFzIGdhaW4gKzElIENwUyBmb3IgZXZlcnkgbm9uLWdyYW5kbWEgYnVpbGRpbmc8L3NtYWxsPiIsDQogICAgICAgIHBpYzogNCwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGhhdGNobGluZyIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gUmVhcGVyIG9mIEZpZWxkczxicj48c21hbGw+QXVyYSA6IGdvbGRlbiBjb29raWVzIG1heSB0cmlnZ2VyIGEgRHJhZ29uIEhhcnZlc3Q8L3NtYWxsPiIsDQogICAgICAgIHBpYzogNCwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGRyYWdvbiIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gRWFydGggU2hhdHRlcmVyPGJyPjxzbWFsbD5BdXJhIDogYnVpbGRpbmdzIHNlbGwgYmFjayBmb3IgNTAlIGluc3RlYWQgb2YgMjUlPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIE1hc3RlciBvZiB0aGUgQXJtb3J5PGJyPjxzbWFsbD5BdXJhIDogYWxsIHVwZ3JhZGVzIGFyZSAyJSBjaGVhcGVyPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIEZpZXJjZSBIb2FyZGVyPGJyPjxzbWFsbD5BdXJhIDogYWxsIGJ1aWxkaW5ncyBhcmUgMiUgY2hlYXBlcjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBEcmFnb24gR29kPGJyPjxzbWFsbD5BdXJhIDogcHJlc3RpZ2UgQ3BTIGJvbnVzICs1JTwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBBcmNhbmUgQXVyYTxicj48c21hbGw+QXVyYSA6IGdvbGRlbiBjb29raWVzIGFwcGVhciA1JSBtb3JlIG9mdGVuPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIERyYWdvbmZsaWdodDxicj48c21hbGw+QXVyYSA6IGdvbGRlbiBjb29raWVzIG1heSB0cmlnZ2VyIGEgRHJhZ29uZmxpZ2h0PC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIEFuY2VzdHJhbCBNZXRhbW9ycGhvc2lzPGJyPjxzbWFsbD5BdXJhIDogZ29sZGVuIGNvb2tpZXMgZ2l2ZSAxMCUgbW9yZSBjb29raWVzPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIFVuaG9seSBEb21pbmlvbjxicj48c21hbGw+QXVyYSA6IHdyYXRoIGNvb2tpZXMgZ2l2ZSAxMCUgbW9yZSBjb29raWVzPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIEVwb2NoIE1hbmlwdWxhdG9yPGJyPjxzbWFsbD5BdXJhIDogZ29sZGVuIGNvb2tpZSBlZmZlY3RzIGxhc3QgNSUgbG9uZ2VyPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIE1pbmQgT3ZlciBNYXR0ZXI8YnI+PHNtYWxsPkF1cmEgOiArMjUlIHJhbmRvbSBkcm9wczwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBSYWRpYW50IEFwcGV0aXRlPGJyPjxzbWFsbD5BdXJhIDogYWxsIGNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZWQgYnkgMjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBEcmFnb24ncyBGb3J0dW5lPGJyPjxzbWFsbD5BdXJhIDogKzEyMyUgQ3BTIHBlciBnb2xkZW4gY29va2llIG9uLXNjcmVlbjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBEcmFnb24ncyBDdXJ2ZTxicj48c21hbGw+QXVyYSA6IHN1Z2FyIGx1bXBzIGdyb3cgNSUgZmFzdGVyLCA1MCUgd2VpcmRlcjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBSZWFsaXR5IEJlbmRpbmc8YnI+PHNtYWxsPkF1cmEgOiAxMCUgb2YgZXZlcnkgb3RoZXIgYXVyYSwgY29tYmluZWQ8L3NtYWxsPiIsDQogICAgICAgIHBpYzogNSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGRyYWdvbiIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gRHJhZ29uIE9yYnM8YnI+PHNtYWxsPkF1cmEgOiBzZWxsaW5nIHlvdXIgYmVzdCBidWlsZGluZyBtYXkgZ3JhbnQgYSB3aXNoPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIFN1cHJlbWUgSW50ZWxsZWN0PGJyPjxzbWFsbD5BdXJhIDogY29uZmVycyB2YXJpb3VzIHBvd2VycyB0byB5b3VyIG1pbmlnYW1lczwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgIGxvYygiQmFrZSBkcmFnb24gY29va2llIikgKw0KICAgICAgICAgICI8YnI+PHNtYWxsPiIgKw0KICAgICAgICAgIGxvYygiRGVsaWNpb3VzISIpICsNCiAgICAgICAgICAiPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDYsDQogICAgICAgIGNvc3Q6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB2YXIgZmFpbCA9IDA7DQogICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbaV0uYW1vdW50IDwgNTApIGZhaWwgPSAxOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gZmFpbCA9PSAwOw0KICAgICAgICB9LA0KICAgICAgICBidXk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICAgICAgR2FtZS5PYmplY3RzW2ldLnNhY3JpZmljZSg1MCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJEcmFnb24gY29va2llIik7DQogICAgICAgIH0sDQogICAgICAgIGNvc3RTdHI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICByZXR1cm4gbG9jKCIlMSBvZiBldmVyeSBidWlsZGluZyIsIDUwKTsNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGRyYWdvbiIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICBsb2MoIlRyYWluIHNlY29uZGFyeSBhdXJhIikgKw0KICAgICAgICAgICI8YnI+PHNtYWxsPiIgKw0KICAgICAgICAgIGxvYygiTGV0cyB5b3UgdXNlIHR3byBkcmFnb24gYXVyYXMgc2ltdWx0YW5lb3VzbHkiKSArDQogICAgICAgICAgIjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA3LA0KICAgICAgICBjb3N0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgdmFyIGZhaWwgPSAwOw0KICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLmFtb3VudCA8IDIwMCkgZmFpbCA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBmYWlsID09IDA7DQogICAgICAgIH0sDQogICAgICAgIGJ1eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgICBHYW1lLk9iamVjdHNbaV0uc2FjcmlmaWNlKDIwMCk7DQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjb3N0U3RyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIGxvYygiJTEgb2YgZXZlcnkgYnVpbGRpbmciLCAyMDApOw0KICAgICAgICB9LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOiBsb2MoIllvdXIgZHJhZ29uIGlzIGZ1bGx5IHRyYWluZWQuIiksDQogICAgICAgIHBpYzogOCwNCiAgICAgIH0sDQogICAgXTsNCg0KICAgIEdhbWUuZHJhZ29uQXVyYXMgPSB7DQogICAgICAwOiB7DQogICAgICAgIG5hbWU6ICJObyBhdXJhIiwNCiAgICAgICAgcGljOiBbMCwgN10sDQogICAgICAgIGRlc2M6IGxvYygiU2VsZWN0IGFuIGF1cmEgZnJvbSB0aG9zZSB5b3VyIGRyYWdvbiBrbm93cy4iKSwNCiAgICAgIH0sDQogICAgICAxOiB7DQogICAgICAgIG5hbWU6ICJCcmVhdGggb2YgTWlsayIsDQogICAgICAgIHBpYzogWzE4LCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygiS2l0dGVucyBhcmUgPGI+JTElPC9iPiBtb3JlIGVmZmVjdGl2ZS4iLCA1KSwNCiAgICAgIH0sDQogICAgICAyOiB7DQogICAgICAgIG5hbWU6ICJEcmFnb24gQ3Vyc29yIiwNCiAgICAgICAgcGljOiBbMCwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIkNsaWNraW5nIGlzIDxiPiUxJTwvYj4gbW9yZSBwb3dlcmZ1bC4iLCA1KSwNCiAgICAgIH0sDQogICAgICAzOiB7DQogICAgICAgIG5hbWU6ICJFbGRlciBCYXR0YWxpb24iLA0KICAgICAgICBwaWM6IFsxLCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiR3JhbmRtYXMgZ2FpbiA8Yj4rJTElIENwUzwvYj4gZm9yIGVhY2ggbm9uLWdyYW5kbWEgYnVpbGRpbmcuIiwNCiAgICAgICAgICAxDQogICAgICAgICksDQogICAgICB9LA0KICAgICAgNDogew0KICAgICAgICBuYW1lOiAiUmVhcGVyIG9mIEZpZWxkcyIsDQogICAgICAgIHBpYzogWzIsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKCJHb2xkZW4gY29va2llcyBtYXkgdHJpZ2dlciBhIDxiPkRyYWdvbiBIYXJ2ZXN0PC9iPi4iKSwNCiAgICAgIH0sDQogICAgICA1OiB7DQogICAgICAgIG5hbWU6ICJFYXJ0aCBTaGF0dGVyZXIiLA0KICAgICAgICBwaWM6IFszLCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiQnVpbGRpbmdzIHNlbGwgYmFjayBmb3IgPGI+JTElPC9iPiBpbnN0ZWFkIG9mICUyJS4iLA0KICAgICAgICAgIFs1MCwgMjVdDQogICAgICAgICksDQogICAgICB9LA0KICAgICAgNjogew0KICAgICAgICBuYW1lOiAiTWFzdGVyIG9mIHRoZSBBcm1vcnkiLA0KICAgICAgICBwaWM6IFs0LCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygiQWxsIHVwZ3JhZGVzIGFyZSA8Yj4lMSUgY2hlYXBlcjwvYj4uIiwgMiksDQogICAgICB9LA0KICAgICAgNzogew0KICAgICAgICBuYW1lOiAiRmllcmNlIEhvYXJkZXIiLA0KICAgICAgICBwaWM6IFsxNSwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIkFsbCBidWlsZGluZ3MgYXJlIDxiPiUxJSBjaGVhcGVyPC9iPi4iLCAyKSwNCiAgICAgIH0sDQogICAgICA4OiB7DQogICAgICAgIG5hbWU6ICJEcmFnb24gR29kIiwNCiAgICAgICAgcGljOiBbMTYsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKCI8Yj4rJTElPC9iPiBwcmVzdGlnZSBsZXZlbCBlZmZlY3Qgb24gQ3BTLiIsIDUpLA0KICAgICAgfSwNCiAgICAgIDk6IHsNCiAgICAgICAgbmFtZTogIkFyY2FuZSBBdXJhIiwNCiAgICAgICAgcGljOiBbMTcsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKCJHb2xkZW4gY29va2llcyBhcHBlYXIgPGI+JTElPC9iPiBtb3JlIG9mdGVuLiIsIDUpLA0KICAgICAgfSwNCiAgICAgIDEwOiB7DQogICAgICAgIG5hbWU6ICJEcmFnb25mbGlnaHQiLA0KICAgICAgICBwaWM6IFs1LCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygiR29sZGVuIGNvb2tpZXMgbWF5IHRyaWdnZXIgYSA8Yj5EcmFnb25mbGlnaHQ8L2I+LiIpLA0KICAgICAgfSwNCiAgICAgIDExOiB7DQogICAgICAgIG5hbWU6ICJBbmNlc3RyYWwgTWV0YW1vcnBob3NpcyIsDQogICAgICAgIHBpYzogWzYsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKCJHb2xkZW4gY29va2llcyBnaXZlIDxiPiUxJTwvYj4gbW9yZSBjb29raWVzLiIsIDEwKSwNCiAgICAgIH0sDQogICAgICAxMjogew0KICAgICAgICBuYW1lOiAiVW5ob2x5IERvbWluaW9uIiwNCiAgICAgICAgcGljOiBbNywgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIldyYXRoIGNvb2tpZXMgZ2l2ZSA8Yj4lMSU8L2I+IG1vcmUgY29va2llcy4iLCAxMCksDQogICAgICB9LA0KICAgICAgMTM6IHsNCiAgICAgICAgbmFtZTogIkVwb2NoIE1hbmlwdWxhdG9yIiwNCiAgICAgICAgcGljOiBbOCwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIkdvbGRlbiBjb29raWVzIHN0YXkgPGI+JTElPC9iPiBsb25nZXIuIiwgNSksDQogICAgICB9LA0KICAgICAgMTQ6IHsNCiAgICAgICAgbmFtZTogIk1pbmQgT3ZlciBNYXR0ZXIiLA0KICAgICAgICBwaWM6IFsxMywgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIlJhbmRvbSBkcm9wcyBhcmUgPGI+JTElIG1vcmUgY29tbW9uPC9iPi4iLCAyNSksDQogICAgICB9LA0KICAgICAgMTU6IHsNCiAgICAgICAgbmFtZTogIlJhZGlhbnQgQXBwZXRpdGUiLA0KICAgICAgICBwaWM6IFsxNCwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIkFsbCBjb29raWUgcHJvZHVjdGlvbiA8Yj5tdWx0aXBsaWVkIGJ5ICUxPC9iPi4iLCAyKSwNCiAgICAgIH0sDQogICAgICAxNjogew0KICAgICAgICBuYW1lOiAiRHJhZ29uJ3MgRm9ydHVuZSIsDQogICAgICAgIHBpYzogWzE5LCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiPGI+KyUxJSBDcFM8L2I+IHBlciBnb2xkZW4gY29va2llIG9uLXNjcmVlbiwgbXVsdGlwbGljYXRpdmUuIiwNCiAgICAgICAgICAxMjMNCiAgICAgICAgKSwNCiAgICAgIH0sDQogICAgICAxNzogew0KICAgICAgICBuYW1lOiAiRHJhZ29uJ3MgQ3VydmUiLA0KICAgICAgICBwaWM6IFsyMCwgMjVdLA0KICAgICAgICBkZXNjOg0KICAgICAgICAgIGxvYygiPGI+KyUxJTwvYj4gc3VnYXIgbHVtcCBncm93dGguIiwgNSkgKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgbG9jKCJTdWdhciBsdW1wcyBhcmUgPGI+dHdpY2UgYXMgbGlrZWx5PC9iPiB0byBiZSB1bnVzdWFsLiIpLA0KICAgICAgfSwNCiAgICAgIDE4OiB7DQogICAgICAgIG5hbWU6ICJSZWFsaXR5IEJlbmRpbmciLA0KICAgICAgICBwaWM6IFszMiwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoDQogICAgICAgICAgIjxiPk9uZSB0ZW50aDwvYj4gb2YgZXZlcnkgb3RoZXIgZHJhZ29uIGF1cmEsIDxiPmNvbWJpbmVkPC9iPi4iDQogICAgICAgICksDQogICAgICB9LA0KICAgICAgMTk6IHsNCiAgICAgICAgbmFtZTogIkRyYWdvbiBPcmJzIiwNCiAgICAgICAgcGljOiBbMzMsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKA0KICAgICAgICAgICJXaXRoIG5vIGJ1ZmZzIGFuZCBubyBnb2xkZW4gY29va2llcyBvbiBzY3JlZW4sIHNlbGxpbmcgeW91ciBtb3N0IHBvd2VyZnVsIGJ1aWxkaW5nIGhhcyA8Yj4lMSUgY2hhbmNlIHRvIHN1bW1vbiBvbmU8L2I+LiIsDQogICAgICAgICAgMTANCiAgICAgICAgKSwNCiAgICAgIH0sDQogICAgICAyMDogew0KICAgICAgICBuYW1lOiAiU3VwcmVtZSBJbnRlbGxlY3QiLA0KICAgICAgICBwaWM6IFszNCwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoDQogICAgICAgICAgIkNvbmZlcnMgdmFyaW91cyBwb3dlcnMgdG8geW91ciBtaW5pZ2FtZXMgd2hpbGUgYWN0aXZlLjxicj5TZWUgdGhlIGJvdHRvbSBvZiBlYWNoIG1pbmlnYW1lIGZvciBtb3JlIGRldGFpbHMuIg0KICAgICAgICApLA0KICAgICAgfSwNCiAgICB9Ow0KDQogICAgR2FtZS5kcmFnb25BdXJhc0JOID0ge307DQogICAgZm9yICh2YXIgaSBpbiBHYW1lLmRyYWdvbkF1cmFzKSB7DQogICAgICBHYW1lLmRyYWdvbkF1cmFzQk5bR2FtZS5kcmFnb25BdXJhc1tpXS5uYW1lXSA9IEdhbWUuZHJhZ29uQXVyYXNbaV07DQogICAgfQ0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5kcmFnb25BdXJhcykgew0KICAgICAgR2FtZS5kcmFnb25BdXJhc1tpXS5pZCA9IHBhcnNlSW50KGkpOw0KICAgICAgR2FtZS5kcmFnb25BdXJhc1tpXS5kbmFtZSA9IGxvYyhHYW1lLmRyYWdvbkF1cmFzW2ldLm5hbWUpOw0KICAgIH0NCg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5kcmFnb25MZXZlbHMubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciBpdCA9IEdhbWUuZHJhZ29uTGV2ZWxzW2ldOw0KICAgICAgaXQubmFtZSA9IGxvYyhpdC5uYW1lKTsNCiAgICAgIGlmIChpID49IDQgJiYgaSA8IEdhbWUuZHJhZ29uTGV2ZWxzLmxlbmd0aCAtIDMpIHsNCiAgICAgICAgaWYgKCFFTikNCiAgICAgICAgICBpdC5hY3Rpb24gPQ0KICAgICAgICAgICAgbG9jKCJUcmFpbiAlMSIsIEdhbWUuZHJhZ29uQXVyYXNbaSAtIDNdLmRuYW1lKSArDQogICAgICAgICAgICAiPGJyPjxzbWFsbD4iICsNCiAgICAgICAgICAgIGxvYygiQXVyYTogJTEiLCBHYW1lLmRyYWdvbkF1cmFzW2kgLSAzXS5kZXNjKSArDQogICAgICAgICAgICAiPC9zbWFsbD4iOw0KICAgICAgICBpZiAoaSA+PSA1KSB7DQogICAgICAgICAgaXQuY29zdFN0ciA9IChmdW5jdGlvbiAoYnVpbGRpbmcpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIHJldHVybiBsb2MoIiUxICIgKyBidWlsZGluZy5ic2luZ2xlLCBMQmVhdXRpZnkoMTAwKSk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0pKEdhbWUuT2JqZWN0c0J5SWRbaSAtIDVdKTsNCiAgICAgICAgICBpdC5jb3N0ID0gKGZ1bmN0aW9uIChidWlsZGluZykgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkaW5nLmFtb3VudCA+PSAxMDA7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0pKEdhbWUuT2JqZWN0c0J5SWRbaSAtIDVdKTsNCiAgICAgICAgICBpdC5idXkgPSAoZnVuY3Rpb24gKGJ1aWxkaW5nKSB7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICBidWlsZGluZy5zYWNyaWZpY2UoMTAwKTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSkoR2FtZS5PYmplY3RzQnlJZFtpIC0gNV0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgR2FtZS5oYXNBdXJhID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5kcmFnb25BdXJhc1tHYW1lLmRyYWdvbkF1cmFdLm5hbWUgPT0gd2hhdCB8fA0KICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYTJdLm5hbWUgPT0gd2hhdA0KICAgICAgKQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgIH07DQogICAgR2FtZS5hdXJhTXVsdCA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICB2YXIgbiA9IDA7DQogICAgICBpZiAoDQogICAgICAgIEdhbWUuZHJhZ29uQXVyYXNbR2FtZS5kcmFnb25BdXJhXS5uYW1lID09IHdoYXQgfHwNCiAgICAgICAgR2FtZS5kcmFnb25BdXJhc1tHYW1lLmRyYWdvbkF1cmEyXS5uYW1lID09IHdoYXQNCiAgICAgICkNCiAgICAgICAgbiA9IDE7DQogICAgICBpZiAoDQogICAgICAgIChHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYV0ubmFtZSA9PSAiUmVhbGl0eSBCZW5kaW5nIiB8fA0KICAgICAgICAgIEdhbWUuZHJhZ29uQXVyYXNbR2FtZS5kcmFnb25BdXJhMl0ubmFtZSA9PSAiUmVhbGl0eSBCZW5kaW5nIikgJiYNCiAgICAgICAgR2FtZS5kcmFnb25MZXZlbCA+PSBHYW1lLmRyYWdvbkF1cmFzQk5bd2hhdF0uaWQgKyA0DQogICAgICApDQogICAgICAgIG4gKz0gMC4xOw0KICAgICAgcmV0dXJuIG47DQogICAgfTsNCg0KICAgIEdhbWUuU2VsZWN0RHJhZ29uQXVyYSA9IGZ1bmN0aW9uIChzbG90LCB1cGRhdGUpIHsNCiAgICAgIHZhciBjdXJyZW50QXVyYSA9IDA7DQogICAgICB2YXIgb3RoZXJBdXJhID0gMDsNCiAgICAgIGlmIChzbG90ID09IDApIGN1cnJlbnRBdXJhID0gR2FtZS5kcmFnb25BdXJhOw0KICAgICAgZWxzZSBjdXJyZW50QXVyYSA9IEdhbWUuZHJhZ29uQXVyYTI7DQogICAgICBpZiAoc2xvdCA9PSAwKSBvdGhlckF1cmEgPSBHYW1lLmRyYWdvbkF1cmEyOw0KICAgICAgZWxzZSBvdGhlckF1cmEgPSBHYW1lLmRyYWdvbkF1cmE7DQogICAgICBpZiAoIXVwZGF0ZSkgR2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhID0gY3VycmVudEF1cmE7DQoNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5kcmFnb25BdXJhcykgew0KICAgICAgICBpZiAoR2FtZS5kcmFnb25MZXZlbCA+PSBwYXJzZUludChpKSArIDQpIHsNCiAgICAgICAgICB2YXIgaWNvbiA9IEdhbWUuZHJhZ29uQXVyYXNbaV0ucGljOw0KICAgICAgICAgIGlmIChpID09IDAgfHwgaSAhPSBvdGhlckF1cmEpDQogICAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImNyYXRlIGVuYWJsZWQnICsNCiAgICAgICAgICAgICAgKGkgPT0gR2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhID8gIiBoaWdobGlnaHRlZCIgOiAiIikgKw0KICAgICAgICAgICAgICAnIiBzdHlsZT0ib3BhY2l0eToxO2Zsb2F0Om5vbmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7JyArDQogICAgICAgICAgICAgIHdyaXRlSWNvbihpY29uKSArDQogICAgICAgICAgICAgICciICcgKw0KICAgICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICAgIj1cIlBsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7R2FtZS5TZXREcmFnb25BdXJhKCIgKw0KICAgICAgICAgICAgICBpICsNCiAgICAgICAgICAgICAgIiwiICsNCiAgICAgICAgICAgICAgc2xvdCArDQogICAgICAgICAgICAgICcpOyIgb25Nb3VzZU91dD0iR2FtZS5EZXNjcmliZURyYWdvbkF1cmEoJyArDQogICAgICAgICAgICAgIEdhbWUuU2VsZWN0aW5nRHJhZ29uQXVyYSArDQogICAgICAgICAgICAgICcpOyIgb25Nb3VzZU92ZXI9IkdhbWUuRGVzY3JpYmVEcmFnb25BdXJhKCcgKw0KICAgICAgICAgICAgICBpICsNCiAgICAgICAgICAgICAgJyk7IicgKw0KICAgICAgICAgICAgICAiPjwvZGl2PiI7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdmFyIGhpZ2hlc3RCdWlsZGluZyA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLmFtb3VudCA+IDApIGhpZ2hlc3RCdWlsZGluZyA9IEdhbWUuT2JqZWN0c1tpXTsNCiAgICAgIH0NCg0KICAgICAgR2FtZS5Qcm9tcHQoDQogICAgICAgICI8aWQgUGlja0RyYWdvbkF1cmE+PGgzPiIgKw0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgIHNsb3QgPT0gMQ0KICAgICAgICAgICAgICA/ICJTZXQgeW91ciBkcmFnb24ncyBzZWNvbmRhcnkgYXVyYSINCiAgICAgICAgICAgICAgOiAiU2V0IHlvdXIgZHJhZ29uJ3MgYXVyYSINCiAgICAgICAgICApICsNCiAgICAgICAgICAiPC9oMz4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgJzxkaXYgaWQ9ImRyYWdvbkF1cmFJbmZvIiBzdHlsZT0ibWluLWhlaWdodDo2MHB4OyI+PC9kaXY+JyArDQogICAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgICAgc3RyICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tYm90dG9tOjhweDsiPicgKw0KICAgICAgICAgIChoaWdoZXN0QnVpbGRpbmcgPT0gMA0KICAgICAgICAgICAgPyBsb2MoDQogICAgICAgICAgICAgICAgIlN3aXRjaGluZyB5b3VyIGF1cmEgaXMgPGI+ZnJlZTwvYj4gYmVjYXVzZSB5b3Ugb3duIG5vIGJ1aWxkaW5ncy4iDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgIDogbG9jKA0KICAgICAgICAgICAgICAgICJUaGUgY29zdCBvZiBzd2l0Y2hpbmcgeW91ciBhdXJhIGlzIDxiPiUxPC9iPi48YnI+VGhpcyB3aWxsIGFmZmVjdCB5b3VyIENwUyEiLA0KICAgICAgICAgICAgICAgIGxvYygiJTEgIiArIGhpZ2hlc3RCdWlsZGluZy5ic2luZ2xlLCBMQmVhdXRpZnkoMSkpDQogICAgICAgICAgICAgICkpICsNCiAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgWw0KICAgICAgICAgIFsNCiAgICAgICAgICAgIGxvYygiQ29uZmlybSIpLA0KICAgICAgICAgICAgKHNsb3QgPT0gMCA/ICJHYW1lLmRyYWdvbkF1cmEiIDogIkdhbWUuZHJhZ29uQXVyYTIiKSArDQogICAgICAgICAgICAgICI9R2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhOyIgKw0KICAgICAgICAgICAgICAoaGlnaGVzdEJ1aWxkaW5nID09IDAgfHwgY3VycmVudEF1cmEgPT0gR2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhDQogICAgICAgICAgICAgICAgPyAiIg0KICAgICAgICAgICAgICAgIDogIkdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgICAgICAgICBoaWdoZXN0QnVpbGRpbmcuaWQgKw0KICAgICAgICAgICAgICAgICAgIl0uc2FjcmlmaWNlKDEpOyIpICsNCiAgICAgICAgICAgICAgIkdhbWUuVG9nZ2xlU3BlY2lhbE1lbnUoMSk7R2FtZS5DbG9zZVByb21wdCgpOyIsDQogICAgICAgICAgXSwNCiAgICAgICAgICBsb2MoIkNhbmNlbCIpLA0KICAgICAgICBdLA0KICAgICAgICAwLA0KICAgICAgICAid2lkZVByb21wdCINCiAgICAgICk7DQogICAgICBHYW1lLkRlc2NyaWJlRHJhZ29uQXVyYShHYW1lLlNlbGVjdGluZ0RyYWdvbkF1cmEpOw0KICAgIH07DQogICAgR2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhID0gLTE7DQogICAgR2FtZS5TZXREcmFnb25BdXJhID0gZnVuY3Rpb24gKGF1cmEsIHNsb3QpIHsNCiAgICAgIEdhbWUuU2VsZWN0aW5nRHJhZ29uQXVyYSA9IGF1cmE7DQogICAgICBHYW1lLlNlbGVjdERyYWdvbkF1cmEoc2xvdCwgMSk7DQogICAgfTsNCiAgICBHYW1lLkRlc2NyaWJlRHJhZ29uQXVyYSA9IGZ1bmN0aW9uIChhdXJhKSB7DQogICAgICBsKCJkcmFnb25BdXJhSW5mbyIpLmlubmVySFRNTCA9DQogICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij48aDQ+JyArDQogICAgICAgIEdhbWUuZHJhZ29uQXVyYXNbYXVyYV0uZG5hbWUgKw0KICAgICAgICAiPC9oND4iICsNCiAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW2F1cmFdLmRlc2MgKw0KICAgICAgICAiPC9kaXY+IjsNCiAgICB9Ow0KDQogICAgR2FtZS5VcGdyYWRlRHJhZ29uID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLmRyYWdvbkxldmVsIDwgR2FtZS5kcmFnb25MZXZlbHMubGVuZ3RoIC0gMSAmJg0KICAgICAgICBHYW1lLmRyYWdvbkxldmVsc1tHYW1lLmRyYWdvbkxldmVsXS5jb3N0KCkNCiAgICAgICkgew0KICAgICAgICBQbGF5U291bmQoInNuZC9zaGltbWVyQ2xpY2subXAzIik7DQogICAgICAgIEdhbWUuZHJhZ29uTGV2ZWxzW0dhbWUuZHJhZ29uTGV2ZWxdLmJ1eSgpOw0KICAgICAgICBHYW1lLmRyYWdvbkxldmVsID0gKEdhbWUuZHJhZ29uTGV2ZWwgKyAxKSAlIEdhbWUuZHJhZ29uTGV2ZWxzLmxlbmd0aDsNCg0KICAgICAgICBpZiAoR2FtZS5kcmFnb25MZXZlbCA+PSBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAxKQ0KICAgICAgICAgIEdhbWUuV2luKCJIZXJlIGJlIGRyYWdvbiIpOw0KICAgICAgICBHYW1lLlRvZ2dsZVNwZWNpYWxNZW51KDEpOw0KICAgICAgICBpZiAobCgic3BlY2lhbFBpYyIpKSB7DQogICAgICAgICAgdmFyIHJlY3QgPSBsKCJzcGVjaWFsUGljIikuZ2V0Qm91bmRzKCk7DQogICAgICAgICAgR2FtZS5TcGFya2xlQXQoDQogICAgICAgICAgICAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLA0KICAgICAgICAgICAgKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMg0KICAgICAgICAgICkgKw0KICAgICAgICAgICAgMzIgLQ0KICAgICAgICAgICAgVG9wQmFyT2Zmc2V0Ow0KICAgICAgICB9DQogICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLmxhc3RDbGlja2VkU3BlY2lhbFBpYyA9IDA7DQogICAgR2FtZS5DbGlja1NwZWNpYWxQaWMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoDQogICAgICAgIEdhbWUuc3BlY2lhbFRhYiA9PSAiZHJhZ29uIiAmJg0KICAgICAgICBHYW1lLmRyYWdvbkxldmVsID49IDQgJiYNCiAgICAgICAgR2FtZS5IYXMoIlBldCB0aGUgZHJhZ29uIikgJiYNCiAgICAgICAgbCgic3BlY2lhbFBpYyIpDQogICAgICApIHsNCiAgICAgICAgdHJpZ2dlckFuaW0obCgic3BlY2lhbFBpYyIpLCAicHVja2VyIik7DQogICAgICAgIFBsYXlTb3VuZCgNCiAgICAgICAgICAic25kL2NsaWNrIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKSArICIubXAzIiwNCiAgICAgICAgICAwLjUNCiAgICAgICAgKTsNCiAgICAgICAgaWYgKERhdGUubm93KCkgLSBHYW1lLmxhc3RDbGlja2VkU3BlY2lhbFBpYyA+IDIwMDApDQogICAgICAgICAgUGxheVNvdW5kKCJzbmQvZ3Jvd2wubXAzIik7DQogICAgICAgIC8vZWxzZSBpZiAoTWF0aC5yYW5kb20oKTwwLjUpIFBsYXlTb3VuZCgnc25kL2dyb3dsLm1wMycsMC41K01hdGgucmFuZG9tKCkqMC4yKTsNCiAgICAgICAgR2FtZS5sYXN0Q2xpY2tlZFNwZWNpYWxQaWMgPSBEYXRlLm5vdygpOw0KICAgICAgICBpZiAoR2FtZS5wcmVmcy5wYXJ0aWNsZXMpIHsNCiAgICAgICAgICBHYW1lLnBhcnRpY2xlQWRkKA0KICAgICAgICAgICAgR2FtZS5tb3VzZVgsDQogICAgICAgICAgICBHYW1lLm1vdXNlWSAtIDMyLA0KICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIC0yIC0gNCwNCiAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAwLjIgKyAwLjUsDQogICAgICAgICAgICAxLA0KICAgICAgICAgICAgMiwNCiAgICAgICAgICAgIFsyMCwgM10NCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmRyYWdvbkxldmVsID49IDggJiYgTWF0aC5yYW5kb20oKSA8IDEgLyAyMCkgew0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbShHYW1lLnNlZWQgKyAiL2RyYWdvblRpbWUiKTsNCiAgICAgICAgICB2YXIgZHJvcHMgPSBbDQogICAgICAgICAgICAiRHJhZ29uIHNjYWxlIiwNCiAgICAgICAgICAgICJEcmFnb24gY2xhdyIsDQogICAgICAgICAgICAiRHJhZ29uIGZhbmciLA0KICAgICAgICAgICAgIkRyYWdvbiB0ZWRkeSBiZWFyIiwNCiAgICAgICAgICBdOw0KICAgICAgICAgIGRyb3BzID0gc2h1ZmZsZShkcm9wcyk7DQogICAgICAgICAgdmFyIGRyb3AgPQ0KICAgICAgICAgICAgZHJvcHNbTWF0aC5mbG9vcigobmV3IERhdGUoKS5nZXRNaW51dGVzKCkgLyA2MCkgKiBkcm9wcy5sZW5ndGgpXTsNCiAgICAgICAgICBpZiAoIUdhbWUuSGFzKGRyb3ApICYmICFHYW1lLkhhc1VubG9ja2VkKGRyb3ApKSB7DQogICAgICAgICAgICBHYW1lLlVubG9jayhkcm9wKTsNCiAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICBkcm9wLA0KICAgICAgICAgICAgICAiPGI+IiArIGxvYygiWW91ciBkcmFnb24gZHJvcHBlZCBzb21ldGhpbmchIikgKyAiPC9iPiIsDQogICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbZHJvcF0uaWNvbg0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgICAgTWF0aC5zZWVkcmFuZG9tKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KDQogICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSA9IGZ1bmN0aW9uIChvbikgew0KICAgICAgaWYgKG9uKSB7DQogICAgICAgIHZhciBwaWMgPSAiIjsNCiAgICAgICAgdmFyIGZyYW1lID0gMDsNCiAgICAgICAgaWYgKEdhbWUuc3BlY2lhbFRhYiA9PSAic2FudGEiKSB7DQogICAgICAgICAgcGljID0gInNhbnRhLnBuZyI7DQogICAgICAgICAgZnJhbWUgPSBHYW1lLnNhbnRhTGV2ZWw7DQogICAgICAgIH0gZWxzZSBpZiAoR2FtZS5zcGVjaWFsVGFiID09ICJkcmFnb24iKSB7DQogICAgICAgICAgcGljID0gImRyYWdvbi5wbmc/dj0iICsgR2FtZS52ZXJzaW9uOw0KICAgICAgICAgIGZyYW1lID0gR2FtZS5kcmFnb25MZXZlbHNbR2FtZS5kcmFnb25MZXZlbF0ucGljOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHBpYyA9ICJkcmFnb24ucG5nP3Y9IiArIEdhbWUudmVyc2lvbjsNCiAgICAgICAgICBmcmFtZSA9IDQ7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgc3RyID0NCiAgICAgICAgICAnPGRpdiBpZD0ic3BlY2lhbFBpYyIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgJz0iR2FtZS5DbGlja1NwZWNpYWxQaWMoKTsiIHN0eWxlPSInICsNCiAgICAgICAgICAoR2FtZS5zcGVjaWFsVGFiID09ICJkcmFnb24iICYmDQogICAgICAgICAgR2FtZS5kcmFnb25MZXZlbCA+PSA0ICYmDQogICAgICAgICAgR2FtZS5IYXMoIlBldCB0aGUgZHJhZ29uIikNCiAgICAgICAgICAgID8gImN1cnNvcjpwb2ludGVyOyINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAicG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTZweDt0b3A6LTY0cHg7d2lkdGg6OTZweDtoZWlnaHQ6OTZweDtiYWNrZ3JvdW5kOnVybChpbWcvIiArDQogICAgICAgICAgcGljICsNCiAgICAgICAgICAiKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOiIgKw0KICAgICAgICAgIC1mcmFtZSAqIDk2ICsNCiAgICAgICAgICAncHggMHB4O2ZpbHRlcjpkcm9wLXNoYWRvdygwcHggM3B4IDJweCAjMDAwKTstd2Via2l0LWZpbHRlcjpkcm9wLXNoYWRvdygwcHggM3B4IDJweCAjMDAwKTsiPjwvZGl2Pic7DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJjbG9zZSIgb25jbGljaz0iUGxheVNvdW5kKFwnc25kL3ByZXNzLm1wM1wnKTtHYW1lLlRvZ2dsZVNwZWNpYWxNZW51KDApOyI+eDwvZGl2Pic7DQoNCiAgICAgICAgaWYgKEdhbWUuc3BlY2lhbFRhYiA9PSAic2FudGEiKSB7DQogICAgICAgICAgdmFyIG1vbmkgPSBNYXRoLnBvdyhHYW1lLnNhbnRhTGV2ZWwgKyAxLCBHYW1lLnNhbnRhTGV2ZWwgKyAxKTsNCg0KICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgJzxoMyBzdHlsZT0icG9pbnRlci1ldmVudHM6bm9uZTsiPicgKw0KICAgICAgICAgICAgR2FtZS5zYW50YUxldmVsc1tHYW1lLnNhbnRhTGV2ZWxdICsNCiAgICAgICAgICAgICI8L2gzPiI7DQogICAgICAgICAgaWYgKEdhbWUuc2FudGFMZXZlbCA8IDE0KSB7DQogICAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ib3B0aW9uQm94IiBzdHlsZT0ibWFyZ2luLWJvdHRvbTowcHg7Ij48YSBjbGFzcz0ib3B0aW9uIGZyYW1lZCBsYXJnZSB0aXRsZSIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAnPSJHYW1lLlVwZ3JhZGVTYW50YSgpOyI+JyArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+JyArDQogICAgICAgICAgICAgIGxvYygiRXZvbHZlIikgKw0KICAgICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlO3BhZGRpbmc6NHB4IDEycHg7Ij58PC9kaXY+JyArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTo2NSU7Ij4nICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJzYWNyaWZpY2UgJTEiLA0KICAgICAgICAgICAgICAgICI8ZGl2IiArDQogICAgICAgICAgICAgICAgICAoR2FtZS5jb29raWVzID4gbW9uaSA/ICIiIDogJyBzdHlsZT0iY29sb3I6Izc3NzsiJykgKw0KICAgICAgICAgICAgICAgICAgIj4iICsNCiAgICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICAgIiUxIGNvb2tpZSIsDQogICAgICAgICAgICAgICAgICAgIExCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhHYW1lLnNhbnRhTGV2ZWwgKyAxLCBHYW1lLnNhbnRhTGV2ZWwgKyAxKQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICAgICI8L2E+PC9kaXY+IjsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAoR2FtZS5zcGVjaWFsVGFiID09ICJkcmFnb24iKSB7DQogICAgICAgICAgdmFyIGxldmVsID0gR2FtZS5kcmFnb25MZXZlbHNbR2FtZS5kcmFnb25MZXZlbF07DQoNCiAgICAgICAgICBzdHIgKz0gJzxoMyBzdHlsZT0icG9pbnRlci1ldmVudHM6bm9uZTsiPicgKyBsZXZlbC5uYW1lICsgIjwvaDM+IjsNCg0KICAgICAgICAgIGlmIChHYW1lLmRyYWdvbkxldmVsID49IDUpIHsNCiAgICAgICAgICAgIHZhciBpY29uID0gR2FtZS5kcmFnb25BdXJhc1tHYW1lLmRyYWdvbkF1cmFdLnBpYzsNCiAgICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iY3JhdGUgZW5hYmxlZCIgc3R5bGU9Im9wYWNpdHk6MTtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxOHB4O3RvcDotNThweDsnICsNCiAgICAgICAgICAgICAgd3JpdGVJY29uKGljb24pICsNCiAgICAgICAgICAgICAgJyIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAiPVwiUGxheVNvdW5kKCdzbmQvdGljay5tcDMnKTtHYW1lLlNlbGVjdERyYWdvbkF1cmEoMCk7XCIgIiArDQogICAgICAgICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT0ibWluLXdpZHRoOjIwMHB4O3RleHQtYWxpZ246Y2VudGVyOyIgaWQ9InRvb2x0aXBEcmFnb25BdXJhU2VsZWN0Ij48aDQ+JyArDQogICAgICAgICAgICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYV0uZG5hbWUgKw0KICAgICAgICAgICAgICAgICAgIjwvaDQ+IiArDQogICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYV0uZGVzYyArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICAgICAgICAidG9wIg0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoR2FtZS5kcmFnb25MZXZlbCA+PSAyNikgew0KICAgICAgICAgICAgLy8ybmQgYXVyYSBzbG90OyBpbmNyZWFzZWQgd2l0aCBsYXN0IGJ1aWxkaW5nIChjb3J0ZXggYmFrZXIpDQogICAgICAgICAgICB2YXIgaWNvbiA9IEdhbWUuZHJhZ29uQXVyYXNbR2FtZS5kcmFnb25BdXJhMl0ucGljOw0KICAgICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJjcmF0ZSBlbmFibGVkIiBzdHlsZT0ib3BhY2l0eToxO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjgwcHg7dG9wOi01OHB4OycgKw0KICAgICAgICAgICAgICB3cml0ZUljb24oaWNvbikgKw0KICAgICAgICAgICAgICAnIiAnICsNCiAgICAgICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgICAgICI9XCJQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO0dhbWUuU2VsZWN0RHJhZ29uQXVyYSgxKTtcIiAiICsNCiAgICAgICAgICAgICAgR2FtZS5nZXRUb29sdGlwKA0KICAgICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7IiBpZD0idG9vbHRpcERyYWdvbkF1cmFTZWxlY3QyIj48aDQ+JyArDQogICAgICAgICAgICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYTJdLmRuYW1lICsNCiAgICAgICAgICAgICAgICAgICI8L2g0PiIgKw0KICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICAgICAgR2FtZS5kcmFnb25BdXJhc1tHYW1lLmRyYWdvbkF1cmEyXS5kZXNjICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAgICAgICAgICJ0b3AiDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiPjwvZGl2PiI7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUuZHJhZ29uTGV2ZWwgPCBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ib3B0aW9uQm94IiBzdHlsZT0ibWFyZ2luLWJvdHRvbTowcHg7Ij48YSBjbGFzcz0ib3B0aW9uIGZyYW1lZCBsYXJnZSB0aXRsZSIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAnPSJHYW1lLlVwZ3JhZGVEcmFnb24oKTsiPicgKw0KICAgICAgICAgICAgICAnPGRpdiBzdHlsZT0iZGlzcGxheTp0YWJsZS1jZWxsO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPicgKw0KICAgICAgICAgICAgICBsZXZlbC5hY3Rpb24gKw0KICAgICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlO3BhZGRpbmc6NHB4IDEycHg7Ij58PC9kaXY+JyArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTo2NSU7Ij4nICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJzYWNyaWZpY2UgJTEiLA0KICAgICAgICAgICAgICAgICI8ZGl2IiArDQogICAgICAgICAgICAgICAgICAobGV2ZWwuY29zdCgpID8gIiIgOiAnIHN0eWxlPSJjb2xvcjojNzc3OyInKSArDQogICAgICAgICAgICAgICAgICAiPiIgKw0KICAgICAgICAgICAgICAgICAgbGV2ZWwuY29zdFN0cigpICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICAgICI8L2E+PC9kaXY+IjsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO21hcmdpbi1ib3R0b206NHB4OyI+JyArDQogICAgICAgICAgICAgIGxldmVsLmFjdGlvbiArDQogICAgICAgICAgICAgICI8L2Rpdj4iOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGwoInNwZWNpYWxQb3B1cCIpLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgICBsKCJzcGVjaWFsUG9wdXAiKS5jbGFzc05hbWUgPSAiZnJhbWVkIHByb21wdCBvblNjcmVlbiI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFiICE9ICIiKSB7DQogICAgICAgICAgR2FtZS5zcGVjaWFsVGFiID0gIiI7DQogICAgICAgICAgbCgic3BlY2lhbFBvcHVwIikuY2xhc3NOYW1lID0gImZyYW1lZCBwcm9tcHQgb2ZmU2NyZWVuIjsNCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmIChHYW1lLnNwZWNpYWxUYWIgPT0gIiIpIHsNCiAgICAgICAgICAgICAgLypsKCdzcGVjaWFsUG9wdXAnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsqLyBsKA0KICAgICAgICAgICAgICAgICJzcGVjaWFsUG9wdXAiDQogICAgICAgICAgICAgICkuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwgMTAwMCAqIDAuMik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuRHJhd1NwZWNpYWwgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbGVuID0gR2FtZS5zcGVjaWFsVGFicy5sZW5ndGg7DQogICAgICBpZiAobGVuID09IDApIHJldHVybjsNCiAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQuZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgdmFyIHkgPSBHYW1lLkxlZnRCYWNrZ3JvdW5kLmNhbnZhcy5oZWlnaHQgLSAyNCAtIDQ4ICogbGVuOw0KICAgICAgdmFyIHRhYkkgPSAwOw0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuc3BlY2lhbFRhYnMpIHsNCiAgICAgICAgdmFyIHNlbGVjdGVkID0gMDsNCiAgICAgICAgdmFyIGhvdmVyZWQgPSAwOw0KICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFiID09IEdhbWUuc3BlY2lhbFRhYnNbaV0pIHNlbGVjdGVkID0gMTsNCiAgICAgICAgaWYgKEdhbWUuc3BlY2lhbFRhYkhvdmVyZWQgPT0gR2FtZS5zcGVjaWFsVGFic1tpXSkgaG92ZXJlZCA9IDE7DQogICAgICAgIHZhciB4ID0gMjQ7DQogICAgICAgIHZhciBzID0gMTsNCiAgICAgICAgdmFyIHBpYyA9ICIiOw0KICAgICAgICB2YXIgZnJhbWUgPSAwOw0KICAgICAgICBpZiAoaG92ZXJlZCkgew0KICAgICAgICAgIHMgPSAxOw0KICAgICAgICAgIHggPSAyNDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgICBzID0gMTsNCiAgICAgICAgICB4ID0gNDg7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFic1tpXSA9PSAic2FudGEiKSB7DQogICAgICAgICAgcGljID0gInNhbnRhLnBuZyI7DQogICAgICAgICAgZnJhbWUgPSBHYW1lLnNhbnRhTGV2ZWw7DQogICAgICAgIH0gZWxzZSBpZiAoR2FtZS5zcGVjaWFsVGFic1tpXSA9PSAiZHJhZ29uIikgew0KICAgICAgICAgIHBpYyA9ICJkcmFnb24ucG5nP3Y9IiArIEdhbWUudmVyc2lvbjsNCiAgICAgICAgICBmcmFtZSA9IEdhbWUuZHJhZ29uTGV2ZWxzW0dhbWUuZHJhZ29uTGV2ZWxdLnBpYzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBwaWMgPSAiZHJhZ29uLnBuZz92PSIgKyBHYW1lLnZlcnNpb247DQogICAgICAgICAgZnJhbWUgPSA0Ow0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGhvdmVyZWQgfHwgc2VsZWN0ZWQpIHsNCiAgICAgICAgICB2YXIgc3MgPSBzICogNjQ7DQogICAgICAgICAgdmFyIHIgPSBNYXRoLmZsb29yKChHYW1lLlQgKiAwLjUpICUgMzYwKTsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLnNhdmUoKTsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLnRyYW5zbGF0ZSh4LCB5KTsNCiAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQucm90YXRlKChyIC8gMzYwKSAqIE1hdGguUEkgKiAyKTsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmdsb2JhbEFscGhhID0gMC43NTsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmRyYXdJbWFnZSgNCiAgICAgICAgICAgIFBpYygic2hpbmUucG5nIiksDQogICAgICAgICAgICAtc3MgLyAyLA0KICAgICAgICAgICAgLXNzIC8gMiwNCiAgICAgICAgICAgIHNzLA0KICAgICAgICAgICAgc3MNCiAgICAgICAgICApOw0KICAgICAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQucmVzdG9yZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUucHJlZnMuZmFuY3kpDQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5kcmF3SW1hZ2UoDQogICAgICAgICAgICBQaWMocGljKSwNCiAgICAgICAgICAgIDk2ICogZnJhbWUsDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgOTYsDQogICAgICAgICAgICA5NiwNCiAgICAgICAgICAgIHggKyAoc2VsZWN0ZWQgPyAwIDogTWF0aC5zaW4oR2FtZS5UICogMC4yICsgdGFiSSkgKiAzKSAtIDI0ICogcywNCiAgICAgICAgICAgIHkgLQ0KICAgICAgICAgICAgICAoc2VsZWN0ZWQgPyA2IDogTWF0aC5hYnMoTWF0aC5jb3MoR2FtZS5UICogMC4yICsgdGFiSSkpICogNikgLQ0KICAgICAgICAgICAgICAyNCAqIHMsDQogICAgICAgICAgICA0OCAqIHMsDQogICAgICAgICAgICA0OCAqIHMNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlDQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5kcmF3SW1hZ2UoDQogICAgICAgICAgICBQaWMocGljKSwNCiAgICAgICAgICAgIDk2ICogZnJhbWUsDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgOTYsDQogICAgICAgICAgICA5NiwNCiAgICAgICAgICAgIHggLSAyNCAqIHMsDQogICAgICAgICAgICB5IC0gMjQgKiBzLA0KICAgICAgICAgICAgNDggKiBzLA0KICAgICAgICAgICAgNDggKiBzDQogICAgICAgICAgKTsNCg0KICAgICAgICB0YWJJKys7DQogICAgICAgIHkgKz0gNDg7DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlWSVNVQUwgRUZGRUNUUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KDQogICAgR2FtZS5BbGxNaWxrcyA9IFsNCiAgICAgIHsgbmFtZTogIkF1dG9tYXRpYyIsIGljb246IFswLCA3XSwgdHlwZTogLTEsIHBpYzogIm1pbGtQbGFpbiIgfSwNCiAgICAgIHsgbmFtZTogIlBsYWluIG1pbGsiLCBpY29uOiBbMSwgOF0sIHR5cGU6IDAsIHBpYzogIm1pbGtQbGFpbiIgfSwNCiAgICAgIHsgbmFtZTogIkNob2NvbGF0ZSBtaWxrIiwgaWNvbjogWzIsIDhdLCB0eXBlOiAwLCBwaWM6ICJtaWxrQ2hvY29sYXRlIiB9LA0KICAgICAgeyBuYW1lOiAiUmFzcGJlcnJ5IG1pbGsiLCBpY29uOiBbMywgOF0sIHR5cGU6IDAsIHBpYzogIm1pbGtSYXNwYmVycnkiIH0sDQogICAgICB7IG5hbWU6ICJPcmFuZ2UgbWlsayIsIGljb246IFs0LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa09yYW5nZSIgfSwNCiAgICAgIHsgbmFtZTogIkNhcmFtZWwgbWlsayIsIGljb246IFs1LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa0NhcmFtZWwiIH0sDQogICAgICB7IG5hbWU6ICJCYW5hbmEgbWlsayIsIGljb246IFs2LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa0JhbmFuYSIgfSwNCiAgICAgIHsgbmFtZTogIkxpbWUgbWlsayIsIGljb246IFs3LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa0xpbWUiIH0sDQogICAgICB7IG5hbWU6ICJCbHVlYmVycnkgbWlsayIsIGljb246IFs4LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa0JsdWViZXJyeSIgfSwNCiAgICAgIHsgbmFtZTogIlN0cmF3YmVycnkgbWlsayIsIGljb246IFs5LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa1N0cmF3YmVycnkiIH0sDQogICAgICB7IG5hbWU6ICJWYW5pbGxhIG1pbGsiLCBpY29uOiBbMTAsIDhdLCB0eXBlOiAwLCBwaWM6ICJtaWxrVmFuaWxsYSIgfSwNCiAgICAgIHsgbmFtZTogIlplYnJhIG1pbGsiLCBpY29uOiBbMTAsIDddLCB0eXBlOiAxLCBwaWM6ICJtaWxrWmVicmEiIH0sDQogICAgICB7IG5hbWU6ICJDb3NtaWMgbWlsayIsIGljb246IFs5LCA3XSwgdHlwZTogMSwgcGljOiAibWlsa1N0YXJzIiB9LA0KICAgICAgeyBuYW1lOiAiRmxhbWluZyBtaWxrIiwgaWNvbjogWzgsIDddLCB0eXBlOiAxLCBwaWM6ICJtaWxrRmlyZSIgfSwNCiAgICAgIHsgbmFtZTogIlNhbmd1aW5lIG1pbGsiLCBpY29uOiBbNywgN10sIHR5cGU6IDEsIHBpYzogIm1pbGtCbG9vZCIgfSwNCiAgICAgIHsgbmFtZTogIk1pZGFzIG1pbGsiLCBpY29uOiBbNiwgN10sIHR5cGU6IDEsIHBpYzogIm1pbGtHb2xkIiB9LA0KICAgICAgeyBuYW1lOiAiTWlkbmlnaHQgbWlsayIsIGljb246IFs1LCA3XSwgdHlwZTogMSwgcGljOiAibWlsa0JsYWNrIiB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiR3JlZW4gaW5mZXJubyBtaWxrIiwNCiAgICAgICAgaWNvbjogWzQsIDddLA0KICAgICAgICB0eXBlOiAxLA0KICAgICAgICBwaWM6ICJtaWxrR3JlZW5GaXJlIiwNCiAgICAgIH0sDQogICAgICB7IG5hbWU6ICJGcm9zdGZpcmUgbWlsayIsIGljb246IFszLCA3XSwgdHlwZTogMSwgcGljOiAibWlsa0JsdWVGaXJlIiB9LA0KICAgICAgeyBuYW1lOiAiSG9uZXkgbWlsayIsIGljb246IFsyMSwgMjNdLCB0eXBlOiAwLCBwaWM6ICJtaWxrSG9uZXkiIH0sDQogICAgICB7IG5hbWU6ICJDb2ZmZWUgbWlsayIsIGljb246IFsyMiwgMjNdLCB0eXBlOiAwLCBwaWM6ICJtaWxrQ29mZmVlIiB9LA0KICAgICAgeyBuYW1lOiAiVGVhIG1pbGsiLCBpY29uOiBbMjMsIDIzXSwgdHlwZTogMCwgcGljOiAibWlsa1RlYSIgfSwNCiAgICAgIHsgbmFtZTogIkNvY29udXQgbWlsayIsIGljb246IFsyNCwgMjNdLCB0eXBlOiAwLCBwaWM6ICJtaWxrQ29jb251dCIgfSwNCiAgICAgIHsgbmFtZTogIkNoZXJyeSBtaWxrIiwgaWNvbjogWzI1LCAyM10sIHR5cGU6IDAsIHBpYzogIm1pbGtDaGVycnkiIH0sDQogICAgICB7IG5hbWU6ICJTb3kgbWlsayIsIGljb246IFsyNywgMjNdLCB0eXBlOiAxLCBwaWM6ICJtaWxrU295IiB9LA0KICAgICAgeyBuYW1lOiAiU3BpY2VkIG1pbGsiLCBpY29uOiBbMjYsIDIzXSwgdHlwZTogMCwgcGljOiAibWlsa1NwaWNlZCIgfSwNCiAgICAgIHsgbmFtZTogIk1hcGxlIG1pbGsiLCBpY29uOiBbMjgsIDIzXSwgdHlwZTogMCwgcGljOiAibWlsa01hcGxlIiB9LA0KICAgICAgeyBuYW1lOiAiTWludCBtaWxrIiwgaWNvbjogWzI5LCAyM10sIHR5cGU6IDAsIHBpYzogIm1pbGtNaW50IiB9LA0KICAgICAgeyBuYW1lOiAiTGljb3JpY2UgbWlsayIsIGljb246IFszMCwgMjNdLCB0eXBlOiAwLCBwaWM6ICJtaWxrTGljb3JpY2UiIH0sDQogICAgICB7IG5hbWU6ICJSb3NlIG1pbGsiLCBpY29uOiBbMzEsIDIzXSwgdHlwZTogMCwgcGljOiAibWlsa1Jvc2UiIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJEcmFnb25mcnVpdCBtaWxrIiwNCiAgICAgICAgaWNvbjogWzIxLCAyNF0sDQogICAgICAgIHR5cGU6IDAsDQogICAgICAgIHBpYzogIm1pbGtEcmFnb25mcnVpdCIsDQogICAgICB9LA0KICAgICAgeyBuYW1lOiAiTWVsb24gbWlsayIsIGljb246IFsyMiwgMjRdLCB0eXBlOiAwLCBwaWM6ICJtaWxrTWVsb24iIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJCbGFja2N1cnJhbnQgbWlsayIsDQogICAgICAgIGljb246IFsyMywgMjRdLA0KICAgICAgICB0eXBlOiAwLA0KICAgICAgICBwaWM6ICJtaWxrQmxhY2tjdXJyYW50IiwNCiAgICAgIH0sDQogICAgXTsNCg0KICAgIEdhbWUuTWlsa3MgPSBbXTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUuQWxsTWlsa3MubGVuZ3RoOyBpKyspIHsNCiAgICAgIEdhbWUuQWxsTWlsa3NbaV0uYm5hbWUgPSBHYW1lLkFsbE1pbGtzW2ldLm5hbWU7DQogICAgICBHYW1lLkFsbE1pbGtzW2ldLm5hbWUgPSBsb2MoR2FtZS5BbGxNaWxrc1tpXS5uYW1lKTsNCiAgICAgIEdhbWUuQWxsTWlsa3NbaV0ucGljICs9ICIucG5nIjsNCiAgICAgIGlmIChHYW1lLkFsbE1pbGtzW2ldLnR5cGUgPT0gMCkgew0KICAgICAgICBHYW1lLkFsbE1pbGtzW2ldLnJhbmsgPSBHYW1lLk1pbGtzLmxlbmd0aDsNCiAgICAgICAgR2FtZS5NaWxrcy5wdXNoKEdhbWUuQWxsTWlsa3NbaV0pOw0KICAgICAgfQ0KICAgIH0NCiAgICBHYW1lLk1pbGsgPSBHYW1lLk1pbGtzWzBdOw0KDQogICAgR2FtZS5tb3VzZVBvaW50ZXIgPSAwOyAvL3doZW4gMSwgZHJhdyB0aGUgbW91c2UgYXMgYSBwb2ludGVyIG9uIHRoZSBsZWZ0IHNjcmVlbg0KDQogICAgR2FtZS5jb29raWVPcmlnaW5YID0gMDsNCiAgICBHYW1lLmNvb2tpZU9yaWdpblkgPSAwOw0KICAgIEdhbWUuRHJhd0JhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBUaW1lci5jbGVhbigpOw0KICAgICAgLy9iYWNrZ3JvdW5kDQogICAgICBpZiAoIUdhbWUuQmFja2dyb3VuZCkgew0KICAgICAgICAvL2luaXQgc29tZSBzdHVmZg0KICAgICAgICBHYW1lLkJhY2tncm91bmQgPSBsKCJiYWNrZ3JvdW5kQ2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKTsNCiAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy53aWR0aCA9DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy5wYXJlbnROb2RlLm9mZnNldFdpZHRoOw0KICAgICAgICBHYW1lLkJhY2tncm91bmQuY2FudmFzLmhlaWdodCA9DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy5wYXJlbnROb2RlLm9mZnNldEhlaWdodDsNCiAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZCA9IGwoImJhY2tncm91bmRMZWZ0Q2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKTsNCiAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMud2lkdGggPQ0KICAgICAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQuY2FudmFzLnBhcmVudE5vZGUub2Zmc2V0V2lkdGg7DQogICAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQuY2FudmFzLmhlaWdodCA9DQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7DQogICAgICAgIC8vcHJlbG9hZCBhc2NlbmQgYW5pbWF0aW9uIGJpdHMgc28gdGhleSBzaG93IHVwIGluc3RhbnRseQ0KICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmdsb2JhbEFscGhhID0gMDsNCiAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5kcmF3SW1hZ2UoUGljKCJicm9rZW5Db29raWUucG5nIiksIDAsIDApOw0KICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmRyYXdJbWFnZShQaWMoImJyb2tlbkNvb2tpZUhhbG8ucG5nIiksIDAsIDApOw0KICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmRyYXdJbWFnZShQaWMoInN0YXJiZy5qcGciKSwgMCwgMCk7DQoNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMud2lkdGggPQ0KICAgICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy5wYXJlbnROb2RlLm9mZnNldFdpZHRoOw0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0ID0NCiAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7DQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMud2lkdGggPQ0KICAgICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMucGFyZW50Tm9kZS5vZmZzZXRXaWR0aDsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmNhbnZhcy5oZWlnaHQgPQ0KICAgICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7DQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICB2YXIgY3R4ID0gR2FtZS5MZWZ0QmFja2dyb3VuZDsNCg0KICAgICAgaWYgKEdhbWUuT25Bc2NlbmQpIHsNCiAgICAgICAgVGltZXIuY2xlYW4oKTsNCiAgICAgICAgLy9zdGFycnkgYmFja2dyb3VuZCBvbiBhc2NlbmQgc2NyZWVuDQogICAgICAgIHZhciB3ID0gR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy53aWR0aDsNCiAgICAgICAgdmFyIGggPSBHYW1lLkJhY2tncm91bmQuY2FudmFzLmhlaWdodDsNCiAgICAgICAgdmFyIGIgPSBHYW1lLmFzY2VuZGwuZ2V0Qm91bmRzKCk7DQogICAgICAgIHZhciB4ID0gKGIubGVmdCArIGIucmlnaHQpIC8gMjsNCiAgICAgICAgdmFyIHkgPSAoYi50b3AgKyBiLmJvdHRvbSkgLyAyOw0KICAgICAgICBHYW1lLkJhY2tncm91bmQuZ2xvYmFsQWxwaGEgPSAwLjU7DQogICAgICAgIHZhciBzID0gMSAqIEdhbWUuQXNjZW5kWm9vbSAqICgxICsgTWF0aC5jb3MoR2FtZS5UICogMC4wMDI3KSAqIDAuMDUpOw0KICAgICAgICBHYW1lLkJhY2tncm91bmQuZmlsbFBhdHRlcm4oDQogICAgICAgICAgUGljKCJzdGFyYmcuanBnIiksDQogICAgICAgICAgMCwNCiAgICAgICAgICAwLA0KICAgICAgICAgIHcsDQogICAgICAgICAgaCwNCiAgICAgICAgICAxMDI0ICogcywNCiAgICAgICAgICAxMDI0ICogcywNCiAgICAgICAgICB4ICsgR2FtZS5Bc2NlbmRPZmZYICogMC4yNSAqIHMsDQogICAgICAgICAgeSArIEdhbWUuQXNjZW5kT2ZmWSAqIDAuMjUgKiBzDQogICAgICAgICk7DQogICAgICAgIFRpbWVyLnRyYWNrKCJzdGFyIGxheWVyIDEiKTsNCiAgICAgICAgaWYgKEdhbWUucHJlZnMuZmFuY3kpIHsNCiAgICAgICAgICAvL2FkZGl0aW9uYWwgc3RhciBsYXllcg0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5nbG9iYWxBbHBoYSA9DQogICAgICAgICAgICAwLjUgKiAoMC41ICsgTWF0aC5zaW4oR2FtZS5UICogMC4wMikgKiAwLjMpOw0KICAgICAgICAgIHZhciBzID0gMiAqIEdhbWUuQXNjZW5kWm9vbSAqICgxICsgTWF0aC5zaW4oR2FtZS5UICogMC4wMDIpICogMC4wNyk7DQogICAgICAgICAgLy9HYW1lLkJhY2tncm91bmQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSdsaWdodGVyJzsNCiAgICAgICAgICBHYW1lLkJhY2tncm91bmQuZmlsbFBhdHRlcm4oDQogICAgICAgICAgICBQaWMoInN0YXJiZy5qcGciKSwNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgdywNCiAgICAgICAgICAgIGgsDQogICAgICAgICAgICAxMDI0ICogcywNCiAgICAgICAgICAgIDEwMjQgKiBzLA0KICAgICAgICAgICAgeCArIEdhbWUuQXNjZW5kT2ZmWCAqIDAuMjUgKiBzLA0KICAgICAgICAgICAgeSArIEdhbWUuQXNjZW5kT2ZmWSAqIDAuMjUgKiBzDQogICAgICAgICAgKTsNCiAgICAgICAgICAvL0dhbWUuQmFja2dyb3VuZC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249J3NvdXJjZS1vdmVyJzsNCiAgICAgICAgICBUaW1lci50cmFjaygic3RhciBsYXllciAyIik7DQoNCiAgICAgICAgICB4ID0geCArIEdhbWUuQXNjZW5kT2ZmWCAqIEdhbWUuQXNjZW5kWm9vbTsNCiAgICAgICAgICB5ID0geSArIEdhbWUuQXNjZW5kT2ZmWSAqIEdhbWUuQXNjZW5kWm9vbTsNCiAgICAgICAgICAvL3dpc3B5IG5lYnVsYSBhcm91bmQgdGhlIGNlbnRlcg0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5zYXZlKCk7DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmdsb2JhbEFscGhhID0gMC41Ow0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC50cmFuc2xhdGUoeCwgeSk7DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJsaWdodGVyIjsNCiAgICAgICAgICBHYW1lLkJhY2tncm91bmQucm90YXRlKEdhbWUuVCAqIDAuMDAxKTsNCiAgICAgICAgICBzID0gKDYwMCArIDE1MCAqIE1hdGguc2luKEdhbWUuVCAqIDAuMDA3KSkgKiBHYW1lLkFzY2VuZFpvb207DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmRyYXdJbWFnZSgNCiAgICAgICAgICAgIFBpYygiaGVhdmVuUmluZzEuanBnIiksDQogICAgICAgICAgICAtcyAvIDIsDQogICAgICAgICAgICAtcyAvIDIsDQogICAgICAgICAgICBzLA0KICAgICAgICAgICAgcw0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLnJvdGF0ZSgtR2FtZS5UICogMC4wMDE3KTsNCiAgICAgICAgICBzID0gKDYwMCArIDE1MCAqIE1hdGguc2luKEdhbWUuVCAqIDAuMDAzNykpICogR2FtZS5Bc2NlbmRab29tOw0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5kcmF3SW1hZ2UoDQogICAgICAgICAgICBQaWMoImhlYXZlblJpbmcyLmpwZyIpLA0KICAgICAgICAgICAgLXMgLyAyLA0KICAgICAgICAgICAgLXMgLyAyLA0KICAgICAgICAgICAgcywNCiAgICAgICAgICAgIHMNCiAgICAgICAgICApOw0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5yZXN0b3JlKCk7DQogICAgICAgICAgVGltZXIudHJhY2soIm5lYnVsYSIpOw0KDQogICAgICAgICAgLy9HYW1lLkJhY2tncm91bmQuZHJhd0ltYWdlKFBpYygnc2hhZGVkQm9yZGVycy5wbmcnKSwwLDAsdyxoKTsNCiAgICAgICAgICAvL1RpbWVyLnRyYWNrKCdib3JkZXInKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdmFyIGdvb2RCdWZmID0gMDsNCiAgICAgICAgdmFyIGJhZEJ1ZmYgPSAwOw0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuYnVmZnMpIHsNCiAgICAgICAgICBpZiAoR2FtZS5idWZmc1tpXS5hdXJhID09IDEpIGdvb2RCdWZmID0gMTsNCiAgICAgICAgICBpZiAoR2FtZS5idWZmc1tpXS5hdXJhID09IDIpIGJhZEJ1ZmYgPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuZHJhd1QgJSA1ID09IDApIHsNCiAgICAgICAgICBpZiAoZmFsc2UgJiYgR2FtZS5iZ1R5cGUgIT0gMCAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgew0KICAgICAgICAgICAgLy9sKCdiYWNrZ3JvdW5kQ2FudmFzJykuc3R5bGUuYmFja2dyb3VuZD0ndXJsKGltZy9zaGFkZWRCb3JkZXJzU29mdC5wbmcpIDBweCAwcHgsdXJsKGltZy9iZ1doZWF0LmpwZykgNTAlIDUwJSc7DQogICAgICAgICAgICAvL2woJ2JhY2tncm91bmRDYW52YXMnKS5zdHlsZS5iYWNrZ3JvdW5kU2l6ZT0nMTAwJSAxMDAlLGNvdmVyJzsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbCgiYmFja2dyb3VuZENhbnZhcyIpLnN0eWxlLmJhY2tncm91bmQgPSAidHJhbnNwYXJlbnQiOw0KICAgICAgICAgICAgR2FtZS5kZWZhdWx0QmcgPSAiYmdCbHVlIjsNCiAgICAgICAgICAgIEdhbWUuYmdSID0gMDsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJmb29scyIpIEdhbWUuZGVmYXVsdEJnID0gImJnTW9uZXkiOw0KICAgICAgICAgICAgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPCAxIHx8IEdhbWUucHJlZnMubm90U2NhcnkpIHsNCiAgICAgICAgICAgICAgR2FtZS5iZ1IgPSAwOw0KICAgICAgICAgICAgICBHYW1lLmJnID0gR2FtZS5kZWZhdWx0Qmc7DQogICAgICAgICAgICAgIEdhbWUuYmdGYWRlID0gR2FtZS5kZWZhdWx0Qmc7DQogICAgICAgICAgICB9IGVsc2UgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPj0gMSAmJiBHYW1lLmVsZGVyV3JhdGhEIDwgMikgew0KICAgICAgICAgICAgICBHYW1lLmJnUiA9IChHYW1lLmVsZGVyV3JhdGhEIC0gMSkgLyAxOw0KICAgICAgICAgICAgICBHYW1lLmJnID0gR2FtZS5kZWZhdWx0Qmc7DQogICAgICAgICAgICAgIEdhbWUuYmdGYWRlID0gImdyYW5kbWFzMSI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPj0gMiAmJiBHYW1lLmVsZGVyV3JhdGhEIDwgMykgew0KICAgICAgICAgICAgICBHYW1lLmJnUiA9IChHYW1lLmVsZGVyV3JhdGhEIC0gMikgLyAxOw0KICAgICAgICAgICAgICBHYW1lLmJnID0gImdyYW5kbWFzMSI7DQogICAgICAgICAgICAgIEdhbWUuYmdGYWRlID0gImdyYW5kbWFzMiI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPj0gMykgew0KICAgICAgICAgICAgICAvLyAmJiBHYW1lLmVsZGVyV3JhdGhEPDQpDQogICAgICAgICAgICAgIEdhbWUuYmdSID0gKEdhbWUuZWxkZXJXcmF0aEQgLSAzKSAvIDE7DQogICAgICAgICAgICAgIEdhbWUuYmcgPSAiZ3JhbmRtYXMyIjsNCiAgICAgICAgICAgICAgR2FtZS5iZ0ZhZGUgPSAiZ3JhbmRtYXMzIjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKEdhbWUuYmdUeXBlICE9IDAgJiYgR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEpIHsNCiAgICAgICAgICAgICAgR2FtZS5iZ1IgPSAwOw0KICAgICAgICAgICAgICBHYW1lLmJnID0gR2FtZS5CR3NCeUNob2ljZVtHYW1lLmJnVHlwZV0ucGljOw0KICAgICAgICAgICAgICBHYW1lLmJnRmFkZSA9IEdhbWUuYmc7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5maWxsUGF0dGVybigNCiAgICAgICAgICAgICAgUGljKEdhbWUuYmcgKyAiLmpwZyIpLA0KICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICBHYW1lLkJhY2tncm91bmQuY2FudmFzLndpZHRoLA0KICAgICAgICAgICAgICBHYW1lLkJhY2tncm91bmQuY2FudmFzLmhlaWdodCwNCiAgICAgICAgICAgICAgNTEyLA0KICAgICAgICAgICAgICA1MTIsDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIDANCiAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5iZ1IgPiAwKSB7DQogICAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5nbG9iYWxBbHBoYSA9IEdhbWUuYmdSOw0KICAgICAgICAgICAgICBHYW1lLkJhY2tncm91bmQuZmlsbFBhdHRlcm4oDQogICAgICAgICAgICAgICAgUGljKEdhbWUuYmdGYWRlICsgIi5qcGciKSwNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy53aWR0aCwNCiAgICAgICAgICAgICAgICBHYW1lLkJhY2tncm91bmQuY2FudmFzLmhlaWdodCwNCiAgICAgICAgICAgICAgICA1MTIsDQogICAgICAgICAgICAgICAgNTEyLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgMA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5kcmF3SW1hZ2UoDQogICAgICAgICAgICAgIFBpYygic2hhZGVkQm9yZGVyc1NvZnQucG5nIiksDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMud2lkdGgsDQogICAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0DQogICAgICAgICAgICApOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBUaW1lci50cmFjaygid2luZG93IGJhY2tncm91bmQiKTsNCg0KICAgICAgICAvL2NsZWFyDQogICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpOw0KICAgICAgICAvKmlmIChHYW1lLkFzY2VuZFRpbWVyPEdhbWUuQXNjZW5kQnJlYWtwb2ludCkgY3R4LmNsZWFyUmVjdCgwLDAsY3R4LmNhbnZhcy53aWR0aCxjdHguY2FudmFzLmhlaWdodCk7DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJY3R4Lmdsb2JhbEFscGhhPTAuMDU7DQoJCQkJCWN0eC5maWxsU3R5bGU9JyMwMDAnOw0KCQkJCQljdHguZmlsbFJlY3QoMCwwLGN0eC5jYW52YXMud2lkdGgsY3R4LmNhbnZhcy5oZWlnaHQpOw0KCQkJCQljdHguZ2xvYmFsQWxwaGE9MTsNCgkJCQkJT2xkQ2FudmFzRHJhd0ltYWdlLmFwcGx5KGN0eCxbY3R4LmNhbnZhcyxNYXRoLnJhbmRvbSgpKjQtMixNYXRoLnJhbmRvbSgpKjQtMi00XSk7DQoJCQkJCWN0eC5nbG9iYWxBbHBoYT0xOw0KCQkJCX0qLw0KICAgICAgICBUaW1lci5jbGVhbigpOw0KDQogICAgICAgIHZhciBzaG93RHJhZ29uID0gMDsNCiAgICAgICAgaWYgKEdhbWUuaGFzQnVmZigiRHJhZ29uZmxpZ2h0IikgfHwgR2FtZS5oYXNCdWZmKCJEcmFnb24gSGFydmVzdCIpKQ0KICAgICAgICAgIHNob3dEcmFnb24gPSAxOw0KDQogICAgICAgIEdhbWUuY29va2llT3JpZ2luWCA9IE1hdGguZmxvb3IoY3R4LmNhbnZhcy53aWR0aCAvIDIpOw0KICAgICAgICBHYW1lLmNvb2tpZU9yaWdpblkgPSBNYXRoLmZsb29yKGN0eC5jYW52YXMuaGVpZ2h0ICogMC40KTsNCg0KICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA9PSAwKSB7DQogICAgICAgICAgaWYgKEdhbWUucHJlZnMucGFydGljbGVzKSB7DQogICAgICAgICAgICAvL2ZhbGxpbmcgY29va2llcw0KICAgICAgICAgICAgdmFyIHBpYyA9ICIiOw0KICAgICAgICAgICAgdmFyIG9wYWNpdHkgPSAxOw0KICAgICAgICAgICAgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPD0gMS41IHx8IEdhbWUucHJlZnMubm90U2NhcnkpIHsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuY29va2llc1BzID49IDEwMDApIHBpYyA9ICJjb29raWVTaG93ZXIzLnBuZyI7DQogICAgICAgICAgICAgIGVsc2UgaWYgKEdhbWUuY29va2llc1BzID49IDUwMCkgcGljID0gImNvb2tpZVNob3dlcjIucG5nIjsNCiAgICAgICAgICAgICAgZWxzZSBpZiAoR2FtZS5jb29raWVzUHMgPj0gNTApIHBpYyA9ICJjb29raWVTaG93ZXIxLnBuZyI7DQogICAgICAgICAgICAgIGVsc2UgcGljID0gIiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAocGljICE9ICIiKSB7DQogICAgICAgICAgICAgIGlmIChHYW1lLmVsZGVyV3JhdGhEID49IDEgJiYgIUdhbWUucHJlZnMubm90U2NhcnkpDQogICAgICAgICAgICAgICAgb3BhY2l0eSA9IDEgLSAoTWF0aC5taW4oR2FtZS5lbGRlcldyYXRoRCwgMS41KSAtIDEpIC8gMC41Ow0KICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBvcGFjaXR5Ow0KICAgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoR2FtZS5UICogMikgJSA1MTI7DQogICAgICAgICAgICAgIGN0eC5maWxsUGF0dGVybigNCiAgICAgICAgICAgICAgICBQaWMocGljKSwNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgY3R4LmNhbnZhcy53aWR0aCwNCiAgICAgICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCArIDUxMiwNCiAgICAgICAgICAgICAgICA1MTIsDQogICAgICAgICAgICAgICAgNTEyLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgeQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy9zbm93DQogICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImNocmlzdG1hcyIpIHsNCiAgICAgICAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKEdhbWUuVCAqIDIuNSkgJSA1MTI7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNzU7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAibGlnaHRlciI7DQogICAgICAgICAgICAgIGN0eC5maWxsUGF0dGVybigNCiAgICAgICAgICAgICAgICBQaWMoInNub3cyLmpwZyIpLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICBjdHguY2FudmFzLndpZHRoLA0KICAgICAgICAgICAgICAgIGN0eC5jYW52YXMuaGVpZ2h0ICsgNTEyLA0KICAgICAgICAgICAgICAgIDUxMiwNCiAgICAgICAgICAgICAgICA1MTIsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICB5DQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAic291cmNlLW92ZXIiOw0KICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy9oZWFydHMNCiAgICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAidmFsZW50aW5lcyIpIHsNCiAgICAgICAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKEdhbWUuVCAqIDIuNSkgJSA1MTI7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQogICAgICAgICAgICAgIGN0eC5maWxsUGF0dGVybigNCiAgICAgICAgICAgICAgICBQaWMoImhlYXJ0U3Rvcm0ucG5nIiksDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgIGN0eC5jYW52YXMud2lkdGgsDQogICAgICAgICAgICAgICAgY3R4LmNhbnZhcy5oZWlnaHQgKyA1MTIsDQogICAgICAgICAgICAgICAgNTEyLA0KICAgICAgICAgICAgICAgIDUxMiwNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgIHkNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFRpbWVyLnRyYWNrKCJsZWZ0IGJhY2tncm91bmQiKTsNCg0KICAgICAgICAgICAgR2FtZS5wYXJ0aWNsZXNEcmF3KDApOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIFRpbWVyLnRyYWNrKCJwYXJ0aWNsZXMiKTsNCg0KICAgICAgICAgICAgLy9iaWcgY29va2llIHNoaW5lDQogICAgICAgICAgICB2YXIgcyA9IDUxMjsNCg0KICAgICAgICAgICAgdmFyIHggPSBHYW1lLmNvb2tpZU9yaWdpblg7DQogICAgICAgICAgICB2YXIgeSA9IEdhbWUuY29va2llT3JpZ2luWTsNCg0KICAgICAgICAgICAgdmFyIHIgPSBNYXRoLmZsb29yKChHYW1lLlQgKiAwLjUpICUgMzYwKTsNCiAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpOw0KICAgICAgICAgICAgY3R4LnJvdGF0ZSgociAvIDM2MCkgKiBNYXRoLlBJICogMik7DQogICAgICAgICAgICB2YXIgYWxwaGFNdWx0ID0gMTsNCiAgICAgICAgICAgIGlmIChHYW1lLmJnVHlwZSA9PSAyIHx8IEdhbWUuYmdUeXBlID09IDQpIGFscGhhTXVsdCA9IDAuNTsNCiAgICAgICAgICAgIHZhciBwaWMgPSAic2hpbmUucG5nIjsNCiAgICAgICAgICAgIGlmIChnb29kQnVmZikgew0KICAgICAgICAgICAgICBwaWMgPSAic2hpbmVHb2xkLnBuZyI7DQogICAgICAgICAgICAgIGFscGhhTXVsdCA9IDE7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGJhZEJ1ZmYpIHsNCiAgICAgICAgICAgICAgcGljID0gInNoaW5lUmVkLnBuZyI7DQogICAgICAgICAgICAgIGFscGhhTXVsdCA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZ29vZEJ1ZmYgJiYgR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJsaWdodGVyIjsNCiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNSAqIGFscGhhTXVsdDsNCiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKHBpYyksIC1zIC8gMiwgLXMgLyAyLCBzLCBzKTsNCiAgICAgICAgICAgIGN0eC5yb3RhdGUoKCgtciAqIDIpIC8gMzYwKSAqIE1hdGguUEkgKiAyKTsNCiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMjUgKiBhbHBoYU11bHQ7DQogICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYyhwaWMpLCAtcyAvIDIsIC1zIC8gMiwgcywgcyk7DQogICAgICAgICAgICBjdHgucmVzdG9yZSgpOw0KICAgICAgICAgICAgVGltZXIudHJhY2soInNoaW5lIik7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLlJlaW5jYXJuYXRlVGltZXIgPiAwKSB7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9DQogICAgICAgICAgICAgICAgMSAtIEdhbWUuUmVpbmNhcm5hdGVUaW1lciAvIEdhbWUuUmVpbmNhcm5hdGVEdXJhdGlvbjsNCiAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjMDAwIjsNCiAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTsNCiAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHNob3dEcmFnb24pIHsNCiAgICAgICAgICAgICAgLy9iaWcgZHJhZ29uDQogICAgICAgICAgICAgIHZhciBzID0gMzAwICogMiAqICgxICsgTWF0aC5zaW4oR2FtZS5UICogMC4wMTMpICogMC4xKTsNCiAgICAgICAgICAgICAgdmFyIHggPSBHYW1lLmNvb2tpZU9yaWdpblggLSBzIC8gMjsNCiAgICAgICAgICAgICAgdmFyIHkgPQ0KICAgICAgICAgICAgICAgIEdhbWUuY29va2llT3JpZ2luWSAtIHMgLyAoMS40ICsgMC4yICogTWF0aC5zaW4oR2FtZS5UICogMC4wMSkpOw0KICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYygiZHJhZ29uQkcucG5nIiksIHgsIHksIHMsIHMpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvL2JpZyBjb29raWUNCiAgICAgICAgICAgIGlmIChmYWxzZSkgew0KICAgICAgICAgICAgICAvL2Rvbid0IGRvIHRoYXQNCiAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgICAgdmFyIGFtb3VudCA9IE1hdGguZmxvb3IoR2FtZS5jb29raWVzKS50b1N0cmluZygpOw0KICAgICAgICAgICAgICB2YXIgZGlnaXRzID0gYW1vdW50Lmxlbmd0aDsNCiAgICAgICAgICAgICAgdmFyIHNwYWNlID0gMDsNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaWdpdHM7IGkrKykgew0KICAgICAgICAgICAgICAgIHZhciBzID0gMTYgKiAoZGlnaXRzIC0gaSk7DQogICAgICAgICAgICAgICAgdmFyIG51bSA9IHBhcnNlSW50KGFtb3VudFtpXSk7DQogICAgICAgICAgICAgICAgaWYgKGkgPiAwKSBzcGFjZSAtPSAocyAqICgxIC0gbnVtIC8gMTApKSAvIDI7DQogICAgICAgICAgICAgICAgaWYgKGkgPT0gMCAmJiBudW0gPiAxKSBzcGFjZSArPSBzICogMC4xOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBudW07IGlpKyspIHsNCiAgICAgICAgICAgICAgICAgIHZhciB4ID0gR2FtZS5jb29raWVPcmlnaW5YOw0KICAgICAgICAgICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblk7DQogICAgICAgICAgICAgICAgICB2YXIgc3BpbiA9DQogICAgICAgICAgICAgICAgICAgIEdhbWUuVCAqICgwLjAwNSArIGkgKiAwLjAwMSkgKyBpICsgKGlpIC8gbnVtKSAqIE1hdGguUEkgKiAyOw0KICAgICAgICAgICAgICAgICAgeCArPSBNYXRoLnNpbihzcGluKSAqIHNwYWNlOw0KICAgICAgICAgICAgICAgICAgeSArPSBNYXRoLmNvcyhzcGluKSAqIHNwYWNlOw0KICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgICAgUGljKCJwZXJmZWN0Q29va2llLnBuZyIpLA0KICAgICAgICAgICAgICAgICAgICB4IC0gcyAvIDIsDQogICAgICAgICAgICAgICAgICAgIHkgLSBzIC8gMiwNCiAgICAgICAgICAgICAgICAgICAgcywNCiAgICAgICAgICAgICAgICAgICAgcw0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3BhY2UgKz0gcyAvIDI7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQogICAgICAgICAgICAgIHZhciBzID0gMjU2ICogR2FtZS5CaWdDb29raWVTaXplOw0KICAgICAgICAgICAgICB2YXIgeCA9IEdhbWUuY29va2llT3JpZ2luWDsNCiAgICAgICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblk7DQogICAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KQ0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoDQogICAgICAgICAgICAgICAgICBQaWMoImNvb2tpZVNoYWRvdy5wbmciKSwNCiAgICAgICAgICAgICAgICAgIHggLSBzIC8gMiwNCiAgICAgICAgICAgICAgICAgIHkgLSBzIC8gMiArIDIwLA0KICAgICAgICAgICAgICAgICAgcywNCiAgICAgICAgICAgICAgICAgIHMNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpOw0KICAgICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImVhc3RlciIpIHsNCiAgICAgICAgICAgICAgICB2YXIgbmVzdFcgPSAzMDQgKiAwLjk4ICogR2FtZS5CaWdDb29raWVTaXplOw0KICAgICAgICAgICAgICAgIHZhciBuZXN0SCA9IDE2MSAqIDAuOTggKiBHYW1lLkJpZ0Nvb2tpZVNpemU7DQogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgIFBpYygibmVzdC5wbmciKSwNCiAgICAgICAgICAgICAgICAgIC1uZXN0VyAvIDIsDQogICAgICAgICAgICAgICAgICAtbmVzdEggLyAyICsgMTMwLA0KICAgICAgICAgICAgICAgICAgbmVzdFcsDQogICAgICAgICAgICAgICAgICBuZXN0SA0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLy9jdHgucm90YXRlKCgoR2FtZS5zdGFydERhdGUlMzYwKS8zNjApKk1hdGguUEkqMik7DQogICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKCJwZXJmZWN0Q29va2llLnBuZyIpLCAtcyAvIDIsIC1zIC8gMiwgcywgcyk7DQoNCiAgICAgICAgICAgICAgaWYgKGdvb2RCdWZmICYmIEdhbWUucHJlZnMucGFydGljbGVzKSB7DQogICAgICAgICAgICAgICAgLy9zcGFya2xlDQogICAgICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJsaWdodGVyIjsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE7IGkrKykgew0KICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gTWF0aC5yYW5kb20oKSAqIDAuNjUgKyAwLjE7DQogICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IE1hdGgucmFuZG9tKCkgKiAzMCArIDU7DQogICAgICAgICAgICAgICAgICB2YXIgYSA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMjsNCiAgICAgICAgICAgICAgICAgIHZhciBkID0gKHMgKiAwLjkgKiBNYXRoLnJhbmRvbSgpKSAvIDI7DQogICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICAgICAgICBQaWMoImdsaW50LmpwZyIpLA0KICAgICAgICAgICAgICAgICAgICAtc2l6ZSAvIDIgKyBNYXRoLnNpbihhKSAqIGQsDQogICAgICAgICAgICAgICAgICAgIC1zaXplIC8gMiArIE1hdGguY29zKGEpICogZCwNCiAgICAgICAgICAgICAgICAgICAgc2l6ZSwNCiAgICAgICAgICAgICAgICAgICAgc2l6ZQ0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOw0KICAgICAgICAgICAgICBUaW1lci50cmFjaygiYmlnIGNvb2tpZSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy9ubyBwYXJ0aWNsZXMNCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIC8vYmlnIGNvb2tpZSBzaGluZQ0KICAgICAgICAgICAgdmFyIHMgPSA1MTI7DQogICAgICAgICAgICB2YXIgeCA9IEdhbWUuY29va2llT3JpZ2luWCAtIHMgLyAyOw0KICAgICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblkgLSBzIC8gMjsNCiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNTsNCiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKCJzaGluZS5wbmciKSwgeCwgeSwgcywgcyk7DQoNCiAgICAgICAgICAgIGlmIChzaG93RHJhZ29uKSB7DQogICAgICAgICAgICAgIC8vYmlnIGRyYWdvbg0KICAgICAgICAgICAgICB2YXIgcyA9IDMwMCAqIDIgKiAoMSArIE1hdGguc2luKEdhbWUuVCAqIDAuMDEzKSAqIDAuMSk7DQogICAgICAgICAgICAgIHZhciB4ID0gR2FtZS5jb29raWVPcmlnaW5YIC0gcyAvIDI7DQogICAgICAgICAgICAgIHZhciB5ID0NCiAgICAgICAgICAgICAgICBHYW1lLmNvb2tpZU9yaWdpblkgLSBzIC8gKDEuNCArIDAuMiAqIE1hdGguc2luKEdhbWUuVCAqIDAuMDEpKTsNCiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShQaWMoImRyYWdvbkJHLnBuZyIpLCB4LCB5LCBzLCBzKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9iaWcgY29va2llDQogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgdmFyIHMgPSAyNTYgKiBHYW1lLkJpZ0Nvb2tpZVNpemU7DQogICAgICAgICAgICB2YXIgeCA9IEdhbWUuY29va2llT3JpZ2luWCAtIHMgLyAyOw0KICAgICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblkgLSBzIC8gMjsNCiAgICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KQ0KICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYygiY29va2llU2hhZG93LnBuZyIpLCB4LCB5ICsgMjAsIHMsIHMpOw0KICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShQaWMoInBlcmZlY3RDb29raWUucG5nIiksIHgsIHksIHMsIHMpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vY3Vyc29ycw0KICAgICAgICAgIGlmIChHYW1lLnByZWZzLmN1cnNvcnMpIHsNCiAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICBjdHgudHJhbnNsYXRlKEdhbWUuY29va2llT3JpZ2luWCwgR2FtZS5jb29raWVPcmlnaW5ZKTsNCiAgICAgICAgICAgIHZhciBwaWMgPSBQaWMoImN1cnNvci5wbmciKTsNCiAgICAgICAgICAgIHZhciBmYW5jeSA9IEdhbWUucHJlZnMuZmFuY3k7DQoNCiAgICAgICAgICAgIGlmIChzaG93RHJhZ29uKSBjdHguZ2xvYmFsQWxwaGEgPSAwLjI1Ow0KICAgICAgICAgICAgdmFyIGFtb3VudCA9IEdhbWUuT2JqZWN0c1siQ3Vyc29yIl0uYW1vdW50Ow0KICAgICAgICAgICAgLy92YXIgc3BlPS0xOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKykgew0KICAgICAgICAgICAgICB2YXIgbiA9IE1hdGguZmxvb3IoaSAvIDUwKTsNCiAgICAgICAgICAgICAgLy92YXIgYT0oKGkrMC41Km4pJTUwKS81MDsNCiAgICAgICAgICAgICAgdmFyIHcgPSAwOw0KICAgICAgICAgICAgICBpZiAoZmFuY3kpDQogICAgICAgICAgICAgICAgdyA9IE1hdGguc2luKA0KICAgICAgICAgICAgICAgICAgR2FtZS5UICogMC4wMjUgKyAoKChpICsgbiAqIDEyKSAlIDI1KSAvIDI1KSAqIE1hdGguUEkgKiAyDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgaWYgKHcgPiAwLjk5NykgdyA9IDEuNTsNCiAgICAgICAgICAgICAgZWxzZSBpZiAodyA+IDAuOTk0KSB3ID0gMC41Ow0KICAgICAgICAgICAgICBlbHNlIHcgPSAwOw0KICAgICAgICAgICAgICB3ICo9IC00Ow0KICAgICAgICAgICAgICBpZiAoZmFuY3kpIHcgKz0gTWF0aC5zaW4oKChuICsgR2FtZS5UICogMC4wMSkgKiBNYXRoLlBJKSAvIDIpICogNDsNCiAgICAgICAgICAgICAgdmFyIHggPSAwOw0KICAgICAgICAgICAgICB2YXIgeSA9IDE0MCAvKiAqR2FtZS5CaWdDb29raWVTaXplKi8gKyBuICogMTYgKyB3IC0gMTY7DQoNCiAgICAgICAgICAgICAgdmFyIHJvdCA9IDcuMjsgLy8oMS81MCkqMzYwDQogICAgICAgICAgICAgIGlmIChpID09IDAgJiYgZmFuY3kpIHJvdCAtPSBHYW1lLlQgKiAwLjE7DQogICAgICAgICAgICAgIGlmIChpICUgNTAgPT0gMCkgcm90ICs9IDcuMiAvIDI7DQogICAgICAgICAgICAgIGN0eC5yb3RhdGUoKHJvdCAvIDM2MCkgKiBNYXRoLlBJICogMik7DQogICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UocGljLCAwLCAwLCAzMiwgMzIsIHgsIHksIDMyLCAzMik7DQogICAgICAgICAgICAgIC8vY3R4LmRyYXdJbWFnZShwaWMsMzIqKGk9PXNwZSksMCwzMiwzMix4LHksMzIsMzIpOw0KDQogICAgICAgICAgICAgIC8qaWYgKGk9PXNwZSkNCgkJCQkJCQl7DQoJCQkJCQkJCXkrPTE2Ow0KCQkJCQkJCQl4PUdhbWUuY29va2llT3JpZ2luWCtNYXRoLnNpbigtKChyLTUpLzM2MCkqTWF0aC5QSSoyKSp5Ow0KCQkJCQkJCQl5PUdhbWUuY29va2llT3JpZ2luWStNYXRoLmNvcygtKChyLTUpLzM2MCkqTWF0aC5QSSoyKSp5Ow0KCQkJCQkJCQlpZiAoR2FtZS5DYW5DbGljayAmJiBjdHggJiYgTWF0aC5hYnMoR2FtZS5tb3VzZVgteCk8MTYgJiYgTWF0aC5hYnMoR2FtZS5tb3VzZVkteSk8MTYpIEdhbWUubW91c2VQb2ludGVyPTE7DQoJCQkJCQkJfSovDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjdHgucmVzdG9yZSgpOw0KICAgICAgICAgICAgVGltZXIudHJhY2soImN1cnNvcnMiKTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdmFyIHRCYXNlID0gTWF0aC5tYXgoDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgKEdhbWUuQXNjZW5kVGltZXIgLSBHYW1lLkFzY2VuZEJyZWFrcG9pbnQpIC8NCiAgICAgICAgICAgICAgKEdhbWUuQXNjZW5kRHVyYXRpb24gLSBHYW1lLkFzY2VuZEJyZWFrcG9pbnQpDQogICAgICAgICAgKTsNCiAgICAgICAgICAvL2JpZyBjcnVtYmxpbmcgY29va2llDQogICAgICAgICAgLy92YXIgdD0oMypNYXRoLnBvdyh0QmFzZSwyKS0yKk1hdGgucG93KHRCYXNlLDMpKTsvL1MgY3VydmUNCiAgICAgICAgICB2YXIgdCA9IE1hdGgucG93KHRCYXNlLCAwLjUpOw0KDQogICAgICAgICAgdmFyIHNoYWtlID0gMDsNCiAgICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA8IEdhbWUuQXNjZW5kQnJlYWtwb2ludCkgew0KICAgICAgICAgICAgc2hha2UgPSBHYW1lLkFzY2VuZFRpbWVyIC8gR2FtZS5Bc2NlbmRCcmVha3BvaW50Ow0KICAgICAgICAgIH0NCiAgICAgICAgICAvL2Vsc2Uge3NoYWtlPTEtdDt9DQoNCiAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KDQogICAgICAgICAgdmFyIHggPSBHYW1lLmNvb2tpZU9yaWdpblg7DQogICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblk7DQoNCiAgICAgICAgICB4ICs9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogMTAgKiBzaGFrZTsNCiAgICAgICAgICB5ICs9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogMTAgKiBzaGFrZTsNCg0KICAgICAgICAgIHZhciBzID0gMTsNCiAgICAgICAgICBpZiAodEJhc2UgPiAwKSB7DQogICAgICAgICAgICBjdHguc2F2ZSgpOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMSAtIE1hdGgucG93KHQsIDAuNSk7DQogICAgICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJsaWdodGVyIjsNCiAgICAgICAgICAgIGN0eC5yb3RhdGUoR2FtZS5UICogMC4wMDcpOw0KICAgICAgICAgICAgcyA9IDAuNSArIE1hdGgucG93KHRCYXNlLCAwLjYpICogMTsNCiAgICAgICAgICAgIHZhciBzMiA9IDYwMCAqIHM7DQogICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYygiaGVhdmVuUmluZzEuanBnIiksIC1zMiAvIDIsIC1zMiAvIDIsIHMyLCBzMik7DQogICAgICAgICAgICBjdHgucm90YXRlKC1HYW1lLlQgKiAwLjAwMik7DQogICAgICAgICAgICBzID0gMC41ICsgTWF0aC5wb3coMSAtIHRCYXNlLCAwLjQpICogMTsNCiAgICAgICAgICAgIHMyID0gNjAwICogczsNCiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKCJoZWF2ZW5SaW5nMi5qcGciKSwgLXMyIC8gMiwgLXMyIC8gMiwgczIsIHMyKTsNCiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcyA9IDI1NjsgLy8qR2FtZS5CaWdDb29raWVTaXplOw0KDQogICAgICAgICAgY3R4LnNhdmUoKTsNCiAgICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpOw0KICAgICAgICAgIGN0eC5yb3RhdGUodCAqIC0wLjEgKiBNYXRoLlBJICogMik7DQoNCiAgICAgICAgICB2YXIgY2h1bmtzID0gew0KICAgICAgICAgICAgMDogNywNCiAgICAgICAgICAgIDE6IDYsDQogICAgICAgICAgICAyOiAzLA0KICAgICAgICAgICAgMzogMiwNCiAgICAgICAgICAgIDQ6IDgsDQogICAgICAgICAgICA1OiAxLA0KICAgICAgICAgICAgNjogOSwNCiAgICAgICAgICAgIDc6IDUsDQogICAgICAgICAgICA4OiAwLA0KICAgICAgICAgICAgOTogNCwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIHMgKj0gdCAvIDIgKyAxOw0KICAgICAgICAgIC8qY3R4Lmdsb2JhbEFscGhhPSgxLXQpKjAuMzM7DQoJCQkJCWZvciAodmFyIGk9MDtpPDEwO2krKykNCgkJCQkJew0KCQkJCQkJdmFyIGQ9KHQtMC4yKSooODArKChpKzIpJTMpKjQwKTsNCgkJCQkJCWN0eC5kcmF3SW1hZ2UoUGljKCdicm9rZW5Db29raWUucG5nJyksMjU2KihjaHVua3NbaV0pLDAsMjU2LDI1Niwtcy8yK01hdGguc2luKC0oKChjaHVua3NbaV0rNCklMTApLzEwKSpNYXRoLlBJKjIpKmQsLXMvMitNYXRoLmNvcygtKCgoY2h1bmtzW2ldKzQpJTEwKS8xMCkqTWF0aC5QSSoyKSpkLHMscyk7DQoJCQkJCX0NCgkJCQkJY3R4Lmdsb2JhbEFscGhhPSgxLXQpKjAuNjY7DQoJCQkJCWZvciAodmFyIGk9MDtpPDEwO2krKykNCgkJCQkJew0KCQkJCQkJdmFyIGQ9KHQtMC4xKSooODArKChpKzIpJTMpKjQwKTsNCgkJCQkJCWN0eC5kcmF3SW1hZ2UoUGljKCdicm9rZW5Db29raWUucG5nJyksMjU2KihjaHVua3NbaV0pLDAsMjU2LDI1Niwtcy8yK01hdGguc2luKC0oKChjaHVua3NbaV0rNCklMTApLzEwKSpNYXRoLlBJKjIpKmQsLXMvMitNYXRoLmNvcygtKCgoY2h1bmtzW2ldKzQpJTEwKS8xMCkqTWF0aC5QSSoyKSpkLHMscyk7DQoJCQkJCX0qLw0KICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEgLSB0Ow0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgew0KICAgICAgICAgICAgdmFyIGQgPSB0ICogKDgwICsgKChpICsgMikgJSAzKSAqIDQwKTsNCiAgICAgICAgICAgIHZhciB4MiA9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogNSAqIHNoYWtlOw0KICAgICAgICAgICAgdmFyIHkyID0gKE1hdGgucmFuZG9tKCkgKiAyIC0gMSkgKiA1ICogc2hha2U7DQogICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICBQaWMoImJyb2tlbkNvb2tpZS5wbmciKSwNCiAgICAgICAgICAgICAgMjU2ICogY2h1bmtzW2ldLA0KICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAyNTYsDQogICAgICAgICAgICAgIDI1NiwNCiAgICAgICAgICAgICAgLXMgLyAyICsNCiAgICAgICAgICAgICAgICBNYXRoLnNpbigtKCgoY2h1bmtzW2ldICsgNCkgJSAxMCkgLyAxMCkgKiBNYXRoLlBJICogMikgKiBkICsNCiAgICAgICAgICAgICAgICB4MiwNCiAgICAgICAgICAgICAgLXMgLyAyICsNCiAgICAgICAgICAgICAgICBNYXRoLmNvcygtKCgoY2h1bmtzW2ldICsgNCkgJSAxMCkgLyAxMCkgKiBNYXRoLlBJICogMikgKiBkICsNCiAgICAgICAgICAgICAgICB5MiwNCiAgICAgICAgICAgICAgcywNCiAgICAgICAgICAgICAgcw0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdmFyIGJyb2tlbkhhbG8gPSAxIC0gTWF0aC5taW4odCAvICgxIC8gMyksIDEgLyAzKSAqIDM7DQogICAgICAgICAgaWYgKEdhbWUuQXNjZW5kVGltZXIgPCBHYW1lLkFzY2VuZEJyZWFrcG9pbnQpDQogICAgICAgICAgICBicm9rZW5IYWxvID0gR2FtZS5Bc2NlbmRUaW1lciAvIEdhbWUuQXNjZW5kQnJlYWtwb2ludDsNCiAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBicm9rZW5IYWxvOw0KICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoDQogICAgICAgICAgICBQaWMoImJyb2tlbkNvb2tpZUhhbG8ucG5nIiksDQogICAgICAgICAgICAtcyAvIDEuMzMzMywNCiAgICAgICAgICAgIC1zIC8gMS4zMzMzLA0KICAgICAgICAgICAgcyAqIDEuNSwNCiAgICAgICAgICAgIHMgKiAxLjUNCiAgICAgICAgICApOw0KDQogICAgICAgICAgY3R4LnJlc3RvcmUoKTsNCg0KICAgICAgICAgIC8vZmxhcmVzDQogICAgICAgICAgdmFyIG4gPSA5Ow0KICAgICAgICAgIHZhciB0ID0gR2FtZS5Bc2NlbmRUaW1lciAvIEdhbWUuQXNjZW5kQnJlYWtwb2ludDsNCiAgICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA8IEdhbWUuQXNjZW5kQnJlYWtwb2ludCkgew0KICAgICAgICAgICAgY3R4LnNhdmUoKTsNCiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoeCwgeSk7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgew0KICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcigodCAvIDMpICogbiAqIDMgKyBpICogMi43KSAlIDIpIHsNCiAgICAgICAgICAgICAgICB2YXIgdDIgPSBNYXRoLnBvdygoKHQgLyAzKSAqIG4gKiAzICsgaSAqIDIuNykgJSAxLCAxLjUpOw0KICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9ICgxIC0gdCkgKiAoR2FtZS5kcmF3VCAlIDIgPT0gMCA/IDAuNSA6IDEpOw0KICAgICAgICAgICAgICAgIHZhciBzdyA9ICgxIC0gdDIgKiAwLjUpICogOTY7DQogICAgICAgICAgICAgICAgdmFyIHNoID0gKDAuNSArIHQyICogMS41KSAqIDk2Ow0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoDQogICAgICAgICAgICAgICAgICBQaWMoInNoaW5lU3Bva2UucG5nIiksDQogICAgICAgICAgICAgICAgICAtc3cgLyAyLA0KICAgICAgICAgICAgICAgICAgLXNoIC0gMzIgLSAoMSAtIHQyKSAqIDI1NiwNCiAgICAgICAgICAgICAgICAgIHN3LA0KICAgICAgICAgICAgICAgICAgc2gNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGN0eC5yb3RhdGUoKE1hdGguUEkgKiAyKSAvIG4pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvL2ZsYXNoIGF0IGJyZWFrcG9pbnQNCiAgICAgICAgICBpZiAodEJhc2UgPCAwLjEgJiYgdEJhc2UgPiAwKSB7DQogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxIC0gdEJhc2UgLyAwLjE7DQogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gIiNmZmYiOw0KICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTsNCiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICh0QmFzZSA+IDAuOCkgew0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gKHRCYXNlIC0gMC44KSAvIDAuMjsNCiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAiIzAwMCI7DQogICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvL21pbGsgYW5kIG1pbGsgYWNjZXNzb3JpZXMNCiAgICAgICAgaWYgKEdhbWUucHJlZnMubWlsaykgew0KICAgICAgICAgIHZhciB3aWR0aCA9IGN0eC5jYW52YXMud2lkdGg7DQogICAgICAgICAgdmFyIGhlaWdodCA9IGN0eC5jYW52YXMuaGVpZ2h0Ow0KICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcigNCiAgICAgICAgICAgIChHYW1lLlQgKiAyIC0gKEdhbWUubWlsa0ggLSBHYW1lLm1pbGtIZCkgKiAyMDAwICsgNDgwICogMikgJSA0ODANCiAgICAgICAgICApOyAvL01hdGguZmxvb3IoKEdhbWUuVCoyK01hdGguc2luKEdhbWUuVCowLjEpKjIrTWF0aC5zaW4oR2FtZS5UKjAuMDMpKjItKEdhbWUubWlsa0gtR2FtZS5taWxrSGQpKjIwMDArNDgwKjIpJTQ4MCk7DQogICAgICAgICAgdmFyIHkgPSBHYW1lLm1pbGtIZCAqIGhlaWdodDsgLy8oKChHYW1lLm1pbGtIZCkqY3R4LmNhbnZhcy5oZWlnaHQpKigxKzAuMDUqKE1hdGguc2luKEdhbWUuVCowLjAxNykvMiswLjUpKSk7DQogICAgICAgICAgdmFyIGEgPSAxOw0KICAgICAgICAgIGlmIChHYW1lLkFzY2VuZFRpbWVyID4gMCkgew0KICAgICAgICAgICAgeSAqPSAxIC0gTWF0aC5wb3coR2FtZS5Bc2NlbmRUaW1lciAvIEdhbWUuQXNjZW5kQnJlYWtwb2ludCwgMikgKiAyOw0KICAgICAgICAgICAgYSAqPSAxIC0gTWF0aC5wb3coR2FtZS5Bc2NlbmRUaW1lciAvIEdhbWUuQXNjZW5kQnJlYWtwb2ludCwgMikgKiAyOw0KICAgICAgICAgIH0gZWxzZSBpZiAoR2FtZS5SZWluY2FybmF0ZVRpbWVyID4gMCkgew0KICAgICAgICAgICAgeSAqPQ0KICAgICAgICAgICAgICAxIC0NCiAgICAgICAgICAgICAgTWF0aC5wb3coDQogICAgICAgICAgICAgICAgMSAtIEdhbWUuUmVpbmNhcm5hdGVUaW1lciAvIEdhbWUuUmVpbmNhcm5hdGVEdXJhdGlvbiwNCiAgICAgICAgICAgICAgICAyDQogICAgICAgICAgICAgICkgKg0KICAgICAgICAgICAgICAgIDI7DQogICAgICAgICAgICBhICo9DQogICAgICAgICAgICAgIDEgLQ0KICAgICAgICAgICAgICBNYXRoLnBvdygNCiAgICAgICAgICAgICAgICAxIC0gR2FtZS5SZWluY2FybmF0ZVRpbWVyIC8gR2FtZS5SZWluY2FybmF0ZUR1cmF0aW9uLA0KICAgICAgICAgICAgICAgIDINCiAgICAgICAgICAgICAgKSAqDQogICAgICAgICAgICAgICAgMjsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoR2FtZS5UT1lTKSB7DQogICAgICAgICAgICAvL2dvbGx5DQogICAgICAgICAgICBpZiAoIUdhbWUuVG95KSB7DQogICAgICAgICAgICAgIEdhbWUudG95cyA9IFtdOw0KICAgICAgICAgICAgICBHYW1lLnRveXNUeXBlID0gY2hvb3NlKFsxLCAyXSk7DQogICAgICAgICAgICAgIEdhbWUuVG95ID0gZnVuY3Rpb24gKHgsIHkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlkID0gR2FtZS50b3lzLmxlbmd0aDsNCiAgICAgICAgICAgICAgICB0aGlzLnggPSB4Ow0KICAgICAgICAgICAgICAgIHRoaXMueSA9IHk7DQogICAgICAgICAgICAgICAgdGhpcy54ZCA9IE1hdGgucmFuZG9tKCkgKiAxMCAtIDU7DQogICAgICAgICAgICAgICAgdGhpcy55ZCA9IE1hdGgucmFuZG9tKCkgKiAxMCAtIDU7DQogICAgICAgICAgICAgICAgdGhpcy5yID0gTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyOw0KICAgICAgICAgICAgICAgIHRoaXMucmQgPSBNYXRoLnJhbmRvbSgpICogMC4xIC0gMC4wNTsNCiAgICAgICAgICAgICAgICB2YXIgdiA9IE1hdGgucmFuZG9tKCk7DQogICAgICAgICAgICAgICAgdmFyIGEgPSAwLjU7DQogICAgICAgICAgICAgICAgdmFyIGIgPSAwLjU7DQogICAgICAgICAgICAgICAgaWYgKHYgPD0gYSkgdiA9IGIgLSBiICogTWF0aC5wb3coMSAtIHYgLyBhLCAzKTsNCiAgICAgICAgICAgICAgICBlbHNlIHYgPSBiICsgKDEgLSBiKSAqIE1hdGgucG93KCh2IC0gYSkgLyAoMSAtIGEpLCAzKTsNCiAgICAgICAgICAgICAgICB0aGlzLnMgPSAoR2FtZS50b3lzVHlwZSA9PSAxID8gNjQgOiA0OCkgKiAoMC4xICsgdiAqIDEuOSk7DQogICAgICAgICAgICAgICAgaWYgKEdhbWUudG95c1R5cGUgPT0gMikgdGhpcy5zID0gdGhpcy5pZCAlIDEwID09IDEgPyA5NiA6IDQ4Ow0KICAgICAgICAgICAgICAgIHRoaXMuc3QgPSB0aGlzLnM7DQogICAgICAgICAgICAgICAgdGhpcy5zID0gMDsNCiAgICAgICAgICAgICAgICB2YXIgY29va2llcyA9IFtbMTAsIDBdXTsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXMpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSBHYW1lLlVwZ3JhZGVzW2ldOw0KICAgICAgICAgICAgICAgICAgaWYgKGNvb2tpZS5ib3VnaHQgPiAwICYmIGNvb2tpZS5wb29sID09ICJjb29raWUiKQ0KICAgICAgICAgICAgICAgICAgICBjb29raWVzLnB1c2goY29va2llLmljb24pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmljb24gPSBjaG9vc2UoY29va2llcyk7DQogICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdGhpcy5sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgICAgICAgICAgdGhpcy5sLmlubmVySFRNTCA9IHRoaXMuaWQ7DQogICAgICAgICAgICAgICAgdGhpcy5sLnN0eWxlLmNzc1RleHQgPQ0KICAgICAgICAgICAgICAgICAgImN1cnNvcjpwb2ludGVyO2JvcmRlci1yYWRpdXM6IiArDQogICAgICAgICAgICAgICAgICB0aGlzLnMgLyAyICsNCiAgICAgICAgICAgICAgICAgICJweDtvcGFjaXR5OjA7d2lkdGg6IiArDQogICAgICAgICAgICAgICAgICB0aGlzLnMgKw0KICAgICAgICAgICAgICAgICAgInB4O2hlaWdodDoiICsNCiAgICAgICAgICAgICAgICAgIHRoaXMucyArDQogICAgICAgICAgICAgICAgICAicHg7YmFja2dyb3VuZDojOTk5O3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MHB4O3RvcDowcHg7ei1pbmRleDoxMDAwMDAwMDt0cmFuc2Zvcm06dHJhbnNsYXRlKC0xMDAwcHgsLTEwMDBweCk7IjsNCiAgICAgICAgICAgICAgICBsKCJzZWN0aW9uTGVmdCIpLmFwcGVuZENoaWxkKHRoaXMubCk7DQogICAgICAgICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICAgICAgICB0aGlzLmwsDQogICAgICAgICAgICAgICAgICAibW91c2Vkb3duIiwNCiAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAod2hhdCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgIHdoYXQuZHJhZ2dlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICB9KSh0aGlzKQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICAgICAgICB0aGlzLmwsDQogICAgICAgICAgICAgICAgICAibW91c2V1cCIsDQogICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICB3aGF0LmRyYWdnZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgIH0pKHRoaXMpDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBHYW1lLnRveXMucHVzaCh0aGlzKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgZm9yICgNCiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7DQogICAgICAgICAgICAgICAgaSA8DQogICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTUgKyAoR2FtZS50b3lzVHlwZSA9PSAxID8gNSA6IDMwKSk7DQogICAgICAgICAgICAgICAgaSsrDQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIG5ldyBHYW1lLlRveSgNCiAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiB3aWR0aCwNCiAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiBoZWlnaHQgKiAwLjMNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjU7DQogICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUudG95cykgew0KICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLnRveXNbaV07DQogICAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUobWUueCwgbWUueSk7DQogICAgICAgICAgICAgIGN0eC5yb3RhdGUobWUucik7DQogICAgICAgICAgICAgIGlmIChHYW1lLnRveXNUeXBlID09IDEpDQogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgIFBpYygic21hbGxDb29raWVzLnBuZyIpLA0KICAgICAgICAgICAgICAgICAgKG1lLmlkICUgOCkgKiA2NCwNCiAgICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgICA2NCwNCiAgICAgICAgICAgICAgICAgIDY0LA0KICAgICAgICAgICAgICAgICAgLW1lLnMgLyAyLA0KICAgICAgICAgICAgICAgICAgLW1lLnMgLyAyLA0KICAgICAgICAgICAgICAgICAgbWUucywNCiAgICAgICAgICAgICAgICAgIG1lLnMNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgIFBpYygiaWNvbnMucG5nIiksDQogICAgICAgICAgICAgICAgICBtZS5pY29uWzBdICogNDgsDQogICAgICAgICAgICAgICAgICBtZS5pY29uWzFdICogNDgsDQogICAgICAgICAgICAgICAgICA0OCwNCiAgICAgICAgICAgICAgICAgIDQ4LA0KICAgICAgICAgICAgICAgICAgLW1lLnMgLyAyLA0KICAgICAgICAgICAgICAgICAgLW1lLnMgLyAyLA0KICAgICAgICAgICAgICAgICAgbWUucywNCiAgICAgICAgICAgICAgICAgIG1lLnMNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS50b3lzKSB7DQogICAgICAgICAgICAgIHZhciBtZSA9IEdhbWUudG95c1tpXTsNCiAgICAgICAgICAgICAgLy9wc3N0Li4uIG5vdCByZWFsIHBoeXNpY3MNCiAgICAgICAgICAgICAgZm9yICh2YXIgaWkgaW4gR2FtZS50b3lzKSB7DQogICAgICAgICAgICAgICAgdmFyIGl0ID0gR2FtZS50b3lzW2lpXTsNCiAgICAgICAgICAgICAgICBpZiAoaXQuaWQgIT0gbWUuaWQpIHsNCiAgICAgICAgICAgICAgICAgIHZhciB4MSA9IG1lLnggKyBtZS54ZDsNCiAgICAgICAgICAgICAgICAgIHZhciB5MSA9IG1lLnkgKyBtZS55ZDsNCiAgICAgICAgICAgICAgICAgIHZhciB4MiA9IGl0LnggKyBpdC54ZDsNCiAgICAgICAgICAgICAgICAgIHZhciB5MiA9IGl0LnkgKyBpdC55ZDsNCiAgICAgICAgICAgICAgICAgIHZhciBkaXN0ID0NCiAgICAgICAgICAgICAgICAgICAgTWF0aC5zcXJ0KE1hdGgucG93KHgxIC0geDIsIDIpICsgTWF0aC5wb3coeTEgLSB5MiwgMikpIC8NCiAgICAgICAgICAgICAgICAgICAgKG1lLnMgLyAyICsgaXQucyAvIDIpOw0KICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPCAoR2FtZS50b3lzVHlwZSA9PSAxID8gMC45NSA6IDAuNzUpKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoeTEgLSB5MiwgeDEgLSB4Mik7DQogICAgICAgICAgICAgICAgICAgIHZhciB2MSA9IE1hdGguc3FydChNYXRoLnBvdyhtZS54ZCwgMikgKyBNYXRoLnBvdyhtZS55ZCwgMikpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdjIgPSBNYXRoLnNxcnQoTWF0aC5wb3coaXQueGQsIDIpICsgTWF0aC5wb3coaXQueWQsIDIpKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSAoKHYxICsgdjIpIC8gMiArIGRpc3QpICogMC43NTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGlvID0gaXQucyAvIG1lLnM7DQogICAgICAgICAgICAgICAgICAgIG1lLnhkICs9IE1hdGguc2luKC1hbmdsZSArIE1hdGguUEkgLyAyKSAqIHYgKiByYXRpbzsNCiAgICAgICAgICAgICAgICAgICAgbWUueWQgKz0gTWF0aC5jb3MoLWFuZ2xlICsgTWF0aC5QSSAvIDIpICogdiAqIHJhdGlvOw0KICAgICAgICAgICAgICAgICAgICBpdC54ZCArPSBNYXRoLnNpbigtYW5nbGUgLSBNYXRoLlBJIC8gMikgKiB2ICogKDEgLyByYXRpbyk7DQogICAgICAgICAgICAgICAgICAgIGl0LnlkICs9IE1hdGguY29zKC1hbmdsZSAtIE1hdGguUEkgLyAyKSAqIHYgKiAoMSAvIHJhdGlvKTsNCiAgICAgICAgICAgICAgICAgICAgbWUucmQgKz0gKE1hdGgucmFuZG9tKCkgKiAxIC0gMC41KSAqIDAuMSAqIHJhdGlvOw0KICAgICAgICAgICAgICAgICAgICBpdC5yZCArPSAoTWF0aC5yYW5kb20oKSAqIDEgLSAwLjUpICogMC4xICogKDEgLyByYXRpbyk7DQogICAgICAgICAgICAgICAgICAgIG1lLnJkICo9IE1hdGgubWluKDEsIHYpOw0KICAgICAgICAgICAgICAgICAgICBpdC5yZCAqPSBNYXRoLm1pbigxLCB2KTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKG1lLnkgPj0gaGVpZ2h0IC0gR2FtZS5taWxrSGQgKiBoZWlnaHQgKyA4KSB7DQogICAgICAgICAgICAgICAgbWUueGQgKj0gMC44NTsNCiAgICAgICAgICAgICAgICBtZS55ZCAqPSAwLjg1Ow0KICAgICAgICAgICAgICAgIG1lLnJkICo9IDAuODU7DQogICAgICAgICAgICAgICAgbWUueWQgLT0gMTsNCiAgICAgICAgICAgICAgICBtZS54ZCArPSAoTWF0aC5yYW5kb20oKSAqIDEgLSAwLjUpICogMC4zOw0KICAgICAgICAgICAgICAgIG1lLnlkICs9IChNYXRoLnJhbmRvbSgpICogMSAtIDAuNSkgKiAwLjA1Ow0KICAgICAgICAgICAgICAgIG1lLnJkICs9IChNYXRoLnJhbmRvbSgpICogMSAtIDAuNSkgKiAwLjAyOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIG1lLnhkICo9IDAuOTk7DQogICAgICAgICAgICAgICAgbWUucmQgKj0gMC45OTsNCiAgICAgICAgICAgICAgICBtZS55ZCArPSAxOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIG1lLnlkICo9IE1hdGgubWluKA0KICAgICAgICAgICAgICAgIDEsDQogICAgICAgICAgICAgICAgTWF0aC5hYnMobWUueSAtIChoZWlnaHQgLSBHYW1lLm1pbGtIZCAqIGhlaWdodCkgLyAxNikNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgbWUucmQgKz0gKG1lLnhkICogMC4wMSkgLyAobWUucyAvIChHYW1lLnRveXNUeXBlID09IDEgPyA2NCA6IDQ4KSk7DQogICAgICAgICAgICAgIGlmIChtZS54IDwgbWUucyAvIDIgJiYgbWUueGQgPCAwKQ0KICAgICAgICAgICAgICAgIG1lLnhkID0gTWF0aC5tYXgoMC4xLCAtbWUueGQgKiAwLjYpOw0KICAgICAgICAgICAgICBlbHNlIGlmIChtZS54IDwgbWUucyAvIDIpIHsNCiAgICAgICAgICAgICAgICBtZS54ZCA9IDA7DQogICAgICAgICAgICAgICAgbWUueCA9IG1lLnMgLyAyOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChtZS54ID4gd2lkdGggLSBtZS5zIC8gMiAmJiBtZS54ZCA+IDApDQogICAgICAgICAgICAgICAgbWUueGQgPSBNYXRoLm1pbigtMC4xLCAtbWUueGQgKiAwLjYpOw0KICAgICAgICAgICAgICBlbHNlIGlmIChtZS54ID4gd2lkdGggLSBtZS5zIC8gMikgew0KICAgICAgICAgICAgICAgIG1lLnhkID0gMDsNCiAgICAgICAgICAgICAgICBtZS54ID0gd2lkdGggLSBtZS5zIC8gMjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBtZS54ZCA9IE1hdGgubWluKE1hdGgubWF4KG1lLnhkLCAtMzApLCAzMCk7DQogICAgICAgICAgICAgIG1lLnlkID0gTWF0aC5taW4oTWF0aC5tYXgobWUueWQsIC0zMCksIDMwKTsNCiAgICAgICAgICAgICAgbWUucmQgPSBNYXRoLm1pbihNYXRoLm1heChtZS5yZCwgLTAuNSksIDAuNSk7DQogICAgICAgICAgICAgIG1lLnggKz0gbWUueGQ7DQogICAgICAgICAgICAgIG1lLnkgKz0gbWUueWQ7DQogICAgICAgICAgICAgIG1lLnIgKz0gbWUucmQ7DQogICAgICAgICAgICAgIG1lLnIgPSBtZS5yICUgKE1hdGguUEkgKiAyKTsNCiAgICAgICAgICAgICAgbWUucyArPSAobWUuc3QgLSBtZS5zKSAqIDAuNTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUudG95c1R5cGUgPT0gMiAmJiAhbWUuZHJhZ2dlZCAmJiBNYXRoLnJhbmRvbSgpIDwgMC4wMDMpDQogICAgICAgICAgICAgICAgbWUuc3QgPSBjaG9vc2UoWzQ4LCA0OCwgNDgsIDQ4LCA5Nl0pOw0KICAgICAgICAgICAgICBpZiAobWUuZHJhZ2dlZCkgew0KICAgICAgICAgICAgICAgIG1lLnggPSBHYW1lLm1vdXNlWDsNCiAgICAgICAgICAgICAgICBtZS55ID0gR2FtZS5tb3VzZVk7DQogICAgICAgICAgICAgICAgbWUueGQgKz0gKChHYW1lLm1vdXNlWCAtIEdhbWUubW91c2VYMikgKiAzIC0gbWUueGQpICogMC41Ow0KICAgICAgICAgICAgICAgIG1lLnlkICs9ICgoR2FtZS5tb3VzZVkgLSBHYW1lLm1vdXNlWTIpICogMyAtIG1lLnlkKSAqIDAuNTsNCiAgICAgICAgICAgICAgICBtZS5sLnN0eWxlLnRyYW5zZm9ybSA9DQogICAgICAgICAgICAgICAgICAidHJhbnNsYXRlKCIgKw0KICAgICAgICAgICAgICAgICAgKG1lLnggLSBtZS5zIC8gMikgKw0KICAgICAgICAgICAgICAgICAgInB4LCIgKw0KICAgICAgICAgICAgICAgICAgKG1lLnkgLSBtZS5zIC8gMikgKw0KICAgICAgICAgICAgICAgICAgInB4KSBzY2FsZSg1MCkiOw0KICAgICAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgICAgICBtZS5sLnN0eWxlLnRyYW5zZm9ybSA9DQogICAgICAgICAgICAgICAgICAidHJhbnNsYXRlKCIgKw0KICAgICAgICAgICAgICAgICAgKG1lLnggLSBtZS5zIC8gMikgKw0KICAgICAgICAgICAgICAgICAgInB4LCIgKw0KICAgICAgICAgICAgICAgICAgKG1lLnkgLSBtZS5zIC8gMikgKw0KICAgICAgICAgICAgICAgICAgInB4KSI7DQogICAgICAgICAgICAgIG1lLmwuc3R5bGUud2lkdGggPSBtZS5zICsgInB4IjsNCiAgICAgICAgICAgICAgbWUubC5zdHlsZS5oZWlnaHQgPSBtZS5zICsgInB4IjsNCiAgICAgICAgICAgICAgY3R4LnNhdmUoKTsNCiAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShtZS54LCBtZS55KTsNCiAgICAgICAgICAgICAgY3R4LnJvdGF0ZShtZS5yKTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUudG95c1R5cGUgPT0gMSkNCiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICAgICAgUGljKCJzbWFsbENvb2tpZXMucG5nIiksDQogICAgICAgICAgICAgICAgICAobWUuaWQgJSA4KSAqIDY0LA0KICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgIDY0LA0KICAgICAgICAgICAgICAgICAgNjQsDQogICAgICAgICAgICAgICAgICAtbWUucyAvIDIsDQogICAgICAgICAgICAgICAgICAtbWUucyAvIDIsDQogICAgICAgICAgICAgICAgICBtZS5zLA0KICAgICAgICAgICAgICAgICAgbWUucw0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICAgICAgUGljKCJpY29ucy5wbmciKSwNCiAgICAgICAgICAgICAgICAgIG1lLmljb25bMF0gKiA0OCwNCiAgICAgICAgICAgICAgICAgIG1lLmljb25bMV0gKiA0OCwNCiAgICAgICAgICAgICAgICAgIDQ4LA0KICAgICAgICAgICAgICAgICAgNDgsDQogICAgICAgICAgICAgICAgICAtbWUucyAvIDIsDQogICAgICAgICAgICAgICAgICAtbWUucyAvIDIsDQogICAgICAgICAgICAgICAgICBtZS5zLA0KICAgICAgICAgICAgICAgICAgbWUucw0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHBpYyA9IEdhbWUuTWlsay5waWM7DQogICAgICAgICAgaWYgKEdhbWUubWlsa1R5cGUgIT0gMCAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkNCiAgICAgICAgICAgIHBpYyA9IEdhbWUuQWxsTWlsa3NbR2FtZS5taWxrVHlwZV0ucGljOw0KICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuOTUgKiBhOw0KICAgICAgICAgIGN0eC5maWxsUGF0dGVybigNCiAgICAgICAgICAgIFBpYyhwaWMpLA0KICAgICAgICAgICAgMCwNCiAgICAgICAgICAgIGhlaWdodCAtIHksDQogICAgICAgICAgICB3aWR0aCArIDQ4MCwNCiAgICAgICAgICAgIDEsDQogICAgICAgICAgICA0ODAsDQogICAgICAgICAgICA0ODAsDQogICAgICAgICAgICB4LA0KICAgICAgICAgICAgMA0KICAgICAgICAgICk7DQoNCiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gIiMwMDAiOw0KICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCBoZWlnaHQgLSB5ICsgNDgwLCB3aWR0aCwgTWF0aC5tYXgoMCwgeSAtIDQ4MCkpOw0KICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQoNCiAgICAgICAgICBUaW1lci50cmFjaygibWlsayIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuQXNjZW5kVGltZXIgPiAwKSB7DQogICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgIFBpYygic2hhZGVkQm9yZGVyc1NvZnQucG5nIiksDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgMCwNCiAgICAgICAgICAgIGN0eC5jYW52YXMud2lkdGgsDQogICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodA0KICAgICAgICAgICk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA9PSAwKSB7DQogICAgICAgICAgR2FtZS5EcmF3V3JpbmtsZXJzKCk7DQogICAgICAgICAgVGltZXIudHJhY2soIndyaW5rbGVycyIpOw0KICAgICAgICAgIEdhbWUuRHJhd1NwZWNpYWwoKTsNCiAgICAgICAgICBUaW1lci50cmFjaygiZXZvbHZhYmxlcyIpOw0KDQogICAgICAgICAgR2FtZS5wYXJ0aWNsZXNEcmF3KDIpOw0KICAgICAgICAgIFRpbWVyLnRyYWNrKCJ0ZXh0IHBhcnRpY2xlcyIpOw0KDQogICAgICAgICAgLy9zaGlueSBib3JkZXIgZHVyaW5nIGZyZW56aWVzIGV0Yw0KICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQogICAgICAgICAgdmFyIGJvcmRlcnMgPSAic2hhZGVkQm9yZGVyc1NvZnQucG5nIjsNCiAgICAgICAgICBpZiAoZ29vZEJ1ZmYpIGJvcmRlcnMgPSAic2hhZGVkQm9yZGVyc0dvbGQucG5nIjsNCiAgICAgICAgICBlbHNlIGlmIChiYWRCdWZmKSBib3JkZXJzID0gInNoYWRlZEJvcmRlcnNSZWQucG5nIjsNCiAgICAgICAgICBpZiAoZ29vZEJ1ZmYgJiYgR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAibGlnaHRlciI7DQogICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgIFBpYyhib3JkZXJzKSwNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgY3R4LmNhbnZhcy53aWR0aCwNCiAgICAgICAgICAgIGN0eC5jYW52YXMuaGVpZ2h0DQogICAgICAgICAgKTsNCiAgICAgICAgICBpZiAoZ29vZEJ1ZmYgJiYgR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAic291cmNlLW92ZXIiOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlJTklUSUFMSVpBVElPTiBFTkQ7IEdBTUUgUkVBRFkgVE8gTEFVTkNIDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLmtpbGxTaGltbWVycygpOw0KDQogICAgLy9ib29vb28NCiAgICBHYW1lLlJ1aW5UaGVGdW4gPSBmdW5jdGlvbiAoc2lsZW50KSB7DQogICAgICBHYW1lLnBvcHVwcyA9IDA7DQogICAgICBHYW1lLlNldEFsbFVwZ3JhZGVzKDEpOw0KICAgICAgR2FtZS5TZXRBbGxBY2hpZXZzKDEpOw0KICAgICAgR2FtZS5wb3B1cHMgPSAwOw0KICAgICAgR2FtZS5FYXJuKDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSk7DQogICAgICBHYW1lLk1heFNwZWNpYWxzKCk7DQogICAgICBHYW1lLm5leHRSZXNlYXJjaCA9IDA7DQogICAgICBHYW1lLnJlc2VhcmNoVCA9IC0xOw0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgR2FtZS5wb3B1cHMgPSAxOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAobWUubGV2ZWwgPCAxMCkgew0KICAgICAgICAgIG1lLmxldmVsID0gOTsNCiAgICAgICAgICBtZS5sZXZlbFVwKHRydWUpOw0KICAgICAgICB9DQogICAgICAgIGlmIChtZS5taW5pZ2FtZSAmJiBtZS5taW5pZ2FtZS5vblJ1aW5UaGVGdW4pIG1lLm1pbmlnYW1lLm9uUnVpblRoZUZ1bigpOw0KICAgICAgfQ0KICAgICAgaWYgKCFzaWxlbnQpIHsNCiAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgIlRob3UgZG90aCBydWluZXRoIHRoZSBmdW4hIiwNCiAgICAgICAgICAiWW91J3JlIGZyZWUuIEZyZWUgYXQgbGFzdC4iLA0KICAgICAgICAgIFsxMSwgNV0NCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiAiWW91IGZlZWwgYSBiaXR0ZXIgdGFzdGUgaW4geW91ciBtb3V0aC4uLiI7DQogICAgfTsNCg0KICAgIEdhbWUuU2V0QWxsVXBncmFkZXMgPSBmdW5jdGlvbiAob24pIHsNCiAgICAgIEdhbWUucG9wdXBzID0gMDsNCiAgICAgIHZhciBsZWZ0b3V0ID0gWw0KICAgICAgICAiTWFnaWMgc2hlbmFuaWdhbnMiLA0KICAgICAgICAiT2NjdWx0IG9ic3RydWN0aW9uIiwNCiAgICAgICAgIkdsdWNvc2UtY2hhcmdlZCBhaXIiLA0KICAgICAgXTsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgICBpZiAoDQogICAgICAgICAgb24gJiYNCiAgICAgICAgICAoR2FtZS5VcGdyYWRlc1tpXS5wb29sID09ICJ0b2dnbGUiIHx8DQogICAgICAgICAgICBsZWZ0b3V0LmluZGV4T2YoR2FtZS5VcGdyYWRlc1tpXS5uYW1lKSAhPSAtMSkNCiAgICAgICAgKSB7DQogICAgICAgIH0gZWxzZSBpZiAob24pIEdhbWUuVXBncmFkZXNbaV0uZWFybigpOw0KICAgICAgICBlbHNlIGlmICghb24pIEdhbWUuVXBncmFkZXNbaV0ubG9zZSgpOw0KICAgICAgfQ0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgR2FtZS5wb3B1cHMgPSAxOw0KICAgIH07DQogICAgR2FtZS5TZXRBbGxBY2hpZXZzID0gZnVuY3Rpb24gKG9uKSB7DQogICAgICBHYW1lLnBvcHVwcyA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuQWNoaWV2ZW1lbnRzKSB7DQogICAgICAgIGlmIChvbiAmJiBHYW1lLkFjaGlldmVtZW50c1tpXS5wb29sICE9ICJkdW5nZW9uIikNCiAgICAgICAgICBHYW1lLldpbihHYW1lLkFjaGlldmVtZW50c1tpXS5uYW1lKTsNCiAgICAgICAgZWxzZSBpZiAoIW9uKSBHYW1lLlJlbW92ZUFjaGlldihHYW1lLkFjaGlldmVtZW50c1tpXS5uYW1lKTsNCiAgICAgIH0NCiAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICBHYW1lLnBvcHVwcyA9IDE7DQogICAgfTsNCiAgICBHYW1lLkdldEFsbERlYnVncyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUucG9wdXBzID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc1tpXS5wb29sID09ICJkZWJ1ZyIpIEdhbWUuVXBncmFkZXNbaV0uZWFybigpOw0KICAgICAgfQ0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgR2FtZS5wb3B1cHMgPSAxOw0KICAgIH07DQogICAgR2FtZS5NYXhTcGVjaWFscyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUuZHJhZ29uTGV2ZWwgPSBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAxOw0KICAgICAgR2FtZS5zYW50YUxldmVsID0gR2FtZS5zYW50YUxldmVscy5sZW5ndGggLSAxOw0KICAgIH07DQoNCiAgICBHYW1lLlNlc2FtZVJlc2V0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG5hbWUgPSBHYW1lLmJha2VyeU5hbWU7DQogICAgICBHYW1lLkhhcmRSZXNldCgyKTsNCiAgICAgIEdhbWUuYmFrZXJ5TmFtZSA9IG5hbWU7DQogICAgICBHYW1lLmJha2VyeU5hbWVSZWZyZXNoKCk7DQogICAgICBHYW1lLkFjaGlldmVtZW50c1siQ2hlYXRlZCBjb29raWVzIHRhc3RlIGF3ZnVsIl0ud29uID0gMTsNCiAgICB9Ow0KDQogICAgR2FtZS5kZWJ1Z1RpbWVyc09uID0gMDsNCiAgICBHYW1lLnNlc2FtZSA9IDA7DQogICAgR2FtZS5PcGVuU2VzYW1lID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotOXB4O3RvcDotNnB4O2JhY2tncm91bmQtcG9zaXRpb246JyArDQogICAgICAgIC0xMCAqIDQ4ICsNCiAgICAgICAgInB4ICIgKw0KICAgICAgICAtNiAqIDQ4ICsNCiAgICAgICAgJ3B4OyI+PC9kaXY+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGRpdiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7bGVmdDowcHg7dG9wOjBweDt6LWluZGV4OjEwO2ZvbnQtc2l6ZToxMHB4O2JhY2tncm91bmQ6IzAwMDtwYWRkaW5nOjFweDsiIGlkPSJmcHNDb3VudGVyIj48L2Rpdj4nOw0KDQogICAgICBzdHIgKz0gJzxkaXYgaWQ9ImRldkNvbnNvbGVDb250ZW50Ij4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSIgc3R5bGU9ImZvbnQtc2l6ZToxNHB4O21hcmdpbjo2cHg7Ij5EZXYgdG9vbHM8L2Rpdj4nOw0KDQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5Bc2NlbmQoMSk7Ij5Bc2NlbmQ8L2E+JzsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLmNvb2tpZXMqPTEwO0dhbWUuY29va2llc0Vhcm5lZCo9MTA7Ij54MTA8L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLmNvb2tpZXMvPTEwO0dhbWUuY29va2llc0Vhcm5lZC89MTA7Ij4vMTA8L2E+PGJyPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5jb29raWVzKj0xMDAwO0dhbWUuY29va2llc0Vhcm5lZCo9MTAwMDsiPngxazwvYT4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuY29va2llcy89MTAwMDtHYW1lLmNvb2tpZXNFYXJuZWQvPTEwMDA7Ij4vMWs8L2E+PGJyPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpe0dhbWUuT2JqZWN0c1tpXS5idXkoMTAwKTt9Ij5CdXkgMTAwIG9mIGFsbDwvYT4nOyAvL2ZvciAodmFyIG49MDtuPDEwMDtuKyspe2ZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKXtHYW1lLk9iamVjdHNbaV0uYnV5KDEpO319DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpe0dhbWUuT2JqZWN0c1tpXS5zZWxsKDEwMCk7fSI+U2VsbCAxMDAgb2YgYWxsPC9hPjxicj4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuZ2Fpbkx1bXBzKDEwKTsiPisxMCBsdW1wczwvYT4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9ImZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKXtHYW1lLk9iamVjdHNbaV0ubGV2ZWw9MDtHYW1lLk9iamVjdHNbaV0ub25NaW5pZ2FtZT1mYWxzZTtHYW1lLk9iamVjdHNbaV0ucmVmcmVzaCgpO31HYW1lLnJlY2FsY3VsYXRlR2FpbnM9MTsiPlJlc2V0IGxldmVsczwvYT4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuY29va2llc1Jlc2V0Kz1HYW1lLkhvd01hbnlDb29raWVzUmVzZXQoKEdhbWUuaGVhdmVubHlDaGlwc3x8MSkqMTAwMCk7R2FtZS5FYXJuSGVhdmVubHlDaGlwcygwLHRydWUpO0dhbWUucmVjYWxjdWxhdGVHYWlucz0xOyI+SEMgeDFrPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5jb29raWVzUmVzZXQ9KEdhbWUuaGVhdmVubHlDaGlwczwxMDA/MDpHYW1lLkhvd01hbnlDb29raWVzUmVzZXQoTWF0aC5mbG9vcihHYW1lLmhlYXZlbmx5Q2hpcHMqMC4wMDEpKSk7R2FtZS5jb29raWVzUmVzZXQ9TWF0aC5tYXgoR2FtZS5jb29raWVzUmVzZXQsMCk7R2FtZS5FYXJuSGVhdmVubHlDaGlwcygwLHRydWUpO2lmIChHYW1lLmNvb2tpZXNSZXNldDw9MCl7R2FtZS5oZWF2ZW5seUNoaXBzPTA7fUdhbWUucmVjYWxjdWxhdGVHYWlucz0xOyI+SEMgLzFrPC9hPjxicj4nOyAvL3dlZSBiaXQgaW5hY2N1cmF0ZQ0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuY29va2llc0Vhcm5lZD0wO0dhbWUucmVjYWxjdWxhdGVHYWlucz0xOyI+UmVzZXQgY29va2llcyBlYXJuZWQ8L2E+PGJyPic7DQogICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gd2FybmluZyIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLlJ1aW5UaGVGdW4oMSk7Ij5SdWluIFRoZSBGdW48L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiB3YXJuaW5nIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuU2VzYW1lUmVzZXQoKTsiPldpcGU8L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLkdldEFsbERlYnVncygpOyI+QWxsIGRlYnVnczwvYT4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuZGVidWdUaW1lcnNPbj0hR2FtZS5kZWJ1Z1RpbWVyc09uO0dhbWUuT3BlblNlc2FtZSgpOyI+VGltZXJzICcgKw0KICAgICAgICAoR2FtZS5kZWJ1Z1RpbWVyc09uID8gIk9uIiA6ICJPZmYiKSArDQogICAgICAgICI8L2E+PGJyPiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5TZXRBbGxVcGdyYWRlcygwKTsiPk5vIHVwZ3JhZGVzPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5TZXRBbGxVcGdyYWRlcygxKTsiPkFsbCB1cGdyYWRlczwvYT48YnI+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLlNldEFsbEFjaGlldnMoMCk7Ij5ObyBhY2hpZXZzPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5TZXRBbGxBY2hpZXZzKDEpOyI+QWxsIGFjaGlldnM8L2E+PGJyPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5zYW50YUxldmVsPTA7R2FtZS5kcmFnb25MZXZlbD0wOyI+UmVzZXQgc3BlY2lhbHM8L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLk1heFNwZWNpYWxzKCk7Ij5NYXggc3BlY2lhbHM8L2E+PGJyPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5sdW1wUmVmaWxsPTA7LypEYXRlLm5vdygpLUdhbWUuZ2V0THVtcFJlZmlsbE1heCgpOyovIj5SZXNldCByZWZpbGxzPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5FZGl0QXNjZW5kKCk7Ij4nICsNCiAgICAgICAgKEdhbWUuRGVidWdnaW5nUHJlc3RpZ2UgPyAiRXhpdCBBc2NlbmQgRWRpdCIgOiAiQXNjZW5kIEVkaXQiKSArDQogICAgICAgICI8L2E+IjsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLkRlYnVnVXBncmFkZUNwUygpOyI+RGVidWcgdXBncmFkZXMgQ3BTPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5zZWVkPUdhbWUubWFrZVNlZWQoKTsiPlJlLXNlZWQ8L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAiPVwiR2FtZS5oZXJhbGRzPTEwMDtsKCdoZXJhbGRzQW1vdW50JykudGV4dENvbnRlbnQ9R2FtZS5oZXJhbGRzO0dhbWUuZXh0ZXJuYWxEYXRhTG9hZGVkPXRydWU7R2FtZS5yZWNhbGN1bGF0ZUdhaW5zPTE7XCI+TWF4IGhlcmFsZHM8L2E+IjsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5nb2xkZW5Db29raWVDaG9pY2VzLmxlbmd0aCAvIDI7IGkrKykgew0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgIj1cInZhciBuZXdTaGltbWVyPW5ldyBHYW1lLnNoaW1tZXIoJ2dvbGRlbicpO25ld1NoaW1tZXIuZm9yY2U9JyIgKw0KICAgICAgICAgIEdhbWUuZ29sZGVuQ29va2llQ2hvaWNlc1tpICogMiArIDFdICsNCiAgICAgICAgICAiJztcIj4iICsNCiAgICAgICAgICBHYW1lLmdvbGRlbkNvb2tpZUNob2ljZXNbaSAqIDJdICsNCiAgICAgICAgICAiPC9hPiI7DQogICAgICAgIC8vc3RyKz0nPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJytHYW1lLmNsaWNrU3RyKyc9IkdhbWUuZ29sZGVuQ29va2llLmZvcmNlPVwnJytHYW1lLmdvbGRlbkNvb2tpZS5jaG9pY2VzW2kqMisxXSsnXCc7R2FtZS5nb2xkZW5Db29raWUuc3Bhd24oKTsiPicrR2FtZS5nb2xkZW5Db29raWUuY2hvaWNlc1tpKjJdKyc8L2E+JzsNCiAgICAgICAgLy9zdHIrPSc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnK0dhbWUuY2xpY2tTdHIrJz0iR2FtZS5nb2xkZW5Db29raWUuY2xpY2soMCxcJycrR2FtZS5nb2xkZW5Db29raWUuY2hvaWNlc1tpKjIrMV0rJ1wnKTsiPicrR2FtZS5nb2xkZW5Db29raWUuY2hvaWNlc1tpKjJdKyc8L2E+JzsNCiAgICAgIH0NCiAgICAgIHN0ciArPSAiPC9kaXY+IjsNCg0KICAgICAgbCgiZGV2Q29uc29sZSIpLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgaWYgKCFsKCJmcHNHcmFwaCIpKSB7DQogICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsNCiAgICAgICAgZGl2LmlkID0gImZwc0dyYXBoIjsNCiAgICAgICAgZGl2LndpZHRoID0gMTI4Ow0KICAgICAgICBkaXYuaGVpZ2h0ID0gNjQ7DQogICAgICAgIGRpdi5zdHlsZS5vcGFjaXR5ID0gMC41Ow0KICAgICAgICBkaXYuc3R5bGUucG9pbnRlckV2ZW50cyA9ICJub25lIjsNCiAgICAgICAgZGl2LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICIwJSAwJSI7DQogICAgICAgIGRpdi5zdHlsZS50cmFuc2Zvcm0gPSAic2NhbGUoMC43NSkiOw0KICAgICAgICAvL2woJ2RldkNvbnNvbGUnKS5hcHBlbmRDaGlsZChkaXYpOw0KICAgICAgICBsKCJkZXZDb25zb2xlIikucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoDQogICAgICAgICAgZGl2LA0KICAgICAgICAgIGwoImRldkNvbnNvbGUiKS5uZXh0U2libGluZw0KICAgICAgICApOw0KICAgICAgICBHYW1lLmZwc0dyYXBoID0gZGl2Ow0KICAgICAgICBHYW1lLmZwc0dyYXBoQ3R4ID0gR2FtZS5mcHNHcmFwaC5nZXRDb250ZXh0KCIyZCIsIHsgYWxwaGE6IGZhbHNlIH0pOw0KICAgICAgICB2YXIgY3R4ID0gR2FtZS5mcHNHcmFwaEN0eDsNCiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjMDAwIjsNCiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIDEyOCwgNjQpOw0KICAgICAgfQ0KDQogICAgICBsKCJkZWJ1ZyIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgR2FtZS5zZXNhbWUgPSAxOw0KICAgICAgR2FtZS5BY2hpZXZlbWVudHNbIkNoZWF0ZWQgY29va2llcyB0YXN0ZSBhd2Z1bCJdLndvbiA9IDE7DQogICAgfTsNCg0KICAgIEdhbWUuRWRpdEFzY2VuZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghR2FtZS5EZWJ1Z2dpbmdQcmVzdGlnZSkgew0KICAgICAgICBHYW1lLkRlYnVnZ2luZ1ByZXN0aWdlID0gdHJ1ZTsNCiAgICAgICAgR2FtZS5Bc2NlbmRUaW1lciA9IDA7DQogICAgICAgIEdhbWUuT25Bc2NlbmQgPSAxOw0KICAgICAgICBHYW1lLnJlbW92ZUNsYXNzKCJhc2NlbmRJbnRybyIpOw0KICAgICAgICBHYW1lLmFkZENsYXNzKCJhc2NlbmRpbmciKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIEdhbWUuRGVidWdnaW5nUHJlc3RpZ2UgPSBmYWxzZTsNCiAgICAgIH0NCiAgICAgIEdhbWUuQnVpbGRBc2NlbmRUcmVlKCk7DQogICAgICBHYW1lLk9wZW5TZXNhbWUoKTsNCiAgICB9Ow0KDQogICAgLy9leHBlcmltZW50YWwgZGVidWdnaW5nIGZ1bmN0aW9uIHRoYXQgY3ljbGVzIHRocm91Z2ggZXZlcnkgb3duZWQgdXBncmFkZSwgdHVybnMgaXQgb2ZmIGFuZCBvbiwgYW5kIGxpc3RzIGhvdyBtdWNoIGVhY2ggdXBncmFkZSBpcyBwYXJ0aWNpcGF0aW5nIHRvIENwUw0KICAgIEdhbWUuZGVidWdnZWRVcGdyYWRlQ3BTID0gW107DQogICAgR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcENsaWNrID0gW107DQogICAgR2FtZS5kZWJ1Z0NvbG9ycyA9IFsNCiAgICAgICIjMzIyIiwNCiAgICAgICIjNDExIiwNCiAgICAgICIjNjAwIiwNCiAgICAgICIjOTAwIiwNCiAgICAgICIjZjMwIiwNCiAgICAgICIjZjkwIiwNCiAgICAgICIjZmYwIiwNCiAgICAgICIjOWYwIiwNCiAgICAgICIjMGY5IiwNCiAgICAgICIjMDlmIiwNCiAgICAgICIjOTBmIiwNCiAgICBdOw0KICAgIEdhbWUuRGVidWdVcGdyYWRlQ3BTID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5DYWxjdWxhdGVHYWlucygpOw0KICAgICAgR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcFMgPSBbXTsNCiAgICAgIEdhbWUuZGVidWdnZWRVcGdyYWRlQ3BDbGljayA9IFtdOw0KICAgICAgdmFyIENwUyA9IEdhbWUuY29va2llc1BzOw0KICAgICAgdmFyIENwQ2xpY2sgPSBHYW1lLmNvbXB1dGVkTW91c2VDcHM7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgICAgaWYgKG1lLmJvdWdodCkgew0KICAgICAgICAgIG1lLmJvdWdodCA9IDA7DQogICAgICAgICAgR2FtZS5DYWxjdWxhdGVHYWlucygpOw0KICAgICAgICAgIC8vR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcFNbbWUubmFtZV09Q3BTLUdhbWUuY29va2llc1BzOw0KICAgICAgICAgIEdhbWUuZGVidWdnZWRVcGdyYWRlQ3BTW21lLm5hbWVdID0gQ3BTIC8gKEdhbWUuY29va2llc1BzIHx8IDEpIC0gMTsNCiAgICAgICAgICBHYW1lLmRlYnVnZ2VkVXBncmFkZUNwQ2xpY2tbbWUubmFtZV0gPQ0KICAgICAgICAgICAgQ3BDbGljayAvIChHYW1lLmNvbXB1dGVkTW91c2VDcHMgfHwgMSkgLSAxOw0KICAgICAgICAgIG1lLmJvdWdodCA9IDE7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIEdhbWUuQ2FsY3VsYXRlR2FpbnMoKTsNCiAgICB9Ow0KDQogICAgR2FtZS52YW5pbGxhID0gMDsgLy9ldmVyeXRoaW5nIHdlIGNyZWF0ZSBiZXlvbmQgdGhpcyB3aWxsIGJlIHNhdmVkIGluIG1vZCBzdHJ1Y3R1cmVzDQoNCiAgICBHYW1lLmxhdW5jaE1vZHMoKTsNCg0KICAgIEdhbWUucnVuTW9kSG9vaygiY3JlYXRlIik7IC8vZGVjbGFyZSBjdXN0b20gdXBncmFkZXMvYWNoaWV2cy9idWZmcy9idWlsZGluZ3MgaGVyZSENCg0KICAgIEJlYXV0aWZ5QWxsKCk7DQoNCiAgICBpZiAoIUFwcCkgew0KICAgICAgaWYgKCFHYW1lLkxvYWRTYXZlKCkpIHsNCiAgICAgICAgLy90cnkgdG8gbG9hZCB0aGUgc2F2ZSB3aGVuIHdlIG9wZW4gdGhlIHBhZ2UuIGlmIHRoaXMgZmFpbHMsIHRyeSB0byBicnV0ZS1mb3JjZSBpdCBoYWxmIGEgc2Vjb25kIGxhdGVyDQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHZhciBsb2NhbCA9IGxvY2FsU3RvcmFnZUdldChHYW1lLlNhdmVUbyk7DQogICAgICAgICAgR2FtZS5Mb2FkU2F2ZShsb2NhbCk7DQogICAgICAgIH0sIDUwMCk7DQogICAgICB9DQogICAgfSBlbHNlIGlmIChBcHAuc2F2ZURhdGEpDQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5Mb2FkU2F2ZShBcHAuc2F2ZURhdGEpOw0KICAgICAgfSwgMTAwKTsNCiAgICBlbHNlDQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5Mb2FkU2F2ZSgpOw0KICAgICAgfSwgMTAwKTsNCg0KICAgIEdhbWUucmVhZHkgPSAxOw0KICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKA0KICAgICAgICB0eXBlb2Ygc2hvd0FkcyA9PT0gInVuZGVmaW5lZCIgJiYNCiAgICAgICAgKCFsKCJkZXRlY3RBZHMiKSB8fCBsKCJkZXRlY3RBZHMiKS5jbGllbnRIZWlnaHQgPCAxKQ0KICAgICAgKQ0KICAgICAgICBHYW1lLmFkZENsYXNzKCJub0FkcyIpOw0KICAgIH0sIDUwMCk7DQogICAgbCgib2ZmR2FtZU1lc3NhZ2UiKS5pbm5lckhUTUwgPSAiIjsNCiAgICBsKCJvZmZHYW1lTWVzc2FnZVdyYXAiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgIEdhbWUuTG9vcCgpOw0KICAgIEdhbWUuRHJhdygpOw0KDQogICAgUGxheUN1ZSgibGF1bmNoIik7DQoNCiAgICBpZiAoIUVOKSB7DQogICAgICB2YXIgYWRhcHRXaWR0aCA9IGZ1bmN0aW9uIChub2RlKSB7DQogICAgICAgIHZhciBlbCA9IG5vZGUuZmlyc3RDaGlsZDsNCiAgICAgICAgdmFyIHdpZHRoID0gZWwuY2xpZW50V2lkdGg7DQogICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoInN1YkJ1dHRvbiIpKSB7DQogICAgICAgICAgaWYgKHdpZHRoIC8gOTUgPiAxKSBlbC5zdHlsZS5wYWRkaW5nID0gIjZweCAwcHgiOw0KICAgICAgICB9DQogICAgICAgIHdpZHRoID0gd2lkdGggLyA5NTsNCiAgICAgICAgaWYgKHdpZHRoID4gMSkgew0KICAgICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0NCiAgICAgICAgICAgIChwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZm9udFNpemUpICogMSkgLyB3aWR0aCArICJweCI7DQogICAgICAgICAgZWwuc3R5bGUudHJhbnNmb3JtID0gInNjYWxlKDEsIiArIHdpZHRoICsgIikiOw0KICAgICAgICB9DQogICAgICB9Ow0KICAgICAgbCgicHJlZnNCdXR0b24iKS5maXJzdENoaWxkLmlubmVySFRNTCA9IGxvYygiT3B0aW9ucyIpOw0KICAgICAgbCgic3RhdHNCdXR0b24iKS5maXJzdENoaWxkLmlubmVySFRNTCA9IGxvYygiU3RhdHMiKTsNCiAgICAgIGwoImxvZ0J1dHRvbiIpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MID0gbG9jKCJJbmZvIik7DQogICAgICBsKCJsZWdhY3lCdXR0b24iKS5maXJzdENoaWxkLmlubmVySFRNTCA9IGxvYygiTGVnYWN5Iik7DQogICAgICBhZGFwdFdpZHRoKGwoInByZWZzQnV0dG9uIikpOw0KICAgICAgYWRhcHRXaWR0aChsKCJzdGF0c0J1dHRvbiIpKTsNCiAgICAgIGFkYXB0V2lkdGgobCgibG9nQnV0dG9uIikpOw0KICAgICAgYWRhcHRXaWR0aChsKCJsZWdhY3lCdXR0b24iKSk7DQogICAgICBsKCJjaGVja0ZvclVwZGF0ZSIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQgPSBsb2MoIk5ldyB1cGRhdGUhIik7DQogICAgICBsKCJidWlsZGluZ3NUaXRsZSIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQgPSBsb2MoIkJ1aWxkaW5ncyIpOw0KICAgICAgbCgic3RvcmVUaXRsZSIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQgPSBsb2MoIlN0b3JlIik7DQogICAgfQ0KICB9Ow0KICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCglMT0dJQw0KCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogIEdhbWUuTG9naWMgPSBmdW5jdGlvbiAoKSB7DQogICAgR2FtZS5ib3VuZHMgPSBHYW1lLmwuZ2V0Qm91bmRzKCk7DQoNCiAgICBpZiAoIUdhbWUuT25Bc2NlbmQgJiYgR2FtZS5Bc2NlbmRUaW1lciA9PSAwKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLmVhY2hGcmFtZSkgR2FtZS5PYmplY3RzW2ldLmVhY2hGcmFtZSgpOw0KICAgICAgfQ0KICAgICAgR2FtZS5VcGRhdGVTcGVjaWFsKCk7DQogICAgICBHYW1lLlVwZGF0ZUdyYW5kbWFwb2NhbHlwc2UoKTsNCg0KICAgICAgLy90aGVzZSBhcmUga2luZGEgZnVuDQogICAgICAvL2lmIChHYW1lLkJpZ0Nvb2tpZVN0YXRlPT0yICYmICFHYW1lLnByb21wdE9uICYmIEdhbWUuU2Nyb2xsIT0wKSBHYW1lLkNsaWNrQ29va2llKCk7DQogICAgICAvL2lmIChHYW1lLkJpZ0Nvb2tpZVN0YXRlPT0xICYmICFHYW1lLnByb21wdE9uKSBHYW1lLkNsaWNrQ29va2llKCk7DQoNCiAgICAgIC8vaGFuZGxlIGdyYXBoaWMgc3R1ZmYNCiAgICAgIGlmIChHYW1lLnByZWZzLndvYmJseSkgew0KICAgICAgICBpZiAoR2FtZS5CaWdDb29raWVTdGF0ZSA9PSAxKSBHYW1lLkJpZ0Nvb2tpZVNpemVUID0gMC45ODsNCiAgICAgICAgZWxzZSBpZiAoR2FtZS5CaWdDb29raWVTdGF0ZSA9PSAyKSBHYW1lLkJpZ0Nvb2tpZVNpemVUID0gMS4wNTsNCiAgICAgICAgZWxzZSBHYW1lLkJpZ0Nvb2tpZVNpemVUID0gMTsNCiAgICAgICAgR2FtZS5CaWdDb29raWVTaXplRCArPQ0KICAgICAgICAgIChHYW1lLkJpZ0Nvb2tpZVNpemVUIC0gR2FtZS5CaWdDb29raWVTaXplKSAqIDAuNzU7DQogICAgICAgIEdhbWUuQmlnQ29va2llU2l6ZUQgKj0gMC43NTsNCiAgICAgICAgR2FtZS5CaWdDb29raWVTaXplICs9IEdhbWUuQmlnQ29va2llU2l6ZUQ7DQogICAgICAgIEdhbWUuQmlnQ29va2llU2l6ZSA9IE1hdGgubWF4KDAuMSwgR2FtZS5CaWdDb29raWVTaXplKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmIChHYW1lLkJpZ0Nvb2tpZVN0YXRlID09IDEpDQogICAgICAgICAgR2FtZS5CaWdDb29raWVTaXplICs9ICgwLjk4IC0gR2FtZS5CaWdDb29raWVTaXplKSAqIDAuNTsNCiAgICAgICAgZWxzZSBpZiAoR2FtZS5CaWdDb29raWVTdGF0ZSA9PSAyKQ0KICAgICAgICAgIEdhbWUuQmlnQ29va2llU2l6ZSArPSAoMS4wNSAtIEdhbWUuQmlnQ29va2llU2l6ZSkgKiAwLjU7DQogICAgICAgIGVsc2UgR2FtZS5CaWdDb29raWVTaXplICs9ICgxIC0gR2FtZS5CaWdDb29raWVTaXplKSAqIDAuNTsNCiAgICAgIH0NCiAgICAgIEdhbWUucGFydGljbGVzVXBkYXRlKCk7DQoNCiAgICAgIGlmIChHYW1lLm1vdXNlUG9pbnRlcikgbCgic2VjdGlvbkxlZnQiKS5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7DQogICAgICBlbHNlIGwoInNlY3Rpb25MZWZ0Iikuc3R5bGUuY3Vyc29yID0gImF1dG8iOw0KICAgICAgR2FtZS5tb3VzZVBvaW50ZXIgPSAwOw0KDQogICAgICAvL2hhbmRsZSBtaWxrIGFuZCBtaWxrIGFjY2Vzc29yaWVzDQogICAgICBHYW1lLm1pbGtQcm9ncmVzcyA9IEdhbWUuQWNoaWV2ZW1lbnRzT3duZWQgLyAyNTsNCiAgICAgIGlmIChHYW1lLm1pbGtQcm9ncmVzcyA+PSAwLjUpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gaGVscGVycyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDEpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gd29ya2VycyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDIpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gZW5naW5lZXJzIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gMykgR2FtZS5VbmxvY2soIktpdHRlbiBvdmVyc2VlcnMiKTsNCiAgICAgIGlmIChHYW1lLm1pbGtQcm9ncmVzcyA+PSA0KSBHYW1lLlVubG9jaygiS2l0dGVuIG1hbmFnZXJzIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gNSkgR2FtZS5VbmxvY2soIktpdHRlbiBhY2NvdW50YW50cyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDYpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gc3BlY2lhbGlzdHMiKTsNCiAgICAgIGlmIChHYW1lLm1pbGtQcm9ncmVzcyA+PSA3KSBHYW1lLlVubG9jaygiS2l0dGVuIGV4cGVydHMiKTsNCiAgICAgIGlmIChHYW1lLm1pbGtQcm9ncmVzcyA+PSA4KSBHYW1lLlVubG9jaygiS2l0dGVuIGNvbnN1bHRhbnRzIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gOSkNCiAgICAgICAgR2FtZS5VbmxvY2soIktpdHRlbiBhc3Npc3RhbnRzIHRvIHRoZSByZWdpb25hbCBtYW5hZ2VyIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gMTApIEdhbWUuVW5sb2NrKCJLaXR0ZW4gbWFya2V0ZWVycyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDExKSBHYW1lLlVubG9jaygiS2l0dGVuIGFuYWx5c3RzIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gMTIpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gZXhlY3V0aXZlcyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDEzKSBHYW1lLlVubG9jaygiS2l0dGVuIGFkbWlucyIpOw0KICAgICAgR2FtZS5taWxrSCA9IE1hdGgubWluKDEsIEdhbWUubWlsa1Byb2dyZXNzKSAqIDAuMzU7DQogICAgICBHYW1lLm1pbGtIZCArPSAoR2FtZS5taWxrSCAtIEdhbWUubWlsa0hkKSAqIDAuMDI7DQoNCiAgICAgIEdhbWUuTWlsayA9DQogICAgICAgIEdhbWUuTWlsa3NbDQogICAgICAgICAgTWF0aC5taW4oTWF0aC5mbG9vcihHYW1lLm1pbGtQcm9ncmVzcyksIEdhbWUuTWlsa3MubGVuZ3RoIC0gMSkNCiAgICAgICAgXTsNCg0KICAgICAgaWYgKEdhbWUuYXV0b2NsaWNrZXJEZXRlY3RlZCA+IDApIEdhbWUuYXV0b2NsaWNrZXJEZXRlY3RlZC0tOw0KDQogICAgICAvL2hhbmRsZSByZXNlYXJjaA0KICAgICAgaWYgKEdhbWUucmVzZWFyY2hUID4gMCkgew0KICAgICAgICBHYW1lLnJlc2VhcmNoVC0tOw0KICAgICAgfQ0KICAgICAgaWYgKEdhbWUucmVzZWFyY2hUID09IDAgJiYgR2FtZS5uZXh0UmVzZWFyY2gpIHsNCiAgICAgICAgaWYgKCFHYW1lLkhhcyhHYW1lLlVwZ3JhZGVzQnlJZFtHYW1lLm5leHRSZXNlYXJjaF0ubmFtZSkpIHsNCiAgICAgICAgICBHYW1lLlVubG9jayhHYW1lLlVwZ3JhZGVzQnlJZFtHYW1lLm5leHRSZXNlYXJjaF0ubmFtZSk7DQogICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICBsb2MoIlJlc2VhcmNoIGNvbXBsZXRlIiksDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJZb3UgaGF2ZSBkaXNjb3ZlcmVkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5VcGdyYWRlc0J5SWRbR2FtZS5uZXh0UmVzZWFyY2hdLmRuYW1lDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgR2FtZS5VcGdyYWRlc0J5SWRbR2FtZS5uZXh0UmVzZWFyY2hdLmljb24NCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIEdhbWUubmV4dFJlc2VhcmNoID0gMDsNCiAgICAgICAgR2FtZS5yZXNlYXJjaFQgPSAtMTsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgIH0NCiAgICAgIC8vaGFuZGxlIHNlYXNvbnMNCiAgICAgIGlmIChHYW1lLnNlYXNvblQgPiAwKSB7DQogICAgICAgIEdhbWUuc2Vhc29uVC0tOw0KICAgICAgfQ0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLnNlYXNvblQgPD0gMCAmJg0KICAgICAgICBHYW1lLnNlYXNvbiAhPSAiIiAmJg0KICAgICAgICBHYW1lLnNlYXNvbiAhPSBHYW1lLmJhc2VTZWFzb24gJiYNCiAgICAgICAgIUdhbWUuSGFzKCJFdGVybmFsIHNlYXNvbnMiKQ0KICAgICAgKSB7DQogICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgIEdhbWUuc2Vhc29uc1tHYW1lLnNlYXNvbl0ub3ZlciwNCiAgICAgICAgICAiIiwNCiAgICAgICAgICBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLnRyaWdnZXJVcGdyYWRlLmljb24NCiAgICAgICAgKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJTZWFzb24gc3dpdGNoZXIiKSkgew0KICAgICAgICAgIEdhbWUuVW5sb2NrKEdhbWUuc2Vhc29uc1tHYW1lLnNlYXNvbl0udHJpZ2dlcik7DQogICAgICAgICAgR2FtZS5zZWFzb25zW0dhbWUuc2Vhc29uXS50cmlnZ2VyVXBncmFkZS5ib3VnaHQgPSAwOw0KICAgICAgICB9DQogICAgICAgIEdhbWUuc2Vhc29uID0gR2FtZS5iYXNlU2Vhc29uOw0KICAgICAgICBHYW1lLnNlYXNvblQgPSAtMTsNCiAgICAgIH0NCg0KICAgICAgLy9wcmVzcyBjdHJsIHRvIGJ1bGstYnV5IDEwLCBzaGlmdCB0byBidWxrLWJ1eSAxMDANCiAgICAgIGlmICghR2FtZS5wcm9tcHRPbikgew0KICAgICAgICBpZiAoKEdhbWUua2V5c1sxNl0gfHwgR2FtZS5rZXlzWzE3XSkgJiYgIUdhbWUuYnV5QnVsa1Nob3J0Y3V0KSB7DQogICAgICAgICAgR2FtZS5idXlCdWxrT2xkID0gR2FtZS5idXlCdWxrOw0KICAgICAgICAgIGlmIChHYW1lLmtleXNbMTZdKSBHYW1lLmJ1eUJ1bGsgPSAxMDA7DQogICAgICAgICAgaWYgKEdhbWUua2V5c1sxN10pIEdhbWUuYnV5QnVsayA9IDEwOw0KICAgICAgICAgIEdhbWUuYnV5QnVsa1Nob3J0Y3V0ID0gMTsNCiAgICAgICAgICBHYW1lLnN0b3JlQnVsa0J1dHRvbigtMSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmICghR2FtZS5rZXlzWzE2XSAmJiAhR2FtZS5rZXlzWzE3XSAmJiBHYW1lLmJ1eUJ1bGtTaG9ydGN1dCkgew0KICAgICAgICAvL3JlbGVhc2UNCiAgICAgICAgR2FtZS5idXlCdWxrID0gR2FtZS5idXlCdWxrT2xkOw0KICAgICAgICBHYW1lLmJ1eUJ1bGtTaG9ydGN1dCA9IDA7DQogICAgICAgIEdhbWUuc3RvcmVCdWxrQnV0dG9uKC0xKTsNCiAgICAgIH0NCg0KICAgICAgLy9oYW5kbGUgY29va2llcw0KICAgICAgaWYgKEdhbWUucmVjYWxjdWxhdGVHYWlucykgR2FtZS5DYWxjdWxhdGVHYWlucygpOw0KICAgICAgR2FtZS5FYXJuKEdhbWUuY29va2llc1BzIC8gR2FtZS5mcHMpOyAvL2FkZCBjb29raWVzIHBlciBzZWNvbmQNCg0KICAgICAgLy9ncm93IGx1bXBzDQogICAgICBHYW1lLmRvTHVtcHMoKTsNCg0KICAgICAgLy9taW5pZ2FtZXMNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuT2JqZWN0c1tpXTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuaXNNaW5pZ2FtZVJlYWR5KG1lKSAmJg0KICAgICAgICAgIG1lLm1pbmlnYW1lLmxvZ2ljICYmDQogICAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2RlICE9IDENCiAgICAgICAgKQ0KICAgICAgICAgIG1lLm1pbmlnYW1lLmxvZ2ljKCk7DQogICAgICB9DQoNCiAgICAgIGlmIChHYW1lLnNwZWNpYWxUYWIgIT0gIiIgJiYgR2FtZS5UICUgKEdhbWUuZnBzICogMykgPT0gMCkNCiAgICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgxKTsNCg0KICAgICAgLy93cmlua2xlcnMNCiAgICAgIGlmIChHYW1lLmNwc1N1Y2tlZCA+IDApIHsNCiAgICAgICAgR2FtZS5EaXNzb2x2ZSgoR2FtZS5jb29raWVzUHMgLyBHYW1lLmZwcykgKiBHYW1lLmNwc1N1Y2tlZCk7DQogICAgICAgIEdhbWUuY29va2llc1N1Y2tlZCArPSAoR2FtZS5jb29raWVzUHMgLyBHYW1lLmZwcykgKiBHYW1lLmNwc1N1Y2tlZDsNCiAgICAgICAgLy9zaG91bGQgYmUgdXNpbmcgb25lIG9mIHRoZSBmb2xsb3dpbmcsIGJ1dCBJJ20gbm90IHN1cmUgd2hhdCBJJ20gdXNpbmcgdGhpcyBzdGF0IGZvciBhbnltb3JlDQogICAgICAgIC8vR2FtZS5jb29raWVzU3Vja2VkPUdhbWUud3JpbmtsZXJzLnJlZHVjZShmdW5jdGlvbihzLHcpe3JldHVybiBzK3cuc3Vja2VkO30sMCk7DQogICAgICAgIC8vZm9yICh2YXIgaSBpbiBHYW1lLndyaW5rbGVycykge0dhbWUuY29va2llc1N1Y2tlZCs9R2FtZS53cmlua2xlcnNbaV0uc3Vja2VkO30NCiAgICAgIH0NCg0KICAgICAgLy92YXIgY3BzPUdhbWUuY29va2llc1BzK0dhbWUuY29va2llcyowLjAxOy8vZXhwb25lbnRpYWwgY29va2llcw0KICAgICAgLy9HYW1lLkVhcm4oY3BzL0dhbWUuZnBzKTsvL2FkZCBjb29raWVzIHBlciBzZWNvbmQNCg0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBtZS50b3RhbENvb2tpZXMgKz0gKG1lLnN0b3JlZFRvdGFsQ3BzICogR2FtZS5nbG9iYWxDcHNNdWx0KSAvIEdhbWUuZnBzOw0KICAgICAgfQ0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLnByZWZzLnBhcnRpY2xlcyAmJg0KICAgICAgICBHYW1lLmNvb2tpZXMgJiYNCiAgICAgICAgR2FtZS5UICUgTWF0aC5jZWlsKEdhbWUuZnBzIC8gTWF0aC5taW4oMTAsIEdhbWUuY29va2llc1BzKSkgPT0gMA0KICAgICAgKQ0KICAgICAgICBHYW1lLnBhcnRpY2xlQWRkKCk7IC8vY29va2llIHNob3dlcg0KDQogICAgICBpZiAoR2FtZS5UICUgKEdhbWUuZnBzICogMTApID09IDApIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7IC8vcmVjYWxjdWxhdGUgQ3BTIGV2ZXJ5IDEwIHNlY29uZHMgKGZvciBkeW5hbWljIGJvb3N0cyBzdWNoIGFzIENlbnR1cnkgZWdnKQ0KDQogICAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJCVVOTE9DS0lORyBTVFVGRg0KCQkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICAgIGlmIChHYW1lLlQgJSBHYW1lLmZwcyA9PSAwICYmIE1hdGgucmFuZG9tKCkgPCAxIC8gMTAwMDAwMCkNCiAgICAgICAgR2FtZS5XaW4oIkp1c3QgcGxhaW4gbHVja3kiKTsgLy8xIGNoYW5jZSBpbiAxLDAwMCwwMDAgZXZlcnkgc2Vjb25kIGFjaGlldmVtZW50DQogICAgICBpZiAoR2FtZS5UICUgKEdhbWUuZnBzICogNSkgPT0gMCAmJiBHYW1lLk9iamVjdHNCeUlkLmxlbmd0aCA+IDApIHsNCiAgICAgICAgLy9jaGVjayBzb21lIGFjaGlldmVtZW50cyBhbmQgdXBncmFkZXMNCiAgICAgICAgaWYgKGlzTmFOKEdhbWUuY29va2llcykpIHsNCiAgICAgICAgICBHYW1lLmNvb2tpZXMgPSAwOw0KICAgICAgICAgIEdhbWUuY29va2llc0Vhcm5lZCA9IDA7DQogICAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciB0aW1lUGxheWVkID0gbmV3IERhdGUoKTsNCiAgICAgICAgdGltZVBsYXllZC5zZXRUaW1lKERhdGUubm93KCkgLSBHYW1lLnN0YXJ0RGF0ZSk7DQoNCiAgICAgICAgaWYgKA0KICAgICAgICAgICFHYW1lLmZ1bGxEYXRlIHx8DQogICAgICAgICAgRGF0ZS5ub3coKSAtIEdhbWUuZnVsbERhdGUgPj0gMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5XaW4oIlNvIG11Y2ggdG8gZG8gc28gbXVjaCB0byBzZWUiKTsNCg0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5jb29raWVzRWFybmVkID49IDEwMDAwMDAgJiYNCiAgICAgICAgICAoR2FtZS5hc2NlbnNpb25Nb2RlID09IDEgfHwgR2FtZS5yZXNldHMgPT0gMCkNCiAgICAgICAgKSB7DQogICAgICAgICAgLy9jaGFsbGVuZ2UgcnVuIG9yIGhhc24ndCBhc2NlbmRlZCB5ZXQNCiAgICAgICAgICBpZiAodGltZVBsYXllZCA8PSAxMDAwICogNjAgKiAzNSkgR2FtZS5XaW4oIlNwZWVkIGJha2luZyBJIik7DQogICAgICAgICAgaWYgKHRpbWVQbGF5ZWQgPD0gMTAwMCAqIDYwICogMjUpIEdhbWUuV2luKCJTcGVlZCBiYWtpbmcgSUkiKTsNCiAgICAgICAgICBpZiAodGltZVBsYXllZCA8PSAxMDAwICogNjAgKiAxNSkgR2FtZS5XaW4oIlNwZWVkIGJha2luZyBJSUkiKTsNCg0KICAgICAgICAgIGlmIChHYW1lLmNvb2tpZUNsaWNrcyA8PSAxNSkgR2FtZS5XaW4oIk5ldmVyY2xpY2siKTsNCiAgICAgICAgICBpZiAoR2FtZS5jb29raWVDbGlja3MgPD0gMCkgR2FtZS5XaW4oIlRydWUgTmV2ZXJjbGljayIpOw0KICAgICAgICAgIGlmIChHYW1lLmNvb2tpZXNFYXJuZWQgPj0gMTAwMDAwMDAwMCAmJiBHYW1lLlVwZ3JhZGVzT3duZWQgPT0gMCkNCiAgICAgICAgICAgIEdhbWUuV2luKCJIYXJkY29yZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVubG9ja0F0KSB7DQogICAgICAgICAgdmFyIHVubG9jayA9IEdhbWUuVW5sb2NrQXRbaV07DQogICAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSB1bmxvY2suY29va2llcykgew0KICAgICAgICAgICAgdmFyIHBhc3MgPSAxOw0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICB1bmxvY2sucmVxdWlyZSAmJg0KICAgICAgICAgICAgICAhR2FtZS5IYXModW5sb2NrLnJlcXVpcmUpICYmDQogICAgICAgICAgICAgICFHYW1lLkhhc0FjaGlldih1bmxvY2sucmVxdWlyZSkNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgcGFzcyA9IDA7DQogICAgICAgICAgICBpZiAodW5sb2NrLnNlYXNvbiAmJiBHYW1lLnNlYXNvbiAhPSB1bmxvY2suc2Vhc29uKSBwYXNzID0gMDsNCiAgICAgICAgICAgIGlmIChwYXNzKSB7DQogICAgICAgICAgICAgIEdhbWUuVW5sb2NrKHVubG9jay5uYW1lKTsNCiAgICAgICAgICAgICAgR2FtZS5XaW4odW5sb2NrLm5hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChHYW1lLkhhcygiR29sZGVuIHN3aXRjaCIpKSBHYW1lLlVubG9jaygiR29sZGVuIHN3aXRjaCBbb2ZmXSIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5IYXMoIlNoaW1tZXJpbmcgdmVpbCIpICYmDQogICAgICAgICAgIUdhbWUuSGFzKCJTaGltbWVyaW5nIHZlaWwgW29mZl0iKSAmJg0KICAgICAgICAgICFHYW1lLkhhcygiU2hpbW1lcmluZyB2ZWlsIFtvbl0iKQ0KICAgICAgICApIHsNCiAgICAgICAgICBHYW1lLlVubG9jaygiU2hpbW1lcmluZyB2ZWlsIFtvbl0iKTsNCiAgICAgICAgICBHYW1lLlVwZ3JhZGVzWyJTaGltbWVyaW5nIHZlaWwgW29mZl0iXS5lYXJuKCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuSGFzKCJTdWdhciBjcmF2aW5nIikpIEdhbWUuVW5sb2NrKCJTdWdhciBmcmVuenkiKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJDbGFzc2ljIGRhaXJ5IHNlbGVjdGlvbiIpKSBHYW1lLlVubG9jaygiTWlsayBzZWxlY3RvciIpOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIkJhc2ljIHdhbGxwYXBlciBhc3NvcnRtZW50IikpDQogICAgICAgICAgR2FtZS5VbmxvY2soIkJhY2tncm91bmQgc2VsZWN0b3IiKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJHb2xkZW4gY29va2llIGFsZXJ0IHNvdW5kIikpDQogICAgICAgICAgR2FtZS5VbmxvY2soIkdvbGRlbiBjb29raWUgc291bmQgc2VsZWN0b3IiKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJTb3VuZCB0ZXN0IikpIEdhbWUuVW5sb2NrKCJKdWtlYm94Iik7DQoNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJQcmlzbSBoZWFydCBiaXNjdWl0cyIpKSBHYW1lLldpbigiTG92ZWx5IGNvb2tpZXMiKTsNCiAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJlYXN0ZXIiKSB7DQogICAgICAgICAgdmFyIGVnZ3MgPSAwOw0KICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5lYXN0ZXJFZ2dzKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXNVbmxvY2tlZChHYW1lLmVhc3RlckVnZ3NbaV0pKSBlZ2dzKys7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChlZ2dzID49IDEpIEdhbWUuV2luKCJUaGUgaHVudCBpcyBvbiIpOw0KICAgICAgICAgIGlmIChlZ2dzID49IDcpIEdhbWUuV2luKCJFZ2dpbmcgb24iKTsNCiAgICAgICAgICBpZiAoZWdncyA+PSAxNCkgR2FtZS5XaW4oIk1hc3MgRWFzdGVyaWEiKTsNCiAgICAgICAgICBpZiAoZWdncyA+PSBHYW1lLmVhc3RlckVnZ3MubGVuZ3RoKSBHYW1lLldpbigiSGlkZSAmIHNlZWsgY2hhbXBpb24iKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSBjb29raWVzIikpIHsNCiAgICAgICAgICB2YXIgbGlzdCA9IEdhbWUuVGllcnNbImZvcnR1bmUiXS51cGdyYWRlczsNCiAgICAgICAgICB2YXIgZm9ydHVuZXMgPSAwOw0KICAgICAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgew0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKGxpc3RbaV0ubmFtZSkpIGZvcnR1bmVzKys7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChmb3J0dW5lcyA+PSBsaXN0Lmxlbmd0aCkgR2FtZS5XaW4oIk8gRm9ydHVuYSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJMZWdhY3kiKSAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgew0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJIZWF2ZW5seSBjaGlwIHNlY3JldCIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiSGVhdmVubHkgY2hpcCBzZWNyZXQiKSkNCiAgICAgICAgICAgIEdhbWUuVW5sb2NrKCJIZWF2ZW5seSBjb29raWUgc3RhbmQiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkhlYXZlbmx5IGNvb2tpZSBzdGFuZCIpKSBHYW1lLlVubG9jaygiSGVhdmVubHkgYmFrZXJ5Iik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBiYWtlcnkiKSkNCiAgICAgICAgICAgIEdhbWUuVW5sb2NrKCJIZWF2ZW5seSBjb25mZWN0aW9uZXJ5Iik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBjb25mZWN0aW9uZXJ5IikpIEdhbWUuVW5sb2NrKCJIZWF2ZW5seSBrZXkiKTsNCg0KICAgICAgICAgIGlmIChHYW1lLkhhcygiSGVhdmVubHkga2V5IikpIEdhbWUuV2luKCJXaG9sZXNvbWUiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5CYW5rQWNoaWV2ZW1lbnRzKSB7DQogICAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSBHYW1lLkJhbmtBY2hpZXZlbWVudHNbaV0udGhyZXNob2xkKQ0KICAgICAgICAgICAgR2FtZS5XaW4oR2FtZS5CYW5rQWNoaWV2ZW1lbnRzW2ldLm5hbWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGJ1aWxkaW5nc093bmVkID0gMDsNCiAgICAgICAgdmFyIG1hdGhlbWF0aWNpYW4gPSAxOw0KICAgICAgICB2YXIgYmFzZTEwID0gMTsNCiAgICAgICAgdmFyIG1pbkFtb3VudCA9IDEwMDAwMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICBidWlsZGluZ3NPd25lZCArPSBHYW1lLk9iamVjdHNbaV0uYW1vdW50Ow0KICAgICAgICAgIG1pbkFtb3VudCA9IE1hdGgubWluKEdhbWUuT2JqZWN0c1tpXS5hbW91bnQsIG1pbkFtb3VudCk7DQogICAgICAgICAgaWYgKCFHYW1lLkhhc0FjaGlldigiTWF0aGVtYXRpY2lhbiIpKSB7DQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIEdhbWUuT2JqZWN0c1tpXS5hbW91bnQgPA0KICAgICAgICAgICAgICBNYXRoLm1pbigNCiAgICAgICAgICAgICAgICAxMjgsDQogICAgICAgICAgICAgICAgTWF0aC5wb3coMiwgR2FtZS5PYmplY3RzQnlJZC5sZW5ndGggLSBHYW1lLk9iamVjdHNbaV0uaWQgLSAxKQ0KICAgICAgICAgICAgICApDQogICAgICAgICAgICApDQogICAgICAgICAgICAgIG1hdGhlbWF0aWNpYW4gPSAwOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIUdhbWUuSGFzQWNoaWV2KCJCYXNlIDEwIikpIHsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgR2FtZS5PYmplY3RzW2ldLmFtb3VudCA8DQogICAgICAgICAgICAgIChHYW1lLk9iamVjdHNCeUlkLmxlbmd0aCAtIEdhbWUuT2JqZWN0c1tpXS5pZCkgKiAxMA0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICBiYXNlMTAgPSAwOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDEpIEdhbWUuV2luKCJPbmUgd2l0aCBldmVyeXRoaW5nIik7DQogICAgICAgIGlmIChtYXRoZW1hdGljaWFuID09IDEpIEdhbWUuV2luKCJNYXRoZW1hdGljaWFuIik7DQogICAgICAgIGlmIChiYXNlMTAgPT0gMSkgR2FtZS5XaW4oIkJhc2UgMTAiKTsNCiAgICAgICAgaWYgKG1pbkFtb3VudCA+PSAxMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2VudGVubmlhbCIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJNaWxrIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChtaW5BbW91bnQgPj0gMTUwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkNlbnRlbm5pYWwgYW5kIGEgaGFsZiIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJEYXJrIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChtaW5BbW91bnQgPj0gMjAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkJpY2VudGVubmlhbCIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJXaGl0ZSBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDI1MCkgew0KICAgICAgICAgIEdhbWUuV2luKCJCaWNlbnRlbm5pYWwgYW5kIGEgaGFsZiIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJSdWJ5IGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChtaW5BbW91bnQgPj0gMzAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIlRyaWNlbnRlbm5pYWwiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiTGF2ZW5kZXIgY2hvY29sYXRlIGJ1dHRlciBiaXNjdWl0Iik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG1pbkFtb3VudCA+PSAzNTApIHsNCiAgICAgICAgICBHYW1lLldpbigiVHJpY2VudGVubmlhbCBhbmQgYSBoYWxmIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlN5bnRoZXRpYyBjaG9jb2xhdGUgZ3JlZW4gaG9uZXkgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDQwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJRdWFkcmljZW50ZW5uaWFsIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlJveWFsIHJhc3BiZXJyeSBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDQ1MCkgew0KICAgICAgICAgIEdhbWUuV2luKCJRdWFkcmljZW50ZW5uaWFsIGFuZCBhIGhhbGYiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygNCiAgICAgICAgICAgICJVbHRyYS1jb25jZW50cmF0ZWQgaGlnaC1lbmVyZ3kgY2hvY29sYXRlIGJ1dHRlciBiaXNjdWl0Ig0KICAgICAgICAgICk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG1pbkFtb3VudCA+PSA1MDApIHsNCiAgICAgICAgICBHYW1lLldpbigiUXVpbmNlbnRlbm5pYWwiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiUHVyZSBwaXRjaC1ibGFjayBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDU1MCkgew0KICAgICAgICAgIEdhbWUuV2luKCJRdWluY2VudGVubmlhbCBhbmQgYSBoYWxmIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIkNvc21pYyBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDYwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJTZXhjZW50ZW5uaWFsIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIkJ1dHRlciBiaXNjdWl0ICh3aXRoIGJ1dHRlcikiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDY1MCkgew0KICAgICAgICAgIEdhbWUuV2luKCJTZXhjZW50ZW5uaWFsIGFuZCBhIGhhbGYiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiRXZlcnlidXR0ZXIgYmlzY3VpdCIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2xpY2t0YXN0aWMiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiUGxhc3RpYyBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2xpY2thdGhsb24iKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiSXJvbiBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJDbGlja29seW1waWNzIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlRpdGFuaXVtIG1vdXNlIik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDAwMDAwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2xpY2tvcmFtYSIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJBZGFtYW50aXVtIG1vdXNlIik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDAwMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJDbGlja2FzbWljIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlVub2J0YWluaXVtIG1vdXNlIik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDAwMDAwMDAwMDAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkNsaWNrYWdlZGRvbiIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJFbHVkaXVtIG1vdXNlIik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDAwMDAwMDAwMDAwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2xpY2tuYXJvayIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJXaXNoYWxsb3kgbW91c2UiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS5oYW5kbWFkZUNvb2tpZXMgPj0gMTAwMDAwMDAwMDAwMDAwMDAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkNsaWNrYXN0cm9waGUiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiRmFudGFzdGVlbCBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJDbGlja2F0YWNseXNtIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIk5ldmVyY3JhY2sgbW91c2UiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS5oYW5kbWFkZUNvb2tpZXMgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJUaGUgdWx0aW1hdGUgY2xpY2tkb3duIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIkFybXl0aHJpbCBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQWxsIHRoZSBvdGhlciBraWRzIHdpdGggdGhlIHB1bXBlZCB1cCBjbGlja3MiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiVGVjaG5vYnNpZGlhbiBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJPbmUuLi5tb3JlLi4uY2xpY2suLi4iKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiUGxhc21hcmJsZSBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkNsaWNrZXR5IHNwbGl0Iik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIk1pcmFjdWxpdGUgbW91c2UiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS5oYW5kbWFkZUNvb2tpZXMgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkFpbid0IHRoYXQgYSBjbGljayBpbiB0aGUgaGVhZCIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJBZXRoZXJpY2UgbW91c2UiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChHYW1lLmNvb2tpZXNFYXJuZWQgPCBHYW1lLmNvb2tpZXMpDQogICAgICAgICAgR2FtZS5XaW4oIkNoZWF0ZWQgY29va2llcyB0YXN0ZSBhd2Z1bCIpOw0KDQogICAgICAgIGlmICgNCiAgICAgICAgICBHYW1lLkhhcygiU2t1bGwgY29va2llcyIpICYmDQogICAgICAgICAgR2FtZS5IYXMoIkdob3N0IGNvb2tpZXMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJCYXQgY29va2llcyIpICYmDQogICAgICAgICAgR2FtZS5IYXMoIlNsaW1lIGNvb2tpZXMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJQdW1wa2luIGNvb2tpZXMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJFeWViYWxsIGNvb2tpZXMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJTcGlkZXIgY29va2llcyIpDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLldpbigiU3Bvb2t5IGNvb2tpZXMiKTsNCiAgICAgICAgaWYgKEdhbWUud3JpbmtsZXJzUG9wcGVkID49IDEpIEdhbWUuV2luKCJJdGNoc2NyYXRjaGVyIik7DQogICAgICAgIGlmIChHYW1lLndyaW5rbGVyc1BvcHBlZCA+PSA1MCkgR2FtZS5XaW4oIldyaW5rbGVzcXVpc2hlciIpOw0KICAgICAgICBpZiAoR2FtZS53cmlua2xlcnNQb3BwZWQgPj0gMjAwKSBHYW1lLldpbigiTW9pc3RidXJzdGVyIik7DQoNCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwMDAwICYmDQogICAgICAgICAgR2FtZS5IYXMoIkhvdyB0byBiYWtlIHlvdXIgZHJhZ29uIikNCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJBIGNydW1ibHkgZWdnIik7DQoNCiAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSAyNSAmJiBHYW1lLnNlYXNvbiA9PSAiY2hyaXN0bWFzIikNCiAgICAgICAgICBHYW1lLlVubG9jaygiQSBmZXN0aXZlIGhhdCIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5IYXMoIkNocmlzdG1hcyB0cmVlIGJpc2N1aXRzIikgJiYNCiAgICAgICAgICBHYW1lLkhhcygiU25vd2ZsYWtlIGJpc2N1aXRzIikgJiYNCiAgICAgICAgICBHYW1lLkhhcygiU25vd21hbiBiaXNjdWl0cyIpICYmDQogICAgICAgICAgR2FtZS5IYXMoIkhvbGx5IGJpc2N1aXRzIikgJiYNCiAgICAgICAgICBHYW1lLkhhcygiQ2FuZHkgY2FuZSBiaXNjdWl0cyIpICYmDQogICAgICAgICAgR2FtZS5IYXMoIkJlbGwgYmlzY3VpdHMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJQcmVzZW50IGJpc2N1aXRzIikNCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuV2luKCJMZXQgaXQgc25vdyIpOw0KDQogICAgICAgIGlmIChHYW1lLnJlaW5kZWVyQ2xpY2tlZCA+PSAxKSBHYW1lLldpbigiT2ggZGVlciIpOw0KICAgICAgICBpZiAoR2FtZS5yZWluZGVlckNsaWNrZWQgPj0gNTApIEdhbWUuV2luKCJTbGVpZ2ggb2YgaGFuZCIpOw0KICAgICAgICBpZiAoR2FtZS5yZWluZGVlckNsaWNrZWQgPj0gMjAwKSBHYW1lLldpbigiUmVpbmRlZXIgc2xlaWdoZXIiKTsNCg0KICAgICAgICBpZiAoYnVpbGRpbmdzT3duZWQgPj0gMTAwKSBHYW1lLldpbigiQnVpbGRlciIpOw0KICAgICAgICBpZiAoYnVpbGRpbmdzT3duZWQgPj0gNTAwKSBHYW1lLldpbigiQXJjaGl0ZWN0Iik7DQogICAgICAgIGlmIChidWlsZGluZ3NPd25lZCA+PSAxMDAwKSBHYW1lLldpbigiRW5naW5lZXIiKTsNCiAgICAgICAgaWYgKGJ1aWxkaW5nc093bmVkID49IDI1MDApIEdhbWUuV2luKCJMb3JkIG9mIENvbnN0cnVjdHMiKTsNCiAgICAgICAgaWYgKGJ1aWxkaW5nc093bmVkID49IDUwMDApIEdhbWUuV2luKCJHcmFuZCBkZXNpZ24iKTsNCiAgICAgICAgaWYgKGJ1aWxkaW5nc093bmVkID49IDc1MDApIEdhbWUuV2luKCJFY3VtZW5vcG9saXMiKTsNCiAgICAgICAgaWYgKGJ1aWxkaW5nc093bmVkID49IDEwMDAwKSBHYW1lLldpbigiTXlyaWFkIik7DQogICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzT3duZWQgPj0gMjApIEdhbWUuV2luKCJFbmhhbmNlciIpOw0KICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc093bmVkID49IDUwKSBHYW1lLldpbigiQXVnbWVudGVyIik7DQogICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzT3duZWQgPj0gMTAwKSBHYW1lLldpbigiVXBncmFkZXIiKTsNCiAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNPd25lZCA+PSAyMDApIEdhbWUuV2luKCJMb3JkIG9mIFByb2dyZXNzIik7DQogICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzT3duZWQgPj0gMzAwKSBHYW1lLldpbigiVGhlIGZ1bGwgcGljdHVyZSIpOw0KICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc093bmVkID49IDQwMCkNCiAgICAgICAgICBHYW1lLldpbigiV2hlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBhZGQiKTsNCiAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNPd25lZCA+PSA1MDApIEdhbWUuV2luKCJLYWl6ZW4iKTsNCiAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNPd25lZCA+PSA2MDApIEdhbWUuV2luKCJCZXlvbmQgcXVhbGl0eSIpOw0KICAgICAgICBpZiAoYnVpbGRpbmdzT3duZWQgPj0gNDAwMCAmJiBHYW1lLlVwZ3JhZGVzT3duZWQgPj0gMzAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJQb2x5bWF0aCIpOw0KICAgICAgICBpZiAoYnVpbGRpbmdzT3duZWQgPj0gODAwMCAmJiBHYW1lLlVwZ3JhZGVzT3duZWQgPj0gNDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJSZW5haXNzYW5jZSBiYWtlciIpOw0KDQogICAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIkplbGxpY2xlcyIpKSB7DQogICAgICAgICAgdmFyIGtpdHRlbnMgPSAwOw0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5VcGdyYWRlc0J5UG9vbFsia2l0dGVuIl0ubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcyhHYW1lLlVwZ3JhZGVzQnlQb29sWyJraXR0ZW4iXVtpXS5uYW1lKSkga2l0dGVucysrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoa2l0dGVucyA+PSAxMCkgR2FtZS5XaW4oIkplbGxpY2xlcyIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSAxZTE0ICYmICFHYW1lLkhhc0FjaGlldigiWW91IHdpbiBhIGNvb2tpZSIpKSB7DQogICAgICAgICAgR2FtZS5XaW4oIllvdSB3aW4gYSBjb29raWUiKTsNCiAgICAgICAgICBHYW1lLkVhcm4oMSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5zaGltbWVyVHlwZXNbImdvbGRlbiJdLm4gPj0gNCkgR2FtZS5XaW4oIkZvdXItbGVhZiBjb29raWUiKTsNCg0KICAgICAgICB2YXIgZ3JhbmRtYXMgPSAwOw0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuR3JhbmRtYVN5bmVyZ2llcykgew0KICAgICAgICAgIGlmIChHYW1lLkhhcyhHYW1lLkdyYW5kbWFTeW5lcmdpZXNbaV0pKSBncmFuZG1hcysrOw0KICAgICAgICB9DQogICAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIkVsZGVyIikgJiYgZ3JhbmRtYXMgPj0gNykgR2FtZS5XaW4oIkVsZGVyIik7DQogICAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIlZldGVyYW4iKSAmJiBncmFuZG1hcyA+PSAxNCkgR2FtZS5XaW4oIlZldGVyYW4iKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+PSA2ICYmDQogICAgICAgICAgIUdhbWUuSGFzKCJCaW5nbyBjZW50ZXIvUmVzZWFyY2ggZmFjaWxpdHkiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzQWNoaWV2KCJFbGRlciIpDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jaygiQmluZ28gY2VudGVyL1Jlc2VhcmNoIGZhY2lsaXR5Iik7DQogICAgICAgIGlmIChHYW1lLnBsZWRnZXMgPiAwKSBHYW1lLldpbigiRWxkZXIgbmFwIik7DQogICAgICAgIGlmIChHYW1lLnBsZWRnZXMgPj0gNSkgR2FtZS5XaW4oIkVsZGVyIHNsdW1iZXIiKTsNCiAgICAgICAgaWYgKEdhbWUucGxlZGdlcyA+PSAxMCkgR2FtZS5VbmxvY2soIlNhY3JpZmljaWFsIHJvbGxpbmcgcGlucyIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5PYmplY3RzWyJDdXJzb3IiXS5hbW91bnQgKyBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPj0NCiAgICAgICAgICA3NzcNCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuV2luKCJUaGUgZWxkZXIgc2Nyb2xscyIpOw0KDQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgdmFyIGl0ID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICAgIGZvciAodmFyIGlpIGluIGl0LnByb2R1Y3Rpb25BY2hpZXZzKSB7DQogICAgICAgICAgICBpZiAoaXQudG90YWxDb29raWVzID49IGl0LnByb2R1Y3Rpb25BY2hpZXZzW2lpXS5wb3cpDQogICAgICAgICAgICAgIEdhbWUuV2luKGl0LnByb2R1Y3Rpb25BY2hpZXZzW2lpXS5hY2hpZXYubmFtZSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKA0KICAgICAgICAgICFHYW1lLkhhc0FjaGlldigiQ29va2llLWR1bmtlciIpICYmDQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZCAmJg0KICAgICAgICAgIEdhbWUubWlsa1Byb2dyZXNzID4gMC4xICYmDQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0ICogMC40ICsgMjU2IC8gMiAtIDE2ID4NCiAgICAgICAgICAgICgxIC0gR2FtZS5taWxrSGQpICogR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0DQogICAgICAgICkNCiAgICAgICAgICBHYW1lLldpbigiQ29va2llLWR1bmtlciIpOw0KICAgICAgICAvLyYmIGwoJ2JpZ0Nvb2tpZScpLmdldEJvdW5kcygpLmJvdHRvbT5sKCdtaWxrJykuZ2V0Qm91bmRzKCkudG9wKzE2ICYmIEdhbWUubWlsa1Byb2dyZXNzPjAuMSkgR2FtZS5XaW4oJ0Nvb2tpZS1kdW5rZXInKTsNCg0KICAgICAgICBHYW1lLnJ1bk1vZEhvb2soImNoZWNrIik7DQogICAgICB9DQoNCiAgICAgIEdhbWUuY29va2llc2QgKz0gKEdhbWUuY29va2llcyAtIEdhbWUuY29va2llc2QpICogMC4zOw0KDQogICAgICBpZiAoR2FtZS5zdG9yZVRvUmVmcmVzaCkgR2FtZS5SZWZyZXNoU3RvcmUoKTsNCiAgICAgIGlmIChHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkKSBHYW1lLlJlYnVpbGRVcGdyYWRlcygpOw0KDQogICAgICBHYW1lLnVwZGF0ZVNoaW1tZXJzKCk7DQogICAgICBHYW1lLnVwZGF0ZUJ1ZmZzKCk7DQoNCiAgICAgIEdhbWUuVXBkYXRlVGlja2VyKCk7DQogICAgfQ0KDQogICAgaWYgKEdhbWUuVCAlIChHYW1lLmZwcyAqIDIpID09IDApIHsNCiAgICAgIHZhciB0aXRsZSA9ICJDb29raWUgQ2xpY2tlciI7DQogICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImZvb2xzIikgdGl0bGUgPSAiQ29va2llIEJha2VyIjsNCiAgICAgIGRvY3VtZW50LnRpdGxlID0NCiAgICAgICAgKEdhbWUuT25Bc2NlbmQgPyAoRU4gPyAiQXNjZW5kaW5nISAiIDogbG9jKCJBc2NlbmRpbmciKSArICIgfCAiKSA6ICIiKSArDQogICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KEdhbWUuY29va2llcykpICsNCiAgICAgICAgIiAtICIgKw0KICAgICAgICB0aXRsZTsNCiAgICB9DQogICAgaWYgKEdhbWUuVCAlIDE1ID09IDApIHsNCiAgICAgIC8vd3JpdHRlbiB0aHJvdWdoIHRoZSBtYWdpYyBvZiAiaG9wZSBmb3IgdGhlIGJlc3QiIG1hdGhzDQogICAgICB2YXIgY2hpcHNPd25lZCA9IEdhbWUuSG93TXVjaFByZXN0aWdlKEdhbWUuY29va2llc1Jlc2V0KTsNCiAgICAgIHZhciBhc2NlbmROb3dUb093biA9IE1hdGguZmxvb3IoDQogICAgICAgIEdhbWUuSG93TXVjaFByZXN0aWdlKEdhbWUuY29va2llc1Jlc2V0ICsgR2FtZS5jb29raWVzRWFybmVkKQ0KICAgICAgKTsNCiAgICAgIHZhciBhc2NlbmROb3dUb0dldCA9IGFzY2VuZE5vd1RvT3duIC0gTWF0aC5mbG9vcihjaGlwc093bmVkKTsNCiAgICAgIHZhciBuZXh0Q2hpcEF0ID0NCiAgICAgICAgR2FtZS5Ib3dNYW55Q29va2llc1Jlc2V0KE1hdGguZmxvb3IoY2hpcHNPd25lZCArIGFzY2VuZE5vd1RvR2V0ICsgMSkpIC0NCiAgICAgICAgR2FtZS5Ib3dNYW55Q29va2llc1Jlc2V0KE1hdGguZmxvb3IoY2hpcHNPd25lZCArIGFzY2VuZE5vd1RvR2V0KSk7DQogICAgICB2YXIgY29va2llc1RvTmV4dCA9DQogICAgICAgIEdhbWUuSG93TWFueUNvb2tpZXNSZXNldChhc2NlbmROb3dUb093biArIDEpIC0NCiAgICAgICAgKEdhbWUuY29va2llc0Vhcm5lZCArIEdhbWUuY29va2llc1Jlc2V0KTsNCiAgICAgIHZhciBwZXJjZW50ID0gMSAtIGNvb2tpZXNUb05leHQgLyBuZXh0Q2hpcEF0Ow0KDQogICAgICAvL2ZpbGwgdGhlIHRvb2x0aXAgdW5kZXIgdGhlIExlZ2FjeSB0YWINCiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsNCiAgICAgIGRhdGUuc2V0VGltZShEYXRlLm5vdygpIC0gR2FtZS5zdGFydERhdGUpOw0KICAgICAgdmFyIHRpbWVJblNlY29uZHMgPSBkYXRlLmdldFRpbWUoKSAvIDEwMDA7DQogICAgICB2YXIgc3RhcnREYXRlID0gR2FtZS5zYXlUaW1lKHRpbWVJblNlY29uZHMgKiBHYW1lLmZwcywgLTEpOw0KDQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBpZiAoRU4pDQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICJZb3UndmUgYmVlbiBvbiB0aGlzIHJ1biBmb3IgPGI+IiArDQogICAgICAgICAgKHN0YXJ0RGF0ZSA9PSAiIiA/ICJub3QgdmVyeSBsb25nIiA6IHN0YXJ0RGF0ZSkgKw0KICAgICAgICAgICI8L2I+Ljxicj4iOw0KICAgICAgZWxzZQ0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICBsb2MoIllvdSd2ZSBiZWVuIG9uIHRoaXMgcnVuIGZvciA8Yj4lMTwvYj4uIiwgc3RhcnREYXRlKSArICI8YnI+IjsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIGlmIChHYW1lLnByZXN0aWdlID4gMCkgew0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJZb3VyIHByZXN0aWdlIGxldmVsIGlzIGN1cnJlbnRseSA8Yj4lMTwvYj4uPGJyPihDcFMgKyUyJSkiLA0KICAgICAgICAgIFtCZWF1dGlmeShHYW1lLnByZXN0aWdlKSwgQmVhdXRpZnkoR2FtZS5wcmVzdGlnZSldDQogICAgICAgICk7DQogICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIH0NCiAgICAgIGlmIChhc2NlbmROb3dUb0dldCA8IDEpDQogICAgICAgIHN0ciArPSBsb2MoIkFzY2VuZGluZyBub3cgd291bGQgZ3JhbnQgeW91IG5vIHByZXN0aWdlLiIpOw0KICAgICAgZWxzZSBpZiAoYXNjZW5kTm93VG9HZXQgPCAyKQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJBc2NlbmRpbmcgbm93IHdvdWxkIGdyYW50IHlvdTxicj48Yj4xIHByZXN0aWdlIGxldmVsPC9iPiAoKzElIENwUyk8YnI+YW5kIDxiPjEgaGVhdmVubHkgY2hpcDwvYj4gdG8gc3BlbmQuIg0KICAgICAgICApOw0KICAgICAgZWxzZQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJBc2NlbmRpbmcgbm93IHdvdWxkIGdyYW50IHlvdTxicj48Yj4lMSBwcmVzdGlnZSBsZXZlbHM8L2I+ICgrJTIlIENwUyk8YnI+YW5kIDxiPiUzIGhlYXZlbmx5IGNoaXBzPC9iPiB0byBzcGVuZC4iLA0KICAgICAgICAgIFsNCiAgICAgICAgICAgIEJlYXV0aWZ5KGFzY2VuZE5vd1RvR2V0KSwNCiAgICAgICAgICAgIEJlYXV0aWZ5KGFzY2VuZE5vd1RvR2V0KSwNCiAgICAgICAgICAgIEJlYXV0aWZ5KGFzY2VuZE5vd1RvR2V0KSwNCiAgICAgICAgICBdDQogICAgICAgICk7DQogICAgICBpZiAoY29va2llc1RvTmV4dCA+PSAwKSB7DQogICAgICAgIC8vbm90ZTogY29va2llc1RvTmV4dCBjYW4gYmUgbmVnYXRpdmUgYXQgaGlnaGVyIEhDIGFtb3VudHMgZHVlIHRvIHByZWNpc2lvbiBsb3NzLiB3ZSBzaW1wbHkgaGlkZSBpdCBpbiBzdWNoIGNhc2VzLCBhcyB0aGlzIHVzdWFsbHkgb25seSBvY2N1cnMgd2hlbiB0aGUgZ2FwIGlzIHNtYWxsIGFuZCByYXBpZGx5IG92ZXJjb21lIGFueXdheQ0KICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pic7DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICJZb3UgbmVlZCA8Yj4lMSBtb3JlIGNvb2tpZXM8L2I+IGZvciB0aGUgbmV4dCBsZXZlbC4iLA0KICAgICAgICAgICAgQmVhdXRpZnkoY29va2llc1RvTmV4dCkNCiAgICAgICAgICApICsgIjxicj4iOw0KICAgICAgfQ0KICAgICAgbCgiYXNjZW5kVG9vbHRpcCIpLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgaWYgKGFzY2VuZE5vd1RvR2V0ID4gMCkgew0KICAgICAgICAvL3Nob3cgbnVtYmVyIHNheWluZyBob3cgbWFueSBjaGlwcyB5b3UnZCBnZXQgcmVzZXR0aW5nIG5vdw0KICAgICAgICBHYW1lLmFzY2VuZE51bWJlci50ZXh0Q29udGVudCA9ICIrIiArIFNpbXBsZUJlYXV0aWZ5KGFzY2VuZE5vd1RvR2V0KTsNCiAgICAgICAgR2FtZS5hc2NlbmROdW1iZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBHYW1lLmFzY2VuZE51bWJlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgfQ0KDQogICAgICBpZiAoDQogICAgICAgIGFzY2VuZE5vd1RvR2V0ID4gR2FtZS5hc2NlbmRNZXRlckxldmVsIHx8DQogICAgICAgIEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50VCA8IEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50DQogICAgICApIHsNCiAgICAgICAgLy9yZXNldCB0aGUgZ2F1Z2UgYW5kIHBsYXkgYSBzb3VuZCBpZiB3ZSBnYWluZWQgYSBwb3RlbnRpYWwgbGV2ZWwNCiAgICAgICAgR2FtZS5hc2NlbmRNZXRlclBlcmNlbnQgPSAwOw0KICAgICAgICAvL1BsYXlTb3VuZCgnc25kL2xldmVsUHJlc3RpZ2UubXAzJyk7Ly9hIGJpdCB0b28gYW5ub3lpbmcNCiAgICAgIH0NCiAgICAgIEdhbWUuYXNjZW5kTWV0ZXJMZXZlbCA9IGFzY2VuZE5vd1RvR2V0Ow0KICAgICAgR2FtZS5hc2NlbmRNZXRlclBlcmNlbnRUID0gcGVyY2VudDsgLy9nYXVnZSB0aGF0IGZpbGxzIHVwIGFzIHlvdSBuZWFyIHlvdXIgbmV4dCBjaGlwDQogICAgICAvL2lmIChHYW1lLmFzY2VuZE1ldGVyUGVyY2VudFQ8R2FtZS5hc2NlbmRNZXRlclBlcmNlbnQpIHtHYW1lLmFzY2VuZE1ldGVyUGVyY2VudD0wO1BsYXlTb3VuZCgnc25kL2xldmVsUHJlc3RpZ2UubXAzJywwLjUpO30NCiAgICAgIC8vaWYgKHBlcmNlbnQ+PTEpIHtHYW1lLmFzY2VuZE1ldGVyLmNsYXNzTmFtZT0nJzt9IGVsc2UgR2FtZS5hc2NlbmRNZXRlci5jbGFzc05hbWU9J2ZpbGxpbmcnOw0KICAgIH0NCiAgICAvL0dhbWUuYXNjZW5kTWV0ZXIuc3R5bGUucmlnaHQ9TWF0aC5mbG9vcihNYXRoLm1heCgwLDEtR2FtZS5hc2NlbmRNZXRlclBlcmNlbnQpKjEwMCkrJ3B4JzsNCiAgICBHYW1lLmFzY2VuZE1ldGVyLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAtR2FtZS5UICogMC41IC0gR2FtZS5hc2NlbmRNZXRlclBlcmNlbnQgKiAxMDAgKyAicHgiOw0KICAgIEdhbWUuYXNjZW5kTWV0ZXIuc3R5bGUudHJhbnNmb3JtID0NCiAgICAgICJ0cmFuc2xhdGUoIiArDQogICAgICBNYXRoLmZsb29yKC1NYXRoLm1heCgwLCAxIC0gR2FtZS5hc2NlbmRNZXRlclBlcmNlbnQpICogMTAwKSArDQogICAgICAiJSwwcHgpIjsNCiAgICBHYW1lLmFzY2VuZE1ldGVyUGVyY2VudCArPQ0KICAgICAgKEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50VCAtIEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50KSAqIDAuMTsNCg0KICAgIEdhbWUuTm90ZXNMb2dpYygpOw0KICAgIGlmIChHYW1lLm1vdXNlTW92ZWQgfHwgR2FtZS5TY3JvbGwgfHwgR2FtZS50b29sdGlwLmR5bmFtaWMpDQogICAgICBHYW1lLnRvb2x0aXAudXBkYXRlKCk7DQoNCiAgICBpZiAoDQogICAgICBHYW1lLlQgJSAoR2FtZS5mcHMgKiA1KSA9PSAwICYmDQogICAgICAhR2FtZS5tb3VzZURvd24gJiYNCiAgICAgIChHYW1lLm9uTWVudSA9PSAic3RhdHMiIHx8IEdhbWUub25NZW51ID09ICJwcmVmcyIpDQogICAgKQ0KICAgICAgR2FtZS5VcGRhdGVNZW51KCk7DQogICAgaWYgKEdhbWUuVCAlIChHYW1lLmZwcyAqIDEpID09IDApIEdhbWUuVXBkYXRlUHJvbXB0KCk7DQogICAgaWYgKEdhbWUuQXNjZW5kVGltZXIgPiAwKSBHYW1lLlVwZGF0ZUFzY2VuZEludHJvKCk7DQogICAgaWYgKEdhbWUuUmVpbmNhcm5hdGVUaW1lciA+IDApIEdhbWUuVXBkYXRlUmVpbmNhcm5hdGVJbnRybygpOw0KICAgIGlmIChHYW1lLk9uQXNjZW5kKSBHYW1lLlVwZGF0ZUFzY2VuZCgpOw0KDQogICAgR2FtZS5ydW5Nb2RIb29rKCJsb2dpYyIpOw0KDQogICAgaWYgKEdhbWUuc3BhcmtsZXNUID4gMCkgew0KICAgICAgR2FtZS5zcGFya2xlcy5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPQ0KICAgICAgICAtTWF0aC5mbG9vcigoR2FtZS5zcGFya2xlc0ZyYW1lcyAtIEdhbWUuc3BhcmtsZXNUICsgMSkgKiAxMjgpICsNCiAgICAgICAgInB4IDBweCI7DQogICAgICBHYW1lLnNwYXJrbGVzVC0tOw0KICAgICAgaWYgKEdhbWUuc3BhcmtsZXNUID09IDEpIEdhbWUuc3BhcmtsZXMuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICB9DQoNCiAgICBHYW1lLkNsaWNrID0gMDsNCiAgICBHYW1lLlNjcm9sbCA9IDA7DQogICAgR2FtZS5tb3VzZU1vdmVkID0gMDsNCiAgICBHYW1lLkNhbkNsaWNrID0gMTsNCg0KICAgIGlmICgNCiAgICAgIChHYW1lLnRvU2F2ZSB8fA0KICAgICAgICAoR2FtZS5UICUgKEdhbWUuZnBzICogNjApID09IDAgJiYNCiAgICAgICAgICBHYW1lLlQgPiBHYW1lLmZwcyAqIDEwICYmDQogICAgICAgICAgR2FtZS5wcmVmcy5hdXRvc2F2ZSkpICYmDQogICAgICAhR2FtZS5PbkFzY2VuZA0KICAgICkgew0KICAgICAgLy9jaGVjayBpZiB3ZSBjYW4gc2F2ZSA6IG5vIG1pbmlnYW1lcyBhcmUgbG9hZGluZw0KICAgICAgdmFyIGNhblNhdmUgPSB0cnVlOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAobWUubWluaWdhbWVMb2FkaW5nKSB7DQogICAgICAgICAgY2FuU2F2ZSA9IGZhbHNlOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoY2FuU2F2ZSkgR2FtZS5Xcml0ZVNhdmUoKTsNCiAgICB9DQogICAgaWYgKCFHYW1lLnRvU2F2ZSAmJiAhR2FtZS5pc1NhdmluZykgew0KICAgICAgaWYgKEdhbWUudG9SZWxvYWQpIHsNCiAgICAgICAgR2FtZS50b1JlbG9hZCA9IGZhbHNlOw0KICAgICAgICBpZiAoIUFwcCkgew0KICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIEFwcC5yZWxvYWQoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKEdhbWUudG9RdWl0KSB7DQogICAgICAgIEdhbWUudG9RdWl0ID0gZmFsc2U7DQogICAgICAgIGlmICghQXBwKSB7DQogICAgICAgICAgd2luZG93LmNsb3NlKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgQXBwLnF1aXQoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChBcHAgJiYgQXBwLmxvZ2ljKSBBcHAubG9naWMoR2FtZS5UKTsNCg0KICAgIC8vZXZlcnkgaG91cjogZ2V0IHNlcnZlciBkYXRhIChpZS4gdXBkYXRlIG5vdGlmaWNhdGlvbiwgcGF0cmVvbiwgc3RlYW0gZXRjKQ0KICAgIGlmICgNCiAgICAgIEdhbWUuVCAlIChHYW1lLmZwcyAqIDYwICogNjApID09IDAgJiYNCiAgICAgIEdhbWUuVCA+IEdhbWUuZnBzICogMTAgLyogJiYgR2FtZS5wcmVmcy5hdXRvdXBkYXRlKi8NCiAgICApIHsNCiAgICAgIEdhbWUuQ2hlY2tVcGRhdGVzKCk7DQogICAgICBHYW1lLkdyYWJEYXRhKCk7DQogICAgfQ0KDQogICAgR2FtZS5UKys7DQogIH07DQoNCiAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJRFJBVw0KCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgR2FtZS5EcmF3ID0gZnVuY3Rpb24gKCkgew0KICAgIEdhbWUuRHJhd0JhY2tncm91bmQoKTsNCiAgICBUaW1lci50cmFjaygiZW5kIG9mIGJhY2tncm91bmQiKTsNCg0KICAgIGlmICghR2FtZS5PbkFzY2VuZCkgew0KICAgICAgdmFyIHN0ciA9IEJlYXV0aWZ5KE1hdGgucm91bmQoR2FtZS5jb29raWVzZCkpOw0KICAgICAgaWYgKEdhbWUuY29va2llc2QgPj0gMTAwMDAwMCkgew0KICAgICAgICAvL2RpcnR5IHBhZGRpbmcNCiAgICAgICAgdmFyIHNwYWNlUG9zID0gc3RyLmluZGV4T2YoIiAiKTsNCiAgICAgICAgdmFyIGRvdFBvcyA9IHN0ci5pbmRleE9mKCIuIik7DQogICAgICAgIHZhciBhZGQgPSAiIjsNCiAgICAgICAgaWYgKHNwYWNlUG9zICE9IC0xKSB7DQogICAgICAgICAgaWYgKGRvdFBvcyA9PSAtMSkgYWRkICs9ICIuMDAwIjsNCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGlmIChzcGFjZVBvcyAtIGRvdFBvcyA9PSAyKSBhZGQgKz0gIjAwIjsNCiAgICAgICAgICAgIGlmIChzcGFjZVBvcyAtIGRvdFBvcyA9PSAzKSBhZGQgKz0gIjAiOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBzdHIgPSBbc3RyLnNsaWNlKDAsIHNwYWNlUG9zKSwgYWRkLCBzdHIuc2xpY2Uoc3BhY2VQb3MpXS5qb2luKCIiKTsNCiAgICAgIH0NCg0KICAgICAgc3RyID0gbG9jKCIlMSBjb29raWUiLCB7IG46IE1hdGgucm91bmQoR2FtZS5jb29raWVzZCksIGI6IHN0ciB9KTsNCiAgICAgIGlmIChzdHIubGVuZ3RoID4gMTQpIHN0ciA9IHN0ci5yZXBsYWNlKCIgIiwgIjxicj4iKTsNCg0KICAgICAgaWYgKEdhbWUucHJlZnMubW9ub3NwYWNlKQ0KICAgICAgICBzdHIgPSAnPHNwYW4gY2xhc3M9Im1vbm9zcGFjZSI+JyArIHN0ciArICI8L3NwYW4+IjsNCiAgICAgIHN0ciA9DQogICAgICAgIHN0ciArDQogICAgICAgICc8ZGl2IGlkPSJjb29raWVzUGVyU2Vjb25kIicgKw0KICAgICAgICAoR2FtZS5jcHNTdWNrZWQgPiAwID8gJyBjbGFzcz0id3JpbmtsZWQiJyA6ICIiKSArDQogICAgICAgICI+IiArDQogICAgICAgIGxvYygicGVyIHNlY29uZDoiKSArDQogICAgICAgICIgIiArDQogICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc1BzICogKDEgLSBHYW1lLmNwc1N1Y2tlZCksIDEpICsNCiAgICAgICAgIjwvZGl2PiI7DQogICAgICBsKCJjb29raWVzIikuaW5uZXJIVE1MID0gc3RyOw0KICAgICAgVGltZXIudHJhY2soImNvb2tpZSBhbW91bnQiKTsNCg0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAobWUub25NaW5pZ2FtZSAmJiBtZS5taW5pZ2FtZS5kcmF3ICYmICFtZS5tdXRlZCAmJiAhR2FtZS5vbk1lbnUpDQogICAgICAgICAgbWUubWluaWdhbWUuZHJhdygpOw0KICAgICAgfQ0KICAgICAgVGltZXIudHJhY2soImRyYXcgbWluaWdhbWVzIik7DQoNCiAgICAgIGlmIChHYW1lLmRyYXdUICUgNSA9PSAwKSB7DQogICAgICAgIC8vaWYgKEdhbWUucHJlZnMubW9ub3NwYWNlKSB7bCgnY29va2llcycpLmNsYXNzTmFtZT0ndGl0bGUgbW9ub3NwYWNlJzt9IGVsc2Uge2woJ2Nvb2tpZXMnKS5jbGFzc05hbWU9J3RpdGxlJzt9DQogICAgICAgIHZhciBsYXN0TG9ja2VkID0gMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNbaV07DQoNCiAgICAgICAgICAvL21ha2UgcHJvZHVjdHMgZnVsbC1vcGFjaXR5IGlmIHdlIGNhbiBidXkgdGhlbQ0KICAgICAgICAgIHZhciBjbGFzc2VzID0gInByb2R1Y3QiOw0KICAgICAgICAgIHZhciBwcmljZSA9IG1lLmJ1bGtQcmljZTsNCiAgICAgICAgICBpZiAoR2FtZS5jb29raWVzRWFybmVkID49IG1lLmJhc2VQcmljZSB8fCBtZS5ib3VnaHQgPiAwKSB7DQogICAgICAgICAgICBjbGFzc2VzICs9ICIgdW5sb2NrZWQiOw0KICAgICAgICAgICAgbGFzdExvY2tlZCA9IDA7DQogICAgICAgICAgICBtZS5sb2NrZWQgPSAwOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjbGFzc2VzICs9ICIgbG9ja2VkIjsNCiAgICAgICAgICAgIGxhc3RMb2NrZWQrKzsNCiAgICAgICAgICAgIG1lLmxvY2tlZCA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIChHYW1lLmJ1eU1vZGUgPT0gMSAmJiBHYW1lLmNvb2tpZXMgPj0gcHJpY2UpIHx8DQogICAgICAgICAgICAoR2FtZS5idXlNb2RlID09IC0xICYmIG1lLmFtb3VudCA+IDApDQogICAgICAgICAgKQ0KICAgICAgICAgICAgY2xhc3NlcyArPSAiIGVuYWJsZWQiOw0KICAgICAgICAgIGVsc2UgY2xhc3NlcyArPSAiIGRpc2FibGVkIjsNCiAgICAgICAgICBpZiAobGFzdExvY2tlZCA+IDIpIGNsYXNzZXMgKz0gIiB0b2dnbGVkT2ZmIjsNCiAgICAgICAgICBtZS5sLmNsYXNzTmFtZSA9IGNsYXNzZXM7DQogICAgICAgICAgLy9pZiAobWUuaWQ+MCkge2woJ3Byb2R1Y3ROYW1lJyttZS5pZCkuaW5uZXJIVE1MPUJlYXV0aWZ5KG1lLnN0b3JlZFRvdGFsQ3BzL0dhbWUuT2JqZWN0c0J5SWRbbWUuaWQtMV0uc3RvcmVkVG90YWxDcHMsMik7fQ0KICAgICAgICB9DQoNCiAgICAgICAgLy9tYWtlIHVwZ3JhZGVzIGZ1bGwtb3BhY2l0eSBpZiB3ZSBjYW4gYnV5IHRoZW0NCiAgICAgICAgdmFyIGxhc3RQcmljZSA9IDA7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlc0luU3RvcmUpIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzSW5TdG9yZVtpXTsNCiAgICAgICAgICBpZiAoIW1lLmJvdWdodCkgew0KICAgICAgICAgICAgdmFyIHByaWNlID0gbWUuZ2V0UHJpY2UoKTsNCiAgICAgICAgICAgIHZhciBjYW5CdXkgPSBtZS5jYW5CdXkoKTsgLy8oR2FtZS5jb29raWVzPj1wcmljZSk7DQogICAgICAgICAgICB2YXIgZW5hYmxlZCA9IGwoInVwZ3JhZGUiICsgaSkuY2xhc3NOYW1lLmluZGV4T2YoImVuYWJsZWQiKSA+IC0xOw0KICAgICAgICAgICAgaWYgKChjYW5CdXkgJiYgIWVuYWJsZWQpIHx8ICghY2FuQnV5ICYmIGVuYWJsZWQpKQ0KICAgICAgICAgICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICAgICAgICAgIGlmIChwcmljZSA8IGxhc3RQcmljZSkgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7IC8vaXMgdGhpcyB1cGdyYWRlIGxlc3MgZXhwZW5zaXZlIHRoYW4gdGhlIHByZXZpb3VzIG9uZT8gdHJpZ2dlciBhIHJlZnJlc2ggdG8gc29ydCBpdCBhZ2Fpbg0KICAgICAgICAgICAgbGFzdFByaWNlID0gcHJpY2U7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChtZS50aW1lckRpc3BsYXkpIHsNCiAgICAgICAgICAgIHZhciBUID0gbWUudGltZXJEaXNwbGF5KCk7DQogICAgICAgICAgICBpZiAoVCAhPSAtMSkgew0KICAgICAgICAgICAgICBpZiAoIWwoInVwZ3JhZGVQaWVUaW1lciIgKyBpKSkNCiAgICAgICAgICAgICAgICBsKCJ1cGdyYWRlIiArIGkpLmlubmVySFRNTCA9DQogICAgICAgICAgICAgICAgICBsKCJ1cGdyYWRlIiArIGkpLmlubmVySFRNTCArDQogICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0icGllVGltZXIiIGlkPSJ1cGdyYWRlUGllVGltZXInICsNCiAgICAgICAgICAgICAgICAgIGkgKw0KICAgICAgICAgICAgICAgICAgJyI+PC9kaXY+JzsNCiAgICAgICAgICAgICAgVCA9IChUICogMTQ0KSAlIDE0NDsNCiAgICAgICAgICAgICAgbCgidXBncmFkZVBpZVRpbWVyIiArIGkpLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAgICAgICAgICAgLU1hdGguZmxvb3IoVCAlIDE4KSAqIDQ4ICsNCiAgICAgICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAgICAgLU1hdGguZmxvb3IoVCAvIDE4KSAqIDQ4ICsNCiAgICAgICAgICAgICAgICAicHgiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vaWYgKG1lLmNhbkJ1eSgpKSBsKCd1cGdyYWRlJytpKS5jbGFzc05hbWU9J2NyYXRlIHVwZ3JhZGUgZW5hYmxlZCc7IGVsc2UgbCgndXBncmFkZScraSkuY2xhc3NOYW1lPSdjcmF0ZSB1cGdyYWRlIGRpc2FibGVkJzsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgVGltZXIudHJhY2soInN0b3JlIik7DQoNCiAgICAgIGlmIChHYW1lLlBBUlRZKSB7DQogICAgICAgIC8vaSB3YXMgYm9yZWQgYW5kIGZlbHQgbGlrZSBtZXNzaW5nIHdpdGggQ1NTDQogICAgICAgIHZhciBwdWxzZSA9IE1hdGgucG93KChHYW1lLlQgJSAxMCkgLyAxMCwgMC41KTsNCiAgICAgICAgR2FtZS5sLnN0eWxlLmZpbHRlciA9DQogICAgICAgICAgImh1ZS1yb3RhdGUoIiArDQogICAgICAgICAgKChHYW1lLlQgKiA1KSAlIDM2MCkgKw0KICAgICAgICAgICJkZWcpIGJyaWdodG5lc3MoIiArDQogICAgICAgICAgKDE1MCAtIDUwICogcHVsc2UpICsNCiAgICAgICAgICAiJSkiOw0KICAgICAgICBHYW1lLmwuc3R5bGUud2Via2l0RmlsdGVyID0NCiAgICAgICAgICAiaHVlLXJvdGF0ZSgiICsNCiAgICAgICAgICAoKEdhbWUuVCAqIDUpICUgMzYwKSArDQogICAgICAgICAgImRlZykgYnJpZ2h0bmVzcygiICsNCiAgICAgICAgICAoMTUwIC0gNTAgKiBwdWxzZSkgKw0KICAgICAgICAgICIlKSI7DQogICAgICAgIEdhbWUubC5zdHlsZS50cmFuc2Zvcm0gPQ0KICAgICAgICAgICJzY2FsZSgiICsNCiAgICAgICAgICAoMS4wMiAtIDAuMDIgKiBwdWxzZSkgKw0KICAgICAgICAgICIsIiArDQogICAgICAgICAgKDEuMDIgLSAwLjAyICogcHVsc2UpICsNCiAgICAgICAgICAiKSByb3RhdGUoIiArDQogICAgICAgICAgTWF0aC5zaW4oR2FtZS5UICogMC41KSAqIDAuNSArDQogICAgICAgICAgImRlZykiOw0KICAgICAgICBHYW1lLndyYXBwZXIuc3R5bGUub3ZlcmZsb3dYID0gImhpZGRlbiI7DQogICAgICAgIEdhbWUud3JhcHBlci5zdHlsZS5vdmVyZmxvd1kgPSAiaGlkZGVuIjsNCiAgICAgIH0NCg0KICAgICAgVGltZXIuY2xlYW4oKTsNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5wcmVmcy5hbmltYXRlICYmDQogICAgICAgICgoR2FtZS5wcmVmcy5mYW5jeSAmJiBHYW1lLmRyYXdUICUgMSA9PSAwKSB8fA0KICAgICAgICAgICghR2FtZS5wcmVmcy5mYW5jeSAmJiBHYW1lLmRyYXdUICUgMTAgPT0gMCkpICYmDQogICAgICAgIEdhbWUuQXNjZW5kVGltZXIgPT0gMCAmJg0KICAgICAgICBHYW1lLm9uTWVudSA9PSAiIg0KICAgICAgKQ0KICAgICAgICBHYW1lLkRyYXdCdWlsZGluZ3MoKTsNCiAgICAgIFRpbWVyLnRyYWNrKCJidWlsZGluZ3MiKTsNCg0KICAgICAgR2FtZS50ZXh0UGFydGljbGVzVXBkYXRlKCk7DQogICAgICBUaW1lci50cmFjaygidGV4dCBwYXJ0aWNsZXMiKTsNCiAgICB9DQoNCiAgICBHYW1lLk5vdGVzRHJhdygpOw0KICAgIFRpbWVyLnRyYWNrKCJub3RlcyIpOw0KDQogICAgR2FtZS5ydW5Nb2RIb29rKCJkcmF3Iik7DQoNCiAgICBHYW1lLmRyYXdUKys7DQogICAgLy9pZiAoR2FtZS5wcmVmcy5hbHREcmF3KSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoR2FtZS5EcmF3KTsNCiAgfTsNCg0KICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCglNQUlOIExPT1ANCgk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICBHYW1lLkxvb3AgPSBmdW5jdGlvbiAoKSB7DQogICAgaWYgKEdhbWUudGltZWRvdXQpIHJldHVybiBmYWxzZTsNCiAgICBUaW1lci5zYXkoIlNUQVJUIik7DQogICAgVGltZXIudHJhY2soImJyb3dzZXIgc3R1ZmYiKTsNCiAgICBUaW1lci5zYXkoIkxPR0lDIik7DQogICAgLy91cGRhdGUgZ2FtZSBsb2dpYyAhDQogICAgR2FtZS5jYXRjaHVwTG9naWMgPSAwOw0KICAgIEdhbWUuTG9naWMoKTsNCiAgICBHYW1lLmNhdGNodXBMb2dpYyA9IDE7DQoNCiAgICB2YXIgdGltZSA9IERhdGUubm93KCk7DQoNCiAgICAvL2xhdGVuY3kgY29tcGVuc2F0b3INCiAgICBHYW1lLmFjY3VtdWxhdGVkRGVsYXkgKz0gdGltZSAtIEdhbWUudGltZSAtIDEwMDAgLyBHYW1lLmZwczsNCiAgICBpZiAoR2FtZS5wcmVmcy50aW1lb3V0ICYmIHRpbWUgLSBHYW1lLmxhc3RBY3Rpdml0eSA+PSAxMDAwICogNjAgKiA1KSB7DQogICAgICBpZiAoR2FtZS5hY2N1bXVsYXRlZERlbGF5ID4gMTAwMCAqIDYwICogMzApDQogICAgICAgIEdhbWUuZGVsYXlUaW1lb3V0cyArPSAzOyAvL21vcmUgdGhhbiAzMCBtaW51dGVzIGRlbGF5PyBjb21wdXRlciBwcm9iYWJseSBhc2xlZXAgYW5kIG5vdCBtYWtpbmcgY29va2llcyBhbnl3YXkNCiAgICAgIGVsc2UgaWYgKEdhbWUuYWNjdW11bGF0ZWREZWxheSA+IDEwMDAgKiA1KSBHYW1lLmRlbGF5VGltZW91dHMrKzsgLy9hZGQgdG8gdGltZW91dCBjb3VudGVyIHdoZW4gd2Ugc2tpcCAxMCBzZWNvbmRzIHdvcnRoIG9mIGZyYW1lcyAoYW5kIHRoZSBwbGF5ZXIgaGFzIGJlZW4gaW5hY3RpdmUgZm9yIGF0IGxlYXN0IDUgbWludXRlcykNCiAgICAgIGlmIChHYW1lLmRlbGF5VGltZW91dHMgPj0gMykgR2FtZS5UaW1lb3V0KCk7IC8vdHJpZ2dlciB0aW1lb3V0IHdoZW4gdGhlIHRpbWVvdXQgY291bnRlciBpcyAzKw0KICAgIH0NCg0KICAgIEdhbWUuYWNjdW11bGF0ZWREZWxheSA9IE1hdGgubWluKEdhbWUuYWNjdW11bGF0ZWREZWxheSwgMTAwMCAqIDUpOyAvL2Rvbid0IGNvbXBlbnNhdGUgb3ZlciA1IHNlY29uZHM7IGlmIHlvdSBkbywgc29tZXRoaW5nJ3MgcHJvYmFibHkgdmVyeSB3cm9uZw0KICAgIEdhbWUudGltZSA9IHRpbWU7DQoNCiAgICAvL2lmIChHYW1lLmFjY3VtdWxhdGVkRGVsYXk+PUdhbWUuZnBzKSBjb25zb2xlLmxvZygnZGVsYXk6JyxNYXRoLnJvdW5kKEdhbWUuYWNjdW11bGF0ZWREZWxheS9HYW1lLmZwcykpOw0KICAgIHdoaWxlIChHYW1lLmFjY3VtdWxhdGVkRGVsYXkgPiAwKSB7DQogICAgICBHYW1lLkxvZ2ljKCk7DQogICAgICBHYW1lLmFjY3VtdWxhdGVkRGVsYXkgLT0gMTAwMCAvIEdhbWUuZnBzOyAvL2FzIGxvbmcgYXMgd2UncmUgZGV0ZWN0aW5nIGxhdGVuY3kgKHNsb3dlciB0aGFuIHRhcmdldCBmcHMpLCBleGVjdXRlIGxvZ2ljICh0aGlzIG1ha2VzIGRyYXdpbmcgc2xvd2VyIGJ1dCBtYWtlcyB0aGUgbG9naWMgYmVoYXZlIGNsb3NlciB0byBjb3JyZWN0IHRhcmdldCBmcHMpDQogICAgfQ0KICAgIEdhbWUuY2F0Y2h1cExvZ2ljID0gMDsNCiAgICBUaW1lci50cmFjaygibG9naWMiKTsNCiAgICBUaW1lci5zYXkoIkVORCBMT0dJQyIpOw0KICAgIC8qDQoJCWlmICghR2FtZS5wcmVmcy5hbHREcmF3KQ0KCQl7DQoJCQl2YXIgaGFzRm9jdXM9ZG9jdW1lbnQuaGFzRm9jdXMoKTsNCgkJCVRpbWVyLnNheSgnRFJBVycpOw0KCQkJaWYgKGhhc0ZvY3VzIHx8IEdhbWUucHJlZnMuZm9jdXMgfHwgR2FtZS5sb29wVCUxMD09MCkgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKEdhbWUuRHJhdyk7DQoJCQkvL2lmIChkb2N1bWVudC5oYXNGb2N1cygpIHx8IEdhbWUubG9vcFQlNT09MCkgR2FtZS5EcmF3KCk7DQoJCQlUaW1lci5zYXkoJ0VORCBEUkFXJyk7DQoJCX0NCgkJZWxzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoR2FtZS5EcmF3KTsqLw0KICAgIGlmIChHYW1lLnZpc2libGUpIEdhbWUuRHJhdygpOw0KDQogICAgLy9pZiAoIWhhc0ZvY3VzKSBHYW1lLnRvb2x0aXAuaGlkZSgpOw0KDQogICAgaWYgKEdhbWUuc2VzYW1lKSB7DQogICAgICAvL2ZwcyBjb3VudGVyIGFuZCBncmFwaA0KICAgICAgR2FtZS5wcmV2aW91c0ZwcyA9IEdhbWUuY3VycmVudEZwczsNCiAgICAgIEdhbWUuY3VycmVudEZwcyA9IEdhbWUuZ2V0RnBzKCk7DQogICAgICB2YXIgY3R4ID0gR2FtZS5mcHNHcmFwaEN0eDsNCiAgICAgIGN0eC5kcmF3SW1hZ2UoR2FtZS5mcHNHcmFwaCwgLTEsIDApOw0KICAgICAgY3R4LmZpbGxTdHlsZSA9DQogICAgICAgICJyZ2IoIiArIE1hdGgucm91bmQoKDEgLSBHYW1lLmN1cnJlbnRGcHMgLyBHYW1lLmZwcykgKiAxMjgpICsgIiwwLDApIjsNCiAgICAgIGN0eC5maWxsUmVjdCgxMjggLSAxLCAwLCAxLCA2NCk7DQogICAgICBjdHguc3Ryb2tlU3R5bGUgPSAiI2ZmZiI7DQogICAgICBjdHguYmVnaW5QYXRoKCk7DQogICAgICBjdHgubW92ZVRvKDEyOCAtIDEsICgxIC0gR2FtZS5wcmV2aW91c0ZwcyAvIEdhbWUuZnBzKSAqIDY0KTsNCiAgICAgIGN0eC5saW5lVG8oMTI4LCAoMSAtIEdhbWUuY3VycmVudEZwcyAvIEdhbWUuZnBzKSAqIDY0KTsNCiAgICAgIGN0eC5zdHJva2UoKTsNCg0KICAgICAgbCgiZnBzQ291bnRlciIpLnRleHRDb250ZW50ID0gR2FtZS5jdXJyZW50RnBzICsgIiBmcHMiOw0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgZm9yICh2YXIgaSBpbiBUaW1lci5sYWJlbHMpIHsNCiAgICAgICAgc3RyICs9IFRpbWVyLmxhYmVsc1tpXTsNCiAgICAgIH0NCiAgICAgIGlmIChHYW1lLmRlYnVnVGltZXJzT24pIGwoImRlYnVnTG9nIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICBlbHNlIGwoImRlYnVnTG9nIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIGwoImRlYnVnTG9nIikuaW5uZXJIVE1MID0gc3RyOw0KICAgIH0NCiAgICBUaW1lci5yZXNldCgpOw0KDQogICAgR2FtZS5sb29wVCsrOw0KICAgIHNldFRpbWVvdXQoR2FtZS5Mb29wLCAxMDAwIC8gR2FtZS5mcHMpOw0KICB9Ow0KfTsNCg0KLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpMQVVOQ0ggVEhJUyBUSElORw0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCi8vR2FtZS5MYXVuY2goKTsNCg0KLy90cnkge0dhbWUuTGF1bmNoKCk7fQ0KLy9jYXRjaChlcnIpIHtjb25zb2xlLmxvZygnRVJST1IgOiAnK2Vyci5tZXNzYWdlKTt9DQoNCndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7DQogIGlmICghR2FtZS5yZWFkeSkgew0KICAgIHZhciBsb2FkTGFuZ0FuZExhdW5jaCA9IGZ1bmN0aW9uIChsYW5nLCBmaXJzdExhdW5jaCkgew0KICAgICAgaWYgKCFmaXJzdExhdW5jaCkgbG9jYWxTdG9yYWdlU2V0KCJDb29raWVDbGlja2VyTGFuZyIsIGxhbmcpOw0KDQogICAgICAvL0xvYWRMYW5nKCcuLi9Db29raWUgQ2xpY2tlciBMb2NhbGl6YXRpb24vRU4uanMnLGZ1bmN0aW9uKGxhbmcpe3JldHVybiBmdW5jdGlvbigpew0KICAgICAgTG9hZExhbmcoDQogICAgICAgICJsb2MvRU4uanM/dj0iICsgR2FtZS52ZXJzaW9uLA0KICAgICAgICAoZnVuY3Rpb24gKGxhbmcpIHsNCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgbG9jU3RyaW5nc0ZhbGxiYWNrID0gbG9jU3RyaW5nczsNCiAgICAgICAgICAgIExvYWRMYW5nKCJsb2MvIiArIGxhbmcgKyAiLmpzP3Y9IiArIEdhbWUudmVyc2lvbiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICB2YXIgbGF1bmNoID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIEdhbWUuTGF1bmNoKCk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coDQogICAgICAgICAgICAgICAgICAiWz09PSAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAiT2gsIGhlbGxvISIsDQogICAgICAgICAgICAgICAgICAgICAgImhleSwgaG93J3MgaXQgaGFuZ2luIiwNCiAgICAgICAgICAgICAgICAgICAgICAiQWJvdXQgdG8gY2hlYXQgaW4gc29tZSBjb29raWVzIG9yIGp1c3QgY2hlY2tpbmcgZm9yIGJ1Z3M/IiwNCiAgICAgICAgICAgICAgICAgICAgICAiUmVtZW1iZXIgOiBjaGVhdGVkIGNvb2tpZXMgdGFzdGUgYXdmdWwhIiwNCiAgICAgICAgICAgICAgICAgICAgICAiSGV5LCBPcnRlaWwgaGVyZS4gQ2hlYXRlZCBjb29raWVzIHRhc3RlIGF3ZnVsLi4uIG9yIGRvIHRoZXk/IiwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiID09PV0iDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBHYW1lLkxvYWQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgR2FtZS5Jbml0KCk7DQogICAgICAgICAgICAgICAgICBpZiAoZmlyc3RMYXVuY2gpIEdhbWUuc2hvd0xhbmdTZWxlY3Rpb24odHJ1ZSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgLy90cnkge0dhbWUuTG9hZChHYW1lLkluaXQpO30NCiAgICAgICAgICAgICAgICAvL2NhdGNoKGVycikge2NvbnNvbGUubG9nKCdFUlJPUiA6ICcrZXJyLm1lc3NhZ2UpO30NCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgaWYgKEFwcCAmJiBBcHAubG9hZE1vZHMpIEFwcC5sb2FkTW9kcyhsYXVuY2gpOw0KICAgICAgICAgICAgICBlbHNlIGxhdW5jaCgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfTsNCiAgICAgICAgfSkobGFuZykNCiAgICAgICk7DQogICAgfTsNCg0KICAgIHZhciBzaG93TGFuZ1NlbGVjdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgew0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgZm9yICh2YXIgaSBpbiBMYW5ncykgew0KICAgICAgICB2YXIgbGFuZyA9IExhbmdzW2ldOw0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGFuZ1NlbGVjdEJ1dHRvbiB0aXRsZSIgaWQ9ImxhbmdTZWxlY3QtJyArDQogICAgICAgICAgaSArDQogICAgICAgICAgJyI+JyArDQogICAgICAgICAgbGFuZy5uYW1lICsNCiAgICAgICAgICAiPC9kaXY+IjsNCiAgICAgIH0NCiAgICAgIGwoIm9mZkdhbWVNZXNzYWdlIikuaW5uZXJIVE1MID0NCiAgICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIiBpZD0ibGFuZ3VhZ2VTZWxlY3RIZWFkZXIiPkxhbmd1YWdlPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIiBzdHlsZT0ibWF4LXdpZHRoOjMwMHB4OyI+PC9kaXY+JyArDQogICAgICAgIHN0cjsNCiAgICAgIGZvciAodmFyIGkgaW4gTGFuZ3MpIHsNCiAgICAgICAgdmFyIGxhbmcgPSBMYW5nc1tpXTsNCiAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgbCgibGFuZ1NlbGVjdC0iICsgaSksDQogICAgICAgICAgImNsaWNrIiwNCiAgICAgICAgICAoZnVuY3Rpb24gKGxhbmcpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIGNhbGxiYWNrKGxhbmcpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KShpKQ0KICAgICAgICApOw0KICAgICAgICBBZGRFdmVudCgNCiAgICAgICAgICBsKCJsYW5nU2VsZWN0LSIgKyBpKSwNCiAgICAgICAgICAibW91c2VvdmVyIiwNCiAgICAgICAgICAoZnVuY3Rpb24gKGxhbmcpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL3NtYWxsVGljay5tcDMiLCAwLjc1KTsNCiAgICAgICAgICAgICAgbCgibGFuZ3VhZ2VTZWxlY3RIZWFkZXIiKS5pbm5lckhUTUwgPSBMYW5nc1tsYW5nXS5jaGFuZ2VMYW5ndWFnZTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSkoaSkNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgdmFyIGxhbmcgPSBsb2NhbFN0b3JhZ2VHZXQoIkNvb2tpZUNsaWNrZXJMYW5nIik7DQogICAgaWYgKEFwcCAmJiAhbGFuZykgc2hvd0xhbmdTZWxlY3QobG9hZExhbmdBbmRMYXVuY2gpOw0KICAgIGVsc2UgaWYgKCFsYW5nKSB7DQogICAgICBsb2FkTGFuZ0FuZExhdW5jaCgiRU4iLCB0cnVlKTsNCiAgICB9IGVsc2UgbG9hZExhbmdBbmRMYXVuY2gobGFuZyk7DQogIH0NCn07DQo="></script>

    <script>
      var VERSION = 2.048;
      var BETA = 0;
      var App = typeof App === "undefined" ? 0 : App;
    </script>

    <link href="style.css" rel="stylesheet" type="text/css" />
    <script src="data:@file/javascript;base64,77u/LyoNCkFsbCB0aGlzIGNvZGUgaXMgY29weXJpZ2h0IE9ydGVpbCwgMjAxMy0yMDIyLg0KCS13aXRoIHNvbWUgaGVscCwgYWR2aWNlIGFuZCBmaXhlcyBieSBOaWNob2xhcyBMYXV4LCBEZWJ1Z2JybywgT3B0aSwgdGhlIGZvbGtzIGF0IFBsYXlzYXVydXMsIGFuZCBsb3RzIG9mIHBlb3BsZSBvbiByZWRkaXQsIERpc2NvcmQsIGFuZCB0aGUgRGFzaE5ldCBmb3J1bXMNCgktYWxzbyBpbmNsdWRlcyBhIGJ1bmNoIG9mIHNuaXBwZXRzIGZvdW5kIG9uIHN0YWNrb3ZlcmZsb3cuY29tIGFuZCBvdGhlcnMNCgktd2FudCB0byBtb2QgdGhlIGdhbWU/IHNjcm9sbCBkb3duIHRvIHRoZSAiTU9ERElORyBBUEkiIHNlY3Rpb24NCkhlbGxvLCBhbmQgd2VsY29tZSB0byB0aGUgam95b3VzIG1lc3MgdGhhdCBpcyBtYWluLmpzLiBDb2RlIGNvbnRhaW5lZCBoZXJlaW4gaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgZ29vZCwgY29uc2lzdGVudCwgb3Igc2FuZS4gTW9zdCBvZiB0aGlzIGlzIHllYXJzIG9sZCBhdCB0aGlzIHBvaW50IGFuZCBoYXJrZW5zIGJhY2sgdG8gc2ltcGxlciwgY3J1ZGVyIHRpbWVzLiBJbiBwYXJ0aWN1bGFyIEkndmUgdHJpZWQgdG8gbWFpbnRhaW4gY29tcGF0aWJpbGl0eSB3aXRoIGZhaXJseSBvbGQgdmVyc2lvbnMgb2YgamF2YXNjcmlwdCwgd2hpY2ggbWVhbnMgbHV4dXJpZXMgc3VjaCBhcyAnbGV0JywgYXJyb3cgZnVuY3Rpb25zIGFuZCBzdHJpbmcgbGl0ZXJhbHMgYXJlIHVuYXZhaWxhYmxlLg0KQXMgQ29va2llIENsaWNrZXIgaXMgcmlmZSB3aXRoIHB1bnMgYW5kIHRyaWNreSB3b3JkcGxheSwgbG9jYWxpemF0aW9uIHdhcyBuZXZlciBpbnRlbmRlZCB0byBiZSBwb3NzaWJsZSAtIGJ1dCBlbmRlZCB1cCBoYXBwZW5pbmcgYW55d2F5IGFzIHBhcnQgb2YgdGhlIFN0ZWFtIHBvcnQuIEFzIGEgcmVzdWx0LCB1c2FnZSBvZiBzdHJpbmdzIGlzIHNvbWV3aGF0IHVub3J0aG9kb3ggaW4gc29tZSBwbGFjZXMuDQpIYXZlIGEgbmljZSB0cmlwLCBhbmQgc3RheSBzYWZlLg0KU3BvaWxlcnMgYWhlYWQuDQpodHRwOi8vb3J0ZWlsLmRhc2huZXQub3JnDQoqLw0KDQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCk1JU0MgSEVMUEVSIEZVTkNUSU9OUw0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCmZ1bmN0aW9uIGwod2hhdCkgew0KICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQod2hhdCk7DQp9DQpmdW5jdGlvbiBjaG9vc2UoYXJyKSB7DQogIHJldHVybiBhcnJbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyLmxlbmd0aCldOw0KfQ0KDQpmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyKSB7DQogIHJldHVybiBzdHIucmVwbGFjZSgvW1wtXFtcXVwvXHtcfVwoXClcKlwrXD9cLlxcXF5cJFx8XS9nLCAiXFwkJiIpOw0KfQ0KZnVuY3Rpb24gcmVwbGFjZUFsbChmaW5kLCByZXBsYWNlLCBzdHIpIHsNCiAgcmV0dXJuIHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoZXNjYXBlUmVnRXhwKGZpbmQpLCAiZyIpLCByZXBsYWNlKTsNCn0NCg0KZnVuY3Rpb24gY2FwKHN0cikgew0KICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpOw0KfQ0KDQpmdW5jdGlvbiByb21hbml6ZShudW0pIHsNCiAgaWYgKGlzTmFOKG51bSkpIHJldHVybiBOYU47DQogIHZhciBkaWdpdHMgPSBTdHJpbmcoK251bSkuc3BsaXQoIiIpLA0KICAgIGtleSA9IFsNCiAgICAgICIiLA0KICAgICAgIkMiLA0KICAgICAgIkNDIiwNCiAgICAgICJDQ0MiLA0KICAgICAgIkNEIiwNCiAgICAgICJEIiwNCiAgICAgICJEQyIsDQogICAgICAiRENDIiwNCiAgICAgICJEQ0NDIiwNCiAgICAgICJDTSIsDQogICAgICAiIiwNCiAgICAgICJYIiwNCiAgICAgICJYWCIsDQogICAgICAiWFhYIiwNCiAgICAgICJYTCIsDQogICAgICAiTCIsDQogICAgICAiTFgiLA0KICAgICAgIkxYWCIsDQogICAgICAiTFhYWCIsDQogICAgICAiWEMiLA0KICAgICAgIiIsDQogICAgICAiSSIsDQogICAgICAiSUkiLA0KICAgICAgIklJSSIsDQogICAgICAiSVYiLA0KICAgICAgIlYiLA0KICAgICAgIlZJIiwNCiAgICAgICJWSUkiLA0KICAgICAgIlZJSUkiLA0KICAgICAgIklYIiwNCiAgICBdLA0KICAgIHJvbWFuID0gIiIsDQogICAgaSA9IDM7DQogIHdoaWxlIChpLS0pIHJvbWFuID0gKGtleVsrZGlnaXRzLnBvcCgpICsgaSAqIDEwXSB8fCAiIikgKyByb21hbjsNCiAgcmV0dXJuIEFycmF5KCtkaWdpdHMuam9pbigiIikgKyAxKS5qb2luKCJNIikgKyByb21hbjsNCn0NCg0KLy9kaXNhYmxlIHNvdW5kcyBjb21pbmcgZnJvbSBzb3VuZGpheS5jb20gKHNvcnJ5KQ0KdmFyIHJlYWxBdWRpbyA9DQogIHR5cGVvZiBBdWRpbyAhPT0gInVuZGVmaW5lZCINCiAgICA/IEF1ZGlvDQogICAgOiBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiB7fTsNCiAgICAgIH07IC8vYmFja3VwIHJlYWwgYXVkaW8NCkF1ZGlvID0gZnVuY3Rpb24gKHNyYykgew0KICBpZiAoc3JjICYmIHNyYy5pbmRleE9mKCJzb3VuZGpheSIpID4gLTEpIHsNCiAgICBHYW1lLlBvcHVwKCJTb3JyeSwgbm8gc291bmRzIGhvdGxpbmtlZCBmcm9tIHNvdW5kamF5LmNvbS4iKTsNCiAgICB0aGlzLnBsYXkgPSBmdW5jdGlvbiAoKSB7fTsNCiAgfSBlbHNlIHJldHVybiBuZXcgcmVhbEF1ZGlvKHNyYyk7DQp9Ow0KDQppZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7DQogIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKG5lZWRsZSkgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgew0KICAgICAgaWYgKHRoaXNbaV0gPT09IG5lZWRsZSkgew0KICAgICAgICByZXR1cm4gaTsNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIC0xOw0KICB9Ow0KfQ0KDQpmdW5jdGlvbiByYW5kb21GbG9vcih4KSB7DQogIGlmICh4ICUgMSA8IE1hdGgucmFuZG9tKCkpIHJldHVybiBNYXRoLmZsb29yKHgpOw0KICBlbHNlIHJldHVybiBNYXRoLmNlaWwoeCk7DQp9DQoNCmZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHsNCiAgdmFyIGNvdW50ZXIgPSBhcnJheS5sZW5ndGgsDQogICAgdGVtcCwNCiAgICBpbmRleDsNCiAgLy8gV2hpbGUgdGhlcmUgYXJlIGVsZW1lbnRzIGluIHRoZSBhcnJheQ0KICB3aGlsZSAoY291bnRlci0tKSB7DQogICAgLy8gUGljayBhIHJhbmRvbSBpbmRleA0KICAgIGluZGV4ID0gKE1hdGgucmFuZG9tKCkgKiBjb3VudGVyKSB8IDA7DQoNCiAgICAvLyBBbmQgc3dhcCB0aGUgbGFzdCBlbGVtZW50IHdpdGggaXQNCiAgICB0ZW1wID0gYXJyYXlbY291bnRlcl07DQogICAgYXJyYXlbY291bnRlcl0gPSBhcnJheVtpbmRleF07DQogICAgYXJyYXlbaW5kZXhdID0gdGVtcDsNCiAgfQ0KICByZXR1cm4gYXJyYXk7DQp9DQoNCkVsZW1lbnQucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uICgpIHsNCiAgdmFyIGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogIHZhciBzID0gR2FtZS5zY2FsZTsNCiAgYm91bmRzLnggLz0gczsNCiAgYm91bmRzLnkgLz0gczsNCiAgYm91bmRzLndpZHRoIC89IHM7DQogIGJvdW5kcy5oZWlnaHQgLz0gczsNCiAgYm91bmRzLnRvcCAvPSBzOw0KICBib3VuZHMuYm90dG9tIC89IHM7DQogIGJvdW5kcy5sZWZ0IC89IHM7DQogIGJvdW5kcy5yaWdodCAvPSBzOw0KICByZXR1cm4gYm91bmRzOw0KfTsNCg0KdmFyIExvYWRTY3JpcHQgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaywgZXJyb3IpIHsNCiAgdmFyIGpzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQogIGpzLnNldEF0dHJpYnV0ZSgidHlwZSIsICJ0ZXh0L2phdmFzY3JpcHQiKTsNCiAgaWYgKGpzLnJlYWR5U3RhdGUpIHsNCiAgICBqcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoanMucmVhZHlTdGF0ZSA9PT0gImxvYWRlZCIgfHwganMucmVhZHlTdGF0ZSA9PT0gImNvbXBsZXRlIikgew0KICAgICAgICBqcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsOw0KICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7DQogICAgICB9DQogICAgfTsNCiAgfSBlbHNlIGlmIChjYWxsYmFjaykgew0KICAgIGpzLm9ubG9hZCA9IGNhbGxiYWNrOw0KICB9DQogIGlmIChlcnJvcikganMub25lcnJvciA9IGVycm9yOw0KDQogIGpzLnNldEF0dHJpYnV0ZSgic3JjIiwgdXJsKTsNCiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChqcyk7DQp9Ow0KDQpsb2NhbFN0b3JhZ2VHZXQgPSBmdW5jdGlvbiAoa2V5KSB7DQogIHZhciBsb2NhbCA9IDA7DQogIHRyeSB7DQogICAgbG9jYWwgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTsNCiAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fQ0KICByZXR1cm4gbG9jYWw7DQp9Ow0KbG9jYWxTdG9yYWdlU2V0ID0gZnVuY3Rpb24gKGtleSwgc3RyKSB7DQogIHZhciBsb2NhbCA9IDA7DQogIHRyeSB7DQogICAgbG9jYWwgPSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBzdHIpOw0KICB9IGNhdGNoIChleGNlcHRpb24pIHt9DQogIHJldHVybiBsb2NhbDsNCn07DQoNCnZhciBhamF4ID0gZnVuY3Rpb24gKHVybCwgY2FsbGJhY2spIHsNCiAgdmFyIGh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQogIGlmICghaHR0cFJlcXVlc3QpIHsNCiAgICByZXR1cm4gZmFsc2U7DQogIH0NCiAgaHR0cFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgew0KICAgIHRyeSB7DQogICAgICBpZiAoDQogICAgICAgIGh0dHBSZXF1ZXN0LnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUgJiYNCiAgICAgICAgaHR0cFJlcXVlc3Quc3RhdHVzID09PSAyMDANCiAgICAgICkgew0KICAgICAgICBjYWxsYmFjayhodHRwUmVxdWVzdC5yZXNwb25zZVRleHQpOw0KICAgICAgfQ0KICAgIH0gY2F0Y2ggKGUpIHt9DQogIH07DQogIC8vaHR0cFJlcXVlc3Qub25lcnJvcj1mdW5jdGlvbihlKXtjb25zb2xlLmxvZygnRVJST1InLGUpO30NCiAgaWYgKHVybC5pbmRleE9mKCI/IikgPT0gLTEpIHVybCArPSAiPyI7DQogIGVsc2UgdXJsICs9ICImIjsNCiAgdXJsICs9ICJub2NhY2hlPSIgKyBEYXRlLm5vdygpOw0KICBodHRwUmVxdWVzdC5vcGVuKCJHRVQiLCB1cmwpOw0KICBodHRwUmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAidGV4dC9wbGFpbiIpOw0KICBodHRwUmVxdWVzdC5vdmVycmlkZU1pbWVUeXBlKCJ0ZXh0L3BsYWluIik7DQogIGh0dHBSZXF1ZXN0LnNlbmQoKTsNCiAgcmV0dXJuIHRydWU7DQp9Ow0KDQpmdW5jdGlvbiB0b0ZpeGVkKHgpIHsNCiAgaWYgKE1hdGguYWJzKHgpIDwgMS4wKSB7DQogICAgdmFyIGUgPSBwYXJzZUludCh4LnRvU3RyaW5nKCkuc3BsaXQoImUtIilbMV0pOw0KICAgIGlmIChlKSB7DQogICAgICB4ICo9IE1hdGgucG93KDEwLCBlIC0gMSk7DQogICAgICB4ID0gIjAuIiArIG5ldyBBcnJheShlKS5qb2luKCIwIikgKyB4LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIpOw0KICAgIH0NCiAgfSBlbHNlIHsNCiAgICB2YXIgZSA9IHBhcnNlSW50KHgudG9TdHJpbmcoKS5zcGxpdCgiKyIpWzFdKTsNCiAgICBpZiAoZSA+IDIwKSB7DQogICAgICBlIC09IDIwOw0KICAgICAgeCAvPSBNYXRoLnBvdygxMCwgZSk7DQogICAgICB4ICs9IG5ldyBBcnJheShlICsgMSkuam9pbigiMCIpOw0KICAgIH0NCiAgfQ0KICByZXR1cm4geDsNCn0NCg0KLy9CZWF1dGlmeSBhbmQgbnVtYmVyLWZvcm1hdHRpbmcgYWRhcHRlZCBmcm9tIHRoZSBGcm96ZW4gQ29va2llcyBhZGQtb24gKGh0dHA6Ly9jb29raWVjbGlja2VyLndpa2lhLmNvbS93aWtpL0Zyb3plbl9Db29raWVzXyUyOEphdmFTY3JpcHRfQWRkLW9uJTI5KQ0KZnVuY3Rpb24gZm9ybWF0RXZlcnlUaGlyZFBvd2VyKG5vdGF0aW9ucykgew0KICByZXR1cm4gZnVuY3Rpb24gKHZhbCkgew0KICAgIHZhciBiYXNlID0gMCwNCiAgICAgIG5vdGF0aW9uVmFsdWUgPSAiIjsNCiAgICBpZiAoIWlzRmluaXRlKHZhbCkpIHJldHVybiAiSW5maW5pdHkiOw0KICAgIGlmICh2YWwgPj0gMTAwMDAwMCkgew0KICAgICAgdmFsIC89IDEwMDA7DQogICAgICB3aGlsZSAoTWF0aC5yb3VuZCh2YWwpID49IDEwMDApIHsNCiAgICAgICAgdmFsIC89IDEwMDA7DQogICAgICAgIGJhc2UrKzsNCiAgICAgIH0NCiAgICAgIGlmIChiYXNlID49IG5vdGF0aW9ucy5sZW5ndGgpIHsNCiAgICAgICAgcmV0dXJuICJJbmZpbml0eSI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBub3RhdGlvblZhbHVlID0gbm90YXRpb25zW2Jhc2VdOw0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWwgKiAxMDAwKSAvIDEwMDAgKyBub3RhdGlvblZhbHVlOw0KICB9Ow0KfQ0KDQpmdW5jdGlvbiByYXdGb3JtYXR0ZXIodmFsKSB7DQogIHJldHVybiBNYXRoLnJvdW5kKHZhbCAqIDEwMDApIC8gMTAwMDsNCn0NCg0KdmFyIGZvcm1hdExvbmcgPSBbDQogICIgdGhvdXNhbmQiLA0KICAiIG1pbGxpb24iLA0KICAiIGJpbGxpb24iLA0KICAiIHRyaWxsaW9uIiwNCiAgIiBxdWFkcmlsbGlvbiIsDQogICIgcXVpbnRpbGxpb24iLA0KICAiIHNleHRpbGxpb24iLA0KICAiIHNlcHRpbGxpb24iLA0KICAiIG9jdGlsbGlvbiIsDQogICIgbm9uaWxsaW9uIiwNCl07DQp2YXIgcHJlZml4ZXMgPSBbDQogICIiLA0KICAidW4iLA0KICAiZHVvIiwNCiAgInRyZSIsDQogICJxdWF0dHVvciIsDQogICJxdWluIiwNCiAgInNleCIsDQogICJzZXB0ZW4iLA0KICAib2N0byIsDQogICJub3ZlbSIsDQpdOw0KdmFyIHN1ZmZpeGVzID0gWw0KICAiZGVjaWxsaW9uIiwNCiAgInZpZ2ludGlsbGlvbiIsDQogICJ0cmlnaW50aWxsaW9uIiwNCiAgInF1YWRyYWdpbnRpbGxpb24iLA0KICAicXVpbnF1YWdpbnRpbGxpb24iLA0KICAic2V4YWdpbnRpbGxpb24iLA0KICAic2VwdHVhZ2ludGlsbGlvbiIsDQogICJvY3RvZ2ludGlsbGlvbiIsDQogICJub25hZ2ludGlsbGlvbiIsDQpdOw0KZm9yICh2YXIgaSBpbiBzdWZmaXhlcykgew0KICBmb3IgKHZhciBpaSBpbiBwcmVmaXhlcykgew0KICAgIGZvcm1hdExvbmcucHVzaCgiICIgKyBwcmVmaXhlc1tpaV0gKyBzdWZmaXhlc1tpXSk7DQogIH0NCn0NCg0KdmFyIGZvcm1hdFNob3J0ID0gWyJrIiwgIk0iLCAiQiIsICJUIiwgIlFhIiwgIlFpIiwgIlN4IiwgIlNwIiwgIk9jIiwgIk5vIl07DQp2YXIgcHJlZml4ZXMgPSBbIiIsICJVbiIsICJEbyIsICJUciIsICJRYSIsICJRaSIsICJTeCIsICJTcCIsICJPYyIsICJObyJdOw0KdmFyIHN1ZmZpeGVzID0gWyJEIiwgIlYiLCAiVCIsICJRYSIsICJRaSIsICJTeCIsICJTcCIsICJPIiwgIk4iXTsNCmZvciAodmFyIGkgaW4gc3VmZml4ZXMpIHsNCiAgZm9yICh2YXIgaWkgaW4gcHJlZml4ZXMpIHsNCiAgICBmb3JtYXRTaG9ydC5wdXNoKCIgIiArIHByZWZpeGVzW2lpXSArIHN1ZmZpeGVzW2ldKTsNCiAgfQ0KfQ0KZm9ybWF0U2hvcnRbMTBdID0gIkRjIjsNCg0KdmFyIG51bWJlckZvcm1hdHRlcnMgPSBbDQogIGZvcm1hdEV2ZXJ5VGhpcmRQb3dlcihmb3JtYXRTaG9ydCksDQogIGZvcm1hdEV2ZXJ5VGhpcmRQb3dlcihmb3JtYXRMb25nKSwNCiAgcmF3Rm9ybWF0dGVyLA0KXTsNCnZhciBCZWF1dGlmeSA9IGZ1bmN0aW9uICh2YWwsIGZsb2F0cykgew0KICB2YXIgbmVnYXRpdmUgPSB2YWwgPCAwOw0KICB2YXIgZGVjaW1hbCA9ICIiOw0KICB2YXIgZml4ZWQgPSB2YWwudG9GaXhlZChmbG9hdHMpOw0KICBpZiAoZmxvYXRzID4gMCAmJiBNYXRoLmFicyh2YWwpIDwgMTAwMCAmJiBNYXRoLmZsb29yKGZpeGVkKSAhPSBmaXhlZCkNCiAgICBkZWNpbWFsID0gIi4iICsgZml4ZWQudG9TdHJpbmcoKS5zcGxpdCgiLiIpWzFdOw0KICB2YWwgPSBNYXRoLmZsb29yKE1hdGguYWJzKHZhbCkpOw0KICBpZiAoZmxvYXRzID4gMCAmJiBmaXhlZCA9PSB2YWwgKyAxKSB2YWwrKzsNCiAgLy92YXIgZm9ybWF0PSFFTj8yOkdhbWUucHJlZnMuZm9ybWF0PzI6MTsNCiAgdmFyIGZvcm1hdCA9IEdhbWUucHJlZnMuZm9ybWF0ID8gMiA6IDE7DQogIHZhciBmb3JtYXR0ZXIgPSBudW1iZXJGb3JtYXR0ZXJzW2Zvcm1hdF07DQogIHZhciBvdXRwdXQgPQ0KICAgIHZhbC50b1N0cmluZygpLmluZGV4T2YoImUrIikgIT0gLTEgJiYgZm9ybWF0ID09IDINCiAgICAgID8gdmFsLnRvUHJlY2lzaW9uKDMpLnRvU3RyaW5nKCkNCiAgICAgIDogZm9ybWF0dGVyKHZhbCkNCiAgICAgICAgICAudG9TdHJpbmcoKQ0KICAgICAgICAgIC5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCAiLCIpOw0KICAvL3ZhciBvdXRwdXQ9Zm9ybWF0dGVyKHZhbCkudG9TdHJpbmcoKS5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCcsJyk7DQogIGlmIChvdXRwdXQgPT0gIjAiKSBuZWdhdGl2ZSA9IGZhbHNlOw0KICByZXR1cm4gbmVnYXRpdmUgPyAiLSIgKyBvdXRwdXQgOiBvdXRwdXQgKyBkZWNpbWFsOw0KfTsNCnZhciBzaG9ydGVuTnVtYmVyID0gZnVuY3Rpb24gKHZhbCkgew0KICAvL2lmIG5vIHNjaWVudGlmaWMgbm90YXRpb24sIHJldHVybiBhcyBpcywgZWxzZSA6DQogIC8va2VlcCBvbmx5IHRoZSA1IGZpcnN0IGRpZ2l0cyAocGx1cyBkb3QpLCByb3VuZCB0aGUgcmVzdA0KICAvL21heSBvciBtYXkgbm90IHdvcmsgcHJvcGVybHkNCiAgaWYgKHZhbCA+PSAxMDAwMDAwICYmIGlzRmluaXRlKHZhbCkpIHsNCiAgICB2YXIgbnVtID0gdmFsLnRvU3RyaW5nKCk7DQogICAgdmFyIGluZCA9IG51bS5pbmRleE9mKCJlKyIpOw0KICAgIGlmIChpbmQgPT0gLTEpIHJldHVybiB2YWw7DQogICAgdmFyIHN0ciA9ICIiOw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kOyBpKyspIHsNCiAgICAgIHN0ciArPSBpIDwgNiA/IG51bVtpXSA6ICIwIjsNCiAgICB9DQogICAgc3RyICs9ICJlKyI7DQogICAgc3RyICs9IG51bS5zcGxpdCgiZSsiKVsxXTsNCiAgICByZXR1cm4gcGFyc2VGbG9hdChzdHIpOw0KICB9DQogIHJldHVybiB2YWw7DQp9Ow0KDQp2YXIgU2ltcGxlQmVhdXRpZnkgPSBmdW5jdGlvbiAodmFsKSB7DQogIHZhciBzdHIgPSB2YWwudG9TdHJpbmcoKTsNCiAgdmFyIHN0cjIgPSAiIjsNCiAgZm9yICh2YXIgaSBpbiBzdHIpIHsgLy9hZGQgY29tbWFzDQogICAgaWYgKChzdHIubGVuZ3RoIC0gaSkgJSAzID09IDAgJiYgaSA+IDApIHN0cjIgKz0gIiwiOw0KICAgIHN0cjIgKz0gc3RyW2ldOw0KICB9DQogIHJldHVybiBzdHIyOw0KfTsNCg0KdmFyIGJlYXV0aWZ5SW5UZXh0RmlsdGVyID0gLygoW1xkXStbLF0qKSspL2c7IC8vbmV3IHJlZ2V4DQpmdW5jdGlvbiBCZWF1dGlmeUluVGV4dEZ1bmN0aW9uKHN0cikgew0KICByZXR1cm4gQmVhdXRpZnkocGFyc2VJbnQoc3RyLnJlcGxhY2UoLywvZywgIiIpLCAxMCkpOw0KfQ0KZnVuY3Rpb24gQmVhdXRpZnlJblRleHQoc3RyKSB7DQogIHJldHVybiBzdHIucmVwbGFjZShiZWF1dGlmeUluVGV4dEZpbHRlciwgQmVhdXRpZnlJblRleHRGdW5jdGlvbik7DQp9IC8vcmVmb3JtYXQgZXZlcnkgbnVtYmVyIGluc2lkZSBhIHN0cmluZw0KZnVuY3Rpb24gQmVhdXRpZnlBbGwoKSB7DQogIC8vcnVuIHRocm91Z2ggdXBncmFkZXMgYW5kIGFjaGlldmVtZW50cyB0byByZWZvcm1hdCB0aGUgbnVtYmVycw0KICB2YXIgZnVuYyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgd2hhdC5kZGVzYyA9IEJlYXV0aWZ5SW5UZXh0KHdoYXQuZGRlc2MpOw0KICB9Ow0KICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNCeUlkKSB7DQogICAgR2FtZS5VcGdyYWRlc0J5SWRbaV0uZGRlc2MgPSBCZWF1dGlmeUluVGV4dChHYW1lLlVwZ3JhZGVzQnlJZFtpXS5kZGVzYyk7DQogIH0NCiAgZm9yICh2YXIgaSBpbiBHYW1lLkFjaGlldmVtZW50c0J5SWQpIHsNCiAgICBHYW1lLkFjaGlldmVtZW50c0J5SWRbaV0uZGRlc2MgPSBCZWF1dGlmeUluVGV4dCgNCiAgICAgIEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFtpXS5kZGVzYw0KICAgICk7DQogIH0NCn0NCg0KLy89PT0gTE9DQUxJWkFUSU9OID09PQ0KDQp2YXIgbG9jU3RyaW5ncyA9IHt9Ow0KdmFyIGxvY1N0cmluZ3NGYWxsYmFjayA9IHt9Ow0KdmFyIGxvY0lkID0gIk5PTkUiOw0KdmFyIEVOID0gdHJ1ZTsNCnZhciBsb2NOYW1lID0gIm5vbmUiOw0KdmFyIGxvY1BhdGNoZXMgPSBbXTsNCnZhciBsb2NQbHVyID0gIm5wbHVyYWxzPTI7cGx1cmFsPShuIT0xKTsiOyAvL3NlZSBodHRwOi8vZG9jcy50cmFuc2xhdGVob3VzZS5vcmcvcHJvamVjdHMvbG9jYWxpemF0aW9uLWd1aWRlL2VuL2xhdGVzdC9sMTBuL3BsdXJhbGZvcm1zLmh0bWwNCnZhciBsb2NQbHVyRmFsbGJhY2sgPSBsb2NQbHVyOw0KLy9ub3RlIDogcGx1cmFsIGluZGV4IHdpbGwgYmUgZG93bmdyYWRlZCB0byB0aGUgbGFzdCBtYXRjaGluZywgaWUuIGluIHRoaXMgY2FzZSwgaWYgd2UgZ2V0ICIwIiBidXQgZG9uJ3QgaGF2ZSBhIDNyZCBvcHRpb24sIHVzZSB0aGUgMm5kIG9wdGlvbiAob3IgMXN0LCBsYWNraW5nIHRoYXQgdG9vKQ0KdmFyIGxvY1N0cmluZ3NCeVBhcnQgPSB7fTsNCnZhciBGaW5kTG9jU3RyaW5nQnlQYXJ0ID0gZnVuY3Rpb24gKG1hdGNoKSB7DQogIHJldHVybiBsb2NTdHJpbmdzQnlQYXJ0W21hdGNoXSB8fCB1bmRlZmluZWQ7DQogIC8qDQoJLy9ub3RlOiBzbG93LCBvbmx5IGRvIHRoaXMgb24gaW5pdA0KCWZvciAodmFyIGkgaW4gbG9jU3RyaW5ncyl7DQoJCXZhciBiaXQ9aS5zcGxpdCgnXScpOw0KCQlpZiAoYml0WzBdLnN1YnN0cmluZygxKT09bWF0Y2gpIHJldHVybiBpOw0KCX0NCglyZXR1cm4gdW5kZWZpbmVkOw0KCSovDQp9Ow0KDQp2YXIgTGFuZ3MgPSB7DQogIEVOOiB7DQogICAgZmlsZTogIkVOIiwNCiAgICBuYW1lRU46ICJFbmdsaXNoIiwNCiAgICBuYW1lOiAiRW5nbGlzaCIsDQogICAgY2hhbmdlTGFuZ3VhZ2U6ICJMYW5ndWFnZSIsDQogICAgaWNvbjogMCwNCiAgICB3OiAxLA0KICAgIGlzRU46IHRydWUsDQogIH0sDQogIEZSOiB7DQogICAgZmlsZTogIkZSIiwNCiAgICBuYW1lRU46ICJGcmVuY2giLA0KICAgIG5hbWU6ICJGcmFuJmNjZWRpbDthaXMiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiTGFuZ3VlIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIERFOiB7DQogICAgZmlsZTogIkRFIiwNCiAgICBuYW1lRU46ICJHZXJtYW4iLA0KICAgIG5hbWU6ICJEZXV0c2NoIiwNCiAgICBjaGFuZ2VMYW5ndWFnZTogIlNwcmFjaGUiLA0KICAgIGljb246IDAsDQogICAgdzogMSwNCiAgfSwNCiAgTkw6IHsNCiAgICBmaWxlOiAiTkwiLA0KICAgIG5hbWVFTjogIkR1dGNoIiwNCiAgICBuYW1lOiAiTmVkZXJsYW5kcyIsDQogICAgY2hhbmdlTGFuZ3VhZ2U6ICJUYWFsIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIENTOiB7DQogICAgZmlsZTogIkNTIiwNCiAgICBuYW1lRU46ICJDemVjaCIsDQogICAgbmFtZTogIiYjeDEwQztlJiN4MTYxO3RpbmEiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiSmF6eWsiLA0KICAgIGljb246IDAsDQogICAgdzogMSwNCiAgfSwNCiAgUEw6IHsNCiAgICBmaWxlOiAiUEwiLA0KICAgIG5hbWVFTjogIlBvbGlzaCIsDQogICAgbmFtZTogIlBvbHNraSIsDQogICAgY2hhbmdlTGFuZ3VhZ2U6ICJKJiMyODE7enlrIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIElUOiB7DQogICAgZmlsZTogIklUIiwNCiAgICBuYW1lRU46ICJJdGFsaWFuIiwNCiAgICBuYW1lOiAiSXRhbGlhbm8iLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiTGluZ3VhIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIEVTOiB7DQogICAgZmlsZTogIkVTIiwNCiAgICBuYW1lRU46ICJTcGFuaXNoIiwNCiAgICBuYW1lOiAiRXNwYSYjeEYxO29sIiwNCiAgICBjaGFuZ2VMYW5ndWFnZTogIklkaW9tYSIsDQogICAgaWNvbjogMCwNCiAgICB3OiAxLA0KICB9LA0KICAiUFQtQlIiOiB7DQogICAgZmlsZTogIlBULUJSIiwNCiAgICBuYW1lRU46ICJQb3J0dWd1ZXNlIiwNCiAgICBuYW1lOiAiUG9ydHVndSYjeEVBO3MiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiSWRpb21hIiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEsDQogIH0sDQogIEpBOiB7DQogICAgZmlsZTogIkpBIiwNCiAgICBuYW1lRU46ICJKYXBhbmVzZSIsDQogICAgbmFtZTogIiYjeDY1RTU7JiN4NjcyQzsmI3g4QTlFOyIsDQogICAgY2hhbmdlTGFuZ3VhZ2U6ICImIzM1MzI4OyYjMzU0ODY7IiwNCiAgICBpY29uOiAwLA0KICAgIHc6IDEuNSwNCiAgfSwNCiAgIlpILUNOIjogew0KICAgIGZpbGU6ICJaSC1DTiIsDQogICAgbmFtZUVOOiAiQ2hpbmVzZSIsDQogICAgbmFtZTogIiYjeDRFMkQ7JiN4NjU4NzsiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiJiMzNTgyMTsmIzM1MzI4OyIsDQogICAgaWNvbjogMCwNCiAgICB3OiAxLjUsDQogIH0sDQogIEtPOiB7DQogICAgZmlsZTogIktPIiwNCiAgICBuYW1lRU46ICJLb3JlYW4iLA0KICAgIG5hbWU6ICImI3hENTVDOyYjeEFFMDA7IiwNCiAgICBjaGFuZ2VMYW5ndWFnZTogIiYjeEM1Qjg7JiN4QzVCNDsiLA0KICAgIGljb246IDAsDQogICAgdzogMS41LA0KICB9LA0KICBSVTogew0KICAgIGZpbGU6ICJSVSIsDQogICAgbmFtZUVOOiAiUnVzc2lhbiIsDQogICAgbmFtZTogIiYjeDQyMDsmI3g0NDM7JiN4NDQxOyYjeDQ0MTsmI3g0M0E7JiN4NDM4OyYjeDQzOTsiLA0KICAgIGNoYW5nZUxhbmd1YWdlOiAiJiMxMDcxOyYjMTA3OTsmIzEwOTk7JiMxMDgyOyIsDQogICAgaWNvbjogMCwNCiAgICB3OiAxLjIsDQogIH0sDQp9Ow0KDQovL25vdGUgOiBiYXNlbGluZSBzaG91bGQgYmUgdGhlIG9yaWdpbmFsIGVuZ2xpc2ggdGV4dA0KLy9pbiBzZXZlcmFsIGluc3RhbmNlcywgdGhlIGVuZ2xpc2ggdGV4dCB3aWxsIGJlIHF1aXRlIGRpZmZlcmVudCBmcm9tIHRoZSBvdGhlciBsYW5ndWFnZXMsIGFzIHRoaXMgZ2FtZSB3YXMgaW5pdGlhbGx5IG5ldmVyIG1lYW50IHRvIGJlIHRyYW5zbGF0ZWQgYW5kIHRoZSB0cmFuc2xhdGlvbiBwcm9jZXNzIGRvZXNuJ3QgYWx3YXlzIHBsYXkgd2VsbCB3aXRoIGNvbXBsZXggc2VudGVuY2Ugc3RydWN0dXJlcw0KLyp1c2U6DQoJbG9jKCdQbGFpbiB0ZXh0JykNCglsb2MoJ1RleHQgd2hlcmUgJTEgaXMgYSBwYXJhbWV0ZXInLCdzb21ldGhpbmcnKQ0KCWxvYygnVGV4dCB3aGVyZSAlMSBhbmQgJTIgYXJlIHBhcmFtZXRlcnMnLFsnYSB0aGluZycsJ2Fub3RoZXIgdGhpbmcnXSkNCglsb2MoJ1RoZXJlIGlzICUxIGFwcGxlJyw1KQ0KCQkgLi4uaWYgdGhlIGxvY2FsaXplZCBzdHJpbmcgaXMgYW4gYXJyYXksIHRoaXMgaXMgcGFyc2VkIGFzIGEgcGx1cmFsaXplZCBzdHJpbmc7IGZvciBpbnN0YW5jZSwgdGhlIGxvY2FsaXplZCBzdHJpbmcgY291bGQgYmUNCgkJIlRoZXJlIGlzICUxIGFwcGxlIjpbDQoJCQkiVGhlcmUgaXMgJTEgYXBwbGUiLA0KCQkJIlRoZXJlIGFyZSAlMSBhcHBsZXMiDQoJCV0NCglsb2MoJ1RoZXJlIGlzICUxIGFwcGxlIGFuZCBhbHNvLCAlMiEnLFs1LCdoZWxsbyddKQ0KCWxvYygnVGhpcyBzdHJpbmcgaXMgbG9jYWxpemVkLicsMCwnVGhpcyBpcyB0aGUgc3RyaW5nIGRpc3BsYXllZCBpbiB0aGUgZW5nbGlzaCB2ZXJzaW9uLicpDQoJbG9jKCdZb3UgaGF2ZSAlMS4nLCc8Yj4nK2xvYygnJTEgYXBwbGUnLExCZWF1dGlmeShhbW91bnQpKSsnPC9iPicpDQoJCS4uLnlvdSBtYXkgbmVzdCBsb2NhbGl6ZWQgc3RyaW5ncywgYW5kIHVzZSBMQmVhdXRpZnkoKSB0byBwYWNrIEJlYXV0aWZpZWQgdmFsdWVzDQoqLw0KdmFyIGxvY0JsaW5rID0gZmFsc2U7DQp2YXIgbG9jYWxpemF0aW9uTm90Rm91bmQgPSBbXTsNCnZhciBsb2MgPSBmdW5jdGlvbiAoaWQsIHBhcmFtcywgYmFzZWxpbmUpIHsNCiAgdmFyIGZhbGxiYWNrID0gZmFsc2U7DQogIHZhciBmb3VuZCA9IGxvY1N0cmluZ3NbaWRdOw0KICBpZiAoIWZvdW5kKSB7DQogICAgZm91bmQgPSBsb2NTdHJpbmdzRmFsbGJhY2tbaWRdOw0KICAgIGZhbGxiYWNrID0gdHJ1ZTsNCiAgfQ0KICBpZiAoZm91bmQpIHsNCiAgICB2YXIgc3RyID0gIiI7DQogICAgc3RyID0gcGFyc2VMb2MoZm91bmQsIHBhcmFtcyk7DQogICAgLy9yZXR1cm4gc3RyOw0KICAgIGlmIChzdHIuY29uc3RydWN0b3IgPT09IEFycmF5KSByZXR1cm4gc3RyOw0KICAgIGlmIChsb2NCbGluayAmJiAhZmFsbGJhY2spDQogICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPSJibGlua2luZyI+JyArIHN0ciArICI8L3NwYW4+IjsgLy93aWxsIG1ha2UgZXZlcnkgbG9jYWxpemVkIHRleHQgYmxpbmsgb24gc2NyZWVuLCBtYWtpbmcgb21pc3Npb25zIG9idmlvdXM7IHdpbGwgbm90IHdvcmsgZm9yIGVsZW1lbnRzIGZpbGxlZCB3aXRoIHRleHRDb250ZW50DQogIH0NCg0KICAvL2lmICgoZmFsbGJhY2sgfHwgIWZvdW5kKSAmJiBsb2NhbGl6YXRpb25Ob3RGb3VuZC5sZW5ndGg8MjAgJiYgbG9jYWxpemF0aW9uTm90Rm91bmQuaW5kZXhPZihpZCk9PS0xKXtsb2NhbGl6YXRpb25Ob3RGb3VuZC5wdXNoKGlkKTtjb25zb2xlLnRyYWNlKCdsb2NhbGl6YXRpb24gc3RyaW5nIG5vdCBmb3VuZDogJyxpZCk7fQ0KICBpZiAoZm91bmQpIHJldHVybiBzdHI7DQogIHJldHVybiBiYXNlbGluZSB8fCBpZDsNCn07DQoNCnZhciBwYXJzZUxvYyA9IGZ1bmN0aW9uIChzdHIsIHBhcmFtcykgew0KICAvKg0KCQlwYXJzZXMgbG9jYWxpemF0aW9uIHN0cmluZ3MNCgkJLXRoZXJlIGNhbiBvbmx5IGJlIDEgcGx1cmFsIHBlciBzdHJpbmcgYW5kIGl0IE1VU1QgYmUgYXQgaW5kZXggJTENCgkJLWEgcGx1cmFsaXplZCBzdHJpbmcgaXMgZGV0ZWN0ZWQgaWYgd2UgaGF2ZSBhdCBsZWFzdCAxIHBhcmFtIGFuZCB0aGUgbWF0Y2hpbmcgbG9jYWxpemVkIHN0cmluZyBpcyBhbiBhcnJheQ0KCSovDQogIGlmICh0eXBlb2YgcGFyYW1zID09PSAidW5kZWZpbmVkIikgcGFyYW1zID0gW107DQogIGVsc2UgaWYgKHBhcmFtcy5jb25zdHJ1Y3RvciAhPT0gQXJyYXkpIHBhcmFtcyA9IFtwYXJhbXNdOw0KICBpZiAoIXN0cikgcmV0dXJuICIiOw0KICAvL2lmIChzdHIuY29uc3RydWN0b3I9PT1BcnJheSkgcmV0dXJuIHN0cjsNCiAgLy9pZiAodHlwZW9mIHN0cj09PSdmdW5jdGlvbicpIHJldHVybiBzdHIocGFyYW1zKTsNCiAgLy9zdHI9c3RyLnJlcGxhY2UoL1tcdFxuXHJdL2dtLCcnKTsNCg0KICBpZiAocGFyYW1zLmxlbmd0aCA9PSAwKSByZXR1cm4gc3RyOw0KDQogIGlmIChzdHIuY29uc3RydWN0b3IgPT09IEFycmF5KSB7DQogICAgaWYgKHR5cGVvZiBwYXJhbXNbMF0gPT09ICJvYmplY3QiKSB7DQogICAgICAvL2FuIG9iamVjdCBjb250YWluaW5nIGEgYmVhdXRpZmllZCBudW1iZXINCiAgICAgIHZhciBwbHVySW5kZXggPSBsb2NQbHVyKHBhcmFtc1swXS5uKTsNCiAgICAgIHBsdXJJbmRleCA9IE1hdGgubWluKHN0ci5sZW5ndGggLSAxLCBwbHVySW5kZXgpOw0KICAgICAgc3RyID0gc3RyW3BsdXJJbmRleF07DQogICAgICBzdHIgPSByZXBsYWNlQWxsKCIlMSIsIHBhcmFtc1swXS5iLCBzdHIpOw0KICAgIH0gZWxzZSB7DQogICAgICB2YXIgcGx1ckluZGV4ID0gbG9jUGx1cihwYXJhbXNbMF0pOw0KICAgICAgcGx1ckluZGV4ID0gTWF0aC5taW4oc3RyLmxlbmd0aCAtIDEsIHBsdXJJbmRleCk7DQogICAgICBzdHIgPSBzdHJbcGx1ckluZGV4XTsNCiAgICAgIHN0ciA9IHJlcGxhY2VBbGwoIiUxIiwgcGFyYW1zWzBdLCBzdHIpOw0KICAgIH0NCiAgfQ0KDQogIHZhciBvdXQgPSAiIjsNCiAgdmFyIGxlbiA9IHN0ci5sZW5ndGg7DQogIHZhciBpblBlcmNlbnQgPSBmYWxzZTsNCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgew0KICAgIHZhciBpdCA9IHN0cltpXTsNCiAgICBpZiAoaW5QZXJjZW50KSB7DQogICAgICBpblBlcmNlbnQgPSBmYWxzZTsNCiAgICAgIGlmICghaXNOYU4oaXQpICYmIHBhcmFtcy5sZW5ndGggPj0gcGFyc2VJbnQoaXQpIC0gMSkNCiAgICAgICAgb3V0ICs9IHBhcmFtc1twYXJzZUludChpdCkgLSAxXTsNCiAgICAgIGVsc2Ugb3V0ICs9ICIlIiArIGl0Ow0KICAgIH0gZWxzZSBpZiAoaXQgPT0gIiUiKSBpblBlcmNlbnQgPSB0cnVlOw0KICAgIGVsc2Ugb3V0ICs9IGl0Ow0KICB9DQogIHJldHVybiBvdXQ7DQp9Ow0KDQp2YXIgTEJlYXV0aWZ5ID0gZnVuY3Rpb24gKHZhbCwgZmxvYXRzKSB7DQogIC8vcmV0dXJucyBhbiBvYmplY3QgaW4gdGhlIGZvcm0ge246b3JpZ2luYWwgdmFsdWUgZmxvb3JlZCxiOmJlYXV0aWZpZWQgdmFsdWUgYXMgc3RyaW5nfSBmb3IgbG9jYWxpemF0aW9uIHB1cnBvc2VzDQogIHJldHVybiB7IG46IE1hdGguZmxvb3IoTWF0aC5hYnModmFsKSksIGI6IEJlYXV0aWZ5KHZhbCwgZmxvYXRzKSB9Ow0KfTsNCg0KdmFyIE1vZExhbmd1YWdlID0gZnVuY3Rpb24gKGlkLCBqc29uKSB7DQogIGlmIChpZCA9PSAiKiIpIGlkID0gbG9jSWQ7DQogIGlmIChpZCAhPSBsb2NJZCB8fCAhTGFuZ3NbaWRdKSByZXR1cm4gZmFsc2U7DQogIGlmIChqc29uWyJSRVBMQUNFIEFMTCJdKSB7DQogICAgdmFyIHJlcCA9IGZ1bmN0aW9uIChzdHIsIGZyb20sIHRvKSB7DQogICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKGZyb20sICJpZyIpOw0KICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4LCBmdW5jdGlvbiAobWF0Y2gpIHsNCiAgICAgICAgcmV0dXJuIG1hdGNoWzBdID09IG1hdGNoWzBdLnRvTG93ZXJDYXNlKCkgPyB0byA6IGNhcCh0byk7DQogICAgICB9KTsNCiAgICB9Ow0KICAgIGZvciAodmFyIGkgaW4ganNvblsiUkVQTEFDRSBBTEwiXSkgew0KICAgICAgdmFyIHRvID0ganNvblsiUkVQTEFDRSBBTEwiXVtpXTsNCiAgICAgIGZvciAodmFyIGlpIGluIGxvY1N0cmluZ3MpIHsNCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobG9jU3RyaW5nc1tpaV0pKSB7DQogICAgICAgICAgZm9yICh2YXIgaWlpIGluIGxvY1N0cmluZ3NbaWldKSB7DQogICAgICAgICAgICBsb2NTdHJpbmdzW2lpXVtpaWldID0gcmVwKGxvY1N0cmluZ3NbaWldW2lpaV0sIGksIHRvKTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBsb2NTdHJpbmdzW2lpXSA9IHJlcChsb2NTdHJpbmdzW2lpXSwgaSwgdG8pOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICBkZWxldGUganNvblsiUkVQTEFDRSBBTEwiXTsNCiAgQWRkTGFuZ3VhZ2UoaWQsIExhbmdzW2lkXS5uYW1lLCBqc29uLCB0cnVlKTsNCn07DQoNCnZhciBBZGRMYW5ndWFnZSA9IGZ1bmN0aW9uIChpZCwgbmFtZSwganNvbiwgbW9kKSB7DQogIC8vdXNlZCBpbiBsb2MgZmlsZXMNCiAgLy9pZiBtb2QgaXMgdHJ1ZSwgdGhpcyBmaWxlIGlzIGF1Z21lbnRpbmcgdGhlIGN1cnJlbnQgbGFuZ3VhZ2UNCiAgaWYgKGlkID09IGxvY0lkICYmICFtb2QpIHJldHVybiBmYWxzZTsgLy9kb24ndCBsb2FkIHR3aWNlDQogIGlmICghTGFuZ3NbaWRdKSByZXR1cm4gZmFsc2U7DQogIGxvY0lkID0gaWQ7DQogIGlmIChMYW5nc1tsb2NJZF0uaXNFTikgRU4gPSB0cnVlOw0KICBlbHNlIEVOID0gZmFsc2U7DQogIGxvY05hbWUgPSBMYW5nc1tpZF0ubmFtZUVOOyAvL25hbWUNCg0KICBpZiAobW9kKSB7DQogICAgZm9yICh2YXIgaSBpbiBqc29uKSB7DQogICAgICBsb2NTdHJpbmdzW2ldID0ganNvbltpXTsNCiAgICB9DQogICAgZm9yICh2YXIgaSBpbiBsb2NTdHJpbmdzKSB7DQogICAgICB2YXIgYml0ID0gaS5zcGxpdCgiXSIpOw0KICAgICAgaWYgKA0KICAgICAgICBiaXRbMV0gJiYNCiAgICAgICAgYml0WzBdLmluZGV4T2YoIltDT01NRU5UOiIpICE9IDAgJiYNCiAgICAgICAgIWxvY1N0cmluZ3NCeVBhcnRbYml0WzBdLnN1YnN0cmluZygxKV0NCiAgICAgICkNCiAgICAgICAgbG9jU3RyaW5nc0J5UGFydFtiaXRbMF0uc3Vic3RyaW5nKDEpXSA9IGk7DQogICAgfQ0KICAgIGNvbnNvbGUubG9nKCdBdWdtZW50ZWQgbGFuZ3VhZ2UgIicgKyBsb2NOYW1lICsgJyIuJyk7DQogIH0gZWxzZSB7DQogICAgbG9jU3RyaW5ncyA9IGpzb247DQogICAgbG9jUGx1ciA9IGpzb25bIiJdWyJwbHVyYWwtZm9ybXMiXSB8fCBsb2NQbHVyRmFsbGJhY2s7DQogICAgZGVsZXRlIGxvY1N0cmluZ3NbIiJdOw0KICAgIGZvciAodmFyIGkgaW4gbG9jU3RyaW5ncykgew0KICAgICAgaWYgKGxvY1N0cmluZ3NbaV0gPT0gIi8iKSBsb2NTdHJpbmdzW2ldID0gaTsNCiAgICB9DQoNCiAgICBsb2NQbHVyID0gKGZ1bmN0aW9uIChwbHVyYWxfZm9ybSkgew0KICAgICAgLy9saWZ0ZWQgYW5kIG1vZGlmaWVkIGZyb20gZ2V0dGV4dC5qcw0KICAgICAgdmFyIHBmX3JlID0gbmV3IFJlZ0V4cCgNCiAgICAgICAgIl5cXHMqbnBsdXJhbHNcXHMqPVxccypbMC05XStcXHMqO1xccypwbHVyYWxcXHMqPVxccyooPzpcXHN8Wy1cXD9cXHwmPSE8PisqLyU6O24wLTlfKCldKSsiDQogICAgICApOw0KICAgICAgaWYgKCFwZl9yZS50ZXN0KHBsdXJhbF9mb3JtKSkNCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcGx1cmFsIGZvcm0gIicgKyBwbHVyYWxfZm9ybSArICciIGlzIG5vdCB2YWxpZCcpOw0KICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbigNCiAgICAgICAgIm4iLA0KICAgICAgICAidmFyIHBsdXJhbCwgbnBsdXJhbHM7ICIgKyBwbHVyYWxfZm9ybSArICIgcmV0dXJuIHBsdXJhbDsiDQogICAgICApOw0KICAgICAgLy9yZXR1cm4gbmV3IEZ1bmN0aW9uKCduJywndmFyIHBsdXJhbCwgbnBsdXJhbHM7ICcrIHBsdXJhbF9mb3JtICsnIHJldHVybiB7IG5wbHVyYWxzOiBucGx1cmFscywgcGx1cmFsOiAocGx1cmFsID09PSB0cnVlID8gMSA6IChwbHVyYWwgPyBwbHVyYWwgOiAwKSkgfTsnKTsNCiAgICB9KShsb2NQbHVyKTsNCg0KICAgIGxvY1BhdGNoZXMgPSBbXTsNCiAgICBmb3IgKHZhciBpIGluIGxvY1N0cmluZ3MpIHsNCiAgICAgIGlmIChpLnNwbGl0KCJ8IilbMF0gPT0gIlVwZGF0ZSBub3RlcyIpIHsNCiAgICAgICAgdmFyIHBhdGNoID0gaS5zcGxpdCgifCIpOw0KICAgICAgICB2YXIgcGF0Y2hUcmFuc2xhdGVkID0gbG9jU3RyaW5nc1tpXS5zcGxpdCgifCIpOw0KICAgICAgICBsb2NQYXRjaGVzLnB1c2goew0KICAgICAgICAgIGlkOiBwYXJzZUludChwYXRjaFsxXSksDQogICAgICAgICAgdHlwZTogMSwNCiAgICAgICAgICB0aXRsZTogcGF0Y2hUcmFuc2xhdGVkWzJdLA0KICAgICAgICAgIHBvaW50czogcGF0Y2hUcmFuc2xhdGVkLnNsaWNlKDMpLA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogICAgdmFyIHNvcnRNYXAgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgaWYgKGEuaWQgPCBiLmlkKSByZXR1cm4gMTsNCiAgICAgIGVsc2UgcmV0dXJuIC0xOw0KICAgIH07DQogICAgbG9jUGF0Y2hlcy5zb3J0KHNvcnRNYXApOw0KDQogICAgZm9yICh2YXIgaSBpbiBsb2NTdHJpbmdzKSB7DQogICAgICB2YXIgYml0ID0gaS5zcGxpdCgiXSIpOw0KICAgICAgaWYgKA0KICAgICAgICBiaXRbMV0gJiYNCiAgICAgICAgYml0WzBdLmluZGV4T2YoIltDT01NRU5UOiIpICE9IDAgJiYNCiAgICAgICAgIWxvY1N0cmluZ3NCeVBhcnRbYml0WzBdLnN1YnN0cmluZygxKV0NCiAgICAgICkNCiAgICAgICAgbG9jU3RyaW5nc0J5UGFydFtiaXRbMF0uc3Vic3RyaW5nKDEpXSA9IGk7DQogICAgfQ0KDQogICAgY29uc29sZS5sb2coJ0xvYWRlZCBsYW5ndWFnZSAiJyArIGxvY05hbWUgKyAnIi4nKTsNCiAgfQ0KfTsNCg0KdmFyIExvYWRMYW5nID0gTG9hZFNjcmlwdDsNCg0KdmFyIExvY2FsaXplVXBncmFkZXNBbmRBY2hpZXZzID0gZnVuY3Rpb24gKCkgew0KICBpZiAoIUdhbWUuVXBncmFkZXNCeUlkKSByZXR1cm4gZmFsc2U7DQoNCiAgdmFyIGFsbFRoaW5ncyA9IFtdOw0KICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNCeUlkKSB7DQogICAgYWxsVGhpbmdzLnB1c2goR2FtZS5VcGdyYWRlc0J5SWRbaV0pOw0KICB9DQogIGZvciAodmFyIGkgaW4gR2FtZS5BY2hpZXZlbWVudHNCeUlkKSB7DQogICAgYWxsVGhpbmdzLnB1c2goR2FtZS5BY2hpZXZlbWVudHNCeUlkW2ldKTsNCiAgfQ0KICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbFRoaW5ncy5sZW5ndGg7IGkrKykgew0KICAgIHZhciBpdCA9IGFsbFRoaW5nc1tpXTsNCiAgICB2YXIgdHlwZSA9IGl0LmdldFR5cGUoKTsNCiAgICB2YXIgZm91bmQgPSAwOw0KICAgIGZvdW5kID0gRmluZExvY1N0cmluZ0J5UGFydCh0eXBlICsgIiBuYW1lICIgKyBpdC5pZCk7DQogICAgaWYgKGZvdW5kKSBpdC5kbmFtZSA9IGxvYyhmb3VuZCk7DQoNCiAgICBpZiAoIUVOKSBpdC5iYXNlRGVzYyA9IGl0LmJhc2VEZXNjLnJlcGxhY2UoLzxxPi4qLywgIiIpOyAvL3N0cmlwIHF1b3RlIHNlY3Rpb24NCiAgICBpdC5kZGVzYyA9IEJlYXV0aWZ5SW5UZXh0KGl0LmJhc2VEZXNjKTsNCg0KICAgIGZvdW5kID0gRmluZExvY1N0cmluZ0J5UGFydCh0eXBlICsgIiBkZXNjICIgKyBpdC5pZCk7DQogICAgaWYgKGZvdW5kKSBpdC5kZGVzYyA9IGxvYyhmb3VuZCk7DQogICAgZm91bmQgPSBGaW5kTG9jU3RyaW5nQnlQYXJ0KHR5cGUgKyAiIHF1b3RlICIgKyBpdC5pZCk7DQogICAgaWYgKGZvdW5kKSBpdC5kZGVzYyArPSAiPHE+IiArIGxvYyhmb3VuZCkgKyAiPC9xPiI7DQogIH0NCiAgQmVhdXRpZnlBbGwoKTsNCn07DQp2YXIgZ2V0VXBncmFkZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgew0KICB2YXIgaXQgPSBHYW1lLlVwZ3JhZGVzW25hbWVdOw0KICB2YXIgZm91bmQgPSBGaW5kTG9jU3RyaW5nQnlQYXJ0KCJVcGdyYWRlIG5hbWUgIiArIGl0LmlkKTsNCiAgaWYgKGZvdW5kKSByZXR1cm4gbG9jKGZvdW5kKTsNCiAgZWxzZSByZXR1cm4gbmFtZTsNCn07DQp2YXIgZ2V0QWNoaWV2ZW1lbnROYW1lID0gZnVuY3Rpb24gKG5hbWUpIHsNCiAgdmFyIGl0ID0gR2FtZS5BY2hpZXZlbWVudHNbbmFtZV07DQogIHZhciBmb3VuZCA9IEZpbmRMb2NTdHJpbmdCeVBhcnQoIkFjaGlldmVtZW50IG5hbWUgIiArIGl0LmlkKTsNCiAgaWYgKGZvdW5kKSByZXR1cm4gbG9jKGZvdW5kKTsNCiAgZWxzZSByZXR1cm4gbmFtZTsNCn07DQoNCi8vdGhlc2UgYXJlIGZhdWx0eSwgaW52ZXN0aWdhdGUgbGF0ZXINCi8vZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKXtyZXR1cm4gYnRvYShzdHIpO30NCi8vZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKXtyZXR1cm4gYXRvYihzdHIpO30NCg0KLypmdW5jdGlvbiB1dGY4X3RvX2I2NCggc3RyICkgew0KCXRyeXtyZXR1cm4gQmFzZTY0LmVuY29kZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoIHN0ciApKSk7fQ0KCWNhdGNoKGVycikNCgl7cmV0dXJuICcnO30NCn0NCg0KZnVuY3Rpb24gYjY0X3RvX3V0ZjgoIHN0ciApIHsNCgl0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoQmFzZTY0LmRlY29kZSggc3RyICkpKTt9DQoJY2F0Y2goZXJyKQ0KCXtyZXR1cm4gJyc7fQ0KfSovDQoNCi8vcGhld2llISBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDEwNjQ3Ni91c2luZy1qYXZhc2NyaXB0cy1hdG9iLXRvLWRlY29kZS1iYXNlNjQtZG9lc250LXByb3Blcmx5LWRlY29kZS11dGYtOC1zdHJpbmdzDQpmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHsNCiAgdHJ5IHsNCiAgICByZXR1cm4gYnRvYSgNCiAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoLyUoWzAtOUEtRl17Mn0pL2csIGZ1bmN0aW9uIChtYXRjaCwgcDEpIHsNCiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQocDEsIDE2KSk7DQogICAgICB9KQ0KICAgICk7DQogIH0gY2F0Y2ggKGVycikgew0KICAgIHJldHVybiAiIjsNCiAgfQ0KfQ0KDQpmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHsNCiAgdHJ5IHsNCiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KA0KICAgICAgQXJyYXkucHJvdG90eXBlLm1hcA0KICAgICAgICAuY2FsbChhdG9iKHN0ciksIGZ1bmN0aW9uIChjKSB7DQogICAgICAgICAgcmV0dXJuICIlIiArICgiMDAiICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpOw0KICAgICAgICB9KQ0KICAgICAgICAuam9pbigiIikNCiAgICApOw0KICB9IGNhdGNoIChlcnIpIHsNCiAgICByZXR1cm4gIiI7DQogIH0NCn0NCg0KZnVuY3Rpb24gQ29tcHJlc3NCaW4oYXJyKSB7DQogIC8vY29tcHJlc3MgYSBzZXF1ZW5jZSBsaWtlIFswLDEsMSwwLDEsMF0uLi4gaW50byBhIG51bWJlciBsaWtlIDU0Lg0KICB2YXIgc3RyID0gIiI7DQogIHZhciBhcnIyID0gYXJyLnNsaWNlKDApOw0KICBhcnIyLnVuc2hpZnQoMSk7DQogIGFycjIucHVzaCgxKTsNCiAgYXJyMi5yZXZlcnNlKCk7DQogIGZvciAodmFyIGkgaW4gYXJyMikgew0KICAgIHN0ciArPSBhcnIyW2ldOw0KICB9DQogIHN0ciA9IHBhcnNlSW50KHN0ciwgMik7DQogIHJldHVybiBzdHI7DQp9DQoNCmZ1bmN0aW9uIFVuY29tcHJlc3NCaW4obnVtKSB7DQogIC8vdW5jb21wcmVzcyBhIG51bWJlciBsaWtlIDU0IHRvIGEgc2VxdWVuY2UgbGlrZSBbMCwxLDEsMCwxLDBdLg0KICB2YXIgYXJyID0gbnVtLnRvU3RyaW5nKDIpOw0KICBhcnIgPSBhcnIuc3BsaXQoIiIpOw0KICBhcnIucmV2ZXJzZSgpOw0KICBhcnIuc2hpZnQoKTsNCiAgYXJyLnBvcCgpOw0KICByZXR1cm4gYXJyOw0KfQ0KDQpmdW5jdGlvbiBDb21wcmVzc0xhcmdlQmluKGFycikgew0KICAvL3dlIGhhdmUgdG8gY29tcHJlc3MgaW4gc21hbGxlciBjaHVua3MgdG8gYXZvaWQgZ2V0dGluZyBpbnRvIHNjaWVudGlmaWMgbm90YXRpb24NCiAgdmFyIGFycjIgPSBhcnIuc2xpY2UoMCk7DQogIHZhciB0aGlzQml0ID0gW107DQogIHZhciBiaXRzID0gW107DQogIGZvciAodmFyIGkgaW4gYXJyMikgew0KICAgIHRoaXNCaXQucHVzaChhcnIyW2ldKTsNCiAgICBpZiAodGhpc0JpdC5sZW5ndGggPj0gNTApIHsNCiAgICAgIGJpdHMucHVzaChDb21wcmVzc0Jpbih0aGlzQml0KSk7DQogICAgICB0aGlzQml0ID0gW107DQogICAgfQ0KICB9DQogIGlmICh0aGlzQml0Lmxlbmd0aCA+IDApIGJpdHMucHVzaChDb21wcmVzc0Jpbih0aGlzQml0KSk7DQogIGFycjIgPSBiaXRzLmpvaW4oIjsiKTsNCiAgcmV0dXJuIGFycjI7DQp9DQoNCmZ1bmN0aW9uIFVuY29tcHJlc3NMYXJnZUJpbihhcnIpIHsNCiAgdmFyIGFycjIgPSBhcnIuc3BsaXQoIjsiKTsNCiAgdmFyIGJpdHMgPSBbXTsNCiAgZm9yICh2YXIgaSBpbiBhcnIyKSB7DQogICAgYml0cy5wdXNoKFVuY29tcHJlc3NCaW4ocGFyc2VJbnQoYXJyMltpXSkpKTsNCiAgfQ0KICBhcnIyID0gW107DQogIGZvciAodmFyIGkgaW4gYml0cykgew0KICAgIGZvciAodmFyIGlpIGluIGJpdHNbaV0pIGFycjIucHVzaChiaXRzW2ldW2lpXSk7DQogIH0NCiAgcmV0dXJuIGFycjI7DQp9DQoNCmZ1bmN0aW9uIHBhY2soYnl0ZXMpIHsNCiAgdmFyIGNoYXJzID0gW107DQogIHZhciBsZW4gPSBieXRlcy5sZW5ndGg7DQogIGZvciAodmFyIGkgPSAwLCBuID0gbGVuOyBpIDwgbjsgKSB7DQogICAgY2hhcnMucHVzaCgoKGJ5dGVzW2krK10gJiAweGZmKSA8PCA4KSB8IChieXRlc1tpKytdICYgMHhmZikpOw0KICB9DQogIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNoYXJzKTsNCn0NCg0KZnVuY3Rpb24gdW5wYWNrKHN0cikgew0KICB2YXIgYnl0ZXMgPSBbXTsNCiAgdmFyIGxlbiA9IHN0ci5sZW5ndGg7DQogIGZvciAodmFyIGkgPSAwLCBuID0gbGVuOyBpIDwgbjsgaSsrKSB7DQogICAgdmFyIGNoYXIgPSBzdHIuY2hhckNvZGVBdChpKTsNCiAgICBieXRlcy5wdXNoKGNoYXIgPj4+IDgsIGNoYXIgJiAweGZmKTsNCiAgfQ0KICByZXR1cm4gYnl0ZXM7DQp9DQoNCi8vbW9kaWZpZWQgZnJvbSBodHRwOi8vd3d3LnNtYXNoaW5nbWFnYXppbmUuY29tLzIwMTEvMTAvMTkvb3B0aW1pemluZy1sb25nLWxpc3RzLW9mLXllc25vLXZhbHVlcy13aXRoLWphdmFzY3JpcHQvDQpmdW5jdGlvbiBwYWNrMigvKiBzdHJpbmcgKi8gdmFsdWVzKSB7DQogIHZhciBjaHVua3MgPSB2YWx1ZXMubWF0Y2goLy57MSwxNH0vZyksDQogICAgcGFja2VkID0gIiI7DQogIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmtzLmxlbmd0aDsgaSsrKSB7DQogICAgcGFja2VkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoIjEiICsgY2h1bmtzW2ldLCAyKSk7DQogIH0NCiAgcmV0dXJuIHBhY2tlZDsNCn0NCg0KZnVuY3Rpb24gdW5wYWNrMigvKiBzdHJpbmcgKi8gcGFja2VkKSB7DQogIHZhciB2YWx1ZXMgPSAiIjsNCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWNrZWQubGVuZ3RoOyBpKyspIHsNCiAgICB2YWx1ZXMgKz0gcGFja2VkLmNoYXJDb2RlQXQoaSkudG9TdHJpbmcoMikuc3Vic3RyaW5nKDEpOw0KICB9DQogIHJldHVybiB2YWx1ZXM7DQp9DQoNCmZ1bmN0aW9uIHBhY2szKHZhbHVlcykgew0KICAvL3RvbyBtYW55IHNhdmUgY29ycnVwdGlvbnMsIGRhcm4gaXQgdG8gaGVjaw0KICByZXR1cm4gdmFsdWVzOw0KfQ0KDQovL2ZpbGUgc2F2ZSBmdW5jdGlvbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcw0KdmFyIHNhdmVBcyA9DQogIHNhdmVBcyB8fA0KICAoZnVuY3Rpb24gKHZpZXcpIHsNCiAgICAidXNlIHN0cmljdCI7DQogICAgaWYgKA0KICAgICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gInVuZGVmaW5lZCIgJiYNCiAgICAgIC9NU0lFIFsxLTldXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkNCiAgICApIHsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgdmFyIGRvYyA9IHZpZXcuZG9jdW1lbnQsDQogICAgICBnZXRfVVJMID0gZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gdmlldy5VUkwgfHwgdmlldy53ZWJraXRVUkwgfHwgdmlldzsNCiAgICAgIH0sDQogICAgICBzYXZlX2xpbmsgPSBkb2MuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwgImEiKSwNCiAgICAgIGNhbl91c2Vfc2F2ZV9saW5rID0gImRvd25sb2FkIiBpbiBzYXZlX2xpbmssDQogICAgICBjbGljayA9IGZ1bmN0aW9uIChub2RlKSB7DQogICAgICAgIHZhciBldmVudCA9IG5ldyBNb3VzZUV2ZW50KCJjbGljayIpOw0KICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZlbnQpOw0KICAgICAgfSwNCiAgICAgIGlzX3NhZmFyaSA9IC9WZXJzaW9uXC9bXGRcLl0rLipTYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksDQogICAgICB3ZWJraXRfcmVxX2ZzID0gdmlldy53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbSwNCiAgICAgIHJlcV9mcyA9DQogICAgICAgIHZpZXcucmVxdWVzdEZpbGVTeXN0ZW0gfHwgd2Via2l0X3JlcV9mcyB8fCB2aWV3Lm1velJlcXVlc3RGaWxlU3lzdGVtLA0KICAgICAgdGhyb3dfb3V0c2lkZSA9IGZ1bmN0aW9uIChleCkgew0KICAgICAgICAodmlldy5zZXRJbW1lZGlhdGUgfHwgdmlldy5zZXRUaW1lb3V0KShmdW5jdGlvbiAoKSB7DQogICAgICAgICAgdGhyb3cgZXg7DQogICAgICAgIH0sIDApOw0KICAgICAgfSwNCiAgICAgIGZvcmNlX3NhdmVhYmxlX3R5cGUgPSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIiwNCiAgICAgIGZzX21pbl9zaXplID0gMCwNCiAgICAgIGFyYml0cmFyeV9yZXZva2VfdGltZW91dCA9IDUwMCwNCiAgICAgIHJldm9rZSA9IGZ1bmN0aW9uIChmaWxlKSB7DQogICAgICAgIHZhciByZXZva2VyID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGlmICh0eXBlb2YgZmlsZSA9PT0gInN0cmluZyIpIHsNCiAgICAgICAgICAgIGdldF9VUkwoKS5yZXZva2VPYmplY3RVUkwoZmlsZSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGZpbGUucmVtb3ZlKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICBpZiAodmlldy5jaHJvbWUpIHsNCiAgICAgICAgICByZXZva2VyKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgc2V0VGltZW91dChyZXZva2VyLCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQpOw0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZmlsZXNhdmVyLCBldmVudF90eXBlcywgZXZlbnQpIHsNCiAgICAgICAgZXZlbnRfdHlwZXMgPSBbXS5jb25jYXQoZXZlbnRfdHlwZXMpOw0KICAgICAgICB2YXIgaSA9IGV2ZW50X3R5cGVzLmxlbmd0aDsNCiAgICAgICAgd2hpbGUgKGktLSkgew0KICAgICAgICAgIHZhciBsaXN0ZW5lciA9IGZpbGVzYXZlclsib24iICsgZXZlbnRfdHlwZXNbaV1dOw0KICAgICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgIGxpc3RlbmVyLmNhbGwoZmlsZXNhdmVyLCBldmVudCB8fCBmaWxlc2F2ZXIpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsNCiAgICAgICAgICAgICAgdGhyb3dfb3V0c2lkZShleCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgYXV0b19ib20gPSBmdW5jdGlvbiAoYmxvYikgew0KICAgICAgICBpZiAoDQogICAgICAgICAgL15ccyooPzp0ZXh0XC9cUyp8YXBwbGljYXRpb25cL3htbHxcUypcL1xTKlwreG1sKVxzKjsuKmNoYXJzZXRccyo9XHMqdXRmLTgvaS50ZXN0KA0KICAgICAgICAgICAgYmxvYi50eXBlDQogICAgICAgICAgKQ0KICAgICAgICApIHsNCiAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoWyJcdWZlZmYiLCBibG9iXSwgeyB0eXBlOiBibG9iLnR5cGUgfSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGJsb2I7DQogICAgICB9LA0KICAgICAgRmlsZVNhdmVyID0gZnVuY3Rpb24gKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7DQogICAgICAgIGlmICghbm9fYXV0b19ib20pIHsNCiAgICAgICAgICBibG9iID0gYXV0b19ib20oYmxvYik7DQogICAgICAgIH0NCiAgICAgICAgdmFyIGZpbGVzYXZlciA9IHRoaXMsDQogICAgICAgICAgdHlwZSA9IGJsb2IudHlwZSwNCiAgICAgICAgICBibG9iX2NoYW5nZWQgPSBmYWxzZSwNCiAgICAgICAgICBvYmplY3RfdXJsLA0KICAgICAgICAgIHRhcmdldF92aWV3LA0KICAgICAgICAgIGRpc3BhdGNoX2FsbCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGRpc3BhdGNoKA0KICAgICAgICAgICAgICBmaWxlc2F2ZXIsDQogICAgICAgICAgICAgICJ3cml0ZXN0YXJ0IHByb2dyZXNzIHdyaXRlIHdyaXRlZW5kIi5zcGxpdCgiICIpDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0sDQogICAgICAgICAgZnNfZXJyb3IgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAodGFyZ2V0X3ZpZXcgJiYgaXNfc2FmYXJpICYmIHR5cGVvZiBGaWxlUmVhZGVyICE9PSAidW5kZWZpbmVkIikgew0KICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICB2YXIgYmFzZTY0RGF0YSA9IHJlYWRlci5yZXN1bHQ7DQogICAgICAgICAgICAgICAgdGFyZ2V0X3ZpZXcubG9jYXRpb24uaHJlZiA9DQogICAgICAgICAgICAgICAgICAiZGF0YTphdHRhY2htZW50L2ZpbGUiICsNCiAgICAgICAgICAgICAgICAgIGJhc2U2NERhdGEuc2xpY2UoYmFzZTY0RGF0YS5zZWFyY2goL1ssO10vKSk7DQogICAgICAgICAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTsNCiAgICAgICAgICAgICAgICBkaXNwYXRjaF9hbGwoKTsNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7DQogICAgICAgICAgICAgIGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLklOSVQ7DQogICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChibG9iX2NoYW5nZWQgfHwgIW9iamVjdF91cmwpIHsNCiAgICAgICAgICAgICAgb2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGFyZ2V0X3ZpZXcpIHsNCiAgICAgICAgICAgICAgdGFyZ2V0X3ZpZXcubG9jYXRpb24uaHJlZiA9IG9iamVjdF91cmw7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB2YXIgbmV3X3RhYiA9IHZpZXcub3BlbihvYmplY3RfdXJsLCAiX2JsYW5rIik7DQogICAgICAgICAgICAgIGlmIChuZXdfdGFiID09IHVuZGVmaW5lZCAmJiBpc19zYWZhcmkpIHsNCiAgICAgICAgICAgICAgICB2aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FOw0KICAgICAgICAgICAgZGlzcGF0Y2hfYWxsKCk7DQogICAgICAgICAgICByZXZva2Uob2JqZWN0X3VybCk7DQogICAgICAgICAgfSwNCiAgICAgICAgICBhYm9ydGFibGUgPSBmdW5jdGlvbiAoZnVuYykgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgaWYgKGZpbGVzYXZlci5yZWFkeVN0YXRlICE9PSBmaWxlc2F2ZXIuRE9ORSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSwNCiAgICAgICAgICBjcmVhdGVfaWZfbm90X2ZvdW5kID0geyBjcmVhdGU6IHRydWUsIGV4Y2x1c2l2ZTogZmFsc2UgfSwNCiAgICAgICAgICBzbGljZTsNCiAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuSU5JVDsNCiAgICAgICAgaWYgKCFuYW1lKSB7DQogICAgICAgICAgbmFtZSA9ICJkb3dubG9hZCI7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGNhbl91c2Vfc2F2ZV9saW5rKSB7DQogICAgICAgICAgb2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBzYXZlX2xpbmsuaHJlZiA9IG9iamVjdF91cmw7DQogICAgICAgICAgICBzYXZlX2xpbmsuZG93bmxvYWQgPSBuYW1lOw0KICAgICAgICAgICAgY2xpY2soc2F2ZV9saW5rKTsNCiAgICAgICAgICAgIGRpc3BhdGNoX2FsbCgpOw0KICAgICAgICAgICAgcmV2b2tlKG9iamVjdF91cmwpOw0KICAgICAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKHZpZXcuY2hyb21lICYmIHR5cGUgJiYgdHlwZSAhPT0gZm9yY2Vfc2F2ZWFibGVfdHlwZSkgew0KICAgICAgICAgIHNsaWNlID0gYmxvYi5zbGljZSB8fCBibG9iLndlYmtpdFNsaWNlOw0KICAgICAgICAgIGJsb2IgPSBzbGljZS5jYWxsKGJsb2IsIDAsIGJsb2Iuc2l6ZSwgZm9yY2Vfc2F2ZWFibGVfdHlwZSk7DQogICAgICAgICAgYmxvYl9jaGFuZ2VkID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAod2Via2l0X3JlcV9mcyAmJiBuYW1lICE9PSAiZG93bmxvYWQiKSB7DQogICAgICAgICAgbmFtZSArPSAiLmRvd25sb2FkIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodHlwZSA9PT0gZm9yY2Vfc2F2ZWFibGVfdHlwZSB8fCB3ZWJraXRfcmVxX2ZzKSB7DQogICAgICAgICAgdGFyZ2V0X3ZpZXcgPSB2aWV3Ow0KICAgICAgICB9DQogICAgICAgIGlmICghcmVxX2ZzKSB7DQogICAgICAgICAgZnNfZXJyb3IoKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgZnNfbWluX3NpemUgKz0gYmxvYi5zaXplOw0KICAgICAgICByZXFfZnMoDQogICAgICAgICAgdmlldy5URU1QT1JBUlksDQogICAgICAgICAgZnNfbWluX3NpemUsDQogICAgICAgICAgYWJvcnRhYmxlKGZ1bmN0aW9uIChmcykgew0KICAgICAgICAgICAgZnMucm9vdC5nZXREaXJlY3RvcnkoDQogICAgICAgICAgICAgICJzYXZlZCIsDQogICAgICAgICAgICAgIGNyZWF0ZV9pZl9ub3RfZm91bmQsDQogICAgICAgICAgICAgIGFib3J0YWJsZShmdW5jdGlvbiAoZGlyKSB7DQogICAgICAgICAgICAgICAgdmFyIHNhdmUgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICBkaXIuZ2V0RmlsZSgNCiAgICAgICAgICAgICAgICAgICAgbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlX2lmX25vdF9mb3VuZCwNCiAgICAgICAgICAgICAgICAgICAgYWJvcnRhYmxlKGZ1bmN0aW9uIChmaWxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgZmlsZS5jcmVhdGVXcml0ZXIoDQogICAgICAgICAgICAgICAgICAgICAgICBhYm9ydGFibGUoZnVuY3Rpb24gKHdyaXRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIub253cml0ZWVuZCA9IGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF92aWV3LmxvY2F0aW9uLmhyZWYgPSBmaWxlLnRvVVJMKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChmaWxlc2F2ZXIsICJ3cml0ZWVuZCIsIGV2ZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZva2UoZmlsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5vbmVycm9yID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IHdyaXRlci5lcnJvcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IuY29kZSAhPT0gZXJyb3IuQUJPUlRfRVJSKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmc19lcnJvcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgYWJvcnQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCIgIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlclsib24iICsgZXZlbnRdID0gZmlsZXNhdmVyWyJvbiIgKyBldmVudF07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci53cml0ZShibG9iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNhdmVyLmFib3J0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5hYm9ydCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7DQogICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLldSSVRJTkc7DQogICAgICAgICAgICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGZzX2Vycm9yDQogICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgICAgICAgIGZzX2Vycm9yDQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgZGlyLmdldEZpbGUoDQogICAgICAgICAgICAgICAgICBuYW1lLA0KICAgICAgICAgICAgICAgICAgeyBjcmVhdGU6IGZhbHNlIH0sDQogICAgICAgICAgICAgICAgICBhYm9ydGFibGUoZnVuY3Rpb24gKGZpbGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZmlsZS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgICAgICBhYm9ydGFibGUoZnVuY3Rpb24gKGV4KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChleC5jb2RlID09PSBleC5OT1RfRk9VTkRfRVJSKSB7DQogICAgICAgICAgICAgICAgICAgICAgc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIGZzX2Vycm9yKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgIGZzX2Vycm9yDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0pLA0KICAgICAgICAgIGZzX2Vycm9yDQogICAgICAgICk7DQogICAgICB9LA0KICAgICAgRlNfcHJvdG8gPSBGaWxlU2F2ZXIucHJvdG90eXBlLA0KICAgICAgc2F2ZUFzID0gZnVuY3Rpb24gKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7DQogICAgICAgIHJldHVybiBuZXcgRmlsZVNhdmVyKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKTsNCiAgICAgIH07DQogICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICJ1bmRlZmluZWQiICYmIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7DQogICAgICByZXR1cm4gZnVuY3Rpb24gKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7DQogICAgICAgIGlmICghbm9fYXV0b19ib20pIHsNCiAgICAgICAgICBibG9iID0gYXV0b19ib20oYmxvYik7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG5hbWUgfHwgImRvd25sb2FkIik7DQogICAgICB9Ow0KICAgIH0NCiAgICBGU19wcm90by5hYm9ydCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBmaWxlc2F2ZXIgPSB0aGlzOw0KICAgICAgZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTsNCiAgICAgIGRpc3BhdGNoKGZpbGVzYXZlciwgImFib3J0Iik7DQogICAgfTsNCiAgICBGU19wcm90by5yZWFkeVN0YXRlID0gRlNfcHJvdG8uSU5JVCA9IDA7DQogICAgRlNfcHJvdG8uV1JJVElORyA9IDE7DQogICAgRlNfcHJvdG8uRE9ORSA9IDI7DQogICAgRlNfcHJvdG8uZXJyb3IgPQ0KICAgICAgRlNfcHJvdG8ub253cml0ZXN0YXJ0ID0NCiAgICAgIEZTX3Byb3RvLm9ucHJvZ3Jlc3MgPQ0KICAgICAgRlNfcHJvdG8ub253cml0ZSA9DQogICAgICBGU19wcm90by5vbmFib3J0ID0NCiAgICAgIEZTX3Byb3RvLm9uZXJyb3IgPQ0KICAgICAgRlNfcHJvdG8ub253cml0ZWVuZCA9DQogICAgICAgIG51bGw7DQogICAgcmV0dXJuIHNhdmVBczsNCiAgfSkoDQogICAgKHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmKSB8fA0KICAgICAgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiICYmIHdpbmRvdykgfHwNCiAgICAgIHRoaXMuY29udGVudA0KICApOw0KaWYgKHR5cGVvZiBtb2R1bGUgIT09ICJ1bmRlZmluZWQiICYmIG1vZHVsZS5leHBvcnRzKSB7DQogIG1vZHVsZS5leHBvcnRzLnNhdmVBcyA9IHNhdmVBczsNCn0gZWxzZSBpZiAoDQogIHR5cGVvZiBkZWZpbmUgIT09ICJ1bmRlZmluZWQiICYmDQogIGRlZmluZSAhPT0gbnVsbCAmJg0KICBkZWZpbmUuYW1kICE9IG51bGwNCikgew0KICBkZWZpbmUoW10sIGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gc2F2ZUFzOw0KICB9KTsNCn0NCg0KLy9zZWVkZWQgcmFuZG9tIGZ1bmN0aW9uLCBjb3VydGVzeSBvZiBodHRwOi8vZGF2aWRiYXUuY29tL2FyY2hpdmVzLzIwMTAvMDEvMzAvcmFuZG9tX3NlZWRzX2NvZGVkX2hpbnRzX2FuZF9xdWludGlsbGlvbnMuaHRtbA0KKGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlLCBmKSB7DQogIGZ1bmN0aW9uIGsoYSkgew0KICAgIHZhciBiLA0KICAgICAgYyA9IGEubGVuZ3RoLA0KICAgICAgZSA9IHRoaXMsDQogICAgICBmID0gMCwNCiAgICAgIGcgPSAoZS5pID0gZS5qID0gMCksDQogICAgICBoID0gKGUuUyA9IFtdKTsNCiAgICBmb3IgKGMgfHwgKGEgPSBbYysrXSk7IGQgPiBmOyApIGhbZl0gPSBmKys7DQogICAgZm9yIChmID0gMDsgZCA+IGY7IGYrKykNCiAgICAgIChoW2ZdID0gaFsoZyA9IGogJiAoZyArIGFbZiAlIGNdICsgKGIgPSBoW2ZdKSkpXSksIChoW2ddID0gYik7DQogICAgKGUuZyA9IGZ1bmN0aW9uIChhKSB7DQogICAgICBmb3IgKHZhciBiLCBjID0gMCwgZiA9IGUuaSwgZyA9IGUuaiwgaCA9IGUuUzsgYS0tOyApDQogICAgICAgIChiID0gaFsoZiA9IGogJiAoZiArIDEpKV0pLA0KICAgICAgICAgIChjID0gYyAqIGQgKyBoW2ogJiAoKGhbZl0gPSBoWyhnID0gaiAmIChnICsgYikpXSkgKyAoaFtnXSA9IGIpKV0pOw0KICAgICAgcmV0dXJuIChlLmkgPSBmKSwgKGUuaiA9IGcpLCBjOw0KICAgIH0pKGQpOw0KICB9DQogIGZ1bmN0aW9uIGwoYSwgYikgew0KICAgIHZhciBlLA0KICAgICAgYyA9IFtdLA0KICAgICAgZCA9ICh0eXBlb2YgYSlbMF07DQogICAgaWYgKGIgJiYgIm8iID09IGQpDQogICAgICBmb3IgKGUgaW4gYSkNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBjLnB1c2gobChhW2VdLCBiIC0gMSkpOw0KICAgICAgICB9IGNhdGNoIChmKSB7fQ0KICAgIHJldHVybiBjLmxlbmd0aCA/IGMgOiAicyIgPT0gZCA/IGEgOiBhICsgIlwwIjsNCiAgfQ0KICBmdW5jdGlvbiBtKGEsIGIpIHsNCiAgICBmb3IgKHZhciBkLCBjID0gYSArICIiLCBlID0gMDsgYy5sZW5ndGggPiBlOyApDQogICAgICBiW2ogJiBlXSA9IGogJiAoKGQgXj0gMTkgKiBiW2ogJiBlXSkgKyBjLmNoYXJDb2RlQXQoZSsrKSk7DQogICAgcmV0dXJuIG8oYik7DQogIH0NCiAgZnVuY3Rpb24gbihjKSB7DQogICAgdHJ5IHsNCiAgICAgIHJldHVybiBhLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoKGMgPSBuZXcgVWludDhBcnJheShkKSkpLCBvKGMpOw0KICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgIHJldHVybiBbK25ldyBEYXRlKCksIGEsIGEubmF2aWdhdG9yLnBsdWdpbnMsIGEuc2NyZWVuLCBvKGIpXTsNCiAgICB9DQogIH0NCiAgZnVuY3Rpb24gbyhhKSB7DQogICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoMCwgYSk7DQogIH0NCiAgdmFyIGcgPSBjLnBvdyhkLCBlKSwNCiAgICBoID0gYy5wb3coMiwgZiksDQogICAgaSA9IDIgKiBoLA0KICAgIGogPSBkIC0gMTsNCiAgKGMuc2VlZHJhbmRvbSA9IGZ1bmN0aW9uIChhLCBmKSB7DQogICAgdmFyIGogPSBbXSwNCiAgICAgIHAgPSBtKGwoZiA/IFthLCBvKGIpXSA6IDAgaW4gYXJndW1lbnRzID8gYSA6IG4oKSwgMyksIGopLA0KICAgICAgcSA9IG5ldyBrKGopOw0KICAgIHJldHVybiAoDQogICAgICBtKG8ocS5TKSwgYiksDQogICAgICAoYy5yYW5kb20gPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGZvciAodmFyIGEgPSBxLmcoZSksIGIgPSBnLCBjID0gMDsgaCA+IGE7ICkNCiAgICAgICAgICAoYSA9IChhICsgYykgKiBkKSwgKGIgKj0gZCksIChjID0gcS5nKDEpKTsNCiAgICAgICAgZm9yICg7IGEgPj0gaTsgKSAoYSAvPSAyKSwgKGIgLz0gMiksIChjID4+Pj0gMSk7DQogICAgICAgIHJldHVybiAoYSArIGMpIC8gYjsNCiAgICAgIH0pLA0KICAgICAgcA0KICAgICk7DQogIH0pLA0KICAgIG0oYy5yYW5kb20oKSwgYik7DQp9KSh0aGlzLCBbXSwgTWF0aCwgMjU2LCA2LCA1Mik7DQoNCmZ1bmN0aW9uIGJpbmQoc2NvcGUsIGZuKSB7DQogIC8vdXNlIDogYmluZCh0aGlzLGZ1bmN0aW9uKCl7dGhpcy54Kys7fSkgLSByZXR1cm5zIGEgZnVuY3Rpb24gd2hlcmUgInRoaXMiIHJlZmVycyB0byB0aGUgc2NvcGVkIHRoaXMNCiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICBmbi5hcHBseShzY29wZSwgYXJndW1lbnRzKTsNCiAgfTsNCn0NCg0KdmFyIGdyYWJQcm9wcyA9IGZ1bmN0aW9uIChhcnIsIHByb3ApIHsNCiAgaWYgKCFhcnIpIHJldHVybiBbXTsNCiAgYXJyMiA9IFtdOw0KICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgew0KICAgIGFycjIucHVzaChhcnJbaV1bcHJvcF0pOw0KICB9DQogIHJldHVybiBhcnIyOw0KfTsNCg0KQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5maWxsUGF0dGVybiA9IGZ1bmN0aW9uICgNCiAgaW1nLA0KICBYLA0KICBZLA0KICBXLA0KICBILA0KICBpVywNCiAgaUgsDQogIG9mZlgsDQogIG9mZlkNCikgew0KICAvL2ZvciB3aGVuIGJ1aWx0LWluIHBhdHRlcm5zIGFyZW4ndCBlbm91Z2gNCiAgaWYgKGltZy5hbHQgIT0gImJsYW5rIikgew0KICAgIHZhciBvZmZYID0gb2ZmWCB8fCAwOw0KICAgIHZhciBvZmZZID0gb2ZmWSB8fCAwOw0KICAgIGlmIChvZmZYIDwgMCkgew0KICAgICAgb2ZmWCA9IG9mZlggLSBNYXRoLmZsb29yKG9mZlggLyBpVykgKiBpVzsNCiAgICB9DQogICAgaWYgKG9mZlggPiAwKSB7DQogICAgICBvZmZYID0gKG9mZlggJSBpVykgLSBpVzsNCiAgICB9DQogICAgaWYgKG9mZlkgPCAwKSB7DQogICAgICBvZmZZID0gb2ZmWSAtIE1hdGguZmxvb3Iob2ZmWSAvIGlIKSAqIGlIOw0KICAgIH0NCiAgICBpZiAob2ZmWSA+IDApIHsNCiAgICAgIG9mZlkgPSAob2ZmWSAlIGlIKSAtIGlIOw0KICAgIH0NCiAgICBmb3IgKHZhciB5ID0gb2ZmWTsgeSA8IEg7IHkgKz0gaUgpIHsNCiAgICAgIGZvciAodmFyIHggPSBvZmZYOyB4IDwgVzsgeCArPSBpVykgew0KICAgICAgICB0aGlzLmRyYXdJbWFnZShpbWcsIFggKyB4LCBZICsgeSwgaVcsIGlIKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn07DQoNCnZhciBPbGRDYW52YXNEcmF3SW1hZ2UgPSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLmRyYXdJbWFnZTsNCkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuZHJhd0ltYWdlID0gZnVuY3Rpb24gKCkgew0KICAvL29ubHkgZHJhdyB0aGUgaW1hZ2UgaWYgaXQncyBsb2FkZWQNCiAgaWYgKGFyZ3VtZW50c1swXS5hbHQgIT0gImJsYW5rIikgT2xkQ2FudmFzRHJhd0ltYWdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQp9Ow0KDQppZiAoIWRvY3VtZW50Lmhhc0ZvY3VzKQ0KICBkb2N1bWVudC5oYXNGb2N1cyA9IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gZG9jdW1lbnQuaGlkZGVuOw0KICB9OyAvL2ZvciBPcGVyYQ0KDQpmdW5jdGlvbiBBZGRFdmVudChlbCwgZXYsIGZ1bmMpIHsNCiAgLy9pZS4gbXlMaXN0ZW5lcj1BZGRFdmVudChsKCdlbGVtZW50JyksJ2NsaWNrJyxmdW5jdGlvbigpe2NvbnNvbGUubG9nKCdoaSEnKTt9KTsNCiAgaWYgKGVsLmFkZEV2ZW50TGlzdGVuZXIpIHsNCiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2LCBmdW5jLCBmYWxzZSk7DQogICAgcmV0dXJuIFtlbCwgZXYsIGZ1bmNdOw0KICB9IGVsc2UgaWYgKGVsLmF0dGFjaEV2ZW50KSB7DQogICAgdmFyIGZ1bmMyID0gZnVuY3Rpb24gKCkgew0KICAgICAgZnVuYy5jYWxsKGVsKTsNCiAgICB9Ow0KICAgIGVsLmF0dGFjaEV2ZW50KCJvbiIgKyBldiwgZnVuYzIpOw0KICAgIHJldHVybiBbZWwsIGV2LCBmdW5jMl07DQogIH0NCiAgcmV0dXJuIGZhbHNlOw0KfQ0KZnVuY3Rpb24gUmVtb3ZlRXZlbnQoZXZPYmopIHsNCiAgLy9pZS4gUmVtb3ZlRXZlbnQobXlMaXN0ZW5lcik7DQogIGlmICghZXZPYmopIHJldHVybiBmYWxzZTsNCiAgaWYgKGV2T2JqWzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIpDQogICAgZXZPYmpbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldk9ialsxXSwgZXZPYmpbMl0sIGZhbHNlKTsNCiAgZWxzZSBpZiAoZXZPYmpbMF0uZGV0YWNoRXZlbnQpDQogICAgZXZPYmpbMF0uZGV0YWNoRXZlbnQoIm9uIiArIGV2T2JqWzFdLCBldk9ialsyXSk7DQogIHJldHVybiB0cnVlOw0KfQ0KDQpmdW5jdGlvbiBGaXJlRXZlbnQoZWwsIGV2KSB7DQogIGlmIChlbC5maXJlRXZlbnQpIHsNCiAgICBlbC5maXJlRXZlbnQoIm9uIiArIGV2KTsNCiAgfSBlbHNlIHsNCiAgICB2YXIgZXZPYmogPSBkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnRzIik7DQogICAgZXZPYmouaW5pdEV2ZW50KGV2LCB0cnVlLCBmYWxzZSk7DQogICAgZWwuZGlzcGF0Y2hFdmVudChldk9iaik7DQogIH0NCn0NCg0KZnVuY3Rpb24gd3JpdGVJY29uKGljb24pIHsNCiAgLy9yZXR1cm5zIENTUyBmb3IgYW4gaWNvbidzIGJhY2tncm91bmQgaW1hZ2UNCiAgLy9mb3IgdXNlIGluIENTUyBzdHJpbmdzDQogIHJldHVybiAoDQogICAgKGljb25bMl0NCiAgICAgID8gImJhY2tncm91bmQtaW1hZ2U6dXJsKCciICsgaWNvblsyXS5yZXBsYWNlKC8nL2csICJcXCciKSArICInKTsiDQogICAgICA6ICIiKSArDQogICAgImJhY2tncm91bmQtcG9zaXRpb246IiArDQogICAgLWljb25bMF0gKiA0OCArDQogICAgInB4ICIgKw0KICAgIC1pY29uWzFdICogNDggKw0KICAgICJweDsiDQogICk7DQp9DQpmdW5jdGlvbiB0aW55SWNvbihpY29uLCBjc3MpIHsNCiAgLy9yZXR1cm5zIEhUTUwgZGlzcGxheWluZyBhbiBpY29uLCB3aXRoIG9wdGlvbmFsIGV4dHJhIENTUw0KICByZXR1cm4gKA0KICAgICc8ZGl2IGNsYXNzPSJpY29uIHRpbnlJY29uIiBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6aW5saW5lLWJsb2NrOycgKw0KICAgIHdyaXRlSWNvbihpY29uKSArDQogICAgInRyYW5zZm9ybTpzY2FsZSgwLjUpO21hcmdpbjotMTZweDsiICsNCiAgICAoY3NzID8gY3NzIDogIiIpICsNCiAgICAnIj48L2Rpdj4nDQogICk7DQp9DQoNCnZhciBMb2FkZXIgPSBmdW5jdGlvbiAoKSAvL2Fzc2V0LWxvYWRpbmcgc3lzdGVtDQp7DQogIHRoaXMubG9hZGluZ04gPSAwOw0KICB0aGlzLmFzc2V0c04gPSAwOw0KICB0aGlzLmFzc2V0cyA9IFtdOw0KICB0aGlzLmFzc2V0c0xvYWRpbmcgPSBbXTsNCiAgdGhpcy5hc3NldHNMb2FkZWQgPSBbXTsNCiAgdGhpcy5kb21haW4gPSAiIjsNCiAgdGhpcy5sb2FkZWQgPSAwOyAvL2NhbGxiYWNrDQogIHRoaXMuZG9uZUxvYWRpbmcgPSAwOw0KDQogIHRoaXMuYmxhbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsNCiAgdGhpcy5ibGFuay53aWR0aCA9IDg7DQogIHRoaXMuYmxhbmsuaGVpZ2h0ID0gODsNCiAgdGhpcy5ibGFuay5hbHQgPSAiYmxhbmsiOw0KDQogIHRoaXMuTG9hZCA9IGZ1bmN0aW9uIChhc3NldHMpIHsNCiAgICBmb3IgKHZhciBpIGluIGFzc2V0cykgew0KICAgICAgdGhpcy5sb2FkaW5nTisrOw0KICAgICAgdGhpcy5hc3NldHNOKys7DQogICAgICBpZiAoIXRoaXMuYXNzZXRzTG9hZGluZ1thc3NldHNbaV1dICYmICF0aGlzLmFzc2V0c0xvYWRlZFthc3NldHNbaV1dKSB7DQogICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsNCiAgICAgICAgaWYgKGFzc2V0c1tpXS5pbmRleE9mKCIvIikgIT0gLTEpIGltZy5zcmMgPSBhc3NldHNbaV07DQogICAgICAgIGVsc2UgaW1nLnNyYyA9IHRoaXMuZG9tYWluICsgYXNzZXRzW2ldOw0KICAgICAgICBpbWcuYWx0ID0gYXNzZXRzW2ldOw0KICAgICAgICBpbWcub25sb2FkID0gYmluZCh0aGlzLCB0aGlzLm9uTG9hZCk7DQogICAgICAgIHRoaXMuYXNzZXRzW2Fzc2V0c1tpXV0gPSBpbWc7DQogICAgICAgIHRoaXMuYXNzZXRzTG9hZGluZy5wdXNoKGFzc2V0c1tpXSk7DQogICAgICB9DQogICAgfQ0KICB9Ow0KICB0aGlzLlJlcGxhY2UgPSBmdW5jdGlvbiAob2xkLCBuZXdlcikgew0KICAgIGlmICghdGhpcy5hc3NldHNbb2xkXSkgdGhpcy5Mb2FkKFtvbGRdKTsNCiAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7DQogICAgaWYgKG5ld2VyLmluZGV4T2YoIi8iKSAhPSAtMSkNCiAgICAgIC8qbmV3ZXIuaW5kZXhPZignaHR0cCcpIT0tMSB8fCBuZXdlci5pbmRleE9mKCdodHRwcycpIT0tMSkqLyBpbWcuc3JjID0NCiAgICAgICAgbmV3ZXI7DQogICAgZWxzZSBpbWcuc3JjID0gdGhpcy5kb21haW4gKyBuZXdlcjsNCiAgICBpbWcuYWx0ID0gbmV3ZXI7DQogICAgaW1nLm9ubG9hZCA9IGJpbmQodGhpcywgdGhpcy5vbkxvYWQpOw0KICAgIHRoaXMuYXNzZXRzW29sZF0gPSBpbWc7DQogIH07DQogIHRoaXMub25Mb2FkUmVwbGFjZSA9IGZ1bmN0aW9uICgpIHt9Ow0KICB0aGlzLm9uTG9hZCA9IGZ1bmN0aW9uIChlKSB7DQogICAgdGhpcy5hc3NldHNMb2FkZWQucHVzaChlLnRhcmdldC5hbHQpOw0KICAgIHRoaXMuYXNzZXRzTG9hZGluZy5zcGxpY2UodGhpcy5hc3NldHNMb2FkaW5nLmluZGV4T2YoZS50YXJnZXQuYWx0KSwgMSk7DQogICAgdGhpcy5sb2FkaW5nTi0tOw0KICAgIGlmICh0aGlzLmRvbmVMb2FkaW5nID09IDAgJiYgdGhpcy5sb2FkaW5nTiA8PSAwICYmIHRoaXMubG9hZGVkICE9IDApIHsNCiAgICAgIHRoaXMuZG9uZUxvYWRpbmcgPSAxOw0KICAgICAgdGhpcy5sb2FkZWQoKTsNCiAgICB9DQogIH07DQogIHRoaXMuZ2V0UHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIDEgLSB0aGlzLmxvYWRpbmdOIC8gdGhpcy5hc3NldHNOOw0KICB9Ow0KfTsNCg0KdmFyIFBpYyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogIGlmIChHYW1lLkxvYWRlci5hc3NldHNMb2FkZWQuaW5kZXhPZih3aGF0KSAhPSAtMSkNCiAgICByZXR1cm4gR2FtZS5Mb2FkZXIuYXNzZXRzW3doYXRdOw0KICBlbHNlIGlmIChHYW1lLkxvYWRlci5hc3NldHNMb2FkaW5nLmluZGV4T2Yod2hhdCkgPT0gLTEpDQogICAgR2FtZS5Mb2FkZXIuTG9hZChbd2hhdF0pOw0KICByZXR1cm4gR2FtZS5Mb2FkZXIuYmxhbms7DQp9Ow0KDQp2YXIgU291bmRzID0gW107DQp2YXIgT2xkUGxheVNvdW5kID0gZnVuY3Rpb24gKHVybCwgdm9sKSB7DQogIHZhciB2b2x1bWUgPSAxOw0KICBpZiAodm9sICE9PSB1bmRlZmluZWQpIHZvbHVtZSA9IHZvbDsNCiAgaWYgKCFHYW1lLnZvbHVtZSB8fCB2b2x1bWUgPT0gMCkgcmV0dXJuIDA7DQogIGlmICghU291bmRzW3VybF0pIHsNCiAgICBTb3VuZHNbdXJsXSA9IG5ldyBBdWRpbyh1cmwpOw0KICAgIFNvdW5kc1t1cmxdLm9ubG9hZGVkZGF0YSA9IGZ1bmN0aW9uIChlKSB7DQogICAgICBlLnRhcmdldC52b2x1bWUgPSBNYXRoLnBvdygodm9sdW1lICogR2FtZS52b2x1bWUpIC8gMTAwLCAyKTsNCiAgICB9Ow0KICB9IGVsc2UgaWYgKFNvdW5kc1t1cmxdLnJlYWR5U3RhdGUgPj0gMikgew0KICAgIFNvdW5kc1t1cmxdLmN1cnJlbnRUaW1lID0gMDsNCiAgICBTb3VuZHNbdXJsXS52b2x1bWUgPSBNYXRoLnBvdygodm9sdW1lICogR2FtZS52b2x1bWUpIC8gMTAwLCAyKTsNCiAgfQ0KICBTb3VuZHNbdXJsXS5wbGF5KCk7DQp9Ow0KdmFyIFNvdW5kSW5zdHMgPSBbXTsNCnZhciBTb3VuZEkgPSAwOw0KZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgaSsrKSB7DQogIFNvdW5kSW5zdHNbaV0gPSBuZXcgQXVkaW8oKTsNCn0NCnZhciBwaXRjaFN1cHBvcnQgPSBmYWxzZTsNCi8vbm90ZSA6IENocm9tZSB0dXJucyBvdXQgdG8gbm90IHN1cHBvcnQgd2Via2l0UHJlc2VydmVzUGl0Y2ggZGVzcGl0ZSB0aGUgc3BlY2lmaWNhdGlvbnMgY2xhaW1pbmcgb3RoZXJ3aXNlLCBhbmQgRmlyZWZveCBjbGlwcyBzb21lIHNob3J0IHNvdW5kcyB3aGVuIGNoYW5naW5nIHBsYXliYWNrUmF0ZSwgc28gaSdtIHR1cm5pbmcgdGhlIGZlYXR1cmUgb2ZmIGNvbXBsZXRlbHkgdW50aWwgYnJvd3NlcnMgZ2V0IGl0IHRvZ2V0aGVyDQovL2lmIChTb3VuZEluc3RzWzBdLnByZXNlcnZlc1BpdGNoIHx8IFNvdW5kSW5zdHNbMF0ubW96UHJlc2VydmVzUGl0Y2ggfHwgU291bmRJbnN0c1swXS53ZWJraXRQcmVzZXJ2ZXNQaXRjaCkgcGl0Y2hTdXBwb3J0PXRydWU7DQoNCnZhciBQbGF5U291bmQgPSBmdW5jdGlvbiAodXJsLCB2b2wsIHBpdGNoVmFyKSB7DQogIC8vdXJsIDogdGhlIHVybCBvZiB0aGUgc291bmQgdG8gcGxheSAod2lsbCBiZSBjYWNoZWQgc28gaXQgb25seSBsb2FkcyBvbmNlKQ0KICAvL3ZvbCA6IHZvbHVtZSBiZXR3ZWVuIDAgYW5kIDEgKG11bHRpcGxpZWQgYnkgZ2FtZSB2b2x1bWUgc2V0dGluZyk7IGRlZmF1bHRzIHRvIDEgKGZ1bGwgdm9sdW1lKQ0KICAvLyhESVNBQkxFRCkgcGl0Y2hWYXIgOiBwaXRjaCB2YXJpYW5jZSBpbiBicm93c2VycyB0aGF0IHN1cHBvcnQgaXQgKEZpcmVmb3ggb25seSBhdCB0aGUgbW9tZW50KTsgZGVmYXVsdHMgdG8gMC4wNSAod2hpY2ggbWVhbnMgcGl0Y2ggY2FuIGJlIHVwIHRvIC01JSBvciArNSUgYW55dGltZSB0aGUgc291bmQgcGxheXMpDQogIHZhciB2b2x1bWUgPSAxOw0KICB2YXIgdm9sdW1lU2V0dGluZyA9IEdhbWUudm9sdW1lOw0KICBpZiAodHlwZW9mIHZvbCAhPT0gInVuZGVmaW5lZCIpIHZvbHVtZSA9IHZvbDsNCiAgaWYgKHZvbHVtZSA8IC01KSB7DQogICAgdm9sdW1lICs9IDEwOw0KICAgIHZvbHVtZVNldHRpbmcgPSBHYW1lLnZvbHVtZU11c2ljOw0KICB9DQogIGlmICghdm9sdW1lU2V0dGluZyB8fCB2b2x1bWUgPT0gMCkgcmV0dXJuIDA7DQogIGlmICh0eXBlb2YgU291bmRzW3VybF0gPT09ICJ1bmRlZmluZWQiKSB7DQogICAgLy9zb3VuZCBpc24ndCBsb2FkZWQsIGNhY2hlIGl0DQogICAgU291bmRzW3VybF0gPSBuZXcgQXVkaW8odXJsKTsNCiAgICBTb3VuZHNbdXJsXS5vbmxvYWRlZGRhdGEgPSBmdW5jdGlvbiAoZSkgew0KICAgICAgUGxheVNvdW5kKHVybCwgdm9sLCBwaXRjaFZhcik7DQogICAgfTsNCiAgICAvL1NvdW5kc1t1cmxdLmxvYWQoKTsNCiAgfSBlbHNlIGlmIChTb3VuZHNbdXJsXS5yZWFkeVN0YXRlID49IDIgJiYgU291bmRJbnN0c1tTb3VuZEldLnBhdXNlZCkgew0KICAgIHZhciBzb3VuZCA9IFNvdW5kSW5zdHNbU291bmRJXTsNCiAgICBTb3VuZEkrKzsNCiAgICBpZiAoU291bmRJID49IDEyKSBTb3VuZEkgPSAwOw0KICAgIHNvdW5kLnNyYyA9IFNvdW5kc1t1cmxdLnNyYzsNCiAgICAvL3NvdW5kLmN1cnJlbnRUaW1lPTA7DQogICAgc291bmQudm9sdW1lID0gTWF0aC5wb3coKHZvbHVtZSAqIHZvbHVtZVNldHRpbmcpIC8gMTAwLCAyKTsNCiAgICBpZiAocGl0Y2hTdXBwb3J0KSB7DQogICAgICB2YXIgcGl0Y2hWYXIgPSB0eXBlb2YgcGl0Y2hWYXIgPT09ICJ1bmRlZmluZWQiID8gMC4wNSA6IHBpdGNoVmFyOw0KICAgICAgdmFyIHJhdGUgPSAxICsgKE1hdGgucmFuZG9tKCkgKiAyIC0gMSkgKiBwaXRjaFZhcjsNCiAgICAgIHNvdW5kLnByZXNlcnZlc1BpdGNoID0gZmFsc2U7DQogICAgICBzb3VuZC5tb3pQcmVzZXJ2ZXNQaXRjaCA9IGZhbHNlOw0KICAgICAgc291bmQud2Via2l0UHJlc2VydmVzUGl0Y2ggPSBmYWxzZTsNCiAgICAgIHNvdW5kLnBsYXliYWNrUmF0ZSA9IHJhdGU7DQogICAgfQ0KICAgIHRyeSB7DQogICAgICBzb3VuZC5wbGF5KCk7DQogICAgfSBjYXRjaCAoZSkge30NCiAgICAvKg0KCQl2YXIgc291bmQ9U291bmRzW3VybF0uY2xvbmVOb2RlKCk7DQoJCXNvdW5kLnZvbHVtZT1NYXRoLnBvdyh2b2x1bWUqdm9sdW1lU2V0dGluZy8xMDAsMik7DQoJCXNvdW5kLm9uZW5kZWQ9ZnVuY3Rpb24oZSl7aWYgKGUudGFyZ2V0KXtkZWxldGUgZS50YXJnZXQ7fX07DQoJCXNvdW5kLnBsYXkoKTsqLw0KICB9DQp9Ow0KdmFyIFBsYXlNdXNpY1NvdW5kID0gZnVuY3Rpb24gKHVybCwgdm9sLCBwaXRjaFZhcikgew0KICAvL2xpa2UgUGxheVNvdW5kIGJ1dCwgaWYgbXVzaWMgaXMgZW5hYmxlZCwgcGxheSB3aXRoIG11c2ljIHZvbHVtZQ0KICBQbGF5U291bmQodXJsLCAodm9sIHx8IDEpIC0gKE11c2ljID8gMTAgOiAwKSwgcGl0Y2hWYXIpOw0KfTsNCg0KTXVzaWMgPSBmYWxzZTsNClBsYXlDdWUgPSBmdW5jdGlvbiAoY3VlLCBhcmcpIHsNCiAgaWYgKE11c2ljICYmIEdhbWUuanVrZWJveC50cmFja0F1dG8pIE11c2ljLmN1ZShjdWUsIGFyZyk7DQp9Ow0KDQppZiAoIURhdGUubm93KSB7DQogIERhdGUubm93ID0gZnVuY3Rpb24gbm93KCkgew0KICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgfTsNCn0NCg0KdmFyIHRyaWdnZXJBbmltID0gZnVuY3Rpb24gKGVsZW1lbnQsIGFuaW0pIHsNCiAgaWYgKCFlbGVtZW50KSByZXR1cm47DQogIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShhbmltKTsNCiAgdm9pZCBlbGVtZW50Lm9mZnNldFdpZHRoOw0KICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYW5pbSk7DQp9Ow0KDQp2YXIgZGVidWdTdHIgPSAiIjsNCnZhciBEZWJ1ZyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogIGlmICghZGVidWdTdHIpIGRlYnVnU3RyID0gd2hhdDsNCiAgZWxzZSBkZWJ1Z1N0ciArPSAiOyAiICsgd2hhdDsNCn07DQoNCnZhciBUaW1lciA9IHt9Ow0KVGltZXIudCA9IERhdGUubm93KCk7DQpUaW1lci5sYWJlbHMgPSBbXTsNClRpbWVyLnNtb290aGVkID0gW107DQpUaW1lci5yZXNldCA9IGZ1bmN0aW9uICgpIHsNCiAgVGltZXIubGFiZWxzID0gW107DQogIFRpbWVyLnQgPSBEYXRlLm5vdygpOw0KfTsNClRpbWVyLnRyYWNrID0gZnVuY3Rpb24gKGxhYmVsKSB7DQogIGlmICghR2FtZS5zZXNhbWUpIHJldHVybjsNCiAgdmFyIG5vdyA9IERhdGUubm93KCk7DQogIGlmICghVGltZXIuc21vb3RoZWRbbGFiZWxdKSBUaW1lci5zbW9vdGhlZFtsYWJlbF0gPSAwOw0KICBUaW1lci5zbW9vdGhlZFtsYWJlbF0gKz0gKG5vdyAtIFRpbWVyLnQgLSBUaW1lci5zbW9vdGhlZFtsYWJlbF0pICogMC4xOw0KICBUaW1lci5sYWJlbHNbbGFiZWxdID0NCiAgICAnPGRpdiBzdHlsZT0icGFkZGluZy1sZWZ0OjhweDsiPicgKw0KICAgIGxhYmVsICsNCiAgICAiIDogIiArDQogICAgTWF0aC5yb3VuZChUaW1lci5zbW9vdGhlZFtsYWJlbF0pICsNCiAgICAibXM8L2Rpdj4iOw0KICBUaW1lci50ID0gbm93Ow0KfTsNClRpbWVyLmNsZWFuID0gZnVuY3Rpb24gKCkgew0KICBpZiAoIUdhbWUuc2VzYW1lKSByZXR1cm47DQogIHZhciBub3cgPSBEYXRlLm5vdygpOw0KICBUaW1lci50ID0gbm93Ow0KfTsNClRpbWVyLnNheSA9IGZ1bmN0aW9uIChsYWJlbCkgew0KICBpZiAoIUdhbWUuc2VzYW1lKSByZXR1cm47DQogIFRpbWVyLmxhYmVsc1tsYWJlbF0gPQ0KICAgICc8ZGl2IHN0eWxlPSJib3JkZXItdG9wOjFweCBzb2xpZCAjY2NjOyI+JyArIGxhYmVsICsgIjwvZGl2PiI7DQp9Ow0KDQovKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCkdBTUUgSU5JVElBTElaQVRJT04NCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQp2YXIgR2FtZSA9IHt9Ow0KDQooZnVuY3Rpb24gKCkgew0KICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCglNT0RESU5HIEFQSQ0KCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogIC8qDQoJCXRvIHVzZToNCgkJLShOT1RFOiB0aGlzIGZ1bmN0aW9ucyBhIGxpdHRsZSBkaWZmZXJlbnRseSBpbiB0aGUgc3RhbmRhbG9uZS9TdGVhbSB2ZXJzaW9uOyBoYXZlIGEgbG9vayBpbiB0aGUgZ2FtZSdzIC9tb2RzIGZvbGRlciBmb3IgZXhhbXBsZSBtb2RzIC0gdGhvdWdoIG1vc3Qgb2YgdGhlIGluZm9ybWF0aW9uIGJlbG93IHN0aWxsIGFwcGxpZXMpDQoJCS1oYXZlIHlvdXIgbW9kIGNhbGwgR2FtZS5yZWdpc3Rlck1vZCgidW5pcXVlIGlkIixtb2Qgb2JqZWN0KQ0KCQktdGhlICJ1bmlxdWUgaWQiIHZhbHVlIGlzIGEgc3RyaW5nIHRoZSBtb2Qgd2lsbCB1c2UgdG8gaW5kZXggYW5kIHJldHJpZXZlIGl0cyBzYXZlIGRhdGE7IHNwZWNpYWwgY2hhcmFjdGVycyBhcmUgaWdub3JlZA0KCQktdGhlICJtb2Qgb2JqZWN0IiB2YWx1ZSBpcyBhbiBvYmplY3Qgc3RydWN0dXJlZCBsaWtlIHNvOg0KCQkJew0KCQkJCWluaXQ6ZnVuY3Rpb24oKXsNCgkJCQkJLy90aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBhcyBzb29uIGFzIHRoZSBtb2QgaXMgcmVnaXN0ZXJlZA0KCQkJCQkvL2RlY2xhcmUgaG9va3MgaGVyZQ0KCQkJCX0sDQoJCQkJc2F2ZTpmdW5jdGlvbigpew0KCQkJCQkvL3VzZSB0aGlzIHRvIHN0b3JlIHBlcnNpc3RlbnQgZGF0YSBhc3NvY2lhdGVkIHdpdGggeW91ciBtb2QNCgkJCQkJcmV0dXJuICdhIHN0cmluZyB0byBiZSBzYXZlZCc7DQoJCQkJfSwNCgkJCQlsb2FkOmZ1bmN0aW9uKHN0cil7DQoJCQkJCS8vZG8gc3R1ZmYgd2l0aCB0aGUgc3RyaW5nIGRhdGEgeW91IHNhdmVkIHByZXZpb3VzbHkNCgkJCQl9LA0KCQkJfQ0KCQktdGhlIG1vZCBvYmplY3QgbWF5IGFsc28gY29udGFpbiBhbnkgb3RoZXIgZGF0YSBvciBmdW5jdGlvbnMgeW91IHdhbnQsIGZvciBpbnN0YW5jZSB0byBtYWtlIHRoZW0gYWNjZXNzaWJsZSB0byBvdGhlciBtb2RzDQoJCS15b3VyIG1vZCBhbmQgaXRzIGRhdGEgY2FuIGJlIGFjY2Vzc2VkIHdpdGggR2FtZS5tb2RzWydtb2QgaWQnXQ0KCQktaG9va3MgYXJlIGZ1bmN0aW9ucyB0aGUgZ2FtZSBjYWxscyBhdXRvbWF0aWNhbGx5IGluIGNlcnRhaW4gY2lyY3Vtc3RhbmNlcywgbGlrZSB3aGVuIGNhbGN1bGF0aW5nIGNvb2tpZXMgcGVyIGNsaWNrIG9yIHdoZW4gcmVkcmF3aW5nIHRoZSBzY3JlZW4NCgkJLXRvIGFkZCBhIGhvb2s6IEdhbWUucmVnaXN0ZXJIb29rKCdob29rIGlkJyx5b3VyRnVuY3Rpb25IZXJlKSAtIG5vdGU6IHlvdSBjYW4gYWxzbyBkZWNsYXJlIHdob2xlIGFycmF5cyBvZiBob29rcywgaWUuIEdhbWUucmVnaXN0ZXJIb29rKCdob29rIGlkJyxbZnVuY3Rpb24xLGZ1bmN0aW9uMiwuLi5dKQ0KCQktdG8gcmVtb3ZlIGEgaG9vazogR2FtZS5yZW1vdmVIb29rKCdob29rIGlkJyx0aGVTYW1lRnVuY3Rpb25IZXJlKQ0KCQktc29tZSBob29rcyBhcmUgZmVkIGEgcGFyYW1ldGVyIHlvdSBjYW4gdXNlIGluIHRoZSBmdW5jdGlvbg0KCQktbGlzdCBvZiB2YWxpZCBob29rIGlkczoNCgkJCSdsb2dpYycgLSBjYWxsZWQgZXZlcnkgbG9naWMgdGljaw0KCQkJJ2RyYXcnIC0gY2FsbGVkIGV2ZXJ5IGRyYXcgdGljaw0KCQkJJ3Jlc2V0JyAtIGNhbGxlZCB3aGVuZXZlciB0aGUgcGxheWVyIHJlc2V0czsgcGFyYW1ldGVyIGlzIHRydWUgaWYgdGhpcyBpcyBhIGhhcmQgcmVzZXQsIGZhbHNlIGlmIGl0J3MgYW4gYXNjZW5zaW9uDQoJCQkncmVpbmNhcm5hdGUnIC0gY2FsbGVkIHdoZW4gdGhlIHBsYXllciBoYXMgcmVpbmNhcm5hdGVkIGFmdGVyIGFuIGFzY2Vuc2lvbg0KCQkJJ3RpY2tlcicgLSBjYWxsZWQgd2hlbiBkZXRlcm1pbmluZyBuZXdzIHRpY2tlciB0ZXh0OyBzaG91bGQgcmV0dXJuIGFuIGFycmF5IG9mIHBvc3NpYmxlIGNob2ljZXMgdG8gYWRkDQoJCQknY3BzJyAtIGNhbGxlZCB3aGVuIGRldGVybWluaW5nIHRoZSBDcFM7IHBhcmFtZXRlciBpcyB0aGUgY3VycmVudCBDcFM7IHNob3VsZCByZXR1cm4gdGhlIG1vZGlmaWVkIENwUw0KCQkJJ2Nvb2tpZXNQZXJDbGljaycgLSBjYWxsZWQgd2hlbiBkZXRlcm1pbmluZyB0aGUgY29va2llcyBwZXIgY2xpY2s7IHBhcmFtZXRlciBpcyB0aGUgY3VycmVudCB2YWx1ZTsgc2hvdWxkIHJldHVybiB0aGUgbW9kaWZpZWQgdmFsdWUNCgkJCSdjbGljaycgLSBjYWxsZWQgd2hlbiB0aGUgYmlnIGNvb2tpZSBpcyBjbGlja2VkDQoJCQknY3JlYXRlJyAtIGNhbGxlZCBhZnRlciB0aGUgZ2FtZSBkZWNsYXJlcyBhbGwgYnVpbGRpbmdzLCBidWZmcywgdXBncmFkZXMgYW5kIGFjaGlldnM7IHVzZSB0aGlzIHRvIGRlY2xhcmUgeW91ciBvd24gLSBub3RlIHRoYXQgd2hpbGUgdGhlIGdhbWUgZGlzdGluZ3Vpc2hlcyBiZXR3ZWVuIHZhbmlsbGEgYW5kIG5vbi12YW5pbGxhIGNvbnRlbnQsIHNhdmluZy9sb2FkaW5nIGZ1bmN0aW9uYWxpdHkgZm9yIGN1c3RvbSBjb250ZW50IChpbmNsdWRpbmcgc3R1ZmYgbGlrZSBhY3RpdmUgYnVmZnMgb3IgcGVybWFuZW50IHVwZ3JhZGUgc2xvdHRpbmcpIGlzIG5vdCBleHBsaWNpdGx5IGltcGxlbWVudGVkIGFuZCBtYXkgYmUgdW5wcmVkaWN0YWJsZSBhbmQgYnJva2VuDQoJCQknY2hlY2snIC0gY2FsbGVkIGV2ZXJ5IGZldyBzZWNvbmRzIHdoZW4gd2UgY2hlY2sgZm9yIHVwZ3JhZGUvYWNoaWV2IHVubG9jayBjb25kaXRpb25zOyB5b3UgY2FuIGFsc28gdXNlIHRoaXMgZm9yIG90aGVyIGNoZWNrcyB0aGF0IHlvdSBkb24ndCBuZWVkIGhhcHBlbmluZyBldmVyeSBsb2dpYyBmcmFtZQ0KCQktZnVuY3Rpb24gaG9va3MgYXJlIHByb3ZpZGVkIGZvciBjb252ZW5pZW5jZSBhbmQgbW9yZSBhZHZhbmNlZCBtb2QgZnVuY3Rpb25hbGl0eSB3aWxsIHByb2JhYmx5IGludm9sdmUgbWFudWFsIGNvZGUgaW5qZWN0aW9uDQoJCS1wbGVhc2UgYmUgbWluZGZ1bCBvZiB0aGUgbGVuZ3RoIG9mIHRoZSBkYXRhIHlvdSBzYXZlLCBhcyBpdCBkb2VzIGluZmxhdGUgdGhlIGV4cG9ydC1zYXZlLXRvLXN0cmluZyBmZWF0dXJlDQoJCQ0KCQlOT1RFOiBtb2RkaW5nIEFQSSBpcyBzdXNjZXB0aWJsZSB0byBjaGFuZ2UgYW5kIG1heSBub3QgYWx3YXlzIGZ1bmN0aW9uIHN1cGVyLXdlbGwNCgkqLw0KICBHYW1lLm1vZHMgPSB7fTsNCiAgR2FtZS5zb3J0ZWRNb2RzID0gW107DQogIEdhbWUuYnJva2VuTW9kcyA9IFtdOw0KICBHYW1lLm1vZFNhdmVEYXRhID0ge307DQogIEdhbWUubW9kSG9va3MgPSB7fTsNCiAgR2FtZS5tb2RIb29rc05hbWVzID0gWw0KICAgICJsb2dpYyIsDQogICAgImRyYXciLA0KICAgICJyZXNldCIsDQogICAgInJlaW5jYXJuYXRlIiwNCiAgICAidGlja2VyIiwNCiAgICAiY3BzIiwNCiAgICAiY29va2llc1BlckNsaWNrIiwNCiAgICAiY2xpY2siLA0KICAgICJjcmVhdGUiLA0KICAgICJjaGVjayIsDQogIF07DQogIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5tb2RIb29rc05hbWVzLmxlbmd0aDsgaSsrKSB7DQogICAgR2FtZS5tb2RIb29rc1tHYW1lLm1vZEhvb2tzTmFtZXNbaV1dID0gW107DQogIH0NCiAgR2FtZS5yZWdpc3Rlck1vZCA9IGZ1bmN0aW9uIChpZCwgbW9kKSB7DQogICAgaWQgPSBpZC5yZXBsYWNlKC9cVysvZywgIiAiKTsNCiAgICBpZiAoaWQgPT0gIk1FVEEiKSByZXR1cm4gZmFsc2U7DQogICAgaWYgKEdhbWUubW9kc1tpZF0pIHsNCiAgICAgIGNvbnNvbGUubG9nKCdFUlJPUjogbW9kIGFscmVhZHkgcmVnaXN0ZXJlZCB3aXRoIHRoZSBpZCAiJyArIGlkICsgJyIuJyk7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIEdhbWUubW9kc1tpZF0gPSBtb2Q7DQogICAgR2FtZS5zb3J0ZWRNb2RzLnB1c2gobW9kKTsNCiAgICBtb2QuaWQgPSBpZDsNCiAgICBtb2QubmFtZSA9IG1vZC5uYW1lIHx8IGlkOw0KICAgIGlmIChBcHApIEFwcC5yZWdpc3Rlck1vZChtb2QpOw0KICAgIGNvbnNvbGUubG9nKCdNb2QgIicgKyBpZCArICciIGFkZGVkLicpOw0KICAgIGlmIChHYW1lLnJlYWR5ICYmIG1vZC5pbml0KSB7DQogICAgICBpZiAoIUFwcCAmJiBHYW1lLldpbikgR2FtZS5XaW4oIlRoaXJkLXBhcnR5Iik7DQogICAgICBtb2QuaW5pdCgpOw0KICAgICAgaWYgKG1vZC5sb2FkICYmIEdhbWUubW9kU2F2ZURhdGFbaWRdKSBtb2QubG9hZChHYW1lLm1vZFNhdmVEYXRhW2lkXSk7DQogICAgICBtb2QuaW5pdCA9IDA7DQogICAgfQ0KICB9Ow0KICBHYW1lLmxhdW5jaE1vZHMgPSBmdW5jdGlvbiAoKSB7DQogICAgaWYgKEdhbWUuYnJva2VuTW9kcy5sZW5ndGggPiAwKSB7DQogICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgJzxzcGFuIGNsYXNzPSJ3YXJuaW5nIj4nICsNCiAgICAgICAgICBsb2MoIlNvbWUgbW9kcyBjb3VsZG4ndCBiZSBsb2FkZWQ6IikgKw0KICAgICAgICAgICI8L3NwYW4+IiwNCiAgICAgICAgIlsiICsgR2FtZS5icm9rZW5Nb2RzLmpvaW4oIiwgIikgKyAiXSIsDQogICAgICAgIFszMiwgMTddDQogICAgICApOw0KICAgIH0NCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUuc29ydGVkTW9kcy5sZW5ndGg7IGkrKykgew0KICAgICAgdmFyIG1vZCA9IEdhbWUuc29ydGVkTW9kc1tpXTsNCiAgICAgIGlmIChtb2QuaW5pdCkgew0KICAgICAgICBjb25zb2xlLmxvZygiPT09aW5pdGlhbGl6aW5nIG1vZCIsIG1vZC5pZCk7DQogICAgICAgIG1vZC5pbml0KCk7DQogICAgICAgIG1vZC5pbml0ID0gMDsNCiAgICAgICAgLy9pZiAobW9kLmxvYWQgJiYgR2FtZS5tb2RTYXZlRGF0YVttb2QuaWRdKSBtb2QubG9hZChHYW1lLm1vZFNhdmVEYXRhW21vZC5pZF0pOw0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAoIUFwcCAmJiBHYW1lLnNvcnRlZE1vZHMubGVuZ3RoID4gMCkgR2FtZS5XaW4oIlRoaXJkLXBhcnR5Iik7DQogIH07DQogIEdhbWUucmVnaXN0ZXJIb29rID0gZnVuY3Rpb24gKGhvb2ssIGZ1bmMpIHsNCiAgICBpZiAoZnVuYy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZnVuYy5sZW5ndGg7IGkrKykgew0KICAgICAgICBHYW1lLnJlZ2lzdGVySG9vayhob29rLCBmdW5jW2ldKTsNCiAgICAgIH0NCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYgKHR5cGVvZiBmdW5jICE9PSAiZnVuY3Rpb24iKSByZXR1cm47DQogICAgaWYgKHR5cGVvZiBHYW1lLm1vZEhvb2tzW2hvb2tdICE9PSAidW5kZWZpbmVkIikNCiAgICAgIEdhbWUubW9kSG9va3NbaG9va10ucHVzaChmdW5jKTsNCiAgICBlbHNlDQogICAgICBjb25zb2xlLmxvZygNCiAgICAgICAgJ0Vycm9yOiBhIG1vZCB0cmllZCB0byByZWdpc3RlciBhIG5vbi1leGlzdGVudCBob29rIG5hbWVkICInICsNCiAgICAgICAgICBob29rICsNCiAgICAgICAgICAnIi4nDQogICAgICApOw0KICB9Ow0KICBHYW1lLnJlbW92ZUhvb2sgPSBmdW5jdGlvbiAoaG9vaywgZnVuYykgew0KICAgIGlmIChmdW5jLmNvbnN0cnVjdG9yID09PSBBcnJheSkgew0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmdW5jLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIEdhbWUucmVtb3ZlSG9vayhob29rLCBmdW5jW2ldKTsNCiAgICAgIH0NCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYgKHR5cGVvZiBmdW5jICE9PSAiZnVuY3Rpb24iKSByZXR1cm47DQogICAgaWYgKA0KICAgICAgdHlwZW9mIEdhbWUubW9kSG9va3NbaG9va10gIT09ICJ1bmRlZmluZWQiICYmDQogICAgICBHYW1lLm1vZEhvb2tzW2hvb2tdLmluZGV4T2YoZnVuYykgIT0gLTENCiAgICApDQogICAgICBHYW1lLm1vZEhvb2tzW2hvb2tdLnNwbGljZShHYW1lLm1vZEhvb2tzW2hvb2tdLmluZGV4T2YoZnVuYyksIDEpOw0KICAgIGVsc2UNCiAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAnRXJyb3I6IGEgbW9kIHRyaWVkIHRvIHJlbW92ZSBhIG5vbi1leGlzdGVudCBob29rIG5hbWVkICInICsgaG9vayArICciLicNCiAgICAgICk7DQogIH07DQogIEdhbWUucnVuTW9kSG9vayA9IGZ1bmN0aW9uIChob29rLCBwYXJhbSkgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5tb2RIb29rc1tob29rXS5sZW5ndGg7IGkrKykgew0KICAgICAgR2FtZS5tb2RIb29rc1tob29rXVtpXShwYXJhbSk7DQogICAgfQ0KICB9Ow0KICBHYW1lLnJ1bk1vZEhvb2tPblZhbHVlID0gZnVuY3Rpb24gKGhvb2ssIHZhbCkgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5tb2RIb29rc1tob29rXS5sZW5ndGg7IGkrKykgew0KICAgICAgdmFsID0gR2FtZS5tb2RIb29rc1tob29rXVtpXSh2YWwpOw0KICAgIH0NCiAgICByZXR1cm4gdmFsOw0KICB9Ow0KICBHYW1lLnNhZmVTYXZlU3RyaW5nID0gZnVuY3Rpb24gKHN0cikgew0KICAgIC8vbG9vayBhcyBsb25nIGFzIGl0IHdvcmtzDQogICAgc3RyID0gcmVwbGFjZUFsbCgifCIsICJbUF0iLCBzdHIpOw0KICAgIHN0ciA9IHJlcGxhY2VBbGwoIjsiLCAiW1NdIiwgc3RyKTsNCiAgICByZXR1cm4gc3RyOw0KICB9Ow0KICBHYW1lLnNhZmVMb2FkU3RyaW5nID0gZnVuY3Rpb24gKHN0cikgew0KICAgIHN0ciA9IHJlcGxhY2VBbGwoIltQXSIsICJ8Iiwgc3RyKTsNCiAgICBzdHIgPSByZXBsYWNlQWxsKCJbU10iLCAiOyIsIHN0cik7DQogICAgcmV0dXJuIHN0cjsNCiAgfTsNCiAgR2FtZS5zYXZlTW9kRGF0YSA9IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgc3RyID0gIiI7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLnNvcnRlZE1vZHMubGVuZ3RoOyBpKyspIHsNCiAgICAgIGlmIChHYW1lLnNvcnRlZE1vZHNbaV1bInNhdmUiXSkgew0KICAgICAgICB2YXIgZGF0YSA9IEdhbWUuc29ydGVkTW9kc1tpXVsic2F2ZSJdKCk7DQogICAgICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gInVuZGVmaW5lZCIpDQogICAgICAgICAgR2FtZS5tb2RTYXZlRGF0YVtHYW1lLnNvcnRlZE1vZHNbaV0uaWRdID0gZGF0YTsNCiAgICAgIH0NCiAgICB9DQogICAgZm9yICh2YXIgaSBpbiBHYW1lLm1vZFNhdmVEYXRhKSB7DQogICAgICBzdHIgKz0gaSArICI6IiArIEdhbWUuc2FmZVNhdmVTdHJpbmcoR2FtZS5tb2RTYXZlRGF0YVtpXSkgKyAiOyI7DQogICAgfQ0KICAgIGlmIChBcHAgJiYgQXBwLnNhdmVNb2RzKSBzdHIgKz0gQXBwLnNhdmVNb2RzKCk7DQogICAgcmV0dXJuIHN0cjsNCiAgfTsNCiAgR2FtZS5sb2FkTW9kRGF0YSA9IGZ1bmN0aW9uICgpIHsNCiAgICBmb3IgKHZhciBpIGluIEdhbWUubW9kU2F2ZURhdGEpIHsNCiAgICAgIGlmIChHYW1lLm1vZHNbaV0gJiYgR2FtZS5tb2RzW2ldWyJsb2FkIl0pDQogICAgICAgIEdhbWUubW9kc1tpXVsibG9hZCJdKEdhbWUubW9kU2F2ZURhdGFbaV0pOw0KICAgIH0NCiAgfTsNCiAgR2FtZS5kZWxldGVNb2REYXRhID0gZnVuY3Rpb24gKGlkKSB7DQogICAgaWYgKEdhbWUubW9kU2F2ZURhdGFbaWRdKSBkZWxldGUgR2FtZS5tb2RTYXZlRGF0YVtpZF07DQogIH07DQogIEdhbWUuZGVsZXRlQWxsTW9kRGF0YSA9IGZ1bmN0aW9uICgpIHsNCiAgICBHYW1lLm1vZFNhdmVEYXRhID0ge307DQogIH07DQogIEdhbWUuQ2hlY2tNb2REYXRhID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBtb2RzTiA9IDA7DQogICAgdmFyIHN0ciA9ICIiOw0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5tb2RTYXZlRGF0YSkgew0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IHN0eWxlPSJib3JkZXItYm90dG9tOjFweCBkYXNoZWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpO2NsZWFyOmJvdGg7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmc6NHB4IDBweDsiPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgc3R5bGU9ImZsb2F0OmxlZnQ7d2lkdGg6NDklO3RleHQtYWxpZ246bGVmdDtvdmVyZmxvdzpoaWRkZW47Ij48Yj4nICsNCiAgICAgICAgaSArDQogICAgICAgICI8L2I+IjsNCiAgICAgIGlmIChHYW1lLm1vZHNbaV0pIHN0ciArPSAiICIgKyBsb2MoIihsb2FkZWQpIik7DQogICAgICBzdHIgKz0gIjwvZGl2PiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0O3dpZHRoOjQ5JTt0ZXh0LWFsaWduOnJpZ2h0O292ZXJmbG93OmhpZGRlbjsiPicgKw0KICAgICAgICBsb2MoIiUxIGNoYXIiLCBHYW1lLm1vZFNhdmVEYXRhW2ldLmxlbmd0aCkgKw0KICAgICAgICAnIDxhIGNsYXNzPSJvcHRpb24gd2FybmluZyIgc3R5bGU9InBhZGRpbmc6MHB4IDJweDtmb250LXNpemU6MTBweDttYXJnaW46MHB4O3ZlcnRpY2FsLWFsaWduOnRvcDsiICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgIj1cIkdhbWUuZGVsZXRlTW9kRGF0YSgnIiArDQogICAgICAgIGkgKw0KICAgICAgICAiJyk7UGxheVNvdW5kKCdzbmQvdGljay5tcDMnKTtHYW1lLkNsb3NlUHJvbXB0KCk7R2FtZS5DaGVja01vZERhdGEoKTtcIj5YPC9hPiI7DQogICAgICBzdHIgKz0gIjwvZGl2PiI7DQogICAgICBzdHIgKz0gIjwvZGl2PiI7DQogICAgICBtb2RzTisrOw0KICAgIH0NCiAgICBpZiAobW9kc04gPT0gMCkgc3RyICs9IGxvYygiTm8gbW9kIGRhdGEgcHJlc2VudC4iKTsNCiAgICBlbHNlDQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXY+PGEgY2xhc3M9Im9wdGlvbiB3YXJuaW5nIiBzdHlsZT0iZm9udC1zaXplOjExcHg7bWFyZ2luLXRvcDo0cHg7IiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICI9XCJHYW1lLmRlbGV0ZUFsbE1vZERhdGEoKTtQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO0dhbWUuQ2xvc2VQcm9tcHQoKTtHYW1lLkNoZWNrTW9kRGF0YSgpO1wiPiIgKw0KICAgICAgICBsb2MoIkRlbGV0ZSBhbGwiKSArDQogICAgICAgICI8L2E+PC9kaXY+IjsNCiAgICBHYW1lLlByb21wdCgNCiAgICAgICI8aWQgTW9kRGF0YT48aDM+IiArDQogICAgICAgIGxvYygiTW9kIGRhdGEiKSArDQogICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgdGlueUljb24oWzE2LCA1XSkgKw0KICAgICAgICAiPGRpdj48L2Rpdj4iICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJUaGVzZSBhcmUgdGhlIG1vZHMgcHJlc2VudCBpbiB5b3VyIHNhdmUgZGF0YS4gWW91IG1heSBkZWxldGUgc29tZSBvZiB0aGlzIGRhdGEgdG8gbWFrZSB5b3VyIHNhdmUgZmlsZSBzbWFsbGVyLiINCiAgICAgICAgKSArDQogICAgICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJibG9jayIgc3R5bGU9ImZvbnQtc2l6ZToxMXB4OyI+JyArDQogICAgICAgIHN0ciArDQogICAgICAgICI8L2Rpdj4iLA0KICAgICAgW2xvYygiQmFjayIpXQ0KICAgICk7DQogIH07DQoNCiAgR2FtZS5Mb2FkTW9kID0gTG9hZFNjcmlwdDsgLy9sb2FkcyB0aGUgbW9kIGF0IHRoZSBnaXZlbiBVUkwNCg0KICBpZiAoZmFsc2UpIHsNCiAgICAvL0VYQU1QTEUgTU9EDQogICAgR2FtZS5yZWdpc3Rlck1vZCgidGVzdCBtb2QiLCB7DQogICAgICAvKg0KCQkJCXdoYXQgdGhpcyBleGFtcGxlIG1vZCBkb2VzOg0KCQkJCS1kb3VibGUgeW91ciBDcFMNCgkJCQktZGlzcGxheSBhIGxpdHRsZSBwb3B1cCBmb3IgaGFsZiBhIHNlY29uZCB3aGVuZXZlciB5b3UgY2xpY2sgdGhlIGJpZyBjb29raWUNCgkJCQktYWRkIGEgbGl0dGxlIGludHJvIHRleHQgYWJvdmUgeW91ciBiYWtlcnkgbmFtZSwgYW5kIGdlbmVyYXRlIHRoYXQgaW50cm8gdGV4dCBhdCByYW5kb20gaWYgeW91IGRvbid0IGFscmVhZHkgaGF2ZSBvbmUNCgkJCQktc2F2ZSBhbmQgbG9hZCB5b3VyIGludHJvIHRleHQNCgkJCSovDQogICAgICBpbml0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUucmVnaXN0ZXJIb29rKCJyZWluY2FybmF0ZSIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBHYW1lLm1vZHNbInRlc3QgbW9kIl0uYWRkSW50cm8oKTsNCiAgICAgICAgfSk7DQogICAgICAgIEdhbWUucmVnaXN0ZXJIb29rKCJjaGVjayIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoIUdhbWUucGxheWVySW50cm8pIHsNCiAgICAgICAgICAgIEdhbWUubW9kc1sidGVzdCBtb2QiXS5hZGRJbnRybygpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICAgIEdhbWUucmVnaXN0ZXJIb29rKCJjbGljayIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICJBIGdvb2QgY2xpY2suIiwNCiAgICAgICAgICAgICAgIkEgc29saWQgY2xpY2suIiwNCiAgICAgICAgICAgICAgIkEgbWVkaW9jcmUgY2xpY2suIiwNCiAgICAgICAgICAgICAgIkFuIGV4Y2VsbGVudCBjbGljayEiLA0KICAgICAgICAgICAgXSksDQogICAgICAgICAgICAiIiwNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICAwLjUNCiAgICAgICAgICApOw0KICAgICAgICB9KTsNCiAgICAgICAgR2FtZS5yZWdpc3Rlckhvb2soImNwcyIsIGZ1bmN0aW9uIChjcHMpIHsNCiAgICAgICAgICByZXR1cm4gY3BzICogMjsNCiAgICAgICAgfSk7DQogICAgICB9LA0KICAgICAgc2F2ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAvL25vdGU6IHdlIHVzZSBzdHJpbmdpZmllZCBKU09OIGZvciBlYXNlIGFuZCBjbGFyaXR5IGJ1dCB5b3UgY291bGQgc3RvcmUgYW55IHR5cGUgb2Ygc3RyaW5nDQogICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7IHRleHQ6IEdhbWUucGxheWVySW50cm8gfSk7DQogICAgICB9LA0KICAgICAgbG9hZDogZnVuY3Rpb24gKHN0cikgew0KICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTsNCiAgICAgICAgaWYgKGRhdGEudGV4dCkgR2FtZS5tb2RzWyJ0ZXN0IG1vZCJdLmFkZEludHJvKGRhdGEudGV4dCk7DQogICAgICB9LA0KICAgICAgYWRkSW50cm86IGZ1bmN0aW9uICh0ZXh0KSB7DQogICAgICAgIC8vbm90ZTogdGhpcyBpcyBub3QgYSBtb2QgaG9vaywganVzdCBhIGZ1bmN0aW9uIHRoYXQncyBwYXJ0IG9mIHRoZSBtb2QNCiAgICAgICAgR2FtZS5wbGF5ZXJJbnRybyA9DQogICAgICAgICAgdGV4dCB8fA0KICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAib2ggc25hcCwgaXQncyIsDQogICAgICAgICAgICAid2F0Y2ggb3V0LCBpdCdzIiwNCiAgICAgICAgICAgICJvaCBubyEgaGVyZSBjb21lcyIsDQogICAgICAgICAgICAiaGlkZSB5b3VyIGNvb2tpZXMsIGZvciBoZXJlIGNvbWVzIiwNCiAgICAgICAgICAgICJiZWhvbGQhIGl0J3MiLA0KICAgICAgICAgIF0pOw0KICAgICAgICBpZiAoIWwoImJha2VyeVN1YnRpdGxlIikpDQogICAgICAgICAgbCgiYmFrZXJ5TmFtZSIpLmluc2VydEFkamFjZW50SFRNTCgNCiAgICAgICAgICAgICJhZnRlcmVuZCIsDQogICAgICAgICAgICAnPGRpdiBpZD0iYmFrZXJ5U3VidGl0bGUiIGNsYXNzPSJ0aXRsZSIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MHB4O3JpZ2h0OjBweDtib3R0b206MzJweDtmb250LXNpemU6MTJweDtwb2ludGVyLWV2ZW50czpub25lO3RleHQtc2hhZG93OjBweCAxcHggMXB4ICMwMDAsMHB4IDBweCA0cHggI2YwMDtvcGFjaXR5OjAuODsiPjwvZGl2PicNCiAgICAgICAgICApOw0KICAgICAgICBsKCJiYWtlcnlTdWJ0aXRsZSIpLnRleHRDb250ZW50ID0gIn4iICsgR2FtZS5wbGF5ZXJJbnRybyArICJ+IjsNCiAgICAgIH0sDQogICAgfSk7DQogIH0NCg0KICAvL3JlcGxhY2luZyBhbiBleGlzdGluZyBjYW52YXMgcGljdHVyZSB3aXRoIGEgbmV3IG9uZSBhdCBydW50aW1lIDogR2FtZS5Mb2FkZXIuUmVwbGFjZSgncGVyZmVjdENvb2tpZS5wbmcnLCdpbXBlcmZlY3RDb29raWUucG5nJyk7DQogIC8vdXBncmFkZXMgYW5kIGFjaGlldmVtZW50cyBjYW4gdXNlIG90aGVyIHBpY3R1cmVzIHRoYW4gaWNvbnMucG5nOyBkZWNsYXJlIHRoZWlyIGljb24gd2l0aCBbcG9zWCxwb3NZLCdodHRwOi8vZXhhbXBsZS5jb20vbXlJY29ucy5wbmcnXQ0KICAvL2NoZWNrIG91dCB0aGUgIlVOTE9DS0lORyBTVFVGRiIgc2VjdGlvbiB0byBzZWUgaG93IHVubG9ja2luZyBhY2hpZXZzIGFuZCB1cGdyYWRlcyBpcyBkb25lDQp9KSgpOw0KDQpHYW1lLnZlcnNpb24gPSBWRVJTSU9OOw0KR2FtZS5sb2FkZWRGcm9tVmVyc2lvbiA9IFZFUlNJT047DQpHYW1lLmJldGEgPSBCRVRBOw0KaWYgKCFBcHAgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigiL2JldGEiKSA+IC0xKSBHYW1lLmJldGEgPSAxOw0KZWxzZSBpZiAoQXBwICYmIG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5nZXQoImJldGEiKSkNCiAgR2FtZS5iZXRhID0gMTsNCkdhbWUuaHR0cHMgPSAhQXBwID8gKGxvY2F0aW9uLnByb3RvY29sICE9ICJodHRwczoiID8gZmFsc2UgOiB0cnVlKSA6IHRydWU7DQpHYW1lLlNhdmVUbyA9ICJDb29raWVDbGlja2VyR2FtZSI7DQppZiAoR2FtZS5iZXRhKSBHYW1lLlNhdmVUbyA9ICJDb29raWVDbGlja2VyR2FtZUJldGEiOw0KaWYgKEFwcCAmJiBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KCJtb2RsZXNzIikpDQogIEdhbWUubW9kbGVzcyA9IDE7DQoNCkdhbWUuTGF1bmNoID0gZnVuY3Rpb24gKCkgew0KICBHYW1lLm1vYmlsZSA9IDA7DQogIEdhbWUudG91Y2hFdmVudHMgPSAwOw0KICAvL2lmICgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIEdhbWUubW9iaWxlPTE7DQogIC8vaWYgKEdhbWUubW9iaWxlKSBHYW1lLnRvdWNoRXZlbnRzPTE7DQogIC8vaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgR2FtZS50b3VjaEV2ZW50cz0xOw0KDQogIHZhciBjc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOw0KICBjc3MudHlwZSA9ICJ0ZXh0L2NzcyI7DQogIGNzcy5pbm5lckhUTUwgPQ0KICAgICJib2R5IC5pY29uLGJvZHkgLmNyYXRlLGJvZHkgLnVzZXNJY29ue2JhY2tncm91bmQtaW1hZ2U6dXJsKGltZy9pY29ucy5wbmc/dj0iICsNCiAgICBHYW1lLnZlcnNpb24gKw0KICAgICIpO30iOw0KICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGNzcyk7DQoNCiAgLy90aGlzIGlzIHNvIHNoaW1tZXJzIGNhbiBzdGlsbCBhcHBlYXIgZXZlbiBpZiB5b3UgbG9zZSBjb25uZWN0aW9uIGFmdGVyIHRoZSBnYW1lIGlzIGxvYWRlZA0KICB2YXIgcHJlbG9hZEltYWdlcyA9IFsNCiAgICAiaW1nL2dvbGRDb29raWUucG5nIiwNCiAgICAiaW1nL3dyYXRoQ29va2llLnBuZyIsDQogICAgImltZy9zcG9va3lDb29raWUucG5nIiwNCiAgICAiaW1nL2hlYXJ0cy5wbmciLA0KICAgICJpbWcvY29udHJhY3QucG5nIiwNCiAgICAiaW1nL3dyYXRoQ29udHJhY3QucG5nIiwNCiAgICAiaW1nL2J1bm5pZXMucG5nIiwNCiAgICAiaW1nL2Zyb3N0ZWRSZWluZGVlci5wbmciLA0KICBdOw0KICB2YXIgcHJlbG9hZEltYWdlc0wgPSBsKCJwcmVsb2FkSW1hZ2VzIik7DQogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJlbG9hZEltYWdlcy5sZW5ndGg7IGkrKykgew0KICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsNCiAgICBpbWcuc3JjID0gcHJlbG9hZEltYWdlc1tpXTsNCiAgICBwcmVsb2FkSW1hZ2VzTC5hcHBlbmRDaGlsZChpbWcpOw0KICB9DQoNCiAgR2FtZS52aXNpYmxlID0gdHJ1ZTsNCiAgQWRkRXZlbnQoZG9jdW1lbnQsICJ2aXNpYmlsaXR5Y2hhbmdlIiwgZnVuY3Rpb24gKGUpIHsNCiAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAiaGlkZGVuIikgR2FtZS52aXNpYmxlID0gZmFsc2U7DQogICAgZWxzZSBHYW1lLnZpc2libGUgPSB0cnVlOw0KICB9KTsNCg0KICBpZiAoIUVOKSB7DQogICAgLy9jb2RlLXBhdGNoaW5nIHRoZSBDU1MgZm9yIGxvY2FsaXphdGlvbiBmZWVscyBsaWtlIGl0IHNob3VsZCBiZSBhZ2FpbnN0IHRoZSBsYXcsIGFuZCB5ZXQNCiAgICB2YXIgY3NzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsNCiAgICBjc3MudHlwZSA9ICJ0ZXh0L2NzcyI7DQogICAgY3NzLmlubmVySFRNTCA9DQogICAgICAiI3VwZ3JhZGVzOmJlZm9yZXtjb250ZW50OiciICsNCiAgICAgIGxvYygiVXBncmFkZXMiKSArDQogICAgICAiJzt9IiArDQogICAgICAiI3RvZ2dsZVVwZ3JhZGVzOmJlZm9yZXtjb250ZW50OiciICsNCiAgICAgIGxvYygiU3dpdGNoZXMiKSArDQogICAgICAiJzt9IiArDQogICAgICAiI3RlY2hVcGdyYWRlczpiZWZvcmV7Y29udGVudDonIiArDQogICAgICBsb2MoIlJlc2VhcmNoIikgKw0KICAgICAgIic7fSIgKw0KICAgICAgIiN2YXVsdFVwZ3JhZGVzOmJlZm9yZXtjb250ZW50OiciICsNCiAgICAgIGxvYygiVmF1bHQiKSArDQogICAgICAiJzt9IiArDQogICAgICAiI3Byb2R1Y3RzOmJlZm9yZXtjb250ZW50OiciICsNCiAgICAgIGxvYygiQnVpbGRpbmdzIikgKw0KICAgICAgIic7fSIgKw0KICAgICAgIiI7DQogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChjc3MpOw0KICB9DQoNCiAgR2FtZS5iYXNlU2Vhc29uID0gIiI7IC8vaGFsbG93ZWVuLCBjaHJpc3RtYXMsIHZhbGVudGluZXMsIGZvb2xzLCBlYXN0ZXINCiAgLy9hdXRvbWF0aWMgc2Vhc29uIGRldGVjdGlvbiAobWlnaHQgbm90IGJlIDEwMCUgYWNjdXJhdGUpDQogIHZhciB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOw0KICB2YXIgbGVhcCA9ICh5ZWFyICUgNCA9PSAwICYmIHllYXIgJSAxMDAgIT0gMCkgfHwgeWVhciAlIDQwMCA9PSAwID8gMSA6IDA7DQogIHZhciBkYXkgPSBNYXRoLmZsb29yKA0KICAgIChuZXcgRGF0ZSgpIC0gbmV3IERhdGUoeWVhciwgMCwgMCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpDQogICk7DQogIGlmIChkYXkgPj0gNDEgJiYgZGF5IDw9IDQ2KSBHYW1lLmJhc2VTZWFzb24gPSAidmFsZW50aW5lcyI7DQogIGVsc2UgaWYgKGRheSArIGxlYXAgPj0gOTAgJiYgZGF5IDw9IDkyICsgbGVhcCkgR2FtZS5iYXNlU2Vhc29uID0gImZvb2xzIjsNCiAgZWxzZSBpZiAoZGF5ID49IDMwNCAtIDcgKyBsZWFwICYmIGRheSA8PSAzMDQgKyBsZWFwKQ0KICAgIEdhbWUuYmFzZVNlYXNvbiA9ICJoYWxsb3dlZW4iOw0KICBlbHNlIGlmIChkYXkgPj0gMzQ5ICsgbGVhcCAmJiBkYXkgPD0gMzY1ICsgbGVhcCkNCiAgICBHYW1lLmJhc2VTZWFzb24gPSAiY2hyaXN0bWFzIjsNCiAgZWxzZSB7DQogICAgLy9lYXN0ZXIgaXMgYSBwYWluIGdvZGRhbW4NCiAgICB2YXIgZWFzdGVyRGF5ID0gKGZ1bmN0aW9uIChZKSB7DQogICAgICB2YXIgQyA9IE1hdGguZmxvb3IoWSAvIDEwMCk7DQogICAgICB2YXIgTiA9IFkgLSAxOSAqIE1hdGguZmxvb3IoWSAvIDE5KTsNCiAgICAgIHZhciBLID0gTWF0aC5mbG9vcigoQyAtIDE3KSAvIDI1KTsNCiAgICAgIHZhciBJID0gQyAtIE1hdGguZmxvb3IoQyAvIDQpIC0gTWF0aC5mbG9vcigoQyAtIEspIC8gMykgKyAxOSAqIE4gKyAxNTsNCiAgICAgIEkgPSBJIC0gMzAgKiBNYXRoLmZsb29yKEkgLyAzMCk7DQogICAgICBJID0NCiAgICAgICAgSSAtDQogICAgICAgIE1hdGguZmxvb3IoSSAvIDI4KSAqDQogICAgICAgICAgKDEgLQ0KICAgICAgICAgICAgTWF0aC5mbG9vcihJIC8gMjgpICoNCiAgICAgICAgICAgICAgTWF0aC5mbG9vcigyOSAvIChJICsgMSkpICoNCiAgICAgICAgICAgICAgTWF0aC5mbG9vcigoMjEgLSBOKSAvIDExKSk7DQogICAgICB2YXIgSiA9IFkgKyBNYXRoLmZsb29yKFkgLyA0KSArIEkgKyAyIC0gQyArIE1hdGguZmxvb3IoQyAvIDQpOw0KICAgICAgSiA9IEogLSA3ICogTWF0aC5mbG9vcihKIC8gNyk7DQogICAgICB2YXIgTCA9IEkgLSBKOw0KICAgICAgdmFyIE0gPSAzICsgTWF0aC5mbG9vcigoTCArIDQwKSAvIDQ0KTsNCiAgICAgIHZhciBEID0gTCArIDI4IC0gMzEgKiBNYXRoLmZsb29yKE0gLyA0KTsNCiAgICAgIHJldHVybiBuZXcgRGF0ZShZLCBNIC0gMSwgRCk7DQogICAgfSkoeWVhcik7DQogICAgZWFzdGVyRGF5ID0gTWF0aC5mbG9vcigNCiAgICAgIChlYXN0ZXJEYXkgLSBuZXcgRGF0ZShlYXN0ZXJEYXkuZ2V0RnVsbFllYXIoKSwgMCwgMCkpIC8NCiAgICAgICAgKDEwMDAgKiA2MCAqIDYwICogMjQpDQogICAgKTsNCiAgICBpZiAoZGF5ID49IGVhc3RlckRheSAtIDcgJiYgZGF5IDw9IGVhc3RlckRheSkgR2FtZS5iYXNlU2Vhc29uID0gImVhc3RlciI7DQogIH0NCg0KICBHYW1lLnVwZGF0ZUxvZyA9DQogICAgJzxkaXYgY2xhc3M9InNlbGVjdGFibGUiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJzZWN0aW9uIj4nICsNCiAgICBsb2MoIkluZm8iKSArDQogICAgIjwvZGl2PiIgKw0KICAgICc8ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgIGxvYygiQWJvdXQiKSArDQogICAgIjwvZGl2PiIgKw0KICAgIChBcHANCiAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciIHN0eWxlPSJmb250LXdlaWdodDpib2xkO2ZvbnQtc3R5bGU6aXRhbGljO29wYWNpdHk6MC41OyI+JyArDQogICAgICAgIGxvYygiTm90ZTogbGlua3Mgd2lsbCBvcGVuIGluIHlvdXIgd2ViIGJyb3dzZXIuIikgKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICAgOiAiIikgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4nICsNCiAgICBsb2MoIkNvb2tpZSBDbGlja2VyIGlzIGEgamF2YXNjcmlwdCBnYW1lIGJ5ICUxIGFuZCAlMi4iLCBbDQogICAgICAnPGEgaHJlZj0iLy9vcnRlaWwuZGFzaG5ldC5vcmciIHRhcmdldD0iX2JsYW5rIj5PcnRlaWw8L2E+JywNCiAgICAgICc8YSBocmVmPSIvL2Rhc2huZXQub3JnIiB0YXJnZXQ9Il9ibGFuayI+T3B0aTwvYT4nLA0KICAgIF0pICsNCiAgICAiPC9kaXY+IiArDQogICAgKEFwcA0KICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JyArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiTXVzaWMgYnkgJTEuIiwNCiAgICAgICAgICAnPGEgaHJlZj0iaHR0cHM6Ly90d2l0dGVyLmNvbS9DNDE4IiB0YXJnZXQ9Il9ibGFuayI+QzQxODwvYT4nDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICAgOiAiIikgKw0KICAgIC8vJzxkaXYgY2xhc3M9Imxpc3RpbmciPldlIGhhdmUgYW4gPGEgaHJlZj0iaHR0cHM6Ly9kaXNjb3JkYXBwLmNvbS9pbnZpdGUvY29va2llIiB0YXJnZXQ9Il9ibGFuayI+b2ZmaWNpYWwgRGlzY29yZDwvYT4sIGFzIHdlbGwgYXMgYSA8YSBocmVmPSJodHRwOi8vZm9ydW0uZGFzaG5ldC5vcmciIHRhcmdldD0iX2JsYW5rIj5mb3J1bTwvYT47ICcrDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPicgKw0KICAgIChFTg0KICAgICAgPyAnV2UgaGF2ZSBhbiA8YSBocmVmPSJodHRwczovL2Rpc2NvcmRhcHAuY29tL2ludml0ZS9jb29raWUiIHRhcmdldD0iX2JsYW5rIj5vZmZpY2lhbCBEaXNjb3JkPC9hPjsgaWYgeW91XCdyZSBsb29raW5nIGZvciBoZWxwLCB5b3UgbWF5IGFsc28gd2FudCB0byB2aXNpdCB0aGUgPGEgaHJlZj0iaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9yL0Nvb2tpZUNsaWNrZXIiIHRhcmdldD0iX2JsYW5rIj5zdWJyZWRkaXQ8L2E+IG9yIHRoZSA8YSBocmVmPSJodHRwczovL2Nvb2tpZWNsaWNrZXIud2lraWEuY29tL3dpa2kvQ29va2llX0NsaWNrZXJfV2lraSIgdGFyZ2V0PSJfYmxhbmsiPndpa2k8L2E+Ljxicj5OZXdzIGFuZCB0ZWFzZXJzIGFyZSB1c3VhbGx5IHBvc3RlZCBvbiBPcnRlaWxcJ3MgPGEgaHJlZj0iaHR0cHM6Ly9vcnRlaWw0Mi50dW1ibHIuY29tLyIgdGFyZ2V0PSJfYmxhbmsiPnR1bWJscjwvYT4gYW5kIDxhIGhyZWY9Imh0dHBzOi8vdHdpdHRlci5jb20vb3J0ZWlsNDIiIHRhcmdldD0iX2JsYW5rIj50d2l0dGVyPC9hPi4nDQogICAgICA6IGxvYygiVXNlZnVsIGxpbmtzOiAlMSwgJTIsICUzLCAlNC4iLCBbDQogICAgICAgICAgJzxhIGhyZWY9Imh0dHBzOi8vZGlzY29yZGFwcC5jb20vaW52aXRlL2Nvb2tpZSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbEJsYWNrQnV0dG9uIj5EaXNjb3JkPC9hPicsDQogICAgICAgICAgJzxhIGhyZWY9Imh0dHBzOi8vY29va2llY2xpY2tlci53aWtpYS5jb20vd2lraS9Db29raWVfQ2xpY2tlcl9XaWtpIiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImhpZ2hsaWdodEhvdmVyIHNtYWxsQmxhY2tCdXR0b24iPndpa2k8L2E+JywNCiAgICAgICAgICAnPGEgaHJlZj0iaHR0cHM6Ly9vcnRlaWw0Mi50dW1ibHIuY29tLyIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbEJsYWNrQnV0dG9uIj50dW1ibHI8L2E+JywNCiAgICAgICAgICAnPGEgaHJlZj0iaHR0cHM6Ly90d2l0dGVyLmNvbS9vcnRlaWw0MiIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbEJsYWNrQnV0dG9uIj50d2l0dGVyPC9hPicsDQogICAgICAgIF0pKSArDQogICAgIjwvZGl2PiIgKw0KICAgICghQXBwDQogICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIGJsb2NrIiBzdHlsZT0ibWFyZ2luOjhweCAzMnB4O2ZvbnQtc2l6ZToxMXB4O2xpbmUtaGVpZ2h0OjExMCU7Y29sb3I6cmdiYSgyMDAsMjAwLDI1NSwxKTtiYWNrZ3JvdW5kOnJnYmEoMTI4LDEyOCwyNTUsMC4xNSk7IiBpZD0ic3VwcG9ydFNlY3Rpb24iPicgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIlRoaXMgdmVyc2lvbiBvZiBDb29raWUgQ2xpY2tlciBpcyAxMDAlIGZyZWUsIGZvcmV2ZXIuIFdhbnQgdG8gc3VwcG9ydCB1cyBzbyB3ZSBjYW4ga2VlcCBkZXZlbG9waW5nIGdhbWVzPyBIZXJlJ3Mgc29tZSB3YXlzIHlvdSBjYW4gaGVscDolMSIsDQogICAgICAgICAgWw0KICAgICAgICAgICAgKCFBcHANCiAgICAgICAgICAgICAgPyAiPGJyPjxicj4mYnVsbDsgIiArDQogICAgICAgICAgICAgICAgKEVOID8gImdldCAiIDogIiIpICsNCiAgICAgICAgICAgICAgICAnPGEgaHJlZj0iaHR0cHM6Ly9zdG9yZS5zdGVhbXBvd2VyZWQuY29tL2FwcC8xNDU0NDAwL0Nvb2tpZV9DbGlja2VyLyIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbFdoaXRlQnV0dG9uIj5Db29raWUgQ2xpY2tlciBvbiBTdGVhbTwvYT4nDQogICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgIiIgKw0KICAgICAgICAgICAgICAoRU4gPyAiIChpdCdzIGFib3V0IDUgYnVja3MpIiA6ICIiKSArDQogICAgICAgICAgICAgICI8YnI+PGJyPiZidWxsOyAiICsNCiAgICAgICAgICAgICAgKEVOID8gInN1cHBvcnQgdXMgb24gIiA6ICIiKSArDQogICAgICAgICAgICAgICc8YSBocmVmPSJodHRwczovL3d3dy5wYXRyZW9uLmNvbS9kYXNobmV0IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9ImhpZ2hsaWdodEhvdmVyIHNtYWxsT3JhbmdlQnV0dG9uIj5QYXRyZW9uPC9hPicgKw0KICAgICAgICAgICAgICAoRU4gPyAiICh0aGVyZSdzIHBlcmtzISkiIDogIiIpICsNCiAgICAgICAgICAgICAgIjxicj48YnI+JmJ1bGw7ICIgKw0KICAgICAgICAgICAgICAoRU4gPyAiY2hlY2sgb3V0IG91ciAiIDogIiIpICsNCiAgICAgICAgICAgICAgJzxhIGhyZWY9Imh0dHA6Ly93d3cucmVkYnViYmxlLmNvbS9wZW9wbGUvZGFzaG5ldCIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJoaWdobGlnaHRIb3ZlciBzbWFsbFdoaXRlQnV0dG9uIj5TaG9wPC9hPicgKw0KICAgICAgICAgICAgICAoRU4gPyAiIHdpdGggcmFkIGNvb2tpZSBzaGlydHMsIGhvb2RpZXMgYW5kIHN0aWNrZXJzIiA6ICIiKSArDQogICAgICAgICAgICAgICghQXBwICYmIEVODQogICAgICAgICAgICAgICAgPyAiPGJyPjxicj4mYnVsbDsgZGlzYWJsZSB5b3VyIGFkYmxvY2tlciAoaWYgeW91IHdhbnQhKSINCiAgICAgICAgICAgICAgICA6ICIiKSwNCiAgICAgICAgICBdDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+PC9kaXY+Ig0KICAgICAgOiAiIikgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIHdhcm5pbmciPicgKw0KICAgIGxvYygNCiAgICAgICJOb3RlOiBpZiB5b3UgZmluZCBhIG5ldyBidWcgYWZ0ZXIgYW4gdXBkYXRlIGFuZCB5b3UncmUgdXNpbmcgYSAzcmQtcGFydHkgYWRkLW9uLCBtYWtlIHN1cmUgaXQncyBub3QganVzdCB5b3VyIGFkZC1vbiBjYXVzaW5nIGl0ISINCiAgICApICsNCiAgICAiPC9kaXY+IiArDQogICAgKCFBcHANCiAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3Rpbmcgd2FybmluZyI+JyArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiV2FybmluZzogY2xlYXJpbmcgeW91ciBicm93c2VyIGNhY2hlIG9yIGNvb2tpZXMgPHNtYWxsPih3aGF0IGVsc2U/KTwvc21hbGw+IHdpbGwgcmVzdWx0IGluIHlvdXIgc2F2ZSBiZWluZyB3aXBlZC4gRXhwb3J0IHlvdXIgc2F2ZSBhbmQgYmFjayBpdCB1cCBmaXJzdCEiDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICAgOiAiIikgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgIGxvYygiVmVyc2lvbiBoaXN0b3J5IikgKw0KICAgICI8L2Rpdj4iOw0KDQogIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jUGF0Y2hlcy5sZW5ndGg7IGkrKykgew0KICAgIHZhciBwYXRjaCA9IGxvY1BhdGNoZXNbaV07DQogICAgdmFyIHBhdGNoVGV4dCA9DQogICAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUnICsNCiAgICAgIChwYXRjaC50eXBlID09IDIgPyAiIHNtYWxsIiA6ICIiKSArDQogICAgICAnIj4nICsNCiAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+JyArDQogICAgICBwYXRjaC50aXRsZSArDQogICAgICAiPC9kaXY+IjsNCiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgcGF0Y2gucG9pbnRzLmxlbmd0aDsgaWkrKykgew0KICAgICAgcGF0Y2hUZXh0ICs9ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgJyArIHBhdGNoLnBvaW50c1tpaV0gKyAiPC9kaXY+IjsNCiAgICB9DQogICAgR2FtZS51cGRhdGVMb2cgKz0gcGF0Y2hUZXh0Ow0KICB9DQoNCiAgaWYgKCFFTikNCiAgICBHYW1lLnVwZGF0ZUxvZyArPQ0KICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciIHN0eWxlPSJmb250LXdlaWdodDpib2xkO2ZvbnQtc3R5bGU6aXRhbGljO29wYWNpdHk6MC41OyI+JyArDQogICAgICBsb2MoIk5vdGU6IG9sZGVyIHVwZGF0ZSBub3RlcyBhcmUgaW4gRW5nbGlzaC4iKSArDQogICAgICAiPC9kaXY+IjsNCg0KICBHYW1lLnVwZGF0ZUxvZyArPQ0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4zMS8wNS8yMDIyIC0gYSBtaW5kIG9mIGl0cyBvd248L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbmV3IGJ1aWxkaW5nPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyB0aWVyIG9mIHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG11bHRpLWxhbmd1YWdlIHN1cHBvcnQgYWRkZWQgdG8gd2ViIHZlcnNpb248L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgZmV3IG5ldyBoZWF2ZW5seSB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgdGhlIGp1a2Vib3g8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSAzIHNlY3JldCBoZWF2ZW5seSB1cGdyYWRlcyBub3cgcmVseSBvbiBob3cgbWFueSB0aW1lcyB0aGUgcmVsZXZhbnQgZGlnaXQgaXMgcHJlc2VudCBpbiB0b3RhbCwgcmF0aGVyIHRoYW4gYXQgdGhlIGVuZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYmFja2dyb3VuZHMgb3ZlcmhhdWxlZDsgZXh0cmEgb3B0aW9ucyBmb3IgdGhlIGJhY2tncm91bmQgc2VsZWN0b3I8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGV4dHJhIG9wdGlvbnMgZm9yIHRoZSBnb2xkZW4gY29va2llIHNvdW5kIHNlbGVjdG9yPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgYmFuayBtaW5pZ2FtZSBub3cgdGVsbHMgeW91IHRoZSB2YWx1ZSB5b3UgcHJldmlvdXNseSBib3VnaHQgYSBzdG9jayBhdDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGhlIGJhbmsgbWluaWdhbWUgZmxvdyBpcyBhIGxpdHRsZSBtb3JlIGV4Y2l0aW5nPC9kaXY+JyArDQogICAgKEFwcA0KICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBvcHRpb24gdG8gZGlzYWJsZSB5b3VyIGdhbWUgYWN0aXZpdHkgc2hvd2luZyB1cCBpbiBEaXNjb3JkPC9kaXY+Jw0KICAgICAgOiAiIikgKw0KICAgIChBcHANCiAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBsYXVuY2ggZXJyb3JzIG5vdyBwcm92aWRlIHRoZSBvcHRpb24gdG8gcmVzdGFydCB3aXRob3V0IG1vZHM8L2Rpdj4nDQogICAgICA6ICIiKSArDQogICAgKEFwcA0KICAgICAgPyAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjE4LzEyLzIwMjEgLSB3b3JrIGl0PC9kaXY+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgU3RlYW0gV29ya3Nob3Agc3VwcG9ydCAobGV0cyB5b3UgaW5zdGFsbCBtb2RzIGFuZCB1cGxvYWQgeW91ciBvd24pPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgS29yZWFuIGxhbmd1YWdlIHN1cHBvcnQ8L2Rpdj4nICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBiYWNrICJzaG9ydCBudW1iZXJzIiBvcHRpb24gZm9yIG5vbi1lbmdsaXNoIGxhbmd1YWdlcyAodXNlcyBlbmdsaXNoIHRlcm1zIGZvciB0aGUgdGltZSBiZWluZyk8L2Rpdj4nICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCB0b29sdGlwcyBvbiBhY2hpZXZlbWVudCBub3RpZmljYXRpb25zPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgRGlzY29yZCByaWNoIHByZXNlbmNlIHN1cHBvcnQ8L2Rpdj4nDQogICAgICA6ICIiKSArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzA5LzIwMjEgLSBnaXZlIG1lIFN0ZWFtPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBDb29raWUgQ2xpY2tlciBoYXMgYmVlbiA8YSBocmVmPSJodHRwczovL3N0b3JlLnN0ZWFtcG93ZXJlZC5jb20vYXBwLzE0NTQ0MDAvQ29va2llX0NsaWNrZXIvIiB0YXJnZXQ9Il9ibGFuayI+cmVsZWFzZWQgb24gU3RlYW08L2E+IHdpdGggbXVzaWMgYnkgQzQxOCE8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdlYiB2ZXJzaW9uIGFuZCBTdGVhbSB2ZXJzaW9uIHdpbGwgcmVjZWl2ZSB0aGUgc2FtZSB1cGRhdGVzIGZyb20gbm93IG9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB5b3UgY2FuIG5vdyBwbGF5IGluIDEzIGRpZmZlcmVudCBsYW5ndWFnZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBvcHRpb24gdG8gZGlzYWJsZSBzY2FyeSBzdHVmZjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYmFzaWMgc2NyZWVuLXJlYWRlciBzdXBwb3J0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB2YXJpb3VzIG90aGVyIGltcHJvdmVtZW50czwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4wMS8xMS8yMDIwIC0gYWx0ZXJuYXRlIHJlYWxpdHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBidWlsZGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IHVwZ3JhZGUgdGllcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IGFjaGlldmVtZW50IHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBoZWF2ZW5seSB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IG1vZGRpbmcgQVBJPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBuZXcgcmViYWxhbmNpbmcgKGFzY2Vuc2lvbiBzbG90IHByaWNlcywgZmluZ2VyIHVwZ3JhZGVzLi4uKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IGZpeGVzIChsZWFwIHllYXJzLCBnaG9zdCBzd2FwcywgY2FycnlvdmVyIHNlZWRzLi4uKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IHN0dWZmPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjIzLzA4LzIwMjAgLSBtb25leSBtZSwgbW9uZXkgbm93PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmaW5hbGl6ZWQgc3RvY2sgbWFya2V0IG1pbmlnYW1lIGJldGEgYW5kIGFkZGVkIGl0IHRvIGxpdmUgdmVyc2lvbjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZGFyayBtb2RlIGFkZGVkIHRvIHN0b2NrIG1hcmtldCBtaW5pZ2FtZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2FuIG5vIGxvbmdlciBzZWxlY3QgYSBtaWxrIGJlZm9yZSB1bmxvY2tpbmcgaXQ7IG1pbGsgc2VsZWN0b3IgbGF5b3V0IGhhcyBiZWVuIGltcHJvdmVkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzdG9jayBtYXJrZXQgZ29vZHMgaGF2ZSBoaWdoZXIgdmFsdWUgY2FwcyBhbmQgYSBsYXJnZXIgc3ByZWFkOyBjYW4gYWxzbyBzaGlmdC1jbGljayB0aGUgaGlkZSBidXR0b25zIHRvIGhpZGUvc2hvdyBhbGwgb3RoZXIgc3RvY2tzPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjA4LzA4LzIwMjAgLSBjaGVja2luZyBhY2NvdW50IChiZXRhKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3RvY2sgbWFya2V0IGxheW91dCBoYXMgYmVlbiByZXZpc2VkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzZWxsaW5nIHN0b2NrcyBubyBsb25nZXIgaW5jcmVhc2VzIGNvb2tpZXMgYmFrZWQgYWxsIHRpbWU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHN0b2NrIHByaWNlcyBhcmUgbm93IGRlZmluZWQgYnkgeW91ciBoaWdoZXN0IHJhdyBDcFMgdGhpcyBhc2NlbnNpb24gKHdoaWNoIGlzIG5vdyBkaXNwbGF5ZWQgaW4gdGhlIHN0YXRzIHNjcmVlbik8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNhbiBubyBsb25nZXIgYnV5IGFuZCBzZWxsIGEgc3RvY2sgaW4gdGhlIHNhbWUgdGljazwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgd2FyZWhvdXNlIHNwYWNlIG5vdyBnYWlucyArMTAgcGVyIGFzc29jaWF0ZWQgYnVpbGRpbmcgbGV2ZWwgKHVwIGZyb20gKzUpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBiYW5rIGxldmVsIG5vdyBpbXByb3ZlcyBhdmVyYWdlIChhbmQgbWF4aW11bSkgc3RvY2sgdmFsdWVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBsYXRlciBzdG9ja3MgYXJlIHdvcnRoIG1vcmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IENvb2tpZSBDbGlja2VyIHR1cm5zIDchPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjE4LzA2LzIwMjAgLSBtYWtpbmcgYmFuayAoYmV0YSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHRoZSBzdG9jayBtYXJrZXQgbWluaWdhbWUsIGFjY2Vzc2libGUgd2l0aCBsZXZlbCAxIGJhbmtzIG9yIGFib3ZlOyBidXkgbG93LCBzZWxsIGhpZ2ghPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyAobWluaWdhbWUgc3ViamVjdCB0byBoZWF2eSByZWJhbGFuY2luZyBvdmVyIHRoZSBjb21pbmcgcGF0Y2hlcyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgY291cGxlIGhlYXZlbmx5IHVwZ3JhZGVzLCBpbmNsdWRpbmcgb25lIHRoYXQgbGV0cyB5b3UgcGV0IHlvdXIgZHJhZ29uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyB0aWVyIG9mIGJ1aWxkaW5nIHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlaW5kZWVyIGNsaWNrcyBub3cgcHJvcGVybHkgY291bnQgZm9yIHNoaW1tZXJpbmcgdmVpbDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbnVtYmVycyBpbiBzY2llbnRpZmljIG5vdGF0aW9uIHNob3VsZCBkaXNwbGF5IGJldHRlciB3aXRoIFNob3J0IG51bWJlcnMgb2ZmPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZXBsYWNlZCDjg4QgaW4gdGhlIGphdmFzY3JpcHQgY29uc29sZSBidWlsZGluZyBkaXNwbGF5IHdpdGggbW9yZSBhY2N1cmF0ZSDjg4M8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MjgvMDkvMjAxOSAtIGdvaW5nIG9mZi1zY3JpcHQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbmV3IGJ1aWxkaW5nPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBmb3J0dW5lIGNvb2tpZXMgKGEgbmV3IGhlYXZlbmx5IHVwZ3JhZGUpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtb3JlIHVwZ3JhZGVzLCBhY2hpZXZlbWVudHMgZXRjPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB1cGRhdGVkIHRoZSBSdXNzaWFuIGJyZWFkIGNvb2tpZXMgaWNvbiB0byBiZXR0ZXIgcmVmbGVjdCB0aGVpciBjeXJpbGxpYyBvcmlnaW5zPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyA8aSBzdHlsZT0iZm9udC1zdHlsZTppdGFsaWM7Ij5zdGVhbHRoIHVwZGF0ZSA6PC9pPiB0aGUgc3VnYXIgbHVtcCByZWZpbGwgdGltZW91dCAobm90IHN1Z2FyIGx1bXAgZ3Jvd3RoKSBub3cgbm8gbG9uZ2VyIHRpY2tzIGRvd24gd2hpbGUgdGhlIGdhbWUgaXMgY2xvc2VkICh0aGlzIGZpeGVzIGFuIGV4cGxvaXQpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhbHNvIHJlbGVhc2VkIHRoZSBvZmZpY2lhbCBBbmRyb2lkIHZlcnNpb24gb2YgQ29va2llIENsaWNrZXIsIHBsYXlhYmxlIDxhIGhyZWY9Imh0dHBzOi8vcGxheS5nb29nbGUuY29tL3N0b3JlL2FwcHMvZGV0YWlscz9pZD1vcmcuZGFzaG5ldC5jb29raWVjbGlja2VyIiB0YXJnZXQ9Il9ibGFuayI+aGVyZTwvYT4gKGlPUyB2ZXJzaW9uIHdpbGwgY29tZSBsYXRlcik8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDEvMDQvMjAxOSAtIDIuMDE5ICh0aGUgInRoaXMgeWVhciIgdXBkYXRlKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZ2FtZSBoYXMgYmVlbiByZW5hbWVkIHRvICJDb29raWUgQ2xpY2tlciIgdG8gYXZvaWQgY29uZnVzaW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjYW4gbm93IGNsaWNrIHRoZSBiaWcgY29va2llIHRvIGdlbmVyYXRlIGNvb2tpZXMgZm9yIGZyZWU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlbW92ZWQgZmFsbCBkYW1hZ2U8L2Rpdj4nICsNCiAgICAvLyc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZml4ZWQgdmFyaW91cyB0eXBvcyA6IHBsYXllclwncyBuYW1lIGlzIG5vdyBjb3JyZWN0bHkgc3BlbGxlZCBhcyAiW2Jha2VyeU5hbWVdIjwvZGl2PicrDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZW1vdmVkIGFsbCByZWZlcmVuY2VzIHRvIGNvbXB1dGVyLWFuaW1hdGVkIG1vdmllIDxpIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPkhvb2R3aW5rZWQhPC9pPiAoMjAwNSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdlbnQgYmFjayBpbiB0aW1lIGFuZCBpbnZlbnRlZCBjb29raWVzIGFuZCBjb21wdXRlciBtaWNlLCBlbnN1cmluZyBDb29raWUgQ2xpY2tlciB3b3VsZCBvbmUgZGF5IGNvbWUgdG8gZXhpc3Q8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdhbWUgbm93IGZ1bGx5IGNvbXBsaWFudCB3aXRoIEdlbmV2YSBDb252ZW50aW9uczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZHJvcHBlZCBzdXBwb3J0IGZvciBUSS04NCB2ZXJzaW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZWxlYXNlZCBhIGxvdy1yZXMgcmV0cm8gdmVyc2lvbiBvZiB0aGUgZ2FtZSwgcGxheWFibGUgaGVyZSA6IDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2V4cGVyaW1lbnRzL2Nvb2tpZS8iIHRhcmdldD0iX2JsYW5rIj5vcnRlaWwuZGFzaG5ldC5vcmcvZXhwZXJpbWVudHMvY29va2llPC9hPjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdXBkYXRlZCB2ZXJzaW9uIG51bWJlcjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4wNS8wMy8yMDE5IC0gY29va2llcyBmb3IgZGF5czwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgb3ZlciAyMCBuZXcgY29va2llcywgYWxsIHByZXZpb3VzbHkgc3VnZ2VzdGVkIGJ5IG91ciBzdXBwb3J0ZXJzIG9uIDxhIGhyZWY9Imh0dHBzOi8vd3d3LnBhdHJlb24uY29tL2Rhc2huZXQiIHRhcmdldD0iX2JsYW5rIj5QYXRyZW9uPC9hPjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgMiBoZWF2ZW5seSB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGhlIEdvbGRlbiBnb29zZSBlZ2cgbm93IGNvdW50cyBhcyBhIGdvbGRlbiBjb29raWUgdXBncmFkZSBmb3IgUmVzaWR1YWwgbHVjayBwdXJwb3NlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZ29sZGVuIHN1Z2FyIGx1bXBzIG5vdyBlaXRoZXIgZG91YmxlIHlvdXIgY29va2llcywgb3IgZ2l2ZSB5b3UgMjQgaG91cnMgb2YgeW91ciBDcFMsIHdoaWNoZXZlciBpcyBsb3dlc3QgKHByZXZpb3VzbHkgd2FzIGRvdWJsaW5nIGNvb2tpZXMgd2l0aCBubyBjYXApPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgYW1vdW50IG9mIGhlcmFsZHMgaXMgbm93IHNhdmVkIHdpdGggeW91ciBnYW1lLCBhbmQgaXMgdXNlZCB0byBjb21wdXRlIG9mZmxpbmUgQ3BTIHRoZSBuZXh0IHRpbWUgdGhlIGdhbWUgaXMgbG9hZGVkOyBwcmV2aW91c2x5LCBvbiBwYWdlIGxvYWQsIHRoZSBvZmZsaW5lIGNhbGN1bGF0aW9uIGFzc3VtZWQgaGVyYWxkcyB0byBiZSAwPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIHN5c3RlbSB0byBjb3VudGVyYWN0IHRoZSBnYW1lIGZyZWV6aW5nIHVwIChhbmQgbm90IGJha2luZyBjb29raWVzKSBhZnRlciBiZWluZyBpbmFjdGl2ZSBmb3IgYSBsb25nIHdoaWxlIG9uIHNsb3dlciBjb21wdXRlcnM7IGluc3RlYWQsIHRoaXMgd2lsbCBub3cgdHJpZ2dlciBzbGVlcCBtb2RlLCBkdXJpbmcgd2hpY2ggeW91IHN0aWxsIHByb2R1Y2UgY29va2llcyBhcyBpZiB0aGUgZ2FtZSB3YXMgY2xvc2VkOyB0byBlbmFibGUgdGhpcyBmZWF0dXJlLCB1c2UgdGhlICJTbGVlcCBtb2RlIHRpbWVvdXQiIG9wdGlvbiBpbiB0aGUgc2V0dGluZ3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHZhdWx0aW5nIHVwZ3JhZGVzIGlzIG5vdyBkb25lIHdpdGggc2hpZnQtY2xpY2ssIGFzIGN0cmwtY2xpY2sgd2FzIHBvc2luZyBpc3N1ZXMgZm9yIE1hYyBicm93c2VyczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbWFkZSB0b29sdGlwcyBmb3IgYnVpbGRpbmcgQ3BTIGJvb3N0cyBmcm9tIHN5bmVyZ2llcyBob3BlZnVsbHkgY2xlYXJlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZml4ZWQgYW4gZXhwbG9pdCB3aXRoIGdhbWJsZXJcJ3MgZmV2ZXIgZHJlYW0gd29ya2luZyBhY3Jvc3MgZXhwb3J0cyBhbmQgYXNjZW5zaW9uczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2FuIG5vdyBoaWRlIHRvb2x0aXBzIGluIHRoZSBnYXJkZW4gYnkga2VlcGluZyB0aGUgc2hpZnQga2V5IHByZXNzZWQgdG8gbWFrZSBpdCBlYXNpZXIgdG8gc2VlIHdoZXJlIHlvdVwncmUgcGxhbnRpbmc8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZpeGVkIGEgYnVnIHdpdGggZ29sZGVuIGNvb2tpZXMvcmVpbmRlZXIgbm90IGRpc2FwcGVhcmluZyBwcm9wZXJseSBpbiBzb21lIGNpcmN1bXN0YW5jZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBEcmFnb25cJ3MgQ3VydmUgYXVyYSBzaG91bGQgbm93IHByb3Blcmx5IG1ha2Ugc3VnYXIgbHVtcHMgdHdpY2UgYXMgd2VpcmQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBjdHJsIGtleSBzaG91bGQgbGVzcyBvZnRlbiByZWdpc3RlciBpbmNvcnJlY3RseSBhcyBwcmVzc2VkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyBhZCBzbG90IGluIHRoZSB0b3AtcmlnaHQsIGFzIHdoaWxlIG91ciBwbGF5ZXJiYXNlIGlzIHN0cm9uZyBhbmQgc3VwcG9ydGl2ZSBhcyBldmVyLCBvdXIgYWQgcmV2ZW51ZSBzb21ldGltZXMgZmx1Y3R1YXRlcyBiYWRseTsgd2UgbWF5IHJlbW92ZSB0aGUgYWQgYWdhaW4gc2hvdWxkIG91ciBpbmNvbWUgc3RhYmlsaXplPC9kaXY+JyArDQogICAgIjxkaXYgY2xhc3M9XCJsaXN0aW5nXCI+JmJ1bGw7IG1hZGUgYSBmZXcgYWRqdXN0bWVudHMgdG8gbWFrZSB0aGUgZ2FtZSBzb21ld2hhdCBwbGF5YWJsZSBpbiBtb2JpbGUgYnJvd3NlcnM7IGl0J3Mgbm90IHBlcmZlY3QgYW5kIGNhbiBnZXQgYnVnZ3ksIGJ1dCBpdCdzIGZ1bmN0aW9uYWwhICh5b3UgbWF5IG5lZWQgdG8gem9vbSBvdXQgb3Igc2Nyb2xsIGFyb3VuZCB0byB2aWV3IHRoZSBnYW1lIHByb3Blcmx5KTwvZGl2PiIgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3BlYWtpbmcgb2Ygd2hpY2gsIHdlIGFsc28gZ290IHNvbWUgZ29vZCBwcm9ncmVzcyBvbiB0aGUgbW9iaWxlIGFwcCB2ZXJzaW9uIChidWlsdCBmcm9tIHNjcmF0Y2ggZm9yIG1vYmlsZSksIHNvIHN0YXkgdHVuZWQhPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjI1LzEwLzIwMTggLSBmZWVkYmFjayBsb29wPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyBidWlsZGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbGF1bmNoZWQgb3VyIDxhIGhyZWY9Imh0dHBzOi8vd3d3LnBhdHJlb24uY29tL2Rhc2huZXQiIGNsYXNzPSJvcmFuZ2VMaW5rIiB0YXJnZXQ9Il9ibGFuayI+UGF0cmVvbjwvYT4gPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo4MCU7Ij4odGhlIGxpbmsgaXMgb3JhbmdlIHNvIHlvdVwnbGwgbm90aWNlIGl0ISk8L3NwYW4+PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIGJ1bmNoIG9mIG5ldyBoZWF2ZW5seSB1cGdyYWRlcywgb25lIG9mIHdoaWNoIHRpZXMgaW50byBvdXIgUGF0cmVvbiBidXQgYmVuZWZpdHMgZXZlcnlvbmUgKHRoaXMgaXMgc3RpbGwgZXhwZXJpbWVudGFsISk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdoZW4gaG92ZXJpbmcgb3ZlciBncmFuZG1hcywgeW91IGNhbiBub3cgc2VlIHRoZWlyIG5hbWVzIGFuZCBhZ2VzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyAibWFrZSBYIGNvb2tpZXMganVzdCBmcm9tIFkiIHJlcXVpcmVtZW50cyBhcmUgbm93IGhpZ2hlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdHdlYWtlZCB0aGUgcHJpY2VzIG9mIHNvbWUgaGVhdmVubHkgdXBncmFkZXMgdG8gYmV0dGVyIGZpdCB0aGUgY3VycmVudCBjb29raWUgZWNvbm9teSAoaXQgdHVybnMgb3V0IGJpbGxpb25zIG9mIGhlYXZlbmx5IGNoaXBzIGlzIG5vdyB2ZXJ5IGFjaGlldmFibGUpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZyB0b29sdGlwcyBub3cgZGlzcGxheSB3aGF0ICUgb2YgQ3BTIHRoZXkgY29udHJpYnV0ZSB0aHJvdWdoIHN5bmVyZ3kgdXBncmFkZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHF1ZWVuYmVldHMgbm93IGdpdmUgdXAgdG8gNCUgb2YgYmFuaywgZG93biBmcm9tIDYlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhbW9uZyBvdGhlciB0aGluZ3MsIHNlYXNvbiBzd2l0Y2hlcyBub3cgZGlzcGxheSBob3cgbWFueSBzZWFzb25hbCB1cGdyYWRlcyB5b3VcJ3JlIG1pc3NpbmcsIGFuZCBwZXJtYW5lbnQgdXBncmFkZSBzbG90cyBub3cgZGlzcGxheSB0aGUgbmFtZSBvZiB0aGUgc2xvdHRlZCB1cGdyYWRlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzZWFzb24gc3dpdGNoZXMgaGF2ZSByZXdvcmtlZCBwcmljZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNlYXNvbiBzd2l0Y2hlcyBjYW4gbm93IGJlIGNhbmNlbGxlZCBieSBjbGlja2luZyB0aGVtIGFnYWluPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjYW4gbm8gbG9uZ2VyIGFjY2lkZW50YWxseSBjbGljayB3cmlua2xlcnMgdGhyb3VnaCBvdGhlciBlbGVtZW50czwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3VnYXIgZnJlbnp5IG5vdyB0cmlwbGVzIHlvdXIgQ3BTIGZvciBhbiBob3VyIGluc3RlYWQgb2YgZG91YmxpbmcgaXQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoaXMgdGV4dCBpcyBub3cgc2VsZWN0YWJsZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgcHJvZ3Jlc3Mgb24gZHVuZ2VvbnMgbWluaWdhbWUgaXMgc3RpbGwgdmVyeSBtdWNoIG9uZ29pbmc8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDgvMDgvMjAxOCAtIGhleSBub3c8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IENvb2tpZSBDbGlja2VyIHNvbWVob3cgdHVybnMgNSwgZ29pbmcgYWdhaW5zdCBkb2N0b3JzXCcgbW9zdCBvcHRpbWlzdGljIGVzdGltYXRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBuZXcgdGllciBvZiBidWlsZGluZyBhY2hpZXZlbWVudHMsIGFsbCBuYW1lZCBhZnRlciBTbWFzaCBNb3V0aFwncyBjbGFzc2ljIDE5OTkgaGl0ICJBbGwgU3RhciI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbmV3IHRpZXIgb2YgYnVpbGRpbmcgdXBncmFkZXMsIGFsbCBuYW1lZCBhZnRlciBub3RoaW5nIGluIHBhcnRpY3VsYXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IDxiPnRvIG91ciBwbGF5ZXJzIDo8L2I+IHRoYW5rIHlvdSBzbyBtdWNoIGZvciBzdGlja2luZyB3aXRoIHVzIGFsbCB0aG9zZSB5ZWFycyBhbmQgYWxsb3dpbmcgdXMgdG8ga2VlcCBtYWtpbmcgdGhlIGR1bWJlc3QgZ2FtZSBrbm93biB0byBtYW5raW5kPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZXN1bWVkIHdvcmsgb24gdGhlIGR1bmdlb25zIG1pbmlnYW1lPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzA4LzIwMTggLSBidXkgYnV5IGJ1eTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBoZWF2ZW5seSB1cGdyYWRlIHRoYXQgbGV0cyB5b3UgYnV5IGFsbCB5b3VyIHVwZ3JhZGVzIGluc3RhbnRseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBoZWF2ZW5seSB1cGdyYWRlIHRoYXQgbGV0cyB5b3Ugc2VlIHVwZ3JhZGUgdGllcnMgKGZlYXR1cmUgd2FzIHByZXZpb3VzbHkgcmVtb3ZlZCBkdWUgdG8gYmVpbmcgY29uZnVzaW5nKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBuZXcgd3JpbmtsZXItcmVsYXRlZCBoZWF2ZW5seSB1cGdyYWRlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyB1cGdyYWRlIHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgY291cGxlIG5ldyBjb29raWVzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyAiZXh0cmEgYnV0dG9ucyIgc2V0dGluZzsgdHVybmluZyBpdCBvbiBhZGRzIGJ1dHRvbnMgdGhhdCBsZXQgeW91IG1pbmltaXplIGJ1aWxkaW5nczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3ICJsdW1wIGNvbmZpcm1hdGlvbiIgc2V0dGluZzsgdHVybmluZyBpdCBvbiB3aWxsIHNob3cgYSBjb25maXJtYXRpb24gcHJvbXB0IHdoZW4geW91IHNwZW5kIHN1Z2FyIGx1bXBzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZ3Mgbm93IHNlbGwgYmFjayBmb3IgMjUlIG9mIHRoZWlyIGN1cnJlbnQgcHJpY2UgKGRvd24gZnJvbSA1MCUpOyBFYXJ0aCBTaGF0dGVyZXIgbW9kaWZpZWQgYWNjb3JkaW5nbHksIG5vdyBnaXZlcyBiYWNrIDUwJSAoZG93biBmcm9tIDg1JSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZhcm0gc29pbHMgbm93IHVubG9jayBjb3JyZWN0bHkgYmFzZWQgb24gY3VycmVudCBhbW91bnQgb2YgZmFybXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNoZWFwY2FwcyBoYXZlIGEgbmV3IGV4Y2l0aW5nIG5lcmY8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdyaW5rbGVnaWxsIHNwYXducyBhIGJ1bmNoIG1vcmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNhbiBub3cgY3RybC1zaGlmdC1jbGljayBvbiAiSGFydmVzdCBhbGwiIHRvIG9ubHkgaGFydmVzdCBtYXR1cmUsIG5vbi1pbW1vcnRhbCBwbGFudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbmV3IHJhcmUgdHlwZSBvZiBzdWdhciBsdW1wPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjIwLzA0LzIwMTggLSB3ZWVkaW5nIG91dCBzb21lIGJ1Z3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjbG92ZXJzIGFuZCB3cmlua2xlZ2lsbHMgc2hvdWxkIHNwYXduIGEgYml0IG1vcmUgb2Z0ZW48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNyb25lcmljZSBtYXR1cmVzIGEgbG90IHNvb25lcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbWF0dXJlIGVsZGVyd29ydHMgc3RheSBtYXR1cmUgYWZ0ZXIgcmVsb2FkaW5nPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnYXJkZW4gaW50ZXJmYWNlIG9jY3VwaWVzIHNwYWNlIG1vcmUgaW50ZWxsaWdlbnRseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc2VlZCBwcmljZSBkaXNwbGF5cyBzaG91bGQgYmUgYmV0dGVyIGJlaGF2ZWQgd2l0aCBzaG9ydCBudW1iZXJzIGRpc2FibGVkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtaW5pZ2FtZSBhbmltYXRpb25zIGFyZSBub3cgdHVybmVkIG9mZiBpZiB1c2luZyB0aGUgIkZhbmN5IGdyYXBoaWNzIiBvcHRpb24gaXMgZGlzYWJsZWQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IENwUyBhY2hpZXZlbWVudCByZXF1aXJlbWVudHMgd2VyZSBkaWFsZWQgZG93biBhIHdlZSB0YWQ8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MTkvMDQvMjAxOCAtIGdhcmRlbiBwYXRjaDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdXBncmFkZXMgZHJvcHBlZCBieSBnYXJkZW4gcGxhbnRzIG5vdyBzdGF5IHVubG9ja2VkIGZvcmV2ZXIgKGJ1dCBkcm9wIG11Y2ggbW9yZSByYXJlbHkpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnYXJkZW4gc3VnYXIgbHVtcCByZWZpbGwgbm93IGFsc28gbWFrZXMgcGxhbnRzIHNwcmVhZCBhbmQgbXV0YXRlIDMgdGltZXMgbW9yZSBkdXJpbmcgdGhlIGJvbnVzIHRpY2s8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGEgZmV3IG5ldyB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYSBjb3VwbGUgYnVnIGZpeGVzIGFuZCByZXBocmFzaW5nczwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4xOC8wNC8yMDE4IC0geW91ciBnYXJkZW4tdmFyaWV0eSB1cGRhdGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHRoZSBnYXJkZW4sIGEgbWluaWdhbWUgdW5sb2NrZWQgYnkgaGF2aW5nIGF0IGxlYXN0IGxldmVsIDEgZmFybXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgbGl0dGxlIGFycm93IGFuZCBhIGJsaW5reSBsYWJlbCB0byBzaWduYWwgdGhlIGdhbWUgaGFzIHVwZGF0ZWQgc2luY2UgeW91IGxhc3QgcGxheWVkIGl0IChoaSEpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBuZXcgY29va2llcywgbWlsayBmbGF2b3JzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHN1Z2FyIGx1bXBzIGFyZSBub3cgdW5sb2NrZWQgd2hlbmV2ZXIgeW91XCd2ZSBiYWtlZCBhdCBsZWFzdCBhIGJpbGxpb24gY29va2llcywgaW5zdGVhZCBvZiBvbiB5b3VyIGZpcnN0IGFzY2Vuc2lvbjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3VnYXIgbHVtcCB0eXBlIG5vdyBzYXZlcyBjb3JyZWN0bHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG1pbmlnYW1lIHN1Z2FyIGx1bXAgcmVmaWxscyBjYW4gbm93IG9ubHkgYmUgZG9uZSBldmVyeSAxNSBtaW51dGVzICh0aW1lciBzaGFyZWQgYWNyb3NzIGFsbCBtaW5pZ2FtZXMpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBDcFMgYWNoaWV2ZW1lbnRzIG5vdyBoYXZlIHN0ZWVwZXIgcmVxdWlyZW1lbnRzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnb2xkZW4gY29va2llcyBub3cgbGFzdCA1JSBzaG9ydGVyIGZvciBldmVyeSBvdGhlciBnb2xkZW4gY29va2llIG9uIHRoZSBzY3JlZW48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBnYW1lIG5vdyByZW1lbWJlcnMgd2hpY2ggbWluaWdhbWVzIGFyZSBjbG9zZWQgb3Igb3BlbjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBwb3B1cCB0aGF0IHNob3dzIHdoZW4gYSBzZWFzb24gc3RhcnRzIChzbyBwZW9wbGUgd29uXCd0IGJlIHNvIGNvbmZ1c2VkIGFib3V0ICJ0aGUgZ2FtZSBsb29raW5nIHdlaXJkIHRvZGF5Iik8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHBlcm1hbmVudCB1cGdyYWRlIHNsb3RzIG5vdyBzaG93IGEgdG9vbHRpcCBmb3IgdGhlIHNlbGVjdGVkIHVwZ3JhZGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZpbmFsbHkgZml4ZWQgdGhlIHNhdmUgY29ycnVwdGlvbiBidWcsIGhvcGVmdWxseTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNC8wMi8yMDE4IC0gc3VnYXIgY29hdGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgbGluayB0byA8YSBocmVmPSJodHRwczovL2Rpc2NvcmRhcHAuY29tL2ludml0ZS9jb29raWUiIHRhcmdldD0iX2JsYW5rIj5vZmZpY2lhbCBEaXNjb3JkIHNlcnZlcjwvYT48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZlbHQgd2VpcmQgYWJvdXQgcHVzaGluZyBhbiB1cGRhdGUgd2l0aG91dCBjb250ZW50IHNvIDo8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgaGFuZGZ1bCBvZiBuZXcgY29va2llczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgMyBuZXcgaGVhdmVubHkgdXBncmFkZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNob3J0IG51bWJlcnMgc2hvdWxkIG5vdyBiZSBkaXNwbGF5ZWQgdXAgdG8gbm92ZW1ub25hZ2ludGlsbGlvbnM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNvb2tpZSBjaGFpbnMgbm8gbG9uZ2VyIHNwYXduIGZyb20gdGhlIEZvcmNlIHRoZSBIYW5kIG9mIEZhdGUgc3BlbGw8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGJpZ2dlciwgYmV0dGVyIENvb2tpZSBDbGlja2VyIGNvbnRlbnQgY29taW5nIGxhdGVyIHRoaXMgeWVhcjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4wOC8wOC8yMDE3IC0gNCBtb3JlIHllYXJzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBuZXcgYnVpbGRpbmcgOiBDaGFuY2VtYWtlcnM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBtaWxrLCBuZXcga2l0dGVucywgbmV3IGRyYWdvbiBhdXJhLCBuZXcgY29va2llLCBuZXcgdXBncmFkZSB0aWVyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWZmcyBubyBsb25nZXIgYWZmZWN0IG9mZmxpbmUgQ3BTPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBHb2R6YW1va1wncyBodW5nZXIgd2FzIG1hZGUgbGVzcyBwb3RlbnQgKHRoaXMgaXMgYSBuZXJmLCB2ZXJ5IHNvcnJ5KTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZ3JpbW9pcmUgc3BlbGwgY29zdHMgYW5kIG1heGltdW0gbWFnaWMgd29yayBkaWZmZXJlbnRseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgU3BvbnRhbmVvdXMgRWRpZmljZSBoYXMgYmVlbiByZXdvcmtlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2hhbmdlZCB1bmxvY2sgbGV2ZWxzIGFuZCBwcmljZXMgZm9yIHNvbWUgY3Vyc29yIHVwZ3JhZGVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmaXhlZCBidWdneSBwYW50aGVvbiBzbG90cywgaG9wZWZ1bGx5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmaXhlZCAiTGVnYWN5IHN0YXJ0ZWQgYSBsb25nIHdoaWxlIGFnbyIgc2hvd2luZyBhcyAiYSBmZXcgc2Vjb25kcyBhZ28iPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBDb29raWUgQ2xpY2tlciBqdXN0IHR1cm5lZCA0LiBUaGFuayB5b3UgZm9yIHN0aWNraW5nIHdpdGggdXMgdGhpcyBsb25nITwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4xNS8wNy8yMDE3IC0gdGhlIHNwaXJpdHVhbCB1cGRhdGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGltcGxlbWVudGVkIHN1Z2FyIGx1bXBzLCB3aGljaCBzdGFydCBjb2FsZXNjaW5nIGlmIHlvdVwndmUgYXNjZW5kZWQgYXQgbGVhc3Qgb25jZSBhbmQgY2FuIGJlIHVzZWQgYXMgY3VycmVuY3kgZm9yIHNwZWNpYWwgdGhpbmdzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZ3MgY2FuIG5vdyBsZXZlbCB1cCBieSB1c2luZyBzdWdhciBsdW1wcyBpbiB0aGUgbWFpbiBidWlsZGluZ3MgZGlzcGxheSwgcGVybWFuZW50bHkgYm9vc3RpbmcgdGhlaXIgQ3BTPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCB0d28gbmV3IGZlYXR1cmVzIHVubG9ja2VkIGJ5IGxldmVsbGluZyB1cCB0aGVpciBhc3NvY2lhdGVkIGJ1aWxkaW5ncywgVGVtcGxlcyBhbmQgV2l6YXJkIHRvd2VyczsgbW9yZSBidWlsZGluZy1yZWxhdGVkIG1pbmlnYW1lcyB3aWxsIGJlIGltcGxlbWVudGVkIGluIHRoZSBmdXR1cmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFjdGl2ZSBidWZmcyBhcmUgbm93IHNhdmVkPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgYmFja2dyb3VuZCBzZWxlY3RvciB1cGdyYWRlIGlzIG5vdyBmdW5jdGlvbmFsPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgdG9wIG1lbnUgbm8gbG9uZ2VyIHNjcm9sbHMgd2l0aCB0aGUgcmVzdDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGltZXNwYW5zIGFyZSB3cml0dGVuIG5pY2VyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBEcmFnb25mbGlnaHRzIG5vdyB0ZW5kIHRvIHN1cGVyY2VkZSBDbGljayBmcmVuemllcywgeW91IHdpbGwgcmFyZWx5IGhhdmUgYm90aCBhdCB0aGUgc2FtZSB0aW1lPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzb21lIG9sZCBidWdzIHdlcmUgcGhhc2VkIG91dCBhbmQgcmVwbGFjZWQgYnkgbmV3IG9uZXM8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MjQvMDcvMjAxNiAtIGdvbGRlbiBjb29raWVzIG92ZXJoYXVsPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnb2xkZW4gY29va2llcyBhbmQgcmVpbmRlZXIgbm93IGZvbGxvdyBhIG5ldyBzeXN0ZW0gaW52b2x2aW5nIGV4cGxpY2l0bHkgZGVmaW5lZCBidWZmczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYSBidW5jaCBvZiBuZXcgZ29sZGVuIGNvb2tpZSBlZmZlY3RzIGhhdmUgYmVlbiBhZGRlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgQ3BTIGdhaW5zIGZyb20gZWdncyBhcmUgbm93IG11bHRpcGxpY2F0aXZlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzaGlueSB3cmlua2xlcnMgYXJlIG5vdyBzYXZlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgcmVpbmRlZXIgaGF2ZSBiZWVuIHJlYmFsYW5jZWQgZXZlciBzbyBzbGlnaHRseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBuZXcgY29va2llIHVwZ3JhZGUgbmVhciB0aGUgcm9vdCBvZiB0aGUgaGVhdmVubHkgdXBncmFkZSB0cmVlOyB0aGlzIGlzIGludGVuZGVkIHRvIGJvb3N0IGVhcmx5IGFzY2Vuc2lvbnMgYW5kIHNwZWVkIHVwIHRoZSBnYW1lIGFzIGEgd2hvbGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGR1ZSB0byBFVSBsZWdpc2xhdGlvbiwgaW1wbGVtZW50ZWQgYSB3YXJuaW5nIG1lc3NhZ2UgcmVnYXJkaW5nIGJyb3dzZXIgY29va2llczsgZG8gdW5kZXJzdGFuZCB0aGF0IHRoZSBpcm9ueSBpcyBub3QgbG9zdCBvbiB1czwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4wOC8wMi8yMDE2IC0gbGVnYWN5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPkV2ZXJ5dGhpbmcgdGhhdCB3YXMgaW1wbGVtZW50ZWQgZHVyaW5nIHRoZSBhbG1vc3QgMi15ZWFyLWxvbmcgYmV0YSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgbGl2ZSBnYW1lLiBUbyByZWNhcCA6PC9iPjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgMyBuZXcgYnVpbGRpbmdzIDogYmFua3MsIHRlbXBsZXMsIGFuZCB3aXphcmQgdG93ZXJzOyB0aGVzZSBoYXZlIGJlZW4gYWRkZWQgaW4tYmV0d2VlbiBleGlzdGluZyBidWlsZGluZ3MgYW5kIGFzIHN1Y2gsIG1heSBkaXNydXB0IHNvbWUgYnVpbGRpbmctcmVsYXRlZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBhc2NlbnNpb24gc3lzdGVtIGhhcyBiZWVuIHJlZG9uZSBmcm9tIHNjcmF0Y2gsIHdpdGggYSBuZXcgaGVhdmVubHkgdXBncmFkZSB0cmVlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBteXN0ZXJpb3VzIG5ldyBmZWF0dXJlcyBzdWNoIGFzIGFuZ2VsLXBvd2VyZWQgb2ZmbGluZSBwcm9ncmVzc2lvbiwgY2hhbGxlbmdlIHJ1bnMsIGFuZCBhIGNvb2tpZSBkcmFnb248L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNvdW5kcyBoYXZlIGJlZW4gYWRkZWQgKGNhbiBiZSBkaXNhYmxlZCBpbiB0aGUgb3B0aW9ucyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGhlYXBzIG9mIHJlYmFsYW5jaW5nIGFuZCBidWcgZml4ZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGEgY291cGxlIG1vcmUgdXBncmFkZXMgYW5kIGFjaGlldmVtZW50cywgcHJvYmFibHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZyZXNoIG5ldyBvcHRpb25zIHRvIGZ1cnRoZXIgY3VzdG9taXplIHlvdXIgY29va2llLWNsaWNraW5nIGV4cGVyaWVuY2U8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHF1YWxpdHktb2YtbGlmZSBpbXByb3ZlbWVudHMgOiBiZXR0ZXIgYnVsay1idXksIGJldHRlciBzd2l0Y2hlcyBldGM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHNvbWUgPGEgaHJlZj0iaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS8nICsNCiAgICBjaG9vc2UoWw0KICAgICAgIktyenlzenRvZl9BcmNpc3pld3NraSIsDQogICAgICAiRXVzdGFjaHlfU2FuZ3VzemtvIiwNCiAgICAgICJNYXVyeWN5X0hhdWtlIiwNCiAgICAgICJLYXJvbF9UdXJubyIsDQogICAgICAiVGFkZXVzel9LdXRyemViYSIsDQogICAgICAiS2F6aW1pZXJ6X0ZhYnJ5Y3kiLA0KICAgICAgIkZsb3JpYW5fU2l3aWNraSIsDQogICAgXSkgKw0KICAgICciIHRhcmdldD0iX2JsYW5rIj5nZW5lcmFsIHBvbGlzaDwvYT48L2Rpdj4nIC8qIGkgbGlrZWQgdGhpcyBkdW1iIHB1biB0b28gbXVjaCB0byBsZXQgaXQgZ28gdW5ub3RpY2VkICovICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRvbnMgb2Ygb3RoZXIgbGl0dGxlIHRoaW5ncyB3ZSBjYW5cJ3QgZXZlbiByZW1lbWJlciByaWdodCBub3c8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+TWlzcyB0aGUgb2xkIHZlcnNpb24/IFlvdXIgb2xkIHNhdmUgd2FzIGF1dG9tYXRpY2FsbHkgZXhwb3J0ZWQgPGEgaHJlZj0iLy9vcnRlaWwuZGFzaG5ldC5vcmcvY29va2llY2xpY2tlci92MTA0NjYvIiB0YXJnZXQ9Il9ibGFuayI+aGVyZTwvYT4hPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjA1LzAyLzIwMTYgLSBsZWdhY3kgYmV0YSwgbW9yZSBmaXhlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgY2hhbGxlbmdlIG1vZGVzLCB3aGljaCBjYW4gYmUgc2VsZWN0ZWQgd2hlbiBhc2NlbmRpbmcgKG9ubHkgMSBmb3Igbm93IDogIkJvcm4gYWdhaW4iKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2hhbmdlZCB0aGUgd2F5IGJ1bGstYnV5aW5nIGFuZCBidWxrLXNlbGxpbmcgd29ya3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG1vcmUgYnVncyBpcm9uZWQgb3V0PC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAzLzAyLzIwMTYgLSBsZWdhY3kgYmV0YSwgcGFydCBJSUk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyB3YXJuaW5nIj4mYnVsbDsgTm90IGFsbCBidWdzIGhhdmUgYmVlbiBmaXhlZCwgYnV0IGV2ZXJ5dGhpbmcgc2hvdWxkIGJlIG11Y2ggbGVzcyBicm9rZW4uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBBZGRpdGlvbnMnICsNCiAgICAnPGRpdiBzdHlsZT0ib3BhY2l0eTowLjg7bWFyZ2luLWxlZnQ6MTJweDsiPicgKw0KICAgICItYSBmZXcgbW9yZSBhY2hpZXZlbWVudHM8YnI+IiArDQogICAgIi1uZXcgb3B0aW9uIGZvciBuZWF0LCBidXQgc2xvdyBDU1MgZWZmZWN0cyAoZGlzYWJsZWQgYnkgZGVmYXVsdCk8YnI+IiArDQogICAgIi1uZXcgb3B0aW9uIGZvciBhIGxlc3MgZ3JhdGluZyBjb29raWUgc291bmQgKGVuYWJsZWQgYnkgZGVmYXVsdCk8YnI+IiArDQogICAgIi1uZXcgb3B0aW9uIHRvIGJyaW5nIGJhY2sgdGhlIGJveGVzIGFyb3VuZCBpY29ucyBpbiB0aGUgc3RhdHMgc2NyZWVuPGJyPiIgKw0KICAgICItbmV3IGJ1dHRvbnMgZm9yIHNhdmluZyBhbmQgbG9hZGluZyB5b3VyIGdhbWUgdG8gYSB0ZXh0IGZpbGU8YnI+IiArDQogICAgIjwvZGl2PiIgKw0KICAgICI8L2Rpdj4iICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IENoYW5nZXMnICsNCiAgICAnPGRpdiBzdHlsZT0ib3BhY2l0eTowLjg7bWFyZ2luLWxlZnQ6MTJweDsiPicgKw0KICAgICItZWFybHkgZ2FtZSBzaG91bGQgYmUgYSBiaXQgZmFzdGVyIGFuZCB2ZXJ5IGxhdGUgZ2FtZSB3YXMga2luZGx5IGFza2VkIHRvIHRvbmUgaXQgZG93biBhIHRhZDxicj4iICsNCiAgICAiLWRyYWdvbmZsaWdodCBzaG91bGQgYmUgc29tZXdoYXQgbGVzcyByaWRpY3Vsb3VzbHkgb3ZlcnBvd2VyZWQ8YnI+IiArDQogICAgIi1wbGVhc2UgbGV0IG1lIGtub3cgaWYgdGhlIHJlYmFsYW5jaW5nIHdhcyB0b28gaGVhdnkgb3Igbm90IGhlYXZ5IGVub3VnaDxicj4iICsNCiAgICAiLXNhbnRhIGFuZCBlYXN0ZXIgdXBncmFkZXMgbm93IGRlcGVuZCBvbiBTYW50YSBsZXZlbCBhbmQgYW1vdW50IG9mIGVnZ3Mgb3duZWQsIHJlc3BlY3RpdmVseSwgaW5zdGVhZCBvZiBjb3N0aW5nIHNldmVyYWwgbWludXRlcyB3b3J0aCBvZiBDcFM8YnI+IiArDQogICAgIi1jb29raWUgdXBncmFkZXMgbm93IHN0YWNrIG11bHRpcGxpY2F0aXZlbHkgcmF0aGVyIHRoYW4gYWRkaXRpdmVseTxicj4iICsNCiAgICAiLWdvbGRlbiBzd2l0Y2ggbm93IGdpdmVzICs1MCUgQ3BTLCBhbmQgcmVzaWR1YWwgbHVjayBpcyArMTAlIENwUyBwZXIgZ29sZGVuIGNvb2tpZSB1cGdyYWRlICh1cCBmcm9tICsyNSUgYW5kICsxJSwgcmVzcGVjdGl2ZWx5KTxicj4iICsNCiAgICAiLWx1Y2t5IGNvb2tpZXMgYW5kIGNvb2tpZSBjaGFpbiBwYXlvdXRzIGhhdmUgYmVlbiBtb2RpZmllZCBhIGJpdCwgcG9zc2libHkgZm9yIHRoZSBiZXR0ZXIsIHdobyBrbm93cyE8YnI+IiArDQogICAgIi13cmlua2xlcnMgaGFkIHByZXZpb3VzbHkgYmVlbiByZWR1Y2VkIHRvIGEgbWF4aW11bSBvZiA4ICgxMCB3aXRoIGEgaGVhdmVubHkgdXBncmFkZSksIGJ1dCBhcmUgbm93IGJhY2sgdG8gMTAgKDEyIHdpdGggdGhlIHVwZ3JhZGUpPGJyPiIgKw0KICAgIC8qJy1hbGwgYW5pbWF0aW9ucyBhcmUgbm93IGhhbmRsZWQgYnkgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCksIHdoaWNoIHNob3VsZCBob3BlZnVsbHkgaGVscCBtYWtlIHRoZSBnYW1lIGxlc3MgcmVzb3VyY2UtaW50ZW5zaXZlPGJyPicrKi8NCiAgICAiLWFuIGFzY2Vuc2lvbiBub3cgb25seSBjb3VudHMgZm9yIGFjaGlldmVtZW50IHB1cnBvc2VzIGlmIHlvdSBlYXJuZWQgYXQgbGVhc3QgMSBwcmVzdGlnZSBsZXZlbCBmcm9tIGl0PGJyPiIgKw0KICAgICItdGhlIGVtYmxlbWF0aWMgQ29va2llIENsaWNrZXIgZm9udCAoS2F2b29uKSB3YXMgYnVnZ2VkIGluIEZpcmVmb3gsIGFuZCBoYXMgYmVlbiByZXBsYWNlZCB3aXRoIGEgbmV3IGZvbnQgKE1lcnJpd2VhdGhlcik8YnI+IiArDQogICAgIi10aGUgbXlzdGVyaW91cyB3cmlua2x5IGNyZWF0dXJlIGlzIG5vdyBldmVuIHJhcmVyLCBidXQgaGFzIGEgc2hhZG93IGFjaGlldmVtZW50IHRpZWQgdG8gaXQ8YnI+IiArDQogICAgIjwvZGl2PiIgKw0KICAgICI8L2Rpdj4iICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IEZpeGVzJyArDQogICAgJzxkaXYgc3R5bGU9Im9wYWNpdHk6MC44O21hcmdpbi1sZWZ0OjEycHg7Ij4nICsNCiAgICAiLXByZXN0aWdlIG5vdyBncmFudHMgKzElIENwUyBwZXIgbGV2ZWwgYXMgaW50ZW5kZWQsIGluc3RlYWQgb2YgKzEwMCU8YnI+IiArDQogICAgIi1oZWF2ZW5seSBjaGlwcyBzaG91bGQgbm8gbG9uZ2VyIGFkZCB1cCBsaWtlIGNyYXp5IHdoZW4geW91IGFzY2VuZDxicj4iICsNCiAgICAiLXVwZ3JhZGVzIGluIHRoZSBzdG9yZSBzaG91bGQgbm8gbG9uZ2VyIHJhbmRvbWx5IGdvIHVuc29ydGVkPGJyPiIgKw0KICAgICItd2luZG93IGNhbiBiZSByZXNpemVkIHRvIGFueSBzaXplIGFnYWluPGJyPiIgKw0KICAgICctdGhlICJTdGF0cyIgYW5kICJPcHRpb25zIiBidXR0b25zIGhhdmUgYmVlbiBzd2FwcGVkIGFnYWluPGJyPicgKw0KICAgICItdGhlIGdvbGRlbiBjb29raWUgc291bmQgc2hvdWxkIGJlIHNvbWV3aGF0IGNsZWFyZXI8YnI+IiArDQogICAgIi10aGUgYXNjZW5kIHNjcmVlbiBzaG91bGQgYmUgbGVzcyBDUFUtaHVuZ3J5PGJyPiIgKw0KICAgICI8L2Rpdj4iICsNCiAgICAiPC9kaXY+IiArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjIwLzEyLzIwMTUgLSBsZWdhY3kgYmV0YSwgcGFydCBJSTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIHdhcm5pbmciPiZidWxsOyBleGlzdGluZyBiZXRhIHNhdmVzIGhhdmUgYmVlbiB3aXBlZCBkdWUgdG8gZm9ybWF0IGluY29uc2lzdGVuY2llcyBhbmQganVzdCBwbGFpbiBicm9rZW4gYmFsYW5jZTsgeW91XCdsbCBoYXZlIHRvIHN0YXJ0IG92ZXIgZnJvbSBzY3JhdGNoIC0gd2hpY2ggd2lsbCBhbGxvdyB5b3UgdG8gZnVsbHkgZXhwZXJpZW5jZSB0aGUgdXBkYXRlIGFuZCBmaW5kIGFsbCB0aGUgYXdmdWwgbGl0dGxlIGJ1Z3MgdGhhdCBubyBkb3VidCBwbGFndWUgaXQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyB3YXJuaW5nIj4mYnVsbDsgaW1wb3J0aW5nIHlvdXIgc2F2ZSBmcm9tIHRoZSBsaXZlIHZlcnNpb24gaXMgYWxzbyBmaW5lPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB3ZSB0b29rIHNvIGxvbmcgdG8gbWFrZSB0aGlzIHVwZGF0ZSwgQ29va2llIENsaWNrZXIgdHVybmVkIDIgeWVhcnMgb2xkIGluIHRoZSBtZWFudGltZSEgSHVycmF5ITwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgaGVhcHMgb2YgbmV3IHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZpeGVkIGEgd2hvbGUgYnVuY2ggb2YgYnVnczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZGlkIGEgbG90IG9mIHJlYmFsYW5jaW5nPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZXdvcmtlZCBoZWF2ZW5seSBjaGlwcyBhbmQgaGVhdmVubHkgY29va2llcyAoc3RpbGwgZXhwZXJpbWVudGluZywgd2lsbCBwcm9iYWJseSByZWJhbGFuY2UgdGhpbmdzIGZ1cnRoZXIpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB5b3UgbWF5IG5vdyB1bmxvY2sgYSBkcmFnb24gZnJpZW5kPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzd2l0Y2hlcyBhbmQgc2Vhc29uIHRyaWdnZXJzIG5vdyBoYXZlIHRoZWlyIG93biBzdG9yZSBzZWN0aW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjdHJsLXMgYW5kIGN0cmwtbyBub3cgc2F2ZSB0aGUgZ2FtZSBhbmQgb3BlbiB0aGUgaW1wb3J0IG1lbnUsIHJlc3BlY3RpdmVseTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgc29tZSBxdWljayBzb3VuZHMsIGp1c3QgYXMgYSB0ZXN0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhIGNvdXBsZSBtb3JlIG9wdGlvbnM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGV2ZW4gbW9yZSBtaXNjZWxsYW5lb3VzIGNoYW5nZXMgYW5kIGFkZGl0aW9uczwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNS8wOC8yMDE0IC0gbGVnYWN5IGJldGEsIHBhcnQgSTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgMyBuZXcgYnVpbGRpbmdzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBwcmljZSBhbmQgQ3BTIGN1cnZlcyByZXZhbXBlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgQ3BTIGNhbGN1bGF0aW9ucyByZXZhbXBlZDsgY29va2llIHVwZ3JhZGVzIG5vdyBzdGFjayBtdWx0aXBsaWNhdGl2ZWx5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBwcmVzdGlnZSBzeXN0ZW0gcmVkb25lIGZyb20gc2NyYXRjaCwgd2l0aCBhIHdob2xlIG5ldyB1cGdyYWRlIHRyZWU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHNvbWUgPGEgaHJlZj0iaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS8nICsNCiAgICBjaG9vc2UoWw0KICAgICAgIktyenlzenRvZl9BcmNpc3pld3NraSIsDQogICAgICAiRXVzdGFjaHlfU2FuZ3VzemtvIiwNCiAgICAgICJNYXVyeWN5X0hhdWtlIiwNCiAgICAgICJLYXJvbF9UdXJubyIsDQogICAgICAiVGFkZXVzel9LdXRyemViYSIsDQogICAgICAiS2F6aW1pZXJ6X0ZhYnJ5Y3kiLA0KICAgICAgIkZsb3JpYW5fU2l3aWNraSIsDQogICAgXSkgKw0KICAgICciIHRhcmdldD0iX2JsYW5rIj5nZW5lcmFsIHBvbGlzaDwvYT48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRvbnMgb2Ygb3RoZXIgbWlzY2VsbGFuZW91cyBmaXhlcyBhbmQgYWRkaXRpb25zPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBDb29raWUgQ2xpY2tlciBpcyBub3cgMSB5ZWFyIG9sZCEgKFRoYW5rIHlvdSBndXlzIGZvciBhbGwgdGhlIHN1cHBvcnQhKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIHdhcm5pbmciPiZidWxsOyBOb3RlIDogdGhpcyBpcyBhIGJldGE7IHlvdSBhcmUgbGlrZWx5IHRvIGVuY291bnRlciBidWdzIGFuZCBvdmVyc2lnaHRzLiBGZWVsIGZyZWUgdG8gc2VuZCBtZSBmZWVkYmFjayBpZiB5b3UgZmluZCBzb21ldGhpbmcgZmlzaHkhPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjE4LzA1LzIwMTQgLSBiZXR0ZXIgbGF0ZSB0aGFuIGVhc3RlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYnVubmllcyBhbmQgZWdncywgc29tZWhvdzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgcHJvbXB0cyBub3cgaGF2ZSBrZXlib2FyZCBzaG9ydGN1dHMgbGlrZSBzeXN0ZW0gcHJvbXB0cyB3b3VsZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmFtaW5nIHlvdXIgYmFrZXJ5PyB5b3UgYmV0Y2hhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyAiRmFzdCBub3RlcyIgb3B0aW9uIHRvIG1ha2UgYWxsIG5vdGlmaWNhdGlvbnMgY2xvc2UgZmFzdGVyOyBuZXcgYnV0dG9uIHRvIGNsb3NlIGFsbCBub3RpZmljYXRpb25zPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0aGUgZHVuZ2VvbnMgYmV0YSBpcyBub3cgYXZhaWxhYmxlIG9uIDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2Nvb2tpZWNsaWNrZXIvYmV0YWR1bmdlb25zIiB0YXJnZXQ9Il9ibGFuayI+L2JldGFkdW5nZW9uczwvYT48L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDkvMDQvMjAxNCAtIG5pZ2h0bWFyZSBpbiBoZWF2ZW48L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGJyb2tlIGEgdGhpbmc7IGhlYXZlbmx5IGNoaXBzIHdlcmUgY29ycnVwdGVkIGZvciBzb21lIHBlb3BsZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgd2lsbCBwcm9iYWJseSB1cGRhdGUgdG8gL2JldGEgZmlyc3QgaW4gdGhlIGZ1dHVyZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc29ycnkgYWdhaW48L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDkvMDQvMjAxNCAtIHF1YWxpdHkgb2YgbGlmZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IHVwZ3JhZGUgYW5kIGFjaGlldmVtZW50IHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHBvcHVwcyBhbmQgcHJvbXB0cyBhcmUgbXVjaCBuaWNlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdG9vbHRpcHMgb24gYnVpbGRpbmdzIGFyZSBtb3JlIGluZm9ybWF0aXZlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBpbXBsZW1lbnRlZCBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL0ljZWhhd2s3OC9Gcm96ZW5Db29raWVzIiB0YXJnZXQ9Il9ibGFuayI+RnJvemVuIENvb2tpZXM8L2E+IGFkZC1vblwncyBzaG9ydCBudW1iZXIgZm9ybWF0dGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgeW91IGNhbiBub3cgYnV5IDEwIGFuZCBzZWxsIGFsbCBvZiBhIGJ1aWxkaW5nIGF0IGEgdGltZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdG9ucyBvZiBvcHRpbWl6YXRpb25zIGFuZCBzdWJ0bGVyIGNoYW5nZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHlvdSBjYW4gbm93IDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2Nvb2tpZXMyY2FzaC8iIHRhcmdldD0iX2JsYW5rIj5jb252ZXJ0IHlvdXIgY29va2llcyB0byBjYXNoPC9hPiE8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDUvMDQvMjAxNCAtIHBpdHkgdGhlIGZvb2w8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHdyaW5rbGVycyBzaG91bGQgbm93IGJlIHNhdmVkIHNvIHlvdSBkb25cJ3QgaGF2ZSB0byBwb3AgdGhlbSBldmVyeSB0aW1lIHlvdSByZWZyZXNoIHRoZSBnYW1lPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB5b3Ugbm93IHByb3Blcmx5IHdpbiAxIGNvb2tpZSB1cG9uIHJlYWNoaW5nIDEwIGJpbGxpb24gY29va2llcyBhbmQgbWFraW5nIGl0IG9uIHRoZSBsb2NhbCBuZXdzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtaXNjZWxsYW5lb3VzIGZpeGVzIGFuZCB0aW55IGFkZGl0aW9uczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYSBmZXcgdmVyeSBydWRpbWVudGFyeSBtb2QgaG9va3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZSBnYW1lIHNob3VsZCB3b3JrIGFnYWluIGluIE9wZXJhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBkb25cJ3QgZm9yZ2V0IHRvIGNoZWNrIG91dCA8YSBocmVmPSIvL29ydGVpbC5kYXNobmV0Lm9yZy9yYW5kb21nZW4vIiB0YXJnZXQ9Il9ibGFuayI+UmFuZG9tR2VuPC9hPiwgb3VyIGFsbC1wdXJwb3NlIHJhbmRvbSBnZW5lcmF0b3IgbWFrZXIhPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzA0LzIwMTQgLSBmb29saW5nIGFyb3VuZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgaXRcJ3MgYWJvdXQgdGltZSA6IENvb2tpZSBDbGlja2VyIGhhcyB0dXJuZWQgaW50byB0aGUgbXVjaCBtb3JlIHJlYWxpc3RpYyBDb29raWUgQmFrZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNlYXNvbiB0cmlnZ2VycyBhcmUgY2hlYXBlciBhbmQgcHJvcGVybHkgdW5sb2NrIGFnYWluIHdoZW4gdGhleSBydW4gb3V0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZ3Mgc2hvdWxkIHByb3Blcmx5IHVubG9jayAocmVtaW5kZXIgOiBidWlsZGluZyB1bmxvY2tpbmcgaXMgY29tcGxldGVseSBjb3NtZXRpYyBhbmQgZG9lcyBub3QgY2hhbmdlIHRoZSBnYW1lcGxheSk8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MTQvMDIvMjAxNCAtIGxvdmVseSByYWluYm93Y2FseXBzZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IGJ1aWxkaW5nIChpdFwncyBiZWVuIGEgd2hpbGUpLiBNb3JlIHRvIGNvbWUhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB5b3UgY2FuIG5vdyB0cmlnZ2VyIHNlYXNvbmFsIGV2ZW50cyB0byB5b3VyIGhlYXJ0XCdzIGNvbnRlbnQgKHVwZ3JhZGUgdW5sb2NrcyBhdCA1MDAwIGhlYXZlbmx5IGNoaXBzKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbmV3IHVsdHJhLWV4cGVuc2l2ZSBiYXRjaCBvZiBzZWFzb25hbCBjb29raWUgdXBncmFkZXMgeW91XCdsbCBsb3ZlIHRvIGhhdGU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyB0aW1lciBiYXJzIGZvciBnb2xkZW4gY29va2llIGJ1ZmZzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBidWlsZGluZ3MgYXJlIG5vdyBoaWRkZW4gd2hlbiB5b3Ugc3RhcnQgb3V0IGFuZCBhcHBlYXIgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB0ZWNobmljYWwgc3R1ZmYgOiB0aGUgZ2FtZSBpcyBub3cgc2F2ZWQgdGhyb3VnaCBsb2NhbHN0b3JhZ2UgaW5zdGVhZCBvZiBicm93c2VyIGNvb2tpZXMsIHRoZXJlZm9yZSBydWluaW5nIGEgcGVyZmVjdGx5IGdvb2QgcHVuPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjIyLzEyLzIwMTMgLSBtZXJyeSBmaXhtYXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNvbWUgaXNzdWVzIHdpdGggdGhlIGNocmlzdG1hcyB1cGdyYWRlcyBoYXZlIGJlZW4gZml4ZWQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlaW5kZWVyIGNvb2tpZSBkcm9wcyBhcmUgbm93IG1vcmUgY29tbW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZWluZGVlcnMgYXJlIG5vdyByZWluZGVlcjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yMC8xMi8yMDEzIC0gQ2hyaXN0bWFzIGlzIGhlcmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRoZXJlIGlzIG5vdyBhIGZlc3RpdmUgbmV3IGV2b2x2aW5nIHVwZ3JhZGUgaW4gc3RvcmU8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlaW5kZWVyIGFyZSBydW5uaW5nIGFtb2sgKGNhdGNoIHRoZW0gaWYgeW91IGNhbiEpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyBvcHRpb24gdG8gd2FybiB5b3Ugd2hlbiB5b3UgY2xvc2UgdGhlIHdpbmRvdywgc28geW91IGRvblwndCBsb3NlIHlvdXIgdW4tcG9wcGVkIHdyaW5rbGVyczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWxzbyBhZGRlZCBhIHNlcGFyYXRlIG9wdGlvbiBmb3IgZGlzcGxheWluZyBjdXJzb3JzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhbGwgdGhlIEhhbGxvd2VlbiBmZWF0dXJlcyBhcmUgc3RpbGwgdGhlcmUgKGFuZCBoYXZpbmcgdGhlIFNwb29reSBjb29raWVzIGFjaGlldmVtZW50cyBtYWtlcyB0aGUgSGFsbG93ZWVuIGNvb2tpZXMgZHJvcCBtdWNoIG1vcmUgb2Z0ZW4pPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBvaCB5ZWFoLCB3ZSBub3cgaGF2ZSA8YSBocmVmPSJodHRwOi8vd3d3LnJlZGJ1YmJsZS5jb20vcGVvcGxlL2Rhc2huZXQiIHRhcmdldD0iX2JsYW5rIj5Db29raWUgQ2xpY2tlciBzaGlydHMsIHN0aWNrZXJzIGFuZCBob29kaWVzPC9hPiEgKHRoZXlcJ3JlIHJlYWxseSByYWQpPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjI5LzEwLzIwMTMgLSBzcG9va3kgdXBkYXRlPC9kaXY+JyArDQogICAgIjxkaXYgY2xhc3M9XCJsaXN0aW5nXCI+JmJ1bGw7IHRoZSBHcmFuZG1hcG9jYWx5cHNlIG5vdyBzcGF3bnMgd3JpbmtsZXJzLCBoaWRlb3VzIGVsZGVybHkgY3JlYXR1cmVzIHRoYXQgZGFtYWdlIHlvdXIgQ3BTIHdoZW4gdGhleSByZWFjaCB5b3VyIGJpZyBjb29raWUuIFRoYW5rZnVsbHksIHlvdSBjYW4gY2xpY2sgb24gdGhlbSB0byBtYWtlIHRoZW0gZXhwbG9kZSAoeW91J2xsIGV2ZW4gZ2FpbiBiYWNrIHRoZSBjb29raWVzIHRoZXkndmUgc3dhbGxvd2VkIC0gd2l0aCBpbnRlcmVzdCEpLjwvZGl2PiIgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgd3JhdGggY29va2llIG5vdyAyNyUgc3Bvb2tpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNvbWUgb3RoZXIgc3R1ZmY8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHlvdSBzaG91bGQgdG90YWxseSBnbyBjaGVjayBvdXQgPGEgaHJlZj0iaHR0cDovL2NhbmR5Ym94Mi5uZXQvIiB0YXJnZXQ9Il9ibGFuayI+Q2FuZHkgQm94IDI8L2E+LCB0aGUgc2VxdWVsIHRvIHRoZSBnYW1lIHRoYXQgaW5zcGlyZWQgQ29va2llIENsaWNrZXI8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MTUvMTAvMjAxMyAtIGl0XCdzIGEgc2VjcmV0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIG5ldyBoZWF2ZW5seSB1cGdyYWRlIHRoYXQgZ2l2ZXMgeW91IDUlIG9mIHlvdXIgaGVhdmVubHkgY2hpcHMgcG93ZXIgZm9yIDExIGNvb2tpZXMgKGlmIHlvdSBwdXJjaGFzZWQgdGhlIEhlYXZlbmx5IGtleSwgeW91IG1pZ2h0IG5lZWQgdG8gYnV5IGl0IGFnYWluLCBzb3JyeSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjb29raWUgY2hhaW5zIHNob3VsZCBub3cgd29yayBwcm9wZXJseTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4xNS8xMC8yMDEzIC0gcGxheWVyLWZyaWVuZGx5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBoZWF2ZW5seSB1cGdyYWRlcyBhcmUgbm93IHdheSwgd2F5IGNoZWFwZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHRpZXIgNSBidWlsZGluZyB1cGdyYWRlcyBhcmUgNSB0aW1lcyBjaGVhcGVyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjdXJzb3JzIG5vdyBqdXN0IHBsYWluIGRpc2FwcGVhciB3aXRoIEZhbmN5IEdyYXBoaWNzIG9mZiwgSSBtaWdodCBhZGQgYSBwcm9wZXIgb3B0aW9uIHRvIHRvZ2dsZSBvbmx5IHRoZSBjdXJzb3JzIGxhdGVyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB3YXJuaW5nIDogdGhlIENvb2tpZSBNb25zdGVyIGFkZC1vbiBzZWVtcyB0byBiZSBidWdneSB3aXRoIHRoaXMgdXBkYXRlLCB5b3UgbWlnaHQgd2FudCB0byB3YWl0IHVudGlsIGl0cyBwcm9ncmFtbWVyIHVwZGF0ZXMgaXQ8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MTUvMTAvMjAxMyAtIGEgY291cGxlIGZpeGVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBnb2xkZW4gY29va2llcyBzaG91bGQgbm8gbG9uZ2VyIHNwYXduIGVtYmFycmFzc2luZ2x5IG9mdGVuPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBjdXJzb3JzIG5vdyBzdG9wIG1vdmluZyBpZiBGYW5jeSBHcmFwaGljcyBpcyB0dXJuZWQgb2ZmPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjE0LzEwLzIwMTMgLSBnb2luZyBmb3IgdGhlIGdvbGQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjb29raWUgY2hhaW5zIHdvcmsgYSBiaXQgZGlmZmVyZW50bHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjb29raWUgc3Bhd25zIGFyZSBtb3JlIHJhbmRvbTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgQ3BTIGFjaGlldmVtZW50cyBhcmUgbm8gbG9uZ2VyIGFmZmVjdGVkIGJ5IGdvbGRlbiBjb29raWUgZnJlbnppZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJldmlzZWQgY29va2llLWJha2luZyBhY2hpZXZlbWVudCByZXF1aXJlbWVudHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGhlYXZlbmx5IGNoaXBzIG5vdyByZXF1aXJlIHVwZ3JhZGVzIHRvIGZ1bmN0aW9uIGF0IGZ1bGwgY2FwYWNpdHk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIDQgbW9yZSBjb29raWUgdXBncmFkZXMsIHVubG9ja2VkIGFmdGVyIHJlYWNoaW5nIGNlcnRhaW4gYW1vdW50cyBvZiBIZWF2ZW5seSBDaGlwczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgc3BlZWQgYmFraW5nIGFjaGlldmVtZW50cyBub3cgcmVxdWlyZSB5b3UgdG8gaGF2ZSBubyBoZWF2ZW5seSB1cGdyYWRlczsgYXMgc3VjaCwgdGhleSBoYXZlIGJlZW4gcmVzZXQgZm9yIGV2ZXJ5b25lIChhbG9uZyB3aXRoIHRoZSBIYXJkY29yZSBhY2hpZXZlbWVudCkgdG8gYmV0dGVyIG1hdGNoIHRoZWlyIGluaXRpYWxseSBpbnRlbmRlZCBkaWZmaWN1bHR5PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIGdvb2QgcHJvZ3Jlc3Mgb24gdGhlIG1vYmlsZSBwb3J0PC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzEwLzIwMTMgLSBzbW9vdGhpbmcgaXQgb3V0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzb21lIHZpc3VhbCBlZmZlY3RzIGhhdmUgYmVlbiBjb21wbGV0ZWx5IHJld3JpdHRlbiBhbmQgc2hvdWxkIG5vdyBydW4gbW9yZSBzbW9vdGhseSAoYW5kIGJlIGxlc3MgQ1BVLWludGVuc2l2ZSk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyB1cGdyYWRlIHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IG5ldyBtaWxrIHRpZXI8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNvb2tpZSBjaGFpbnMgaGF2ZSBkaWZmZXJlbnQgY2FwcGluZyBtZWNoYW5pY3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFudGltYXR0ZXIgY29uZGVuc2VycyBhcmUgYmFjayB0byB0aGVpciBwcmV2aW91cyBwcmljZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgaGVhdmVubHkgY2hpcHMgbm93IGdpdmUgKzIlIENwUyBhZ2FpbiAodGhleSB3aWxsIGJlIGV4dGVuc2l2ZWx5IHJld29ya2VkIGluIHRoZSBmdXR1cmUpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmYXJtcyBoYXZlIGJlZW4gYnVmZmVkIGEgYml0ICh0byBwb3B1bGFyIGRlbWFuZCk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGR1bmdlb25zIHN0aWxsIG5lZWQgYSBiaXQgbW9yZSB3b3JrIGFuZCB3aWxsIGJlIHJlbGVhc2VkIHNvb24gLSB3ZSB3YW50IHRoZW0gdG8gYmUganVzdCByaWdodCEgKHlvdSBjYW4gdGVzdCBhbiB1bmZpbmlzaGVkIHZlcnNpb24gaW4gPGEgaHJlZj0iLy9vcnRlaWwuZGFzaG5ldC5vcmcvY29va2llY2xpY2tlci9iZXRhZHVuZ2VvbnMvIiB0YXJnZXQ9Il9ibGFuayI+dGhlIGJldGE8L2E+KTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yOC8wOS8yMDEzIC0gZHVuZ2VvbiBiZXRhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBmcm9tIG5vdyBvbiwgYmlnIHVwZGF0ZXMgd2lsbCBjb21lIHRocm91Z2ggYSBiZXRhIHN0YWdlIGZpcnN0ICh5b3UgY2FuIDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2Nvb2tpZWNsaWNrZXIvYmV0YWR1bmdlb25zLyIgdGFyZ2V0PSJfYmxhbmsiPnRyeSBpdCBoZXJlPC9hPik8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGZpcnN0IGR1bmdlb25zISAoeW91IG5lZWQgNTAgZmFjdG9yaWVzIHRvIHVubG9jayB0aGVtISk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNvb2tpZSBjaGFpbnMgY2FuIGJlIGxvbmdlcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYW50aW1hdHRlciBjb25kZW5zZXJzIGFyZSBhIGJpdCBtb3JlIGV4cGVuc2l2ZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgaGVhdmVubHkgY2hpcHMgbm93IG9ubHkgZ2l2ZSArMSUgY3BzIGVhY2ggKHRvIGFjY291bnQgZm9yIGFsbCB0aGUgY29va2llcyBtYWRlIGZyb20gY29uZGVuc2Vycyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGZsYXZvciB0ZXh0IG9uIGFsbCB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4xNS8wOS8yMDEzIC0gYW50aWNvb2tpZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJhbiBvdXQgb2YgcmVndWxhciBtYXR0ZXIgdG8gbWFrZSB5b3VyIGNvb2tpZXM/IFRyeSBvdXIgbmV3IGFudGltYXR0ZXIgY29uZGVuc2VycyE8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlbmFtZWQgSGFyZC1yZXNldCB0byAiV2lwZSBzYXZlIiB0byBhdm9pZCBjb25mdXNpb248L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHJlc2V0IGFjaGlldmVtZW50cyBhcmUgbm93IHJlZ3VsYXIgYWNoaWV2ZW1lbnRzIGFuZCByZXF1aXJlIGNvb2tpZXMgYmFrZWQgYWxsIHRpbWUsIG5vdCBjb29raWVzIGluIGJhbms8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGhlYXZlbmx5IGNoaXBzIGhhdmUgYmVlbiBuZXJmZWQgYSBiaXQgKGFuZCBhcmUgbm93IGF3YXJkZWQgZm9sbG93aW5nIGEgZ2VvbWV0cmljIHByb2dyZXNzaW9uIDogMSB0cmlsbGlvbiBmb3IgdGhlIGZpcnN0LCAyIGZvciB0aGUgc2Vjb25kLCBldGMpOyB0aGUgcHJlc3RpZ2Ugc3lzdGVtIHdpbGwgYmUgZXh0ZW5zaXZlbHkgcmV3b3JrZWQgaW4gYSBmdXR1cmUgdXBkYXRlIChhZnRlciBkdW5nZW9ucyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGdvbGRlbiBjb29raWUgY2xpY2tzIGFyZSBubyBsb25nZXIgcmVzZXQgYnkgc29mdC1yZXNldHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHlvdSBjYW4gbm93IHNlZSBob3cgbG9uZyB5b3VcJ3ZlIGJlZW4gcGxheWluZyBpbiB0aGUgc3RhdHM8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDgvMDkvMjAxMyAtIGV2ZXJsYXN0aW5nIGNvb2tpZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIGEgcHJlc3RpZ2Ugc3lzdGVtIC0gcmVzZXR0aW5nIGdpdmVzIHlvdSBwZXJtYW5lbnQgQ3BTIGJvb3N0cyAodGhlIG1vcmUgY29va2llcyBtYWRlIGJlZm9yZSByZXNldHRpbmcsIHRoZSBiaWdnZXIgdGhlIGJvb3N0ISk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHNhdmUgZm9ybWF0IGhhcyBiZWVuIHNsaWdodGx5IG1vZGlmaWVkIHRvIHRha2UgbGVzcyBzcGFjZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgTGVwcmVjaGF1biBoYXMgYmVlbiBidW1wZWQgdG8gNzc3IGdvbGRlbiBjb29raWVzIGNsaWNrZWQgYW5kIGlzIG5vdyBzaGFkb3c7IEZvcnR1bmUgaXMgdGhlIG5ldyA3NyBnb2xkZW4gY29va2llcyBhY2hpZXZlbWVudDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgY2xpY2tpbmcgZnJlbnp5IGlzIG5vdyB4Nzc3PC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjA0LzA5LzIwMTMgLSBzbWFydGVyIGNvb2tpZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZ29sZGVuIGNvb2tpZXMgb25seSBoYXZlIDIwJSBjaGFuY2Ugb2YgZ2l2aW5nIHRoZSBzYW1lIG91dGNvbWUgdHdpY2UgaW4gYSByb3cgbm93PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIGdvbGRlbiBjb29raWUgdXBncmFkZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYW4gdXBncmFkZSB0aGF0IG1ha2VzIHBsZWRnZXMgbGFzdCB0d2ljZSBhcyBsb25nIChyZXF1aXJlcyBoYXZpbmcgcGxlZGdlZCAxMCB0aW1lcyk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IFF1aW50aWxsaW9uIGZpbmdlcnMgaXMgbm93IHR3aWNlIGFzIGVmZmljaWVudDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgVW5jYW5ueSBjbGlja2VyIHdhcyByZWFsbHkgdG9vIHVucHJlZGljdGFibGU7IGl0IGlzIG5vdyBhIHJlZ3VsYXIgYWNoaWV2ZW1lbnQgYW5kIG5vIGxvbmdlciByZXF1aXJlcyBhIHdvcmxkIHJlY29yZCwganVzdCAqcHJldHR5IGZhc3QqIGNsaWNraW5nPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAyLzA5LzIwMTMgLSBhIGJldHRlciB3YXkgb3V0PC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBFbGRlciBDb3ZlbmFudCBpcyBldmVuIGNoZWFwZXIsIGFuZCByZXZva2luZyBpdCBpcyBjaGVhcGVyIHN0aWxsIChhbHNvIGFkZGVkIGEgbmV3IGFjaGlldmVtZW50IGZvciBnZXR0aW5nIGl0KTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZWFjaCBncmFuZG1hIHVwZ3JhZGUgbm93IHJlcXVpcmVzIDE1IG9mIHRoZSBtYXRjaGluZyBidWlsZGluZzwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGhlIGRyZWFkZWQgYm90dG9tIGN1cnNvciBoYXMgYmVlbiBmaXhlZCB3aXRoIGEgbmV3IGN1cnNvciBkaXNwbGF5IHN0eWxlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhbiBvcHRpb24gZm9yIGZhc3RlciwgY2hlYXBlciBncmFwaGljczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYmFzZTY0IGVuY29kaW5nIGhhcyBiZWVuIHJlZG9uZTsgdGhpcyBtaWdodCBtYWtlIHNhdmluZyBwb3NzaWJsZSBhZ2FpbiBvbiBzb21lIG9sZGVyIGJyb3dzZXJzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBzaGFkb3cgYWNoaWV2ZW1lbnRzIG5vdyBoYXZlIHRoZWlyIG93biBzZWN0aW9uPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByYXNwYmVycnkganVpY2UgaXMgbm93IG5hbWVkIHJhc3BiZXJyeSBtaWxrLCBkZXNwaXRlIHJhc3BiZXJyeSBqdWljZSBiZWluZyBkZWxpY2lvdXMgYW5kIGdvaW5nIHVucXVlc3Rpb25hYmx5IHdlbGwgd2l0aCBjb29raWVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBIT1RGSVggOiBjdXJzb3JzIG5vdyBjbGljazsgZmFuY3kgZ3JhcGhpY3MgYnV0dG9uIHJlbmFtZWQ7IGNvb2tpZXMgYW1vdW50IG5vdyBtb3JlIHZpc2libGUgYWdhaW5zdCBjdXJzb3JzPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjAxLzA5LzIwMTMgLSBzb3J0aW5nIHRoaW5ncyBvdXQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHMgYXJlIHByb3Blcmx5IHNvcnRlZCBpbiB0aGUgc3RhdHMgc2NyZWVuPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIEVsZGVyIENvdmVuYW50IG11Y2ggY2hlYXBlciBhbmQgbGVzcyBoYXJtZnVsPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBpbXBvcnRpbmcgZnJvbSB0aGUgZmlyc3QgdmVyc2lvbiBoYXMgYmVlbiBkaXNhYmxlZCwgYXMgcHJvbWlzZWQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7ICJPbmUgbWluZCIgbm93IGFjdHVhbGx5IGFza3MgeW91IHRvIGNvbmZpcm0gdGhlIHVwZ3JhZGU8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUgc21hbGwiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MzEvMDgvMjAxMyAtIGhvdGZpeGVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIHdheSB0byBwZXJtYW5lbnRseSBzdG9wIHRoZSBncmFuZG1hcG9jYWx5cHNlPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBFbGRlciBQbGVkZ2UgcHJpY2UgaXMgbm93IGNhcHBlZDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgT25lIE1pbmQgYW5kIG90aGVyIGdyYW5kbWEgcmVzZWFyY2ggdXBncmFkZXMgYXJlIG5vdyBhIGxpdHRsZSBtb3JlIHBvd2VyZnVsLCBpZiBub3QgMTAwJSBhY2N1cmF0ZTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgImdvbGRlbiIgY29va2llIG5vdyBhcHBlYXJzIGFnYWluIGR1cmluZyBncmFuZG1hcG9jYWx5cHNlOyBFbGRlciBQbGVkZ2UtcmVsYXRlZCBhY2hpZXZlbWVudHMgYXJlIG5vdyB1bmxvY2thYmxlPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjMxLzA4LzIwMTMgLSB0b28gbWFueSBncmFuZG1hczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgdGhlIGdyYW5kbWFwb2NhbHlwc2UgaXMgYmFjaywgYWxvbmcgd2l0aCBtb3JlIGdyYW5kbWEgdHlwZXM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHNvbWUgdXBncmFkZXMgdGhhdCBib29zdCB5b3VyIGNsaWNraW5nIHBvd2VyIGFuZCBtYWtlIGl0IHNjYWxlIHdpdGggeW91ciBjcHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGNsaWNraW5nIGFjaGlldmVtZW50cyBtYWRlIGhhcmRlcjsgTmV2ZXJjbGljayBpcyBub3cgYSBzaGFkb3cgYWNoaWV2ZW1lbnQ7IFVuY2FubnkgY2xpY2tlciBzaG91bGQgbm93IHRydWx5IGJlIGEgd29ybGQgcmVjb3JkPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjI4LzA4LzIwMTMgLSBvdmVyLWFjaGlldmVyPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBhIGZldyBtb3JlIGFjaGlldmVtZW50czwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgcmV3b3JrZWQgdGhlICJCYWtlIFggY29va2llcyIgYWNoaWV2ZW1lbnRzIHNvIHRoZXkgdGFrZSBsb25nZXIgdG8gYWNoaWV2ZTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNy8wOC8yMDEzIC0gYSBiYWQgaWRlYTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgZHVlIHRvIHBvcHVsYXIgZGVtYW5kLCByZXRpcmVkIDUgYWNoaWV2ZW1lbnRzICh0aGUgInJlc2V0IHlvdXIgZ2FtZSIgYW5kICJjaGVhdCIgb25lcyk7IHRoZXkgY2FuIHN0aWxsIGJlIHVubG9ja2VkLCBidXQgZG8gbm90IGNvdW50IHRvd2FyZCB5b3VyIHRvdGFsIGFueW1vcmUuIERvblwndCB3b3JyeSwgdGhlcmUgd2lsbCBiZSBtYW55IG1vcmUgYWNoaWV2ZW1lbnRzIHNvb24hPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIHNvbWUgYWNoaWV2ZW1lbnRzIGhpZGRlbiBmb3IgYWRkZWQgbXlzdGVyeTwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNy8wOC8yMDEzIC0gYSBzZW5zZSBvZiBhY2hpZXZlbWVudDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgYWNoaWV2ZW1lbnRzIChhbmQgbWlsayk8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGk+KHRoaXMgaXMgYSBiaWcgdXBkYXRlLCBwbGVhc2UgZG9uXCd0IGdldCB0b28gbWFkIGlmIHlvdSBsb3NlIHNvbWUgZGF0YSEpPC9pPjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNi8wOC8yMDEzIC0gbmV3IHVwZ3JhZGUgdGllcjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgc29tZSBtb3JlIHVwZ3JhZGVzIChpbmNsdWRpbmcgYSBjb3VwbGUgZ29sZGVuIGNvb2tpZS1yZWxhdGVkIG9uZXMpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBjbGlja2luZyBzdGF0czwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNi8wOC8yMDEzIC0gbW9yZSB0d2Vha3M8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IHR3ZWFrZWQgYSBjb3VwbGUgY3Vyc29yIHVwZ3JhZGVzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIHRpbWUgbWFjaGluZXMgbGVzcyBwb3dlcmZ1bDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgb2ZmbGluZSBtb2RlIG9wdGlvbjwvZGl2PicgKw0KICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIHVwZGF0ZSBzbWFsbCI+JyArDQogICAgJzxkaXYgY2xhc3M9InRpdGxlIj4yNS8wOC8yMDEzIC0gdHdlYWtzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZWJhbGFuY2VkIHByb2dyZXNzaW9uIGN1cnZlIChtaWQtIGFuZCBlbmQtZ2FtZSBvYmplY3RzIGNvc3QgbW9yZSBhbmQgZ2l2ZSBtb3JlKTwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgc29tZSBtb3JlIGNvb2tpZSB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgQ3BTIGZvciBjdXJzb3JzPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCBzZWxsIGJ1dHRvbjwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbWFkZSBnb2xkZW4gY29va2llIG1vcmUgdXNlZnVsPC9kaXY+JyArDQogICAgJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24gdXBkYXRlIHNtYWxsIj4nICsNCiAgICAnPGRpdiBjbGFzcz0idGl0bGUiPjI0LzA4LzIwMTMgLSBob3RmaXhlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWRkZWQgaW1wb3J0L2V4cG9ydCBmZWF0dXJlLCB3aGljaCBhbHNvIGFsbG93cyB5b3UgdG8gcmV0cmlldmUgYSBzYXZlIGdhbWUgZnJvbSB0aGUgb2xkIHZlcnNpb24gKHdpbGwgYmUgZGlzYWJsZWQgaW4gYSB3ZWVrIHRvIHByZXZlbnQgdG9vIG11Y2ggY2hlYXRpbmcpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyB1cGdyYWRlIHN0b3JlIG5vdyBoYXMgdW5saW1pdGVkIHNsb3RzIChqdXN0IGhvdmVyIG92ZXIgaXQpLCBkdWUgdG8gcG9wdWxhciBkZW1hbmQ8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGFkZGVkIHVwZGF0ZSBsb2c8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MjQvMDgvMjAxMyAtIGJpZyB1cGRhdGUhPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyByZXZhbXBlZCB0aGUgd2hvbGUgZ2FtZSAobmV3IGdyYXBoaWNzLCBuZXcgZ2FtZSBtZWNoYW5pY3MpPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBhZGRlZCB1cGdyYWRlczwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgbXVjaCBzYWZlciBzYXZpbmc8L2Rpdj4nICsNCiAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiB1cGRhdGUiPicgKw0KICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+MDgvMDgvMjAxMyAtIGdhbWUgbGF1bmNoPC9kaXY+JyArDQogICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPiZidWxsOyBtYWRlIDxhIGhyZWY9Imh0dHBzOi8vb3J0ZWlsLmRhc2huZXQub3JnL2V4cGVyaW1lbnRzL2Nvb2tpZS8iIHRhcmdldD0iX2JsYW5rIj50aGUgZ2FtZTwvYT4gaW4gYSBjb3VwbGUgaG91cnMsIGZvciBsYXVnaHM8L2Rpdj4nICsNCiAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+JmJ1bGw7IGtpbmRhIHN0YXJ0aW5nIHRvIHJlZ3JldCBpdDwvZGl2PicgKw0KICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj4mYnVsbDsgYWggd2VsbDwvZGl2PicgKw0KICAgICI8L2Rpdj4iICsNCiAgICAiPC9kaXY+IjsNCg0KICBHYW1lLnJlYWR5ID0gMDsNCg0KICBHYW1lLkxvYWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsNCiAgICAvL2woJ29mZkdhbWVNZXNzYWdlJykuaW5uZXJIVE1MPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjY0cHggMTI4cHg7Ij48ZGl2IGNsYXNzPSJ0aXRsZSI+TG9hZGluZy4uLjwvZGl2PjwvZGl2Pic7DQogICAgR2FtZS5Mb2FkZXIgPSBuZXcgTG9hZGVyKCk7DQogICAgR2FtZS5Mb2FkZXIuZG9tYWluID0gImltZy8iOw0KICAgIGlmICh0eXBlb2YgUFJFTE9BRCAhPT0gInVuZGVmaW5lZCIpIEdhbWUuTG9hZGVyLmxvYWRlZCA9IFBSRUxPQUQoR2FtZS5Jbml0KTsNCiAgICBlbHNlIEdhbWUuTG9hZGVyLmxvYWRlZCA9IGNhbGxiYWNrOw0KICAgIEdhbWUuTG9hZGVyLkxvYWQoWyJmaWxsZXIucG5nIl0pOw0KICB9Ow0KICBHYW1lLkVycm9yRnJhbWUgPSBmdW5jdGlvbiAoKSB7DQogICAgbCgib2ZmR2FtZU1lc3NhZ2UiKS5pbm5lckhUTUwgPQ0KICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIj5Pb3BzLiBXcm9uZyBhZGRyZXNzITwvZGl2PicgKw0KICAgICAgIjxkaXY+SXQgbG9va3MgbGlrZSB5b3UncmUgYWNjZXNzaW5nIENvb2tpZSBDbGlja2VyIGZyb20gYW5vdGhlciBVUkwgdGhhbiB0aGUgb2ZmaWNpYWwgb25lLjxicj4iICsNCiAgICAgICdZb3UgY2FuIDxhIGhyZWY9Ii8vb3J0ZWlsLmRhc2huZXQub3JnL2Nvb2tpZWNsaWNrZXIvIiB0YXJnZXQ9Il9ibGFuayI+cGxheSBDb29raWUgQ2xpY2tlciBvdmVyIGhlcmU8L2E+ITxicj4nICsNCiAgICAgICI8c21hbGw+KElmIGZvciBhbnkgcmVhc29uLCB5b3UgYXJlIHVuYWJsZSB0byBhY2Nlc3MgdGhlIGdhbWUgb24gdGhlIG9mZmljaWFsIFVSTCwgd2UgYXJlIGN1cnJlbnRseSB3b3JraW5nIG9uIGEgc2Vjb25kIGRvbWFpbi4pPC9zbWFsbD48L2Rpdj4iOw0KICB9Ow0KICBHYW1lLnRpbWVkb3V0ID0gZmFsc2U7DQogIEdhbWUuVGltZW91dCA9IGZ1bmN0aW9uICgpIHsNCiAgICBHYW1lLldyaXRlU2F2ZSgpOw0KICAgIEdhbWUua2lsbFNoaW1tZXJzKCk7DQogICAgbCgib2ZmR2FtZU1lc3NhZ2UiKS5pbm5lckhUTUwgPQ0KICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIj4nICsNCiAgICAgIChHYW1lLkhhcygiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIikNCiAgICAgICAgPyBsb2MoIkNvb2tpZSBDbGlja2VyIGlzIGluIHNsZWVwIG1vZGUgYW5kIGdlbmVyYXRpbmcgb2ZmbGluZSBjb29raWVzLiIpDQogICAgICAgIDogbG9jKCJDb29raWUgQ2xpY2tlciBpcyBpbiBzbGVlcCBtb2RlLiIpKSArDQogICAgICAiPC9kaXY+IiArDQogICAgICBsb2MoDQogICAgICAgICIlMSB0byByZXN1bWUgZnJvbSB5b3VyIHNhdmUgZmlsZS4iLA0KICAgICAgICAiPGEgIiArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgJz0iR2FtZS5SZXN1bWUoKTsiPicgKw0KICAgICAgICAgIGxvYygiQ2xpY2sgaGVyZSIpICsNCiAgICAgICAgICAiPC9hPiINCiAgICAgICkgKw0KICAgICAgJzxicj48ZGl2IHN0eWxlPSJmb250LXN0eWxlOml0YWxpYztmb250LXNpemU6NjUlO2xpbmUtaGVpZ2h0OjExMCU7b3BhY2l0eTowLjc1OyI+JyArDQogICAgICBsb2MoDQogICAgICAgICIodGhpcyBoYXBwZW5zIHdoZW4gdG9vIG1hbnkgZnJhbWVzIGFyZSBza2lwcGVkIGF0IG9uY2UsPGJyPnVzdWFsbHkgd2hlbiB0aGUgZ2FtZSBoYXMgYmVlbiBydW5uaW5nIGluIHRoZSBiYWNrZ3JvdW5kIGZvciBhIHdoaWxlKTxicj4oeW91IGNhbiB0dXJuIHRoaXMgZmVhdHVyZSBvZmYgaW4gdGhlIHNldHRpbmdzIG1lbnUpIg0KICAgICAgKSArDQogICAgICAiPC9kaXY+IjsNCiAgICBsKCJvZmZHYW1lTWVzc2FnZVdyYXAiKS5zdHlsZS5kaXNwbGF5ID0gInRhYmxlIjsNCiAgICBHYW1lLnRpbWVkb3V0ID0gdHJ1ZTsNCiAgICBjb25zb2xlLmxvZygNCiAgICAgICJbPT09IEdhbWUgdGltZWQgb3V0IGFuZCBoYXMgYmVlbiBwdXQgaW4gc2xlZXAgbW9kZS4gRGF0YSB3YXMgc2F2ZWQuID09PV0iDQogICAgKTsNCiAgfTsNCiAgR2FtZS5SZXN1bWUgPSBmdW5jdGlvbiAoKSB7DQogICAgbCgib2ZmR2FtZU1lc3NhZ2UiKS5pbm5lckhUTUwgPSAiIjsNCiAgICBsKCJvZmZHYW1lTWVzc2FnZVdyYXAiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgIEdhbWUudGltZWRvdXQgPSBmYWxzZTsNCiAgICBHYW1lLnRpbWUgPSBEYXRlLm5vdygpOw0KICAgIEdhbWUuYWNjdW11bGF0ZWREZWxheSA9IDA7DQogICAgR2FtZS5kZWxheVRpbWVvdXRzID0gMDsNCiAgICBHYW1lLmxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7DQogICAgR2FtZS5Mb29wKCk7DQogICAgR2FtZS5Mb2FkU2F2ZSgpOw0KICAgIGNvbnNvbGUubG9nKCJbPT09IEdhbWUgcmVzdW1lZCEgRGF0YSB3YXMgbG9hZGVkLiA9PT1dIik7DQogIH07DQoNCiAgR2FtZS5Jbml0ID0gZnVuY3Rpb24gKCkgew0KICAgIEdhbWUucmVhZHkgPSAxOw0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCVZBUklBQkxFUyBBTkQgUFJFU0VUUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuVCA9IDA7DQogICAgR2FtZS5kcmF3VCA9IDA7DQogICAgR2FtZS5sb29wVCA9IDA7DQogICAgR2FtZS5mcHMgPSAzMDsNCg0KICAgIEdhbWUuc2Vhc29uID0gR2FtZS5iYXNlU2Vhc29uOw0KDQogICAgR2FtZS5sID0gbCgiZ2FtZSIpOw0KICAgIEdhbWUud3JhcHBlciA9IGwoIndyYXBwZXIiKTsNCiAgICBHYW1lLmJvdW5kcyA9IDA7IC8vcmVjdGFuZ2xlIGRlZmluaW5nIHNjcmVlbiBsaW1pdHMgKHJpZ2h0LGxlZnQsYm90dG9tLHRvcCkgdXBkYXRlZCBldmVyeSBsb2dpYyBmcmFtZQ0KDQogICAgVG9wQmFyT2Zmc2V0ID0gMzI7DQogICAgaWYgKCFBcHApIEdhbWUud3JhcHBlci5jbGFzc0xpc3QuYWRkKCJvbldlYiIpOw0KICAgIGVsc2Ugew0KICAgICAgR2FtZS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoIm9mZldlYiIpOw0KICAgICAgVG9wQmFyT2Zmc2V0ID0gMDsNCiAgICB9DQoNCiAgICBpZiAoR2FtZS5tb2JpbGUgPT0gMSkgew0KICAgICAgR2FtZS53cmFwcGVyLmNsYXNzTmFtZSA9ICJtb2JpbGUiOw0KICAgIH0NCiAgICBHYW1lLmNsaWNrU3RyID0gR2FtZS50b3VjaEV2ZW50cyA/ICJvbnRvdWNoZW5kIiA6ICJvbmNsaWNrIjsNCg0KICAgIGwoInZlcnNpb25OdW1iZXIiKS5pbm5lckhUTUwgPQ0KICAgICAgInYuICIgKw0KICAgICAgR2FtZS52ZXJzaW9uICsNCiAgICAgICghQXBwDQogICAgICAgID8gJzxkaXYgaWQ9Imh0dHBzU3dpdGNoIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2s7YmFja2dyb3VuZDp1cmwoaW1nLycgKw0KICAgICAgICAgIChHYW1lLmh0dHBzID8gImxvY2tPbiIgOiAibG9ja09mZiIpICsNCiAgICAgICAgICAnLnBuZyk7d2lkdGg6MTZweDtoZWlnaHQ6MTZweDtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6NHB4O2xlZnQ6MHB4O21hcmdpbjowcHggLTJweDsiPjwvZGl2PicNCiAgICAgICAgOiAiIikgKw0KICAgICAgKEdhbWUuYmV0YSA/ICcgPHNwYW4gc3R5bGU9ImNvbG9yOiNmZjA7Ij5iZXRhPC9zcGFuPicgOiAiIik7DQoNCiAgICBpZiAoIUFwcCkgew0KICAgICAgaWYgKEdhbWUuYmV0YSkgew0KICAgICAgICB2YXIgbWUgPSBsKCJsaW5rVmVyc2lvbkJldGEiKTsNCiAgICAgICAgbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZSk7DQogICAgICB9IGVsc2UgaWYgKEdhbWUudmVyc2lvbiA9PSAxLjA0NjYpIHsNCiAgICAgICAgdmFyIG1lID0gbCgibGlua1ZlcnNpb25PbGQiKTsNCiAgICAgICAgbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB2YXIgbWUgPSBsKCJsaW5rVmVyc2lvbkxpdmUiKTsNCiAgICAgICAgbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZSk7DQogICAgICB9DQogICAgfQ0KDQogICAgR2FtZS5sYXN0QWN0aXZpdHkgPSBEYXRlLm5vdygpOyAvL3Jlc2V0IG9uIG1vdXNlIG1vdmUsIGtleSBwcmVzcyBvciBjbGljaw0KDQogICAgLy9sYXRlbmN5IGNvbXBlbnNhdG9yIHN0dWZmDQogICAgR2FtZS50aW1lID0gRGF0ZS5ub3coKTsNCiAgICBHYW1lLmFjY3VtdWxhdGVkRGVsYXkgPSAwOw0KICAgIEdhbWUuZGVsYXlUaW1lb3V0cyA9IDA7IC8vaG93IG1hbnkgdGltZXMgd2UndmUgZ29uZSBvdmVyIHRoZSB0aW1lb3V0IGRlbGF5DQogICAgR2FtZS5jYXRjaHVwTG9naWMgPSAwOw0KICAgIEdhbWUuZnBzU3RhcnRUaW1lID0gMDsNCiAgICBHYW1lLmZyYW1lTnVtYmVyID0gMDsNCiAgICBHYW1lLmN1cnJlbnRGcHMgPSBHYW1lLmZwczsNCiAgICBHYW1lLnByZXZpb3VzRnBzID0gR2FtZS5jdXJyZW50RnBzOw0KICAgIEdhbWUuZ2V0RnBzID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5mcmFtZU51bWJlcisrOw0KICAgICAgdmFyIGN1cnJlbnRUaW1lID0gKERhdGUubm93KCkgLSBHYW1lLmZwc1N0YXJ0VGltZSkgLyAxMDAwOw0KICAgICAgdmFyIHJlc3VsdCA9IE1hdGguZmxvb3IoR2FtZS5mcmFtZU51bWJlciAvIGN1cnJlbnRUaW1lKTsNCiAgICAgIGlmIChjdXJyZW50VGltZSA+IDEpIHsNCiAgICAgICAgR2FtZS5mcHNTdGFydFRpbWUgPSBEYXRlLm5vdygpOw0KICAgICAgICBHYW1lLmZyYW1lTnVtYmVyID0gMDsNCiAgICAgIH0NCiAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfTsNCg0KICAgIEdhbWUuY29va2llc0Vhcm5lZCA9IDA7IC8vYWxsIGNvb2tpZXMgZWFybmVkIGR1cmluZyBnYW1lcGxheQ0KICAgIEdhbWUuY29va2llcyA9IDA7IC8vY29va2llcw0KICAgIEdhbWUuY29va2llc2QgPSAwOyAvL2Nvb2tpZXMgZGlzcGxheQ0KICAgIEdhbWUuY29va2llc1BzID0gMTsgLy9jb29raWVzIHBlciBzZWNvbmQgKHRvIHJlY2FsY3VsYXRlIHdpdGggZXZlcnkgbmV3IHB1cmNoYXNlKQ0KICAgIEdhbWUuY29va2llc1BzUmF3ID0gMDsgLy9yYXcgY29va2llcyBwZXIgc2Vjb25kDQogICAgR2FtZS5jb29raWVzUHNSYXdIaWdoZXN0ID0gMDsgLy9oaWdoZXN0IHJhdyBjb29raWVzIHBlciBzZWNvbmQgdGhpcyBhc2NlbnNpb24NCiAgICBHYW1lLmNvb2tpZXNSZXNldCA9IDA7IC8vY29va2llcyBsb3N0IHRvIHJlc2V0dGluZyAodXNlZCB0byBkZXRlcm1pbmUgcHJlc3RpZ2UgYW5kIGhlYXZlbmx5IGNoaXBzKQ0KICAgIEdhbWUuY29va2llQ2xpY2tzID0gMDsgLy8rMSBmb3IgZWFjaCBjbGljayBvbiB0aGUgY29va2llDQogICAgR2FtZS5nb2xkZW5DbGlja3MgPSAwOyAvLysxIGZvciBlYWNoIGdvbGRlbiBjb29raWUgY2xpY2tlZCAoYWxsIHRpbWUpDQogICAgR2FtZS5nb2xkZW5DbGlja3NMb2NhbCA9IDA7IC8vKzEgZm9yIGVhY2ggZ29sZGVuIGNvb2tpZSBjbGlja2VkICh0aGlzIGdhbWUgb25seSkNCiAgICBHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcyA9IDA7IC8vKzEgZm9yIGVhY2ggZ29sZGVuIGNvb2tpZSBtaXNzZWQNCiAgICBHYW1lLmhhbmRtYWRlQ29va2llcyA9IDA7IC8vYWxsIHRoZSBjb29raWVzIG1hZGUgZnJvbSBjbGlja2luZyB0aGUgY29va2llDQogICAgR2FtZS5taWxrUHJvZ3Jlc3MgPSAwOyAvL3lvdSBnYWluIGEgbGl0dGxlIGJpdCBmb3IgZWFjaCBhY2hpZXZlbWVudC4gRWFjaCBpbmNyZW1lbnQgb2YgMSBpcyBhIGRpZmZlcmVudCBtaWxrIGRpc3BsYXllZC4NCiAgICBHYW1lLm1pbGtIID0gR2FtZS5taWxrUHJvZ3Jlc3MgLyAyOyAvL21pbGsgaGVpZ2h0LCBiZXR3ZWVuIDAgYW5kIDEgKGFsdGhvdWdoIHNob3VsZCBuZXZlciBnbyBhYm92ZSAwLjUpDQogICAgR2FtZS5taWxrSGQgPSAwOyAvL21pbGsgaGVpZ2h0IGRpc3BsYXkNCiAgICBHYW1lLm1pbGtUeXBlID0gMDsgLy9jdXN0b20gbWlsaw0KICAgIEdhbWUuYmdUeXBlID0gMDsgLy9jdXN0b20gYmFja2dyb3VuZA0KICAgIEdhbWUuY2hpbWVUeXBlID0gMDsgLy9nb2xkZW4gY29va2llIGNoaW1lDQogICAgR2FtZS5wcmVzdGlnZSA9IDA7IC8vcHJlc3RpZ2UgbGV2ZWwgKHJlY2FsY3VsYXRlZCBkZXBlbmRpbmcgb24gR2FtZS5jb29raWVzUmVzZXQpDQogICAgR2FtZS5oZWF2ZW5seUNoaXBzID0gMDsgLy9oZWF2ZW5seSBjaGlwcyB0aGUgcGxheWVyIGN1cnJlbnRseSBoYXMNCiAgICBHYW1lLmhlYXZlbmx5Q2hpcHNEaXNwbGF5ZWQgPSAwOyAvL3RpY2tzIHVwIG9yIGRvd24gdG8gbWF0Y2ggR2FtZS5oZWF2ZW5seUNoaXBzDQogICAgR2FtZS5oZWF2ZW5seUNoaXBzU3BlbnQgPSAwOyAvL2hlYXZlbmx5IGNoaXBzIHNwZW50IG9uIGNvb2tpZXMsIHVwZ3JhZGVzIGFuZCBzdWNoDQogICAgR2FtZS5oZWF2ZW5seUNvb2tpZXMgPSAwOyAvL2hvdyBtYW55IGNvb2tpZXMgaGF2ZSB3ZSBiYWtlZCBmcm9tIGNoaXBzICh1bnVzZWQpDQogICAgR2FtZS5wZXJtYW5lbnRVcGdyYWRlcyA9IFstMSwgLTEsIC0xLCAtMSwgLTFdOw0KICAgIEdhbWUuYXNjZW5zaW9uTW9kZSA9IDA7IC8vdHlwZSBvZiBjaGFsbGVuZ2UgcnVuIGlmIGFueQ0KICAgIEdhbWUucmVzZXRzID0gMDsgLy9yZXNldCBjb3VudGVyDQogICAgR2FtZS5sdW1wcyA9IC0xOyAvL3N1Z2FyIGx1bXBzDQogICAgR2FtZS5sdW1wc1RvdGFsID0gLTE7IC8vc3VnYXIgbHVtcHMgZWFybmVkIGFjcm9zcyBhbGwgcGxheXRocm91Z2hzICgtMSBtZWFucyB0aGV5IGhhdmVuJ3QgZXZlbiBzdGFydGVkIHlldCkNCiAgICBHYW1lLmx1bXBUID0gRGF0ZS5ub3coKTsgLy90aW1lIHdoZW4gdGhlIGN1cnJlbnQgbHVtcCBzdGFydGVkIGZvcm1pbmcNCiAgICBHYW1lLmx1bXBSZWZpbGwgPSAwOyAvL3RpbWUgbGVmdCBiZWZvcmUgYSBzdWdhciBsdW1wIGNhbiBiZSB1c2VkIGFnYWluIChvbiBtaW5pZ2FtZSByZWZpbGxzIGV0YykgaW4gbG9naWMgZnJhbWVzDQoNCiAgICBHYW1lLm1ha2VTZWVkID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGNoYXJzID0gImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Ii5zcGxpdCgiIik7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykgew0KICAgICAgICBzdHIgKz0gY2hvb3NlKGNoYXJzKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBzdHI7DQogICAgfTsNCiAgICBHYW1lLnNlZWQgPSBHYW1lLm1ha2VTZWVkKCk7IC8vZWFjaCBydW4gaGFzIGl0cyBvd24gc2VlZCwgdXNlZCBmb3IgZGV0ZXJtaW5pc3RpYyByYW5kb20gc3R1ZmYNCg0KICAgIEdhbWUudm9sdW1lID0gNzU7IC8vc291bmQgdm9sdW1lDQogICAgR2FtZS52b2x1bWVNdXNpYyA9IDUwOyAvL211c2ljIHZvbHVtZQ0KDQogICAgR2FtZS5lbGRlcldyYXRoID0gMDsNCiAgICBHYW1lLmVsZGVyV3JhdGhPbGQgPSAwOw0KICAgIEdhbWUuZWxkZXJXcmF0aEQgPSAwOw0KICAgIEdhbWUucGxlZGdlcyA9IDA7DQogICAgR2FtZS5wbGVkZ2VUID0gMDsNCiAgICBHYW1lLnJlc2VhcmNoVCA9IDA7DQogICAgR2FtZS5uZXh0UmVzZWFyY2ggPSAwOw0KICAgIEdhbWUuY29va2llc1N1Y2tlZCA9IDA7IC8vY29va2llcyBzdWNrZWQgYnkgd3JpbmtsZXJzDQogICAgR2FtZS5jcHNTdWNrZWQgPSAwOyAvL3BlcmNlbnQgb2YgQ3BTIGJlaW5nIHN1Y2tlZCBieSB3cmlua2xlcnMNCiAgICBHYW1lLndyaW5rbGVyc1BvcHBlZCA9IDA7DQogICAgR2FtZS5zYW50YUxldmVsID0gMDsNCiAgICBHYW1lLnJlaW5kZWVyQ2xpY2tlZCA9IDA7DQogICAgR2FtZS5zZWFzb25UID0gMDsNCiAgICBHYW1lLnNlYXNvblVzZXMgPSAwOw0KICAgIEdhbWUuZHJhZ29uTGV2ZWwgPSAwOw0KICAgIEdhbWUuZHJhZ29uQXVyYSA9IDA7DQogICAgR2FtZS5kcmFnb25BdXJhMiA9IDA7DQoNCiAgICBHYW1lLmZvcnR1bmVHQyA9IDA7DQogICAgR2FtZS5mb3J0dW5lQ1BTID0gMDsNCg0KICAgIEdhbWUuYmxlbmRNb2Rlc09uID0NCiAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRldGVjdCIpLnN0eWxlLm1peEJsZW5kTW9kZSA9PT0gIiI7DQoNCiAgICBHYW1lLmJnID0gIiI7IC8vYmFja2dyb3VuZCAoZ3JhbmRtYXMgYW5kIHN1Y2gpDQogICAgR2FtZS5iZ0ZhZGUgPSAiIjsgLy9mYWRpbmcgdG8gYmFja2dyb3VuZA0KICAgIEdhbWUuYmdSID0gMDsgLy9yYXRpbyAoMCAtIG5vdCBmYWRlZCwgMSAtIGZ1bGx5IGZhZGVkKQ0KICAgIEdhbWUuYmdSZCA9IDA7IC8vcmF0aW8gZGlzcGxheWVkDQoNCiAgICBHYW1lLndpbmRvd1cgPSB3aW5kb3cuaW5uZXJXaWR0aDsNCiAgICBHYW1lLndpbmRvd0ggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQogICAgR2FtZS5zY2FsZSA9IDE7DQoNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgZnVuY3Rpb24gKGUpIHsNCiAgICAgIEdhbWUucmVzaXplKCk7DQogICAgICBpZiAoQXBwICYmIEFwcC5vblJlc2l6ZSkgQXBwLm9uUmVzaXplKCk7DQogICAgfSk7DQoNCiAgICBHYW1lLnJlc2l6ZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciB3ID0gd2luZG93LmlubmVyV2lkdGg7DQogICAgICB2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodDsNCg0KICAgICAgdmFyIHByZXZXID0gR2FtZS53aW5kb3dXOw0KICAgICAgdmFyIHByZXZIID0gR2FtZS53aW5kb3dIOw0KDQogICAgICB2YXIgc2NhbGUgPSBNYXRoLm1pbih3IC8gTWF0aC5tYXgoODAwLCB3KSwgaCAvIE1hdGgubWF4KDIwMCwgaCkpOw0KICAgICAgR2FtZS53aW5kb3dXID0gTWF0aC5mbG9vcih3IC8gc2NhbGUpOw0KICAgICAgR2FtZS53aW5kb3dIID0gTWF0aC5mbG9vcihoIC8gc2NhbGUpOw0KICAgICAgaWYgKHNjYWxlICE9IDEpIHsNCiAgICAgICAgR2FtZS53cmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9ICJzY2FsZSgiICsgc2NhbGUgKyAiKSI7DQogICAgICAgIEdhbWUud3JhcHBlci5zdHlsZS53aWR0aCA9IEdhbWUud2luZG93VyArICJweCI7DQogICAgICAgIEdhbWUud3JhcHBlci5zdHlsZS5oZWlnaHQgPSBHYW1lLndpbmRvd0ggKyAicHgiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgR2FtZS53cmFwcGVyLnN0eWxlLnJlbW92ZVByb3BlcnR5KCJ0cmFuc2Zvcm0iKTsNCiAgICAgICAgR2FtZS53cmFwcGVyLnN0eWxlLndpZHRoID0gIjEwMCUiOw0KICAgICAgICBHYW1lLndyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOw0KICAgICAgfQ0KICAgICAgR2FtZS5zY2FsZSA9IHNjYWxlOw0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNbaV07DQogICAgICAgIG1lLnRvUmVzaXplID0gdHJ1ZTsNCiAgICAgICAgaWYgKG1lLm1pbmlnYW1lICYmIG1lLm1pbmlnYW1lLm9uUmVzaXplKSBtZS5taW5pZ2FtZS5vblJlc2l6ZSgpOw0KICAgICAgfQ0KDQogICAgICBpZiAoR2FtZS5nZXROZXdUaWNrZXIpIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHByZXZXID49IEdhbWUudGlja2VyVG9vTmFycm93ICYmDQogICAgICAgICAgR2FtZS53aW5kb3dXIDwgR2FtZS50aWNrZXJUb29OYXJyb3cNCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuZ2V0TmV3VGlja2VyKHRydWUpOw0KICAgICAgICBlbHNlIGlmICgNCiAgICAgICAgICBwcmV2VyA8IEdhbWUudGlja2VyVG9vTmFycm93ICYmDQogICAgICAgICAgR2FtZS53aW5kb3dXID49IEdhbWUudGlja2VyVG9vTmFycm93DQogICAgICAgICkNCiAgICAgICAgICBHYW1lLmdldE5ld1RpY2tlcih0cnVlKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUucmVzaXplKCk7DQoNCiAgICBHYW1lLnN0YXJ0RGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOyAvL3doZW4gd2Ugc3RhcnRlZCBwbGF5aW5nDQogICAgR2FtZS5mdWxsRGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOyAvL3doZW4gd2Ugc3RhcnRlZCBwbGF5aW5nIChjYXJyaWVzIG92ZXIgd2l0aCByZXNldHMpDQogICAgR2FtZS5sYXN0RGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOyAvL3doZW4gd2UgbGFzdCBzYXZlZCB0aGUgZ2FtZSAodXNlZCB0byBjb21wdXRlICJjb29raWVzIG1hZGUgc2luY2Ugd2UgY2xvc2VkIHRoZSBnYW1lIiBldGMpDQoNCiAgICBHYW1lLnByZWZzID0gW107DQogICAgR2FtZS5EZWZhdWx0UHJlZnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLnByZWZzLnBhcnRpY2xlcyA9IDE7IC8vcGFydGljbGUgZWZmZWN0cyA6IGZhbGxpbmcgY29va2llcyBldGMNCiAgICAgIEdhbWUucHJlZnMubnVtYmVycyA9IDE7IC8vbnVtYmVycyB0aGF0IHBvcCB1cCB3aGVuIGNsaWNraW5nIHRoZSBjb29raWUNCiAgICAgIEdhbWUucHJlZnMuYXV0b3NhdmUgPSAxOyAvL3NhdmUgdGhlIGdhbWUgZXZlcnkgbWludXRlIG9yIHNvDQogICAgICBHYW1lLnByZWZzLmF1dG91cGRhdGUgPSAxOyAvL3NlbmQgYW4gQUpBWCByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgZXZlcnkgMzAgbWludXRlcyAobm90ZSA6IGlnbm9yZWQpDQogICAgICBHYW1lLnByZWZzLm1pbGsgPSAxOyAvL2Rpc3BsYXkgbWlsaw0KICAgICAgR2FtZS5wcmVmcy5mYW5jeSA9IDE7IC8vQ1NTIHNoYWRvdyBlZmZlY3RzIChtaWdodCBiZSBoZWF2eSBvbiBzb21lIGJyb3dzZXJzKQ0KICAgICAgR2FtZS5wcmVmcy53YXJuID0gMDsgLy93YXJuIGJlZm9yZSBjbG9zaW5nIHRoZSB3aW5kb3cNCiAgICAgIEdhbWUucHJlZnMuY3Vyc29ycyA9IDE7IC8vZGlzcGxheSBjdXJzb3JzDQogICAgICBHYW1lLnByZWZzLmZvY3VzID0gMTsgLy9tYWtlIHRoZSBnYW1lIHJlZnJlc2ggbGVzcyBmcmVxdWVudGx5IHdoZW4gb2ZmLWZvY3VzDQogICAgICBHYW1lLnByZWZzLnBvcHVwcyA9IDA7IC8vdXNlIG9sZC1zdHlsZSBwb3B1cHMgKG5vIGxvbmdlciB1c2VkKQ0KICAgICAgR2FtZS5wcmVmcy5mb3JtYXQgPSAwOyAvL3Nob3J0ZW4gbnVtYmVycw0KICAgICAgR2FtZS5wcmVmcy5ub3RpZnMgPSAwOyAvL25vdGlmaWNhdGlvbnMgZmFkZSBmYXN0ZXINCiAgICAgIEdhbWUucHJlZnMuYW5pbWF0ZSA9IDE7IC8vYW5pbWF0ZSBidWlsZGluZ3MNCiAgICAgIEdhbWUucHJlZnMud29iYmx5ID0gMTsgLy93b2JibHkgY29va2llDQogICAgICBHYW1lLnByZWZzLm1vbm9zcGFjZSA9IDA7IC8vYWx0IG1vbm9zcGFjZSBmb250IGZvciBjb29raWVzDQogICAgICBHYW1lLnByZWZzLmZpbHRlcnMgPSAxOyAvL0NTUyBmaWx0ZXIgZWZmZWN0cyAobWlnaHQgYmUgaGVhdnkgb24gc29tZSBicm93c2VycykNCiAgICAgIEdhbWUucHJlZnMuY29va2llc291bmQgPSAxOyAvL3VzZSBuZXcgY29va2llIGNsaWNrIHNvdW5kDQogICAgICBHYW1lLnByZWZzLmNyYXRlcyA9IDA7IC8vc2hvdyBjcmF0ZXMgYXJvdW5kIGljb25zIGluIHN0YXRzDQogICAgICBHYW1lLnByZWZzLmFsdERyYXcgPSAwOyAvL3VzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgdG8gdXBkYXRlIGRyYXdpbmcgaW5zdGVhZCBvZiBmaXhlZCAzMCBmcHMgc2V0VGltZW91dA0KICAgICAgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9IDE7IC8vaWYgdHJ1ZSwgc2hvdyBhICJIYXZlIHlvdSBiYWNrZWQgdXAgeW91ciBzYXZlPyIgbWVzc2FnZSBvbiBzYXZlIGxvYWQ7IHNldCB0byBmYWxzZSB3aGVuIHNhdmUgaXMgZXhwb3J0ZWQNCiAgICAgIEdhbWUucHJlZnMuZXh0cmFCdXR0b25zID0gMTsgLy9pZiB0cnVlLCBzaG93IE11dGUgYnV0dG9ucyBhbmQgdGhlIGJ1aWxkaW5nIG1hc3RlciBiYXINCiAgICAgIEdhbWUucHJlZnMuYXNrTHVtcHMgPSAwOyAvL2lmIHRydWUsIHNob3cgYSBwcm9tcHQgYmVmb3JlIHNwZW5kaW5nIGx1bXBzDQogICAgICBHYW1lLnByZWZzLmN1c3RvbUdyYW5kbWFzID0gMTsgLy9pZiB0cnVlLCBzaG93IHBhdHJlb24gbmFtZXMgZm9yIGdyYW5kbWFzDQogICAgICBHYW1lLnByZWZzLnRpbWVvdXQgPSAwOyAvL2lmIHRydWUsIGdhbWUgbWF5IHNob3cgcGF1c2Ugc2NyZWVuIHdoZW4gdGltZWQgb3V0DQogICAgICBHYW1lLnByZWZzLmNsb3VkU2F2ZSA9IDE7IC8vaWYgdHJ1ZSBhbmQgb24gU3RlYW0sIHNhdmUgYW5kIGxvYWQgdG8gY2xvdWQNCiAgICAgIEdhbWUucHJlZnMuYmdNdXNpYyA9IDE7IC8vaWYgdHJ1ZSBhbmQgb24gU3RlYW0sIHBsYXkgbXVzaWMgZXZlbiB3aGVuIGdhbWUgaXNuJ3QgZm9jdXNlZA0KICAgICAgR2FtZS5wcmVmcy5ub3RTY2FyeSA9IDA7IC8vaWYgdHJ1ZSwgbWFrZSBzb21lIG9mIHRoZSBzY2FyeSBzdHVmZiBsZXNzIHNjYXJ5ICgiZXllYnJvdyBtb2RlIikNCiAgICAgIEdhbWUucHJlZnMuZnVsbHNjcmVlbiA9IDA7IC8vaWYgdHJ1ZSwgU3RlYW0gZ2FtZSB3aWxsIGJlIGZ1bGxzY3JlZW4NCiAgICAgIEdhbWUucHJlZnMuc2NyZWVucmVhZGVyID0gMDsgLy9pZiB0cnVlLCBhZGQgc29tZSBET00gc3R1ZmYgdG8gZmFjaWxpdGF0ZSBzY3JlZW5yZWFkZXIgaW50ZXJhY3Rpb24gKHJlcXVpcmVzIHJlbG9hZCkNCiAgICAgIEdhbWUucHJlZnMuZGlzY29yZFByZXNlbmNlID0gMTsgLy9pZiB0cnVlIGFuZCBhcHBsaWNhYmxlLCBzaG93IGdhbWUgYWN0aXZpdHkgaW4gRGlzY29yZCBzdGF0dXMNCiAgICB9Ow0KICAgIEdhbWUuRGVmYXVsdFByZWZzKCk7DQoNCiAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgIGlmIChHYW1lLnByZWZzICYmIEdhbWUucHJlZnMud2Fybikgew0KICAgICAgICBpZiAodHlwZW9mIGV2ZW50ID09ICJ1bmRlZmluZWQiKSBldmVudCA9IHdpbmRvdy5ldmVudDsNCiAgICAgICAgaWYgKGV2ZW50KQ0KICAgICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gbG9jKA0KICAgICAgICAgICAgIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjbG9zZSBDb29raWUgQ2xpY2tlcj8iDQogICAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgR2FtZS5Nb2JpbGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUdhbWUubW9iaWxlKSB7DQogICAgICAgIEdhbWUud3JhcHBlci5jbGFzc05hbWUgPSAibW9iaWxlIjsNCiAgICAgICAgR2FtZS5tb2JpbGUgPSAxOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgR2FtZS53cmFwcGVyLmNsYXNzTmFtZSA9ICIiOw0KICAgICAgICBHYW1lLm1vYmlsZSA9IDA7DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUuc2hvd0JhY2t1cFdhcm5pbmcgPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgbG9jKCJCYWNrIHVwIHlvdXIgc2F2ZSEiKSwNCiAgICAgICAgbG9jKA0KICAgICAgICAgICdIZWxsbyBhZ2FpbiEgSnVzdCBhIHJlbWluZGVyIHRoYXQgeW91IG1heSB3YW50IHRvIGJhY2sgdXAgeW91ciBDb29raWUgQ2xpY2tlciBzYXZlIGV2ZXJ5IG9uY2UgaW4gYSB3aGlsZSwganVzdCBpbiBjYXNlLjxicj5UbyBkbyBzbywgZ28gdG8gT3B0aW9ucyBhbmQgaGl0ICJFeHBvcnQgc2F2ZSIgb3IgIlNhdmUgdG8gZmlsZSIhJw0KICAgICAgICApICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGEgc3R5bGU9ImZsb2F0OnJpZ2h0OyIgb25jbGljaz0iR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZz0wOz09Q0xPU0VUSElTKCk9PSI+JyArDQogICAgICAgICAgbG9jKCJEb24ndCBzaG93IHRoaXMgYWdhaW4iKSArDQogICAgICAgICAgIjwvYT4iLA0KICAgICAgICBbMjUsIDddDQogICAgICApOw0KICAgIH07DQoNCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJQkFLRVJZIE5BTUUNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLlJhbmRvbUJha2VyeU5hbWUgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBpZiAoRU4pIHsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAoTWF0aC5yYW5kb20oKSA+IDAuMDUNCiAgICAgICAgICAgID8gY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiTWFnaWMiLA0KICAgICAgICAgICAgICAgICJGYW50YXN0aWMiLA0KICAgICAgICAgICAgICAgICJGYW5jeSIsDQogICAgICAgICAgICAgICAgIlNhc3N5IiwNCiAgICAgICAgICAgICAgICAiU25henp5IiwNCiAgICAgICAgICAgICAgICAiUHJldHR5IiwNCiAgICAgICAgICAgICAgICAiQ3V0ZSIsDQogICAgICAgICAgICAgICAgIlBpcmF0ZSIsDQogICAgICAgICAgICAgICAgIk5pbmphIiwNCiAgICAgICAgICAgICAgICAiWm9tYmllIiwNCiAgICAgICAgICAgICAgICAiUm9ib3QiLA0KICAgICAgICAgICAgICAgICJSYWRpY2FsIiwNCiAgICAgICAgICAgICAgICAiVXJiYW4iLA0KICAgICAgICAgICAgICAgICJDb29sIiwNCiAgICAgICAgICAgICAgICAiSGVsbGEiLA0KICAgICAgICAgICAgICAgICJTd2VldCIsDQogICAgICAgICAgICAgICAgIkF3ZnVsIiwNCiAgICAgICAgICAgICAgICAiRG91YmxlIiwNCiAgICAgICAgICAgICAgICAiVHJpcGxlIiwNCiAgICAgICAgICAgICAgICAiVHVyYm8iLA0KICAgICAgICAgICAgICAgICJUZWNobm8iLA0KICAgICAgICAgICAgICAgICJEaXNjbyIsDQogICAgICAgICAgICAgICAgIkVsZWN0cm8iLA0KICAgICAgICAgICAgICAgICJEYW5jaW5nIiwNCiAgICAgICAgICAgICAgICAiV29uZGVyIiwNCiAgICAgICAgICAgICAgICAiTXV0YW50IiwNCiAgICAgICAgICAgICAgICAiU3BhY2UiLA0KICAgICAgICAgICAgICAgICJTY2llbmNlIiwNCiAgICAgICAgICAgICAgICAiTWVkaWV2YWwiLA0KICAgICAgICAgICAgICAgICJGdXR1cmUiLA0KICAgICAgICAgICAgICAgICJDYXB0YWluIiwNCiAgICAgICAgICAgICAgICAiQmVhcmRlZCIsDQogICAgICAgICAgICAgICAgIkxvdmVseSIsDQogICAgICAgICAgICAgICAgIlRpbnkiLA0KICAgICAgICAgICAgICAgICJCaWciLA0KICAgICAgICAgICAgICAgICJGaXJlIiwNCiAgICAgICAgICAgICAgICAiV2F0ZXIiLA0KICAgICAgICAgICAgICAgICJGcm96ZW4iLA0KICAgICAgICAgICAgICAgICJNZXRhbCIsDQogICAgICAgICAgICAgICAgIlBsYXN0aWMiLA0KICAgICAgICAgICAgICAgICJTb2xpZCIsDQogICAgICAgICAgICAgICAgIkxpcXVpZCIsDQogICAgICAgICAgICAgICAgIk1vbGR5IiwNCiAgICAgICAgICAgICAgICAiU2hpbnkiLA0KICAgICAgICAgICAgICAgICJIYXBweSIsDQogICAgICAgICAgICAgICAgIkhhcHB5IExpdHRsZSIsDQogICAgICAgICAgICAgICAgIlNsaW15IiwNCiAgICAgICAgICAgICAgICAiVGFzdHkiLA0KICAgICAgICAgICAgICAgICJEZWxpY2lvdXMiLA0KICAgICAgICAgICAgICAgICJIdW5ncnkiLA0KICAgICAgICAgICAgICAgICJHcmVlZHkiLA0KICAgICAgICAgICAgICAgICJMZXRoYWwiLA0KICAgICAgICAgICAgICAgICJQcm9mZXNzb3IiLA0KICAgICAgICAgICAgICAgICJEb2N0b3IiLA0KICAgICAgICAgICAgICAgICJQb3dlciIsDQogICAgICAgICAgICAgICAgIkNob2NvbGF0ZSIsDQogICAgICAgICAgICAgICAgIkNydW1ibHkiLA0KICAgICAgICAgICAgICAgICJDaG9rbGl0IiwNCiAgICAgICAgICAgICAgICAiUmlnaHRlb3VzIiwNCiAgICAgICAgICAgICAgICAiR2xvcmlvdXMiLA0KICAgICAgICAgICAgICAgICJNbmVtb25pYyIsDQogICAgICAgICAgICAgICAgIlBzeWNoaWMiLA0KICAgICAgICAgICAgICAgICJGcmVuZXRpYyIsDQogICAgICAgICAgICAgICAgIkhlY3RpYyIsDQogICAgICAgICAgICAgICAgIkNyYXp5IiwNCiAgICAgICAgICAgICAgICAiUm95YWwiLA0KICAgICAgICAgICAgICAgICJFbCIsDQogICAgICAgICAgICAgICAgIlZvbiIsDQogICAgICAgICAgICAgIF0pICsgIiAiDQogICAgICAgICAgICA6ICJNYyIpICsNCiAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgIkNvb2tpZSIsDQogICAgICAgICAgICAiQmlzY3VpdCIsDQogICAgICAgICAgICAiTXVmZmluIiwNCiAgICAgICAgICAgICJTY29uZSIsDQogICAgICAgICAgICAiQ3VwY2FrZSIsDQogICAgICAgICAgICAiUGFuY2FrZSIsDQogICAgICAgICAgICAiQ2hpcCIsDQogICAgICAgICAgICAiU3Byb2NrZXQiLA0KICAgICAgICAgICAgIkdpem1vIiwNCiAgICAgICAgICAgICJQdXBwZXQiLA0KICAgICAgICAgICAgIk1pdHRlbiIsDQogICAgICAgICAgICAiU29jayIsDQogICAgICAgICAgICAiVGVhcG90IiwNCiAgICAgICAgICAgICJNeXN0ZXJ5IiwNCiAgICAgICAgICAgICJCYWtlciIsDQogICAgICAgICAgICAiQ29vayIsDQogICAgICAgICAgICAiR3JhbmRtYSIsDQogICAgICAgICAgICAiQ2xpY2siLA0KICAgICAgICAgICAgIkNsaWNrZXIiLA0KICAgICAgICAgICAgIlNwYWNlc2hpcCIsDQogICAgICAgICAgICAiRmFjdG9yeSIsDQogICAgICAgICAgICAiUG9ydGFsIiwNCiAgICAgICAgICAgICJNYWNoaW5lIiwNCiAgICAgICAgICAgICJFeHBlcmltZW50IiwNCiAgICAgICAgICAgICJNb25zdGVyIiwNCiAgICAgICAgICAgICJQYW5pYyIsDQogICAgICAgICAgICAiQnVyZ2xhciIsDQogICAgICAgICAgICAiQmFuZGl0IiwNCiAgICAgICAgICAgICJCb290eSIsDQogICAgICAgICAgICAiUG90YXRvIiwNCiAgICAgICAgICAgICJQaXp6YSIsDQogICAgICAgICAgICAiQnVyZ2VyIiwNCiAgICAgICAgICAgICJTYXVzYWdlIiwNCiAgICAgICAgICAgICJNZWF0YmFsbCIsDQogICAgICAgICAgICAiU3BhZ2hldHRpIiwNCiAgICAgICAgICAgICJNYWNhcm9uaSIsDQogICAgICAgICAgICAiS2l0dGVuIiwNCiAgICAgICAgICAgICJQdXBweSIsDQogICAgICAgICAgICAiR2lyYWZmZSIsDQogICAgICAgICAgICAiWmVicmEiLA0KICAgICAgICAgICAgIlBhcnJvdCIsDQogICAgICAgICAgICAiRG9scGhpbiIsDQogICAgICAgICAgICAiRHVja2xpbmciLA0KICAgICAgICAgICAgIlNsb3RoIiwNCiAgICAgICAgICAgICJUdXJ0bGUiLA0KICAgICAgICAgICAgIkdvYmxpbiIsDQogICAgICAgICAgICAiUGl4aWUiLA0KICAgICAgICAgICAgIkdub21lIiwNCiAgICAgICAgICAgICJDb21wdXRlciIsDQogICAgICAgICAgICAiUGlyYXRlIiwNCiAgICAgICAgICAgICJOaW5qYSIsDQogICAgICAgICAgICAiWm9tYmllIiwNCiAgICAgICAgICAgICJSb2JvdCIsDQogICAgICAgICAgXSkNCiAgICAgICAgKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICgNCiAgICAgICAgICBsb2NTdHJpbmdzWyJiYWtlcnkgcmFuZG9tIG5hbWUsIDFzdCBoYWxmIl0gJiYNCiAgICAgICAgICBsb2NTdHJpbmdzWyJiYWtlcnkgcmFuZG9tIG5hbWUsIDJuZCBoYWxmIl0NCiAgICAgICAgKQ0KICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgY2hvb3NlKGxvYygiYmFrZXJ5IHJhbmRvbSBuYW1lLCAxc3QgaGFsZiIpKSArDQogICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgY2hvb3NlKGxvYygiYmFrZXJ5IHJhbmRvbSBuYW1lLCAybmQgaGFsZiIpKTsNCiAgICAgICAgZWxzZSBzdHIgKz0gY2hvb3NlKGxvYygiYmFrZXJ5IHJhbmRvbSBuYW1lIikpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHN0cjsNCiAgICB9Ow0KICAgIEdhbWUuR2V0QmFrZXJ5TmFtZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLlJhbmRvbUJha2VyeU5hbWUoKTsNCiAgICB9Ow0KICAgIEdhbWUuYmFrZXJ5TmFtZUwgPSBsKCJiYWtlcnlOYW1lIik7DQogICAgR2FtZS5iYWtlcnlOYW1lU2V0ID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIHZhciBleHAgPSBuZXcgUmVnRXhwKCJbXidcXC1fMC05IFxccHtMfV0iLCAiZ3UiKTsNCiAgICAgICAgR2FtZS5iYWtlcnlOYW1lID0gd2hhdC5yZXBsYWNlKGV4cCwgIiAiKTsNCiAgICAgICAgLy9HYW1lLmJha2VyeU5hbWU9d2hhdC5yZXBsYWNlKC9bXidcLV8wLTkgXHB7TH1dL2d1LCcgJyk7DQogICAgICAgIEdhbWUuYmFrZXJ5TmFtZSA9IEdhbWUuYmFrZXJ5TmFtZS50cmltKCkuc3Vic3RyaW5nKDAsIDI4KTsNCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgdmFyIGV4cCA9IG5ldyBSZWdFeHAoIlcrIiwgImciKTsNCiAgICAgICAgR2FtZS5iYWtlcnlOYW1lID0gd2hhdC5yZXBsYWNlKGV4cCwgIiAiKTsNCiAgICAgICAgLy9HYW1lLmJha2VyeU5hbWU9d2hhdC5yZXBsYWNlKC9cVysvZywnICcpOw0KICAgICAgICBHYW1lLmJha2VyeU5hbWUgPSBHYW1lLmJha2VyeU5hbWUuc3Vic3RyaW5nKDAsIDI4KTsNCiAgICAgIH0NCiAgICAgIEdhbWUuYmFrZXJ5TmFtZVJlZnJlc2goKTsNCiAgICAgIGlmIChHYW1lLmJha2VyeU5hbWUgPT0gIlJFU1RPUkUgQkFDS1VQIiAmJiBBcHAgJiYgQXBwLnJlc3RvcmVCYWNrdXApDQogICAgICAgIEFwcC5yZXN0b3JlQmFja3VwKCk7DQogICAgfTsNCiAgICBHYW1lLmJha2VyeU5hbWVSZWZyZXNoID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG5hbWUgPSBHYW1lLmJha2VyeU5hbWU7DQogICAgICBpZiAoRU4pIHsNCiAgICAgICAgaWYgKG5hbWUuc2xpY2UoLTEpLnRvTG93ZXJDYXNlKCkgPT0gInMiKSBuYW1lICs9ICInIGJha2VyeSI7DQogICAgICAgIGVsc2UgbmFtZSArPSAiJ3MgYmFrZXJ5IjsNCiAgICAgIH0gZWxzZSBuYW1lID0gbG9jKCIlMSdzIGJha2VyeSIsIG5hbWUpOw0KICAgICAgR2FtZS5iYWtlcnlOYW1lTC50ZXh0Q29udGVudCA9IG5hbWU7DQogICAgICBuYW1lID0gR2FtZS5iYWtlcnlOYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgICBpZiAobmFtZSA9PSAib3J0ZWlsIikgR2FtZS5XaW4oIkdvZCBjb21wbGV4Iik7DQogICAgICBpZiAoDQogICAgICAgICFBcHAgJiYNCiAgICAgICAgbmFtZS5pbmRleE9mKCJzYXlzb3BlbnNlc2FtZSIsIG5hbWUubGVuZ3RoIC0gInNheXNvcGVuc2VzYW1lIi5sZW5ndGgpID4NCiAgICAgICAgICAwICYmDQogICAgICAgICFHYW1lLnNlc2FtZQ0KICAgICAgKQ0KICAgICAgICBHYW1lLk9wZW5TZXNhbWUoKTsNCiAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgfTsNCiAgICBHYW1lLmJha2VyeU5hbWVQcm9tcHQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgR2FtZS5Qcm9tcHQoDQogICAgICAgICI8aWQgTmFtZUJha2VyeT48aDM+IiArDQogICAgICAgICAgbG9jKCJOYW1lIHlvdXIgYmFrZXJ5IikgKw0KICAgICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgICBsb2MoIldoYXQgc2hvdWxkIHlvdXIgYmFrZXJ5J3MgbmFtZSBiZT8iKSArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9ImJsb2NrIj48aW5wdXQgdHlwZT0idGV4dCIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO3dpZHRoOjEwMCU7IiBpZD0iYmFrZXJ5TmFtZUlucHV0IiB2YWx1ZT0iJyArDQogICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAnIi8+PC9kaXY+JywNCiAgICAgICAgWw0KICAgICAgICAgIFsNCiAgICAgICAgICAgIGxvYygiQ29uZmlybSIpLA0KICAgICAgICAgICAgImlmIChsKCdiYWtlcnlOYW1lSW5wdXQnKS52YWx1ZS5sZW5ndGg+MCkge0dhbWUuYmFrZXJ5TmFtZVNldChsKCdiYWtlcnlOYW1lSW5wdXQnKS52YWx1ZSk7R2FtZS5XaW4oJ1doYXRcXCdzIGluIGEgbmFtZScpO0dhbWUuQ2xvc2VQcm9tcHQoKTt9IiwNCiAgICAgICAgICBdLA0KICAgICAgICAgIFtsb2MoIlJhbmRvbSIpLCAiR2FtZS5iYWtlcnlOYW1lUHJvbXB0UmFuZG9tKCk7Il0sDQogICAgICAgICAgbG9jKCJDYW5jZWwiKSwNCiAgICAgICAgXQ0KICAgICAgKTsNCiAgICAgIGwoImJha2VyeU5hbWVJbnB1dCIpLmZvY3VzKCk7DQogICAgICBsKCJiYWtlcnlOYW1lSW5wdXQiKS5zZWxlY3QoKTsNCiAgICB9Ow0KICAgIEdhbWUuYmFrZXJ5TmFtZVByb21wdFJhbmRvbSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGwoImJha2VyeU5hbWVJbnB1dCIpLnZhbHVlID0gR2FtZS5SYW5kb21CYWtlcnlOYW1lKCk7DQogICAgfTsNCiAgICBBZGRFdmVudChHYW1lLmJha2VyeU5hbWVMLCAiY2xpY2siLCBHYW1lLmJha2VyeU5hbWVQcm9tcHQpOw0KDQogICAgR2FtZS5iYWtlcnlOYW1lU2V0KEdhbWUuR2V0QmFrZXJ5TmFtZSgpKTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlUT09MVElQDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgR2FtZS50b29sdGlwID0gew0KICAgICAgdGV4dDogIiIsDQogICAgICB4OiAwLA0KICAgICAgeTogMCwNCiAgICAgIG9yaWdpbjogIiIsDQogICAgICBvbjogMCwNCiAgICAgIHR0OiBsKCJ0b29sdGlwIiksDQogICAgICB0dGE6IGwoInRvb2x0aXBBbmNob3IiKSwNCiAgICAgIHNob3VsZEhpZGU6IDEsDQogICAgICBkeW5hbWljOiAwLA0KICAgICAgZnJvbTogMCwNCiAgICB9Ow0KICAgIEdhbWUudG9vbHRpcC5kcmF3ID0gZnVuY3Rpb24gKGZyb20sIHRleHQsIG9yaWdpbikgew0KICAgICAgdGhpcy5zaG91bGRIaWRlID0gMDsNCiAgICAgIHRoaXMudGV4dCA9IHRleHQ7DQogICAgICB0aGlzLmZyb20gPSBmcm9tOw0KICAgICAgLy90aGlzLng9eDsNCiAgICAgIC8vdGhpcy55PXk7DQogICAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjsNCiAgICAgIHZhciB0dCA9IHRoaXMudHQ7DQogICAgICB2YXIgdHRhID0gdGhpcy50dGE7DQogICAgICB0dC5zdHlsZS5sZWZ0ID0gImF1dG8iOw0KICAgICAgdHQuc3R5bGUudG9wID0gImF1dG8iOw0KICAgICAgdHQuc3R5bGUucmlnaHQgPSAiYXV0byI7DQogICAgICB0dC5zdHlsZS5ib3R0b20gPSAiYXV0byI7DQogICAgICBpZiAodHlwZW9mIHRoaXMudGV4dCA9PT0gImZ1bmN0aW9uIikgew0KICAgICAgICB2YXIgdGV4dCA9IHRoaXMudGV4dCgpOw0KICAgICAgICBpZiAodGV4dCA9PSAiIikgdHRhLnN0eWxlLm9wYWNpdHkgPSAiMCI7DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIHR0LmlubmVySFRNTCA9IHVuZXNjYXBlKHRleHQpOw0KICAgICAgICAgIHR0YS5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICB9DQogICAgICB9IGVsc2UgdHQuaW5uZXJIVE1MID0gdW5lc2NhcGUodGhpcy50ZXh0KTsNCiAgICAgIC8vdHQuaW5uZXJIVE1MPSh0eXBlb2YgdGhpcy50ZXh0PT09J2Z1bmN0aW9uJyk/dW5lc2NhcGUodGhpcy50ZXh0KCkpOnVuZXNjYXBlKHRoaXMudGV4dCk7DQogICAgICB0dGEuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB0dGEuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOw0KICAgICAgR2FtZS50b29sdGlwLnVwZGF0ZSgpOw0KICAgICAgdHRhLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQogICAgICB0aGlzLm9uID0gMTsNCiAgICB9Ow0KICAgIEdhbWUudG9vbHRpcC51cGRhdGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgWCA9IDA7DQogICAgICB2YXIgWSA9IDA7DQogICAgICB2YXIgd2lkdGggPSB0aGlzLnR0Lm9mZnNldFdpZHRoOw0KICAgICAgdmFyIGhlaWdodCA9IHRoaXMudHQub2Zmc2V0SGVpZ2h0Ow0KICAgICAgaWYgKHRoaXMub3JpZ2luID09ICJzdG9yZSIpIHsNCiAgICAgICAgWCA9IEdhbWUud2luZG93VyAtIDMzMiAtIHdpZHRoOw0KICAgICAgICBZID0gR2FtZS5tb3VzZVkgLSAzMjsNCiAgICAgICAgaWYgKEdhbWUub25DcmF0ZSkgWSA9IEdhbWUub25DcmF0ZS5nZXRCb3VuZHMoKS50b3AgLSA0MjsNCiAgICAgICAgWSA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93SCAtIGhlaWdodCAtIDQ0LCBZKSk7DQogICAgICAgIC8qdGhpcy50dGEuc3R5bGUucmlnaHQ9JzMwOHB4JzsvLyc0NjhweCc7DQoJCQkJdGhpcy50dGEuc3R5bGUubGVmdD0nYXV0byc7DQoJCQkJaWYgKEdhbWUub25DcmF0ZSkgWT1HYW1lLm9uQ3JhdGUuZ2V0Qm91bmRzKCkudG9wLTI7DQoJCQkJdGhpcy50dGEuc3R5bGUudG9wPU1hdGgubWF4KDAsTWF0aC5taW4oR2FtZS53aW5kb3dILXRoaXMudHQuY2xpZW50SGVpZ2h0LTY0LFktNDgpKSsncHgnOyovDQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoR2FtZS5vbkNyYXRlKSB7DQogICAgICAgICAgdmFyIHJlY3QgPSBHYW1lLm9uQ3JhdGUuZ2V0Qm91bmRzKCk7DQogICAgICAgICAgaWYgKHJlY3QubGVmdCA9PSAwICYmIHJlY3QudG9wID09IDApIHsNCiAgICAgICAgICAgIC8vaWYgd2UgZ2V0IHRoYXQgYnVnIHdoZXJlIHdlIGdldCBzdHVjayBpbiB0aGUgdG9wLWxlZnQsIG1vdmUgdG8gdGhlIG1vdXNlIChSRVZJU0lPTiA6IGp1c3QgZG8gbm90aGluZykNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLypyZWN0LmxlZnQ9R2FtZS5tb3VzZVgtMjQ7cmVjdC5yaWdodD1HYW1lLm1vdXNlWCsyNDtyZWN0LnRvcD1HYW1lLm1vdXNlWS0yNDtyZWN0LmJvdHRvbT1HYW1lLm1vdXNlWSsyNDsqLw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5vcmlnaW4gPT0gImxlZnQiKSB7DQogICAgICAgICAgICBYID0gcmVjdC5sZWZ0IC0gd2lkdGggLSAxNjsNCiAgICAgICAgICAgIFkgPSByZWN0LnRvcCArIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSAvIDIgLSBoZWlnaHQgLyAyIC0gMzg7DQogICAgICAgICAgICBZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dIIC0gaGVpZ2h0IC0gMTksIFkpKTsNCiAgICAgICAgICAgIGlmIChYIDwgMCkgWCA9IHJlY3QucmlnaHQ7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIFggPSByZWN0LmxlZnQgKyAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgLyAyIC0gd2lkdGggLyAyIC0gODsNCiAgICAgICAgICAgIFkgPSByZWN0LnRvcCAtIGhlaWdodCAtIFRvcEJhck9mZnNldCAtIDE2Ow0KICAgICAgICAgICAgWCA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93VyAtIHdpZHRoIC0gMTYsIFgpKTsNCiAgICAgICAgICAgIGlmIChZIDwgMCkgWSA9IHJlY3QuYm90dG9tIC0gVG9wQmFyT2Zmc2V0Ow0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9yaWdpbiA9PSAiYm90dG9tLXJpZ2h0Iikgew0KICAgICAgICAgIFggPSBHYW1lLm1vdXNlWCArIDg7DQogICAgICAgICAgWSA9IEdhbWUubW91c2VZIC0gMzI7DQogICAgICAgICAgWCA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93VyAtIHdpZHRoIC0gMTYsIFgpKTsNCiAgICAgICAgICBZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dIIC0gaGVpZ2h0IC0gNjQsIFkpKTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9yaWdpbiA9PSAiYm90dG9tIikgew0KICAgICAgICAgIFggPSBHYW1lLm1vdXNlWCAtIHdpZHRoIC8gMiAtIDg7DQogICAgICAgICAgWSA9IEdhbWUubW91c2VZICsgMjQ7DQogICAgICAgICAgWCA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93VyAtIHdpZHRoIC0gMTYsIFgpKTsNCiAgICAgICAgICBZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dIIC0gaGVpZ2h0IC0gNjQsIFkpKTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9yaWdpbiA9PSAibGVmdCIpIHsNCiAgICAgICAgICBYID0gR2FtZS5tb3VzZVggLSB3aWR0aCAtIDI0Ow0KICAgICAgICAgIFkgPSBHYW1lLm1vdXNlWSAtIGhlaWdodCAvIDIgLSA4Ow0KICAgICAgICAgIFggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihHYW1lLndpbmRvd1cgLSB3aWR0aCAtIDE2LCBYKSk7DQogICAgICAgICAgWSA9IE1hdGgubWF4KDAsIE1hdGgubWluKEdhbWUud2luZG93SCAtIGhlaWdodCAtIDY0LCBZKSk7DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcmlnaW4gPT0gInRoaXMiICYmIHRoaXMuZnJvbSkgew0KICAgICAgICAgIHZhciByZWN0ID0gdGhpcy5mcm9tLmdldEJvdW5kcygpOw0KICAgICAgICAgIFggPSAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyIC0gd2lkdGggLyAyIC0gODsNCiAgICAgICAgICBZID0gcmVjdC50b3AgLSB0aGlzLnR0LmNsaWVudEhlaWdodCAtIDQ4Ow0KICAgICAgICAgIFggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihHYW1lLndpbmRvd1cgLSB3aWR0aCAtIDE2LCBYKSk7DQogICAgICAgICAgLy9ZPU1hdGgubWF4KDAsTWF0aC5taW4oR2FtZS53aW5kb3dILXRoaXMudHQuY2xpZW50SGVpZ2h0LTY0LFkpKTsNCiAgICAgICAgICBpZiAoWSA8IDApIFkgPSByZWN0LmJvdHRvbSAtIDI0Ow0KICAgICAgICAgIGlmIChZICsgaGVpZ2h0ICsgNDAgPiBHYW1lLndpbmRvd0gpIHsNCiAgICAgICAgICAgIFggPSByZWN0LnJpZ2h0ICsgODsNCiAgICAgICAgICAgIFkgPSByZWN0LnRvcCArIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSAvIDIgLSBoZWlnaHQgLyAyIC0gMzg7DQogICAgICAgICAgICBZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dIIC0gaGVpZ2h0IC0gMTksIFkpKTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgWCA9IEdhbWUubW91c2VYIC0gd2lkdGggLyAyIC0gODsNCiAgICAgICAgICBZID0gR2FtZS5tb3VzZVkgLSBoZWlnaHQgLSAzMjsNCiAgICAgICAgICBYID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oR2FtZS53aW5kb3dXIC0gd2lkdGggLSAxNiwgWCkpOw0KICAgICAgICAgIFkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihHYW1lLndpbmRvd0ggLSBoZWlnaHQgLSA2NCwgWSkpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLnR0YS5zdHlsZS5sZWZ0ID0gWCArICJweCI7DQogICAgICB0aGlzLnR0YS5zdHlsZS5yaWdodCA9ICJhdXRvIjsNCiAgICAgIHRoaXMudHRhLnN0eWxlLnRvcCA9IFkgKyAicHgiOw0KICAgICAgdGhpcy50dGEuc3R5bGUuYm90dG9tID0gImF1dG8iOw0KICAgICAgaWYgKHRoaXMuc2hvdWxkSGlkZSkgew0KICAgICAgICB0aGlzLmhpZGUoKTsNCiAgICAgICAgdGhpcy5zaG91bGRIaWRlID0gMDsNCiAgICAgIH0gZWxzZSBpZiAoR2FtZS5kcmF3VCAlIDEwID09IDAgJiYgdHlwZW9mIHRoaXMudGV4dCA9PT0gImZ1bmN0aW9uIikgew0KICAgICAgICB2YXIgdGV4dCA9IHRoaXMudGV4dCgpOw0KICAgICAgICBpZiAodGV4dCA9PSAiIikgdGhpcy50dGEuc3R5bGUub3BhY2l0eSA9ICIwIjsNCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgdGhpcy50dC5pbm5lckhUTUwgPSB1bmVzY2FwZSh0ZXh0KTsNCiAgICAgICAgICB0aGlzLnR0YS5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLnRvb2x0aXAuaGlkZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLnR0YSkgdGhpcy50dGEuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIHRoaXMuZHluYW1pYyA9IDA7DQogICAgICB0aGlzLm9uID0gMDsNCiAgICB9Ow0KICAgIEdhbWUuZ2V0VG9vbHRpcCA9IGZ1bmN0aW9uICh0ZXh0LCBvcmlnaW4sIGlzQ3JhdGUpIHsNCiAgICAgIG9yaWdpbiA9IG9yaWdpbiA/IG9yaWdpbiA6ICJtaWRkbGUiOw0KICAgICAgaWYgKGlzQ3JhdGUpDQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgJ29uTW91c2VPdXQ9IkdhbWUuc2V0T25DcmF0ZSgwKTtHYW1lLnRvb2x0aXAuc2hvdWxkSGlkZT0xOyIgb25Nb3VzZU92ZXI9ImlmICghR2FtZS5tb3VzZURvd24pIHtHYW1lLnNldE9uQ3JhdGUodGhpcyk7R2FtZS50b29sdGlwLmR5bmFtaWM9MDtHYW1lLnRvb2x0aXAuZHJhdyh0aGlzLFwnJyArDQogICAgICAgICAgZXNjYXBlKHRleHQpICsNCiAgICAgICAgICAiJywnIiArDQogICAgICAgICAgb3JpZ2luICsNCiAgICAgICAgICAiJyk7R2FtZS50b29sdGlwLndvYmJsZSgpO31cIiINCiAgICAgICAgKTsNCiAgICAgIGVsc2UNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnb25Nb3VzZU91dD0iR2FtZS50b29sdGlwLnNob3VsZEhpZGU9MTsiIG9uTW91c2VPdmVyPSJHYW1lLnRvb2x0aXAuZHluYW1pYz0wO0dhbWUudG9vbHRpcC5kcmF3KHRoaXMsXCcnICsNCiAgICAgICAgICBlc2NhcGUodGV4dCkgKw0KICAgICAgICAgICInLCciICsNCiAgICAgICAgICBvcmlnaW4gKw0KICAgICAgICAgICInKTtHYW1lLnRvb2x0aXAud29iYmxlKCk7XCIiDQogICAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLmdldER5bmFtaWNUb29sdGlwID0gZnVuY3Rpb24gKGZ1bmMsIG9yaWdpbiwgaXNDcmF0ZSkgew0KICAgICAgb3JpZ2luID0gb3JpZ2luID8gb3JpZ2luIDogIm1pZGRsZSI7DQogICAgICBpZiAoaXNDcmF0ZSkNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnb25Nb3VzZU91dD0iR2FtZS5zZXRPbkNyYXRlKDApO0dhbWUudG9vbHRpcC5zaG91bGRIaWRlPTE7IiBvbk1vdXNlT3Zlcj0iaWYgKCFHYW1lLm1vdXNlRG93bikge0dhbWUuc2V0T25DcmF0ZSh0aGlzKTtHYW1lLnRvb2x0aXAuZHluYW1pYz0xO0dhbWUudG9vbHRpcC5kcmF3KHRoaXMsJyArDQogICAgICAgICAgImZ1bmN0aW9uKCl7cmV0dXJuICIgKw0KICAgICAgICAgIGZ1bmMgKw0KICAgICAgICAgICIoKTt9IiArDQogICAgICAgICAgIiwnIiArDQogICAgICAgICAgb3JpZ2luICsNCiAgICAgICAgICAiJyk7R2FtZS50b29sdGlwLndvYmJsZSgpO31cIiINCiAgICAgICAgKTsNCiAgICAgIHJldHVybiAoDQogICAgICAgICdvbk1vdXNlT3V0PSJHYW1lLnRvb2x0aXAuc2hvdWxkSGlkZT0xOyIgb25Nb3VzZU92ZXI9IkdhbWUudG9vbHRpcC5keW5hbWljPTE7R2FtZS50b29sdGlwLmRyYXcodGhpcywnICsNCiAgICAgICAgImZ1bmN0aW9uKCl7cmV0dXJuICIgKw0KICAgICAgICBmdW5jICsNCiAgICAgICAgIigpO30iICsNCiAgICAgICAgIiwnIiArDQogICAgICAgIG9yaWdpbiArDQogICAgICAgICInKTtHYW1lLnRvb2x0aXAud29iYmxlKCk7XCIiDQogICAgICApOw0KICAgIH07DQogICAgR2FtZS5hdHRhY2hUb29sdGlwID0gZnVuY3Rpb24gKGVsLCBmdW5jLCBvcmlnaW4pIHsNCiAgICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gInN0cmluZyIpIHsNCiAgICAgICAgdmFyIHN0ciA9IGZ1bmM7DQogICAgICAgIGZ1bmMgPSAoZnVuY3Rpb24gKHN0cikgew0KICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gc3RyOw0KICAgICAgICAgIH07DQogICAgICAgIH0pKHN0cik7DQogICAgICB9DQogICAgICBvcmlnaW4gPSBvcmlnaW4gPyBvcmlnaW4gOiAibWlkZGxlIjsNCiAgICAgIEFkZEV2ZW50KA0KICAgICAgICBlbCwNCiAgICAgICAgIm1vdXNlb3ZlciIsDQogICAgICAgIChmdW5jdGlvbiAoZnVuYywgZWwsIG9yaWdpbikgew0KICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBHYW1lLnRvb2x0aXAuZHluYW1pYyA9IDE7DQogICAgICAgICAgICBHYW1lLnRvb2x0aXAuZHJhdyhlbCwgZnVuYywgb3JpZ2luKTsNCiAgICAgICAgICB9Ow0KICAgICAgICB9KShmdW5jLCBlbCwgb3JpZ2luKQ0KICAgICAgKTsNCiAgICAgIEFkZEV2ZW50KA0KICAgICAgICBlbCwNCiAgICAgICAgIm1vdXNlb3V0IiwNCiAgICAgICAgKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgR2FtZS50b29sdGlwLnNob3VsZEhpZGUgPSAxOw0KICAgICAgICAgIH07DQogICAgICAgIH0pKCkNCiAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLnRvb2x0aXAud29iYmxlID0gZnVuY3Rpb24gKCkgew0KICAgICAgLy9kaXNhYmxlZCBiZWNhdXNlIHRoaXMgZWZmZWN0IGRvZXNuJ3QgbG9vayBnb29kIHdpdGggdGhlIHNsaWdodCBzbG93ZG93biBpdCBtaWdodCBvciBtaWdodCBub3QgYmUgY2F1c2luZy4NCiAgICAgIGlmIChmYWxzZSkgew0KICAgICAgICB0aGlzLnR0LmNsYXNzTmFtZSA9ICJmcmFtZWQiOw0KICAgICAgICB2b2lkIHRoaXMudHQub2Zmc2V0V2lkdGg7DQogICAgICAgIHRoaXMudHQuY2xhc3NOYW1lID0gImZyYW1lZCB3b2JibGluZyI7DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlVUERBVEUgQ0hFQ0tFUg0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuQ2hlY2tVcGRhdGVzID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKCFBcHApIGFqYXgoInNlcnZlci5waHA/cT1jaGVja3VwZGF0ZSIsIEdhbWUuQ2hlY2tVcGRhdGVzUmVzcG9uc2UpOw0KICAgIH07DQogICAgR2FtZS5DaGVja1VwZGF0ZXNSZXNwb25zZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgdmFyIHIgPSByZXNwb25zZS5zcGxpdCgifCIpOw0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgaWYgKHJbMF0gPT0gImFsZXJ0Iikgew0KICAgICAgICBpZiAoclsxXSkgc3RyID0gclsxXTsNCiAgICAgIH0gZWxzZSBpZiAocGFyc2VGbG9hdChyWzBdKSA+IEdhbWUudmVyc2lvbikgew0KICAgICAgICBzdHIgPSAiPGI+IiArIGxvYygiTmV3IHZlcnNpb24gYXZhaWxhYmxlOiB2LiAlMSEiLCByWzBdKSArICI8L2I+IjsNCiAgICAgICAgaWYgKHJbMV0pDQogICAgICAgICAgc3RyICs9ICI8YnI+PHNtYWxsPiIgKyBsb2MoJ1VwZGF0ZSBub3RlOiAiJTEiJywgclsxXSkgKyAiPC9zbWFsbD4iOw0KICAgICAgICBzdHIgKz0gIjxicj48Yj4iICsgbG9jKCJSZWZyZXNoIHRvIGdldCBpdCEiKSArICI8L2I+IjsNCiAgICAgIH0NCiAgICAgIGlmIChzdHIgIT0gIiIpIHsNCiAgICAgICAgbCgiYWxlcnQiKS5pbm5lckhUTUwgPSBzdHI7DQogICAgICAgIGwoImFsZXJ0Iikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlEQVRBIEdSQUJCRVINCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCg0KICAgIEdhbWUuZXh0ZXJuYWxEYXRhTG9hZGVkID0gZmFsc2U7DQoNCiAgICBHYW1lLmdyYW5kbWFOYW1lcyA9IFsNCiAgICAgICJHcmFubnkiLA0KICAgICAgIkd1c2hlciIsDQogICAgICAiRXRoZWwiLA0KICAgICAgIkVkbmEiLA0KICAgICAgIkRvcmlzIiwNCiAgICAgICJNYXVkIiwNCiAgICAgICJIaWxkYSIsDQogICAgICAiR2xhZHlzIiwNCiAgICAgICJNaWNoZWxsZSIsDQogICAgICAiTWljaGVsZSIsDQogICAgICAiUGh5bGxpcyIsDQogICAgICAiTWlsbGljZW50IiwNCiAgICAgICJNdXJpZWwiLA0KICAgICAgIk15cnRsZSIsDQogICAgICAiTWlsZHJlZCIsDQogICAgICAiTWF2aXMiLA0KICAgICAgIkhlbGVuIiwNCiAgICAgICJHbG9yaWEiLA0KICAgICAgIlNoZWlsYSIsDQogICAgICAiQmV0dHkiLA0KICAgICAgIkdlcnRydWRlIiwNCiAgICAgICJBZ2F0aGEiLA0KICAgICAgIkJlcnlsIiwNCiAgICAgICJBZ25lcyIsDQogICAgICAiUGVhcmwiLA0KICAgICAgIlByZWNpb3VzIiwNCiAgICAgICJSdWJ5IiwNCiAgICAgICJWZXJhIiwNCiAgICAgICJCb25uaWUiLA0KICAgICAgIkFkYSIsDQogICAgICAiQnVubnkiLA0KICAgICAgIkNvb2tpZSIsDQogICAgICAiRGFybGluZyIsDQogICAgICAiR2FnYSIsDQogICAgICAiR2FtR2FtIiwNCiAgICAgICJNZW1hdyIsDQogICAgICAiTWltc3kiLA0KICAgICAgIlBlYW51dCIsDQogICAgICAiTmFuYSIsDQogICAgICAiTmFuIiwNCiAgICAgICJUb290c2llIiwNCiAgICAgICJXYXJ0eSIsDQogICAgICAiU3Rpbmt5IiwNCiAgICAgICJIZWlub3VzIiwNCiAgICBdOw0KICAgIEdhbWUuY3VzdG9tR3JhbmRtYU5hbWVzID0gW107DQogICAgR2FtZS5oZXJhbGRzID0gMDsNCg0KICAgIEdhbWUuR3JhYkRhdGEgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUFwcCkgYWpheCgiL3BhdHJlb24vZ3JhYi5waHAiLCBHYW1lLkdyYWJEYXRhUmVzcG9uc2UpOw0KICAgICAgZWxzZQ0KICAgICAgICBBcHAuZ3JhYkRhdGEoZnVuY3Rpb24gKHJlcykgew0KICAgICAgICAgIEdhbWUuaGVyYWxkcyA9IHJlcyA/IHJlcy5wbGF5ZXJzTiB8fCAxIDogMTsNCiAgICAgICAgICBHYW1lLmhlcmFsZHMgPSBNYXRoLm1heCgNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICBNYXRoLm1pbigxMDAsIE1hdGguY2VpbCgoR2FtZS5oZXJhbGRzIC8gMTAwKSAqIDEwMCkgLyAxMDApDQogICAgICAgICAgKTsNCiAgICAgICAgICBsKCJoZXJhbGRzQW1vdW50IikudGV4dENvbnRlbnQgPSBNYXRoLmZsb29yKEdhbWUuaGVyYWxkcyk7DQogICAgICAgIH0pOw0KICAgIH07DQogICAgR2FtZS5HcmFiRGF0YVJlc3BvbnNlID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAvKg0KCQkJCXJlc3BvbnNlIHNob3VsZCBiZSBmb3JtYXR0ZWQgYXMNCgkJCQl7ImhlcmFsZCI6MywiZ3JhbmRtYSI6ImF8YnxjfC4uLn0NCgkJCSovDQogICAgICB2YXIgciA9IHt9Ow0KICAgICAgdHJ5IHsNCiAgICAgICAgciA9IEpTT04ucGFyc2UocmVzcG9uc2UpOw0KICAgICAgICBpZiAodHlwZW9mIHJbImhlcmFsZCJdICE9PSAidW5kZWZpbmVkIikgew0KICAgICAgICAgIEdhbWUuaGVyYWxkcyA9IHBhcnNlSW50KHJbImhlcmFsZCJdKTsNCiAgICAgICAgICBHYW1lLmhlcmFsZHMgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIEdhbWUuaGVyYWxkcykpOw0KICAgICAgICB9DQogICAgICAgIGlmICh0eXBlb2YgclsiZ3JhbmRtYSJdICE9PSAidW5kZWZpbmVkIiAmJiByWyJncmFuZG1hIl0gIT0gIiIpIHsNCiAgICAgICAgICBHYW1lLmN1c3RvbUdyYW5kbWFOYW1lcyA9IHJbImdyYW5kbWEiXS5zcGxpdCgifCIpOw0KICAgICAgICAgIEdhbWUuY3VzdG9tR3JhbmRtYU5hbWVzID0gR2FtZS5jdXN0b21HcmFuZG1hTmFtZXMuZmlsdGVyKGZ1bmN0aW9uICgNCiAgICAgICAgICAgIGVsDQogICAgICAgICAgKSB7DQogICAgICAgICAgICByZXR1cm4gZWwgIT0gIiI7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBsKCJoZXJhbGRzQW1vdW50IikudGV4dENvbnRlbnQgPSBNYXRoLmZsb29yKEdhbWUuaGVyYWxkcyk7DQogICAgICAgIEdhbWUuZXh0ZXJuYWxEYXRhTG9hZGVkID0gdHJ1ZTsNCiAgICAgIH0gY2F0Y2ggKGUpIHt9DQogICAgfTsNCg0KICAgIGlmICghQXBwKSB7DQogICAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICAgIGwoImh0dHBzU3dpdGNoIiksDQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDozNTBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTFweDsiPicgKw0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICJZb3UgYXJlIGN1cnJlbnRseSBwbGF5aW5nIENvb2tpZSBDbGlja2VyIG9uIHRoZSA8Yj4lMTwvYj4gcHJvdG9jb2wuPGJyPlRoZSA8Yj4lMjwvYj4gdmVyc2lvbiB1c2VzIGEgZGlmZmVyZW50IHNhdmUgc2xvdCB0aGFuIHRoaXMgb25lLjxicj5DbGljayB0aGlzIGxvY2sgdG8gcmVsb2FkIHRoZSBwYWdlIGFuZCBzd2l0Y2ggdG8gdGhlIDxiPiUyPC9iPiB2ZXJzaW9uISIsDQogICAgICAgICAgICBbR2FtZS5odHRwcyA/ICJIVFRQUyIgOiAiSFRUUCIsIEdhbWUuaHR0cHMgPyAiSFRUUCIgOiAiSFRUUFMiXQ0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAidGhpcyINCiAgICAgICk7DQogICAgICBBZGRFdmVudChsKCJodHRwc1N3aXRjaCIpLCAiY2xpY2siLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIFBsYXlTb3VuZCgic25kL3BvcCIgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzICsgMSkgKyAiLm1wMyIsIDAuNzUpOw0KICAgICAgICBpZiAobG9jYXRpb24ucHJvdG9jb2wgPT0gImh0dHBzOiIpDQogICAgICAgICAgbG9jYXRpb24uaHJlZiA9DQogICAgICAgICAgICAiaHR0cDoiICsNCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cmluZyh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wubGVuZ3RoKTsNCiAgICAgICAgZWxzZSBpZiAobG9jYXRpb24ucHJvdG9jb2wgPT0gImh0dHA6IikNCiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0NCiAgICAgICAgICAgICJodHRwczoiICsNCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cmluZyh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wubGVuZ3RoKTsNCiAgICAgIH0pOw0KDQogICAgICBBZGRFdmVudChsKCJjaGFuZ2VMYW5ndWFnZSIpLCAiY2xpY2siLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuc2hvd0xhbmdTZWxlY3Rpb24oKTsNCiAgICAgIH0pOw0KDQogICAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICAgIGwoInRvcGJhck9ydGVpbCIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5CYWNrIHRvIE9ydGVpbFwncyBzdWJkb21haW4hPGJyPkxvdHMgb2Ygb3RoZXIgZ2FtZXMgaW4gdGhlcmUhPC9kaXY+JyArDQogICAgICAgICAgdGlueUljb24oWzE3LCA1XSwgImRpc3BsYXk6YmxvY2s7bWFyZ2luOi0xMnB4IGF1dG87IiksDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIEdhbWUuYXR0YWNoVG9vbHRpcCgNCiAgICAgICAgbCgidG9wYmFyRGFzaG5ldCIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5CYWNrIHRvIG91ciBob21lcGFnZSE8L2Rpdj4nLA0KICAgICAgICAidGhpcyINCiAgICAgICk7DQogICAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICAgIGwoInRvcGJhclR3aXR0ZXIiKSwNCiAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmc6OHB4O3dpZHRoOjI1MHB4O3RleHQtYWxpZ246Y2VudGVyOyI+T3J0ZWlsXCdzIHR3aXR0ZXIsIHdoaWNoIGZyZXF1ZW50bHkgZmVhdHVyZXMgZ2FtZSB1cGRhdGVzLjwvZGl2PicsDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIEdhbWUuYXR0YWNoVG9vbHRpcCgNCiAgICAgICAgbCgidG9wYmFyVHVtYmxyIiksDQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDoyNTBweDt0ZXh0LWFsaWduOmNlbnRlcjsiPk9ydGVpbFwncyB0dW1ibHIsIHdoaWNoIGZyZXF1ZW50bHkgZmVhdHVyZXMgZ2FtZSB1cGRhdGVzLjwvZGl2PicsDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIEdhbWUuYXR0YWNoVG9vbHRpcCgNCiAgICAgICAgbCgidG9wYmFyRGlzY29yZCIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5PdXIgb2ZmaWNpYWwgZGlzY29yZCBzZXJ2ZXIuPGJyPllvdSBjYW4gc2hhcmUgdGlwcyBhbmQgcXVlc3Rpb25zIGFib3V0IENvb2tpZSBDbGlja2VyIGFuZCBhbGwgb3VyIG90aGVyIGdhbWVzITwvZGl2PicsDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIEdhbWUuYXR0YWNoVG9vbHRpcCgNCiAgICAgICAgbCgidG9wYmFyUGF0cmVvbiIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5TdXBwb3J0IHVzIG9uIFBhdHJlb24gYW5kIGhlbHAgdXMga2VlcCB1cGRhdGluZyBDb29raWUgQ2xpY2tlciE8YnI+VGhlcmVcJ3MgbmVhdCByZXdhcmRzIGZvciBwYXRyb25zIHRvbyE8L2Rpdj4nLA0KICAgICAgICAidGhpcyINCiAgICAgICk7DQogICAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICAgIGwoInRvcGJhck1lcmNoIiksDQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDoyNTBweDt0ZXh0LWFsaWduOmNlbnRlcjsiPkNvb2tpZSBDbGlja2VyIHNoaXJ0cywgaG9vZGllcyBhbmQgc3RpY2tlcnMhPC9kaXY+JywNCiAgICAgICAgInRoaXMiDQogICAgICApOw0KICAgICAgR2FtZS5hdHRhY2hUb29sdGlwKA0KICAgICAgICBsKCJ0b3BiYXJNb2JpbGVDQyIpLA0KICAgICAgICAnPGRpdiBzdHlsZT0icGFkZGluZzo4cHg7d2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij5QbGF5IENvb2tpZSBDbGlja2VyIG9uIHlvdXIgcGhvbmUhPGJyPihBbmRyb2lkIG9ubHk7IGlPUyB2ZXJzaW9uIHdpbGwgYmUgcmVsZWFzZWQgbGF0ZXIpPC9kaXY+JywNCiAgICAgICAgInRoaXMiDQogICAgICApOw0KICAgICAgR2FtZS5hdHRhY2hUb29sdGlwKA0KICAgICAgICBsKCJ0b3BiYXJTdGVhbUNDIiksDQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDoyNTBweDt0ZXh0LWFsaWduOmNlbnRlcjsiPkdldCBDb29raWUgQ2xpY2tlciBvbiBTdGVhbSE8YnI+RmVhdHVyaW5nIG11c2ljIGJ5IEM0MTguPC9kaXY+JywNCiAgICAgICAgInRoaXMiDQogICAgICApOw0KICAgICAgR2FtZS5hdHRhY2hUb29sdGlwKA0KICAgICAgICBsKCJ0b3BiYXJSYW5kb21nZW4iKSwNCiAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmc6OHB4O3dpZHRoOjI1MHB4O3RleHQtYWxpZ246Y2VudGVyOyI+QSB0aGluZyB3ZSBtYWRlIHRoYXQgbGV0cyB5b3Ugd3JpdGUgcmFuZG9tIGdlbmVyYXRvcnMuPC9kaXY+JywNCiAgICAgICAgInRoaXMiDQogICAgICApOw0KICAgICAgR2FtZS5hdHRhY2hUb29sdGlwKA0KICAgICAgICBsKCJ0b3BiYXJJR00iKSwNCiAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmc6OHB4O3dpZHRoOjI1MHB4O3RleHQtYWxpZ246Y2VudGVyOyI+QSB0aGluZyB3ZSBtYWRlIHRoYXQgbGV0cyB5b3UgY3JlYXRlIHlvdXIgb3duIGlkbGUgZ2FtZXMgdXNpbmcgYSBzaW1wbGUgc2NyaXB0aW5nIGxhbmd1YWdlLjwvZGl2PicsDQogICAgICAgICJ0aGlzIg0KICAgICAgKTsNCiAgICAgIGwoImNoYW5nZUxhbmd1YWdlIikuaW5uZXJIVE1MID0gbG9jKCJDaGFuZ2UgbGFuZ3VhZ2UiKTsNCiAgICAgIGwoImxpbmtzIikuY2hpbGROb2Rlc1swXS5ub2RlVmFsdWUgPSBsb2MoIk90aGVyIHZlcnNpb25zIik7DQogICAgICAvL2woJ2xpbmtWZXJzaW9uQmV0YScpLmlubmVySFRNTD1sb2MoIkJldGEiKTsNCiAgICB9DQoNCiAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICBsKCJoZXJhbGRzIiksDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBzdHIgPSAiIjsNCg0KICAgICAgICBpZiAoIUFwcCAmJiAhR2FtZS5leHRlcm5hbERhdGFMb2FkZWQpDQogICAgICAgICAgc3RyICs9IGxvYygNCiAgICAgICAgICAgICJIZXJhbGRzIGNvdWxkbid0IGJlIGxvYWRlZC4gVGhlcmUgbWF5IGJlIGFuIGlzc3VlIHdpdGggb3VyIHNlcnZlcnMsIG9yIHlvdSBhcmUgcGxheWluZyB0aGUgZ2FtZSBsb2NhbGx5LiINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICBpZiAoIUFwcCAmJiBHYW1lLmhlcmFsZHMgPT0gMCkNCiAgICAgICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgICAgICdUaGVyZSBhcmUgbm8gaGVyYWxkcyBhdCB0aGUgbW9tZW50LiBQbGVhc2UgY29uc2lkZXIgPGIgc3R5bGU9ImNvbG9yOiNiYzNhZmY7Ij5kb25hdGluZyB0byBvdXIgUGF0cmVvbjwvYj4hJw0KICAgICAgICAgICAgKTsNCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgICAnPGIgc3R5bGU9ImNvbG9yOiNiYzNhZmY7dGV4dC1zaGFkb3c6MHB4IDFweCAwcHggIzZkMDA5NjsiPicgKw0KICAgICAgICAgICAgICBsb2MoIiUxIGhlcmFsZCIsIEdhbWUuaGVyYWxkcykgKw0KICAgICAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJzZWxmbGVzc2x5IGluc3BpcmluZyBhIGJvb3N0IGluIHByb2R1Y3Rpb24gZm9yIGV2ZXJ5b25lLCByZXN1bHRpbmcgaW4gJTEuIiwNCiAgICAgICAgICAgICAgICAnPGJyPjxiIHN0eWxlPSJjb2xvcjojY2RhYTg5O3RleHQtc2hhZG93OjBweCAxcHggMHB4ICM3YzQ1MzIsMHB4IDBweCA2cHggIzdjNDUzMjsiPjxkaXYgc3R5bGU9IndpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246bWlkZGxlO2JhY2tncm91bmQ6dXJsKGltZy9tb25leS5wbmcpOyI+PC9kaXY+JyArDQogICAgICAgICAgICAgICAgICBsb2MoIislMSUgY29va2llcyBwZXIgc2Vjb25kIiwgR2FtZS5oZXJhbGRzKSArDQogICAgICAgICAgICAgICAgICAiPC9iPiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgPT0gMSkNCiAgICAgICAgICAgICAgc3RyICs9IGxvYygNCiAgICAgICAgICAgICAgICAiWW91IGFyZSBpbiBhIDxiPkJvcm4gYWdhaW48L2I+IHJ1biwgYW5kIGFyZSBub3QgY3VycmVudGx5IGJlbmVmaXRpbmcgZnJvbSBoZXJhbGRzLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKEdhbWUuSGFzKCJIZXJhbGRzIikpDQogICAgICAgICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgICAgICAgIllvdSBvd24gdGhlIDxiPkhlcmFsZHM8L2I+IHVwZ3JhZGUsIGFuZCB0aGVyZWZvcmUgYmVuZWZpdCBmcm9tIHRoZSBwcm9kdWN0aW9uIGJvb3N0LiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgc3RyICs9IGxvYygNCiAgICAgICAgICAgICAgICAiVG8gYmVuZWZpdCBmcm9tIHRoZSBoZXJhbGQgYm9udXMsIHlvdSBuZWVkIGEgc3BlY2lhbCB1cGdyYWRlIHlvdSBkbyBub3QgeWV0IG93bi4gWW91IHdpbGwgcGVybWFuZW50bHkgdW5sb2NrIGl0IGxhdGVyIGluIHRoZSBnYW1lLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjxzcGFuIHN0eWxlPSJmb250LXNpemU6OTAlO29wYWNpdHk6MC42OyI+JyArDQogICAgICAgICAgKCFBcHANCiAgICAgICAgICAgID8gbG9jKA0KICAgICAgICAgICAgICAgICI8Yj5IZXJhbGRzPC9iPiBhcmUgcGVvcGxlIHdobyBoYXZlIGRvbmF0ZWQgdG8gb3VyIGhpZ2hlc3QgUGF0cmVvbiB0aWVyLCBhbmQgYXJlIGxpbWl0ZWQgdG8gMTAwLjxicj5FYWNoIGhlcmFsZCBnaXZlcyBldmVyeW9uZSArMSUgQ3BTLjxicj5IZXJhbGRzIGJlbmVmaXQgZXZlcnlvbmUgcGxheWluZyB0aGUgZ2FtZSwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHlvdSBkb25hdGVkLiINCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgOiBsb2MoDQogICAgICAgICAgICAgICAgIkV2ZXJ5ICUxIGN1cnJlbnQgcGxheWVycyBvbiBTdGVhbSBnZW5lcmF0ZXMgPGI+MSBoZXJhbGQ8L2I+LCB1cCB0byAlMiBoZXJhbGRzLjxicj5FYWNoIGhlcmFsZCBnaXZlcyBldmVyeW9uZSArMSUgQ3BTLiIsDQogICAgICAgICAgICAgICAgWzEwMCwgMTAwXQ0KICAgICAgICAgICAgICApKSArDQogICAgICAgICAgJzwvc3Bhbj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICB0aW55SWNvbihbMjEsIDI5XSk7DQoNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgc3R5bGU9IndpZHRoOjMxcHg7aGVpZ2h0OjM5cHg7YmFja2dyb3VuZDp1cmwoaW1nL2hlcmFsZEZsYWcucG5nKTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MHB4O2xlZnQ6OHB4OyI+PC9kaXY+PGRpdiBzdHlsZT0id2lkdGg6MzFweDtoZWlnaHQ6MzlweDtiYWNrZ3JvdW5kOnVybChpbWcvaGVyYWxkRmxhZy5wbmcpO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowcHg7cmlnaHQ6OHB4OyI+PC9kaXY+JzsNCg0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDozMDBweDt0ZXh0LWFsaWduOmNlbnRlcjsiIGNsYXNzPSJwcm9tcHQiIGlkPSJ0b29sdGlwSGVyYWxkcyI+PGgzPicgKw0KICAgICAgICAgIGxvYygiSGVyYWxkcyIpICsNCiAgICAgICAgICAnPC9oMz48ZGl2IGNsYXNzPSJibG9jayI+JyArDQogICAgICAgICAgc3RyICsNCiAgICAgICAgICAiPC9kaXY+PC9kaXY+Ig0KICAgICAgICApOw0KICAgICAgfSwNCiAgICAgICJ0aGlzIg0KICAgICk7DQogICAgbCgiaGVyYWxkc0Ftb3VudCIpLnRleHRDb250ZW50ID0gIj8iOw0KICAgIGwoImhlcmFsZHMiKS5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7DQogICAgaWYgKEFwcCkgew0KICAgICAgbCgiaGVyYWxkcyIpLnN0eWxlLnBhZGRpbmdUb3AgPSAiNHB4IjsNCiAgICAgIGwoImhlcmFsZHMiKS5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7DQogICAgICBsKCJoZXJhbGRzIikuc3R5bGUudG9wID0gIjBweCI7DQogICAgICBsKCJoZXJhbGRzIikuc3R5bGUucmlnaHQgPSAiMHB4IjsNCiAgICAgIGwoImhlcmFsZHMiKS5zdHlsZS53aWR0aCA9ICIyOHB4IjsNCiAgICAgIGwoImhlcmFsZHMiKS5zdHlsZS50ZXh0QWxpZ24gPSAiY2VudGVyIjsNCiAgICAgIGwoImxlZnRCZWFtIikuYXBwZW5kQ2hpbGQobCgiaGVyYWxkcyIpKTsNCg0KICAgICAgbCgiYnVmZnMiKS5zdHlsZS50b3AgPSAiMTZweCI7DQogICAgfQ0KDQogICAgR2FtZS5HcmFiRGF0YSgpOw0KDQogICAgR2FtZS51c2VMb2NhbFN0b3JhZ2UgPSAxOw0KICAgIC8vd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpOy8vd29uJ3Qgc3dpdGNoIGJhY2sgdG8gY29va2llLWJhc2VkIGlmIHRoZXJlIGlzIGxvY2FsU3RvcmFnZSBpbmZvDQoNCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJU0FWRQ0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuRXhwb3J0U2F2ZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIC8vaWYgKEFwcCkgcmV0dXJuIGZhbHNlOw0KICAgICAgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9IDA7DQogICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgIjxpZCBFeHBvcnRTYXZlPjxoMz4iICsNCiAgICAgICAgICBsb2MoIkV4cG9ydCBzYXZlIikgKw0KICAgICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiVGhpcyBpcyB5b3VyIHNhdmUgY29kZS48YnI+Q29weSBpdCBhbmQga2VlcCBpdCBzb21ld2hlcmUgc2FmZSEiDQogICAgICAgICAgKSArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9ImJsb2NrIj48dGV4dGFyZWEgaWQ9InRleHRhcmVhUHJvbXB0IiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6MTI4cHg7IiByZWFkb25seT4nICsNCiAgICAgICAgICBHYW1lLldyaXRlU2F2ZSgxKSArDQogICAgICAgICAgIjwvdGV4dGFyZWE+PC9kaXY+IiwNCiAgICAgICAgW2xvYygiQWxsIGRvbmUhIildDQogICAgICApOyAvL3Byb21wdCgnQ29weSB0aGlzIHRleHQgYW5kIGtlZXAgaXQgc29tZXdoZXJlIHNhZmUhJyxHYW1lLldyaXRlU2F2ZSgxKSk7DQogICAgICBsKCJ0ZXh0YXJlYVByb21wdCIpLmZvY3VzKCk7DQogICAgICBsKCJ0ZXh0YXJlYVByb21wdCIpLnNlbGVjdCgpOw0KICAgIH07DQogICAgR2FtZS5JbXBvcnRTYXZlID0gZnVuY3Rpb24gKGRlZikgew0KICAgICAgLy9pZiAoQXBwKSByZXR1cm4gZmFsc2U7DQogICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgIjxpZCBJbXBvcnRTYXZlPjxoMz4iICsNCiAgICAgICAgICBsb2MoIkltcG9ydCBzYXZlIikgKw0KICAgICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiUGxlYXNlIHBhc3RlIGluIHRoZSBjb2RlIHRoYXQgd2FzIGdpdmVuIHRvIHlvdSBvbiBzYXZlIGV4cG9ydC4iDQogICAgICAgICAgKSArDQogICAgICAgICAgJzxkaXYgaWQ9ImltcG9ydEVycm9yIiBjbGFzcz0id2FybmluZyIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjExcHg7Ij48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJibG9jayI+PHRleHRhcmVhIGlkPSJ0ZXh0YXJlYVByb21wdCIgc3R5bGU9IndpZHRoOjEwMCU7aGVpZ2h0OjEyOHB4OyI+JyArDQogICAgICAgICAgKGRlZiB8fCAiIikgKw0KICAgICAgICAgICI8L3RleHRhcmVhPjwvZGl2PiIsDQogICAgICAgIFsNCiAgICAgICAgICBbDQogICAgICAgICAgICBsb2MoIkxvYWQiKSwNCiAgICAgICAgICAgICJpZiAobCgndGV4dGFyZWFQcm9tcHQnKS52YWx1ZS5sZW5ndGg9PTApe3JldHVybiBmYWxzZTt9aWYgKEdhbWUuSW1wb3J0U2F2ZUNvZGUobCgndGV4dGFyZWFQcm9tcHQnKS52YWx1ZSkpe0dhbWUuQ2xvc2VQcm9tcHQoKTt9ZWxzZXtsKCdpbXBvcnRFcnJvcicpLmlubmVySFRNTD0nKCcrbG9jKFwiRXJyb3IgaW1wb3J0aW5nIHNhdmVcIikrJyknO30iLA0KICAgICAgICAgIF0sDQogICAgICAgICAgbG9jKCJOZXZlcm1pbmQiKSwNCiAgICAgICAgXQ0KICAgICAgKTsgLy9wcm9tcHQoJ1BsZWFzZSBwYXN0ZSBpbiB0aGUgdGV4dCB0aGF0IHdhcyBnaXZlbiB0byB5b3Ugb24gc2F2ZSBleHBvcnQuJywnJyk7DQogICAgICBsKCJ0ZXh0YXJlYVByb21wdCIpLmZvY3VzKCk7DQogICAgfTsNCiAgICBHYW1lLkltcG9ydFNhdmVDb2RlID0gZnVuY3Rpb24gKHNhdmUpIHsNCiAgICAgIHZhciBvdXQgPSBmYWxzZTsNCiAgICAgIGlmIChzYXZlICYmIHNhdmUgIT0gIiIpIG91dCA9IEdhbWUuTG9hZFNhdmUoc2F2ZSk7DQogICAgICBpZiAob3V0ICYmIEFwcCAmJiBBcHAub25JbXBvcnRTYXZlKSBBcHAub25JbXBvcnRTYXZlKG91dCwgc2F2ZSk7DQogICAgICByZXR1cm4gb3V0Ow0KICAgIH07DQoNCiAgICBHYW1lLkZpbGVTYXZlID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEFwcCkgcmV0dXJuIGZhbHNlOw0KICAgICAgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9IDA7DQogICAgICB2YXIgZmlsZW5hbWUgPSBHYW1lLmJha2VyeU5hbWUucmVwbGFjZSgvW15hLXpBLVowLTldKy9nLCAiIikgKyAiQmFrZXJ5IjsNCiAgICAgIHZhciB0ZXh0ID0gR2FtZS5Xcml0ZVNhdmUoMSk7DQogICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFt0ZXh0XSwgeyB0eXBlOiAidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04IiB9KTsNCiAgICAgIHNhdmVBcyhibG9iLCBmaWxlbmFtZSArICIudHh0Iik7DQogICAgfTsNCiAgICBHYW1lLkZpbGVMb2FkID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgIGlmIChBcHApIHJldHVybiBmYWxzZTsNCiAgICAgIGlmIChlLnRhcmdldC5maWxlcy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlOw0KICAgICAgdmFyIGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsNCiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7DQogICAgICAgIEdhbWUuSW1wb3J0U2F2ZUNvZGUoZS50YXJnZXQucmVzdWx0KTsNCiAgICAgIH07DQogICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsNCiAgICB9Ow0KDQogICAgR2FtZS50b1JlbG9hZCA9IGZhbHNlOw0KICAgIEdhbWUudG9TYXZlID0gZmFsc2U7DQogICAgR2FtZS50b1F1aXQgPSBmYWxzZTsNCiAgICBHYW1lLmlzU2F2aW5nID0gZmFsc2U7IC8vdHJ1ZSB3aGlsZSB3ZSdyZSBzYXZpbmcsIHRvIGJsb2NrIHNvbWUgYmVoYXZpb3I7IHdoZW4gaW4gQXBwIG1vZGUgc2F2aW5nIG1heSBiZSBhc3luY2hyb25vdXMNCiAgICBHYW1lLmxhc3RTYXZlRGF0YSA9ICIiOw0KICAgIEdhbWUuV3JpdGVTYXZlID0gZnVuY3Rpb24gKHR5cGUpIHsNCiAgICAgIEdhbWUudG9TYXZlID0gZmFsc2U7DQogICAgICAvL3R5cGU6IG5vbmUgaXMgZGVmYXVsdCwgMT1yZXR1cm4gc3RyaW5nIG9ubHksIDI9cmV0dXJuIHVuY29tcHJlc3NlZCBzdHJpbmcsIDM9cmV0dXJuIHVuY29tcHJlc3NlZCwgY29tbWVudGVkIHN0cmluZw0KICAgICAgR2FtZS5sYXN0RGF0ZSA9IHBhcnNlSW50KEdhbWUudGltZSk7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBpZiAodHlwZSA9PSAzKSBzdHIgKz0gIlxuR2FtZSB2ZXJzaW9uXG4iOw0KICAgICAgc3RyICs9IEdhbWUudmVyc2lvbiArICJ8IjsNCiAgICAgIHN0ciArPSAifCI7IC8vanVzdCBpbiBjYXNlIHdlIG5lZWQgc29tZSBtb3JlIHN0dWZmIGhlcmUNCiAgICAgIGlmICh0eXBlID09IDMpIHN0ciArPSAiXG5cblJ1biBkZXRhaWxzIjsNCiAgICAgIHN0ciArPSAvL3NhdmUgc3RhdHMNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglydW4gc3RhcnQgZGF0ZSA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChHYW1lLnN0YXJ0RGF0ZSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWxlZ2FjeSBzdGFydCBkYXRlIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KEdhbWUuZnVsbERhdGUpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglkYXRlIHdoZW4gd2UgbGFzdCBvcGVuZWQgdGhlIGdhbWUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoR2FtZS5sYXN0RGF0ZSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWJha2VyeSBuYW1lIDogIiA6ICIiKSArDQogICAgICAgIEdhbWUuYmFrZXJ5TmFtZSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4Jc2VlZCA6ICIgOiAiIikgKw0KICAgICAgICBHYW1lLnNlZWQgKw0KICAgICAgICAifCI7DQogICAgICBpZiAodHlwZSA9PSAzKSBzdHIgKz0gIlxuXG5QYWNrZWQgcHJlZmVyZW5jZXMgYml0ZmllbGRcbgkiOw0KICAgICAgdmFyIHN0cjIgPSAvL3ByZWZzDQogICAgICAgIChHYW1lLnByZWZzLnBhcnRpY2xlcyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5udW1iZXJzID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmF1dG9zYXZlID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmF1dG91cGRhdGUgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMubWlsayA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5mYW5jeSA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy53YXJuID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmN1cnNvcnMgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuZm9jdXMgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuZm9ybWF0ID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLm5vdGlmcyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy53b2JibHkgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMubW9ub3NwYWNlID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmZpbHRlcnMgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuY29va2llc291bmQgPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuY3JhdGVzID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLnNob3dCYWNrdXBXYXJuaW5nID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmV4dHJhQnV0dG9ucyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5hc2tMdW1wcyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5jdXN0b21HcmFuZG1hcyA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy50aW1lb3V0ID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmNsb3VkU2F2ZSA/ICIxIiA6ICIwIikgKw0KICAgICAgICAoR2FtZS5wcmVmcy5iZ011c2ljID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLm5vdFNjYXJ5ID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmZ1bGxzY3JlZW4gPyAiMSIgOiAiMCIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyID8gIjEiIDogIjAiKSArDQogICAgICAgIChHYW1lLnByZWZzLmRpc2NvcmRQcmVzZW5jZSA/ICIxIiA6ICIwIikgKw0KICAgICAgICAiIjsNCiAgICAgIHN0cjIgPSBwYWNrMyhzdHIyKTsNCiAgICAgIHN0ciArPSBzdHIyICsgInwiOw0KICAgICAgaWYgKHR5cGUgPT0gMykgc3RyICs9ICJcblxuTWlzYyBnYW1lIGRhdGEiOw0KICAgICAgc3RyICs9DQogICAgICAgICh0eXBlID09IDMgPyAiXG4JY29va2llcyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KEdhbWUuY29va2llcykudG9TdHJpbmcoKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JdG90YWwgY29va2llcyBlYXJuZWQgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VGbG9hdChHYW1lLmNvb2tpZXNFYXJuZWQpLnRvU3RyaW5nKCkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWNvb2tpZSBjbGlja3MgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmNvb2tpZUNsaWNrcykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglnb2xkZW4gY29va2llIGNsaWNrcyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUuZ29sZGVuQ2xpY2tzKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWNvb2tpZXMgbWFkZSBieSBjbGlja2luZyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KEdhbWUuaGFuZG1hZGVDb29raWVzKS50b1N0cmluZygpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglnb2xkZW4gY29va2llcyBtaXNzZWQgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgliYWNrZ3JvdW5kIHR5cGUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmJnVHlwZSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgltaWxrIHR5cGUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLm1pbGtUeXBlKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWNvb2tpZXMgZnJvbSBwYXN0IHJ1bnMgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VGbG9hdChHYW1lLmNvb2tpZXNSZXNldCkudG9TdHJpbmcoKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JZWxkZXIgd3JhdGggOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmVsZGVyV3JhdGgpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JcGxlZGdlcyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUucGxlZGdlcykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglwbGVkZ2UgdGltZSBsZWZ0IDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5wbGVkZ2VUKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWN1cnJlbnRseSByZXNlYXJjaGluZyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUubmV4dFJlc2VhcmNoKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXJlc2VhcmNoIHRpbWUgbGVmdCA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUucmVzZWFyY2hUKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWFzY2Vuc2lvbnMgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLnJlc2V0cykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglnb2xkZW4gY29va2llIGNsaWNrcyAodGhpcyBydW4pIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5nb2xkZW5DbGlja3NMb2NhbCkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgljb29raWVzIHN1Y2tlZCBieSB3cmlua2xlcnMgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VGbG9hdChHYW1lLmNvb2tpZXNTdWNrZWQpLnRvU3RyaW5nKCkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXdyaW5rbGVzIHBvcHBlZCA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUud3JpbmtsZXJzUG9wcGVkKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXNhbnRhIGxldmVsIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5zYW50YUxldmVsKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXJlaW5kZWVyIGNsaWNrZWQgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLnJlaW5kZWVyQ2xpY2tlZCkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglzZWFzb24gdGltZSBsZWZ0IDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5zZWFzb25UKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXNlYXNvbiBzd2l0Y2hlciB1c2VzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5zZWFzb25Vc2VzKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWN1cnJlbnQgc2Vhc29uIDogIiA6ICIiKSArDQogICAgICAgIChHYW1lLnNlYXNvbiA/IEdhbWUuc2Vhc29uIDogIiIpICsNCiAgICAgICAgIjsiOw0KICAgICAgdmFyIHdyaW5rbGVycyA9IEdhbWUuU2F2ZVdyaW5rbGVycygpOw0KICAgICAgc3RyICs9DQogICAgICAgICh0eXBlID09IDMgPyAiXG4JYW1vdW50IG9mIGNvb2tpZXMgY29udGFpbmVkIGluIHdyaW5rbGVycyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KE1hdGguZmxvb3Iod3JpbmtsZXJzLmFtb3VudCkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgludW1iZXIgb2Ygd3JpbmtsZXJzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3Iod3JpbmtsZXJzLm51bWJlcikpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglwcmVzdGlnZSBsZXZlbCA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KEdhbWUucHJlc3RpZ2UpLnRvU3RyaW5nKCkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWhlYXZlbmx5IGNoaXBzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoR2FtZS5oZWF2ZW5seUNoaXBzKS50b1N0cmluZygpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgloZWF2ZW5seSBjaGlwcyBzcGVudCA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUZsb2F0KEdhbWUuaGVhdmVubHlDaGlwc1NwZW50KS50b1N0cmluZygpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgloZWF2ZW5seSBjb29raWVzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoR2FtZS5oZWF2ZW5seUNvb2tpZXMpLnRvU3RyaW5nKCkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWFzY2Vuc2lvbiBtb2RlIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5hc2NlbnNpb25Nb2RlKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXBlcm1hbmVudCB1cGdyYWRlcyA6ICIgOiAiIikgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUucGVybWFuZW50VXBncmFkZXNbMF0pKSArDQogICAgICAgICI7IiArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1sxXSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLnBlcm1hbmVudFVwZ3JhZGVzWzJdKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICBwYXJzZUludChNYXRoLmZsb29yKEdhbWUucGVybWFuZW50VXBncmFkZXNbM10pKSArDQogICAgICAgICI7IiArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1s0XSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbglkcmFnb24gbGV2ZWwgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmRyYWdvbkxldmVsKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWRyYWdvbiBhdXJhIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5kcmFnb25BdXJhKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWRyYWdvbiBhdXJhIDIgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmRyYWdvbkF1cmEyKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWNoaW1lIHR5cGUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLmNoaW1lVHlwZSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgl2b2x1bWUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoTWF0aC5mbG9vcihHYW1lLnZvbHVtZSkpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgKHR5cGUgPT0gMyA/ICJcbgludW1iZXIgb2Ygc2hpbnkgd3JpbmtsZXJzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3Iod3JpbmtsZXJzLnNoaW5pZXMpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMNCiAgICAgICAgICA/ICJcbglhbW91bnQgb2YgY29va2llcyBjb250YWluZWQgaW4gc2hpbnkgd3JpbmtsZXJzIDogIg0KICAgICAgICAgIDogIiIpICsNCiAgICAgICAgcGFyc2VGbG9hdChNYXRoLmZsb29yKHdyaW5rbGVycy5hbW91bnRTaGluaWVzKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWN1cnJlbnQgYW1vdW50IG9mIHN1Z2FyIGx1bXBzIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoTWF0aC5mbG9vcihHYW1lLmx1bXBzKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCXRvdGFsIGFtb3VudCBvZiBzdWdhciBsdW1wcyBtYWRlIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoTWF0aC5mbG9vcihHYW1lLmx1bXBzVG90YWwpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JdGltZSB3aGVuIGN1cnJlbnQgc3VnYXIgbHVtcCBzdGFydGVkIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoTWF0aC5mbG9vcihHYW1lLmx1bXBUKSkgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzDQogICAgICAgICAgPyAiXG4JdGltZSB3aGVuIGxhc3QgcmVmaWxsZWQgYSBtaW5pZ2FtZSB3aXRoIGEgc3VnYXIgbHVtcCA6ICINCiAgICAgICAgICA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoTWF0aC5mbG9vcihHYW1lLmx1bXBSZWZpbGwpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4Jc3VnYXIgbHVtcCB0eXBlIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS5sdW1wQ3VycmVudFR5cGUpKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JdmF1bHQgOiAiIDogIiIpICsNCiAgICAgICAgR2FtZS52YXVsdC5qb2luKCIsIikgKw0KICAgICAgICAiOyIgKw0KICAgICAgICAodHlwZSA9PSAzID8gIlxuCWhlcmFsZHMgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoR2FtZS5oZXJhbGRzKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JZ29sZGVuIGNvb2tpZSBmb3J0dW5lIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KEdhbWUuZm9ydHVuZUdDKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JQ3BTIGZvcnR1bmUgOiAiIDogIiIpICsNCiAgICAgICAgcGFyc2VJbnQoR2FtZS5mb3J0dW5lQ1BTKSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JaGlnaGVzdCByYXcgQ3BTIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlRmxvYXQoR2FtZS5jb29raWVzUHNSYXdIaWdoZXN0KSArDQogICAgICAgICI7IiArDQogICAgICAgICh0eXBlID09IDMgPyAiXG4JbXVzaWMgdm9sdW1lIDogIiA6ICIiKSArDQogICAgICAgIHBhcnNlSW50KE1hdGguZmxvb3IoR2FtZS52b2x1bWVNdXNpYykpICsNCiAgICAgICAgIjsiICsNCiAgICAgICAgInwiOyAvL2Nvb2tpZXMgYW5kIGxvdHMgb2Ygb3RoZXIgc3R1ZmYNCg0KICAgICAgaWYgKHR5cGUgPT0gMykNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgIlxuXG5CdWlsZGluZ3MgOiBhbW91bnQsIGJvdWdodCwgY29va2llcyBwcm9kdWNlZCwgbGV2ZWwsIG1pbmlnYW1lIGRhdGEiOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsgLy9idWlsZGluZ3MNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAodHlwZSA9PSAzKSBzdHIgKz0gIlxuCSIgKyBtZS5uYW1lICsgIiA6ICI7DQogICAgICAgIGlmIChtZS52YW5pbGxhKSB7DQogICAgICAgICAgc3RyICs9DQogICAgICAgICAgICBtZS5hbW91bnQgKw0KICAgICAgICAgICAgIiwiICsNCiAgICAgICAgICAgIG1lLmJvdWdodCArDQogICAgICAgICAgICAiLCIgKw0KICAgICAgICAgICAgcGFyc2VGbG9hdChNYXRoLmZsb29yKG1lLnRvdGFsQ29va2llcykpICsNCiAgICAgICAgICAgICIsIiArDQogICAgICAgICAgICBwYXJzZUludChtZS5sZXZlbCk7DQogICAgICAgICAgaWYgKEdhbWUuaXNNaW5pZ2FtZVJlYWR5KG1lKSkgc3RyICs9ICIsIiArIG1lLm1pbmlnYW1lLnNhdmUoKTsNCiAgICAgICAgICBlbHNlIHN0ciArPSAiLCIgKyAobWUubWluaWdhbWVTYXZlIHx8ICIiKTsNCiAgICAgICAgICBzdHIgKz0gIiwiICsgKG1lLm11dGVkID8gIjEiIDogIjAiKTsNCiAgICAgICAgICBzdHIgKz0gIiwiICsgbWUuaGlnaGVzdDsNCiAgICAgICAgICBzdHIgKz0gIjsiOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBzdHIgKz0gInwiOw0KICAgICAgaWYgKHR5cGUgPT0gMykNCiAgICAgICAgc3RyICs9ICJcblxuUGFja2VkIHVwZ3JhZGVzIGJpdGZpZWxkICh1bmxvY2tlZCBhbmQgYm91Z2h0KVxuCSI7DQogICAgICB2YXIgdG9Db21wcmVzcyA9IFtdOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzQnlJZCkgeyAvL3VwZ3JhZGVzDQogICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNCeUlkW2ldOw0KICAgICAgICBpZiAobWUudmFuaWxsYSkNCiAgICAgICAgICB0b0NvbXByZXNzLnB1c2goTWF0aC5taW4obWUudW5sb2NrZWQsIDEpLCBNYXRoLm1pbihtZS5ib3VnaHQsIDEpKTsNCiAgICAgIH0NCg0KICAgICAgdG9Db21wcmVzcyA9IHBhY2szKHRvQ29tcHJlc3Muam9pbigiIikpOyAvL3RvQ29tcHJlc3M9cGFjayh0b0NvbXByZXNzKTsvL0NvbXByZXNzTGFyZ2VCaW4odG9Db21wcmVzcyk7DQoNCiAgICAgIHN0ciArPSB0b0NvbXByZXNzOw0KICAgICAgc3RyICs9ICJ8IjsNCiAgICAgIGlmICh0eXBlID09IDMpIHN0ciArPSAiXG5cblBhY2tlZCBhY2hpZXZlbWVudHMgYml0ZmllbGQgKHdvbilcbgkiOw0KICAgICAgdmFyIHRvQ29tcHJlc3MgPSBbXTsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5BY2hpZXZlbWVudHNCeUlkKSB7IC8vYWNoaWV2ZW1lbnRzDQogICAgICAgIHZhciBtZSA9IEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFtpXTsNCiAgICAgICAgaWYgKG1lLnZhbmlsbGEpIHRvQ29tcHJlc3MucHVzaChNYXRoLm1pbihtZS53b24pKTsNCiAgICAgIH0NCiAgICAgIHRvQ29tcHJlc3MgPSBwYWNrMyh0b0NvbXByZXNzLmpvaW4oIiIpKTsgLy90b0NvbXByZXNzPXBhY2sodG9Db21wcmVzcyk7Ly9Db21wcmVzc0xhcmdlQmluKHRvQ29tcHJlc3MpOw0KICAgICAgc3RyICs9IHRvQ29tcHJlc3M7DQoNCiAgICAgIHN0ciArPSAifCI7DQogICAgICBpZiAodHlwZSA9PSAzKSBzdHIgKz0gIlxuXG5CdWZmcyA6IHR5cGUsIG1heFRpbWUsIHRpbWUsIGFyZzEsIGFyZzIsIGFyZzMiOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmJ1ZmZzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuYnVmZnNbaV07DQogICAgICAgIGlmIChtZS50eXBlKSB7DQogICAgICAgICAgaWYgKHR5cGUgPT0gMykgc3RyICs9ICJcbgkiICsgbWUudHlwZS5uYW1lICsgIiA6ICI7DQogICAgICAgICAgaWYgKG1lLnR5cGUudmFuaWxsYSkgew0KICAgICAgICAgICAgc3RyICs9IG1lLnR5cGUuaWQgKyAiLCIgKyBtZS5tYXhUaW1lICsgIiwiICsgbWUudGltZTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWUuYXJnMSAhPT0gInVuZGVmaW5lZCIpDQogICAgICAgICAgICAgIHN0ciArPSAiLCIgKyBwYXJzZUZsb2F0KG1lLmFyZzEpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtZS5hcmcyICE9PSAidW5kZWZpbmVkIikNCiAgICAgICAgICAgICAgc3RyICs9ICIsIiArIHBhcnNlRmxvYXQobWUuYXJnMik7DQogICAgICAgICAgICBpZiAodHlwZW9mIG1lLmFyZzMgIT09ICJ1bmRlZmluZWQiKQ0KICAgICAgICAgICAgICBzdHIgKz0gIiwiICsgcGFyc2VGbG9hdChtZS5hcmczKTsNCiAgICAgICAgICAgIHN0ciArPSAiOyI7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGlmICh0eXBlID09IDMpIHN0ciArPSAiXG5cbkN1c3RvbSA6XG4iOw0KDQogICAgICBzdHIgKz0gInwiOw0KICAgICAgc3RyICs9IEdhbWUuc2F2ZU1vZERhdGEoKTsNCg0KICAgICAgR2FtZS5sYXN0U2F2ZURhdGEgPSBzdHI7DQoNCiAgICAgIGlmICh0eXBlID09IDIgfHwgdHlwZSA9PSAzKSB7DQogICAgICAgIHJldHVybiBzdHI7DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gMSkgew0KICAgICAgICBzdHIgPSBlc2NhcGUodXRmOF90b19iNjQoc3RyKSArICIhRU5EISIpOw0KICAgICAgICByZXR1cm4gc3RyOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKEdhbWUudXNlTG9jYWxTdG9yYWdlKSB7DQogICAgICAgICAgLy9zbyB3ZSB1c2VkIHRvIHNhdmUgdGhlIGdhbWUgdXNpbmcgYnJvd3NlciBjb29raWVzLCB3aGljaCB3YXMganVzdCByZWFsbHkgbmVhdCBjb25zaWRlcmluZyB0aGUgZ2FtZSdzIG5hbWUNCiAgICAgICAgICAvL3dlJ3JlIHVzaW5nIGxvY2Fsc3RvcmFnZSBub3csIHdoaWNoIGlzIG1vcmUgZWZmaWNpZW50IGJ1dCBub3QgYXMgY29vbA0KICAgICAgICAgIC8vYSBtb21lbnQgb2Ygc2lsZW5jZSBmb3Igb3VyIGZhbGxlbiBwdW5zDQogICAgICAgICAgc3RyID0gdXRmOF90b19iNjQoc3RyKSArICIhRU5EISI7DQogICAgICAgICAgaWYgKHN0ci5sZW5ndGggPCAxMCkgew0KICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICJTYXZpbmcgZmFpbGVkISIsDQogICAgICAgICAgICAgICJQdXJjaGFzaW5nIGFuIHVwZ3JhZGUgYW5kIHNhdmluZyBhZ2FpbiBtaWdodCBmaXggdGhpcy48YnI+VGhpcyByZWFsbHkgc2hvdWxkbid0IGhhcHBlbjsgcGxlYXNlIG5vdGlmeSBPcnRlaWwgb24gaGlzIHR1bWJsci4iDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBzdHIgPSBlc2NhcGUoc3RyKTsNCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNldChHYW1lLlNhdmVUbywgc3RyKTsgLy9hYWFuZCBzYXZlDQogICAgICAgICAgICBpZiAoQXBwKSBBcHAuc2F2ZShzdHIpOw0KICAgICAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2VHZXQoR2FtZS5TYXZlVG8pKSB7DQogICAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICAgIGxvYygiRXJyb3Igd2hpbGUgc2F2aW5nIiksDQogICAgICAgICAgICAgICAgbG9jKCJFeHBvcnQgeW91ciBzYXZlIGluc3RlYWQhIikNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuaGFzRm9jdXMoKSkgew0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeShsb2MoIkdhbWUgc2F2ZWQiKSwgIiIsICIiLCAxLCAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0gLy9sZWdhY3kgc3lzdGVtDQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIC8vdGhhdCdzIHJpZ2h0DQogICAgICAgICAgLy93ZSdyZSB1c2luZyBjb29raWVzDQogICAgICAgICAgLy95ZWFoIEkgd2VudCB0aGVyZQ0KICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOyAvL3dlIHN0b3JpbiBkaXMgZm9yIDUgeWVhcnMsIHBlb3BsZQ0KICAgICAgICAgIG5vdy5zZXRGdWxsWWVhcihub3cuZ2V0RnVsbFllYXIoKSArIDUpOyAvL21taCBzdGFsZSBjb29raWVzDQogICAgICAgICAgc3RyID0gdXRmOF90b19iNjQoc3RyKSArICIhRU5EISI7DQogICAgICAgICAgR2FtZS5zYXZlRGF0YSA9IGVzY2FwZShzdHIpOw0KICAgICAgICAgIHN0ciA9DQogICAgICAgICAgICBHYW1lLlNhdmVUbyArDQogICAgICAgICAgICAiPSIgKw0KICAgICAgICAgICAgZXNjYXBlKHN0cikgKw0KICAgICAgICAgICAgIjsgZXhwaXJlcz0iICsNCiAgICAgICAgICAgIG5vdy50b1VUQ1N0cmluZygpICsNCiAgICAgICAgICAgICI7IjsNCiAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBzdHI7IC8vYWFhbmQgc2F2ZQ0KICAgICAgICAgIGlmIChBcHApIEFwcC5zYXZlKHN0cik7DQogICAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKEdhbWUuU2F2ZVRvKSA8IDApIHsNCiAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICBsb2MoIkVycm9yIHdoaWxlIHNhdmluZyIpLA0KICAgICAgICAgICAgICBsb2MoIkV4cG9ydCB5b3VyIHNhdmUgaW5zdGVhZCEiKSwNCiAgICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIDENCiAgICAgICAgICAgICk7DQogICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5oYXNGb2N1cygpKSB7DQogICAgICAgICAgICBHYW1lLk5vdGlmeShsb2MoIkdhbWUgc2F2ZWQiKSwgIiIsICIiLCAxLCAxKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCUxPQUQNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLnNhbHZhZ2VTYXZlID0gZnVuY3Rpb24gKCkgew0KICAgICAgLy9mb3Igd2hlbiBDb29raWUgQ2xpY2tlciB3b24ndCBsb2FkIGFuZCB5b3UgbmVlZCB5b3VyIHNhdmUNCiAgICAgIGNvbnNvbGUubG9nKCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0iKTsNCiAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAnVGhpcyBpcyB5b3VyIHNhdmUgZGF0YS4gQ29weXBhc3RlIGl0ICh3aXRob3V0IHF1b3RhdGlvbiBtYXJrcykgaW50byBhbm90aGVyIHZlcnNpb24gdXNpbmcgdGhlICJJbXBvcnQgc2F2ZSIgZmVhdHVyZS4nDQogICAgICApOw0KICAgICAgY29uc29sZS5sb2cobG9jYWxTdG9yYWdlR2V0KEdhbWUuU2F2ZVRvKSk7DQogICAgfTsNCiAgICBHYW1lLkxvYWRTYXZlID0gZnVuY3Rpb24gKGRhdGEsIGlnbm9yZVZlcnNpb25Jc3N1ZXMpIHsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gInVuZGVmaW5lZCIpIHN0ciA9IHVuZXNjYXBlKGRhdGEpOw0KICAgICAgZWxzZSB7DQogICAgICAgIGlmIChBcHApIHsNCiAgICAgICAgICBBcHAuZ2V0TW9zdFJlY2VudFNhdmUoZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICAgIEdhbWUuTG9hZFNhdmUoZGF0YSwgdHJ1ZSk7DQogICAgICAgICAgfSk7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLnVzZUxvY2FsU3RvcmFnZSkgew0KICAgICAgICAgIHZhciBsb2NhbCA9IGxvY2FsU3RvcmFnZUdldChHYW1lLlNhdmVUbyk7DQogICAgICAgICAgaWYgKCFsb2NhbCkgew0KICAgICAgICAgICAgLy9ubyBsb2NhbHN0b3JhZ2Ugc2F2ZSBmb3VuZD8gbGV0J3MgZ2V0IHRoZSBjb29raWUgb25lIGxhc3QgdGltZQ0KICAgICAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKEdhbWUuU2F2ZVRvKSA+PSAwKSB7DQogICAgICAgICAgICAgIHN0ciA9IHVuZXNjYXBlKGRvY3VtZW50LmNvb2tpZS5zcGxpdChHYW1lLlNhdmVUbyArICI9IilbMV0pOw0KICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPQ0KICAgICAgICAgICAgICAgIEdhbWUuU2F2ZVRvICsgIj07ZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAxIEdNVDsiOw0KICAgICAgICAgICAgfSBlbHNlIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc3RyID0gdW5lc2NhcGUobG9jYWwpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSAvL2xlZ2FjeSBzeXN0ZW0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKEdhbWUuU2F2ZVRvKSA+PSAwKQ0KICAgICAgICAgICAgc3RyID0gdW5lc2NhcGUoDQogICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZS5zcGxpdChHYW1lLlNhdmVUbyArICI9IilbMV0NCiAgICAgICAgICAgICk7IC8vZ2V0IGNvb2tpZSBoZXJlDQogICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChzdHIgIT0gIiIpIHsNCiAgICAgICAgdmFyIHZlcnNpb24gPSAwOw0KICAgICAgICB2YXIgb2xkc3RyID0gc3RyLnNwbGl0KCJ8Iik7DQogICAgICAgIGlmIChvbGRzdHJbMF0ubGVuZ3RoIDwgMSkgcmV0dXJuIGZhbHNlOw0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoIiFFTkQhIilbMF07DQogICAgICAgICAgc3RyID0gYjY0X3RvX3V0Zjgoc3RyKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc3RyID09ICIiKSByZXR1cm4gZmFsc2U7DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIHZhciBzcGwgPSAiIjsNCiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoInwiKTsNCiAgICAgICAgICB2ZXJzaW9uID0gcGFyc2VGbG9hdChzdHJbMF0pOw0KICAgICAgICAgIEdhbWUubG9hZGVkRnJvbVZlcnNpb24gPSB2ZXJzaW9uOw0KDQogICAgICAgICAgaWYgKGlzTmFOKHZlcnNpb24pIHx8IHN0ci5sZW5ndGggPCA1KSB7DQogICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgbG9jKCJFcnJvciBpbXBvcnRpbmcgc2F2ZSIpLA0KICAgICAgICAgICAgICBsb2MoIk9vcHMsIGxvb2tzIGxpa2UgdGhlIGltcG9ydCBzdHJpbmcgaXMgYWxsIHdyb25nISIpLA0KICAgICAgICAgICAgICAiIiwNCiAgICAgICAgICAgICAgNiwNCiAgICAgICAgICAgICAgMQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHZlcnNpb24gPj0gMSAmJiB2ZXJzaW9uID4gR2FtZS52ZXJzaW9uKSB7DQogICAgICAgICAgICBpZiAoaWdub3JlVmVyc2lvbklzc3VlcykNCiAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgIlJldHJpZXZpbmcgc2F2ZSBmcm9tIGEgZnV0dXJlIHZlcnNpb24uIiwNCiAgICAgICAgICAgICAgICAiVGhhdCdzLi4ub2RkLiIsDQogICAgICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAxDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgbG9jKCJFcnJvciBpbXBvcnRpbmcgc2F2ZSIpLA0KICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICJZb3UgYXJlIGF0dGVtcHRpbmcgdG8gbG9hZCBhIHNhdmUgZnJvbSBhIGZ1dHVyZSB2ZXJzaW9uICh2LiAlMTsgeW91IGFyZSB1c2luZyB2LiAlMikuIiwNCiAgICAgICAgICAgICAgICAgIFt2ZXJzaW9uLCBHYW1lLnZlcnNpb25dDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAiIiwNCiAgICAgICAgICAgICAgICA2LA0KICAgICAgICAgICAgICAgIDENCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodmVyc2lvbiA+PSAxKSB7DQogICAgICAgICAgICBHYW1lLlQgPSAwOw0KDQogICAgICAgICAgICBzcGwgPSBzdHJbMl0uc3BsaXQoIjsiKTsgLy9zYXZlIHN0YXRzDQogICAgICAgICAgICBHYW1lLnN0YXJ0RGF0ZSA9IHBhcnNlSW50KHNwbFswXSk7DQogICAgICAgICAgICBHYW1lLmZ1bGxEYXRlID0gcGFyc2VJbnQoc3BsWzFdKTsNCiAgICAgICAgICAgIEdhbWUubGFzdERhdGUgPSBwYXJzZUludChzcGxbMl0pOw0KICAgICAgICAgICAgdmFyIGJha2VyeU5hbWUgPSBzcGxbM10gPyBzcGxbM10gOiBHYW1lLkdldEJha2VyeU5hbWUoKTsNCiAgICAgICAgICAgIEdhbWUuc2VlZCA9IHNwbFs0XSA/IHNwbFs0XSA6IEdhbWUubWFrZVNlZWQoKTsNCiAgICAgICAgICAgIC8vcHJlZnMNCiAgICAgICAgICAgIGlmICh2ZXJzaW9uIDwgMS4wNTAzKSBzcGwgPSBzdHJbM10uc3BsaXQoIiIpOw0KICAgICAgICAgICAgZWxzZSBpZiAodmVyc2lvbiA8IDIuMDA0Nikgc3BsID0gdW5wYWNrMihzdHJbM10pLnNwbGl0KCIiKTsNCiAgICAgICAgICAgIGVsc2Ugc3BsID0gc3RyWzNdLnNwbGl0KCIiKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMucGFydGljbGVzID0gcGFyc2VJbnQoc3BsWzBdKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMubnVtYmVycyA9IHBhcnNlSW50KHNwbFsxXSk7DQogICAgICAgICAgICBHYW1lLnByZWZzLmF1dG9zYXZlID0gcGFyc2VJbnQoc3BsWzJdKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuYXV0b3VwZGF0ZSA9IHNwbFszXSA/IHBhcnNlSW50KHNwbFszXSkgOiAxOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5taWxrID0gc3BsWzRdID8gcGFyc2VJbnQoc3BsWzRdKSA6IDE7DQogICAgICAgICAgICBHYW1lLnByZWZzLmZhbmN5ID0gcGFyc2VJbnQoc3BsWzVdKTsNCiAgICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KSBHYW1lLnJlbW92ZUNsYXNzKCJub0ZhbmN5Iik7DQogICAgICAgICAgICBlbHNlIGlmICghR2FtZS5wcmVmcy5mYW5jeSkgR2FtZS5hZGRDbGFzcygibm9GYW5jeSIpOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy53YXJuID0gc3BsWzZdID8gcGFyc2VJbnQoc3BsWzZdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLmN1cnNvcnMgPSBzcGxbN10gPyBwYXJzZUludChzcGxbN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuZm9jdXMgPSBzcGxbOF0gPyBwYXJzZUludChzcGxbOF0pIDogMDsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuZm9ybWF0ID0gc3BsWzldID8gcGFyc2VJbnQoc3BsWzldKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLm5vdGlmcyA9IHNwbFsxMF0gPyBwYXJzZUludChzcGxbMTBdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLndvYmJseSA9IHNwbFsxMV0gPyBwYXJzZUludChzcGxbMTFdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLm1vbm9zcGFjZSA9IHNwbFsxMl0gPyBwYXJzZUludChzcGxbMTJdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLmZpbHRlcnMgPSBzcGxbMTNdID8gcGFyc2VJbnQoc3BsWzEzXSkgOiAxOw0KICAgICAgICAgICAgaWYgKEdhbWUucHJlZnMuZmlsdGVycykgR2FtZS5yZW1vdmVDbGFzcygibm9GaWx0ZXJzIik7DQogICAgICAgICAgICBlbHNlIGlmICghR2FtZS5wcmVmcy5maWx0ZXJzKSBHYW1lLmFkZENsYXNzKCJub0ZpbHRlcnMiKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuY29va2llc291bmQgPSBzcGxbMTRdID8gcGFyc2VJbnQoc3BsWzE0XSkgOiAxOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5jcmF0ZXMgPSBzcGxbMTVdID8gcGFyc2VJbnQoc3BsWzE1XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9IHNwbFsxNl0gPyBwYXJzZUludChzcGxbMTZdKSA6IDE7DQogICAgICAgICAgICBHYW1lLnByZWZzLmV4dHJhQnV0dG9ucyA9IHNwbFsxN10gPyBwYXJzZUludChzcGxbMTddKSA6IDE7DQogICAgICAgICAgICBpZiAoIUdhbWUucHJlZnMuZXh0cmFCdXR0b25zKSBHYW1lLnJlbW92ZUNsYXNzKCJleHRyYUJ1dHRvbnMiKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKEdhbWUucHJlZnMuZXh0cmFCdXR0b25zKSBHYW1lLmFkZENsYXNzKCJleHRyYUJ1dHRvbnMiKTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMuYXNrTHVtcHMgPSBzcGxbMThdID8gcGFyc2VJbnQoc3BsWzE4XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5jdXN0b21HcmFuZG1hcyA9IHNwbFsxOV0gPyBwYXJzZUludChzcGxbMTldKSA6IDE7DQogICAgICAgICAgICBHYW1lLnByZWZzLnRpbWVvdXQgPSBzcGxbMjBdID8gcGFyc2VJbnQoc3BsWzIwXSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5jbG91ZFNhdmUgPSBzcGxbMjFdID8gcGFyc2VJbnQoc3BsWzIxXSkgOiAxOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5iZ011c2ljID0gc3BsWzIyXSA/IHBhcnNlSW50KHNwbFsyMl0pIDogMTsNCiAgICAgICAgICAgIEdhbWUucHJlZnMubm90U2NhcnkgPSBzcGxbMjNdID8gcGFyc2VJbnQoc3BsWzIzXSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wcmVmcy5mdWxsc2NyZWVuID0gc3BsWzI0XSA/IHBhcnNlSW50KHNwbFsyNF0pIDogMDsNCiAgICAgICAgICAgIGlmIChBcHApIEFwcC5zZXRGdWxsc2NyZWVuKEdhbWUucHJlZnMuZnVsbHNjcmVlbik7DQogICAgICAgICAgICBHYW1lLnByZWZzLnNjcmVlbnJlYWRlciA9IHNwbFsyNV0gPyBwYXJzZUludChzcGxbMjVdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnByZWZzLmRpc2NvcmRQcmVzZW5jZSA9IHNwbFsyNl0gPyBwYXJzZUludChzcGxbMjZdKSA6IDE7DQogICAgICAgICAgICBCZWF1dGlmeUFsbCgpOw0KICAgICAgICAgICAgc3BsID0gc3RyWzRdLnNwbGl0KCI7Iik7IC8vY29va2llcyBhbmQgbG90cyBvZiBvdGhlciBzdHVmZg0KICAgICAgICAgICAgR2FtZS5jb29raWVzID0gcGFyc2VGbG9hdChzcGxbMF0pOw0KICAgICAgICAgICAgR2FtZS5jb29raWVzRWFybmVkID0gcGFyc2VGbG9hdChzcGxbMV0pOw0KICAgICAgICAgICAgR2FtZS5jb29raWVDbGlja3MgPSBzcGxbMl0gPyBwYXJzZUludChzcGxbMl0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuZ29sZGVuQ2xpY2tzID0gc3BsWzNdID8gcGFyc2VJbnQoc3BsWzNdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmhhbmRtYWRlQ29va2llcyA9IHNwbFs0XSA/IHBhcnNlRmxvYXQoc3BsWzRdKSA6IDA7DQogICAgICAgICAgICBHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcyA9IHNwbFs1XSA/IHBhcnNlSW50KHNwbFs1XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5iZ1R5cGUgPSBzcGxbNl0gPyBwYXJzZUludChzcGxbNl0pIDogMDsNCiAgICAgICAgICAgIEdhbWUubWlsa1R5cGUgPSBzcGxbN10gPyBwYXJzZUludChzcGxbN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUuY29va2llc1Jlc2V0ID0gc3BsWzhdID8gcGFyc2VGbG9hdChzcGxbOF0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuZWxkZXJXcmF0aCA9IHNwbFs5XSA/IHBhcnNlSW50KHNwbFs5XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5wbGVkZ2VzID0gc3BsWzEwXSA/IHBhcnNlSW50KHNwbFsxMF0pIDogMDsNCiAgICAgICAgICAgIEdhbWUucGxlZGdlVCA9IHNwbFsxMV0gPyBwYXJzZUludChzcGxbMTFdKSA6IDA7DQogICAgICAgICAgICBHYW1lLm5leHRSZXNlYXJjaCA9IHNwbFsxMl0gPyBwYXJzZUludChzcGxbMTJdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnJlc2VhcmNoVCA9IHNwbFsxM10gPyBwYXJzZUludChzcGxbMTNdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnJlc2V0cyA9IHNwbFsxNF0gPyBwYXJzZUludChzcGxbMTRdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmdvbGRlbkNsaWNrc0xvY2FsID0gc3BsWzE1XSA/IHBhcnNlSW50KHNwbFsxNV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuY29va2llc1N1Y2tlZCA9IHNwbFsxNl0gPyBwYXJzZUZsb2F0KHNwbFsxNl0pIDogMDsNCiAgICAgICAgICAgIEdhbWUud3JpbmtsZXJzUG9wcGVkID0gc3BsWzE3XSA/IHBhcnNlSW50KHNwbFsxN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUuc2FudGFMZXZlbCA9IHNwbFsxOF0gPyBwYXJzZUludChzcGxbMThdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnJlaW5kZWVyQ2xpY2tlZCA9IHNwbFsxOV0gPyBwYXJzZUludChzcGxbMTldKSA6IDA7DQogICAgICAgICAgICBHYW1lLnNlYXNvblQgPSBzcGxbMjBdID8gcGFyc2VJbnQoc3BsWzIwXSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5zZWFzb25Vc2VzID0gc3BsWzIxXSA/IHBhcnNlSW50KHNwbFsyMV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuc2Vhc29uID0gc3BsWzIyXSA/IHNwbFsyMl0gOiBHYW1lLmJhc2VTZWFzb247DQogICAgICAgICAgICB2YXIgd3JpbmtsZXJzID0gew0KICAgICAgICAgICAgICBhbW91bnQ6IHNwbFsyM10gPyBwYXJzZUZsb2F0KHNwbFsyM10pIDogMCwNCiAgICAgICAgICAgICAgbnVtYmVyOiBzcGxbMjRdID8gcGFyc2VJbnQoc3BsWzI0XSkgOiAwLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIEdhbWUucHJlc3RpZ2UgPSBzcGxbMjVdID8gcGFyc2VGbG9hdChzcGxbMjVdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHMgPSBzcGxbMjZdID8gcGFyc2VGbG9hdChzcGxbMjZdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNTcGVudCA9IHNwbFsyN10gPyBwYXJzZUZsb2F0KHNwbFsyN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUuaGVhdmVubHlDb29raWVzID0gc3BsWzI4XSA/IHBhcnNlRmxvYXQoc3BsWzI4XSkgOiAwOw0KICAgICAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2RlID0gc3BsWzI5XSA/IHBhcnNlSW50KHNwbFsyOV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbMF0gPSBzcGxbMzBdID8gcGFyc2VJbnQoc3BsWzMwXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbMV0gPSBzcGxbMzFdID8gcGFyc2VJbnQoc3BsWzMxXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbMl0gPSBzcGxbMzJdID8gcGFyc2VJbnQoc3BsWzMyXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbM10gPSBzcGxbMzNdID8gcGFyc2VJbnQoc3BsWzMzXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUucGVybWFuZW50VXBncmFkZXNbNF0gPSBzcGxbMzRdID8gcGFyc2VJbnQoc3BsWzM0XSkgOiAtMTsNCiAgICAgICAgICAgIC8vaWYgKHZlcnNpb248MS4wNSkge0dhbWUuaGVhdmVubHlDaGlwc0Vhcm5lZD1HYW1lLkhvd011Y2hQcmVzdGlnZShHYW1lLmNvb2tpZXNSZXNldCk7R2FtZS5oZWF2ZW5seUNoaXBzPUdhbWUuaGVhdmVubHlDaGlwc0Vhcm5lZDt9DQogICAgICAgICAgICBHYW1lLmRyYWdvbkxldmVsID0gc3BsWzM1XSA/IHBhcnNlSW50KHNwbFszNV0pIDogMDsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgdmVyc2lvbiA8IDIuMDA0MSAmJg0KICAgICAgICAgICAgICBHYW1lLmRyYWdvbkxldmVsID09IEdhbWUuZHJhZ29uTGV2ZWxzLmxlbmd0aCAtIDINCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBHYW1lLmRyYWdvbkxldmVsID0gR2FtZS5kcmFnb25MZXZlbHMubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIEdhbWUuZHJhZ29uQXVyYSA9IHNwbFszNl0gPyBwYXJzZUludChzcGxbMzZdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmRyYWdvbkF1cmEyID0gc3BsWzM3XSA/IHBhcnNlSW50KHNwbFszN10pIDogMDsNCiAgICAgICAgICAgIEdhbWUuY2hpbWVUeXBlID0gc3BsWzM4XSA/IHBhcnNlSW50KHNwbFszOF0pIDogMDsNCiAgICAgICAgICAgIEdhbWUudm9sdW1lID0gc3BsWzM5XSA/IHBhcnNlSW50KHNwbFszOV0pIDogNzU7DQogICAgICAgICAgICB3cmlua2xlcnMuc2hpbmllcyA9IHNwbFs0MF0gPyBwYXJzZUludChzcGxbNDBdKSA6IDA7DQogICAgICAgICAgICB3cmlua2xlcnMuYW1vdW50U2hpbmllcyA9IHNwbFs0MV0gPyBwYXJzZUZsb2F0KHNwbFs0MV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUubHVtcHMgPSBzcGxbNDJdID8gcGFyc2VGbG9hdChzcGxbNDJdKSA6IC0xOw0KICAgICAgICAgICAgR2FtZS5sdW1wc1RvdGFsID0gc3BsWzQzXSA/IHBhcnNlRmxvYXQoc3BsWzQzXSkgOiAtMTsNCiAgICAgICAgICAgIEdhbWUubHVtcFQgPSBzcGxbNDRdID8gcGFyc2VJbnQoc3BsWzQ0XSkgOiBEYXRlLm5vdygpOw0KICAgICAgICAgICAgR2FtZS5sdW1wUmVmaWxsID0gc3BsWzQ1XSA/IHBhcnNlSW50KHNwbFs0NV0pIDogMDsNCiAgICAgICAgICAgIGlmICh2ZXJzaW9uIDwgMi4wMjIpIEdhbWUubHVtcFJlZmlsbCA9IEdhbWUuZnBzICogNjA7DQogICAgICAgICAgICBHYW1lLmx1bXBDdXJyZW50VHlwZSA9IHNwbFs0Nl0gPyBwYXJzZUludChzcGxbNDZdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnZhdWx0ID0gc3BsWzQ3XSA/IHNwbFs0N10uc3BsaXQoIiwiKSA6IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnZhdWx0KSB7DQogICAgICAgICAgICAgIEdhbWUudmF1bHRbaV0gPSBwYXJzZUludChHYW1lLnZhdWx0W2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBhY3R1YWxIZXJhbGRzID0gR2FtZS5oZXJhbGRzOyAvL3dlIHN0b3JlIHRoZSBhY3R1YWwgYW1vdW50IG9mIGhlcmFsZHMgdG8gcmVzdG9yZSBpdCBsYXRlcjsgaGVyZSB3ZSB1c2VkIHRoZSBhbW91bnQgcHJlc2VudCBpbiB0aGUgc2F2ZSB0byBjb21wdXRlIG9mZmxpbmUgQ3BTDQogICAgICAgICAgICBHYW1lLmhlcmFsZHMgPSBzcGxbNDhdID8gcGFyc2VGbG9hdChzcGxbNDhdKSA6IEdhbWUuaGVyYWxkczsNCiAgICAgICAgICAgIEdhbWUuZm9ydHVuZUdDID0gc3BsWzQ5XSA/IHBhcnNlSW50KHNwbFs0OV0pIDogMDsNCiAgICAgICAgICAgIEdhbWUuZm9ydHVuZUNQUyA9IHNwbFs1MF0gPyBwYXJzZUludChzcGxbNTBdKSA6IDA7DQogICAgICAgICAgICBHYW1lLmNvb2tpZXNQc1Jhd0hpZ2hlc3QgPSBzcGxbNTFdID8gcGFyc2VGbG9hdChzcGxbNTFdKSA6IDA7DQogICAgICAgICAgICBHYW1lLnZvbHVtZU11c2ljID0gc3BsWzUyXSA/IHBhcnNlSW50KHNwbFs1Ml0pIDogNTA7DQoNCiAgICAgICAgICAgIHNwbCA9IHN0cls1XS5zcGxpdCgiOyIpOyAvL2J1aWxkaW5ncw0KICAgICAgICAgICAgR2FtZS5CdWlsZGluZ3NPd25lZCA9IDA7DQogICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0c0J5SWQpIHsNCiAgICAgICAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzQnlJZFtpXTsNCiAgICAgICAgICAgICAgbWUuc3dpdGNoTWluaWdhbWUoZmFsc2UpOw0KICAgICAgICAgICAgICBtZS5waWNzID0gW107DQogICAgICAgICAgICAgIGlmIChzcGxbaV0pIHsNCiAgICAgICAgICAgICAgICB2YXIgbWVzdHIgPSBzcGxbaV0udG9TdHJpbmcoKS5zcGxpdCgiLCIpOw0KICAgICAgICAgICAgICAgIG1lLmFtb3VudCA9IHBhcnNlSW50KG1lc3RyWzBdKTsNCiAgICAgICAgICAgICAgICBtZS5ib3VnaHQgPSBwYXJzZUludChtZXN0clsxXSk7DQogICAgICAgICAgICAgICAgbWUudG90YWxDb29raWVzID0gcGFyc2VGbG9hdChtZXN0clsyXSk7DQogICAgICAgICAgICAgICAgbWUubGV2ZWwgPSBwYXJzZUludChtZXN0clszXSB8fCAwKTsNCiAgICAgICAgICAgICAgICBtZS5oaWdoZXN0ID0gdmVyc2lvbiA+PSAyLjAyNCA/IHBhcnNlSW50KG1lc3RyWzZdKSA6IG1lLmFtb3VudDsNCiAgICAgICAgICAgICAgICBpZiAobWUubWluaWdhbWUgJiYgbWUubWluaWdhbWVMb2FkZWQgJiYgbWUubWluaWdhbWUucmVzZXQpIHsNCiAgICAgICAgICAgICAgICAgIG1lLm1pbmlnYW1lLnJlc2V0KHRydWUpOw0KICAgICAgICAgICAgICAgICAgbWUubWluaWdhbWUubG9hZChtZXN0cls0XSB8fCAiIik7DQogICAgICAgICAgICAgICAgfSBlbHNlIG1lLm1pbmlnYW1lU2F2ZSA9IG1lc3RyWzRdIHx8IDA7DQogICAgICAgICAgICAgICAgbWUubXV0ZWQgPSBwYXJzZUludChtZXN0cls1XSkgfHwgMDsNCiAgICAgICAgICAgICAgICBHYW1lLkJ1aWxkaW5nc093bmVkICs9IG1lLmFtb3VudDsNCiAgICAgICAgICAgICAgICBpZiAodmVyc2lvbiA8IDIuMDAzKSBtZS5sZXZlbCA9IDA7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbWUuYW1vdW50ID0gMDsNCiAgICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgICAgICAgbWUuYm91Z2h0ID0gMDsNCiAgICAgICAgICAgICAgICBtZS5oaWdoZXN0ID0gMDsNCiAgICAgICAgICAgICAgICBtZS50b3RhbENvb2tpZXMgPSAwOw0KICAgICAgICAgICAgICAgIG1lLmxldmVsID0gMDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBHYW1lLnNldFZvbHVtZU11c2ljKEdhbWUudm9sdW1lTXVzaWMpOw0KDQogICAgICAgICAgICBHYW1lLkxvYWRNaW5pZ2FtZXMoKTsNCg0KICAgICAgICAgICAgaWYgKHZlcnNpb24gPCAxLjAzNSkgew0KICAgICAgICAgICAgICAvL29sZCBub24tYmluYXJ5IGFsZ29yaXRobQ0KICAgICAgICAgICAgICBzcGwgPSBzdHJbNl0uc3BsaXQoIjsiKTsgLy91cGdyYWRlcw0KICAgICAgICAgICAgICBHYW1lLlVwZ3JhZGVzT3duZWQgPSAwOw0KICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNCeUlkKSB7DQogICAgICAgICAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc0J5SWRbaV07DQogICAgICAgICAgICAgICAgaWYgKHNwbFtpXSkgew0KICAgICAgICAgICAgICAgICAgdmFyIG1lc3RyID0gc3BsW2ldLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IHBhcnNlSW50KG1lc3RyWzBdKTsNCiAgICAgICAgICAgICAgICAgIG1lLmJvdWdodCA9IHBhcnNlSW50KG1lc3RyWzFdKTsNCiAgICAgICAgICAgICAgICAgIGlmIChtZS5ib3VnaHQgJiYgR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZChtZS5wb29sKSkNCiAgICAgICAgICAgICAgICAgICAgR2FtZS5VcGdyYWRlc093bmVkKys7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIG1lLnVubG9ja2VkID0gMDsNCiAgICAgICAgICAgICAgICAgIG1lLmJvdWdodCA9IDA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChzdHJbN10pIHNwbCA9IHN0cls3XS5zcGxpdCgiOyIpOw0KICAgICAgICAgICAgICBlbHNlIHNwbCA9IFtdOyAvL2FjaGlldmVtZW50cw0KICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkID0gMDsNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLkFjaGlldmVtZW50c0J5SWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLkFjaGlldmVtZW50c0J5SWRbaV07DQogICAgICAgICAgICAgICAgaWYgKHNwbFtpXSkgew0KICAgICAgICAgICAgICAgICAgdmFyIG1lc3RyID0gc3BsW2ldLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgICBtZS53b24gPSBwYXJzZUludChtZXN0clswXSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIG1lLndvbiA9IDA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChtZS53b24gJiYgR2FtZS5Db3VudHNBc0FjaGlldmVtZW50T3duZWQobWUucG9vbCkpDQogICAgICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkKys7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAodmVyc2lvbiA8IDEuMDUwMikgew0KICAgICAgICAgICAgICAvL29sZCBhd2Z1bCBwYWNraW5nIHN5c3RlbQ0KICAgICAgICAgICAgICBpZiAoc3RyWzZdKSBzcGwgPSBzdHJbNl07DQogICAgICAgICAgICAgIGVsc2Ugc3BsID0gW107IC8vdXBncmFkZXMNCiAgICAgICAgICAgICAgaWYgKHZlcnNpb24gPCAxLjA1KSBzcGwgPSBVbmNvbXByZXNzTGFyZ2VCaW4oc3BsKTsNCiAgICAgICAgICAgICAgZWxzZSBzcGwgPSB1bnBhY2soc3BsKTsNCiAgICAgICAgICAgICAgR2FtZS5VcGdyYWRlc093bmVkID0gMDsNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzQnlJZCkgew0KICAgICAgICAgICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNCeUlkW2ldOw0KICAgICAgICAgICAgICAgIGlmIChzcGxbaSAqIDJdKSB7DQogICAgICAgICAgICAgICAgICB2YXIgbWVzdHIgPSBbc3BsW2kgKiAyXSwgc3BsW2kgKiAyICsgMV1dOw0KICAgICAgICAgICAgICAgICAgbWUudW5sb2NrZWQgPSBwYXJzZUludChtZXN0clswXSk7DQogICAgICAgICAgICAgICAgICBtZS5ib3VnaHQgPSBwYXJzZUludChtZXN0clsxXSk7DQogICAgICAgICAgICAgICAgICBpZiAobWUuYm91Z2h0ICYmIEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQobWUucG9vbCkpDQogICAgICAgICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNPd25lZCsrOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgICAgICAgICBtZS5ib3VnaHQgPSAwOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAoc3RyWzddKSBzcGwgPSBzdHJbN107DQogICAgICAgICAgICAgIGVsc2Ugc3BsID0gW107IC8vYWNoaWV2ZW1lbnRzDQogICAgICAgICAgICAgIGlmICh2ZXJzaW9uIDwgMS4wNSkgc3BsID0gVW5jb21wcmVzc0xhcmdlQmluKHNwbCk7DQogICAgICAgICAgICAgIGVsc2Ugc3BsID0gdW5wYWNrKHNwbCk7DQogICAgICAgICAgICAgIEdhbWUuQWNoaWV2ZW1lbnRzT3duZWQgPSAwOw0KICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuQWNoaWV2ZW1lbnRzQnlJZCkgew0KICAgICAgICAgICAgICAgIHZhciBtZSA9IEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFtpXTsNCiAgICAgICAgICAgICAgICBpZiAoc3BsW2ldKSB7DQogICAgICAgICAgICAgICAgICB2YXIgbWVzdHIgPSBbc3BsW2ldXTsNCiAgICAgICAgICAgICAgICAgIG1lLndvbiA9IHBhcnNlSW50KG1lc3RyWzBdKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgbWUud29uID0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKG1lLndvbiAmJiBHYW1lLkNvdW50c0FzQWNoaWV2ZW1lbnRPd25lZChtZS5wb29sKSkNCiAgICAgICAgICAgICAgICAgIEdhbWUuQWNoaWV2ZW1lbnRzT3duZWQrKzsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgaWYgKHN0cls2XSkgc3BsID0gc3RyWzZdOw0KICAgICAgICAgICAgICBlbHNlIHNwbCA9IFtdOyAvL3VwZ3JhZGVzDQogICAgICAgICAgICAgIGlmICh2ZXJzaW9uIDwgMi4wMDQ2KSBzcGwgPSB1bnBhY2syKHNwbCkuc3BsaXQoIiIpOw0KICAgICAgICAgICAgICBlbHNlIHNwbCA9IHNwbC5zcGxpdCgiIik7DQogICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNPd25lZCA9IDA7DQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlc0J5SWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzQnlJZFtpXTsNCiAgICAgICAgICAgICAgICBpZiAoc3BsW2kgKiAyXSkgew0KICAgICAgICAgICAgICAgICAgdmFyIG1lc3RyID0gW3NwbFtpICogMl0sIHNwbFtpICogMiArIDFdXTsNCiAgICAgICAgICAgICAgICAgIG1lLnVubG9ja2VkID0gcGFyc2VJbnQobWVzdHJbMF0pOw0KICAgICAgICAgICAgICAgICAgbWUuYm91Z2h0ID0gcGFyc2VJbnQobWVzdHJbMV0pOw0KICAgICAgICAgICAgICAgICAgaWYgKG1lLmJvdWdodCAmJiBHYW1lLkNvdW50c0FzVXBncmFkZU93bmVkKG1lLnBvb2wpKQ0KICAgICAgICAgICAgICAgICAgICBHYW1lLlVwZ3JhZGVzT3duZWQrKzsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgbWUudW5sb2NrZWQgPSAwOw0KICAgICAgICAgICAgICAgICAgbWUuYm91Z2h0ID0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKHN0cls3XSkgc3BsID0gc3RyWzddOw0KICAgICAgICAgICAgICBlbHNlIHNwbCA9IFtdOyAvL2FjaGlldmVtZW50cw0KICAgICAgICAgICAgICBpZiAodmVyc2lvbiA8IDIuMDA0Nikgc3BsID0gdW5wYWNrMihzcGwpLnNwbGl0KCIiKTsNCiAgICAgICAgICAgICAgZWxzZSBzcGwgPSBzcGwuc3BsaXQoIiIpOw0KICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkID0gMDsNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLkFjaGlldmVtZW50c0J5SWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLkFjaGlldmVtZW50c0J5SWRbaV07DQogICAgICAgICAgICAgICAgaWYgKHNwbFtpXSkgew0KICAgICAgICAgICAgICAgICAgdmFyIG1lc3RyID0gW3NwbFtpXV07DQogICAgICAgICAgICAgICAgICBtZS53b24gPSBwYXJzZUludChtZXN0clswXSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIG1lLndvbiA9IDA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChtZS53b24gJiYgR2FtZS5Db3VudHNBc0FjaGlldmVtZW50T3duZWQobWUucG9vbCkpDQogICAgICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkKys7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgR2FtZS5raWxsQnVmZnMoKTsNCiAgICAgICAgICAgIHZhciBidWZmc1RvTG9hZCA9IFtdOw0KICAgICAgICAgICAgc3BsID0gKHN0cls4XSB8fCAiIikuc3BsaXQoIjsiKTsgLy9idWZmcw0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBzcGwpIHsNCiAgICAgICAgICAgICAgaWYgKHNwbFtpXSkgew0KICAgICAgICAgICAgICAgIHZhciBtZXN0ciA9IHNwbFtpXS50b1N0cmluZygpLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgYnVmZnNUb0xvYWQucHVzaChtZXN0cik7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgc3BsID0gKHN0cls5XSB8fCAiIikuc3BsaXQoIjsiKTsgLy9tb2QgZGF0YQ0KDQogICAgICAgICAgICBmb3IgKHZhciBpIGluIHNwbCkgew0KICAgICAgICAgICAgICBpZiAoc3BsW2ldKSB7DQogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBzcGxbaV0uc3BsaXQoIjoiKTsNCiAgICAgICAgICAgICAgICB2YXIgbW9kSWQgPSBkYXRhWzBdOw0KICAgICAgICAgICAgICAgIGlmIChtb2RJZCA9PSAiTUVUQSIpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGRhdGEuc2hpZnQoKTsNCiAgICAgICAgICAgICAgICBkYXRhID0gR2FtZS5zYWZlTG9hZFN0cmluZyhkYXRhLmpvaW4oIjoiKSk7DQogICAgICAgICAgICAgICAgR2FtZS5tb2RTYXZlRGF0YVttb2RJZF0gPSBkYXRhOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzQnlJZCkgew0KICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNCeUlkW2ldOw0KICAgICAgICAgICAgICBpZiAobWUuYnV5RnVuY3Rpb24pIG1lLmJ1eUZ1bmN0aW9uKCk7DQogICAgICAgICAgICAgIG1lLnJlZnJlc2goKTsNCiAgICAgICAgICAgICAgaWYgKG1lLmlkID4gMCkgew0KICAgICAgICAgICAgICAgIGlmIChtZS5tdXRlZCkgbWUubXV0ZSgxKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodmVyc2lvbiA8IDEuMDUwMykgew0KICAgICAgICAgICAgICAvL3VwZ3JhZGVzIHRoYXQgdXNlZCB0byBiZSByZWd1bGFyLCBidXQgYXJlIG5vdyBoZWF2ZW5seQ0KICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzWyJQZXJzaXN0ZW50IG1lbW9yeSJdOw0KICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgICAgIG1lLmJvdWdodCA9IDA7DQogICAgICAgICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNbIlNlYXNvbiBzd2l0Y2hlciJdOw0KICAgICAgICAgICAgICBtZS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgICAgIG1lLmJvdWdodCA9IDA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChHYW1lLmJnVHlwZSA9PSAtMSkgR2FtZS5iZ1R5cGUgPSAwOw0KICAgICAgICAgICAgaWYgKEdhbWUubWlsa1R5cGUgPT0gLTEgfHwgIUdhbWUuQWxsTWlsa3NbR2FtZS5taWxrVHlwZV0pDQogICAgICAgICAgICAgIEdhbWUubWlsa1R5cGUgPSAwOw0KDQogICAgICAgICAgICAvL2FkdmFuY2UgdGltZXJzDQogICAgICAgICAgICB2YXIgZnJhbWVzRWxhcHNlZCA9IE1hdGguY2VpbCgNCiAgICAgICAgICAgICAgKChEYXRlLm5vdygpIC0gR2FtZS5sYXN0RGF0ZSkgLyAxMDAwKSAqIEdhbWUuZnBzDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUucGxlZGdlVCA+IDApDQogICAgICAgICAgICAgIEdhbWUucGxlZGdlVCA9IE1hdGgubWF4KEdhbWUucGxlZGdlVCAtIGZyYW1lc0VsYXBzZWQsIDEpOw0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uVCA+IDApDQogICAgICAgICAgICAgIEdhbWUuc2Vhc29uVCA9IE1hdGgubWF4KEdhbWUuc2Vhc29uVCAtIGZyYW1lc0VsYXBzZWQsIDEpOw0KICAgICAgICAgICAgaWYgKEdhbWUucmVzZWFyY2hUID4gMCkNCiAgICAgICAgICAgICAgR2FtZS5yZXNlYXJjaFQgPSBNYXRoLm1heChHYW1lLnJlc2VhcmNoVCAtIGZyYW1lc0VsYXBzZWQsIDEpOw0KDQogICAgICAgICAgICBHYW1lLlJlc2V0V3JpbmtsZXJzKCk7DQogICAgICAgICAgICBHYW1lLkxvYWRXcmlua2xlcnMoDQogICAgICAgICAgICAgIHdyaW5rbGVycy5hbW91bnQsDQogICAgICAgICAgICAgIHdyaW5rbGVycy5udW1iZXIsDQogICAgICAgICAgICAgIHdyaW5rbGVycy5zaGluaWVzLA0KICAgICAgICAgICAgICB3cmlua2xlcnMuYW1vdW50U2hpbmllcw0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgLy9yZWNvbXB1dGUgc2Vhc29uIHRyaWdnZXIgcHJpY2VzDQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlNlYXNvbiBzd2l0Y2hlciIpKSB7DQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5zZWFzb25zKSB7DQogICAgICAgICAgICAgICAgR2FtZS5VbmxvY2soR2FtZS5zZWFzb25zW2ldLnRyaWdnZXIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBHYW1lLmNvbXB1dGVTZWFzb25QcmljZXMoKTsNCg0KICAgICAgICAgICAgLy9yZWNvbXB1dGUgcHJlc3RpZ2UNCiAgICAgICAgICAgIEdhbWUucHJlc3RpZ2UgPSBNYXRoLmZsb29yKEdhbWUuSG93TXVjaFByZXN0aWdlKEdhbWUuY29va2llc1Jlc2V0KSk7DQogICAgICAgICAgICAvL2lmICgoR2FtZS5oZWF2ZW5seUNoaXBzK0dhbWUuaGVhdmVubHlDaGlwc1NwZW50KTxHYW1lLnByZXN0aWdlKQ0KICAgICAgICAgICAgLy97R2FtZS5oZWF2ZW5seUNoaXBzPUdhbWUucHJlc3RpZ2U7R2FtZS5oZWF2ZW5seUNoaXBzU3BlbnQ9MDt9Ly9jaGlwcyBvd25lZCBhbmQgc3BlbnQgZG9uJ3QgYWRkIHVwIHRvIHRvdGFsIHByZXN0aWdlPyBzZXQgY2hpcHMgb3duZWQgdG8gcHJlc3RpZ2UNCg0KICAgICAgICAgICAgR2FtZS5iYWtlcnlOYW1lU2V0KGJha2VyeU5hbWUpOw0KDQogICAgICAgICAgICBHYW1lLmxvYWRNb2REYXRhKCk7DQoNCiAgICAgICAgICAgIGlmICh2ZXJzaW9uID09IDEuMDM3ICYmIEdhbWUuYmV0YSkgew0KICAgICAgICAgICAgICAvL2FyZSB3ZSBvcGVuaW5nIHRoZSBuZXcgYmV0YT8gaWYgc28sIHNhdmUgdGhlIG9sZCBiZXRhIHRvIC9iZXRhZHVuZ2VvbnMNCiAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKA0KICAgICAgICAgICAgICAgICJDb29raWVDbGlja2VyR2FtZUJldGFEdW5nZW9ucyIsDQogICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJDb29raWVDbGlja2VyR2FtZUJldGEiKQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICAiQmV0YSBzYXZlIGRhdGEiLA0KICAgICAgICAgICAgICAgICJZb3VyIGJldGEgc2F2ZSBkYXRhIGhhcyBiZWVuIHNhZmVseSBleHBvcnRlZCB0byAvYmV0YWR1bmdlb25zLiIsDQogICAgICAgICAgICAgICAgMjANCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodmVyc2lvbiA9PSAxLjA1MDEgJiYgR2FtZS5iZXRhKSB7DQogICAgICAgICAgICAgIC8vYXJlIHdlIG9wZW5pbmcgdGhlIG5ld2VyIGJldGE/IGlmIHNvLCBzYXZlIHRoZSBvbGQgYmV0YSB0byAvb2xkYmV0YQ0KICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oDQogICAgICAgICAgICAgICAgIkNvb2tpZUNsaWNrZXJHYW1lT2xkIiwNCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oIkNvb2tpZUNsaWNrZXJHYW1lQmV0YSIpDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIC8vR2FtZS5Ob3RpZnkoJ0JldGEgc2F2ZSBkYXRhJywnWW91ciBiZXRhIHNhdmUgZGF0YSBoYXMgYmVlbiBzYWZlbHkgZXhwb3J0ZWQgdG8gL29sZGJldGEuJywyMCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodmVyc2lvbiA8PSAxLjA0NjYgJiYgIUdhbWUuYmV0YSkgew0KICAgICAgICAgICAgICAvL2V4cG9ydCB0aGUgb2xkIDIwMTQgdmVyc2lvbiB0byAvdjEwNDY2DQogICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgNCiAgICAgICAgICAgICAgICAiQ29va2llQ2xpY2tlckdhbWV2MTA0NjYiLA0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiQ29va2llQ2xpY2tlckdhbWUiKQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAvL0dhbWUuTm90aWZ5KCdCZXRhIHNhdmUgZGF0YScsJ1lvdXIgc2F2ZSBkYXRhIGhhcyBiZWVuIHNhZmVseSBleHBvcnRlZCB0byAvdjEwNDY2LicsMjApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHZlcnNpb24gPT0gMS45KSB7DQogICAgICAgICAgICAgIC8vYXJlIHdlIGltcG9ydGluZyBmcm9tIHRoZSAxLjkgYmV0YT8gcmVtb3ZlIGFsbCBoZWF2ZW5seSB1cGdyYWRlcyBhbmQgcmVmdW5kIGhlYXZlbmx5IGNoaXBzDQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlc0J5SWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzQnlJZFtpXTsNCiAgICAgICAgICAgICAgICBpZiAobWUuYm91Z2h0ICYmIG1lLnBvb2wgPT0gInByZXN0aWdlIikgew0KICAgICAgICAgICAgICAgICAgbWUudW5sb2NrZWQgPSAwOw0KICAgICAgICAgICAgICAgICAgbWUuYm91Z2h0ID0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgR2FtZS5oZWF2ZW5seUNoaXBzID0gR2FtZS5wcmVzdGlnZTsNCiAgICAgICAgICAgICAgR2FtZS5oZWF2ZW5seUNoaXBzU3BlbnQgPSAwOw0KDQogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIEdhbWUuUHJvbXB0KA0KICAgICAgICAgICAgICAgICAgJzxoMz5CZXRhIHBhdGNoPC9oMz48ZGl2IGNsYXNzPSJibG9jayI+V2VcJ3ZlIHR3ZWFrZWQgc29tZSB0aGluZ3MgYW5kIGZpeGVkIHNvbWUgb3RoZXJzLCBwbGVhc2UgY2hlY2sgdGhlIHVwZGF0ZSBub3RlcyE8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5PZiBub3RlIDogZHVlIHRvIGNoYW5nZXMgaW4gcHJlc3RpZ2UgYmFsYW5jaW5nLCBhbGwgeW91ciBoZWF2ZW5seSB1cGdyYWRlcyBoYXZlIGJlZW4gcmVtb3ZlZCBhbmQgeW91ciBoZWF2ZW5seSBjaGlwcyByZWZ1bmRlZDsgeW91XCdsbCBiZSBhYmxlIHRvIHJlYWxsb2NhdGUgdGhlbSBuZXh0IHRpbWUgeW91IGFzY2VuZC48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5UaGFuayB5b3UgYWdhaW4gZm9yIGJldGEtdGVzdGluZyBDb29raWUgQ2xpY2tlciE8L2Rpdj4nLA0KICAgICAgICAgICAgICAgICAgW1siQWxyaWdodCB0aGVuISIsICJHYW1lLkNsb3NlUHJvbXB0KCk7Il1dDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgfSwgMjAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh2ZXJzaW9uIDw9IDEuMDQ2Nikgew0KICAgICAgICAgICAgICAvL2FyZSB3ZSBsb2FkaW5nIGZyb20gdGhlIG9sZCBsaXZlIHZlcnNpb24/IHJlc2V0IEhDcw0KICAgICAgICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHMgPSBHYW1lLnByZXN0aWdlOw0KICAgICAgICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNTcGVudCA9IDA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgew0KICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlN0YXJ0ZXIga2l0IikpIEdhbWUuT2JqZWN0c1siQ3Vyc29yIl0uZnJlZSA9IDEwOw0KICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlN0YXJ0ZXIga2l0Y2hlbiIpKSBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5mcmVlID0gNTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgR2FtZS5DYWxjdWxhdGVHYWlucygpOw0KDQogICAgICAgICAgICB2YXIgdGltZU9mZmxpbmUgPSAoRGF0ZS5ub3coKSAtIEdhbWUubGFzdERhdGUpIC8gMTAwMDsNCg0KICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAxIC8gMTAwMDApIEdhbWUuVE9ZUyA9IDE7IC8vdGVlaGVlIQ0KICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAxIC8gMTAwMDApIEdhbWUuV0lOS0xFUlMgPSAxOyAvL3NxdWVhaw0KDQogICAgICAgICAgICAvL2NvbXB1dGUgY29va2llcyBlYXJuZWQgd2hpbGUgdGhlIGdhbWUgd2FzIGNsb3NlZA0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICBHYW1lLm1vYmlsZSB8fA0KICAgICAgICAgICAgICBHYW1lLkhhcygiUGVyZmVjdCBpZGxpbmciKSB8fA0KICAgICAgICAgICAgICBHYW1lLkhhcygiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIikNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlBlcmZlY3QgaWRsaW5nIikpIHsNCiAgICAgICAgICAgICAgICB2YXIgbWF4VGltZSA9IDYwICogNjAgKiAyNCAqIDEwMDAwMDAwMDA7DQogICAgICAgICAgICAgICAgdmFyIHBlcmNlbnQgPSAxMDA7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdmFyIG1heFRpbWUgPSA2MCAqIDYwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiQmVscGhlZ29yIikpIG1heFRpbWUgKj0gMjsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIk1hbW1vbiIpKSBtYXhUaW1lICo9IDI7DQogICAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJBYmFkZG9uIikpIG1heFRpbWUgKj0gMjsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIlNhdGFuIikpIG1heFRpbWUgKj0gMjsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkFzbW9kZXVzIikpIG1heFRpbWUgKj0gMjsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkJlZWx6ZWJ1YiIpKSBtYXhUaW1lICo9IDI7DQogICAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJMdWNpZmVyIikpIG1heFRpbWUgKj0gMjsNCg0KICAgICAgICAgICAgICAgIHZhciBwZXJjZW50ID0gNTsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkFuZ2VscyIpKSBwZXJjZW50ICs9IDEwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiQXJjaGFuZ2VscyIpKSBwZXJjZW50ICs9IDEwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiVmlydHVlcyIpKSBwZXJjZW50ICs9IDEwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiRG9taW5pb25zIikpIHBlcmNlbnQgKz0gMTA7DQogICAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJDaGVydWJpbSIpKSBwZXJjZW50ICs9IDEwOw0KICAgICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiU2VyYXBoaW0iKSkgcGVyY2VudCArPSAxMDsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkdvZCIpKSBwZXJjZW50ICs9IDEwOw0KDQogICAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJDaGltZXJhIikpIHsNCiAgICAgICAgICAgICAgICAgIG1heFRpbWUgKz0gNjAgKiA2MCAqIDI0ICogMjsNCiAgICAgICAgICAgICAgICAgIHBlcmNlbnQgKz0gNTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkZlcm4gdGVhIikpIHBlcmNlbnQgKz0gMzsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkljaG9yIHN5cnVwIikpIHBlcmNlbnQgKz0gNzsNCiAgICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoIkZvcnR1bmUgIzEwMiIpKSBwZXJjZW50ICs9IDE7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgdGltZU9mZmxpbmVPcHRpbWFsID0gTWF0aC5taW4odGltZU9mZmxpbmUsIG1heFRpbWUpOw0KICAgICAgICAgICAgICB2YXIgdGltZU9mZmxpbmVSZWR1Y2VkID0gTWF0aC5tYXgoDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICB0aW1lT2ZmbGluZSAtIHRpbWVPZmZsaW5lT3B0aW1hbA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB2YXIgYW1vdW50ID0NCiAgICAgICAgICAgICAgICAodGltZU9mZmxpbmVPcHRpbWFsICsgdGltZU9mZmxpbmVSZWR1Y2VkICogMC4xKSAqDQogICAgICAgICAgICAgICAgR2FtZS5jb29raWVzUHMgKg0KICAgICAgICAgICAgICAgIChwZXJjZW50IC8gMTAwKTsNCg0KICAgICAgICAgICAgICBpZiAoYW1vdW50ID4gMCkgew0KICAgICAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICAgICAgbG9jKCJXZWxjb21lIGJhY2shIiksDQogICAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAgICJZb3UgZWFybmVkIDxiPiUxPC9iPiB3aGlsZSB5b3Ugd2VyZSBhd2F5LiIsDQogICAgICAgICAgICAgICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KGFtb3VudCkpDQogICAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAgICAgKEVODQogICAgICAgICAgICAgICAgICAgICAgPyAiPGJyPigiICsNCiAgICAgICAgICAgICAgICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lT2ZmbGluZU9wdGltYWwgKiBHYW1lLmZwcywgLTEpICsNCiAgICAgICAgICAgICAgICAgICAgICAgICIgYXQgIiArDQogICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKHBlcmNlbnQpICsNCiAgICAgICAgICAgICAgICAgICAgICAgICIlIENwUyIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgKHRpbWVPZmZsaW5lUmVkdWNlZA0KICAgICAgICAgICAgICAgICAgICAgICAgICA/ICIsIHBsdXMgIiArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWVPZmZsaW5lUmVkdWNlZCAqIEdhbWUuZnBzLCAtMSkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgYXQgIiArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihwZXJjZW50ICogMTApIC8gMTAwICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAgICAgICAgICAgIi4pIg0KICAgICAgICAgICAgICAgICAgICAgIDogIiIpLA0KICAgICAgICAgICAgICAgICAgW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2KSwgMTFdDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBHYW1lLkVhcm4oYW1vdW50KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvL3dlIGxvYWQgYnVmZnMgYWZ0ZXIgZXZlcnl0aGluZyBhcyB3ZSBkbyBub3Qgd2FudCB0aGVtIHRvIGludGVyZmVyIHdpdGggb2ZmbGluZSBDcFMNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gYnVmZnNUb0xvYWQpIHsNCiAgICAgICAgICAgICAgdmFyIG1lc3RyID0gYnVmZnNUb0xvYWRbaV07DQogICAgICAgICAgICAgIHZhciB0eXBlID0gR2FtZS5idWZmVHlwZXNbcGFyc2VJbnQobWVzdHJbMF0pXTsNCiAgICAgICAgICAgICAgR2FtZS5nYWluQnVmZigNCiAgICAgICAgICAgICAgICB0eXBlLm5hbWUsDQogICAgICAgICAgICAgICAgcGFyc2VGbG9hdChtZXN0clsxXSkgLyBHYW1lLmZwcywNCiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KG1lc3RyWzNdIHx8IDApLA0KICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQobWVzdHJbNF0gfHwgMCksDQogICAgICAgICAgICAgICAgcGFyc2VGbG9hdChtZXN0cls1XSB8fCAwKQ0KICAgICAgICAgICAgICApLnRpbWUgPSBwYXJzZUZsb2F0KG1lc3RyWzJdKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgR2FtZS5sb2FkTHVtcHModGltZU9mZmxpbmUpOw0KDQogICAgICAgICAgICBHYW1lLmJha2VyeU5hbWVSZWZyZXNoKCk7DQogICAgICAgICAgfSAvL2ltcG9ydGluZyBvbGQgdmVyc2lvbiBzYXZlDQogICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgbG9jKCJFcnJvciBpbXBvcnRpbmcgc2F2ZSIpLA0KICAgICAgICAgICAgICBsb2MoIlNvcnJ5LCB5b3UgY2FuJ3QgaW1wb3J0IHNhdmVzIGZyb20gdGhlIGNsYXNzaWMgdmVyc2lvbi4iKSwNCiAgICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAgIDYsDQogICAgICAgICAgICAgIDENCiAgICAgICAgICAgICk7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyKSB7DQogICAgICAgICAgICBHYW1lLkJ1aWxkU3RvcmUoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBHYW1lLlJlYnVpbGRVcGdyYWRlcygpOw0KDQogICAgICAgICAgR2FtZS5UaWNrZXJBZ2UgPSAwOw0KICAgICAgICAgIEdhbWUuVGlja2VyRWZmZWN0ID0gMDsNCg0KICAgICAgICAgIEdhbWUuZWxkZXJXcmF0aEQgPSAwOw0KICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQoNCiAgICAgICAgICBHYW1lLmJ1eUJ1bGsgPSAxOw0KICAgICAgICAgIEdhbWUuYnV5TW9kZSA9IDE7DQogICAgICAgICAgR2FtZS5zdG9yZUJ1bGtCdXR0b24oLTEpOw0KDQogICAgICAgICAgR2FtZS5zcGVjaWFsVGFiID0gIiI7DQogICAgICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgwKTsNCg0KICAgICAgICAgIEdhbWUua2lsbFNoaW1tZXJzKCk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5UID4gR2FtZS5mcHMgKiA1ICYmIEdhbWUuUmVpbmNhcm5hdGVUaW1lciA9PSAwKSB7DQogICAgICAgICAgICAvL2ZhZGUgb3V0IG9mIGJsYWNrIGFuZCBwb3AgdGhlIGNvb2tpZQ0KICAgICAgICAgICAgR2FtZS5SZWluY2FybmF0ZVRpbWVyID0gMTsNCiAgICAgICAgICAgIEdhbWUuYWRkQ2xhc3MoInJlaW5jYXJuYXRpbmciKTsNCiAgICAgICAgICAgIEdhbWUuQmlnQ29va2llU2l6ZSA9IDA7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHByZXN0aWdlVXBncmFkZXNPd25lZCA9IDA7DQogICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc1tpXS5ib3VnaHQgJiYgR2FtZS5VcGdyYWRlc1tpXS5wb29sID09ICJwcmVzdGlnZSIpDQogICAgICAgICAgICAgIHByZXN0aWdlVXBncmFkZXNPd25lZCsrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAocHJlc3RpZ2VVcGdyYWRlc093bmVkID49IDEwMCkgR2FtZS5XaW4oIkFsbCB0aGUgc3RhcnMgaW4gaGVhdmVuIik7DQoNCiAgICAgICAgICBpZiAodmVyc2lvbiA8IEdhbWUudmVyc2lvbikgbCgibG9nQnV0dG9uIikuY2xhc3NMaXN0LmFkZCgiaGFzVXBkYXRlIik7DQoNCiAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gIT0gIiIgJiYgR2FtZS5zZWFzb24gPT0gR2FtZS5iYXNlU2Vhc29uKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gInZhbGVudGluZXMiKQ0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICBsb2MoIlZhbGVudGluZSdzIERheSEiKSwNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiSXQncyA8Yj5WYWxlbnRpbmUncyBzZWFzb248L2I+ITxicj5Mb3ZlJ3MgaW4gdGhlIGFpciBhbmQgY29va2llcyBhcmUganVzdCB0aGF0IG11Y2ggc3dlZXRlciEiDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICBbMjAsIDNdLA0KICAgICAgICAgICAgICAgIDYwICogMw0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgZWxzZSBpZiAoR2FtZS5zZWFzb24gPT0gImZvb2xzIikNCiAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgbG9jKCJCdXNpbmVzcyBEYXkhIiksDQogICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgIkl0J3MgPGI+QnVzaW5lc3Mgc2Vhc29uPC9iPiE8YnI+RG9uJ3QgcGFuaWMhIFRoaW5ncyBhcmUgZ29ubmEgYmUgbG9va2luZyBhIGxpdHRsZSBtb3JlIGNvcnBvcmF0ZSBmb3IgYSBmZXcgZGF5cy4iDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICBbMTcsIDZdLA0KICAgICAgICAgICAgICAgIDYwICogMw0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgZWxzZSBpZiAoR2FtZS5zZWFzb24gPT0gImhhbGxvd2VlbiIpDQogICAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICAgIGxvYygiSGFsbG93ZWVuISIpLA0KICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICJJdCdzIDxiPkhhbGxvd2VlbiBzZWFzb248L2I+ITxicj5FdmVyeXRoaW5nIGlzIGp1c3QgYSBsaXR0bGUgYml0IHNwb29raWVyISINCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgIFsxMywgOF0sDQogICAgICAgICAgICAgICAgNjAgKiAzDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBlbHNlIGlmIChHYW1lLnNlYXNvbiA9PSAiY2hyaXN0bWFzIikNCiAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgbG9jKCJDaHJpc3RtYXMgdGltZSEiKSwNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiSXQncyA8Yj5DaHJpc3RtYXMgc2Vhc29uPC9iPiE8YnI+QnJpbmcgZ29vZCBjaGVlciB0byBhbGwgYW5kIHlvdSBqdXN0IG1heSBnZXQgY29va2llcyBpbiB5b3VyIHN0b2NraW5ncyEiDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICBbMTIsIDEwXSwNCiAgICAgICAgICAgICAgICA2MCAqIDMNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKEdhbWUuc2Vhc29uID09ICJlYXN0ZXIiKQ0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICBsb2MoIkVhc3RlciEiKSwNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiSXQncyA8Yj5FYXN0ZXIgc2Vhc29uPC9iPiE8YnI+S2VlcCBhbiBleWUgb3V0IGFuZCB5b3UganVzdCBtaWdodCBjbGljayBhIHJhYmJpdCBvciB0d28hIg0KICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgWzAsIDEyXSwNCiAgICAgICAgICAgICAgICA2MCAqIDMNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBHYW1lLmhlcmFsZHMgPSBhY3R1YWxIZXJhbGRzOw0KDQogICAgICAgICAgR2FtZS5Ob3RpZnkobG9jKCJHYW1lIGxvYWRlZCIpLCAiIiwgIiIsIDEsIDEpOw0KDQogICAgICAgICAgaWYgKCFBcHAgJiYgR2FtZS5wcmVmcy5zaG93QmFja3VwV2FybmluZyA9PSAxKQ0KICAgICAgICAgICAgR2FtZS5zaG93QmFja3VwV2FybmluZygpOw0KDQogICAgICAgICAgaWYgKEFwcCkgQXBwLmp1c3RMb2FkZWRTYXZlKCk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCVJFU0VUDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgR2FtZS5SZXNldCA9IGZ1bmN0aW9uIChoYXJkKSB7DQogICAgICBHYW1lLlQgPSAwOw0KDQogICAgICBpZiAoaGFyZCkgew0KICAgICAgICBHYW1lLmxvYWRlZEZyb21WZXJzaW9uID0gR2FtZS52ZXJzaW9uOw0KICAgICAgfQ0KDQogICAgICB2YXIgY29va2llc0ZvcmZlaXRlZCA9IEdhbWUuY29va2llc0Vhcm5lZDsNCiAgICAgIGlmICghaGFyZCkgew0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwKSBHYW1lLldpbigiU2FjcmlmaWNlIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDApIEdhbWUuV2luKCJPYmxpdmlvbiIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwKSBHYW1lLldpbigiRnJvbSBzY3JhdGNoIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDApIEdhbWUuV2luKCJOaWhpbGlzbSIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwKSBHYW1lLldpbigiRGVtYXRlcmlhbGl6ZSIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJOaWwgemVybyB6aWxjaCIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJUcmFuc2NlbmRlbmNlIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApDQogICAgICAgICAgR2FtZS5XaW4oIk9ibGl0ZXJhdGUiKTsNCiAgICAgICAgaWYgKGNvb2tpZXNGb3JmZWl0ZWQgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCkNCiAgICAgICAgICBHYW1lLldpbigiTmVnYXRpdmUgdm9pZCIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJUbyBjcnVtYnMsIHlvdSBzYXk/Iik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApDQogICAgICAgICAgR2FtZS5XaW4oIllvdSBnZXQgbm90aGluZyIpOw0KICAgICAgICBpZiAoY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJIdW1ibGUgcmViZWdpbm5pbmdzIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApDQogICAgICAgICAgR2FtZS5XaW4oIlRoZSBlbmQgb2YgdGhlIHdvcmxkIik7DQogICAgICAgIGlmIChjb29raWVzRm9yZmVpdGVkID49IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApDQogICAgICAgICAgR2FtZS5XaW4oIk9oLCB5b3UncmUgYmFjayIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgY29va2llc0ZvcmZlaXRlZCA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLldpbigiTGF6YXJ1cyIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgY29va2llc0ZvcmZlaXRlZCA+PQ0KICAgICAgICAgIDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuV2luKCJTbXVyZiBhY2NvdW50Iik7DQogICAgICAgIGlmICgNCiAgICAgICAgICBjb29raWVzRm9yZmVpdGVkID49DQogICAgICAgICAgMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5XaW4oIklmIGF0IGZpcnN0IHlvdSBkb24ndCBzdWNjZWVkIik7DQoNCiAgICAgICAgaWYgKE1hdGgucm91bmQoR2FtZS5jb29raWVzKSA9PSAxMDAwMDAwMDAwMDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJXaGVuIHRoZSBjb29raWVzIGFzY2VuZCBqdXN0IHJpZ2h0Iik7DQogICAgICB9DQoNCiAgICAgIEdhbWUua2lsbEJ1ZmZzKCk7DQoNCiAgICAgIEdhbWUuc2VlZCA9IEdhbWUubWFrZVNlZWQoKTsNCg0KICAgICAgR2FtZS5jb29raWVzUmVzZXQgKz0gR2FtZS5jb29raWVzRWFybmVkOw0KICAgICAgR2FtZS5jb29raWVzID0gMDsNCiAgICAgIEdhbWUuY29va2llc0Vhcm5lZCA9IDA7DQogICAgICBHYW1lLmNvb2tpZUNsaWNrcyA9IDA7DQogICAgICBHYW1lLmdvbGRlbkNsaWNrc0xvY2FsID0gMDsNCiAgICAgIC8vR2FtZS5nb2xkZW5DbGlja3M9MDsNCiAgICAgIC8vR2FtZS5taXNzZWRHb2xkZW5DbGlja3M9MDsNCiAgICAgIEdhbWUuaGFuZG1hZGVDb29raWVzID0gMDsNCiAgICAgIEdhbWUuY29va2llc1BzUmF3SGlnaGVzdCA9IDA7DQogICAgICBpZiAoaGFyZCkgew0KICAgICAgICBHYW1lLmJnVHlwZSA9IDA7DQogICAgICAgIEdhbWUubWlsa1R5cGUgPSAwOw0KICAgICAgICBHYW1lLmNoaW1lVHlwZSA9IDA7DQoNCiAgICAgICAgR2FtZS52YXVsdCA9IFtdOw0KICAgICAgfQ0KICAgICAgR2FtZS5wbGVkZ2VzID0gMDsNCiAgICAgIEdhbWUucGxlZGdlVCA9IDA7DQogICAgICBHYW1lLmVsZGVyV3JhdGggPSAwOw0KICAgICAgR2FtZS5lbGRlcldyYXRoT2xkID0gMDsNCiAgICAgIEdhbWUuZWxkZXJXcmF0aEQgPSAwOw0KICAgICAgR2FtZS5uZXh0UmVzZWFyY2ggPSAwOw0KICAgICAgR2FtZS5yZXNlYXJjaFQgPSAwOw0KICAgICAgR2FtZS5zZWFzb25UID0gMDsNCiAgICAgIEdhbWUuc2Vhc29uVXNlcyA9IDA7DQogICAgICBHYW1lLnNlYXNvbiA9IEdhbWUuYmFzZVNlYXNvbjsNCiAgICAgIEdhbWUuY29tcHV0ZVNlYXNvblByaWNlcygpOw0KDQogICAgICBHYW1lLnN0YXJ0RGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOw0KICAgICAgR2FtZS5sYXN0RGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOw0KDQogICAgICBHYW1lLmNvb2tpZXNTdWNrZWQgPSAwOw0KICAgICAgR2FtZS53cmlua2xlcnNQb3BwZWQgPSAwOw0KICAgICAgR2FtZS5SZXNldFdyaW5rbGVycygpOw0KDQogICAgICBHYW1lLnNhbnRhTGV2ZWwgPSAwOw0KICAgICAgR2FtZS5yZWluZGVlckNsaWNrZWQgPSAwOw0KDQogICAgICBHYW1lLmRyYWdvbkxldmVsID0gMDsNCiAgICAgIEdhbWUuZHJhZ29uQXVyYSA9IDA7DQogICAgICBHYW1lLmRyYWdvbkF1cmEyID0gMDsNCg0KICAgICAgR2FtZS5mb3J0dW5lR0MgPSAwOw0KICAgICAgR2FtZS5mb3J0dW5lQ1BTID0gMDsNCg0KICAgICAgR2FtZS5UaWNrZXJDbGlja3MgPSAwOw0KDQogICAgICBpZiAoR2FtZS5nYWluZWRQcmVzdGlnZSA+IDApIEdhbWUucmVzZXRzKys7DQogICAgICBpZiAoIWhhcmQgJiYgR2FtZS5jYW5MdW1wcygpICYmIEdhbWUuYXNjZW5zaW9uTW9kZSAhPSAxKQ0KICAgICAgICBHYW1lLmFkZENsYXNzKCJsdW1wc09uIik7DQogICAgICBlbHNlIEdhbWUucmVtb3ZlQ2xhc3MoImx1bXBzT24iKTsNCiAgICAgIEdhbWUuZ2FpbmVkUHJlc3RpZ2UgPSAwOw0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0c0J5SWQpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzQnlJZFtpXTsNCiAgICAgICAgbWUuYW1vdW50ID0gMDsNCiAgICAgICAgbWUuYm91Z2h0ID0gMDsNCiAgICAgICAgbWUuaGlnaGVzdCA9IDA7DQogICAgICAgIG1lLmZyZWUgPSAwOw0KICAgICAgICBtZS50b3RhbENvb2tpZXMgPSAwOw0KICAgICAgICBtZS5zd2l0Y2hNaW5pZ2FtZShmYWxzZSk7DQogICAgICAgIGlmIChoYXJkKSB7DQogICAgICAgICAgbWUubXV0ZWQgPSAwOw0KICAgICAgICB9DQogICAgICAgIG1lLnBpY3MgPSBbXTsNCiAgICAgICAgbWUucmVmcmVzaCgpOw0KICAgICAgfQ0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzQnlJZCkgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzQnlJZFtpXTsNCiAgICAgICAgaWYgKGhhcmQgfHwgbWUucG9vbCAhPSAicHJlc3RpZ2UiKSBtZS5ib3VnaHQgPSAwOw0KICAgICAgICBpZiAoaGFyZCkgbWUudW5sb2NrZWQgPSAwOw0KICAgICAgICBpZiAobWUucG9vbCAhPSAicHJlc3RpZ2UiICYmICFtZS5sYXN0aW5nKSB7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgR2FtZS5IYXMoIktlZXBzYWtlcyIpICYmDQogICAgICAgICAgICBHYW1lLnNlYXNvbkRyb3BzLmluZGV4T2YobWUubmFtZSkgIT0gLTEgJiYNCiAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAxIC8gNQ0KICAgICAgICAgICkgew0KICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICBHYW1lLmFzY2Vuc2lvbk1vZGUgPT0gMSAmJg0KICAgICAgICAgICAgR2FtZS5IYXNBY2hpZXYoIk8gRm9ydHVuYSIpICYmDQogICAgICAgICAgICBtZS50aWVyID09ICJmb3J0dW5lIg0KICAgICAgICAgICkgew0KICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICBHYW1lLkhhc0FjaGlldigiTyBGb3J0dW5hIikgJiYNCiAgICAgICAgICAgIG1lLnRpZXIgPT0gImZvcnR1bmUiICYmDQogICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC40DQogICAgICAgICAgKSB7DQogICAgICAgICAgfSBlbHNlIG1lLnVubG9ja2VkID0gMDsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBHYW1lLkJ1aWxkaW5nc093bmVkID0gMDsNCiAgICAgIEdhbWUuVXBncmFkZXNPd25lZCA9IDA7DQoNCiAgICAgIEdhbWUuY29va2llc1BzQnlUeXBlID0ge307DQogICAgICBHYW1lLmNvb2tpZXNNdWx0QnlUeXBlID0ge307DQoNCiAgICAgIGlmICghaGFyZCkgew0KICAgICAgICBpZiAoR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEpIHsNCiAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUucGVybWFuZW50VXBncmFkZXMpIHsNCiAgICAgICAgICAgIGlmIChHYW1lLnBlcm1hbmVudFVwZ3JhZGVzW2ldICE9IC0xKSB7DQogICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNCeUlkW0dhbWUucGVybWFuZW50VXBncmFkZXNbaV1dLmVhcm4oKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTZWFzb24gc3dpdGNoZXIiKSkgew0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNlYXNvbnMpIHsNCiAgICAgICAgICAgICAgR2FtZS5VbmxvY2soR2FtZS5zZWFzb25zW2ldLnRyaWdnZXIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChHYW1lLkhhcygiU3RhcnRlciBraXQiKSkgR2FtZS5PYmplY3RzWyJDdXJzb3IiXS5nZXRGcmVlKDEwKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIlN0YXJ0ZXIga2l0Y2hlbiIpKSBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5nZXRGcmVlKDUpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8qZm9yICh2YXIgaSBpbiBHYW1lLkFjaGlldmVtZW50c0J5SWQpDQoJCQl7DQoJCQkJdmFyIG1lPUdhbWUuQWNoaWV2ZW1lbnRzQnlJZFtpXTsNCgkJCQltZS53b249MDsNCgkJCX0qLw0KICAgICAgLy9HYW1lLkRlZmF1bHRQcmVmcygpOw0KICAgICAgQmVhdXRpZnlBbGwoKTsNCg0KICAgICAgR2FtZS5SZWJ1aWxkVXBncmFkZXMoKTsNCiAgICAgIEdhbWUuVGlja2VyQWdlID0gMDsNCiAgICAgIEdhbWUuVGlja2VyRWZmZWN0ID0gMDsNCiAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICBHYW1lLnN0b3JlVG9SZWZyZXNoID0gMTsNCiAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgR2FtZS5raWxsU2hpbW1lcnMoKTsNCg0KICAgICAgR2FtZS5idXlCdWxrID0gMTsNCiAgICAgIEdhbWUuYnV5TW9kZSA9IDE7DQogICAgICBHYW1lLnN0b3JlQnVsa0J1dHRvbigtMSk7DQoNCiAgICAgIEdhbWUuTG9hZE1pbmlnYW1lcygpOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHNCeUlkKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuT2JqZWN0c0J5SWRbaV07DQogICAgICAgIGlmIChoYXJkICYmIG1lLm1pbmlnYW1lICYmIG1lLm1pbmlnYW1lLmxhdW5jaCkgew0KICAgICAgICAgIG1lLm1pbmlnYW1lLmxhdW5jaCgpOw0KICAgICAgICAgIG1lLm1pbmlnYW1lLnJlc2V0KHRydWUpOw0KICAgICAgICB9IGVsc2UgaWYgKCFoYXJkICYmIG1lLm1pbmlnYW1lICYmIG1lLm1pbmlnYW1lLnJlc2V0KQ0KICAgICAgICAgIG1lLm1pbmlnYW1lLnJlc2V0KCk7DQogICAgICB9DQoNCiAgICAgIGwoInRvZ2dsZUJveCIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICBsKCJ0b2dnbGVCb3giKS5pbm5lckhUTUwgPSAiIjsNCiAgICAgIEdhbWUuY2hvaWNlU2VsZWN0b3JPbiA9IC0xOw0KICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgwKTsNCiAgICAgIEdhbWUuc3BlY2lhbFRhYiA9ICIiOw0KDQogICAgICBsKCJsb2dCdXR0b24iKS5jbGFzc0xpc3QucmVtb3ZlKCJoYXNVcGRhdGUiKTsNCg0KICAgICAgR2FtZS5ydW5Nb2RIb29rKCJyZXNldCIsIGhhcmQpOw0KDQogICAgICBpZiAoaGFyZCkgew0KICAgICAgICBHYW1lLmNsaWNrc1RoaXNTZXNzaW9uID0gMDsNCiAgICAgICAgaWYgKEdhbWUuVCA+IEdhbWUuZnBzICogNSAmJiBHYW1lLlJlaW5jYXJuYXRlVGltZXIgPT0gMCkgew0KICAgICAgICAgIC8vZmFkZSBvdXQgb2YgYmxhY2sgYW5kIHBvcCB0aGUgY29va2llDQogICAgICAgICAgR2FtZS5SZWluY2FybmF0ZVRpbWVyID0gMTsNCiAgICAgICAgICBHYW1lLmFkZENsYXNzKCJyZWluY2FybmF0aW5nIik7DQogICAgICAgICAgR2FtZS5CaWdDb29raWVTaXplID0gMDsNCiAgICAgICAgfQ0KICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICBsb2MoIkdhbWUgcmVzZXQiKSwNCiAgICAgICAgICBFTiA/ICJTbyBsb25nLCBjb29raWVzLiIgOiBsb2MoIkdvb2QgYnllLCBjb29raWVzLiIpLA0KICAgICAgICAgIFsyMSwgNl0sDQogICAgICAgICAgNg0KICAgICAgICApOw0KICAgICAgfSBlbHNlIEdhbWUuY2xpY2tzVGhpc1Nlc3Npb24gPSBNYXRoLm1heChHYW1lLmNsaWNrc1RoaXNTZXNzaW9uLCAxKTsNCg0KICAgICAgR2FtZS5qdWtlYm94LnJlc2V0KCk7DQogICAgICBpZiAoaGFyZCkgUGxheUN1ZSgibGF1bmNoIik7DQogICAgICBlbHNlIFBsYXlDdWUoInBsYXkiKTsNCiAgICB9Ow0KICAgIEdhbWUuSGFyZFJlc2V0ID0gZnVuY3Rpb24gKGJ5cGFzcykgew0KICAgICAgaWYgKCFieXBhc3MpIHsNCiAgICAgICAgR2FtZS5Qcm9tcHQoDQogICAgICAgICAgIjxpZCBXaXBlU2F2ZT48aDM+IiArDQogICAgICAgICAgICBsb2MoIldpcGUgc2F2ZSIpICsNCiAgICAgICAgICAgICc8L2gzPjxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgICAgIHRpbnlJY29uKFsxNSwgNV0pICsNCiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIkRvIHlvdSBSRUFMTFkgd2FudCB0byB3aXBlIHlvdXIgc2F2ZT88YnI+PHNtYWxsPllvdSB3aWxsIGxvc2UgeW91ciBwcm9ncmVzcywgeW91ciBhY2hpZXZlbWVudHMsIGFuZCB5b3VyIGhlYXZlbmx5IGNoaXBzITwvc21hbGw+Ig0KICAgICAgICAgICAgKSArDQogICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICBbDQogICAgICAgICAgICBbDQogICAgICAgICAgICAgIEVOID8gIlllcyEiIDogbG9jKCJZZXMiKSwNCiAgICAgICAgICAgICAgIkdhbWUuQ2xvc2VQcm9tcHQoKTtHYW1lLkhhcmRSZXNldCgxKTsiLA0KICAgICAgICAgICAgICAiZmxvYXQ6bGVmdCIsDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgW2xvYygiTm8iKSwgMCwgImZsb2F0OnJpZ2h0Il0sDQogICAgICAgICAgXQ0KICAgICAgICApOw0KICAgICAgfSBlbHNlIGlmIChieXBhc3MgPT0gMSkgew0KICAgICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgICAiPGlkIFJlYWxseVdpcGVTYXZlPjxoMz4iICsNCiAgICAgICAgICAgIGxvYygiV2lwZSBzYXZlIikgKw0KICAgICAgICAgICAgJzwvaDM+PGRpdiBjbGFzcz0iYmxvY2siPicgKw0KICAgICAgICAgICAgdGlueUljb24oWzE1LCA1XSkgKw0KICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiV2hvYWggbm93LCBhcmUgeW91IHJlYWxseSwgPGI+PGk+UkVBTExZPC9pPjwvYj4gc3VyZSB5b3Ugd2FudCB0byBnbyB0aHJvdWdoIHdpdGggdGhpcz88YnI+PHNtYWxsPkRvbid0IHNheSB3ZSBkaWRuJ3Qgd2FybiB5b3UhPC9zbWFsbD4iDQogICAgICAgICAgICApICsNCiAgICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAgIFsNCiAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgRU4gPyAiRG8gaXQhIiA6IGxvYygiWWVzIiksDQogICAgICAgICAgICAgICJHYW1lLkNsb3NlUHJvbXB0KCk7R2FtZS5IYXJkUmVzZXQoMik7IiwNCiAgICAgICAgICAgICAgImZsb2F0OmxlZnQiLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIFtsb2MoIk5vIiksIDAsICJmbG9hdDpyaWdodCJdLA0KICAgICAgICAgIF0NCiAgICAgICAgKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5BY2hpZXZlbWVudHNCeUlkKSB7DQogICAgICAgICAgdmFyIG1lID0gR2FtZS5BY2hpZXZlbWVudHNCeUlkW2ldOw0KICAgICAgICAgIG1lLndvbiA9IDA7DQogICAgICAgIH0NCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHNCeUlkKSB7DQogICAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzQnlJZFtpXTsNCiAgICAgICAgICBtZS5sZXZlbCA9IDA7DQogICAgICAgIH0NCg0KICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkID0gMDsNCiAgICAgICAgR2FtZS5nb2xkZW5DbGlja3MgPSAwOw0KICAgICAgICBHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcyA9IDA7DQogICAgICAgIEdhbWUuUmVzZXQoMSk7DQogICAgICAgIEdhbWUucmVzZXRzID0gMDsNCiAgICAgICAgR2FtZS5mdWxsRGF0ZSA9IHBhcnNlSW50KERhdGUubm93KCkpOw0KICAgICAgICBHYW1lLmJha2VyeU5hbWUgPSBHYW1lLkdldEJha2VyeU5hbWUoKTsNCiAgICAgICAgR2FtZS5iYWtlcnlOYW1lUmVmcmVzaCgpOw0KICAgICAgICBHYW1lLmNvb2tpZXNSZXNldCA9IDA7DQogICAgICAgIEdhbWUucHJlc3RpZ2UgPSAwOw0KICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHMgPSAwOw0KICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNTcGVudCA9IDA7DQogICAgICAgIEdhbWUuaGVhdmVubHlDb29raWVzID0gMDsNCiAgICAgICAgR2FtZS5wZXJtYW5lbnRVcGdyYWRlcyA9IFstMSwgLTEsIC0xLCAtMSwgLTFdOw0KICAgICAgICBHYW1lLmFzY2Vuc2lvbk1vZGUgPSAwOw0KICAgICAgICBHYW1lLmx1bXBzID0gLTE7DQogICAgICAgIEdhbWUubHVtcHNUb3RhbCA9IC0xOw0KICAgICAgICBHYW1lLmx1bXBUID0gRGF0ZS5ub3coKTsNCiAgICAgICAgR2FtZS5sdW1wUmVmaWxsID0gMDsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygibHVtcHNPbiIpOw0KICAgICAgICBpZiAoQXBwKSBBcHAuaGFyZFJlc2V0KCk7DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUub25DcmF0ZSA9IDA7DQogICAgR2FtZS5zZXRPbkNyYXRlID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIEdhbWUub25DcmF0ZSA9IHdoYXQ7DQogICAgfTsNCiAgICBHYW1lLmNyYXRlID0gZnVuY3Rpb24gKG1lLCBjb250ZXh0LCBmb3JjZUNsaWNrU3RyLCBpZCwgc3R5bGUpIHsNCiAgICAgIC8vcHJvZHVjZSBhIGNyYXRlIHdpdGggYXNzb2NpYXRlZCB0b29sdGlwIGZvciBhbiB1cGdyYWRlIG9yIGFjaGlldmVtZW50DQogICAgICAvL21lIGlzIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHVwZ3JhZGUgb3IgYWNoaWV2ZW1lbnQNCiAgICAgIC8vY29udGV4dCBjYW4gYmUgInN0b3JlIiwgImFzY2VuZCIsICJzdGF0cyIgb3IgdW5kZWZpbmVkDQogICAgICAvL2ZvcmNlQ2xpY2tTdHIgY2hhbmdlcyB3aGF0IGlzIGRvbmUgd2hlbiB0aGUgY3JhdGUgaXMgY2xpY2tlZA0KICAgICAgLy9pZCBpcyB0aGUgcmVzdWx0aW5nIGRpdidzIGRlc2lyZWQgaWQNCg0KICAgICAgdmFyIGNsYXNzZXMgPSAiY3JhdGUiOw0KICAgICAgdmFyIGVuYWJsZWQgPSAwOw0KICAgICAgdmFyIG5vRnJhbWUgPSAwOw0KICAgICAgdmFyIGF0dGFjaG1lbnQgPSAidG9wIjsNCiAgICAgIHZhciBuZXVyb21hbmN5ID0gMDsNCiAgICAgIGlmICgNCiAgICAgICAgY29udGV4dCA9PSAic3RhdHMiICYmDQogICAgICAgIChHYW1lLkhhcygiTmV1cm9tYW5jeSIpIHx8IChHYW1lLnNlc2FtZSAmJiBtZS5wb29sID09ICJkZWJ1ZyIpKQ0KICAgICAgKQ0KICAgICAgICBuZXVyb21hbmN5ID0gMTsNCiAgICAgIHZhciBteXN0ZXJpb3VzID0gMDsNCiAgICAgIHZhciBjbGlja1N0ciA9ICIiOw0KDQogICAgICBpZiAobWUudHlwZSA9PSAidXBncmFkZSIpIHsNCiAgICAgICAgdmFyIGNhbkJ1eSA9IGNvbnRleHQgPT0gInN0b3JlIiA/IG1lLmNhbkJ1eSgpIDogdHJ1ZTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIGNvbnRleHQgPT0gInN0YXRzIiAmJg0KICAgICAgICAgIG1lLmJvdWdodCA9PSAwICYmDQogICAgICAgICAgIUdhbWUuSGFzKCJOZXVyb21hbmN5IikgJiYNCiAgICAgICAgICAoIUdhbWUuc2VzYW1lIHx8IG1lLnBvb2wgIT0gImRlYnVnIikNCiAgICAgICAgKQ0KICAgICAgICAgIHJldHVybiAiIjsNCiAgICAgICAgZWxzZSBpZiAoDQogICAgICAgICAgY29udGV4dCA9PSAic3RhdHMiICYmDQogICAgICAgICAgKEdhbWUuSGFzKCJOZXVyb21hbmN5IikgfHwgKEdhbWUuc2VzYW1lICYmIG1lLnBvb2wgPT0gImRlYnVnIikpDQogICAgICAgICkNCiAgICAgICAgICBuZXVyb21hbmN5ID0gMTsNCiAgICAgICAgZWxzZSBpZiAoY29udGV4dCA9PSAic3RvcmUiICYmICFjYW5CdXkpIGVuYWJsZWQgPSAwOw0KICAgICAgICBlbHNlIGlmIChjb250ZXh0ID09ICJhc2NlbmQiICYmIG1lLmJvdWdodCA9PSAwKSBlbmFibGVkID0gMDsNCiAgICAgICAgZWxzZSBlbmFibGVkID0gMTsNCiAgICAgICAgaWYgKG1lLmJvdWdodCA+IDApIGVuYWJsZWQgPSAxOw0KDQogICAgICAgIGlmIChjb250ZXh0ID09ICJzdGF0cyIgJiYgIUdhbWUucHJlZnMuY3JhdGVzKSBub0ZyYW1lID0gMTsNCg0KICAgICAgICBjbGFzc2VzICs9ICIgdXBncmFkZSI7DQogICAgICAgIGlmIChtZS5wb29sID09ICJwcmVzdGlnZSIpIGNsYXNzZXMgKz0gIiBoZWF2ZW5seSI7DQoNCiAgICAgICAgaWYgKG5ldXJvbWFuY3kpIGNsaWNrU3RyID0gIkdhbWUuVXBncmFkZXNCeUlkWyIgKyBtZS5pZCArICJdLnRvZ2dsZSgpOyI7DQogICAgICB9IGVsc2UgaWYgKG1lLnR5cGUgPT0gImFjaGlldmVtZW50Iikgew0KICAgICAgICBpZiAoY29udGV4dCA9PSAic3RhdHMiICYmIG1lLndvbiA9PSAwICYmIG1lLnBvb2wgIT0gIm5vcm1hbCIpIHJldHVybiAiIjsNCiAgICAgICAgZWxzZSBpZiAoY29udGV4dCAhPSAic3RhdHMiKSBlbmFibGVkID0gMTsNCg0KICAgICAgICBpZiAoY29udGV4dCA9PSAic3RhdHMiICYmICFHYW1lLnByZWZzLmNyYXRlcykgbm9GcmFtZSA9IDE7DQoNCiAgICAgICAgY2xhc3NlcyArPSAiIGFjaGlldmVtZW50IjsNCiAgICAgICAgaWYgKG1lLnBvb2wgPT0gInNoYWRvdyIpIGNsYXNzZXMgKz0gIiBzaGFkb3ciOw0KICAgICAgICBpZiAobWUud29uID4gMCkgZW5hYmxlZCA9IDE7DQogICAgICAgIGVsc2UgbXlzdGVyaW91cyA9IDE7DQogICAgICAgIGlmICghZW5hYmxlZCkNCiAgICAgICAgICBjbGlja1N0ciA9ICJHYW1lLkFjaGlldmVtZW50c0J5SWRbIiArIG1lLmlkICsgIl0uY2xpY2soKTsiOw0KDQogICAgICAgIGlmIChuZXVyb21hbmN5KQ0KICAgICAgICAgIGNsaWNrU3RyID0gIkdhbWUuQWNoaWV2ZW1lbnRzQnlJZFsiICsgbWUuaWQgKyAiXS50b2dnbGUoKTsiOw0KICAgICAgfQ0KDQogICAgICBpZiAoY29udGV4dCA9PSAic3RvcmUiKSBhdHRhY2htZW50ID0gInN0b3JlIjsNCg0KICAgICAgaWYgKGZvcmNlQ2xpY2tTdHIpIGNsaWNrU3RyID0gZm9yY2VDbGlja1N0cjsNCg0KICAgICAgaWYgKG1lLmNob2ljZXNGdW5jdGlvbikgY2xhc3NlcyArPSAiIHNlbGVjdG9yIjsNCg0KICAgICAgdmFyIGljb24gPSBtZS5pY29uOw0KICAgICAgaWYgKG15c3RlcmlvdXMpIGljb24gPSBbMCwgN107DQoNCiAgICAgIGlmIChtZS5pY29uRnVuY3Rpb24pIGljb24gPSBtZS5pY29uRnVuY3Rpb24oKTsNCg0KICAgICAgaWYgKG1lLmJvdWdodCAmJiBjb250ZXh0ID09ICJzdG9yZSIpIGVuYWJsZWQgPSAwOw0KDQogICAgICBpZiAoZW5hYmxlZCkgY2xhc3NlcyArPSAiIGVuYWJsZWQiOyAvLyBlbHNlIGNsYXNzZXMrPScgZGlzYWJsZWQnOw0KICAgICAgaWYgKG5vRnJhbWUpIGNsYXNzZXMgKz0gIiBub0ZyYW1lIjsNCg0KICAgICAgdmFyIHRleHQgPSBbXTsNCiAgICAgIGlmIChHYW1lLnNlc2FtZSkgew0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcFNbbWUubmFtZV0gfHwNCiAgICAgICAgICBHYW1lLmRlYnVnZ2VkVXBncmFkZUNwQ2xpY2tbbWUubmFtZV0NCiAgICAgICAgKSB7DQogICAgICAgICAgdGV4dC5wdXNoKCJ4IiArIEJlYXV0aWZ5KDEgKyBHYW1lLmRlYnVnZ2VkVXBncmFkZUNwU1ttZS5uYW1lXSwgMikpOw0KICAgICAgICAgIHRleHQucHVzaCgNCiAgICAgICAgICAgIEdhbWUuZGVidWdDb2xvcnNbDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgICAgTWF0aC5tYXgoDQogICAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgICAgTWF0aC5taW4oDQogICAgICAgICAgICAgICAgICAgIEdhbWUuZGVidWdDb2xvcnMubGVuZ3RoIC0gMSwNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcFNbbWUubmFtZV0gLyAyLCAwLjUpICoNCiAgICAgICAgICAgICAgICAgICAgICBHYW1lLmRlYnVnQ29sb3JzLmxlbmd0aA0KICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgXQ0KICAgICAgICAgICk7DQogICAgICAgICAgdGV4dC5wdXNoKA0KICAgICAgICAgICAgIngiICsgQmVhdXRpZnkoMSArIEdhbWUuZGVidWdnZWRVcGdyYWRlQ3BDbGlja1ttZS5uYW1lXSwgMikNCiAgICAgICAgICApOw0KICAgICAgICAgIHRleHQucHVzaCgNCiAgICAgICAgICAgIEdhbWUuZGVidWdDb2xvcnNbDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgICAgTWF0aC5tYXgoDQogICAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgICAgTWF0aC5taW4oDQogICAgICAgICAgICAgICAgICAgIEdhbWUuZGVidWdDb2xvcnMubGVuZ3RoIC0gMSwNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcENsaWNrW21lLm5hbWVdIC8gMiwgMC41KSAqDQogICAgICAgICAgICAgICAgICAgICAgR2FtZS5kZWJ1Z0NvbG9ycy5sZW5ndGgNCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgIF0NCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmV4dHJhSW5mbykgew0KICAgICAgICAgIHRleHQucHVzaCgNCiAgICAgICAgICAgIE1hdGguZmxvb3IobWUub3JkZXIpICsgKG1lLnBvd2VyID8gIjxicj5QOiIgKyBtZS5wb3dlciA6ICIiKQ0KICAgICAgICAgICk7DQogICAgICAgICAgdGV4dC5wdXNoKCIjZmZmIik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHZhciB0ZXh0U3RyID0gIiI7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpICs9IDIpIHsNCiAgICAgICAgdGV4dFN0ciArPQ0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJvcGFjaXR5OjAuOTt6LWluZGV4OjEwMDA7cGFkZGluZzowcHggMnB4O2JhY2tncm91bmQ6JyArDQogICAgICAgICAgdGV4dFtpICsgMV0gKw0KICAgICAgICAgICI7Y29sb3I6IzAwMDtmb250LXNpemU6MTBweDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6IiArDQogICAgICAgICAgKGkgLyAyKSAqIDEwICsNCiAgICAgICAgICAncHg7bGVmdDowcHg7Ij4nICsNCiAgICAgICAgICB0ZXh0W2ldICsNCiAgICAgICAgICAiPC9kaXY+IjsNCiAgICAgIH0NCiAgICAgIHJldHVybiAoDQogICAgICAgIChHYW1lLnByZWZzLnNjcmVlbnJlYWRlcg0KICAgICAgICAgID8gJzxidXR0b24gYXJpYS1sYWJlbGxlZGJ5PSJhcmlhUmVhZGVyLScgKyBtZS50eXBlICsgIi0iICsgbWUuaWQgKyAnIicNCiAgICAgICAgICA6ICI8ZGl2IikgKw0KICAgICAgICAoY2xpY2tTdHIgIT0gIiIgPyAiICIgKyBHYW1lLmNsaWNrU3RyICsgJz0iJyArIGNsaWNrU3RyICsgJyInIDogIiIpICsNCiAgICAgICAgJyBjbGFzcz0iJyArDQogICAgICAgIGNsYXNzZXMgKw0KICAgICAgICAnIiAnICsNCiAgICAgICAgR2FtZS5nZXREeW5hbWljVG9vbHRpcCgNCiAgICAgICAgICAiZnVuY3Rpb24oKXtyZXR1cm4gR2FtZS5jcmF0ZVRvb2x0aXAoR2FtZS4iICsNCiAgICAgICAgICAgIChtZS50eXBlID09ICJ1cGdyYWRlIiA/ICJVcGdyYWRlcyIgOiAiQWNoaWV2ZW1lbnRzIikgKw0KICAgICAgICAgICAgIkJ5SWRbIiArDQogICAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgICAiXSwiICsNCiAgICAgICAgICAgIChjb250ZXh0ID8gIiciICsgY29udGV4dCArICInIiA6ICIiKSArDQogICAgICAgICAgICAiKTt9IiwNCiAgICAgICAgICBhdHRhY2htZW50LA0KICAgICAgICAgIHRydWUNCiAgICAgICAgKSArDQogICAgICAgIChpZCA/ICdpZD0iJyArIGlkICsgJyIgJyA6ICIiKSArDQogICAgICAgICdzdHlsZT0iJyArDQogICAgICAgIChteXN0ZXJpb3VzDQogICAgICAgICAgPyAiYmFja2dyb3VuZC1wb3NpdGlvbjoiICsgLTAgKiA0OCArICJweCAiICsgLTcgKiA0OCArICJweDsiDQogICAgICAgICAgOiB3cml0ZUljb24oaWNvbikpICsNCiAgICAgICAgKGNvbnRleHQgPT0gImFzY2VuZCIgJiYgbWUucG9vbCA9PSAicHJlc3RpZ2UiDQogICAgICAgICAgPyAicG9zaXRpb246YWJzb2x1dGU7bGVmdDoiICsgbWUucG9zWCArICJweDt0b3A6IiArIG1lLnBvc1kgKyAicHg7Ig0KICAgICAgICAgIDogIiIpICsNCiAgICAgICAgKHN0eWxlIHx8ICIiKSArDQogICAgICAgICciPicgKw0KICAgICAgICB0ZXh0U3RyICsNCiAgICAgICAgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyDQogICAgICAgICAgPyAnPGxhYmVsIGNsYXNzPSJzck9ubHkiIGlkPSJhcmlhUmVhZGVyLScgKw0KICAgICAgICAgICAgbWUudHlwZSArDQogICAgICAgICAgICAiLSIgKw0KICAgICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICAgJyI+PC9sYWJlbD4nDQogICAgICAgICAgOiAiIikgKw0KICAgICAgICAobWUuY2hvaWNlc0Z1bmN0aW9uID8gJzxkaXYgY2xhc3M9InNlbGVjdG9yQ29ybmVyIj48L2Rpdj4nIDogIiIpICsNCiAgICAgICAgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyID8gIjwvYnV0dG9uPiIgOiAiPC9kaXY+IikNCiAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLmNyYXRlVG9vbHRpcCA9IGZ1bmN0aW9uIChtZSwgY29udGV4dCkgew0KICAgICAgdmFyIHRhZ3MgPSBbXTsNCiAgICAgIG15c3RlcmlvdXMgPSAwOw0KICAgICAgdmFyIG5ldXJvbWFuY3kgPSAwOw0KICAgICAgdmFyIHByaWNlID0gIiI7DQogICAgICBpZiAoDQogICAgICAgIGNvbnRleHQgPT0gInN0YXRzIiAmJg0KICAgICAgICAoR2FtZS5IYXMoIk5ldXJvbWFuY3kiKSB8fCAoR2FtZS5zZXNhbWUgJiYgbWUucG9vbCA9PSAiZGVidWciKSkNCiAgICAgICkNCiAgICAgICAgbmV1cm9tYW5jeSA9IDE7DQoNCiAgICAgIHZhciBhcmlhVGV4dCA9ICIiOw0KDQogICAgICBpZiAobWUudHlwZSA9PSAidXBncmFkZSIpIHsNCiAgICAgICAgYXJpYVRleHQgKz0gIlVwZ3JhZGUuICI7DQoNCiAgICAgICAgaWYgKG1lLnBvb2wgPT0gInByZXN0aWdlIikNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJbVGFnXUhlYXZlbmx5IiwgMCwgIkhlYXZlbmx5IiksICIjZWZhNDM4Iik7DQogICAgICAgIGVsc2UgaWYgKG1lLnBvb2wgPT0gInRlY2giKQ0KICAgICAgICAgIHRhZ3MucHVzaChsb2MoIltUYWddVGVjaCIsIDAsICJUZWNoIiksICIjMzZhNGZmIik7DQogICAgICAgIGVsc2UgaWYgKG1lLnBvb2wgPT0gImNvb2tpZSIpDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiW1RhZ11Db29raWUiLCAwLCAiQ29va2llIiksIDApOw0KICAgICAgICBlbHNlIGlmIChtZS5wb29sID09ICJkZWJ1ZyIpDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiW1RhZ11EZWJ1ZyIsIDAsICJEZWJ1ZyIpLCAiIzAwYzQ2MiIpOw0KICAgICAgICBlbHNlIGlmIChtZS5wb29sID09ICJ0b2dnbGUiKQ0KICAgICAgICAgIHRhZ3MucHVzaChsb2MoIltUYWddU3dpdGNoIiwgMCwgIlN3aXRjaCIpLCAwKTsNCiAgICAgICAgZWxzZSB0YWdzLnB1c2gobG9jKCJbVGFnXVVwZ3JhZGUiLCAwLCAiVXBncmFkZSIpLCAwKTsNCg0KICAgICAgICBpZiAoR2FtZS5IYXMoIkxhYmVsIHByaW50ZXIiKSkgew0KICAgICAgICAgIGlmIChtZS50aWVyICE9IDApDQogICAgICAgICAgICB0YWdzLnB1c2goDQogICAgICAgICAgICAgIGxvYygiVGllcjoiKSArDQogICAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiW1RpZXJdIiArIEdhbWUuVGllcnNbbWUudGllcl0ubmFtZSwNCiAgICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgICBHYW1lLlRpZXJzW21lLnRpZXJdLm5hbWUNCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICBHYW1lLlRpZXJzW21lLnRpZXJdLmNvbG9yDQogICAgICAgICAgICApOw0KICAgICAgICAgIGlmIChtZS5uYW1lID09ICJMYWJlbCBwcmludGVyIiB8fCBtZS5uYW1lID09ICJUaGlzIHVwZ3JhZGUiKQ0KICAgICAgICAgICAgdGFncy5wdXNoKA0KICAgICAgICAgICAgICBsb2MoIlRpZXI6IikgKyAiICIgKyBsb2MoIltUaWVyXVNlbGYtcmVmZXJlbnRpYWwiKSwNCiAgICAgICAgICAgICAgIiNmZjAwZWEiDQogICAgICAgICAgICApOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKG1lLmlzVmF1bHRlZCgpKSB0YWdzLnB1c2gobG9jKCJWYXVsdGVkIiksICIjNGU3NTY2Iik7DQoNCiAgICAgICAgaWYgKG1lLmJvdWdodCA+IDApIHsNCiAgICAgICAgICBhcmlhVGV4dCArPSAiT3duZWQuICI7DQogICAgICAgICAgaWYgKG1lLnBvb2wgPT0gInRlY2giKSB0YWdzLnB1c2gobG9jKCJSZXNlYXJjaGVkIiksIDApOw0KICAgICAgICAgIGVsc2UgaWYgKEVOICYmIG1lLmtpdHRlbikgdGFncy5wdXNoKCJQdXJyY2hhc2VkIiwgMCk7DQogICAgICAgICAgZWxzZSB0YWdzLnB1c2gobG9jKCJQdXJjaGFzZWQiKSwgMCk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAobWUubGFzdGluZyAmJiBtZS51bmxvY2tlZCkNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJVbmxvY2tlZCBmb3JldmVyIiksICIjZjJmZjg3Iik7DQoNCiAgICAgICAgaWYgKG5ldXJvbWFuY3kgJiYgbWUuYm91Z2h0ID09IDApDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiQ2xpY2sgdG8gbGVhcm4hIiksICIjMDBjNDYyIik7DQogICAgICAgIGVsc2UgaWYgKG5ldXJvbWFuY3kgJiYgbWUuYm91Z2h0ID4gMCkNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJDbGljayB0byB1bmxlYXJuISIpLCAiIzAwYzQ2MiIpOw0KDQogICAgICAgIHZhciBjYW5CdXkgPSBjb250ZXh0ID09ICJzdG9yZSIgPyBtZS5jYW5CdXkoKSA6IHRydWU7DQogICAgICAgIHZhciBjb3N0ID0gbWUuZ2V0UHJpY2UoKTsNCiAgICAgICAgaWYgKG1lLnByaWNlTHVtcHMgPiAwKSBjb3N0ID0gbWUucHJpY2VMdW1wczsNCg0KICAgICAgICBpZiAobWUucHJpY2VMdW1wcyA9PSAwICYmIGNvc3QgPT0gMCkgcHJpY2UgPSAiIjsNCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgcHJpY2UgPQ0KICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0O3RleHQtYWxpZ246cmlnaHQ7Ij48c3BhbiBjbGFzcz0icHJpY2UnICsNCiAgICAgICAgICAgIChtZS5wcmljZUx1bXBzID4gMCA/ICIgbHVtcCIgOiAiIikgKw0KICAgICAgICAgICAgKG1lLnBvb2wgPT0gInByZXN0aWdlIg0KICAgICAgICAgICAgICA/IG1lLmJvdWdodCB8fCBHYW1lLmhlYXZlbmx5Q2hpcHMgPj0gY29zdA0KICAgICAgICAgICAgICAgID8gIiBoZWF2ZW5seSINCiAgICAgICAgICAgICAgICA6ICIgaGVhdmVubHkgZGlzYWJsZWQiDQogICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgIChjb250ZXh0ID09ICJzdG9yZSIgPyAoY2FuQnV5ID8gIiIgOiAiIGRpc2FibGVkIikgOiAiIikgKw0KICAgICAgICAgICAgJyI+JyArDQogICAgICAgICAgICBCZWF1dGlmeShNYXRoLnJvdW5kKGNvc3QpKSArDQogICAgICAgICAgICAiPC9zcGFuPiIgKw0KICAgICAgICAgICAgKG1lLnBvb2wgIT0gInByZXN0aWdlIiAmJiBtZS5wcmljZUx1bXBzID09IDANCiAgICAgICAgICAgICAgPyBHYW1lLmNvc3REZXRhaWxzKGNvc3QpDQogICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICI8L2Rpdj4iOw0KDQogICAgICAgICAgYXJpYVRleHQgKz0NCiAgICAgICAgICAgIChtZS5ib3VnaHQNCiAgICAgICAgICAgICAgPyAiQm91Z2h0IGZvciINCiAgICAgICAgICAgICAgOiBjYW5CdXkNCiAgICAgICAgICAgICAgPyAiQ2FuIGJ1eSBmb3IiDQogICAgICAgICAgICAgIDogIkNhbm5vdCBhZmZvcmQgdGhlIikgKw0KICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgIEJlYXV0aWZ5KE1hdGgucm91bmQoY29zdCkpICsNCiAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAobWUucHJpY2VMdW1wcyA+IDANCiAgICAgICAgICAgICAgPyAic3VnYXIgbHVtcHMiDQogICAgICAgICAgICAgIDogbWUucG9vbCA9PSAicHJlc3RpZ2UiDQogICAgICAgICAgICAgID8gImhlYXZlbmx5IGNoaXBzIg0KICAgICAgICAgICAgICA6ICJjb29raWVzIikgKw0KICAgICAgICAgICAgIi4gIjsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChtZS50eXBlID09ICJhY2hpZXZlbWVudCIpIHsNCiAgICAgICAgYXJpYVRleHQgKz0gIkFjaGlldmVtZW50LiAiOw0KICAgICAgICBpZiAobWUucG9vbCA9PSAic2hhZG93IikNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJTaGFkb3cgQWNoaWV2ZW1lbnQiKSwgIiM5NzAwY2YiKTsNCiAgICAgICAgZWxzZSB0YWdzLnB1c2gobG9jKCJBY2hpZXZlbWVudCIpLCAwKTsNCiAgICAgICAgaWYgKG1lLndvbiA+IDApIHsNCiAgICAgICAgICB0YWdzLnB1c2gobG9jKCJVbmxvY2tlZCIpLCAwKTsNCiAgICAgICAgICBhcmlhVGV4dCArPSAiVW5sb2NrZWQuICI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGFncy5wdXNoKGxvYygiTG9ja2VkIiksIDApOw0KICAgICAgICAgIG15c3RlcmlvdXMgPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKG5ldXJvbWFuY3kgJiYgbWUud29uID09IDApDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiQ2xpY2sgdG8gd2luISIpLCAiIzAwYzQ2MiIpOw0KICAgICAgICBlbHNlIGlmIChuZXVyb21hbmN5ICYmIG1lLndvbiA+IDApDQogICAgICAgICAgdGFncy5wdXNoKGxvYygiQ2xpY2sgdG8gbG9zZSEiKSwgIiMwMGM0NjIiKTsNCiAgICAgIH0NCg0KICAgICAgdmFyIHRhZ3NTdHIgPSAiIjsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkgKz0gMikgew0KICAgICAgICBpZiAoaSAlIDIgPT0gMCkNCiAgICAgICAgICB0YWdzU3RyICs9DQogICAgICAgICAgICAnPGRpdiBjbGFzcz0idGFnIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjonICsNCiAgICAgICAgICAgICh0YWdzW2kgKyAxXSA9PSAwID8gIiNmZmYiIDogdGFnc1tpICsgMV0pICsNCiAgICAgICAgICAgICc7Ij4nICsNCiAgICAgICAgICAgIHRhZ3NbaV0gKw0KICAgICAgICAgICAgIjwvZGl2PiI7DQogICAgICB9DQoNCiAgICAgIHZhciBpY29uID0gbWUuaWNvbjsNCiAgICAgIGlmIChteXN0ZXJpb3VzKSBpY29uID0gWzAsIDddOw0KDQogICAgICBpZiAobWUuaWNvbkZ1bmN0aW9uKSBpY29uID0gbWUuaWNvbkZ1bmN0aW9uKCk7DQoNCiAgICAgIGFyaWFUZXh0ICs9IChteXN0ZXJpb3VzID8gIkhpZGRlbiIgOiBtZS5kbmFtZSkgKyAiLiAiOw0KDQogICAgICB2YXIgdGlwID0gIiI7DQogICAgICBpZiAoY29udGV4dCA9PSAic3RvcmUiKSB7DQogICAgICAgIGlmIChtZS5wb29sICE9ICJ0b2dnbGUiICYmIG1lLnBvb2wgIT0gInRlY2giKSB7DQogICAgICAgICAgdmFyIHB1cmNoYXNlID0gbWUua2l0dGVuID8gInB1cnJjaGFzZSIgOiAicHVyY2hhc2UiOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiSW5zcGlyZWQgY2hlY2tsaXN0IikpIHsNCiAgICAgICAgICAgIGlmIChtZS5pc1ZhdWx0ZWQoKSkNCiAgICAgICAgICAgICAgdGlwID0gRU4NCiAgICAgICAgICAgICAgICA/ICJVcGdyYWRlIGlzIHZhdWx0ZWQgYW5kIHdpbGwgbm90IGJlIGF1dG8tIiArDQogICAgICAgICAgICAgICAgICBwdXJjaGFzZSArDQogICAgICAgICAgICAgICAgICAiZC48YnI+Q2xpY2sgdG8gIiArDQogICAgICAgICAgICAgICAgICBwdXJjaGFzZSArDQogICAgICAgICAgICAgICAgICAiLiBTaGlmdC1jbGljayB0byB1bnZhdWx0LiINCiAgICAgICAgICAgICAgICA6IGxvYygiVXBncmFkZSBpcyB2YXVsdGVkIGFuZCB3aWxsIG5vdCBiZSBhdXRvLXB1cmNoYXNlZC4iKSArDQogICAgICAgICAgICAgICAgICAiPGJyPiIgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJDbGljayB0byBwdXJjaGFzZS4iKSArDQogICAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgICAgbG9jKCIlMSB0byB1bnZhdWx0LiIsIGxvYygiU2hpZnQtY2xpY2siKSk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgIHRpcCA9IEVODQogICAgICAgICAgICAgICAgPyAiQ2xpY2sgdG8gIiArIHB1cmNoYXNlICsgIi4gU2hpZnQtY2xpY2sgdG8gdmF1bHQuIg0KICAgICAgICAgICAgICAgIDogbG9jKCJDbGljayB0byBwdXJjaGFzZS4iKSArDQogICAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgICAgbG9jKCIlMSB0byB2YXVsdC4iLCBsb2MoIlNoaWZ0LWNsaWNrIikpOw0KICAgICAgICAgICAgaWYgKEVOKSB7DQogICAgICAgICAgICAgIGlmIChHYW1lLmtleXNbMTZdKSB0aXAgKz0gIjxicj4oWW91IGFyZSBob2xkaW5nIFNoaWZ0LikiOw0KICAgICAgICAgICAgICBlbHNlIHRpcCArPSAiPGJyPihZb3UgYXJlIG5vdCBob2xkaW5nIFNoaWZ0LikiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZQ0KICAgICAgICAgICAgdGlwID0gRU4gPyAiQ2xpY2sgdG8gIiArIHB1cmNoYXNlICsgIi4iIDogbG9jKCJDbGljayB0byBwdXJjaGFzZS4iKTsNCiAgICAgICAgfSBlbHNlIGlmIChtZS5wb29sID09ICJ0b2dnbGUiICYmIG1lLmNob2ljZXNGdW5jdGlvbikNCiAgICAgICAgICB0aXAgPSBsb2MoIkNsaWNrIHRvIG9wZW4gc2VsZWN0b3IuIik7DQogICAgICAgIGVsc2UgaWYgKG1lLnBvb2wgPT0gInRvZ2dsZSIpIHRpcCA9IGxvYygiQ2xpY2sgdG8gdG9nZ2xlLiIpOw0KICAgICAgICBlbHNlIGlmIChtZS5wb29sID09ICJ0ZWNoIikgdGlwID0gbG9jKCJDbGljayB0byByZXNlYXJjaC4iKTsNCiAgICAgIH0NCg0KICAgICAgaWYgKHRpcCAhPSAiIikgYXJpYVRleHQgKz0gdGlwICsgIiAiOw0KDQogICAgICB2YXIgZGVzYyA9IG1lLmRkZXNjOw0KICAgICAgaWYgKG1lLmRlc2NGdW5jKSBkZXNjID0gbWUuZGVzY0Z1bmMoY29udGV4dCk7DQogICAgICBpZiAobWUuYm91Z2h0ICYmIGNvbnRleHQgPT0gInN0b3JlIiAmJiBtZS5kaXNwbGF5RnVuY1doZW5Pd25lZCkNCiAgICAgICAgZGVzYyA9IG1lLmRpc3BsYXlGdW5jV2hlbk93bmVkKCkgKyAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArIGRlc2M7DQogICAgICBpZiAobWUudW5sb2NrQXQpIHsNCiAgICAgICAgaWYgKG1lLnVubG9ja0F0LnJlcXVpcmUpIHsNCiAgICAgICAgICB2YXIgaXQgPSBHYW1lLlVwZ3JhZGVzW21lLnVubG9ja0F0LnJlcXVpcmVdOw0KICAgICAgICAgIGRlc2MgPQ0KICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTo4MCU7dGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgICAgIChFTiA/ICJGcm9tIiA6IGxvYygiU291cmNlOiIpKSArDQogICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgdGlueUljb24oaXQuaWNvbikgKw0KICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgIGl0LmRuYW1lICsNCiAgICAgICAgICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICAgIGRlc2M7DQogICAgICAgIH0gZWxzZSBpZiAobWUudW5sb2NrQXQudGV4dCkgew0KICAgICAgICAgIC8vdmFyIGl0PUdhbWUuVXBncmFkZXNbbWUudW5sb2NrQXQucmVxdWlyZV07DQogICAgICAgICAgZGVzYyA9DQogICAgICAgICAgICAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjgwJTt0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICAgICAgKEVOID8gIkZyb20iIDogbG9jKCJTb3VyY2U6IikpICsNCiAgICAgICAgICAgICIgPGI+IiArDQogICAgICAgICAgICB0ZXh0ICsNCiAgICAgICAgICAgICc8L2I+PC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgICBkZXNjOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGlmICghbXlzdGVyaW91cykgYXJpYVRleHQgKz0gIkRlc2NyaXB0aW9uOiAiICsgZGVzYyArICIgIjsNCg0KICAgICAgaWYgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyKSB7DQogICAgICAgIHZhciBhcmlhTGFiZWwgPSBsKCJhcmlhUmVhZGVyLSIgKyBtZS50eXBlICsgIi0iICsgbWUuaWQpOw0KICAgICAgICBpZiAoYXJpYUxhYmVsKQ0KICAgICAgICAgIGFyaWFMYWJlbC5pbm5lckhUTUwgPSBhcmlhVGV4dC5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgIiAiKTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MXB4O3RvcDoxcHg7cmlnaHQ6MXB4O2JvdHRvbToxcHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTI1ZGVnLCcgKw0KICAgICAgICAobWUucG9vbCA9PSAicHJlc3RpZ2UiDQogICAgICAgICAgPyAicmdiYSgxNSwxMTUsMTMwLDEpIDAlLHJnYmEoMTUsMTE1LDEzMCwwKSINCiAgICAgICAgICA6ICJyZ2JhKDUwLDQwLDQwLDEpIDAlLHJnYmEoNTAsNDAsNDAsMCkiKSArDQogICAgICAgICcgMjAlKTttaXgtYmxlbmQtbW9kZTpzY3JlZW47ei1pbmRleDoxOyI+PC9kaXY+PGRpdiBzdHlsZT0iei1pbmRleDoxMDtwYWRkaW5nOjhweCA0cHg7bWluLXdpZHRoOjM1MHB4O3Bvc2l0aW9uOnJlbGF0aXZlOyIgaWQ9InRvb2x0aXBDcmF0ZSI+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0iZmxvYXQ6bGVmdDttYXJnaW4tbGVmdDotOHB4O21hcmdpbi10b3A6LThweDsnICsNCiAgICAgICAgd3JpdGVJY29uKGljb24pICsNCiAgICAgICAgJyI+PC9kaXY+JyArDQogICAgICAgIChtZS5ib3VnaHQgJiYgY29udGV4dCA9PSAic3RvcmUiID8gIiIgOiBwcmljZSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibmFtZSI+JyArDQogICAgICAgIChteXN0ZXJpb3VzID8gIj8/PyIgOiBtZS5kbmFtZSkgKw0KICAgICAgICAiPC9kaXY+IiArDQogICAgICAgIHRhZ3NTdHIgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBjbGFzcz0iZGVzY3JpcHRpb24iPicgKw0KICAgICAgICAobXlzdGVyaW91cyA/ICI/Pz8iIDogZGVzYykgKw0KICAgICAgICAiPC9kaXY+PC9kaXY+IiArDQogICAgICAgICh0aXAgIT0gIiINCiAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48ZGl2IHN0eWxlPSJmb250LXNpemU6MTBweDtmb250LXdlaWdodDpib2xkO2NvbG9yOiM5OTk7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZy1ib3R0b206NHB4O2xpbmUtaGVpZ2h0OjEwMCU7IiBjbGFzcz0iY3JhdGVUaXAiPicgKw0KICAgICAgICAgICAgdGlwICsNCiAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgOiAiIikgKw0KICAgICAgICAoR2FtZS5zZXNhbWUNCiAgICAgICAgICA/ICc8ZGl2IHN0eWxlPSJmb250LXNpemU6OXB4OyI+SWQ6ICcgKw0KICAgICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICAgIiB8IE9yZGVyOiAiICsNCiAgICAgICAgICAgIE1hdGguZmxvb3IobWUub3JkZXIpICsNCiAgICAgICAgICAgIChtZS50aWVyID8gIiB8IFRpZXI6ICIgKyBtZS50aWVyIDogIiIpICsNCiAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgOiAiIikNCiAgICAgICk7DQogICAgfTsNCg0KICAgIEdhbWUuY29zdERldGFpbHMgPSBmdW5jdGlvbiAoY29zdCkgew0KICAgICAgaWYgKCFHYW1lLkhhcygiR2VuaXVzIGFjY291bnRpbmciKSkgcmV0dXJuICIiOw0KICAgICAgaWYgKCFjb3N0KSByZXR1cm4gIiI7DQogICAgICB2YXIgcHJpY2VJbmZvID0gIiI7DQogICAgICB2YXIgY3BzID0gR2FtZS5jb29raWVzUHMgKiAoMSAtIEdhbWUuY3BzU3Vja2VkKTsNCiAgICAgIGlmIChjb3N0ID4gR2FtZS5jb29raWVzKQ0KICAgICAgICBwcmljZUluZm8gKz0NCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiaW4gJTEiLA0KICAgICAgICAgICAgR2FtZS5zYXlUaW1lKCgoY29zdCAtIEdhbWUuY29va2llcykgLyBjcHMgKyAxKSAqIEdhbWUuZnBzKQ0KICAgICAgICAgICkgKyAiPGJyPiI7DQogICAgICBwcmljZUluZm8gKz0NCiAgICAgICAgbG9jKCIlMSB3b3J0aCIsIEdhbWUuc2F5VGltZSgoY29zdCAvIGNwcyArIDEpICogR2FtZS5mcHMpKSArICI8YnI+IjsNCiAgICAgIHByaWNlSW5mbyArPQ0KICAgICAgICBsb2MoIiUxJSBvZiBiYW5rIiwgQmVhdXRpZnkoKGNvc3QgLyBHYW1lLmNvb2tpZXMpICogMTAwLCAxKSkgKyAiPGJyPiI7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjgwJTtvcGFjaXR5OjAuNztsaW5lLWhlaWdodDo5MCU7IiBjbGFzcz0iY29zdERldGFpbHMiPicgKw0KICAgICAgICBwcmljZUluZm8gKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCVBSRVNUSUdFDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLkhDZmFjdG9yID0gMzsNCiAgICBHYW1lLkhvd011Y2hQcmVzdGlnZSA9IGZ1bmN0aW9uICgNCiAgICAgIGNvb2tpZXMgLy9ob3cgbXVjaCBwcmVzdGlnZSBbY29va2llc10gc2hvdWxkIGxhbmQgeW91DQogICAgKSB7DQogICAgICByZXR1cm4gTWF0aC5wb3coY29va2llcyAvIDEwMDAwMDAwMDAwMDAsIDEgLyBHYW1lLkhDZmFjdG9yKTsNCiAgICB9Ow0KICAgIEdhbWUuSG93TWFueUNvb2tpZXNSZXNldCA9IGZ1bmN0aW9uICgNCiAgICAgIGNoaXBzIC8vaG93IG1hbnkgY29va2llcyBbY2hpcHNdIGFyZSB3b3J0aA0KICAgICkgew0KICAgICAgLy90aGlzIG11c3QgYmUgdGhlIGludmVyc2Ugb2YgdGhlIGFib3ZlIGZ1bmN0aW9uIChpZS4gaWYgY29va2llcz1jaGlwc14yLCBjaGlwcz1jb29raWVzXigxLzIpICkNCiAgICAgIHJldHVybiBNYXRoLnBvdyhjaGlwcywgR2FtZS5IQ2ZhY3RvcikgKiAxMDAwMDAwMDAwMDAwOw0KICAgIH07DQogICAgR2FtZS5nYWluZWRQcmVzdGlnZSA9IDA7DQogICAgR2FtZS5FYXJuSGVhdmVubHlDaGlwcyA9IGZ1bmN0aW9uIChjb29raWVzRm9yZmVpdGVkLCBzaWxlbnQpIHsNCiAgICAgIC8vcmVjYWxjdWxhdGUgcHJlc3RpZ2UgYW5kIGNoaXBzIG93bmVkDQogICAgICB2YXIgcHJlc3RpZ2UgPSBNYXRoLmZsb29yKA0KICAgICAgICBHYW1lLkhvd011Y2hQcmVzdGlnZShHYW1lLmNvb2tpZXNSZXNldCArIGNvb2tpZXNGb3JmZWl0ZWQpDQogICAgICApOw0KICAgICAgcHJlc3RpZ2UgPSBNYXRoLm1heCgwLCBwcmVzdGlnZSk7DQogICAgICBpZiAocHJlc3RpZ2UgIT0gR2FtZS5wcmVzdGlnZSkgew0KICAgICAgICAvL2RpZCB3ZSBjaGFuZ2UgcHJlc3RpZ2UgbGV2ZWxzPw0KICAgICAgICB2YXIgcHJlc3RpZ2VEaWZmZXJlbmNlID0gcHJlc3RpZ2UgLSBHYW1lLnByZXN0aWdlOw0KICAgICAgICBHYW1lLmdhaW5lZFByZXN0aWdlID0gcHJlc3RpZ2VEaWZmZXJlbmNlOw0KICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHMgKz0gcHJlc3RpZ2VEaWZmZXJlbmNlOw0KICAgICAgICBHYW1lLnByZXN0aWdlID0gcHJlc3RpZ2U7DQogICAgICAgIGlmICghc2lsZW50ICYmIHByZXN0aWdlRGlmZmVyZW5jZSA+IDApDQogICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJZb3UgZm9yZmVpdCB5b3VyICUxLiIsDQogICAgICAgICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KGNvb2tpZXNGb3JmZWl0ZWQpKQ0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIllvdSBnYWluIDxiPiUxPC9iPiEiLA0KICAgICAgICAgICAgICBsb2MoIiUxIHByZXN0aWdlIGxldmVsIiwgTEJlYXV0aWZ5KHByZXN0aWdlRGlmZmVyZW5jZSkpDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgWzE5LCA3XQ0KICAgICAgICAgICk7DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUuR2V0SGVhdmVubHlNdWx0aXBsaWVyID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGhlYXZlbmx5TXVsdCA9IDA7DQogICAgICBpZiAoR2FtZS5IYXMoIkhlYXZlbmx5IGNoaXAgc2VjcmV0IikpIGhlYXZlbmx5TXVsdCArPSAwLjA1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBjb29raWUgc3RhbmQiKSkgaGVhdmVubHlNdWx0ICs9IDAuMjsNCiAgICAgIGlmIChHYW1lLkhhcygiSGVhdmVubHkgYmFrZXJ5IikpIGhlYXZlbmx5TXVsdCArPSAwLjI1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBjb25mZWN0aW9uZXJ5IikpIGhlYXZlbmx5TXVsdCArPSAwLjI1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBrZXkiKSkgaGVhdmVubHlNdWx0ICs9IDAuMjU7DQogICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0RyYWdvbiBHb2QnKSkgaGVhdmVubHlNdWx0Kj0xLjA1Ow0KICAgICAgaGVhdmVubHlNdWx0ICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJEcmFnb24gR29kIikgKiAwLjA1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJMdWNreSBkaWdpdCIpKSBoZWF2ZW5seU11bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiTHVja3kgbnVtYmVyIikpIGhlYXZlbmx5TXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJMdWNreSBwYXlvdXQiKSkgaGVhdmVubHlNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJjcmVhdGlvbiIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIGhlYXZlbmx5TXVsdCAqPSAwLjc7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAyKSBoZWF2ZW5seU11bHQgKj0gMC44Ow0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgaGVhdmVubHlNdWx0ICo9IDAuOTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBoZWF2ZW5seU11bHQ7DQogICAgfTsNCg0KICAgIEdhbWUuYXNjZW5zaW9uTW9kZXMgPSB7DQogICAgICAwOiB7DQogICAgICAgIG5hbWU6ICJOb25lIiwNCiAgICAgICAgZG5hbWU6IGxvYygiTm9uZSBbYXNjZW5zaW9uIHR5cGVdIiksDQogICAgICAgIGRlc2M6IGxvYygiTm8gc3BlY2lhbCBtb2RpZmllcnMuIiksDQogICAgICAgIGljb246IFsxMCwgMF0sDQogICAgICB9LA0KICAgICAgMTogew0KICAgICAgICBuYW1lOiAiQm9ybiBhZ2FpbiIsDQogICAgICAgIGRuYW1lOiBsb2MoIkJvcm4gYWdhaW4gW2FzY2Vuc2lvbiB0eXBlXSIpLA0KICAgICAgICBkZXNjOiBsb2MoDQogICAgICAgICAgJ1RoaXMgcnVuIHdpbGwgYmVoYXZlIGFzIGlmIHlvdVwnZCBqdXN0IHN0YXJ0ZWQgdGhlIGdhbWUgZnJvbSBzY3JhdGNoLiBQcmVzdGlnZSBsZXZlbHMgYW5kIGhlYXZlbmx5IHVwZ3JhZGVzIHdpbGwgaGF2ZSBubyBlZmZlY3QsIGFzIHdpbGwgc3VnYXIgbHVtcHMgYW5kIGJ1aWxkaW5nIGxldmVscy4gUGVybWEtdXBncmFkZXMgYW5kIG1pbmlnYW1lcyB3aWxsIGJlIHVuYXZhaWxhYmxlLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PlNvbWUgYWNoaWV2ZW1lbnRzIGFyZSBvbmx5IGF2YWlsYWJsZSBpbiB0aGlzIG1vZGUuJw0KICAgICAgICApLA0KICAgICAgICBpY29uOiBbMiwgN10sDQogICAgICB9IC8qLA0KCQkyOntuYW1lOidUcmlnZ2VyIGZpbmdlcicsZG5hbWU6bG9jKCJUcmlnZ2VyIGZpbmdlciBbYXNjZW5zaW9uIHR5cGVdIiksZGVzYzpsb2MoIkluIHRoaXMgcnVuLCBzY3JvbGxpbmcgeW91ciBtb3VzZSB3aGVlbCBvbiB0aGUgY29va2llIGNvdW50cyBhcyBjbGlja2luZyBpdC4gU29tZSB1cGdyYWRlcyBpbnRyb2R1Y2UgbmV3IGNsaWNraW5nIGJlaGF2aW9ycy48YnI+Tm8gY2xpY2tpbmcgYWNoaWV2ZW1lbnRzIG1heSBiZSBvYnRhaW5lZCBpbiB0aGlzIG1vZGUuPGRpdiBjbGFzcz1cImxpbmVcIj48L2Rpdj5SZWFjaGluZyAxIHF1YWRyaWxsaW9uIGNvb2tpZXMgaW4gdGhpcyBtb2RlIHVubG9ja3MgYSBzcGVjaWFsIGhlYXZlbmx5IHVwZ3JhZGUuIiksaWNvbjpbMTIsMF19Ki8sDQogICAgfTsNCg0KICAgIEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50ID0gMDsNCiAgICBHYW1lLmFzY2VuZE1ldGVyUGVyY2VudFQgPSAwOw0KICAgIEdhbWUuYXNjZW5kTWV0ZXJMZXZlbCA9IDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDsNCg0KICAgIEdhbWUubmV4dEFzY2Vuc2lvbk1vZGUgPSAwOw0KICAgIEdhbWUuVXBkYXRlQXNjZW5zaW9uTW9kZVByb21wdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBpY29uID0gR2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLm5leHRBc2NlbnNpb25Nb2RlXS5pY29uOw0KICAgICAgdmFyIG5hbWUgPSBHYW1lLmFzY2Vuc2lvbk1vZGVzW0dhbWUubmV4dEFzY2Vuc2lvbk1vZGVdLmRuYW1lOw0KICAgICAgbCgiYXNjZW5kTW9kZUJ1dHRvbiIpLmlubmVySFRNTCA9DQogICAgICAgICc8ZGl2IGNsYXNzPSJjcmF0ZSBub0ZyYW1lIGVuYWJsZWQiICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5QaWNrQXNjZW5zaW9uTW9kZSgpOyIgJyArDQogICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAnPGRpdiBzdHlsZT0ibWluLXdpZHRoOjIwMHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxMXB4OyIgaWQ9InRvb2x0aXBOZXh0Q2hhbGxlbmdlTW9kZSI+JyArDQogICAgICAgICAgICBsb2MoIkNoYWxsZW5nZSBtb2RlIGZvciB0aGUgbmV4dCBydW46IikgKw0KICAgICAgICAgICAgIjxicj48Yj4iICsNCiAgICAgICAgICAgIG5hbWUgKw0KICAgICAgICAgICAgJzwvYj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIkNoYWxsZW5nZSBtb2RlcyBhcHBseSBzcGVjaWFsIG1vZGlmaWVycyB0byB5b3VyIG5leHQgYXNjZW5zaW9uLjxicj5DbGljayB0byBjaGFuZ2UuIg0KICAgICAgICAgICAgKSArDQogICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICAiYm90dG9tLXJpZ2h0Ig0KICAgICAgICApICsNCiAgICAgICAgJyBzdHlsZT0ib3BhY2l0eToxO2Zsb2F0Om5vbmU7ZGlzcGxheTpibG9jaztiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKw0KICAgICAgICAtaWNvblswXSAqIDQ4ICsNCiAgICAgICAgInB4ICIgKw0KICAgICAgICAtaWNvblsxXSAqIDQ4ICsNCiAgICAgICAgJ3B4OyI+PC9kaXY+JzsNCiAgICB9Ow0KICAgIEdhbWUuUGlja0FzY2Vuc2lvbk1vZGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgR2FtZS50b29sdGlwLmhpZGUoKTsNCg0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmFzY2Vuc2lvbk1vZGVzKSB7DQogICAgICAgIHZhciBpY29uID0gR2FtZS5hc2NlbnNpb25Nb2Rlc1tpXS5pY29uOw0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGRpdiBjbGFzcz0iY3JhdGUgZW5hYmxlZCcgKw0KICAgICAgICAgIChpID09IEdhbWUubmV4dEFzY2Vuc2lvbk1vZGUgPyAiIGhpZ2hsaWdodGVkIiA6ICIiKSArDQogICAgICAgICAgJyIgaWQ9ImNoYWxsZW5nZU1vZGVTZWxlY3RvcicgKw0KICAgICAgICAgIGkgKw0KICAgICAgICAgICciIHN0eWxlPSJvcGFjaXR5OjE7ZmxvYXQ6bm9uZTtkaXNwbGF5OmlubGluZS1ibG9jaztiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKw0KICAgICAgICAgIC1pY29uWzBdICogNDggKw0KICAgICAgICAgICJweCAiICsNCiAgICAgICAgICAtaWNvblsxXSAqIDQ4ICsNCiAgICAgICAgICAncHg7IiAnICsNCiAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAnPSJHYW1lLm5leHRBc2NlbnNpb25Nb2RlPScgKw0KICAgICAgICAgIGkgKw0KICAgICAgICAgICI7R2FtZS5QaWNrQXNjZW5zaW9uTW9kZSgpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7R2FtZS5jaG9pY2VTZWxlY3Rvck9uPS0xO1wiIG9uTW91c2VPdXQ9XCJsKCdjaGFsbGVuZ2VTZWxlY3RlZE5hbWUnKS5pbm5lckhUTUw9R2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLm5leHRBc2NlbnNpb25Nb2RlXS5kbmFtZTtsKCdjaGFsbGVuZ2VTZWxlY3RlZERlc2MnKS5pbm5lckhUTUw9R2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLm5leHRBc2NlbnNpb25Nb2RlXS5kZXNjO1wiIG9uTW91c2VPdmVyPVwibCgnY2hhbGxlbmdlU2VsZWN0ZWROYW1lJykuaW5uZXJIVE1MPUdhbWUuYXNjZW5zaW9uTW9kZXNbIiArDQogICAgICAgICAgaSArDQogICAgICAgICAgIl0uZG5hbWU7bCgnY2hhbGxlbmdlU2VsZWN0ZWREZXNjJykuaW5uZXJIVE1MPUdhbWUuYXNjZW5zaW9uTW9kZXNbIiArDQogICAgICAgICAgaSArDQogICAgICAgICAgJ10uZGVzYzsiJyArDQogICAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgfQ0KICAgICAgR2FtZS5Qcm9tcHQoDQogICAgICAgICI8aWQgUGlja0NoYWxsZW5nZU1vZGU+PGgzPiIgKw0KICAgICAgICAgIGxvYygiU2VsZWN0IGEgY2hhbGxlbmdlIG1vZGUiKSArDQogICAgICAgICAgIjwvaDM+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjxkaXYgY2xhc3M9ImNyYXRlQm94Ij4nICsNCiAgICAgICAgICBzdHIgKw0KICAgICAgICAgICc8L2Rpdj48aDQgaWQ9ImNoYWxsZW5nZVNlbGVjdGVkTmFtZSI+JyArDQogICAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLm5leHRBc2NlbnNpb25Nb2RlXS5kbmFtZSArDQogICAgICAgICAgJzwvaDQ+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBpZD0iY2hhbGxlbmdlU2VsZWN0ZWREZXNjIiBzdHlsZT0ibWluLWhlaWdodDoxMjhweDsiPicgKw0KICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZXNbR2FtZS5uZXh0QXNjZW5zaW9uTW9kZV0uZGVzYyArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicsDQogICAgICAgIFsNCiAgICAgICAgICBbDQogICAgICAgICAgICBsb2MoIkNvbmZpcm0iKSwNCiAgICAgICAgICAgICJHYW1lLlVwZGF0ZUFzY2Vuc2lvbk1vZGVQcm9tcHQoKTtHYW1lLkNsb3NlUHJvbXB0KCk7IiwNCiAgICAgICAgICBdLA0KICAgICAgICBdLA0KICAgICAgICAwLA0KICAgICAgICAid2lkZVByb21wdCINCiAgICAgICk7DQogICAgfTsNCg0KICAgIGwoImFzY2VuZE92ZXJsYXkiKS5pbm5lckhUTUwgPQ0KICAgICAgJzxkaXYgaWQ9ImFzY2VuZEJveCI+JyArDQogICAgICAnPGRpdiBpZD0iYXNjZW5kRGF0YTEiIGNsYXNzPSJhc2NlbmREYXRhIHNtYWxsRnJhbWVkIHByb21wdCIgc3R5bGU9Im1hcmdpbi10b3A6OHB4OyI+PGgzIGlkPSJhc2NlbmRQcmVzdGlnZSI+PC9oMz48L2Rpdj4nICsNCiAgICAgICc8ZGl2IGlkPSJhc2NlbmREYXRhMiIgY2xhc3M9ImFzY2VuZERhdGEgc21hbGxGcmFtZWQgcHJvbXB0Ij48aDMgaWQ9ImFzY2VuZEhDcyI+PC9oMz48L2Rpdj4nICsNCiAgICAgICc8YSBpZD0iYXNjZW5kQnV0dG9uIiBjbGFzcz0ib3B0aW9uIGZyYW1lZCBsYXJnZSByZWQiICcgKw0KICAgICAgR2FtZS5nZXRUb29sdGlwKA0KICAgICAgICAnPGRpdiBzdHlsZT0ibWluLXdpZHRoOjMwMHB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxMXB4O3BhZGRpbmc6OHB4OyIgaWQ9InRvb2x0aXBSZWluY2FybmF0ZSI+JyArDQogICAgICAgICAgbG9jKCJDbGljayB0aGlzIG9uY2UgeW91J3ZlIGJvdWdodDxicj5ldmVyeXRoaW5nIHlvdSBuZWVkISIpICsNCiAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgImJvdHRvbS1yaWdodCINCiAgICAgICkgKw0KICAgICAgJyBzdHlsZT0iZm9udC1zaXplOjE2cHg7bWFyZ2luLXRvcDowcHg7Ij48c3BhbiBjbGFzcz0iZmFuY3lUZXh0IiBzdHlsZT0iZm9udC1zaXplOjIwcHg7Ij4nICsNCiAgICAgIGxvYygiUmVpbmNhcm5hdGUiKSArDQogICAgICAiPC9zcGFuPjwvYT4iICsNCiAgICAgICc8ZGl2IGlkPSJhc2NlbmRNb2RlQnV0dG9uIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MzRweDtib3R0b206MjVweDtkaXNwbGF5Om5vbmU7Ij48L2Rpdj4nICsNCiAgICAgICc8aW5wdXQgdHlwZT0idGV4dCIgc3R5bGU9ImRpc3BsYXk6YmxvY2s7IiBpZD0idXBncmFkZVBvc2l0aW9ucyIvPjwvZGl2PicgKw0KICAgICAgJzxkaXYgaWQ9ImFzY2VuZEluZm8iPjxkaXYgY2xhc3M9ImFzY2VuZERhdGEgc21hbGxGcmFtZWQiIHN0eWxlPSJtYXJnaW4tdG9wOjIycHg7d2lkdGg6NzUlO2ZvbnQtc2l6ZToxMXB4OyI+JyArDQogICAgICBsb2MoDQogICAgICAgICJZb3UgYXJlIGFzY2VuZGluZy48YnI+RHJhZyB0aGUgc2NyZWVuIGFyb3VuZDxicj5vciB1c2UgYXJyb3cga2V5cyE8YnI+V2hlbiB5b3UncmUgcmVhZHksPGJyPmNsaWNrIFJlaW5jYXJuYXRlLiINCiAgICAgICkgKw0KICAgICAgIjwvZGl2PjwvZGl2PiI7DQoNCiAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICBsKCJhc2NlbmREYXRhMSIpLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MzAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7cGFkZGluZzo4cHg7IiBpZD0idG9vbHRpcEFzY2VuZERhdGExIj4oPGI+JyArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5oZWF2ZW5seUNoaXBzKSArDQogICAgICAgICAgJzwvYj4pPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgbG9jKA0KICAgICAgICAgICAgIkVhY2ggcHJlc3RpZ2UgbGV2ZWwgZ3JhbnRzIHlvdSBhIHBlcm1hbmVudCA8Yj4rJTElIENwUzwvYj4uPGJyPlRoZSBtb3JlIGxldmVscyB5b3UgaGF2ZSwgdGhlIG1vcmUgY29va2llcyB0aGV5IHJlcXVpcmUuIiwNCiAgICAgICAgICAgIDENCiAgICAgICAgICApICsNCiAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICApOw0KICAgICAgfSwNCiAgICAgICJib3R0b20tcmlnaHQiDQogICAgKTsNCiAgICBHYW1lLmF0dGFjaFRvb2x0aXAoDQogICAgICBsKCJhc2NlbmREYXRhMiIpLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MzAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7cGFkZGluZzo4cHg7IiBpZD0idG9vbHRpcEFzY2VuZERhdGEyIj4oPGI+JyArDQogICAgICAgICAgbG9jKCIlMSBoZWF2ZW5seSBjaGlwIiwgTEJlYXV0aWZ5KEdhbWUuaGVhdmVubHlDaGlwcykpICsNCiAgICAgICAgICAnPC9iPik8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiSGVhdmVubHkgY2hpcHMgYXJlIHVzZWQgdG8gYnV5IGhlYXZlbmx5IHVwZ3JhZGVzLjxicj5Zb3UgZ2FpbiA8Yj4xIGNoaXA8L2I+IGV2ZXJ5IHRpbWUgeW91IGdhaW4gYSBwcmVzdGlnZSBsZXZlbC4iDQogICAgICAgICAgKSArDQogICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgKTsNCiAgICAgIH0sDQogICAgICAiYm90dG9tLXJpZ2h0Ig0KICAgICk7DQoNCiAgICBHYW1lLlVwZGF0ZUFzY2Vuc2lvbk1vZGVQcm9tcHQoKTsNCg0KICAgIEFkZEV2ZW50KGwoImFzY2VuZEJ1dHRvbiIpLCAiY2xpY2siLCBmdW5jdGlvbiAoKSB7DQogICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgR2FtZS5SZWluY2FybmF0ZSgpOw0KICAgIH0pOw0KDQogICAgR2FtZS5hc2NlbmRsID0gbCgiYXNjZW5kIik7DQogICAgR2FtZS5hc2NlbmRDb250ZW50bCA9IGwoImFzY2VuZENvbnRlbnQiKTsNCiAgICBHYW1lLmFzY2VuZFpvb21hYmxlbCA9IGwoImFzY2VuZFpvb21hYmxlIik7DQogICAgR2FtZS5hc2NlbmRVcGdyYWRlc2wgPSBsKCJhc2NlbmRVcGdyYWRlcyIpOw0KICAgIEdhbWUuT25Bc2NlbmQgPSAwOw0KICAgIEdhbWUuQXNjZW5kVGltZXIgPSAwOyAvL2hvdyBmYXIgd2UgYXJlIGludG8gdGhlIGFzY2VuZCBhbmltYXRpb24NCiAgICBHYW1lLkFzY2VuZER1cmF0aW9uID0gR2FtZS5mcHMgKiA1OyAvL2hvdyBsb25nIHRoZSBhc2NlbmQgYW5pbWF0aW9uIGlzDQogICAgR2FtZS5Bc2NlbmRCcmVha3BvaW50ID0gR2FtZS5Bc2NlbmREdXJhdGlvbiAqIDAuNTsgLy9hdCB3aGljaCBwb2ludCB0aGUgY29va2llIGV4cGxvZGVzIGR1cmluZyB0aGUgYXNjZW5kIGFuaW1hdGlvbg0KICAgIEdhbWUuVXBkYXRlQXNjZW5kSW50cm8gPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA9PSAxKSBQbGF5U291bmQoInNuZC9jaGFyZ2luZy5tcDMiKTsNCiAgICAgIGlmIChHYW1lLkFzY2VuZFRpbWVyID09IE1hdGguZmxvb3IoR2FtZS5Bc2NlbmRCcmVha3BvaW50KSkNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvdGh1ZC5tcDMiKTsNCiAgICAgIEdhbWUuQXNjZW5kVGltZXIrKzsNCiAgICAgIGlmIChHYW1lLkFzY2VuZFRpbWVyID4gR2FtZS5Bc2NlbmREdXJhdGlvbikgew0KICAgICAgICAvL2VuZCBhbmltYXRpb24gYW5kIGxhdW5jaCBhc2NlbmQgc2NyZWVuDQogICAgICAgIFBsYXlDdWUoImFzY2VuZCIpOw0KICAgICAgICBQbGF5TXVzaWNTb3VuZCgic25kL2N5bWJhbFJldi5tcDMiKTsNCiAgICAgICAgaWYgKCFBcHAgfHwgR2FtZS52b2x1bWVNdXNpYyA9PSAwKSBQbGF5U291bmQoInNuZC9jaG9pci5tcDMiKTsNCiAgICAgICAgR2FtZS5FYXJuSGVhdmVubHlDaGlwcyhHYW1lLmNvb2tpZXNFYXJuZWQpOw0KICAgICAgICBHYW1lLkFzY2VuZFRpbWVyID0gMDsNCiAgICAgICAgR2FtZS5PbkFzY2VuZCA9IDE7DQogICAgICAgIEdhbWUucmVtb3ZlQ2xhc3MoImFzY2VuZEludHJvIik7DQogICAgICAgIEdhbWUuYWRkQ2xhc3MoImFzY2VuZGluZyIpOw0KICAgICAgICBHYW1lLkJ1aWxkQXNjZW5kVHJlZSgpOw0KICAgICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNEaXNwbGF5ZWQgPSBHYW1lLmhlYXZlbmx5Q2hpcHM7DQogICAgICAgIEdhbWUubmV4dEFzY2Vuc2lvbk1vZGUgPSAwOw0KICAgICAgICBHYW1lLmFzY2Vuc2lvbk1vZGUgPSAwOw0KICAgICAgICBHYW1lLlVwZGF0ZUFzY2Vuc2lvbk1vZGVQcm9tcHQoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuUmVpbmNhcm5hdGVUaW1lciA9IDA7IC8vaG93IGZhciB3ZSBhcmUgaW50byB0aGUgcmVpbmNhcm5hdGlvbiBhbmltYXRpb24NCiAgICBHYW1lLlJlaW5jYXJuYXRlRHVyYXRpb24gPSBHYW1lLmZwcyAqIDE7IC8vaG93IGxvbmcgdGhlIHJlaW5jYXJuYXRpb24gYW5pbWF0aW9uIGlzDQogICAgR2FtZS5VcGRhdGVSZWluY2FybmF0ZUludHJvID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEdhbWUuUmVpbmNhcm5hdGVUaW1lciA9PSAxKQ0KICAgICAgICBQbGF5U291bmQoInNuZC9wb3AiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyArIDEpICsgIi5tcDMiLCAwLjc1KTsNCiAgICAgIEdhbWUuUmVpbmNhcm5hdGVUaW1lcisrOw0KICAgICAgaWYgKEdhbWUuUmVpbmNhcm5hdGVUaW1lciA+IEdhbWUuUmVpbmNhcm5hdGVEdXJhdGlvbikgew0KICAgICAgICAvL2VuZCBhbmltYXRpb24gYW5kIGxhdW5jaCByZWd1bGFyIGdhbWUNCiAgICAgICAgR2FtZS5SZWluY2FybmF0ZVRpbWVyID0gMDsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygicmVpbmNhcm5hdGluZyIpOw0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5SZWluY2FybmF0ZSA9IGZ1bmN0aW9uIChieXBhc3MpIHsNCiAgICAgIGlmICghYnlwYXNzKQ0KICAgICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgICAiPGlkIFJlaW5jYXJuYXRlPjxoMz4iICsNCiAgICAgICAgICAgIGxvYygiUmVpbmNhcm5hdGUiKSArDQogICAgICAgICAgICAnPC9oMz48ZGl2IGNsYXNzPSJibG9jayI+JyArDQogICAgICAgICAgICBsb2MoIkFyZSB5b3UgcmVhZHkgdG8gcmV0dXJuIHRvIHRoZSBtb3J0YWwgd29ybGQ/IikgKw0KICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgICAgW1tsb2MoIlllcyIpLCAiR2FtZS5DbG9zZVByb21wdCgpO0dhbWUuUmVpbmNhcm5hdGUoMSk7Il0sIGxvYygiTm8iKV0NCiAgICAgICAgKTsNCiAgICAgIGVsc2Ugew0KICAgICAgICBHYW1lLmFzY2VuZFVwZ3JhZGVzbC5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2RlID0gR2FtZS5uZXh0QXNjZW5zaW9uTW9kZTsNCiAgICAgICAgR2FtZS5uZXh0QXNjZW5zaW9uTW9kZSA9IDA7DQogICAgICAgIEdhbWUuUmVzZXQoKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzQWNoaWV2KCJSZWJpcnRoIikpIHsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgiUmVpbmNhcm5hdGVkIiwgbG9jKCJIZWxsbywgY29va2llcyEiKSwgWzEwLCAwXSwgNCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUucmVzZXRzID49IDEwMDApIEdhbWUuV2luKCJFbmRsZXNzIGN5Y2xlIik7DQogICAgICAgIGlmIChHYW1lLnJlc2V0cyA+PSAxMDApIEdhbWUuV2luKCJSZWluY2FybmF0aW9uIik7DQogICAgICAgIGlmIChHYW1lLnJlc2V0cyA+PSAxMCkgR2FtZS5XaW4oIlJlc3VycmVjdGlvbiIpOw0KICAgICAgICBpZiAoR2FtZS5yZXNldHMgPj0gMSkgR2FtZS5XaW4oIlJlYmlydGgiKTsNCg0KICAgICAgICB2YXIgcHJlc3RpZ2VVcGdyYWRlc093bmVkID0gMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzKSB7DQogICAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNbaV0uYm91Z2h0ICYmIEdhbWUuVXBncmFkZXNbaV0ucG9vbCA9PSAicHJlc3RpZ2UiKQ0KICAgICAgICAgICAgcHJlc3RpZ2VVcGdyYWRlc093bmVkKys7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHByZXN0aWdlVXBncmFkZXNPd25lZCA+PSAxMDApIEdhbWUuV2luKCJBbGwgdGhlIHN0YXJzIGluIGhlYXZlbiIpOw0KDQogICAgICAgIEdhbWUucmVtb3ZlQ2xhc3MoImFzY2VuZGluZyIpOw0KICAgICAgICBHYW1lLk9uQXNjZW5kID0gMDsNCiAgICAgICAgLy90cmlnZ2VyIHRoZSByZWluY2FybmF0ZSBhbmltYXRpb24NCiAgICAgICAgR2FtZS5SZWluY2FybmF0ZVRpbWVyID0gMTsNCiAgICAgICAgR2FtZS5hZGRDbGFzcygicmVpbmNhcm5hdGluZyIpOw0KICAgICAgICBHYW1lLkJpZ0Nvb2tpZVNpemUgPSAwOw0KDQogICAgICAgIEdhbWUucnVuTW9kSG9vaygicmVpbmNhcm5hdGUiKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuQXNjZW5kID0gZnVuY3Rpb24gKGJ5cGFzcykgew0KICAgICAgaWYgKCFieXBhc3MpDQogICAgICAgIEdhbWUuUHJvbXB0KA0KICAgICAgICAgICI8aWQgQXNjZW5kPjxoMz4iICsNCiAgICAgICAgICAgIGxvYygiQXNjZW5kIikgKw0KICAgICAgICAgICAgJzwvaDM+PGRpdiBjbGFzcz0iYmxvY2siPicgKw0KICAgICAgICAgICAgdGlueUljb24oWzE5LCA3XSkgKw0KICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAnRG8geW91IFJFQUxMWSB3YW50IHRvIGFzY2VuZD88ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5Zb3Ugd2lsbCBsb3NlIHlvdXIgcHJvZ3Jlc3MgYW5kIHN0YXJ0IG92ZXIgZnJvbSBzY3JhdGNoLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PkFsbCB5b3VyIGNvb2tpZXMgd2lsbCBiZSBjb252ZXJ0ZWQgaW50byBwcmVzdGlnZSBhbmQgaGVhdmVubHkgY2hpcHMuJw0KICAgICAgICAgICAgKSArDQogICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgICAoR2FtZS5jYW5MdW1wcygpDQogICAgICAgICAgICAgID8gbG9jKA0KICAgICAgICAgICAgICAgICAgIllvdSB3aWxsIGtlZXAgeW91ciBhY2hpZXZlbWVudHMsIGJ1aWxkaW5nIGxldmVscyBhbmQgc3VnYXIgbHVtcHMuIg0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgOiBsb2MoIllvdSB3aWxsIGtlZXAgeW91ciBhY2hpZXZlbWVudHMuIikpICsNCiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJvcHRpb25Cb3giPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgc3R5bGU9Im1hcmdpbjoxNnB4O3BhZGRpbmc6OHB4IDE2cHg7YW5pbWF0aW9uOnJhaW5ib3dDeWNsZSA1cyBpbmZpbml0ZSBlYXNlLWluLW91dCxwdWNrZXIgMC4ycyBlYXNlLW91dDtib3gtc2hhZG93OjBweCAwcHggMHB4IDFweCAjMDAwLDBweCAwcHggMXB4IDJweCBjdXJyZW50Y29sb3I7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLHRyYW5zcGFyZW50IDAlLGN1cnJlbnRDb2xvciA1MDAlKTt3aWR0aDphdXRvO3RleHQtYWxpZ246Y2VudGVyOyIgJyArDQogICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICc9IlBsYXlTb3VuZChcJ3NuZC90aWNrLm1wM1wnKTtHYW1lLkNsb3NlUHJvbXB0KCk7R2FtZS5Bc2NlbmQoMSk7IiBpZD0icHJvbXB0T3B0aW9uMCI+JyArDQogICAgICAgICAgICBsb2MoIkFzY2VuZCIpICsNCiAgICAgICAgICAgICI8L2E+PC9kaXY+PC9kaXY+IiwNCiAgICAgICAgICBbDQogICAgICAgICAgICBbDQogICAgICAgICAgICAgIGxvYygiWWVzIiksDQogICAgICAgICAgICAgICJHYW1lLkNsb3NlUHJvbXB0KCk7R2FtZS5Bc2NlbmQoMSk7IiwNCiAgICAgICAgICAgICAgImZsb2F0OmxlZnQ7ZGlzcGxheTpub25lOyIsDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgW2xvYygiQ2FuY2VsIiksIDAsICJmbG9hdDpyaWdodCJdLA0KICAgICAgICAgIF0NCiAgICAgICAgKTsNCiAgICAgIGVsc2Ugew0KICAgICAgICBHYW1lLk5vdGlmeShsb2MoIkFzY2VuZGluZyIpLCBsb2MoIlNvIGxvbmcsIGNvb2tpZXMuIiksIFsyMCwgN10sIDQpOw0KICAgICAgICBHYW1lLk9uQXNjZW5kID0gMDsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygiYXNjZW5kaW5nIik7DQogICAgICAgIEdhbWUuYWRkQ2xhc3MoImFzY2VuZEludHJvIik7DQogICAgICAgIC8vdHJpZ2dlciB0aGUgYXNjZW5kIGFuaW1hdGlvbg0KICAgICAgICBHYW1lLkFzY2VuZFRpbWVyID0gMTsNCiAgICAgICAgR2FtZS5raWxsU2hpbW1lcnMoKTsNCiAgICAgICAgbCgidG9nZ2xlQm94Iikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgbCgidG9nZ2xlQm94IikuaW5uZXJIVE1MID0gIiI7DQogICAgICAgIEdhbWUuY2hvaWNlU2VsZWN0b3JPbiA9IC0xOw0KICAgICAgICBHYW1lLlRvZ2dsZVNwZWNpYWxNZW51KDApOw0KICAgICAgICBHYW1lLkFzY2VuZE9mZlggPSAwOw0KICAgICAgICBHYW1lLkFzY2VuZE9mZlkgPSAwOw0KICAgICAgICBHYW1lLkFzY2VuZE9mZlhUID0gMDsNCiAgICAgICAgR2FtZS5Bc2NlbmRPZmZZVCA9IDA7DQogICAgICAgIEdhbWUuQXNjZW5kWm9vbVQgPSAxOw0KICAgICAgICBHYW1lLkFzY2VuZFpvb20gPSAwLjI7DQoNCiAgICAgICAgR2FtZS5qdWtlYm94LnJlc2V0KCk7DQogICAgICAgIFBsYXlDdWUoInByZWFzY2VuZCIpOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLkRlYnVnZ2luZ1ByZXN0aWdlID0gMDsNCiAgICBHYW1lLkFzY2VuZERyYWdYID0gMDsNCiAgICBHYW1lLkFzY2VuZERyYWdZID0gMDsNCiAgICBHYW1lLkFzY2VuZE9mZlggPSAwOw0KICAgIEdhbWUuQXNjZW5kT2ZmWSA9IDA7DQogICAgR2FtZS5Bc2NlbmRab29tID0gMTsNCiAgICBHYW1lLkFzY2VuZE9mZlhUID0gMDsNCiAgICBHYW1lLkFzY2VuZE9mZllUID0gMDsNCiAgICBHYW1lLkFzY2VuZFpvb21UID0gMTsNCiAgICBHYW1lLkFzY2VuZERyYWdnaW5nID0gMDsNCiAgICBHYW1lLkFzY2VuZEdyaWRTbmFwID0gMjQ7DQogICAgR2FtZS5oZWF2ZW5seUJvdW5kcyA9IHsgbGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgYm90dG9tOiAwIH07DQogICAgR2FtZS5VcGRhdGVBc2NlbmQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5rZXlzWzM3XSkgR2FtZS5Bc2NlbmRPZmZYVCArPSAxNiAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICBpZiAoR2FtZS5rZXlzWzM4XSkgR2FtZS5Bc2NlbmRPZmZZVCArPSAxNiAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICBpZiAoR2FtZS5rZXlzWzM5XSkgR2FtZS5Bc2NlbmRPZmZYVCAtPSAxNiAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICBpZiAoR2FtZS5rZXlzWzQwXSkgR2FtZS5Bc2NlbmRPZmZZVCAtPSAxNiAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQoNCiAgICAgIGlmIChHYW1lLkFzY2VuZE9mZlhUID4gLUdhbWUuaGVhdmVubHlCb3VuZHMubGVmdCkNCiAgICAgICAgR2FtZS5Bc2NlbmRPZmZYVCA9IC1HYW1lLmhlYXZlbmx5Qm91bmRzLmxlZnQ7DQogICAgICBpZiAoR2FtZS5Bc2NlbmRPZmZYVCA8IC1HYW1lLmhlYXZlbmx5Qm91bmRzLnJpZ2h0KQ0KICAgICAgICBHYW1lLkFzY2VuZE9mZlhUID0gLUdhbWUuaGVhdmVubHlCb3VuZHMucmlnaHQ7DQogICAgICBpZiAoR2FtZS5Bc2NlbmRPZmZZVCA+IC1HYW1lLmhlYXZlbmx5Qm91bmRzLnRvcCkNCiAgICAgICAgR2FtZS5Bc2NlbmRPZmZZVCA9IC1HYW1lLmhlYXZlbmx5Qm91bmRzLnRvcDsNCiAgICAgIGlmIChHYW1lLkFzY2VuZE9mZllUIDwgLUdhbWUuaGVhdmVubHlCb3VuZHMuYm90dG9tKQ0KICAgICAgICBHYW1lLkFzY2VuZE9mZllUID0gLUdhbWUuaGVhdmVubHlCb3VuZHMuYm90dG9tOw0KICAgICAgR2FtZS5Bc2NlbmRPZmZYICs9IChHYW1lLkFzY2VuZE9mZlhUIC0gR2FtZS5Bc2NlbmRPZmZYKSAqIDAuNTsNCiAgICAgIEdhbWUuQXNjZW5kT2ZmWSArPSAoR2FtZS5Bc2NlbmRPZmZZVCAtIEdhbWUuQXNjZW5kT2ZmWSkgKiAwLjU7DQogICAgICBHYW1lLkFzY2VuZFpvb20gKz0gKEdhbWUuQXNjZW5kWm9vbVQgLSBHYW1lLkFzY2VuZFpvb20pICogMC4yNTsNCiAgICAgIGlmIChNYXRoLmFicyhHYW1lLkFzY2VuZFpvb21UIC0gR2FtZS5Bc2NlbmRab29tKSA8IDAuMDA1KQ0KICAgICAgICBHYW1lLkFzY2VuZFpvb20gPSBHYW1lLkFzY2VuZFpvb21UOw0KDQogICAgICBpZiAoR2FtZS5tb3VzZURvd24gJiYgIUdhbWUucHJvbXB0T24pIHsNCiAgICAgICAgaWYgKCFHYW1lLkFzY2VuZERyYWdnaW5nKSB7DQogICAgICAgICAgR2FtZS5Bc2NlbmREcmFnWCA9IEdhbWUubW91c2VYOw0KICAgICAgICAgIEdhbWUuQXNjZW5kRHJhZ1kgPSBHYW1lLm1vdXNlWTsNCiAgICAgICAgfQ0KICAgICAgICBHYW1lLkFzY2VuZERyYWdnaW5nID0gMTsNCg0KICAgICAgICBpZiAoR2FtZS5EZWJ1Z2dpbmdQcmVzdGlnZSkgew0KICAgICAgICAgIGlmIChHYW1lLlNlbGVjdGVkSGVhdmVubHlVcGdyYWRlKSB7DQogICAgICAgICAgICBHYW1lLnRvb2x0aXAuaGlkZSgpOw0KICAgICAgICAgICAgLy9kcmFnIHVwZ3JhZGVzIGFyb3VuZA0KICAgICAgICAgICAgdmFyIG1lID0gR2FtZS5TZWxlY3RlZEhlYXZlbmx5VXBncmFkZTsNCiAgICAgICAgICAgIG1lLnBvc1ggKz0NCiAgICAgICAgICAgICAgKEdhbWUubW91c2VYIC0gR2FtZS5Bc2NlbmREcmFnWCkgKiAoMSAvIEdhbWUuQXNjZW5kWm9vbVQpOw0KICAgICAgICAgICAgbWUucG9zWSArPQ0KICAgICAgICAgICAgICAoR2FtZS5tb3VzZVkgLSBHYW1lLkFzY2VuZERyYWdZKSAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICAgICAgICB2YXIgcG9zWCA9IG1lLnBvc1g7IC8vTWF0aC5yb3VuZChtZS5wb3NYL0dhbWUuQXNjZW5kR3JpZFNuYXApKkdhbWUuQXNjZW5kR3JpZFNuYXA7DQogICAgICAgICAgICB2YXIgcG9zWSA9IG1lLnBvc1k7IC8vTWF0aC5yb3VuZChtZS5wb3NZL0dhbWUuQXNjZW5kR3JpZFNuYXApKkdhbWUuQXNjZW5kR3JpZFNuYXA7DQogICAgICAgICAgICBsKCJoZWF2ZW5seVVwZ3JhZGUiICsgbWUuaWQpLnN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKHBvc1gpICsgInB4IjsNCiAgICAgICAgICAgIGwoImhlYXZlbmx5VXBncmFkZSIgKyBtZS5pZCkuc3R5bGUudG9wID0gTWF0aC5mbG9vcihwb3NZKSArICJweCI7DQogICAgICAgICAgICBmb3IgKHZhciBpaSBpbiBtZS5wYXJlbnRzKSB7DQogICAgICAgICAgICAgIHZhciBvcmlnWCA9IDA7DQogICAgICAgICAgICAgIHZhciBvcmlnWSA9IDA7DQogICAgICAgICAgICAgIHZhciB0YXJnWCA9IG1lLnBvc1ggKyAyODsNCiAgICAgICAgICAgICAgdmFyIHRhcmdZID0gbWUucG9zWSArIDI4Ow0KICAgICAgICAgICAgICBpZiAobWUucGFyZW50c1tpaV0gIT0gLTEpIHsNCiAgICAgICAgICAgICAgICBvcmlnWCA9IG1lLnBhcmVudHNbaWldLnBvc1ggKyAyODsNCiAgICAgICAgICAgICAgICBvcmlnWSA9IG1lLnBhcmVudHNbaWldLnBvc1kgKyAyODsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB2YXIgcm90ID0NCiAgICAgICAgICAgICAgICAtKE1hdGguYXRhbigodGFyZ1kgLSBvcmlnWSkgLyAob3JpZ1ggLSB0YXJnWCkpIC8gTWF0aC5QSSkgKiAxODA7DQogICAgICAgICAgICAgIGlmICh0YXJnWCA8PSBvcmlnWCkgcm90ICs9IDE4MDsNCiAgICAgICAgICAgICAgdmFyIGRpc3QgPSBNYXRoLmZsb29yKA0KICAgICAgICAgICAgICAgIE1hdGguc3FydCgNCiAgICAgICAgICAgICAgICAgICh0YXJnWCAtIG9yaWdYKSAqICh0YXJnWCAtIG9yaWdYKSArDQogICAgICAgICAgICAgICAgICAgICh0YXJnWSAtIG9yaWdZKSAqICh0YXJnWSAtIG9yaWdZKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICBsKCJoZWF2ZW5seUxpbmsiICsgbWUuaWQgKyAiLSIgKyBpaSkuc3R5bGUgPQ0KICAgICAgICAgICAgICAgICJ3aWR0aDoiICsNCiAgICAgICAgICAgICAgICBkaXN0ICsNCiAgICAgICAgICAgICAgICAicHg7dHJhbnNmb3JtOnJvdGF0ZSgiICsNCiAgICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAgICJkZWcpO2xlZnQ6IiArDQogICAgICAgICAgICAgICAgb3JpZ1ggKw0KICAgICAgICAgICAgICAgICJweDt0b3A6IiArDQogICAgICAgICAgICAgICAgb3JpZ1kgKw0KICAgICAgICAgICAgICAgICJweDsiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoIUdhbWUuU2VsZWN0ZWRIZWF2ZW5seVVwZ3JhZGUpIHsNCiAgICAgICAgICBHYW1lLkFzY2VuZE9mZlhUICs9DQogICAgICAgICAgICAoR2FtZS5tb3VzZVggLSBHYW1lLkFzY2VuZERyYWdYKSAqICgxIC8gR2FtZS5Bc2NlbmRab29tVCk7DQogICAgICAgICAgR2FtZS5Bc2NlbmRPZmZZVCArPQ0KICAgICAgICAgICAgKEdhbWUubW91c2VZIC0gR2FtZS5Bc2NlbmREcmFnWSkgKiAoMSAvIEdhbWUuQXNjZW5kWm9vbVQpOw0KICAgICAgICB9DQogICAgICAgIEdhbWUuQXNjZW5kRHJhZ1ggPSBHYW1lLm1vdXNlWDsNCiAgICAgICAgR2FtZS5Bc2NlbmREcmFnWSA9IEdhbWUubW91c2VZOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLyppZiAoR2FtZS5TZWxlY3RlZEhlYXZlbmx5VXBncmFkZSkNCgkJCQl7DQoJCQkJCXZhciBtZT1HYW1lLlNlbGVjdGVkSGVhdmVubHlVcGdyYWRlOw0KCQkJCQltZS5wb3NYPU1hdGgucm91bmQobWUucG9zWC9HYW1lLkFzY2VuZEdyaWRTbmFwKSpHYW1lLkFzY2VuZEdyaWRTbmFwOw0KCQkJCQltZS5wb3NZPU1hdGgucm91bmQobWUucG9zWS9HYW1lLkFzY2VuZEdyaWRTbmFwKSpHYW1lLkFzY2VuZEdyaWRTbmFwOw0KCQkJCQlsKCdoZWF2ZW5seVVwZ3JhZGUnK21lLmlkKS5zdHlsZS5sZWZ0PW1lLnBvc1grJ3B4JzsNCgkJCQkJbCgnaGVhdmVubHlVcGdyYWRlJyttZS5pZCkuc3R5bGUudG9wPW1lLnBvc1krJ3B4JzsNCgkJCQl9Ki8NCiAgICAgICAgR2FtZS5Bc2NlbmREcmFnZ2luZyA9IDA7DQogICAgICAgIEdhbWUuU2VsZWN0ZWRIZWF2ZW5seVVwZ3JhZGUgPSAwOw0KICAgICAgfQ0KICAgICAgaWYgKEdhbWUuQ2xpY2sgfHwgR2FtZS5wcm9tcHRPbikgew0KICAgICAgICBHYW1lLkFzY2VuZERyYWdnaW5nID0gMDsNCiAgICAgIH0NCg0KICAgICAgLy9HYW1lLmFzY2VuZGwuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uPU1hdGguZmxvb3IoR2FtZS5Bc2NlbmRPZmZYLzIpKydweCAnK01hdGguZmxvb3IoR2FtZS5Bc2NlbmRPZmZZLzIpKydweCc7DQogICAgICAvL0dhbWUuYXNjZW5kbC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb249TWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgvMikrJ3B4ICcrTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlkvMikrJ3B4LCcrTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgvNCkrJ3B4ICcrTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlkvNCkrJ3B4JzsNCiAgICAgIC8vR2FtZS5hc2NlbmRDb250ZW50bC5zdHlsZS5sZWZ0PU1hdGguZmxvb3IoR2FtZS5Bc2NlbmRPZmZYKSsncHgnOw0KICAgICAgLy9HYW1lLmFzY2VuZENvbnRlbnRsLnN0eWxlLnRvcD1NYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkrJ3B4JzsNCiAgICAgIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUud2Via2l0VHJhbnNmb3JtID0NCiAgICAgICAgInRyYW5zbGF0ZSgiICsNCiAgICAgICAgTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgpICsNCiAgICAgICAgInB4LCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkgKw0KICAgICAgICAicHgpIjsNCiAgICAgIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUubXNUcmFuc2Zvcm0gPQ0KICAgICAgICAidHJhbnNsYXRlKCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWCkgKw0KICAgICAgICAicHgsIiArDQogICAgICAgIE1hdGguZmxvb3IoR2FtZS5Bc2NlbmRPZmZZKSArDQogICAgICAgICJweCkiOw0KICAgICAgR2FtZS5hc2NlbmRDb250ZW50bC5zdHlsZS5vVHJhbnNmb3JtID0NCiAgICAgICAgInRyYW5zbGF0ZSgiICsNCiAgICAgICAgTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgpICsNCiAgICAgICAgInB4LCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkgKw0KICAgICAgICAicHgpIjsNCiAgICAgIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUubW96VHJhbnNmb3JtID0NCiAgICAgICAgInRyYW5zbGF0ZSgiICsNCiAgICAgICAgTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgpICsNCiAgICAgICAgInB4LCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkgKw0KICAgICAgICAicHgpIjsNCiAgICAgIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUudHJhbnNmb3JtID0NCiAgICAgICAgInRyYW5zbGF0ZSgiICsNCiAgICAgICAgTWF0aC5mbG9vcihHYW1lLkFzY2VuZE9mZlgpICsNCiAgICAgICAgInB4LCIgKw0KICAgICAgICBNYXRoLmZsb29yKEdhbWUuQXNjZW5kT2ZmWSkgKw0KICAgICAgICAicHgpIjsNCiAgICAgIEdhbWUuYXNjZW5kWm9vbWFibGVsLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9DQogICAgICAgICJzY2FsZSgiICsgR2FtZS5Bc2NlbmRab29tICsgIiwiICsgR2FtZS5Bc2NlbmRab29tICsgIikiOw0KICAgICAgR2FtZS5hc2NlbmRab29tYWJsZWwuc3R5bGUubWFyZ2luTGVmdCA9IEdhbWUud2luZG93VyAvIDIgKyAicHgiOw0KICAgICAgR2FtZS5hc2NlbmRab29tYWJsZWwuc3R5bGUubWFyZ2luVG9wID0gR2FtZS53aW5kb3dIIC8gMiArICJweCI7DQogICAgICBHYW1lLmFzY2VuZFpvb21hYmxlbC5zdHlsZS5tc1RyYW5zZm9ybSA9DQogICAgICAgICJzY2FsZSgiICsgR2FtZS5Bc2NlbmRab29tICsgIiwiICsgR2FtZS5Bc2NlbmRab29tICsgIikiOw0KICAgICAgR2FtZS5hc2NlbmRab29tYWJsZWwuc3R5bGUub1RyYW5zZm9ybSA9DQogICAgICAgICJzY2FsZSgiICsgR2FtZS5Bc2NlbmRab29tICsgIiwiICsgR2FtZS5Bc2NlbmRab29tICsgIikiOw0KICAgICAgR2FtZS5hc2NlbmRab29tYWJsZWwuc3R5bGUubW96VHJhbnNmb3JtID0NCiAgICAgICAgInNjYWxlKCIgKyBHYW1lLkFzY2VuZFpvb20gKyAiLCIgKyBHYW1lLkFzY2VuZFpvb20gKyAiKSI7DQogICAgICBHYW1lLmFzY2VuZFpvb21hYmxlbC5zdHlsZS50cmFuc2Zvcm0gPQ0KICAgICAgICAic2NhbGUoIiArIEdhbWUuQXNjZW5kWm9vbSArICIsIiArIEdhbWUuQXNjZW5kWm9vbSArICIpIjsNCg0KICAgICAgLy9pZiAoR2FtZS5TY3JvbGwhPTApIEdhbWUuYXNjZW5kQ29udGVudGwuc3R5bGUudHJhbnNmb3JtT3JpZ2luPU1hdGguZmxvb3IoR2FtZS53aW5kb3dXLzItR2FtZS5tb3VzZVgpKydweCAnK01hdGguZmxvb3IoR2FtZS53aW5kb3dILzItR2FtZS5tb3VzZVkpKydweCc7DQogICAgICBpZiAoR2FtZS5TY3JvbGwgPCAwICYmICFHYW1lLnByb21wdE9uKSB7DQogICAgICAgIEdhbWUuQXNjZW5kWm9vbVQgPSAwLjU7DQogICAgICB9DQogICAgICBpZiAoR2FtZS5TY3JvbGwgPiAwICYmICFHYW1lLnByb21wdE9uKSB7DQogICAgICAgIEdhbWUuQXNjZW5kWm9vbVQgPSAxOw0KICAgICAgfQ0KDQogICAgICBpZiAoR2FtZS5UICUgMiA9PSAwKSB7DQogICAgICAgIGwoImFzY2VuZFByZXN0aWdlIikuaW5uZXJIVE1MID0NCiAgICAgICAgICBsb2MoIlByZXN0aWdlIGxldmVsOiIpICsgIjxicj4iICsgU2ltcGxlQmVhdXRpZnkoR2FtZS5wcmVzdGlnZSk7DQogICAgICAgIGwoImFzY2VuZEhDcyIpLmlubmVySFRNTCA9DQogICAgICAgICAgbG9jKCJIZWF2ZW5seSBjaGlwczoiKSArDQogICAgICAgICAgJzxicj48c3BhbiBjbGFzcz0icHJpY2UgaGVhdmVubHkiPicgKw0KICAgICAgICAgIFNpbXBsZUJlYXV0aWZ5KE1hdGgucm91bmQoR2FtZS5oZWF2ZW5seUNoaXBzRGlzcGxheWVkKSkgKw0KICAgICAgICAgICI8L3NwYW4+IjsNCiAgICAgICAgaWYgKEdhbWUucHJlc3RpZ2UgPiAwKSBsKCJhc2NlbmRNb2RlQnV0dG9uIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgIGVsc2UgbCgiYXNjZW5kTW9kZUJ1dHRvbiIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICB9DQogICAgICBHYW1lLmhlYXZlbmx5Q2hpcHNEaXNwbGF5ZWQgKz0NCiAgICAgICAgKEdhbWUuaGVhdmVubHlDaGlwcyAtIEdhbWUuaGVhdmVubHlDaGlwc0Rpc3BsYXllZCkgKiAwLjQ7DQoNCiAgICAgIGlmIChHYW1lLkRlYnVnZ2luZ1ByZXN0aWdlICYmIEdhbWUuVCAlIDEwID09IDApIHsNCiAgICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuUHJlc3RpZ2VVcGdyYWRlcykgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuUHJlc3RpZ2VVcGdyYWRlc1tpXTsNCiAgICAgICAgICBpZiAobWUucGxhY2VkQnlDb2RlKSBjb250aW51ZTsNCiAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgIG1lLmlkICsNCiAgICAgICAgICAgICI6WyIgKw0KICAgICAgICAgICAgTWF0aC5mbG9vcihtZS5wb3NYKSArDQogICAgICAgICAgICAiLCIgKw0KICAgICAgICAgICAgTWF0aC5mbG9vcihtZS5wb3NZKSArDQogICAgICAgICAgICAiXSwiOw0KICAgICAgICB9DQogICAgICAgIGwoInVwZ3JhZGVQb3NpdGlvbnMiKS52YWx1ZSA9ICJHYW1lLlVwZ3JhZGVQb3NpdGlvbnM9eyIgKyBzdHIgKyAifTsiOw0KICAgICAgfQ0KICAgICAgLy9pZiAoR2FtZS5UJTU9PTApIEdhbWUuQnVpbGRBc2NlbmRUcmVlKCk7DQogICAgfTsNCiAgICBHYW1lLkFzY2VuZFJlZm9jdXMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLkFzY2VuZE9mZlggPSAwOw0KICAgICAgR2FtZS5Bc2NlbmRPZmZZID0gMDsNCiAgICAgIEdhbWUuYXNjZW5kbC5jbGFzc05hbWUgPSAiIjsNCiAgICB9Ow0KDQogICAgR2FtZS5TZWxlY3RlZEhlYXZlbmx5VXBncmFkZSA9IDA7DQogICAgR2FtZS5QdXJjaGFzZUhlYXZlbmx5VXBncmFkZSA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICAvL2lmIChHYW1lLkhhcygnTmV1cm9tYW5jeScpKSBHYW1lLlVwZ3JhZGVzQnlJZFt3aGF0XS50b2dnbGUoKTsgZWxzZQ0KICAgICAgaWYgKEdhbWUuVXBncmFkZXNCeUlkW3doYXRdLmJ1eSgpKSB7DQogICAgICAgIGlmIChsKCJoZWF2ZW5seVVwZ3JhZGUiICsgd2hhdCkpIHsNCiAgICAgICAgICB2YXIgcmVjdCA9IGwoImhlYXZlbmx5VXBncmFkZSIgKyB3aGF0KS5nZXRCb3VuZHMoKTsNCiAgICAgICAgICBHYW1lLlNwYXJrbGVBdCgNCiAgICAgICAgICAgIChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIsDQogICAgICAgICAgICAocmVjdC50b3AgKyByZWN0LmJvdHRvbSkgLyAyIC0gMjQNCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIC8vR2FtZS5CdWlsZEFzY2VuZFRyZWUoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuQnVpbGRBc2NlbmRUcmVlID0gZnVuY3Rpb24gKGp1c3RCb3VnaHQpIHsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIEdhbWUuaGVhdmVubHlCb3VuZHMgPSB7IGxlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIGJvdHRvbTogMCB9Ow0KDQogICAgICBpZiAoR2FtZS5EZWJ1Z2dpbmdQcmVzdGlnZSkgbCgidXBncmFkZVBvc2l0aW9ucyIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgZWxzZSBsKCJ1cGdyYWRlUG9zaXRpb25zIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCg0KICAgICAgdmFyIHRvUG9wID0gW107DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuUHJlc3RpZ2VVcGdyYWRlcykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLlByZXN0aWdlVXBncmFkZXNbaV07DQogICAgICAgIHZhciBwcmV2Q2FuQmVQdXJjaGFzZWQgPSBtZS5jYW5CZVB1cmNoYXNlZDsNCiAgICAgICAgbWUuY2FuQmVQdXJjaGFzZWQgPSAxOw0KICAgICAgICBpZiAoIW1lLmJvdWdodCAmJiAhR2FtZS5EZWJ1Z2dpbmdQcmVzdGlnZSkgew0KICAgICAgICAgIGlmIChtZS5zaG93SWYgJiYgIW1lLnNob3dJZigpKSBtZS5jYW5CZVB1cmNoYXNlZCA9IDA7DQogICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBmb3IgKHZhciBpaSBpbiBtZS5wYXJlbnRzKSB7DQogICAgICAgICAgICAgIGlmIChtZS5wYXJlbnRzW2lpXSAhPSAtMSAmJiAhbWUucGFyZW50c1tpaV0uYm91Z2h0KQ0KICAgICAgICAgICAgICAgIG1lLmNhbkJlUHVyY2hhc2VkID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKA0KICAgICAgICAgIGp1c3RCb3VnaHQgJiYNCiAgICAgICAgICBtZS5wYXJlbnRzLmluZGV4T2YoanVzdEJvdWdodCkgIT0gLTEgJiYNCiAgICAgICAgICAhcHJldkNhbkJlUHVyY2hhc2VkICYmDQogICAgICAgICAgbWUuY2FuQmVQdXJjaGFzZWQgJiYNCiAgICAgICAgICAhbWUuYm91Z2h0DQogICAgICAgICkNCiAgICAgICAgICB0b1BvcC5wdXNoKG1lKTsNCiAgICAgIH0NCiAgICAgIHRvUG9wLnNvcnQoDQogICAgICAgIChmdW5jdGlvbiAocGFyZW50KSB7DQogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICAgICAgICB2YXIgcm90ID0NCiAgICAgICAgICAgICAgTWF0aC5hdGFuMihhLnBvc1kgLSBwYXJlbnQucG9zWSwgcGFyZW50LnBvc1ggLSBhLnBvc1gpIC0NCiAgICAgICAgICAgICAgTWF0aC5QSSAvIDI7DQogICAgICAgICAgICB2YXIgcm90MiA9DQogICAgICAgICAgICAgIE1hdGguYXRhbjIoYi5wb3NZIC0gcGFyZW50LnBvc1ksIHBhcmVudC5wb3NYIC0gYi5wb3NYKSAtDQogICAgICAgICAgICAgIE1hdGguUEkgLyAyOw0KICAgICAgICAgICAgcmV0dXJuIHJvdCA8IHJvdDI7DQogICAgICAgICAgfTsNCiAgICAgICAgfSkoanVzdEJvdWdodCkNCiAgICAgICk7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvUG9wLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIFBsYXlTb3VuZCgNCiAgICAgICAgICAgICJzbmQvcG9wIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMgKyAxKSArICIubXAzIiwNCiAgICAgICAgICAgIDAuNQ0KICAgICAgICAgICk7DQogICAgICAgIH0sICgwLjIgKyBpICogMC4xKSAqIDEwMDApOw0KICAgICAgfQ0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJjcmF0ZSB1cGdyYWRlIGhlYXZlbmx5IGVuYWJsZWQiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0zMHB4O3RvcDotMzBweDtvcGFjaXR5OjAuODtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zZm9ybTpzY2FsZSgxLjMpO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ij48L2Rpdj4nOw0KICAgICAgc3RyICs9ICc8ZGl2IGNsYXNzPSJjcmF0ZUJveCIgc3R5bGU9ImZpbHRlcjpub25lOy13ZWJraXQtZmlsdGVyOm5vbmU7Ij4nOyAvL2Nocm9tZSBpcyBzdGlsbCBiYWQgYXQgdGhlc2UNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5QcmVzdGlnZVVwZ3JhZGVzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuUHJlc3RpZ2VVcGdyYWRlc1tpXTsNCg0KICAgICAgICB2YXIgZ2hvc3RlZCA9IDA7DQogICAgICAgIGlmIChtZS5jYW5CZVB1cmNoYXNlZCB8fCBHYW1lLkhhcygiTmV1cm9tYW5jeSIpKSB7DQogICAgICAgICAgc3RyICs9IEdhbWUuY3JhdGUoDQogICAgICAgICAgICBtZSwNCiAgICAgICAgICAgICJhc2NlbmQiLA0KICAgICAgICAgICAgIkdhbWUuUHVyY2hhc2VIZWF2ZW5seVVwZ3JhZGUoIiArIG1lLmlkICsgIik7IiwNCiAgICAgICAgICAgICJoZWF2ZW5seVVwZ3JhZGUiICsgbWUuaWQsDQogICAgICAgICAgICB0b1BvcC5pbmRleE9mKG1lKSAhPSAtMQ0KICAgICAgICAgICAgICA/ICJhbmltYXRpb246cHVja2VyIDAuMnMgZWFzZS1vdXQ7YW5pbWF0aW9uLWRlbGF5OiIgKw0KICAgICAgICAgICAgICAgICAgKHRvUG9wLmluZGV4T2YobWUpICogMC4xICsgMC4yKSArDQogICAgICAgICAgICAgICAgICAiczsiDQogICAgICAgICAgICAgIDogIiINCiAgICAgICAgICApOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZvciAodmFyIGlpIGluIG1lLnBhcmVudHMpIHsNCiAgICAgICAgICAgIGlmIChtZS5wYXJlbnRzW2lpXSAhPSAtMSAmJiBtZS5wYXJlbnRzW2lpXS5jYW5CZVB1cmNoYXNlZCkNCiAgICAgICAgICAgICAgZ2hvc3RlZCA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChtZS5zaG93SWYgJiYgIW1lLnNob3dJZigpKSBnaG9zdGVkID0gMDsNCiAgICAgICAgICBpZiAoZ2hvc3RlZCkgew0KICAgICAgICAgICAgLy9tYXliZSByZXBsYWNlIHRoaXMgd2l0aCBHYW1lLmNyYXRlKCkNCiAgICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iY3JhdGUgdXBncmFkZSBoZWF2ZW5seSBnaG9zdGVkIiBpZD0iaGVhdmVubHlVcGdyYWRlJyArDQogICAgICAgICAgICAgIG1lLmlkICsNCiAgICAgICAgICAgICAgJyIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6JyArDQogICAgICAgICAgICAgIG1lLnBvc1ggKw0KICAgICAgICAgICAgICAicHg7dG9wOiIgKw0KICAgICAgICAgICAgICBtZS5wb3NZICsNCiAgICAgICAgICAgICAgInB4OyIgKw0KICAgICAgICAgICAgICB3cml0ZUljb24obWUuaWNvbikgKw0KICAgICAgICAgICAgICAnIj48L2Rpdj4nOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAobWUuY2FuQmVQdXJjaGFzZWQgfHwgR2FtZS5IYXMoIk5ldXJvbWFuY3kiKSB8fCBnaG9zdGVkKSB7DQogICAgICAgICAgaWYgKG1lLnBvc1ggPCBHYW1lLmhlYXZlbmx5Qm91bmRzLmxlZnQpDQogICAgICAgICAgICBHYW1lLmhlYXZlbmx5Qm91bmRzLmxlZnQgPSBtZS5wb3NYOw0KICAgICAgICAgIGlmIChtZS5wb3NYID4gR2FtZS5oZWF2ZW5seUJvdW5kcy5yaWdodCkNCiAgICAgICAgICAgIEdhbWUuaGVhdmVubHlCb3VuZHMucmlnaHQgPSBtZS5wb3NYOw0KICAgICAgICAgIGlmIChtZS5wb3NZIDwgR2FtZS5oZWF2ZW5seUJvdW5kcy50b3ApDQogICAgICAgICAgICBHYW1lLmhlYXZlbmx5Qm91bmRzLnRvcCA9IG1lLnBvc1k7DQogICAgICAgICAgaWYgKG1lLnBvc1kgPiBHYW1lLmhlYXZlbmx5Qm91bmRzLmJvdHRvbSkNCiAgICAgICAgICAgIEdhbWUuaGVhdmVubHlCb3VuZHMuYm90dG9tID0gbWUucG9zWTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpaSBpbiBtZS5wYXJlbnRzKSB7IC8vY3JlYXRlIHB1bHNpbmcgbGlua3MNCiAgICAgICAgICBpZiAobWUucGFyZW50c1tpaV0gIT0gLTEgJiYgKG1lLmNhbkJlUHVyY2hhc2VkIHx8IGdob3N0ZWQpKSB7DQogICAgICAgICAgICB2YXIgb3JpZ1ggPSAwOw0KICAgICAgICAgICAgdmFyIG9yaWdZID0gMDsNCiAgICAgICAgICAgIHZhciB0YXJnWCA9IG1lLnBvc1ggKyAyODsNCiAgICAgICAgICAgIHZhciB0YXJnWSA9IG1lLnBvc1kgKyAyODsNCiAgICAgICAgICAgIGlmIChtZS5wYXJlbnRzW2lpXSAhPSAtMSkgew0KICAgICAgICAgICAgICBvcmlnWCA9IG1lLnBhcmVudHNbaWldLnBvc1ggKyAyODsNCiAgICAgICAgICAgICAgb3JpZ1kgPSBtZS5wYXJlbnRzW2lpXS5wb3NZICsgMjg7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgcm90ID0NCiAgICAgICAgICAgICAgLShNYXRoLmF0YW4oKHRhcmdZIC0gb3JpZ1kpIC8gKG9yaWdYIC0gdGFyZ1gpKSAvIE1hdGguUEkpICogMTgwOw0KICAgICAgICAgICAgaWYgKHRhcmdYIDw9IG9yaWdYKSByb3QgKz0gMTgwOw0KICAgICAgICAgICAgdmFyIGRpc3QgPSBNYXRoLmZsb29yKA0KICAgICAgICAgICAgICBNYXRoLnNxcnQoDQogICAgICAgICAgICAgICAgKHRhcmdYIC0gb3JpZ1gpICogKHRhcmdYIC0gb3JpZ1gpICsNCiAgICAgICAgICAgICAgICAgICh0YXJnWSAtIG9yaWdZKSAqICh0YXJnWSAtIG9yaWdZKQ0KICAgICAgICAgICAgICApDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJwYXJlbnRMaW5rIiBpZD0iaGVhdmVubHlMaW5rJyArDQogICAgICAgICAgICAgIG1lLmlkICsNCiAgICAgICAgICAgICAgIi0iICsNCiAgICAgICAgICAgICAgaWkgKw0KICAgICAgICAgICAgICAnIiBzdHlsZT0iJyArDQogICAgICAgICAgICAgIChnaG9zdGVkID8gIm9wYWNpdHk6MC4xOyIgOiAiIikgKw0KICAgICAgICAgICAgICAid2lkdGg6IiArDQogICAgICAgICAgICAgIGRpc3QgKw0KICAgICAgICAgICAgICAicHg7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKCIgKw0KICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAiZGVnKTstbW96LXRyYW5zZm9ybTpyb3RhdGUoIiArDQogICAgICAgICAgICAgIHJvdCArDQogICAgICAgICAgICAgICJkZWcpOy1tcy10cmFuc2Zvcm06cm90YXRlKCIgKw0KICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAiZGVnKTstby10cmFuc2Zvcm06cm90YXRlKCIgKw0KICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAiZGVnKTt0cmFuc2Zvcm06cm90YXRlKCIgKw0KICAgICAgICAgICAgICByb3QgKw0KICAgICAgICAgICAgICAiZGVnKTtsZWZ0OiIgKw0KICAgICAgICAgICAgICBvcmlnWCArDQogICAgICAgICAgICAgICJweDt0b3A6IiArDQogICAgICAgICAgICAgIG9yaWdZICsNCiAgICAgICAgICAgICAgJ3B4OyI+PC9kaXY+JzsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIEdhbWUuaGVhdmVubHlCb3VuZHMubGVmdCAtPSAxMjg7DQogICAgICBHYW1lLmhlYXZlbmx5Qm91bmRzLnRvcCAtPSAxMjg7DQogICAgICBHYW1lLmhlYXZlbmx5Qm91bmRzLnJpZ2h0ICs9IDEyOCArIDY0Ow0KICAgICAgR2FtZS5oZWF2ZW5seUJvdW5kcy5ib3R0b20gKz0gMTI4ICsgNjQ7DQogICAgICAvL3N0cis9JzxkaXYgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgcmVkO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6JytHYW1lLmhlYXZlbmx5Qm91bmRzLmxlZnQrJ3B4O3dpZHRoOicrKEdhbWUuaGVhdmVubHlCb3VuZHMucmlnaHQtR2FtZS5oZWF2ZW5seUJvdW5kcy5sZWZ0KSsncHg7dG9wOicrR2FtZS5oZWF2ZW5seUJvdW5kcy50b3ArJ3B4O2hlaWdodDonKyhHYW1lLmhlYXZlbmx5Qm91bmRzLmJvdHRvbS1HYW1lLmhlYXZlbmx5Qm91bmRzLnRvcCkrJ3B4OyI+PC9kaXY+JzsNCiAgICAgIHN0ciArPSAiPC9kaXY+IjsNCiAgICAgIEdhbWUuYXNjZW5kVXBncmFkZXNsLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgaWYgKEdhbWUuRGVidWdnaW5nUHJlc3RpZ2UpIHsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlByZXN0aWdlVXBncmFkZXMpIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLlByZXN0aWdlVXBncmFkZXNbaV07DQogICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICBsKCJoZWF2ZW5seVVwZ3JhZGUiICsgbWUuaWQpLA0KICAgICAgICAgICAgIm1vdXNlZG93biIsDQogICAgICAgICAgICAoZnVuY3Rpb24gKG1lKSB7DQogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgaWYgKCFHYW1lLkRlYnVnZ2luZ1ByZXN0aWdlKSByZXR1cm47DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgR2FtZS5rZXlzWzE2XSAmJg0KICAgICAgICAgICAgICAgICAgdHlwZW9mIExBU1RIRUFWRU5MWVNFTEVDVEVEICE9PSAidW5kZWZpbmVkIiAmJg0KICAgICAgICAgICAgICAgICAgbWUgIT0gTEFTVEhFQVZFTkxZU0VMRUNURUQNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIC8vd2hlbiBjbGlja2luZyBhbiB1cGdyYWRlIHdpdGggY3RybCwgc2V0IGl0IGFzIHJlZmVyZW5jZSBwb2ludDsgY2xpY2tpbmcgYW55IHNpYmxpbmcgdXBncmFkZSB3aXRoIHNoaWZ0IHdpbGwgYWxpZ24gaXQgaW4gYSBuaWNlIGFyYyBhcm91bmQgdGhlaXIgc2hhcmVkIHBhcmVudA0KICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IDA7DQogICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lLnBhcmVudHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIExBU1RIRUFWRU5MWVNFTEVDVEVELnBhcmVudHMuaW5kZXhPZihtZS5wYXJlbnRzW2ldKSAhPSAtMQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gbWUucGFyZW50c1tpXTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdYID0gcGFyZW50LnBvc1g7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnWSA9IHBhcmVudC5wb3NZOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ1ggPSBMQVNUSEVBVkVOTFlTRUxFQ1RFRC5wb3NYOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ1kgPSBMQVNUSEVBVkVOTFlTRUxFQ1RFRC5wb3NZOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcm90ID0NCiAgICAgICAgICAgICAgICAgICAgICBNYXRoLmF0YW4yKHRhcmdZIC0gb3JpZ1ksIG9yaWdYIC0gdGFyZ1gpIC0gTWF0aC5QSSAvIDI7DQogICAgICAgICAgICAgICAgICAgIHZhciBkaXN0ID0gTWF0aC5mbG9vcigNCiAgICAgICAgICAgICAgICAgICAgICBNYXRoLnNxcnQoDQogICAgICAgICAgICAgICAgICAgICAgICAodGFyZ1ggLSBvcmlnWCkgKiAodGFyZ1ggLSBvcmlnWCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAodGFyZ1kgLSBvcmlnWSkgKiAodGFyZ1kgLSBvcmlnWSkNCiAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgIG1lLnBvc1ggPQ0KICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5wb3NYICsgTWF0aC5zaW4ocm90IC0gKE1hdGguUEkgKiAyKSAvIDgpICogZGlzdDsNCiAgICAgICAgICAgICAgICAgICAgbWUucG9zWSA9DQogICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnBvc1kgKyBNYXRoLmNvcyhyb3QgLSAoTWF0aC5QSSAqIDIpIC8gOCkgKiBkaXN0Ow0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgTEFTVEhFQVZFTkxZU0VMRUNURUQgPSBtZTsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTZXQgcmVmZXJlbmNlIHBvaW50IHRvIiwgbWUubmFtZSwgIi4iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKEdhbWUua2V5c1sxN10pIHsNCiAgICAgICAgICAgICAgICAgIExBU1RIRUFWRU5MWVNFTEVDVEVEID0gbWU7DQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU2V0IHJlZmVyZW5jZSBwb2ludCB0byIsIG1lLm5hbWUsICIuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEdhbWUuU2VsZWN0ZWRIZWF2ZW5seVVwZ3JhZGUgPSBtZTsNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0pKG1lKQ0KICAgICAgICAgICk7DQogICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICBsKCJoZWF2ZW5seVVwZ3JhZGUiICsgbWUuaWQpLA0KICAgICAgICAgICAgIm1vdXNldXAiLA0KICAgICAgICAgICAgKGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGlmIChHYW1lLlNlbGVjdGVkSGVhdmVubHlVcGdyYWRlID09IG1lKSB7DQogICAgICAgICAgICAgICAgICBHYW1lLlNlbGVjdGVkSGVhdmVubHlVcGdyYWRlID0gMDsNCiAgICAgICAgICAgICAgICAgIEdhbWUuQnVpbGRBc2NlbmRUcmVlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSkobWUpDQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUudG9vbHRpcC5zaG91bGRIaWRlID0gdHJ1ZTsNCiAgICAgIH0sIDEwMCk7DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlDT0FMRVNDSU5HIFNVR0FSIExVTVBTDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgR2FtZS5sdW1wTWF0dXJlQWdlID0gMTsNCiAgICBHYW1lLmx1bXBSaXBlQWdlID0gMTsNCiAgICBHYW1lLmx1bXBPdmVycmlwZUFnZSA9IDE7DQogICAgR2FtZS5sdW1wQ3VycmVudFR5cGUgPSAwOw0KICAgIGwoImNvbW1lbnRzIikuaW5uZXJIVE1MID0NCiAgICAgIGwoImNvbW1lbnRzIikuaW5uZXJIVE1MICsNCiAgICAgICc8ZGl2IGlkPSJsdW1wcyIgb25jbGljaz0iR2FtZS5jbGlja0x1bXAoKTsiICcgKw0KICAgICAgR2FtZS5nZXREeW5hbWljVG9vbHRpcCgiR2FtZS5sdW1wVG9vbHRpcCIsICJib3R0b20iKSArDQogICAgICAnPjxkaXYgaWQ9Imx1bXBzSWNvbiIgY2xhc3M9InVzZXNJY29uIj48L2Rpdj48ZGl2IGlkPSJsdW1wc0ljb24yIiBjbGFzcz0idXNlc0ljb24iPjwvZGl2PjxkaXYgaWQ9Imx1bXBzQW1vdW50Ij4wPC9kaXY+PC9kaXY+JzsNCiAgICBHYW1lLmx1bXBUb29sdGlwID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHN0ciA9DQogICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDt3aWR0aDo0MDBweDtmb250LXNpemU6MTFweDt0ZXh0LWFsaWduOmNlbnRlcjsiIGlkPSJ0b29sdGlwTHVtcHMiPicgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIllvdSBoYXZlICUxLiIsDQogICAgICAgICAgJzxzcGFuIGNsYXNzPSJwcmljZSBsdW1wIj4nICsNCiAgICAgICAgICAgIGxvYygiJTEgc3VnYXIgbHVtcCIsIExCZWF1dGlmeShHYW1lLmx1bXBzKSkgKw0KICAgICAgICAgICAgIjwvc3Bhbj4iDQogICAgICAgICkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiQSA8Yj5zdWdhciBsdW1wPC9iPiBpcyBjb2FsZXNjaW5nIGhlcmUsIGF0dHJhY3RlZCBieSB5b3VyIGFjY29tcGxpc2htZW50cy4iDQogICAgICAgICk7DQoNCiAgICAgIHZhciBhZ2UgPSBEYXRlLm5vdygpIC0gR2FtZS5sdW1wVDsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIGlmIChhZ2UgPCAwKQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJUaGlzIHN1Z2FyIGx1bXAgaGFzIGJlZW4gZXhwb3NlZCB0byB0aW1lIHRyYXZlbCBzaGVuYW5pZ2FucyBhbmQgd2lsbCB0YWtlIGFuIGV4Y3J1Y2lhdGluZyA8Yj4lMTwvYj4gdG8gcmVhY2ggbWF0dXJpdHkuIiwNCiAgICAgICAgICBHYW1lLnNheVRpbWUoKChHYW1lLmx1bXBNYXR1cmVBZ2UgLSBhZ2UpIC8gMTAwMCArIDEpICogR2FtZS5mcHMsIC0xKQ0KICAgICAgICApOw0KICAgICAgZWxzZSBpZiAoYWdlIDwgR2FtZS5sdW1wTWF0dXJlQWdlKQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJUaGlzIHN1Z2FyIGx1bXAgaXMgc3RpbGwgZ3Jvd2luZyBhbmQgd2lsbCB0YWtlIDxiPiUxPC9iPiB0byByZWFjaCBtYXR1cml0eS4iLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSgoKEdhbWUubHVtcE1hdHVyZUFnZSAtIGFnZSkgLyAxMDAwICsgMSkgKiBHYW1lLmZwcywgLTEpDQogICAgICAgICk7DQogICAgICBlbHNlIGlmIChhZ2UgPCBHYW1lLmx1bXBSaXBlQWdlKQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJUaGlzIHN1Z2FyIGx1bXAgaXMgbWF0dXJlIGFuZCB3aWxsIGJlIHJpcGUgaW4gPGI+JTE8L2I+Ljxicj5Zb3UgbWF5IDxiPmNsaWNrIGl0IHRvIGhhcnZlc3QgaXQgbm93PC9iPiwgYnV0IHRoZXJlIGlzIGEgPGI+NTAlIGNoYW5jZSB5b3Ugd29uJ3QgZ2V0IGFueXRoaW5nPC9iPi4iLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSgoKEdhbWUubHVtcFJpcGVBZ2UgLSBhZ2UpIC8gMTAwMCArIDEpICogR2FtZS5mcHMsIC0xKQ0KICAgICAgICApOw0KICAgICAgZWxzZSBpZiAoYWdlIDwgR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpDQogICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgIjxiPlRoaXMgc3VnYXIgbHVtcCBpcyByaXBlISBDbGljayBpdCB0byBoYXJ2ZXN0IGl0LjwvYj48YnI+SWYgeW91IGRvIG5vdGhpbmcsIGl0IHdpbGwgYXV0by1oYXJ2ZXN0IGluIDxiPiUxPC9iPi4iLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSgoKEdhbWUubHVtcE92ZXJyaXBlQWdlIC0gYWdlKSAvIDEwMDAgKyAxKSAqIEdhbWUuZnBzLCAtMSkNCiAgICAgICAgKTsNCg0KICAgICAgdmFyIHBoYXNlID0gKGFnZSAvIEdhbWUubHVtcE92ZXJyaXBlQWdlKSAqIDc7DQogICAgICBpZiAocGhhc2UgPj0gMykgew0KICAgICAgICBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgIT0gMCkgc3RyICs9ICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nOw0KICAgICAgICBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgPT0gMSkNCiAgICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICAgIlRoaXMgc3VnYXIgbHVtcCBncmV3IHRvIGJlIDxiPmJpZnVyY2F0ZWQ8L2I+OyBoYXJ2ZXN0aW5nIGl0IGhhcyBhIDUwJSBjaGFuY2Ugb2YgeWllbGRpbmcgdHdvIGx1bXBzLiINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAyKQ0KICAgICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgICAiVGhpcyBzdWdhciBsdW1wIGdyZXcgdG8gYmUgPGI+Z29sZGVuPC9iPjsgaGFydmVzdGluZyBpdCB3aWxsIHlpZWxkIDIgdG8gNyBsdW1wcywgeW91ciBjdXJyZW50IGNvb2tpZXMgd2lsbCBiZSBkb3VibGVkIChjYXBwZWQgdG8gYSBnYWluIG9mIDI0IGhvdXJzIG9mIHlvdXIgQ3BTKSwgYW5kIHlvdSB3aWxsIGZpbmQgMTAlIG1vcmUgZ29sZGVuIGNvb2tpZXMgZm9yIHRoZSBuZXh0IDI0IGhvdXJzLiINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAzKQ0KICAgICAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICAgICAiVGhpcyBzdWdhciBsdW1wIHdhcyBhZmZlY3RlZCBieSB0aGUgZWxkZXJzIGFuZCBncmV3IHRvIGJlIDxiPm1lYXR5PC9iPjsgaGFydmVzdGluZyBpdCB3aWxsIHlpZWxkIGJldHdlZW4gMCBhbmQgMiBsdW1wcy4iDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgPT0gNCkNCiAgICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICAgIlRoaXMgc3VnYXIgbHVtcCBpcyA8Yj5jYXJhbWVsaXplZDwvYj4sIGl0cyBzdGlja2luZXNzIGJpbmRpbmcgaXQgdG8gdW5leHBlY3RlZCB0aGluZ3M7IGhhcnZlc3RpbmcgaXQgd2lsbCB5aWVsZCBiZXR3ZWVuIDEgYW5kIDMgbHVtcHMgYW5kIHdpbGwgcmVmaWxsIHlvdXIgc3VnYXIgbHVtcCBjb29sZG93bnMuIg0KICAgICAgICAgICk7DQogICAgICB9DQoNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIHN0ciArPSBsb2MoDQogICAgICAgICJZb3VyIHN1Z2FyIGx1bXBzIG1hdHVyZSBhZnRlciA8Yj4lMTwvYj4sPGJyPnJpcGVuIGFmdGVyIDxiPiUyPC9iPiw8YnI+YW5kIGZhbGwgYWZ0ZXIgPGI+JTM8L2I+LiIsDQogICAgICAgIFsNCiAgICAgICAgICBHYW1lLnNheVRpbWUoKEdhbWUubHVtcE1hdHVyZUFnZSAvIDEwMDApICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgICBHYW1lLnNheVRpbWUoKEdhbWUubHVtcFJpcGVBZ2UgLyAxMDAwKSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgICAgR2FtZS5zYXlUaW1lKChHYW1lLmx1bXBPdmVycmlwZUFnZSAvIDEwMDApICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXQ0KICAgICAgKTsNCg0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICImYnVsbDsgU3VnYXIgbHVtcHMgY2FuIGJlIGhhcnZlc3RlZCB3aGVuIG1hdHVyZSwgdGhvdWdoIGlmIGxlZnQgYWxvbmUgYmV5b25kIHRoYXQgcG9pbnQgdGhleSB3aWxsIHN0YXJ0IHJpcGVuaW5nIChpbmNyZWFzaW5nIHRoZSBjaGFuY2Ugb2YgaGFydmVzdGluZyB0aGVtKSBhbmQgd2lsbCBldmVudHVhbGx5IGZhbGwgYW5kIGJlIGF1dG8taGFydmVzdGVkIGFmdGVyIHNvbWUgdGltZS48YnI+JmJ1bGw7IFN1Z2FyIGx1bXBzIGFyZSBkZWxpY2lvdXMgYW5kIG1heSBiZSB1c2VkIGFzIGN1cnJlbmN5IGZvciBhbGwgc29ydHMgb2YgdGhpbmdzLjxicj4mYnVsbDsgT25jZSBhIHN1Z2FyIGx1bXAgaXMgaGFydmVzdGVkLCBhbm90aGVyIG9uZSB3aWxsIHN0YXJ0IGdyb3dpbmcgaW4gaXRzIHBsYWNlLjxicj4mYnVsbDsgTm90ZSB0aGF0IHN1Z2FyIGx1bXBzIGtlZXAgZ3Jvd2luZyB3aGVuIHRoZSBnYW1lIGlzIGNsb3NlZC4iDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+IjsNCiAgICAgIHJldHVybiBzdHI7DQogICAgfTsNCiAgICBHYW1lLmNvbXB1dGVMdW1wVGltZXMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgaG91ciA9IDEwMDAgKiA2MCAqIDYwOw0KICAgICAgR2FtZS5sdW1wTWF0dXJlQWdlID0gaG91ciAqIDIwOw0KICAgICAgR2FtZS5sdW1wUmlwZUFnZSA9IGhvdXIgKiAyMzsNCiAgICAgIGlmIChHYW1lLkhhcygiU3RldmlhIENhZWxlc3RpcyIpKSBHYW1lLmx1bXBSaXBlQWdlIC09IGhvdXI7DQogICAgICBpZiAoR2FtZS5IYXMoIkRpYWJldGljYSBEYWVtb25pY3VzIikpIEdhbWUubHVtcE1hdHVyZUFnZSAtPSBob3VyOw0KICAgICAgaWYgKEdhbWUuSGFzKCJJY2hvciBzeXJ1cCIpKSBHYW1lLmx1bXBNYXR1cmVBZ2UgLT0gMTAwMCAqIDYwICogNzsNCiAgICAgIGlmIChHYW1lLkhhcygiU3VnYXIgYWdpbmcgcHJvY2VzcyIpKQ0KICAgICAgICBHYW1lLmx1bXBSaXBlQWdlIC09DQogICAgICAgICAgNjAwMCAqIE1hdGgubWluKDYwMCwgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50KTsgLy9jYXBwZWQgYXQgNjAwIGdyYW5kbWFzDQogICAgICBpZiAoR2FtZS5oYXNHb2QgJiYgR2FtZS5CdWlsZGluZ3NPd25lZCAlIDEwID09IDApIHsNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJvcmRlciIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIEdhbWUubHVtcFJpcGVBZ2UgLT0gaG91cjsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIEdhbWUubHVtcFJpcGVBZ2UgLT0gKGhvdXIgLyAzKSAqIDI7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBHYW1lLmx1bXBSaXBlQWdlIC09IGhvdXIgLyAzOw0KICAgICAgfQ0KICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdEcmFnb25cJ3MgQ3VydmUnKSkge0dhbWUubHVtcE1hdHVyZUFnZS89MS4wNTtHYW1lLmx1bXBSaXBlQWdlLz0xLjA1O30NCiAgICAgIEdhbWUubHVtcE1hdHVyZUFnZSAvPSAxICsgR2FtZS5hdXJhTXVsdCgiRHJhZ29uJ3MgQ3VydmUiKSAqIDAuMDU7DQogICAgICBHYW1lLmx1bXBSaXBlQWdlIC89IDEgKyBHYW1lLmF1cmFNdWx0KCJEcmFnb24ncyBDdXJ2ZSIpICogMC4wNTsNCiAgICAgIEdhbWUubHVtcE92ZXJyaXBlQWdlID0gR2FtZS5sdW1wUmlwZUFnZSArIGhvdXI7DQogICAgICBpZiAoR2FtZS5IYXMoIkdsdWNvc2UtY2hhcmdlZCBhaXIiKSkgew0KICAgICAgICBHYW1lLmx1bXBNYXR1cmVBZ2UgLz0gMjAwMDsNCiAgICAgICAgR2FtZS5sdW1wUmlwZUFnZSAvPSAyMDAwOw0KICAgICAgICBHYW1lLmx1bXBPdmVycmlwZUFnZSAvPSAyMDAwOw0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5sb2FkTHVtcHMgPSBmdW5jdGlvbiAodGltZSkgew0KICAgICAgR2FtZS5jb21wdXRlTHVtcFRpbWVzKCk7DQogICAgICAvL0dhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQogICAgICBpZiAoIUdhbWUuY2FuTHVtcHMoKSkgR2FtZS5yZW1vdmVDbGFzcygibHVtcHNPbiIpOw0KICAgICAgZWxzZSB7DQogICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgR2FtZS5hZGRDbGFzcygibHVtcHNPbiIpOw0KICAgICAgICBHYW1lLmx1bXBUID0gTWF0aC5taW4oRGF0ZS5ub3coKSwgR2FtZS5sdW1wVCk7DQogICAgICAgIHZhciBhZ2UgPSBNYXRoLm1heChEYXRlLm5vdygpIC0gR2FtZS5sdW1wVCwgMCk7DQogICAgICAgIHZhciBhbW91bnQgPSBNYXRoLmZsb29yKGFnZSAvIEdhbWUubHVtcE92ZXJyaXBlQWdlKTsgLy9ob3cgbWFueSBsdW1wcyBkaWQgd2UgaGFydmVzdCBzaW5jZSB3ZSBjbG9zZWQgdGhlIGdhbWU/DQogICAgICAgIGlmIChhbW91bnQgPj0gMSkgew0KICAgICAgICAgIEdhbWUuaGFydmVzdEx1bXBzKDEsIHRydWUpOw0KICAgICAgICAgIEdhbWUubHVtcEN1cnJlbnRUeXBlID0gMDsgLy9hbGwgb2ZmbGluZSBsdW1wcyBhZnRlciB0aGUgZmlyc3Qgb25lIGhhdmUgYSBub3JtYWwgdHlwZQ0KICAgICAgICAgIGlmIChhbW91bnQgPiAxKSBHYW1lLmhhcnZlc3RMdW1wcyhhbW91bnQgLSAxLCB0cnVlKTsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICIiLA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiWW91IGhhcnZlc3RlZCA8Yj4lMTwvYj4gd2hpbGUgeW91IHdlcmUgYXdheS4iLA0KICAgICAgICAgICAgICBsb2MoIiUxIHN1Z2FyIGx1bXAiLCBMQmVhdXRpZnkoYW1vdW50KSkNCiAgICAgICAgICAgICksDQogICAgICAgICAgICBbMjksIDE0XQ0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS5sdW1wVCA9IERhdGUubm93KCkgLSAoYWdlIC0gYW1vdW50ICogR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpOw0KICAgICAgICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuZ2Fpbkx1bXBzID0gZnVuY3Rpb24gKHRvdGFsKSB7DQogICAgICBpZiAoR2FtZS5sdW1wc1RvdGFsID09IC0xKSB7DQogICAgICAgIEdhbWUubHVtcHNUb3RhbCA9IDA7DQogICAgICAgIEdhbWUubHVtcHMgPSAwOw0KICAgICAgfQ0KICAgICAgR2FtZS5sdW1wcyArPSB0b3RhbDsNCiAgICAgIEdhbWUubHVtcHNUb3RhbCArPSB0b3RhbDsNCg0KICAgICAgaWYgKEdhbWUubHVtcHNUb3RhbCA+PSA3KSBHYW1lLldpbigiRHVkZSwgc3dlZXQiKTsNCiAgICAgIGlmIChHYW1lLmx1bXBzVG90YWwgPj0gMzApIEdhbWUuV2luKCJTdWdhciBydXNoIik7DQogICAgICBpZiAoR2FtZS5sdW1wc1RvdGFsID49IDM2NSkgR2FtZS5XaW4oIlllYXIncyB3b3J0aCBvZiBjYXZpdGllcyIpOw0KICAgIH07DQogICAgR2FtZS5jbGlja0x1bXAgPSBmdW5jdGlvbiAoKSB7DQogICAgICB0cmlnZ2VyQW5pbShsKCJsdW1wc0ljb24iKSwgInB1Y2tlciIpOw0KICAgICAgdHJpZ2dlckFuaW0obCgibHVtcHNJY29uMiIpLCAicHVja2VyIik7DQogICAgICBpZiAoIUdhbWUuY2FuTHVtcHMoKSkgcmV0dXJuOw0KICAgICAgdmFyIGFnZSA9IERhdGUubm93KCkgLSBHYW1lLmx1bXBUOw0KICAgICAgaWYgKGFnZSA8IEdhbWUubHVtcE1hdHVyZUFnZSkgew0KICAgICAgfSBlbHNlIGlmIChhZ2UgPCBHYW1lLmx1bXBSaXBlQWdlKSB7DQogICAgICAgIHZhciBhbW91bnQgPSBjaG9vc2UoWzAsIDFdKTsNCiAgICAgICAgaWYgKGFtb3VudCAhPSAwKSBHYW1lLldpbigiSGFuZC1waWNrZWQiKTsNCiAgICAgICAgR2FtZS5oYXJ2ZXN0THVtcHMoYW1vdW50KTsNCiAgICAgICAgR2FtZS5jb21wdXRlTHVtcFR5cGUoKTsNCiAgICAgIH0gZWxzZSBpZiAoYWdlIDwgR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpIHsNCiAgICAgICAgR2FtZS5oYXJ2ZXN0THVtcHMoMSk7DQogICAgICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLmhhcnZlc3RMdW1wcyA9IGZ1bmN0aW9uIChhbW91bnQsIHNpbGVudCkgew0KICAgICAgaWYgKCFHYW1lLmNhbkx1bXBzKCkpIHJldHVybjsNCiAgICAgIEdhbWUubHVtcFQgPSBEYXRlLm5vdygpOw0KICAgICAgdmFyIHRvdGFsID0gYW1vdW50Ow0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAxICYmDQogICAgICAgIEdhbWUuSGFzKCJTdWNyYWxvc2lhIEludXRpbGlzIikgJiYNCiAgICAgICAgTWF0aC5yYW5kb20oKSA8IDAuMDUNCiAgICAgICkNCiAgICAgICAgdG90YWwgKj0gMjsNCiAgICAgIGVsc2UgaWYgKEdhbWUubHVtcEN1cnJlbnRUeXBlID09IDEpIHRvdGFsICo9IGNob29zZShbMSwgMl0pOw0KICAgICAgZWxzZSBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgPT0gMikgew0KICAgICAgICB0b3RhbCAqPSBjaG9vc2UoWzIsIDMsIDQsIDUsIDYsIDddKTsNCiAgICAgICAgR2FtZS5nYWluQnVmZigic3VnYXIgYmxlc3NpbmciLCAyNCAqIDYwICogNjAsIDEpOw0KICAgICAgICBHYW1lLkVhcm4oTWF0aC5taW4oR2FtZS5jb29raWVzUHMgKiA2MCAqIDYwICogMjQsIEdhbWUuY29va2llcykpOw0KICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICBsb2MoIlN1Z2FyIGJsZXNzaW5nIGFjdGl2YXRlZCEiKSwNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiWW91ciBjb29raWVzIGhhdmUgYmVlbiBkb3VibGVkLjxicj4rMTAlIGdvbGRlbiBjb29raWVzIGZvciB0aGUgbmV4dCAyNCBob3Vycy4iDQogICAgICAgICAgKSwNCiAgICAgICAgICBbMjksIDE2XQ0KICAgICAgICApOw0KICAgICAgfSBlbHNlIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAzKSB0b3RhbCAqPSBjaG9vc2UoWzAsIDAsIDEsIDIsIDJdKTsNCiAgICAgIGVsc2UgaWYgKEdhbWUubHVtcEN1cnJlbnRUeXBlID09IDQpIHsNCiAgICAgICAgdG90YWwgKj0gY2hvb3NlKFsxLCAyLCAzXSk7DQogICAgICAgIEdhbWUubHVtcFJlZmlsbCA9IDA7IC8vRGF0ZS5ub3coKS1HYW1lLmdldEx1bXBSZWZpbGxNYXgoKTsNCiAgICAgICAgR2FtZS5Ob3RpZnkobG9jKCJTdWdhciBsdW1wIGNvb2xkb3ducyBjbGVhcmVkISIpLCAiIiwgWzI5LCAyN10pOw0KICAgICAgfQ0KICAgICAgdG90YWwgPSBNYXRoLmZsb29yKHRvdGFsKTsNCiAgICAgIEdhbWUuZ2Fpbkx1bXBzKHRvdGFsKTsNCiAgICAgIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAxKSBHYW1lLldpbigiU3VnYXIgc3VnYXIiKTsNCiAgICAgIGVsc2UgaWYgKEdhbWUubHVtcEN1cnJlbnRUeXBlID09IDIpIEdhbWUuV2luKCJBbGwtbmF0dXJhbCBjYW5lIHN1Z2FyIik7DQogICAgICBlbHNlIGlmIChHYW1lLmx1bXBDdXJyZW50VHlwZSA9PSAzKSBHYW1lLldpbigiU3dlZXRtZWF0cyIpOw0KICAgICAgZWxzZSBpZiAoR2FtZS5sdW1wQ3VycmVudFR5cGUgPT0gNCkgR2FtZS5XaW4oIk1haWxsYXJkIHJlYWN0aW9uIik7DQoNCiAgICAgIGlmICghc2lsZW50KSB7DQogICAgICAgIHZhciByZWN0ID0gbCgibHVtcHNJY29uMiIpLmdldEJvdW5kcygpOw0KICAgICAgICBHYW1lLlNwYXJrbGVBdCgNCiAgICAgICAgICAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLA0KICAgICAgICAgIChyZWN0LnRvcCArIHJlY3QuYm90dG9tKSAvIDIgLSAyNCArIDMyIC0gVG9wQmFyT2Zmc2V0DQogICAgICAgICk7DQogICAgICAgIGlmICh0b3RhbCA+IDApDQogICAgICAgICAgR2FtZS5Qb3B1cCgNCiAgICAgICAgICAgICI8c21hbGw+KyIgKyBsb2MoIiUxIHN1Z2FyIGx1bXAiLCBMQmVhdXRpZnkodG90YWwpKSArICI8L3NtYWxsPiIsDQogICAgICAgICAgICAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLA0KICAgICAgICAgICAgKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMiAtIDQ4DQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgIEdhbWUuUG9wdXAoDQogICAgICAgICAgICAiPHNtYWxsPiIgKyBsb2MoIkJvdGNoZWQgaGFydmVzdCEiKSArICI8L3NtYWxsPiIsDQogICAgICAgICAgICAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLA0KICAgICAgICAgICAgKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMiAtIDQ4DQogICAgICAgICAgKTsNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvcG9wIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMgKyAxKSArICIubXAzIiwgMC43NSk7DQogICAgICB9DQogICAgICBHYW1lLmNvbXB1dGVMdW1wVGltZXMoKTsNCiAgICB9Ow0KICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlID0gZnVuY3Rpb24gKCkgew0KICAgICAgTWF0aC5zZWVkcmFuZG9tKEdhbWUuc2VlZCArICIvIiArIEdhbWUubHVtcFQpOw0KICAgICAgdmFyIHR5cGVzID0gWzBdOw0KICAgICAgdmFyIGxvb3AgPSAxOw0KICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdEcmFnb25cJ3MgQ3VydmUnKSkgbG9vcD0yOw0KICAgICAgbG9vcCArPSBHYW1lLmF1cmFNdWx0KCJEcmFnb24ncyBDdXJ2ZSIpOw0KICAgICAgbG9vcCA9IHJhbmRvbUZsb29yKGxvb3ApOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb29wOyBpKyspIHsNCiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAoR2FtZS5IYXMoIlN1Y3JhbG9zaWEgSW51dGlsaXMiKSA/IDAuMTUgOiAwLjEpKQ0KICAgICAgICAgIHR5cGVzLnB1c2goMSk7IC8vYmlmdXJjYXRlZA0KICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDMgLyAxMDAwKSB0eXBlcy5wdXNoKDIpOyAvL2dvbGRlbg0KICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMSAqIEdhbWUuZWxkZXJXcmF0aCkgdHlwZXMucHVzaCgzKTsgLy9tZWF0eQ0KICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDEgLyA1MCkgdHlwZXMucHVzaCg0KTsgLy9jYXJhbWVsaXplZA0KICAgICAgfQ0KICAgICAgR2FtZS5sdW1wQ3VycmVudFR5cGUgPSBjaG9vc2UodHlwZXMpOw0KICAgICAgTWF0aC5zZWVkcmFuZG9tKCk7DQogICAgfTsNCg0KICAgIEdhbWUuY2FuTHVtcHMgPSBmdW5jdGlvbiAoKSAvL2dyYW1tYXRpY2FsbHkgcGxlYXNpbmcgZnVuY3Rpb24gbmFtZQ0KICAgIHsNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5sdW1wc1RvdGFsID4gLTEgfHwNCiAgICAgICAgKEdhbWUuYXNjZW5zaW9uTW9kZSAhPSAxICYmDQogICAgICAgICAgR2FtZS5jb29raWVzRWFybmVkICsgR2FtZS5jb29raWVzUmVzZXQgPj0gMTAwMDAwMDAwMCkNCiAgICAgICkNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfTsNCg0KICAgIEdhbWUuZ2V0THVtcFJlZmlsbE1heCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLmZwcyAqIDYwICogMTU7IC8vMTAwMCo2MCoxNTsvLzE1IG1pbnV0ZXMNCiAgICB9Ow0KICAgIEdhbWUuZ2V0THVtcFJlZmlsbFJlbWFpbmluZyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLmx1bXBSZWZpbGw7IC8vR2FtZS5nZXRMdW1wUmVmaWxsTWF4KCktKERhdGUubm93KCktR2FtZS5sdW1wUmVmaWxsKTsNCiAgICB9Ow0KICAgIEdhbWUuY2FuUmVmaWxsTHVtcCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLmx1bXBSZWZpbGwgPD0gMDsgLy8oKERhdGUubm93KCktR2FtZS5sdW1wUmVmaWxsKT49R2FtZS5nZXRMdW1wUmVmaWxsTWF4KCkpOw0KICAgIH07DQogICAgR2FtZS5yZWZpbGxMdW1wID0gZnVuY3Rpb24gKG4sIGZ1bmMpIHsNCiAgICAgIGlmIChHYW1lLmx1bXBzID49IG4gJiYgR2FtZS5jYW5SZWZpbGxMdW1wKCkpIHsNCiAgICAgICAgR2FtZS5zcGVuZEx1bXAobiwgInJlZmlsbCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuc2VzYW1lKSBHYW1lLmx1bXBSZWZpbGwgPSBHYW1lLmdldEx1bXBSZWZpbGxNYXgoKTsgLy9EYXRlLm5vdygpOw0KICAgICAgICAgIGZ1bmMoKTsNCiAgICAgICAgfSkoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuc3BlbmRMdW1wID0gZnVuY3Rpb24gKG4sIHN0ciwgZnVuYywgZnJlZSkgew0KICAgICAgLy9hc2sgaWYgd2Ugd2FudCB0byBzcGVuZCBOIGx1bXBzICh1bmxlc3MgZnJlZSkNCiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmICghZnJlZSAmJiBHYW1lLmx1bXBzIDwgbikgcmV0dXJuIGZhbHNlOw0KICAgICAgICBpZiAoIWZyZWUgJiYgR2FtZS5wcmVmcy5hc2tMdW1wcykgew0KICAgICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICAgICAgR2FtZS5wcm9tcHRDb25maXJtRnVuYyA9IGZ1bmM7IC8vYml0IGR1bWINCiAgICAgICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgICAgICc8aWQgU3BlbmRMdW1wPjxkaXYgY2xhc3M9Imljb24iIHN0eWxlPSJiYWNrZ3JvdW5kOnVybChpbWcvaWNvbnMucG5nP3Y9JyArDQogICAgICAgICAgICAgIEdhbWUudmVyc2lvbiArDQogICAgICAgICAgICAgICIpO2Zsb2F0OmxlZnQ7bWFyZ2luLWxlZnQ6LThweDttYXJnaW4tdG9wOi04cHg7YmFja2dyb3VuZC1wb3NpdGlvbjoiICsNCiAgICAgICAgICAgICAgLTI5ICogNDggKw0KICAgICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAgIC0xNCAqIDQ4ICsNCiAgICAgICAgICAgICAgJ3B4OyI+PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luOjE2cHggOHB4OyI+JyArDQogICAgICAgICAgICAgIGxvYygiRG8geW91IHdhbnQgdG8gc3BlbmQgJTEgdG8gJTI/IiwgWw0KICAgICAgICAgICAgICAgICI8Yj4iICsgbG9jKCIlMSBzdWdhciBsdW1wIiwgTEJlYXV0aWZ5KG4pKSArICI8L2I+IiwNCiAgICAgICAgICAgICAgICBzdHIsDQogICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgICAgICBbDQogICAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgICBsb2MoIlllcyIpLA0KICAgICAgICAgICAgICAgICJHYW1lLmx1bXBzLT0iICsNCiAgICAgICAgICAgICAgICAgIG4gKw0KICAgICAgICAgICAgICAgICAgIjtHYW1lLnByb21wdENvbmZpcm1GdW5jKCk7R2FtZS5wcm9tcHRDb25maXJtRnVuYz0wO0dhbWUucmVjYWxjdWxhdGVHYWlucz0xO0dhbWUuQ2xvc2VQcm9tcHQoKTsiLA0KICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICBsb2MoIk5vIiksDQogICAgICAgICAgICBdDQogICAgICAgICAgKTsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKCFmcmVlKSBHYW1lLmx1bXBzIC09IG47DQogICAgICAgICAgZnVuYygpOw0KICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIH0NCiAgICAgIH07DQogICAgfTsNCg0KICAgIEdhbWUuZG9MdW1wcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChHYW1lLmx1bXBSZWZpbGwgPiAwKSBHYW1lLmx1bXBSZWZpbGwtLTsNCg0KICAgICAgaWYgKCFHYW1lLmNhbkx1bXBzKCkpIHsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygibHVtcHNPbiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAoR2FtZS5sdW1wc1RvdGFsID09IC0xKSB7DQogICAgICAgIC8vZmlyc3QgdGltZSAhDQogICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgR2FtZS5hZGRDbGFzcygibHVtcHNPbiIpOw0KICAgICAgICBHYW1lLmx1bXBUID0gRGF0ZS5ub3coKTsNCiAgICAgICAgR2FtZS5sdW1wc1RvdGFsID0gMDsNCiAgICAgICAgR2FtZS5sdW1wcyA9IDA7DQogICAgICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQoNCiAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgbG9jKCJTdWdhciBsdW1wcyEiKSwNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiQmVjYXVzZSB5b3UndmUgYmFrZWQgYSA8Yj5iaWxsaW9uIGNvb2tpZXM8L2I+IGluIHRvdGFsLCB5b3UgYXJlIG5vdyBhdHRyYWN0aW5nIDxiPnN1Z2FyIGx1bXBzPC9iPi4gVGhleSBjb2FsZXNjZSBxdWlldGx5IG5lYXIgdGhlIHRvcCBvZiB5b3VyIHNjcmVlbiwgdW5kZXIgdGhlIFN0YXRzIGJ1dHRvbi48YnI+WW91IHdpbGwgYmUgYWJsZSB0byBoYXJ2ZXN0IHRoZW0gd2hlbiB0aGV5J3JlIHJpcGUsIGFmdGVyIHdoaWNoIHlvdSBtYXkgc3BlbmQgdGhlbSBvbiBhbGwgc29ydHMgb2YgdGhpbmdzISINCiAgICAgICAgICApLA0KICAgICAgICAgIFsyMywgMTRdDQogICAgICAgICk7DQogICAgICB9DQogICAgICB2YXIgYWdlID0gRGF0ZS5ub3coKSAtIEdhbWUubHVtcFQ7DQogICAgICBpZiAoYWdlID4gR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpIHsNCiAgICAgICAgYWdlID0gMDsNCiAgICAgICAgR2FtZS5oYXJ2ZXN0THVtcHMoMSk7DQogICAgICAgIEdhbWUuY29tcHV0ZUx1bXBUeXBlKCk7DQogICAgICB9DQoNCiAgICAgIHZhciBwaGFzZSA9IE1hdGgubWluKDYsIE1hdGguZmxvb3IoKGFnZSAvIEdhbWUubHVtcE92ZXJyaXBlQWdlKSAqIDcpKTsNCiAgICAgIHZhciBwaGFzZTIgPSBNYXRoLm1pbigNCiAgICAgICAgNiwNCiAgICAgICAgTWF0aC5mbG9vcigoYWdlIC8gR2FtZS5sdW1wT3ZlcnJpcGVBZ2UpICogNykgKyAxDQogICAgICApOw0KICAgICAgdmFyIHJvdyA9IDE0Ow0KICAgICAgdmFyIHJvdzIgPSAxNDsNCiAgICAgIHZhciB0eXBlID0gR2FtZS5sdW1wQ3VycmVudFR5cGU7DQogICAgICBpZiAodHlwZSA9PSAxKSB7DQogICAgICAgIC8vZG91YmxlDQogICAgICAgIC8vaWYgKHBoYXNlPj02KSByb3c9MTU7DQogICAgICAgIGlmIChwaGFzZTIgPj0gNikgcm93MiA9IDE1Ow0KICAgICAgfSBlbHNlIGlmICh0eXBlID09IDIpIHsNCiAgICAgICAgLy9nb2xkZW4NCiAgICAgICAgaWYgKHBoYXNlID49IDQpIHJvdyA9IDE2Ow0KICAgICAgICBpZiAocGhhc2UyID49IDQpIHJvdzIgPSAxNjsNCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAzKSB7DQogICAgICAgIC8vbWVhdHkNCiAgICAgICAgaWYgKHBoYXNlID49IDQpIHJvdyA9IDE3Ow0KICAgICAgICBpZiAocGhhc2UyID49IDQpIHJvdzIgPSAxNzsNCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSA0KSB7DQogICAgICAgIC8vY2FyYW1lbGl6ZWQNCiAgICAgICAgaWYgKHBoYXNlID49IDQpIHJvdyA9IDI3Ow0KICAgICAgICBpZiAocGhhc2UyID49IDQpIHJvdzIgPSAyNzsNCiAgICAgIH0NCiAgICAgIHZhciBpY29uID0gWzIzICsgTWF0aC5taW4ocGhhc2UsIDUpLCByb3ddOw0KICAgICAgdmFyIGljb24yID0gWzIzICsgcGhhc2UyLCByb3cyXTsNCiAgICAgIGlmIChhZ2UgPCAwKSB7DQogICAgICAgIGljb24gPSBbMTcsIDVdOw0KICAgICAgICBpY29uMiA9IFsxNywgNV07DQogICAgICB9DQogICAgICB2YXIgb3BhY2l0eSA9IE1hdGgubWluKDYsIChhZ2UgLyBHYW1lLmx1bXBPdmVycmlwZUFnZSkgKiA3KSAlIDE7DQogICAgICBpZiAocGhhc2UgPj0gNikgew0KICAgICAgICBvcGFjaXR5ID0gMTsNCiAgICAgIH0NCiAgICAgIGwoImx1bXBzSWNvbiIpLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAgIC1pY29uWzBdICogNDggKyAicHggIiArIC1pY29uWzFdICogNDggKyAicHgiOw0KICAgICAgbCgibHVtcHNJY29uMiIpLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAgIC1pY29uMlswXSAqIDQ4ICsgInB4ICIgKyAtaWNvbjJbMV0gKiA0OCArICJweCI7DQogICAgICBsKCJsdW1wc0ljb24yIikuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHk7DQogICAgICBsKCJsdW1wc0Ftb3VudCIpLnRleHRDb250ZW50ID0gQmVhdXRpZnkoR2FtZS5sdW1wcyk7DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlDT09LSUUgRUNPTk9NSUNTDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogICAgR2FtZS5FYXJuID0gZnVuY3Rpb24gKGhvd211Y2gpIHsNCiAgICAgIEdhbWUuY29va2llcyArPSBob3dtdWNoOw0KICAgICAgR2FtZS5jb29raWVzRWFybmVkICs9IGhvd211Y2g7DQogICAgfTsNCiAgICBHYW1lLlNwZW5kID0gZnVuY3Rpb24gKGhvd211Y2gpIHsNCiAgICAgIEdhbWUuY29va2llcyAtPSBob3dtdWNoOw0KICAgIH07DQogICAgR2FtZS5EaXNzb2x2ZSA9IGZ1bmN0aW9uIChob3dtdWNoKSB7DQogICAgICBHYW1lLmNvb2tpZXMgLT0gaG93bXVjaDsNCiAgICAgIEdhbWUuY29va2llc0Vhcm5lZCAtPSBob3dtdWNoOw0KICAgICAgR2FtZS5jb29raWVzID0gTWF0aC5tYXgoMCwgR2FtZS5jb29raWVzKTsNCiAgICAgIEdhbWUuY29va2llc0Vhcm5lZCA9IE1hdGgubWF4KDAsIEdhbWUuY29va2llc0Vhcm5lZCk7DQogICAgfTsNCiAgICBHYW1lLm1vdXNlQ3BzID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGFkZCA9IDA7DQogICAgICBpZiAoR2FtZS5IYXMoIlRob3VzYW5kIGZpbmdlcnMiKSkgYWRkICs9IDAuMTsNCiAgICAgIGlmIChHYW1lLkhhcygiTWlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSA1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJCaWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDEwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJUcmlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSAyMDsNCiAgICAgIGlmIChHYW1lLkhhcygiUXVhZHJpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICBpZiAoR2FtZS5IYXMoIlF1aW50aWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJTZXh0aWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJTZXB0aWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJPY3RpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICBpZiAoR2FtZS5IYXMoIk5vbmlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSAyMDsNCiAgICAgIGlmIChHYW1lLkhhcygiRGVjaWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJVbnNoYWNrbGVkIGN1cnNvcnMiKSkgYWRkICo9IDI1Ow0KDQogICAgICB2YXIgbnVtID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIG51bSArPSBHYW1lLk9iamVjdHNbaV0uYW1vdW50Ow0KICAgICAgfQ0KICAgICAgbnVtIC09IEdhbWUuT2JqZWN0c1siQ3Vyc29yIl0uYW1vdW50Ow0KICAgICAgYWRkID0gYWRkICogbnVtOw0KICAgICAgaWYgKEdhbWUuSGFzKCJQbGFzdGljIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIklyb24gbW91c2UiKSkgYWRkICs9IEdhbWUuY29va2llc1BzICogMC4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiVGl0YW5pdW0gbW91c2UiKSkgYWRkICs9IEdhbWUuY29va2llc1BzICogMC4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQWRhbWFudGl1bSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJVbm9idGFpbml1bSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJFbHVkaXVtIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIldpc2hhbGxveSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJGYW50YXN0ZWVsIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIk5ldmVyY3JhY2sgbW91c2UiKSkgYWRkICs9IEdhbWUuY29va2llc1BzICogMC4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQXJteXRocmlsIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIlRlY2hub2JzaWRpYW4gbW91c2UiKSkgYWRkICs9IEdhbWUuY29va2llc1BzICogMC4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiUGxhc21hcmJsZSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJNaXJhY3VsaXRlIG1vdXNlIikpIGFkZCArPSBHYW1lLmNvb2tpZXNQcyAqIDAuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIkFldGhlcmljZSBtb3VzZSIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIkZvcnR1bmUgIzEwNCIpKSBhZGQgKz0gR2FtZS5jb29raWVzUHMgKiAwLjAxOw0KICAgICAgdmFyIG11bHQgPSAxOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIlNhbnRhJ3MgaGVscGVycyIpKSBtdWx0ICo9IDEuMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQ29va2llIGVnZyIpKSBtdWx0ICo9IDEuMTsNCiAgICAgIGlmIChHYW1lLkhhcygiSGFsbyBnbG92ZXMiKSkgbXVsdCAqPSAxLjE7DQogICAgICBpZiAoR2FtZS5IYXMoIkRyYWdvbiBjbGF3IikpIG11bHQgKj0gMS4wMzsNCg0KICAgICAgaWYgKEdhbWUuSGFzKCJBdXJhIGdsb3ZlcyIpKSB7DQogICAgICAgIG11bHQgKj0NCiAgICAgICAgICAxICsNCiAgICAgICAgICAwLjA1ICoNCiAgICAgICAgICAgIE1hdGgubWluKA0KICAgICAgICAgICAgICBHYW1lLk9iamVjdHNbIkN1cnNvciJdLmxldmVsLA0KICAgICAgICAgICAgICBHYW1lLkhhcygiTHVtaW5vdXMgZ2xvdmVzIikgPyAyMCA6IDEwDQogICAgICAgICAgICApOw0KICAgICAgfQ0KDQogICAgICBtdWx0ICo9IEdhbWUuZWZmKCJjbGljayIpOw0KDQogICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJsYWJvciIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIG11bHQgKj0gMS4xNTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG11bHQgKj0gMS4xOw0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgbXVsdCAqPSAxLjA1Ow0KICAgICAgfQ0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuYnVmZnMpIHsNCiAgICAgICAgaWYgKHR5cGVvZiBHYW1lLmJ1ZmZzW2ldLm11bHRDbGljayAhPSAidW5kZWZpbmVkIikNCiAgICAgICAgICBtdWx0ICo9IEdhbWUuYnVmZnNbaV0ubXVsdENsaWNrOw0KICAgICAgfQ0KDQogICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0RyYWdvbiBDdXJzb3InKSkgbXVsdCo9MS4wNTsNCiAgICAgIG11bHQgKj0gMSArIEdhbWUuYXVyYU11bHQoIkRyYWdvbiBDdXJzb3IiKSAqIDAuMDU7DQoNCiAgICAgIHZhciBvdXQgPQ0KICAgICAgICBtdWx0ICoNCiAgICAgICAgR2FtZS5Db21wdXRlQ3BzKA0KICAgICAgICAgIDEsDQogICAgICAgICAgR2FtZS5IYXMoIlJlaW5mb3JjZWQgaW5kZXggZmluZ2VyIikgKw0KICAgICAgICAgICAgR2FtZS5IYXMoIkNhcnBhbCB0dW5uZWwgcHJldmVudGlvbiBjcmVhbSIpICsNCiAgICAgICAgICAgIEdhbWUuSGFzKCJBbWJpZGV4dHJvdXMiKSwNCiAgICAgICAgICBhZGQNCiAgICAgICAgKTsNCg0KICAgICAgb3V0ID0gR2FtZS5ydW5Nb2RIb29rT25WYWx1ZSgiY29va2llc1BlckNsaWNrIiwgb3V0KTsNCg0KICAgICAgaWYgKEdhbWUuaGFzQnVmZigiQ3Vyc2VkIGZpbmdlciIpKQ0KICAgICAgICBvdXQgPSBHYW1lLmJ1ZmZzWyJDdXJzZWQgZmluZ2VyIl0ucG93ZXI7DQogICAgICByZXR1cm4gb3V0Ow0KICAgIH07DQogICAgR2FtZS5jb21wdXRlZE1vdXNlQ3BzID0gMTsNCiAgICBHYW1lLmdsb2JhbENwc011bHQgPSAxOw0KICAgIEdhbWUudW5idWZmZWRDcHMgPSAwOw0KICAgIEdhbWUuYnVpbGRpbmdDcHMgPSAwOw0KICAgIEdhbWUubGFzdENsaWNrID0gMDsNCiAgICBHYW1lLkNhbkNsaWNrID0gMTsNCiAgICBHYW1lLmF1dG9jbGlja2VyRGV0ZWN0ZWQgPSAwOw0KICAgIEdhbWUuQmlnQ29va2llU3RhdGUgPSAwOyAvLzAgPSBub3JtYWwsIDEgPSBjbGlja2VkIChzbWFsbCksIDIgPSByZWxlYXNlZC9ob3ZlcmVkIChiaWcpDQogICAgR2FtZS5CaWdDb29raWVTaXplID0gMDsNCiAgICBHYW1lLkJpZ0Nvb2tpZVNpemVEID0gMDsNCiAgICBHYW1lLkJpZ0Nvb2tpZVNpemVUID0gMTsNCiAgICBHYW1lLmNvb2tpZUNsaWNrU291bmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KSArIDE7DQogICAgR2FtZS5wbGF5Q29va2llQ2xpY2tTb3VuZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChHYW1lLnByZWZzLmNvb2tpZXNvdW5kKQ0KICAgICAgICBQbGF5U291bmQoInNuZC9jbGlja2IiICsgR2FtZS5jb29raWVDbGlja1NvdW5kICsgIi5tcDMiLCAwLjUpOw0KICAgICAgZWxzZSBQbGF5U291bmQoInNuZC9jbGljayIgKyBHYW1lLmNvb2tpZUNsaWNrU291bmQgKyAiLm1wMyIsIDAuNSk7DQogICAgICBHYW1lLmNvb2tpZUNsaWNrU291bmQgKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCkgKyAxOw0KICAgICAgaWYgKEdhbWUuY29va2llQ2xpY2tTb3VuZCA+IDcpIEdhbWUuY29va2llQ2xpY2tTb3VuZCAtPSA3Ow0KICAgIH07DQogICAgR2FtZS5DbGlja0Nvb2tpZSA9IGZ1bmN0aW9uIChlLCBhbW91bnQpIHsNCiAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpOw0KICAgICAgaWYgKGUpIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5PbkFzY2VuZCB8fA0KICAgICAgICBHYW1lLkFzY2VuZFRpbWVyID4gMCB8fA0KICAgICAgICBHYW1lLlQgPCAzIHx8DQogICAgICAgIG5vdyAtIEdhbWUubGFzdENsaWNrIDwgMTAwMCAvICgoZSA/IGUuZGV0YWlsIDogMSkgPT09IDAgPyAzIDogNTApDQogICAgICApIHsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmIChub3cgLSBHYW1lLmxhc3RDbGljayA8IDEwMDAgLyAxNSkgew0KICAgICAgICAgIEdhbWUuYXV0b2NsaWNrZXJEZXRlY3RlZCArPSBHYW1lLmZwczsNCiAgICAgICAgICBpZiAoR2FtZS5hdXRvY2xpY2tlckRldGVjdGVkID49IEdhbWUuZnBzICogNSkNCiAgICAgICAgICAgIEdhbWUuV2luKCJVbmNhbm55IGNsaWNrZXIiKTsNCiAgICAgICAgfQ0KICAgICAgICBHYW1lLmxvc2VTaGltbWVyaW5nVmVpbCgiY2xpY2siKTsNCiAgICAgICAgdmFyIGFtb3VudCA9IGFtb3VudCA/IGFtb3VudCA6IEdhbWUuY29tcHV0ZWRNb3VzZUNwczsNCiAgICAgICAgR2FtZS5FYXJuKGFtb3VudCk7DQogICAgICAgIEdhbWUuaGFuZG1hZGVDb29raWVzICs9IGFtb3VudDsNCiAgICAgICAgaWYgKEdhbWUucHJlZnMucGFydGljbGVzKSB7DQogICAgICAgICAgR2FtZS5wYXJ0aWNsZUFkZCgpOw0KICAgICAgICAgIEdhbWUucGFydGljbGVBZGQoDQogICAgICAgICAgICBHYW1lLm1vdXNlWCwNCiAgICAgICAgICAgIEdhbWUubW91c2VZLA0KICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIC0yIC0gMiwNCiAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAwLjUgKyAwLjc1LA0KICAgICAgICAgICAgMSwNCiAgICAgICAgICAgIDINCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLnByZWZzLm51bWJlcnMpDQogICAgICAgICAgR2FtZS5wYXJ0aWNsZUFkZCgNCiAgICAgICAgICAgIEdhbWUubW91c2VYICsgTWF0aC5yYW5kb20oKSAqIDggLSA0LA0KICAgICAgICAgICAgR2FtZS5tb3VzZVkgLSA4ICsgTWF0aC5yYW5kb20oKSAqIDggLSA0LA0KICAgICAgICAgICAgMCwNCiAgICAgICAgICAgIC0yLA0KICAgICAgICAgICAgMSwNCiAgICAgICAgICAgIDQsDQogICAgICAgICAgICAyLA0KICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAiKyIgKyBCZWF1dGlmeShhbW91bnQsIDEpDQogICAgICAgICAgKTsNCg0KICAgICAgICBHYW1lLnJ1bk1vZEhvb2soImNsaWNrIik7DQoNCiAgICAgICAgR2FtZS5wbGF5Q29va2llQ2xpY2tTb3VuZCgpOw0KICAgICAgICBHYW1lLmNvb2tpZUNsaWNrcysrOw0KDQogICAgICAgIGlmIChHYW1lLmNsaWNrc1RoaXNTZXNzaW9uID09IDApIFBsYXlDdWUoInByZXBsYXkiKTsNCiAgICAgICAgR2FtZS5jbGlja3NUaGlzU2Vzc2lvbisrOw0KICAgICAgICBHYW1lLmxhc3RDbGljayA9IG5vdzsNCiAgICAgIH0NCiAgICAgIEdhbWUuQ2xpY2sgPSAwOw0KICAgIH07DQogICAgR2FtZS5tb3VzZVggPSAwOw0KICAgIEdhbWUubW91c2VZID0gMDsNCiAgICBHYW1lLm1vdXNlWDIgPSAwOw0KICAgIEdhbWUubW91c2VZMiA9IDA7DQogICAgR2FtZS5tb3VzZU1vdmVkID0gMDsNCiAgICBHYW1lLkdldE1vdXNlQ29vcmRzID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgIHZhciBwb3N4ID0gMDsNCiAgICAgIHZhciBwb3N5ID0gMDsNCiAgICAgIGlmICghZSkgdmFyIGUgPSB3aW5kb3cuZXZlbnQ7DQogICAgICBpZiAoZS5wYWdlWCB8fCBlLnBhZ2VZKSB7DQogICAgICAgIHBvc3ggPSBlLnBhZ2VYOw0KICAgICAgICBwb3N5ID0gZS5wYWdlWTsNCiAgICAgIH0gZWxzZSBpZiAoZS5jbGllbnRYIHx8IGUuY2xpZW50WSkgew0KICAgICAgICBwb3N4ID0NCiAgICAgICAgICBlLmNsaWVudFggKw0KICAgICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArDQogICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7DQogICAgICAgIHBvc3kgPQ0KICAgICAgICAgIGUuY2xpZW50WSArDQogICAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKw0KICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7DQogICAgICB9DQogICAgICB2YXIgeCA9IDA7DQogICAgICB2YXIgeSA9IFRvcEJhck9mZnNldDsNCiAgICAgIC8qDQoJCQl2YXIgZWw9bCgnc2VjdGlvbkxlZnQnKTsNCgkJCXdoaWxlKGVsICYmICFpc05hTihlbC5vZmZzZXRMZWZ0KSAmJiAhaXNOYU4oZWwub2Zmc2V0VG9wKSkNCgkJCXsNCgkJCQl4Kz1lbC5vZmZzZXRMZWZ0LWVsLnNjcm9sbExlZnQ7DQoJCQkJeSs9ZWwub2Zmc2V0VG9wLWVsLnNjcm9sbFRvcDsNCgkJCQllbD1lbC5vZmZzZXRQYXJlbnQ7DQoJCQl9Ki8NCiAgICAgIEdhbWUubW91c2VYMiA9IEdhbWUubW91c2VYOw0KICAgICAgR2FtZS5tb3VzZVkyID0gR2FtZS5tb3VzZVk7DQogICAgICBHYW1lLm1vdXNlWCA9IChwb3N4IC0geCkgLyBHYW1lLnNjYWxlOw0KICAgICAgR2FtZS5tb3VzZVkgPSAocG9zeSAtIHkpIC8gR2FtZS5zY2FsZTsNCiAgICAgIEdhbWUubW91c2VNb3ZlZCA9IDE7DQogICAgICBHYW1lLmxhc3RBY3Rpdml0eSA9IEdhbWUudGltZTsNCiAgICB9Ow0KICAgIHZhciBiaWdDb29raWUgPSBsKCJiaWdDb29raWUiKTsNCiAgICBpZiAoR2FtZS5wcmVmcy5zY3JlZW5yZWFkZXIpIHsNCiAgICAgIGJpZ0Nvb2tpZS5hcmlhTGFiZWxsZWRieSA9ICJiaWdDb29raWVMYWJlbCI7DQogICAgICBiaWdDb29raWUuaW5zZXJ0QWRqYWNlbnRIVE1MKA0KICAgICAgICAiYmVmb3JlZW5kIiwNCiAgICAgICAgJzxsYWJlbCBpZD0iYmlnQ29va2llTGFiZWwiIHN0eWxlPSJmb250LXNpemU6MTAwcHggIWltcG9ydGFudDsiIGNsYXNzPSJzck9ubHkiPicgKw0KICAgICAgICAgIGxvYygiQmlnIGNsaWNrYWJsZSBjb29raWUiKSArDQogICAgICAgICAgIjwvbGFiZWw+Ig0KICAgICAgKTsNCiAgICAgIGJpZ0Nvb2tpZS50YWJJbmRleCA9IDE7DQogICAgfQ0KICAgIEdhbWUuQ2xpY2sgPSAwOw0KICAgIEdhbWUubGFzdENsaWNrZWRFbCA9IDA7DQogICAgR2FtZS5jbGlja3NUaGlzU2Vzc2lvbiA9IDA7DQogICAgR2FtZS5jbGlja0Zyb20gPSAwOw0KICAgIEdhbWUuU2Nyb2xsID0gMDsNCiAgICBHYW1lLm1vdXNlRG93biA9IDA7DQogICAgaWYgKCFHYW1lLnRvdWNoRXZlbnRzKSB7DQogICAgICBBZGRFdmVudChiaWdDb29raWUsICJjbGljayIsIEdhbWUuQ2xpY2tDb29raWUpOw0KICAgICAgQWRkRXZlbnQoYmlnQ29va2llLCAibW91c2Vkb3duIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIEdhbWUuQmlnQ29va2llU3RhdGUgPSAxOw0KICAgICAgICBpZiAoR2FtZS5wcmVmcy5jb29raWVzb3VuZCkgew0KICAgICAgICAgIEdhbWUucGxheUNvb2tpZUNsaWNrU291bmQoKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZXZlbnQpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICB9KTsNCiAgICAgIEFkZEV2ZW50KGJpZ0Nvb2tpZSwgIm1vdXNldXAiLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgR2FtZS5CaWdDb29raWVTdGF0ZSA9IDI7DQogICAgICAgIGlmIChldmVudCkgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgIH0pOw0KICAgICAgQWRkRXZlbnQoYmlnQ29va2llLCAibW91c2VvdXQiLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgR2FtZS5CaWdDb29raWVTdGF0ZSA9IDA7DQogICAgICB9KTsNCiAgICAgIEFkZEV2ZW50KGJpZ0Nvb2tpZSwgIm1vdXNlb3ZlciIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICBHYW1lLkJpZ0Nvb2tpZVN0YXRlID0gMjsNCiAgICAgIH0pOw0KICAgICAgQWRkRXZlbnQoZG9jdW1lbnQsICJtb3VzZW1vdmUiLCBHYW1lLkdldE1vdXNlQ29vcmRzKTsNCiAgICAgIEFkZEV2ZW50KGRvY3VtZW50LCAibW91c2Vkb3duIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIEdhbWUubGFzdEFjdGl2aXR5ID0gR2FtZS50aW1lOw0KICAgICAgICBHYW1lLm1vdXNlRG93biA9IDE7DQogICAgICAgIEdhbWUuY2xpY2tGcm9tID0gZXZlbnQudGFyZ2V0Ow0KICAgICAgfSk7DQogICAgICBBZGRFdmVudChkb2N1bWVudCwgIm1vdXNldXAiLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgR2FtZS5sYXN0QWN0aXZpdHkgPSBHYW1lLnRpbWU7DQogICAgICAgIEdhbWUubW91c2VEb3duID0gMDsNCiAgICAgICAgR2FtZS5jbGlja0Zyb20gPSAwOw0KICAgICAgfSk7DQogICAgICBBZGRFdmVudChkb2N1bWVudCwgImNsaWNrIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIEdhbWUubGFzdEFjdGl2aXR5ID0gR2FtZS50aW1lOw0KICAgICAgICBHYW1lLkNsaWNrID0gMTsNCiAgICAgICAgR2FtZS5sYXN0Q2xpY2tlZEVsID0gZXZlbnQudGFyZ2V0Ow0KICAgICAgICBHYW1lLmNsaWNrRnJvbSA9IDA7DQogICAgICB9KTsNCiAgICAgIEdhbWUuaGFuZGxlU2Nyb2xsID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgaWYgKCFlKSBlID0gZXZlbnQ7DQogICAgICAgIEdhbWUuU2Nyb2xsID0gZS5kZXRhaWwgPCAwIHx8IGUud2hlZWxEZWx0YSA+IDAgPyAxIDogLTE7DQogICAgICAgIEdhbWUubGFzdEFjdGl2aXR5ID0gR2FtZS50aW1lOw0KICAgICAgfTsNCiAgICAgIEFkZEV2ZW50KGRvY3VtZW50LCAiRE9NTW91c2VTY3JvbGwiLCBHYW1lLmhhbmRsZVNjcm9sbCk7DQogICAgICBBZGRFdmVudChkb2N1bWVudCwgIm1vdXNld2hlZWwiLCBHYW1lLmhhbmRsZVNjcm9sbCk7DQogICAgfSBlbHNlIHsNCiAgICAgIC8vdG91Y2ggZXZlbnRzDQogICAgICBBZGRFdmVudChiaWdDb29raWUsICJ0b3VjaGVuZCIsIEdhbWUuQ2xpY2tDb29raWUpOw0KICAgICAgQWRkRXZlbnQoYmlnQ29va2llLCAidG91Y2hzdGFydCIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICBHYW1lLkJpZ0Nvb2tpZVN0YXRlID0gMTsNCiAgICAgICAgaWYgKGV2ZW50KSBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgfSk7DQogICAgICBBZGRFdmVudChiaWdDb29raWUsICJ0b3VjaGVuZCIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICBHYW1lLkJpZ0Nvb2tpZVN0YXRlID0gMDsNCiAgICAgICAgaWYgKGV2ZW50KSBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgfSk7DQogICAgICAvL0FkZEV2ZW50KGRvY3VtZW50LCd0b3VjaG1vdmUnLEdhbWUuR2V0TW91c2VDb29yZHMpOw0KICAgICAgQWRkRXZlbnQoZG9jdW1lbnQsICJtb3VzZW1vdmUiLCBHYW1lLkdldE1vdXNlQ29vcmRzKTsNCiAgICAgIEFkZEV2ZW50KGRvY3VtZW50LCAidG91Y2hzdGFydCIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICBHYW1lLmxhc3RBY3Rpdml0eSA9IEdhbWUudGltZTsNCiAgICAgICAgR2FtZS5tb3VzZURvd24gPSAxOw0KICAgICAgfSk7DQogICAgICBBZGRFdmVudChkb2N1bWVudCwgInRvdWNoZW5kIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIEdhbWUubGFzdEFjdGl2aXR5ID0gR2FtZS50aW1lOw0KICAgICAgICBHYW1lLm1vdXNlRG93biA9IDA7DQogICAgICB9KTsNCiAgICAgIEFkZEV2ZW50KGRvY3VtZW50LCAidG91Y2hlbmQiLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgR2FtZS5sYXN0QWN0aXZpdHkgPSBHYW1lLnRpbWU7DQogICAgICAgIEdhbWUuQ2xpY2sgPSAxOw0KICAgICAgfSk7DQogICAgfQ0KDQogICAgR2FtZS5rZXlzID0gW107DQogICAgQWRkRXZlbnQod2luZG93LCAia2V5dXAiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgR2FtZS5sYXN0QWN0aXZpdHkgPSBHYW1lLnRpbWU7DQogICAgICBpZiAoZS5rZXlDb2RlID09IDI3KSB7DQogICAgICAgIGlmIChHYW1lLnByb21wdE9uICYmICFHYW1lLnByb21wdE5vQ2xvc2UpIHsNCiAgICAgICAgICBHYW1lLkNsb3NlUHJvbXB0KCk7DQogICAgICAgICAgUGxheVNvdW5kKCJzbmQvdGlja09mZi5tcDMiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA+IDApIEdhbWUuQXNjZW5kVGltZXIgPSBHYW1lLkFzY2VuZER1cmF0aW9uOw0KICAgICAgfSAvL2VzYyBjbG9zZXMgcHJvbXB0DQogICAgICBpZiAoR2FtZS5wcm9tcHRPbikgew0KICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSBHYW1lLkNvbmZpcm1Qcm9tcHQoKTsgLy9lbnRlciBjb25maXJtcyBwcm9tcHQNCiAgICAgIH0NCiAgICAgIEdhbWUua2V5c1tlLmtleUNvZGVdID0gMDsNCiAgICB9KTsNCiAgICBBZGRFdmVudCh3aW5kb3csICJrZXlkb3duIiwgZnVuY3Rpb24gKGUpIHsNCiAgICAgIGlmIChHYW1lLnByb21wdE9uKSB7DQogICAgICAgIGlmIChlLmtleUNvZGUgPT0gOSkgew0KICAgICAgICAgIC8vdGFiIHRvIHNoaWZ0IHRocm91Z2ggcHJvbXB0IGJ1dHRvbnMNCiAgICAgICAgICBpZiAoZS5zaGlmdEtleSkgR2FtZS5Gb2N1c1Byb21wdE9wdGlvbigtMSk7DQogICAgICAgICAgZWxzZSBHYW1lLkZvY3VzUHJvbXB0T3B0aW9uKDEpOw0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKCFHYW1lLk9uQXNjZW5kICYmIEdhbWUuQXNjZW5kVGltZXIgPT0gMCkgew0KICAgICAgICBpZiAoZS5jdHJsS2V5ICYmIGUua2V5Q29kZSA9PSA4Mykgew0KICAgICAgICAgIEdhbWUudG9TYXZlID0gdHJ1ZTsNCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIH0gLy9jdHJsLXMgc2F2ZXMgdGhlIGdhbWUNCiAgICAgICAgZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUua2V5Q29kZSA9PSA3OSkgew0KICAgICAgICAgIEdhbWUuSW1wb3J0U2F2ZSgpOw0KICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgfSAvL2N0cmwtbyBvcGVucyB0aGUgaW1wb3J0IG1lbnUNCiAgICAgIH0NCiAgICAgIGlmICgoZS5rZXlDb2RlID09IDE2IHx8IGUua2V5Q29kZSA9PSAxNykgJiYgR2FtZS50b29sdGlwLmR5bmFtaWMpDQogICAgICAgIEdhbWUudG9vbHRpcC51cGRhdGUoKTsNCiAgICAgIEdhbWUua2V5c1tlLmtleUNvZGVdID0gMTsNCiAgICAgIGlmIChlLmtleUNvZGUgPT0gOSkgR2FtZS5rZXlzID0gW107IC8vcmVzZXQga2V5cyBvbiB0YWIgcHJlc3MNCiAgICB9KTsNCg0KICAgIEFkZEV2ZW50KHdpbmRvdywgInZpc2liaWxpdHljaGFuZ2UiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgR2FtZS5rZXlzID0gW107IC8vcmVzZXQgYWxsIGtleSBwcmVzc2VkIG9uIHZpc2liaWxpdHkgY2hhbmdlIChzaG91bGQgaGVscCBwcmV2ZW50IGN0cmwgc3RpbGwgYmVpbmcgZG93biBhZnRlciBjdHJsLXRhYikNCiAgICB9KTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlDUFMgUkVDQUxDVUxBVE9SDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLmhlYXZlbmx5UG93ZXIgPSAxOyAvL2hvdyBtYW55IENwUyBwZXJjZW50cyBhIHNpbmdsZSBoZWF2ZW5seSBjaGlwIGdpdmVzDQogICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICBHYW1lLmNvb2tpZXNQc0J5VHlwZSA9IHt9Ow0KICAgIEdhbWUuY29va2llc011bHRCeVR5cGUgPSB7fTsNCiAgICAvL2Rpc3BsYXkgYmFycyB3aXRoIGh0dHA6Ly9jb2RlcGVuLmlvL2Fub24vcGVuL3dhR3lFSg0KICAgIEdhbWUuZWZmcyA9IHt9Ow0KICAgIEdhbWUuZWZmID0gZnVuY3Rpb24gKG5hbWUsIGRlZikgew0KICAgICAgaWYgKHR5cGVvZiBHYW1lLmVmZnNbbmFtZV0gPT09ICJ1bmRlZmluZWQiKQ0KICAgICAgICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gInVuZGVmaW5lZCIgPyAxIDogZGVmOw0KICAgICAgZWxzZSByZXR1cm4gR2FtZS5lZmZzW25hbWVdOw0KICAgIH07DQoNCiAgICBHYW1lLkNhbGN1bGF0ZUdhaW5zID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5jb29raWVzUHMgPSAwOw0KICAgICAgdmFyIG11bHQgPSAxOw0KICAgICAgLy9hZGQgdXAgZWZmZWN0IGJvbnVzZXMgZnJvbSBidWlsZGluZyBtaW5pZ2FtZXMNCiAgICAgIHZhciBlZmZzID0ge307DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLm1pbmlnYW1lTG9hZGVkICYmIEdhbWUuT2JqZWN0c1tpXS5taW5pZ2FtZS5lZmZzKSB7DQogICAgICAgICAgdmFyIG15RWZmcyA9IEdhbWUuT2JqZWN0c1tpXS5taW5pZ2FtZS5lZmZzOw0KICAgICAgICAgIGZvciAodmFyIGlpIGluIG15RWZmcykgew0KICAgICAgICAgICAgaWYgKGVmZnNbaWldKSBlZmZzW2lpXSAqPSBteUVmZnNbaWldOw0KICAgICAgICAgICAgZWxzZSBlZmZzW2lpXSA9IG15RWZmc1tpaV07DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBHYW1lLmVmZnMgPSBlZmZzOw0KDQogICAgICBpZiAoR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEpDQogICAgICAgIG11bHQgKz0NCiAgICAgICAgICBwYXJzZUZsb2F0KEdhbWUucHJlc3RpZ2UpICoNCiAgICAgICAgICAwLjAxICoNCiAgICAgICAgICBHYW1lLmhlYXZlbmx5UG93ZXIgKg0KICAgICAgICAgIEdhbWUuR2V0SGVhdmVubHlNdWx0aXBsaWVyKCk7DQoNCiAgICAgIG11bHQgKj0gR2FtZS5lZmYoImNwcyIpOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIkhlcmFsZHMiKSAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkNCiAgICAgICAgbXVsdCAqPSAxICsgMC4wMSAqIEdhbWUuaGVyYWxkczsNCg0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmNvb2tpZVVwZ3JhZGVzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuY29va2llVXBncmFkZXNbaV07DQogICAgICAgIGlmIChHYW1lLkhhcyhtZS5uYW1lKSkgew0KICAgICAgICAgIG11bHQgKj0NCiAgICAgICAgICAgIDEgKw0KICAgICAgICAgICAgKHR5cGVvZiBtZS5wb3dlciA9PT0gImZ1bmN0aW9uIiA/IG1lLnBvd2VyKG1lKSA6IG1lLnBvd2VyKSAqIDAuMDE7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgaWYgKEdhbWUuSGFzKCJTcGVjaWFsaXplZCBjaG9jb2xhdGUgY2hpcHMiKSkgbXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJEZXNpZ25lciBjb2NvYSBiZWFucyIpKSBtdWx0ICo9IDEuMDI7DQogICAgICBpZiAoR2FtZS5IYXMoIlVuZGVyd29ybGQgb3ZlbnMiKSkgbXVsdCAqPSAxLjAzOw0KICAgICAgaWYgKEdhbWUuSGFzKCJFeG90aWMgbnV0cyIpKSBtdWx0ICo9IDEuMDQ7DQogICAgICBpZiAoR2FtZS5IYXMoIkFyY2FuZSBzdWdhciIpKSBtdWx0ICo9IDEuMDU7DQoNCiAgICAgIGlmIChHYW1lLkhhcygiSW5jcmVhc2VkIG1lcnJpbmVzcyIpKSBtdWx0ICo9IDEuMTU7DQogICAgICBpZiAoR2FtZS5IYXMoIkltcHJvdmVkIGpvbGxpbmVzcyIpKSBtdWx0ICo9IDEuMTU7DQogICAgICBpZiAoR2FtZS5IYXMoIkEgbHVtcCBvZiBjb2FsIikpIG11bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQW4gaXRjaHkgc3dlYXRlciIpKSBtdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIlNhbnRhJ3MgZG9taW5pb24iKSkgbXVsdCAqPSAxLjI7DQoNCiAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSAjMTAwIikpIG11bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSAjMTAxIikpIG11bHQgKj0gMS4wNzsNCg0KICAgICAgaWYgKEdhbWUuSGFzKCJEcmFnb24gc2NhbGUiKSkgbXVsdCAqPSAxLjAzOw0KDQogICAgICB2YXIgYnVpbGRNdWx0ID0gMTsNCiAgICAgIGlmIChHYW1lLmhhc0dvZCkgew0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImFzY2V0aWNpc20iKTsNCiAgICAgICAgaWYgKGdvZEx2bCA9PSAxKSBtdWx0ICo9IDEuMTU7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAyKSBtdWx0ICo9IDEuMTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIG11bHQgKj0gMS4wNTsNCg0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImFnZXMiKTsNCiAgICAgICAgaWYgKGdvZEx2bCA9PSAxKQ0KICAgICAgICAgIG11bHQgKj0NCiAgICAgICAgICAgIDEgKw0KICAgICAgICAgICAgMC4xNSAqIE1hdGguc2luKChEYXRlLm5vdygpIC8gMTAwMCAvICg2MCAqIDYwICogMykpICogTWF0aC5QSSAqIDIpOw0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikNCiAgICAgICAgICBtdWx0ICo9DQogICAgICAgICAgICAxICsNCiAgICAgICAgICAgIDAuMTUgKiBNYXRoLnNpbigoRGF0ZS5ub3coKSAvIDEwMDAgLyAoNjAgKiA2MCAqIDEyKSkgKiBNYXRoLlBJICogMik7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKQ0KICAgICAgICAgIG11bHQgKj0NCiAgICAgICAgICAgIDEgKw0KICAgICAgICAgICAgMC4xNSAqIE1hdGguc2luKChEYXRlLm5vdygpIC8gMTAwMCAvICg2MCAqIDYwICogMjQpKSAqIE1hdGguUEkgKiAyKTsNCg0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImRlY2FkZW5jZSIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIGJ1aWxkTXVsdCAqPSAwLjkzOw0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgYnVpbGRNdWx0ICo9IDAuOTU7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBidWlsZE11bHQgKj0gMC45ODsNCg0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImluZHVzdHJ5Iik7DQogICAgICAgIGlmIChnb2RMdmwgPT0gMSkgYnVpbGRNdWx0ICo9IDEuMTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIGJ1aWxkTXVsdCAqPSAxLjA2Ow0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgYnVpbGRNdWx0ICo9IDEuMDM7DQoNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJsYWJvciIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIGJ1aWxkTXVsdCAqPSAwLjk3Ow0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgYnVpbGRNdWx0ICo9IDAuOTg7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBidWlsZE11bHQgKj0gMC45OTsNCiAgICAgIH0NCg0KICAgICAgaWYgKEdhbWUuSGFzKCJTYW50YSdzIGxlZ2FjeSIpKSBtdWx0ICo9IDEgKyAoR2FtZS5zYW50YUxldmVsICsgMSkgKiAwLjAzOw0KDQogICAgICBHYW1lLm1pbGtQcm9ncmVzcyA9IEdhbWUuQWNoaWV2ZW1lbnRzT3duZWQgLyAyNTsNCiAgICAgIHZhciBtaWxrTXVsdCA9IDE7DQogICAgICBpZiAoR2FtZS5IYXMoIlNhbnRhJ3MgbWlsayBhbmQgY29va2llcyIpKSBtaWxrTXVsdCAqPSAxLjA1Ow0KICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdCcmVhdGggb2YgTWlsaycpKSBtaWxrTXVsdCo9MS4wNTsNCiAgICAgIG1pbGtNdWx0ICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJCcmVhdGggb2YgTWlsayIpICogMC4wNTsNCiAgICAgIGlmIChHYW1lLmhhc0dvZCkgew0KICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoIm1vdGhlciIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIG1pbGtNdWx0ICo9IDEuMTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG1pbGtNdWx0ICo9IDEuMDU7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBtaWxrTXVsdCAqPSAxLjAzOw0KICAgICAgfQ0KICAgICAgbWlsa011bHQgKj0gR2FtZS5lZmYoIm1pbGsiKTsNCg0KICAgICAgdmFyIGNhdE11bHQgPSAxOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBoZWxwZXJzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4xICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiB3b3JrZXJzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4xMjUgKiBtaWxrTXVsdDsNCiAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIGVuZ2luZWVycyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMTUgKiBtaWxrTXVsdDsNCiAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIG92ZXJzZWVycyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMTc1ICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBtYW5hZ2VycyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMiAqIG1pbGtNdWx0Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYWNjb3VudGFudHMiKSkNCiAgICAgICAgY2F0TXVsdCAqPSAxICsgR2FtZS5taWxrUHJvZ3Jlc3MgKiAwLjIgKiBtaWxrTXVsdDsNCiAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIHNwZWNpYWxpc3RzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4yICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBleHBlcnRzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4yICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBjb25zdWx0YW50cyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMiAqIG1pbGtNdWx0Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYXNzaXN0YW50cyB0byB0aGUgcmVnaW9uYWwgbWFuYWdlciIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMTc1ICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBtYXJrZXRlZXJzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4xNSAqIG1pbGtNdWx0Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYW5hbHlzdHMiKSkNCiAgICAgICAgY2F0TXVsdCAqPSAxICsgR2FtZS5taWxrUHJvZ3Jlc3MgKiAwLjEyNSAqIG1pbGtNdWx0Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gZXhlY3V0aXZlcyIpKQ0KICAgICAgICBjYXRNdWx0ICo9IDEgKyBHYW1lLm1pbGtQcm9ncmVzcyAqIDAuMTE1ICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBhZG1pbnMiKSkNCiAgICAgICAgY2F0TXVsdCAqPSAxICsgR2FtZS5taWxrUHJvZ3Jlc3MgKiAwLjExICogbWlsa011bHQ7DQogICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBhbmdlbHMiKSkNCiAgICAgICAgY2F0TXVsdCAqPSAxICsgR2FtZS5taWxrUHJvZ3Jlc3MgKiAwLjEgKiBtaWxrTXVsdDsNCiAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSAjMTAzIikpDQogICAgICAgIGNhdE11bHQgKj0gMSArIEdhbWUubWlsa1Byb2dyZXNzICogMC4wNSAqIG1pbGtNdWx0Ow0KDQogICAgICBHYW1lLmNvb2tpZXNNdWx0QnlUeXBlWyJraXR0ZW5zIl0gPSBjYXRNdWx0Ow0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNbaV07DQogICAgICAgIG1lLnN0b3JlZENwcyA9IG1lLmNwcyhtZSk7DQogICAgICAgIGlmIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkNCiAgICAgICAgICBtZS5zdG9yZWRDcHMgKj0gKDEgKyBtZS5sZXZlbCAqIDAuMDEpICogYnVpbGRNdWx0Ow0KICAgICAgICBpZiAoDQogICAgICAgICAgbWUuaWQgPT0gMSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJNaWxraGVscCZyZWc7IGxhY3Rvc2UgaW50b2xlcmFuY2UgcmVsaWVmIHRhYmxldHMiKQ0KICAgICAgICApDQogICAgICAgICAgbWUuc3RvcmVkQ3BzICo9IDEgKyAwLjA1ICogR2FtZS5taWxrUHJvZ3Jlc3MgKiBtaWxrTXVsdDsgLy90aGlzIHVzZWQgdG8gYmUgIm1lLnN0b3JlZENwcyo9MSswLjEqTWF0aC5wb3coY2F0TXVsdC0xLDAuNSkiIHdoaWNoIHdhcy4gaG1tDQogICAgICAgIG1lLnN0b3JlZFRvdGFsQ3BzID0gbWUuYW1vdW50ICogbWUuc3RvcmVkQ3BzOw0KICAgICAgICBHYW1lLmNvb2tpZXNQcyArPSBtZS5zdG9yZWRUb3RhbENwczsNCiAgICAgICAgR2FtZS5jb29raWVzUHNCeVR5cGVbbWUubmFtZV0gPSBtZS5zdG9yZWRUb3RhbENwczsNCiAgICAgIH0NCiAgICAgIC8vY3BzIGZyb20gYnVpbGRpbmdzIG9ubHkNCiAgICAgIEdhbWUuYnVpbGRpbmdDcHMgPSBHYW1lLmNvb2tpZXNQczsNCg0KICAgICAgaWYgKEdhbWUuSGFzKCciZWdnIicpKSB7DQogICAgICAgIEdhbWUuY29va2llc1BzICs9IDk7DQogICAgICAgIEdhbWUuY29va2llc1BzQnlUeXBlWyciZWdnIiddID0gOTsNCiAgICAgIH0gLy8iZWdnIg0KDQogICAgICBtdWx0ICo9IGNhdE11bHQ7DQoNCiAgICAgIHZhciBlZ2dNdWx0ID0gMTsNCiAgICAgIGlmIChHYW1lLkhhcygiQ2hpY2tlbiBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJEdWNrIGVnZyIpKSBlZ2dNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIlR1cmtleSBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJRdWFpbCBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJSb2JpbiBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJPc3RyaWNoIGVnZyIpKSBlZ2dNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIkNhc3Nvd2FyeSBlZ2ciKSkgZWdnTXVsdCAqPSAxLjAxOw0KICAgICAgaWYgKEdhbWUuSGFzKCJTYWxtb24gcm9lIikpIGVnZ011bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiRnJvZ3NwYXduIikpIGVnZ011bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiU2hhcmsgZWdnIikpIGVnZ011bHQgKj0gMS4wMTsNCiAgICAgIGlmIChHYW1lLkhhcygiVHVydGxlIGVnZyIpKSBlZ2dNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIkFudCBsYXJ2YSIpKSBlZ2dNdWx0ICo9IDEuMDE7DQogICAgICBpZiAoR2FtZS5IYXMoIkNlbnR1cnkgZWdnIikpIHsNCiAgICAgICAgLy90aGUgYm9vc3QgaW5jcmVhc2VzIGEgbGl0dGxlIGV2ZXJ5IGRheSwgd2l0aCBkaW1pbmlzaGluZyByZXR1cm5zIHVwIHRvICsxMCUgb24gdGhlIDEwMHRoIGRheQ0KICAgICAgICB2YXIgZGF5ID0NCiAgICAgICAgICAoTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIEdhbWUuc3RhcnREYXRlKSAvIDEwMDAgLyAxMCkgKiAxMCkgLw0KICAgICAgICAgIDYwIC8NCiAgICAgICAgICA2MCAvDQogICAgICAgICAgMjQ7DQogICAgICAgIGRheSA9IE1hdGgubWluKGRheSwgMTAwKTsNCiAgICAgICAgZWdnTXVsdCAqPSAxICsgKDEgLSBNYXRoLnBvdygxIC0gZGF5IC8gMTAwLCAzKSkgKiAwLjE7DQogICAgICB9DQoNCiAgICAgIEdhbWUuY29va2llc011bHRCeVR5cGVbImVnZ3MiXSA9IGVnZ011bHQ7DQogICAgICBtdWx0ICo9IGVnZ011bHQ7DQoNCiAgICAgIGlmIChHYW1lLkhhcygiU3VnYXIgYmFraW5nIikpDQogICAgICAgIG11bHQgKj0gMSArIE1hdGgubWluKDEwMCwgR2FtZS5sdW1wcykgKiAwLjAxOw0KDQogICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ1JhZGlhbnQgQXBwZXRpdGUnKSkgbXVsdCo9MjsNCiAgICAgIG11bHQgKj0gMSArIEdhbWUuYXVyYU11bHQoIlJhZGlhbnQgQXBwZXRpdGUiKTsNCg0KICAgICAgdmFyIHJhd0Nvb2tpZXNQcyA9IEdhbWUuY29va2llc1BzICogbXVsdDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5DcHNBY2hpZXZlbWVudHMpIHsNCiAgICAgICAgaWYgKHJhd0Nvb2tpZXNQcyA+PSBHYW1lLkNwc0FjaGlldmVtZW50c1tpXS50aHJlc2hvbGQpDQogICAgICAgICAgR2FtZS5XaW4oR2FtZS5DcHNBY2hpZXZlbWVudHNbaV0ubmFtZSk7DQogICAgICB9DQogICAgICBHYW1lLmNvb2tpZXNQc1JhdyA9IHJhd0Nvb2tpZXNQczsNCiAgICAgIEdhbWUuY29va2llc1BzUmF3SGlnaGVzdCA9IE1hdGgubWF4KA0KICAgICAgICBHYW1lLmNvb2tpZXNQc1Jhd0hpZ2hlc3QsDQogICAgICAgIHJhd0Nvb2tpZXNQcw0KICAgICAgKTsNCg0KICAgICAgdmFyIG4gPSBHYW1lLnNoaW1tZXJUeXBlc1siZ29sZGVuIl0ubjsNCiAgICAgIHZhciBhdXJhTXVsdCA9IEdhbWUuYXVyYU11bHQoIkRyYWdvbidzIEZvcnR1bmUiKTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7DQogICAgICAgIG11bHQgKj0gMSArIGF1cmFNdWx0ICogMS4yMzsNCiAgICAgIH0NCg0KICAgICAgbmFtZSA9IEdhbWUuYmFrZXJ5TmFtZS50b0xvd2VyQ2FzZSgpOw0KICAgICAgaWYgKG5hbWUgPT0gIm9ydGVpbCIpIG11bHQgKj0gMC45OTsNCiAgICAgIGVsc2UgaWYgKG5hbWUgPT0gIm9ydGllbCIpIG11bHQgKj0gMC45ODsgLy9vciBzbyBoZWxwIG1lDQoNCiAgICAgIHZhciBzdWNraW5nID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS53cmlua2xlcnMpIHsNCiAgICAgICAgaWYgKEdhbWUud3JpbmtsZXJzW2ldLnBoYXNlID09IDIpIHsNCiAgICAgICAgICBzdWNraW5nKys7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHZhciBzdWNrUmF0ZSA9IDEgLyAyMDsgLy9lYWNoIHdyaW5rbGVyIGVhdHMgYSB0d2VudGlldGggb2YgeW91ciBDcFMNCiAgICAgIHN1Y2tSYXRlICo9IEdhbWUuZWZmKCJ3cmlua2xlckVhdCIpOw0KDQogICAgICBHYW1lLmNwc1N1Y2tlZCA9IHN1Y2tpbmcgKiBzdWNrUmF0ZTsNCg0KICAgICAgaWYgKEdhbWUuSGFzKCJFbGRlciBDb3ZlbmFudCIpKSBtdWx0ICo9IDAuOTU7DQoNCiAgICAgIGlmIChHYW1lLkhhcygiR29sZGVuIHN3aXRjaCBbb2ZmXSIpKSB7DQogICAgICAgIHZhciBnb2xkZW5Td2l0Y2hNdWx0ID0gMS41Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIlJlc2lkdWFsIGx1Y2siKSkgew0KICAgICAgICAgIHZhciB1cGdyYWRlcyA9IEdhbWUuZ29sZGVuQ29va2llVXBncmFkZXM7DQogICAgICAgICAgZm9yICh2YXIgaSBpbiB1cGdyYWRlcykgew0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKHVwZ3JhZGVzW2ldKSkgZ29sZGVuU3dpdGNoTXVsdCArPSAwLjE7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIG11bHQgKj0gZ29sZGVuU3dpdGNoTXVsdDsNCiAgICAgIH0NCiAgICAgIGlmIChHYW1lLkhhcygiU2hpbW1lcmluZyB2ZWlsIFtvZmZdIikpIHsNCiAgICAgICAgbXVsdCAqPSAxICsgR2FtZS5nZXRWZWlsQm9vc3QoKTsNCiAgICAgIH0NCiAgICAgIGlmIChHYW1lLkhhcygiTWFnaWMgc2hlbmFuaWdhbnMiKSkgbXVsdCAqPSAxMDAwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJPY2N1bHQgb2JzdHJ1Y3Rpb24iKSkgbXVsdCAqPSAwOw0KDQogICAgICBHYW1lLmNvb2tpZXNQcyA9IEdhbWUucnVuTW9kSG9va09uVmFsdWUoImNwcyIsIEdhbWUuY29va2llc1BzKTsNCg0KICAgICAgLy9jcHMgd2l0aG91dCBnb2xkZW4gY29va2llIGVmZmVjdHMNCiAgICAgIEdhbWUudW5idWZmZWRDcHMgPSBHYW1lLmNvb2tpZXNQcyAqIG11bHQ7DQoNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5idWZmcykgew0KICAgICAgICBpZiAodHlwZW9mIEdhbWUuYnVmZnNbaV0ubXVsdENwUyAhPT0gInVuZGVmaW5lZCIpDQogICAgICAgICAgbXVsdCAqPSBHYW1lLmJ1ZmZzW2ldLm11bHRDcFM7DQogICAgICB9DQoNCiAgICAgIEdhbWUuZ2xvYmFsQ3BzTXVsdCA9IG11bHQ7DQogICAgICBHYW1lLmNvb2tpZXNQcyAqPSBHYW1lLmdsb2JhbENwc011bHQ7DQoNCiAgICAgIC8vaWYgKEdhbWUuaGFzQnVmZignQ3Vyc2VkIGZpbmdlcicpKSBHYW1lLmNvb2tpZXNQcz0wOw0KDQogICAgICBHYW1lLmNvbXB1dGVkTW91c2VDcHMgPSBHYW1lLm1vdXNlQ3BzKCk7DQoNCiAgICAgIEdhbWUuY29tcHV0ZUx1bXBUaW1lcygpOw0KDQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAwOw0KICAgIH07DQoNCiAgICBHYW1lLmRyb3BSYXRlTXVsdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciByYXRlID0gMTsNCiAgICAgIGlmIChHYW1lLkhhcygiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIpKSByYXRlICo9IDEuMDM7DQogICAgICBpZiAoR2FtZS5IYXMoIkRyYWdvbiB0ZWRkeSBiZWFyIikpIHJhdGUgKj0gMS4wMzsNCiAgICAgIHJhdGUgKj0gR2FtZS5lZmYoIml0ZW1Ecm9wcyIpOw0KICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdNaW5kIE92ZXIgTWF0dGVyJykpIHJhdGUqPTEuMjU7DQogICAgICByYXRlICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJNaW5kIE92ZXIgTWF0dGVyIikgKiAwLjI1Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJTYW50YSdzIGJvdHRvbWxlc3MgYmFnIikpIHJhdGUgKj0gMS4xOw0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLkhhcygiQ29zbWljIGJlZ2lubmVyJ3MgbHVjayIpICYmDQogICAgICAgICFHYW1lLkhhcygiSGVhdmVubHkgY2hpcCBzZWNyZXQiKQ0KICAgICAgKQ0KICAgICAgICByYXRlICo9IDU7DQogICAgICByZXR1cm4gcmF0ZTsNCiAgICB9Ow0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlTSElNTUVSUyAoR09MREVOIENPT0tJRVMgJiBTVUNIKQ0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuc2hpbW1lcnNMID0gbCgic2hpbW1lcnMiKTsNCiAgICBHYW1lLnNoaW1tZXJzID0gW107IC8vYWxsIHNoaW1tZXJzIGN1cnJlbnRseSBvbiB0aGUgc2NyZWVuDQogICAgR2FtZS5zaGltbWVyc04gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7DQogICAgR2FtZS5zaGltbWVyID0gZnVuY3Rpb24gKHR5cGUsIG9iaiwgbm9Db3VudCkgew0KICAgICAgdGhpcy50eXBlID0gdHlwZTsNCg0KICAgICAgdGhpcy5sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICB0aGlzLmwuY2xhc3NOYW1lID0gInNoaW1tZXIiOw0KICAgICAgaWYgKCFHYW1lLnRvdWNoRXZlbnRzKSB7DQogICAgICAgIEFkZEV2ZW50KA0KICAgICAgICAgIHRoaXMubCwNCiAgICAgICAgICAiY2xpY2siLA0KICAgICAgICAgIChmdW5jdGlvbiAod2hhdCkgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgICB3aGF0LnBvcChldmVudCk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0pKHRoaXMpDQogICAgICAgICk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBBZGRFdmVudCgNCiAgICAgICAgICB0aGlzLmwsDQogICAgICAgICAgInRvdWNoZW5kIiwNCiAgICAgICAgICAoZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgICAgd2hhdC5wb3AoZXZlbnQpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KSh0aGlzKQ0KICAgICAgICApOw0KICAgICAgfSAvL3RvdWNoIGV2ZW50cw0KDQogICAgICB0aGlzLnggPSAwOw0KICAgICAgdGhpcy55ID0gMDsNCiAgICAgIHRoaXMuaWQgPSBHYW1lLnNoaW1tZXJzTjsNCg0KICAgICAgdGhpcy5mb3JjZSA9ICIiOw0KICAgICAgdGhpcy5mb3JjZU9iaiA9IG9iaiB8fCAwOw0KICAgICAgaWYgKHRoaXMuZm9yY2VPYmoudHlwZSkgdGhpcy5mb3JjZSA9IHRoaXMuZm9yY2VPYmoudHlwZTsNCiAgICAgIHRoaXMubm9Db3VudCA9IG5vQ291bnQ7DQogICAgICBpZiAoIXRoaXMubm9Db3VudCkgew0KICAgICAgICBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdLm4rKzsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgIH0NCg0KICAgICAgdGhpcy5pbml0KCk7DQoNCiAgICAgIEdhbWUuc2hpbW1lcnNMLmFwcGVuZENoaWxkKHRoaXMubCk7DQogICAgICBHYW1lLnNoaW1tZXJzLnB1c2godGhpcyk7DQogICAgICBHYW1lLnNoaW1tZXJzTisrOw0KICAgIH07DQogICAgR2FtZS5zaGltbWVyLnByb3RvdHlwZS5pbml0ID0NCiAgICAgIGZ1bmN0aW9uICgpIC8vZXhlY3V0ZWQgd2hlbiB0aGUgc2hpbW1lciBpcyBjcmVhdGVkDQogICAgICB7DQogICAgICAgIEdhbWUuc2hpbW1lclR5cGVzW3RoaXMudHlwZV0uaW5pdEZ1bmModGhpcyk7DQogICAgICB9Ow0KICAgIEdhbWUuc2hpbW1lci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkgLy9leGVjdXRlZCBldmVyeSBmcmFtZQ0KICAgIHsNCiAgICAgIEdhbWUuc2hpbW1lclR5cGVzW3RoaXMudHlwZV0udXBkYXRlRnVuYyh0aGlzKTsNCiAgICB9Ow0KICAgIEdhbWUuc2hpbW1lci5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKA0KICAgICAgZXZlbnQgLy9leGVjdXRlZCB3aGVuIHRoZSBzaGltbWVyIGlzIHBvcHBlZCBieSB0aGUgcGxheWVyDQogICAgKSB7DQogICAgICBpZiAoZXZlbnQpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICBHYW1lLmxvc2VTaGltbWVyaW5nVmVpbCgic2hpbW1lciIpOw0KICAgICAgR2FtZS5DbGljayA9IDA7DQogICAgICBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdLnBvcEZ1bmModGhpcyk7DQogICAgfTsNCiAgICBHYW1lLnNoaW1tZXIucHJvdG90eXBlLmRpZSA9DQogICAgICBmdW5jdGlvbiAoKSAvL2V4ZWN1dGVkIGFmdGVyIHRoZSBzaGltbWVyIGRpc2FwcGVhcnMgKGZyb20gb2xkIGFnZSBvciBwb3BwaW5nKQ0KICAgICAgew0KICAgICAgICBpZiAoR2FtZS5zaGltbWVyVHlwZXNbdGhpcy50eXBlXS5zcGF3bnNPblRpbWVyICYmIHRoaXMuc3Bhd25MZWFkKSB7DQogICAgICAgICAgLy9pZiB0aGlzIHdhcyB0aGUgc3Bhd24gbGVhZCBmb3IgdGhpcyBzaGltbWVyIHR5cGUsIHNldCB0aGUgc2hpbW1lciB0eXBlJ3MgInNwYXduZWQiIHRvIDAgYW5kIHJlc3RhcnQgaXRzIHNwYXduIHRpbWVyDQogICAgICAgICAgdmFyIHR5cGUgPSBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdOw0KICAgICAgICAgIHR5cGUudGltZSA9IDA7DQogICAgICAgICAgdHlwZS5zcGF3bmVkID0gMDsNCiAgICAgICAgICB0eXBlLm1pblRpbWUgPSB0eXBlLmdldE1pblRpbWUodGhpcyk7DQogICAgICAgICAgdHlwZS5tYXhUaW1lID0gdHlwZS5nZXRNYXhUaW1lKHRoaXMpOw0KICAgICAgICB9DQogICAgICAgIEdhbWUuc2hpbW1lcnNMLnJlbW92ZUNoaWxkKHRoaXMubCk7DQogICAgICAgIGlmIChHYW1lLnNoaW1tZXJzLmluZGV4T2YodGhpcykgIT0gLTEpDQogICAgICAgICAgR2FtZS5zaGltbWVycy5zcGxpY2UoR2FtZS5zaGltbWVycy5pbmRleE9mKHRoaXMpLCAxKTsNCiAgICAgICAgaWYgKCF0aGlzLm5vQ291bnQpIHsNCiAgICAgICAgICBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdLm4gPSBNYXRoLm1heCgNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICBHYW1lLnNoaW1tZXJUeXBlc1t0aGlzLnR5cGVdLm4gLSAxDQogICAgICAgICAgKTsNCiAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICB9DQogICAgICB9Ow0KDQogICAgR2FtZS51cGRhdGVTaGltbWVycyA9DQogICAgICBmdW5jdGlvbiAoKSAvL3J1biBzaGltbWVyIGZ1bmN0aW9ucywga2lsbCBvdmVydGltZWQgc2hpbW1lcnMgYW5kIHNwYXduIG5ldyBvbmVzDQogICAgICB7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5zaGltbWVycykgew0KICAgICAgICAgIEdhbWUuc2hpbW1lcnNbaV0udXBkYXRlKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvL2Nvb2tpZSBzdG9ybSENCiAgICAgICAgaWYgKEdhbWUuaGFzQnVmZigiQ29va2llIHN0b3JtIikgJiYgTWF0aC5yYW5kb20oKSA8IDAuNSkgew0KICAgICAgICAgIHZhciBuZXdTaGltbWVyID0gbmV3IEdhbWUuc2hpbW1lcigNCiAgICAgICAgICAgICJnb2xkZW4iLA0KICAgICAgICAgICAgeyB0eXBlOiAiY29va2llIHN0b3JtIGRyb3AiIH0sDQogICAgICAgICAgICAxDQogICAgICAgICAgKTsNCiAgICAgICAgICBuZXdTaGltbWVyLmR1ciA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogNCArIDEpOw0KICAgICAgICAgIG5ld1NoaW1tZXIubGlmZSA9IE1hdGguY2VpbChHYW1lLmZwcyAqIG5ld1NoaW1tZXIuZHVyKTsNCiAgICAgICAgICAvL25ld1NoaW1tZXIuZm9yY2U9J2Nvb2tpZSBzdG9ybSBkcm9wJzsNCiAgICAgICAgICBuZXdTaGltbWVyLnNpemVNdWx0ID0gTWF0aC5yYW5kb20oKSAqIDAuNzUgKyAwLjI1Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy9zcGF3biBzaGltbWVycw0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2hpbW1lclR5cGVzKSB7DQogICAgICAgICAgdmFyIG1lID0gR2FtZS5zaGltbWVyVHlwZXNbaV07DQogICAgICAgICAgaWYgKG1lLnNwYXduc09uVGltZXIgJiYgbWUuc3Bhd25Db25kaXRpb25zKCkpIHsNCiAgICAgICAgICAgIC8vb25seSBydW4gb24gc2hpbW1lciB0eXBlcyB0aGF0IHdvcmsgb24gYSB0aW1lcg0KICAgICAgICAgICAgaWYgKCFtZS5zcGF3bmVkKSB7DQogICAgICAgICAgICAgIC8vbm8gc2hpbW1lciBzcGF3bmVkIGZvciB0aGlzIHR5cGU/IGNoZWNrIHRoZSB0aW1lciBhbmQgdHJ5IHRvIHNwYXduIG9uZQ0KICAgICAgICAgICAgICBtZS50aW1lKys7DQogICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwNCiAgICAgICAgICAgICAgICBNYXRoLnBvdygNCiAgICAgICAgICAgICAgICAgIE1hdGgubWF4KA0KICAgICAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgICAgICAobWUudGltZSAtIG1lLm1pblRpbWUpIC8gKG1lLm1heFRpbWUgLSBtZS5taW5UaW1lKQ0KICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgIDUNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIHZhciBuZXdTaGltbWVyID0gbmV3IEdhbWUuc2hpbW1lcihpKTsNCiAgICAgICAgICAgICAgICBuZXdTaGltbWVyLnNwYXduTGVhZCA9IDE7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgR2FtZS5IYXMoIkRpc3RpbGxlZCBlc3NlbmNlIG9mIHJlZG91YmxlZCBsdWNrIikgJiYNCiAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAwLjAxDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgdmFyIG5ld1NoaW1tZXIgPSBuZXcgR2FtZS5zaGltbWVyKGkpOw0KICAgICAgICAgICAgICAgIG1lLnNwYXduZWQgPSAxOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9Ow0KICAgIEdhbWUua2lsbFNoaW1tZXJzID0NCiAgICAgIGZ1bmN0aW9uICgpIC8vc3RvcCBhbmQgZGVsZXRlIGFsbCBzaGltbWVycyAodXNlZCBvbiByZXNldHRpbmcgZXRjKQ0KICAgICAgew0KICAgICAgICBmb3IgKHZhciBpID0gR2FtZS5zaGltbWVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgIEdhbWUuc2hpbW1lcnNbaV0uZGllKCk7DQogICAgICAgIH0NCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNoaW1tZXJUeXBlcykgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuc2hpbW1lclR5cGVzW2ldOw0KICAgICAgICAgIGlmIChtZS5yZXNldCkgbWUucmVzZXQoKTsNCiAgICAgICAgICBtZS5uID0gMDsNCiAgICAgICAgICBpZiAobWUuc3Bhd25zT25UaW1lcikgew0KICAgICAgICAgICAgbWUudGltZSA9IDA7DQogICAgICAgICAgICBtZS5zcGF3bmVkID0gMDsNCiAgICAgICAgICAgIG1lLm1pblRpbWUgPSBtZS5nZXRNaW5UaW1lKG1lKTsNCiAgICAgICAgICAgIG1lLm1heFRpbWUgPSBtZS5nZXRNYXhUaW1lKG1lKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH07DQoNCiAgICBHYW1lLnNoaW1tZXJUeXBlcyA9IHsNCiAgICAgIC8vaW4gdGhlc2UsICJtZSIgcmVmZXJzIHRvIHRoZSBzaGltbWVyIGl0c2VsZiwgYW5kICJ0aGlzIiB0byB0aGUgc2hpbW1lcidzIHR5cGUgb2JqZWN0DQogICAgICBnb2xkZW46IHsNCiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB0aGlzLmNoYWluID0gMDsNCiAgICAgICAgICB0aGlzLnRvdGFsRnJvbUNoYWluID0gMDsNCiAgICAgICAgICB0aGlzLmxhc3QgPSAiIjsNCiAgICAgICAgfSwNCiAgICAgICAgaW5pdEZ1bmM6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICF0aGlzLnNwYXduZWQgJiYNCiAgICAgICAgICAgIG1lLmZvcmNlICE9ICJjb29raWUgc3Rvcm0gZHJvcCIgJiYNCiAgICAgICAgICAgIEdhbWUuY2hpbWVUeXBlICE9IDAgJiYNCiAgICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZSAhPSAxDQogICAgICAgICAgKQ0KICAgICAgICAgICAgR2FtZS5wbGF5R29sZGVuQ29va2llQ2hpbWUoKTsNCg0KICAgICAgICAgIC8vc2V0IGltYWdlDQogICAgICAgICAgdmFyIGJnUGljID0gImltZy9nb2xkQ29va2llLnBuZyI7DQogICAgICAgICAgdmFyIHBpY1ggPSAwOw0KICAgICAgICAgIHZhciBwaWNZID0gMDsNCg0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICghbWUuZm9yY2VPYmogfHwgIW1lLmZvcmNlT2JqLm5vV3JhdGgpICYmDQogICAgICAgICAgICAoKG1lLmZvcmNlT2JqICYmIG1lLmZvcmNlT2JqLndyYXRoKSB8fA0KICAgICAgICAgICAgICAoR2FtZS5lbGRlcldyYXRoID09IDEgJiYgTWF0aC5yYW5kb20oKSA8IDEgLyAzKSB8fA0KICAgICAgICAgICAgICAoR2FtZS5lbGRlcldyYXRoID09IDIgJiYgTWF0aC5yYW5kb20oKSA8IDIgLyAzKSB8fA0KICAgICAgICAgICAgICBHYW1lLmVsZGVyV3JhdGggPT0gMyB8fA0KICAgICAgICAgICAgICAoR2FtZS5oYXNHb2QgJiYgR2FtZS5oYXNHb2QoInNjb3JuIikpKQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgbWUud3JhdGggPSAxOw0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJoYWxsb3dlZW4iKSBiZ1BpYyA9ICJpbWcvc3Bvb2t5Q29va2llLnBuZyI7DQogICAgICAgICAgICBlbHNlIGJnUGljID0gImltZy93cmF0aENvb2tpZS5wbmciOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBtZS53cmF0aCA9IDA7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJ2YWxlbnRpbmVzIikgew0KICAgICAgICAgICAgYmdQaWMgPSAiaW1nL2hlYXJ0cy5wbmciOw0KICAgICAgICAgICAgcGljWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpOw0KICAgICAgICAgIH0gZWxzZSBpZiAoR2FtZS5zZWFzb24gPT0gImZvb2xzIikgew0KICAgICAgICAgICAgYmdQaWMgPSAiaW1nL2NvbnRyYWN0LnBuZyI7DQogICAgICAgICAgICBpZiAobWUud3JhdGgpIGJnUGljID0gImltZy93cmF0aENvbnRyYWN0LnBuZyI7DQogICAgICAgICAgfSBlbHNlIGlmIChHYW1lLnNlYXNvbiA9PSAiZWFzdGVyIikgew0KICAgICAgICAgICAgYmdQaWMgPSAiaW1nL2J1bm5pZXMucG5nIjsNCiAgICAgICAgICAgIHBpY1ggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KTsNCiAgICAgICAgICAgIHBpY1kgPSAwOw0KICAgICAgICAgICAgaWYgKG1lLndyYXRoKSBwaWNZID0gMTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBtZS54ID0NCiAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKg0KICAgICAgICAgICAgICAgIE1hdGgubWF4KDAsIEdhbWUuYm91bmRzLnJpZ2h0IC0gMzAwIC0gR2FtZS5ib3VuZHMubGVmdCAtIDEyOCkgKw0KICAgICAgICAgICAgICAgIEdhbWUuYm91bmRzLmxlZnQgKw0KICAgICAgICAgICAgICAgIDY0DQogICAgICAgICAgICApIC0gNjQ7DQogICAgICAgICAgbWUueSA9DQogICAgICAgICAgICBNYXRoLmZsb29yKA0KICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpICoNCiAgICAgICAgICAgICAgICBNYXRoLm1heCgwLCBHYW1lLmJvdW5kcy5ib3R0b20gLSBHYW1lLmJvdW5kcy50b3AgLSAxMjgpICsNCiAgICAgICAgICAgICAgICBHYW1lLmJvdW5kcy50b3AgKw0KICAgICAgICAgICAgICAgIDY0DQogICAgICAgICAgICApIC0gNjQ7DQogICAgICAgICAgbWUubC5zdHlsZS5sZWZ0ID0gbWUueCArICJweCI7DQogICAgICAgICAgbWUubC5zdHlsZS50b3AgPSBtZS55ICsgInB4IjsNCiAgICAgICAgICBtZS5sLnN0eWxlLndpZHRoID0gIjk2cHgiOw0KICAgICAgICAgIG1lLmwuc3R5bGUuaGVpZ2h0ID0gIjk2cHgiOw0KICAgICAgICAgIG1lLmwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gInVybCgiICsgYmdQaWMgKyAiKSI7DQogICAgICAgICAgbWUubC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPQ0KICAgICAgICAgICAgLXBpY1ggKiA5NiArICJweCAiICsgLXBpY1kgKiA5NiArICJweCI7DQogICAgICAgICAgbWUubC5zdHlsZS5vcGFjaXR5ID0gIjAiOw0KICAgICAgICAgIG1lLmwuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgbWUubC5zZXRBdHRyaWJ1dGUoDQogICAgICAgICAgICAiYWx0IiwNCiAgICAgICAgICAgIGxvYyhtZS53cmF0aCA/ICJXcmF0aCBjb29raWUiIDogIkdvbGRlbiBjb29raWUiKQ0KICAgICAgICAgICk7DQoNCiAgICAgICAgICBtZS5saWZlID0gMTsgLy90aGUgY29va2llJ3MgY3VycmVudCBwcm9ncmVzc2lvbiB0aHJvdWdoIGl0cyBsaWZlc3BhbiAoaW4gZnJhbWVzKQ0KICAgICAgICAgIG1lLmR1ciA9IDEzOyAvL2R1cmF0aW9uOyB0aGUgY29va2llJ3MgbGlmZXNwYW4gaW4gc2Vjb25kcyBiZWZvcmUgaXQgZGVzcGF3bnMNCg0KICAgICAgICAgIHZhciBkdXIgPSAxMzsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGRheSIpKSBkdXIgKj0gMjsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIlNlcmVuZGlwaXR5IikpIGR1ciAqPSAyOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiRGVjaXNpdmUgZmF0ZSIpKSBkdXIgKj0gMS4wNTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGRpZ2l0IikpIGR1ciAqPSAxLjAxOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiTHVja3kgbnVtYmVyIikpIGR1ciAqPSAxLjAxOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiTHVja3kgcGF5b3V0IikpIGR1ciAqPSAxLjAxOw0KICAgICAgICAgIGlmICghbWUud3JhdGgpIGR1ciAqPSBHYW1lLmVmZigiZ29sZGVuQ29va2llRHVyIik7DQogICAgICAgICAgZWxzZSBkdXIgKj0gR2FtZS5lZmYoIndyYXRoQ29va2llRHVyIik7DQogICAgICAgICAgZHVyICo9IE1hdGgucG93KDAuOTUsIEdhbWUuc2hpbW1lclR5cGVzWyJnb2xkZW4iXS5uIC0gMSk7IC8vNSUgc2hvcnRlciBmb3IgZXZlcnkgb3RoZXIgZ29sZGVuIGNvb2tpZSBvbiB0aGUgc2NyZWVuDQogICAgICAgICAgaWYgKHRoaXMuY2hhaW4gPiAwKSBkdXIgPSBNYXRoLm1heCgyLCAxMCAvIHRoaXMuY2hhaW4pOyAvL3RoaXMgaXMgaGlsYXJpb3VzDQogICAgICAgICAgbWUuZHVyID0gZHVyOw0KICAgICAgICAgIG1lLmxpZmUgPSBNYXRoLmNlaWwoR2FtZS5mcHMgKiBtZS5kdXIpOw0KICAgICAgICAgIG1lLnNpemVNdWx0ID0gMTsNCiAgICAgICAgfSwNCiAgICAgICAgdXBkYXRlRnVuYzogZnVuY3Rpb24gKG1lKSB7DQogICAgICAgICAgdmFyIGN1cnZlID0gMSAtIE1hdGgucG93KChtZS5saWZlIC8gKEdhbWUuZnBzICogbWUuZHVyKSkgKiAyIC0gMSwgNCk7DQogICAgICAgICAgbWUubC5zdHlsZS5vcGFjaXR5ID0gY3VydmU7DQogICAgICAgICAgLy90aGlzIGxpbmUgbWFrZXMgZWFjaCBnb2xkZW4gY29va2llIHB1bHNlIGluIGEgdW5pcXVlIHdheQ0KICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KQ0KICAgICAgICAgICAgbWUubC5zdHlsZS50cmFuc2Zvcm0gPQ0KICAgICAgICAgICAgICAicm90YXRlKCIgKw0KICAgICAgICAgICAgICAoTWF0aC5zaW4obWUuaWQgKiAwLjY5KSAqIDI0ICsNCiAgICAgICAgICAgICAgICBNYXRoLnNpbigNCiAgICAgICAgICAgICAgICAgIEdhbWUuVCAqICgwLjM1ICsgTWF0aC5zaW4obWUuaWQgKiAwLjk3KSAqIDAuMTUpICsNCiAgICAgICAgICAgICAgICAgICAgbWUuaWQgLyorTWF0aC5zaW4oR2FtZS5UKjAuMDcpKjIrMiovDQogICAgICAgICAgICAgICAgKSAqDQogICAgICAgICAgICAgICAgICAoMyArIE1hdGguc2luKG1lLmlkICogMC4zNikgKiAyKSkgKw0KICAgICAgICAgICAgICAiZGVnKSBzY2FsZSgiICsNCiAgICAgICAgICAgICAgbWUuc2l6ZU11bHQgKg0KICAgICAgICAgICAgICAgICgxICsgTWF0aC5zaW4obWUuaWQgKiAwLjUzKSAqIDAuMikgKg0KICAgICAgICAgICAgICAgIGN1cnZlICoNCiAgICAgICAgICAgICAgICAoMSArDQogICAgICAgICAgICAgICAgICAoMC4wNiArIE1hdGguc2luKG1lLmlkICogMC40MSkgKiAwLjA1KSAqDQogICAgICAgICAgICAgICAgICAgIE1hdGguc2luKA0KICAgICAgICAgICAgICAgICAgICAgIEdhbWUuVCAqICgwLjI1ICsgTWF0aC5zaW4obWUuaWQgKiAwLjczKSAqIDAuMTUpICsgbWUuaWQNCiAgICAgICAgICAgICAgICAgICAgKSkgKw0KICAgICAgICAgICAgICAiKSI7DQogICAgICAgICAgbWUubGlmZS0tOw0KICAgICAgICAgIGlmIChtZS5saWZlIDw9IDApIHsNCiAgICAgICAgICAgIHRoaXMubWlzc0Z1bmMobWUpOw0KICAgICAgICAgICAgbWUuZGllKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBwb3BGdW5jOiBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICAvL2dldCBhY2hpZXZzIGFuZCBzdGF0cw0KICAgICAgICAgIGlmIChtZS5zcGF3bkxlYWQpIHsNCiAgICAgICAgICAgIEdhbWUuZ29sZGVuQ2xpY2tzKys7DQogICAgICAgICAgICBHYW1lLmdvbGRlbkNsaWNrc0xvY2FsKys7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSAxKSBHYW1lLldpbigiR29sZGVuIGNvb2tpZSIpOw0KICAgICAgICAgICAgaWYgKEdhbWUuZ29sZGVuQ2xpY2tzID49IDcpIEdhbWUuV2luKCJMdWNreSBjb29raWUiKTsNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSAyNykgR2FtZS5XaW4oIkEgc3Ryb2tlIG9mIGx1Y2siKTsNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSA3NykgR2FtZS5XaW4oIkZvcnR1bmUiKTsNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSA3NzcpIEdhbWUuV2luKCJMZXByZWNoYXVuIik7DQogICAgICAgICAgICBpZiAoR2FtZS5nb2xkZW5DbGlja3MgPj0gNzc3NykgR2FtZS5XaW4oIkJsYWNrIGNhdCdzIHBhdyIpOw0KICAgICAgICAgICAgaWYgKEdhbWUuZ29sZGVuQ2xpY2tzID49IDI3Nzc3KSBHYW1lLldpbigiU2V2ZW4gaG9yc2VzaG9lcyIpOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5nb2xkZW5DbGlja3MgPj0gNykgR2FtZS5VbmxvY2soIkx1Y2t5IGRheSIpOw0KICAgICAgICAgICAgaWYgKEdhbWUuZ29sZGVuQ2xpY2tzID49IDI3KSBHYW1lLlVubG9jaygiU2VyZW5kaXBpdHkiKTsNCiAgICAgICAgICAgIGlmIChHYW1lLmdvbGRlbkNsaWNrcyA+PSA3NykgR2FtZS5VbmxvY2soIkdldCBsdWNreSIpOw0KDQogICAgICAgICAgICBpZiAobWUubGlmZSAvIEdhbWUuZnBzID4gbWUuZHVyIC0gMSkgR2FtZS5XaW4oIkVhcmx5IGJpcmQiKTsNCiAgICAgICAgICAgIGlmIChtZS5saWZlIDwgR2FtZS5mcHMpIEdhbWUuV2luKCJGYWRpbmcgbHVjayIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChHYW1lLmZvcmNlVW5zbG90R29kKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5mb3JjZVVuc2xvdEdvZCgiYXNjZXRpY2lzbSIpKSBHYW1lLnVzZVN3YXAoMTAwMDAwMCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy9zZWxlY3QgYW4gZWZmZWN0DQogICAgICAgICAgdmFyIGxpc3QgPSBbXTsNCiAgICAgICAgICBpZiAobWUud3JhdGggPiAwKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKCJjbG90IiwgIm11bHRpcGx5IGNvb2tpZXMiLCAicnVpbiBjb29raWVzIik7DQogICAgICAgICAgZWxzZSBsaXN0LnB1c2goImZyZW56eSIsICJtdWx0aXBseSBjb29raWVzIik7DQogICAgICAgICAgaWYgKG1lLndyYXRoID4gMCAmJiBHYW1lLmhhc0dvZCAmJiBHYW1lLmhhc0dvZCgic2Nvcm4iKSkNCiAgICAgICAgICAgIGxpc3QucHVzaCgiY2xvdCIsICJydWluIGNvb2tpZXMiLCAiY2xvdCIsICJydWluIGNvb2tpZXMiKTsNCiAgICAgICAgICBpZiAobWUud3JhdGggPiAwICYmIE1hdGgucmFuZG9tKCkgPCAwLjMpDQogICAgICAgICAgICBsaXN0LnB1c2goImJsb29kIGZyZW56eSIsICJjaGFpbiBjb29raWUiLCAiY29va2llIHN0b3JtIik7DQogICAgICAgICAgZWxzZSBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDMgJiYgR2FtZS5jb29raWVzRWFybmVkID49IDEwMDAwMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgiY2hhaW4gY29va2llIiwgImNvb2tpZSBzdG9ybSIpOw0KICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wNSAmJiBHYW1lLnNlYXNvbiA9PSAiZm9vbHMiKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKCJldmVyeXRoaW5nIG11c3QgZ28iKTsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC4xICYmDQogICAgICAgICAgICAoTWF0aC5yYW5kb20oKSA8IDAuMDUgfHwgIUdhbWUuaGFzQnVmZigiRHJhZ29uZmxpZ2h0IikpDQogICAgICAgICAgKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKCJjbGljayBmcmVuenkiKTsNCiAgICAgICAgICBpZiAobWUud3JhdGggJiYgTWF0aC5yYW5kb20oKSA8IDAuMSkgbGlzdC5wdXNoKCJjdXJzZWQgZmluZ2VyIik7DQoNCiAgICAgICAgICBpZiAoR2FtZS5CdWlsZGluZ3NPd25lZCA+PSAxMCAmJiBNYXRoLnJhbmRvbSgpIDwgMC4yNSkNCiAgICAgICAgICAgIGxpc3QucHVzaCgiYnVpbGRpbmcgc3BlY2lhbCIpOw0KDQogICAgICAgICAgaWYgKEdhbWUuY2FuTHVtcHMoKSAmJiBNYXRoLnJhbmRvbSgpIDwgMC4wMDA1KQ0KICAgICAgICAgICAgbGlzdC5wdXNoKCJmcmVlIHN1Z2FyIGx1bXAiKTsNCg0KICAgICAgICAgIGlmICgobWUud3JhdGggPT0gMCAmJiBNYXRoLnJhbmRvbSgpIDwgMC4xNSkgfHwgTWF0aC5yYW5kb20oKSA8IDAuMDUpIHsNCiAgICAgICAgICAgIC8vaWYgKEdhbWUuaGFzQXVyYSgnUmVhcGVyIG9mIEZpZWxkcycpKSBsaXN0LnB1c2goJ2RyYWdvbiBoYXJ2ZXN0Jyk7DQogICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IEdhbWUuYXVyYU11bHQoIlJlYXBlciBvZiBGaWVsZHMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKCJkcmFnb24gaGFydmVzdCIpOw0KICAgICAgICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdEcmFnb25mbGlnaHQnKSkgbGlzdC5wdXNoKCdkcmFnb25mbGlnaHQnKTsNCiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgR2FtZS5hdXJhTXVsdCgiRHJhZ29uZmxpZ2h0IikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgiZHJhZ29uZmxpZ2h0Iik7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgdGhpcy5sYXN0ICE9ICIiICYmDQogICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC44ICYmDQogICAgICAgICAgICBsaXN0LmluZGV4T2YodGhpcy5sYXN0KSAhPSAtMQ0KICAgICAgICAgICkNCiAgICAgICAgICAgIGxpc3Quc3BsaWNlKGxpc3QuaW5kZXhPZih0aGlzLmxhc3QpLCAxKTsgLy84MCUgY2hhbmNlIHRvIGZvcmNlIGEgZGlmZmVyZW50IG9uZQ0KICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wMDAxKSBsaXN0LnB1c2goImJsYWIiKTsNCiAgICAgICAgICB2YXIgY2hvaWNlID0gY2hvb3NlKGxpc3QpOw0KDQogICAgICAgICAgaWYgKHRoaXMuY2hhaW4gPiAwKSBjaG9pY2UgPSAiY2hhaW4gY29va2llIjsNCiAgICAgICAgICBpZiAobWUuZm9yY2UgIT0gIiIpIHsNCiAgICAgICAgICAgIHRoaXMuY2hhaW4gPSAwOw0KICAgICAgICAgICAgY2hvaWNlID0gbWUuZm9yY2U7DQogICAgICAgICAgICBtZS5mb3JjZSA9ICIiOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoY2hvaWNlICE9ICJjaGFpbiBjb29raWUiKSB0aGlzLmNoYWluID0gMDsNCg0KICAgICAgICAgIHRoaXMubGFzdCA9IGNob2ljZTsNCg0KICAgICAgICAgIC8vY3JlYXRlIGJ1ZmYgZm9yIGVmZmVjdA0KICAgICAgICAgIC8vYnVmZiBkdXJhdGlvbiBtdWx0aXBsaWVyDQogICAgICAgICAgdmFyIGVmZmVjdER1ck1vZCA9IDE7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJHZXQgbHVja3kiKSkgZWZmZWN0RHVyTW9kICo9IDI7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJMYXN0aW5nIGZvcnR1bmUiKSkgZWZmZWN0RHVyTW9kICo9IDEuMTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGRpZ2l0IikpIGVmZmVjdER1ck1vZCAqPSAxLjAxOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiTHVja3kgbnVtYmVyIikpIGVmZmVjdER1ck1vZCAqPSAxLjAxOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIpKSBlZmZlY3REdXJNb2QgKj0gMS4wMTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IHBheW91dCIpKSBlZmZlY3REdXJNb2QgKj0gMS4wMTsNCiAgICAgICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0Vwb2NoIE1hbmlwdWxhdG9yJykpIGVmZmVjdER1ck1vZCo9MS4wNTsNCiAgICAgICAgICBlZmZlY3REdXJNb2QgKj0gMSArIEdhbWUuYXVyYU11bHQoIkVwb2NoIE1hbmlwdWxhdG9yIikgKiAwLjA1Ow0KICAgICAgICAgIGlmICghbWUud3JhdGgpIGVmZmVjdER1ck1vZCAqPSBHYW1lLmVmZigiZ29sZGVuQ29va2llRWZmRHVyIik7DQogICAgICAgICAgZWxzZSBlZmZlY3REdXJNb2QgKj0gR2FtZS5lZmYoIndyYXRoQ29va2llRWZmRHVyIik7DQoNCiAgICAgICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgiZGVjYWRlbmNlIik7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIGVmZmVjdER1ck1vZCAqPSAxLjA3Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIGVmZmVjdER1ck1vZCAqPSAxLjA1Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIGVmZmVjdER1ck1vZCAqPSAxLjAyOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vZWZmZWN0IG11bHRpcGxpZXIgKGZyb20gbHVja3kgZXRjKQ0KICAgICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgICAvL2lmIChtZS53cmF0aD4wICYmIEdhbWUuaGFzQXVyYSgnVW5ob2x5IERvbWluaW9uJykpIG11bHQqPTEuMTsNCiAgICAgICAgICAvL2Vsc2UgaWYgKG1lLndyYXRoPT0wICYmIEdhbWUuaGFzQXVyYSgnQW5jZXN0cmFsIE1ldGFtb3JwaG9zaXMnKSkgbXVsdCo9MS4xOw0KICAgICAgICAgIGlmIChtZS53cmF0aCA+IDApIG11bHQgKj0gMSArIEdhbWUuYXVyYU11bHQoIlVuaG9seSBEb21pbmlvbiIpICogMC4xOw0KICAgICAgICAgIGVsc2UgaWYgKG1lLndyYXRoID09IDApDQogICAgICAgICAgICBtdWx0ICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJBbmNlc3RyYWwgTWV0YW1vcnBob3NpcyIpICogMC4xOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIpKSBtdWx0ICo9IDEuMDE7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJEcmFnb24gZmFuZyIpKSBtdWx0ICo9IDEuMDM7DQogICAgICAgICAgaWYgKCFtZS53cmF0aCkgbXVsdCAqPSBHYW1lLmVmZigiZ29sZGVuQ29va2llR2FpbiIpOw0KICAgICAgICAgIGVsc2UgbXVsdCAqPSBHYW1lLmVmZigid3JhdGhDb29raWVHYWluIik7DQoNCiAgICAgICAgICB2YXIgcG9wdXAgPSAiIjsNCiAgICAgICAgICB2YXIgYnVmZiA9IDA7DQoNCiAgICAgICAgICBpZiAoY2hvaWNlID09ICJidWlsZGluZyBzcGVjaWFsIikgew0KICAgICAgICAgICAgdmFyIHRpbWUgPSBNYXRoLmNlaWwoMzAgKiBlZmZlY3REdXJNb2QpOw0KICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbaV0uYW1vdW50ID49IDEwKSBsaXN0LnB1c2goR2FtZS5PYmplY3RzW2ldLmlkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICAgIGNob2ljZSA9ICJmcmVuenkiOw0KICAgICAgICAgICAgfSAvL2RlZmF1bHQgdG8gZnJlbnp5IGlmIG5vIHByb3BlciBidWlsZGluZw0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgIHZhciBvYmogPSBjaG9vc2UobGlzdCk7DQogICAgICAgICAgICAgIHZhciBwb3cgPSBHYW1lLk9iamVjdHNCeUlkW29ial0uYW1vdW50IC8gMTAgKyAxOw0KICAgICAgICAgICAgICBpZiAobWUud3JhdGggJiYgTWF0aC5yYW5kb20oKSA8IDAuMykgew0KICAgICAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKCJidWlsZGluZyBkZWJ1ZmYiLCB0aW1lLCBwb3csIG9iaik7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgYnVmZiA9IEdhbWUuZ2FpbkJ1ZmYoImJ1aWxkaW5nIGJ1ZmYiLCB0aW1lLCBwb3csIG9iaik7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoY2hvaWNlID09ICJmcmVlIHN1Z2FyIGx1bXAiKSB7DQogICAgICAgICAgICBHYW1lLmdhaW5MdW1wcygxKTsNCiAgICAgICAgICAgIHBvcHVwID0gbG9jKCJTd2VldCE8YnI+PHNtYWxsPkZvdW5kIDEgc3VnYXIgbHVtcCE8L3NtYWxsPiIpOw0KICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlID09ICJmcmVuenkiKSB7DQogICAgICAgICAgICBidWZmID0gR2FtZS5nYWluQnVmZigiZnJlbnp5IiwgTWF0aC5jZWlsKDc3ICogZWZmZWN0RHVyTW9kKSwgNyk7DQogICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UgPT0gImRyYWdvbiBoYXJ2ZXN0Iikgew0KICAgICAgICAgICAgYnVmZiA9IEdhbWUuZ2FpbkJ1ZmYoDQogICAgICAgICAgICAgICJkcmFnb24gaGFydmVzdCIsDQogICAgICAgICAgICAgIE1hdGguY2VpbCg2MCAqIGVmZmVjdER1ck1vZCksDQogICAgICAgICAgICAgIDE1DQogICAgICAgICAgICApOw0KICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlID09ICJldmVyeXRoaW5nIG11c3QgZ28iKSB7DQogICAgICAgICAgICBidWZmID0gR2FtZS5nYWluQnVmZigNCiAgICAgICAgICAgICAgImV2ZXJ5dGhpbmcgbXVzdCBnbyIsDQogICAgICAgICAgICAgIE1hdGguY2VpbCg4ICogZWZmZWN0RHVyTW9kKSwNCiAgICAgICAgICAgICAgNQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAibXVsdGlwbHkgY29va2llcyIpIHsNCiAgICAgICAgICAgIHZhciBtb25pID0NCiAgICAgICAgICAgICAgbXVsdCAqIE1hdGgubWluKEdhbWUuY29va2llcyAqIDAuMTUsIEdhbWUuY29va2llc1BzICogNjAgKiAxNSkgKw0KICAgICAgICAgICAgICAxMzsgLy9hZGQgMTUlIHRvIGNvb2tpZXMgb3duZWQgKCsxMyksIG9yIDE1IG1pbnV0ZXMgb2YgY29va2llIHByb2R1Y3Rpb24gLSB3aGljaGV2ZXIgaXMgbG93ZXN0DQogICAgICAgICAgICBHYW1lLkVhcm4obW9uaSk7DQogICAgICAgICAgICBwb3B1cCA9DQogICAgICAgICAgICAgIGxvYygiTHVja3khIikgKw0KICAgICAgICAgICAgICAiPGJyPjxzbWFsbD4iICsNCiAgICAgICAgICAgICAgbG9jKCIrJTEhIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkobW9uaSkpKSArDQogICAgICAgICAgICAgICI8L3NtYWxsPiI7DQogICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UgPT0gInJ1aW4gY29va2llcyIpIHsNCiAgICAgICAgICAgIHZhciBtb25pID0NCiAgICAgICAgICAgICAgTWF0aC5taW4oR2FtZS5jb29raWVzICogMC4wNSwgR2FtZS5jb29raWVzUHMgKiA2MCAqIDEwKSArIDEzOyAvL2xvc2UgNSUgb2YgY29va2llcyBvd25lZCAoLTEzKSwgb3IgMTAgbWludXRlcyBvZiBjb29raWUgcHJvZHVjdGlvbiAtIHdoaWNoZXZlciBpcyBsb3dlc3QNCiAgICAgICAgICAgIG1vbmkgPSBNYXRoLm1pbihHYW1lLmNvb2tpZXMsIG1vbmkpOw0KICAgICAgICAgICAgR2FtZS5TcGVuZChtb25pKTsNCiAgICAgICAgICAgIHBvcHVwID0NCiAgICAgICAgICAgICAgbG9jKCJSdWluISIpICsNCiAgICAgICAgICAgICAgIjxicj48c21hbGw+IiArDQogICAgICAgICAgICAgIGxvYygiTG9zdCAlMSEiLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeShtb25pKSkpICsNCiAgICAgICAgICAgICAgIjwvc21hbGw+IjsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiYmxvb2QgZnJlbnp5Iikgew0KICAgICAgICAgICAgYnVmZiA9IEdhbWUuZ2FpbkJ1ZmYoDQogICAgICAgICAgICAgICJibG9vZCBmcmVuenkiLA0KICAgICAgICAgICAgICBNYXRoLmNlaWwoNiAqIGVmZmVjdER1ck1vZCksDQogICAgICAgICAgICAgIDY2Ng0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiY2xvdCIpIHsNCiAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKCJjbG90IiwgTWF0aC5jZWlsKDY2ICogZWZmZWN0RHVyTW9kKSwgMC41KTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiY3Vyc2VkIGZpbmdlciIpIHsNCiAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKA0KICAgICAgICAgICAgICAiY3Vyc2VkIGZpbmdlciIsDQogICAgICAgICAgICAgIE1hdGguY2VpbCgxMCAqIGVmZmVjdER1ck1vZCksDQogICAgICAgICAgICAgIEdhbWUuY29va2llc1BzICogTWF0aC5jZWlsKDEwICogZWZmZWN0RHVyTW9kKQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiY2xpY2sgZnJlbnp5Iikgew0KICAgICAgICAgICAgYnVmZiA9IEdhbWUuZ2FpbkJ1ZmYoDQogICAgICAgICAgICAgICJjbGljayBmcmVuenkiLA0KICAgICAgICAgICAgICBNYXRoLmNlaWwoMTMgKiBlZmZlY3REdXJNb2QpLA0KICAgICAgICAgICAgICA3NzcNCiAgICAgICAgICAgICk7DQogICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UgPT0gImRyYWdvbmZsaWdodCIpIHsNCiAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKA0KICAgICAgICAgICAgICAiZHJhZ29uZmxpZ2h0IiwNCiAgICAgICAgICAgICAgTWF0aC5jZWlsKDEwICogZWZmZWN0RHVyTW9kKSwNCiAgICAgICAgICAgICAgMTExMQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC44KSBHYW1lLmtpbGxCdWZmKCJDbGljayBmcmVuenkiKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiY2hhaW4gY29va2llIikgew0KICAgICAgICAgICAgLy9maXggYnkgSWNlaGF3azc4DQogICAgICAgICAgICBpZiAodGhpcy5jaGFpbiA9PSAwKSB0aGlzLnRvdGFsRnJvbUNoYWluID0gMDsNCiAgICAgICAgICAgIHRoaXMuY2hhaW4rKzsNCiAgICAgICAgICAgIHZhciBkaWdpdCA9IG1lLndyYXRoID8gNiA6IDc7DQogICAgICAgICAgICBpZiAodGhpcy5jaGFpbiA9PSAxKQ0KICAgICAgICAgICAgICB0aGlzLmNoYWluICs9IE1hdGgubWF4KA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgTWF0aC5jZWlsKE1hdGgubG9nKEdhbWUuY29va2llcykgLyBNYXRoLkxOMTApIC0gMTANCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgdmFyIG1heFBheW91dCA9DQogICAgICAgICAgICAgIE1hdGgubWluKEdhbWUuY29va2llc1BzICogNjAgKiA2MCAqIDYsIEdhbWUuY29va2llcyAqIDAuNSkgKiBtdWx0Ow0KICAgICAgICAgICAgdmFyIG1vbmkgPSBNYXRoLm1heCgNCiAgICAgICAgICAgICAgZGlnaXQsDQogICAgICAgICAgICAgIE1hdGgubWluKA0KICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoKDEgLyA5KSAqIE1hdGgucG93KDEwLCB0aGlzLmNoYWluKSAqIGRpZ2l0ICogbXVsdCksDQogICAgICAgICAgICAgICAgbWF4UGF5b3V0DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICB2YXIgbmV4dE1vbmkgPSBNYXRoLm1heCgNCiAgICAgICAgICAgICAgZGlnaXQsDQogICAgICAgICAgICAgIE1hdGgubWluKA0KICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgICAgICAoMSAvIDkpICogTWF0aC5wb3coMTAsIHRoaXMuY2hhaW4gKyAxKSAqIGRpZ2l0ICogbXVsdA0KICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgbWF4UGF5b3V0DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICB0aGlzLnRvdGFsRnJvbUNoYWluICs9IG1vbmk7DQoNCiAgICAgICAgICAgIC8vYnJlYWsgdGhlIGNoYWluIGlmIHdlJ3JlIGFib3ZlIDUgZGlnaXRzIEFORCBpdCdzIG1vcmUgdGhhbiA1MCUgb2Ygb3VyIGJhbmssIGl0IGdyYW50cyBtb3JlIHRoYW4gNiBob3VycyBvZiBvdXIgQ3BTLCBvciBqdXN0IGEgMSUgY2hhbmNlIGVhY2ggZGlnaXQgKHVwZGF0ZSA6IHJlbW92ZWQgZGlnaXQgbGltaXQpDQogICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDEgfHwgbmV4dE1vbmkgPj0gbWF4UGF5b3V0KSB7DQogICAgICAgICAgICAgIHRoaXMuY2hhaW4gPSAwOw0KICAgICAgICAgICAgICBwb3B1cCA9DQogICAgICAgICAgICAgICAgbG9jKCJDb29raWUgY2hhaW4iKSArDQogICAgICAgICAgICAgICAgIjxicj48c21hbGw+IiArDQogICAgICAgICAgICAgICAgbG9jKCIrJTEhIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkobW9uaSkpKSArDQogICAgICAgICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiQ29va2llIGNoYWluIG92ZXIuIFlvdSBtYWRlICUxLiIsDQogICAgICAgICAgICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSh0aGlzLnRvdGFsRnJvbUNoYWluKSkNCiAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAiPC9zbWFsbD4iOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcG9wdXAgPQ0KICAgICAgICAgICAgICAgIGxvYygiQ29va2llIGNoYWluIikgKw0KICAgICAgICAgICAgICAgICI8YnI+PHNtYWxsPiIgKw0KICAgICAgICAgICAgICAgIGxvYygiKyUxISIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1vbmkpKSkgKw0KICAgICAgICAgICAgICAgICI8L3NtYWxsPiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBHYW1lLkVhcm4obW9uaSk7DQogICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UgPT0gImNvb2tpZSBzdG9ybSIpIHsNCiAgICAgICAgICAgIGJ1ZmYgPSBHYW1lLmdhaW5CdWZmKA0KICAgICAgICAgICAgICAiY29va2llIHN0b3JtIiwNCiAgICAgICAgICAgICAgTWF0aC5jZWlsKDcgKiBlZmZlY3REdXJNb2QpLA0KICAgICAgICAgICAgICA3DQogICAgICAgICAgICApOw0KICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlID09ICJjb29raWUgc3Rvcm0gZHJvcCIpIHsNCiAgICAgICAgICAgIHZhciBtb25pID0gTWF0aC5tYXgoDQogICAgICAgICAgICAgIG11bHQgKiAoR2FtZS5jb29raWVzUHMgKiA2MCAqIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKSksDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKQ0KICAgICAgICAgICAgKTsgLy9laXRoZXIgMS03IGNvb2tpZXMgb3IgMS03IG1pbnV0ZXMgb2YgY29va2llIHByb2R1Y3Rpb24sIHdoaWNoZXZlciBpcyBoaWdoZXN0DQogICAgICAgICAgICBHYW1lLkVhcm4obW9uaSk7DQogICAgICAgICAgICBwb3B1cCA9DQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJmb250LXNpemU6NzUlOyI+JyArDQogICAgICAgICAgICAgIGxvYygiKyUxISIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1vbmkpKSkgKw0KICAgICAgICAgICAgICAiPC9kaXY+IjsNCiAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZSA9PSAiYmxhYiIpIHsNCiAgICAgICAgICAgIC8vc29ycnkgKGl0J3MgcmVhbGx5IHJhcmUpDQogICAgICAgICAgICB2YXIgc3RyID0gRU4NCiAgICAgICAgICAgICAgPyBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIkNvb2tpZSBjcnVtYmxpbmVzcyB4MyBmb3IgNjAgc2Vjb25kcyEiLA0KICAgICAgICAgICAgICAgICAgIkNob2NvbGF0aW5lc3MgeDcgZm9yIDc3IHNlY29uZHMhIiwNCiAgICAgICAgICAgICAgICAgICJEb3VnaCBlbGFzdGljaXR5IGhhbHZlZCBmb3IgNjYgc2Vjb25kcyEiLA0KICAgICAgICAgICAgICAgICAgIkdvbGRlbiBjb29raWUgc2hpbmluZXNzIGRvdWJsZWQgZm9yIDMgc2Vjb25kcyEiLA0KICAgICAgICAgICAgICAgICAgIldvcmxkIGVjb25vbXkgaGFsdmVkIGZvciAzMCBzZWNvbmRzISIsDQogICAgICAgICAgICAgICAgICAiR3JhbmRtYSBraXNzZXMgMjMlIHN0aW5naWVyIGZvciA0NSBzZWNvbmRzISIsDQogICAgICAgICAgICAgICAgICAiVGhhbmtzIGZvciBjbGlja2luZyEiLA0KICAgICAgICAgICAgICAgICAgIkZvb2xlZCB5b3UhIFRoaXMgb25lIHdhcyBqdXN0IGEgdGVzdC4iLA0KICAgICAgICAgICAgICAgICAgIkdvbGRlbiBjb29raWVzIGNsaWNrZWQgKzEhIiwNCiAgICAgICAgICAgICAgICAgICJZb3VyIGNsaWNrIGhhcyBiZWVuIHJlZ2lzdGVyZWQuIFRoYW5rIHlvdSBmb3IgeW91ciBjb29wZXJhdGlvbi4iLA0KICAgICAgICAgICAgICAgICAgIlRoYW5rcyEgVGhhdCBoaXQgdGhlIHNwb3QhIiwNCiAgICAgICAgICAgICAgICAgICJUaGFuayB5b3UuIEEgdGVhbSBoYXMgYmVlbiBkaXNwYXRjaGVkLiIsDQogICAgICAgICAgICAgICAgICAiVGhleSBrbm93LiIsDQogICAgICAgICAgICAgICAgICAiT29wcy4gVGhpcyB3YXMganVzdCBhIGNob2NvbGF0ZSBjb29raWUgd2l0aCBzaGlueSBhbHVtaW5pdW0gZm9pbC4iLA0KICAgICAgICAgICAgICAgICAgIkVzY2hhdG9uIGltbWFuZW50aXplZCEiLA0KICAgICAgICAgICAgICAgICAgIk9oLCB0aGF0IHRpY2tsZWQhIiwNCiAgICAgICAgICAgICAgICAgICJBZ2Fpbi4iLA0KICAgICAgICAgICAgICAgICAgIllvdSd2ZSBtYWRlIGEgZ3JhdmUgbWlzdGFrZS4iLA0KICAgICAgICAgICAgICAgICAgIkNob2NvbGF0ZSBjaGlwcyByZXNodWZmbGVkISIsDQogICAgICAgICAgICAgICAgICAiUmFuZG9taXplZCBjaGFuY2UgY2FyZCBvdXRjb21lISIsDQogICAgICAgICAgICAgICAgICAiTW91c2UgYWNjZWxlcmF0aW9uICswLjAzJSEiLA0KICAgICAgICAgICAgICAgICAgIkFzY2Vuc2lvbiBib251c2VzIHg1LDAwMCBmb3IgMC4xIHNlY29uZHMhIiwNCiAgICAgICAgICAgICAgICAgICJHYWluZWQgMSBleHRyYSEiLA0KICAgICAgICAgICAgICAgICAgIlNvcnJ5LCBiZXR0ZXIgbHVjayBuZXh0IHRpbWUhIiwNCiAgICAgICAgICAgICAgICAgICJJIGZlbHQgdGhhdC4iLA0KICAgICAgICAgICAgICAgICAgIk5pY2UgdHJ5LCBidXQgbm8uIiwNCiAgICAgICAgICAgICAgICAgICJXYWl0LCBzb3JyeSwgSSB3YXNuJ3QgcmVhZHkgeWV0LiIsDQogICAgICAgICAgICAgICAgICAiWWlwcGVlISIsDQogICAgICAgICAgICAgICAgICAiQm9uZXMgcmVtb3ZlZC4iLA0KICAgICAgICAgICAgICAgICAgIk9yZ2FucyBhZGRlZC4iLA0KICAgICAgICAgICAgICAgICAgIkRpZCB5b3UganVzdCBjbGljayB0aGF0PyIsDQogICAgICAgICAgICAgICAgICAiSHVoPyBPaCwgdGhlcmUgd2FzIG5vdGhpbmcgdGhlcmUuIiwNCiAgICAgICAgICAgICAgICAgICJZb3Ugc2F3IG5vdGhpbmcuIiwNCiAgICAgICAgICAgICAgICAgICJJdCBzZWVtcyB5b3UgaGFsbHVjaW5hdGVkIHRoYXQgZ29sZGVuIGNvb2tpZS4iLA0KICAgICAgICAgICAgICAgICAgIlRoaXMgZ29sZGVuIGNvb2tpZSB3YXMgYSBjb21wbGV0ZSBmYWJyaWNhdGlvbi4iLA0KICAgICAgICAgICAgICAgICAgIkluIHRoZW9yeSB0aGVyZSdzIG5vIHdyb25nIHdheSB0byBjbGljayBhIGdvbGRlbiBjb29raWUsIGJ1dCB5b3UganVzdCBkaWQgdGhhdCwgc29tZWhvdy4iLA0KICAgICAgICAgICAgICAgICAgIkFsbCBjb29raWVzIG11bHRpcGxpZWQgYnkgOTk5ITxicj5BbGwgY29va2llcyBkaXZpZGVkIGJ5IDk5OSEiLA0KICAgICAgICAgICAgICAgICAgIldoeT8iLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgIDogY2hvb3NlKGxvYygiQ29va2llIGJsYWIiKSk7DQogICAgICAgICAgICBwb3B1cCA9IHN0cjsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAocG9wdXAgPT0gIiIgJiYgYnVmZiAmJiBidWZmLm5hbWUgJiYgYnVmZi5kZXNjKQ0KICAgICAgICAgICAgcG9wdXAgPQ0KICAgICAgICAgICAgICBidWZmLmRuYW1lICsNCiAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTo2NSU7Ij4nICsNCiAgICAgICAgICAgICAgYnVmZi5kZXNjICsNCiAgICAgICAgICAgICAgIjwvZGl2PiI7DQogICAgICAgICAgaWYgKHBvcHVwICE9ICIiKSBHYW1lLlBvcHVwKHBvcHVwLCBtZS54ICsgbWUubC5vZmZzZXRXaWR0aCAvIDIsIG1lLnkpOw0KDQogICAgICAgICAgR2FtZS5Ecm9wRWdnKDAuOSk7DQoNCiAgICAgICAgICAvL3NwYXJrbGUgYW5kIGtpbGwgdGhlIHNoaW1tZXINCiAgICAgICAgICBHYW1lLlNwYXJrbGVBdChtZS54ICsgNDgsIG1lLnkgKyA0OCk7DQogICAgICAgICAgaWYgKGNob2ljZSA9PSAiY29va2llIHN0b3JtIGRyb3AiKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5jb29raWVzb3VuZCkNCiAgICAgICAgICAgICAgUGxheVNvdW5kKA0KICAgICAgICAgICAgICAgICJzbmQvY2xpY2tiIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKSArICIubXAzIiwNCiAgICAgICAgICAgICAgICAwLjc1DQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgIFBsYXlTb3VuZCgNCiAgICAgICAgICAgICAgICAic25kL2NsaWNrIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKSArICIubXAzIiwNCiAgICAgICAgICAgICAgICAwLjc1DQogICAgICAgICAgICAgICk7DQogICAgICAgICAgfSBlbHNlIFBsYXlTb3VuZCgic25kL3NoaW1tZXJDbGljay5tcDMiKTsNCiAgICAgICAgICBtZS5kaWUoKTsNCiAgICAgICAgfSwNCiAgICAgICAgbWlzc0Z1bmM6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIGlmICh0aGlzLmNoYWluID4gMCAmJiB0aGlzLnRvdGFsRnJvbUNoYWluID4gMCkgew0KICAgICAgICAgICAgR2FtZS5Qb3B1cCgNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJDb29raWUgY2hhaW4gYnJva2VuLjxicj48c21hbGw+WW91IG1hZGUgJTEuPC9zbWFsbD4iLA0KICAgICAgICAgICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KHRoaXMudG90YWxGcm9tQ2hhaW4pKQ0KICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICBtZS54ICsgbWUubC5vZmZzZXRXaWR0aCAvIDIsDQogICAgICAgICAgICAgIG1lLnkNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICB0aGlzLmNoYWluID0gMDsNCiAgICAgICAgICAgIHRoaXMudG90YWxGcm9tQ2hhaW4gPSAwOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAobWUuc3Bhd25MZWFkKSBHYW1lLm1pc3NlZEdvbGRlbkNsaWNrcysrOw0KICAgICAgICB9LA0KICAgICAgICBzcGF3bnNPblRpbWVyOiB0cnVlLA0KICAgICAgICBzcGF3bkNvbmRpdGlvbnM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuSGFzKCJHb2xkZW4gc3dpdGNoIFtvZmZdIikpIHJldHVybiB0cnVlOw0KICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9LA0KICAgICAgICBzcGF3bmVkOiAwLA0KICAgICAgICB0aW1lOiAwLA0KICAgICAgICBtaW5UaW1lOiAwLA0KICAgICAgICBtYXhUaW1lOiAwLA0KICAgICAgICBnZXRUaW1lTW9kOiBmdW5jdGlvbiAobWUsIG0pIHsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGRheSIpKSBtIC89IDI7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTZXJlbmRpcGl0eSIpKSBtIC89IDI7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJHb2xkZW4gZ29vc2UgZWdnIikpIG0gKj0gMC45NTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkhlYXZlbmx5IGx1Y2siKSkgbSAqPSAwLjk1Ow0KICAgICAgICAgIGlmIChHYW1lLkhhcygiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIpKSBtICo9IDAuOTk7DQogICAgICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdBcmNhbmUgQXVyYScpKSBtKj0wLjk1Ow0KICAgICAgICAgIG0gKj0gMSAtIEdhbWUuYXVyYU11bHQoIkFyY2FuZSBBdXJhIikgKiAwLjA1Ow0KICAgICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIlN1Z2FyIGJsZXNzaW5nIikpIG0gKj0gMC45Ow0KICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAiZWFzdGVyIiAmJiBHYW1lLkhhcygiU3RhcnNwYXduIikpIG0gKj0gMC45ODsNCiAgICAgICAgICBlbHNlIGlmIChHYW1lLnNlYXNvbiA9PSAiaGFsbG93ZWVuIiAmJiBHYW1lLkhhcygiU3RhcnRlcnJvciIpKQ0KICAgICAgICAgICAgbSAqPSAwLjk4Ow0KICAgICAgICAgIGVsc2UgaWYgKEdhbWUuc2Vhc29uID09ICJ2YWxlbnRpbmVzIiAmJiBHYW1lLkhhcygiU3RhcmxvdmUiKSkNCiAgICAgICAgICAgIG0gKj0gMC45ODsNCiAgICAgICAgICBlbHNlIGlmIChHYW1lLnNlYXNvbiA9PSAiZm9vbHMiICYmIEdhbWUuSGFzKCJTdGFydHJhZGUiKSkgbSAqPSAwLjk1Ow0KICAgICAgICAgIGlmICghbWUud3JhdGgpIG0gKj0gMSAvIEdhbWUuZWZmKCJnb2xkZW5Db29raWVGcmVxIik7DQogICAgICAgICAgZWxzZSBtICo9IDEgLyBHYW1lLmVmZigid3JhdGhDb29raWVGcmVxIik7DQogICAgICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoImluZHVzdHJ5Iik7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIG0gKj0gMS4xOw0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG0gKj0gMS4wNjsNCiAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBtICo9IDEuMDM7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoIm1vdGhlciIpOw0KICAgICAgICAgICAgaWYgKGdvZEx2bCA9PSAxKSBtICo9IDEuMTU7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgbSAqPSAxLjE7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgbSAqPSAxLjA1Ow0KDQogICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gIT0gIiIpIHsNCiAgICAgICAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJzZWFzb25zIik7DQogICAgICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiAhPSAiZm9vbHMiKSB7DQogICAgICAgICAgICAgICAgaWYgKGdvZEx2bCA9PSAxKSBtICo9IDAuOTc7DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG0gKj0gMC45ODsNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgbSAqPSAwLjk5Ow0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgbSAqPSAwLjk1NTsNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgbSAqPSAwLjk3Ow0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBtICo9IDAuOTg1Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICh0aGlzLmNoYWluID4gMCkgbSA9IDAuMDU7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJHb2xkIGhvYXJkIikpIG0gPSAwLjAxOw0KICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoR2FtZS5mcHMgKiA2MCAqIG0pOw0KICAgICAgICB9LA0KICAgICAgICBnZXRNaW5UaW1lOiBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICB2YXIgbSA9IDU7DQogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGltZU1vZChtZSwgbSk7DQogICAgICAgIH0sDQogICAgICAgIGdldE1heFRpbWU6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIHZhciBtID0gMTU7DQogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGltZU1vZChtZSwgbSk7DQogICAgICAgIH0sDQogICAgICAgIGxhc3Q6ICIiLA0KICAgICAgfSwNCiAgICAgIHJlaW5kZWVyOiB7DQogICAgICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7fSwNCiAgICAgICAgaW5pdEZ1bmM6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIGlmICghdGhpcy5zcGF3bmVkICYmIEdhbWUuY2hpbWVUeXBlICE9IDAgJiYgR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEpDQogICAgICAgICAgICBQbGF5U291bmQoInNuZC9qaW5nbGUubXAzIik7DQoNCiAgICAgICAgICBtZS54ID0gLTEyODsNCiAgICAgICAgICBtZS55ID0NCiAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKg0KICAgICAgICAgICAgICAgIE1hdGgubWF4KDAsIEdhbWUuYm91bmRzLmJvdHRvbSAtIEdhbWUuYm91bmRzLnRvcCAtIDI1NikgKw0KICAgICAgICAgICAgICAgIEdhbWUuYm91bmRzLnRvcCArDQogICAgICAgICAgICAgICAgMTI4DQogICAgICAgICAgICApIC0gMTI4Ow0KICAgICAgICAgIC8vbWUubC5zdHlsZS5sZWZ0PW1lLngrJ3B4JzsNCiAgICAgICAgICAvL21lLmwuc3R5bGUudG9wPW1lLnkrJ3B4JzsNCiAgICAgICAgICBtZS5sLnN0eWxlLndpZHRoID0gIjE2N3B4IjsNCiAgICAgICAgICBtZS5sLnN0eWxlLmhlaWdodCA9ICIyMTJweCI7DQogICAgICAgICAgbWUubC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAidXJsKGltZy9mcm9zdGVkUmVpbmRlZXIucG5nKSI7DQogICAgICAgICAgbWUubC5zdHlsZS5vcGFjaXR5ID0gIjAiOw0KICAgICAgICAgIC8vbWUubC5zdHlsZS50cmFuc2Zvcm09J3JvdGF0ZSgnKyhNYXRoLnJhbmRvbSgpKjYwLTMwKSsnZGVnKSBzY2FsZSgnKyhNYXRoLnJhbmRvbSgpKjErMC4yNSkrJyknOw0KICAgICAgICAgIG1lLmwuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgbWUubC5zZXRBdHRyaWJ1dGUoImFsdCIsIGxvYygiUmVpbmRlZXIiKSk7DQoNCiAgICAgICAgICBtZS5saWZlID0gMTsgLy90aGUgcmVpbmRlZXIncyBjdXJyZW50IHByb2dyZXNzaW9uIHRocm91Z2ggaXRzIGxpZmVzcGFuIChpbiBmcmFtZXMpDQogICAgICAgICAgbWUuZHVyID0gNDsgLy9kdXJhdGlvbjsgdGhlIGNvb2tpZSdzIGxpZmVzcGFuIGluIHNlY29uZHMgYmVmb3JlIGl0IGRlc3Bhd25zDQoNCiAgICAgICAgICB2YXIgZHVyID0gNDsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIldlaWdodGVkIHNsZWlnaHMiKSkgZHVyICo9IDI7DQogICAgICAgICAgZHVyICo9IEdhbWUuZWZmKCJyZWluZGVlckR1ciIpOw0KICAgICAgICAgIG1lLmR1ciA9IGR1cjsNCiAgICAgICAgICBtZS5saWZlID0gTWF0aC5jZWlsKEdhbWUuZnBzICogbWUuZHVyKTsNCiAgICAgICAgICBtZS5zaXplTXVsdCA9IDE7DQogICAgICAgIH0sDQogICAgICAgIHVwZGF0ZUZ1bmM6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIHZhciBjdXJ2ZSA9IDEgLSBNYXRoLnBvdygobWUubGlmZSAvIChHYW1lLmZwcyAqIG1lLmR1cikpICogMiAtIDEsIDEyKTsNCiAgICAgICAgICBtZS5sLnN0eWxlLm9wYWNpdHkgPSBjdXJ2ZTsNCiAgICAgICAgICBtZS5sLnN0eWxlLnRyYW5zZm9ybSA9DQogICAgICAgICAgICAidHJhbnNsYXRlKCIgKw0KICAgICAgICAgICAgKG1lLnggKw0KICAgICAgICAgICAgICAoR2FtZS5ib3VuZHMucmlnaHQgLSBHYW1lLmJvdW5kcy5sZWZ0KSAqDQogICAgICAgICAgICAgICAgKDEgLSBtZS5saWZlIC8gKEdhbWUuZnBzICogbWUuZHVyKSkpICsNCiAgICAgICAgICAgICJweCwiICsNCiAgICAgICAgICAgIChtZS55IC0gTWF0aC5hYnMoTWF0aC5zaW4obWUubGlmZSAqIDAuMSkpICogMTI4KSArDQogICAgICAgICAgICAicHgpIHJvdGF0ZSgiICsNCiAgICAgICAgICAgIE1hdGguc2luKG1lLmxpZmUgKiAwLjIgKyAwLjMpICogMTAgKw0KICAgICAgICAgICAgImRlZykgc2NhbGUoIiArDQogICAgICAgICAgICBtZS5zaXplTXVsdCAqICgxICsgTWF0aC5zaW4obWUuaWQgKiAwLjUzKSAqIDAuMSkgKw0KICAgICAgICAgICAgIikiOw0KICAgICAgICAgIG1lLmxpZmUtLTsNCiAgICAgICAgICBpZiAobWUubGlmZSA8PSAwKSB7DQogICAgICAgICAgICB0aGlzLm1pc3NGdW5jKG1lKTsNCiAgICAgICAgICAgIG1lLmRpZSgpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgcG9wRnVuYzogZnVuY3Rpb24gKG1lKSB7DQogICAgICAgICAgLy9nZXQgYWNoaWV2cyBhbmQgc3RhdHMNCiAgICAgICAgICBpZiAobWUuc3Bhd25MZWFkKSB7DQogICAgICAgICAgICBHYW1lLnJlaW5kZWVyQ2xpY2tlZCsrOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciB2YWwgPSBHYW1lLmNvb2tpZXNQcyAqIDYwOw0KICAgICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIkVsZGVyIGZyZW56eSIpKSB2YWwgKj0gMC41OyAvL3Zlcnkgc29ycnkNCiAgICAgICAgICBpZiAoR2FtZS5oYXNCdWZmKCJGcmVuenkiKSkgdmFsICo9IDAuNzU7IC8vSSBzaW5jZXJlbHkgYXBvbG9naXplDQogICAgICAgICAgdmFyIG1vbmkgPSBNYXRoLm1heCgyNSwgdmFsKTsgLy8xIG1pbnV0ZSBvZiBjb29raWUgcHJvZHVjdGlvbiwgb3IgMjUgY29va2llcyAtIHdoaWNoZXZlciBpcyBoaWdoZXN0DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJIbyBobyBoby1mbGF2b3JlZCBmcm9zdGluZyIpKSBtb25pICo9IDI7DQogICAgICAgICAgbW9uaSAqPSBHYW1lLmVmZigicmVpbmRlZXJHYWluIik7DQogICAgICAgICAgR2FtZS5FYXJuKG1vbmkpOw0KICAgICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIkVsZGVyIGZyZW56eSIpKSBHYW1lLldpbigiRWxkZWVyIik7DQoNCiAgICAgICAgICB2YXIgY29va2llID0gIiI7DQogICAgICAgICAgdmFyIGZhaWxSYXRlID0gMC44Ow0KICAgICAgICAgIGlmIChHYW1lLkhhc0FjaGlldigiTGV0IGl0IHNub3ciKSkgZmFpbFJhdGUgPSAwLjY7DQogICAgICAgICAgZmFpbFJhdGUgKj0gMSAvIEdhbWUuZHJvcFJhdGVNdWx0KCk7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTdGFyc25vdyIpKSBmYWlsUmF0ZSAqPSAwLjk1Ow0KICAgICAgICAgIGlmIChHYW1lLmhhc0dvZCkgew0KICAgICAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJzZWFzb25zIik7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIGZhaWxSYXRlICo9IDAuOTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAyKSBmYWlsUmF0ZSAqPSAwLjk1Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIGZhaWxSYXRlICo9IDAuOTc7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gZmFpbFJhdGUpIHsNCiAgICAgICAgICAgIC8vY2hyaXN0bWFzIGNvb2tpZSBkcm9wcw0KICAgICAgICAgICAgY29va2llID0gY2hvb3NlKFsNCiAgICAgICAgICAgICAgIkNocmlzdG1hcyB0cmVlIGJpc2N1aXRzIiwNCiAgICAgICAgICAgICAgIlNub3dmbGFrZSBiaXNjdWl0cyIsDQogICAgICAgICAgICAgICJTbm93bWFuIGJpc2N1aXRzIiwNCiAgICAgICAgICAgICAgIkhvbGx5IGJpc2N1aXRzIiwNCiAgICAgICAgICAgICAgIkNhbmR5IGNhbmUgYmlzY3VpdHMiLA0KICAgICAgICAgICAgICAiQmVsbCBiaXNjdWl0cyIsDQogICAgICAgICAgICAgICJQcmVzZW50IGJpc2N1aXRzIiwNCiAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgaWYgKCFHYW1lLkhhc1VubG9ja2VkKGNvb2tpZSkgJiYgIUdhbWUuSGFzKGNvb2tpZSkpIHsNCiAgICAgICAgICAgICAgR2FtZS5VbmxvY2soY29va2llKTsNCiAgICAgICAgICAgIH0gZWxzZSBjb29raWUgPSAiIjsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgcG9wdXAgPSAiIjsNCg0KICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgbG9jKCJZb3UgZm91bmQgJTEhIiwgY2hvb3NlKGxvYygiUmVpbmRlZXIgbmFtZXMiKSkpLA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiVGhlIHJlaW5kZWVyIGdpdmVzIHlvdSAlMS4iLA0KICAgICAgICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeShtb25pKSkNCiAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAoY29va2llID09ICIiDQogICAgICAgICAgICAgICAgPyAiIg0KICAgICAgICAgICAgICAgIDogIjxicj4iICsNCiAgICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICAgIllvdSBhcmUgYWxzbyByZXdhcmRlZCB3aXRoICUxISIsDQogICAgICAgICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbY29va2llXS5kbmFtZQ0KICAgICAgICAgICAgICAgICAgKSksDQogICAgICAgICAgICBbMTIsIDldLA0KICAgICAgICAgICAgNg0KICAgICAgICAgICk7DQogICAgICAgICAgcG9wdXAgPQ0KICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTo4MCU7Ij4nICsNCiAgICAgICAgICAgIGxvYygiKyUxISIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1vbmkpKSkgKw0KICAgICAgICAgICAgIjwvZGl2PiI7DQoNCiAgICAgICAgICBpZiAocG9wdXAgIT0gIiIpIEdhbWUuUG9wdXAocG9wdXAsIEdhbWUubW91c2VYLCBHYW1lLm1vdXNlWSk7DQoNCiAgICAgICAgICAvL3NwYXJrbGUgYW5kIGtpbGwgdGhlIHNoaW1tZXINCiAgICAgICAgICBHYW1lLlNwYXJrbGVBdChHYW1lLm1vdXNlWCwgR2FtZS5tb3VzZVkpOw0KICAgICAgICAgIFBsYXlTb3VuZCgic25kL2ppbmdsZUNsaWNrLm1wMyIpOw0KICAgICAgICAgIG1lLmRpZSgpOw0KICAgICAgICB9LA0KICAgICAgICBtaXNzRnVuYzogZnVuY3Rpb24gKG1lKSB7fSwNCiAgICAgICAgc3Bhd25zT25UaW1lcjogdHJ1ZSwNCiAgICAgICAgc3Bhd25Db25kaXRpb25zOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJjaHJpc3RtYXMiKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSwNCiAgICAgICAgc3Bhd25lZDogMCwNCiAgICAgICAgdGltZTogMCwNCiAgICAgICAgbWluVGltZTogMCwNCiAgICAgICAgbWF4VGltZTogMCwNCiAgICAgICAgZ2V0VGltZU1vZDogZnVuY3Rpb24gKG1lLCBtKSB7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJSZWluZGVlciBiYWtpbmcgZ3JvdW5kcyIpKSBtIC89IDI7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTdGFyc25vdyIpKSBtICo9IDAuOTU7DQogICAgICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoInNlYXNvbnMiKTsNCiAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgbSAqPSAwLjk7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgbSAqPSAwLjk1Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIG0gKj0gMC45NzsNCiAgICAgICAgICB9DQogICAgICAgICAgbSAqPSAxIC8gR2FtZS5lZmYoInJlaW5kZWVyRnJlcSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiUmVpbmRlZXIgc2Vhc29uIikpIG0gPSAwLjAxOw0KICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoR2FtZS5mcHMgKiA2MCAqIG0pOw0KICAgICAgICB9LA0KICAgICAgICBnZXRNaW5UaW1lOiBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICB2YXIgbSA9IDM7DQogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGltZU1vZChtZSwgbSk7DQogICAgICAgIH0sDQogICAgICAgIGdldE1heFRpbWU6IGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIHZhciBtID0gNjsNCiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaW1lTW9kKG1lLCBtKTsNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgfTsNCg0KICAgIEdhbWUuZ29sZGVuQ29va2llQ2hvaWNlcyA9IFsNCiAgICAgICJGcmVuenkiLA0KICAgICAgImZyZW56eSIsDQogICAgICAiTHVja3kiLA0KICAgICAgIm11bHRpcGx5IGNvb2tpZXMiLA0KICAgICAgIlJ1aW4iLA0KICAgICAgInJ1aW4gY29va2llcyIsDQogICAgICAiRWxkZXIgZnJlbnp5IiwNCiAgICAgICJibG9vZCBmcmVuenkiLA0KICAgICAgIkNsb3QiLA0KICAgICAgImNsb3QiLA0KICAgICAgIkNsaWNrIGZyZW56eSIsDQogICAgICAiY2xpY2sgZnJlbnp5IiwNCiAgICAgICJDdXJzZWQgZmluZ2VyIiwNCiAgICAgICJjdXJzZWQgZmluZ2VyIiwNCiAgICAgICJDb29raWUgY2hhaW4iLA0KICAgICAgImNoYWluIGNvb2tpZSIsDQogICAgICAiQ29va2llIHN0b3JtIiwNCiAgICAgICJjb29raWUgc3Rvcm0iLA0KICAgICAgIkJ1aWxkaW5nIHNwZWNpYWwiLA0KICAgICAgImJ1aWxkaW5nIHNwZWNpYWwiLA0KICAgICAgIkRyYWdvbiBIYXJ2ZXN0IiwNCiAgICAgICJkcmFnb24gaGFydmVzdCIsDQogICAgICAiRHJhZ29uZmxpZ2h0IiwNCiAgICAgICJkcmFnb25mbGlnaHQiLA0KICAgICAgIlN3ZWV0IiwNCiAgICAgICJmcmVlIHN1Z2FyIGx1bXAiLA0KICAgICAgIkJsYWIiLA0KICAgICAgImJsYWIiLA0KICAgIF07DQogICAgR2FtZS5nb2xkZW5Db29raWVCdWlsZGluZ0J1ZmZzID0gew0KICAgICAgQ3Vyc29yOiBbIkhpZ2gtZml2ZSIsICJTbGFwIHRvIHRoZSBmYWNlIl0sDQogICAgICBHcmFuZG1hOiBbIkNvbmdyZWdhdGlvbiIsICJTZW5pbGl0eSJdLA0KICAgICAgRmFybTogWyJMdXh1cmlhbnQgaGFydmVzdCIsICJMb2N1c3RzIl0sDQogICAgICBNaW5lOiBbIk9yZSB2ZWluIiwgIkNhdmUtaW4iXSwNCiAgICAgIEZhY3Rvcnk6IFsiT2lsZWQtdXAiLCAiSmFtbWVkIG1hY2hpbmVyeSJdLA0KICAgICAgQmFuazogWyJKdWljeSBwcm9maXRzIiwgIlJlY2Vzc2lvbiJdLA0KICAgICAgVGVtcGxlOiBbIkZlcnZlbnQgYWRvcmF0aW9uIiwgIkNyaXNpcyBvZiBmYWl0aCJdLA0KICAgICAgIldpemFyZCB0b3dlciI6IFsiTWFuYWJsb29tIiwgIk1hZ2l2b3JlcyJdLA0KICAgICAgU2hpcG1lbnQ6IFsiRGVsaWNpb3VzIGxpZmVmb3JtcyIsICJCbGFjayBob2xlcyJdLA0KICAgICAgIkFsY2hlbXkgbGFiIjogWyJCcmVha3Rocm91Z2giLCAiTGFiIGRpc2FzdGVyIl0sDQogICAgICBQb3J0YWw6IFsiUmlnaHRlb3VzIGNhdGFjbHlzbSIsICJEaW1lbnNpb25hbCBjYWxhbWl0eSJdLA0KICAgICAgIlRpbWUgbWFjaGluZSI6IFsiR29sZGVuIGFnZXMiLCAiVGltZSBqYW0iXSwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciI6IFsiRXh0cmEgY3ljbGVzIiwgIlByZWRpY3RhYmxlIHRyYWdlZHkiXSwNCiAgICAgIFByaXNtOiBbIlNvbGFyIGZsYXJlIiwgIkVjbGlwc2UiXSwNCiAgICAgIENoYW5jZW1ha2VyOiBbIldpbm5pbmcgc3RyZWFrIiwgIkRyeSBzcGVsbCJdLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIjogWyJNYWNyb2Nvc20iLCAiTWljcm9jb3NtIl0sDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIjogWyJSZWZhY3RvcmluZyIsICJBbnRpcGF0dGVybiJdLA0KICAgICAgSWRsZXZlcnNlOiBbIkNvc21pYyBudXJzZXJ5IiwgIkJpZyBjcnVuY2giXSwNCiAgICAgICJDb3J0ZXggYmFrZXIiOiBbIkJyYWluc3Rvcm0iLCAiQnJhaW4gZnJlZXplIl0sDQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlQQVJUSUNMRVMNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICAvL2dlbmVyaWMgcGFydGljbGVzIChmYWxsaW5nIGNvb2tpZXMgZXRjKQ0KICAgIC8vb25seSBkaXNwbGF5ZWQgb24gbGVmdCBzZWN0aW9uDQogICAgR2FtZS5wYXJ0aWNsZXMgPSBbXTsNCiAgICBHYW1lLnBhcnRpY2xlc04gPSA1MDsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUucGFydGljbGVzTjsgaSsrKSB7DQogICAgICBHYW1lLnBhcnRpY2xlc1tpXSA9IHsNCiAgICAgICAgeDogMCwNCiAgICAgICAgeTogMCwNCiAgICAgICAgeGQ6IDAsDQogICAgICAgIHlkOiAwLA0KICAgICAgICB3OiA2NCwNCiAgICAgICAgaDogNjQsDQogICAgICAgIHo6IDAsDQogICAgICAgIHNpemU6IDEsDQogICAgICAgIGR1cjogMiwNCiAgICAgICAgbGlmZTogLTEsDQogICAgICAgIHI6IDAsDQogICAgICAgIHBpYzogInNtYWxsQ29va2llcy5wbmciLA0KICAgICAgICBwaWNJZDogMCwNCiAgICAgICAgcGljUG9zOiBbMCwgMF0sDQogICAgICB9Ow0KICAgIH0NCg0KICAgIEdhbWUucGFydGljbGVzVXBkYXRlID0gZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLnBhcnRpY2xlc047IGkrKykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLnBhcnRpY2xlc1tpXTsNCiAgICAgICAgaWYgKG1lLmxpZmUgIT0gLTEpIHsNCiAgICAgICAgICBpZiAoIW1lLnRleHQpIG1lLnlkICs9IDAuMiArIE1hdGgucmFuZG9tKCkgKiAwLjE7DQogICAgICAgICAgbWUueCArPSBtZS54ZDsNCiAgICAgICAgICBtZS55ICs9IG1lLnlkOw0KICAgICAgICAgIC8vbWUueSs9bWUubGlmZSowLjI1K01hdGgucmFuZG9tKCkqMC4yNTsNCiAgICAgICAgICBtZS5saWZlKys7DQogICAgICAgICAgaWYgKG1lLmxpZmUgPj0gR2FtZS5mcHMgKiBtZS5kdXIpIHsNCiAgICAgICAgICAgIG1lLmxpZmUgPSAtMTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUucGFydGljbGVBZGQgPSBmdW5jdGlvbiAoeCwgeSwgeGQsIHlkLCBzaXplLCBkdXIsIHosIHBpYywgdGV4dCkgew0KICAgICAgLy9HYW1lLnBhcnRpY2xlQWRkKHBvcyBYLHBvcyBZLHNwZWVkIFgsc3BlZWQgWSxzaXplIChtdWx0aXBsaWVyKSxkdXJhdGlvbiAoc2Vjb25kcyksbGF5ZXIscGljdHVyZSx0ZXh0KTsNCiAgICAgIC8vcGljayB0aGUgZmlyc3QgZnJlZSAob3IgdGhlIG9sZGVzdCkgcGFydGljbGUgdG8gcmVwbGFjZSBpdA0KICAgICAgaWYgKHRydWUpIHsNCiAgICAgICAgLy9HYW1lLnByZWZzLnBhcnRpY2xlcykNCiAgICAgICAgdmFyIGhpZ2hlc3QgPSAwOw0KICAgICAgICB2YXIgaGlnaGVzdEkgPSAwOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUucGFydGljbGVzTjsgaSsrKSB7DQogICAgICAgICAgaWYgKEdhbWUucGFydGljbGVzW2ldLmxpZmUgPT0gLTEpIHsNCiAgICAgICAgICAgIGhpZ2hlc3RJID0gaTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoR2FtZS5wYXJ0aWNsZXNbaV0ubGlmZSA+IGhpZ2hlc3QpIHsNCiAgICAgICAgICAgIGhpZ2hlc3QgPSBHYW1lLnBhcnRpY2xlc1tpXS5saWZlOw0KICAgICAgICAgICAgaGlnaGVzdEkgPSBpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB2YXIgYXV0byA9IDA7DQogICAgICAgIGlmICh4KSBhdXRvID0gMTsNCiAgICAgICAgdmFyIGkgPSBoaWdoZXN0STsNCiAgICAgICAgdmFyIHggPSB4IHx8IC02NDsNCiAgICAgICAgaWYgKEdhbWUuTGVmdEJhY2tncm91bmQgJiYgIWF1dG8pDQogICAgICAgICAgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIEdhbWUuTGVmdEJhY2tncm91bmQuY2FudmFzLndpZHRoKTsNCiAgICAgICAgdmFyIHkgPSB5IHx8IC02NDsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5wYXJ0aWNsZXNbaV07DQogICAgICAgIG1lLmxpZmUgPSAwOw0KICAgICAgICBtZS54ID0geDsNCiAgICAgICAgbWUueSA9IHk7DQogICAgICAgIG1lLnhkID0geGQgfHwgMDsNCiAgICAgICAgbWUueWQgPSB5ZCB8fCAwOw0KICAgICAgICBtZS5zaXplID0gc2l6ZSB8fCAxOw0KICAgICAgICBtZS56ID0geiB8fCAwOw0KICAgICAgICBtZS5kdXIgPSBkdXIgfHwgMjsNCiAgICAgICAgbWUuciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM2MCk7DQogICAgICAgIG1lLnBpY0lkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApOw0KICAgICAgICBpZiAoIXBpYykgew0KICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAiZm9vbHMiKSBwaWMgPSAic21hbGxEb2xsYXJzLnBuZyI7DQogICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2YXIgY29va2llcyA9IFtbMTAsIDBdXTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgICAgICAgICB2YXIgY29va2llID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgICAgICAgICAgaWYgKGNvb2tpZS5ib3VnaHQgPiAwICYmIGNvb2tpZS5wb29sID09ICJjb29raWUiKQ0KICAgICAgICAgICAgICAgIGNvb2tpZXMucHVzaChjb29raWUuaWNvbik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBtZS5waWNQb3MgPSBjaG9vc2UoY29va2llcyk7DQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIEdhbWUuYmFrZXJ5TmFtZS50b0xvd2VyQ2FzZSgpID09ICJvcnRpZWwiIHx8DQogICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAxIC8gMTAwMDANCiAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgbWUucGljUG9zID0gWzE3LCA1XTsNCiAgICAgICAgICAgIHBpYyA9ICJpY29ucy5wbmciOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcGljICE9PSAic3RyaW5nIikgew0KICAgICAgICAgIG1lLnBpY1BvcyA9IHBpYzsNCiAgICAgICAgICBwaWMgPSAiaWNvbnMucG5nIjsNCiAgICAgICAgfQ0KICAgICAgICBtZS5waWMgPSBwaWMgfHwgInNtYWxsQ29va2llcy5wbmciOw0KICAgICAgICBtZS50ZXh0ID0gdGV4dCB8fCAwOw0KICAgICAgICByZXR1cm4gbWU7DQogICAgICB9DQogICAgICByZXR1cm4ge307DQogICAgfTsNCiAgICBHYW1lLnBhcnRpY2xlc0RyYXcgPSBmdW5jdGlvbiAoeikgew0KICAgICAgdmFyIGN0eCA9IEdhbWUuTGVmdEJhY2tncm91bmQ7DQogICAgICBjdHguZmlsbFN0eWxlID0gIiNmZmYiOw0KICAgICAgY3R4LmZvbnQgPSAiMjBweCBNZXJyaXdlYXRoZXIiOw0KICAgICAgY3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOw0KDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUucGFydGljbGVzTjsgaSsrKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUucGFydGljbGVzW2ldOw0KICAgICAgICBpZiAobWUueiA9PSB6KSB7DQogICAgICAgICAgaWYgKG1lLmxpZmUgIT0gLTEpIHsNCiAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gMSAtIG1lLmxpZmUgLyAoR2FtZS5mcHMgKiBtZS5kdXIpOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gb3BhY2l0eTsNCiAgICAgICAgICAgIGlmIChtZS50ZXh0KSB7DQogICAgICAgICAgICAgIGN0eC5maWxsVGV4dChtZS50ZXh0LCBtZS54LCBtZS55KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUobWUueCwgbWUueSk7DQogICAgICAgICAgICAgIGN0eC5yb3RhdGUoKG1lLnIgLyAzNjApICogTWF0aC5QSSAqIDIpOw0KICAgICAgICAgICAgICB2YXIgdyA9IDY0Ow0KICAgICAgICAgICAgICB2YXIgaCA9IDY0Ow0KICAgICAgICAgICAgICBpZiAobWUucGljID09ICJpY29ucy5wbmciKSB7DQogICAgICAgICAgICAgICAgdyA9IDQ4Ow0KICAgICAgICAgICAgICAgIGggPSA0ODsNCiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICAgICAgUGljKG1lLnBpYyksDQogICAgICAgICAgICAgICAgICBtZS5waWNQb3NbMF0gKiB3LA0KICAgICAgICAgICAgICAgICAgbWUucGljUG9zWzFdICogaCwNCiAgICAgICAgICAgICAgICAgIHcsDQogICAgICAgICAgICAgICAgICBoLA0KICAgICAgICAgICAgICAgICAgKC13IC8gMikgKiBtZS5zaXplLA0KICAgICAgICAgICAgICAgICAgKC1oIC8gMikgKiBtZS5zaXplLA0KICAgICAgICAgICAgICAgICAgdyAqIG1lLnNpemUsDQogICAgICAgICAgICAgICAgICBoICogbWUuc2l6ZQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgbWUucGljID09ICJ3cmlua2xlckJpdHMucG5nIiB8fA0KICAgICAgICAgICAgICAgICAgbWUucGljID09ICJzaGlueVdyaW5rbGVyQml0cy5wbmciDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICB3ID0gMTAwOw0KICAgICAgICAgICAgICAgICAgaCA9IDIwMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgIFBpYyhtZS5waWMpLA0KICAgICAgICAgICAgICAgICAgKG1lLnBpY0lkICUgOCkgKiB3LA0KICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgIHcsDQogICAgICAgICAgICAgICAgICBoLA0KICAgICAgICAgICAgICAgICAgKC13IC8gMikgKiBtZS5zaXplLA0KICAgICAgICAgICAgICAgICAgKC1oIC8gMikgKiBtZS5zaXplLA0KICAgICAgICAgICAgICAgICAgdyAqIG1lLnNpemUsDQogICAgICAgICAgICAgICAgICBoICogbWUuc2l6ZQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KDQogICAgLy90ZXh0IHBhcnRpY2xlcyAocG9wdXBzIGV0YykNCiAgICBHYW1lLnRleHRQYXJ0aWNsZXMgPSBbXTsNCiAgICBHYW1lLnRleHRQYXJ0aWNsZXNZID0gMDsNCiAgICB2YXIgc3RyID0gIiI7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyMDsgaSsrKSB7DQogICAgICBHYW1lLnRleHRQYXJ0aWNsZXNbaV0gPSB7IHg6IDAsIHk6IDAsIGxpZmU6IC0xLCB0ZXh0OiAiIiB9Ow0KICAgICAgc3RyICs9ICc8ZGl2IGlkPSJwYXJ0aWNsZScgKyBpICsgJyIgY2xhc3M9InBhcnRpY2xlIHRpdGxlIj48L2Rpdj4nOw0KICAgIH0NCiAgICBsKCJwYXJ0aWNsZXMiKS5pbm5lckhUTUwgPSBzdHI7DQogICAgR2FtZS50ZXh0UGFydGljbGVzVXBkYXRlID0gZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnRleHRQYXJ0aWNsZXMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS50ZXh0UGFydGljbGVzW2ldOw0KICAgICAgICBpZiAobWUubGlmZSAhPSAtMSkgew0KICAgICAgICAgIG1lLmxpZmUrKzsNCiAgICAgICAgICBpZiAobWUubGlmZSA+PSBHYW1lLmZwcyAqIDQpIHsNCiAgICAgICAgICAgIHZhciBlbCA9IG1lLmw7DQogICAgICAgICAgICBtZS5saWZlID0gLTE7DQogICAgICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMDsNCiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLnRleHRQYXJ0aWNsZXNBZGQgPSBmdW5jdGlvbiAodGV4dCwgZWwsIHBvc1gsIHBvc1kpIHsNCiAgICAgIC8vcGljayB0aGUgZmlyc3QgZnJlZSAob3IgdGhlIG9sZGVzdCkgcGFydGljbGUgdG8gcmVwbGFjZSBpdA0KICAgICAgdmFyIGhpZ2hlc3QgPSAwOw0KICAgICAgdmFyIGhpZ2hlc3RJID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS50ZXh0UGFydGljbGVzKSB7DQogICAgICAgIGlmIChHYW1lLnRleHRQYXJ0aWNsZXNbaV0ubGlmZSA9PSAtMSkgew0KICAgICAgICAgIGhpZ2hlc3RJID0gaTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS50ZXh0UGFydGljbGVzW2ldLmxpZmUgPiBoaWdoZXN0KSB7DQogICAgICAgICAgaGlnaGVzdCA9IEdhbWUudGV4dFBhcnRpY2xlc1tpXS5saWZlOw0KICAgICAgICAgIGhpZ2hlc3RJID0gaTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdmFyIGkgPSBoaWdoZXN0STsNCiAgICAgIHZhciBub1N0YWNrID0gMDsNCiAgICAgIGlmICh0eXBlb2YgcG9zWCAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIHBvc1kgIT09ICJ1bmRlZmluZWQiKSB7DQogICAgICAgIHggPSBwb3NYOw0KICAgICAgICB5ID0gcG9zWTsNCiAgICAgICAgbm9TdGFjayA9IDE7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB2YXIgeCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDQwOw0KICAgICAgICB2YXIgeSA9IDA7IC8vKyhNYXRoLnJhbmRvbSgpLTAuNSkqNDA7DQogICAgICAgIGlmICghZWwpIHsNCiAgICAgICAgICB2YXIgcmVjdCA9IEdhbWUuYm91bmRzOw0KICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcigocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyKTsNCiAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocmVjdC5ib3R0b20pIC0gR2FtZS5tb2JpbGUgKiA2NDsNCiAgICAgICAgICB4ICs9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDQwOw0KICAgICAgICAgIHkgKz0gMDsgLy8oTWF0aC5yYW5kb20oKS0wLjUpKjQwOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoIW5vU3RhY2spIHkgLT0gR2FtZS50ZXh0UGFydGljbGVzWTsNCg0KICAgICAgeCA9IE1hdGgubWF4KEdhbWUuYm91bmRzLmxlZnQgKyAyMDAsIHgpOw0KICAgICAgeCA9IE1hdGgubWluKEdhbWUuYm91bmRzLnJpZ2h0IC0gMjAwLCB4KTsNCiAgICAgIHkgPSBNYXRoLm1heChHYW1lLmJvdW5kcy50b3AgKyAzMiArIChBcHAgPyAzMiA6IDApLCB5KTsNCg0KICAgICAgdmFyIG1lID0gR2FtZS50ZXh0UGFydGljbGVzW2ldOw0KICAgICAgaWYgKCFtZS5sKSBtZS5sID0gbCgicGFydGljbGUiICsgaSk7DQogICAgICBtZS5saWZlID0gMDsNCiAgICAgIG1lLnggPSB4Ow0KICAgICAgbWUueSA9IHk7DQogICAgICBtZS50ZXh0ID0gdGV4dDsNCiAgICAgIG1lLmwuaW5uZXJIVE1MID0gdGV4dDsNCiAgICAgIG1lLmwuc3R5bGUubGVmdCA9IE1hdGguZmxvb3IoR2FtZS50ZXh0UGFydGljbGVzW2ldLnggLSAyMDApICsgInB4IjsNCiAgICAgIG1lLmwuc3R5bGUuYm90dG9tID0gTWF0aC5mbG9vcigtR2FtZS50ZXh0UGFydGljbGVzW2ldLnkpICsgInB4IjsNCiAgICAgIGZvciAodmFyIGlpIGluIEdhbWUudGV4dFBhcnRpY2xlcykgew0KICAgICAgICBpZiAoaWkgIT0gaSkNCiAgICAgICAgICAoDQogICAgICAgICAgICBHYW1lLnRleHRQYXJ0aWNsZXNbaWldLmwgfHwgbCgicGFydGljbGUiICsgaWkpDQogICAgICAgICAgKS5zdHlsZS56SW5kZXggPSAxMDAwMDAwMDA7DQogICAgICB9DQogICAgICBtZS5sLnN0eWxlLnpJbmRleCA9IDEwMDAwMDAwMTsNCiAgICAgIG1lLmwuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICBtZS5sLmNsYXNzTmFtZSA9ICJwYXJ0aWNsZSB0aXRsZSI7DQogICAgICB2b2lkIG1lLmwub2Zmc2V0V2lkdGg7DQogICAgICBtZS5sLmNsYXNzTmFtZSA9ICJwYXJ0aWNsZSB0aXRsZSByaXNpbmdVcExpbmdlciI7DQogICAgICBpZiAoIW5vU3RhY2spIEdhbWUudGV4dFBhcnRpY2xlc1kgKz0gNjA7DQogICAgfTsNCiAgICBHYW1lLnBvcHVwcyA9IDE7DQogICAgR2FtZS5Qb3B1cCA9IGZ1bmN0aW9uICh0ZXh0LCB4LCB5KSB7DQogICAgICBpZiAoR2FtZS5wb3B1cHMpIEdhbWUudGV4dFBhcnRpY2xlc0FkZCh0ZXh0LCAwLCB4LCB5KTsNCiAgICB9Ow0KDQogICAgLy9kaXNwbGF5IHNwYXJrbGVzIGF0IGEgc2V0IHBvc2l0aW9uDQogICAgR2FtZS5zcGFya2xlcyA9IGwoInNwYXJrbGVzIik7DQogICAgR2FtZS5zcGFya2xlc1QgPSAwOw0KICAgIEdhbWUuc3BhcmtsZXNGcmFtZXMgPSAxNjsNCiAgICBHYW1lLlNwYXJrbGVBdCA9IGZ1bmN0aW9uICh4LCB5KSB7DQogICAgICBpZiAoR2FtZS5ibGVuZE1vZGVzT24pIHsNCiAgICAgICAgR2FtZS5zcGFya2xlc1QgPSBHYW1lLnNwYXJrbGVzRnJhbWVzICsgMTsNCiAgICAgICAgR2FtZS5zcGFya2xlcy5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAiMHB4IDBweCI7DQogICAgICAgIEdhbWUuc3BhcmtsZXMuc3R5bGUubGVmdCA9IE1hdGguZmxvb3IoeCAtIDY0KSArICJweCI7DQogICAgICAgIEdhbWUuc3BhcmtsZXMuc3R5bGUudG9wID0gTWF0aC5mbG9vcih5IC0gNjQpICsgInB4IjsNCiAgICAgICAgR2FtZS5zcGFya2xlcy5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuU3BhcmtsZU9uID0gZnVuY3Rpb24gKGVsKSB7DQogICAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kcygpOw0KICAgICAgR2FtZS5TcGFya2xlQXQoDQogICAgICAgIChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIsDQogICAgICAgIChyZWN0LnRvcCArIHJlY3QuYm90dG9tKSAvIDIgLSAyNA0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCU5PVElGSUNBVElPTlMNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICAvL21heWJlIGRvIGFsbCB0aGlzIG1lc3Mgd2l0aCBwcm9wZXIgRE9NIGluc3RlYWQgb2YgcmV3cml0aW5nIHRoZSBpbm5lckhUTUwNCiAgICBHYW1lLk5vdGVzID0gW107DQogICAgR2FtZS5Ob3Rlc0J5SWQgPSBbXTsNCiAgICBHYW1lLm5vdGVJZCA9IDA7DQogICAgR2FtZS5ub3RlTCA9IGwoIm5vdGVzIik7DQogICAgR2FtZS5Ob3RlID0gZnVuY3Rpb24gKHRpdGxlLCBkZXNjLCBwaWMsIHF1aWNrKSB7DQogICAgICB0aGlzLnRpdGxlID0gdGl0bGU7DQogICAgICB0aGlzLmRlc2MgPSBkZXNjIHx8ICIiOw0KICAgICAgdGhpcy5waWMgPSBwaWMgfHwgIiI7DQogICAgICB0aGlzLmlkID0gR2FtZS5ub3RlSWQ7DQogICAgICB0aGlzLmRhdGUgPSBEYXRlLm5vdygpOw0KICAgICAgdGhpcy5xdWljayA9IHF1aWNrIHx8IDA7DQogICAgICB0aGlzLmxpZmUgPSAodGhpcy5xdWljayB8fCAxKSAqIEdhbWUuZnBzOw0KICAgICAgdGhpcy5sID0gMDsNCiAgICAgIHRoaXMuaGVpZ2h0ID0gMDsNCiAgICAgIHRoaXMudG9vbHRpcCA9IDA7DQogICAgICBHYW1lLm5vdGVJZCsrOw0KICAgICAgR2FtZS5Ob3Rlc0J5SWRbdGhpcy5pZF0gPSB0aGlzOw0KICAgICAgR2FtZS5Ob3Rlcy51bnNoaWZ0KHRoaXMpOw0KICAgICAgaWYgKEdhbWUuTm90ZXMubGVuZ3RoID4gNTApIEdhbWUuTm90ZXMucG9wKCk7DQogICAgICAvL0dhbWUuTm90ZXMucHVzaCh0aGlzKTsNCiAgICAgIC8vaWYgKEdhbWUuTm90ZXMubGVuZ3RoPjUwKSBHYW1lLk5vdGVzLnNoaWZ0KCk7DQogICAgICBHYW1lLlVwZGF0ZU5vdGVzKCk7DQogICAgfTsNCiAgICBHYW1lLkNsb3NlTm90ZSA9IGZ1bmN0aW9uIChpZCkgew0KICAgICAgdmFyIG1lID0gR2FtZS5Ob3Rlc0J5SWRbaWRdOw0KICAgICAgaWYgKEdhbWUudG9vbHRpcC5mcm9tICYmIEdhbWUudG9vbHRpcC5mcm9tLmlkLmluZGV4T2YoIm5vdGUtIikgPT0gMCkNCiAgICAgICAgR2FtZS50b29sdGlwLmhpZGUoKTsNCiAgICAgIEdhbWUuTm90ZXMuc3BsaWNlKEdhbWUuTm90ZXMuaW5kZXhPZihtZSksIDEpOw0KICAgICAgLy9HYW1lLk5vdGVzQnlJZC5zcGxpY2UoR2FtZS5Ob3Rlc0J5SWQuaW5kZXhPZihtZSksMSk7DQogICAgICBHYW1lLk5vdGVzQnlJZFtpZF0gPSBudWxsOw0KICAgICAgR2FtZS5VcGRhdGVOb3RlcygpOw0KICAgIH07DQogICAgR2FtZS5DbG9zZU5vdGVzID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5Ob3RlcyA9IFtdOw0KICAgICAgR2FtZS5Ob3Rlc0J5SWQgPSBbXTsNCiAgICAgIEdhbWUudG9vbHRpcC5oaWRlKCk7DQogICAgICBHYW1lLlVwZGF0ZU5vdGVzKCk7DQogICAgfTsNCiAgICBHYW1lLlVwZGF0ZU5vdGVzID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgdmFyIHJlbWFpbmluZyA9IEdhbWUuTm90ZXMubGVuZ3RoOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk5vdGVzKSB7DQogICAgICAgIGlmIChpIDwgNSkgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuTm90ZXNbaV07DQogICAgICAgICAgdmFyIHBpYyA9ICIiOw0KICAgICAgICAgIGlmIChtZS5waWMgIT0gIiIpDQogICAgICAgICAgICBwaWMgPSAnPGRpdiBjbGFzcz0iaWNvbiIgc3R5bGU9IicgKyB3cml0ZUljb24obWUucGljKSArICciPjwvZGl2Pic7DQogICAgICAgICAgc3RyID0NCiAgICAgICAgICAgICc8ZGl2IGlkPSJub3RlLScgKw0KICAgICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICAgJyIgJyArDQogICAgICAgICAgICAobWUudG9vbHRpcA0KICAgICAgICAgICAgICA/IEdhbWUuZ2V0RHluYW1pY1Rvb2x0aXAobWUudG9vbHRpcCwgInRoaXMiLCB0cnVlKSArICIgIg0KICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAnY2xhc3M9ImZyYW1lZCBub3RlICcgKw0KICAgICAgICAgICAgKG1lLnBpYyAhPSAiIiA/ICJoYXNwaWMiIDogIm5vcGljIikgKw0KICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgIChtZS5kZXNjICE9ICIiID8gImhhc2Rlc2MiIDogIm5vZGVzYyIpICsNCiAgICAgICAgICAgICciPjxkaXYgY2xhc3M9ImNsb3NlIiBvbmNsaWNrPSJQbGF5U291bmQoXCdzbmQvdGljay5tcDNcJyk7R2FtZS5DbG9zZU5vdGUoJyArDQogICAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgICAnKTsiPng8L2Rpdj4nICsNCiAgICAgICAgICAgIHBpYyArDQogICAgICAgICAgICAnPGRpdiBjbGFzcz0idGV4dCI+PGgzPicgKw0KICAgICAgICAgICAgbWUudGl0bGUgKw0KICAgICAgICAgICAgIjwvaDM+IiArDQogICAgICAgICAgICAobWUuZGVzYyAhPSAiIg0KICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48aDU+JyArIG1lLmRlc2MgKyAiPC9oNT4iDQogICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICI8L2Rpdj48L2Rpdj4iICsNCiAgICAgICAgICAgIHN0cjsNCiAgICAgICAgICByZW1haW5pbmctLTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKHJlbWFpbmluZyA+IDApDQogICAgICAgIHN0ciA9DQogICAgICAgICAgJzxkaXYgY2xhc3M9InJlbWFpbmluZyI+JyArDQogICAgICAgICAgbG9jKCIrJTEgbW9yZSBub3RpZmljYXRpb24uIiwgTEJlYXV0aWZ5KHJlbWFpbmluZykpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgc3RyOw0KICAgICAgaWYgKEdhbWUuTm90ZXMubGVuZ3RoID4gMSkgew0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGRpdiBjbGFzcz0iZnJhbWVkIGNsb3NlIHNpZGVub3RlIiBvbmNsaWNrPSJQbGF5U291bmQoXCdzbmQvdGljay5tcDNcJyk7R2FtZS5DbG9zZU5vdGVzKCk7Ij54PC9kaXY+JzsNCiAgICAgIH0NCiAgICAgIEdhbWUubm90ZUwuaW5uZXJIVE1MID0gc3RyOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk5vdGVzKSB7DQogICAgICAgIG1lLmwgPSAwOw0KICAgICAgICBpZiAoaSA8IDUpIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLk5vdGVzW2ldOw0KICAgICAgICAgIG1lLmwgPSBsKCJub3RlLSIgKyBtZS5pZCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuTm90ZXNMb2dpYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5Ob3Rlcykgew0KICAgICAgICBpZiAoR2FtZS5Ob3Rlc1tpXS5xdWljayA+IDApIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLk5vdGVzW2ldOw0KICAgICAgICAgIG1lLmxpZmUtLTsNCiAgICAgICAgICBpZiAobWUubGlmZSA8PSAwKSBHYW1lLkNsb3NlTm90ZShtZS5pZCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuTm90ZXNEcmF3ID0gZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk5vdGVzKSB7DQogICAgICAgIGlmIChHYW1lLk5vdGVzW2ldLnF1aWNrID4gMCkgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuTm90ZXNbaV07DQogICAgICAgICAgaWYgKG1lLmwpIHsNCiAgICAgICAgICAgIGlmIChtZS5saWZlIDwgMTApIHsNCiAgICAgICAgICAgICAgbWUubC5zdHlsZS5vcGFjaXR5ID0gbWUubGlmZSAvIDEwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5Ob3RpZnkgPSBmdW5jdGlvbiAodGl0bGUsIGRlc2MsIHBpYywgcXVpY2ssIG5vTG9nKSB7DQogICAgICBpZiAoR2FtZS5wcmVmcy5ub3RpZnMpIHsNCiAgICAgICAgcXVpY2sgPSBNYXRoLm1pbig2LCBxdWljayk7DQogICAgICAgIGlmICghcXVpY2spIHF1aWNrID0gNjsNCiAgICAgIH0NCiAgICAgIGRlc2MgPSByZXBsYWNlQWxsKA0KICAgICAgICAiPT1DTE9TRVRISVMoKT09IiwNCiAgICAgICAgIkdhbWUuQ2xvc2VOb3RlKCIgKyBHYW1lLm5vdGVJZCArICIpOyIsDQogICAgICAgIGRlc2MNCiAgICAgICk7DQogICAgICBpZiAoR2FtZS5wb3B1cHMpIG5ldyBHYW1lLk5vdGUodGl0bGUsIGRlc2MsIHBpYywgcXVpY2spOw0KICAgICAgaWYgKCFub0xvZykgR2FtZS5BZGRUb0xvZygiPGI+IiArIHRpdGxlICsgIjwvYj4gfCAiICsgZGVzYyk7DQogICAgfTsNCiAgICBHYW1lLk5vdGlmeVRvb2x0aXAgPSBmdW5jdGlvbiAoY29udGVudCkgew0KICAgICAgLy9hdHRhY2hlcyBhIHRvb2x0aXAgdG8gdGhlIGxhc3Qgc3Bhd25lZCBub3RlDQogICAgICBpZiAoIUdhbWUuTm90ZXNCeUlkW0dhbWUubm90ZUlkIC0gMV0pIHJldHVybiBmYWxzZTsNCiAgICAgIHZhciBtZSA9IEdhbWUuTm90ZXNCeUlkW0dhbWUubm90ZUlkIC0gMV07DQogICAgICBtZS50b29sdGlwID0gY29udGVudDsNCiAgICAgIEdhbWUuVXBkYXRlTm90ZXMoKTsNCiAgICB9Ow0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCVBST01QVA0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuZGFya2VuTCA9IGwoImRhcmtlbiIpOw0KICAgIEFkZEV2ZW50KEdhbWUuZGFya2VuTCwgImNsaWNrIiwgZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEdhbWUucHJvbXB0Tm9DbG9zZSkgew0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgR2FtZS5DbGljayA9IDA7DQogICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2tPZmYubXAzIik7DQogICAgICAgIEdhbWUuQ2xvc2VQcm9tcHQoKTsNCiAgICAgIH0NCiAgICB9KTsNCiAgICBHYW1lLnByb21wdEwgPSBsKCJwcm9tcHRDb250ZW50Iik7DQogICAgR2FtZS5wcm9tcHRBbmNob3JMID0gbCgicHJvbXB0QW5jaG9yIik7DQogICAgR2FtZS5wcm9tcHRXcmFwTCA9IGwoInByb21wdCIpOw0KICAgIEdhbWUucHJvbXB0Q29uZmlybSA9ICIiOw0KICAgIEdhbWUucHJvbXB0T24gPSAwOw0KICAgIEdhbWUucHJvbXB0VXBkYXRlRnVuYyA9IDA7DQogICAgR2FtZS5wcm9tcHRPcHRpb25zTiA9IDA7DQogICAgR2FtZS5wcm9tcHRPcHRpb25Gb2N1cyA9IDA7DQogICAgR2FtZS5wcm9tcHROb0Nsb3NlID0gZmFsc2U7DQogICAgR2FtZS5VcGRhdGVQcm9tcHQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5wcm9tcHRVcGRhdGVGdW5jKSBHYW1lLnByb21wdFVwZGF0ZUZ1bmMoKTsNCiAgICAgIEdhbWUucHJvbXB0QW5jaG9yTC5zdHlsZS50b3AgPQ0KICAgICAgICBNYXRoLmZsb29yKChHYW1lLndpbmRvd0ggLSBHYW1lLnByb21wdFdyYXBMLm9mZnNldEhlaWdodCkgLyAyIC0gMTYpICsNCiAgICAgICAgInB4IjsNCiAgICB9Ow0KICAgIEdhbWUuUHJvbXB0ID0gZnVuY3Rpb24gKGNvbnRlbnQsIG9wdGlvbnMsIHVwZGF0ZUZ1bmMsIHN0eWxlKSB7DQogICAgICBHYW1lLnByb21wdE5vQ2xvc2UgPSBmYWxzZTsNCiAgICAgIGlmICh1cGRhdGVGdW5jKSBHYW1lLnByb21wdFVwZGF0ZUZ1bmMgPSB1cGRhdGVGdW5jOw0KICAgICAgaWYgKHN0eWxlKSBHYW1lLnByb21wdFdyYXBMLmNsYXNzTmFtZSA9ICJmcmFtZWQgIiArIHN0eWxlOw0KICAgICAgZWxzZSBHYW1lLnByb21wdFdyYXBMLmNsYXNzTmFtZSA9ICJmcmFtZWQiOw0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgc3RyICs9IGNvbnRlbnQ7DQogICAgICBpZiAoc3RyLmluZGV4T2YoIjxpZCAiKSA9PSAwKSB7DQogICAgICAgIHZhciBpZCA9IHN0ci5zdWJzdHJpbmcoNCwgc3RyLmluZGV4T2YoIj4iKSk7DQogICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoc3RyLmluZGV4T2YoIj4iKSArIDEpOw0KICAgICAgICBzdHIgPSAnPGRpdiBpZD0icHJvbXB0Q29udGVudCcgKyBpZCArICciPicgKyBzdHIgKyAiPC9kaXY+IjsNCiAgICAgIH0NCiAgICAgIGlmIChzdHIuaW5kZXhPZigiPG5vQ2xvc2U+IikgIT0gLTEpIHsNCiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoIjxub0Nsb3NlPiIsICIiKTsNCiAgICAgICAgR2FtZS5wcm9tcHROb0Nsb3NlID0gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIHZhciBvcHRzID0gIiI7DQogICAgICBHYW1lLnByb21wdE9wdGlvbnNOID0gMDsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAob3B0aW9uc1tpXSA9PSAiYnIiKSB7DQogICAgICAgICAgLy9qdXN0IGEgbGluZWJyZWFrDQogICAgICAgICAgb3B0cyArPSAiPGJyPiI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zW2ldID09ICJzdHJpbmciKQ0KICAgICAgICAgICAgb3B0aW9uc1tpXSA9IFsNCiAgICAgICAgICAgICAgb3B0aW9uc1tpXSwNCiAgICAgICAgICAgICAgIlBsYXlTb3VuZCgnc25kL3RpY2tPZmYubXAzJyk7R2FtZS5DbG9zZVByb21wdCgpOyIsDQogICAgICAgICAgICBdOw0KICAgICAgICAgIGVsc2UgaWYgKCFvcHRpb25zW2ldWzFdKQ0KICAgICAgICAgICAgb3B0aW9uc1tpXSA9IFsNCiAgICAgICAgICAgICAgb3B0aW9uc1tpXVswXSwNCiAgICAgICAgICAgICAgIlBsYXlTb3VuZCgnc25kL3RpY2tPZmYubXAzJyk7R2FtZS5DbG9zZVByb21wdCgpOyIsDQogICAgICAgICAgICAgIG9wdGlvbnNbaV1bMl0sDQogICAgICAgICAgICBdOw0KICAgICAgICAgIGVsc2Ugb3B0aW9uc1tpXVsxXSA9ICJQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpOyIgKyBvcHRpb25zW2ldWzFdOw0KICAgICAgICAgIG9wdGlvbnNbaV1bMV0gPSBvcHRpb25zW2ldWzFdDQogICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAiJiMzOTsiKQ0KICAgICAgICAgICAgLnJlcGxhY2UoLyIvZywgIiYjMzQ7Iik7DQogICAgICAgICAgb3B0cyArPQ0KICAgICAgICAgICAgJzxhIGlkPSJwcm9tcHRPcHRpb24nICsNCiAgICAgICAgICAgIGkgKw0KICAgICAgICAgICAgJyIgY2xhc3M9Im9wdGlvbiIgJyArDQogICAgICAgICAgICAob3B0aW9uc1tpXVsyXSA/ICdzdHlsZT0iJyArIG9wdGlvbnNbaV1bMl0gKyAnIiAnIDogIiIpICsNCiAgICAgICAgICAgICIiICsNCiAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgJz0iJyArDQogICAgICAgICAgICBvcHRpb25zW2ldWzFdICsNCiAgICAgICAgICAgICciPicgKw0KICAgICAgICAgICAgb3B0aW9uc1tpXVswXSArDQogICAgICAgICAgICAiPC9hPiI7DQogICAgICAgICAgR2FtZS5wcm9tcHRPcHRpb25zTisrOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBHYW1lLnByb21wdEwuaW5uZXJIVE1MID0NCiAgICAgICAgc3RyICsgJzxkaXYgY2xhc3M9Im9wdGlvbkJveCI+JyArIG9wdHMgKyAiPC9kaXY+IjsNCiAgICAgIEdhbWUucHJvbXB0QW5jaG9yTC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIEdhbWUuZGFya2VuTC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIEdhbWUucHJvbXB0TC5mb2N1cygpOw0KICAgICAgR2FtZS5wcm9tcHRPbiA9IDE7DQogICAgICBHYW1lLnByb21wdE9wdGlvbkZvY3VzID0gMDsNCiAgICAgIEdhbWUuRm9jdXNQcm9tcHRPcHRpb24oMCk7DQogICAgICBHYW1lLlVwZGF0ZVByb21wdCgpOw0KICAgICAgaWYgKCFHYW1lLnByb21wdE5vQ2xvc2UpIGwoInByb21wdENsb3NlIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICBlbHNlIGwoInByb21wdENsb3NlIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICB9Ow0KICAgIEdhbWUuQ2xvc2VQcm9tcHQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUdhbWUucHJvbXB0T24pIHJldHVybiBmYWxzZTsNCiAgICAgIEdhbWUucHJvbXB0QW5jaG9yTC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgR2FtZS5kYXJrZW5MLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICBHYW1lLnByb21wdE9uID0gMDsNCiAgICAgIEdhbWUucHJvbXB0VXBkYXRlRnVuYyA9IDA7DQogICAgICBHYW1lLnByb21wdE9wdGlvbkZvY3VzID0gMDsNCiAgICAgIEdhbWUucHJvbXB0T3B0aW9uc04gPSAwOw0KICAgICAgR2FtZS5wcm9tcHROb0Nsb3NlID0gZmFsc2U7DQogICAgfTsNCiAgICBHYW1lLkNvbmZpcm1Qcm9tcHQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoDQogICAgICAgIEdhbWUucHJvbXB0T24gJiYNCiAgICAgICAgbCgicHJvbXB0T3B0aW9uIiArIEdhbWUucHJvbXB0T3B0aW9uRm9jdXMpICYmDQogICAgICAgIGwoInByb21wdE9wdGlvbiIgKyBHYW1lLnByb21wdE9wdGlvbkZvY3VzKS5zdHlsZS5kaXNwbGF5ICE9ICJub25lIg0KICAgICAgKQ0KICAgICAgICBGaXJlRXZlbnQobCgicHJvbXB0T3B0aW9uIiArIEdhbWUucHJvbXB0T3B0aW9uRm9jdXMpLCAiY2xpY2siKTsNCiAgICB9Ow0KICAgIEdhbWUuRm9jdXNQcm9tcHRPcHRpb24gPSBmdW5jdGlvbiAoZGlyLCB0cnlOKSB7DQogICAgICB2YXIgaWQgPSBHYW1lLnByb21wdE9wdGlvbkZvY3VzICsgZGlyOw0KICAgICAgaWYgKGlkIDwgMCkgaWQgPSBHYW1lLnByb21wdE9wdGlvbnNOIC0gMTsNCiAgICAgIGlmIChpZCA+PSBHYW1lLnByb21wdE9wdGlvbnNOKSBpZCA9IDA7DQogICAgICB3aGlsZSAoDQogICAgICAgIGlkID49IDAgJiYNCiAgICAgICAgaWQgPCBHYW1lLnByb21wdE9wdGlvbnNOICYmDQogICAgICAgICghbCgicHJvbXB0T3B0aW9uIiArIGlkKSB8fA0KICAgICAgICAgIGwoInByb21wdE9wdGlvbiIgKyBpZCkuc3R5bGUuZGlzcGxheSA9PSAibm9uZSIpDQogICAgICApIHsNCiAgICAgICAgaWQgKz0gZGlyIHx8IDE7DQogICAgICB9DQogICAgICBpZiAoDQogICAgICAgIGwoInByb21wdE9wdGlvbiIgKyBpZCkgJiYNCiAgICAgICAgbCgicHJvbXB0T3B0aW9uIiArIGlkKS5zdHlsZS5kaXNwbGF5ICE9ICJub25lIg0KICAgICAgKSB7DQogICAgICAgIGlmIChsKCJwcm9tcHRPcHRpb24iICsgR2FtZS5wcm9tcHRPcHRpb25Gb2N1cykpDQogICAgICAgICAgbCgicHJvbXB0T3B0aW9uIiArIEdhbWUucHJvbXB0T3B0aW9uRm9jdXMpLmNsYXNzTGlzdC5yZW1vdmUoDQogICAgICAgICAgICAiZm9jdXNlZCINCiAgICAgICAgICApOw0KICAgICAgICBHYW1lLnByb21wdE9wdGlvbkZvY3VzID0gaWQ7DQogICAgICAgIGlmIChsKCJwcm9tcHRPcHRpb24iICsgR2FtZS5wcm9tcHRPcHRpb25Gb2N1cykpDQogICAgICAgICAgbCgicHJvbXB0T3B0aW9uIiArIEdhbWUucHJvbXB0T3B0aW9uRm9jdXMpLmNsYXNzTGlzdC5hZGQoImZvY3VzZWQiKTsNCiAgICAgIH0gZWxzZSBpZiAoIXRyeU4gJiYgZGlyICE9IDApIHsNCiAgICAgICAgR2FtZS5wcm9tcHRPcHRpb25Gb2N1cyA9IGlkOw0KICAgICAgICBHYW1lLkZvY3VzUHJvbXB0T3B0aW9uKGRpciwgMSk7DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlNRU5VUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUuY3NzQ2xhc3NlcyA9IFtdOw0KICAgIEdhbWUuYWRkQ2xhc3MgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgaWYgKEdhbWUuY3NzQ2xhc3Nlcy5pbmRleE9mKHdoYXQpID09IC0xKSBHYW1lLmNzc0NsYXNzZXMucHVzaCh3aGF0KTsNCiAgICAgIEdhbWUudXBkYXRlQ2xhc3NlcygpOw0KICAgIH07DQogICAgR2FtZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICB2YXIgaSA9IEdhbWUuY3NzQ2xhc3Nlcy5pbmRleE9mKHdoYXQpOw0KICAgICAgaWYgKGkgIT0gLTEpIHsNCiAgICAgICAgR2FtZS5jc3NDbGFzc2VzLnNwbGljZShpLCAxKTsNCiAgICAgIH0NCiAgICAgIEdhbWUudXBkYXRlQ2xhc3NlcygpOw0KICAgIH07DQogICAgR2FtZS51cGRhdGVDbGFzc2VzID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5sLmNsYXNzTmFtZSA9IEdhbWUuY3NzQ2xhc3Nlcy5qb2luKCIgIik7DQogICAgfTsNCg0KICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uID0gZnVuY3Rpb24gKA0KICAgICAgcHJlZk5hbWUsDQogICAgICBidXR0b24sDQogICAgICBvbiwNCiAgICAgIG9mZiwNCiAgICAgIGNhbGxiYWNrLA0KICAgICAgaW52ZXJ0DQogICAgKSB7DQogICAgICB2YXIgaW52ZXJ0ID0gaW52ZXJ0ID8gMSA6IDA7DQogICAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9ICIiOw0KICAgICAgY2FsbGJhY2sgKz0gIlBsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7IjsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8YSBjbGFzcz0ic21hbGxGYW5jeUJ1dHRvbiBwcmVmQnV0dG9uIG9wdGlvbicgKw0KICAgICAgICAoR2FtZS5wcmVmc1twcmVmTmFtZV0gXiBpbnZlcnQgPyAiIiA6ICIgb2ZmIikgKw0KICAgICAgICAnIiBpZD0iJyArDQogICAgICAgIGJ1dHRvbiArDQogICAgICAgICciICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgIj1cIkdhbWUuVG9nZ2xlKCciICsNCiAgICAgICAgcHJlZk5hbWUgKw0KICAgICAgICAiJywnIiArDQogICAgICAgIGJ1dHRvbiArDQogICAgICAgICInLCciICsNCiAgICAgICAgb24gKw0KICAgICAgICAiJywnIiArDQogICAgICAgIG9mZiArDQogICAgICAgICInLCciICsNCiAgICAgICAgaW52ZXJ0ICsNCiAgICAgICAgIicpOyIgKw0KICAgICAgICBjYWxsYmFjayArDQogICAgICAgICciPicgKw0KICAgICAgICAoR2FtZS5wcmVmc1twcmVmTmFtZV0gPyBvbiA6IG9mZikgKw0KICAgICAgICAiPC9hPiINCiAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLlRvZ2dsZSA9IGZ1bmN0aW9uIChwcmVmTmFtZSwgYnV0dG9uLCBvbiwgb2ZmLCBpbnZlcnQpIHsNCiAgICAgIGlmIChHYW1lLnByZWZzW3ByZWZOYW1lXSkgew0KICAgICAgICBsKGJ1dHRvbikuaW5uZXJIVE1MID0gb2ZmOw0KICAgICAgICBHYW1lLnByZWZzW3ByZWZOYW1lXSA9IDA7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBsKGJ1dHRvbikuaW5uZXJIVE1MID0gb247DQogICAgICAgIEdhbWUucHJlZnNbcHJlZk5hbWVdID0gMTsNCiAgICAgIH0NCiAgICAgIGwoYnV0dG9uKS5jbGFzc05hbWUgPQ0KICAgICAgICAic21hbGxGYW5jeUJ1dHRvbiBwcmVmQnV0dG9uIG9wdGlvbiIgKw0KICAgICAgICAoR2FtZS5wcmVmc1twcmVmTmFtZV0gXiBpbnZlcnQgPyAiIiA6ICIgb2ZmIik7DQogICAgfTsNCiAgICBHYW1lLlRvZ2dsZUZhbmN5ID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEdhbWUucHJlZnMuZmFuY3kpIEdhbWUucmVtb3ZlQ2xhc3MoIm5vRmFuY3kiKTsNCiAgICAgIGVsc2UgaWYgKCFHYW1lLnByZWZzLmZhbmN5KSBHYW1lLmFkZENsYXNzKCJub0ZhbmN5Iik7DQogICAgfTsNCiAgICBHYW1lLlRvZ2dsZUZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5wcmVmcy5maWx0ZXJzKSBHYW1lLnJlbW92ZUNsYXNzKCJub0ZpbHRlcnMiKTsNCiAgICAgIGVsc2UgaWYgKCFHYW1lLnByZWZzLmZpbHRlcnMpIEdhbWUuYWRkQ2xhc3MoIm5vRmlsdGVycyIpOw0KICAgIH07DQogICAgR2FtZS5Ub2dnbGVFeHRyYUJ1dHRvbnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUdhbWUucHJlZnMuZXh0cmFCdXR0b25zKSBHYW1lLnJlbW92ZUNsYXNzKCJleHRyYUJ1dHRvbnMiKTsNCiAgICAgIGVsc2UgaWYgKEdhbWUucHJlZnMuZXh0cmFCdXR0b25zKSBHYW1lLmFkZENsYXNzKCJleHRyYUJ1dHRvbnMiKTsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIEdhbWUuT2JqZWN0c1tpXS5tdXRlKDApOw0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5Ub2dnbGVGdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEFwcCkgQXBwLnNldEZ1bGxzY3JlZW4oR2FtZS5wcmVmcy5mdWxsc2NyZWVuKTsNCiAgICB9Ow0KDQogICAgR2FtZS5Xcml0ZVNsaWRlciA9IGZ1bmN0aW9uICgNCiAgICAgIHNsaWRlciwNCiAgICAgIGxlZnRUZXh0LA0KICAgICAgcmlnaHRUZXh0LA0KICAgICAgc3RhcnRWYWx1ZUZ1bmN0aW9uLA0KICAgICAgY2FsbGJhY2sNCiAgICApIHsNCiAgICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gIiI7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBjbGFzcz0ic2xpZGVyQm94Ij48ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0OyIgY2xhc3M9InNtYWxsRmFuY3lCdXR0b24iPicgKw0KICAgICAgICBsZWZ0VGV4dCArDQogICAgICAgICc8L2Rpdj48ZGl2IHN0eWxlPSJmbG9hdDpyaWdodDsiIGNsYXNzPSJzbWFsbEZhbmN5QnV0dG9uIiBpZD0iJyArDQogICAgICAgIHNsaWRlciArDQogICAgICAgICdSaWdodFRleHQiPicgKw0KICAgICAgICByaWdodFRleHQucmVwbGFjZSgiWyRdIiwgc3RhcnRWYWx1ZUZ1bmN0aW9uKCkpICsNCiAgICAgICAgJzwvZGl2PjxpbnB1dCBjbGFzcz0ic2xpZGVyIiBzdHlsZT0iY2xlYXI6Ym90aDsiIHR5cGU9InJhbmdlIiBtaW49IjAiIG1heD0iMTAwIiBzdGVwPSIxIiB2YWx1ZT0iJyArDQogICAgICAgIHN0YXJ0VmFsdWVGdW5jdGlvbigpICsNCiAgICAgICAgJyIgb25jaGFuZ2U9IicgKw0KICAgICAgICBjYWxsYmFjayArDQogICAgICAgICciIG9uaW5wdXQ9IicgKw0KICAgICAgICBjYWxsYmFjayArDQogICAgICAgICciIG9ubW91c2V1cD0iUGxheVNvdW5kKFwnc25kL3RpY2subXAzXCcpOyIgaWQ9IicgKw0KICAgICAgICBzbGlkZXIgKw0KICAgICAgICAnIi8+PC9kaXY+Jw0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgR2FtZS5vblBhbmVsID0gIkxlZnQiOw0KICAgIEdhbWUuYWRkQ2xhc3MoImZvY3VzIiArIEdhbWUub25QYW5lbCk7DQogICAgR2FtZS5TaG93UGFuZWwgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgaWYgKCF3aGF0KSB3aGF0ID0gIiI7DQogICAgICBpZiAoR2FtZS5vblBhbmVsICE9IHdoYXQpIHsNCiAgICAgICAgR2FtZS5yZW1vdmVDbGFzcygiZm9jdXMiICsgR2FtZS5vblBhbmVsKTsNCiAgICAgICAgR2FtZS5hZGRDbGFzcygiZm9jdXMiICsgd2hhdCk7DQogICAgICB9DQogICAgICBHYW1lLm9uUGFuZWwgPSB3aGF0Ow0KICAgIH07DQoNCiAgICBHYW1lLm9uTWVudSA9ICIiOw0KICAgIEdhbWUuU2hvd01lbnUgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgaWYgKCF3aGF0IHx8IHdoYXQgPT0gIiIpIHdoYXQgPSBHYW1lLm9uTWVudTsNCiAgICAgIGlmIChHYW1lLm9uTWVudSA9PSAiIiAmJiB3aGF0ICE9ICIiKSBHYW1lLmFkZENsYXNzKCJvbk1lbnUiKTsNCiAgICAgIGVsc2UgaWYgKEdhbWUub25NZW51ICE9ICIiICYmIHdoYXQgIT0gR2FtZS5vbk1lbnUpDQogICAgICAgIEdhbWUuYWRkQ2xhc3MoIm9uTWVudSIpOw0KICAgICAgZWxzZSBpZiAod2hhdCA9PSBHYW1lLm9uTWVudSkgew0KICAgICAgICBHYW1lLnJlbW92ZUNsYXNzKCJvbk1lbnUiKTsNCiAgICAgICAgd2hhdCA9ICIiOw0KICAgICAgfQ0KICAgICAgLy9pZiAod2hhdD09J2xvZycpIGwoJ2RvbmF0ZUJveCcpLmNsYXNzTmFtZT0nb24nOyBlbHNlIGwoJ2RvbmF0ZUJveCcpLmNsYXNzTmFtZT0nJzsNCiAgICAgIEdhbWUub25NZW51ID0gd2hhdDsNCg0KICAgICAgbCgicHJlZnNCdXR0b24iKS5jbGFzc05hbWUgPQ0KICAgICAgICBHYW1lLm9uTWVudSA9PSAicHJlZnMiID8gInBhbmVsQnV0dG9uIHNlbGVjdGVkIiA6ICJwYW5lbEJ1dHRvbiI7DQogICAgICBsKCJzdGF0c0J1dHRvbiIpLmNsYXNzTmFtZSA9DQogICAgICAgIEdhbWUub25NZW51ID09ICJzdGF0cyIgPyAicGFuZWxCdXR0b24gc2VsZWN0ZWQiIDogInBhbmVsQnV0dG9uIjsNCiAgICAgIGwoImxvZ0J1dHRvbiIpLmNsYXNzTmFtZSA9DQogICAgICAgIEdhbWUub25NZW51ID09ICJsb2ciID8gInBhbmVsQnV0dG9uIHNlbGVjdGVkIiA6ICJwYW5lbEJ1dHRvbiI7DQoNCiAgICAgIGlmIChHYW1lLm9uTWVudSA9PSAiIikgUGxheVNvdW5kKCJzbmQvY2xpY2tPZmYyLm1wMyIpOw0KICAgICAgZWxzZSBQbGF5U291bmQoInNuZC9jbGlja09uMi5tcDMiKTsNCg0KICAgICAgR2FtZS5VcGRhdGVNZW51KCk7DQoNCiAgICAgIGlmICh3aGF0ID09ICIiKSB7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICAgIGlmIChtZS5taW5pZ2FtZSAmJiBtZS5taW5pZ2FtZS5vblJlc2l6ZSkgbWUubWluaWdhbWUub25SZXNpemUoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5zYXlUaW1lID0gZnVuY3Rpb24gKHRpbWUsIGRldGFpbCkgew0KICAgICAgLy90aW1lIGlzIGEgdmFsdWUgd2hlcmUgb25lIHNlY29uZCBpcyBlcXVhbCB0byBHYW1lLmZwcyAoMzApLg0KICAgICAgLy9kZXRhaWwgc2tpcHMgZGF5cyB3aGVuID4xLCBob3VycyB3aGVuID4yLCBtaW51dGVzIHdoZW4gPjMgYW5kIHNlY29uZHMgd2hlbiA+NC4NCiAgICAgIC8vaWYgZGV0YWlsIGlzIC0xLCBvdXRwdXQgc29tZXRoaW5nIGxpa2UgIjMgaG91cnMsIDkgbWludXRlcywgNDggc2Vjb25kcyINCiAgICAgIGlmICh0aW1lIDw9IDApIHJldHVybiAiIjsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIHZhciBkZXRhaWwgPSBkZXRhaWwgfHwgMDsNCiAgICAgIHRpbWUgPSBNYXRoLmZsb29yKHRpbWUpOw0KICAgICAgaWYgKGRldGFpbCA9PSAtMSkgew0KICAgICAgICAvL3ZhciBtb250aHM9MDsNCiAgICAgICAgdmFyIGRheXMgPSAwOw0KICAgICAgICB2YXIgaG91cnMgPSAwOw0KICAgICAgICB2YXIgbWludXRlcyA9IDA7DQogICAgICAgIHZhciBzZWNvbmRzID0gMDsNCiAgICAgICAgLy9pZiAodGltZT49R2FtZS5mcHMqNjAqNjAqMjQqMzApIG1vbnRocz0oTWF0aC5mbG9vcih0aW1lLyhHYW1lLmZwcyo2MCo2MCoyNCozMCkpKTsNCiAgICAgICAgaWYgKHRpbWUgPj0gR2FtZS5mcHMgKiA2MCAqIDYwICogMjQpDQogICAgICAgICAgZGF5cyA9IE1hdGguZmxvb3IodGltZSAvIChHYW1lLmZwcyAqIDYwICogNjAgKiAyNCkpOw0KICAgICAgICBpZiAodGltZSA+PSBHYW1lLmZwcyAqIDYwICogNjApDQogICAgICAgICAgaG91cnMgPSBNYXRoLmZsb29yKHRpbWUgLyAoR2FtZS5mcHMgKiA2MCAqIDYwKSk7DQogICAgICAgIGlmICh0aW1lID49IEdhbWUuZnBzICogNjApIG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRpbWUgLyAoR2FtZS5mcHMgKiA2MCkpOw0KICAgICAgICBpZiAodGltZSA+PSBHYW1lLmZwcykgc2Vjb25kcyA9IE1hdGguZmxvb3IodGltZSAvIEdhbWUuZnBzKTsNCiAgICAgICAgLy9kYXlzLT1tb250aHMqMzA7DQogICAgICAgIGhvdXJzIC09IGRheXMgKiAyNDsNCiAgICAgICAgbWludXRlcyAtPSBob3VycyAqIDYwICsgZGF5cyAqIDI0ICogNjA7DQogICAgICAgIHNlY29uZHMgLT0gbWludXRlcyAqIDYwICsgaG91cnMgKiA2MCAqIDYwICsgZGF5cyAqIDI0ICogNjAgKiA2MDsNCiAgICAgICAgaWYgKGRheXMgPiAxMCkgew0KICAgICAgICAgIGhvdXJzID0gMDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZGF5cykgew0KICAgICAgICAgIG1pbnV0ZXMgPSAwOw0KICAgICAgICAgIHNlY29uZHMgPSAwOw0KICAgICAgICB9DQogICAgICAgIGlmIChob3Vycykgew0KICAgICAgICAgIHNlY29uZHMgPSAwOw0KICAgICAgICB9DQogICAgICAgIHZhciBiaXRzID0gW107DQogICAgICAgIC8vaWYgKG1vbnRocz4wKSBiaXRzLnB1c2goQmVhdXRpZnkobW9udGhzKSsnIG1vbnRoJysoZGF5cz09MT8nJzoncycpKTsNCiAgICAgICAgaWYgKGRheXMgPiAwKSBiaXRzLnB1c2gobG9jKCIlMSBkYXkiLCBMQmVhdXRpZnkoZGF5cykpKTsNCiAgICAgICAgaWYgKGhvdXJzID4gMCkgYml0cy5wdXNoKGxvYygiJTEgaG91ciIsIExCZWF1dGlmeShob3VycykpKTsNCiAgICAgICAgaWYgKG1pbnV0ZXMgPiAwKSBiaXRzLnB1c2gobG9jKCIlMSBtaW51dGUiLCBMQmVhdXRpZnkobWludXRlcykpKTsNCiAgICAgICAgaWYgKHNlY29uZHMgPiAwKSBiaXRzLnB1c2gobG9jKCIlMSBzZWNvbmQiLCBMQmVhdXRpZnkoc2Vjb25kcykpKTsNCiAgICAgICAgaWYgKGJpdHMubGVuZ3RoID09IDApIHN0ciA9IGxvYygibGVzcyB0aGFuIDEgc2Vjb25kIik7DQogICAgICAgIGVsc2Ugc3RyID0gYml0cy5qb2luKCIsICIpOw0KICAgICAgICAvKi8vaWYgKG1vbnRocz4wKSBiaXRzLnB1c2goQmVhdXRpZnkobW9udGhzKSsnIG1vbnRoJysoZGF5cz09MT8nJzoncycpKTsNCgkJCQlpZiAoZGF5cz4wKSBiaXRzLnB1c2goQmVhdXRpZnkoZGF5cykrJyBkYXknKyhkYXlzPT0xPycnOidzJykpOw0KCQkJCWlmIChob3Vycz4wKSBiaXRzLnB1c2goQmVhdXRpZnkoaG91cnMpKycgaG91cicrKGhvdXJzPT0xPycnOidzJykpOw0KCQkJCWlmIChtaW51dGVzPjApIGJpdHMucHVzaChCZWF1dGlmeShtaW51dGVzKSsnIG1pbnV0ZScrKG1pbnV0ZXM9PTE/Jyc6J3MnKSk7DQoJCQkJaWYgKHNlY29uZHM+MCkgYml0cy5wdXNoKEJlYXV0aWZ5KHNlY29uZHMpKycgc2Vjb25kJysoc2Vjb25kcz09MT8nJzoncycpKTsNCgkJCQlpZiAoYml0cy5sZW5ndGg9PTApIHN0cj0nbGVzcyB0aGFuIDEgc2Vjb25kJzsNCgkJCQllbHNlIHN0cj1iaXRzLmpvaW4oJywgJyk7Ki8NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8qaWYgKHRpbWU+PUdhbWUuZnBzKjYwKjYwKjI0KjMwKjIgJiYgZGV0YWlsPDEpIHN0cj1CZWF1dGlmeShNYXRoLmZsb29yKHRpbWUvKEdhbWUuZnBzKjYwKjYwKjI0KjMwKSkpKycgbW9udGhzJzsNCgkJCQllbHNlIGlmICh0aW1lPj1HYW1lLmZwcyo2MCo2MCoyNCozMCAmJiBkZXRhaWw8MSkgc3RyPScxIG1vbnRoJzsNCgkJCQllbHNlICovIGlmICh0aW1lID49IEdhbWUuZnBzICogNjAgKiA2MCAqIDI0ICYmIGRldGFpbCA8IDIpDQogICAgICAgICAgc3RyID0gbG9jKA0KICAgICAgICAgICAgIiUxIGRheSIsDQogICAgICAgICAgICBMQmVhdXRpZnkoTWF0aC5mbG9vcih0aW1lIC8gKEdhbWUuZnBzICogNjAgKiA2MCAqIDI0KSkpDQogICAgICAgICAgKTsgLy9CZWF1dGlmeShNYXRoLmZsb29yKHRpbWUvKEdhbWUuZnBzKjYwKjYwKjI0KSkpKycgZGF5cyc7DQogICAgICAgIGVsc2UgaWYgKHRpbWUgPj0gR2FtZS5mcHMgKiA2MCAqIDYwICYmIGRldGFpbCA8IDMpDQogICAgICAgICAgc3RyID0gbG9jKA0KICAgICAgICAgICAgIiUxIGhvdXIiLA0KICAgICAgICAgICAgTEJlYXV0aWZ5KE1hdGguZmxvb3IodGltZSAvIChHYW1lLmZwcyAqIDYwICogNjApKSkNCiAgICAgICAgICApOyAvL0JlYXV0aWZ5KE1hdGguZmxvb3IodGltZS8oR2FtZS5mcHMqNjAqNjApKSkrJyBob3Vycyc7DQogICAgICAgIGVsc2UgaWYgKHRpbWUgPj0gR2FtZS5mcHMgKiA2MCAmJiBkZXRhaWwgPCA0KQ0KICAgICAgICAgIHN0ciA9IGxvYygNCiAgICAgICAgICAgICIlMSBtaW51dGUiLA0KICAgICAgICAgICAgTEJlYXV0aWZ5KE1hdGguZmxvb3IodGltZSAvIChHYW1lLmZwcyAqIDYwKSkpDQogICAgICAgICAgKTsgLy9CZWF1dGlmeShNYXRoLmZsb29yKHRpbWUvKEdhbWUuZnBzKjYwKSkpKycgbWludXRlcyc7DQogICAgICAgIGVsc2UgaWYgKHRpbWUgPj0gR2FtZS5mcHMgJiYgZGV0YWlsIDwgNSkNCiAgICAgICAgICBzdHIgPSBsb2MoDQogICAgICAgICAgICAiJTEgc2Vjb25kIiwNCiAgICAgICAgICAgIExCZWF1dGlmeShNYXRoLmZsb29yKHRpbWUgLyBHYW1lLmZwcykpDQogICAgICAgICAgKTsgLy9CZWF1dGlmeShNYXRoLmZsb29yKHRpbWUvKEdhbWUuZnBzKSkpKycgc2Vjb25kcyc7DQogICAgICAgIGVsc2Ugc3RyID0gbG9jKCJsZXNzIHRoYW4gMSBzZWNvbmQiKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBzdHI7DQogICAgfTsNCg0KICAgIEdhbWUudGlueUNvb2tpZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIlRpbnkgY29va2llIikpIHsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnPGRpdiBjbGFzcz0idGlueUNvb2tpZSIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgJz0iR2FtZS5DbGlja1RpbnlDb29raWUoKTsiPjwvZGl2PicNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiAiIjsNCiAgICB9Ow0KICAgIEdhbWUuQ2xpY2tUaW55Q29va2llID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKCFHYW1lLkhhc0FjaGlldigiVGlueSBjb29raWUiKSkgew0KICAgICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgICBHYW1lLldpbigiVGlueSBjb29raWUiKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgR2FtZS5zZXRWb2x1bWUgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgR2FtZS52b2x1bWUgPSB3aGF0Ow0KICAgICAgLypmb3IgKHZhciBpIGluIFNvdW5kcykNCgkJCXsNCgkJCQlTb3VuZHNbaV0udm9sdW1lPUdhbWUudm9sdW1lOw0KCQkJfSovDQogICAgfTsNCiAgICBHYW1lLnNldFZvbHVtZU11c2ljID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIEdhbWUudm9sdW1lTXVzaWMgPSB3aGF0Ow0KICAgICAgaWYgKE11c2ljKSBNdXNpYy5zZXRWb2x1bWUod2hhdCAvIDEwMCk7DQogICAgfTsNCiAgICBHYW1lLnNldFd1Yk11c2ljID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIGlmIChNdXNpYykgTXVzaWMuc2V0RmlsdGVyKHdoYXQgLyAxMDApOw0KICAgIH07DQoNCiAgICBHYW1lLnNob3dMYW5nU2VsZWN0aW9uID0gZnVuY3Rpb24gKGZpcnN0TGF1bmNoKSB7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBmb3IgKHZhciBpIGluIExhbmdzKSB7DQogICAgICAgIHZhciBsYW5nID0gTGFuZ3NbaV07DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsYW5nU2VsZWN0QnV0dG9uIHRpdGxlJyArDQogICAgICAgICAgKCFmaXJzdExhdW5jaCAmJiBsb2NJZCA9PSBsYW5nLmZpbGUgPyAiIHNlbGVjdGVkIiA6ICIiKSArDQogICAgICAgICAgJyIgc3R5bGU9InBhZGRpbmc6NHB4OyIgaWQ9ImxhbmdTZWxlY3QtJyArDQogICAgICAgICAgaSArDQogICAgICAgICAgJyI+JyArDQogICAgICAgICAgbGFuZy5uYW1lICsNCiAgICAgICAgICAiPC9kaXY+IjsNCiAgICAgIH0NCiAgICAgIEdhbWUuUHJvbXB0KA0KICAgICAgICAiPGlkIENoYW5nZUxhbmd1YWdlPiIgKw0KICAgICAgICAgIChmaXJzdExhdW5jaCA/ICI8bm9DbG9zZT4iIDogIiIpICsNCiAgICAgICAgICAnPGgzIGlkPSJsYW5ndWFnZVNlbGVjdEhlYWRlciI+JyArDQogICAgICAgICAgbG9jKCJDaGFuZ2UgbGFuZ3VhZ2UiKSArDQogICAgICAgICAgIjwvaDM+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgIChmaXJzdExhdW5jaA0KICAgICAgICAgICAgPyAiIg0KICAgICAgICAgICAgOiAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjExcHg7b3BhY2l0eTowLjU7bWFyZ2luLWJvdHRvbToxMnB4OyI+KCcgKw0KICAgICAgICAgICAgICBsb2MoIm5vdGU6IHRoaXMgd2lsbCBzYXZlIGFuZCByZWxvYWQgeW91ciBnYW1lIikgKw0KICAgICAgICAgICAgICAiKTwvZGl2PiIpICsNCiAgICAgICAgICBzdHIsDQogICAgICAgIGZpcnN0TGF1bmNoID8gMCA6IFtsb2MoIkNhbmNlbCIpXQ0KICAgICAgKTsNCg0KICAgICAgZm9yICh2YXIgaSBpbiBMYW5ncykgew0KICAgICAgICB2YXIgbGFuZyA9IExhbmdzW2ldOw0KICAgICAgICBBZGRFdmVudCgNCiAgICAgICAgICBsKCJsYW5nU2VsZWN0LSIgKyBpKSwNCiAgICAgICAgICAiY2xpY2siLA0KICAgICAgICAgIChmdW5jdGlvbiAobGFuZykgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgaWYgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAvL2xhbmchPWxvY0lkKQ0KICAgICAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2V0KCJDb29raWVDbGlja2VyTGFuZyIsIGxhbmcpOw0KICAgICAgICAgICAgICAgIEdhbWUudG9TYXZlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBHYW1lLnRvUmVsb2FkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KShpKQ0KICAgICAgICApOw0KICAgICAgICBBZGRFdmVudCgNCiAgICAgICAgICBsKCJsYW5nU2VsZWN0LSIgKyBpKSwNCiAgICAgICAgICAibW91c2VvdmVyIiwNCiAgICAgICAgICAoZnVuY3Rpb24gKGxhbmcpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL3NtYWxsVGljay5tcDMiLCAwLjc1KTsNCiAgICAgICAgICAgICAgbCgibGFuZ3VhZ2VTZWxlY3RIZWFkZXIiKS5pbm5lckhUTUwgPSBMYW5nc1tsYW5nXS5jaGFuZ2VMYW5ndWFnZTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSkoaSkNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgT04gPSAiICIgKyBsb2MoIk9OIik7DQogICAgT0ZGID0gIiAiICsgbG9jKCJPRkYiKTsNCiAgICBHYW1lLlVwZGF0ZU1lbnUgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBpZiAoR2FtZS5vbk1lbnUgIT0gIiIpIHsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9ImNsb3NlIG1lbnVDbG9zZSIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgJz0iR2FtZS5TaG93TWVudSgpOyI+eDwvZGl2Pic7DQogICAgICAgIC8vc3RyKz0nPGRpdiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7dG9wOjhweDtyaWdodDo4cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjE2cHg7IiAnK0dhbWUuY2xpY2tTdHIrJz0iR2FtZS5TaG93TWVudSgpOyI+WDwvZGl2Pic7DQogICAgICB9DQogICAgICBpZiAoR2FtZS5vbk1lbnUgPT0gInByZWZzIikgew0KICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9InNlY3Rpb24iPicgKyBsb2MoIk9wdGlvbnMiKSArICI8L2Rpdj4iOw0KDQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJibG9jayIgc3R5bGU9InBhZGRpbmc6MHB4O21hcmdpbjo4cHggNHB4OyI+JyArDQogICAgICAgICAgJzxkaXYgY2xhc3M9InN1YnNlY3Rpb24iIHN0eWxlPSJwYWRkaW5nOjBweDsiPicgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+JyArDQogICAgICAgICAgbG9jKCJHZW5lcmFsIikgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+PGRpdiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzoycHggOHB4O29wYWNpdHk6MC43NTtmb250LXNpemU6MTJweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IiBjbGFzcz0ic21hbGxGYW5jeUJ1dHRvbiI+JyArDQogICAgICAgICAgbG9jKCJMYW5ndWFnZTogJTEiLCAiPGI+IiArIExhbmdzW2xvY0lkXS5uYW1lICsgIjwvYj4iKSArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9Imljb24iIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7ZGlzcGxheTppbmxpbmUtYmxvY2s7YmFja2dyb3VuZC1wb3NpdGlvbjonICsNCiAgICAgICAgICAtMzAgKiA0OCArDQogICAgICAgICAgInB4ICIgKw0KICAgICAgICAgIC0yOSAqIDQ4ICsNCiAgICAgICAgICAncHg7dHJhbnNmb3JtOnNjYWxlKDAuNSk7bWFyZ2luOi0xNnB4IC0xMnB4OyI+PC9kaXY+PGEgc3R5bGU9ImZvbnQtc2l6ZToxNXB4O3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOmF1dG87bWluLXdpZHRoOjEzMHB4OyIgY2xhc3M9Im9wdGlvbiBzbWFsbEZhbmN5QnV0dG9uIiBpZD0iY2hhbmdlTGFuZ3VhZ2VPcHRpb24iICcgKw0KICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICI9XCJQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO0dhbWUuc2hvd0xhbmdTZWxlY3Rpb24oKTtcIj4iICsNCiAgICAgICAgICAoIUVOID8gJ0NoYW5nZSBsYW5ndWFnZTxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgOiAiIikgKw0KICAgICAgICAgIGxvYygiQ2hhbmdlIGxhbmd1YWdlIikgKw0KICAgICAgICAgICc8L2E+PGRpdiBzdHlsZT0iY2xlYXI6Ym90aDt0ZXh0LWFsaWduOnJpZ2h0O3BhZGRpbmctYm90dG9tOjJweDsiPjwvZGl2PjwvZGl2PicgKw0KICAgICAgICAgIChBcHANCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAiPVwiUGxheVNvdW5kKCdzbmQvdGljay5tcDMnKTtHYW1lLnRvU2F2ZT10cnVlO0dhbWUudG9RdWl0PXRydWU7XCI+IiArDQogICAgICAgICAgICAgIGxvYygiU2F2ZSAmIFF1aXQiKSArDQogICAgICAgICAgICAgICI8L2E+PC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48YSBjbGFzcz0ib3B0aW9uIHNtYWxsRmFuY3lCdXR0b24iICcgKw0KICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICI9XCJHYW1lLnRvU2F2ZT10cnVlO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCI+IiArDQogICAgICAgICAgbG9jKCJTYXZlIikgKw0KICAgICAgICAgICI8L2E+PGxhYmVsPiIgKw0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICJTYXZlIG1hbnVhbGx5ICh0aGUgZ2FtZSBhdXRvc2F2ZXMgZXZlcnkgNjAgc2Vjb25kczsgc2hvcnRjdXQ6IGN0cmwrUykiDQogICAgICAgICAgKSArDQogICAgICAgICAgIjwvbGFiZWw+PC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgIj1cIkdhbWUuRXhwb3J0U2F2ZSgpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCI+IiArDQogICAgICAgICAgbG9jKCJFeHBvcnQgc2F2ZSIpICsNCiAgICAgICAgICAnPC9hPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgIj1cIkdhbWUuSW1wb3J0U2F2ZSgpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCI+IiArDQogICAgICAgICAgbG9jKCJJbXBvcnQgc2F2ZSIpICsNCiAgICAgICAgICAiPC9hPjxsYWJlbD4iICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiWW91IGNhbiB1c2UgdGhpcyB0byBiYWNrdXAgeW91ciBzYXZlIG9yIHRvIHRyYW5zZmVyIGl0IHRvIGFub3RoZXIgY29tcHV0ZXIgKHNob3J0Y3V0IGZvciBpbXBvcnQ6IGN0cmwrTykiDQogICAgICAgICAgKSArDQogICAgICAgICAgIjwvbGFiZWw+PC9kaXY+IiArDQogICAgICAgICAgKCFBcHANCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAiPVwiR2FtZS5GaWxlU2F2ZSgpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCI+IiArDQogICAgICAgICAgICAgIGxvYygiU2F2ZSB0byBmaWxlIikgKw0KICAgICAgICAgICAgICAnPC9hPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiIgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlOyI+PGlucHV0IGlkPSJGaWxlTG9hZElucHV0IiB0eXBlPSJmaWxlIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7b3BhY2l0eTowO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MHB4O3RvcDowcHg7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTsiIG9uY2hhbmdlPSJHYW1lLkZpbGVMb2FkKGV2ZW50KTsiICcgKw0KICAgICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICAgIj1cIlBsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7XCIvPiIgKw0KICAgICAgICAgICAgICBsb2MoIkxvYWQgZnJvbSBmaWxlIikgKw0KICAgICAgICAgICAgICAiPC9hPjxsYWJlbD4iICsNCiAgICAgICAgICAgICAgbG9jKCJVc2UgdGhpcyB0byBrZWVwIGJhY2t1cHMgb24geW91ciBjb21wdXRlciIpICsNCiAgICAgICAgICAgICAgIjwvbGFiZWw+PC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxsYWJlbD4nICsNCiAgICAgICAgICBsb2MoIkRlbGV0ZSBhbGwgeW91ciBwcm9ncmVzcywgaW5jbHVkaW5nIHlvdXIgYWNoaWV2ZW1lbnRzIikgKw0KICAgICAgICAgICc8L2xhYmVsPjxhIGNsYXNzPSJvcHRpb24gc21hbGxGYW5jeUJ1dHRvbiB3YXJuaW5nIiAnICsNCiAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAiPVwiR2FtZS5IYXJkUmVzZXQoKTtQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO1wiPiIgKw0KICAgICAgICAgIGxvYygiV2lwZSBzYXZlIikgKw0KICAgICAgICAgICI8L2E+PC9kaXY+IiArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0iYmxvY2siIHN0eWxlPSJwYWRkaW5nOjBweDttYXJnaW46OHB4IDRweDsiPicgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIiBzdHlsZT0icGFkZGluZzowcHg7Ij4nICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgICAgICAgIGxvYygiU2V0dGluZ3MiKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgIChBcHAgJiYgQXBwLndyaXRlQ2xvdWRVSSA/IEFwcC53cml0ZUNsb3VkVUkoKSA6ICIiKSArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPicgKw0KICAgICAgICAgIEdhbWUuV3JpdGVTbGlkZXIoDQogICAgICAgICAgICAidm9sdW1lU2xpZGVyIiwNCiAgICAgICAgICAgIGxvYygiVm9sdW1lIiksDQogICAgICAgICAgICAiWyRdJSIsDQogICAgICAgICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIHJldHVybiBHYW1lLnZvbHVtZTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAiR2FtZS5zZXRWb2x1bWUoTWF0aC5yb3VuZChsKCd2b2x1bWVTbGlkZXInKS52YWx1ZSkpO2woJ3ZvbHVtZVNsaWRlclJpZ2h0VGV4dCcpLmlubmVySFRNTD1HYW1lLnZvbHVtZSsnJSc7Ig0KICAgICAgICAgICkgKw0KICAgICAgICAgIChBcHANCiAgICAgICAgICAgID8gR2FtZS5Xcml0ZVNsaWRlcigNCiAgICAgICAgICAgICAgICAidm9sdW1lTXVzaWNTbGlkZXIiLA0KICAgICAgICAgICAgICAgIGxvYygiVm9sdW1lIChtdXNpYykiKSwNCiAgICAgICAgICAgICAgICAiWyRdJSIsDQogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIEdhbWUudm9sdW1lTXVzaWM7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAiR2FtZS5zZXRWb2x1bWVNdXNpYyhNYXRoLnJvdW5kKGwoJ3ZvbHVtZU11c2ljU2xpZGVyJykudmFsdWUpKTtsKCd2b2x1bWVNdXNpY1NsaWRlclJpZ2h0VGV4dCcpLmlubmVySFRNTD1HYW1lLnZvbHVtZU11c2ljKyclJzsiDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAvKihBcHA/R2FtZS5Xcml0ZVNsaWRlcignd3ViTXVzaWNTbGlkZXInLGxvYygiV3ViIiksJ1skXSUnLGZ1bmN0aW9uKCl7cmV0dXJuIDEwMDt9LCdHYW1lLnNldFd1Yk11c2ljKE1hdGgucm91bmQobChcJ3d1Yk11c2ljU2xpZGVyXCcpLnZhbHVlKSk7bChcJ3d1Yk11c2ljU2xpZGVyUmlnaHRUZXh0XCcpLmlubmVySFRNTD0oTWF0aC5yb3VuZChsKFwnd3ViTXVzaWNTbGlkZXJcJykudmFsdWUpKStcJyVcJzsnKTonJykrKi8NCiAgICAgICAgICAiPGJyPiIgKw0KICAgICAgICAgIChBcHANCiAgICAgICAgICAgID8gR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAgICAgImJnTXVzaWMiLA0KICAgICAgICAgICAgICAgICJiZ011c2ljQnV0dG9uIiwNCiAgICAgICAgICAgICAgICBsb2MoIk11c2ljIGluIGJhY2tncm91bmQiKSArIE9OLA0KICAgICAgICAgICAgICAgIGxvYygiTXVzaWMgaW4gYmFja2dyb3VuZCIpICsgT0ZGLA0KICAgICAgICAgICAgICAgICIiDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJtdXNpYyB3aWxsIGtlZXAgcGxheWluZyBldmVuIHdoZW4gdGhlIGdhbWUgd2luZG93IGlzbid0IGZvY3VzZWQiDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiKTwvbGFiZWw+PGJyPiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAoQXBwDQogICAgICAgICAgICA/IEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgICAgICJmdWxsc2NyZWVuIiwNCiAgICAgICAgICAgICAgICAiZnVsbHNjcmVlbkJ1dHRvbiIsDQogICAgICAgICAgICAgICAgbG9jKCJGdWxsc2NyZWVuIikgKyBPTiwNCiAgICAgICAgICAgICAgICBsb2MoIkZ1bGxzY3JlZW4iKSArIE9GRiwNCiAgICAgICAgICAgICAgICAiR2FtZS5Ub2dnbGVGdWxsc2NyZWVuKCk7Ig0KICAgICAgICAgICAgICApICsgIjxicj4iDQogICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAiZmFuY3kiLA0KICAgICAgICAgICAgImZhbmN5QnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiRmFuY3kgZ3JhcGhpY3MiKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJGYW5jeSBncmFwaGljcyIpICsgT0ZGLA0KICAgICAgICAgICAgIkdhbWUuVG9nZ2xlRmFuY3koKTsiDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxsYWJlbD4oIiArDQogICAgICAgICAgbG9jKCJ2aXN1YWwgaW1wcm92ZW1lbnRzOyBkaXNhYmxpbmcgbWF5IGltcHJvdmUgcGVyZm9ybWFuY2UiKSArDQogICAgICAgICAgIik8L2xhYmVsPjxicj4iICsNCiAgICAgICAgICBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICJmaWx0ZXJzIiwNCiAgICAgICAgICAgICJmaWx0ZXJzQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiQ1NTIGZpbHRlcnMiKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJDU1MgZmlsdGVycyIpICsgT0ZGLA0KICAgICAgICAgICAgIkdhbWUuVG9nZ2xlRmlsdGVycygpOyINCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICAoRU4NCiAgICAgICAgICAgID8gImN1dHRpbmctZWRnZSB2aXN1YWwgaW1wcm92ZW1lbnRzOyBkaXNhYmxpbmcgbWF5IGltcHJvdmUgcGVyZm9ybWFuY2UiDQogICAgICAgICAgICA6IGxvYygidmlzdWFsIGltcHJvdmVtZW50czsgZGlzYWJsaW5nIG1heSBpbXByb3ZlIHBlcmZvcm1hbmNlIikpICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgInBhcnRpY2xlcyIsDQogICAgICAgICAgICAicGFydGljbGVzQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiUGFydGljbGVzIikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiUGFydGljbGVzIikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAoRU4NCiAgICAgICAgICAgID8gIjxsYWJlbD4oY29va2llcyBmYWxsaW5nIGRvd24sIGV0YzsgZGlzYWJsaW5nIG1heSBpbXByb3ZlIHBlcmZvcm1hbmNlKTwvbGFiZWw+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAibnVtYmVycyIsDQogICAgICAgICAgICAibnVtYmVyc0J1dHRvbiIsDQogICAgICAgICAgICBsb2MoIk51bWJlcnMiKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJOdW1iZXJzIikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICBsb2MoIm51bWJlcnMgdGhhdCBwb3AgdXAgd2hlbiBjbGlja2luZyB0aGUgY29va2llIikgKw0KICAgICAgICAgICIpPC9sYWJlbD48YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAibWlsayIsDQogICAgICAgICAgICAibWlsa0J1dHRvbiIsDQogICAgICAgICAgICBsb2MoIk1pbGsgW3NldHRpbmddIikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiTWlsayBbc2V0dGluZ10iKSArIE9GRg0KICAgICAgICAgICkgKw0KICAgICAgICAgIChFTiA/ICI8bGFiZWw+KG9ubHkgYXBwZWFycyB3aXRoIGVub3VnaCBhY2hpZXZlbWVudHMpPC9sYWJlbD4iIDogIiIpICsNCiAgICAgICAgICAiPGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgImN1cnNvcnMiLA0KICAgICAgICAgICAgImN1cnNvcnNCdXR0b24iLA0KICAgICAgICAgICAgbG9jKCJDdXJzb3JzIFtzZXR0aW5nXSIpICsgT04sDQogICAgICAgICAgICBsb2MoIkN1cnNvcnMgW3NldHRpbmddIikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICBsb2MoInZpc3VhbCBkaXNwbGF5IG9mIHlvdXIgY3Vyc29ycyIpICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgIndvYmJseSIsDQogICAgICAgICAgICAid29iYmx5QnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiV29iYmx5IGNvb2tpZSIpICsgT04sDQogICAgICAgICAgICBsb2MoIldvYmJseSBjb29raWUiKSArIE9GRg0KICAgICAgICAgICkgKw0KICAgICAgICAgIChFTg0KICAgICAgICAgICAgPyAiPGxhYmVsPih5b3VyIGNvb2tpZSB3aWxsIHJlYWN0IHdoZW4geW91IGNsaWNrIGl0KTwvbGFiZWw+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAiY29va2llc291bmQiLA0KICAgICAgICAgICAgImNvb2tpZXNvdW5kQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiQWx0IGNvb2tpZSBzb3VuZCIpICsgT04sDQogICAgICAgICAgICBsb2MoIkFsdCBjb29raWUgc291bmQiKSArIE9GRg0KICAgICAgICAgICkgKw0KICAgICAgICAgIChFTg0KICAgICAgICAgICAgPyAiPGxhYmVsPihob3cgeW91ciBjb29raWUgc291bmRzIHdoZW4geW91IGNsaWNrIG9uIGl0KTwvbGFiZWw+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAiY3JhdGVzIiwNCiAgICAgICAgICAgICJjcmF0ZXNCdXR0b24iLA0KICAgICAgICAgICAgbG9jKCJJY29uIGNyYXRlcyIpICsgT04sDQogICAgICAgICAgICBsb2MoIkljb24gY3JhdGVzIikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICBsb2MoImRpc3BsYXkgYm94ZXMgYXJvdW5kIHVwZ3JhZGVzIGFuZCBhY2hpZXZlbWVudHMgaW4gU3RhdHMiKSArDQogICAgICAgICAgIik8L2xhYmVsPjxicj4iICsNCiAgICAgICAgICBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICJtb25vc3BhY2UiLA0KICAgICAgICAgICAgIm1vbm9zcGFjZUJ1dHRvbiIsDQogICAgICAgICAgICBsb2MoIkFsdCBmb250IikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiQWx0IGZvbnQiKSArIE9GRg0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8bGFiZWw+KCIgKw0KICAgICAgICAgIGxvYygieW91ciBjb29raWVzIGFyZSBkaXNwbGF5ZWQgdXNpbmcgYSBtb25vc3BhY2UgZm9udCIpICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgImZvcm1hdCIsDQogICAgICAgICAgICAiZm9ybWF0QnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiU2hvcnQgbnVtYmVycyIpICsgT0ZGLA0KICAgICAgICAgICAgbG9jKCJTaG9ydCBudW1iZXJzIikgKyBPTiwNCiAgICAgICAgICAgICJCZWF1dGlmeUFsbCgpO0dhbWUuUmVmcmVzaFN0b3JlKCk7R2FtZS51cGdyYWRlc1RvUmVidWlsZD0xOyIsDQogICAgICAgICAgICAxDQogICAgICAgICAgKSArDQogICAgICAgICAgKEVOID8gIjxsYWJlbD4oc2hvcnRlbiBiaWcgbnVtYmVycyk8L2xhYmVsPiIgOiAiIikgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAibm90aWZzIiwNCiAgICAgICAgICAgICJub3RpZnNCdXR0b24iLA0KICAgICAgICAgICAgbG9jKCJGYXN0IG5vdGVzIikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiRmFzdCBub3RlcyIpICsgT0ZGDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxsYWJlbD4oIiArDQogICAgICAgICAgbG9jKCJub3RpZmljYXRpb25zIGRpc2FwcGVhciBtdWNoIGZhc3RlciIpICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIC8vR2FtZS5Xcml0ZVByZWZCdXR0b24oJ2F1dG91cGRhdGUnLCdhdXRvdXBkYXRlQnV0dG9uJywnT2ZmbGluZSBtb2RlIE9GRicsJ09mZmxpbmUgbW9kZSBPTicsMCwxKSsnPGxhYmVsPihkaXNhYmxlcyB1cGRhdGUgbm90aWZpY2F0aW9ucyk8L2xhYmVsPjxicj4nKw0KICAgICAgICAgICghQXBwDQogICAgICAgICAgICA/IEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgICAgICJ3YXJuIiwNCiAgICAgICAgICAgICAgICAid2FybkJ1dHRvbiIsDQogICAgICAgICAgICAgICAgbG9jKCJDbG9zaW5nIHdhcm5pbmciKSArIE9OLA0KICAgICAgICAgICAgICAgIGxvYygiQ2xvc2luZyB3YXJuaW5nIikgKyBPRkYNCiAgICAgICAgICAgICAgKSArDQogICAgICAgICAgICAgICI8bGFiZWw+KCIgKw0KICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgInRoZSBnYW1lIHdpbGwgYXNrIHlvdSB0byBjb25maXJtIHdoZW4geW91IGNsb3NlIHRoZSB3aW5kb3ciDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiKTwvbGFiZWw+PGJyPiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAvL0dhbWUuV3JpdGVQcmVmQnV0dG9uKCdmb2N1cycsJ2ZvY3VzQnV0dG9uJyxsb2MoIkRlZm9jdXMiKStPRkYsbG9jKCJEZWZvY3VzIikrT04sMCwxKSsnPGxhYmVsPignK2xvYygidGhlIGdhbWUgd2lsbCBiZSBsZXNzIHJlc291cmNlLWludGVuc2l2ZSB3aGVuIG91dCBvZiBmb2N1cyIpKycpPC9sYWJlbD48YnI+JysNCiAgICAgICAgICBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICJleHRyYUJ1dHRvbnMiLA0KICAgICAgICAgICAgImV4dHJhQnV0dG9uc0J1dHRvbiIsDQogICAgICAgICAgICBsb2MoIkV4dHJhIGJ1dHRvbnMiKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJFeHRyYSBidXR0b25zIikgKyBPRkYsDQogICAgICAgICAgICAiR2FtZS5Ub2dnbGVFeHRyYUJ1dHRvbnMoKTsiDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxsYWJlbD4oIiArDQogICAgICAgICAgbG9jKCJhZGQgb3B0aW9ucyBvbiBidWlsZGluZ3MgbGlrZSBNdXRlIikgKw0KICAgICAgICAgICIpPC9sYWJlbD48YnI+IiArDQogICAgICAgICAgR2FtZS5Xcml0ZVByZWZCdXR0b24oDQogICAgICAgICAgICAiYXNrTHVtcHMiLA0KICAgICAgICAgICAgImFza0x1bXBzQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiTHVtcCBjb25maXJtYXRpb24iKSArIE9OLA0KICAgICAgICAgICAgbG9jKCJMdW1wIGNvbmZpcm1hdGlvbiIpICsgT0ZGDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxsYWJlbD4oIiArDQogICAgICAgICAgbG9jKCJ0aGUgZ2FtZSB3aWxsIGFzayB5b3UgdG8gY29uZmlybSBiZWZvcmUgc3BlbmRpbmcgc3VnYXIgbHVtcHMiKSArDQogICAgICAgICAgIik8L2xhYmVsPjxicj4iICsNCiAgICAgICAgICAoIUFwcA0KICAgICAgICAgICAgPyBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICAgICAiY3VzdG9tR3JhbmRtYXMiLA0KICAgICAgICAgICAgICAgICJjdXN0b21HcmFuZG1hc0J1dHRvbiIsDQogICAgICAgICAgICAgICAgbG9jKCJDdXN0b20gZ3JhbmRtYXMiKSArIE9OLA0KICAgICAgICAgICAgICAgIGxvYygiQ3VzdG9tIGdyYW5kbWFzIikgKyBPRkYNCiAgICAgICAgICAgICAgKSArDQogICAgICAgICAgICAgICI8bGFiZWw+KCIgKw0KICAgICAgICAgICAgICBsb2MoInNvbWUgZ3JhbmRtYXMgd2lsbCBiZSBuYW1lZCBhZnRlciBQYXRyZW9uIHN1cHBvcnRlcnMiKSArDQogICAgICAgICAgICAgICIpPC9sYWJlbD48YnI+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgIm5vdFNjYXJ5IiwNCiAgICAgICAgICAgICJub3RTY2FyeUJ1dHRvbiIsDQogICAgICAgICAgICBsb2MoIlNjYXJ5IHN0dWZmIikgKyBPRkYsDQogICAgICAgICAgICBsb2MoIlNjYXJ5IHN0dWZmIikgKyBPTiwNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICAxDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICBHYW1lLldyaXRlUHJlZkJ1dHRvbigNCiAgICAgICAgICAgICJ0aW1lb3V0IiwNCiAgICAgICAgICAgICJ0aW1lb3V0QnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiU2xlZXAgbW9kZSB0aW1lb3V0IikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiU2xlZXAgbW9kZSB0aW1lb3V0IikgKyBPRkYNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPGxhYmVsPigiICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAib24gc2xvd2VyIGNvbXB1dGVycywgdGhlIGdhbWUgd2lsbCBwdXQgaXRzZWxmIGluIHNsZWVwIG1vZGUgd2hlbiBpdCdzIGluYWN0aXZlIGFuZCBzdGFydHMgdG8gbGFnIG91dDsgb2ZmbGluZSBDcFMgcHJvZHVjdGlvbiBraWNrcyBpbiBkdXJpbmcgc2xlZXAgbW9kZSINCiAgICAgICAgICApICsNCiAgICAgICAgICAiKTwvbGFiZWw+PGJyPiIgKw0KICAgICAgICAgIEdhbWUuV3JpdGVQcmVmQnV0dG9uKA0KICAgICAgICAgICAgInNjcmVlbnJlYWRlciIsDQogICAgICAgICAgICAic2NyZWVucmVhZGVyQnV0dG9uIiwNCiAgICAgICAgICAgIGxvYygiU2NyZWVuIHJlYWRlciBtb2RlIikgKyBPTiwNCiAgICAgICAgICAgIGxvYygiU2NyZWVuIHJlYWRlciBtb2RlIikgKyBPRkYsDQogICAgICAgICAgICAiR2FtZS50b1NhdmU9dHJ1ZTtHYW1lLnRvUmVsb2FkPXRydWU7Ig0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8bGFiZWw+KCIgKw0KICAgICAgICAgIGxvYygiYWxsb3dzIG9wdGltaXphdGlvbnMgZm9yIHNjcmVlbiByZWFkZXJzOyBnYW1lIHdpbGwgcmVsb2FkIikgKw0KICAgICAgICAgICIpPC9sYWJlbD48YnI+IiArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgIC8vJzxkaXYgY2xhc3M9Imxpc3RpbmciPicrR2FtZS5Xcml0ZVByZWZCdXR0b24oJ2F1dG9zYXZlJywnYXV0b3NhdmVCdXR0b24nLCdBdXRvc2F2ZSBPTicsJ0F1dG9zYXZlIE9GRicpKyc8L2Rpdj4nKw0KICAgICAgICAgICghQXBwDQogICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48YSBjbGFzcz0ib3B0aW9uIHNtYWxsRmFuY3lCdXR0b24iICcgKw0KICAgICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICAgIj1cIkdhbWUuQ2hlY2tNb2REYXRhKCk7UGxheVNvdW5kKCdzbmQvdGljay5tcDMnKTtcIj4iICsNCiAgICAgICAgICAgICAgbG9jKCJDaGVjayBtb2QgZGF0YSIpICsNCiAgICAgICAgICAgICAgIjwvYT48bGFiZWw+KCIgKw0KICAgICAgICAgICAgICBsb2MoInZpZXcgYW5kIGRlbGV0ZSBzYXZlIGRhdGEgY3JlYXRlZCBieSBtb2RzIikgKw0KICAgICAgICAgICAgICAiKTwvbGFiZWw+PC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgIjwvZGl2PiI7DQoNCiAgICAgICAgaWYgKEFwcCAmJiBBcHAud3JpdGVNb2RVSSkgew0KICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImJsb2NrIiBzdHlsZT0icGFkZGluZzowcHg7bWFyZ2luOjhweCA0cHg7Ij4nICsNCiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIiBzdHlsZT0icGFkZGluZzowcHg7Ij4nICsNCiAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+JyArDQogICAgICAgICAgICBsb2MoIk1vZHMiKSArDQogICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICBBcHAud3JpdGVNb2RVSSgpICsNCiAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICI8L2Rpdj4iOw0KICAgICAgICB9DQoNCiAgICAgICAgc3RyICs9ICc8ZGl2IHN0eWxlPSJoZWlnaHQ6MTI4cHg7Ij48L2Rpdj4nOw0KICAgICAgfSBlbHNlIGlmIChHYW1lLm9uTWVudSA9PSAibG9nIikgew0KICAgICAgICAvL3N0cis9cmVwbGFjZUFsbCgnW2Jha2VyeU5hbWVdJyxHYW1lLmJha2VyeU5hbWUsR2FtZS51cGRhdGVMb2cpOw0KICAgICAgICBzdHIgKz0gR2FtZS51cGRhdGVMb2c7DQogICAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIk9sZGVuIGRheXMiKSkNCiAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICc8ZGl2IGlkPSJvbGRlbkRheXMiIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0O3dpZHRoOjEwMCU7Ij48ZGl2ICcgKw0KICAgICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgICAiPVwiR2FtZS5TcGFya2xlQXQoR2FtZS5tb3VzZVgsR2FtZS5tb3VzZVkpO1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7UGxheVNvdW5kKCdzbmQvc2hpbW1lckNsaWNrLm1wMycpO0dhbWUuV2luKCdPbGRlbiBkYXlzJyk7R2FtZS5VcGRhdGVNZW51KCk7XCIgY2xhc3M9XCJpY29uXCIgc3R5bGU9XCJkaXNwbGF5OmlubGluZS1ibG9jazt0cmFuc2Zvcm06c2NhbGUoMC41KTtjdXJzb3I6cG9pbnRlcjt3aWR0aDo0OHB4O2hlaWdodDo0OHB4O2JhY2tncm91bmQtcG9zaXRpb246IiArDQogICAgICAgICAgICAtMTIgKiA0OCArDQogICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAtMyAqIDQ4ICsNCiAgICAgICAgICAgICdweDsiPjwvZGl2PjwvZGl2Pic7DQogICAgICB9IGVsc2UgaWYgKEdhbWUub25NZW51ID09ICJzdGF0cyIpIHsNCiAgICAgICAgdmFyIGJ1aWxkaW5nc093bmVkID0gMDsNCiAgICAgICAgYnVpbGRpbmdzT3duZWQgPSBHYW1lLkJ1aWxkaW5nc093bmVkOw0KICAgICAgICB2YXIgdXBncmFkZXMgPSAiIjsNCiAgICAgICAgdmFyIGNvb2tpZVVwZ3JhZGVzID0gIiI7DQogICAgICAgIHZhciBoaWRkZW5VcGdyYWRlcyA9ICIiOw0KICAgICAgICB2YXIgcHJlc3RpZ2VVcGdyYWRlcyA9ICIiOw0KICAgICAgICB2YXIgdXBncmFkZXNUb3RhbCA9IDA7DQogICAgICAgIHZhciB1cGdyYWRlc093bmVkID0gMDsNCiAgICAgICAgdmFyIHByZXN0aWdlVXBncmFkZXNUb3RhbCA9IDA7DQogICAgICAgIHZhciBwcmVzdGlnZVVwZ3JhZGVzT3duZWQgPSAwOw0KDQogICAgICAgIHZhciBsaXN0ID0gW107DQogICAgICAgIC8vc29ydCB0aGUgdXBncmFkZXMNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzKSB7DQogICAgICAgICAgbGlzdC5wdXNoKEdhbWUuVXBncmFkZXNbaV0pOw0KICAgICAgICB9IC8vY2xvbmUgZmlyc3QNCiAgICAgICAgdmFyIHNvcnRNYXAgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICAgIGlmIChhLm9yZGVyID4gYi5vcmRlcikgcmV0dXJuIDE7DQogICAgICAgICAgZWxzZSBpZiAoYS5vcmRlciA8IGIub3JkZXIpIHJldHVybiAtMTsNCiAgICAgICAgICBlbHNlIHJldHVybiAwOw0KICAgICAgICB9Ow0KICAgICAgICBsaXN0LnNvcnQoc29ydE1hcCk7DQogICAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgew0KICAgICAgICAgIHZhciBzdHIyID0gIiI7DQogICAgICAgICAgdmFyIG1lID0gbGlzdFtpXTsNCg0KICAgICAgICAgIHN0cjIgKz0gR2FtZS5jcmF0ZShtZSwgInN0YXRzIik7DQoNCiAgICAgICAgICBpZiAobWUuYm91Z2h0KSB7DQogICAgICAgICAgICBpZiAoR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZChtZS5wb29sKSkgdXBncmFkZXNPd25lZCsrOw0KICAgICAgICAgICAgZWxzZSBpZiAobWUucG9vbCA9PSAicHJlc3RpZ2UiKSBwcmVzdGlnZVVwZ3JhZGVzT3duZWQrKzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAobWUucG9vbCA9PSAiIiB8fCBtZS5wb29sID09ICJjb29raWUiIHx8IG1lLnBvb2wgPT0gInRlY2giKQ0KICAgICAgICAgICAgdXBncmFkZXNUb3RhbCsrOw0KICAgICAgICAgIGlmIChtZS5wb29sID09ICJkZWJ1ZyIpIGhpZGRlblVwZ3JhZGVzICs9IHN0cjI7DQogICAgICAgICAgZWxzZSBpZiAobWUucG9vbCA9PSAicHJlc3RpZ2UiKSB7DQogICAgICAgICAgICBwcmVzdGlnZVVwZ3JhZGVzICs9IHN0cjI7DQogICAgICAgICAgICBwcmVzdGlnZVVwZ3JhZGVzVG90YWwrKzsNCiAgICAgICAgICB9IGVsc2UgaWYgKG1lLnBvb2wgPT0gImNvb2tpZSIpIGNvb2tpZVVwZ3JhZGVzICs9IHN0cjI7DQogICAgICAgICAgZWxzZSBpZiAobWUucG9vbCAhPSAidG9nZ2xlIiAmJiBtZS5wb29sICE9ICJ1bnVzZWQiKSB1cGdyYWRlcyArPSBzdHIyOw0KICAgICAgICB9DQogICAgICAgIHZhciBhY2hpZXZlbWVudHMgPSBbXTsNCiAgICAgICAgdmFyIGFjaGlldmVtZW50c093bmVkID0gMDsNCiAgICAgICAgdmFyIGFjaGlldmVtZW50c093bmVkT3RoZXIgPSAwOw0KICAgICAgICB2YXIgYWNoaWV2ZW1lbnRzVG90YWwgPSAwOw0KDQogICAgICAgIHZhciBsaXN0ID0gW107DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5BY2hpZXZlbWVudHMpIHsgLy9zb3J0IHRoZSBhY2hpZXZlbWVudHMNCiAgICAgICAgICBsaXN0LnB1c2goR2FtZS5BY2hpZXZlbWVudHNbaV0pOw0KICAgICAgICB9DQogICAgICAgIHZhciBzb3J0TWFwID0gZnVuY3Rpb24gKGEsIGIpIHsNCiAgICAgICAgICBpZiAoYS5vcmRlciA+IGIub3JkZXIpIHJldHVybiAxOw0KICAgICAgICAgIGVsc2UgaWYgKGEub3JkZXIgPCBiLm9yZGVyKSByZXR1cm4gLTE7DQogICAgICAgICAgZWxzZSByZXR1cm4gMDsNCiAgICAgICAgfTsNCiAgICAgICAgbGlzdC5zb3J0KHNvcnRNYXApOw0KDQogICAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgew0KICAgICAgICAgIHZhciBtZSA9IGxpc3RbaV07DQogICAgICAgICAgLy9pZiAobWUucG9vbD09J25vcm1hbCcgfHwgbWUud29uPjApIGFjaGlldmVtZW50c1RvdGFsKys7DQogICAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNBY2hpZXZlbWVudE93bmVkKG1lLnBvb2wpKSBhY2hpZXZlbWVudHNUb3RhbCsrOw0KICAgICAgICAgIHZhciBwb29sID0gbWUucG9vbDsNCiAgICAgICAgICBpZiAoIWFjaGlldmVtZW50c1twb29sXSkgYWNoaWV2ZW1lbnRzW3Bvb2xdID0gIiI7DQogICAgICAgICAgYWNoaWV2ZW1lbnRzW3Bvb2xdICs9IEdhbWUuY3JhdGUobWUsICJzdGF0cyIpOw0KDQogICAgICAgICAgaWYgKG1lLndvbikgew0KICAgICAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNBY2hpZXZlbWVudE93bmVkKG1lLnBvb2wpKSBhY2hpZXZlbWVudHNPd25lZCsrOw0KICAgICAgICAgICAgZWxzZSBhY2hpZXZlbWVudHNPd25lZE90aGVyKys7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGFjaGlldmVtZW50c1N0ciA9ICIiOw0KICAgICAgICB2YXIgcG9vbHMgPSB7DQogICAgICAgICAgZHVuZ2VvbjogRU4NCiAgICAgICAgICAgID8gIjxiPkR1bmdlb24gYWNoaWV2ZW1lbnRzPC9iPiA8c21hbGw+KE5vdCB0ZWNobmljYWxseSBhY2hpZXZhYmxlIHlldC4pPC9zbWFsbD4iDQogICAgICAgICAgICA6ICI8Yj4/Pz88L2I+IiwNCiAgICAgICAgICBzaGFkb3c6DQogICAgICAgICAgICAiPGI+IiArDQogICAgICAgICAgICBsb2MoIlNoYWRvdyBhY2hpZXZlbWVudHMiKSArDQogICAgICAgICAgICAiPC9iPiA8c21hbGw+KCIgKw0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiVGhlc2UgYXJlIGZlYXRzIHRoYXQgYXJlIGVpdGhlciB1bmZhaXIgb3IgZGlmZmljdWx0IHRvIGF0dGFpbi4gVGhleSBkbyBub3QgZ2l2ZSBtaWxrLiINCiAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgIik8L3NtYWxsPiIsDQogICAgICAgIH07DQogICAgICAgIGZvciAodmFyIGkgaW4gYWNoaWV2ZW1lbnRzKSB7DQogICAgICAgICAgaWYgKGFjaGlldmVtZW50c1tpXSAhPSAiIikgew0KICAgICAgICAgICAgaWYgKHBvb2xzW2ldKQ0KICAgICAgICAgICAgICBhY2hpZXZlbWVudHNTdHIgKz0gJzxkaXYgY2xhc3M9Imxpc3RpbmciPicgKyBwb29sc1tpXSArICI8L2Rpdj4iOw0KICAgICAgICAgICAgYWNoaWV2ZW1lbnRzU3RyICs9DQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIGNyYXRlQm94Ij4nICsgYWNoaWV2ZW1lbnRzW2ldICsgIjwvZGl2PiI7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIG1pbGtTdHIgPSAiIjsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLk1pbGtzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IGkpIHsNCiAgICAgICAgICAgIHZhciBtaWxrID0gR2FtZS5NaWxrc1tpXTsNCiAgICAgICAgICAgIG1pbGtTdHIgKz0NCiAgICAgICAgICAgICAgIjxkaXYgIiArDQogICAgICAgICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0icHJvbXB0IiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZy1ib3R0b206NnB4O3doaXRlLXNwYWNlOm5vd3JhcDttYXJnaW46MHB4O3BhZGRpbmctYm90dG9tOjk2cHg7IiBpZD0idG9vbHRpcE1pbGsiPjxoMyBzdHlsZT0ibWFyZ2luOjZweCAzMnB4IDBweCAzMnB4OyI+JyArDQogICAgICAgICAgICAgICAgICAobG9jKCJSYW5rICUxIiwgcm9tYW5pemUoaSArIDEpKSArICIgLSAiICsgbWlsay5uYW1lKSArDQogICAgICAgICAgICAgICAgICAnPC9oMz48ZGl2IHN0eWxlPSJvcGFjaXR5OjAuNzU7Zm9udC1zaXplOjlweDsiPignICsNCiAgICAgICAgICAgICAgICAgIChpID09IDANCiAgICAgICAgICAgICAgICAgICAgPyBsb2MoInN0YXJ0ZXIgbWlsayIpDQogICAgICAgICAgICAgICAgICAgIDogbG9jKCJmb3IgJTEgYWNoaWV2ZW1lbnRzIiwgQmVhdXRpZnkoaSAqIDI1KSkpICsNCiAgICAgICAgICAgICAgICAgICcpPC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6OTZweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjBweDtib3R0b206MHB4O2JhY2tncm91bmQ6dXJsKGltZy8nICsNCiAgICAgICAgICAgICAgICAgIG1pbGsucGljICsNCiAgICAgICAgICAgICAgICAgICcpOyI+PC9kaXY+PC9kaXY+JywNCiAgICAgICAgICAgICAgICAidG9wIg0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgJyBzdHlsZT0iYmFja2dyb3VuZDp1cmwoaW1nL2ljb25zLnBuZz92PScgKw0KICAgICAgICAgICAgICBHYW1lLnZlcnNpb24gKw0KICAgICAgICAgICAgICAiKSAiICsNCiAgICAgICAgICAgICAgLW1pbGsuaWNvblswXSAqIDQ4ICsNCiAgICAgICAgICAgICAgInB4ICIgKw0KICAgICAgICAgICAgICAtbWlsay5pY29uWzFdICogNDggKw0KICAgICAgICAgICAgICAncHg7bWFyZ2luOjJweCAwcHg7IiBjbGFzcz0idHJvcGh5Ij48L2Rpdj4nOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBtaWxrU3RyICs9ICc8ZGl2IHN0eWxlPSJjbGVhcjpib3RoOyI+PC9kaXY+JzsNCg0KICAgICAgICB2YXIgc2FudGFTdHIgPSAiIjsNCiAgICAgICAgdmFyIGZyYW1lcyA9IDE1Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkEgZmVzdGl2ZSBoYXQiKSkgew0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IEdhbWUuc2FudGFMZXZlbDsgaSsrKSB7DQogICAgICAgICAgICBzYW50YVN0ciArPQ0KICAgICAgICAgICAgICAiPGRpdiAiICsNCiAgICAgICAgICAgICAgR2FtZS5nZXRUb29sdGlwKA0KICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJwcm9tcHQiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nLWJvdHRvbTo2cHg7d2hpdGUtc3BhY2U6bm93cmFwO21hcmdpbjowcHggMzJweDsiPjxkaXYgc3R5bGU9IndpZHRoOjk2cHg7aGVpZ2h0Ojk2cHg7bWFyZ2luOjRweCBhdXRvO2JhY2tncm91bmQ6dXJsKGltZy9zYW50YS5wbmcpICcgKw0KICAgICAgICAgICAgICAgICAgLWkgKiA5NiArDQogICAgICAgICAgICAgICAgICAncHggMHB4O2ZpbHRlcjpkcm9wLXNoYWRvdygwcHggM3B4IDJweCAjMDAwKTstd2Via2l0LWZpbHRlcjpkcm9wLXNoYWRvdygwcHggM3B4IDJweCAjMDAwKTsiIGlkPSJ0b29sdGlwU2FudGEiPjwvZGl2PjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjxoMz4nICsNCiAgICAgICAgICAgICAgICAgIEdhbWUuc2FudGFMZXZlbHNbaV0gKw0KICAgICAgICAgICAgICAgICAgIjwvaDM+PC9kaXY+IiwNCiAgICAgICAgICAgICAgICAidG9wIg0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgJyBzdHlsZT0iYmFja2dyb3VuZDp1cmwoaW1nL3NhbnRhLnBuZykgJyArDQogICAgICAgICAgICAgIC1pICogNDggKw0KICAgICAgICAgICAgICAicHggMHB4O2JhY2tncm91bmQtc2l6ZToiICsNCiAgICAgICAgICAgICAgZnJhbWVzICogNDggKw0KICAgICAgICAgICAgICAncHggNDhweDsiIGNsYXNzPSJ0cm9waHkiPjwvZGl2Pic7DQogICAgICAgICAgfQ0KICAgICAgICAgIHNhbnRhU3RyICs9ICc8ZGl2IHN0eWxlPSJjbGVhcjpib3RoOyI+PC9kaXY+JzsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgZHJhZ29uU3RyID0gIiI7DQogICAgICAgIHZhciBmcmFtZXMgPSA5Ow0KICAgICAgICB2YXIgbWFpbkxldmVscyA9IFsNCiAgICAgICAgICAwLA0KICAgICAgICAgIDQsDQogICAgICAgICAgOCwNCiAgICAgICAgICBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAzLA0KICAgICAgICAgIEdhbWUuZHJhZ29uTGV2ZWxzLmxlbmd0aCAtIDIsDQogICAgICAgICAgR2FtZS5kcmFnb25MZXZlbHMubGVuZ3RoIC0gMSwNCiAgICAgICAgXTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJBIGNydW1ibHkgZWdnIikpIHsNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBtYWluTGV2ZWxzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5kcmFnb25MZXZlbCA+PSBtYWluTGV2ZWxzW2ldKSB7DQogICAgICAgICAgICAgIHZhciBsZXZlbCA9IEdhbWUuZHJhZ29uTGV2ZWxzW21haW5MZXZlbHNbaV1dOw0KICAgICAgICAgICAgICBkcmFnb25TdHIgKz0NCiAgICAgICAgICAgICAgICAiPGRpdiAiICsNCiAgICAgICAgICAgICAgICBHYW1lLmdldFRvb2x0aXAoDQogICAgICAgICAgICAgICAgICAvLyc8ZGl2IHN0eWxlPSJ3aWR0aDo5NnB4O2hlaWdodDo5NnB4O21hcmdpbjo0cHggYXV0bztiYWNrZ3JvdW5kOnVybChpbWcvZHJhZ29uLnBuZz92PScrR2FtZS52ZXJzaW9uKycpICcrKC1sZXZlbC5waWMqOTYpKydweCAwcHg7Ij48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48ZGl2IHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luLWJvdHRvbTo2cHg7Ij4nK2xldmVsLm5hbWUrJzwvZGl2PicNCiAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJwcm9tcHQiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nLWJvdHRvbTo2cHg7d2hpdGUtc3BhY2U6bm93cmFwO21hcmdpbjowcHggMzJweDsiIGlkPSJ0b29sdGlwRHJhZ29uIj48ZGl2IHN0eWxlPSJ3aWR0aDo5NnB4O2hlaWdodDo5NnB4O21hcmdpbjo0cHggYXV0bztiYWNrZ3JvdW5kOnVybChpbWcvZHJhZ29uLnBuZz92PScgKw0KICAgICAgICAgICAgICAgICAgICBHYW1lLnZlcnNpb24gKw0KICAgICAgICAgICAgICAgICAgICAiKSAiICsNCiAgICAgICAgICAgICAgICAgICAgLWxldmVsLnBpYyAqIDk2ICsNCiAgICAgICAgICAgICAgICAgICAgJ3B4IDBweDtmaWx0ZXI6ZHJvcC1zaGFkb3coMHB4IDNweCAycHggIzAwMCk7LXdlYmtpdC1maWx0ZXI6ZHJvcC1zaGFkb3coMHB4IDNweCAycHggIzAwMCk7Ij48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48aDM+JyArDQogICAgICAgICAgICAgICAgICAgIGxldmVsLm5hbWUgKw0KICAgICAgICAgICAgICAgICAgICAiPC9oMz48L2Rpdj4iLA0KICAgICAgICAgICAgICAgICAgInRvcCINCiAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAnIHN0eWxlPSJiYWNrZ3JvdW5kOnVybChpbWcvZHJhZ29uLnBuZz92PScgKw0KICAgICAgICAgICAgICAgIEdhbWUudmVyc2lvbiArDQogICAgICAgICAgICAgICAgIikgIiArDQogICAgICAgICAgICAgICAgLWxldmVsLnBpYyAqIDQ4ICsNCiAgICAgICAgICAgICAgICAicHggMHB4O2JhY2tncm91bmQtc2l6ZToiICsNCiAgICAgICAgICAgICAgICBmcmFtZXMgKiA0OCArDQogICAgICAgICAgICAgICAgJ3B4IDQ4cHg7IiBjbGFzcz0idHJvcGh5Ij48L2Rpdj4nOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBkcmFnb25TdHIgKz0gJzxkaXYgc3R5bGU9ImNsZWFyOmJvdGg7Ij48L2Rpdj4nOw0KICAgICAgICB9DQogICAgICAgIHZhciBhc2NlbnNpb25Nb2RlU3RyID0gIiI7DQogICAgICAgIHZhciBpY29uID0gR2FtZS5hc2NlbnNpb25Nb2Rlc1tHYW1lLmFzY2Vuc2lvbk1vZGVdLmljb247DQogICAgICAgIGlmIChHYW1lLnJlc2V0cyA+IDApDQogICAgICAgICAgYXNjZW5zaW9uTW9kZVN0ciA9DQogICAgICAgICAgICAnPHNwYW4gc3R5bGU9ImN1cnNvcjpwb2ludGVyOyIgJyArDQogICAgICAgICAgICBHYW1lLmdldFRvb2x0aXAoDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7IiBpZD0idG9vbHRpcENoYWxsZW5nZU1vZGUiPicgKw0KICAgICAgICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZXNbR2FtZS5hc2NlbnNpb25Nb2RlXS5kZXNjICsNCiAgICAgICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICAgICAgInRvcCINCiAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgJz48ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7ZmxvYXQ6bm9uZTt0cmFuc2Zvcm06c2NhbGUoMC41KTttYXJnaW46LTI0cHggLTE2cHggLTE5cHggLThweDsnICsNCiAgICAgICAgICAgIHdyaXRlSWNvbihpY29uKSArDQogICAgICAgICAgICAnIj48L2Rpdj4nICsNCiAgICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZXNbR2FtZS5hc2NlbnNpb25Nb2RlXS5kbmFtZSArDQogICAgICAgICAgICAiPC9zcGFuPiI7DQoNCiAgICAgICAgdmFyIG1pbGtOYW1lID0gR2FtZS5NaWxrLm5hbWU7DQoNCiAgICAgICAgdmFyIHJlc2VhcmNoU3RyID0gR2FtZS5zYXlUaW1lKEdhbWUucmVzZWFyY2hULCAtMSk7DQogICAgICAgIHZhciBwbGVkZ2VTdHIgPSBHYW1lLnNheVRpbWUoR2FtZS5wbGVkZ2VULCAtMSk7DQogICAgICAgIHZhciB3cmF0aFN0ciA9ICIiOw0KICAgICAgICBpZiAoR2FtZS5lbGRlcldyYXRoID09IDEpIHdyYXRoU3RyID0gbG9jKCJhd29rZW4iKTsNCiAgICAgICAgZWxzZSBpZiAoR2FtZS5lbGRlcldyYXRoID09IDIpIHdyYXRoU3RyID0gbG9jKCJkaXNwbGVhc2VkIik7DQogICAgICAgIGVsc2UgaWYgKEdhbWUuZWxkZXJXcmF0aCA9PSAzKSB3cmF0aFN0ciA9IGxvYygiYW5nZXJlZCIpOw0KICAgICAgICBlbHNlIGlmIChHYW1lLmVsZGVyV3JhdGggPT0gMCAmJiBHYW1lLnBsZWRnZXMgPiAwKQ0KICAgICAgICAgIHdyYXRoU3RyID0gbG9jKCJhcHBlYXNlZCIpOw0KDQogICAgICAgIHZhciBkcm9wTXVsdCA9IEdhbWUuZHJvcFJhdGVNdWx0KCk7DQoNCiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgICBkYXRlLnNldFRpbWUoRGF0ZS5ub3coKSAtIEdhbWUuc3RhcnREYXRlKTsNCiAgICAgICAgdmFyIHRpbWVJblNlY29uZHMgPSBkYXRlLmdldFRpbWUoKSAvIDEwMDA7DQogICAgICAgIHZhciBzdGFydERhdGUgPSBHYW1lLnNheVRpbWUodGltZUluU2Vjb25kcyAqIEdhbWUuZnBzLCAtMSk7DQogICAgICAgIGRhdGUuc2V0VGltZShEYXRlLm5vdygpIC0gR2FtZS5mdWxsRGF0ZSk7DQogICAgICAgIHZhciBmdWxsRGF0ZSA9IEdhbWUuc2F5VGltZSgoZGF0ZS5nZXRUaW1lKCkgLyAxMDAwKSAqIEdhbWUuZnBzLCAtMSk7DQogICAgICAgIGlmICghR2FtZS5mdWxsRGF0ZSB8fCAhZnVsbERhdGUgfHwgZnVsbERhdGUubGVuZ3RoIDwgMSkNCiAgICAgICAgICBmdWxsRGF0ZSA9IGxvYygiYSBsb25nIHdoaWxlIik7DQogICAgICAgIC8qZGF0ZS5zZXRUaW1lKG5ldyBEYXRlKCkuZ2V0VGltZSgpLUdhbWUubGFzdERhdGUpOw0KCQkJCXZhciBsYXN0RGF0ZT1HYW1lLnNheVRpbWUoZGF0ZS5nZXRUaW1lKCkvMTAwMCpHYW1lLmZwcywyKTsqLw0KDQogICAgICAgIHZhciBoZWF2ZW5seU11bHQgPSBHYW1lLkdldEhlYXZlbmx5TXVsdGlwbGllcigpOw0KDQogICAgICAgIHZhciBzZWFzb25TdHIgPSBHYW1lLnNheVRpbWUoR2FtZS5zZWFzb25ULCAtMSk7DQoNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9InNlY3Rpb24iPicgKw0KICAgICAgICAgIChFTiA/ICJTdGF0aXN0aWNzIiA6IGxvYygiU3RhdHMiKSkgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ic3Vic2VjdGlvbiI+JyArDQogICAgICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIj4nICsNCiAgICAgICAgICBsb2MoIkdlbmVyYWwiKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGlkPSJzdGF0c0dlbmVyYWwiPicgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICBsb2MoIkNvb2tpZXMgaW4gYmFuazoiKSArDQogICAgICAgICAgJzwvYj4gPGRpdiBjbGFzcz0icHJpY2UgcGxhaW4iPicgKw0KICAgICAgICAgIEdhbWUudGlueUNvb2tpZSgpICsNCiAgICAgICAgICBCZWF1dGlmeShHYW1lLmNvb2tpZXMpICsNCiAgICAgICAgICAiPC9kaXY+PC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiQ29va2llcyBiYWtlZCAodGhpcyBhc2NlbnNpb24pOiIpICsNCiAgICAgICAgICAnPC9iPiA8ZGl2IGNsYXNzPSJwcmljZSBwbGFpbiI+JyArDQogICAgICAgICAgR2FtZS50aW55Q29va2llKCkgKw0KICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc0Vhcm5lZCkgKw0KICAgICAgICAgICI8L2Rpdj48L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJDb29raWVzIGJha2VkIChhbGwgdGltZSk6IikgKw0KICAgICAgICAgICc8L2I+IDxkaXYgY2xhc3M9InByaWNlIHBsYWluIj4nICsNCiAgICAgICAgICBHYW1lLnRpbnlDb29raWUoKSArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5jb29raWVzRWFybmVkICsgR2FtZS5jb29raWVzUmVzZXQpICsNCiAgICAgICAgICAiPC9kaXY+PC9kaXY+IiArDQogICAgICAgICAgKEdhbWUuY29va2llc1Jlc2V0ID4gMA0KICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgICAgIGxvYygiQ29va2llcyBmb3JmZWl0ZWQgYnkgYXNjZW5kaW5nOiIpICsNCiAgICAgICAgICAgICAgJzwvYj4gPGRpdiBjbGFzcz0icHJpY2UgcGxhaW4iPicgKw0KICAgICAgICAgICAgICBHYW1lLnRpbnlDb29raWUoKSArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc1Jlc2V0KSArDQogICAgICAgICAgICAgICI8L2Rpdj48L2Rpdj4iDQogICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgKEdhbWUucmVzZXRzDQogICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgbG9jKCJMZWdhY3kgc3RhcnRlZDoiKSArDQogICAgICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgICAgICAoZnVsbERhdGUgPT0gIiIgPyBsb2MoImp1c3Qgbm93IikgOiBsb2MoIiUxIGFnbyIsIGZ1bGxEYXRlKSkgKw0KICAgICAgICAgICAgICAiLCAiICsNCiAgICAgICAgICAgICAgbG9jKCJ3aXRoICUxIGFzY2Vuc2lvbiIsIExCZWF1dGlmeShHYW1lLnJlc2V0cykpICsNCiAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJSdW4gc3RhcnRlZDoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgKHN0YXJ0RGF0ZSA9PSAiIiA/IGxvYygianVzdCBub3ciKSA6IGxvYygiJTEgYWdvIiwgc3RhcnREYXRlKSkgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJCdWlsZGluZ3Mgb3duZWQ6IikgKw0KICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgIEJlYXV0aWZ5KGJ1aWxkaW5nc093bmVkKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICBsb2MoIkNvb2tpZXMgcGVyIHNlY29uZDoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5jb29raWVzUHMsIDEpICsNCiAgICAgICAgICAiIDxzbWFsbD4iICsNCiAgICAgICAgICAiKCIgKw0KICAgICAgICAgIGxvYygibXVsdGlwbGllcjoiKSArDQogICAgICAgICAgIiAiICsNCiAgICAgICAgICBCZWF1dGlmeShNYXRoLnJvdW5kKEdhbWUuZ2xvYmFsQ3BzTXVsdCAqIDEwMCksIDEpICsNCiAgICAgICAgICAiJSkiICsNCiAgICAgICAgICAoR2FtZS5jcHNTdWNrZWQgPiAwDQogICAgICAgICAgICA/ICcgPHNwYW4gY2xhc3M9Indhcm5pbmciPignICsNCiAgICAgICAgICAgICAgbG9jKCJ3aXRoZXJlZDoiKSArDQogICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KE1hdGgucm91bmQoR2FtZS5jcHNTdWNrZWQgKiAxMDApLCAxKSArDQogICAgICAgICAgICAgICIlKTwvc3Bhbj4iDQogICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgIjwvc21hbGw+PC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiUmF3IGNvb2tpZXMgcGVyIHNlY29uZDoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5jb29raWVzUHNSYXcsIDEpICsNCiAgICAgICAgICAiIDxzbWFsbD4iICsNCiAgICAgICAgICAiKCIgKw0KICAgICAgICAgIGxvYygiaGlnaGVzdCB0aGlzIGFzY2Vuc2lvbjoiKSArDQogICAgICAgICAgIiAiICsNCiAgICAgICAgICBCZWF1dGlmeShHYW1lLmNvb2tpZXNQc1Jhd0hpZ2hlc3QsIDEpICsNCiAgICAgICAgICAiKSIgKw0KICAgICAgICAgICI8L3NtYWxsPjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICBsb2MoIkNvb2tpZXMgcGVyIGNsaWNrOiIpICsNCiAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICBCZWF1dGlmeShHYW1lLmNvbXB1dGVkTW91c2VDcHMsIDEpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiQ29va2llIGNsaWNrczoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5jb29raWVDbGlja3MpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiSGFuZC1tYWRlIGNvb2tpZXM6IikgKw0KICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuaGFuZG1hZGVDb29raWVzKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICBsb2MoIkdvbGRlbiBjb29raWUgY2xpY2tzOiIpICsNCiAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICBCZWF1dGlmeShHYW1lLmdvbGRlbkNsaWNrc0xvY2FsKSArDQogICAgICAgICAgIiA8c21hbGw+KCIgKw0KICAgICAgICAgIGxvYygiYWxsIHRpbWU6IikgKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgQmVhdXRpZnkoR2FtZS5nb2xkZW5DbGlja3MpICsNCiAgICAgICAgICAiKTwvc21hbGw+PC9kaXY+IiArIC8vJyA8c3BhbiBjbGFzcz0iaGlkZGVuIj4oPGI+TWlzc2VkIGdvbGRlbiBjb29raWVzIDo8L2I+ICcrQmVhdXRpZnkoR2FtZS5taXNzZWRHb2xkZW5DbGlja3MpKycpPC9zcGFuPjwvZGl2PicrDQogICAgICAgICAgKGRyb3BNdWx0ICE9IDENCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICBsb2MoIlJhbmRvbSBkcm9wIG11bHRpcGxpZXI6IikgKw0KICAgICAgICAgICAgICAiPC9iPiA8c21hbGw+eDwvc21hbGw+IiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KGRyb3BNdWx0LCAyKSArDQogICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8YnI+PGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJSdW5uaW5nIHZlcnNpb246IikgKw0KICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgIEdhbWUudmVyc2lvbiArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgIChyZXNlYXJjaFN0ciAhPSAiIiB8fA0KICAgICAgICAgIHdyYXRoU3RyICE9ICIiIHx8DQogICAgICAgICAgcGxlZGdlU3RyICE9ICIiIHx8DQogICAgICAgICAgc2FudGFTdHIgIT0gIiIgfHwNCiAgICAgICAgICBkcmFnb25TdHIgIT0gIiIgfHwNCiAgICAgICAgICBHYW1lLnNlYXNvbiAhPSAiIiB8fA0KICAgICAgICAgIGFzY2Vuc2lvbk1vZGVTdHIgIT0gIiIgfHwNCiAgICAgICAgICBHYW1lLmNhbkx1bXBzKCkNCiAgICAgICAgICAgID8gJzwvZGl2PjxkaXYgY2xhc3M9InN1YnNlY3Rpb24iPicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgICAgICAgICAgICBsb2MoIlNwZWNpYWwiKSArDQogICAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICAgJzxkaXYgaWQ9InN0YXRzU3BlY2lhbCI+JyArDQogICAgICAgICAgICAgIChhc2NlbnNpb25Nb2RlU3RyICE9ICIiDQogICAgICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgICAgICAgICBsb2MoIkNoYWxsZW5nZSBtb2RlOiIpICsNCiAgICAgICAgICAgICAgICAgICI8L2I+IiArDQogICAgICAgICAgICAgICAgICBhc2NlbnNpb25Nb2RlU3RyICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAoR2FtZS5zZWFzb24gIT0gIiINCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiU2Vhc29uYWwgZXZlbnQ6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLm5hbWUgKw0KICAgICAgICAgICAgICAgICAgKHNlYXNvblN0ciAhPSAiIg0KICAgICAgICAgICAgICAgICAgICA/ICIgPHNtYWxsPigiICsgbG9jKCIlMSByZW1haW5pbmciLCBzZWFzb25TdHIpICsgIik8L3NtYWxsPiINCiAgICAgICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAgIChFTiAmJiBHYW1lLnNlYXNvbiA9PSAiZm9vbHMiDQogICAgICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+TW9uZXkgbWFkZSBmcm9tIHNlbGxpbmcgY29va2llcyA6PC9iPiAnICsNCiAgICAgICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc0Vhcm5lZCAqIDAuMDgsIDIpICsNCiAgICAgICAgICAgICAgICAgICIgY29va2llIGRvbGxhcnM8L2Rpdj4iICsNCiAgICAgICAgICAgICAgICAgIChHYW1lLk9iamVjdHNbIlBvcnRhbCJdLmhpZ2hlc3QgPiAwDQogICAgICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPlRWIHNob3cgc2Vhc29ucyBwcm9kdWNlZCA6PC9iPiAnICsNCiAgICAgICAgICAgICAgICAgICAgICBCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoDQogICAgICAgICAgICAgICAgICAgICAgICAgICh0aW1lSW5TZWNvbmRzIC8gNjAgLyA2MCkgKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIChHYW1lLk9iamVjdHNbIlBvcnRhbCJdLmhpZ2hlc3QgKiAwLjEzKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgMQ0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICAgICAgIDogIiIpDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAocmVzZWFyY2hTdHIgIT0gIiINCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiUmVzZWFyY2g6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICBsb2MoIiUxIHJlbWFpbmluZyIsIHJlc2VhcmNoU3RyKSArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgKHdyYXRoU3RyICE9ICIiDQogICAgICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgICAgICAgICBsb2MoIkdyYW5kbWF0cmlhcmNocyBzdGF0dXM6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICB3cmF0aFN0ciArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgKHBsZWRnZVN0ciAhPSAiIg0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJQbGVkZ2U6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICBsb2MoIiUxIHJlbWFpbmluZyIsIHBsZWRnZVN0cikgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAgIChHYW1lLndyaW5rbGVyc1BvcHBlZCA+IDANCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiV3JpbmtsZXJzIHBvcHBlZDoiKSArDQogICAgICAgICAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUud3JpbmtsZXJzUG9wcGVkKSArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgKEdhbWUuY2FuTHVtcHMoKSAmJiBHYW1lLmx1bXBzVG90YWwgPiAtMQ0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJTdWdhciBsdW1wcyBoYXJ2ZXN0ZWQ6IikgKw0KICAgICAgICAgICAgICAgICAgJzwvYj4gPGRpdiBjbGFzcz0icHJpY2UgbHVtcCBwbGFpbiI+JyArDQogICAgICAgICAgICAgICAgICBCZWF1dGlmeShHYW1lLmx1bXBzVG90YWwpICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj48L2Rpdj4iDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAvLyhHYW1lLmNvb2tpZXNTdWNrZWQ+MD8nPGRpdiBjbGFzcz0ibGlzdGluZyB3YXJuaW5nIj48Yj5XaXRoZXJlZCA6PC9iPiAnK0JlYXV0aWZ5KEdhbWUuY29va2llc1N1Y2tlZCkrJyBjb29raWVzPC9kaXY+JzonJykrDQogICAgICAgICAgICAgIChHYW1lLnJlaW5kZWVyQ2xpY2tlZCA+IDANCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiUmVpbmRlZXIgZm91bmQ6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgICAgICBCZWF1dGlmeShHYW1lLnJlaW5kZWVyQ2xpY2tlZCkgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAgIChzYW50YVN0ciAhPSAiIg0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJTYW50YSBzdGFnZXMgdW5sb2NrZWQ6IikgKw0KICAgICAgICAgICAgICAgICAgIjwvYj48L2Rpdj48ZGl2PiIgKw0KICAgICAgICAgICAgICAgICAgc2FudGFTdHIgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgICAgICA6ICIiKSArDQogICAgICAgICAgICAgIChkcmFnb25TdHIgIT0gIiINCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgICAgIGxvYygiRHJhZ29uIHRyYWluaW5nOiIpICsNCiAgICAgICAgICAgICAgICAgICI8L2I+PC9kaXY+PGRpdj4iICsNCiAgICAgICAgICAgICAgICAgIGRyYWdvblN0ciArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAoR2FtZS5wcmVzdGlnZSA+IDAgfHwgcHJlc3RpZ2VVcGdyYWRlcyAhPSAiIg0KICAgICAgICAgICAgPyAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiI+JyArDQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSI+JyArDQogICAgICAgICAgICAgIGxvYygiUHJlc3RpZ2UiKSArDQogICAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICAgJzxkaXYgaWQ9InN0YXRzUHJlc3RpZ2UiPicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGRpdiBjbGFzcz0iaWNvbiIgc3R5bGU9ImZsb2F0OmxlZnQ7YmFja2dyb3VuZC1wb3NpdGlvbjonICsNCiAgICAgICAgICAgICAgLTE5ICogNDggKw0KICAgICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAgIC03ICogNDggKw0KICAgICAgICAgICAgICAncHg7Ij48L2Rpdj4nICsNCiAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6OHB4OyI+PHNwYW4gY2xhc3M9InRpdGxlIiBzdHlsZT0iZm9udC1zaXplOjIycHg7Ij4nICsNCiAgICAgICAgICAgICAgbG9jKCJQcmVzdGlnZSBsZXZlbDoiKSArDQogICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUucHJlc3RpZ2UpICsNCiAgICAgICAgICAgICAgIjwvc3Bhbj4gIiArDQogICAgICAgICAgICAgIGxvYygiYXQgJTElIG9mIGl0cyBwb3RlbnRpYWwgPGI+KCslMiUgQ3BTKTwvYj4iLCBbDQogICAgICAgICAgICAgICAgQmVhdXRpZnkoaGVhdmVubHlNdWx0ICogMTAwLCAxKSwNCiAgICAgICAgICAgICAgICBCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoR2FtZS5wcmVzdGlnZSkgKiBHYW1lLmhlYXZlbmx5UG93ZXIgKiBoZWF2ZW5seU11bHQsDQogICAgICAgICAgICAgICAgICAxDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAiPGJyPiIgKw0KICAgICAgICAgICAgICBsb2MoIkhlYXZlbmx5IGNoaXBzOiIpICsNCiAgICAgICAgICAgICAgIiA8Yj4iICsNCiAgICAgICAgICAgICAgQmVhdXRpZnkoR2FtZS5oZWF2ZW5seUNoaXBzKSArDQogICAgICAgICAgICAgICI8L2I+PC9kaXY+IiArDQogICAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICAgKHByZXN0aWdlVXBncmFkZXMgIT0gIiINCiAgICAgICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIiBzdHlsZT0iY2xlYXI6bGVmdDsiPjxiPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJQcmVzdGlnZSB1cGdyYWRlcyB1bmxvY2tlZDoiKSArDQogICAgICAgICAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICAgICAgICAgIHByZXN0aWdlVXBncmFkZXNPd25lZCArDQogICAgICAgICAgICAgICAgICAiLyIgKw0KICAgICAgICAgICAgICAgICAgcHJlc3RpZ2VVcGdyYWRlc1RvdGFsICsNCiAgICAgICAgICAgICAgICAgICIgKCIgKw0KICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcigNCiAgICAgICAgICAgICAgICAgICAgKHByZXN0aWdlVXBncmFkZXNPd25lZCAvIHByZXN0aWdlVXBncmFkZXNUb3RhbCkgKiAxMDANCiAgICAgICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAgICAgIiUpPC9kaXY+IiArDQogICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyBjcmF0ZUJveCI+JyArDQogICAgICAgICAgICAgICAgICBwcmVzdGlnZVVwZ3JhZGVzICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICc8L2Rpdj48ZGl2IGNsYXNzPSJzdWJzZWN0aW9uIj4nICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiPicgKw0KICAgICAgICAgIGxvYygiVXBncmFkZXMiKSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgICc8ZGl2IGlkPSJzdGF0c1VwZ3JhZGVzIj4nICsNCiAgICAgICAgICAoaGlkZGVuVXBncmFkZXMgIT0gIiINCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPkRlYnVnPC9iPjwvZGl2PicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyBjcmF0ZUJveCI+JyArDQogICAgICAgICAgICAgIGhpZGRlblVwZ3JhZGVzICsNCiAgICAgICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJVcGdyYWRlcyB1bmxvY2tlZDoiKSArDQogICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgdXBncmFkZXNPd25lZCArDQogICAgICAgICAgIi8iICsNCiAgICAgICAgICB1cGdyYWRlc1RvdGFsICsNCiAgICAgICAgICAiICgiICsNCiAgICAgICAgICBNYXRoLmZsb29yKCh1cGdyYWRlc093bmVkIC8gdXBncmFkZXNUb3RhbCkgKiAxMDApICsNCiAgICAgICAgICAiJSk8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyBjcmF0ZUJveCI+JyArDQogICAgICAgICAgdXBncmFkZXMgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAoY29va2llVXBncmFkZXMgIT0gIiINCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICBsb2MoIkNvb2tpZXMiKSArDQogICAgICAgICAgICAgICI8L2I+PC9kaXY+IiArDQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIGNyYXRlQm94Ij4nICsNCiAgICAgICAgICAgICAgY29va2llVXBncmFkZXMgKw0KICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPC9kaXY+PGRpdiBjbGFzcz0ic3Vic2VjdGlvbiI+JyArDQogICAgICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIj4nICsNCiAgICAgICAgICBsb2MoIkFjaGlldmVtZW50cyIpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgaWQ9InN0YXRzQWNoaWV2cyI+JyArDQogICAgICAgICAgJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgIGxvYygiQWNoaWV2ZW1lbnRzIHVubG9ja2VkOiIpICsNCiAgICAgICAgICAiPC9iPiAiICsNCiAgICAgICAgICBhY2hpZXZlbWVudHNPd25lZCArDQogICAgICAgICAgIi8iICsNCiAgICAgICAgICBhY2hpZXZlbWVudHNUb3RhbCArDQogICAgICAgICAgIiAoIiArDQogICAgICAgICAgTWF0aC5mbG9vcigoYWNoaWV2ZW1lbnRzT3duZWQgLyBhY2hpZXZlbWVudHNUb3RhbCkgKiAxMDApICsNCiAgICAgICAgICAiJSkiICsNCiAgICAgICAgICAoYWNoaWV2ZW1lbnRzT3duZWRPdGhlciA+IDANCiAgICAgICAgICAgID8gJzxzcGFuIHN0eWxlPSJmb250LXdlaWdodDpib2xkO2ZvbnQtc2l6ZToxMHB4O2NvbG9yOiM3MGE7Ij4gKCsnICsNCiAgICAgICAgICAgICAgYWNoaWV2ZW1lbnRzT3duZWRPdGhlciArDQogICAgICAgICAgICAgICIpPC9zcGFuPiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgKEdhbWUuY29va2llc011bHRCeVR5cGVbImtpdHRlbnMiXSA+IDENCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9Imxpc3RpbmciPjxiPicgKw0KICAgICAgICAgICAgICBsb2MoIktpdHRlbiBtdWx0aXBsaWVyOiIpICsNCiAgICAgICAgICAgICAgIjwvYj4gIiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc011bHRCeVR5cGVbImtpdHRlbnMiXSAqIDEwMCkgKw0KICAgICAgICAgICAgICAiJTwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGlzdGluZyI+PGI+JyArDQogICAgICAgICAgbG9jKCJNaWxrIikgKw0KICAgICAgICAgICI6PC9iPiAiICsNCiAgICAgICAgICBtaWxrTmFtZSArDQogICAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAgIChtaWxrU3RyICE9ICIiDQogICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgbG9jKCJNaWxrIGZsYXZvcnMgdW5sb2NrZWQ6IikgKw0KICAgICAgICAgICAgICAiPC9iPjwvZGl2PjxkaXY+IiArDQogICAgICAgICAgICAgIG1pbGtTdHIgKw0KICAgICAgICAgICAgICAiPC9kaXY+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaXN0aW5nIj48c21hbGwgc3R5bGU9Im9wYWNpdHk6MC43NTsiPignICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiTWlsayBpcyBnYWluZWQgd2l0aCBlYWNoIGFjaGlldmVtZW50LiBJdCBjYW4gdW5sb2NrIHVuaXF1ZSB1cGdyYWRlcyBvdmVyIHRpbWUuIg0KICAgICAgICAgICkgKw0KICAgICAgICAgICIpPC9zbWFsbD48L2Rpdj4iICsNCiAgICAgICAgICBhY2hpZXZlbWVudHNTdHIgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmctYm90dG9tOjEyOHB4OyI+PC9kaXY+JzsNCiAgICAgIH0NCiAgICAgIC8vc3RyPSc8ZGl2IGlkPSJzZWxlY3Rpb25LZWVwZXIiIGNsYXNzPSJzZWxlY3RhYmxlIj4nK3N0cisnPC9kaXY+JzsNCiAgICAgIGwoIm1lbnUiKS5pbm5lckhUTUwgPSBzdHI7DQogICAgICBpZiAoQXBwKSB7DQogICAgICAgIHZhciBhbmNob3JzID0gbCgibWVudSIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIik7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5jaG9ycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHZhciBpdCA9IGFuY2hvcnNbaV07DQogICAgICAgICAgaWYgKGl0LmhyZWYpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0LmhyZWYpOw0KICAgICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICAgIGl0LA0KICAgICAgICAgICAgICAiY2xpY2siLA0KICAgICAgICAgICAgICAoZnVuY3Rpb24gKGhyZWYpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgQXBwLm9wZW5MaW5rKGhyZWYpOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgIH0pKGl0LmhyZWYpDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgaXQucmVtb3ZlQXR0cmlidXRlKCJocmVmIik7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICAvKkFkZEV2ZW50KGwoJ3NlbGVjdGlvbktlZXBlcicpLCdtb3VzZXVwJyxmdW5jdGlvbihlKXsNCgkJCQljb25zb2xlLmxvZygnc2VsZWN0aW9uOicsd2luZG93LmdldFNlbGVjdGlvbigpKTsNCgkJCX0pOyovDQogICAgfTsNCg0KICAgIEFkZEV2ZW50KGwoInByZWZzQnV0dG9uIiksICJjbGljayIsIGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUuU2hvd01lbnUoInByZWZzIik7DQogICAgfSk7DQogICAgQWRkRXZlbnQobCgic3RhdHNCdXR0b24iKSwgImNsaWNrIiwgZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5TaG93TWVudSgic3RhdHMiKTsNCiAgICB9KTsNCiAgICBBZGRFdmVudChsKCJsb2dCdXR0b24iKSwgImNsaWNrIiwgZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5TaG93TWVudSgibG9nIik7DQogICAgfSk7DQogICAgQWRkRXZlbnQobCgibGVnYWN5QnV0dG9uIiksICJjbGljayIsIGZ1bmN0aW9uICgpIHsNCiAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICBHYW1lLkFzY2VuZCgpOw0KICAgIH0pOw0KICAgIEdhbWUuYXNjZW5kTWV0ZXIgPSBsKCJhc2NlbmRNZXRlciIpOw0KICAgIEdhbWUuYXNjZW5kTnVtYmVyID0gbCgiYXNjZW5kTnVtYmVyIik7DQoNCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJTkVXUyBUSUNLRVINCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLlRpY2tlciA9ICIiOw0KICAgIEdhbWUuVGlja2VyQWdlID0gMDsNCiAgICBHYW1lLlRpY2tlckVmZmVjdCA9IDA7DQogICAgR2FtZS5UaWNrZXJOID0gMDsNCiAgICBHYW1lLlRpY2tlckNsaWNrcyA9IDA7DQogICAgR2FtZS5VcGRhdGVUaWNrZXIgPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLlRpY2tlckFnZS0tOw0KICAgICAgaWYgKEdhbWUuVGlja2VyQWdlIDw9IDApIEdhbWUuZ2V0TmV3VGlja2VyKCk7DQogICAgICBlbHNlIGlmIChHYW1lLlRpY2tlciA9PSAiIikgR2FtZS5nZXROZXdUaWNrZXIodHJ1ZSk7DQogICAgfTsNCiAgICBHYW1lLmdldE5ld1RpY2tlciA9IGZ1bmN0aW9uICgNCiAgICAgIG1hbnVhbCAvL25vdGUgOiAibWFudWFsIiBpcyB0cnVlIGlmIHRoZSB0aWNrZXIgd2FzIGNsaWNrZWQsIGJ1dCBtYXkgYWxzbyBiZSB0cnVlIG9uIHN0YXJ0dXAgZXRjDQogICAgKSB7DQogICAgICB2YXIgbGlzdCA9IFtdOw0KDQogICAgICB2YXIgTkVXUyA9IGxvYygiTmV3cyA6IikucmVwbGFjZSgiICIsICImbmJzcDsiKSArICIgIjsNCg0KICAgICAgdmFyIGxvcmVQcm9ncmVzcyA9IE1hdGgucm91bmQoDQogICAgICAgIChNYXRoLmxvZyhHYW1lLmNvb2tpZXNFYXJuZWQgLyAxMCkgKiBNYXRoLkxPRzEwRSArIDEpIHwgMA0KICAgICAgKTsNCg0KICAgICAgaWYgKEdhbWUuVGlja2VyTiAlIDIgPT0gMCB8fCBsb3JlUHJvZ3Jlc3MgPiAxNCkgew0KICAgICAgICB2YXIgYW5pbWFscyA9IFsNCiAgICAgICAgICAibmV3dHMiLA0KICAgICAgICAgICJwZW5ndWlucyIsDQogICAgICAgICAgInNjb3JwaW9ucyIsDQogICAgICAgICAgImF4b2xvdGxzIiwNCiAgICAgICAgICAicHVmZmlucyIsDQogICAgICAgICAgInBvcnBvaXNlcyIsDQogICAgICAgICAgImJsb3dmaXNoIiwNCiAgICAgICAgICAiaG9yc2VzIiwNCiAgICAgICAgICAiY3JheWZpc2giLA0KICAgICAgICAgICJzbHVncyIsDQogICAgICAgICAgImh1bXBiYWNrIHdoYWxlcyIsDQogICAgICAgICAgIm51cnNlIHNoYXJrcyIsDQogICAgICAgICAgImdpYW50IHNxdWlkcyIsDQogICAgICAgICAgInBvbGFyIGJlYXJzIiwNCiAgICAgICAgICAiZnJ1aXQgYmF0cyIsDQogICAgICAgICAgImZyb2dzIiwNCiAgICAgICAgICAic2VhIHNxdWlydHMiLA0KICAgICAgICAgICJ2ZWx2ZXQgd29ybXMiLA0KICAgICAgICAgICJtb2xlIHJhdHMiLA0KICAgICAgICAgICJwYXJhbWVjaWEiLA0KICAgICAgICAgICJuZW1hdG9kZXMiLA0KICAgICAgICAgICJ0YXJkaWdyYWRlcyIsDQogICAgICAgICAgImdpcmFmZmVzIiwNCiAgICAgICAgICAibW9ua2Zpc2giLA0KICAgICAgICAgICJ3b2xmbWVuIiwNCiAgICAgICAgICAiZ29ibGlucyIsDQogICAgICAgICAgImhpcHBpZXMiLA0KICAgICAgICBdOw0KDQogICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC43NSB8fCBHYW1lLmNvb2tpZXNFYXJuZWQgPCAxMDAwMCkgew0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAiPHE+IiArDQogICAgICAgICAgICAgICAgY2hvb3NlKGxvYygiVGlja2VyIChncmFuZG1hKSIpKSArDQogICAgICAgICAgICAgICAgIjwvcT48c2lnPiIgKw0KICAgICAgICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnNpbmdsZSArDQogICAgICAgICAgICAgICAgIjwvc2lnPiINCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoIUdhbWUucHJlZnMubm90U2NhcnkgJiYgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID49IDUwKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAiPHE+IiArDQogICAgICAgICAgICAgICAgY2hvb3NlKGxvYygiVGlja2VyICh0aHJlYXRlbmluZyBncmFuZG1hKSIpKSArDQogICAgICAgICAgICAgICAgIjwvcT48c2lnPiIgKw0KICAgICAgICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnNpbmdsZSArDQogICAgICAgICAgICAgICAgIjwvc2lnPiINCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoRU4gJiYgR2FtZS5IYXNBY2hpZXYoIkp1c3Qgd3JvbmciKSAmJiBNYXRoLnJhbmRvbSgpIDwgMC4wNSkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgTkVXUyArICJjb29raWUgbWFudWZhY3R1cmVyIGRvd25zaXplcywgc2VsbHMgb3duIGdyYW5kbW90aGVyISINCiAgICAgICAgICAgICk7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgIUdhbWUucHJlZnMubm90U2NhcnkgJiYNCiAgICAgICAgICAgIEdhbWUuSGFzQWNoaWV2KCJKdXN0IHdyb25nIikgJiYNCiAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAwLjQNCiAgICAgICAgICApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICI8cT4iICsNCiAgICAgICAgICAgICAgICBjaG9vc2UobG9jKCJUaWNrZXIgKGFuZ3J5IGdyYW5kbWEpIikpICsNCiAgICAgICAgICAgICAgICAiPC9xPjxzaWc+IiArDQogICAgICAgICAgICAgICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uc2luZ2xlICsNCiAgICAgICAgICAgICAgICAiPC9zaWc+Ig0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICFHYW1lLnByZWZzLm5vdFNjYXJ5ICYmDQogICAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPj0gMSAmJg0KICAgICAgICAgICAgR2FtZS5wbGVkZ2VzID4gMCAmJg0KICAgICAgICAgICAgR2FtZS5lbGRlcldyYXRoID09IDANCiAgICAgICAgICApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICI8cT4iICsNCiAgICAgICAgICAgICAgICBjaG9vc2UobG9jKCJUaWNrZXIgKGdyYW5kbWFzIHJldHVybikiKSkgKw0KICAgICAgICAgICAgICAgICI8L3E+PHNpZz4iICsNCiAgICAgICAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5zaW5nbGUgKw0KICAgICAgICAgICAgICAgICI8L3NpZz4iDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKCFFTikgew0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICAgICAgaWYgKGkgIT0gIkN1cnNvciIgJiYgaSAhPSAiR3JhbmRtYSIgJiYgR2FtZS5PYmplY3RzW2ldLmFtb3VudCA+IDApDQogICAgICAgICAgICAgICAgbGlzdC5wdXNoKE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKCIgKyBpICsgIikiKSkpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoR2FtZS5jb29raWVzRWFybmVkID49IDEwMDApIHsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJoYWxsb3dlZW4iKQ0KICAgICAgICAgICAgICAgIGxpc3QucHVzaChORVdTICsgY2hvb3NlKGxvYygiVGlja2VyIChIYWxsb3dlZW4pIikpKTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJjaHJpc3RtYXMiKQ0KICAgICAgICAgICAgICAgIGxpc3QucHVzaChORVdTICsgY2hvb3NlKGxvYygiVGlja2VyIChDaHJpc3RtYXMpIikpKTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJ2YWxlbnRpbmVzIikNCiAgICAgICAgICAgICAgICBsaXN0LnB1c2goTkVXUyArIGNob29zZShsb2MoIlRpY2tlciAoVmFsZW50aW5lcykiKSkpOw0KICAgICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImVhc3RlciIpDQogICAgICAgICAgICAgICAgbGlzdC5wdXNoKE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKEVhc3RlcikiKSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJGYXJtIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNvb2tpZSBmYXJtcyBzdXNwZWN0ZWQgb2YgZW1wbG95aW5nIHVuZGVjbGFyZWQgZWxkZXJseSB3b3JrZm9yY2UhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY29va2llIGZhcm1zIHJlbGVhc2UgaGFybWZ1bCBjaG9jb2xhdGUgaW4gb3VyIHJpdmVycywgc2F5cyBzY2llbnRpc3QhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZ2VuZXRpY2FsbHktbW9kaWZpZWQgY2hvY29sYXRlIGNvbnRyb3ZlcnN5IHN0cmlrZXMgY29va2llIGZhcm1lcnMhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZnJlZS1yYW5nZSBmYXJtIGNvb2tpZXMgcG9wdWxhciB3aXRoIHRvZGF5J3MgaGlwIHlvdXRoLCBzYXlzIHNwZWNpYWxpc3QuIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZmFybSBjb29raWVzIGRlZW1lZCB1bmZpdCBmb3IgdmVnYW5zLCBzYXlzIG51dHJpdGlvbmlzdC4iLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIk1pbmUiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogaXMgb3VyIHBsYW5ldCBnZXR0aW5nIGxpZ2h0ZXI/IEV4cGVydHMgZXhhbWluZSB0aGUgZWZmZWN0cyBvZiBpbnRlbnNpdmUgY2hvY29sYXRlIG1pbmluZy4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiAiICsNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCArIDIpICsNCiAgICAgICAgICAgICAgICAgICAgIiBtaW5lcnMgdHJhcHBlZCBpbiBjb2xsYXBzZWQgY2hvY29sYXRlIG1pbmUhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY2hvY29sYXRlIG1pbmVzIGZvdW5kIHRvIGNhdXNlIGVhcnRocXVha2VzIGFuZCBzaW5raG9sZXMhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY2hvY29sYXRlIG1pbmUgZ29lcyBhd3J5LCBmbG9vZHMgdmlsbGFnZSBpbiBjaG9jb2xhdGUhIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogZGVwdGhzIG9mIGNob2NvbGF0ZSBtaW5lcyBmb3VuZCB0byBob3VzZSAicGVjdWxpYXIsIGNob2NvbGF0eSBiZWluZ3MiIScsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRmFjdG9yeSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWUgZmFjdG9yaWVzIGxpbmtlZCB0byBnbG9iYWwgd2FybWluZyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWUgZmFjdG9yaWVzIGludm9sdmVkIGluIGNob2NvbGF0ZSB3ZWF0aGVyIGNvbnRyb3ZlcnN5ISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNvb2tpZSBmYWN0b3JpZXMgb24gc3RyaWtlLCByb2JvdGljIG1pbmlvbnMgZW1wbG95ZWQgdG8gcmVwbGFjZSB3b3JrZm9yY2UhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY29va2llIGZhY3RvcmllcyBvbiBzdHJpa2UgLSB3b3JrZXJzIGRlbWFuZCB0byBzdG9wIGJlaW5nIHBhaWQgaW4gY29va2llcyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBmYWN0b3J5LW1hZGUgY29va2llcyBsaW5rZWQgdG8gb2Jlc2l0eSwgc2F5cyBzdHVkeS4iLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkJhbmsiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY29va2llIGxvYW5zIG9uIHRoZSByaXNlIGFzIHBlb3BsZSBjYW4gbm8gbG9uZ2VyIGFmZm9yZCB0aGVtIHdpdGggcmVndWxhciBtb25leS4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWVzIHNsb3dseSBjcmVlcGluZyB1cCB0aGVpciB3YXkgYXMgYSBjb21wZXRpdG9yIHRvIHRyYWRpdGlvbmFsIGN1cnJlbmN5ISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG1vc3QgYmFrZXJpZXMgbm93IGZpdHRlZCB3aXRoIEFUTXMgdG8gYWxsb3cgZm9yIGVhc3kgY29va2llIHdpdGhkcmF3YWxzIGFuZCBkZXBvc2l0cy4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWUgZWNvbm9teSBub3cgc3Ryb25nIGVub3VnaCB0byBhbGxvdyBmb3IgbWFzc2l2ZSB2YXVsdHMgZG91YmxpbmcgYXMgc3dpbW1pbmcgcG9vbHMhIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogIlRvbW9ycm93XCdzIHdlYWx0aGllc3QgcGVvcGxlIHdpbGwgYmUgY2FsY3VsYXRlZCBieSB0aGVpciB3b3J0aCBpbiBjb29raWVzIiwgcHJlZGljdCBlY29ub21pc3RzLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siVGVtcGxlIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGV4cGxvcmVycyBicmluZyBiYWNrIGFuY2llbnQgYXJ0aWZhY3QgZnJvbSBhYmFuZG9uZWQgdGVtcGxlOyBhcmNoZW9sb2dpc3RzIG1hcnZlbCBhdCB0aGUgY2VudHVyaWVzLW9sZCAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAibWFnaWMiLA0KICAgICAgICAgICAgICAgICAgICAgICJjYXJ2ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICJlbmdyYXZlZCIsDQogICAgICAgICAgICAgICAgICAgICAgInNjdWxwdGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAicm95YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICJpbXBlcmlhbCIsDQogICAgICAgICAgICAgICAgICAgICAgIm11bW1pZmllZCIsDQogICAgICAgICAgICAgICAgICAgICAgInJpdHVhbCIsDQogICAgICAgICAgICAgICAgICAgICAgImdvbGRlbiIsDQogICAgICAgICAgICAgICAgICAgICAgInNpbHZlciIsDQogICAgICAgICAgICAgICAgICAgICAgInN0b25lIiwNCiAgICAgICAgICAgICAgICAgICAgICAiY3Vyc2VkIiwNCiAgICAgICAgICAgICAgICAgICAgICAicGxhc3RpYyIsDQogICAgICAgICAgICAgICAgICAgICAgImJvbmUiLA0KICAgICAgICAgICAgICAgICAgICAgICJibG9vZCIsDQogICAgICAgICAgICAgICAgICAgICAgImhvbHkiLA0KICAgICAgICAgICAgICAgICAgICAgICJzYWNyZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICJzYWNyaWZpY2lhbCIsDQogICAgICAgICAgICAgICAgICAgICAgImVsZWN0cm9uaWMiLA0KICAgICAgICAgICAgICAgICAgICAgICJzaW5naW5nIiwNCiAgICAgICAgICAgICAgICAgICAgICAidGFwZGFuY2luZyIsDQogICAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAic3Bvb24iLA0KICAgICAgICAgICAgICAgICAgICAgICJmb3JrIiwNCiAgICAgICAgICAgICAgICAgICAgICAicGl6emEiLA0KICAgICAgICAgICAgICAgICAgICAgICJ3YXNoaW5nIG1hY2hpbmUiLA0KICAgICAgICAgICAgICAgICAgICAgICJjYWxjdWxhdG9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaGF0IiwNCiAgICAgICAgICAgICAgICAgICAgICAicGlhbm8iLA0KICAgICAgICAgICAgICAgICAgICAgICJuYXBraW4iLA0KICAgICAgICAgICAgICAgICAgICAgICJza2VsZXRvbiIsDQogICAgICAgICAgICAgICAgICAgICAgImdvd24iLA0KICAgICAgICAgICAgICAgICAgICAgICJkYWdnZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJzd29yZCIsDQogICAgICAgICAgICAgICAgICAgICAgInNoaWVsZCIsDQogICAgICAgICAgICAgICAgICAgICAgInNrdWxsIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZW1lcmFsZCIsDQogICAgICAgICAgICAgICAgICAgICAgImJhdGh0dWIiLA0KICAgICAgICAgICAgICAgICAgICAgICJtYXNrIiwNCiAgICAgICAgICAgICAgICAgICAgICAicm9sbGVyc2thdGVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAibGl0dGVyYm94IiwNCiAgICAgICAgICAgICAgICAgICAgICAiYmFpdCBib3giLA0KICAgICAgICAgICAgICAgICAgICAgICJjdWJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAic3BoZXJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZnVuZ3VzIiwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHJlY2VudGx5LWRpc2NvdmVyZWQgY2hvY29sYXRlIHRlbXBsZXMgbm93IHNwYXJraW5nIG5ldyBjb29raWUtcmVsYXRlZCBjdWx0OyB0aG91c2FuZHMgcHJheSB0byBCYWtlciBpbiB0aGUgc2t5ISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGp1c3QgaG93IGV4dGVuc2l2ZSBpcyB0aGUgY29va2llIHBhbnRoZW9uPyBUaGVvbG9naWFucyBzcGVjdWxhdGUgYWJvdXQgcG9zc2libGUgIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShbImdvZCIsICJnb2RkZXNzIl0pICsNCiAgICAgICAgICAgICAgICAgICAgIiBvZiAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICBjaG9vc2UoYW5pbWFscyksDQogICAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAgICJrYXpvb3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndlYiBkZXNpZ24iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndlYiBicm93c2VycyIsDQogICAgICAgICAgICAgICAgICAgICAgICAia2l0dGVucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYXRoZWlzbSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaGFuZGJyYWtlcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaGF0cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYWdsZXRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJlbGV2YXRvciBtdXNpYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaWRsZSBnYW1lcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAndGhlIGxldHRlciAiUCInLA0KICAgICAgICAgICAgICAgICAgICAgICAgIm1lbWVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJoYW1idXJnZXJzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJiYWQgcHVucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAia2VybmluZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAic3RhbmQtdXAgY29tZWR5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJmYWlsZWQgYnVyZ2xhcnkgYXR0ZW1wdHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImNsaWNrYmFpdCIsDQogICAgICAgICAgICAgICAgICAgICAgICAib25lIHdlaXJkIHRyaWNrcyIsDQogICAgICAgICAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICAgIi4iLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiB0aGVpc3RzIG9mIHRoZSB3b3JsZCBkaXNjb3ZlciBuZXcgY29va2llIHJlbGlnaW9uIC0gIk9oIGJveSwgZ3Vlc3Mgd2Ugd2VyZSB3cm9uZyBhbGwgYWxvbmchIicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGNvb2tpZSBoZWF2ZW4gYWxsZWdlZGx5ICJzcG9ydHMgZWxldmF0b3IgaW5zdGVhZCBvZiBzdGFpcndheSI7IGNvb2tpZSBoZWxsICJwYXZlZCB3aXRoIGZsYWdzdG9uZSwgYXMgZ29vZCBpbnRlbnRpb25zIG1ha2UgZm9yIHBvb3IgYnVpbGRpbmcgbWF0ZXJpYWwiLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siV2l6YXJkIHRvd2VyIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGFsbCAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICBjaG9vc2UoYW5pbWFscyksDQogICAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAgICJwdWJsaWMgcmVzdHJvb21zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJjbG91ZHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInBvbGl0aWNpYW5zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJtb3VzdGFjaGVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJoYXRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJzaG9lcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAicGFudHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImNsb3ducyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiZW5jeWNsb3BlZGlhcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAid2Vic2l0ZXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInBvdHRlZCBwbGFudHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImxlbW9ucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaG91c2Vob2xkIGl0ZW1zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJib2RpbHkgZmx1aWRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJjdXRsZXJ5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJuYXRpb25hbCBsYW5kbWFya3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInlvZ3VydCIsDQogICAgICAgICAgICAgICAgICAgICAgICAicmFwIG11c2ljIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJ1bmRlcndlYXIiLA0KICAgICAgICAgICAgICAgICAgICAgIF0pLA0KICAgICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAgICIgdHVybmVkIGludG8gIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgY2hvb3NlKGFuaW1hbHMpLA0KICAgICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgICAicHVibGljIHJlc3Ryb29tcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiY2xvdWRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJwb2xpdGljaWFucyIsDQogICAgICAgICAgICAgICAgICAgICAgICAibW91c3RhY2hlcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiaGF0cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAic2hvZXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInBhbnRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJjbG93bnMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImVuY3ljbG9wZWRpYXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIndlYnNpdGVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJwb3R0ZWQgcGxhbnRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJsZW1vbnMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgImhvdXNlaG9sZCBpdGVtcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYm9kaWx5IGZsdWlkcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiY3V0bGVyeSIsDQogICAgICAgICAgICAgICAgICAgICAgICAibmF0aW9uYWwgbGFuZG1hcmtzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJ5b2d1cnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgInJhcCBtdXNpYyIsDQogICAgICAgICAgICAgICAgICAgICAgICAidW5kZXJ3ZWFyIiwNCiAgICAgICAgICAgICAgICAgICAgICBdKSwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiIGluIGZyZWFrIG1hZ2ljIGNhdGFzdHJvcGhlISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGhlYXZ5IGRpc3NlbnQgcmFnZXMgYmV0d2VlbiB0aGUgc2Nob29scyBvZiAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAid2F0ZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJmaXJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZWFydGgiLA0KICAgICAgICAgICAgICAgICAgICAgICJhaXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJsaWdodG5pbmciLA0KICAgICAgICAgICAgICAgICAgICAgICJhY2lkIiwNCiAgICAgICAgICAgICAgICAgICAgICAic29uZyIsDQogICAgICAgICAgICAgICAgICAgICAgImJhdHRsZSIsDQogICAgICAgICAgICAgICAgICAgICAgInBlYWNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicGVuY2lsIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaW50ZXJuZXQiLA0KICAgICAgICAgICAgICAgICAgICAgICJzcGFjZSIsDQogICAgICAgICAgICAgICAgICAgICAgInRpbWUiLA0KICAgICAgICAgICAgICAgICAgICAgICJicmFpbiIsDQogICAgICAgICAgICAgICAgICAgICAgIm5hdHVyZSIsDQogICAgICAgICAgICAgICAgICAgICAgInRlY2hubyIsDQogICAgICAgICAgICAgICAgICAgICAgInBsYW50IiwNCiAgICAgICAgICAgICAgICAgICAgICAiYnVnIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaWNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicG9pc29uIiwNCiAgICAgICAgICAgICAgICAgICAgICAiY3JhYiIsDQogICAgICAgICAgICAgICAgICAgICAgImtpdHRlbiIsDQogICAgICAgICAgICAgICAgICAgICAgImRvbHBoaW4iLA0KICAgICAgICAgICAgICAgICAgICAgICJiaXJkIiwNCiAgICAgICAgICAgICAgICAgICAgICAicHVuY2giLA0KICAgICAgICAgICAgICAgICAgICAgICJmYXJ0IiwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiIG1hZ2ljIGFuZCAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAid2F0ZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJmaXJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAiZWFydGgiLA0KICAgICAgICAgICAgICAgICAgICAgICJhaXIiLA0KICAgICAgICAgICAgICAgICAgICAgICJsaWdodG5pbmciLA0KICAgICAgICAgICAgICAgICAgICAgICJhY2lkIiwNCiAgICAgICAgICAgICAgICAgICAgICAic29uZyIsDQogICAgICAgICAgICAgICAgICAgICAgImJhdHRsZSIsDQogICAgICAgICAgICAgICAgICAgICAgInBlYWNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicGVuY2lsIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaW50ZXJuZXQiLA0KICAgICAgICAgICAgICAgICAgICAgICJzcGFjZSIsDQogICAgICAgICAgICAgICAgICAgICAgInRpbWUiLA0KICAgICAgICAgICAgICAgICAgICAgICJicmFpbiIsDQogICAgICAgICAgICAgICAgICAgICAgIm5hdHVyZSIsDQogICAgICAgICAgICAgICAgICAgICAgInRlY2hubyIsDQogICAgICAgICAgICAgICAgICAgICAgInBsYW50IiwNCiAgICAgICAgICAgICAgICAgICAgICAiYnVnIiwNCiAgICAgICAgICAgICAgICAgICAgICAiaWNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicG9pc29uIiwNCiAgICAgICAgICAgICAgICAgICAgICAiY3JhYiIsDQogICAgICAgICAgICAgICAgICAgICAgImtpdHRlbiIsDQogICAgICAgICAgICAgICAgICAgICAgImRvbHBoaW4iLA0KICAgICAgICAgICAgICAgICAgICAgICJiaXJkIiwNCiAgICAgICAgICAgICAgICAgICAgICAicHVuY2giLA0KICAgICAgICAgICAgICAgICAgICAgICJmYXJ0IiwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiIG1hZ2ljISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGdldCB5b3VyIG5ldyBjaGFybXMgYW5kIGN1cnNlcyBhdCB0aGUgeWVhcmx5IE5hdGlvbmFsIFNwZWxsY3JhZnRpbmcgRmFpciEgRXhjbHVzaXZlIHByaWNlcyBvbiBydW5lcyBhbmQgc3BlbGxib29rcy4iLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBjb29raWUgd2l6YXJkcyBkZW55IGludm9sdmVtZW50IGluIHNob2NraW5nbHkgdWdseSBuZXdib3JuIC0gaW5mYW50IGlzICJob25lc3RseSBncm9keS1sb29raW5nLCBidXQgbmF0dXJhbCIsIHNheSBkb2N0b3JzLicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6ICJBbnkgc3VmZmljaWVudGx5IGNydWRlIG1hZ2ljIGlzIGluZGlzdGluZ3Vpc2hhYmxlIGZyb20gdGVjaG5vbG9neSIsIGNsYWltcyByZW5vd25lZCB0ZWNobm93aXphcmQuJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJTaGlwbWVudCJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBuZXcgY2hvY29sYXRlIHBsYW5ldCBmb3VuZCwgYmVjb21lcyB0YXJnZXQgb2YgY29va2llLXRyYWRpbmcgc3BhY2VzaGlwcyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBtYXNzaXZlIGNob2NvbGF0ZSBwbGFuZXQgZm91bmQgd2l0aCA5OS44JSBjZXJ0aWZpZWQgcHVyZSBkYXJrIGNob2NvbGF0ZSBjb3JlISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHNwYWNlIHRvdXJpc20gYm9vbWluZyBhcyBkaXN0YW50IHBsYW5ldHMgYXR0cmFjdCBtb3JlIGJvcmVkIG1pbGxpb25haXJlcyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjaG9jb2xhdGUtYmFzZWQgb3JnYW5pc21zIGZvdW5kIG9uIGRpc3RhbnQgcGxhbmV0ISIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGFuY2llbnQgYmFraW5nIGFydGlmYWN0cyBmb3VuZCBvbiBkaXN0YW50IHBsYW5ldDsgInRlcnJpZnlpbmcgaW1wbGljYXRpb25zIiwgZXhwZXJ0cyBzYXkuJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJBbGNoZW15IGxhYiJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBuYXRpb25hbCBnb2xkIHJlc2VydmVzIGR3aW5kbGUgYXMgbW9yZSBhbmQgbW9yZSBvZiB0aGUgcHJlY2lvdXMgbWluZXJhbCBpcyB0dXJuZWQgdG8gY29va2llcyEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBjaG9jb2xhdGUgamV3ZWxyeSBmb3VuZCBmYXNoaW9uYWJsZSwgZ29sZCBhbmQgZGlhbW9uZHMgImp1c3QgYSBmYWQiLCBzYXlzIHNwZWNpYWxpc3QuJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogc2lsdmVyIGZvdW5kIHRvIGFsc28gYmUgdHJhbnNtdXRhYmxlIGludG8gd2hpdGUgY2hvY29sYXRlISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGRlZmVjdGl2ZSBhbGNoZW15IGxhYiBzaHV0IGRvd24sIGZvdW5kIHRvIGNvbnZlcnQgY29va2llcyB0byB1c2VsZXNzIGdvbGQuIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogYWxjaGVteS1tYWRlIGNvb2tpZXMgc2h1bm5lZCBieSBwdXJpc3RzISIsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siUG9ydGFsIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG5hdGlvbiB3b3JyaWVkIGFzIG1vcmUgYW5kIG1vcmUgdW5zZXR0bGluZyBjcmVhdHVyZXMgZW1lcmdlIGZyb20gZGltZW5zaW9uYWwgcG9ydGFscyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBkaW1lbnNpb25hbCBwb3J0YWxzIGludm9sdmVkIGluIGNpdHktZW5ndWxmaW5nIGRpc2FzdGVyISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHRvdXJpc20gdG8gY29va2lldmVyc2UgcG9wdWxhciB3aXRoIGJvcmVkIHRlZW5hZ2VycyEgQ2FzdWFsdHkgcmF0ZSBhcyBoaWdoIGFzIDczJSEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWV2ZXJzZSBwb3J0YWxzIHN1c3BlY3RlZCB0byBjYXVzZSBmYXN0IGFnaW5nIGFuZCBvYnNlc3Npb24gd2l0aCBiYWtpbmcsIHNheXMgc3R1ZHkuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogImRvIG5vdCBzZXR0bGUgbmVhciBwb3J0YWxzLCIgc2F5cyBzcGVjaWFsaXN0OyAieW91ciBjaGlsZHJlbiB3aWxsIGJlY29tZSBzdHJhbmdlIGFuZCBjb3JydXB0ZWQgaW5zaWRlLiInLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIlRpbWUgbWFjaGluZSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiB0aW1lIG1hY2hpbmVzIGludm9sdmVkIGluIGhpc3RvcnktcmV3cml0aW5nIHNjYW5kYWwhIE9yIGFyZSB0aGV5PyIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHRpbWUgbWFjaGluZXMgdXNlZCBpbiB1bmxhd2Z1bCB0aW1lIHRvdXJpc20hIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogY29va2llcyBicm91Z2h0IGJhY2sgZnJvbSB0aGUgcGFzdCAidW5maXQgZm9yIGh1bWFuIGNvbnN1bXB0aW9uIiwgc2F5cyBoaXN0b3JpYW4uJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogdmFyaW91cyBoaXN0b3JpY2FsIGZpZ3VyZXMgaW5leHBsaWNhYmx5IHJlcGxhY2VkIHdpdGggdGFsa2luZyBsdW1wcyBvZiBkb3VnaCEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiAiSSBoYXZlIHNlZW4gdGhlIGZ1dHVyZSwiIHNheXMgdGltZSBtYWNoaW5lIG9wZXJhdG9yLCAiYW5kIEkgZG8gbm90IHdpc2ggdG8gZ28gdGhlcmUgYWdhaW4uIicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siQW50aW1hdHRlciBjb25kZW5zZXIiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogd2hvbGUgdG93biBzZWVtaW5nbHkgc3dhbGxvd2VkIGJ5IGFudGltYXR0ZXItaW5kdWNlZCBibGFjayBob2xlOyBtb3JlIHJlbGlhYmxlIHNvdXJjZXMgYWZmaXJtIHRvd24gIm5ldmVyIHJlYWxseSBleGlzdGVkIiEnLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiAiZXhwbGFpbiB0byBtZSBhZ2FpbiB3aHkgd2UgbmVlZCBwYXJ0aWNsZSBhY2NlbGVyYXRvcnMgdG8gYmFrZSBjb29raWVzPyIgYXNrcyBtaXNndWlkZWQgbG9jYWwgd29tYW4uJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZmlyc3QgYW50aW1hdHRlciBjb25kZW5zZXIgc3VjY2Vzc2Z1bGx5IHR1cm5lZCBvbiwgZG9lc24ndCByaXAgYXBhcnQgcmVhbGl0eSEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiByZXNlYXJjaGVycyBjb25jbHVkZSB0aGF0IHdoYXQgdGhlIGNvb2tpZSBpbmR1c3RyeSBuZWVkcywgZmlyc3QgYW5kIGZvcmVtb3N0LCBpcyAibW9yZSBtYWduZXRzIi4nLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiAidW5yYXZlbGxpbmcgdGhlIGZhYnJpYyBvZiByZWFsaXR5IGp1c3QgbWFrZXMgdGhlc2UgY29va2llcyBzbyBtdWNoIHRhc3RpZXIiLCBjbGFpbXMgc2NpZW50aXN0LicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siUHJpc20iXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbmV3IGNvb2tpZS1wcm9kdWNpbmcgcHJpc21zIGxpbmtlZCB0byBvdXRicmVhayBvZiByYWluYm93LXJlbGF0ZWQgdmlyYWwgdmlkZW9zLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IHNjaWVudGlzdHMgd2FybiBhZ2FpbnN0IHN5c3RlbWF0aWNhbGx5IHR1cm5pbmcgbGlnaHQgaW50byBtYXR0ZXIgLSAiT25lIGRheSwgd2VcJ2xsIGVuZCB1cCB3aXRoIGFsbCBtYXR0ZXIgYW5kIG5vIGxpZ2h0ISInLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWVzIG5vdyBiZWluZyBiYWtlZCBhdCB0aGUgbGl0ZXJhbCBzcGVlZCBvZiBsaWdodCB0aGFua3MgdG8gbmV3IHByaXNtYXRpYyBjb250cmFwdGlvbnMuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogIkNhblwndCB5b3Ugc2Vuc2UgdGhlIHByaXNtIHdhdGNoaW5nIHVzPyIsIHJhbWJsZXMgaW5zYW5lIGxvY2FsIG1hbi4gIk5vIGlkZWEgd2hhdCBoZVwncyB0YWxraW5nIGFib3V0Iiwgc2hydWdzIGNvb2tpZSBtYWduYXRlL2dvdmVybm1lbnQgb2ZmaWNpYWwuJywNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogd29ybGQgY2l0aXplbnMgYWR2aXNlZCAibm90IHRvIHdvcnJ5IiBhYm91dCBmcmVxdWVudCBhdG1vc3BoZXJpYyBmbGFzaGVzLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siQ2hhbmNlbWFrZXIiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogc3RyYW5nZSBzdGF0aXN0aWNhbCBhbm9tYWxpZXMgY29udGludWUgYXMgd2VhdGhlciBmb3JlY2FzdCBwcm92ZXMgYWNjdXJhdGUgYW4gdW5wcmVjZWRlbnRlZCAzIGRheXMgaW4gYSByb3chIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogbG9jYWwgY2FzaW5vIHJ1aW5lZCBhcyBhbGwgZ2FtYmxlcnMgc29tZWhvdyBoaXQgYSB3ZWVrLWxvbmcgd2lubmluZyBzdHJlYWshICJXZSBtaWdodCBzdGlsbCBiZSBva2F5Iiwgc2F5cyBvd25lciBiZWZvcmUgYmVpbmcgaGl0IGJ5IGxpZ2h0bmluZyA0NyB0aW1lcy4nLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBuZWlnaGJvcmluZyBuYXRpb24gc29tZWhvdyBlbGVjdHMgcHJlc2lkZW50IHdpdGggc2Vuc2libGUgcG9saWNpZXMgaW4gZnJlYWsgYWNjaWRlbnQgb2YgcmFuZG9tIGNoYW5jZSEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBtaWxsaW9uLXRvLW9uZSBldmVudCBzZWVzIGdyaXR0eSBtb3ZpZSByZWJvb3QgdHVybmluZyBvdXQgYmV0dGVyIHRoYW4gdGhlIG9yaWdpbmFsISAiV2UgaGF2ZSBubyBpZGVhIGhvdyB0aGlzIGhhcHBlbmVkIiwgc2F5IG1vdmllIGV4ZWNzLicsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGFsbCBzY3JhdGNoaW5nIHRpY2tldHMgcHJpbnRlZCBhcyB3aW5uZXJzLCBwcm9tcHRpbmcgbmF0aW9uYWwgZWNvbm9teSB0byBjcmFzaCBhbmQsIGFnYWluc3QgYWxsIG9kZHMsIHJlY292ZXIgb3Zlcm5pZ2h0LiIsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRnJhY3RhbCBlbmdpbmUiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogbG9jYWwgbWFuICJkb25lIHdpdGggQ29va2llIENsaWNrZXIiLCBmaW5kcyB0aGUgY29uc3RhbnQgc2VsZi1yZWZlcmVuY2VzICJncmF0aW5nIGFuZCBvbi10aGUtbm9zZSIuJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbG9jYWwgbWFuIHNhaWxzIGFyb3VuZCB0aGUgd29ybGQgdG8gZmluZCBoaW1zZWxmIC0gcmlnaHQgd2hlcmUgaGUgbGVmdCBpdC4iLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBsb2NhbCBndXJ1IGNsYWltcyAidGhlcmVcJ3MgYSBsaXR0bGUgYml0IG9mIG91cnNlbHZlcyBpbiBldmVyeW9uZSIsIHVuZGVyIGludmVzdGlnYXRpb24gZm9yIGFsbGVnZWQgY2FubmliYWxpc20uJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbmV3cyB3cml0ZXIgZmluZHMgaGVyc2VsZiBkYXlkcmVhbWluZyBhYm91dCBuZXcgY2FyZWVyLiBPciBhdCBsZWFzdCBhIHJhaXNlLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IHBvbGxzIGZpbmQgaWRlYSBvZiBjb29raWVzIG1hZGUgb2YgY29va2llcyAiYWNjZXB0YWJsZSIgLSAiYXQgbGVhc3Qgd2UgZmluYWxseSBrbm93IHdoYXRcJ3MgaW4gdGhlbSIsIHNheXMgaW50ZXJ2aWV3ZWQgY2l0aXplbi4nLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkphdmFzY3JpcHQgY29uc29sZSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBzdHJhbmdlIGZhZCBoYXMgcGFyZW50cyBnaXZpbmcgdGhlaXIgbmV3Ym9ybnMgbmFtZXMgc3VjaCBhcyBFbW1hLmpzIG9yIExpYW0uanMuIEF0IGxlYXN0IG9uZSBCYWJ5LmpzIHJlcG9ydGVkLiIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNvZGluZyBpcyBoaXAhIE1vcmUgYW5kIG1vcmUgdGVlbmFnZXJzIHR1cm4gdG8gdGVjaG5pY2FsIGZpZWxkcyBsaWtlIHByb2dyYW1taW5nLCBlbnN1cmluZyBhIGZ1dHVyZSByb2JvdCBhcG9jYWx5cHNlIGFuZCB0aGUgZG9vbSBvZiBhbGwgbWFua2luZC4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBkZXZlbG9wZXJzIHVuc3VyZSB3aGF0IHRvIGNhbGwgdGhlaXIgbmV3IGphdmFzY3JpcHQgbGlicmFyaWVzIGFzIGFsbCBjb21iaW5hdGlvbnMgb2YgYW55IDMgZGljdGlvbmFyeSB3b3JkcyBoYXZlIGFscmVhZHkgYmVlbiB0YWtlbi4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBuYXRpb24gaG9sZHMgYnJlYXRoIGFzIG5lc3RlZCBpZnMgYWJvdXQgdG8gaGF0Y2guIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogY2x1ZWxlc3MgY29weXdyaXRlciBmb3JnZXRzIHRvIGVzY2FwZSBhIHF1b3RlLCBlbmRzIG5ld3MgbGluZSBwcmVtYXR1cmVseTsgbGFzdCB3b3JkcyByZXBvcnRlZCB0byBiZSAiSHVoLCB3aHkgaXNuJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJJZGxldmVyc2UiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogaXMgYW5vdGhlciB5b3UgbGl2aW5nIG91dCB0aGVpciBkcmVhbXMgaW4gYW4gYWx0ZXJuYXRlIHVuaXZlcnNlPyBQcm9iYWJseSwgeW91IGxhenkgYnVtISIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IHB1YmxpYyByZWNvaWxzIGF0IHRoZSBub3Rpb24gb2YgYSBjb3Ntb3MgbWFkZSBvZiBpbmZpbml0ZSBpZGxlIGdhbWVzLiAiSSBraW5kYSBob3BlZCB0aGVyZVwnZCBiZSBtb3JlIHRvIGl0Iiwgc2F5cyBkaXN0cmF1Z2h0IGNpdGl6ZW4uJywNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogd2l0aCBhbiBpbmZpbml0eSBvZiBwYXJhbGxlbCB1bml2ZXJzZXMsIHBlb3BsZSB0dXJuIHRvIHJlYXNzdXJpbmcgYWx0ZXJuYXRlIGRpbWVuc2lvbnMsIHdoaWNoIG9ubHkgbnVtYmVyICJpbiB0aGUgaGlnaCA1MHMiLicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6ICJJIGZpbmQgc29sYWNlIGluIHRoZSBrbm93bGVkZ2UgdGhhdCBhdCBsZWFzdCBzb21lIG9mIG15IGFsdGVybmF0ZSBzZWx2ZXMgYXJlIHByb2JhYmx5IGRvaW5nIGZpbmUgb3V0IHRoZXJlIiwgc2F5cyBjaXRpemVuXCdzIGxhc3QgcmVtYWluaW5nIGV4ZW1wbGFyIGluIHRoZSBtdWx0aXZlcnNlLicsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNvbWljIGJvb2sgd3JpdGVycyBwb2ludCB0byBhY3R1YWwgbXVsdGl2ZXJzZSBpbiBkZWZlbnNlIG9mIGR1YmlvdXMgcGxvdCBwb2ludHMuIFwiU2VlPyBJIHRvbGQgeW91IGl0IHdhc24ndCAnaGFja25leWVkIGFuZCBjb250cml2ZWQnIVwiIiwNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJDb3J0ZXggYmFrZXIiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogY29ydGV4IGJha2VyIHdyYW5nbGVycyBraW5kbHkgcmVtaW5kIGVtcGxveWVlcyB0aGF0IGNvcnRleCBiYWtlcnMgYXJlIHRoZSBiYWtlcnkncyBtYXRlcmlhbCBwcm9wZXJ0eSBhbmQgc2hvdWxkIG5vdCBiZSBlbmRlYXJlZCB3aXRoIG5pY2tuYW1lcy4iLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBzcGFjZS1mYXJpbmcgZW1wbG95ZWVzIGFkdmlzZWQgdG8gaWdub3JlIHVudXN1YWwgdGhvdWdodHMgYW5kIHVyZ2VzIGV4cGVyaWVuY2VkIHdpdGhpbiAyIHBhcnNlY3Mgb2YgZ2lnYW50aWMgY29ydGV4IGJha2Vycywgc2F5IGd1aWRlbGluZXMuIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogYXN0cm9ub21lcnMgd2FybiBvZiBjb3J0ZXggYmFrZXIgdHJhamVjdG9yeSBkcmlmdCwgZmVhciBmdXR1cmUgaGVhZC1vbiBjb2xsaXNpb25zIHJlc3VsdGluZyBpbiBjb3N0bHkgY29uY3Vzc2lvbnMuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogcnVudCBjb3J0ZXggYmFrZXIgaWRlbnRpZmllZCB3aXRoIGFuIElRIG9mIG9ubHkgcXVpbnR1cGxlIGRpZ2l0czogImp1c3QgYSBiaXQgb2YgYSBkdW1teSIsIHNheSBzcGVjaWFsaXN0cy4nLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBhcmUgeW91IHNtYXJ0ZXIgdGhhbiBhIGNvcnRleCBiYWtlcj8gTmV3IGdhbWUgc2hvdyBkZWVtZWQgInVuZmFpciIgYnkgY29udGVzdGFudHMuJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImhhbGxvd2VlbiIgJiYgR2FtZS5jb29raWVzRWFybmVkID49IDEwMDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBzdHJhbmdlIHR3aXN0aW5nIGNyZWF0dXJlcyBhbWFzcyBhcm91bmQgY29va2llIGZhY3RvcmllcywgbmliYmxlIGF0IGFzc2VtYmx5IGxpbmVzLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IG9taW5vdXMgd3JpbmtseSBtb25zdGVycyB0YWtlIG1hc3NpdmUgYml0ZXMgb3V0IG9mIGNvb2tpZSBwcm9kdWN0aW9uOyAidGhpcyBjYW5cJ3QgYmUgaHlnaWVuaWMiLCB3b3JyaWVzIHdvcmtlci4nLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBwYWdhbiByaXR1YWxzIG9uIHRoZSByaXNlIGFzIGNoaWxkcmVuIGFyb3VuZCB0aGUgd29ybGQgZHJlc3MgdXAgaW4gc3RyYW5nZSBjb3N0dW1lcyBhbmQgYmxhY2ttYWlsIGhvbWVvd25lcnMgZm9yIGNhbmR5LiIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG5ldy1hZ2UgdGVycm9yaXNtIHN0cmlrZXMgc3VidXJicyBhcyBob3VzZXMgZmluZCB0aGVtc2VsdmVzIGNvdmVyZWQgaW4gZWdncyBhbmQgdG9pbGV0IHBhcGVyLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGNoaWxkcmVuIGFyb3VuZCB0aGUgd29ybGQgImxvc3QgYW5kIGNvbmZ1c2VkIiBhcyBhbnkgYW5kIGFsbCBIYWxsb3dlZW4gdHJlYXRzIGhhdmUgYmVlbiByZXBsYWNlZCBieSBjb29raWVzLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJjaHJpc3RtYXMiICYmIEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogYmVhcmRlZCBtYW5pYWMgc3BvdHRlZCBzcGVlZGluZyBvbiBmbHlpbmcgc2xlaWdoISBJbnZlc3RpZ2F0aW9uIHBlbmRpbmcuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogU2FudGEgQ2xhdXMgYW5ub3VuY2VzIG5ldyBicmFuZCBvZiBicmVha2Zhc3QgdHJlYXRzIHRvIGNvbXBldGUgd2l0aCBjb29raWUtZmxhdm9yZWQgY2VyZWFscyEgIlRoZXlcJ3JlIGhvLWhvLWhvcnJpYmxlISIgc2F5cyBTYW50YS4nLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiAiWW91IG1lYW4gaGUganVzdCBnaXZlcyBzdHVmZiBhd2F5IGZvciBmcmVlPyEiLCBjb25jZXJuZWQgbW9tcyBhc2suICJQZXJzb25hbGx5LCBJIGRvblwndCB0cnVzdCBoaXMgYmVhcmQuIicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IG9iZXNlIGpvbGx5IGx1bmF0aWMgc3RpbGwgb24gdGhlIGxvb3NlLCB3YXJuIG9mZmljaWFscy4gIktlZXAgeW91ciBraWRzIHNhZmUgYW5kIGJvYXJkIHVwIHlvdXIgY2hpbW5leXMuIFdlIG1lYW4gaXQuIicsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGNoaWxkcmVuIHNob2NrZWQgYXMgdGhleSBkaXNjb3ZlciBTYW50YSBDbGF1cyBpc24ndCBqdXN0IHRoZWlyIGRhZCBpbiBhIGNvc3R1bWUgYWZ0ZXIgYWxsITxicj5cIkknbSByZWFzc2Vzc2luZyBteSBsaWZlIHJpZ2h0IG5vd1wiLCBjb25maWRlcyBMYXVyYSwgYWdlZCA2LiIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG15c3RlcmlvdXMgZmVzdGl2ZSBlbnRpdHkgd2l0aCBxdWFudHVtIHBvd2VycyBzdGlsbCB3cmVja2luZyBoYXZvYyB3aXRoIGFybXkgb2YgcmVpbmRlZXIsIG9mZmljaWFscyBzYXkuIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogZWx2ZXMgb24gc3RyaWtlIGF0IHRveSBmYWN0b3J5ISAiV2Ugd2lsbCBub3QgYmUgYWNjZXB0aW5nIHJlaW5kZWVyIGNob3cgYXMgcGF5bWVudCBhbnltb3JlLiBBbmQgc3RvcCBjYWxsaW5nIHVzIGVsdmVzISInLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBlbHZlcyBwcm90ZXN0IGFyb3VuZCB0aGUgbmF0aW9uOyB3ZWUgbGl0dGxlIGZvbGtzIGluIHNpbGx5IGxpdHRsZSBvdXRmaXRzIHNwcmVhZCBtYXloZW0sIGRlc3RydWN0aW9uOyByYWJpZCByZWluZGVlciBydW5uaW5nIHJhbXBhbnQgdGhyb3VnaCBzdHJlZXRzLiIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHNjaG9sYXJzIGRlYmF0ZSByZWdhcmRpbmcgdGhlIHBsdXJhbCBvZiByZWluZGVlcihzKSBpbiB0aGUgbWlkc3Qgb2YgZWx2ZW4gd29ybGQgd2FyLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGVsdmVzICJ1bnJlbGF0ZWQgdG8gZ25vbWVzIGRlc3BpdGUgc21hbGwgc3RhdHVyZSBhbmQgbWVycnkgZGlzcG9zaXRpb24iLCBmaW5kIHNjaWVudGlzdHMuJywNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogZWx2ZXMgc2Fib3RhZ2UgcmFkaW9hY3RpdmUgZnJvc3RpbmcgZmFjdG9yeSwgdHVybiBodW5kcmVkcyBibGluZCBpbiB2aWNpbml0eSAtICJXaG8gaW4gdGhlaXIgcmlnaHQgbWluZCB3b3VsZCBkbyBzdWNoIGEgdGhpbmc/IiBsYW1lbnRzIG91dHJhZ2VkIG1heW9yLicsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGRyYW1hIHVuZm9sZHMgYXQgTm9ydGggUG9sZSBhcyBydW1vcnMgY3JvcCB1cCBhcm91bmQgUnVkb2xwaFwncyByZWQgbm9zZTsgIkkgbWF5IGhhdmUgYW4gYWRkaWN0aW9uIG9yIHR3byIsIGFkbWl0cyByZWluZGVlci4nLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAidmFsZW50aW5lcyIgJiYgR2FtZS5jb29raWVzRWFybmVkID49IDEwMDApDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBvcmdhbi1zaGFwZWQgY29uZmVjdGlvbmVyaWVzIGJlaW5nIHRyYWRlZCBpbiBzY2hvb2xzIGFsbCBvdmVyIHRoZSB3b3JsZDsgZ3J1ZXNvbWUgcHJhY3RpY2UgdW5kZXJnb2luZyBpbnZlc3RpZ2F0aW9uLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGhlYXJ0LXNoYXBlZCBjYW5kaWVzIG92ZXJ0YWtpbmcgc3dlZXRzIGJ1c2luZXNzLCBvZmZlcmluZyBjb21wZXRpdGlvbiB0byBjb29raWUgZW1waXJlLiAiSXRcJ3MgdGhlIGVjb25vbXksIGN1cGlkISInLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBsb3ZlJ3MgaW4gdGhlIGFpciwgYWNjb3JkaW5nIHRvIHdlYXRoZXIgc3BlY2lhbGlzdHMuIEZhY2UgbWFza3Mgbm93IG9mZmVyZWQgaW4gZXZlcnkgY2l0eSB0byBzdHVudCBhaXJib3JuZSBpbmZlY3Rpb24uIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbWFycnlpbmcgYSBjb29raWUgLSBkZXJhbmdlZCBwcmFjdGljZSwgb3IgZ2xpbXBzZSBvZiB0aGUgZnV0dXJlPyIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGJveWZyaWVuZCBkdW1wZWQgYWZ0ZXIgb2ZmZXJpbmcgaGlzIGxvdmVyIGNvb2tpZXMgZm9yIFZhbGVudGluZVwncyBEYXksIHJlcG9ydHMgc2F5LiAiVGhleSB3ZXJlIG9mZi1icmFuZCIsIHNocnVncyBleC1naXJsZnJpZW5kLicsDQogICAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJlYXN0ZXIiICYmIEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbG9uZy1lYXJlZCBjcml0dGVycyB3aXRoIGZ1enp5IHRhaWxzIGludmFkZSBzdWJ1cmJzLCBzcHJlYWQgdGVycm9yIGFuZCBjaG9jb2xhdGUhIiwNCiAgICAgICAgICAgICAgICAgICdOZXdzIDogZWdncyBoYXZlIGJlZ3VuIHRvIG1hdGVyaWFsaXplIGluIHRoZSBtb3N0IHVuZXhwZWN0ZWQgcGxhY2VzOyAibm8gcGxhY2UgaXMgc2FmZSIsIHdhcm4gZXhwZXJ0cy4nLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBwYWNrcyBvZiByYW1wYWdpbmcgcmFiYml0cyBjYXVzZSBiaWxsaW9ucyBpbiBwcm9wZXJ0eSBkYW1hZ2U7IG5ldyBzdHJhaW4gb2YgbXl4b21hdG9zaXMgYmVpbmcgZGV2ZWxvcGVkLiIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IGVnZy1sYXlpbmcgcmFiYml0cyAibm90IHF1aXRlIGZyb20gdGhpcyBkaW1lbnNpb24iLCB3YXJucyBiaW9sb2dpc3Q7IGFkdmlzZXMgYWdhaW5zdCBwZXR0aW5nLCBmZWVkaW5nLCBvciBjb29raW5nIHRoZSBjcmVhdHVyZXMuJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogbXlzdGVyaW91cyByYWJiaXRzIGZvdW5kIHRvIGJlIGVnZy1sYXllcnMsIGJ1dCBtYW1tYWxpYW4sIGhpbnRpbmcgYXQgcG9zc2libGUgcGxhdHlwdXMgYW5jZXN0cnkuIiwNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoIUVOKSB7DQogICAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwMCkgew0KICAgICAgICAgICAgbGlzdC5wdXNoKE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKG1pc2MpIikpKTsNCiAgICAgICAgICAgIGxpc3QucHVzaChORVdTICsgY2hvb3NlKGxvYygiVGlja2VyIChtaXNjKSIpKSk7DQogICAgICAgICAgICBsaXN0LnB1c2goTkVXUyArIGNob29zZShsb2MoIlRpY2tlciAobWlzYykiKSkpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDUpIHsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhc0FjaGlldigiQmFzZSAxMCIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWUgbWFudWZhY3R1cmVyIGNvbXBsZXRlbHkgZm9yZ29lcyBjb21tb24gc2Vuc2UsIGxldHMgc3RyYW5nZSBvYnNlc3Npb24gd2l0aCByb3VuZCBudW1iZXJzIGRyaXZlIGJ1aWxkaW5nIGRlY2lzaW9ucyEiDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXNBY2hpZXYoIkZyb20gc2NyYXRjaCIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBmb2xsb3cgdGhlIHRlYXItamVya2luZywgcmljaGVzLXRvLXJhZ3Mgc3RvcnkgYWJvdXQgYSBsb2NhbCBjb29raWUgbWFudWZhY3R1cmVyIHdobyBkZWNpZGVkIHRvIGdpdmUgaXQgYWxsIHVwISINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhc0FjaGlldigiQSB3b3JsZCBmaWxsZWQgd2l0aCBjb29raWVzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGtub3duIHVuaXZlcnNlIG5vdyBqYW1tZWQgd2l0aCBjb29raWVzISBObyB2YWNhbmNpZXMhIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzQWNoaWV2KCJMYXN0IENoYW5jZSB0byBTZWUiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDogaW5jcmVkaWJseSByYXJlIGFsYmlubyB3cmlua2xlciBvbiB0aGUgYnJpbmsgb2YgZXh0aW5jdGlvbiBwb2FjaGVkIGJ5IGNvb2tpZS1jcmF6ZWQgcGFzdHJ5IG1hZ25hdGUhIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJTZXJlbmRpcGl0eSIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBsb2NhbCBjb29raWUgbWFudWZhY3R1cmVyIGJlY29tZXMgbHVja2llc3QgYmVpbmcgYWxpdmUhIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJTZWFzb24gc3dpdGNoZXIiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICdOZXdzIDogc2Vhc29ucyBhcmUgYWxsIG91dCBvZiB3aGFjayEgIldlIG5lZWQgdG8gZ2V0IHNvbWUgd2hhY2sgYmFjayBpbnRvIHRoZW0gc2Vhc29ucyIsIHNheXMgbG9jYWwgcmVzaWRlbnQuJw0KICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBoZWxwZXJzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGZhaW50IG1lb3dpbmcgaGVhcmQgYXJvdW5kIGxvY2FsIGNvb2tpZSBmYWNpbGl0aWVzOyBzdWdnZXN0cyBuZXcgaW5ncmVkaWVudCBiZWluZyB0ZXN0ZWQuIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gd29ya2VycyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBjcm93ZHMgb2YgbWVvd2luZyBraXR0ZW5zIHdpdGggbGl0dGxlIGhhcmQgaGF0cyByZXBvcnRlZCBuZWFyIGxvY2FsIGNvb2tpZSBmYWNpbGl0aWVzLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIGVuZ2luZWVycyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiBzdXJyb3VuZGluZ3Mgb2YgbG9jYWwgY29va2llIGZhY2lsaXRpZXMgbm93IG92ZXJydW4gd2l0aCBraXR0ZW5zIGluIGFkb3JhYmxlIGxpdHRsZSBzdWl0cy4gQXV0aG9yaXRpZXMgYWR2aXNlIHRvIHN0YXkgYXdheSBmcm9tIHRoZSBwcmVtaXNlcy4iDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBvdmVyc2VlcnMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDogbG9jYWxzIHJlcG9ydCB0cm91cGUgb2YgYm9zc3kga2l0dGVucyBtZW93aW5nIGFkb3JhYmxlIG9yZGVycyBhdCBwYXNzZXJzYnkuIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gbWFuYWdlcnMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICdOZXdzIDogbG9jYWwgb2ZmaWNlIGN1YmljbGVzIGludmFkZWQgd2l0aCBhcm1pZXMgb2Ygc3Rlcm4tbG9va2luZyBraXR0ZW5zIGFza2luZyBlbXBsb3llZXMgIndoYXRcJ3MgaGFwcGVuaW5nLCBtZW93Ii4nDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBhY2NvdW50YW50cyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiB0aW55IGZlbGluZXMgc2hvdyBzdWRkZW4gYW5kIGFtYXppbmcgcHJvZmljaWVuY3kgd2l0aCBmdXp6eSBtYXRoZW1hdGljcyBhbmQgcGF3bGlub21pYWxzLCBiYWZmbGluZyBzY2llbnRpc3RzIGFuZCBwZXQgc3RvcmUgb3duZXJzLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIHNwZWNpYWxpc3RzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG5ldyBraXR0ZW4gY29sbGVnZSBvcGVuaW5nIG5leHQgd2Vlaywgb2ZmZXJzIGNvdXJzZXMgb24gY29va2llLW1ha2luZyBhbmQgY2F0bmlwIHN0dWRpZXMuIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gZXhwZXJ0cyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgIk5ld3MgOiB1bmVtcGxveW1lbnQgcmF0ZXMgc29hcmluZyBhcyB3b2VmdWxseSBhZG9yYWJsZSBsaXR0bGUgY2F0cyBuYWIgam9icyBvbiBhbGwgbGV2ZWxzIG9mIGV4cGVydGlzZSwgc2F5cyBzdHVkeS4iDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBjb25zdWx0YW50cyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgJ05ld3MgOiAiSW4gdGhlIGZ1dHVyZSwgeW91ciBqb2Igd2lsbCBtb3N0IGxpa2VseSBiZSBkb25lIGJ5IGEgY2F0IiwgcHJlZGljdHMgc3VzcGljaW91c2x5IGZ1cnJ5IGZ1dHVyb2xvZ2lzdC4nDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoIktpdHRlbiBhc3Npc3RhbnRzIHRvIHRoZSByZWdpb25hbCBtYW5hZ2VyIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHN0cmFuZ2Uga2l0dGVucyB3aXRoIHBlY3VsaWFyIG9waW5pb25zIG9uIG1hcnRpYWwgYXJ0cyBzcG90dGVkIGxvaXRlcmluZyBvbiBsb2NhbCBiZWV0IGZhcm1zISINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIG1hcmtldGVlcnMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDogbm9uc2Vuc2ljYWwga2l0dGVuIGJpbGxib2FyZHMgY3JvcCB1cCBhbGwgb3ZlciBjb3VudHJ5c2lkZSwgdHJ5aW5nIHRvIHNlbGwgcGVvcGxlIHRoZSBjb29raWVzIHRoZXkgYWxyZWFkeSBnZXQgZm9yIGZyZWUhIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYW5hbHlzdHMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDogYXJlIHlvdXIgc3BlbmRpbmcgaGFiaXRzIHNlbnNpYmxlPyBGb3IgYSBoZWZ0eSBmZWUsIHRoZXNlIGtpdHRlbiBhbmFseXN0cyB3aWxsIHRlbGwgeW91ISINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIGV4ZWN1dGl2ZXMiKSkNCiAgICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICAgICJOZXdzIDoga2l0dGVucyBzdHJ1dHRpbmcgYXJvdW5kIGluIGhvdCBsaXR0bGUgYnVzaW5lc3Mgc3VpdHMgc2hvdXRpbmcgY3V0LXRocm9hdCBvcmRlcnMgYXQgdGhlaXIgYXNzaXN0YW50cywgcG9zc2libHkgdGhlIGN1dGVzdCB0aGluZyB0aGlzIHJlcG9ydGVyIGhhcyBldmVyIHNlZW4hIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJLaXR0ZW4gYWRtaW5zIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGFsbCBzeXN0ZW1zIG5vbWluYWwsIGNsYWltIGtpdHRlbiBhZG1pbnMgb2J2aW91c2x5IGluIHdheSBvdmVyIHRoZWlyIGhlYWRzLiINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIGFuZ2VscyIpKQ0KICAgICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgICAgJ05ld3MgOiAiVHJ5IHRvIGlnbm9yZSBhbnkgZ2hvc3RseSBmZWxpbmVzIHRoYXQgbWF5IGJlIHB1cnJpbmcgaW5zaWRlIHlvdXIgZWFycywiIHdhcm4gc2NpZW50aXN0cy4gIlRoZXlcJ2xsIGp1c3QgbHVyZSB5b3UgaW50byBtYWtpbmcgcG9vciBsaWZlIGNob2ljZXMuIicNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcygiS2l0dGVuIHdhZ2VzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGtpdHRlbnMgYnJlYWsgZ2xhc3MgY2VpbGluZyEgRG8gdGhleSBoYXZlIGFueSBpZGVhIGhvdyBleHBlbnNpdmUgdGhvc2UgYXJlISINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhc0FjaGlldigiSmVsbGljbGVzIikpDQogICAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGxvY2FsIGtpdHRlbnMgaW52b2x2ZWQgaW4gbWlzZ3VpZGVkIG11c2ljYWwgcHJvZHVjdGlvbiwgbGVhdmUgYXVkaWVuY2UgcGVydHVyYmVkIGFuZCB1bm5lcnZlZC4iDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUuSGFzQWNoaWV2KCJEdWRlLCBzd2VldCIpICYmIE1hdGgucmFuZG9tKCkgPCAwLjIpDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIk5ld3MgOiBtYWpvciBzdWdhci1zbXVnZ2xpbmcgcmluZyBkaXNtYW50bGVkIGJ5IGF1dGhvcml0aWVzOyAiICsNCiAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwICsgMykgKw0KICAgICAgICAgICAgICAgICAgIiB0b25zIG9mIHN1Z2FyIGx1bXBzIHNlaXplZCwgIiArDQogICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0OCArIDIpICsNCiAgICAgICAgICAgICAgICAgICIgc3VzcGVjdHMgYXBwcmVoZW5kZWQuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGF1dGhvcml0aWVzIHdhcm4gdG91cmlzdHMgbm90IHRvIGJ1eSBib290bGVnIHN1Z2FyIGx1bXBzIGZyb20gc3RyZWV0IHBlZGRsZXJzIC0gXCJZb3UgdGhpbmsgeW91J3JlIGdldHRpbmcgYSBzd2VldCBkZWFsLCBidXQgd2hhdCB5b3UncmUgYmVpbmcgc29sZCBpcyByZWFsbHkganVzdCBvcmRpbmFyeSBjb2NhaW5lXCIsIHNheXMgYWdlbnQuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHByby1kaWFiZXRlcyBtb3ZlbWVudCBwcm90ZXN0cyBhZ2FpbnN0IHN1Z2FyLXNoYW1pbmcuIFwiSSd2ZSBlYXRlbiBub3RoaW5nIGJ1dCBzdWdhciBsdW1wcyBmb3IgdGhlIHBhc3QgIiArDQogICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCArIDQpICsNCiAgICAgICAgICAgICAgICAgICIgeWVhcnMgYW5kIEknbSBmZWVsaW5nIGdyZWF0IVwiLCBzYXlzIHdvbWFuIHdpdGggZnJpYWJsZSBza2luLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBleHBlcnRzIGluIGJpdHRlciBkaXNhZ3JlZW1lbnQgb3ZlciB3aGV0aGVyIHN1Z2FyIGNvbnN1bXB0aW9uIHR1cm5zIGNoaWxkcmVuIHNsdWdnaXNoIG9yIGh5cGVyYWN0aXZlLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBmaXNoZXJtZW4gZGVwbG9yZSB1cHR1cm4gaW4gZmlzaCB0b290aCBkZWNheSBhcyBzdWdhciBsdW1wcy1oYXVsaW5nIGNhcmdvIHNpbmtzIGludG8gdGhlIG9jZWFuLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiByYXJlIGJsYWNrIHN1Z2FyIGx1bXAgdGhhdCBjYXB0aXZhdGVkIG1pbGxpb25zIGluIHVucHJlY2VkZW50ZWQgYXVjdGlvbiByZXZlYWxlZCB0byBiZSBjb21tb24gdG94aWMgZnVuZ3VzLiIsDQogICAgICAgICAgICAgICAgJ05ld3MgOiAiQmFjayBpbiBteSBkYXksIHN1Z2FyIGx1bXBzIHdlcmUgdGhlc2UgbGl0dGxlIGN1YmVzIHlvdVwnZCBwdXQgaW4geW91ciB0ZWEsIG5vdCB0aG9zZSBmaXN0LXNpemVkIG1vbnN0cm9zaXRpZXMgcGVvcGxlIGVhdCBmb3IgbHVuY2giLCB3aGluZXMgY3VybXVkZ2VvbiB3aXRoIGZhaWxpbmcgbWVtb3J5LicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBzdWdhciBsdW1wLXNuYWNraW5nIGZhZCBzd2VlcHMgdGhlIG5hdGlvbjsgZGVudGlzdHMgZXZlcnl3aGVyZSByZWpvaWNlLiIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjAwMSkgew0KICAgICAgICAgICAgLy9hcG9sb2dpZXMgdG8gV2lsbCBXcmlnaHQNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgIllvdSBoYXZlIGJlZW4gY2hvc2VuLiBUaGV5IHdpbGwgY29tZSBzb29uLiIsDQogICAgICAgICAgICAgICJUaGV5J3JlIGNvbWluZyBzb29uLiBNYXliZSB5b3Ugc2hvdWxkIHRoaW5rIHR3aWNlIGFib3V0IG9wZW5pbmcgdGhlIGRvb3IuIiwNCiAgICAgICAgICAgICAgIlRoZSBlbmQgaXMgbmVhci4gTWFrZSBwcmVwYXJhdGlvbnMuIiwNCiAgICAgICAgICAgICAgIk5ld3MgOiBicm9jY29saSB0b3BzIGZvciBtb21zLCBsYXN0IGZvciBraWRzOyBkYWRzIGluZGlmZmVyZW50LiIsDQogICAgICAgICAgICAgICJOZXdzIDogbWlkZGxlIGFnZSBhIGhvYXgsIGRlY2xhcmVzIHN0dWR5OyB0dXJucyBvdXQgdG8gYmUgYmFkIHBvc3R1cmUgYWZ0ZXIgYWxsLiIsDQogICAgICAgICAgICAgICJOZXdzIDoga2l0dGllcyB3YW50IGFuc3dlcnMgaW4gcG9zc2libGUgS2l0dHkgS2liYmxlIHNob3J0YWdlLiINCiAgICAgICAgICAgICk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgIk5ld3MgOiAiICsNCiAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgZm91bmQgdG8gIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgImluY3JlYXNlIGxpZmVzcGFuIiwNCiAgICAgICAgICAgICAgICAgICAgICAic2Vuc2libHkgaW5jcmVhc2UgaW50ZWxsaWdlbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAicmV2ZXJzZSBhZ2luZyIsDQogICAgICAgICAgICAgICAgICAgICAgImRlY3JlYXNlIGhhaXIgbG9zcyIsDQogICAgICAgICAgICAgICAgICAgICAgInByZXZlbnQgYXJ0aHJpdGlzIiwNCiAgICAgICAgICAgICAgICAgICAgICAiY3VyZSBibGluZG5lc3MiLA0KICAgICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAgICIgaW4gIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICIhIiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzIGZvdW5kIHRvIG1ha2UgIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgIm1vcmUgZG9jaWxlIiwNCiAgICAgICAgICAgICAgICAgICAgICAibW9yZSBoYW5kc29tZSIsDQogICAgICAgICAgICAgICAgICAgICAgIm5pY2VyIiwNCiAgICAgICAgICAgICAgICAgICAgICAibGVzcyBodW5ncnkiLA0KICAgICAgICAgICAgICAgICAgICAgICJtb3JlIHByYWdtYXRpYyIsDQogICAgICAgICAgICAgICAgICAgICAgInRhc3RpZXIiLA0KICAgICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAgICIhIiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzIHRlc3RlZCBvbiAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKGFuaW1hbHMpICsNCiAgICAgICAgICAgICAgICAgICAgIiwgZm91bmQgdG8gaGF2ZSBubyBpbGwgZWZmZWN0cy4iLA0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgdW5leHBlY3RlZGx5IHBvcHVsYXIgYW1vbmcgIiArIGNob29zZShhbmltYWxzKSArICIhIiwNCiAgICAgICAgICAgICAgICAgICJ1bnNpZ2h0bHkgbHVtcHMgZm91bmQgb24gIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICcgbmVhciBjb29raWUgZmFjaWxpdHk7ICJ0aGV5XCd2ZSBwcmV0dHkgbXVjaCBhbHdheXMgbG9va2VkIGxpa2UgdGhhdCIsIHNheSBiaW9sb2dpc3RzLicsDQogICAgICAgICAgICAgICAgICAibmV3IHNwZWNpZXMgb2YgIiArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICcgZGlzY292ZXJlZCBpbiBkaXN0YW50IGNvdW50cnk7ICJ5dXAsIHRhc3RlcyBsaWtlIGNvb2tpZXMiLCBzYXlzIGJpb2xvZ2lzdC4nLA0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgZ28gd2VsbCB3aXRoICIgKw0KICAgICAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICAgICAicm9hc3RlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAidG9hc3RlZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiYm9pbGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJzYXV0ZWVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJtaW5jZWQiLA0KICAgICAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgICAgICAgICBjaG9vc2UoYW5pbWFscyksDQogICAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAgICJzdXNoaSIsDQogICAgICAgICAgICAgICAgICAgICAgICAic291cCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiY2FycGFjY2lvIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJzdGVhayIsDQogICAgICAgICAgICAgICAgICAgICAgICAibnVnZ2V0cyIsDQogICAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgIiBtYWRlIGZyb20gIiArDQogICAgICAgICAgICAgICAgICAgICAgICBjaG9vc2UoYW5pbWFscyksDQogICAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICAgIiwgc2F5cyBjb250cm92ZXJzaWFsIGNoZWYuIiwNCiAgICAgICAgICAgICAgICAgICciZG8geW91ciBjb29raWVzIGNvbnRhaW4gJyArDQogICAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAgICc/IiwgYXNrcyBQU0Egd2FybmluZyBhZ2FpbnN0IGNvdW50ZXJmZWl0IGNvb2tpZXMuJywNCiAgICAgICAgICAgICAgICAgICJkb2N0b3JzIHJlY29tbWVuZCB0d2ljZS1kYWlseSBjb25zdW1wdGlvbiBvZiBmcmVzaCBjb29raWVzLiIsDQogICAgICAgICAgICAgICAgICAiZG9jdG9ycyB3YXJuIGFnYWluc3QgY2hvY29sYXRlIGNoaXAtc25vcnRpbmcgdGVlbiBmYWQuIiwNCiAgICAgICAgICAgICAgICAgICJkb2N0b3JzIGFkdmlzZSBhZ2FpbnN0IG5ldyBjb29raWUtZnJlZSBmYWQgZGlldC4iLA0KICAgICAgICAgICAgICAgICAgJ2RvY3RvcnMgd2FybiBtb3RoZXJzIGFib3V0IHRoZSBkYW5nZXJzIG9mICJob21lLW1hZGUgY29va2llcyIuJywNCiAgICAgICAgICAgICAgICBdKSwNCiAgICAgICAgICAgICAgJ05ld3MgOiAiJyArDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJJJ20gYWxsIGFib3V0IGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkkganVzdCBjYW4ndCBzdG9wIGVhdGluZyBjb29raWVzLiBJIHRoaW5rIEkgc2VyaW91c2x5IG5lZWQgaGVscCIsDQogICAgICAgICAgICAgICAgICAiSSBndWVzcyBJIGhhdmUgYSBjb29raWUgcHJvYmxlbSIsDQogICAgICAgICAgICAgICAgICAiSSdtIG5vdCBhZGRpY3RlZCB0byBjb29raWVzLiBUaGF0J3MganVzdCBzcGVjdWxhdGlvbiBieSBmYW5zIHdpdGggdG9vIG11Y2ggZnJlZSB0aW1lIiwNCiAgICAgICAgICAgICAgICAgICJteSB1cGNvbWluZyBhbGJ1bSBjb250YWlucyAzIHNvbmdzIGFib3V0IGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkkndmUgaGFkIGRyZWFtcyBhYm91dCBjb29raWVzIDMgbmlnaHRzIGluIGEgcm93IG5vdy4gSSdtIGEgYml0IHdvcnJpZWQgaG9uZXN0bHkiLA0KICAgICAgICAgICAgICAgICAgImFjY3VzYXRpb25zIG9mIGNvb2tpZSBhYnVzZSBhcmUgb25seSB2aWxlIHNsYW5kZXIiLA0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgcmVhbGx5IGhlbHBlZCBtZSB3aGVuIEkgd2FzIGZlZWxpbmcgbG93IiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzIGFyZSB0aGUgc2VjcmV0IGJlaGluZCBteSBwZXJmZWN0IHNraW4iLA0KICAgICAgICAgICAgICAgICAgImNvb2tpZXMgaGVscGVkIG1lIHN0YXkgc2FuZSB3aGlsZSBmaWxtaW5nIG15IHVwY29taW5nIG1vdmllIiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzIGhlbHBlZCBtZSBzdGF5IHRoaW4gYW5kIGhlYWx0aHkiLA0KICAgICAgICAgICAgICAgICAgIkknbGwgc2F5IG9uZSB3b3JkLCBqdXN0IG9uZSA6IGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgImFscmlnaHQsIEknbGwgc2F5IGl0IC0gSSd2ZSBuZXZlciBlYXRlbiBhIHNpbmdsZSBjb29raWUgaW4gbXkgbGlmZSIsDQogICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICciLCByZXZlYWxzIGNlbGVicml0eS4nLA0KICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICdOZXdzIDogc2NpZW50aXN0IHByZWRpY3RzIGltbWluZW50IGNvb2tpZS1yZWxhdGVkICJlbmQgb2YgdGhlIHdvcmxkIjsgYmVjb21lcyBqb2tlIGFtb25nIHBlZXJzLicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBtYW4gcm9icyBiYW5rLCBidXlzIGNvb2tpZXMuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHNjaWVudGlzdHMgZXN0YWJsaXNoIHRoYXQgdGhlIGRlYWwgd2l0aCBhaXJsaW5lIGZvb2QgaXMsIGluIGZhY3QsIGEgY3JpdGljYWwgbGFjayBvZiBjb29raWVzLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBodW5kcmVkcyBvZiB0b25zIG9mIGNvb2tpZXMgZHVtcGVkIGludG8gc3RhcnZpbmcgY291bnRyeSBmcm9tIGFpcnBsYW5lczsgdGhvdXNhbmRzIGRlYWQsIG5hdGlvbiBncmF0ZWZ1bC4iLA0KICAgICAgICAgICAgICAgICdOZXdzIDogbmV3IHN0dWR5IHN1Z2dlc3RzIGNvb2tpZXMgbmVpdGhlciBzcGVlZCB1cCBub3Igc2xvdyBkb3duIGFnaW5nLCBidXQgaW5zdGVhZCAidGFrZSB5b3UgaW4gYSBkaWZmZXJlbnQgZGlyZWN0aW9uIi4nLA0KICAgICAgICAgICAgICAgICJOZXdzIDogb3Zlcmdyb3duIGNvb2tpZXMgZm91bmQgaW4gZmlzaGluZyBuZXRzLCByYWlzZSBxdWVzdGlvbnMgYWJvdXQgaG9ybW9uZSBiYWtpbmcuIiwNCiAgICAgICAgICAgICAgICAnTmV3cyA6ICJhbGwteW91LWNhbi1lYXQiIGNvb2tpZSByZXN0YXVyYW50IG9wZW5zIGluIGJpZyBjaXR5OyB3YWl0ZXJzIHRyYW1wbGVkIGluIG1pbnV0ZXMuJywNCiAgICAgICAgICAgICAgICAnTmV3cyA6IG1hbiBkaWVzIGluIGNvb2tpZS1lYXRpbmcgY29udGVzdDsgImEgbGVzcy10aGFuLWltcHJlc3NpdmUgcGVyZm9ybWFuY2UiLCBzYXlzIGp1ZGdlLicsDQogICAgICAgICAgICAgICAgJ05ld3MgOiB3aGF0IG1ha2VzIGNvb2tpZXMgdGFzdGUgc28gcmlnaHQ/ICJQcm9iYWJseSBhbGwgdGhlIFsqKioqKl0gdGhleSBwdXQgaW4gdGhlbSIsIHNheXMgYW5vbnltb3VzIHRpcHBlci4nLA0KICAgICAgICAgICAgICAgICdOZXdzIDogbWFuIGZvdW5kIGFsbGVyZ2ljIHRvIGNvb2tpZXM7ICJ3aGF0IGEgd2VpcmRvIiwgc2F5cyBmYW1pbHkuJywNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGZvcmVpZ24gcG9saXRpY2lhbiBpbnZvbHZlZCBpbiBjb29raWUtc211Z2dsaW5nIHNjYW5kYWwuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGNvb2tpZXMgbm93IG1vcmUgcG9wdWxhciB0aGFuICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgImNvdWdoIGRyb3BzIiwNCiAgICAgICAgICAgICAgICAgICAgImJyb2Njb2xpIiwNCiAgICAgICAgICAgICAgICAgICAgInNtb2tlZCBoZXJyaW5nIiwNCiAgICAgICAgICAgICAgICAgICAgImNoZWVzZSIsDQogICAgICAgICAgICAgICAgICAgICJ2aWRlbyBnYW1lcyIsDQogICAgICAgICAgICAgICAgICAgICJzdGFibGUgam9icyIsDQogICAgICAgICAgICAgICAgICAgICJyZWxhdGlvbnNoaXBzIiwNCiAgICAgICAgICAgICAgICAgICAgInRpbWUgdHJhdmVsIiwNCiAgICAgICAgICAgICAgICAgICAgImNhdCB2aWRlb3MiLA0KICAgICAgICAgICAgICAgICAgICAidGFuZ28iLA0KICAgICAgICAgICAgICAgICAgICAiZmFzaGlvbiIsDQogICAgICAgICAgICAgICAgICAgICJ0ZWxldmlzaW9uIiwNCiAgICAgICAgICAgICAgICAgICAgIm51Y2xlYXIgd2FyZmFyZSIsDQogICAgICAgICAgICAgICAgICAgICJ3aGF0ZXZlciBpdCBpcyB3ZSBhdGUgYmVmb3JlIiwNCiAgICAgICAgICAgICAgICAgICAgInBvbGl0aWNzIiwNCiAgICAgICAgICAgICAgICAgICAgIm94eWdlbiIsDQogICAgICAgICAgICAgICAgICAgICJsYW1wcyIsDQogICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAiLCBzYXlzIHN0dWR5LiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBvYmVzaXR5IGVwaWRlbWljIHN0cmlrZXMgbmF0aW9uOyBleHBlcnRzIGJsYW1lICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgInR3ZXJraW5nIiwNCiAgICAgICAgICAgICAgICAgICAgInRoYXQgZGFybiByYXAgbXVzaWMiLA0KICAgICAgICAgICAgICAgICAgICAidmlkZW8tZ2FtZXMiLA0KICAgICAgICAgICAgICAgICAgICAibGFjayBvZiBjb29raWVzIiwNCiAgICAgICAgICAgICAgICAgICAgIm15c3RlcmlvdXMgZ2hvc3RseSBlbnRpdGllcyIsDQogICAgICAgICAgICAgICAgICAgICJhbGllbnMiLA0KICAgICAgICAgICAgICAgICAgICAicGFyZW50cyIsDQogICAgICAgICAgICAgICAgICAgICJzY2hvb2xzIiwNCiAgICAgICAgICAgICAgICAgICAgImNvbWljLWJvb2tzIiwNCiAgICAgICAgICAgICAgICAgICAgImNvb2tpZS1zbm9ydGluZyBmYWQiLA0KICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgIi4iLA0KICAgICAgICAgICAgICAgICdOZXdzIDogY29va2llIHNob3J0YWdlIHN0cmlrZXMgdG93biwgcGVvcGxlIGZvcmNlZCB0byBlYXQgY3VwY2FrZXM7ICJqdXN0IG5vdCB0aGUgc2FtZSIsIGNvbmNlZGVzIG1heW9yLicsDQogICAgICAgICAgICAgICAgJ05ld3MgOiAieW91IGdvdHRhIGFkbWl0LCBhbGwgdGhpcyBjb29raWUgc3R1ZmYgaXMgYSBiaXQgb21pbm91cyIsIHNheXMgY29uZnVzZWQgaWRpb3QuJywNCiAgICAgICAgICAgICAgICAvLydOZXdzIDogc2NpZW50aXN0cyBhZHZpc2UgZ2V0dGluZyB1c2VkIHRvIGNvb2tpZXMgc3VmZnVzaW5nIGV2ZXJ5IGFzcGVjdCBvZiBsaWZlOyAidGhpcyBpcyB0aGUgbmV3IG5vcm1hbCIsIGV4cGVydCBzYXlzLicsDQogICAgICAgICAgICAgICAgLy8nTmV3cyA6IGRvY3RvcnMgYWR2aXNlIGFnYWluc3Qgd2VhcmluZyBmYWNlIG1hc2tzIHdoZW4gZ29pbmcgb3V0c2lkZS4gIllvdSBuZXZlciBrbm93IHdoZW4geW91IG1pZ2h0IG5lZWQgYSBjb29raWUuLi4gYSBtYXNrIHdvdWxkIGp1c3QgZ2V0IGluIHRoZSB3YXkuIicsLy90aGVzZSB3ZXJlIHdyaXR0ZW4gYmFjayB3aGVuIGNvdmlkIGhhZG4ndCByZWFsbHkgZG9uZSBtdWNoIGRhbWFnZSB5ZXQgYnV0IHRoZXkganVzdCBmZWVsIGluIHBvb3IgdGFzdGUgbm93DQogICAgICAgICAgICAgICAgIk5ld3MgOiBpcyB0aGVyZSBsaWZlIG9uIE1hcnM/IFZhcmlvdXMgY2hvY29sYXRlIGJhciBtYW51ZmFjdHVyZXJzIGN1cnJlbnRseSB1bmRlciBpbnZlc3RpZ2F0aW9uIGZvciBiYWN0ZXJpYWwgY29udGFtaW5hbnRzLiIsDQogICAgICAgICAgICAgICAgJ05ld3MgOiAic28gSSBndWVzcyB0aGF0XCdzIGEgdGhpbmcgbm93Iiwgc2NpZW50aXN0IGNvbW1lbnRzIG9uIGNvb2tpZSBwYXJ0aWNsZXMgbm93IHByZXNlbnQgaW4gdmlydHVhbGx5IGFsbCBzdGVlbCBtYW51ZmFjdHVyZWQgc2luY2UgY29va2llIHByb2R1Y3Rpb24gcmFtcGVkIHVwIHdvcmxkd2lkZS4nLA0KICAgICAgICAgICAgICAgICJOZXdzIDogdHJhY2UgYW1vdW50cyBvZiBjb29raWUgcGFydGljbGVzIGRldGVjdGVkIGluIG1vc3QgbGl2aW5nIGNyZWF0dXJlcywgc29tZSBvZiB3aGljaCBhZGFwdGluZyB0aGVtIGFzIHBhcnQgb2YgbmV3IGFuZCBleG90aWMgbWV0YWJvbGljIHByb2Nlc3Nlcy4iLA0KICAgICAgICAgICAgICBdKSwNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAnTmV3cyA6IG1vdmllIGNhbmNlbGxlZCBmcm9tIGxhY2sgb2YgYWN0b3JzOyAiZXZlcnlib2R5XCdzIGF0IGhvbWUgZWF0aW5nIGNvb2tpZXMiLCBsYW1lbnRzIGRpcmVjdG9yLicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBjb21lZGlhbiBmb3JjZWQgdG8gY2FuY2VsIGNvb2tpZSByb3V0aW5lIGR1ZSB0byB1bnJlbGF0ZWQgaW5kaWdlc3Rpb24uIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG5ldyBjb29raWUtYmFzZWQgcmVsaWdpb24gc3dlZXBzIHRoZSBuYXRpb24uIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IGZvc3NpbCByZWNvcmRzIHNob3cgY29va2llLWJhc2VkIG9yZ2FuaXNtcyBwcmV2YWxlbnQgZHVyaW5nIENhbWJyaWFuIGV4cGxvc2lvbiwgc2NpZW50aXN0cyBzYXkuIiwNCiAgICAgICAgICAgICAgICAnTmV3cyA6IG15c3RlcmlvdXMgaWxsZWdhbCBjb29raWVzIHNlaXplZDsgInRhc3RlcyB0ZXJyaWJsZSIsIHNheXMgcG9saWNlLicsDQogICAgICAgICAgICAgICAgJ05ld3MgOiBtYW4gZm91bmQgZGVhZCBhZnRlciBpbmdlc3RpbmcgY29va2llOyBpbnZlc3RpZ2F0b3JzIGZhdm9yICJtYWZpYSBzbml0Y2giIGh5cG90aGVzaXMuJywNCiAgICAgICAgICAgICAgICAnTmV3cyA6ICJ0aGUgdW5pdmVyc2UgcHJldHR5IG11Y2ggbG9vcHMgb24gaXRzZWxmLCIgc3VnZ2VzdHMgcmVzZWFyY2hlcjsgIml0XCdzIGNvb2tpZXMgYWxsIHRoZSB3YXkgZG93bi4iJywNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG1pbm9yIGNvb2tpZS1yZWxhdGVkIGluY2lkZW50IHR1cm5zIHdob2xlIHRvd24gdG8gYXNoZXM7IG5laWdoYm9yaW5nIGNpdGllcyBhc2tlZCB0byBjaGlwIGluIGZvciByZWNvbnN0cnVjdGlvbi4iLA0KICAgICAgICAgICAgICAgICJOZXdzIDogaXMgb3VyIG1lZGlhIGNvbnRyb2xsZWQgYnkgdGhlIGNvb2tpZSBpbmR1c3RyeT8gVGhpcyBjb3VsZCB2ZXJ5IHdlbGwgYmUgdGhlIGNhc2UsIHNheXMgY3JhY2twb3QgY29uc3BpcmFjeSB0aGVvcmlzdC4iLA0KICAgICAgICAgICAgICAgICJOZXdzIDogIiArDQogICAgICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgICAnY29va2llLWZsYXZvcmVkIHBvcGNvcm4gcHJldHR5IGRhbW4gcG9wdWxhcjsgIndlIGtpbmRhIGV4cGVjdGVkIHRoYXQiLCBzYXkgc2NpZW50aXN0cy4nLA0KICAgICAgICAgICAgICAgICAgICAiY29va2llLWZsYXZvcmVkIGNlcmVhbHMgYnJlYWsgYWxsIGtub3duIGNlcmVhbC1yZWxhdGVkIHJlY29yZHMiLA0KICAgICAgICAgICAgICAgICAgICAiY29va2llcyBwb3B1bGFyIGFtb25nIGFsbCBhZ2UgZ3JvdXBzLCBpbmNsdWRpbmcgZmV0dXNlcywgc2F5cyBzdHVkeS4iLA0KICAgICAgICAgICAgICAgICAgICAiY29va2llLWZsYXZvcmVkIHBvcGNvcm4gc2FsZXMgZXhwbG9kZWQgZHVyaW5nIHNjcmVlbmluZyBvZiBHcmFuZG1vdGhlcnMgSUkgOiBUaGUgTW9pc3RlbmluZy4iLA0KICAgICAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgICAgIk5ld3MgOiBhbGwtY29va2llIHJlc3RhdXJhbnQgb3BlbmluZyBkb3dudG93bi4gRGlzaGVzIHN1Y2ggYXMgYnJhaXNlZCBjb29raWVzLCBjb29raWUgdGhlcm1pZG9yLCBhbmQgZm9yIGRlc3NlcnQgOiBjcmVwZXMuIiwNCiAgICAgICAgICAgICAgICAnTmV3cyA6ICJPb2siLCBzYXlzIGludGVydmlld2VkIG9yYW5ndXRhbi4nLA0KICAgICAgICAgICAgICAgICJOZXdzIDogY29va2llcyBjb3VsZCBiZSB0aGUga2V5IHRvICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgImV0ZXJuYWwgbGlmZSIsDQogICAgICAgICAgICAgICAgICAgICJpbmZpbml0ZSByaWNoZXMiLA0KICAgICAgICAgICAgICAgICAgICAiZXRlcm5hbCB5b3V0aCIsDQogICAgICAgICAgICAgICAgICAgICJldGVybmFsIGJlYXV0eSIsDQogICAgICAgICAgICAgICAgICAgICJjdXJpbmcgYmFsZG5lc3MiLA0KICAgICAgICAgICAgICAgICAgICAid29ybGQgcGVhY2UiLA0KICAgICAgICAgICAgICAgICAgICAic29sdmluZyB3b3JsZCBodW5nZXIiLA0KICAgICAgICAgICAgICAgICAgICAiZW5kaW5nIGFsbCB3YXJzIHdvcmxkLXdpZGUiLA0KICAgICAgICAgICAgICAgICAgICAibWFraW5nIGNvbnRhY3Qgd2l0aCBleHRyYXRlcnJlc3RyaWFsIGxpZmUiLA0KICAgICAgICAgICAgICAgICAgICAibWluZC1yZWFkaW5nIiwNCiAgICAgICAgICAgICAgICAgICAgImJldHRlciBsaXZpbmciLA0KICAgICAgICAgICAgICAgICAgICAiYmV0dGVyIGVhdGluZyIsDQogICAgICAgICAgICAgICAgICAgICJtb3JlIGludGVyZXN0aW5nIFRWIHNob3dzIiwNCiAgICAgICAgICAgICAgICAgICAgImZhc3Rlci10aGFuLWxpZ2h0IHRyYXZlbCIsDQogICAgICAgICAgICAgICAgICAgICJxdWFudHVtIGJha2luZyIsDQogICAgICAgICAgICAgICAgICAgICJjaG9jb2xhdHkgZ29vZG5lc3MiLA0KICAgICAgICAgICAgICAgICAgICAiZ29vZGVyIHRob3VnaHRuZXNzIiwNCiAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICIsIHNheSBzY2llbnRpc3RzLiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBmbGF2b3IgdGV4dCAiICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICJub3QgcGFydGljdWxhcmx5IGZsYXZvcmZ1bCIsDQogICAgICAgICAgICAgICAgICAgICJraW5kIG9mIHVuc2F2b3J5IiwNCiAgICAgICAgICAgICAgICAgICAgJyJyYXRoZXIgYmxhbmQiJywNCiAgICAgICAgICAgICAgICAgICAgInByZXR0eSBzcGljeSBsYXRlbHkiLA0KICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgIiwgc3R1ZHkgZmluZHMuIiwNCiAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgJ05ld3MgOiB3aGF0IGRvIGdvbGRlbiBjb29raWVzIHRhc3RlIGxpa2U/IFN0dWR5IHJldmVhbHMgYSBmbGF2b3IgInNvbWV3aGVyZSBiZXR3ZWVuIHNwZWFybWludCBhbmQgbGlxdW9yaWNlIi4nLA0KICAgICAgICAgICAgICAgICdOZXdzIDogd2hhdCBkbyB3cmF0aCBjb29raWVzIHRhc3RlIGxpa2U/IFN0dWR5IHJldmVhbHMgYSBmbGF2b3IgInNvbWV3aGVyZSBiZXR3ZWVuIGJsb29kIHNhdXNhZ2UgYW5kIHNlYXdhdGVyIi4nLA0KICAgICAgICAgICAgICAgICJOZXdzIDogIiArDQogICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKw0KICAgICAgICAgICAgICAgICAgJy1icmFuZCBjb29raWVzICInICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICJtdWNoIGxlc3Mgc29nZ3kiLA0KICAgICAgICAgICAgICAgICAgICAibXVjaCB0YXN0aWVyIiwNCiAgICAgICAgICAgICAgICAgICAgInJlbGF0aXZlbHkgbGVzcyBjcmFwcHkiLA0KICAgICAgICAgICAgICAgICAgICAibWFyZ2luYWxseSBsZXNzIGF3ZnVsIiwNCiAgICAgICAgICAgICAgICAgICAgImxlc3MgdG94aWMiLA0KICAgICAgICAgICAgICAgICAgICAicG9zc2libHkgbW9yZSBlZGlibGUiLA0KICAgICAgICAgICAgICAgICAgICAibW9yZSBmYXNoaW9uYWJsZSIsDQogICAgICAgICAgICAgICAgICAgICJzbGlnaHRseSBuaWNlciIsDQogICAgICAgICAgICAgICAgICAgICJ0cmVuZGllciIsDQogICAgICAgICAgICAgICAgICAgICJhcmd1YWJseSBoZWFsdGhpZXIiLA0KICAgICAgICAgICAgICAgICAgICAib2JqZWN0aXZlbHkgYmV0dGVyIGNob2ljZSIsDQogICAgICAgICAgICAgICAgICAgICJzbGlnaHRseSBsZXNzIHRlcnJpYmxlIiwNCiAgICAgICAgICAgICAgICAgICAgImRlY2lkZWRseSBjb29raWVyIiwNCiAgICAgICAgICAgICAgICAgICAgImEgdGFkIGNoZWFwZXIiLA0KICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgJyB0aGFuIGNvbXBldGl0b3JzIiwgc2F5cyBjb25zdW1lciBzdXJ2ZXkuJywNCiAgICAgICAgICAgICAgICAnTmV3cyA6ICInICsNCiAgICAgICAgICAgICAgICAgIEdhbWUuYmFrZXJ5TmFtZSArDQogICAgICAgICAgICAgICAgICAiXCIgc2V0IHRvIGJlIHRoaXMgeWVhcidzIG1vc3QgcG9wdWxhciBiYWJ5IG5hbWUuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG5ldyBwb3B1bGFyaXR5IHN1cnZleSBzYXlzICIgKw0KICAgICAgICAgICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAgICAgICAgICIncyB0aGUgd29yZCB3aGVuIGl0IGNvbWVzIHRvIGNvb2tpZXMuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IG1ham9yIGNpdHkgYmVpbmcgcmVuYW1lZCAiICsNCiAgICAgICAgICAgICAgICAgIEdhbWUuYmFrZXJ5TmFtZSArDQogICAgICAgICAgICAgICAgICAidmlsbGUgYWZ0ZXIgd29ybGQtZmFtb3VzIGNvb2tpZSBtYW51ZmFjdHVyZXIuIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6ICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgInN0cmVldCIsDQogICAgICAgICAgICAgICAgICAgICJzY2hvb2wiLA0KICAgICAgICAgICAgICAgICAgICAibnVyc2luZyBob21lIiwNCiAgICAgICAgICAgICAgICAgICAgInN0YWRpdW0iLA0KICAgICAgICAgICAgICAgICAgICAibmV3IGZhc3QgZm9vZCBjaGFpbiIsDQogICAgICAgICAgICAgICAgICAgICJuZXcgcGxhbmV0IiwNCiAgICAgICAgICAgICAgICAgICAgIm5ldyBkaXNlYXNlIiwNCiAgICAgICAgICAgICAgICAgICAgImZsZXNoLWVhdGluZyBiYWN0ZXJpYSIsDQogICAgICAgICAgICAgICAgICAgICJkZWFkbHkgdmlydXMiLA0KICAgICAgICAgICAgICAgICAgICAibmV3IHNwZWNpZXMgb2YgIiArIGNob29zZShhbmltYWxzKSwNCiAgICAgICAgICAgICAgICAgICAgIm5ldyBsYXciLA0KICAgICAgICAgICAgICAgICAgICAiYmFieSIsDQogICAgICAgICAgICAgICAgICAgICJwcm9ncmFtbWluZyBsYW5ndWFnZSIsDQogICAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgICAiIHRvIGJlIG5hbWVkIGFmdGVyICIgKw0KICAgICAgICAgICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAgICAgICAgICIsIHRoZSB3b3JsZC1mYW1vdXMgY29va2llIG1hbnVmYWN0dXJlci4iLA0KICAgICAgICAgICAgICAgICJOZXdzIDogZG9uJ3QgbWlzcyB0b25pZ2h0J3MgYmlvcGljIG9uICIgKw0KICAgICAgICAgICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAgICAgICAgICIncyBpcnJlc2lzdGlibGUgcmlzZSB0byBzdWNjZXNzISIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBkb24ndCBtaXNzIHRvbmlnaHQncyBpbnRlcnZpZXcgb2YgIiArDQogICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKw0KICAgICAgICAgICAgICAgICAgIiBieSAiICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICJCbG9wcmFoIiwNCiAgICAgICAgICAgICAgICAgICAgIkJsYXZpZCBCbGV0dGVybWFuIiwNCiAgICAgICAgICAgICAgICAgICAgIkJsaW1teSBCbGltbWVsIiwNCiAgICAgICAgICAgICAgICAgICAgIkJsZWxsZW4gQmxlZ2VuZXJlcyIsDQogICAgICAgICAgICAgICAgICAgICJCbGltbXkgQmxhbGxvbiIsDQogICAgICAgICAgICAgICAgICAgICJCbG9uYW4gQmxvJ0JyaWVuIiwNCiAgICAgICAgICAgICAgICAgICAgIkJsYXkgQmxlbm8iLA0KICAgICAgICAgICAgICAgICAgICAiQmxvbiBCbGV3YXJ0IiwNCiAgICAgICAgICAgICAgICAgICAgIkJsZXZlbiBCbG9sYmVydCIsDQogICAgICAgICAgICAgICAgICAgICJMb3JkIFRveGlraHJvbiBvZiBkaW1lbnNpb24gNy1CMTkiLA0KICAgICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKyAiJ3Mgb3duIGV2aWwgY2xvbmUiLA0KICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgIiEiLA0KICAgICAgICAgICAgICAgICdOZXdzIDogcGVvcGxlIGFsbCBvdmVyIHRoZSBpbnRlcm5ldCBzdGlsbCBzY3JhdGNoaW5nIHRoZWlyIGhlYWRzIG92ZXIgbm9uc2Vuc2ljYWwgcmVmZXJlbmNlIDogIk9rYXksIGJ1dCB3aHkgYW4gZWdnPyInLA0KICAgICAgICAgICAgICAgICdOZXdzIDogdmlyYWwgdmlkZW8gIlRvbyBNYW55IENvb2tpZXMiIGNvdWxkIGJlICJhIGdyaW0gY29tbWVudGFyeSBvbiB0aGUgaW1wZW5kaW5nIGNyaXNpcyBvdXIgd29ybGQgaXMgYWJvdXQgdG8gZmFjZSIsIHNheXMgZmFtb3VzIGVjb25vbWlzdC4nLA0KICAgICAgICAgICAgICAgICdOZXdzIDogIm1lbWVzIGZyb20gbGFzdCB5ZWFyIHNvbWVob3cgc3RpbGwgcmVsZXZhbnQiLCBkZXBsb3JlIGV4cGVydHMuJywNCiAgICAgICAgICAgICAgICAnTmV3cyA6IGNvb2tpZSBlbW9qaSBtb3N0IHBvcHVsYXIgYW1vbmcgdGVlbmFnZXJzLCBmYXIgYWhlYWQgb2YgImp1ZGdtZW50YWwgT0sgaGFuZCBzaWduIiBhbmQgInNoaWZ0eS1sb29raW5nIGRhcmsgbW9vbiIsIHNheXMgc3R1ZHkuJywNCiAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIk5ld3MgOiBiaXJ0aHMgb2Ygc3VzcGljaW91c2x5IGJhbGQgYmFiaWVzIG9uIHRoZSByaXNlOyBhbmNpZW50IGFsaWVuIGNhYmFsIGRlbmllcyBpbnZvbHZlbWVudC4iLA0KICAgICAgICAgICAgICAgICdOZXdzIDogImF0IHRoaXMgcG9pbnQsIGNvb2tpZXMgcGVybWVhdGUgdGhlIGVjb25vbXkiLCBzYXlzIGVjb25vbWlzdC4gIklmIHdlIHN0YXJ0IGVhdGluZyBhbnl0aGluZyBlbHNlLCB3ZVwncmUgYWxsIGRlYWQuIicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBwdW4gaW4gaGVhZGxpbmUgaW5mdXJpYXRlcyB0b3duLCBjYXVzZXMgcmlvdC4gMjEgd291bmRlZCwgNSBkZWFkOyBtYXlvciBzdGlsbCBtaXNzaW5nLiIsDQogICAgICAgICAgICAgICAgIk53cyA6IGt5IGJ0d24gVyBhbmQgUiBicm9rbiwgcGxhcyBzbmQgbncgdHlwd3JpdHIgQVNBUC4iLA0KICAgICAgICAgICAgICAgICdOZWVlZWV3cyA6ICJuZWVlZXcgRUVFRUVFIGtlZWVlZXkgd29ya2luZyBmaW5lZWVlZWVlZWUiLCByZWVlcG9ydHMgZ2xlZWVlZWVlZWZ1bCBqb3VybmFsaXN0LicsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBjb29raWVzIG5vdyBpbGxlZ2FsIGluIHNvbWUgYmFja3dhcmRzIGNvdW50cnkgbm9ib2R5IGNhcmVzIGFib3V0LiBQb2xpdGljYWwgdGVuc2lvbnMgcmlzaW5nOyB3YXIgc29vbiwgaG9wZWZ1bGx5LiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBpcmF0ZSByYWRpbyBob3N0IHJhbWJsZXMgYWJvdXQgcGl4ZWxhdGVkIGljb25zLiBcIk5vbmUgb2YgdGhlIGNvb2tpZXMgYXJlIGFsaWduZWQhIENhbid0IGFueW9uZSBlbHNlIHNlZSBpdD8gSSBmZWVsIGxpa2UgSSdtIHRha2luZyBjcmF6eSBwaWxscyFcIiIsDQogICAgICAgICAgICAgICAgIk5ld3MgOiBuYXRpb24gY2hlZXJzIGFzIGxlZ2lzbGF0b3JzIGZpbmFsbHkgb3V0bGF3ICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgImNvb2tpZSBjcml0aWNpc20iLA0KICAgICAgICAgICAgICAgICAgICAicGxheWluZyBvdGhlciBnYW1lcyB0aGFuIENvb2tpZSBDbGlja2VyIiwNCiAgICAgICAgICAgICAgICAgICAgInBpbmVhcHBsZSBvbiBwaXp6YSIsDQogICAgICAgICAgICAgICAgICAgICJsYWNrIG9mIGNoZWVyZnVsbmVzcyIsDQogICAgICAgICAgICAgICAgICAgICJtb3NxdWl0b2VzIiwNCiAgICAgICAgICAgICAgICAgICAgImJyb2Njb2xpIiwNCiAgICAgICAgICAgICAgICAgICAgInRoZSBodW1hbiBzcGxlZW4iLA0KICAgICAgICAgICAgICAgICAgICAiYmFkIHdlYXRoZXIiLA0KICAgICAgICAgICAgICAgICAgICAiY2xpY2tiYWl0IiwNCiAgICAgICAgICAgICAgICAgICAgImRhYmJpbmciLA0KICAgICAgICAgICAgICAgICAgICAidGhlIGludGVybmV0IiwNCiAgICAgICAgICAgICAgICAgICAgIm1lbWVzIiwNCiAgICAgICAgICAgICAgICAgICAgIm1pbGxlbm5pYWxzIiwNCiAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICIhIiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6ICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsibG9jYWwiLCAiYXJlYSJdKSArDQogICAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsibWFuIiwgIndvbWFuIl0pICsNCiAgICAgICAgICAgICAgICAgICcgZ29lcyBvbiBqb3VybmV5IG9mIGludHJvc3BlY3Rpb24sIGZpbmRzIGNvb2tpZXMgOiAiSSBob25lc3RseSBkb25cJ3Qga25vdyB3aGF0IEkgd2FzIGV4cGVjdGluZy4iJywNCiAgICAgICAgICAgICAgICAiTmV3cyA6ICIgKw0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsibWFuIiwgIndvbWFuIl0pICsNCiAgICAgICAgICAgICAgICAgICIgd2FrZXMgdXAgZnJvbSBjb21hLCAiICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAgICJ0cmllcyBjb29raWUgZm9yIHRoZSBmaXJzdCB0aW1lLCBkaWVzLiIsDQogICAgICAgICAgICAgICAgICAgICJyZWdyZXRzIGl0IGluc3RhbnRseS4iLA0KICAgICAgICAgICAgICAgICAgICAnd29uZGVycyAid2h5IGV2ZXJ5dGhpbmcgaXMgY29va2llcyBub3ciLicsDQogICAgICAgICAgICAgICAgICAgICdiYWJibGVzIGluY29oZXJlbnRseSBhYm91dCBzb21lIHN1cHBvc2VkICJub24tY29va2llIGZvb2QiIHdlIHVzZWQgdG8gZWF0LicsDQogICAgICAgICAgICAgICAgICAgICJjaXRlcyBjb29raWVzIGFzIG1haW4gbW90aXZhdG9yLiIsDQogICAgICAgICAgICAgICAgICAgICJhc2tzIGZvciBjb29raWVzLiIsDQogICAgICAgICAgICAgICAgICBdKSwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHBldCAiICsNCiAgICAgICAgICAgICAgICAgIGNob29zZShhbmltYWxzKSArDQogICAgICAgICAgICAgICAgICAiLCBkYW5nZXJvdXMgZmFkIG9yIGp1aWN5IG5ldyBtYXJrZXQ/IiwNCiAgICAgICAgICAgICAgICAiTmV3cyA6IHBlcnNvbiB0eXBpbmcgdGhlc2Ugd291bGRuJ3QgbWluZCBzb21lb25lIGVsc2UgYnJlYWtpbmcgdGhlIG5ld3MgdG8gVEhFTSwgZm9yIGEgY2hhbmdlLiIsDQogICAgICAgICAgICAgICAgJ05ld3MgOiAiYXZlcmFnZSBwZXJzb24gYmFrZXMgJyArDQogICAgICAgICAgICAgICAgICBCZWF1dGlmeShNYXRoLmNlaWwoR2FtZS5jb29raWVzRWFybmVkIC8gNzMwMDAwMDAwMCkpICsNCiAgICAgICAgICAgICAgICAgICIgY29va2llIiArDQogICAgICAgICAgICAgICAgICAoTWF0aC5jZWlsKEdhbWUuY29va2llc0Vhcm5lZCAvIDczMDAwMDAwMDApID09IDEgPyAiIiA6ICJzIikgKw0KICAgICAgICAgICAgICAgICAgJyBhIHllYXIiIGZhY3RvaWQgYWN0dWFsbHkganVzdCBzdGF0aXN0aWNhbCBlcnJvcjsgJyArDQogICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKw0KICAgICAgICAgICAgICAgICAgIiwgd2hvIGhhcyBwcm9kdWNlZCAiICsNCiAgICAgICAgICAgICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc0Vhcm5lZCkgKw0KICAgICAgICAgICAgICAgICAgIiBjb29raWVzIGluIHRoZWlyIGxpZmV0aW1lLCBpcyBhbiBvdXRsaWVyIGFuZCBzaG91bGQgbm90IGhhdmUgYmVlbiBjb3VudGVkLiIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMCkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJZb3UgZmVlbCBsaWtlIG1ha2luZyBjb29raWVzLiBCdXQgbm9ib2R5IHdhbnRzIHRvIGVhdCB5b3VyIGNvb2tpZXMuIg0KICAgICAgICAgICAgKQ0KICAgICAgICAgICk7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSAxKQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIllvdXIgZmlyc3QgYmF0Y2ggZ29lcyB0byB0aGUgdHJhc2guIFRoZSBuZWlnaGJvcmhvb2QgcmFjY29vbiBiYXJlbHkgdG91Y2hlcyBpdC4iDQogICAgICAgICAgICApDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDIpDQogICAgICAgICAgbGlzdC5wdXNoKGxvYygiWW91ciBmYW1pbHkgYWNjZXB0cyB0byB0cnkgc29tZSBvZiB5b3VyIGNvb2tpZXMuIikpOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMykNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoIllvdXIgY29va2llcyBhcmUgcG9wdWxhciBpbiB0aGUgbmVpZ2hib3Job29kLiIpLA0KICAgICAgICAgICAgbG9jKCJQZW9wbGUgYXJlIHN0YXJ0aW5nIHRvIHRhbGsgYWJvdXQgeW91ciBjb29raWVzLiIpDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDQpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgYXJlIHRhbGtlZCBhYm91dCBmb3IgbWlsZXMgYXJvdW5kLiIpLA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgYXJlIHJlbm93bmVkIGluIHRoZSB3aG9sZSB0b3duISIpDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDUpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgYnJpbmcgYWxsIHRoZSBib3lzIHRvIHRoZSB5YXJkLiIpLA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgbm93IGhhdmUgdGhlaXIgb3duIHdlYnNpdGUhIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gNikNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoIllvdXIgY29va2llcyBhcmUgd29ydGggYSBsb3Qgb2YgbW9uZXkuIiksDQogICAgICAgICAgICBsb2MoIllvdXIgY29va2llcyBzZWxsIHZlcnkgd2VsbCBpbiBkaXN0YW50IGNvdW50cmllcy4iKQ0KICAgICAgICAgICk7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSA3KQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIlBlb3BsZSBjb21lIGZyb20gdmVyeSBmYXIgYXdheSB0byBnZXQgYSB0YXN0ZSBvZiB5b3VyIGNvb2tpZXMuIg0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIktpbmdzIGFuZCBxdWVlbnMgZnJvbSBhbGwgb3ZlciB0aGUgd29ybGQgYXJlIGVuam95aW5nIHlvdXIgY29va2llcy4iDQogICAgICAgICAgICApDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDgpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKCJUaGVyZSBhcmUgbm93IG11c2V1bXMgZGVkaWNhdGVkIHRvIHlvdXIgY29va2llcy4iKSwNCiAgICAgICAgICAgIGxvYygiQSBuYXRpb25hbCBkYXkgaGFzIGJlZW4gY3JlYXRlZCBpbiBob25vciBvZiB5b3VyIGNvb2tpZXMuIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gOSkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoIllvdXIgY29va2llcyBoYXZlIGJlZW4gbmFtZWQgYSBwYXJ0IG9mIHRoZSB3b3JsZCB3b25kZXJzLiIpLA0KICAgICAgICAgICAgbG9jKCJIaXN0b3J5IGJvb2tzIG5vdyBpbmNsdWRlIGEgd2hvbGUgY2hhcHRlciBhYm91dCB5b3VyIGNvb2tpZXMuIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTApDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgaGF2ZSBiZWVuIHBsYWNlZCB1bmRlciBnb3Zlcm5tZW50IHN1cnZlaWxsYW5jZS4iKSwNCiAgICAgICAgICAgIGxvYygiVGhlIHdob2xlIHBsYW5ldCBpcyBlbmpveWluZyB5b3VyIGNvb2tpZXMhIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTEpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiU3RyYW5nZSBjcmVhdHVyZXMgZnJvbSBuZWlnaGJvcmluZyBwbGFuZXRzIHdpc2ggdG8gdHJ5IHlvdXIgY29va2llcy4iDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiRWxkZXIgZ29kcyBmcm9tIHRoZSB3aG9sZSBjb3Ntb3MgaGF2ZSBhd29rZW4gdG8gdGFzdGUgeW91ciBjb29raWVzLiINCiAgICAgICAgICAgICkNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTIpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiQmVpbmdzIGZyb20gb3RoZXIgZGltZW5zaW9ucyBsYXBzZSBpbnRvIGV4aXN0ZW5jZSBqdXN0IHRvIGdldCBhIHRhc3RlIG9mIHlvdXIgY29va2llcy4iDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgbG9jKCJZb3VyIGNvb2tpZXMgaGF2ZSBhY2hpZXZlZCBzZW50aWVuY2UuIikNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTMpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAiVGhlIHVuaXZlcnNlIGhhcyBub3cgdHVybmVkIGludG8gY29va2llIGRvdWdoLCB0byB0aGUgbW9sZWN1bGFyIGxldmVsLiINCiAgICAgICAgICAgICksDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJZb3VyIGNvb2tpZXMgYXJlIHJld3JpdGluZyB0aGUgZnVuZGFtZW50YWwgbGF3cyBvZiB0aGUgdW5pdmVyc2UuIg0KICAgICAgICAgICAgKQ0KICAgICAgICAgICk7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSAxNCkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJBIGxvY2FsIG5ld3Mgc3RhdGlvbiBydW5zIGEgMTAtbWludXRlIHNlZ21lbnQgYWJvdXQgeW91ciBjb29raWVzLiBTdWNjZXNzITxicj48c21hbGw+KHlvdSB3aW4gYSBjb29raWUpPC9zbWFsbD4iDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgbG9jKCJpdCdzIHRpbWUgdG8gc3RvcCBwbGF5aW5nIikNCiAgICAgICAgICApOw0KICAgICAgfQ0KDQogICAgICAvL2lmIChHYW1lLmVsZGVyV3JhdGg+MCAmJiAoR2FtZS5wbGVkZ2VzPT0wIHx8IE1hdGgucmFuZG9tKCk8MC4yKSkNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5lbGRlcldyYXRoID4gMCAmJg0KICAgICAgICAoKEdhbWUucGxlZGdlcyA9PSAwICYmIEdhbWUucmVzZXRzID09IDAgJiYgTWF0aC5yYW5kb20oKSA8IDAuMykgfHwNCiAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC4wMykNCiAgICAgICkgew0KICAgICAgICBsaXN0ID0gW107DQogICAgICAgIGlmIChHYW1lLmVsZGVyV3JhdGggPT0gMSkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICBFTg0KICAgICAgICAgICAgICA/IGNob29zZShbDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG1pbGxpb25zIG9mIG9sZCBsYWRpZXMgcmVwb3J0ZWQgbWlzc2luZyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBwcm9jZXNzaW9ucyBvZiBvbGQgbGFkaWVzIHNpZ2h0ZWQgYXJvdW5kIGNvb2tpZSBmYWNpbGl0aWVzISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGZhbWlsaWVzIGFyb3VuZCB0aGUgY29udGluZW50IHJlcG9ydCBhZ2l0YXRlZCwgdHJhbnNmaXhlZCBncmFuZG1vdGhlcnMhIiwNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogZG9jdG9ycyBzd2FybWVkIGJ5IGNhc2VzIG9mIG9sZCB3b21lbiB3aXRoIGdsYXNzeSBleWVzIGFuZCBhIGZvYW15IG1vdXRoISIsDQogICAgICAgICAgICAgICAgICAnTmV3cyA6IG51cnNlcyByZXBvcnQgInN0cmFuZ2Ugc2NlbnQgb2YgY29va2llIGRvdWdoIiBhcm91bmQgZmVtYWxlIGVsZGVybHkgcGF0aWVudHMhJywNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICA6IE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKGdyYW5kbWEgaW52YXNpb24gc3RhcnQpIikpDQogICAgICAgICAgKTsNCiAgICAgICAgaWYgKEdhbWUuZWxkZXJXcmF0aCA9PSAyKQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgIEVODQogICAgICAgICAgICAgID8gY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogdG93biBpbiBkaXNhcnJheSBhcyBzdHJhbmdlIG9sZCBsYWRpZXMgYnJlYWsgaW50byBob21lcyB0byBhYmR1Y3QgaW5mYW50cyBhbmQgYmFraW5nIHV0ZW5zaWxzISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IHNpZ2h0aW5ncyBvZiBvbGQgbGFkaWVzIHdpdGggZ2xvd2luZyBleWVzIHRlcnJpZnkgbG9jYWwgcG9wdWxhdGlvbiEiLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiByZXRpcmVtZW50IGhvbWVzIHJlcG9ydCAiZmVtYWxlIHJlc2lkZW50cyBzbG93bHkgY29uZ2VhbGluZyBpbiB0aGVpciBzZWF0cyIhJywNCiAgICAgICAgICAgICAgICAgICJOZXdzIDogd2hvbGUgY29udGluZW50IHVuZGVyZ29pbmcgbWFzcyBleG9kdXMgb2Ygb2xkIGxhZGllcyEiLA0KICAgICAgICAgICAgICAgICAgIk5ld3MgOiBvbGQgd29tZW4gZnJlZXplIGluIHBsYWNlIGluIHN0cmVldHMsIG9vemUgd2FybSBzdWdhcnkgc3lydXAhIiwNCiAgICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgICA6IE5FV1MgKyBjaG9vc2UobG9jKCJUaWNrZXIgKGdyYW5kbWEgaW52YXNpb24gcmlzZSkiKSkNCiAgICAgICAgICApOw0KICAgICAgICBpZiAoR2FtZS5lbGRlcldyYXRoID09IDMpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgRU4NCiAgICAgICAgICAgICAgPyBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiBsYXJnZSAiZmxlc2ggaGlnaHdheXMiIHNjYXIgY29udGluZW50LCBzdHJldGNoIGJldHdlZW4gdmFyaW91cyBjb29raWUgZmFjaWxpdGllcyEnLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiB3cmlua2xlZCAiZmxlc2ggdGVuZHJpbHMiIHZpc2libGUgZnJvbSBzcGFjZSEnLA0KICAgICAgICAgICAgICAgICAgJ05ld3MgOiByZW1haW5zIG9mICJvbGQgbGFkaWVzIiBmb3VuZCBmcm96ZW4gaW4gdGhlIG1pZGRsZSBvZiBncm93aW5nIGZsZXNoeSBzdHJ1Y3R1cmVzIScsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IGFsbCBob3BlIGxvc3QgYXMgd3JpdGhpbmcgbWFzcyBvZiBmbGVzaCBhbmQgZG91Z2ggZW5ndWxmcyB3aG9sZSBjaXR5ISIsDQogICAgICAgICAgICAgICAgICAiTmV3cyA6IG5pZ2h0bWFyZSBjb250aW51ZXMgYXMgd3JpbmtsZWQgYWNyZXMgb2YgZmxlc2ggZXhwYW5kIGF0IGFsYXJtaW5nIHNwZWVkcyEiLA0KICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgIDogTkVXUyArIGNob29zZShsb2MoIlRpY2tlciAoZ3JhbmRtYSBpbnZhc2lvbiBmdWxsKSIpKQ0KICAgICAgICAgICk7DQogICAgICB9DQoNCiAgICAgIGlmIChFTiAmJiBHYW1lLnNlYXNvbiA9PSAiZm9vbHMiKSB7DQogICAgICAgIGxpc3QgPSBbXTsNCg0KICAgICAgICBpZiAoR2FtZS5jb29raWVzRWFybmVkID49IDEwMDApDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBvZmZpY2UgY2hhaXIgaXMgcmVhbGx5IGNvbWZvcnRhYmxlLiIsDQogICAgICAgICAgICAgICAgIlByb2ZpdCdzIGluIHRoZSBhaXIhIiwNCiAgICAgICAgICAgICAgICAiQnVzaW5lc3MgbWVldGluZ3MgYXJlIHN1Y2ggYSBqb3khIiwNCiAgICAgICAgICAgICAgICAiV2hhdCBhIGdyZWF0IHZpZXcgZnJvbSB5b3VyIG9mZmljZSEiLA0KICAgICAgICAgICAgICAgICJTbWVsbCB0aGF0PyBUaGF0J3MgY2FwaXRhbGlzbSwgYmFieSEiLA0KICAgICAgICAgICAgICAgICJZb3UgdHJ1bHkgbG92ZSBhbnN3ZXJpbmcgZW1haWxzLiIsDQogICAgICAgICAgICAgICAgIldvcmtpbmcgaGFyZCwgb3IgaGFyZGx5IHdvcmtpbmc/IiwNCiAgICAgICAgICAgICAgICAiQW5vdGhlciBkYXkgaW4gcGFyYWRpc2UhIiwNCiAgICAgICAgICAgICAgICAiRXhwZW5zaXZlIGx1bmNoIHRpbWUhIiwNCiAgICAgICAgICAgICAgICAiQW5vdGhlciBnb3Zlcm5tZW50IGJhaWxvdXQgY29taW5nIHVwISBTcGxlbmRpZCEiLA0KICAgICAgICAgICAgICAgICJUaGVzZSBwcm9maXRzIGFyZSBkb2luZyB3b25kZXJmdWwgdGhpbmdzIGZvciB5b3VyIHNraW4uIiwNCiAgICAgICAgICAgICAgICAiWW91IGRheWRyZWFtIGZvciBhIG1vbWVudCBhYm91dCBhIHdvcmxkIHdpdGhvdXQgdGF4ZXMuIiwNCiAgICAgICAgICAgICAgICAiWW91J2xsIHdvcnJ5IGFib3V0IGVudmlyb25tZW50YWwgZGFtYWdlIHdoZW4geW91J3JlIGRlYWQhIiwNCiAgICAgICAgICAgICAgICAiWWF5LCBvZmZpY2Ugc3VwcGxpZXMhIiwNCiAgICAgICAgICAgICAgICAiU3dlZXQsIHRob3NlIG5ldyBzdGFwbGVycyBqdXN0IGNhbWUgaW4hIiwNCiAgICAgICAgICAgICAgICAiT2hoLCBjb2ZmZWUgYnJlYWshIiwNCiAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIllvdSd2ZSBzcGVudCB0aGUgd2hvbGUgZGF5IiwNCiAgICAgICAgICAgICAgICAiQW5vdGhlciBncmVhdCBkYXkiLA0KICAgICAgICAgICAgICAgICJGaXJzdCBvcmRlciBvZiBidXNpbmVzcyB0b2RheToiLA0KICAgICAgICAgICAgICAgICJXaHksIHlvdSB0cnVseSBlbmpveSIsDQogICAgICAgICAgICAgICAgIldoYXQgbmV4dD8gVGhhdCdzIHJpZ2h0LCIsDQogICAgICAgICAgICAgICAgIllvdSBjaGVjayB3aGF0J3MgbmV4dCBvbiB0aGUgYWdlbmRhLiBPaCBib3ksIiwNCiAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICJzaWduaW5nIGNvbnRyYWN0cyIsDQogICAgICAgICAgICAgICAgICAiZmlsbGluZyBvdXQgZm9ybXMiLA0KICAgICAgICAgICAgICAgICAgInRvdWNoaW5nIGJhc2Ugd2l0aCB0aGUgdGVhbSIsDQogICAgICAgICAgICAgICAgICAiZXhhbWluaW5nIGV4Y2l0aW5nIG5ldyBwcm9zcGVjdHMiLA0KICAgICAgICAgICAgICAgICAgInBsYXlpbmcgd2l0aCB5b3VyIGRlc2sgdG95cyIsDQogICAgICAgICAgICAgICAgICAiZ2V0dGluZyBuZXcgbmFtZXBsYXRlcyBkb25lIiwNCiAgICAgICAgICAgICAgICAgICJhdHRlbmRpbmcgc2VtaW5hcnMiLA0KICAgICAgICAgICAgICAgICAgInZpZGVvY29uZmVyZW5jaW5nIiwNCiAgICAgICAgICAgICAgICAgICJoaXJpbmcgZHluYW1pYyB5b3VuZyBleGVjdXRpdmVzIiwNCiAgICAgICAgICAgICAgICAgICJtZWV0aW5nIG5ldyBpbnZlc3RvcnMiLA0KICAgICAgICAgICAgICAgICAgInVwZGF0aW5nIHlvdXIgcm9sb2RleCIsDQogICAgICAgICAgICAgICAgICAicHVtcGluZyB1cCB0aG9zZSBudW1iZXJzIiwNCiAgICAgICAgICAgICAgICAgICJwdW5jaGluZyBpbiBzb21lIG51bWJlcnMiLA0KICAgICAgICAgICAgICAgICAgImdldHRpbmcgaW52ZXN0aWdhdGVkIGZvciB3b3JrZXJzJyByaWdodHMgdmlvbGF0aW9ucyIsDQogICAgICAgICAgICAgICAgICAicmVvcmdhbml6aW5nIGRvY3VtZW50cyIsDQogICAgICAgICAgICAgICAgICAiYmVsaXR0bGluZyB1bmRlcmxpbmdzIiwNCiAgICAgICAgICAgICAgICAgICJyZXZpZXdpbmcgZW1wbG95ZWUgcGVyZm9ybWFuY2UiLA0KICAgICAgICAgICAgICAgICAgInJldmlzaW5nIGNvbXBhbnkgcG9saWNpZXMiLA0KICAgICAgICAgICAgICAgICAgImRvd25zaXppbmciLA0KICAgICAgICAgICAgICAgICAgInB1bGxpbmcgeW91cnNlbGYgdXAgYnkgeW91ciBib290c3RyYXBzIiwNCiAgICAgICAgICAgICAgICAgICJhZGp1c3RpbmcgeW91ciB0aWUiLA0KICAgICAgICAgICAgICAgICAgInBlcmZvcm1pbmcgdG90YWxseSBub3JtYWwgaHVtYW4gYWN0aXZpdGllcyIsDQogICAgICAgICAgICAgICAgICAicmVjZW50ZXJpbmcgeW91cnNlbGYgaW4gdGhlIHNjcmVhbSByb29tIiwNCiAgICAgICAgICAgICAgICAgICJpbW1hbmVudGl6aW5nIHRoZSBlc2NoYXRvbiIsDQogICAgICAgICAgICAgICAgICAic2hyZWRkaW5nIHNvbWUgc2Vuc2l0aXZlIGRvY3VtZW50cyIsDQogICAgICAgICAgICAgICAgICAiY29tcGFyaW5nIGJ1c2luZXNzIGNhcmRzIiwNCiAgICAgICAgICAgICAgICAgICJwb25kZXJpbmcgdGhlIG1lYW5pbmcgb2YgeW91ciBleGlzdGVuY2UiLA0KICAgICAgICAgICAgICAgICAgImxpc3RlbmluZyB0byB0aGUgcm9hcmluZyBlbXB0aW5lc3MgaW5zaWRlIHlvdXIgc291bCIsDQogICAgICAgICAgICAgICAgICAicGxheWluZyBtaW5pZ29sZiBpbiB5b3VyIG9mZmljZSIsDQogICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICIhIiwNCiAgICAgICAgICAgICAgIlRoZSB3b3JkIG9mIHRoZSBkYXkgaXM6ICIgKw0KICAgICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgICAidmlyYWwiLA0KICAgICAgICAgICAgICAgICAgInNlYXJjaCBlbmdpbmUgb3B0aW1pemF0aW9uIiwNCiAgICAgICAgICAgICAgICAgICJibGFncyBhbmQgd29ic2l0ZXMiLA0KICAgICAgICAgICAgICAgICAgInNvY2lhbCBuZXR3b3JrcyIsDQogICAgICAgICAgICAgICAgICAid2ViaW5ldHRlIiwNCiAgICAgICAgICAgICAgICAgICJzdGF5Y2F0aW9uIiwNCiAgICAgICAgICAgICAgICAgICJ1c2VyIGV4cGVyaWVuY2UiLA0KICAgICAgICAgICAgICAgICAgImNyb3dkZnVuZGluZyIsDQogICAgICAgICAgICAgICAgICAiY2FyYm9uIG5ldXRyYWwiLA0KICAgICAgICAgICAgICAgICAgImJpZyBkYXRhIiwNCiAgICAgICAgICAgICAgICAgICJtYWNoaW5lIGxlYXJuaW5nIiwNCiAgICAgICAgICAgICAgICAgICJkaXNydXB0aW5nIiwNCiAgICAgICAgICAgICAgICAgICJpbmZsdWVuY2VycyIsDQogICAgICAgICAgICAgICAgICAibW9ub2NvbnNlbnN1YWwgdHJhbnNhY3Rpb25zIiwNCiAgICAgICAgICAgICAgICAgICJzdXN0YWluYWJsZSIsDQogICAgICAgICAgICAgICAgICAiZnJlZW1pdW0iLA0KICAgICAgICAgICAgICAgICAgImluY2VudGl2ZXMiLA0KICAgICAgICAgICAgICAgICAgImdyYXNzcm9vdHMiLA0KICAgICAgICAgICAgICAgICAgIndlYiAzLjAiIC8qdGhpcyB3YXMgYmVmb3JlIHRoaXMgd2hvbGUgY3J5cHRvIG1lc3MgaSdtIHNvIHNvcnJ5Ki8sDQogICAgICAgICAgICAgICAgICAibG9naXN0aWNzIiwNCiAgICAgICAgICAgICAgICAgICJsZXZlcmFnaW5nIiwNCiAgICAgICAgICAgICAgICAgICJicmFuZGluZyIsDQogICAgICAgICAgICAgICAgICAicHJvYWN0aXZlIiwNCiAgICAgICAgICAgICAgICAgICJzeW5lcmdpemluZyIsDQogICAgICAgICAgICAgICAgICAibWFya2V0IHJlc2VhcmNoIiwNCiAgICAgICAgICAgICAgICAgICJkZW1vZ3JhcGhpY3MiLA0KICAgICAgICAgICAgICAgICAgInBpZSBjaGFydHMiLA0KICAgICAgICAgICAgICAgICAgImJsb2d1bGFyIiwNCiAgICAgICAgICAgICAgICAgICJibG9ndWxhY2lvdXMiLA0KICAgICAgICAgICAgICAgICAgImJsb2dhc3RpYyIsDQogICAgICAgICAgICAgICAgICAiYXV0aGVudGljaXR5IiwNCiAgICAgICAgICAgICAgICAgICJwbGFzdGljcyIsDQogICAgICAgICAgICAgICAgICAiZWxlY3Ryb25pYyBtYWlsIiwNCiAgICAgICAgICAgICAgICAgICJjZWxsdWxhciBwaG9uZXMiLA0KICAgICAgICAgICAgICAgICAgInJhcCBtdXNpYyIsDQogICAgICAgICAgICAgICAgICAiYnVsYnMiLA0KICAgICAgICAgICAgICAgICAgImdvYmxpbml6YXRpb24iLA0KICAgICAgICAgICAgICAgICAgInN0cmFpZ2h0LXRvLWJha2VyeSIsDQogICAgICAgICAgICAgICAgICAibWljcm9iYWtlcmllcyIsDQogICAgICAgICAgICAgICAgICAiY2hvY29sYXRpdml0eSIsDQogICAgICAgICAgICAgICAgICAiZmxhdm9yZnVsbmVzcyIsDQogICAgICAgICAgICAgICAgICAidGFzdHlmaWNhdGlvbiIsDQogICAgICAgICAgICAgICAgICAic3VnYXIgb2Zmc2V0cyIsDQogICAgICAgICAgICAgICAgICAiYWN0aXZhdGVkIHdoZWF0IiwNCiAgICAgICAgICAgICAgICAgICJyZWlmaWNhdGlvbiIsDQogICAgICAgICAgICAgICAgICAiaW1tYW5lbnRpemUgdGhlIGVzY2hhdG9uIiwNCiAgICAgICAgICAgICAgICAgICJjb29raWVzLCBJIGd1ZXNzIiwNCiAgICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICAgIi4iLA0KICAgICAgICAgICAgXSkNCiAgICAgICAgICApOw0KICAgICAgICBpZiAoR2FtZS5jb29raWVzRWFybmVkID49IDEwMDAgJiYgTWF0aC5yYW5kb20oKSA8IDAuMDUpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgIklmIHlvdSBjb3VsZCBnZXQgc29tZSBtb3JlIGNvb2tpZXMgYmFrZWQsIHRoYXQnZCBiZSBncmVhdC4iLA0KICAgICAgICAgICAgICAiU28uIEFib3V0IHRob3NlIFRQUyByZXBvcnRzLiIsDQogICAgICAgICAgICAgICJIbW0sIHlvdSd2ZSBnb3Qgc29tZSB2aWRlbyB0YXBlcyB0byByZXR1cm4uIiwNCiAgICAgICAgICAgICAgIlRoZXknbGwgcGF5LiBUaGV5J2xsIGFsbCBwYXkuIiwNCiAgICAgICAgICAgICAgIllvdSBoYXZlbid0IGV2ZW4gYmVndW4gdG8gcGVhay4iLA0KICAgICAgICAgICAgICAiVGhlcmUgaXMgYW4gaWRlYSBvZiBhICIgKw0KICAgICAgICAgICAgICAgIEdhbWUuYmFrZXJ5TmFtZSArDQogICAgICAgICAgICAgICAgIi4gU29tZSBraW5kIG9mIGFic3RyYWN0aW9uLiBCdXQgdGhlcmUgaXMgbm8gcmVhbCB5b3UsIG9ubHkgYW4gZW50aXR5LiBTb21ldGhpbmcgaWxsdXNvcnkuIiwNCiAgICAgICAgICAgICAgIlRoaXMgd2FzIGEgdGVycmlibGUgaWRlYSEiLA0KICAgICAgICAgICAgXSkNCiAgICAgICAgICApOw0KDQogICAgICAgIGlmIChHYW1lLlRpY2tlck4gJSAyID09IDApIHsNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciByb2xsaW5nIHBpbnMgYXJlIHJvbGxpbmcgYW5kIHBpbm5pbmchIiwNCiAgICAgICAgICAgICAgICAiUHJvZHVjdGlvbiBpcyBzdGVhZHkhIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBvdmVucyBhcmUgZGlsaWdlbnRseSBiYWtpbmcgbW9yZSBhbmQgbW9yZSBjb29raWVzLiIsDQogICAgICAgICAgICAgICAgIllvdXIgb3ZlbnMgYnVybiBhIHdob2xlIGJhdGNoLiBBaCB3ZWxsISBTdGlsbCBnb29kLiIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRmFybSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIlNjb3JlcyBvZiBjb29raWVzIGNvbWUgb3V0IG9mIHlvdXIga2l0Y2hlbnMuIiwNCiAgICAgICAgICAgICAgICAiVG9kYXksIG5ldyByZWNydWl0cyBhcmUgam9pbmluZyB5b3VyIGtpdGNoZW5zISIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRmFjdG9yeSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIllvdXIgZmFjdG9yaWVzIGFyZSBwcm9kdWNpbmcgYW4gdW5lbmRpbmcgc3RyZWFtIG9mIGJha2VkIGdvb2RzLiIsDQogICAgICAgICAgICAgICAgIllvdXIgZmFjdG9yeSB3b3JrZXJzIGRlY2lkZSB0byBnbyBvbiBzdHJpa2UhIiwNCiAgICAgICAgICAgICAgICAiSXQncyBzYWZldHkgaW5zcGVjdGlvbiBkYXkgaW4geW91ciBmYWN0b3JpZXMuIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJNaW5lIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBzZWNyZXQgcmVjaXBlcyBhcmUga2VwdCBzYWZlbHkgaW5zaWRlIGEgZ2lhbnQgdW5kZXJncm91bmQgdmF1bHQuIiwNCiAgICAgICAgICAgICAgICAiWW91ciBjaGVmcyBhcmUgd29ya2luZyBvbiBuZXcgc2VjcmV0IHJlY2lwZXMhIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJTaGlwbWVudCJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIllvdXIgc3VwZXJtYXJrZXRzIGFyZSBidXN0bGluZyB3aXRoIGhhcHB5LCBodW5ncnkgY3VzdG9tZXJzLiIsDQogICAgICAgICAgICAgICAgIllvdXIgc3VwZXJtYXJrZXRzIGFyZSBmdWxsIG9mIGNvb2tpZSBtZXJjaCEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkFsY2hlbXkgbGFiIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiSXQncyBhIG5ldyB0cmFkaW5nIGRheSBhdCB0aGUgc3RvY2sgZXhjaGFuZ2UsIGFuZCB0cmFkZXJzIGNhbid0IGdldCBlbm91Z2ggb2YgeW91ciBzaGFyZXMhIiwNCiAgICAgICAgICAgICAgICAiWW91ciBzdG9jayBpcyBkb3VibGluZyBpbiB2YWx1ZSBieSB0aGUgbWludXRlISIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siUG9ydGFsIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91IGp1c3QgcmVsZWFzZWQgYSBuZXcgVFYgc2hvdyBlcGlzb2RlISIsDQogICAgICAgICAgICAgICAgIllvdXIgY29va2llLXRoZW1lZCBUViBzaG93IGlzIGJlaW5nIGFkYXB0ZWQgaW50byBhIG5ldyBtb3ZpZSEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIlRpbWUgbWFjaGluZSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIllvdXIgdGhlbWUgcGFya3MgYXJlIGRvaW5nIHdlbGwgLSBwdWRkbGVzIG9mIHZvbWl0IGFuZCByb2xsZXItY29hc3RlciBjYXN1YWx0aWVzIGFyZSBiZWluZyBzd2VwdCB1bmRlciB0aGUgcnVnISIsDQogICAgICAgICAgICAgICAgIlZpc2l0b3JzIGFyZSBzdHVmZmluZyB0aGVtc2VsdmVzIHdpdGggY29va2llcyBiZWZvcmUgcmlkaW5nIHlvdXIgcm9sbGVyLWNvYXN0ZXJzLiBZb3UgbWlnaHQgd2FudCB0byBoaXJlIG1vcmUgY2xlYW4tdXAgY3Jld3MuIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzWyJBbnRpbWF0dGVyIGNvbmRlbnNlciJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIkNvb2tpZWNvaW4gaXMgb2ZmaWNpYWxseSB0aGUgbW9zdCBtaW5lZCBkaWdpdGFsIGN1cnJlbmN5IGluIHRoZSBoaXN0b3J5IG9mIG1hbmtpbmQhIiwNCiAgICAgICAgICAgICAgICAiQ29va2llY29pbiBwaXJhY3kgaXMgcmFtcGFudCEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIlByaXNtIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBjb3Jwb3JhdGUgbmF0aW9ucyBqdXN0IGdhaW5lZCBhIG5ldyBwYXJsaWFtZW50ISIsDQogICAgICAgICAgICAgICAgIllvdSd2ZSBqdXN0IGFubmV4ZWQgYSBuZXcgbmF0aW9uISIsDQogICAgICAgICAgICAgICAgIkEgbmV3IG5hdGlvbiBqb2lucyB0aGUgZ3JhbmQgY29va2llIGNvbmdsb21lcmF0ZSEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkNoYW5jZW1ha2VyIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiWW91ciBpbnRlcmdhbGFjdGljIGZlZGVyYXRpb24gb2YgY29va2llLXNwb25zb3JlZCBwbGFuZXRzIHJlcG9ydHMgcmVjb3JkLWJyZWFraW5nIHByb2ZpdHMhIiwNCiAgICAgICAgICAgICAgICAiQmlsbGlvbnMgb2YgdW53YXNoZWQgYWxpZW5zIGFyZSBwbGVhc2VkIHRvIGpvaW4geW91ciB3b3JrZm9yY2UgYXMgeW91IGFubmV4IHRoZWlyIHBsYW5ldCEiLA0KICAgICAgICAgICAgICAgICJOZXcgdG9sbCBvcGVuZWQgb24gaW50ZXJzdGVsbGFyIGhpZ2h3YXksIGZ1bm5lbGxpbmcgbW9yZSBwcm9maXRzIGludG8gdGhlIGNvb2tpZSBlY29ub215ISIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siRnJhY3RhbCBlbmdpbmUiXS5hbW91bnQgPiAwKQ0KICAgICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgICBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICJZb3VyIGNvb2tpZS1iYXNlZCBwb2xpdGljYWwgcGFydHkgaXMgZG9pbmcgZmFudGFzdGljIGluIHRoZSBwb2xscyEiLA0KICAgICAgICAgICAgICAgICJOZXcgcHJvLWNvb2tpZSBsYXcgcGFzc2VzIHdpdGhvdXQgYSBoaXRjaCB0aGFua3MgdG8geW91ciBmaXJtIGdyYXNwIG9mIHRoZSBwb2xpdGljYWwgZWNvc3lzdGVtISIsDQogICAgICAgICAgICAgICAgIllvdXIgYXBwb2ludGVkIHNlbmF0b3JzIGFyZSBvdmVydHVybmluZyBjb29raWUgYmFucyBsZWZ0IGFuZCByaWdodCEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkphdmFzY3JpcHQgY29uc29sZSJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIkNvb2tpZXMgYXJlIG5vdyBvbmUgb2YgdGhlIGRlZmluaW5nIGFzcGVjdHMgb2YgbWFua2luZCEgQ29uZ3JhdHVsYXRpb25zISIsDQogICAgICAgICAgICAgICAgIlRpbWUgdHJhdmVsZXJzIHJlcG9ydCB0aGF0IHRoaXMgZXJhIHdpbGwgbGF0ZXIgY29tZSB0byBiZSBrbm93biwgdGhhbmtzIHRvIHlvdSwgYXMgdGhlIGNvb2tpZSBtaWxsZW5uaXVtISIsDQogICAgICAgICAgICAgICAgIkNvb2tpZXMgbm93IGRlZXBseSByb290ZWQgaW4gaHVtYW4gY3VsdHVyZSwgbGlrZWx5IHB1enpsaW5nIGZ1dHVyZSBoaXN0b3JpYW5zISIsDQogICAgICAgICAgICAgIF0pDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1siSWRsZXZlcnNlIl0uYW1vdW50ID4gMCkNCiAgICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAiUHVibGljIGFnaGFzdCBhcyBhbGwgcmVtYWluaW5nIGFzcGVjdHMgb2YgdGhlaXIgbGl2ZXMgb3ZlcnRha2VuIGJ5IHVuaXZlcnNhbCBjb29raWUgaW5kdXN0cnkhIiwNCiAgICAgICAgICAgICAgICAiRXZlcnkgc2luZ2xlIHByb2R1Y3QgY3VycmVudGx5IHNvbGQgaW4gdGhlIG9ic2VydmFibGUgdW5pdmVyc2UgY2FuIGJlIHRyYWNlZCBiYWNrIHRvIHlvdXIgY29tcGFueSEgQW5kIHRoYXQncyBhIGdvb2QgdGhpbmcuIiwNCiAgICAgICAgICAgICAgICAiQW50aXRydXN0IGxhd3MgbGV0IG91dCBhIGhlbHBsZXNzIHdoaW1wZXIgYmVmb3JlIGJlaW5nIGVuZ3VsZmVkIGJ5IHlvdXIgc3ByYXdsaW5nIGVtcGlyZSEiLA0KICAgICAgICAgICAgICBdKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbIkNvcnRleCBiYWtlciJdLmFtb3VudCA+IDApDQogICAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICAgICAgIkJvbGQgbmV3IGxhdyBwcm9wb3NhbCB3b3VsZCBncmFudCBkZWZhdWx0IG93bmVyc2hpcCBvZiBldmVyeSBuZXcgaWRlYSBieSBhbnlvbmUgYW55d2hlcmUgdG8gIiArDQogICAgICAgICAgICAgICAgICBHYW1lLmJha2VyeU5hbWUgKw0KICAgICAgICAgICAgICAgICAgIidzIGJha2VyeSEiLA0KICAgICAgICAgICAgICAgICJCYWtlcnkgdGhpbmsgdGFua3MgYWNjaWRlbnRhbGx5IHJlaW52ZW50IGNvb2tpZXMgZm9yIHRoZSA1N3RoIHRpbWUgdGhpcyB3ZWVrISIsDQogICAgICAgICAgICAgICAgIkJha2VyeSB0aGluayB0YW5rcyBpbnZlbnQgZW50aXJlIG5ldyBmb3JtIG9mIGh1bWFuIGNvbW11bmljYXRpb24gdG8gYWR2ZXJ0aXNlIGFuZCBib29zdCBjb29raWUgc2FsZXMhIiwNCiAgICAgICAgICAgICAgXSkNCiAgICAgICAgICAgICk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAobG9yZVByb2dyZXNzIDw9IDApDQogICAgICAgICAgbGlzdC5wdXNoKCJTdWNoIGEgZ3JhbmQgZGF5IHRvIGJlZ2luIGEgbmV3IGJ1c2luZXNzLiIpOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMSkgbGlzdC5wdXNoKCJZb3UncmUgYmFraW5nIHVwIGEgc3Rvcm0hIik7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSAyKQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICJZb3UgYXJlIGNvbmZpZGVudCB0aGF0IG9uZSBkYXksIHlvdXIgY29va2llIGNvbXBhbnkgd2lsbCBiZSB0aGUgZ3JlYXRlc3Qgb24gdGhlIG1hcmtldCEiDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDMpIGxpc3QucHVzaCgiQnVzaW5lc3MgaXMgcGlja2luZyB1cCEiKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDQpDQogICAgICAgICAgbGlzdC5wdXNoKCJZb3UncmUgbWFraW5nIHNhbGVzIGxlZnQgYW5kIHJpZ2h0ISIpOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gNSkNCiAgICAgICAgICBsaXN0LnB1c2goIkV2ZXJ5b25lIHdhbnRzIHRvIGJ1eSB5b3VyIGNvb2tpZXMhIik7DQogICAgICAgIGVsc2UgaWYgKGxvcmVQcm9ncmVzcyA8PSA2KQ0KICAgICAgICAgIGxpc3QucHVzaCgiWW91IGFyZSBub3cgc3BlbmRpbmcgbW9zdCBvZiB5b3VyIGRheSBzaWduaW5nIGNvbnRyYWN0cyEiKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDcpDQogICAgICAgICAgbGlzdC5wdXNoKCdZb3VcJ3ZlIGJlZW4gZWxlY3RlZCAiYnVzaW5lc3MgdHljb29uIG9mIHRoZSB5ZWFyIiEnKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDgpDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgIllvdXIgY29va2llcyBhcmUgYSB3b3JsZHdpZGUgc2Vuc2F0aW9uISBXZWxsIGRvbmUsIG9sZCBjaGFwISINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gOSkNCiAgICAgICAgICBsaXN0LnB1c2goDQogICAgICAgICAgICAiWW91ciBicmFuZCBoYXMgbWFkZSBpdHMgd2F5IGludG8gcG9wdWxhciBjdWx0dXJlLiBDaGlsZHJlbiByZWNpdGUgeW91ciBzbG9nYW5zIGFuZCBhZHVsdHMgcmVtaW5pc2NlIHRoZW0gZm9uZGx5ISINCiAgICAgICAgICApOw0KICAgICAgICBlbHNlIGlmIChsb3JlUHJvZ3Jlc3MgPD0gMTApDQogICAgICAgICAgbGlzdC5wdXNoKA0KICAgICAgICAgICAgIkEgYnVzaW5lc3MgZGF5IGxpa2UgYW55IG90aGVyLiBJdCdzIGdvb2QgdG8gYmUgYXQgdGhlIHRvcCEiDQogICAgICAgICAgKTsNCiAgICAgICAgZWxzZSBpZiAobG9yZVByb2dyZXNzIDw9IDExKQ0KICAgICAgICAgIGxpc3QucHVzaCgNCiAgICAgICAgICAgICJZb3UgbG9vayBiYWNrIG9uIHlvdXIgY2FyZWVyLiBJdCdzIGJlZW4gYSBmYXNjaW5hdGluZyBqb3VybmV5LCBidWlsZGluZyB5b3VyIGJha2luZyBlbXBpcmUgZnJvbSB0aGUgZ3JvdW5kIHVwLiINCiAgICAgICAgICApOw0KICAgICAgfQ0KDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUubW9kSG9va3NbInRpY2tlciJdLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHZhciBhcnIgPSBHYW1lLm1vZEhvb2tzWyJ0aWNrZXIiXVtpXSgpOw0KICAgICAgICBpZiAoYXJyKSBsaXN0ID0gbGlzdC5jb25jYXQoYXJyKTsNCiAgICAgIH0NCg0KICAgICAgR2FtZS5UaWNrZXJFZmZlY3QgPSAwOw0KDQogICAgICBpZiAoDQogICAgICAgICFtYW51YWwgJiYNCiAgICAgICAgR2FtZS5UID4gR2FtZS5mcHMgKiAxMCAmJg0KICAgICAgICBHYW1lLkhhcygiRm9ydHVuZSBjb29raWVzIikgJiYNCiAgICAgICAgTWF0aC5yYW5kb20oKSA8IChHYW1lLkhhc0FjaGlldigiTyBGb3J0dW5hIikgPyAwLjA0IDogMC4wMikNCiAgICAgICkgew0KICAgICAgICB2YXIgZm9ydHVuZXMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlRpZXJzWyJmb3J0dW5lIl0udXBncmFkZXMpIHsNCiAgICAgICAgICB2YXIgaXQgPSBHYW1lLlRpZXJzWyJmb3J0dW5lIl0udXBncmFkZXNbaV07DQogICAgICAgICAgaWYgKCFHYW1lLkhhc1VubG9ja2VkKGl0Lm5hbWUpKSBmb3J0dW5lcy5wdXNoKGl0KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghR2FtZS5mb3J0dW5lR0MpIGZvcnR1bmVzLnB1c2goImZvcnR1bmVHQyIpOw0KICAgICAgICBpZiAoIUdhbWUuZm9ydHVuZUNQUykgZm9ydHVuZXMucHVzaCgiZm9ydHVuZUNQUyIpOw0KDQogICAgICAgIGlmIChmb3J0dW5lcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgbGlzdCA9IFtdOw0KICAgICAgICAgIHZhciBtZSA9IGNob29zZShmb3J0dW5lcyk7DQogICAgICAgICAgR2FtZS5UaWNrZXJFZmZlY3QgPSB7IHR5cGU6ICJmb3J0dW5lIiwgc3ViOiBtZSB9Ow0KDQogICAgICAgICAgaWYgKG1lID09ICJmb3J0dW5lR0MiKQ0KICAgICAgICAgICAgbWUgPSBsb2MoDQogICAgICAgICAgICAgICJUb2RheSBpcyB5b3VyIGx1Y2t5IGRheSEiDQogICAgICAgICAgICApOyAvKjxicj5DbGljayBoZXJlIGZvciBhIGdvbGRlbiBjb29raWUuJzsqLw0KICAgICAgICAgIGVsc2UgaWYgKG1lID09ICJmb3J0dW5lQ1BTIikgew0KICAgICAgICAgICAgTWF0aC5zZWVkcmFuZG9tKEdhbWUuc2VlZCArICItZm9ydHVuZSIpOw0KICAgICAgICAgICAgbWUgPQ0KICAgICAgICAgICAgICBsb2MoIllvdXIgbHVja3kgbnVtYmVycyBhcmU6IikgKw0KICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApICsNCiAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArDQogICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKw0KICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICBNYXRoLmZsb29yKA0KICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAxMDANCiAgICAgICAgICAgICAgKSAvKisnPGJyPkNsaWNrIGhlcmUgdG8gZ2FpbiBvbmUgaG91ciBvZiB5b3VyIENwUy4nKi87DQogICAgICAgICAgICBNYXRoLnNlZWRyYW5kb20oKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKEVOKSB7DQogICAgICAgICAgICAgIG1lID0NCiAgICAgICAgICAgICAgICBtZS5kbmFtZS5zdWJzdHJpbmcobWUubmFtZS5pbmRleE9mKCIjIikpICsNCiAgICAgICAgICAgICAgICAiIDogIiArDQogICAgICAgICAgICAgICAgbWUuYmFzZURlc2Muc3Vic3RyaW5nKG1lLmJhc2VEZXNjLmluZGV4T2YoIjxxPiIpICsgMyk7DQogICAgICAgICAgICAgIG1lID0gbWUuc3Vic3RyaW5nKDAsIG1lLmxlbmd0aCAtIDQpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChtZS5idWlsZGluZ1RpZSkNCiAgICAgICAgICAgICAgbWUgPQ0KICAgICAgICAgICAgICAgIG1lLmRuYW1lICsNCiAgICAgICAgICAgICAgICAiIDogIiArDQogICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgIk5ldmVyIGZvcmdldCB5b3VyICUxLiIsDQogICAgICAgICAgICAgICAgICAgICJQYXkgY2xvc2UgYXR0ZW50aW9uIHRvIHRoZSBodW1ibGUgJTEuIiwNCiAgICAgICAgICAgICAgICAgICAgIllvdSd2ZSBiZWVuIG5lZ2xlY3RpbmcgeW91ciAlMS4iLA0KICAgICAgICAgICAgICAgICAgICAiUmVtZW1iZXIgdG8gdmlzaXQgeW91ciAlMSBzb21ldGltZXMuIiwNCiAgICAgICAgICAgICAgICAgIF0pLA0KICAgICAgICAgICAgICAgICAgbWUuYnVpbGRpbmdUaWUuc2luZ2xlDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgbWUgPQ0KICAgICAgICAgICAgICAgIG1lLmRuYW1lICsNCiAgICAgICAgICAgICAgICAiIDogIiArDQogICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgIllvdSBkb24ndCBrbm93IHdoYXQgeW91IGhhdmUgdW50aWwgeW91J3ZlIGxvc3QgaXQuIiwNCiAgICAgICAgICAgICAgICAgICAgIlJlbWVtYmVyIHRvIHRha2UgYnJlYWtzLiIsDQogICAgICAgICAgICAgICAgICAgICJIZXksIHdoYXQncyB1cC4gSSdtIGEgZm9ydHVuZSBjb29raWUuIiwNCiAgICAgICAgICAgICAgICAgICAgIllvdSB0aGluayB5b3UgaGF2ZSBpdCBiYWQ/IExvb2sgYXQgbWUuIiwNCiAgICAgICAgICAgICAgICAgIF0pDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgICAgbWUgPQ0KICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJmb3J0dW5lIj48ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQtcG9zaXRpb246JyArDQogICAgICAgICAgICAtMjkgKiA0OCArDQogICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAtOCAqIDQ4ICsNCiAgICAgICAgICAgICdweDt0cmFuc2Zvcm06c2NhbGUoMC41KTttYXJnaW46LTE2cHg7cG9zaXRpb246cmVsYXRpdmU7bGVmdDotNHB4O3RvcDotMnB4OyI+PC9kaXY+JyArDQogICAgICAgICAgICBtZSArDQogICAgICAgICAgICAiPC9zcGFuPiI7DQogICAgICAgICAgbGlzdCA9IFttZV07DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgaWYgKEdhbWUud2luZG93VyA8IEdhbWUudGlja2VyVG9vTmFycm93KQ0KICAgICAgICBsaXN0ID0gWw0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJ0cmFuc2Zvcm06c2NhbGUoMC44LDEuMik7Ij4nICsNCiAgICAgICAgICAgIE5FV1MgKw0KICAgICAgICAgICAgKEVOID8gImhlbHAhIiA6IGxvYygiaGVscCBtZSEiKSkgKw0KICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgIF07DQoNCiAgICAgIEdhbWUuVGlja2VyQWdlID0gR2FtZS5mcHMgKiAxMDsNCiAgICAgIEdhbWUuVGlja2VyID0gY2hvb3NlKGxpc3QpOw0KICAgICAgR2FtZS5BZGRUb0xvZyhHYW1lLlRpY2tlcik7DQogICAgICBHYW1lLlRpY2tlck4rKzsNCiAgICAgIEdhbWUuVGlja2VyRHJhdygpOw0KICAgIH07DQogICAgR2FtZS50aWNrZXJMID0gbCgiY29tbWVudHNUZXh0MSIpOw0KICAgIEdhbWUudGlja2VyQmVsb3dMID0gbCgiY29tbWVudHNUZXh0MiIpOw0KICAgIEdhbWUudGlja2VyVG9vTmFycm93ID0gOTAwOw0KICAgIEdhbWUuVGlja2VyRHJhdyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIGlmIChHYW1lLlRpY2tlciAhPSAiIikgc3RyID0gR2FtZS5UaWNrZXI7DQogICAgICBHYW1lLnRpY2tlckJlbG93TC5pbm5lckhUTUwgPSBHYW1lLnRpY2tlckwuaW5uZXJIVE1MOw0KICAgICAgR2FtZS50aWNrZXJMLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgR2FtZS50aWNrZXJCZWxvd0wuY2xhc3NOYW1lID0gImNvbW1lbnRzVGV4dCI7DQogICAgICB2b2lkIEdhbWUudGlja2VyQmVsb3dMLm9mZnNldFdpZHRoOw0KICAgICAgR2FtZS50aWNrZXJCZWxvd0wuY2xhc3NOYW1lID0gImNvbW1lbnRzVGV4dCByaXNpbmdBd2F5IjsNCiAgICAgIEdhbWUudGlja2VyTC5jbGFzc05hbWUgPSAiY29tbWVudHNUZXh0IjsNCiAgICAgIHZvaWQgR2FtZS50aWNrZXJMLm9mZnNldFdpZHRoOw0KICAgICAgR2FtZS50aWNrZXJMLmNsYXNzTmFtZSA9ICJjb21tZW50c1RleHQgcmlzaW5nVXAiOw0KICAgIH07DQogICAgQWRkRXZlbnQoR2FtZS50aWNrZXJMLCAiY2xpY2siLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgIEdhbWUuVGlja2VyID0gIiI7DQogICAgICBHYW1lLlRpY2tlckNsaWNrcysrOw0KICAgICAgaWYgKEdhbWUud2luZG93VyA8IEdhbWUudGlja2VyVG9vTmFycm93KSB7DQogICAgICAgIEdhbWUuV2luKCJTdGlmbGluZyB0aGUgcHJlc3MiKTsNCiAgICAgIH0gZWxzZSBpZiAoR2FtZS5UaWNrZXJDbGlja3MgPj0gNTApIHsNCiAgICAgICAgR2FtZS5XaW4oIlRhYmxvaWQgYWRkaWN0aW9uIik7DQogICAgICB9DQoNCiAgICAgIGlmIChHYW1lLlRpY2tlckVmZmVjdCAmJiBHYW1lLlRpY2tlckVmZmVjdC50eXBlID09ICJmb3J0dW5lIikgew0KICAgICAgICBQbGF5U291bmQoInNuZC9mb3J0dW5lLm1wMyIsIDEpOw0KICAgICAgICBHYW1lLlNwYXJrbGVBdChHYW1lLm1vdXNlWCwgR2FtZS5tb3VzZVkpOw0KICAgICAgICB2YXIgZWZmZWN0ID0gR2FtZS5UaWNrZXJFZmZlY3Quc3ViOw0KICAgICAgICBpZiAoZWZmZWN0ID09ICJmb3J0dW5lR0MiKSB7DQogICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICBsb2MoIkZvcnR1bmUhIiksDQogICAgICAgICAgICBsb2MoIkEgZ29sZGVuIGNvb2tpZSBoYXMgYXBwZWFyZWQuIiksDQogICAgICAgICAgICBbMTAsIDMyXQ0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS5mb3J0dW5lR0MgPSAxOw0KICAgICAgICAgIHZhciBuZXdTaGltbWVyID0gbmV3IEdhbWUuc2hpbW1lcigiZ29sZGVuIiwgeyBub1dyYXRoOiB0cnVlIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKGVmZmVjdCA9PSAiZm9ydHVuZUNQUyIpIHsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgIGxvYygiRm9ydHVuZSEiKSwNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIllvdSBnYWluIDxiPm9uZSBob3VyPC9iPiBvZiB5b3VyIENwUyAoY2FwcGVkIGF0IGRvdWJsZSB5b3VyIGJhbmspLiINCiAgICAgICAgICAgICksDQogICAgICAgICAgICBbMTAsIDMyXQ0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS5mb3J0dW5lQ1BTID0gMTsNCiAgICAgICAgICBHYW1lLkVhcm4oTWF0aC5taW4oR2FtZS5jb29raWVzUHMgKiA2MCAqIDYwLCBHYW1lLmNvb2tpZXMpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgIGVmZmVjdC5kbmFtZSwNCiAgICAgICAgICAgIGxvYygiWW91J3ZlIHVubG9ja2VkIGEgbmV3IHVwZ3JhZGUuIiksDQogICAgICAgICAgICBlZmZlY3QuaWNvbg0KICAgICAgICAgICk7DQogICAgICAgICAgZWZmZWN0LnVubG9jaygpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIEdhbWUuVGlja2VyRWZmZWN0ID0gMDsNCiAgICB9KTsNCg0KICAgIEdhbWUuTG9nID0gW107DQogICAgR2FtZS5BZGRUb0xvZyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBHYW1lLkxvZy51bnNoaWZ0KHdoYXQpOw0KICAgICAgaWYgKEdhbWUuTG9nLmxlbmd0aCA+IDEwMCkgR2FtZS5Mb2cucG9wKCk7DQogICAgfTsNCg0KICAgIEdhbWUudmFuaWxsYSA9IDE7DQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCUJVSUxESU5HUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUubGFzdCA9IDA7DQoNCiAgICBHYW1lLnN0b3JlVG9SZWZyZXNoID0gMTsNCiAgICBHYW1lLnByaWNlSW5jcmVhc2UgPSAxLjE1Ow0KICAgIEdhbWUuYnV5QnVsayA9IDE7DQogICAgR2FtZS5idXlNb2RlID0gMTsgLy8xIGZvciBidXksIC0xIGZvciBzZWxsDQogICAgR2FtZS5idXlCdWxrT2xkID0gR2FtZS5idXlCdWxrOyAvL3VzZWQgdG8gdW5kbyBjaGFuZ2VzIGZyb20gaG9sZGluZyBTaGlmdCBvciBDdHJsDQogICAgR2FtZS5idXlCdWxrU2hvcnRjdXQgPSAwOyAvL2FyZSB3ZSBwcmVzc2luZyBTaGlmdCBvciBDdHJsPw0KDQogICAgR2FtZS5PYmplY3RzID0ge307DQogICAgR2FtZS5PYmplY3RzQnlJZCA9IFtdOw0KICAgIEdhbWUuT2JqZWN0c04gPSAwOw0KICAgIEdhbWUuQnVpbGRpbmdzT3duZWQgPSAwOw0KICAgIEdhbWUuT2JqZWN0ID0gZnVuY3Rpb24gKA0KICAgICAgbmFtZSwNCiAgICAgIGNvbW1vbk5hbWUsDQogICAgICBkZXNjLA0KICAgICAgaWNvbiwNCiAgICAgIGljb25Db2x1bW4sDQogICAgICBhcnQsDQogICAgICBwcmljZSwNCiAgICAgIGNwcywNCiAgICAgIGJ1eUZ1bmN0aW9uDQogICAgKSB7DQogICAgICB0aGlzLmlkID0gR2FtZS5PYmplY3RzTjsNCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7DQogICAgICB0aGlzLmRuYW1lID0gbmFtZTsNCiAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSB0aGlzLm5hbWU7DQogICAgICBjb21tb25OYW1lID0gY29tbW9uTmFtZS5zcGxpdCgifCIpOw0KICAgICAgdGhpcy5zaW5nbGUgPSBjb21tb25OYW1lWzBdOw0KICAgICAgdGhpcy5wbHVyYWwgPSBjb21tb25OYW1lWzFdOw0KICAgICAgdGhpcy5ic2luZ2xlID0gdGhpcy5zaW5nbGU7DQogICAgICB0aGlzLmJwbHVyYWwgPSB0aGlzLnBsdXJhbDsgLy9zdG9yZSB1bnRyYW5zbGF0ZWQgYXMgd2UgdXNlIHRob3NlIHRvbw0KICAgICAgdGhpcy5hY3Rpb25OYW1lID0gY29tbW9uTmFtZVsyXTsNCiAgICAgIHRoaXMuZXh0cmFOYW1lID0gY29tbW9uTmFtZVszXTsNCiAgICAgIHRoaXMuZXh0cmFQbHVyYWwgPSBjb21tb25OYW1lWzRdOw0KICAgICAgdGhpcy5kZXNjID0gZGVzYzsNCiAgICAgIGlmICh0cnVlKSB7DQogICAgICAgIC8vaWYgKEVOKQ0KICAgICAgICB0aGlzLmRuYW1lID0gbG9jKHRoaXMubmFtZSk7DQogICAgICAgIHRoaXMuc2luZ2xlID0gbG9jKHRoaXMuc2luZ2xlKTsNCiAgICAgICAgdGhpcy5wbHVyYWwgPSBsb2ModGhpcy5wbHVyYWwpOw0KICAgICAgICB0aGlzLmRlc2MgPSBsb2MoRmluZExvY1N0cmluZ0J5UGFydCh0aGlzLm5hbWUgKyAiIHF1b3RlIikpOw0KICAgICAgfQ0KICAgICAgdGhpcy5iYXNlUHJpY2UgPSBwcmljZTsNCiAgICAgIHRoaXMucHJpY2UgPSB0aGlzLmJhc2VQcmljZTsNCiAgICAgIHRoaXMuYnVsa1ByaWNlID0gdGhpcy5wcmljZTsNCiAgICAgIHRoaXMuY3BzID0gY3BzOw0KICAgICAgdGhpcy5iYXNlQ3BzID0gdGhpcy5jcHM7DQogICAgICB0aGlzLm1vdXNlT24gPSBmYWxzZTsNCiAgICAgIHRoaXMubW91c2VQb3MgPSBbLTEwMCwgLTEwMF07DQogICAgICB0aGlzLnByb2R1Y3Rpb25BY2hpZXZzID0gW107DQoNCiAgICAgIHRoaXMubiA9IHRoaXMuaWQ7DQogICAgICBpZiAodGhpcy5uICE9IDApIHsNCiAgICAgICAgLy9uZXcgYXV0b21hdGVkIHByaWNlIGFuZCBDcFMgY3VydmVzDQogICAgICAgIC8vdGhpcy5iYXNlQ3BzPU1hdGguY2VpbCgoKHRoaXMubiowLjUpKk1hdGgucG93KHRoaXMubioxLHRoaXMubiowLjkpKSoxMCkvMTA7DQogICAgICAgIC8vdGhpcy5iYXNlQ3BzPU1hdGguY2VpbCgoTWF0aC5wb3codGhpcy5uKjEsdGhpcy5uKjAuNSsyLjM1KSkqMTApLzEwOy8vYnkgYSBmb3J0dW5hdGUgY29pbmNpZGVuY2UsIHRoaXMgZ2l2ZXMgdGhlIDNyZCwgNHRoIGFuZCA1dGggYnVpbGRpbmdzIGEgQ3BTIG9mIDEwLCA2OSBhbmQgNDIwDQogICAgICAgIHRoaXMuYmFzZUNwcyA9DQogICAgICAgICAgTWF0aC5jZWlsKE1hdGgucG93KHRoaXMubiAqIDEsIHRoaXMubiAqIDAuNSArIDIpICogMTApIC8gMTA7IC8vMC40NSB1c2VkIHRvIGJlIDAuNQ0KICAgICAgICAvL3RoaXMuYmFzZUNwcz1NYXRoLmNlaWwoKE1hdGgucG93KHRoaXMubioxLHRoaXMubiowLjQ1KzIuMTApKSoxMCkvMTA7DQogICAgICAgIC8vY2xhbXAgMTQsNDY3LDE5OSB0byAxNCwwMDAsMDAwICh0aGVyZSdzIHByb2JhYmx5IGEgbW9yZSBlbGVnYW50IHdheSB0byBkbyB0aGF0KQ0KICAgICAgICB2YXIgZGlnaXRzID0NCiAgICAgICAgICBNYXRoLnBvdygNCiAgICAgICAgICAgIDEwLA0KICAgICAgICAgICAgTWF0aC5jZWlsKE1hdGgubG9nKE1hdGguY2VpbCh0aGlzLmJhc2VDcHMpKSAvIE1hdGguTE4xMCkNCiAgICAgICAgICApIC8gMTAwOw0KICAgICAgICB0aGlzLmJhc2VDcHMgPSBNYXRoLnJvdW5kKHRoaXMuYmFzZUNwcyAvIGRpZ2l0cykgKiBkaWdpdHM7DQoNCiAgICAgICAgdGhpcy5iYXNlUHJpY2UgPQ0KICAgICAgICAgICh0aGlzLm4gKiAxICsgOSArICh0aGlzLm4gPCA1ID8gMCA6IE1hdGgucG93KHRoaXMubiAtIDUsIDEuNzUpICogNSkpICoNCiAgICAgICAgICBNYXRoLnBvdygxMCwgdGhpcy5uKSAqDQogICAgICAgICAgTWF0aC5tYXgoMSwgdGhpcy5uIC0gMTQpOw0KICAgICAgICAvL3RoaXMuYmFzZVByaWNlPSh0aGlzLm4qMi41KzcuNSkqTWF0aC5wb3coMTAsdGhpcy5uKTsNCiAgICAgICAgdmFyIGRpZ2l0cyA9DQogICAgICAgICAgTWF0aC5wb3coDQogICAgICAgICAgICAxMCwNCiAgICAgICAgICAgIE1hdGguY2VpbChNYXRoLmxvZyhNYXRoLmNlaWwodGhpcy5iYXNlUHJpY2UpKSAvIE1hdGguTE4xMCkNCiAgICAgICAgICApIC8gMTAwOw0KICAgICAgICB0aGlzLmJhc2VQcmljZSA9IE1hdGgucm91bmQodGhpcy5iYXNlUHJpY2UgLyBkaWdpdHMpICogZGlnaXRzOw0KICAgICAgICBpZiAodGhpcy5pZCA+PSAxNikgdGhpcy5iYXNlUHJpY2UgKj0gMTA7DQogICAgICAgIGlmICh0aGlzLmlkID49IDE3KSB0aGlzLmJhc2VQcmljZSAqPSAxMDsNCiAgICAgICAgaWYgKHRoaXMuaWQgPj0gMTgpIHRoaXMuYmFzZVByaWNlICo9IDEwOw0KICAgICAgICBpZiAodGhpcy5pZCA+PSAxOSkgdGhpcy5iYXNlUHJpY2UgKj0gMTA7DQogICAgICAgIHRoaXMucHJpY2UgPSB0aGlzLmJhc2VQcmljZTsNCiAgICAgICAgdGhpcy5idWxrUHJpY2UgPSB0aGlzLnByaWNlOw0KICAgICAgfQ0KDQogICAgICB0aGlzLnRvdGFsQ29va2llcyA9IDA7DQogICAgICB0aGlzLnN0b3JlZENwcyA9IDA7DQogICAgICB0aGlzLnN0b3JlZFRvdGFsQ3BzID0gMDsNCiAgICAgIHRoaXMuaWNvbiA9IGljb247DQogICAgICB0aGlzLmljb25Db2x1bW4gPSBpY29uQ29sdW1uOw0KICAgICAgdGhpcy5hcnQgPSBhcnQ7DQogICAgICBpZiAoYXJ0LmJhc2UpIHsNCiAgICAgICAgYXJ0LnBpYyA9IGFydC5iYXNlICsgIi5wbmciOw0KICAgICAgICBhcnQuYmcgPSBhcnQuYmFzZSArICJCYWNrZ3JvdW5kLnBuZyI7DQogICAgICB9DQogICAgICB0aGlzLmJ1eUZ1bmN0aW9uID0gYnV5RnVuY3Rpb247DQogICAgICB0aGlzLmxvY2tlZCA9IDE7DQogICAgICB0aGlzLmxldmVsID0gMDsNCiAgICAgIHRoaXMudmFuaWxsYSA9IEdhbWUudmFuaWxsYTsNCg0KICAgICAgdGhpcy50aWVyZWRVcGdyYWRlcyA9IHt9Ow0KICAgICAgdGhpcy50aWVyZWRBY2hpZXZzID0ge307DQogICAgICB0aGlzLnN5bmVyZ2llcyA9IFtdOw0KICAgICAgdGhpcy5mb3J0dW5lID0gMDsNCg0KICAgICAgdGhpcy5hbW91bnQgPSAwOw0KICAgICAgdGhpcy5ib3VnaHQgPSAwOw0KICAgICAgdGhpcy5oaWdoZXN0ID0gMDsNCiAgICAgIHRoaXMuZnJlZSA9IDA7DQoNCiAgICAgIHRoaXMuZWFjaEZyYW1lID0gMDsNCg0KICAgICAgdGhpcy5taW5pZ2FtZVVybCA9IDA7IC8vaWYgdGhpcyBpcyBkZWZpbmVkLCBsb2FkIHRoZSBzcGVjaWZpZWQgc2NyaXB0IGlmIHRoZSBidWlsZGluZydzIGxldmVsIGlzIGF0IGxlYXN0IDENCiAgICAgIHRoaXMubWluaWdhbWVOYW1lID0gMDsNCiAgICAgIHRoaXMub25NaW5pZ2FtZSA9IGZhbHNlOw0KICAgICAgdGhpcy5taW5pZ2FtZUxvYWRlZCA9IGZhbHNlOw0KDQogICAgICB0aGlzLnN3aXRjaE1pbmlnYW1lID0gZnVuY3Rpb24gKA0KICAgICAgICBvbiAvL2NoYW5nZSB3aGV0aGVyIHdlJ3JlIG9uIHRoZSBidWlsZGluZydzIG1pbmlnYW1lDQogICAgICApIHsNCiAgICAgICAgaWYgKCFHYW1lLmlzTWluaWdhbWVSZWFkeSh0aGlzKSkgb24gPSBmYWxzZTsNCiAgICAgICAgaWYgKG9uID09IC0xKSBvbiA9ICF0aGlzLm9uTWluaWdhbWU7DQogICAgICAgIHRoaXMub25NaW5pZ2FtZSA9IG9uOw0KICAgICAgICBpZiAodGhpcy5pZCAhPSAwKSB7DQogICAgICAgICAgaWYgKHRoaXMub25NaW5pZ2FtZSkgew0KICAgICAgICAgICAgbCgicm93IiArIHRoaXMuaWQpLmNsYXNzTGlzdC5hZGQoIm9uTWluaWdhbWUiKTsNCiAgICAgICAgICAgIC8vbCgncm93U3BlY2lhbCcrdGhpcy5pZCkuc3R5bGUuZGlzcGxheT0nYmxvY2snOw0KICAgICAgICAgICAgLy9sKCdyb3dDYW52YXMnK3RoaXMuaWQpLnN0eWxlLmRpc3BsYXk9J25vbmUnOw0KICAgICAgICAgICAgaWYgKHRoaXMubWluaWdhbWUub25SZXNpemUpIHRoaXMubWluaWdhbWUub25SZXNpemUoKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbCgicm93IiArIHRoaXMuaWQpLmNsYXNzTGlzdC5yZW1vdmUoIm9uTWluaWdhbWUiKTsNCiAgICAgICAgICAgIC8vbCgncm93U3BlY2lhbCcrdGhpcy5pZCkuc3R5bGUuZGlzcGxheT0nbm9uZSc7DQogICAgICAgICAgICAvL2woJ3Jvd0NhbnZhcycrdGhpcy5pZCkuc3R5bGUuZGlzcGxheT0nYmxvY2snOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgIH07DQoNCiAgICAgIHRoaXMuZ2V0UHJpY2UgPSBmdW5jdGlvbiAobikgew0KICAgICAgICB2YXIgcHJpY2UgPQ0KICAgICAgICAgIHRoaXMuYmFzZVByaWNlICoNCiAgICAgICAgICBNYXRoLnBvdyhHYW1lLnByaWNlSW5jcmVhc2UsIE1hdGgubWF4KDAsIHRoaXMuYW1vdW50IC0gdGhpcy5mcmVlKSk7DQogICAgICAgIHByaWNlID0gR2FtZS5tb2RpZnlCdWlsZGluZ1ByaWNlKHRoaXMsIHByaWNlKTsNCiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChwcmljZSk7DQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRTdW1QcmljZSA9IGZ1bmN0aW9uICgNCiAgICAgICAgYW1vdW50IC8vcmV0dXJuIGhvdyBtdWNoIGl0IHdvdWxkIGNvc3QgdG8gYnV5IFthbW91bnRdIG1vcmUgb2YgdGhpcyBidWlsZGluZw0KICAgICAgKSB7DQogICAgICAgIHZhciBwcmljZSA9IDA7DQogICAgICAgIGZvciAoDQogICAgICAgICAgdmFyIGkgPSBNYXRoLm1heCgwLCB0aGlzLmFtb3VudCk7DQogICAgICAgICAgaSA8IE1hdGgubWF4KDAsIHRoaXMuYW1vdW50ICsgYW1vdW50KTsNCiAgICAgICAgICBpKysNCiAgICAgICAgKSB7DQogICAgICAgICAgcHJpY2UgKz0NCiAgICAgICAgICAgIHRoaXMuYmFzZVByaWNlICoNCiAgICAgICAgICAgIE1hdGgucG93KEdhbWUucHJpY2VJbmNyZWFzZSwgTWF0aC5tYXgoMCwgaSAtIHRoaXMuZnJlZSkpOw0KICAgICAgICB9DQogICAgICAgIHByaWNlID0gR2FtZS5tb2RpZnlCdWlsZGluZ1ByaWNlKHRoaXMsIHByaWNlKTsNCiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChwcmljZSk7DQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRSZXZlcnNlU3VtUHJpY2UgPSBmdW5jdGlvbiAoDQogICAgICAgIGFtb3VudCAvL3JldHVybiBob3cgbXVjaCB5b3UnZCBnZXQgZnJvbSBzZWxsaW5nIFthbW91bnRdIG9mIHRoaXMgYnVpbGRpbmcNCiAgICAgICkgew0KICAgICAgICB2YXIgcHJpY2UgPSAwOw0KICAgICAgICBmb3IgKA0KICAgICAgICAgIHZhciBpID0gTWF0aC5tYXgoMCwgdGhpcy5hbW91bnQgLSBhbW91bnQpOw0KICAgICAgICAgIGkgPCBNYXRoLm1heCgwLCB0aGlzLmFtb3VudCk7DQogICAgICAgICAgaSsrDQogICAgICAgICkgew0KICAgICAgICAgIHByaWNlICs9DQogICAgICAgICAgICB0aGlzLmJhc2VQcmljZSAqDQogICAgICAgICAgICBNYXRoLnBvdyhHYW1lLnByaWNlSW5jcmVhc2UsIE1hdGgubWF4KDAsIGkgLSB0aGlzLmZyZWUpKTsNCiAgICAgICAgfQ0KICAgICAgICBwcmljZSA9IEdhbWUubW9kaWZ5QnVpbGRpbmdQcmljZSh0aGlzLCBwcmljZSk7DQogICAgICAgIHByaWNlICo9IHRoaXMuZ2V0U2VsbE11bHRpcGxpZXIoKTsNCiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChwcmljZSk7DQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRTZWxsTXVsdGlwbGllciA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIGdpdmVCYWNrID0gMC4yNTsNCiAgICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdFYXJ0aCBTaGF0dGVyZXInKSkgZ2l2ZUJhY2s9MC41Ow0KICAgICAgICBnaXZlQmFjayAqPSAxICsgR2FtZS5hdXJhTXVsdCgiRWFydGggU2hhdHRlcmVyIik7DQogICAgICAgIHJldHVybiBnaXZlQmFjazsNCiAgICAgIH07DQoNCiAgICAgIHRoaXMuYnV5ID0gZnVuY3Rpb24gKGFtb3VudCkgew0KICAgICAgICBpZiAoR2FtZS5idXlNb2RlID09IC0xKSB7DQogICAgICAgICAgdGhpcy5zZWxsKEdhbWUuYnV5QnVsaywgMSk7DQogICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0NCiAgICAgICAgdmFyIHN1Y2Nlc3MgPSAwOw0KICAgICAgICB2YXIgbW9uaSA9IDA7DQogICAgICAgIHZhciBib3VnaHQgPSAwOw0KICAgICAgICBpZiAoIWFtb3VudCkgYW1vdW50ID0gR2FtZS5idXlCdWxrOw0KICAgICAgICBpZiAoYW1vdW50ID09IC0xKSBhbW91bnQgPSAxMDAwOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgaSsrKSB7DQogICAgICAgICAgdmFyIHByaWNlID0gdGhpcy5nZXRQcmljZSgpOw0KICAgICAgICAgIGlmIChHYW1lLmNvb2tpZXMgPj0gcHJpY2UpIHsNCiAgICAgICAgICAgIGJvdWdodCsrOw0KICAgICAgICAgICAgbW9uaSArPSBwcmljZTsNCiAgICAgICAgICAgIEdhbWUuU3BlbmQocHJpY2UpOw0KICAgICAgICAgICAgdGhpcy5hbW91bnQrKzsNCiAgICAgICAgICAgIHRoaXMuYm91Z2h0Kys7DQogICAgICAgICAgICBwcmljZSA9IHRoaXMuZ2V0UHJpY2UoKTsNCiAgICAgICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTsNCiAgICAgICAgICAgIGlmICh0aGlzLmJ1eUZ1bmN0aW9uKSB0aGlzLmJ1eUZ1bmN0aW9uKCk7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgaWYgKHRoaXMuYW1vdW50ID09IDEgJiYgdGhpcy5pZCAhPSAwKQ0KICAgICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LmFkZCgiZW5hYmxlZCIpOw0KICAgICAgICAgICAgdGhpcy5oaWdoZXN0ID0gTWF0aC5tYXgodGhpcy5oaWdoZXN0LCB0aGlzLmFtb3VudCk7DQogICAgICAgICAgICBHYW1lLkJ1aWxkaW5nc093bmVkKys7DQogICAgICAgICAgICBzdWNjZXNzID0gMTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHN1Y2Nlc3MpIHsNCiAgICAgICAgICBQbGF5U291bmQoInNuZC9idXkiICsgY2hvb3NlKFsxLCAyLCAzLCA0XSkgKyAiLm1wMyIsIDAuNzUpOw0KICAgICAgICAgIHRoaXMucmVmcmVzaCgpOw0KICAgICAgICB9DQogICAgICAgIC8vaWYgKG1vbmk+MCAmJiBhbW91bnQ+MSkgR2FtZS5Ob3RpZnkodGhpcy5uYW1lLCdCb3VnaHQgPGI+Jytib3VnaHQrJzwvYj4gZm9yICcrQmVhdXRpZnkobW9uaSkrJyBjb29raWVzJywnJywyKTsNCiAgICAgIH07DQogICAgICB0aGlzLnNlbGwgPSBmdW5jdGlvbiAoYW1vdW50LCBieXBhc3MpIHsNCiAgICAgICAgdmFyIHN1Y2Nlc3MgPSAwOw0KICAgICAgICB2YXIgbW9uaSA9IDA7DQogICAgICAgIHZhciBzb2xkID0gMDsNCiAgICAgICAgaWYgKGFtb3VudCA9PSAtMSkgYW1vdW50ID0gdGhpcy5hbW91bnQ7DQogICAgICAgIGlmICghYW1vdW50KSBhbW91bnQgPSBHYW1lLmJ1eUJ1bGs7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHsNCiAgICAgICAgICB2YXIgcHJpY2UgPSB0aGlzLmdldFByaWNlKCk7DQogICAgICAgICAgdmFyIGdpdmVCYWNrID0gdGhpcy5nZXRTZWxsTXVsdGlwbGllcigpOw0KICAgICAgICAgIHByaWNlID0gTWF0aC5mbG9vcihwcmljZSAqIGdpdmVCYWNrKTsNCiAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPiAwKSB7DQogICAgICAgICAgICBzb2xkKys7DQogICAgICAgICAgICBtb25pICs9IHByaWNlOw0KICAgICAgICAgICAgR2FtZS5jb29raWVzICs9IHByaWNlOw0KICAgICAgICAgICAgR2FtZS5jb29raWVzRWFybmVkID0gTWF0aC5tYXgoR2FtZS5jb29raWVzLCBHYW1lLmNvb2tpZXNFYXJuZWQpOyAvL3RoaXMgaXMgdG8gYXZvaWQgcGxheWVycyBnZXR0aW5nIHRoZSBjaGVhdGVyIGFjaGlldmVtZW50IHdoZW4gc2VsbGluZyBidWlsZGluZ3MgdGhhdCBoYXZlIGEgaGlnaGVyIHByaWNlIHRoYW4gdGhleSB1c2VkIHRvDQogICAgICAgICAgICB0aGlzLmFtb3VudC0tOw0KICAgICAgICAgICAgcHJpY2UgPSB0aGlzLmdldFByaWNlKCk7DQogICAgICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7DQogICAgICAgICAgICBpZiAodGhpcy5zZWxsRnVuY3Rpb24pIHRoaXMuc2VsbEZ1bmN0aW9uKCk7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgaWYgKHRoaXMuYW1vdW50ID09IDAgJiYgdGhpcy5pZCAhPSAwKQ0KICAgICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LnJlbW92ZSgiZW5hYmxlZCIpOw0KICAgICAgICAgICAgR2FtZS5CdWlsZGluZ3NPd25lZC0tOw0KICAgICAgICAgICAgc3VjY2VzcyA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChzdWNjZXNzICYmIEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJydWluIik7DQogICAgICAgICAgdmFyIG9sZCA9IEdhbWUuaGFzQnVmZigiRGV2YXN0YXRpb24iKTsNCiAgICAgICAgICBpZiAob2xkKSB7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIG9sZC5tdWx0Q2xpY2sgKz0gc29sZCAqIDAuMDE7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgb2xkLm11bHRDbGljayArPSBzb2xkICogMC4wMDU7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgb2xkLm11bHRDbGljayArPSBzb2xkICogMC4wMDI1Ow0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIEdhbWUuZ2FpbkJ1ZmYoImRldmFzdGF0aW9uIiwgMTAsIDEgKyBzb2xkICogMC4wMSk7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikNCiAgICAgICAgICAgICAgR2FtZS5nYWluQnVmZigiZGV2YXN0YXRpb24iLCAxMCwgMSArIHNvbGQgKiAwLjAwNSk7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykNCiAgICAgICAgICAgICAgR2FtZS5nYWluQnVmZigiZGV2YXN0YXRpb24iLCAxMCwgMSArIHNvbGQgKiAwLjAwMjUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoDQogICAgICAgICAgc3VjY2VzcyAmJg0KICAgICAgICAgIEdhbWUuc2hpbW1lclR5cGVzWyJnb2xkZW4iXS5uIDw9IDAgJiYNCiAgICAgICAgICBHYW1lLmF1cmFNdWx0KCJEcmFnb24gT3JicyIpID4gMA0KICAgICAgICApIHsNCiAgICAgICAgICB2YXIgaGlnaGVzdEJ1aWxkaW5nID0gMDsNCiAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1tpXS5hbW91bnQgPiAwKSBoaWdoZXN0QnVpbGRpbmcgPSBHYW1lLk9iamVjdHNbaV07DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIGhpZ2hlc3RCdWlsZGluZyA9PSB0aGlzICYmDQogICAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgR2FtZS5hdXJhTXVsdCgiRHJhZ29uIE9yYnMiKSAqIDAuMQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgdmFyIGJ1ZmZzTiA9IDA7DQogICAgICAgICAgICBmb3IgKHZhciBpaSBpbiBHYW1lLmJ1ZmZzKSB7DQogICAgICAgICAgICAgIGJ1ZmZzTisrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGJ1ZmZzTiA9PSAwKSB7DQogICAgICAgICAgICAgIG5ldyBHYW1lLnNoaW1tZXIoImdvbGRlbiIpOw0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICBFTiA/ICJEcmFnb24gT3JicyEiIDogbG9jKCJEcmFnb24gT3JicyIpLA0KICAgICAgICAgICAgICAgIGxvYygiV2lzaCBncmFudGVkLiBHb2xkZW4gY29va2llIHNwYXduZWQuIiksDQogICAgICAgICAgICAgICAgWzMzLCAyNV0NCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHN1Y2Nlc3MpIHsNCiAgICAgICAgICBQbGF5U291bmQoInNuZC9zZWxsIiArIGNob29zZShbMSwgMiwgMywgNF0pICsgIi5tcDMiLCAwLjc1KTsNCiAgICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgICAgfQ0KICAgICAgICAvL2lmIChtb25pPjApIEdhbWUuTm90aWZ5KHRoaXMubmFtZSwnU29sZCA8Yj4nK3NvbGQrJzwvYj4gZm9yICcrQmVhdXRpZnkobW9uaSkrJyBjb29raWVzJywnJywyKTsNCiAgICAgIH07DQogICAgICB0aGlzLnNhY3JpZmljZSA9IGZ1bmN0aW9uICgNCiAgICAgICAgYW1vdW50IC8vc2VsbCB3aXRob3V0IGdldHRpbmcgYmFjayBhbnkgbW9uZXkNCiAgICAgICkgew0KICAgICAgICB2YXIgc3VjY2VzcyA9IDA7DQogICAgICAgIC8vdmFyIG1vbmk9MDsNCiAgICAgICAgdmFyIHNvbGQgPSAwOw0KICAgICAgICBpZiAoYW1vdW50ID09IC0xKSBhbW91bnQgPSB0aGlzLmFtb3VudDsNCiAgICAgICAgaWYgKCFhbW91bnQpIGFtb3VudCA9IDE7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHsNCiAgICAgICAgICB2YXIgcHJpY2UgPSB0aGlzLmdldFByaWNlKCk7DQogICAgICAgICAgcHJpY2UgPSBNYXRoLmZsb29yKHByaWNlICogMC41KTsNCiAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPiAwKSB7DQogICAgICAgICAgICBzb2xkKys7DQogICAgICAgICAgICAvL21vbmkrPXByaWNlOw0KICAgICAgICAgICAgLy9HYW1lLmNvb2tpZXMrPXByaWNlOw0KICAgICAgICAgICAgLy9HYW1lLmNvb2tpZXNFYXJuZWQ9TWF0aC5tYXgoR2FtZS5jb29raWVzLEdhbWUuY29va2llc0Vhcm5lZCk7DQogICAgICAgICAgICB0aGlzLmFtb3VudC0tOw0KICAgICAgICAgICAgcHJpY2UgPSB0aGlzLmdldFByaWNlKCk7DQogICAgICAgICAgICB0aGlzLnByaWNlID0gcHJpY2U7DQogICAgICAgICAgICBpZiAodGhpcy5zZWxsRnVuY3Rpb24pIHRoaXMuc2VsbEZ1bmN0aW9uKCk7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgaWYgKHRoaXMuYW1vdW50ID09IDAgJiYgdGhpcy5pZCAhPSAwKQ0KICAgICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LnJlbW92ZSgiZW5hYmxlZCIpOw0KICAgICAgICAgICAgR2FtZS5CdWlsZGluZ3NPd25lZC0tOw0KICAgICAgICAgICAgc3VjY2VzcyA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChzdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy5yZWZyZXNoKCk7DQogICAgICAgIH0NCiAgICAgICAgLy9pZiAobW9uaT4wKSBHYW1lLk5vdGlmeSh0aGlzLm5hbWUsJ1NvbGQgPGI+Jytzb2xkKyc8L2I+IGZvciAnK0JlYXV0aWZ5KG1vbmkpKycgY29va2llcycsJycsMik7DQogICAgICB9Ow0KICAgICAgdGhpcy5idXlGcmVlID0gZnVuY3Rpb24gKA0KICAgICAgICBhbW91bnQgLy91bmxpa2UgZ2V0RnJlZSwgdGhpcyBzdGlsbCBpbmNyZWFzZXMgdGhlIHByaWNlDQogICAgICApIHsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKykgew0KICAgICAgICAgIGlmIChHYW1lLmNvb2tpZXMgPj0gcHJpY2UpIHsNCiAgICAgICAgICAgIHRoaXMuYW1vdW50Kys7DQogICAgICAgICAgICB0aGlzLmJvdWdodCsrOw0KICAgICAgICAgICAgdGhpcy5wcmljZSA9IHRoaXMuZ2V0UHJpY2UoKTsNCiAgICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPT0gMSAmJiB0aGlzLmlkICE9IDApDQogICAgICAgICAgICAgIGwoInJvdyIgKyB0aGlzLmlkKS5jbGFzc0xpc3QuYWRkKCJlbmFibGVkIik7DQogICAgICAgICAgICB0aGlzLmhpZ2hlc3QgPSBNYXRoLm1heCh0aGlzLmhpZ2hlc3QsIHRoaXMuYW1vdW50KTsNCiAgICAgICAgICAgIEdhbWUuQnVpbGRpbmdzT3duZWQrKzsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5yZWZyZXNoKCk7DQogICAgICB9Ow0KICAgICAgdGhpcy5nZXRGcmVlID0gZnVuY3Rpb24gKA0KICAgICAgICBhbW91bnQgLy9nZXQgWCBvZiB0aGlzIGJ1aWxkaW5nIGZvciBmcmVlLCB3aXRoIHRoZSBwcmljZSBiZWhhdmluZyBhcyBpZiB5b3Ugc3RpbGwgZGlkbid0IGhhdmUgdGhlbQ0KICAgICAgKSB7DQogICAgICAgIHRoaXMuYW1vdW50ICs9IGFtb3VudDsNCiAgICAgICAgdGhpcy5ib3VnaHQgKz0gYW1vdW50Ow0KICAgICAgICB0aGlzLmZyZWUgKz0gYW1vdW50Ow0KICAgICAgICB0aGlzLmhpZ2hlc3QgPSBNYXRoLm1heCh0aGlzLmhpZ2hlc3QsIHRoaXMuYW1vdW50KTsNCiAgICAgICAgR2FtZS5CdWlsZGluZ3NPd25lZCArPSBhbW91bnQ7DQogICAgICAgIHRoaXMuaGlnaGVzdCA9IE1hdGgubWF4KHRoaXMuaGlnaGVzdCwgdGhpcy5hbW91bnQpOw0KICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgIH07DQogICAgICB0aGlzLmdldEZyZWVSYW5rcyA9IGZ1bmN0aW9uICgNCiAgICAgICAgYW1vdW50IC8vdGhpcyBidWlsZGluZydzIHByaWNlIGJlaGF2ZXMgYXMgaWYgeW91IGhhZCBYIGxlc3Mgb2YgaXQNCiAgICAgICkgew0KICAgICAgICB0aGlzLmZyZWUgKz0gYW1vdW50Ow0KICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgIH07DQoNCiAgICAgIHRoaXMudG9vbHRpcCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIG1lID0gdGhpczsNCiAgICAgICAgdmFyIGFyaWFUZXh0ID0gIiI7DQogICAgICAgIHZhciBkZXNjID0gbWUuZGVzYzsNCiAgICAgICAgdmFyIG5hbWUgPSBtZS5kbmFtZTsNCiAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJmb29scyIpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuZm9vbE9iamVjdHNbbWUubmFtZV0pIHsNCiAgICAgICAgICAgIG5hbWUgPSBHYW1lLmZvb2xPYmplY3RzWyJVbmtub3duIl0ubmFtZTsNCiAgICAgICAgICAgIGRlc2MgPSBHYW1lLmZvb2xPYmplY3RzWyJVbmtub3duIl0uZGVzYzsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbmFtZSA9IEdhbWUuZm9vbE9iamVjdHNbbWUubmFtZV0ubmFtZTsNCiAgICAgICAgICAgIGRlc2MgPSBHYW1lLmZvb2xPYmplY3RzW21lLm5hbWVdLmRlc2M7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHZhciBpY29uID0gW21lLmljb25Db2x1bW4sIDBdOw0KICAgICAgICBpZiAobWUubG9ja2VkKSB7DQogICAgICAgICAgbmFtZSA9ICI/Pz8iOw0KICAgICAgICAgIGRlc2MgPSAiPz8/IjsNCiAgICAgICAgICBpY29uID0gWzAsIDddOw0KICAgICAgICB9DQogICAgICAgIC8vaWYgKGwoJ3Jvd0luZm8nK21lLmlkKSAmJiBHYW1lLmRyYXdUJTEwPT0wKSBsKCdyb3dJbmZvQ29udGVudCcrbWUuaWQpLmlubmVySFRNTD0nJmJ1bGw7ICcrbWUuYW1vdW50KycgJysobWUuYW1vdW50PT0xP21lLnNpbmdsZTptZS5wbHVyYWwpKyc8YnI+JmJ1bGw7IHByb2R1Y2luZyAnK0JlYXV0aWZ5KG1lLnN0b3JlZFRvdGFsQ3BzLDEpKycgJysobWUuc3RvcmVkVG90YWxDcHM9PTE/J2Nvb2tpZSc6J2Nvb2tpZXMnKSsnIHBlciBzZWNvbmQ8YnI+JmJ1bGw7IHRvdGFsIDogJytCZWF1dGlmeShtZS50b3RhbENvb2tpZXMpKycgJysoTWF0aC5mbG9vcihtZS50b3RhbENvb2tpZXMpPT0xPydjb29raWUnOidjb29raWVzJykrJyAnK21lLmFjdGlvbk5hbWU7DQoNCiAgICAgICAgdmFyIGNhbkJ1eSA9IGZhbHNlOw0KICAgICAgICB2YXIgcHJpY2UgPSBtZS5idWxrUHJpY2U7DQogICAgICAgIGlmICgNCiAgICAgICAgICAoR2FtZS5idXlNb2RlID09IDEgJiYgR2FtZS5jb29raWVzID49IHByaWNlKSB8fA0KICAgICAgICAgIChHYW1lLmJ1eU1vZGUgPT0gLTEgJiYgbWUuYW1vdW50ID4gMCkNCiAgICAgICAgKQ0KICAgICAgICAgIGNhbkJ1eSA9IHRydWU7DQoNCiAgICAgICAgdmFyIHN5bmVyZ2llc1N0ciA9ICIiOw0KICAgICAgICAvL25vdGUgOiBtaWdodCBub3QgYmUgZW50aXJlbHkgYWNjdXJhdGUsIG1hdGggbWF5IG5lZWQgY2hlY2tpbmcNCiAgICAgICAgaWYgKG1lLmFtb3VudCA+IDApIHsNCiAgICAgICAgICB2YXIgc3luZXJnaWVzV2l0aCA9IHt9Ow0KICAgICAgICAgIHZhciBzeW5lcmd5Qm9vc3QgPSAwOw0KDQogICAgICAgICAgaWYgKG1lLm5hbWUgPT0gIkdyYW5kbWEiKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuR3JhbmRtYVN5bmVyZ2llcykgew0KICAgICAgICAgICAgICBpZiAoR2FtZS5IYXMoR2FtZS5HcmFuZG1hU3luZXJnaWVzW2ldKSkgew0KICAgICAgICAgICAgICAgIHZhciBvdGhlciA9IEdhbWUuVXBncmFkZXNbR2FtZS5HcmFuZG1hU3luZXJnaWVzW2ldXS5idWlsZGluZ1RpZTsNCiAgICAgICAgICAgICAgICB2YXIgbXVsdCA9IG1lLmFtb3VudCAqIDAuMDEgKiAoMSAvIChvdGhlci5pZCAtIDEpKTsNCiAgICAgICAgICAgICAgICB2YXIgYm9vc3QgPQ0KICAgICAgICAgICAgICAgICAgb3RoZXIuc3RvcmVkVG90YWxDcHMgKiBHYW1lLmdsb2JhbENwc011bHQgLQ0KICAgICAgICAgICAgICAgICAgKG90aGVyLnN0b3JlZFRvdGFsQ3BzICogR2FtZS5nbG9iYWxDcHNNdWx0KSAvICgxICsgbXVsdCk7DQogICAgICAgICAgICAgICAgc3luZXJneUJvb3N0ICs9IGJvb3N0Ow0KICAgICAgICAgICAgICAgIGlmICghc3luZXJnaWVzV2l0aFtvdGhlci5wbHVyYWxdKQ0KICAgICAgICAgICAgICAgICAgc3luZXJnaWVzV2l0aFtvdGhlci5wbHVyYWxdID0gMDsNCiAgICAgICAgICAgICAgICBzeW5lcmdpZXNXaXRoW290aGVyLnBsdXJhbF0gKz0gbXVsdDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSBpZiAobWUubmFtZSA9PSAiUG9ydGFsIiAmJiBHYW1lLkhhcygiRWxkZXIgUGFjdCIpKSB7DQogICAgICAgICAgICB2YXIgb3RoZXIgPSBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXTsNCiAgICAgICAgICAgIHZhciBib29zdCA9IG1lLmFtb3VudCAqIDAuMDUgKiBvdGhlci5hbW91bnQgKiBHYW1lLmdsb2JhbENwc011bHQ7DQogICAgICAgICAgICBzeW5lcmd5Qm9vc3QgKz0gYm9vc3Q7DQogICAgICAgICAgICBpZiAoIXN5bmVyZ2llc1dpdGhbb3RoZXIucGx1cmFsXSkgc3luZXJnaWVzV2l0aFtvdGhlci5wbHVyYWxdID0gMDsNCiAgICAgICAgICAgIHN5bmVyZ2llc1dpdGhbb3RoZXIucGx1cmFsXSArPQ0KICAgICAgICAgICAgICBib29zdCAvIChvdGhlci5zdG9yZWRUb3RhbENwcyAqIEdhbWUuZ2xvYmFsQ3BzTXVsdCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZm9yICh2YXIgaSBpbiBtZS5zeW5lcmdpZXMpIHsNCiAgICAgICAgICAgIHZhciBpdCA9IG1lLnN5bmVyZ2llc1tpXTsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcyhpdC5uYW1lKSkgew0KICAgICAgICAgICAgICB2YXIgd2VpZ2h0ID0gMC4wNTsNCiAgICAgICAgICAgICAgdmFyIG90aGVyID0gaXQuYnVpbGRpbmdUaWUxOw0KICAgICAgICAgICAgICBpZiAobWUgPT0gaXQuYnVpbGRpbmdUaWUxKSB7DQogICAgICAgICAgICAgICAgd2VpZ2h0ID0gMC4wMDE7DQogICAgICAgICAgICAgICAgb3RoZXIgPSBpdC5idWlsZGluZ1RpZTI7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdmFyIGJvb3N0ID0NCiAgICAgICAgICAgICAgICBvdGhlci5zdG9yZWRUb3RhbENwcyAqIEdhbWUuZ2xvYmFsQ3BzTXVsdCAtDQogICAgICAgICAgICAgICAgKG90aGVyLnN0b3JlZFRvdGFsQ3BzICogR2FtZS5nbG9iYWxDcHNNdWx0KSAvDQogICAgICAgICAgICAgICAgICAoMSArIG1lLmFtb3VudCAqIHdlaWdodCk7DQogICAgICAgICAgICAgIHN5bmVyZ3lCb29zdCArPSBib29zdDsNCiAgICAgICAgICAgICAgaWYgKCFzeW5lcmdpZXNXaXRoW290aGVyLnBsdXJhbF0pIHN5bmVyZ2llc1dpdGhbb3RoZXIucGx1cmFsXSA9IDA7DQogICAgICAgICAgICAgIHN5bmVyZ2llc1dpdGhbb3RoZXIucGx1cmFsXSArPSBtZS5hbW91bnQgKiB3ZWlnaHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChzeW5lcmd5Qm9vc3QgPiAwKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpIGluIHN5bmVyZ2llc1dpdGgpIHsNCiAgICAgICAgICAgICAgaWYgKHN5bmVyZ2llc1N0ciAhPSAiIikgc3luZXJnaWVzU3RyICs9ICIsICI7DQogICAgICAgICAgICAgIHN5bmVyZ2llc1N0ciArPQ0KICAgICAgICAgICAgICAgICc8c3BhbiBzdHlsZT0iY29sb3I6I2ZmZjtmb250LXdlaWdodDpib2xkO2ZvbnQtc2l6ZTo4MCU7YmFja2dyb3VuZDojMDAwO2JveC1zaGFkb3c6MHB4IDBweCAwcHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTtib3JkZXItcmFkaXVzOjNweDtwYWRkaW5nOjBweCAycHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ij4nICsNCiAgICAgICAgICAgICAgICBpICsNCiAgICAgICAgICAgICAgICAiICsiICsNCiAgICAgICAgICAgICAgICBCZWF1dGlmeShzeW5lcmdpZXNXaXRoW2ldICogMTAwLCAxKSArDQogICAgICAgICAgICAgICAgIiU8L3NwYW4+IjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN5bmVyZ2llc1N0ciA9DQogICAgICAgICAgICAgIGxvYygiLi4uYWxzbyBib29zdGluZyBzb21lIG90aGVyIGJ1aWxkaW5nczoiKSArDQogICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgIHN5bmVyZ2llc1N0ciArDQogICAgICAgICAgICAgICIgLSAiICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJhbGwgY29tYmluZWQsIHRoZXNlIGJvb3N0cyBhY2NvdW50IGZvciA8Yj4lMTwvYj4gcGVyIHNlY29uZCAoPGI+JTIlPC9iPiBvZiB0b3RhbCBDcFMpIiwNCiAgICAgICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeShzeW5lcmd5Qm9vc3QsIDEpKSwNCiAgICAgICAgICAgICAgICAgIEJlYXV0aWZ5KChzeW5lcmd5Qm9vc3QgLyBHYW1lLmNvb2tpZXNQcykgKiAxMDAsIDEpLA0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5wcmVmcy5zY3JlZW5yZWFkZXIpIHsNCiAgICAgICAgICBpZiAobWUubG9ja2VkKSBhcmlhVGV4dCA9ICJUaGlzIGJ1aWxkaW5nIGlzIG5vdCB5ZXQgdW5sb2NrZWQuICI7DQogICAgICAgICAgZWxzZSBhcmlhVGV4dCA9IG5hbWUgKyAiLiAiOw0KICAgICAgICAgIGlmICghbWUubG9ja2VkKSBhcmlhVGV4dCArPSAiWW91IG93biAiICsgbWUuYW1vdW50ICsgIi4gIjsNCiAgICAgICAgICBhcmlhVGV4dCArPQ0KICAgICAgICAgICAgKGNhbkJ1eSA/ICJDYW4gYnV5IDEgZm9yIiA6ICJDYW5ub3QgYWZmb3JkIHRoZSIpICsNCiAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICBCZWF1dGlmeShNYXRoLnJvdW5kKHByaWNlKSkgKw0KICAgICAgICAgICAgIiBjb29raWVzLiAiOw0KICAgICAgICAgIGlmICghbWUubG9ja2VkICYmIG1lLnRvdGFsQ29va2llcyA+IDApIHsNCiAgICAgICAgICAgIGFyaWFUZXh0ICs9DQogICAgICAgICAgICAgICJFYWNoICIgKw0KICAgICAgICAgICAgICBtZS5zaW5nbGUgKw0KICAgICAgICAgICAgICAiIHByb2R1Y2VzICIgKw0KICAgICAgICAgICAgICBCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAobWUuc3RvcmVkVG90YWxDcHMgLyBtZS5hbW91bnQpICogR2FtZS5nbG9iYWxDcHNNdWx0LA0KICAgICAgICAgICAgICAgIDENCiAgICAgICAgICAgICAgKSArDQogICAgICAgICAgICAgICIgY29va2llcyBwZXIgc2Vjb25kLiAiOw0KICAgICAgICAgICAgYXJpYVRleHQgKz0NCiAgICAgICAgICAgICAgQmVhdXRpZnkobWUudG90YWxDb29raWVzKSArDQogICAgICAgICAgICAgICIgY29va2llcyAiICsNCiAgICAgICAgICAgICAgbWUuYWN0aW9uTmFtZSArDQogICAgICAgICAgICAgICIgc28gZmFyLiAiOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIW1lLmxvY2tlZCkgYXJpYVRleHQgKz0gZGVzYzsNCg0KICAgICAgICAgIHZhciBhcmlhTGFiZWwgPSBsKCJhcmlhUmVhZGVyLXByb2R1Y3QtIiArIG1lLmlkKTsNCiAgICAgICAgICBpZiAoYXJpYUxhYmVsKQ0KICAgICAgICAgICAgYXJpYUxhYmVsLmlubmVySFRNTCA9IGFyaWFUZXh0LnJlcGxhY2UoLyg8KFtePl0rKT4pL2dpLCAiICIpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnPGRpdiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7bGVmdDoxcHg7dG9wOjFweDtyaWdodDoxcHg7Ym90dG9tOjFweDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxMjVkZWcsJyArDQogICAgICAgICAgKGZhbHNlDQogICAgICAgICAgICA/ICJyZ2JhKDE1LDExNSwxMzAsMSkgMCUscmdiYSgxNSwxMTUsMTMwLDApIg0KICAgICAgICAgICAgOiAicmdiYSg1MCw0MCw0MCwxKSAwJSxyZ2JhKDUwLDQwLDQwLDApIikgKw0KICAgICAgICAgICcgMjAlKTttaXgtYmxlbmQtbW9kZTpzY3JlZW47ei1pbmRleDoxOyI+PC9kaXY+PGRpdiBzdHlsZT0iei1pbmRleDoxMDttaW4td2lkdGg6MzUwcHg7cGFkZGluZzo4cHg7cG9zaXRpb246cmVsYXRpdmU7IiBpZD0idG9vbHRpcEJ1aWxkaW5nIj48ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0iZmxvYXQ6bGVmdDttYXJnaW4tbGVmdDotOHB4O21hcmdpbi10b3A6LThweDsnICsNCiAgICAgICAgICB3cml0ZUljb24oaWNvbikgKw0KICAgICAgICAgICciPjwvZGl2PjxkaXYgc3R5bGU9ImZsb2F0OnJpZ2h0O3RleHQtYWxpZ246cmlnaHQ7Ij48c3BhbiBjbGFzcz0icHJpY2UnICsNCiAgICAgICAgICAoY2FuQnV5ID8gIiIgOiAiIGRpc2FibGVkIikgKw0KICAgICAgICAgICciPicgKw0KICAgICAgICAgIEJlYXV0aWZ5KE1hdGgucm91bmQocHJpY2UpKSArDQogICAgICAgICAgIjwvc3Bhbj4iICsNCiAgICAgICAgICBHYW1lLmNvc3REZXRhaWxzKHByaWNlKSArDQogICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9Im5hbWUiPicgKw0KICAgICAgICAgIG5hbWUgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPHNtYWxsPjxkaXYgY2xhc3M9InRhZyI+JyArDQogICAgICAgICAgbG9jKCJvd25lZDogJTEiLCBtZS5hbW91bnQpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgKG1lLmZyZWUgPiAwDQogICAgICAgICAgICA/ICc8ZGl2IGNsYXNzPSJ0YWciPicgKyBsb2MoImZyZWU6ICUxISIsIG1lLmZyZWUpICsgIjwvZGl2PiINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAiPC9zbWFsbD4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBjbGFzcz0iZGVzY3JpcHRpb24iPjxxPicgKw0KICAgICAgICAgIGRlc2MgKw0KICAgICAgICAgICI8L3E+PC9kaXY+IiArDQogICAgICAgICAgKG1lLnRvdGFsQ29va2llcyA+IDANCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICAobWUuYW1vdW50ID4gMA0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9ImRlc2NyaXB0aW9uQmxvY2siPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKCJlYWNoICUxIHByb2R1Y2VzIDxiPiUyPC9iPiBwZXIgc2Vjb25kIiwgWw0KICAgICAgICAgICAgICAgICAgICBtZS5zaW5nbGUsDQogICAgICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICAgICAiJTEgY29va2llIiwNCiAgICAgICAgICAgICAgICAgICAgICBMQmVhdXRpZnkoDQogICAgICAgICAgICAgICAgICAgICAgICAobWUuc3RvcmVkVG90YWxDcHMgLyBtZS5hbW91bnQpICogR2FtZS5nbG9iYWxDcHNNdWx0LA0KICAgICAgICAgICAgICAgICAgICAgICAgMQ0KICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgIF0pICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iZGVzY3JpcHRpb25CbG9jayI+JyArDQogICAgICAgICAgICAgIGxvYygiJTEgcHJvZHVjaW5nIDxiPiUyPC9iPiBwZXIgc2Vjb25kIiwgWw0KICAgICAgICAgICAgICAgIGxvYygiJTEgIiArIG1lLmJzaW5nbGUsIExCZWF1dGlmeShtZS5hbW91bnQpKSwNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiJTEgY29va2llIiwNCiAgICAgICAgICAgICAgICAgIExCZWF1dGlmeShtZS5zdG9yZWRUb3RhbENwcyAqIEdhbWUuZ2xvYmFsQ3BzTXVsdCwgMSkNCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICBdKSArDQogICAgICAgICAgICAgICIgKCIgKw0KICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgIjxiPiUxJTwvYj4gb2YgdG90YWwgQ3BTIiwNCiAgICAgICAgICAgICAgICBCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAgIEdhbWUuY29va2llc1BzID4gMA0KICAgICAgICAgICAgICAgICAgICA/IChtZS5hbW91bnQgPiAwDQogICAgICAgICAgICAgICAgICAgICAgICA/IChtZS5zdG9yZWRUb3RhbENwcyAqIEdhbWUuZ2xvYmFsQ3BzTXVsdCkgLw0KICAgICAgICAgICAgICAgICAgICAgICAgICBHYW1lLmNvb2tpZXNQcw0KICAgICAgICAgICAgICAgICAgICAgICAgOiAwKSAqIDEwMA0KICAgICAgICAgICAgICAgICAgICA6IDAsDQogICAgICAgICAgICAgICAgICAxDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgIik8L2Rpdj4iICsNCiAgICAgICAgICAgICAgKHN5bmVyZ2llc1N0cg0KICAgICAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9ImRlc2NyaXB0aW9uQmxvY2siPicgKyBzeW5lcmdpZXNTdHIgKyAiPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAgICAgKEVODQogICAgICAgICAgICAgICAgPyAnPGRpdiBjbGFzcz0iZGVzY3JpcHRpb25CbG9jayI+PGI+JyArDQogICAgICAgICAgICAgICAgICBCZWF1dGlmeShtZS50b3RhbENvb2tpZXMpICsNCiAgICAgICAgICAgICAgICAgICI8L2I+ICIgKw0KICAgICAgICAgICAgICAgICAgKE1hdGguZmxvb3IobWUudG90YWxDb29raWVzKSA9PSAxID8gImNvb2tpZSIgOiAiY29va2llcyIpICsNCiAgICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgICBtZS5hY3Rpb25OYW1lICsNCiAgICAgICAgICAgICAgICAgICIgc28gZmFyPC9kaXY+Ig0KICAgICAgICAgICAgICAgIDogJzxkaXYgY2xhc3M9ImRlc2NyaXB0aW9uQmxvY2siPicgKw0KICAgICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgICAiPGI+JTE8L2I+IHByb2R1Y2VkIHNvIGZhciIsDQogICAgICAgICAgICAgICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1lLnRvdGFsQ29va2llcykpDQogICAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iKQ0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICk7DQogICAgICB9Ow0KICAgICAgdGhpcy5sZXZlbFRvb2x0aXAgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBtZSA9IHRoaXM7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgJzxkaXYgc3R5bGU9IndpZHRoOjI4MHB4O3BhZGRpbmc6OHB4OyIgaWQ9InRvb2x0aXBMZXZlbCI+PGI+JyArDQogICAgICAgICAgbG9jKCJMZXZlbCAlMSAlMiIsIFtCZWF1dGlmeShtZS5sZXZlbCksIG1lLnBsdXJhbF0pICsNCiAgICAgICAgICAnPC9iPjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgIChFTg0KICAgICAgICAgICAgPyAobWUubGV2ZWwgPT0gMSA/IG1lLmV4dHJhTmFtZSA6IG1lLmV4dHJhUGx1cmFsKS5yZXBsYWNlKA0KICAgICAgICAgICAgICAgICJbWF0iLA0KICAgICAgICAgICAgICAgIEJlYXV0aWZ5KG1lLmxldmVsKQ0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgIiBncmFudGluZyA8Yj4rIiArDQogICAgICAgICAgICAgIEJlYXV0aWZ5KG1lLmxldmVsKSArDQogICAgICAgICAgICAgICIlICIgKw0KICAgICAgICAgICAgICBtZS5kbmFtZSArDQogICAgICAgICAgICAgICIgQ3BTPC9iPi4iDQogICAgICAgICAgICA6IGxvYygiR3JhbnRpbmcgPGI+KyUxJSAlMiBDcFM8L2I+LiIsIFsNCiAgICAgICAgICAgICAgICBCZWF1dGlmeShtZS5sZXZlbCksDQogICAgICAgICAgICAgICAgbWUuc2luZ2xlLA0KICAgICAgICAgICAgICBdKSkgKw0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiQ2xpY2sgdG8gbGV2ZWwgdXAgZm9yICUxLiIsDQogICAgICAgICAgICAnPHNwYW4gY2xhc3M9InByaWNlIGx1bXAnICsNCiAgICAgICAgICAgICAgKEdhbWUubHVtcHMgPj0gbWUubGV2ZWwgKyAxID8gIiIgOiAiIGRpc2FibGVkIikgKw0KICAgICAgICAgICAgICAnIj4nICsNCiAgICAgICAgICAgICAgbG9jKCIlMSBzdWdhciBsdW1wIiwgTEJlYXV0aWZ5KG1lLmxldmVsICsgMSkpICsNCiAgICAgICAgICAgICAgIjwvc3Bhbj4iDQogICAgICAgICAgKSArDQogICAgICAgICAgKG1lLmxldmVsID09IDAgJiYgbWUubWluaWdhbWVVcmwNCiAgICAgICAgICAgID8gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjxiPicgKw0KICAgICAgICAgICAgICBsb2MoIkxldmVsbGluZyB1cCB0aGlzIGJ1aWxkaW5nIHVubG9ja3MgYSBtaW5pZ2FtZS4iKSArDQogICAgICAgICAgICAgICI8L2I+Ig0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICk7DQogICAgICB9Ow0KICAgICAgdGhpcy5sZXZlbFVwID0gKGZ1bmN0aW9uIChtZSkgew0KICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZyZWUpIHsNCiAgICAgICAgICBHYW1lLnNwZW5kTHVtcCgNCiAgICAgICAgICAgIG1lLmxldmVsICsgMSwNCiAgICAgICAgICAgIGxvYygibGV2ZWwgdXAgeW91ciAlMSIsIG1lLnBsdXJhbCksDQogICAgICAgICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIG1lLmxldmVsICs9IDE7DQogICAgICAgICAgICAgIGlmIChtZS5sZXZlbCA+PSAxMCAmJiBtZS5sZXZlbEFjaGlldjEwKQ0KICAgICAgICAgICAgICAgIEdhbWUuV2luKG1lLmxldmVsQWNoaWV2MTAubmFtZSk7DQogICAgICAgICAgICAgIGlmICghZnJlZSkgUGxheVNvdW5kKCJzbmQvdXBncmFkZS5tcDMiLCAwLjYpOw0KICAgICAgICAgICAgICBHYW1lLkxvYWRNaW5pZ2FtZXMoKTsNCiAgICAgICAgICAgICAgbWUucmVmcmVzaCgpOw0KICAgICAgICAgICAgICBpZiAobCgicHJvZHVjdExldmVsIiArIG1lLmlkKSkgew0KICAgICAgICAgICAgICAgIHZhciByZWN0ID0gbCgicHJvZHVjdExldmVsIiArIG1lLmlkKS5nZXRCb3VuZHMoKTsNCiAgICAgICAgICAgICAgICBHYW1lLlNwYXJrbGVBdCgNCiAgICAgICAgICAgICAgICAgIChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIsDQogICAgICAgICAgICAgICAgICAocmVjdC50b3AgKyByZWN0LmJvdHRvbSkgLyAyIC0gMjQgKyAzMiAtIFRvcEJhck9mZnNldA0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKG1lLm1pbmlnYW1lICYmIG1lLm1pbmlnYW1lLm9uTGV2ZWwpDQogICAgICAgICAgICAgICAgbWUubWluaWdhbWUub25MZXZlbChtZS5sZXZlbCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZnJlZQ0KICAgICAgICAgICkoKTsNCiAgICAgICAgfTsNCiAgICAgIH0pKHRoaXMpOw0KDQogICAgICB0aGlzLnJlZnJlc2ggPQ0KICAgICAgICBmdW5jdGlvbiAoKSAvL3Nob3cvaGlkZSB0aGUgYnVpbGRpbmcgZGlzcGxheSBiYXNlZCBvbiBpdHMgYW1vdW50LCBhbmQgcmVkcmF3IGl0DQogICAgICAgIHsNCiAgICAgICAgICB0aGlzLnByaWNlID0gdGhpcy5nZXRQcmljZSgpOw0KICAgICAgICAgIGlmIChHYW1lLmJ1eU1vZGUgPT0gMSkNCiAgICAgICAgICAgIHRoaXMuYnVsa1ByaWNlID0gdGhpcy5nZXRTdW1QcmljZShHYW1lLmJ1eUJ1bGspOw0KICAgICAgICAgIGVsc2UgaWYgKEdhbWUuYnV5TW9kZSA9PSAtMSAmJiBHYW1lLmJ1eUJ1bGsgPT0gLTEpDQogICAgICAgICAgICB0aGlzLmJ1bGtQcmljZSA9IHRoaXMuZ2V0UmV2ZXJzZVN1bVByaWNlKDEwMDApOw0KICAgICAgICAgIGVsc2UgaWYgKEdhbWUuYnV5TW9kZSA9PSAtMSkNCiAgICAgICAgICAgIHRoaXMuYnVsa1ByaWNlID0gdGhpcy5nZXRSZXZlcnNlU3VtUHJpY2UoR2FtZS5idXlCdWxrKTsNCiAgICAgICAgICB0aGlzLnJlYnVpbGQoKTsNCiAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPT0gMCAmJiB0aGlzLmlkICE9IDApDQogICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LnJlbW92ZSgiZW5hYmxlZCIpOw0KICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYW1vdW50ID4gMCAmJiB0aGlzLmlkICE9IDApDQogICAgICAgICAgICBsKCJyb3ciICsgdGhpcy5pZCkuY2xhc3NMaXN0LmFkZCgiZW5hYmxlZCIpOw0KICAgICAgICAgIGlmICh0aGlzLm11dGVkID4gMCAmJiB0aGlzLmlkICE9IDApIHsNCiAgICAgICAgICAgIGwoInJvdyIgKyB0aGlzLmlkKS5jbGFzc0xpc3QuYWRkKCJtdXRlZCIpOw0KICAgICAgICAgICAgbCgibXV0ZWRQcm9kdWN0IiArIHRoaXMuaWQpLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsNCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaWQgIT0gMCkgew0KICAgICAgICAgICAgbCgicm93IiArIHRoaXMuaWQpLmNsYXNzTGlzdC5yZW1vdmUoIm11dGVkIik7DQogICAgICAgICAgICBsKCJtdXRlZFByb2R1Y3QiICsgdGhpcy5pZCkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICB9DQogICAgICAgICAgLy9pZiAoIXRoaXMub25NaW5pZ2FtZSAmJiAhdGhpcy5tdXRlZCkge30NCiAgICAgICAgICAvL2Vsc2UgdGhpcy5waWNzPVtdOw0KICAgICAgICB9Ow0KICAgICAgdGhpcy5yZWJ1aWxkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgbWUgPSB0aGlzOw0KICAgICAgICAvL3ZhciBjbGFzc2VzPSdwcm9kdWN0JzsNCiAgICAgICAgdmFyIHByaWNlID0gbWUuYnVsa1ByaWNlOw0KICAgICAgICAvKmlmIChHYW1lLmNvb2tpZXNFYXJuZWQ+PW1lLmJhc2VQcmljZSB8fCBtZS5ib3VnaHQ+MCkge2NsYXNzZXMrPScgdW5sb2NrZWQnO21lLmxvY2tlZD0wO30gZWxzZSB7Y2xhc3Nlcys9JyBsb2NrZWQnO21lLmxvY2tlZD0xO30NCgkJCQlpZiAoR2FtZS5jb29raWVzPj1wcmljZSkgY2xhc3Nlcys9JyBlbmFibGVkJzsgZWxzZSBjbGFzc2VzKz0nIGRpc2FibGVkJzsNCgkJCQlpZiAobWUubC5jbGFzc05hbWUuaW5kZXhPZigndG9nZ2xlZE9mZicpIT0tMSkgY2xhc3Nlcys9JyB0b2dnbGVkT2ZmJzsNCgkJCQkqLw0KICAgICAgICB2YXIgaWNvbiA9IFswLCBtZS5pY29uXTsNCiAgICAgICAgdmFyIGljb25PZmYgPSBbMSwgbWUuaWNvbl07DQogICAgICAgIGlmIChtZS5pY29uRnVuYykgaWNvbiA9IG1lLmljb25GdW5jKCk7DQoNCiAgICAgICAgdmFyIGRlc2MgPSBtZS5kZXNjOw0KICAgICAgICB2YXIgbmFtZSA9IG1lLmRuYW1lOw0KICAgICAgICB2YXIgZGlzcGxheU5hbWUgPSBtZS5kaXNwbGF5TmFtZTsNCiAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJmb29scyIpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuZm9vbE9iamVjdHNbbWUubmFtZV0pIHsNCiAgICAgICAgICAgIGljb24gPSBbMiwgMF07DQogICAgICAgICAgICBpY29uT2ZmID0gWzMsIDBdOw0KICAgICAgICAgICAgbmFtZSA9IEdhbWUuZm9vbE9iamVjdHNbIlVua25vd24iXS5uYW1lOw0KICAgICAgICAgICAgZGVzYyA9IEdhbWUuZm9vbE9iamVjdHNbIlVua25vd24iXS5kZXNjOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpY29uID0gWzIsIG1lLmljb25dOw0KICAgICAgICAgICAgaWNvbk9mZiA9IFszLCBtZS5pY29uXTsNCiAgICAgICAgICAgIG5hbWUgPSBHYW1lLmZvb2xPYmplY3RzW21lLm5hbWVdLm5hbWU7DQogICAgICAgICAgICBkZXNjID0gR2FtZS5mb29sT2JqZWN0c1ttZS5uYW1lXS5kZXNjOw0KICAgICAgICAgIH0NCiAgICAgICAgICBkaXNwbGF5TmFtZSA9IG5hbWU7DQogICAgICAgICAgLy9pZiAobmFtZS5sZW5ndGg+MTYpIGRpc3BsYXlOYW1lPSc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjc1JTsiPicrbmFtZSsnPC9zcGFuPic7DQogICAgICAgIH0gZWxzZSBpZiAoIUVOKSBkaXNwbGF5TmFtZSA9IG5hbWU7DQogICAgICAgIC8vZWxzZSBpZiAoIUVOICYmIG5hbWUubGVuZ3RoPjE2KSBkaXNwbGF5TmFtZT0nPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo3NSU7Ij4nK25hbWUrJzwvc3Bhbj4nOw0KICAgICAgICBpY29uID0gW2ljb25bMF0gKiA2NCwgaWNvblsxXSAqIDY0XTsNCiAgICAgICAgaWNvbk9mZiA9IFtpY29uT2ZmWzBdICogNjQsIGljb25PZmZbMV0gKiA2NF07DQoNCiAgICAgICAgLy9tZS5sLmNsYXNzTmFtZT1jbGFzc2VzOw0KICAgICAgICAvL2woJ3Byb2R1Y3RJY29uJyttZS5pZCkuc3R5bGUuYmFja2dyb3VuZEltYWdlPSd1cmwoaW1nLycraWNvbisnKSc7DQogICAgICAgIGwoInByb2R1Y3RJY29uIiArIG1lLmlkKS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPQ0KICAgICAgICAgICItIiArIGljb25bMF0gKyAicHggLSIgKyBpY29uWzFdICsgInB4IjsNCiAgICAgICAgLy9sKCdwcm9kdWN0SWNvbk9mZicrbWUuaWQpLnN0eWxlLmJhY2tncm91bmRJbWFnZT0ndXJsKGltZy8nK2ljb25PZmYrJyknOw0KICAgICAgICBsKCJwcm9kdWN0SWNvbk9mZiIgKyBtZS5pZCkuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0NCiAgICAgICAgICAiLSIgKyBpY29uT2ZmWzBdICsgInB4IC0iICsgaWNvbk9mZlsxXSArICJweCI7DQogICAgICAgIGwoInByb2R1Y3ROYW1lIiArIG1lLmlkKS5pbm5lckhUTUwgPSBkaXNwbGF5TmFtZTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIG5hbWUubGVuZ3RoID4gMTIgLyBMYW5nc1tsb2NJZF0udyAmJg0KICAgICAgICAgIChHYW1lLnNlYXNvbiA9PSAiZm9vbHMiIHx8ICFFTikNCiAgICAgICAgKQ0KICAgICAgICAgIGwoInByb2R1Y3ROYW1lIiArIG1lLmlkKS5jbGFzc0xpc3QuYWRkKCJsb25nUHJvZHVjdE5hbWUiKTsNCiAgICAgICAgZWxzZSBsKCJwcm9kdWN0TmFtZSIgKyBtZS5pZCkuY2xhc3NMaXN0LnJlbW92ZSgibG9uZ1Byb2R1Y3ROYW1lIik7DQogICAgICAgIGwoInByb2R1Y3RPd25lZCIgKyBtZS5pZCkudGV4dENvbnRlbnQgPSBtZS5hbW91bnQgPyBtZS5hbW91bnQgOiAiIjsNCiAgICAgICAgbCgicHJvZHVjdFByaWNlIiArIG1lLmlkKS50ZXh0Q29udGVudCA9IEJlYXV0aWZ5KE1hdGgucm91bmQocHJpY2UpKTsNCiAgICAgICAgbCgicHJvZHVjdFByaWNlTXVsdCIgKyBtZS5pZCkudGV4dENvbnRlbnQgPQ0KICAgICAgICAgIEdhbWUuYnV5QnVsayA+IDEgPyAieCIgKyBHYW1lLmJ1eUJ1bGsgKyAiICIgOiAiIjsNCiAgICAgICAgbCgicHJvZHVjdExldmVsIiArIG1lLmlkKS50ZXh0Q29udGVudCA9ICJsdmwgIiArIEJlYXV0aWZ5KG1lLmxldmVsKTsNCiAgICAgICAgaWYgKEdhbWUuaXNNaW5pZ2FtZVJlYWR5KG1lKSAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgew0KICAgICAgICAgIGwoInByb2R1Y3RNaW5pZ2FtZUJ1dHRvbiIgKyBtZS5pZCkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgaWYgKCFtZS5vbk1pbmlnYW1lKQ0KICAgICAgICAgICAgbCgicHJvZHVjdE1pbmlnYW1lQnV0dG9uIiArIG1lLmlkKS50ZXh0Q29udGVudCA9IGxvYygNCiAgICAgICAgICAgICAgIlZpZXcgJTEiLA0KICAgICAgICAgICAgICBtZS5taW5pZ2FtZU5hbWUNCiAgICAgICAgICAgICk7DQogICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgbCgicHJvZHVjdE1pbmlnYW1lQnV0dG9uIiArIG1lLmlkKS50ZXh0Q29udGVudCA9IGxvYygNCiAgICAgICAgICAgICAgIkNsb3NlICUxIiwNCiAgICAgICAgICAgICAgbWUubWluaWdhbWVOYW1lDQogICAgICAgICAgICApOw0KICAgICAgICB9IGVsc2UgbCgicHJvZHVjdE1pbmlnYW1lQnV0dG9uIiArIG1lLmlkKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5pc01pbmlnYW1lUmVhZHkobWUpICYmDQogICAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEgJiYNCiAgICAgICAgICBtZS5taW5pZ2FtZS5kcmFnb25Cb29zdFRvb2x0aXAgJiYNCiAgICAgICAgICBHYW1lLmhhc0F1cmEoIlN1cHJlbWUgSW50ZWxsZWN0IikNCiAgICAgICAgKSB7DQogICAgICAgICAgbCgicHJvZHVjdERyYWdvbkJvb3N0IiArIG1lLmlkKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgfSBlbHNlIGwoInByb2R1Y3REcmFnb25Cb29zdCIgKyBtZS5pZCkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIH07DQogICAgICB0aGlzLm11dGVkID0gZmFsc2U7DQogICAgICB0aGlzLm11dGUgPSBmdW5jdGlvbiAodmFsKSB7DQogICAgICAgIGlmICh0aGlzLmlkID09IDApIHJldHVybiBmYWxzZTsNCiAgICAgICAgdGhpcy5tdXRlZCA9IHZhbDsNCiAgICAgICAgaWYgKHZhbCkgew0KICAgICAgICAgIGwoInByb2R1Y3RNdXRlIiArIHRoaXMuaWQpLmNsYXNzTGlzdC5hZGQoIm9uIik7DQogICAgICAgICAgbCgicm93IiArIHRoaXMuaWQpLmNsYXNzTGlzdC5hZGQoIm11dGVkIik7DQogICAgICAgICAgbCgibXV0ZWRQcm9kdWN0IiArIHRoaXMuaWQpLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBsKCJwcm9kdWN0TXV0ZSIgKyB0aGlzLmlkKS5jbGFzc0xpc3QucmVtb3ZlKCJvbiIpOw0KICAgICAgICAgIGwoInJvdyIgKyB0aGlzLmlkKS5jbGFzc0xpc3QucmVtb3ZlKCJtdXRlZCIpOw0KICAgICAgICAgIGwoIm11dGVkUHJvZHVjdCIgKyB0aGlzLmlkKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICB9DQogICAgICB9Ow0KDQogICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoKSB7fTsNCg0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgaWYgKHRoaXMuaWQgIT0gMCkNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9InJvdyIgaWQ9InJvdycgKw0KICAgICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAgICciPjxkaXYgY2xhc3M9InNlcGFyYXRvckJvdHRvbSI+PC9kaXY+JzsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0icHJvZHVjdEJ1dHRvbnMiPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgaWQ9InByb2R1Y3RMZXZlbCcgKw0KICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgJyIgY2xhc3M9InByb2R1Y3RCdXR0b24gcHJvZHVjdExldmVsIGx1bXBzT25seSIgb25jbGljaz0iR2FtZS5PYmplY3RzQnlJZFsnICsNCiAgICAgICAgdGhpcy5pZCArDQogICAgICAgICddLmxldmVsVXAoKSIgJyArDQogICAgICAgIEdhbWUuZ2V0RHluYW1pY1Rvb2x0aXAoDQogICAgICAgICAgIkdhbWUuT2JqZWN0c0J5SWRbIiArIHRoaXMuaWQgKyAiXS5sZXZlbFRvb2x0aXAiLA0KICAgICAgICAgICJ0aGlzIg0KICAgICAgICApICsNCiAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGlkPSJwcm9kdWN0TWluaWdhbWVCdXR0b24nICsNCiAgICAgICAgdGhpcy5pZCArDQogICAgICAgICciIGNsYXNzPSJwcm9kdWN0QnV0dG9uIHByb2R1Y3RNaW5pZ2FtZUJ1dHRvbiBsdW1wc09ubHkiIG9uY2xpY2s9IkdhbWUuT2JqZWN0c0J5SWRbJyArDQogICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAiXS5zd2l0Y2hNaW5pZ2FtZSgtMSk7UGxheVNvdW5kKEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAiXS5vbk1pbmlnYW1lPydzbmQvY2xpY2tPbjIubXAzJzonc25kL2NsaWNrT2ZmMi5tcDMnKTtcIj48L2Rpdj4iOw0KICAgICAgaWYgKHRoaXMuaWQgIT0gMCkNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9InByb2R1Y3RCdXR0b24gcHJvZHVjdE11dGUiICcgKw0KICAgICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJ3aWR0aDoxNTBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTFweDsiIGlkPSJ0b29sdGlwTXV0ZUJ1aWxkaW5nIj48Yj4nICsNCiAgICAgICAgICAgICAgbG9jKCJNdXRlIikgKw0KICAgICAgICAgICAgICAiPC9iPjxicj4oIiArDQogICAgICAgICAgICAgIGxvYygiTWluaW1pemUgdGhpcyBidWlsZGluZyIpICsNCiAgICAgICAgICAgICAgIik8L2Rpdj4iLA0KICAgICAgICAgICAgInRoaXMiDQogICAgICAgICAgKSArDQogICAgICAgICAgJyBvbmNsaWNrPSJHYW1lLk9iamVjdHNCeUlkWycgKw0KICAgICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAgICJdLm11dGUoMSk7UGxheVNvdW5kKEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgdGhpcy5pZCArDQogICAgICAgICAgIl0ubXV0ZWQ/J3NuZC9jbGlja09mZjIubXAzJzonc25kL2NsaWNrT24yLm1wMycpO1wiIGlkPVwicHJvZHVjdE11dGUiICsNCiAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAnIj4nICsNCiAgICAgICAgICBsb2MoIk11dGUiKSArDQogICAgICAgICAgIjwvZGl2PiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgaWQ9InByb2R1Y3REcmFnb25Cb29zdCcgKw0KICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgJyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIGNsYXNzPSJwcm9kdWN0QnV0dG9uIHByb2R1Y3REcmFnb25Cb29zdCIgJyArDQogICAgICAgIEdhbWUuZ2V0RHluYW1pY1Rvb2x0aXAoDQogICAgICAgICAgImZ1bmN0aW9uKCl7aWYgKEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAgICJdLm1pbmlnYW1lICYmIEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAgICJdLm1pbmlnYW1lLmRyYWdvbkJvb3N0VG9vbHRpcCkgcmV0dXJuIEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAgICJdLm1pbmlnYW1lLmRyYWdvbkJvb3N0VG9vbHRpcCgpOyBlbHNlIHJldHVybiAwO30iLA0KICAgICAgICAgICJ0aGlzIg0KICAgICAgICApICsNCiAgICAgICAgJz48ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQtcG9zaXRpb246JyArDQogICAgICAgIC0zMCAqIDQ4ICsNCiAgICAgICAgInB4ICIgKw0KICAgICAgICAtMTIgKiA0OCArDQogICAgICAgICdweDt0cmFuc2Zvcm06c2NhbGUoMC41KTttYXJnaW46LTIwcHggLTE2cHg7Ij48L2Rpdj48L2Rpdj4nOw0KICAgICAgc3RyICs9ICI8L2Rpdj4iOw0KICAgICAgaWYgKHRoaXMuaWQgPT0gMCkNCiAgICAgICAgbCgic2VjdGlvbkxlZnRFeHRyYSIpLmlubmVySFRNTCA9IGwoInNlY3Rpb25MZWZ0RXh0cmEiKS5pbm5lckhUTUwgKyBzdHI7DQogICAgICBlbHNlIHsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxjYW52YXMgY2xhc3M9InJvd0NhbnZhcyIgaWQ9InJvd0NhbnZhcycgKyB0aGlzLmlkICsgJyI+PC9jYW52YXM+JzsNCiAgICAgICAgc3RyICs9ICc8ZGl2IGNsYXNzPSJyb3dTcGVjaWFsIiBpZD0icm93U3BlY2lhbCcgKyB0aGlzLmlkICsgJyI+PC9kaXY+JzsNCiAgICAgICAgc3RyICs9ICI8L2Rpdj4iOw0KICAgICAgICBsKCJyb3dzIikuaW5uZXJIVE1MID0gbCgicm93cyIpLmlubmVySFRNTCArIHN0cjsNCg0KICAgICAgICAvL2J1aWxkaW5nIGNhbnZhcw0KICAgICAgICB0aGlzLnBpY3MgPSBbXTsNCg0KICAgICAgICB0aGlzLnRvUmVzaXplID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5yZWRyYXcgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgdmFyIG1lID0gdGhpczsNCiAgICAgICAgICBtZS5waWNzID0gW107DQogICAgICAgIH07DQogICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAodGhpcy5hbW91bnQgPD0gMCkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIGlmICh0aGlzLnRvUmVzaXplKSB7DQogICAgICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY2FudmFzLmNsaWVudFdpZHRoOw0KICAgICAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0Ow0KICAgICAgICAgICAgdGhpcy50b1Jlc2l6ZSA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5jdHg7DQogICAgICAgICAgLy9jbGVhcg0KICAgICAgICAgIC8vY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5jYW52YXMud2lkdGgsdGhpcy5jYW52YXMuaGVpZ2h0KTsNCiAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KDQogICAgICAgICAgLy9waWMgOiBhIGxvYWRlZCBwaWN0dXJlIG9yIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgbG9hZGVkIHBpY3R1cmUNCiAgICAgICAgICAvL2JnIDogYSBsb2FkZWQgcGljdHVyZSBvciBhIGZ1bmN0aW9uIHJldHVybmluZyBhIGxvYWRlZCBwaWN0dXJlIC0gdGlsZWQgYXMgdGhlIGJhY2tncm91bmQsIDEyOHgxMjgNCiAgICAgICAgICAvL3hWIDogdGhlIHBpY3R1cmVzIHdpbGwgaGF2ZSBhIHJhbmRvbSBob3Jpem9udGFsIHNoaWZ0IGJ5IHRoaXMgbWFueSBwaXhlbHMNCiAgICAgICAgICAvL3lWIDogdGhlIHBpY3R1cmVzIHdpbGwgaGF2ZSBhIHJhbmRvbSB2ZXJ0aWNhbCBzaGlmdCBieSB0aGlzIG1hbnkgcGl4ZWxzDQogICAgICAgICAgLy93IDogaG93IG1hbnkgcGl4ZWxzIGJldHdlZW4gZWFjaCBwaWN0dXJlIChvciByb3cgb2YgcGljdHVyZXMpDQogICAgICAgICAgLy94IDogaG9yaXpvbnRhbCBvZmZzZXQNCiAgICAgICAgICAvL3kgOiB2ZXJ0aWNhbCBvZmZzZXQgKCszMikNCiAgICAgICAgICAvL3Jvd3MgOiBpZiA+MSwgYXJyYW5nZSB0aGUgcGljdHVyZXMgaW4gcm93cyBjb250YWluaW5nIHRoaXMgbWFueSBwaWN0dXJlcw0KICAgICAgICAgIC8vZnJhbWVzIDogaWYgcHJlc2VudCwgc2xpY2UgdGhlIHBpYyBpbiBbZnJhbWVzXSBob3Jpem9udGFsIHNsaWNlcyBhbmQgcGljayBvbmUgYXQgcmFuZG9tDQoNCiAgICAgICAgICB2YXIgcGljID0gdGhpcy5hcnQucGljOw0KICAgICAgICAgIHZhciBiZyA9IHRoaXMuYXJ0LmJnOw0KICAgICAgICAgIHZhciB4ViA9IHRoaXMuYXJ0LnhWIHx8IDA7DQogICAgICAgICAgdmFyIHlWID0gdGhpcy5hcnQueVYgfHwgMDsNCiAgICAgICAgICB2YXIgdyA9IHRoaXMuYXJ0LncgfHwgNDg7DQogICAgICAgICAgdmFyIGggPSB0aGlzLmFydC5oIHx8IDQ4Ow0KICAgICAgICAgIHZhciBvZmZYID0gdGhpcy5hcnQueCB8fCAwOw0KICAgICAgICAgIHZhciBvZmZZID0gdGhpcy5hcnQueSB8fCAwOw0KICAgICAgICAgIHZhciByb3dzID0gdGhpcy5hcnQucm93cyB8fCAxOw0KICAgICAgICAgIHZhciBmcmFtZXMgPSB0aGlzLmFydC5mcmFtZXMgfHwgMTsNCg0KICAgICAgICAgIGlmICh0eXBlb2YgYmcgPT0gInN0cmluZyIpDQogICAgICAgICAgICBjdHguZmlsbFBhdHRlcm4oDQogICAgICAgICAgICAgIFBpYyh0aGlzLmFydC5iZyksDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoLA0KICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQsDQogICAgICAgICAgICAgIDEyOCwNCiAgICAgICAgICAgICAgMTI4DQogICAgICAgICAgICApOw0KICAgICAgICAgIGVsc2UgYmcodGhpcywgY3R4KTsNCiAgICAgICAgICAvKg0KCQkJCQljdHguZ2xvYmFsQWxwaGE9MC41Ow0KCQkJCQlpZiAodHlwZW9mKGJnKT09J3N0cmluZycpLy90ZXN0DQoJCQkJCXsNCgkJCQkJCWN0eC5maWxsUGF0dGVybihQaWModGhpcy5hcnQuYmcpLC0xMjgrR2FtZS5UJTEyOCwwLHRoaXMuY2FudmFzLndpZHRoKzEyOCx0aGlzLmNhbnZhcy5oZWlnaHQsMTI4LDEyOCk7DQoJCQkJCQljdHguZmlsbFBhdHRlcm4oUGljKHRoaXMuYXJ0LmJnKSwtMTI4K01hdGguZmxvb3IoR2FtZS5ULzIpJTEyOCwtMTI4K01hdGguZmxvb3IoR2FtZS5ULzIpJTEyOCx0aGlzLmNhbnZhcy53aWR0aCsxMjgsdGhpcy5jYW52YXMuaGVpZ2h0KzEyOCwxMjgsMTI4KTsNCgkJCQkJfQ0KCQkJCQljdHguZ2xvYmFsQWxwaGE9MTsNCgkJCQkJKi8NCiAgICAgICAgICB2YXIgbWF4SSA9IE1hdGguZmxvb3IodGhpcy5jYW52YXMud2lkdGggLyAodyAvIHJvd3MpICsgMSk7DQogICAgICAgICAgdmFyIGlUID0gTWF0aC5taW4odGhpcy5hbW91bnQsIG1heEkpOw0KICAgICAgICAgIHZhciBpID0gdGhpcy5waWNzLmxlbmd0aDsNCg0KICAgICAgICAgIHZhciB4ID0gMDsNCiAgICAgICAgICB2YXIgeSA9IDA7DQogICAgICAgICAgdmFyIGFkZGVkID0gMDsNCiAgICAgICAgICBpZiAoaSAhPSBpVCkgew0KICAgICAgICAgICAgLy9mb3IgKHZhciBpdGVyPTA7aXRlcjwzO2l0ZXIrKykNCiAgICAgICAgICAgIC8vew0KICAgICAgICAgICAgdmFyIHByZXZGcmFtZSA9IDA7DQogICAgICAgICAgICB3aGlsZSAoaSA8IGlUKSB7DQogICAgICAgICAgICAgIC8vaWYgKGk8aVQpDQogICAgICAgICAgICAgIE1hdGguc2VlZHJhbmRvbShHYW1lLnNlZWQgKyAiICIgKyB0aGlzLmlkICsgIiAiICsgaSk7DQogICAgICAgICAgICAgIGlmIChyb3dzICE9IDEpIHsNCiAgICAgICAgICAgICAgICB4ID0NCiAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoaSAvIHJvd3MpICogdyArDQogICAgICAgICAgICAgICAgICAoKGkgJSByb3dzKSAvIHJvd3MpICogdyArDQogICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHhWKSArDQogICAgICAgICAgICAgICAgICBvZmZYOw0KICAgICAgICAgICAgICAgIHkgPQ0KICAgICAgICAgICAgICAgICAgMzIgKw0KICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiB5VikgKw0KICAgICAgICAgICAgICAgICAgKCgoLXJvd3MgLyAyKSAqIDMyKSAvIDIgKyAoKGkgJSByb3dzKSAqIDMyKSAvIDIpICsNCiAgICAgICAgICAgICAgICAgIG9mZlk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgeCA9IGkgKiB3ICsgTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiB4VikgKyBvZmZYOw0KICAgICAgICAgICAgICAgIHkgPSAzMiArIE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgLSAwLjUpICogeVYpICsgb2ZmWTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB2YXIgdXNlZFBpYyA9IHR5cGVvZiBwaWMgPT0gInN0cmluZyIgPyBwaWMgOiBwaWModGhpcywgaSk7DQogICAgICAgICAgICAgIHZhciBmcmFtZSA9IC0xOw0KICAgICAgICAgICAgICAvL2lmIChmcmFtZXM+MSkgZnJhbWU9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmZyYW1lcyk7DQogICAgICAgICAgICAgIGlmIChmcmFtZXMgPiAxKSB7DQogICAgICAgICAgICAgICAgZnJhbWUgPQ0KICAgICAgICAgICAgICAgICAgcHJldkZyYW1lICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGZyYW1lcyAtIDEpICsgMSk7DQogICAgICAgICAgICAgICAgZnJhbWUgPSBmcmFtZSAlIGZyYW1lczsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBwcmV2RnJhbWUgPSBmcmFtZTsNCiAgICAgICAgICAgICAgdGhpcy5waWNzLnB1c2goew0KICAgICAgICAgICAgICAgIHg6IE1hdGguZmxvb3IoeCksDQogICAgICAgICAgICAgICAgeTogTWF0aC5mbG9vcih5KSwNCiAgICAgICAgICAgICAgICB6OiB5LA0KICAgICAgICAgICAgICAgIHBpYzogdXNlZFBpYywNCiAgICAgICAgICAgICAgICBpZDogaSwNCiAgICAgICAgICAgICAgICBmcmFtZTogZnJhbWUsDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgIGFkZGVkKys7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB3aGlsZSAoaSA+IGlUKSB7DQogICAgICAgICAgICAgIC8vZWxzZSBpZiAoaT5pVCkNCiAgICAgICAgICAgICAgdGhpcy5waWNzLnNvcnQoR2FtZS5zb3J0U3ByaXRlc0J5SWQpOw0KICAgICAgICAgICAgICB0aGlzLnBpY3MucG9wKCk7DQogICAgICAgICAgICAgIGktLTsNCiAgICAgICAgICAgICAgYWRkZWQtLTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vfQ0KICAgICAgICAgICAgdGhpcy5waWNzLnNvcnQoR2FtZS5zb3J0U3ByaXRlcyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGxlbiA9IHRoaXMucGljcy5sZW5ndGg7DQoNCiAgICAgICAgICBpZiAodGhpcy5tb3VzZU9uKSB7DQogICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSAtMTsNCiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT0gIkdyYW5kbWEiKSB7DQogICAgICAgICAgICAgIC8vbW91c2UgZGV0ZWN0aW9uIG9ubHkgZml0cyBncmFuZG1hIHNwcml0ZXMgZm9yIG5vdw0KICAgICAgICAgICAgICB2YXIgbWFyZ2luVyA9IC0xODsNCiAgICAgICAgICAgICAgdmFyIG1hcmdpbkggPSAtMTA7DQogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgcGljID0gdGhpcy5waWNzW2ldOw0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIHRoaXMubW91c2VQb3NbMF0gPj0gcGljLnggLSBtYXJnaW5XICYmDQogICAgICAgICAgICAgICAgICB0aGlzLm1vdXNlUG9zWzBdIDwgcGljLnggKyA2NCArIG1hcmdpblcgJiYNCiAgICAgICAgICAgICAgICAgIHRoaXMubW91c2VQb3NbMV0gPj0gcGljLnkgLSBtYXJnaW5IICYmDQogICAgICAgICAgICAgICAgICB0aGlzLm1vdXNlUG9zWzFdIDwgcGljLnkgKyA2NCArIG1hcmdpbkgNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IGk7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPT0gaSAmJg0KICAgICAgICAgICAgICAgICAgcGljLnBpYyA9PSAiZWxmR3JhbmRtYS5wbmciICYmDQogICAgICAgICAgICAgICAgICBHYW1lLm1vdXNlRG93bg0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgIEdhbWUuV2luKCJCYWJ5IGl0J3Mgb2xkIG91dHNpZGUiKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgR2FtZS5wcmVmcy5jdXN0b21HcmFuZG1hcyAmJg0KICAgICAgICAgICAgICAgIEdhbWUuY3VzdG9tR3JhbmRtYU5hbWVzLmxlbmd0aCA+IDANCiAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgdmFyIHN0ciA9IGxvYygNCiAgICAgICAgICAgICAgICAgICJOYW1lcyBpbiB3aGl0ZSB3ZXJlIHN1Ym1pdHRlZCBieSBvdXIgc3VwcG9ydGVycyBvbiBQYXRyZW9uLiINCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNzU7DQogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjMDAwIjsNCiAgICAgICAgICAgICAgICBjdHguZm9udCA9ICI5cHggTWVycml3ZWF0aGVyIjsNCiAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gImxlZnQiOw0KICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjdHgubWVhc3VyZVRleHQoc3RyKS53aWR0aCArIDQsIDEyKTsNCiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAicmdiYSgyNTUsMjU1LDI1NSwwLjcpIjsNCiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoc3RyLCAyLCA4KTsNCiAgICAgICAgICAgICAgICBpZiAoRU4pIHsNCiAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAicmdiYSgyNTUsMjU1LDI1NSwxKSI7DQogICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoDQogICAgICAgICAgICAgICAgICAgICJ3aGl0ZSIsDQogICAgICAgICAgICAgICAgICAgIDIgKyBjdHgubWVhc3VyZVRleHQoIk5hbWVzIGluICIpLndpZHRoLA0KICAgICAgICAgICAgICAgICAgICA4DQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbSgpOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgew0KICAgICAgICAgICAgdmFyIHBpYyA9IHRoaXMucGljc1tpXTsNCiAgICAgICAgICAgIHZhciBzcHJpdGUgPSBQaWMocGljLnBpYyk7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWQgPT0gaSAmJiB0aGlzLm5hbWUgPT0gIkdyYW5kbWEiKSB7DQogICAgICAgICAgICAgIGN0eC5mb250ID0gIjE0cHggTWVycml3ZWF0aGVyIjsNCiAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgICBNYXRoLnNlZWRyYW5kb20oR2FtZS5zZWVkICsgIiAiICsgcGljLmlkIC8qKycgJytwaWMuaWQqLyk7IC8vKEdhbWUuc2VlZCsnICcrcGljLmlkKycgJytwaWMueCsnICcrcGljLnkpOw0KICAgICAgICAgICAgICB2YXIgeWVhcnMgPQ0KICAgICAgICAgICAgICAgIChEYXRlLm5vdygpIC0gbmV3IERhdGUoMjAxMywgNywgOCkpIC8NCiAgICAgICAgICAgICAgICAgICgxMDAwICogNjAgKiA2MCAqIDI0ICogMzY1KSArDQogICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKTsgLy90aGUgZ3JhbmRtYXMgYWdlIHdpdGggdGhlIGdhbWUNCiAgICAgICAgICAgICAgdmFyIG5hbWUgPSBjaG9vc2UoR2FtZS5ncmFuZG1hTmFtZXMpOw0KICAgICAgICAgICAgICB2YXIgY3VzdG9tID0gZmFsc2U7DQogICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICBHYW1lLnByZWZzLmN1c3RvbUdyYW5kbWFzICYmDQogICAgICAgICAgICAgICAgR2FtZS5jdXN0b21HcmFuZG1hTmFtZXMubGVuZ3RoID4gMCAmJg0KICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCAwLjINCiAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgbmFtZSA9IGNob29zZShHYW1lLmN1c3RvbUdyYW5kbWFOYW1lcyk7DQogICAgICAgICAgICAgICAgY3VzdG9tID0gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB2YXIgdGV4dCA9IGxvYygiJTEsIGFnZSAlMiIsIFsNCiAgICAgICAgICAgICAgICBuYW1lLA0KICAgICAgICAgICAgICAgIEJlYXV0aWZ5KA0KICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcig3MCArIE1hdGgucmFuZG9tKCkgKiAzMCArIHllYXJzICsgdGhpcy5sZXZlbCkNCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICBdKTsNCiAgICAgICAgICAgICAgdmFyIHdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoICsgMTI7DQogICAgICAgICAgICAgIHZhciB4ID0gTWF0aC5tYXgoDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICBNYXRoLm1pbigNCiAgICAgICAgICAgICAgICAgIHBpYy54ICsgMzIgLSB3aWR0aCAvIDIgKyBNYXRoLnJhbmRvbSgpICogMzIgLSAxNiwNCiAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoIC0gd2lkdGgNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIHZhciB5ID0gNCArIE1hdGgucmFuZG9tKCkgKiA4IC0gNDsNCiAgICAgICAgICAgICAgTWF0aC5zZWVkcmFuZG9tKCk7DQogICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAiIzAwMCI7DQogICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICIjMDAwIjsNCiAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDg7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNzU7DQogICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsNCiAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhwaWMueCArIDMyLCBwaWMueSArIDMyKTsNCiAgICAgICAgICAgICAgY3R4LmxpbmVUbyhNYXRoLmZsb29yKHggKyB3aWR0aCAvIDIpLCBNYXRoLmZsb29yKHkgKyAyMCkpOw0KICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7DQogICAgICAgICAgICAgIGN0eC5maWxsUmVjdChNYXRoLmZsb29yKHgpLCBNYXRoLmZsb29yKHkpLCBNYXRoLmZsb29yKHdpZHRoKSwgMjQpOw0KICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgICBpZiAoY3VzdG9tKSBjdHguZmlsbFN0eWxlID0gIiNmZmYiOw0KICAgICAgICAgICAgICBlbHNlIGN0eC5maWxsU3R5bGUgPSAicmdiYSgyNTUsMjU1LDI1NSwwLjcpIjsNCiAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KHRleHQsIE1hdGguZmxvb3IoeCArIHdpZHRoIC8gMiksIE1hdGguZmxvb3IoeSArIDE2KSk7DQoNCiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICBzcHJpdGUsDQogICAgICAgICAgICAgICAgTWF0aC5mbG9vcihwaWMueCArIE1hdGgucmFuZG9tKCkgKiA0IC0gMiksDQogICAgICAgICAgICAgICAgTWF0aC5mbG9vcihwaWMueSArIE1hdGgucmFuZG9tKCkgKiA0IC0gMikNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vZWxzZSBpZiAoMSkgY3R4LmRyYXdJbWFnZShzcHJpdGUsMCwwLHNwcml0ZS53aWR0aCxzcHJpdGUuaGVpZ2h0LHBpYy54LHBpYy55LHNwcml0ZS53aWR0aCxzcHJpdGUuaGVpZ2h0KTsNCiAgICAgICAgICAgIGVsc2UgaWYgKHBpYy5mcmFtZSAhPSAtMSkNCiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICBzcHJpdGUsDQogICAgICAgICAgICAgICAgKHNwcml0ZS53aWR0aCAvIGZyYW1lcykgKiBwaWMuZnJhbWUsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICBzcHJpdGUud2lkdGggLyBmcmFtZXMsDQogICAgICAgICAgICAgICAgc3ByaXRlLmhlaWdodCwNCiAgICAgICAgICAgICAgICBwaWMueCwNCiAgICAgICAgICAgICAgICBwaWMueSwNCiAgICAgICAgICAgICAgICBzcHJpdGUud2lkdGggLyBmcmFtZXMsDQogICAgICAgICAgICAgICAgc3ByaXRlLmhlaWdodA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgZWxzZSBjdHguZHJhd0ltYWdlKHNwcml0ZSwgcGljLngsIHBpYy55KTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvKg0KCQkJCQl2YXIgcGljWD10aGlzLmlkOw0KCQkJCQl2YXIgcGljWT0xMjsNCgkJCQkJdmFyIHc9MTsNCgkJCQkJdmFyIGg9MTsNCgkJCQkJdmFyIHc9TWF0aC5hYnMoTWF0aC5jb3MoR2FtZS5UKjAuMit0aGlzLmlkKjItMC4zKSkqMC4yKzAuODsNCgkJCQkJdmFyIGg9TWF0aC5hYnMoTWF0aC5zaW4oR2FtZS5UKjAuMit0aGlzLmlkKjIpKSowLjMrMC43Ow0KCQkJCQl2YXIgeD02NCtNYXRoLmNvcyhHYW1lLlQqMC4xOSt0aGlzLmlkKjIpKjgtMjQqdzsNCgkJCQkJdmFyIHk9MTI4LU1hdGguYWJzKE1hdGgucG93KE1hdGguc2luKEdhbWUuVCowLjIrdGhpcy5pZCoyKSw1KSoxNiktNDgqaDsNCgkJCQkJY3R4LmRyYXdJbWFnZShQaWMoJ2ljb25zLnBuZycpLHBpY1gqNDgscGljWSo0OCw0OCw0OCxNYXRoLmZsb29yKHgpLE1hdGguZmxvb3IoeSksNDgqdyw0OCpoKTsNCgkJCQkJKi8NCiAgICAgICAgfTsNCiAgICAgIH0NCg0KICAgICAgR2FtZS5sYXN0ID0gdGhpczsNCiAgICAgIEdhbWUuT2JqZWN0c1t0aGlzLm5hbWVdID0gdGhpczsNCiAgICAgIEdhbWUuT2JqZWN0c0J5SWQucHVzaCh0aGlzKTsNCiAgICAgIEdhbWUuT2JqZWN0c04rKzsNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH07DQoNCiAgICBHYW1lLkRyYXdCdWlsZGluZ3MgPSBmdW5jdGlvbiAoKSAvL2RyYXcgYnVpbGRpbmcgZGlzcGxheXMgd2l0aCBjYW52YXMNCiAgICB7DQogICAgICBpZiAoR2FtZS5kcmF3VCAlIDMgPT0gMCkgew0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICAgIHZhciBtZSA9IEdhbWUuT2JqZWN0c1tpXTsNCiAgICAgICAgICBpZiAobWUuaWQgPiAwICYmICFtZS5vbk1pbmlnYW1lICYmICFtZS5tdXRlZCkgbWUuZHJhdygpOw0KICAgICAgICAgIGVsc2UgbWUucGljcyA9IFtdOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUuc29ydFNwcml0ZXMgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgaWYgKGEueiA+IGIueikgcmV0dXJuIDE7DQogICAgICBlbHNlIGlmIChhLnogPCBiLnopIHJldHVybiAtMTsNCiAgICAgIGVsc2UgcmV0dXJuIDA7DQogICAgfTsNCiAgICBHYW1lLnNvcnRTcHJpdGVzQnlJZCA9IGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICBpZiAoYS5pZCA+IGIuaWQpIHJldHVybiAxOw0KICAgICAgZWxzZSBpZiAoYS5pZCA8IGIuaWQpIHJldHVybiAtMTsNCiAgICAgIGVsc2UgcmV0dXJuIDA7DQogICAgfTsNCg0KICAgIEdhbWUubW9kaWZ5QnVpbGRpbmdQcmljZSA9IGZ1bmN0aW9uIChidWlsZGluZywgcHJpY2UpIHsNCiAgICAgIGlmIChHYW1lLkhhcygiU2Vhc29uIHNhdmluZ3MiKSkgcHJpY2UgKj0gMC45OTsNCiAgICAgIGlmIChHYW1lLkhhcygiU2FudGEncyBkb21pbmlvbiIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJGYWJlcmdlIGVnZyIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJEaXZpbmUgZGlzY291bnQiKSkgcHJpY2UgKj0gMC45OTsNCiAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSAjMTAwIikpIHByaWNlICo9IDAuOTk7DQogICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0ZpZXJjZSBIb2FyZGVyJykpIHByaWNlKj0wLjk4Ow0KICAgICAgcHJpY2UgKj0gMSAtIEdhbWUuYXVyYU11bHQoIkZpZXJjZSBIb2FyZGVyIikgKiAwLjAyOw0KICAgICAgaWYgKEdhbWUuaGFzQnVmZigiRXZlcnl0aGluZyBtdXN0IGdvIikpIHByaWNlICo9IDAuOTU7DQogICAgICBpZiAoR2FtZS5oYXNCdWZmKCJDcmFmdHkgcGl4aWVzIikpIHByaWNlICo9IDAuOTg7DQogICAgICBpZiAoR2FtZS5oYXNCdWZmKCJOYXN0eSBnb2JsaW5zIikpIHByaWNlICo9IDEuMDI7DQogICAgICBpZiAoYnVpbGRpbmcuZm9ydHVuZSAmJiBHYW1lLkhhcyhidWlsZGluZy5mb3J0dW5lLm5hbWUpKSBwcmljZSAqPSAwLjkzOw0KICAgICAgcHJpY2UgKj0gR2FtZS5lZmYoImJ1aWxkaW5nQ29zdCIpOw0KICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgiY3JlYXRpb24iKTsNCiAgICAgICAgaWYgKGdvZEx2bCA9PSAxKSBwcmljZSAqPSAwLjkzOw0KICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgcHJpY2UgKj0gMC45NTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIHByaWNlICo9IDAuOTg7DQogICAgICB9DQogICAgICByZXR1cm4gcHJpY2U7DQogICAgfTsNCg0KICAgIEdhbWUuc3RvcmVCdWxrQnV0dG9uID0gZnVuY3Rpb24gKGlkKSB7DQogICAgICBpZiAoaWQgPT0gMCkgR2FtZS5idXlNb2RlID0gMTsNCiAgICAgIGVsc2UgaWYgKGlkID09IDEpIEdhbWUuYnV5TW9kZSA9IC0xOw0KICAgICAgZWxzZSBpZiAoaWQgPT0gMikgR2FtZS5idXlCdWxrID0gMTsNCiAgICAgIGVsc2UgaWYgKGlkID09IDMpIEdhbWUuYnV5QnVsayA9IDEwOw0KICAgICAgZWxzZSBpZiAoaWQgPT0gNCkgR2FtZS5idXlCdWxrID0gMTAwOw0KICAgICAgZWxzZSBpZiAoaWQgPT0gNSkgR2FtZS5idXlCdWxrID0gLTE7DQoNCiAgICAgIGlmIChHYW1lLmJ1eU1vZGUgPT0gMSAmJiBHYW1lLmJ1eUJ1bGsgPT0gLTEpIEdhbWUuYnV5QnVsayA9IDEwMDsNCg0KICAgICAgaWYgKEdhbWUuYnV5TW9kZSA9PSAxKQ0KICAgICAgICBsKCJzdG9yZUJ1bGtCdXkiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrTW9kZSBzZWxlY3RlZCI7DQogICAgICBlbHNlIGwoInN0b3JlQnVsa0J1eSIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtNb2RlIjsNCiAgICAgIGlmIChHYW1lLmJ1eU1vZGUgPT0gLTEpDQogICAgICAgIGwoInN0b3JlQnVsa1NlbGwiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrTW9kZSBzZWxlY3RlZCI7DQogICAgICBlbHNlIGwoInN0b3JlQnVsa1NlbGwiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrTW9kZSI7DQoNCiAgICAgIGlmIChHYW1lLmJ1eUJ1bGsgPT0gMSkNCiAgICAgICAgbCgic3RvcmVCdWxrMSIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQgc2VsZWN0ZWQiOw0KICAgICAgZWxzZSBsKCJzdG9yZUJ1bGsxIikuY2xhc3NOYW1lID0gInN0b3JlUHJlQnV0dG9uIHN0b3JlQnVsa0Ftb3VudCI7DQogICAgICBpZiAoR2FtZS5idXlCdWxrID09IDEwKQ0KICAgICAgICBsKCJzdG9yZUJ1bGsxMCIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQgc2VsZWN0ZWQiOw0KICAgICAgZWxzZSBsKCJzdG9yZUJ1bGsxMCIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQiOw0KICAgICAgaWYgKEdhbWUuYnV5QnVsayA9PSAxMDApDQogICAgICAgIGwoInN0b3JlQnVsazEwMCIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQgc2VsZWN0ZWQiOw0KICAgICAgZWxzZSBsKCJzdG9yZUJ1bGsxMDAiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrQW1vdW50IjsNCiAgICAgIGlmIChHYW1lLmJ1eUJ1bGsgPT0gLTEpDQogICAgICAgIGwoInN0b3JlQnVsa01heCIpLmNsYXNzTmFtZSA9ICJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQgc2VsZWN0ZWQiOw0KICAgICAgZWxzZSBsKCJzdG9yZUJ1bGtNYXgiKS5jbGFzc05hbWUgPSAic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrQW1vdW50IjsNCg0KICAgICAgaWYgKEdhbWUuYnV5TW9kZSA9PSAxKSB7DQogICAgICAgIGwoInN0b3JlQnVsa01heCIpLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsNCiAgICAgICAgbCgicHJvZHVjdHMiKS5jbGFzc05hbWUgPSAic3RvcmVTZWN0aW9uIjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGwoInN0b3JlQnVsa01heCIpLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQogICAgICAgIGwoInByb2R1Y3RzIikuY2xhc3NOYW1lID0gInN0b3JlU2VjdGlvbiBzZWxsaW5nIjsNCiAgICAgIH0NCg0KICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICBpZiAoaWQgIT0gLTEpIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgfTsNCiAgICBHYW1lLkJ1aWxkU3RvcmUgPSBmdW5jdGlvbiAoKSAvL2NyZWF0ZSB0aGUgRE9NIGZvciB0aGUgc3RvcmUncyBidWlsZGluZ3MNCiAgICB7DQogICAgICAvL2lmICh0eXBlb2Ygc2hvd0FkcyE9PSd1bmRlZmluZWQnKSBsKCdzdG9yZScpLnNjcm9sbFRvcD0xMDA7DQoNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGRpdiBpZD0ic3RvcmVCdWxrIiBjbGFzcz0ic3RvcmVQcmUiICcgKw0KICAgICAgICBHYW1lLmdldFRvb2x0aXAoDQogICAgICAgICAgJzxkaXYgc3R5bGU9InBhZGRpbmc6OHB4O21pbi13aWR0aDoyMDBweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTFweDsiIGlkPSJ0b29sdGlwU3RvcmVCdWxrIj4nICsNCiAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgIllvdSBjYW4gYWxzbyBwcmVzcyAlMSB0byBidWxrLWJ1eSBvciBzZWxsICUyIG9mIGEgYnVpbGRpbmcgYXQgYSB0aW1lLCBvciAlMyBmb3IgJTQuIiwNCiAgICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICI8Yj4iICsgbG9jKCJDdHJsIikgKyAiPC9iPiIsDQogICAgICAgICAgICAgICAgIjxiPjEwPC9iPiIsDQogICAgICAgICAgICAgICAgIjxiPiIgKyBsb2MoIlNoaWZ0IikgKyAiPC9iPiIsDQogICAgICAgICAgICAgICAgIjxiPjEwMDwvYj4iLA0KICAgICAgICAgICAgICBdDQogICAgICAgICAgICApICsNCiAgICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAgICJzdG9yZSINCiAgICAgICAgKSArDQogICAgICAgICI+IiArDQogICAgICAgICc8ZGl2IGlkPSJzdG9yZUJ1bGtCdXkiIGNsYXNzPSJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtNb2RlIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuc3RvcmVCdWxrQnV0dG9uKDApOyI+JyArDQogICAgICAgIGxvYygiQnV5IikgKw0KICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICc8ZGl2IGlkPSJzdG9yZUJ1bGtTZWxsIiBjbGFzcz0ic3RvcmVQcmVCdXR0b24gc3RvcmVCdWxrTW9kZSIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLnN0b3JlQnVsa0J1dHRvbigxKTsiPicgKw0KICAgICAgICBsb2MoIlNlbGwiKSArDQogICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgJzxkaXYgaWQ9InN0b3JlQnVsazEiIGNsYXNzPSJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQiICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5zdG9yZUJ1bGtCdXR0b24oMik7Ij4xPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGlkPSJzdG9yZUJ1bGsxMCIgY2xhc3M9InN0b3JlUHJlQnV0dG9uIHN0b3JlQnVsa0Ftb3VudCIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLnN0b3JlQnVsa0J1dHRvbigzKTsiPjEwPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGlkPSJzdG9yZUJ1bGsxMDAiIGNsYXNzPSJzdG9yZVByZUJ1dHRvbiBzdG9yZUJ1bGtBbW91bnQiICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5zdG9yZUJ1bGtCdXR0b24oNCk7Ij4xMDA8L2Rpdj4nICsNCiAgICAgICAgJzxkaXYgaWQ9InN0b3JlQnVsa01heCIgY2xhc3M9InN0b3JlUHJlQnV0dG9uIHN0b3JlQnVsa0Ftb3VudCIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLnN0b3JlQnVsa0J1dHRvbig1KTsiPicgKw0KICAgICAgICBsb2MoImFsbCIpICsNCiAgICAgICAgIjwvZGl2PiIgKw0KICAgICAgICAiPC9kaXY+IjsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuT2JqZWN0c1tpXTsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgKEdhbWUucHJlZnMuc2NyZWVucmVhZGVyDQogICAgICAgICAgICA/ICc8YnV0dG9uIGFyaWEtbGFiZWxsZWRieT0iYXJpYVJlYWRlci1wcm9kdWN0LScgKyBtZS5pZCArICciJw0KICAgICAgICAgICAgOiAiPGRpdiIpICsNCiAgICAgICAgICAnIGNsYXNzPSJwcm9kdWN0IHRvZ2dsZWRPZmYiICcgKw0KICAgICAgICAgIEdhbWUuZ2V0RHluYW1pY1Rvb2x0aXAoDQogICAgICAgICAgICAiR2FtZS5PYmplY3RzQnlJZFsiICsgbWUuaWQgKyAiXS50b29sdGlwIiwNCiAgICAgICAgICAgICJzdG9yZSINCiAgICAgICAgICApICsNCiAgICAgICAgICAnIGlkPSJwcm9kdWN0JyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciPjxkaXYgY2xhc3M9Imljb24gb2ZmIiBpZD0icHJvZHVjdEljb25PZmYnICsNCiAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgJyIgc3R5bGU9IiI+PC9kaXY+PGRpdiBjbGFzcz0iaWNvbiIgaWQ9InByb2R1Y3RJY29uJyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciIHN0eWxlPSIiPjwvZGl2PjxkaXYgY2xhc3M9ImNvbnRlbnQiPjxkaXYgY2xhc3M9ImxvY2tlZFRpdGxlIj4/Pz88L2Rpdj48ZGl2IGNsYXNzPSJ0aXRsZSBwcm9kdWN0TmFtZSIgaWQ9InByb2R1Y3ROYW1lJyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciPjwvZGl2PjxzcGFuIGNsYXNzPSJwcmljZU11bHQiIGlkPSJwcm9kdWN0UHJpY2VNdWx0JyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciPjwvc3Bhbj48c3BhbiBjbGFzcz0icHJpY2UiIGlkPSJwcm9kdWN0UHJpY2UnICsNCiAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgJyI+PC9zcGFuPjxkaXYgY2xhc3M9InRpdGxlIG93bmVkIiBpZD0icHJvZHVjdE93bmVkJyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICciPjwvZGl2PicgKw0KICAgICAgICAgIChHYW1lLnByZWZzLnNjcmVlbnJlYWRlcg0KICAgICAgICAgICAgPyAnPGxhYmVsIGNsYXNzPSJzck9ubHkiIHN0eWxlPSJ3aWR0aDo2NHB4O2xlZnQ6LTY0cHg7IiBpZD0iYXJpYVJlYWRlci1wcm9kdWN0LScgKw0KICAgICAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgICAgICciPjwvbGFiZWw+Jw0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAvKic8ZGl2IGNsYXNzPSJidXlTZWxsIj48ZGl2IHN0eWxlPSJsZWZ0OjBweDsiIGlkPSJidXR0b25CdXkxMC0nK21lLmlkKyciPkJ1eSAxMDwvZGl2PjxkaXYgc3R5bGU9ImxlZnQ6MTAwcHg7IiBpZD0iYnV0dG9uU2VsbC0nK21lLmlkKyciPlNlbGwgMTwvZGl2PjxkaXYgc3R5bGU9ImxlZnQ6MjAwcHg7IiBpZD0iYnV0dG9uU2VsbEFsbC0nK21lLmlkKyciPlNlbGwgYWxsPC9kaXY+PC9kaXY+JysqLw0KICAgICAgICAgIChHYW1lLnByZWZzLnNjcmVlbnJlYWRlciA/ICI8L2J1dHRvbj4iIDogIjwvZGl2PiIpOw0KICAgICAgfQ0KICAgICAgbCgicHJvZHVjdHMiKS5pbm5lckhUTUwgPSBzdHI7DQoNCiAgICAgIEdhbWUuc3RvcmVCdWxrQnV0dG9uKC0xKTsNCg0KICAgICAgLyp2YXIgU2VsbEFsbFByb21wdD1mdW5jdGlvbihpZCkNCgkJCXsNCgkJCQlyZXR1cm4gZnVuY3Rpb24oaWQpe0dhbWUuUHJvbXB0KCc8ZGl2IGNsYXNzPSJibG9jayI+RG8geW91IHJlYWxseSB3YW50IHRvIHNlbGwgeW91ciAnK2xvYygiJTEgIitHYW1lLk9iamVjdHNCeUlkW2lkXS5ic2luZ2xlLExCZWF1dGlmeShHYW1lLk9iamVjdHNCeUlkW2lkXS5hbW91bnQpKSsnPzwvZGl2PicsW1snWWVzJywnR2FtZS5PYmplY3RzQnlJZFsnK2lkKyddLnNlbGwoLTEpO0dhbWUuQ2xvc2VQcm9tcHQoKTsnXSxbJ05vJywnR2FtZS5DbG9zZVByb21wdCgpOyddXSk7fShpZCk7DQoJCQl9Ki8NCg0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBtZS5sID0gbCgicHJvZHVjdCIgKyBtZS5pZCk7DQoNCiAgICAgICAgLy90aGVzZSBhcmUgYSBiaXQgbWVzc3kgYnV0IGFoIHdlbGwNCiAgICAgICAgaWYgKCFHYW1lLnRvdWNoRXZlbnRzKSB7DQogICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICBtZS5sLA0KICAgICAgICAgICAgImNsaWNrIiwNCiAgICAgICAgICAgIChmdW5jdGlvbiAod2hhdCkgew0KICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICBHYW1lLkNsaWNrUHJvZHVjdCh3aGF0KTsNCiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9KShtZS5pZCkNCiAgICAgICAgICApOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIEFkZEV2ZW50KA0KICAgICAgICAgICAgbWUubCwNCiAgICAgICAgICAgICJ0b3VjaGVuZCIsDQogICAgICAgICAgICAoZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICAgICAgR2FtZS5DbGlja1Byb2R1Y3Qod2hhdCk7DQogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSkobWUuaWQpDQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLkNsaWNrUHJvZHVjdCA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBHYW1lLk9iamVjdHNCeUlkW3doYXRdLmJ1eSgpOw0KICAgIH07DQoNCiAgICBHYW1lLlJlZnJlc2hTdG9yZSA9IGZ1bmN0aW9uICgpIC8vcmVmcmVzaCB0aGUgc3RvcmUncyBidWlsZGluZ3MNCiAgICB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBHYW1lLk9iamVjdHNbaV0ucmVmcmVzaCgpOw0KICAgICAgfQ0KICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDA7DQogICAgfTsNCg0KICAgIEdhbWUuQ29tcHV0ZUNwcyA9IGZ1bmN0aW9uIChiYXNlLCBtdWx0LCBib251cykgew0KICAgICAgaWYgKCFib251cykgYm9udXMgPSAwOw0KICAgICAgcmV0dXJuIGJhc2UgKiBNYXRoLnBvdygyLCBtdWx0KSArIGJvbnVzOw0KICAgIH07DQoNCiAgICBHYW1lLmlzTWluaWdhbWVSZWFkeSA9IGZ1bmN0aW9uIChtZSkgew0KICAgICAgcmV0dXJuIG1lLm1pbmlnYW1lVXJsICYmIG1lLm1pbmlnYW1lTG9hZGVkICYmIG1lLmxldmVsID4gMDsNCiAgICB9Ow0KICAgIEdhbWUuc2NyaXB0QmluZGluZ3MgPSBbXTsNCiAgICBHYW1lLnNob3dlZFNjcmlwdExvYWRFcnJvciA9IGZhbHNlOw0KICAgIEdhbWUuTG9hZE1pbmlnYW1lcyA9IGZ1bmN0aW9uICgpIC8vbG9hZCBzY3JpcHRzIGZvciBlYWNoIG1pbmlnYW1lDQogICAgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAoDQogICAgICAgICAgbWUubWluaWdhbWVVcmwgJiYNCiAgICAgICAgICBtZS5sZXZlbCA+IDAgJiYNCiAgICAgICAgICAhbWUubWluaWdhbWVMb2FkZWQgJiYNCiAgICAgICAgICAhbWUubWluaWdhbWVMb2FkaW5nICYmDQogICAgICAgICAgIWwoIm1pbmlnYW1lU2NyaXB0LSIgKyBtZS5pZCkNCiAgICAgICAgKSB7DQogICAgICAgICAgbWUubWluaWdhbWVMb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICAvL3dlJ3JlIG9ubHkgbG9hZGluZyB0aGUgbWluaWdhbWUgc2NyaXB0cyB0aGF0IGFyZW4ndCBsb2FkZWQgeWV0IGFuZCB3aGljaCBoYXZlIGVub3VnaCBidWlsZGluZyBsZXZlbA0KICAgICAgICAgIC8vd2UgY2FsbCB0aGlzIGZ1bmN0aW9uIG9uIGJ1aWxkaW5nIGxldmVsIHVwIGFuZCBvbiBsb2FkDQogICAgICAgICAgLy9jb25zb2xlLmxvZygnTG9hZGluZyBzY3JpcHQgJyttZS5taW5pZ2FtZVVybCsnLi4uJyk7DQogICAgICAgICAgc2V0VGltZW91dCgNCiAgICAgICAgICAgIChmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQogICAgICAgICAgICAgICAgc2NyaXB0LmlkID0gIm1pbmlnYW1lU2NyaXB0LSIgKyBtZS5pZDsNCiAgICAgICAgICAgICAgICBHYW1lLnNjcmlwdEJpbmRpbmdzWyJtaW5pZ2FtZVNjcmlwdC0iICsgbWUuaWRdID0gbWU7DQogICAgICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgNCiAgICAgICAgICAgICAgICAgICJzcmMiLA0KICAgICAgICAgICAgICAgICAgbWUubWluaWdhbWVVcmwgKyAiP3I9IiArIEdhbWUudmVyc2lvbg0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IChmdW5jdGlvbiAobWUsIHNjcmlwdCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZS5taW5pZ2FtZUxvYWRlZCkgR2FtZS5zY3JpcHRMb2FkZWQobWUsIHNjcmlwdCk7DQogICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIH0pKG1lLCAibWluaWdhbWVTY3JpcHQtIiArIG1lLmlkKTsNCiAgICAgICAgICAgICAgICBzY3JpcHQub25lcnJvciA9IChmdW5jdGlvbiAobWUsIHNjcmlwdCkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgbWUubWluaWdhbWVMb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGlmICghbWUubWluaWdhbWVMb2FkZWQgJiYgIUdhbWUuc2hvd2VkU2NyaXB0TG9hZEVycm9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgR2FtZS5zaG93ZWRTY3JpcHRMb2FkRXJyb3IgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jKCJFcnJvciEiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb3VsZG4ndCBsb2FkIG1pbmlnYW1lcy4gVHJ5IHJlbG9hZGluZy4iDQogICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9KShtZSwgIm1pbmlnYW1lU2NyaXB0LSIgKyBtZS5pZCk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOw0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSkobWUpLA0KICAgICAgICAgICAgMTANCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLnNjcmlwdExvYWRlZCA9IGZ1bmN0aW9uICh3aG8sIHNjcmlwdCkgew0KICAgICAgd2hvLm1pbmlnYW1lTG9hZGluZyA9IGZhbHNlOw0KICAgICAgd2hvLm1pbmlnYW1lTG9hZGVkID0gdHJ1ZTsNCiAgICAgIHdoby5yZWZyZXNoKCk7DQogICAgICB3aG8ubWluaWdhbWUubGF1bmNoKCk7DQogICAgICBpZiAod2hvLm1pbmlnYW1lU2F2ZSkgew0KICAgICAgICB3aG8ubWluaWdhbWUucmVzZXQodHJ1ZSk7DQogICAgICAgIHdoby5taW5pZ2FtZS5sb2FkKHdoby5taW5pZ2FtZVNhdmUpOw0KICAgICAgICB3aG8ubWluaWdhbWVTYXZlID0gMDsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgR2FtZS5tYWdpY0NwUyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICAvKg0KCQkJaWYgKEdhbWUuT2JqZWN0c1t3aGF0XS5hbW91bnQ+PTI1MCkNCgkJCXsNCgkJCQkvL3RoaXMgbWFrZXMgYnVpbGRpbmdzIGdpdmUgMSUgbW9yZSBjb29raWVzIGZvciBldmVyeSBidWlsZGluZyBvdmVyIDI1MC4NCgkJCQkvL3RoaXMgdHVybnMgb3V0IHRvIGJlIHJhdGhlciBzdHVwaWRseSBvdmVycG93ZXJlZC4NCgkJCQl2YXIgbj1HYW1lLk9iamVjdHNbd2hhdF0uYW1vdW50LTI1MDsNCgkJCQlyZXR1cm4gMStNYXRoLnBvdygxLjAxLG4pOw0KCQkJfQ0KCQkJZWxzZSByZXR1cm4gMTsNCgkJCSovDQogICAgICByZXR1cm4gMTsNCiAgICB9Ow0KDQogICAgLy9kZWZpbmUgb2JqZWN0cw0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJDdXJzb3IiLA0KICAgICAgImN1cnNvcnxjdXJzb3JzfGNsaWNrZWR8W1hdIGV4dHJhIGZpbmdlcnxbWF0gZXh0cmEgZmluZ2VycyIsDQogICAgICAiQXV0b2NsaWNrcyBvbmNlIGV2ZXJ5IDEwIHNlY29uZHMuIiwNCiAgICAgIDAsDQogICAgICAwLA0KICAgICAge30sDQogICAgICAxNSwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgYWRkID0gMDsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJUaG91c2FuZCBmaW5nZXJzIikpIGFkZCArPSAwLjE7DQogICAgICAgIGlmIChHYW1lLkhhcygiTWlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSA1Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkJpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMTA7DQogICAgICAgIGlmIChHYW1lLkhhcygiVHJpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICAgIGlmIChHYW1lLkhhcygiUXVhZHJpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICAgIGlmIChHYW1lLkhhcygiUXVpbnRpbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICAgIGlmIChHYW1lLkhhcygiU2V4dGlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSAyMDsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJTZXB0aWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIk9jdGlsbGlvbiBmaW5nZXJzIikpIGFkZCAqPSAyMDsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJOb25pbGxpb24gZmluZ2VycyIpKSBhZGQgKj0gMjA7DQogICAgICAgIGlmIChHYW1lLkhhcygiRGVjaWxsaW9uIGZpbmdlcnMiKSkgYWRkICo9IDIwOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIlVuc2hhY2tsZWQgY3Vyc29ycyIpKSBhZGQgKj0gMjU7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgdmFyIG51bSA9IDA7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgaWYgKEdhbWUuT2JqZWN0c1tpXS5uYW1lICE9ICJDdXJzb3IiKSBudW0gKz0gR2FtZS5PYmplY3RzW2ldLmFtb3VudDsNCiAgICAgICAgfQ0KICAgICAgICBhZGQgPSBhZGQgKiBudW07DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKCJDdXJzb3IiKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLmVmZigiY3Vyc29yQ3BzIik7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgR2FtZS5Db21wdXRlQ3BzKA0KICAgICAgICAgICAgMC4xLA0KICAgICAgICAgICAgR2FtZS5IYXMoIlJlaW5mb3JjZWQgaW5kZXggZmluZ2VyIikgKw0KICAgICAgICAgICAgICBHYW1lLkhhcygiQ2FycGFsIHR1bm5lbCBwcmV2ZW50aW9uIGNyZWFtIikgKw0KICAgICAgICAgICAgICBHYW1lLkhhcygiQW1iaWRleHRyb3VzIiksDQogICAgICAgICAgICBhZGQNCiAgICAgICAgICApICogbXVsdA0KICAgICAgICApOw0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDEpDQogICAgICAgICAgR2FtZS5VbmxvY2soWw0KICAgICAgICAgICAgIlJlaW5mb3JjZWQgaW5kZXggZmluZ2VyIiwNCiAgICAgICAgICAgICJDYXJwYWwgdHVubmVsIHByZXZlbnRpb24gY3JlYW0iLA0KICAgICAgICAgIF0pOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMTApIEdhbWUuVW5sb2NrKCJBbWJpZGV4dHJvdXMiKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDI1KSBHYW1lLlVubG9jaygiVGhvdXNhbmQgZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gNTApIEdhbWUuVW5sb2NrKCJNaWxsaW9uIGZpbmdlcnMiKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDEwMCkgR2FtZS5VbmxvY2soIkJpbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMTUwKSBHYW1lLlVubG9jaygiVHJpbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMjAwKSBHYW1lLlVubG9jaygiUXVhZHJpbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMjUwKSBHYW1lLlVubG9jaygiUXVpbnRpbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMzAwKSBHYW1lLlVubG9jaygiU2V4dGlsbGlvbiBmaW5nZXJzIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSAzNTApIEdhbWUuVW5sb2NrKCJTZXB0aWxsaW9uIGZpbmdlcnMiKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDQwMCkgR2FtZS5VbmxvY2soIk9jdGlsbGlvbiBmaW5nZXJzIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSA0NTApIEdhbWUuVW5sb2NrKCJOb25pbGxpb24gZmluZ2VycyIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gNTAwKSBHYW1lLlVubG9jaygiRGVjaWxsaW9uIGZpbmdlcnMiKTsNCg0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gMSkgR2FtZS5XaW4oIkNsaWNrIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSAyKSBHYW1lLldpbigiRG91YmxlLWNsaWNrIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSA1MCkgR2FtZS5XaW4oIk1vdXNlIHdoZWVsIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSAxMDApIEdhbWUuV2luKCJPZiBNaWNlIGFuZCBNZW4iKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDIwMCkgR2FtZS5XaW4oIlRoZSBEaWdpdGFsIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSAzMDApIEdhbWUuV2luKCJFeHRyZW1lIHBvbHlkYWN0eWx5Iik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSA0MDApIEdhbWUuV2luKCJEci4gVCIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gNTAwKSBHYW1lLldpbigiVGh1bWJzLCBwaGFsYW5nZXMsIG1ldGFjYXJwYWxzIik7DQogICAgICAgIGlmICh0aGlzLmFtb3VudCA+PSA2MDApIEdhbWUuV2luKCJXaXRoIGhlciBmaW5nZXIgYW5kIGhlciB0aHVtYiIpOw0KICAgICAgICBpZiAodGhpcy5hbW91bnQgPj0gNzAwKSBHYW1lLldpbigiR290dGEgaGFuZCBpdCB0byB5b3UiKTsNCiAgICAgICAgaWYgKHRoaXMuYW1vdW50ID49IDgwMCkgR2FtZS5XaW4oIlRoZSBkZXZpbCdzIHdvcmtzaG9wIik7DQogICAgICB9DQogICAgKTsNCg0KICAgIEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgPSAxNTsNCiAgICBuZXcgR2FtZS5PYmplY3QoDQogICAgICAiR3JhbmRtYSIsDQogICAgICAiZ3JhbmRtYXxncmFuZG1hc3xiYWtlZHxHcmFuZG1hcyBhcmUgW1hdIHllYXIgb2xkZXJ8R3JhbmRtYXMgYXJlIFtYXSB5ZWFycyBvbGRlciIsDQogICAgICAiQSBuaWNlIGdyYW5kbWEgdG8gYmFrZSBtb3JlIGNvb2tpZXMuIiwNCiAgICAgIDEsDQogICAgICAxLA0KICAgICAgew0KICAgICAgICBwaWM6IGZ1bmN0aW9uIChpKSB7DQogICAgICAgICAgdmFyIGxpc3QgPSBbImdyYW5kbWEiXTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkZhcm1lciBncmFuZG1hcyIpKSBsaXN0LnB1c2goImZhcm1lckdyYW5kbWEiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIldvcmtlciBncmFuZG1hcyIpKSBsaXN0LnB1c2goIndvcmtlckdyYW5kbWEiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIk1pbmVyIGdyYW5kbWFzIikpIGxpc3QucHVzaCgibWluZXJHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJDb3NtaWMgZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJjb3NtaWNHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJUcmFuc211dGVkIGdyYW5kbWFzIikpIGxpc3QucHVzaCgidHJhbnNtdXRlZEdyYW5kbWEiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkFsdGVyZWQgZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJhbHRlcmVkR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiR3JhbmRtYXMnIGdyYW5kbWFzIikpIGxpc3QucHVzaCgiZ3JhbmRtYXNHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJBbnRpZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJhbnRpR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiUmFpbmJvdyBncmFuZG1hcyIpKSBsaXN0LnB1c2goInJhaW5ib3dHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJCYW5rZXIgZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJiYW5rR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiUHJpZXN0ZXNzIGdyYW5kbWFzIikpIGxpc3QucHVzaCgidGVtcGxlR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiV2l0Y2ggZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJ3aXRjaEdyYW5kbWEiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkx1Y2t5IGdyYW5kbWFzIikpIGxpc3QucHVzaCgibHVja3lHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJNZXRhZ3JhbmRtYXMiKSkgbGlzdC5wdXNoKCJtZXRhR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiU2NyaXB0IGdyYW5uaWVzIikpIGxpc3QucHVzaCgic2NyaXB0R3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiQWx0ZXJuYXRlIGdyYW5kbWFzIikpIGxpc3QucHVzaCgiYWx0ZXJuYXRlR3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiQnJhaW55IGdyYW5kbWFzIikpIGxpc3QucHVzaCgiYnJhaW55R3JhbmRtYSIpOw0KICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAiY2hyaXN0bWFzIikgbGlzdC5wdXNoKCJlbGZHcmFuZG1hIik7DQogICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJlYXN0ZXIiKSBsaXN0LnB1c2goImJ1bm55R3JhbmRtYSIpOw0KICAgICAgICAgIHJldHVybiBjaG9vc2UobGlzdCkgKyAiLnBuZyI7DQogICAgICAgIH0sDQogICAgICAgIGJnOiAiZ3JhbmRtYUJhY2tncm91bmQucG5nIiwNCiAgICAgICAgeFY6IDgsDQogICAgICAgIHlWOiA4LA0KICAgICAgICB3OiAzMiwNCiAgICAgICAgcm93czogMywNCiAgICAgICAgeDogMCwNCiAgICAgICAgeTogMTYsDQogICAgICB9LA0KICAgICAgMTAwLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLkdyYW5kbWFTeW5lcmdpZXMpIHsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoR2FtZS5HcmFuZG1hU3luZXJnaWVzW2ldKSkgbXVsdCAqPSAyOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLkhhcygiQmluZ28gY2VudGVyL1Jlc2VhcmNoIGZhY2lsaXR5IikpIG11bHQgKj0gNDsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJSaXR1YWwgcm9sbGluZyBwaW5zIikpIG11bHQgKj0gMjsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJOYXVnaHR5IGxpc3QiKSkgbXVsdCAqPSAyOw0KDQogICAgICAgIGlmIChHYW1lLkhhcygiRWxkZXJ3b3J0IGJpc2N1aXRzIikpIG11bHQgKj0gMS4wMjsNCg0KICAgICAgICBtdWx0ICo9IEdhbWUuZWZmKCJncmFuZG1hQ3BzIik7DQoNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJDYXQgbGFkaWVzIikpIHsNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUuVXBncmFkZXNCeVBvb2xbImtpdHRlbiJdLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXMoR2FtZS5VcGdyYWRlc0J5UG9vbFsia2l0dGVuIl1baV0ubmFtZSkpIG11bHQgKj0gMS4yOTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBtdWx0ICo9IEdhbWUuR2V0VGllcmVkQ3BzTXVsdChtZSk7DQoNCiAgICAgICAgdmFyIGFkZCA9IDA7DQogICAgICAgIGlmIChHYW1lLkhhcygiT25lIG1pbmQiKSkgYWRkICs9IEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCAqIDAuMDI7DQogICAgICAgIGlmIChHYW1lLkhhcygiQ29tbXVuYWwgYnJhaW5zd2VlcCIpKQ0KICAgICAgICAgIGFkZCArPSBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgKiAwLjAyOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIkVsZGVyIFBhY3QiKSkgYWRkICs9IEdhbWUuT2JqZWN0c1siUG9ydGFsIl0uYW1vdW50ICogMC4wNTsNCg0KICAgICAgICB2YXIgbnVtID0gMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLm5hbWUgIT0gIkdyYW5kbWEiKSBudW0gKz0gR2FtZS5PYmplY3RzW2ldLmFtb3VudDsNCiAgICAgICAgfQ0KICAgICAgICAvL2lmIChHYW1lLmhhc0F1cmEoJ0VsZGVyIEJhdHRhbGlvbicpKSBtdWx0Kj0xKzAuMDEqbnVtOw0KICAgICAgICBtdWx0ICo9IDEgKyBHYW1lLmF1cmFNdWx0KCJFbGRlciBCYXR0YWxpb24iKSAqIDAuMDEgKiBudW07DQoNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KDQogICAgICAgIHJldHVybiAobWUuYmFzZUNwcyArIGFkZCkgKiBtdWx0Ow0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VbmxvY2tUaWVyZWQodGhpcyk7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3Quc2VsbEZ1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5XaW4oIkp1c3Qgd3JvbmciKTsNCiAgICAgIGlmICh0aGlzLmFtb3VudCA9PSAwKSB7DQogICAgICAgIEdhbWUuTG9jaygiRWxkZXIgUGxlZGdlIik7DQogICAgICAgIEdhbWUuQ29sbGVjdFdyaW5rbGVycygpOw0KICAgICAgICBHYW1lLnBsZWRnZVQgPSAwOw0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5sYXN0Lmljb25GdW5jID0gZnVuY3Rpb24gKHR5cGUpIHsNCiAgICAgIHZhciBncmFuZG1hSWNvbnMgPSBbDQogICAgICAgIFswLCAxXSwNCiAgICAgICAgWzAsIDJdLA0KICAgICAgICBbMSwgMl0sDQogICAgICAgIFsyLCAyXSwNCiAgICAgIF07DQogICAgICBpZiAodHlwZSA9PSAib2ZmIikgcmV0dXJuIFswLCAxXTsNCiAgICAgIGlmIChHYW1lLnByZWZzLm5vdFNjYXJ5ICYmIEdhbWUuZWxkZXJXcmF0aCA+IDApIHJldHVybiBbMywgMl07DQogICAgICByZXR1cm4gZ3JhbmRtYUljb25zW0dhbWUuZWxkZXJXcmF0aF07DQogICAgfTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJGYXJtIiwNCiAgICAgICJmYXJtfGZhcm1zfGhhcnZlc3RlZHxbWF0gbW9yZSBhY3JlfFtYXSBtb3JlIGFjcmVzIiwNCiAgICAgICJHcm93cyBjb29raWUgcGxhbnRzIGZyb20gY29va2llIHNlZWRzLiIsDQogICAgICAzLA0KICAgICAgMiwNCiAgICAgIHsgYmFzZTogImZhcm0iLCB4VjogOCwgeVY6IDgsIHc6IDY0LCByb3dzOiAyLCB4OiAwLCB5OiAxNiB9LA0KICAgICAgNTAwLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5taW5pZ2FtZVVybCA9ICJtaW5pZ2FtZUdhcmRlbi5qcyI7DQogICAgR2FtZS5sYXN0Lm1pbmlnYW1lTmFtZSA9IGxvYygiR2FyZGVuIik7DQoNCiAgICBuZXcgR2FtZS5PYmplY3QoDQogICAgICAiTWluZSIsDQogICAgICAibWluZXxtaW5lc3xtaW5lZHxbWF0gbWlsZSBkZWVwZXJ8W1hdIG1pbGVzIGRlZXBlciIsDQogICAgICAiTWluZXMgb3V0IGNvb2tpZSBkb3VnaCBhbmQgY2hvY29sYXRlIGNoaXBzLiIsDQogICAgICA0LA0KICAgICAgMywNCiAgICAgIHsgYmFzZTogIm1pbmUiLCB4VjogMTYsIHlWOiAxNiwgdzogNjQsIHJvd3M6IDIsIHg6IDAsIHk6IDI0IH0sDQogICAgICAxMDAwMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgICJmYWN0b3J5fGZhY3Rvcmllc3xtYXNzLXByb2R1Y2VkfFtYXSBhZGRpdGlvbmFsIHBhdGVudHxbWF0gYWRkaXRpb25hbCBwYXRlbnRzIiwNCiAgICAgICJQcm9kdWNlcyBsYXJnZSBxdWFudGl0aWVzIG9mIGNvb2tpZXMuIiwNCiAgICAgIDUsDQogICAgICA0LA0KICAgICAgeyBiYXNlOiAiZmFjdG9yeSIsIHhWOiA4LCB5VjogMCwgdzogNjQsIHJvd3M6IDEsIHg6IDAsIHk6IC0yMiB9LA0KICAgICAgMzAwMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCiAgICAvL0dhbWUubGFzdC5taW5pZ2FtZVVybD0nbWluaWdhbWVEdW5nZW9uLmpzJzsvL25vdCB5ZXQNCiAgICBHYW1lLmxhc3QubWluaWdhbWVOYW1lID0gbG9jKCJEdW5nZW9uIik7DQoNCiAgICBuZXcgR2FtZS5PYmplY3QoDQogICAgICAiQmFuayIsDQogICAgICAiYmFua3xiYW5rc3xiYW5rZWR8SW50ZXJlc3QgcmF0ZXMgW1hdJSBiZXR0ZXJ8SW50ZXJlc3QgcmF0ZXMgW1hdJSBiZXR0ZXIiLA0KICAgICAgIkdlbmVyYXRlcyBjb29raWVzIGZyb20gaW50ZXJlc3QuIiwNCiAgICAgIDYsDQogICAgICAxNSwNCiAgICAgIHsgYmFzZTogImJhbmsiLCB4VjogOCwgeVY6IDQsIHc6IDU2LCByb3dzOiAxLCB4OiAwLCB5OiAxMyB9LA0KICAgICAgMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QubWluaWdhbWVVcmwgPSAibWluaWdhbWVNYXJrZXQuanMiOw0KICAgIEdhbWUubGFzdC5taW5pZ2FtZU5hbWUgPSBsb2MoIlN0b2NrIE1hcmtldCIpOw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIlRlbXBsZSIsDQogICAgICAidGVtcGxlfHRlbXBsZXN8ZGlzY292ZXJlZHxbWF0gc2FjcmVkIGFydGlmYWN0IHJldHJpZXZlZHxbWF0gc2FjcmVkIGFydGlmYWN0cyByZXRyaWV2ZWQiLA0KICAgICAgIkZ1bGwgb2YgcHJlY2lvdXMsIGFuY2llbnQgY2hvY29sYXRlLiIsDQogICAgICA3LA0KICAgICAgMTYsDQogICAgICB7IGJhc2U6ICJ0ZW1wbGUiLCB4VjogOCwgeVY6IDQsIHc6IDcyLCByb3dzOiAyLCB4OiAwLCB5OiAtNSB9LA0KICAgICAgMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QubWluaWdhbWVVcmwgPSAibWluaWdhbWVQYW50aGVvbi5qcyI7DQogICAgR2FtZS5sYXN0Lm1pbmlnYW1lTmFtZSA9IGxvYygiUGFudGhlb24iKTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgIndpemFyZCB0b3dlcnx3aXphcmQgdG93ZXJzfHN1bW1vbmVkfEluY2FudGF0aW9ucyBoYXZlIFtYXSBtb3JlIHN5bGxhYmxlfEluY2FudGF0aW9ucyBoYXZlIFtYXSBtb3JlIHN5bGxhYmxlcyIsDQogICAgICAiU3VtbW9ucyBjb29raWVzIHdpdGggbWFnaWMgc3BlbGxzLiIsDQogICAgICA4LA0KICAgICAgMTcsDQogICAgICB7IGJhc2U6ICJ3aXphcmR0b3dlciIsIHhWOiAxNiwgeVY6IDE2LCB3OiA0OCwgcm93czogMiwgeDogMCwgeTogMjAgfSwNCiAgICAgIDAsDQogICAgICBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgdmFyIG11bHQgPSAxOw0KICAgICAgICBtdWx0ICo9IEdhbWUuR2V0VGllcmVkQ3BzTXVsdChtZSk7DQogICAgICAgIG11bHQgKj0gR2FtZS5tYWdpY0NwUyhtZS5uYW1lKTsNCiAgICAgICAgcmV0dXJuIG1lLmJhc2VDcHMgKiBtdWx0Ow0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VbmxvY2tUaWVyZWQodGhpcyk7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLmFtb3VudCA+PSBHYW1lLlNwZWNpYWxHcmFuZG1hVW5sb2NrICYmDQogICAgICAgICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5VbmxvY2sodGhpcy5ncmFuZG1hLm5hbWUpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRpc3BsYXlOYW1lID0NCiAgICAgICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjkwJTtsZXR0ZXItc3BhY2luZzotMXB4O3Bvc2l0aW9uOnJlbGF0aXZlO2JvdHRvbToycHg7Ij5XaXphcmQgdG93ZXI8L3NwYW4+JzsgLy9zaHJpbmsNCiAgICBHYW1lLmxhc3QubWluaWdhbWVVcmwgPSAibWluaWdhbWVHcmltb2lyZS5qcyI7DQogICAgR2FtZS5sYXN0Lm1pbmlnYW1lTmFtZSA9IGxvYygiR3JpbW9pcmUiKTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAic2hpcG1lbnR8c2hpcG1lbnRzfHNoaXBwZWR8W1hdIGdhbGF4eSBmdWxseSBleHBsb3JlZHxbWF0gZ2FsYXhpZXMgZnVsbHkgZXhwbG9yZWQiLA0KICAgICAgIkJyaW5ncyBpbiBmcmVzaCBjb29raWVzIGZyb20gdGhlIGNvb2tpZSBwbGFuZXQuIiwNCiAgICAgIDksDQogICAgICA1LA0KICAgICAgeyBiYXNlOiAic2hpcG1lbnQiLCB4VjogMTYsIHlWOiAxNiwgdzogNjQsIHJvd3M6IDEsIHg6IDAsIHk6IDAgfSwNCiAgICAgIDQwMDAwLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgICJhbGNoZW15IGxhYnxhbGNoZW15IGxhYnN8dHJhbnNtdXRlZHxbWF0gcHJpbW9yZGlhbCBlbGVtZW50IG1hc3RlcmVkfFtYXSBwcmltb3JkaWFsIGVsZW1lbnRzIG1hc3RlcmVkIiwNCiAgICAgICJUdXJucyBnb2xkIGludG8gY29va2llcyEiLA0KICAgICAgMTAsDQogICAgICA2LA0KICAgICAgeyBiYXNlOiAiYWxjaGVteWxhYiIsIHhWOiAxNiwgeVY6IDE2LCB3OiA2NCwgcm93czogMiwgeDogMCwgeTogMTYgfSwNCiAgICAgIDIwMDAwMCwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QuZGlzcGxheU5hbWUgPQ0KICAgICAgJzxzcGFuIHN0eWxlPSJmb250LXNpemU6OTAlO2xldHRlci1zcGFjaW5nOi0xcHg7cG9zaXRpb246cmVsYXRpdmU7Ym90dG9tOjJweDsiPkFsY2hlbXkgbGFiPC9zcGFuPic7IC8vc2hyaW5rDQoNCiAgICBuZXcgR2FtZS5PYmplY3QoDQogICAgICAiUG9ydGFsIiwNCiAgICAgICJwb3J0YWx8cG9ydGFsc3xyZXRyaWV2ZWR8W1hdIGRpbWVuc2lvbiBlbnNsYXZlZHxbWF0gZGltZW5zaW9ucyBlbnNsYXZlZCIsDQogICAgICAiT3BlbnMgYSBkb29yIHRvIHRoZSBDb29raWV2ZXJzZS4iLA0KICAgICAgMTEsDQogICAgICA3LA0KICAgICAgeyBiYXNlOiAicG9ydGFsIiwgeFY6IDMyLCB5VjogMzIsIHc6IDY0LCByb3dzOiAyLCB4OiAwLCB5OiAwIH0sDQogICAgICAxNjY2NjY2LA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAidGltZSBtYWNoaW5lfHRpbWUgbWFjaGluZXN8cmVjb3ZlcmVkfFtYXSBjZW50dXJ5IHNlY3VyZWR8W1hdIGNlbnR1cmllcyBzZWN1cmVkIiwNCiAgICAgICJCcmluZ3MgY29va2llcyBmcm9tIHRoZSBwYXN0LCBiZWZvcmUgdGhleSB3ZXJlIGV2ZW4gZWF0ZW4uIiwNCiAgICAgIDEyLA0KICAgICAgOCwNCiAgICAgIHsgYmFzZTogInRpbWVtYWNoaW5lIiwgeFY6IDMyLCB5VjogMzIsIHc6IDY0LCByb3dzOiAxLCB4OiAwLCB5OiAwIH0sDQogICAgICAxMjM0NTY3ODksDQogICAgICBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgdmFyIG11bHQgPSAxOw0KICAgICAgICBtdWx0ICo9IEdhbWUuR2V0VGllcmVkQ3BzTXVsdChtZSk7DQogICAgICAgIG11bHQgKj0gR2FtZS5tYWdpY0NwUyhtZS5uYW1lKTsNCiAgICAgICAgcmV0dXJuIG1lLmJhc2VDcHMgKiBtdWx0Ow0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VbmxvY2tUaWVyZWQodGhpcyk7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLmFtb3VudCA+PSBHYW1lLlNwZWNpYWxHcmFuZG1hVW5sb2NrICYmDQogICAgICAgICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5VbmxvY2sodGhpcy5ncmFuZG1hLm5hbWUpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRpc3BsYXlOYW1lID0NCiAgICAgICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjgwJTtsZXR0ZXItc3BhY2luZzotMXB4O3Bvc2l0aW9uOnJlbGF0aXZlO2JvdHRvbTozcHg7Ij5UaW1lIG1hY2hpbmU8L3NwYW4+JzsgLy9zaHJpbmsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAiYW50aW1hdHRlciBjb25kZW5zZXJ8YW50aW1hdHRlciBjb25kZW5zZXJzfGNvbmRlbnNlZHxbWF0gZXh0cmEgcXVhcmsgZmxhdm9yfFtYXSBleHRyYSBxdWFyayBmbGF2b3JzIiwNCiAgICAgICJDb25kZW5zZXMgdGhlIGFudGltYXR0ZXIgaW4gdGhlIHVuaXZlcnNlIGludG8gY29va2llcy4iLA0KICAgICAgMTMsDQogICAgICAxMywNCiAgICAgIHsNCiAgICAgICAgYmFzZTogImFudGltYXR0ZXJjb25kZW5zZXIiLA0KICAgICAgICB4VjogMCwNCiAgICAgICAgeVY6IDY0LA0KICAgICAgICB3OiA2NCwNCiAgICAgICAgcm93czogMSwNCiAgICAgICAgeDogMCwNCiAgICAgICAgeTogMCwNCiAgICAgIH0sDQogICAgICAzOTk5OTk5OTk5LA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5kaXNwbGF5TmFtZSA9DQogICAgICAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo2NSU7bGV0dGVyLXNwYWNpbmc6LTFweDtwb3NpdGlvbjpyZWxhdGl2ZTtib3R0b206NHB4OyI+QW50aW0uIGNvbmRlbnNlcjwvc3Bhbj4nOyAvL3Nocmluaw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIlByaXNtIiwNCiAgICAgICJwcmlzbXxwcmlzbXN8Y29udmVydGVkfFtYXSBuZXcgY29sb3IgZGlzY292ZXJlZHxbWF0gbmV3IGNvbG9ycyBkaXNjb3ZlcmVkIiwNCiAgICAgICJDb252ZXJ0cyBsaWdodCBpdHNlbGYgaW50byBjb29raWVzLiIsDQogICAgICAxNCwNCiAgICAgIDE0LA0KICAgICAgeyBiYXNlOiAicHJpc20iLCB4VjogMTYsIHlWOiA0LCB3OiA2NCwgcm93czogMSwgeDogMCwgeTogMjAgfSwNCiAgICAgIDc1MDAwMDAwMDAwLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuT2JqZWN0KA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgICJjaGFuY2VtYWtlcnxjaGFuY2VtYWtlcnN8c3BvbnRhbmVvdXNseSBnZW5lcmF0ZWR8Q2hhbmNlbWFrZXJzIGFyZSBwb3dlcmVkIGJ5IFtYXS1sZWFmIGNsb3ZlcnN8Q2hhbmNlbWFrZXJzIGFyZSBwb3dlcmVkIGJ5IFtYXS1sZWFmIGNsb3ZlcnMiLA0KICAgICAgIkdlbmVyYXRlcyBjb29raWVzIG91dCBvZiB0aGluIGFpciB0aHJvdWdoIHNoZWVyIGx1Y2suIiwNCiAgICAgIDE1LA0KICAgICAgMTksDQogICAgICB7DQogICAgICAgIGJhc2U6ICJjaGFuY2VtYWtlciIsDQogICAgICAgIHhWOiA4LA0KICAgICAgICB5VjogNjQsDQogICAgICAgIHc6IDY0LA0KICAgICAgICByb3dzOiAxLA0KICAgICAgICB4OiAwLA0KICAgICAgICB5OiAwLA0KICAgICAgICByb3dzOiAyLA0KICAgICAgfSwNCiAgICAgIDc3Nzc3Nzc3Nzc3LA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5kaXNwbGF5TmFtZSA9DQogICAgICAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo4NSU7bGV0dGVyLXNwYWNpbmc6LTFweDtwb3NpdGlvbjpyZWxhdGl2ZTtib3R0b206MnB4OyI+Q2hhbmNlbWFrZXI8L3NwYW4+JzsgLy9zaHJpbmsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAiZnJhY3RhbCBlbmdpbmV8ZnJhY3RhbCBlbmdpbmVzfG1hZGUgZnJvbSBjb29raWVzfFtYXSBpdGVyYXRpb24gZGVlcHxbWF0gaXRlcmF0aW9ucyBkZWVwIiwNCiAgICAgICJUdXJucyBjb29raWVzIGludG8gZXZlbiBtb3JlIGNvb2tpZXMuIiwNCiAgICAgIDE2LA0KICAgICAgMjAsDQogICAgICB7IGJhc2U6ICJmcmFjdGFsRW5naW5lIiwgeFY6IDgsIHlWOiA2NCwgdzogNjQsIHJvd3M6IDEsIHg6IDAsIHk6IDAgfSwNCiAgICAgIDEyMzQ1Njc4OTg3NjU0MzIxLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5kaXNwbGF5TmFtZSA9DQogICAgICAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo4MCU7bGV0dGVyLXNwYWNpbmc6LTFweDtwb3NpdGlvbjpyZWxhdGl2ZTtib3R0b206NHB4OyI+RnJhY3RhbCBlbmdpbmU8L3NwYW4+JzsgLy9zaHJpbmsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgImphdmFzY3JpcHQgY29uc29sZXxqYXZhc2NyaXB0IGNvbnNvbGVzfHByb2dyYW1tZWR8RXF1aXBwZWQgd2l0aCBbWF0gZXh0ZXJuYWwgbGlicmFyeXxFcXVpcHBlZCB3aXRoIFtYXSBleHRlcm5hbCBsaWJyYXJpZXMiLA0KICAgICAgIkNyZWF0ZXMgY29va2llcyBmcm9tIHRoZSB2ZXJ5IGNvZGUgdGhpcyBnYW1lIHdhcyB3cml0dGVuIGluLiIsDQogICAgICAxNywNCiAgICAgIDMyLA0KICAgICAgew0KICAgICAgICBiYXNlOiAiamF2YXNjcmlwdGNvbnNvbGUiLA0KICAgICAgICB4VjogOCwNCiAgICAgICAgeVY6IDY0LA0KICAgICAgICB3OiAxNCwNCiAgICAgICAgcm93czogMSwNCiAgICAgICAgeDogOCwNCiAgICAgICAgeTogLTMyLA0KICAgICAgICBmcmFtZXM6IDIsDQogICAgICB9LA0KICAgICAgMTIzNDU2Nzg5ODc2NTQzMjEsDQogICAgICBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgdmFyIG11bHQgPSAxOw0KICAgICAgICBtdWx0ICo9IEdhbWUuR2V0VGllcmVkQ3BzTXVsdChtZSk7DQogICAgICAgIG11bHQgKj0gR2FtZS5tYWdpY0NwUyhtZS5uYW1lKTsNCiAgICAgICAgcmV0dXJuIG1lLmJhc2VDcHMgKiBtdWx0Ow0KICAgICAgfSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VbmxvY2tUaWVyZWQodGhpcyk7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLmFtb3VudCA+PSBHYW1lLlNwZWNpYWxHcmFuZG1hVW5sb2NrICYmDQogICAgICAgICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID4gMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5VbmxvY2sodGhpcy5ncmFuZG1hLm5hbWUpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRpc3BsYXlOYW1lID0NCiAgICAgICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjY1JTtsZXR0ZXItc3BhY2luZzotMXB4O3Bvc2l0aW9uOnJlbGF0aXZlO2JvdHRvbTo0cHg7Ij5KYXZhc2NyaXB0IGNvbnNvbGU8L3NwYW4+JzsgLy9zaHJpbmsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgImlkbGV2ZXJzZXxpZGxldmVyc2VzfGhpamFja2VkfFtYXSBtYW5pZm9sZHxbWF0gbWFuaWZvbGRzIiwNCiAgICAgICJUaGVyZSdzIGJlZW4gY291bnRsZXNzIG90aGVyIGlkbGUgdW5pdmVyc2VzIHJ1bm5pbmcgYWxvbmdzaWRlIG91ciBvd24uIFlvdSd2ZSBmaW5hbGx5IGZvdW5kIGEgd2F5IHRvIGhpamFjayB0aGVpciBwcm9kdWN0aW9uIGFuZCBjb252ZXJ0IHdoYXRldmVyIHRoZXkndmUgYmVlbiBtYWtpbmcgaW50byBjb29raWVzISIsDQogICAgICAxOCwNCiAgICAgIDMzLA0KICAgICAgew0KICAgICAgICBiYXNlOiAiaWRsZXZlcnNlIiwNCiAgICAgICAgeFY6IDgsDQogICAgICAgIHlWOiA5NiwNCiAgICAgICAgdzogNDgsDQogICAgICAgIHJvd3M6IDIsDQogICAgICAgIHg6IDAsDQogICAgICAgIHk6IDAsDQogICAgICAgIGZyYW1lczogNCwNCiAgICAgIH0sDQogICAgICAxMjM0NTY3ODk4NzY1NDMyMSwNCiAgICAgIGZ1bmN0aW9uIChtZSkgew0KICAgICAgICB2YXIgbXVsdCA9IDE7DQogICAgICAgIG11bHQgKj0gR2FtZS5HZXRUaWVyZWRDcHNNdWx0KG1lKTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLm1hZ2ljQ3BTKG1lLm5hbWUpOw0KICAgICAgICByZXR1cm4gbWUuYmFzZUNwcyAqIG11bHQ7DQogICAgICB9LA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlVubG9ja1RpZXJlZCh0aGlzKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYW1vdW50ID49IEdhbWUuU3BlY2lhbEdyYW5kbWFVbmxvY2sgJiYNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPiAwDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayh0aGlzLmdyYW5kbWEubmFtZSk7DQogICAgICB9DQogICAgKTsNCg0KICAgIG5ldyBHYW1lLk9iamVjdCgNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgImNvcnRleCBiYWtlcnxjb3J0ZXggYmFrZXJzfGltYWdpbmVkfFtYXSBleHRyYSBJUSBwb2ludHxbWF0gZXh0cmEgSVEgcG9pbnRzIiwNCiAgICAgICJUaGVzZSBhcnRpZmljaWFsIGJyYWlucyB0aGUgc2l6ZSBvZiBwbGFuZXRzIGFyZSBjYXBhYmxlIG9mIHNpbXBseSBkcmVhbWluZyB1cCBjb29raWVzIGludG8gZXhpc3RlbmNlLiBUaW1lIGFuZCBzcGFjZSBhcmUgaW5jb25zZXF1ZW50aWFsLiBSZWFsaXR5IGlzIGFyYml0cmFyeS4iLA0KICAgICAgMTksDQogICAgICAzNCwNCiAgICAgIHsgYmFzZTogImNvcnRleCIsIHhWOiA4LCB5VjogOTYsIHc6IDQ4LCByb3dzOiAxLCB4OiAwLCB5OiAwLCBmcmFtZXM6IDQgfSwNCiAgICAgIDEyMzQ1Njc4OTg3NjU0MzIxLA0KICAgICAgZnVuY3Rpb24gKG1lKSB7DQogICAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgICAgbXVsdCAqPSBHYW1lLkdldFRpZXJlZENwc011bHQobWUpOw0KICAgICAgICBtdWx0ICo9IEdhbWUubWFnaWNDcFMobWUubmFtZSk7DQogICAgICAgIHJldHVybiBtZS5iYXNlQ3BzICogbXVsdDsNCiAgICAgIH0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuVW5sb2NrVGllcmVkKHRoaXMpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5hbW91bnQgPj0gR2FtZS5TcGVjaWFsR3JhbmRtYVVubG9jayAmJg0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+IDANCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMuZ3JhbmRtYS5uYW1lKTsNCiAgICAgIH0NCiAgICApOw0KDQogICAgR2FtZS5mb29sT2JqZWN0cyA9IHsNCiAgICAgIFVua25vd246IHsNCiAgICAgICAgbmFtZTogIkludmVzdG1lbnQiLA0KICAgICAgICBkZXNjOiAiWW91J3JlIG5vdCBzdXJlIHdoYXQgdGhpcyBkb2VzLCB5b3UganVzdCBrbm93IGl0IG1lYW5zIHByb2ZpdC4iLA0KICAgICAgICBpY29uOiAwLA0KICAgICAgfSwNCiAgICAgIEN1cnNvcjogew0KICAgICAgICBuYW1lOiAiUm9sbGluZyBwaW4iLA0KICAgICAgICBkZXNjOiAiRXNzZW50aWFsIGluIGZsYXR0ZW5pbmcgZG91Z2guIFRoZSBmaXJzdCBzdGVwIGluIGNvb2tpZS1tYWtpbmcuIiwNCiAgICAgICAgaWNvbjogMCwNCiAgICAgIH0sDQogICAgICBHcmFuZG1hOiB7DQogICAgICAgIG5hbWU6ICJPdmVuIiwNCiAgICAgICAgZGVzYzogIkEgY3J1Y2lhbCBlbGVtZW50IG9mIGJha2luZyBjb29raWVzLiIsDQogICAgICAgIGljb246IDEsDQogICAgICB9LA0KICAgICAgRmFybTogew0KICAgICAgICBuYW1lOiAiS2l0Y2hlbiIsDQogICAgICAgIGRlc2M6ICJUaGUgbW9yZSBraXRjaGVucywgdGhlIG1vcmUgY29va2llcyB5b3VyIGVtcGxveWVlcyBjYW4gcHJvZHVjZS4iLA0KICAgICAgICBpY29uOiAyLA0KICAgICAgfSwNCiAgICAgIE1pbmU6IHsNCiAgICAgICAgbmFtZTogIlNlY3JldCByZWNpcGUiLA0KICAgICAgICBkZXNjOiAiVGhlc2UgZ2l2ZSB5b3UgdGhlIGVkZ2UgeW91IG5lZWQgdG8gb3V0c2VsbCB0aG9zZSBwZXNreSBjb21wZXRpdG9ycy4iLA0KICAgICAgICBpY29uOiAzLA0KICAgICAgfSwNCiAgICAgIEZhY3Rvcnk6IHsNCiAgICAgICAgbmFtZTogIkZhY3RvcnkiLA0KICAgICAgICBkZXNjOiAiTWFzcyBwcm9kdWN0aW9uIGlzIHRoZSBmdXR1cmUgb2YgYmFraW5nLiBTZWl6ZSB0aGUgZGF5LCBhbmQgc3luZXJnaXplISIsDQogICAgICAgIGljb246IDQsDQogICAgICB9LA0KICAgICAgQmFuazogew0KICAgICAgICBuYW1lOiAiSW52ZXN0b3IiLA0KICAgICAgICBkZXNjOiAiQnVzaW5lc3MgZm9sa3Mgd2l0aCBhIG5vc2UgZm9yIHByb2ZpdCwgcmVhZHkgdG8gZmluYW5jZSB5b3VyIHZlbnR1cmUgYXMgbG9uZyBhcyB0aGVyZSdzIG1vbmV5IHRvIGJlIG1hZGUuIiwNCiAgICAgICAgaWNvbjogNSwNCiAgICAgIH0sDQogICAgICBUZW1wbGU6IHsNCiAgICAgICAgbmFtZTogIkxpa2UiLA0KICAgICAgICBkZXNjOiAiWW91ciBzb2NpYWwgbWVkaWEgcGFnZSBpcyBnb2luZyB2aXJhbCEgQW1hc3NpbmcgbGlrZXMgaXMgdGhlIGtleSB0byBhIGxhc3Rpbmcgb25saW5lIHByZXNlbmNlIGFuZCBqdWljeSBhZHZlcnRpc2luZyBkZWFscy4iLA0KICAgICAgICBpY29uOiA5LA0KICAgICAgfSwNCiAgICAgICJXaXphcmQgdG93ZXIiOiB7DQogICAgICAgIG5hbWU6ICJNZW1lIiwNCiAgICAgICAgZGVzYzogIkNvb2tpZSBtZW1lcyBhcmUgYWxsIHRoZSByYWdlISBXaXRoIGp1c3QgdGhlIHJpZ2h0IGFtb3VudCBvZiBzb2NpYWwgbWVkaWEgYXN0cm90dXJmaW5nLCB5b3VyIGJyYW5kIGltYWdlIHdpbGwgYmUgYWxsIG92ZXIgdGhlIGN5YmVyc3BhY2UuIiwNCiAgICAgICAgaWNvbjogNiwNCiAgICAgIH0sDQogICAgICBTaGlwbWVudDogew0KICAgICAgICBuYW1lOiAiU3VwZXJtYXJrZXQiLA0KICAgICAgICBkZXNjOiAiQSBnaWdhbnRpYyBjb29raWUgZW1wb3JpdW0gLSB5b3VyIHZlcnkgb3duIHJldGFpbCBjaGFpbi4iLA0KICAgICAgICBpY29uOiA3LA0KICAgICAgfSwNCiAgICAgICJBbGNoZW15IGxhYiI6IHsNCiAgICAgICAgbmFtZTogIlN0b2NrIHNoYXJlIiwNCiAgICAgICAgZGVzYzogIllvdSdyZSBvZmZpY2lhbGx5IG9uIHRoZSBzdG9jayBtYXJrZXQsIGFuZCBldmVyeW9uZSB3YW50cyBhIHBpZWNlISIsDQogICAgICAgIGljb246IDgsDQogICAgICB9LA0KICAgICAgUG9ydGFsOiB7DQogICAgICAgIG5hbWU6ICJUViBzaG93IiwNCiAgICAgICAgZGVzYzogIllvdXIgY29va2llcyBoYXZlIHRoZWlyIG93biBzaXRjb20hIEhpbGFyaW91cyBiYWtpbmcgaGlqaW5rcyBzZXQgdG8gdGhlIGNoZWVzaWVzdCBsYXVnaHRyYWNrLiIsDQogICAgICAgIGljb246IDEwLA0KICAgICAgfSwNCiAgICAgICJUaW1lIG1hY2hpbmUiOiB7DQogICAgICAgIG5hbWU6ICJUaGVtZSBwYXJrIiwNCiAgICAgICAgZGVzYzogIkNvb2tpZSB0aGVtZSBwYXJrcywgZnVsbCBvZiBtYXNjb3RzIGFuZCByb2xsZXItY29hc3RlcnMuIEJ1aWxkIG9uZSwgYnVpbGQgYSBodW5kcmVkISIsDQogICAgICAgIGljb246IDExLA0KICAgICAgfSwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciI6IHsNCiAgICAgICAgbmFtZTogIkNvb2tpZWNvaW4iLA0KICAgICAgICBkZXNjOiAiQSB2aXJ0dWFsIGN1cnJlbmN5LCBhbHJlYWR5IHJlcGxhY2luZyByZWd1bGFyIG1vbmV5IGluIHNvbWUgc21hbGwgY291bnRyaWVzLiIsDQogICAgICAgIGljb246IDEyLA0KICAgICAgfSwNCiAgICAgIFByaXNtOiB7DQogICAgICAgIG5hbWU6ICJDb3Jwb3JhdGUgY291bnRyeSIsDQogICAgICAgIGRlc2M6ICJZb3UndmUgbWFkZSBpdCB0byB0aGUgdG9wLCBhbmQgeW91IGNhbiBub3cgYnV5IGVudGlyZSBuYXRpb25zIHRvIGZ1cnRoZXIgeW91ciBjb3Jwb3JhdGUgZ3JlZWQuIEdvZHNwZWVkLiIsDQogICAgICAgIGljb246IDEzLA0KICAgICAgfSwNCiAgICAgIENoYW5jZW1ha2VyOiB7DQogICAgICAgIG5hbWU6ICJQcml2YXRpemVkIHBsYW5ldCIsDQogICAgICAgIGRlc2M6ICJBY3R1YWxseSwgeW91IGtub3cgd2hhdCdzIGNvb2w/IEEgd2hvbGUgcGxhbmV0IGRlZGljYXRlZCB0byBwcm9kdWNpbmcsIGFkdmVydGlzaW5nLCBzZWxsaW5nLCBhbmQgY29uc3VtaW5nIHlvdXIgY29va2llcy4iLA0KICAgICAgICBpY29uOiAxNSwNCiAgICAgIH0sDQogICAgICAiRnJhY3RhbCBlbmdpbmUiOiB7DQogICAgICAgIG5hbWU6ICJTZW5hdGUgc2VhdCIsDQogICAgICAgIGRlc2M6ICJPbmx5IHRocm91Z2ggcG9saXRpY2FsIGRvbWluaW9uIGNhbiB5b3UgdHJ1bHkgYWx0ZXIgdGhpcyB3b3JsZCB0byBjcmVhdGUgYSBicmlnaHRlciwgbW9yZSBjb29raWUtZnJpZW5kbHkgZnV0dXJlLiIsDQogICAgICAgIGljb246IDE2LA0KICAgICAgfSwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiOiB7DQogICAgICAgIG5hbWU6ICJEb2N0cmluZSIsDQogICAgICAgIGRlc2M6ICJUYWtpbmcgbWFueSBmb3JtcyAtcmVsaWdpb24sIGN1bHR1cmUsIHBoaWxvc29waHktIGEgZG9jdHJpbmUgbWF5LCB3aGVuIGhhbmRsZWQgcHJvcGVybHksIGNhdXNlIGEgbGFzdGluZyBpbXBhY3Qgb24gY2l2aWxpemF0aW9ucywgcmVzaGFwaW5nIG1pbmRzIGFuZCBwZW9wbGUgYW5kIGVuc3VyaW5nIGFsbCBmdXR1cmUgZ2VuZXJhdGlvbnMgc2hhcmUgYSBzaW5ndWxhciBnb2FsIC0gdGhlIHByb2R1Y3Rpb24sIGFuZCBhY3F1aXNpdGlvbiwgb2YgbW9yZSBjb29raWVzLiIsDQogICAgICAgIGljb246IDE3LA0KICAgICAgfSwNCiAgICAgIElkbGV2ZXJzZTogew0KICAgICAgICBuYW1lOiAiTGF0ZXJhbCBleHBhbnNpb25zIiwNCiAgICAgICAgZGVzYzogIlNvbWV0aW1lcyB0aGUgYmVzdCB3YXkgdG8ga2VlcCBnb2luZyB1cCBpcyBzaWRld2F5cy4gRGl2ZXJzaWZ5IHlvdXIgdmVudHVyZXMgdGhyb3VnaCBub24tY29va2llIGludmVzdG1lbnRzLiIsDQogICAgICAgIGljb246IDE4LA0KICAgICAgfSwNCiAgICAgICJDb3J0ZXggYmFrZXIiOiB7DQogICAgICAgIG5hbWU6ICJUaGluayB0YW5rIiwNCiAgICAgICAgZGVzYzogIlRoZXJlJ3Mgb25seSBzbyBtYW55IHdheXMgeW91IGNhbiBicmluZyBpbiBtb3JlIHByb2ZpdC4gT3IgaXMgdGhlcmU/IEhpcmUgdGhlIG1vc3QgYnJpbGxpYW50IGV4cGVydHMgaW4gdGhlIGtub3duIHVuaXZlcnNlIGFuZCBsZXQgdGhlbSBzY3JhcGUgdGhlaXIgYnJhaW5zIGZvciB5b3UhIiwNCiAgICAgICAgaWNvbjogMTksDQogICAgICB9LA0KICAgIH07DQoNCiAgICBpZiAodHJ1ZSkgew0KICAgICAgLy9pZiAoIUVOKQ0KICAgICAgR2FtZS5mb29sT2JqZWN0c1siVW5rbm93biJdLm5hbWUgPSBsb2MoIkludmVzdG1lbnQiKTsNCiAgICAgIEdhbWUuZm9vbE9iamVjdHNbIlVua25vd24iXS5kZXNjID0gbG9jKA0KICAgICAgICAiWW91J3JlIG5vdCBzdXJlIHdoYXQgdGhpcyBkb2VzLCB5b3UganVzdCBrbm93IGl0IG1lYW5zIHByb2ZpdC4iDQogICAgICApOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgR2FtZS5mb29sT2JqZWN0c1tpXS5uYW1lID0NCiAgICAgICAgICBsb2MoRmluZExvY1N0cmluZ0J5UGFydChHYW1lLk9iamVjdHNbaV0ubmFtZSArICIgYnVzaW5lc3MgbmFtZSIpKSB8fA0KICAgICAgICAgIEdhbWUuZm9vbE9iamVjdHNbaV0ubmFtZTsNCiAgICAgICAgR2FtZS5mb29sT2JqZWN0c1tpXS5kZXNjID0NCiAgICAgICAgICBsb2MoRmluZExvY1N0cmluZ0J5UGFydChHYW1lLk9iamVjdHNbaV0ubmFtZSArICIgYnVzaW5lc3MgcXVvdGUiKSkgfHwNCiAgICAgICAgICBHYW1lLmZvb2xPYmplY3RzW2ldLmRlc2M7DQogICAgICB9DQogICAgfQ0KDQogICAgLy9idWlsZCBzdG9yZQ0KICAgIEdhbWUuQnVpbGRTdG9yZSgpOw0KDQogICAgLy9idWlsZCBtYXN0ZXIgYmFyDQogICAgdmFyIHN0ciA9ICIiOw0KICAgIHN0ciArPQ0KICAgICAgJzxkaXYgaWQ9ImJ1aWxkaW5nc011dGUiIGNsYXNzPSJzaGFkb3dGaWx0ZXIiIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjEwMDtwYWRkaW5nOjRweCAxNnB4IDBweCA2NHB4OyI+PC9kaXY+JzsNCiAgICBzdHIgKz0NCiAgICAgICc8ZGl2IGNsYXNzPSJzZXBhcmF0b3JCb3R0b20iIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LThweDt6LWluZGV4OjA7Ij48L2Rpdj4nOw0KICAgIGwoImJ1aWxkaW5nc01hc3RlciIpLmlubmVySFRNTCA9IHN0cjsNCg0KICAgIC8vYnVpbGQgb2JqZWN0IGRpc3BsYXlzDQogICAgdmFyIG11dGVTdHIgPQ0KICAgICAgJzxkaXYgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6OHB4O2JvdHRvbToxMnB4O29wYWNpdHk6MC41OyI+JyArDQogICAgICBsb2MoIk11dGVkOiIpICsNCiAgICAgICI8L2Rpdj4iOw0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNbaV07DQoNCiAgICAgIGlmIChsb2NTdHJpbmdzW21lLm5hbWUgKyAiIChzaG9ydCkiXSkNCiAgICAgICAgbWUuZGlzcGxheU5hbWUgPSBsb2MobWUubmFtZSArICIgKHNob3J0KSIpOw0KDQogICAgICBpZiAobWUuaWQgPiAwKSB7DQogICAgICAgIG1lLmNhbnZhcyA9IGwoInJvd0NhbnZhcyIgKyBtZS5pZCk7DQogICAgICAgIG1lLmN0eCA9IG1lLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIsIHsgYWxwaGE6IGZhbHNlIH0pOw0KICAgICAgICBtZS5waWNzID0gW107DQogICAgICAgIHZhciBpY29uID0gWzAgKiA2NCwgbWUuaWNvbiAqIDY0XTsNCiAgICAgICAgbXV0ZVN0ciArPQ0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJ0aW55UHJvZHVjdEljb24iIGlkPSJtdXRlZFByb2R1Y3QnICsNCiAgICAgICAgICBtZS5pZCArDQogICAgICAgICAgJyIgc3R5bGU9ImRpc3BsYXk6bm9uZTtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0nICsNCiAgICAgICAgICBpY29uWzBdICsNCiAgICAgICAgICAicHggLSIgKw0KICAgICAgICAgIGljb25bMV0gKw0KICAgICAgICAgICdweDsiICcgKw0KICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICc9IkdhbWUuT2JqZWN0c0J5SWRbJyArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICJdLm11dGUoMCk7UGxheVNvdW5kKEdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgbWUuaWQgKw0KICAgICAgICAgICJdLm11dGVkPydzbmQvY2xpY2tPZmYyLm1wMyc6J3NuZC9jbGlja09uMi5tcDMnKTtcIiAiICsNCiAgICAgICAgICBHYW1lLmdldER5bmFtaWNUb29sdGlwKA0KICAgICAgICAgICAgIkdhbWUubXV0ZWRCdWlsZGluZ1Rvb2x0aXAoIiArIG1lLmlkICsgIikiLA0KICAgICAgICAgICAgInRoaXMiDQogICAgICAgICAgKSArDQogICAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgICAvL211dGVTdHIrPSc8ZGl2IGNsYXNzPSJ0aW55UHJvZHVjdEljb24iIGlkPSJtdXRlZFByb2R1Y3QnK21lLmlkKyciIHN0eWxlPSJkaXNwbGF5Om5vbmU7YmFja2dyb3VuZC1wb3NpdGlvbjotJytpY29uWzBdKydweCAtJytpY29uWzFdKydweDsiICcrR2FtZS5jbGlja1N0cisnPSJHYW1lLk9iamVjdHNCeUlkWycrbWUuaWQrJ10ubXV0ZSgwKTtQbGF5U291bmQoR2FtZS5PYmplY3RzQnlJZFsnK21lLmlkKyddLm11dGVkP1wnc25kL2NsaWNrT2ZmMi5tcDNcJzpcJ3NuZC9jbGlja09uMi5tcDNcJyk7IiAnK0dhbWUuZ2V0VG9vbHRpcCgnPGRpdiBzdHlsZT0id2lkdGg6MTUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7Ij48Yj5Vbm11dGUgJyttZS5wbHVyYWwrJzwvYj48YnI+KERpc3BsYXkgdGhpcyBidWlsZGluZyk8L2Rpdj4nKSsnPjwvZGl2Pic7DQoNCiAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgbWUuY2FudmFzLA0KICAgICAgICAgICJtb3VzZW92ZXIiLA0KICAgICAgICAgIChmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIG1lLm1vdXNlT24gPSB0cnVlOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KShtZSkNCiAgICAgICAgKTsNCiAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgbWUuY2FudmFzLA0KICAgICAgICAgICJtb3VzZW91dCIsDQogICAgICAgICAgKGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgbWUubW91c2VPbiA9IGZhbHNlOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KShtZSkNCiAgICAgICAgKTsNCiAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgbWUuY2FudmFzLA0KICAgICAgICAgICJtb3VzZW1vdmUiLA0KICAgICAgICAgIChmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgICB2YXIgYm94ID0gdGhpcy5nZXRCb3VuZHMoKTsNCiAgICAgICAgICAgICAgbWUubW91c2VQb3NbMF0gPSBlLnBhZ2VYIC0gYm94LmxlZnQ7DQogICAgICAgICAgICAgIG1lLm1vdXNlUG9zWzFdID0gZS5wYWdlWSAtIGJveC50b3A7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0pKG1lKQ0KICAgICAgICApOw0KICAgICAgfQ0KICAgIH0NCiAgICBHYW1lLm11dGVkQnVpbGRpbmdUb29sdGlwID0gZnVuY3Rpb24gKGlkKSB7DQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNCeUlkW2lkXTsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAnPGRpdiBzdHlsZT0id2lkdGg6MTUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7IiBpZD0idG9vbHRpcE11dGVkQnVpbGRpbmciPicgKw0KICAgICAgICAgIChFTg0KICAgICAgICAgICAgPyAiPGI+IiArDQogICAgICAgICAgICAgIGNhcChtZS5wbHVyYWwpICsNCiAgICAgICAgICAgICAgKG1lLmxldmVsID4gMCA/ICIgKGx2bC4mbmJzcDsiICsgbWUubGV2ZWwgKyAiKSIgOiAiIikgKw0KICAgICAgICAgICAgICAnPC9iPjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PkNsaWNrIHRvIHVubXV0ZSAnICsNCiAgICAgICAgICAgICAgbWUucGx1cmFsICsNCiAgICAgICAgICAgICAgIjxicj4oZGlzcGxheSB0aGlzIGJ1aWxkaW5nKSINCiAgICAgICAgICAgIDogIjxiPiIgKw0KICAgICAgICAgICAgICBsb2MoIkxldmVsICUxICUyIiwgW0JlYXV0aWZ5KG1lLmxldmVsKSwgbWUucGx1cmFsXSkgKw0KICAgICAgICAgICAgICAnPC9iPjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICBsb2MoIkNsaWNrIHRvIHVubXV0ZSIpKSArDQogICAgICAgICAgIjwvZGl2PiINCiAgICAgICAgKTsNCiAgICAgIH07DQogICAgfTsNCiAgICBsKCJidWlsZGluZ3NNdXRlIikuaW5uZXJIVE1MID0gbXV0ZVN0cjsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlVUEdSQURFUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgIEdhbWUuVXBncmFkZXMgPSB7fTsNCiAgICBHYW1lLlVwZ3JhZGVzQnlJZCA9IHt9Ow0KICAgIEdhbWUuVXBncmFkZXNOID0gMDsNCiAgICBHYW1lLlVwZ3JhZGVzSW5TdG9yZSA9IFtdOw0KICAgIEdhbWUuVXBncmFkZXNPd25lZCA9IDA7DQogICAgR2FtZS5VcGdyYWRlID0gZnVuY3Rpb24gKG5hbWUsIGRlc2MsIHByaWNlLCBpY29uLCBidXlGdW5jdGlvbikgew0KICAgICAgdGhpcy5pZCA9IEdhbWUuVXBncmFkZXNOOw0KICAgICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICAgIHRoaXMuZG5hbWUgPSB0aGlzLm5hbWU7DQogICAgICB0aGlzLmRlc2MgPSBkZXNjOw0KICAgICAgdGhpcy5iYXNlRGVzYyA9IHRoaXMuZGVzYzsNCiAgICAgIHRoaXMuYmFzZVByaWNlID0gcHJpY2U7DQogICAgICB0aGlzLnByaWNlTHVtcHMgPSAwOyAvL25vdGUgOiBkb2Vzbid0IGRvIG11Y2ggb24gaXRzIG93biwgeW91IHN0aWxsIG5lZWQgdG8gaGFuZGxlIHRoZSBidXlpbmcgeW91cnNlbGYNCiAgICAgIHRoaXMuaWNvbiA9IGljb247DQogICAgICB0aGlzLmljb25GdW5jdGlvbiA9IDA7DQogICAgICB0aGlzLmJ1eUZ1bmN0aW9uID0gYnV5RnVuY3Rpb247DQogICAgICAvKnRoaXMudW5sb2NrRnVuY3Rpb249dW5sb2NrRnVuY3Rpb247DQoJCQl0aGlzLnVubG9ja2VkPSh0aGlzLnVubG9ja0Z1bmN0aW9uPzA6MSk7Ki8NCiAgICAgIHRoaXMudW5sb2NrZWQgPSAwOw0KICAgICAgdGhpcy5ib3VnaHQgPSAwOw0KICAgICAgdGhpcy5vcmRlciA9IHRoaXMuaWQ7DQogICAgICBpZiAob3JkZXIpIHRoaXMub3JkZXIgPSBvcmRlciArIHRoaXMuaWQgKiAwLjAwMTsNCiAgICAgIHRoaXMucG9vbCA9ICIiOyAvL2NhbiBiZSAnJywgY29va2llLCB0b2dnbGUsIGRlYnVnLCBwcmVzdGlnZSwgcHJlc3RpZ2VEZWNvciwgdGVjaCwgb3IgdW51c2VkDQogICAgICBpZiAocG9vbCkgdGhpcy5wb29sID0gcG9vbDsNCiAgICAgIHRoaXMucG93ZXIgPSAwOw0KICAgICAgaWYgKHBvd2VyKSB0aGlzLnBvd2VyID0gcG93ZXI7DQogICAgICB0aGlzLnZhbmlsbGEgPSBHYW1lLnZhbmlsbGE7DQogICAgICB0aGlzLnVubG9ja0F0ID0gMDsNCiAgICAgIHRoaXMudGVjaFVubG9jayA9IFtdOw0KICAgICAgdGhpcy5wYXJlbnRzID0gW107DQogICAgICB0aGlzLnR5cGUgPSAidXBncmFkZSI7DQogICAgICB0aGlzLnRpZXIgPSAwOw0KICAgICAgdGhpcy5idWlsZGluZ1RpZSA9IDA7IC8vb2Ygd2hhdCBidWlsZGluZyBpcyB0aGlzIGEgdGllcmVkIHVwZ3JhZGUgb2YgPw0KDQogICAgICBHYW1lLmxhc3QgPSB0aGlzOw0KICAgICAgR2FtZS5VcGdyYWRlc1t0aGlzLm5hbWVdID0gdGhpczsNCiAgICAgIEdhbWUuVXBncmFkZXNCeUlkW3RoaXMuaWRdID0gdGhpczsNCiAgICAgIEdhbWUuVXBncmFkZXNOKys7DQogICAgICByZXR1cm4gdGhpczsNCiAgICB9Ow0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAiVXBncmFkZSI7DQogICAgfTsNCg0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUuZ2V0UHJpY2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgcHJpY2UgPSB0aGlzLmJhc2VQcmljZTsNCiAgICAgIGlmICh0aGlzLnByaWNlRnVuYykgcHJpY2UgPSB0aGlzLnByaWNlRnVuYyh0aGlzKTsNCiAgICAgIGlmIChwcmljZSA9PSAwKSByZXR1cm4gMDsNCiAgICAgIGlmICh0aGlzLnBvb2wgIT0gInByZXN0aWdlIikgew0KICAgICAgICBpZiAoR2FtZS5IYXMoIlRveSB3b3Jrc2hvcCIpKSBwcmljZSAqPSAwLjk1Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkZpdmUtZmluZ2VyIGRpc2NvdW50IikpDQogICAgICAgICAgcHJpY2UgKj0gTWF0aC5wb3coMC45OSwgR2FtZS5PYmplY3RzWyJDdXJzb3IiXS5hbW91bnQgLyAxMDApOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIlNhbnRhJ3MgZG9taW5pb24iKSkgcHJpY2UgKj0gMC45ODsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJGYWJlcmdlIGVnZyIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkRpdmluZSBzYWxlcyIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgICBpZiAoR2FtZS5IYXMoIkZvcnR1bmUgIzEwMCIpKSBwcmljZSAqPSAwLjk5Ow0KICAgICAgICBpZiAodGhpcy5raXR0ZW4gJiYgR2FtZS5IYXMoIktpdHRlbiB3YWdlcyIpKSBwcmljZSAqPSAwLjk7DQogICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIkhhZ2dsZXIncyBsdWNrIikpIHByaWNlICo9IDAuOTg7DQogICAgICAgIGlmIChHYW1lLmhhc0J1ZmYoIkhhZ2dsZXIncyBtaXNlcnkiKSkgcHJpY2UgKj0gMS4wMjsNCiAgICAgICAgLy9pZiAoR2FtZS5oYXNBdXJhKCdNYXN0ZXIgb2YgdGhlIEFybW9yeScpKSBwcmljZSo9MC45ODsNCiAgICAgICAgcHJpY2UgKj0gMSAtIEdhbWUuYXVyYU11bHQoIk1hc3RlciBvZiB0aGUgQXJtb3J5IikgKiAwLjAyOw0KICAgICAgICBwcmljZSAqPSBHYW1lLmVmZigidXBncmFkZUNvc3QiKTsNCiAgICAgICAgaWYgKHRoaXMucG9vbCA9PSAiY29va2llIiAmJiBHYW1lLkhhcygiRGl2aW5lIGJha2VyaWVzIikpIHByaWNlIC89IDU7DQogICAgICB9DQogICAgICByZXR1cm4gTWF0aC5jZWlsKHByaWNlKTsNCiAgICB9Ow0KDQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS5jYW5CdXkgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAodGhpcy5jYW5CdXlGdW5jKSByZXR1cm4gdGhpcy5jYW5CdXlGdW5jKCk7DQogICAgICBpZiAoR2FtZS5jb29raWVzID49IHRoaXMuZ2V0UHJpY2UoKSkgcmV0dXJuIHRydWU7DQogICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICB9Ow0KDQogICAgR2FtZS5zdG9yZUJ1eUFsbCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghR2FtZS5IYXMoIkluc3BpcmVkIGNoZWNrbGlzdCIpKSByZXR1cm4gZmFsc2U7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNJblN0b3JlKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNJblN0b3JlW2ldOw0KICAgICAgICBpZiAoIW1lLmlzVmF1bHRlZCgpICYmIG1lLnBvb2wgIT0gInRvZ2dsZSIgJiYgbWUucG9vbCAhPSAidGVjaCIpDQogICAgICAgICAgbWUuYnV5KDEpOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLnZhdWx0ID0gW107DQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS5pc1ZhdWx0ZWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS52YXVsdC5pbmRleE9mKHRoaXMuaWQpICE9IC0xKSByZXR1cm4gdHJ1ZTsNCiAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS52YXVsdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghdGhpcy5pc1ZhdWx0ZWQoKSkgR2FtZS52YXVsdC5wdXNoKHRoaXMuaWQpOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS51bnZhdWx0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKHRoaXMuaXNWYXVsdGVkKCkpIEdhbWUudmF1bHQuc3BsaWNlKEdhbWUudmF1bHQuaW5kZXhPZih0aGlzLmlkKSwgMSk7DQogICAgfTsNCg0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbiAoZSkgew0KICAgICAgaWYgKChlICYmIGUuc2hpZnRLZXkpIHx8IEdhbWUua2V5c1sxNl0pIHsNCiAgICAgICAgaWYgKHRoaXMucG9vbCA9PSAidG9nZ2xlIiB8fCB0aGlzLnBvb2wgPT0gInRlY2giKSB7DQogICAgICAgIH0gZWxzZSBpZiAoR2FtZS5IYXMoIkluc3BpcmVkIGNoZWNrbGlzdCIpKSB7DQogICAgICAgICAgaWYgKHRoaXMuaXNWYXVsdGVkKCkpIHRoaXMudW52YXVsdCgpOw0KICAgICAgICAgIGVsc2UgdGhpcy52YXVsdCgpOw0KICAgICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB0aGlzLmJ1eSgpOw0KICAgIH07DQoNCiAgICBHYW1lLlVwZ3JhZGUucHJvdG90eXBlLmJ1eSA9IGZ1bmN0aW9uIChieXBhc3MpIHsNCiAgICAgIHZhciBzdWNjZXNzID0gMDsNCiAgICAgIHZhciBjYW5jZWxQdXJjaGFzZSA9IDA7DQogICAgICBpZiAodGhpcy5jbGlja0Z1bmN0aW9uICYmICFieXBhc3MpIGNhbmNlbFB1cmNoYXNlID0gIXRoaXMuY2xpY2tGdW5jdGlvbigpOw0KICAgICAgaWYgKCFjYW5jZWxQdXJjaGFzZSkgew0KICAgICAgICBpZiAodGhpcy5jaG9pY2VzRnVuY3Rpb24pIHsNCiAgICAgICAgICBpZiAoR2FtZS5jaG9pY2VTZWxlY3Rvck9uID09IHRoaXMuaWQpIHsNCiAgICAgICAgICAgIGwoInRvZ2dsZUJveCIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBsKCJ0b2dnbGVCb3giKS5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgIEdhbWUuY2hvaWNlU2VsZWN0b3JPbiA9IC0xOw0KICAgICAgICAgICAgUGxheVNvdW5kKCJzbmQvdGlja09mZi5tcDMiKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgR2FtZS5jaG9pY2VTZWxlY3Rvck9uID0gdGhpcy5pZDsNCiAgICAgICAgICAgIHZhciBjaG9pY2VzID0gdGhpcy5jaG9pY2VzRnVuY3Rpb24oKTsNCiAgICAgICAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iY2xvc2UiIG9uY2xpY2s9IkdhbWUuVXBncmFkZXNCeUlkWycgKw0KICAgICAgICAgICAgICB0aGlzLmlkICsNCiAgICAgICAgICAgICAgJ10uYnV5KCk7Ij54PC9kaXY+JzsNCiAgICAgICAgICAgIHN0ciArPSAiPGgzPiIgKyB0aGlzLmRuYW1lICsgIjwvaDM+IiArICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBjaG9pY2VzID09PSAic3RyaW5nIikgew0KICAgICAgICAgICAgICBzdHIgKz0gY2hvaWNlczsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IDA7DQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gY2hvaWNlcykgew0KICAgICAgICAgICAgICAgIGlmIChjaG9pY2VzW2ldLnNlbGVjdGVkKSBzZWxlY3RlZCA9IGk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgR2FtZS5jaG9pY2VTZWxlY3RvckNob2ljZXMgPSBjaG9pY2VzOyAvL3RoaXMgaXMgYSByZWFsbHkgZHVtYiB3YXkgb2YgZG9pbmcgdGhpcyBpIGFtIHNvIHNvcnJ5DQogICAgICAgICAgICAgIEdhbWUuY2hvaWNlU2VsZWN0b3JTZWxlY3RlZCA9IHNlbGVjdGVkOw0KICAgICAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICAgICAnPGg0IGlkPSJjaG9pY2VTZWxlY3RlZE5hbWUiPicgKw0KICAgICAgICAgICAgICAgIGNob2ljZXNbc2VsZWN0ZWRdLm5hbWUgKw0KICAgICAgICAgICAgICAgICI8L2g0PiIgKw0KICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gY2hvaWNlcykgew0KICAgICAgICAgICAgICAgIGNob2ljZXNbaV0uaWQgPSBpOw0KICAgICAgICAgICAgICAgIGNob2ljZXNbaV0ub3JkZXIgPSBjaG9pY2VzW2ldLm9yZGVyIHx8IDA7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgc29ydE1hcCA9IGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICAgICAgICAgICAgaWYgKGEub3JkZXIgPiBiLm9yZGVyKSByZXR1cm4gMTsNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChhLm9yZGVyIDwgYi5vcmRlcikgcmV0dXJuIC0xOw0KICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIDA7DQogICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgIGNob2ljZXMuc29ydChzb3J0TWFwKTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNob2ljZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAoIWNob2ljZXNbaV0pIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIHZhciBpY29uID0gY2hvaWNlc1tpXS5pY29uOw0KICAgICAgICAgICAgICAgIHZhciBpZCA9IGNob2ljZXNbaV0uaWQ7DQogICAgICAgICAgICAgICAgaWYgKGNob2ljZXNbaV0uZGl2KSBzdHIgKz0gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pic7DQogICAgICAgICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iY3JhdGUgbm9GcmFtZSBlbmFibGVkJyArDQogICAgICAgICAgICAgICAgICAoaWQgPT0gc2VsZWN0ZWQgPyAiIGhpZ2hsaWdodGVkIiA6ICIiKSArDQogICAgICAgICAgICAgICAgICAnIiBzdHlsZT0ib3BhY2l0eToxO2Zsb2F0Om5vbmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7JyArDQogICAgICAgICAgICAgICAgICB3cml0ZUljb24oaWNvbikgKw0KICAgICAgICAgICAgICAgICAgJyIgJyArDQogICAgICAgICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICAgICAgICc9IkdhbWUuVXBncmFkZXNCeUlkWycgKw0KICAgICAgICAgICAgICAgICAgdGhpcy5pZCArDQogICAgICAgICAgICAgICAgICAiXS5jaG9pY2VzUGljaygiICsNCiAgICAgICAgICAgICAgICAgIGlkICsNCiAgICAgICAgICAgICAgICAgICIpO0dhbWUuY2hvaWNlU2VsZWN0b3JPbj0tMTtHYW1lLlVwZ3JhZGVzQnlJZFsiICsNCiAgICAgICAgICAgICAgICAgIHRoaXMuaWQgKw0KICAgICAgICAgICAgICAgICAgIl0uYnV5KCk7XCIgb25Nb3VzZU91dD1cImwoJ2Nob2ljZVNlbGVjdGVkTmFtZScpLmlubmVySFRNTD1HYW1lLmNob2ljZVNlbGVjdG9yQ2hvaWNlc1tHYW1lLmNob2ljZVNlbGVjdG9yU2VsZWN0ZWRdLm5hbWU7XCIgb25Nb3VzZU92ZXI9XCJsKCdjaG9pY2VTZWxlY3RlZE5hbWUnKS5pbm5lckhUTUw9R2FtZS5jaG9pY2VTZWxlY3RvckNob2ljZXNbIiArDQogICAgICAgICAgICAgICAgICBpICsNCiAgICAgICAgICAgICAgICAgICddLm5hbWU7IicgKw0KICAgICAgICAgICAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBsKCJ0b2dnbGVCb3giKS5pbm5lckhUTUwgPSBzdHI7DQogICAgICAgICAgICBsKCJ0b2dnbGVCb3giKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIGwoInRvZ2dsZUJveCIpLmZvY3VzKCk7DQogICAgICAgICAgICBHYW1lLnRvb2x0aXAuaGlkZSgpOw0KICAgICAgICAgICAgUGxheVNvdW5kKCJzbmQvdGljay5tcDMiKTsNCiAgICAgICAgICAgIHN1Y2Nlc3MgPSAxOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBvb2wgIT0gInByZXN0aWdlIikgew0KICAgICAgICAgIHZhciBwcmljZSA9IHRoaXMuZ2V0UHJpY2UoKTsNCiAgICAgICAgICBpZiAodGhpcy5jYW5CdXkoKSAmJiAhdGhpcy5ib3VnaHQpIHsNCiAgICAgICAgICAgIEdhbWUuU3BlbmQocHJpY2UpOw0KICAgICAgICAgICAgdGhpcy5ib3VnaHQgPSAxOw0KICAgICAgICAgICAgaWYgKHRoaXMuYnV5RnVuY3Rpb24pIHRoaXMuYnV5RnVuY3Rpb24oKTsNCiAgICAgICAgICAgIGlmICh0aGlzLnRvZ2dsZUludG8pIHsNCiAgICAgICAgICAgICAgR2FtZS5Mb2NrKHRoaXMudG9nZ2xlSW50byk7DQogICAgICAgICAgICAgIEdhbWUuVW5sb2NrKHRoaXMudG9nZ2xlSW50byk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgICAgICBpZiAoR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZCh0aGlzLnBvb2wpKSBHYW1lLlVwZ3JhZGVzT3duZWQrKzsNCiAgICAgICAgICAgIEdhbWUuc2V0T25DcmF0ZSgwKTsNCiAgICAgICAgICAgIEdhbWUudG9vbHRpcC5oaWRlKCk7DQogICAgICAgICAgICBQbGF5U291bmQoInNuZC9idXkiICsgY2hvb3NlKFsxLCAyLCAzLCA0XSkgKyAiLm1wMyIsIDAuNzUpOw0KICAgICAgICAgICAgc3VjY2VzcyA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZhciBwcmljZSA9IHRoaXMuZ2V0UHJpY2UoKTsNCiAgICAgICAgICBpZiAoR2FtZS5oZWF2ZW5seUNoaXBzID49IHByaWNlICYmICF0aGlzLmJvdWdodCkgew0KICAgICAgICAgICAgR2FtZS5oZWF2ZW5seUNoaXBzIC09IHByaWNlOw0KICAgICAgICAgICAgR2FtZS5oZWF2ZW5seUNoaXBzU3BlbnQgKz0gcHJpY2U7DQogICAgICAgICAgICB0aGlzLnVubG9ja2VkID0gMTsNCiAgICAgICAgICAgIHRoaXMuYm91Z2h0ID0gMTsNCiAgICAgICAgICAgIGlmICh0aGlzLmJ1eUZ1bmN0aW9uKSB0aGlzLmJ1eUZ1bmN0aW9uKCk7DQogICAgICAgICAgICBHYW1lLkJ1aWxkQXNjZW5kVHJlZSh0aGlzKTsNCiAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL2J1eSIgKyBjaG9vc2UoWzEsIDIsIDMsIDRdKSArICIubXAzIiwgMC43NSk7DQogICAgICAgICAgICBQbGF5U291bmQoInNuZC9zaGltbWVyQ2xpY2subXAzIik7DQogICAgICAgICAgICAvL1BsYXlTb3VuZCgnc25kL2J1eUhlYXZlbmx5Lm1wMycpOw0KICAgICAgICAgICAgc3VjY2VzcyA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodGhpcy5ib3VnaHQgJiYgdGhpcy5hY3RpdmF0ZUZ1bmN0aW9uKSB0aGlzLmFjdGl2YXRlRnVuY3Rpb24oKTsNCiAgICAgIHJldHVybiBzdWNjZXNzOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlLnByb3RvdHlwZS5lYXJuID0NCiAgICAgIGZ1bmN0aW9uICgpIC8vanVzdCB3aW4gdGhlIHVwZ3JhZGVzIHdpdGhvdXQgc3BlbmRpbmcgYW55dGhpbmcNCiAgICAgIHsNCiAgICAgICAgdGhpcy51bmxvY2tlZCA9IDE7DQogICAgICAgIHRoaXMuYm91Z2h0ID0gMTsNCiAgICAgICAgaWYgKHRoaXMuYnV5RnVuY3Rpb24pIHRoaXMuYnV5RnVuY3Rpb24oKTsNCiAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIGlmIChHYW1lLkNvdW50c0FzVXBncmFkZU93bmVkKHRoaXMucG9vbCkpIEdhbWUuVXBncmFkZXNPd25lZCsrOw0KICAgICAgfTsNCiAgICBHYW1lLlVwZ3JhZGUucHJvdG90eXBlLnVuZWFybiA9DQogICAgICBmdW5jdGlvbiAoKSAvL3JlbW92ZSB0aGUgdXBncmFkZSwgYnV0IGtlZXAgaXQgdW5sb2NrZWQNCiAgICAgIHsNCiAgICAgICAgdGhpcy5ib3VnaHQgPSAwOw0KICAgICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQodGhpcy5wb29sKSkgR2FtZS5VcGdyYWRlc093bmVkLS07DQogICAgICB9Ow0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUudW5sb2NrID0gZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy51bmxvY2tlZCA9IDE7DQogICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICB9Ow0KICAgIEdhbWUuVXBncmFkZS5wcm90b3R5cGUubG9zZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMudW5sb2NrZWQgPSAwOw0KICAgICAgdGhpcy5ib3VnaHQgPSAwOw0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgaWYgKEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQodGhpcy5wb29sKSkgR2FtZS5VcGdyYWRlc093bmVkLS07DQogICAgfTsNCiAgICBHYW1lLlVwZ3JhZGUucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIC8vY2hlYXRpbmcgb25seQ0KICAgIHsNCiAgICAgIGlmICghdGhpcy5ib3VnaHQpIHsNCiAgICAgICAgdGhpcy5ib3VnaHQgPSAxOw0KICAgICAgICBpZiAodGhpcy5idXlGdW5jdGlvbikgdGhpcy5idXlGdW5jdGlvbigpOw0KICAgICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQodGhpcy5wb29sKSkgR2FtZS5VcGdyYWRlc093bmVkKys7DQogICAgICAgIFBsYXlTb3VuZCgic25kL2J1eSIgKyBjaG9vc2UoWzEsIDIsIDMsIDRdKSArICIubXAzIiwgMC43NSk7DQogICAgICAgIGlmICh0aGlzLnBvb2wgPT0gInByZXN0aWdlIiB8fCB0aGlzLnBvb2wgPT0gImRlYnVnIikNCiAgICAgICAgICBQbGF5U291bmQoInNuZC9zaGltbWVyQ2xpY2subXAzIik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmJvdWdodCA9IDA7DQogICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICBpZiAoR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZCh0aGlzLnBvb2wpKSBHYW1lLlVwZ3JhZGVzT3duZWQtLTsNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvc2VsbCIgKyBjaG9vc2UoWzEsIDIsIDMsIDRdKSArICIubXAzIiwgMC43NSk7DQogICAgICAgIGlmICh0aGlzLnBvb2wgPT0gInByZXN0aWdlIiB8fCB0aGlzLnBvb2wgPT0gImRlYnVnIikNCiAgICAgICAgICBQbGF5U291bmQoInNuZC9zaGltbWVyQ2xpY2subXAzIik7DQogICAgICB9DQogICAgICBpZiAoR2FtZS5vbk1lbnUgPT0gInN0YXRzIikgR2FtZS5VcGRhdGVNZW51KCk7DQogICAgfTsNCg0KICAgIEdhbWUuQ291bnRzQXNVcGdyYWRlT3duZWQgPSBmdW5jdGlvbiAocG9vbCkgew0KICAgICAgaWYgKHBvb2wgPT0gIiIgfHwgcG9vbCA9PSAiY29va2llIiB8fCBwb29sID09ICJ0ZWNoIikgcmV0dXJuIHRydWU7DQogICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICB9Ow0KDQogICAgLypBZGRFdmVudChsKCd0b2dnbGVCb3gnKSwnYmx1cicsZnVuY3Rpb24oKS8vaWYgd2UgY2xpY2sgb3V0c2lkZSBvZiB0aGUgc2VsZWN0b3IsIGNsb3NlIGl0DQoJCQl7DQoJCQkJLy90aGlzIGhhcyBhIGNvdXBsZSBwcm9ibGVtcywgc3VjaCBhcyB3aGVuIGNsaWNraW5nIG9uIHRoZSB1cGdyYWRlIC0gdGhpcyB0b2dnbGVzIGl0IG9mZiBhbmQgYmFjayBvbiBpbnN0YW50bHkNCgkJCQlsKCd0b2dnbGVCb3gnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsNCgkJCQlsKCd0b2dnbGVCb3gnKS5pbm5lckhUTUw9Jyc7DQoJCQkJR2FtZS5jaG9pY2VTZWxlY3Rvck9uPS0xOw0KCQkJfQ0KCQkpOyovDQoNCiAgICBHYW1lLlJlcXVpcmVzQ29uZmlybWF0aW9uID0gZnVuY3Rpb24gKHVwZ3JhZGUsIHByb21wdCkgew0KICAgICAgdXBncmFkZS5jbGlja0Z1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlByb21wdCgiPGlkIFJlcXVpcmVzQ29uZmlybWF0aW9uPiIgKyBwcm9tcHQsIFsNCiAgICAgICAgICBbDQogICAgICAgICAgICBsb2MoIlllcyIpLA0KICAgICAgICAgICAgIkdhbWUuVXBncmFkZXNCeUlkWyIgKyB1cGdyYWRlLmlkICsgIl0uYnV5KDEpO0dhbWUuQ2xvc2VQcm9tcHQoKTsiLA0KICAgICAgICAgIF0sDQogICAgICAgICAgbG9jKCJObyIpLA0KICAgICAgICBdKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfTsNCiAgICB9Ow0KDQogICAgR2FtZS5VbmxvY2sgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgaWYgKHR5cGVvZiB3aGF0ID09PSAic3RyaW5nIikgew0KICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc1t3aGF0XSkgew0KICAgICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzW3doYXRdLnVubG9ja2VkID09IDApIHsNCiAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbd2hhdF0udW5sb2NrZWQgPSAxOw0KICAgICAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgLypHYW1lLk5vdGlmeSgnVXBncmFkZSB1bmxvY2tlZCcsJzxkaXYgY2xhc3M9InRpdGxlIiBzdHlsZT0iZm9udC1zaXplOjE4cHg7bWFyZ2luLXRvcDotMnB4OyI+JytHYW1lLlVwZ3JhZGVzW3doYXRdLmRuYW1lKyc8L2Rpdj4nLEdhbWUuVXBncmFkZXNbd2hhdF0uaWNvbiw2KTsqLw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZm9yICh2YXIgaSBpbiB3aGF0KSB7DQogICAgICAgICAgR2FtZS5VbmxvY2sod2hhdFtpXSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuTG9jayA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBpZiAodHlwZW9mIHdoYXQgPT09ICJzdHJpbmciKSB7DQogICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzW3doYXRdKSB7DQogICAgICAgICAgR2FtZS5VcGdyYWRlc1t3aGF0XS51bmxvY2tlZCA9IDA7DQogICAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgR2FtZS5VcGdyYWRlc1t3aGF0XS5ib3VnaHQgPT0gMSAmJg0KICAgICAgICAgICAgR2FtZS5Db3VudHNBc1VwZ3JhZGVPd25lZChHYW1lLlVwZ3JhZGVzW3doYXRdLnBvb2wpDQogICAgICAgICAgKQ0KICAgICAgICAgICAgR2FtZS5VcGdyYWRlc093bmVkLS07DQogICAgICAgICAgR2FtZS5VcGdyYWRlc1t3aGF0XS5ib3VnaHQgPSAwOw0KICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGZvciAodmFyIGkgaW4gd2hhdCkgew0KICAgICAgICAgIEdhbWUuTG9jayh3aGF0W2ldKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLkhhcyA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICB2YXIgaXQgPSBHYW1lLlVwZ3JhZGVzW3doYXRdOw0KICAgICAgaWYgKA0KICAgICAgICBpdCAmJg0KICAgICAgICBHYW1lLmFzY2Vuc2lvbk1vZGUgPT0gMSAmJg0KICAgICAgICAoaXQucG9vbCA9PSAicHJlc3RpZ2UiIHx8IGl0LnRpZXIgPT0gImZvcnR1bmUiKQ0KICAgICAgKQ0KICAgICAgICByZXR1cm4gMDsNCiAgICAgIHJldHVybiBpdCA/IGl0LmJvdWdodCA6IDA7DQogICAgfTsNCiAgICBHYW1lLkhhc1VubG9ja2VkID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIHJldHVybiBHYW1lLlVwZ3JhZGVzW3doYXRdID8gR2FtZS5VcGdyYWRlc1t3aGF0XS51bmxvY2tlZCA6IDA7DQogICAgfTsNCg0KICAgIEdhbWUuUmVidWlsZFVwZ3JhZGVzID0gZnVuY3Rpb24gKCkgLy9yZWNhbGN1bGF0ZSB0aGUgdXBncmFkZXMgeW91IGNhbiBidXkNCiAgICB7DQogICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMDsNCiAgICAgIHZhciBsaXN0ID0gW107DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgICFtZS5ib3VnaHQgJiYNCiAgICAgICAgICBtZS5wb29sICE9ICJkZWJ1ZyIgJiYNCiAgICAgICAgICBtZS5wb29sICE9ICJwcmVzdGlnZSIgJiYNCiAgICAgICAgICBtZS5wb29sICE9ICJwcmVzdGlnZURlY29yIiAmJg0KICAgICAgICAgIChHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSB8fCAoIW1lLmxhc3RpbmcgJiYgbWUudGllciAhPSAiZm9ydHVuZSIpKQ0KICAgICAgICApIHsNCiAgICAgICAgICBpZiAobWUudW5sb2NrZWQpIGxpc3QucHVzaChtZSk7DQogICAgICAgIH0gZWxzZSBpZiAobWUuZGlzcGxheUZ1bmNXaGVuT3duZWQgJiYgbWUuYm91Z2h0KSBsaXN0LnB1c2gobWUpOw0KICAgICAgfQ0KICAgICAgdmFyIHNvcnRNYXAgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICB2YXIgYXAgPSBhLnBvb2wgPT0gInRvZ2dsZSIgPyBhLm9yZGVyIDogYS5nZXRQcmljZSgpOw0KICAgICAgICB2YXIgYnAgPSBiLnBvb2wgPT0gInRvZ2dsZSIgPyBiLm9yZGVyIDogYi5nZXRQcmljZSgpOw0KICAgICAgICBpZiAoYXAgPiBicCkgcmV0dXJuIDE7DQogICAgICAgIGVsc2UgaWYgKGFwIDwgYnApIHJldHVybiAtMTsNCiAgICAgICAgZWxzZSByZXR1cm4gMDsNCiAgICAgIH07DQogICAgICBsaXN0LnNvcnQoc29ydE1hcCk7DQoNCiAgICAgIEdhbWUuVXBncmFkZXNJblN0b3JlID0gW107DQogICAgICBmb3IgKHZhciBpIGluIGxpc3QpIHsNCiAgICAgICAgR2FtZS5VcGdyYWRlc0luU3RvcmUucHVzaChsaXN0W2ldKTsNCiAgICAgIH0NCiAgICAgIHZhciBzdG9yZVN0ciA9ICIiOw0KICAgICAgdmFyIHRvZ2dsZVN0ciA9ICIiOw0KICAgICAgdmFyIHRlY2hTdHIgPSAiIjsNCiAgICAgIHZhciB2YXVsdFN0ciA9ICIiOw0KDQogICAgICBpZiAoR2FtZS5IYXMoIkluc3BpcmVkIGNoZWNrbGlzdCIpKSB7DQogICAgICAgIHN0b3JlU3RyICs9DQogICAgICAgICAgJzxkaXYgaWQ9InN0b3JlQnV5QWxsIiBjbGFzcz0ic3RvcmVQcmUiICcgKw0KICAgICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweDttaW4td2lkdGg6MjUwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7IiBpZD0idG9vbHRpcFN0b3JlUHJlIj4nICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJXaWxsIDxiPmluc3RhbnRseSBwdXJjaGFzZTwvYj4gZXZlcnkgdXBncmFkZSB5b3UgY2FuIGFmZm9yZCwgc3RhcnRpbmcgZnJvbSB0aGUgY2hlYXBlc3Qgb25lLjxicj5VcGdyYWRlcyBpbiB0aGUgPGI+dmF1bHQ8L2I+IHdpbGwgbm90IGJlIGF1dG8tcHVyY2hhc2VkLjxicj5Zb3UgbWF5IHBsYWNlIGFuIHVwZ3JhZGUgaW50byB0aGUgdmF1bHQgYnkgPGI+U2hpZnQtY2xpY2tpbmc8L2I+IG9uIGl0LiINCiAgICAgICAgICAgICAgKSArDQogICAgICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAgICAgInN0b3JlIg0KICAgICAgICAgICkgKw0KICAgICAgICAgICI+IiArDQogICAgICAgICAgJzxkaXYgaWQ9InN0b3JlQnV5QWxsQnV0dG9uIiBjbGFzcz0ic3RvcmVQcmVCdXR0b24iICcgKw0KICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICc9IkdhbWUuc3RvcmVCdXlBbGwoKTsiPicgKw0KICAgICAgICAgIGxvYygiQnV5IGFsbCB1cGdyYWRlcyIpICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgIjwvZGl2PiI7DQogICAgICAgIGwoInVwZ3JhZGVzIikuY2xhc3NMaXN0LmFkZCgiaGFzTWVudSIpOw0KICAgICAgfSBlbHNlIGwoInVwZ3JhZGVzIikuY2xhc3NMaXN0LnJlbW92ZSgiaGFzTWVudSIpOw0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXNJblN0b3JlKSB7DQogICAgICAgIC8vaWYgKCFHYW1lLlVwZ3JhZGVzSW5TdG9yZVtpXSkgYnJlYWs7DQogICAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNJblN0b3JlW2ldOw0KICAgICAgICB2YXIgc3RyID0gR2FtZS5jcmF0ZSgNCiAgICAgICAgICBtZSwNCiAgICAgICAgICAic3RvcmUiLA0KICAgICAgICAgICJHYW1lLlVwZ3JhZGVzQnlJZFsiICsgbWUuaWQgKyAiXS5jbGljayhldmVudCk7IiwNCiAgICAgICAgICAidXBncmFkZSIgKyBpDQogICAgICAgICk7DQoNCiAgICAgICAgLyp2YXIgc3RyPSc8ZGl2IGNsYXNzPSJjcmF0ZSB1cGdyYWRlIiAnK0dhbWUuZ2V0VG9vbHRpcCgNCgkJCQknPGRpdiBzdHlsZT0ibWluLXdpZHRoOjIwMHB4OyI+PGRpdiBzdHlsZT0iZmxvYXQ6cmlnaHQ7Ij48c3BhbiBjbGFzcz0icHJpY2UiPicrQmVhdXRpZnkoTWF0aC5yb3VuZChtZS5nZXRQcmljZSgpKSkrJzwvc3Bhbj48L2Rpdj48c21hbGw+JysobWUucG9vbD09J3RvZ2dsZSc/J1tUb2dnbGFibGVdJzonW1VwZ3JhZGVdJykrJzwvc21hbGw+PGRpdiBjbGFzcz0ibmFtZSI+JyttZS5kbmFtZSsnPC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBjbGFzcz0iZGVzY3JpcHRpb24iPicrbWUuZGVzYysnPC9kaXY+PC9kaXY+Jw0KCQkJCSwnc3RvcmUnKSsnICcrR2FtZS5jbGlja1N0cisnPSJHYW1lLlVwZ3JhZGVzQnlJZFsnK21lLmlkKyddLmJ1eSgpOyIgaWQ9InVwZ3JhZGUnK2krJyIgc3R5bGU9Iicrd3JpdGVJY29uKG1lLmljb24pKyciPjwvZGl2Pic7Ki8NCiAgICAgICAgaWYgKG1lLnBvb2wgPT0gInRvZ2dsZSIpIHRvZ2dsZVN0ciArPSBzdHI7DQogICAgICAgIGVsc2UgaWYgKG1lLnBvb2wgPT0gInRlY2giKSB0ZWNoU3RyICs9IHN0cjsNCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgaWYgKG1lLmlzVmF1bHRlZCgpICYmIEdhbWUuSGFzKCJJbnNwaXJlZCBjaGVja2xpc3QiKSkgdmF1bHRTdHIgKz0gc3RyOw0KICAgICAgICAgIGVsc2Ugc3RvcmVTdHIgKz0gc3RyOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGwoInVwZ3JhZGVzIikuaW5uZXJIVE1MID0gc3RvcmVTdHI7DQogICAgICBsKCJ0b2dnbGVVcGdyYWRlcyIpLmlubmVySFRNTCA9IHRvZ2dsZVN0cjsNCiAgICAgIGlmICh0b2dnbGVTdHIgPT0gIiIpIGwoInRvZ2dsZVVwZ3JhZGVzIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIGVsc2UgbCgidG9nZ2xlVXBncmFkZXMiKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIGwoInRlY2hVcGdyYWRlcyIpLmlubmVySFRNTCA9IHRlY2hTdHI7DQogICAgICBpZiAodGVjaFN0ciA9PSAiIikgbCgidGVjaFVwZ3JhZGVzIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIGVsc2UgbCgidGVjaFVwZ3JhZGVzIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICBsKCJ2YXVsdFVwZ3JhZGVzIikuaW5uZXJIVE1MID0gdmF1bHRTdHI7DQogICAgICBpZiAodmF1bHRTdHIgPT0gIiIpIGwoInZhdWx0VXBncmFkZXMiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgZWxzZSBsKCJ2YXVsdFVwZ3JhZGVzIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgfTsNCg0KICAgIEdhbWUuVW5sb2NrQXQgPSBbXTsgLy90aGlzIGNvbnRhaW5zIGFuIGFycmF5IG9mIGV2ZXJ5IHVwZ3JhZGUgd2l0aCBhIGNvb2tpZSByZXF1aXJlbWVudCBpbiB0aGUgZm9ybSBvZiB7Y29va2llczooYW1vdW50IG9mIGNvb2tpZXMgZWFybmVkIHJlcXVpcmVkKSxuYW1lOihuYW1lIG9mIHVwZ3JhZGUgb3IgYWNoaWV2ZW1lbnQgdG8gdW5sb2NrKX0gKGFuZCBwb3NzaWJseSByZXF1aXJlOihuYW1lIG9mIHVwZ3JhZGUgb2YgYWNoaWV2ZW1lbnQgdG8gb3duKSkNCiAgICAvL25vdGUgOiB0aGUgY29va2llIHdpbGwgbm90IGJlIGFkZGVkIHRvIHRoZSBsaXN0IGlmIGl0IGNvbnRhaW5zIGxvY2tlZDoxICh1c2UgZm9yIHNlYXNvbmFsIGNvb2tpZXMgYW5kIHN1Y2gpDQoNCiAgICB2YXIgc3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzID0gbG9jKA0KICAgICAgIkNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZXIgPGI+KyUxJTwvYj4uIiwNCiAgICAgICJbeF0iDQogICAgKTsNCiAgICB2YXIgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzID0gZnVuY3Rpb24gKHgpIHsNCiAgICAgIHJldHVybiBzdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMucmVwbGFjZSgiW3hdIiwgeCk7DQogICAgfTsNCiAgICB2YXIgZ2V0U3RyVGhvdXNhbmRGaW5nZXJzR2FpbiA9IGZ1bmN0aW9uICh4KSB7DQogICAgICByZXR1cm4gbG9jKCJNdWx0aXBsaWVzIHRoZSBnYWluIGZyb20gJTEgYnkgPGI+JTI8L2I+LiIsIFsNCiAgICAgICAgZ2V0VXBncmFkZU5hbWUoIlRob3VzYW5kIGZpbmdlcnMiKSwNCiAgICAgICAgeCwNCiAgICAgIF0pOw0KICAgIH07DQogICAgdmFyIHN0cktpdHRlbkRlc2MgPSBsb2MoIllvdSBnYWluIDxiPm1vcmUgQ3BTPC9iPiB0aGUgbW9yZSBtaWxrIHlvdSBoYXZlLiIpOw0KICAgIHZhciBnZXRTdHJDbGlja2luZ0dhaW5zID0gZnVuY3Rpb24gKHgpIHsNCiAgICAgIHJldHVybiBsb2MoIkNsaWNraW5nIGdhaW5zIDxiPislMSUgb2YgeW91ciBDcFM8L2I+LiIsIHgpOw0KICAgIH07DQoNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUgPSBmdW5jdGlvbiAob2JqKSB7DQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgIG9iai5uYW1lLA0KICAgICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoDQogICAgICAgICAgQmVhdXRpZnkoDQogICAgICAgICAgICB0eXBlb2Ygb2JqLnBvd2VyID09PSAiZnVuY3Rpb24iID8gb2JqLnBvd2VyKG9iaikgOiBvYmoucG93ZXIsDQogICAgICAgICAgICAxDQogICAgICAgICAgKQ0KICAgICAgICApICsgKEVOID8gIjxxPiIgKyBvYmouZGVzYyArICI8L3E+IiA6ICIiKSwNCiAgICAgICAgb2JqLnByaWNlLA0KICAgICAgICBvYmouaWNvbg0KICAgICAgKTsNCiAgICAgIHVwZ3JhZGUucG93ZXIgPSBvYmoucG93ZXI7DQogICAgICB1cGdyYWRlLnBvb2wgPSAiY29va2llIjsNCiAgICAgIHZhciB0b1B1c2ggPSB7IGNvb2tpZXM6IG9iai5wcmljZSAvIDIwLCBuYW1lOiBvYmoubmFtZSB9Ow0KICAgICAgaWYgKG9iai5yZXF1aXJlKSB0b1B1c2gucmVxdWlyZSA9IG9iai5yZXF1aXJlOw0KICAgICAgaWYgKG9iai5zZWFzb24pIHRvUHVzaC5zZWFzb24gPSBvYmouc2Vhc29uOw0KICAgICAgaWYgKCFvYmoubG9ja2VkKSBHYW1lLlVubG9ja0F0LnB1c2godG9QdXNoKTsNCiAgICAgIHJldHVybiB1cGdyYWRlOw0KICAgIH07DQoNCiAgICAvL3RpZXJlZCB1cGdyYWRlcyBzeXN0ZW0NCiAgICAvL2VhY2ggYnVpbGRpbmcgaGFzIHNldmVyYWwgdXBncmFkZSB0aWVycw0KICAgIC8vYWxsIHVwZ3JhZGVzIGluIHRoZSBzYW1lIHRpZXIgaGF2ZSB0aGUgc2FtZSBjb2xvciwgdW5sb2NrIHRocmVzaG9sZCBhbmQgcHJpY2UgbXVsdGlwbGllcg0KICAgIEdhbWUuVGllcnMgPSB7DQogICAgICAxOiB7DQogICAgICAgIG5hbWU6ICJQbGFpbiIsDQogICAgICAgIHVubG9jazogMSwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiAxLA0KICAgICAgICBpY29uUm93OiAwLA0KICAgICAgICBjb2xvcjogIiNjY2IzYWMiLA0KICAgICAgICBwcmljZTogMTAsDQogICAgICB9LA0KICAgICAgMjogew0KICAgICAgICBuYW1lOiAiQmVycnlsaXVtIiwNCiAgICAgICAgdW5sb2NrOiA1LA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDUwLA0KICAgICAgICBpY29uUm93OiAxLA0KICAgICAgICBjb2xvcjogIiNmZjg5ZTciLA0KICAgICAgICBwcmljZTogNTAsDQogICAgICB9LA0KICAgICAgMzogew0KICAgICAgICBuYW1lOiAiQmx1ZWJlcnJ5bGl1bSIsDQogICAgICAgIHVubG9jazogMjUsDQogICAgICAgIGFjaGlldlVubG9jazogMTAwLA0KICAgICAgICBpY29uUm93OiAyLA0KICAgICAgICBjb2xvcjogIiMwMGRlZmYiLA0KICAgICAgICBwcmljZTogNTAwLA0KICAgICAgfSwNCiAgICAgIDQ6IHsNCiAgICAgICAgbmFtZTogIkNoYWxjZWRob25leSIsDQogICAgICAgIHVubG9jazogNTAsDQogICAgICAgIGFjaGlldlVubG9jazogMTUwLA0KICAgICAgICBpY29uUm93OiAxMywNCiAgICAgICAgY29sb3I6ICIjZmZjYzJmIiwNCiAgICAgICAgcHJpY2U6IDUwMDAwLA0KICAgICAgfSwNCiAgICAgIDU6IHsNCiAgICAgICAgbmFtZTogIkJ1dHRlcmdvbGQiLA0KICAgICAgICB1bmxvY2s6IDEwMCwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiAyMDAsDQogICAgICAgIGljb25Sb3c6IDE0LA0KICAgICAgICBjb2xvcjogIiNlOWQ2NzMiLA0KICAgICAgICBwcmljZTogNTAwMDAwMCwNCiAgICAgIH0sDQogICAgICA2OiB7DQogICAgICAgIG5hbWU6ICJTdWdhcm11Y2siLA0KICAgICAgICB1bmxvY2s6IDE1MCwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiAyNTAsDQogICAgICAgIGljb25Sb3c6IDE1LA0KICAgICAgICBjb2xvcjogIiNhOGJmOTEiLA0KICAgICAgICBwcmljZTogNTAwMDAwMDAwLA0KICAgICAgfSwNCiAgICAgIDc6IHsNCiAgICAgICAgbmFtZTogIkpldG1pbnQiLA0KICAgICAgICB1bmxvY2s6IDIwMCwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiAzMDAsDQogICAgICAgIGljb25Sb3c6IDE2LA0KICAgICAgICBjb2xvcjogIiM2MGZmNTAiLA0KICAgICAgICBwcmljZTogNTAwMDAwMDAwMDAwLA0KICAgICAgfSwNCiAgICAgIDg6IHsNCiAgICAgICAgbmFtZTogIkNoZXJyeXNpbHZlciIsDQogICAgICAgIHVubG9jazogMjUwLA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDM1MCwNCiAgICAgICAgaWNvblJvdzogMTcsDQogICAgICAgIGNvbG9yOiAiI2YwMTcwMCIsDQogICAgICAgIHByaWNlOiA1MDAwMDAwMDAwMDAwMDAsDQogICAgICB9LA0KICAgICAgOTogew0KICAgICAgICBuYW1lOiAiSGF6ZWxyYWxkIiwNCiAgICAgICAgdW5sb2NrOiAzMDAsDQogICAgICAgIGFjaGlldlVubG9jazogNDAwLA0KICAgICAgICBpY29uUm93OiAxOCwNCiAgICAgICAgY29sb3I6ICIjOWFiODM0IiwNCiAgICAgICAgcHJpY2U6IDUwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICAxMDogew0KICAgICAgICBuYW1lOiAiTW9vbmNhbmR5IiwNCiAgICAgICAgdW5sb2NrOiAzNTAsDQogICAgICAgIGFjaGlldlVubG9jazogNDUwLA0KICAgICAgICBpY29uUm93OiAxOSwNCiAgICAgICAgY29sb3I6ICIjN2U3YWI5IiwNCiAgICAgICAgcHJpY2U6IDUwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICAxMTogew0KICAgICAgICBuYW1lOiAiQXN0cm9mdWRnZSIsDQogICAgICAgIHVubG9jazogNDAwLA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDUwMCwNCiAgICAgICAgaWNvblJvdzogMjgsDQogICAgICAgIGNvbG9yOiAiIzlhMzMxNiIsDQogICAgICAgIHByaWNlOiA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgfSwNCiAgICAgIDEyOiB7DQogICAgICAgIG5hbWU6ICJBbGFiYXNjcmVhbSIsDQogICAgICAgIHVubG9jazogNDUwLA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDU1MCwNCiAgICAgICAgaWNvblJvdzogMzAsDQogICAgICAgIGNvbG9yOiAiI2MxYTg4YyIsDQogICAgICAgIHByaWNlOiA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICAxMzogew0KICAgICAgICBuYW1lOiAiSXJpZHl1bSIsDQogICAgICAgIHVubG9jazogNTAwLA0KICAgICAgICBhY2hpZXZVbmxvY2s6IDYwMCwNCiAgICAgICAgaWNvblJvdzogMzEsDQogICAgICAgIGNvbG9yOiAiI2FkYjFiMyIsDQogICAgICAgIHByaWNlOiA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICB9LA0KICAgICAgMTQ6IHsNCiAgICAgICAgbmFtZTogIkdsdWNvc21pdW0iLA0KICAgICAgICB1bmxvY2s6IDU1MCwNCiAgICAgICAgYWNoaWV2VW5sb2NrOiA2NTAsDQogICAgICAgIGljb25Sb3c6IDM0LA0KICAgICAgICBjb2xvcjogIiNmZjg5ZTciLA0KICAgICAgICBwcmljZTogNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICBzeW5lcmd5MTogew0KICAgICAgICBuYW1lOiAiU3luZXJneSBJIiwNCiAgICAgICAgdW5sb2NrOiAxNSwNCiAgICAgICAgaWNvblJvdzogMjAsDQogICAgICAgIGNvbG9yOiAiIzAwODU5NSIsDQogICAgICAgIHNwZWNpYWw6IDEsDQogICAgICAgIHJlcTogIlN5bmVyZ2llcyBWb2wuIEkiLA0KICAgICAgICBwcmljZTogMjAwMDAwLA0KICAgICAgfSwNCiAgICAgIHN5bmVyZ3kyOiB7DQogICAgICAgIG5hbWU6ICJTeW5lcmd5IElJIiwNCiAgICAgICAgdW5sb2NrOiA3NSwNCiAgICAgICAgaWNvblJvdzogMjksDQogICAgICAgIGNvbG9yOiAiIzAwODU5NSIsDQogICAgICAgIHNwZWNpYWw6IDEsDQogICAgICAgIHJlcTogIlN5bmVyZ2llcyBWb2wuIElJIiwNCiAgICAgICAgcHJpY2U6IDIwMDAwMDAwMDAwMCwNCiAgICAgIH0sDQogICAgICBmb3J0dW5lOiB7DQogICAgICAgIG5hbWU6ICJGb3J0dW5lIiwNCiAgICAgICAgdW5sb2NrOiAtMSwNCiAgICAgICAgaWNvblJvdzogMzIsDQogICAgICAgIGNvbG9yOiAiIzlhYjgzNCIsDQogICAgICAgIHNwZWNpYWw6IDEsDQogICAgICAgIHByaWNlOiA3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3NywNCiAgICAgIH0sDQogICAgfTsNCiAgICBmb3IgKHZhciBpIGluIEdhbWUuVGllcnMpIHsNCiAgICAgIEdhbWUuVGllcnNbaV0udXBncmFkZXMgPSBbXTsNCiAgICB9DQogICAgR2FtZS5HZXRJY29uID0gZnVuY3Rpb24gKHR5cGUsIHRpZXIpIHsNCiAgICAgIHZhciBjb2wgPSAwOw0KICAgICAgaWYgKHR5cGUgPT0gIktpdHRlbiIpIGNvbCA9IDE4Ow0KICAgICAgZWxzZSBjb2wgPSBHYW1lLk9iamVjdHNbdHlwZV0uaWNvbkNvbHVtbjsNCiAgICAgIHJldHVybiBbY29sLCBHYW1lLlRpZXJzW3RpZXJdLmljb25Sb3ddOw0KICAgIH07DQogICAgR2FtZS5TZXRUaWVyID0gZnVuY3Rpb24gKGJ1aWxkaW5nLCB0aWVyKSB7DQogICAgICBpZiAoIUdhbWUuT2JqZWN0c1tidWlsZGluZ10pDQogICAgICAgIGNvbnNvbGUubG9nKCJXYXJuaW5nOiBObyBidWlsZGluZyBuYW1lZCIsIGJ1aWxkaW5nKTsNCiAgICAgIEdhbWUubGFzdC50aWVyID0gdGllcjsNCiAgICAgIEdhbWUubGFzdC5idWlsZGluZ1RpZSA9IEdhbWUuT2JqZWN0c1tidWlsZGluZ107DQogICAgICBpZiAoR2FtZS5sYXN0LnR5cGUgPT0gImFjaGlldmVtZW50IikNCiAgICAgICAgR2FtZS5PYmplY3RzW2J1aWxkaW5nXS50aWVyZWRBY2hpZXZzW3RpZXJdID0gR2FtZS5sYXN0Ow0KICAgICAgZWxzZSBHYW1lLk9iamVjdHNbYnVpbGRpbmddLnRpZXJlZFVwZ3JhZGVzW3RpZXJdID0gR2FtZS5sYXN0Ow0KICAgIH07DQogICAgR2FtZS5NYWtlVGllcmVkID0gZnVuY3Rpb24gKHVwZ3JhZGUsIHRpZXIsIGNvbCkgew0KICAgICAgdXBncmFkZS50aWVyID0gdGllcjsNCiAgICAgIGlmICh0eXBlb2YgY29sICE9PSAidW5kZWZpbmVkIikNCiAgICAgICAgdXBncmFkZS5pY29uID0gW2NvbCwgR2FtZS5UaWVyc1t0aWVyXS5pY29uUm93XTsNCiAgICB9Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSA9IGZ1bmN0aW9uIChuYW1lLCBkZXNjLCBidWlsZGluZywgdGllcikgew0KICAgICAgaWYgKHRpZXIgPT0gImZvcnR1bmUiICYmIGJ1aWxkaW5nKQ0KICAgICAgICBkZXNjID0NCiAgICAgICAgICBsb2MoIiUxIGFyZSA8Yj4lMiU8L2I+IG1vcmUgZWZmaWNpZW50IGFuZCA8Yj4lMyU8L2I+IGNoZWFwZXIuIiwgWw0KICAgICAgICAgICAgY2FwKEdhbWUuT2JqZWN0c1tidWlsZGluZ10ucGx1cmFsKSwNCiAgICAgICAgICAgIDcsDQogICAgICAgICAgICA3LA0KICAgICAgICAgIF0pICsgZGVzYzsNCiAgICAgIGVsc2UNCiAgICAgICAgZGVzYyA9DQogICAgICAgICAgbG9jKA0KICAgICAgICAgICAgIiUxIGFyZSA8Yj50d2ljZTwvYj4gYXMgZWZmaWNpZW50LiIsDQogICAgICAgICAgICBjYXAoR2FtZS5PYmplY3RzW2J1aWxkaW5nXS5wbHVyYWwpDQogICAgICAgICAgKSArIGRlc2M7DQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgIG5hbWUsDQogICAgICAgIGRlc2MsDQogICAgICAgIEdhbWUuT2JqZWN0c1tidWlsZGluZ10uYmFzZVByaWNlICogR2FtZS5UaWVyc1t0aWVyXS5wcmljZSwNCiAgICAgICAgR2FtZS5HZXRJY29uKGJ1aWxkaW5nLCB0aWVyKQ0KICAgICAgKTsNCiAgICAgIGlmICh0aWVyICE9ICJmb3J0dW5lIikgew0KICAgICAgICB1cGdyYWRlLmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiAoDQogICAgICAgICAgICAoR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEgJiYNCiAgICAgICAgICAgIEdhbWUuSGFzKHRoaXMuYnVpbGRpbmdUaWUxLnVuc2hhY2tsZVVwZ3JhZGUpICYmDQogICAgICAgICAgICBHYW1lLkhhcyhHYW1lLlRpZXJzW3RoaXMudGllcl0udW5zaGFja2xlVXBncmFkZSkNCiAgICAgICAgICAgICAgPyAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICAgICAiVW5zaGFja2xlZCEgPGI+KyUxJTwvYj4gZXh0cmEgcHJvZHVjdGlvbi4iLA0KICAgICAgICAgICAgICAgICAgTWF0aC5yb3VuZCgNCiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYnVpbGRpbmdUaWUuaWQgPT0gMQ0KICAgICAgICAgICAgICAgICAgICAgID8gMC41DQogICAgICAgICAgICAgICAgICAgICAgOiAoMjAgLSB0aGlzLmJ1aWxkaW5nVGllLmlkKSAqIDAuMSkgKiAxMDANCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAnPC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+Jw0KICAgICAgICAgICAgICA6ICIiKSArIHRoaXMuZGRlc2MNCiAgICAgICAgICApOw0KICAgICAgICB9Ow0KICAgICAgfQ0KDQogICAgICBHYW1lLlNldFRpZXIoYnVpbGRpbmcsIHRpZXIpOw0KICAgICAgaWYgKCF1cGdyYWRlLmJ1aWxkaW5nVGllMSAmJiBidWlsZGluZykNCiAgICAgICAgdXBncmFkZS5idWlsZGluZ1RpZTEgPSBHYW1lLk9iamVjdHNbYnVpbGRpbmddOw0KICAgICAgaWYgKHRpZXIgPT0gImZvcnR1bmUiICYmIGJ1aWxkaW5nKQ0KICAgICAgICBHYW1lLk9iamVjdHNbYnVpbGRpbmddLmZvcnR1bmUgPSB1cGdyYWRlOw0KICAgICAgcmV0dXJuIHVwZ3JhZGU7DQogICAgfTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlID0gZnVuY3Rpb24gKG5hbWUsIGRlc2MsIGJ1aWxkaW5nMSwgYnVpbGRpbmcyLCB0aWVyKSB7DQogICAgICAvKg0KCQkJCWNyZWF0ZXMgYSBuZXcgdXBncmFkZSB0aGF0IDoNCgkJCQktdW5sb2NrcyB3aGVuIHlvdSBoYXZlIHRpZXIudW5sb2NrIG9mIGJ1aWxkaW5nMSBhbmQgYnVpbGRpbmcyDQoJCQkJLWlzIHByaWNlZCBhdCAoYnVpbGRpbmcxLnByaWNlKjEwK2J1aWxkaW5nMi5wcmljZSoxKSp0aWVyLnByaWNlIChmb3JtZXJseSA6IE1hdGguc3FydChidWlsZGluZzEucHJpY2UqYnVpbGRpbmcyLnByaWNlKSp0aWVyLnByaWNlKQ0KCQkJCS1naXZlcyArKDAuMSpidWlsZGluZzEpJSBjcHMgdG8gYnVpbGRpbmcyIGFuZCArKDUqYnVpbGRpbmcyKSUgY3BzIHRvIGJ1aWxkaW5nMQ0KCQkJCS1pZiBidWlsZGluZzIgaXMgYmVsb3cgYnVpbGRpbmcxIGluIHdvcnRoLCBzd2FwIHRoZW0NCgkJCSovDQogICAgICAvL2lmIChHYW1lLk9iamVjdHNbYnVpbGRpbmcxXS5iYXNlUHJpY2U+R2FtZS5PYmplY3RzW2J1aWxkaW5nMl0uYmFzZVByaWNlKSB7dmFyIHRlbXA9YnVpbGRpbmcyO2J1aWxkaW5nMj1idWlsZGluZzE7YnVpbGRpbmcxPXRlbXA7fQ0KICAgICAgdmFyIGIxID0gR2FtZS5PYmplY3RzW2J1aWxkaW5nMV07DQogICAgICB2YXIgYjIgPSBHYW1lLk9iamVjdHNbYnVpbGRpbmcyXTsNCiAgICAgIGlmIChiMS5iYXNlUHJpY2UgPiBiMi5iYXNlUHJpY2UpIHsNCiAgICAgICAgYjEgPSBHYW1lLk9iamVjdHNbYnVpbGRpbmcyXTsNCiAgICAgICAgYjIgPSBHYW1lLk9iamVjdHNbYnVpbGRpbmcxXTsNCiAgICAgIH0gLy9zd2FwDQoNCiAgICAgIGRlc2MgPQ0KICAgICAgICBsb2MoIiUxIGdhaW4gPGI+KyUyJTwvYj4gQ3BTIHBlciAlMy4iLCBbY2FwKGIxLnBsdXJhbCksIDUsIGIyLnNpbmdsZV0pICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCIlMSBnYWluIDxiPislMiU8L2I+IENwUyBwZXIgJTMuIiwgWw0KICAgICAgICAgIGNhcChiMi5wbHVyYWwpLA0KICAgICAgICAgIDAuMSwNCiAgICAgICAgICBiMS5zaW5nbGUsDQogICAgICAgIF0pICsNCiAgICAgICAgKEVOID8gZGVzYyA6ICIiKTsNCiAgICAgIHZhciB1cGdyYWRlID0gbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICAgbmFtZSwNCiAgICAgICAgZGVzYywNCiAgICAgICAgKGIxLmJhc2VQcmljZSAqIDEwICsgYjIuYmFzZVByaWNlICogMSkgKiBHYW1lLlRpZXJzW3RpZXJdLnByaWNlLA0KICAgICAgICBHYW1lLkdldEljb24oYnVpbGRpbmcxLCB0aWVyKQ0KICAgICAgKTsgLy9NYXRoLnNxcnQoYjEuYmFzZVByaWNlKmIyLmJhc2VQcmljZSkqR2FtZS5UaWVyc1t0aWVyXS5wcmljZQ0KICAgICAgdXBncmFkZS50aWVyID0gdGllcjsNCiAgICAgIHVwZ3JhZGUuYnVpbGRpbmdUaWUxID0gYjE7DQogICAgICB1cGdyYWRlLmJ1aWxkaW5nVGllMiA9IGIyOw0KICAgICAgdXBncmFkZS5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgKHRoaXMuYnVpbGRpbmdUaWUxLmJhc2VQcmljZSAqIDEwICsgdGhpcy5idWlsZGluZ1RpZTIuYmFzZVByaWNlICogMSkgKg0KICAgICAgICAgIEdhbWUuVGllcnNbdGhpcy50aWVyXS5wcmljZSAqDQogICAgICAgICAgKEdhbWUuSGFzKCJDaGltZXJhIikgPyAwLjk4IDogMSkNCiAgICAgICAgKTsNCiAgICAgIH07DQogICAgICBHYW1lLk9iamVjdHNbYnVpbGRpbmcxXS5zeW5lcmdpZXMucHVzaCh1cGdyYWRlKTsNCiAgICAgIEdhbWUuT2JqZWN0c1tidWlsZGluZzJdLnN5bmVyZ2llcy5wdXNoKHVwZ3JhZGUpOw0KICAgICAgLy9HYW1lLlNldFRpZXIoYnVpbGRpbmcxLHRpZXIpOw0KICAgICAgcmV0dXJuIHVwZ3JhZGU7DQogICAgfTsNCiAgICBHYW1lLkdldFRpZXJlZENwc011bHQgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIHZhciBtdWx0ID0gMTsNCiAgICAgIGZvciAodmFyIGkgaW4gbWUudGllcmVkVXBncmFkZXMpIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgICFHYW1lLlRpZXJzW21lLnRpZXJlZFVwZ3JhZGVzW2ldLnRpZXJdLnNwZWNpYWwgJiYNCiAgICAgICAgICBHYW1lLkhhcyhtZS50aWVyZWRVcGdyYWRlc1tpXS5uYW1lKQ0KICAgICAgICApIHsNCiAgICAgICAgICB2YXIgdGllck11bHQgPSAyOw0KICAgICAgICAgIC8vdW5zaGFja2xlZA0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIEdhbWUuYXNjZW5zaW9uTW9kZSAhPSAxICYmDQogICAgICAgICAgICBHYW1lLkhhcyhtZS51bnNoYWNrbGVVcGdyYWRlKSAmJg0KICAgICAgICAgICAgR2FtZS5IYXMoR2FtZS5UaWVyc1ttZS50aWVyZWRVcGdyYWRlc1tpXS50aWVyXS51bnNoYWNrbGVVcGdyYWRlKQ0KICAgICAgICAgICkNCiAgICAgICAgICAgIHRpZXJNdWx0ICs9IG1lLmlkID09IDEgPyAwLjUgOiAoMjAgLSBtZS5pZCkgKiAwLjE7DQogICAgICAgICAgbXVsdCAqPSB0aWVyTXVsdDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgZm9yICh2YXIgaSBpbiBtZS5zeW5lcmdpZXMpIHsNCiAgICAgICAgdmFyIHN5biA9IG1lLnN5bmVyZ2llc1tpXTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKHN5bi5uYW1lKSkgew0KICAgICAgICAgIGlmIChzeW4uYnVpbGRpbmdUaWUxLm5hbWUgPT0gbWUubmFtZSkNCiAgICAgICAgICAgIG11bHQgKj0gMSArIDAuMDUgKiBzeW4uYnVpbGRpbmdUaWUyLmFtb3VudDsNCiAgICAgICAgICBlbHNlIGlmIChzeW4uYnVpbGRpbmdUaWUyLm5hbWUgPT0gbWUubmFtZSkNCiAgICAgICAgICAgIG11bHQgKj0gMSArIDAuMDAxICogc3luLmJ1aWxkaW5nVGllMS5hbW91bnQ7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChtZS5mb3J0dW5lICYmIEdhbWUuSGFzKG1lLmZvcnR1bmUubmFtZSkpIG11bHQgKj0gMS4wNzsNCiAgICAgIGlmIChtZS5ncmFuZG1hICYmIEdhbWUuSGFzKG1lLmdyYW5kbWEubmFtZSkpDQogICAgICAgIG11bHQgKj0gMSArIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCAqIDAuMDEgKiAoMSAvIChtZS5pZCAtIDEpKTsNCiAgICAgIHJldHVybiBtdWx0Ow0KICAgIH07DQogICAgR2FtZS5VbmxvY2tUaWVyZWQgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIGZvciAodmFyIGkgaW4gbWUudGllcmVkVXBncmFkZXMpIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuVGllcnNbbWUudGllcmVkVXBncmFkZXNbaV0udGllcl0udW5sb2NrICE9IC0xICYmDQogICAgICAgICAgbWUuYW1vdW50ID49IEdhbWUuVGllcnNbbWUudGllcmVkVXBncmFkZXNbaV0udGllcl0udW5sb2NrDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayhtZS50aWVyZWRVcGdyYWRlc1tpXS5uYW1lKTsNCiAgICAgIH0NCiAgICAgIGZvciAodmFyIGkgaW4gbWUudGllcmVkQWNoaWV2cykgew0KICAgICAgICBpZiAobWUuYW1vdW50ID49IEdhbWUuVGllcnNbbWUudGllcmVkQWNoaWV2c1tpXS50aWVyXS5hY2hpZXZVbmxvY2spDQogICAgICAgICAgR2FtZS5XaW4obWUudGllcmVkQWNoaWV2c1tpXS5uYW1lKTsNCiAgICAgIH0NCiAgICAgIGZvciAodmFyIGkgaW4gbWUuc3luZXJnaWVzKSB7DQogICAgICAgIHZhciBzeW4gPSBtZS5zeW5lcmdpZXNbaV07DQogICAgICAgIGlmICgNCiAgICAgICAgICBHYW1lLkhhcyhHYW1lLlRpZXJzW3N5bi50aWVyXS5yZXEpICYmDQogICAgICAgICAgc3luLmJ1aWxkaW5nVGllMS5hbW91bnQgPj0gR2FtZS5UaWVyc1tzeW4udGllcl0udW5sb2NrICYmDQogICAgICAgICAgc3luLmJ1aWxkaW5nVGllMi5hbW91bnQgPj0gR2FtZS5UaWVyc1tzeW4udGllcl0udW5sb2NrDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jayhzeW4ubmFtZSk7DQogICAgICB9DQogICAgfTsNCg0KICAgIHZhciBwb29sID0gIiI7DQogICAgdmFyIHBvd2VyID0gMDsNCg0KICAgIC8vZGVmaW5lIHVwZ3JhZGVzDQogICAgLy9XQVJOSU5HIDogZG8gTk9UIGFkZCBuZXcgdXBncmFkZXMgaW4gYmV0d2VlbiwgdGhpcyBicmVha3MgdGhlIHNhdmVzLiBBZGQgdGhlbSBhdCB0aGUgZW5kICENCiAgICB2YXIgb3JkZXIgPSAxMDA7IC8vdGhpcyBpcyB1c2VkIHRvIHNldCB0aGUgb3JkZXIgaW4gd2hpY2ggdGhlIGl0ZW1zIGFyZSBsaXN0ZWQNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJlaW5mb3JjZWQgaW5kZXggZmluZ2VyIiwNCiAgICAgIGxvYygiVGhlIG1vdXNlIGFuZCBjdXJzb3JzIGFyZSA8Yj50d2ljZTwvYj4gYXMgZWZmaWNpZW50LiIpICsNCiAgICAgICAgIjxxPnByb2QgcHJvZDwvcT4iLA0KICAgICAgMTAwLA0KICAgICAgWzAsIDBdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxLCAwKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkNhcnBhbCB0dW5uZWwgcHJldmVudGlvbiBjcmVhbSIsDQogICAgICBsb2MoIlRoZSBtb3VzZSBhbmQgY3Vyc29ycyBhcmUgPGI+dHdpY2U8L2I+IGFzIGVmZmljaWVudC4iKSArDQogICAgICAgICI8cT5pdC4uLiBpdCBodXJ0cyB0byBjbGljay4uLjwvcT4iLA0KICAgICAgNTAwLA0KICAgICAgWzAsIDFdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAyLCAwKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFtYmlkZXh0cm91cyIsDQogICAgICBsb2MoIlRoZSBtb3VzZSBhbmQgY3Vyc29ycyBhcmUgPGI+dHdpY2U8L2I+IGFzIGVmZmljaWVudC4iKSArDQogICAgICAgICI8cT5Mb29rIG1hLCBib3RoIGhhbmRzITwvcT4iLA0KICAgICAgMTAwMDAsDQogICAgICBbMCwgMl0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDMsIDApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVGhvdXNhbmQgZmluZ2VycyIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgbW91c2UgYW5kIGN1cnNvcnMgZ2FpbiA8Yj4rJTE8L2I+IGNvb2tpZXMgZm9yIGVhY2ggbm9uLWN1cnNvciBidWlsZGluZyBvd25lZC4iLA0KICAgICAgICAwLjENCiAgICAgICkgKyAiPHE+Y2xpY2tpdHk8L3E+IiwNCiAgICAgIDEwMDAwMCwNCiAgICAgIFswLCAxM10NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDQsIDApOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJNaWxsaW9uIGZpbmdlcnMiLA0KICAgICAgZ2V0U3RyVGhvdXNhbmRGaW5nZXJzR2Fpbig1KSArICI8cT5jbGlja2l0eWNsaWNraXR5PC9xPiIsDQogICAgICAxMDAwMDAwMCwNCiAgICAgIFswLCAxNF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDUsIDApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQmlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMTApICsgIjxxPmNsaWNraXR5Y2xpY2tpdHljbGlja2l0eTwvcT4iLA0KICAgICAgMTAwMDAwMDAwLA0KICAgICAgWzAsIDE1XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgNiwgMCk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJUcmlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsgIjxxPmNsaWNraXR5Y2xpY2tpdHljbGlja2l0eWNsaWNraXR5PC9xPiIsDQogICAgICAxMDAwMDAwMDAwLA0KICAgICAgWzAsIDE2XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgNywgMCk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9yd2FyZHMgZnJvbSBncmFuZG1hIiwNCiAgICAgICI8cT5SRTpSRTp0aG91Z2h0IHlvdSdkIGdldCBhIGtpY2sgb3V0IG9mIHRoaXMgOykpPC9xPiIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3RlZWwtcGxhdGVkIHJvbGxpbmcgcGlucyIsDQogICAgICAiPHE+SnVzdCB3aGF0IHlvdSBrbmVhZGVkLjwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKCJMdWJyaWNhdGVkIGRlbnR1cmVzIiwgIjxxPnNxdWlzaDwvcT4iLCAiR3JhbmRtYSIsIDMpOw0KDQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKCJDaGVhcCBob2VzIiwgIjxxPlJha2UgaW4gdGhlIGRvdWdoITwvcT4iLCAiRmFybSIsIDEpOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGZXJ0aWxpemVyIiwNCiAgICAgICI8cT5JdCdzIGNob2NvbGF0ZSwgSSBzd2Vhci48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDb29raWUgdHJlZXMiLA0KICAgICAgIjxxPkEgcmVsYXRpdmUgb2YgdGhlIGJyZWFkZnJ1aXQuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAzDQogICAgKTsNCg0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTdHVyZGllciBjb252ZXlvciBiZWx0cyIsDQogICAgICAiPHE+WW91J3JlIGdvaW5nIHBsYWNlcy48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDaGlsZCBsYWJvciIsDQogICAgICAiPHE+Q2hlYXBlciwgaGVhbHRoaWVyIHdvcmtmb3JjZS48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTd2VhdHNob3AiLA0KICAgICAgIjxxPlNsYWNrZXJzIHdpbGwgYmUgdGVybWluYXRlZC48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDMNCiAgICApOw0KDQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlN1Z2FyIGdhcyIsDQogICAgICAiPHE+QSBwaW5rLCB2b2xhdGlsZSBnYXMsIGZvdW5kIGluIHRoZSBkZXB0aHMgb2Ygc29tZSBjaG9jb2xhdGUgY2F2ZXMuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoIk1lZ2FkcmlsbCIsICI8cT5Zb3UncmUgaW4gZGVlcC48L3E+IiwgIk1pbmUiLCAyKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoIlVsdHJhZHJpbGwiLCAiPHE+RmluYWxseSBjYXZlZCBpbj88L3E+IiwgIk1pbmUiLCAzKTsNCg0KICAgIG9yZGVyID0gNjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJWYW5pbGxhIG5lYnVsYWUiLA0KICAgICAgIjxxPklmIHlvdSByZW1vdmVkIHlvdXIgc3BhY2UgaGVsbWV0LCB5b3UgY291bGQgcHJvYmFibHkgc21lbGwgaXQhPGJyPihOb3RlIDogZG9uJ3QgZG8gdGhhdC4pPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIldvcm1ob2xlcyIsDQogICAgICAiPHE+QnkgdXNpbmcgdGhlc2UgYXMgc2hvcnRjdXRzLCB5b3VyIHNoaXBzIGNhbiB0cmF2ZWwgbXVjaCBmYXN0ZXIuPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZyZXF1ZW50IGZseWVyIiwNCiAgICAgICI8cT5Db21lIGJhY2sgc29vbiE8L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAzDQogICAgKTsNCg0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbnRpbW9ueSIsDQogICAgICAiPHE+QWN0dWFsbHkgd29ydGggYSBsb3Qgb2YgbW9ueS48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRXNzZW5jZSBvZiBkb3VnaCIsDQogICAgICAiPHE+RXh0cmFjdGVkIHRocm91Z2ggdGhlIDUgYW5jaWVudCBzdGVwcyBvZiBhbGNoZW1pY2FsIGJha2luZy48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVHJ1ZSBjaG9jb2xhdGUiLA0KICAgICAgIjxxPlRoZSBwdXJlc3QgZm9ybSBvZiBjYWNhby48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAzDQogICAgKTsNCg0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbmNpZW50IHRhYmxldCIsDQogICAgICAiPHE+QSBzdHJhbmdlIHNsYWIgb2YgcGVhbnV0IGJyaXR0bGUsIGhvbGRpbmcgYW4gYW5jaWVudCBjb29raWUgcmVjaXBlLiBOZWF0ITwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiSW5zYW5lIG9hdGxpbmcgd29ya2VycyIsDQogICAgICAiPHE+QVJJU0UsIE1ZIE1JTklPTlMhPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTb3VsIGJvbmQiLA0KICAgICAgIjxxPlNvIEkganVzdCBzaWduIHVwIGFuZCBnZXQgbW9yZSBjb29raWVzPyBTdXJlLCB3aGF0ZXZlciE8L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgMw0KICAgICk7DQoNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRmx1eCBjYXBhY2l0b3JzIiwNCiAgICAgICI8cT5CYWtlIHRvIHRoZSBmdXR1cmUuPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaW1lIHBhcmFkb3ggcmVzb2x2ZXIiLA0KICAgICAgIjxxPk5vIG1vcmUgZm9vbGluZyBhcm91bmQgd2l0aCB5b3VyIG93biBncmFuZG1vdGhlciE8L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlF1YW50dW0gY29udW5kcnVtIiwNCiAgICAgICI8cT5UaGVyZSBpcyBvbmx5IG9uZSBjb25zdGFudCwgYW5kIHRoYXQgaXMgdW5pdmVyc2FsIHVuY2VydGFpbnR5Ljxicj5PciBpcyBpdD88L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgMw0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGhlbHBlcnMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5tZW93IG1heSBJIGhlbHAgeW91PC9xPiIsDQogICAgICA5MDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCAxKQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMSwgMTgpOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIHdvcmtlcnMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5tZW93IG1lb3cgbWVvdyBtZW93PC9xPiIsDQogICAgICA5MDAwMDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCAyKQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMiwgMTgpOw0KDQogICAgb3JkZXIgPSAxMDAwMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBsYWluIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldlIGFsbCBnb3R0YSBzdGFydCBzb21ld2hlcmUuIiwNCiAgICAgIGljb246IFsyLCAzXSwNCiAgICAgIHBvd2VyOiAxLA0KICAgICAgcHJpY2U6IDk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlN1Z2FyIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRhc3R5LCBpZiBhIGxpdHRsZSB1bmltYWdpbmF0aXZlLiIsDQogICAgICBpY29uOiBbNywgM10sDQogICAgICBwb3dlcjogMSwNCiAgICAgIHByaWNlOiA5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiT2F0bWVhbCByYWlzaW4gY29va2llcyIsDQogICAgICBkZXNjOiAiTm8gcmFpc2luIHRvIGhhdGUgdGhlc2UuIiwNCiAgICAgIGljb246IFswLCAzXSwNCiAgICAgIHBvd2VyOiAxLA0KICAgICAgcHJpY2U6IDk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQZWFudXQgYnV0dGVyIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkdldCB5b3Vyc2VsZiBzb21lIGphbSBjb29raWVzISIsDQogICAgICBpY29uOiBbMSwgM10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNvY29udXQgY29va2llcyIsDQogICAgICBkZXNjOiAiRmxha3ksIGJ1dCBub3QgdW5yZWxpYWJsZS4gU29tZSBwZW9wbGUgZ28gY3JhenkgZm9yIHRoZXNlLiIsDQogICAgICBpY29uOiBbMywgM10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBvcmRlciA9IDEwMDAxOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiV2hpdGUgY2hvY29sYXRlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkkga25vdyB3aGF0IHlvdSdsbCBzYXkuIEl0J3MganVzdCBjb2NvYSBidXR0ZXIhIEl0J3Mgbm90IHJlYWwgY2hvY29sYXRlITxicj5PaCBwbGVhc2UuIiwNCiAgICAgIGljb246IFs0LCAzXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBvcmRlciA9IDEwMDAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWFjYWRhbWlhIG51dCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGV5J3JlIG1hY2FkYW1uIGRlbGljaW91cyEiLA0KICAgICAgaWNvbjogWzUsIDNdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTksDQogICAgfSk7DQogICAgb3JkZXIgPSAxMDAwMjsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkRvdWJsZS1jaGlwIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkRPVUJMRSBUSEUgQ0hJUFM8YnI+RE9VQkxFIFRIRSBUQVNUWTxicj4oZG91YmxlIHRoZSBjYWxvcmllcykiLA0KICAgICAgaWNvbjogWzYsIDNdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldoaXRlIGNob2NvbGF0ZSBtYWNhZGFtaWEgbnV0IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIk9ydGVpbCdzIGZhdm9yaXRlLiIsDQogICAgICBpY29uOiBbOCwgM10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQWxsLWNob2NvbGF0ZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJDSE9DT1ZFUkRPU0UuIiwNCiAgICAgIGljb246IFs5LCAzXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJRdWFkcmlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsNCiAgICAgICAgIjxxPmNsaWNraXR5Y2xpY2tpdHljbGlja2l0eWNsaWNraXR5Y2xpY2s8L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwLA0KICAgICAgWzAsIDE3XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgOCwgMCk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoIlBydW5lIGp1aWNlIiwgIjxxPkdldHMgbWUgZ29pbmcuPC9xPiIsICJHcmFuZG1hIiwgNCk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdlbmV0aWNhbGx5LW1vZGlmaWVkIGNvb2tpZXMiLA0KICAgICAgIjxxPkFsbC1uYXR1cmFsIG11dGF0aW9ucy48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDQNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSYWRpdW0gcmVhY3RvcnMiLA0KICAgICAgIjxxPkdpdmVzIHlvdXIgY29va2llcyBhIGhlYWx0aHkgZ2xvdy48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDQNCiAgICApOw0KICAgIG9yZGVyID0gNDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJVbHRpbWFkcmlsbCIsDQogICAgICAiPHE+UGllcmNlIHRoZSBoZWF2ZW5zLCBldGMuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICA0DQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoIldhcnAgZHJpdmUiLCAiPHE+VG8gYm9sZGx5IGJha2UuPC9xPiIsICJTaGlwbWVudCIsIDQpOw0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbWJyb3NpYSIsDQogICAgICAiPHE+QWRkaW5nIHRoaXMgdG8gdGhlIGNvb2tpZSBtaXggaXMgc3VyZSB0byBtYWtlIHRoZW0gZXZlbiBtb3JlIGFkZGljdGl2ZSE8YnI+UGVyaGFwcyBkYW5nZXJvdXNseSBzby48YnI+TGV0J3MgaG9wZSB5b3UgY2FuIGtlZXAgc2VsbGluZyB0aGVzZSBsZWdhbGx5LjwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDQNCiAgICApOw0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTYW5pdHkgZGFuY2UiLA0KICAgICAgIjxxPldlIGNhbiBjaGFuZ2UgaWYgd2Ugd2FudCB0by48YnI+V2UgY2FuIGxlYXZlIG91ciBicmFpbnMgYmVoaW5kLjwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICA0DQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ2F1c2FsaXR5IGVuZm9yY2VyIiwNCiAgICAgICI8cT5XaGF0IGhhcHBlbmVkLCBoYXBwZW5lZC48L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgNA0KICAgICk7DQoNCiAgICBvcmRlciA9IDUwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNreSBkYXkiLA0KICAgICAgbG9jKA0KICAgICAgICAiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPnR3aWNlIGFzIG9mdGVuPC9iPiBhbmQgc3RheSA8Yj50d2ljZSBhcyBsb25nPC9iPi4iDQogICAgICApICsgIjxxPk9oIGhleSwgYSBmb3VyLWxlYWYgcGVubnkhPC9xPiIsDQogICAgICA3Nzc3Nzc3NzcsDQogICAgICBbMjcsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNlcmVuZGlwaXR5IiwNCiAgICAgIGxvYygNCiAgICAgICAgIkdvbGRlbiBjb29raWVzIGFwcGVhciA8Yj50d2ljZSBhcyBvZnRlbjwvYj4gYW5kIHN0YXkgPGI+dHdpY2UgYXMgbG9uZzwvYj4uIg0KICAgICAgKSArICI8cT5XaGF0IGpveSEgU2V2ZW4gaG9yc2VzaG9lcyE8L3E+IiwNCiAgICAgIDc3Nzc3Nzc3Nzc3LA0KICAgICAgWzI3LCA2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGVuZ2luZWVycyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPm1lb3cgbWVvdyBtZW93IG1lb3csIHNpcjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMDAwMDAsDQogICAgICBHYW1lLkdldEljb24oIktpdHRlbiIsIDMpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAzLCAxOCk7DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRGFyayBjaG9jb2xhdGUtY29hdGVkIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIGFic29yYiBsaWdodCBzbyB3ZWxsIHlvdSBhbG1vc3QgbmVlZCB0byBzcXVpbnQgdG8gc2VlIHRoZW0uIiwNCiAgICAgIGljb246IFsxMCwgM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldoaXRlIGNob2NvbGF0ZS1jb2F0ZWQgY29va2llcyIsDQogICAgICBkZXNjOiAiVGhlc2UgZGF6emxpbmcgY29va2llcyBhYnNvbHV0ZWx5IGdsaXN0ZW4gd2l0aCBmbGF2b3IuIiwNCiAgICAgIGljb246IFsxMSwgM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIEdhbWUuR3JhbmRtYVN5bmVyZ2llcyA9IFtdOw0KICAgIEdhbWUuR3JhbmRtYVN5bmVyZ3kgPSBmdW5jdGlvbiAobmFtZSwgZGVzYywgYnVpbGRpbmcpIHsNCiAgICAgIHZhciBidWlsZGluZyA9IEdhbWUuT2JqZWN0c1tidWlsZGluZ107DQogICAgICB2YXIgZ3JhbmRtYU51bWJlciA9IGxvYygiJTEgZ3JhbmRtYSIsIExCZWF1dGlmeShidWlsZGluZy5pZCAtIDEpKTsNCiAgICAgIGRlc2MgPQ0KICAgICAgICBsb2MoDQogICAgICAgICAgIiUxIGFyZSA8Yj50d2ljZTwvYj4gYXMgZWZmaWNpZW50LiIsDQogICAgICAgICAgY2FwKEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnBsdXJhbCkNCiAgICAgICAgKSArDQogICAgICAgICIgIiArDQogICAgICAgIGxvYygiJTEgZ2FpbiA8Yj4rJTIlPC9iPiBDcFMgcGVyICUzLiIsIFsNCiAgICAgICAgICBjYXAoYnVpbGRpbmcucGx1cmFsKSwNCiAgICAgICAgICAxLA0KICAgICAgICAgIGdyYW5kbWFOdW1iZXIsDQogICAgICAgIF0pICsNCiAgICAgICAgIjxxPiIgKw0KICAgICAgICBkZXNjICsNCiAgICAgICAgIjwvcT4iOw0KDQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgIG5hbWUsDQogICAgICAgIGRlc2MsDQogICAgICAgIGJ1aWxkaW5nLmJhc2VQcmljZSAqIEdhbWUuVGllcnNbMl0ucHJpY2UsDQogICAgICAgIFsxMCwgOV0sDQogICAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5yZWRyYXcoKTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICAgIGJ1aWxkaW5nLmdyYW5kbWEgPSB1cGdyYWRlOw0KICAgICAgdXBncmFkZS5idWlsZGluZ1RpZSA9IGJ1aWxkaW5nOw0KICAgICAgR2FtZS5HcmFuZG1hU3luZXJnaWVzLnB1c2godXBncmFkZS5uYW1lKTsNCiAgICAgIHJldHVybiB1cGdyYWRlOw0KICAgIH07DQoNCiAgICBvcmRlciA9IDI1MDsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIkZhcm1lciBncmFuZG1hcyIsDQogICAgICAiQSBuaWNlIGZhcm1lciB0byBncm93IG1vcmUgY29va2llcy4iLA0KICAgICAgIkZhcm0iDQogICAgKTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIk1pbmVyIGdyYW5kbWFzIiwNCiAgICAgICJBIG5pY2UgbWluZXIgdG8gZGlnIG1vcmUgY29va2llcy4iLA0KICAgICAgIk1pbmUiDQogICAgKTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIldvcmtlciBncmFuZG1hcyIsDQogICAgICAiQSBuaWNlIHdvcmtlciB0byBtYW51ZmFjdHVyZSBtb3JlIGNvb2tpZXMuIiwNCiAgICAgICJGYWN0b3J5Ig0KICAgICk7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJDb3NtaWMgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSB0aGluZyB0by4uLiB1aC4uLiBjb29raWVzLiIsDQogICAgICAiU2hpcG1lbnQiDQogICAgKTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIlRyYW5zbXV0ZWQgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSBnb2xkZW4gZ3JhbmRtYSB0byBjb252ZXJ0IGludG8gbW9yZSBjb29raWVzLiIsDQogICAgICAiQWxjaGVteSBsYWIiDQogICAgKTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIkFsdGVyZWQgZ3JhbmRtYXMiLA0KICAgICAgImEgTmlDZSBHckFuRG1BIHRPIGJBIyMjIyMjIyMjIyIsDQogICAgICAiUG9ydGFsIg0KICAgICk7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJHcmFuZG1hcycgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSBncmFuZG1hJ3MgbmljZSBncmFuZG1hIHRvIGJha2UgZG91YmxlIHRoZSBjb29raWVzLiIsDQogICAgICAiVGltZSBtYWNoaW5lIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDE0MDAwOw0KICAgIEdhbWUuYmFzZVJlc2VhcmNoVGltZSA9IEdhbWUuZnBzICogNjAgKiAzMDsNCiAgICBHYW1lLlNldFJlc2VhcmNoID0gZnVuY3Rpb24gKHdoYXQsIHRpbWUpIHsNCiAgICAgIGlmIChHYW1lLlVwZ3JhZGVzW3doYXRdICYmICFHYW1lLkhhcyh3aGF0KSkgew0KICAgICAgICBHYW1lLnJlc2VhcmNoVCA9IEdhbWUuYmFzZVJlc2VhcmNoVGltZTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJQZXJzaXN0ZW50IG1lbW9yeSIpKQ0KICAgICAgICAgIEdhbWUucmVzZWFyY2hUID0gTWF0aC5jZWlsKEdhbWUuYmFzZVJlc2VhcmNoVGltZSAvIDEwKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJVbHRyYXNjaWVuY2UiKSkgR2FtZS5yZXNlYXJjaFQgPSBHYW1lLmZwcyAqIDU7DQogICAgICAgIEdhbWUubmV4dFJlc2VhcmNoID0gR2FtZS5VcGdyYWRlc1t3aGF0XS5pZDsNCiAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgbG9jKCJSZXNlYXJjaCBoYXMgYmVndW4iKSwNCiAgICAgICAgICBsb2MoIllvdXIgYmluZ28gY2VudGVyL3Jlc2VhcmNoIGZhY2lsaXR5IGlzIGNvbmR1Y3RpbmcgZXhwZXJpbWVudHMuIiksDQogICAgICAgICAgWzksIDBdDQogICAgICAgICk7DQogICAgICB9DQogICAgfTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQmluZ28gY2VudGVyL1Jlc2VhcmNoIGZhY2lsaXR5IiwNCiAgICAgIGxvYygNCiAgICAgICAgIkdyYW5kbWEtb3BlcmF0ZWQgc2NpZW5jZSBsYWIgYW5kIGxlaXN1cmUgY2x1Yi48YnI+R3JhbmRtYXMgYXJlIDxiPjQgdGltZXM8L2I+IGFzIGVmZmljaWVudC48YnI+PGI+UmVndWxhcmx5IHVubG9ja3MgbmV3IHVwZ3JhZGVzPC9iPi4iDQogICAgICApICsNCiAgICAgICAgIjxxPldoYXQgY291bGQgcG9zc2libHkga2VlcCB0aG9zZSBncmFuZG1vdGhlcnMgaW4gY2hlY2s/Li4uPGJyPkJpbmdvLjwvcT4iLA0KICAgICAgMTAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFsxMSwgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuU2V0UmVzZWFyY2goIlNwZWNpYWxpemVkIGNob2NvbGF0ZSBjaGlwcyIpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0Lm5vUGVybSA9IDE7DQoNCiAgICBvcmRlciA9IDE1MDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU3BlY2lhbGl6ZWQgY2hvY29sYXRlIGNoaXBzIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygxKSArDQogICAgICAgICI8cT5Db21wdXRlci1kZXNpZ25lZCBjaG9jb2xhdGUgY2hpcHMuIENvbXB1dGVyIGNoaXBzLCBpZiB5b3Ugd2lsbC48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMCwgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuU2V0UmVzZWFyY2goIkRlc2lnbmVyIGNvY29hIGJlYW5zIik7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRlc2lnbmVyIGNvY29hIGJlYW5zIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygyKSArDQogICAgICAgICI8cT5Ob3cgbW9yZSBhZXJvZHluYW1pYyB0aGFuIGV2ZXIhPC9xPiIsDQogICAgICAyMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzEsIDldLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLlNldFJlc2VhcmNoKCJSaXR1YWwgcm9sbGluZyBwaW5zIik7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJpdHVhbCByb2xsaW5nIHBpbnMiLA0KICAgICAgbG9jKA0KICAgICAgICAiJTEgYXJlIDxiPnR3aWNlPC9iPiBhcyBlZmZpY2llbnQuIiwNCiAgICAgICAgY2FwKEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnBsdXJhbCkNCiAgICAgICkgKyAiPHE+VGhlIHJlc3VsdCBvZiB5ZWFycyBvZiBzY2llbnRpZmljIHJlc2VhcmNoITwvcT4iLA0KICAgICAgNDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFsyLCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5TZXRSZXNlYXJjaCgiVW5kZXJ3b3JsZCBvdmVucyIpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidGVjaCI7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJVbmRlcndvcmxkIG92ZW5zIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygzKSArDQogICAgICAgICI8cT5Qb3dlcmVkIGJ5IHNjaWVuY2UsIG9mIGNvdXJzZSE8L3E+IiwNCiAgICAgIDgwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMywgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuU2V0UmVzZWFyY2goIk9uZSBtaW5kIik7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIk9uZSBtaW5kIiwNCiAgICAgIGxvYygiRWFjaCAlMSBnYWlucyA8Yj4rJTIgYmFzZSBDcFMgcGVyICUzPC9iPi4iLCBbDQogICAgICAgIGxvYygiZ3JhbmRtYSIpLA0KICAgICAgICAiMC4wPHNwYW4+PC9zcGFuPjIiLA0KICAgICAgICBsb2MoImdyYW5kbWEiKSwNCiAgICAgIF0pICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Indhcm5pbmciPicgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIk5vdGU6IHRoZSBncmFuZG1vdGhlcnMgYXJlIGdyb3dpbmcgcmVzdGxlc3MuIERvIG5vdCBlbmNvdXJhZ2UgdGhlbS4iDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+PHE+V2UgYXJlIG9uZS4gV2UgYXJlIG1hbnkuPC9xPiIsDQogICAgICAxNjAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFs0LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5lbGRlcldyYXRoID0gMTsNCiAgICAgICAgR2FtZS5TZXRSZXNlYXJjaCgiRXhvdGljIG51dHMiKTsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICAvL0dhbWUubGFzdC5jbGlja0Z1bmN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGNvbmZpcm0oJ1dhcm5pbmcgOiBwdXJjaGFzaW5nIHRoaXMgd2lsbCBoYXZlIHVuZXhwZWN0ZWQsIGFuZCBwb3RlbnRpYWxseSB1bmRlc2lyYWJsZSByZXN1bHRzIVxuSXRcJ3MgYWxsIGRvd25oaWxsIGZyb20gaGVyZS4gWW91IGhhdmUgYmVlbiB3YXJuZWQhXG5QdXJjaGFzZSBhbnl3YXk/Jyk7fTsNCiAgICBHYW1lLlJlcXVpcmVzQ29uZmlybWF0aW9uKA0KICAgICAgR2FtZS5sYXN0LA0KICAgICAgJzxkaXYgY2xhc3M9ImJsb2NrIj4nICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICI8Yj5XYXJuaW5nOjwvYj4gcHVyY2hhc2luZyB0aGlzIHdpbGwgaGF2ZSB1bmV4cGVjdGVkLCBhbmQgcG90ZW50aWFsbHkgdW5kZXNpcmFibGUgcmVzdWx0cyE8YnI+PHNtYWxsPkl0J3MgYWxsIGRvd25oaWxsIGZyb20gaGVyZS4gWW91IGhhdmUgYmVlbiB3YXJuZWQhPC9zbWFsbD48YnI+PGJyPlB1cmNoYXNlIGFueXdheT8iDQogICAgICAgICkgKw0KICAgICAgICAiPC9kaXY+Ig0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJFeG90aWMgbnV0cyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoNCkgKw0KICAgICAgICAiPHE+WW91J2xsIGdvIGNyYXp5IG92ZXIgdGhlc2UhPC9xPiIsDQogICAgICAzMjAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFs1LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5TZXRSZXNlYXJjaCgiQ29tbXVuYWwgYnJhaW5zd2VlcCIpOw0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidGVjaCI7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDb21tdW5hbCBicmFpbnN3ZWVwIiwNCiAgICAgIChFTg0KICAgICAgICA/ICJFYWNoIGdyYW5kbWEgZ2FpbnMgYW5vdGhlciA8Yj4rMC4wPHNwYW4+PC9zcGFuPjIgYmFzZSBDcFMgcGVyIGdyYW5kbWE8L2I+LiINCiAgICAgICAgOiBsb2MoIkVhY2ggJTEgZ2FpbnMgPGI+KyUyIGJhc2UgQ3BTIHBlciAlMzwvYj4uIiwgWw0KICAgICAgICAgICAgbG9jKCJncmFuZG1hIiksDQogICAgICAgICAgICAiMC4wPHNwYW4+PC9zcGFuPjIiLA0KICAgICAgICAgICAgbG9jKCJncmFuZG1hIiksDQogICAgICAgICAgXSkpICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Indhcm5pbmciPicgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIk5vdGU6IHByb2NlZWRpbmcgYW55IGZ1cnRoZXIgaW4gc2NpZW50aWZpYyByZXNlYXJjaCBtYXkgaGF2ZSB1bmV4cGVjdGVkIHJlc3VsdHMuIFlvdSBoYXZlIGJlZW4gd2FybmVkLiINCiAgICAgICAgKSArDQogICAgICAgICI8L2Rpdj48cT5XZSBmdXNlLiBXZSBtZXJnZS4gV2UgZ3Jvdy48L3E+IiwNCiAgICAgIDY0MDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzYsIDldLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLmVsZGVyV3JhdGggPSAyOw0KICAgICAgICBHYW1lLlNldFJlc2VhcmNoKCJBcmNhbmUgc3VnYXIiKTsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0ZWNoIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFyY2FuZSBzdWdhciIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoNSkgKw0KICAgICAgICAiPHE+VGFzdGVzIGxpa2UgaW5zZWN0cywgbGlnYW1lbnRzLCBhbmQgbW9sYXNzZXMuPC9xPiIsDQogICAgICAxMjgwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbNywgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuU2V0UmVzZWFyY2goIkVsZGVyIFBhY3QiKTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInRlY2giOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRWxkZXIgUGFjdCIsDQogICAgICBsb2MoIkVhY2ggJTEgZ2FpbnMgPGI+KyUyIGJhc2UgQ3BTIHBlciAlMzwvYj4uIiwgWw0KICAgICAgICBsb2MoImdyYW5kbWEiKSwNCiAgICAgICAgIjAuMDxzcGFuPjwvc3Bhbj41IiwNCiAgICAgICAgbG9jKCJwb3J0YWwiKSwNCiAgICAgIF0pICsNCiAgICAgICAgJzxkaXYgY2xhc3M9Indhcm5pbmciPicgKw0KICAgICAgICBsb2MoIk5vdGU6IHRoaXMgaXMgYSBiYWQgaWRlYS4iKSArDQogICAgICAgICI8L2Rpdj48cT5zcXVpcm0gY3Jhd2wgc2xpdGhlciB3cml0aGU8YnI+dG9kYXkgd2UgcmlzZTwvcT4iLA0KICAgICAgMjU2MDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzgsIDldLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLmVsZGVyV3JhdGggPSAzOw0KICAgICAgICBHYW1lLnN0b3JlVG9SZWZyZXNoID0gMTsNCiAgICAgIH0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInRlY2giOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRWxkZXIgUGxlZGdlIiwNCiAgICAgIGxvYygiQ29udGFpbnMgdGhlIHdyYXRoIG9mIHRoZSBlbGRlcnMsIGF0IGxlYXN0IGZvciBhIHdoaWxlLiIpICsNCiAgICAgICAgIjxxPlRoaXMgaXMgYSBzaW1wbGUgcml0dWFsIGludm9sdmluZyBhbnRpLWFnaW5nIGNyZWFtLCBjb29raWUgYmF0dGVyIG1peGVkIGluIHRoZSBtb29ubGlnaHQsIGFuZCBhIGxpdmUgY2hpY2tlbi48L3E+IiwNCiAgICAgIDEsDQogICAgICBbOSwgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuZWxkZXJXcmF0aCA9IDA7DQogICAgICAgIEdhbWUucGxlZGdlcysrOw0KICAgICAgICBHYW1lLnBsZWRnZVQgPSBHYW1lLmdldFBsZWRnZUR1cmF0aW9uKCk7DQogICAgICAgIEdhbWUuVW5sb2NrKCJFbGRlciBDb3ZlbmFudCIpOw0KICAgICAgICBHYW1lLkNvbGxlY3RXcmlua2xlcnMoKTsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmdldFBsZWRnZUR1cmF0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuZnBzICogNjAgKiAoR2FtZS5IYXMoIlNhY3JpZmljaWFsIHJvbGxpbmcgcGlucyIpID8gNjAgOiAzMCk7DQogICAgfTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KICAgIEdhbWUubGFzdC5kaXNwbGF5RnVuY1doZW5Pd25lZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBsb2MoIlRpbWUgcmVtYWluaW5nIHVudGlsIHBsZWRnZSBydW5zIG91dDoiKSArDQogICAgICAgICI8YnI+PGI+IiArDQogICAgICAgIEdhbWUuc2F5VGltZShHYW1lLnBsZWRnZVQsIC0xKSArDQogICAgICAgICI8L2I+PC9kaXY+Ig0KICAgICAgKTsNCiAgICB9Ow0KICAgIEdhbWUubGFzdC50aW1lckRpc3BsYXkgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoIUdhbWUuVXBncmFkZXNbIkVsZGVyIFBsZWRnZSJdLmJvdWdodCkgcmV0dXJuIC0xOw0KICAgICAgZWxzZSByZXR1cm4gMSAtIEdhbWUucGxlZGdlVCAvIEdhbWUuZ2V0UGxlZGdlRHVyYXRpb24oKTsNCiAgICB9Ow0KICAgIEdhbWUubGFzdC5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gTWF0aC5wb3coOCwgTWF0aC5taW4oR2FtZS5wbGVkZ2VzICsgMiwgMTQpKTsNCiAgICB9Ow0KDQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgIChHYW1lLnBsZWRnZXMgPT0gMA0KICAgICAgICAgID8gbG9jKCJZb3UgaGF2ZW4ndCBwbGVkZ2VkIHRvIHRoZSBlbGRlcnMgeWV0LiIpDQogICAgICAgICAgOiBsb2MoDQogICAgICAgICAgICAgICJZb3UndmUgcGxlZGdlZCB0byB0aGUgZWxkZXJzIDxiPiUxIHRpbWVzPC9iPi4iLA0KICAgICAgICAgICAgICBMQmVhdXRpZnkoR2FtZS5wbGVkZ2VzKQ0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCg0KICAgIG9yZGVyID0gMTUwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiUGxhc3RpYyBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPlNsaWdodGx5IHNxdWVha3kuPC9xPiIsDQogICAgICA1MDAwMCwNCiAgICAgIFsxMSwgMF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEsIDExKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIklyb24gbW91c2UiLA0KICAgICAgZ2V0U3RyQ2xpY2tpbmdHYWlucygxKSArICI8cT5DbGljayBsaWtlIGl0J3MgMTM0OSE8L3E+IiwNCiAgICAgIDUwMDAwMDAsDQogICAgICBbMTEsIDFdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAyLCAxMSk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJUaXRhbml1bSBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPkhlYXZ5LCBidXQgcG93ZXJmdWwuPC9xPiIsDQogICAgICA1MDAwMDAwMDAsDQogICAgICBbMTEsIDJdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAzLCAxMSk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBZGFtYW50aXVtIG1vdXNlIiwNCiAgICAgIGdldFN0ckNsaWNraW5nR2FpbnMoMSkgKyAiPHE+WW91IGNvdWxkIGN1dCBkaWFtb25kIHdpdGggdGhlc2UuPC9xPiIsDQogICAgICA1MDAwMDAwMDAwMCwNCiAgICAgIFsxMSwgMTNdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCA0LCAxMSk7DQoNCiAgICBvcmRlciA9IDQwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVWx0cmFzY2llbmNlIiwNCiAgICAgIGxvYygiUmVzZWFyY2ggdGFrZXMgb25seSA8Yj41IHNlY29uZHM8L2I+LiIpICsgIjxxPllFQUgsIFNDSUVOQ0UhPC9xPiIsDQogICAgICA3LA0KICAgICAgWzksIDJdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkVjbGlwc2UgY29va2llcyIsDQogICAgICBkZXNjOiAiTG9vayB0byB0aGUgY29va2llLiIsDQogICAgICBpY29uOiBbMCwgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJaZWJyYSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICIuLi4iLA0KICAgICAgaWNvbjogWzEsIDRdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJRdWludGlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsNCiAgICAgICAgIjxxPm1hbiwganVzdCBnbyBjbGljayBjbGljayBjbGljayBjbGljayBjbGljaywgaXQncyByZWFsIGVhc3ksIG1hbi48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwMDAwLA0KICAgICAgWzAsIDE4XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgOSwgMCk7DQoNCiAgICBvcmRlciA9IDQwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR29sZCBob2FyZCIsDQogICAgICBsb2MoIkdvbGRlbiBjb29raWVzIGFwcGVhciA8Yj5yZWFsbHkgb2Z0ZW48L2I+LiIpICsNCiAgICAgICAgIjxxPlRoYXQncyBlbnRpcmVseSB0b28gbWFueS48L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTAsIDE0XQ0KICAgICk7IC8vZGVidWcgcHVycG9zZXMgb25seQ0KICAgIEdhbWUubGFzdC5wb29sID0gImRlYnVnIjsNCg0KICAgIG9yZGVyID0gMTUwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJFbGRlciBDb3ZlbmFudCIsDQogICAgICBsb2MoDQogICAgICAgICJQdXRzIGEgcGVybWFuZW50IGVuZCB0byB0aGUgZWxkZXJzJyB3cmF0aCwgYXQgdGhlIGNvc3Qgb2YgJTElIG9mIHlvdXIgQ3BTLiIsDQogICAgICAgIDUNCiAgICAgICkgKw0KICAgICAgICAiPHE+VGhpcyBpcyBhIGNvbXBsaWNhdGVkIHJpdHVhbCBpbnZvbHZpbmcgc2lsbHksIGluY29uc2VxdWVudGlhbCB0cml2aWFsaXRpZXMgc3VjaCBhcyBjdXJzZWQgbGF4YXRpdmVzLCBjZW50dXJ5LW9sZCBjYWNhbywgYW5kIGFuIGluZmFudC48YnI+RG9uJ3QgcXVlc3Rpb24gaXQuPC9xPiIsDQogICAgICA2NjY2NjY2NjY2NjY2NiwNCiAgICAgIFs4LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5wbGVkZ2VUID0gMDsNCiAgICAgICAgR2FtZS5Mb2NrKCJSZXZva2UgRWxkZXIgQ292ZW5hbnQiKTsNCiAgICAgICAgR2FtZS5VbmxvY2soIlJldm9rZSBFbGRlciBDb3ZlbmFudCIpOw0KICAgICAgICBHYW1lLkxvY2soIkVsZGVyIFBsZWRnZSIpOw0KICAgICAgICBHYW1lLldpbigiRWxkZXIgY2FsbSIpOw0KICAgICAgICBHYW1lLkNvbGxlY3RXcmlua2xlcnMoKTsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJSZXZva2UgRWxkZXIgQ292ZW5hbnQiLA0KICAgICAgbG9jKA0KICAgICAgICAiWW91IHdpbGwgZ2V0ICUxJSBvZiB5b3VyIENwUyBiYWNrLCBidXQgdGhlIGdyYW5kbWF0cmlhcmNocyB3aWxsIHJldHVybi4iLA0KICAgICAgICA1DQogICAgICApICsgIjxxPndlPGJyPnJpc2U8YnI+YWdhaW48L3E+IiwNCiAgICAgIDY2NjY2NjY2NjYsDQogICAgICBbOCwgOV0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuTG9jaygiRWxkZXIgQ292ZW5hbnQiKTsNCiAgICAgICAgR2FtZS5VbmxvY2soIkVsZGVyIENvdmVuYW50Iik7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR2V0IGx1Y2t5IiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZSBlZmZlY3RzIGxhc3QgPGI+dHdpY2UgYXMgbG9uZzwvYj4uIikgKw0KICAgICAgICAiPHE+WW91J3ZlIGJlZW4gdXAgYWxsIG5pZ2h0LCBoYXZlbid0IHlvdT88L3E+IiwNCiAgICAgIDc3Nzc3Nzc3Nzc3Nzc3LA0KICAgICAgWzI3LCA2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDE1MDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FjcmlmaWNpYWwgcm9sbGluZyBwaW5zIiwNCiAgICAgIGxvYygiRWxkZXIgcGxlZGdlcyBsYXN0IDxiPnR3aWNlPC9iPiBhcyBsb25nLiIpICsNCiAgICAgICAgIjxxPlRoZXNlIGFyZSBtb3N0bHkganVzdCBmb3Igc3ByZWFkaW5nIHRoZSBhbnRpLWFnaW5nIGNyZWFtLjxicj4oQW5kIGFjY2Vzc29yaWx5LCBzaG9ydGVuaW5nIHRoZSBjaGlja2VuJ3Mgc3VmZmVyaW5nLik8L3E+IiwNCiAgICAgIDI4ODg4ODg4ODg4ODgsDQogICAgICBbMiwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlNuaWNrZXJkb29kbGVzIiwNCiAgICAgIGRlc2M6ICJUcnVlIHRvIHRoZWlyIG5hbWUuIiwNCiAgICAgIGljb246IFsyLCA0XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTdHJvb3B3YWZlbHMiLA0KICAgICAgZGVzYzogIklmIGl0IGFpbid0IGR1dGNoLCBpdCBhaW4ndCBtdWNoLiIsDQogICAgICBpY29uOiBbMywgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWFjYXJvb25zIiwNCiAgICAgIGRlc2M6ICJOb3QgdG8gYmUgY29uZnVzZWQgd2l0aCBtYWNhcm9ucy48YnI+VGhlc2UgaGF2ZSBjb2NvbnV0LCBva2F5PyIsDQogICAgICBpY29uOiBbNCwgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gNDAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJOZXVyb21hbmN5IiwNCiAgICAgIGxvYygiQ2FuIHRvZ2dsZSB1cGdyYWRlcyBvbiBhbmQgb2ZmIGF0IHdpbGwgaW4gdGhlIHN0YXRzIG1lbnUuIikgKw0KICAgICAgICAiPHE+Q2FuIGFsc28gY29tZSBpbiBoYW5keSB0byB1bnNlZSB0aGluZ3MgdGhhdCBjYW4ndCBiZSB1bnNlZW4uPC9xPiIsDQogICAgICA3LA0KICAgICAgWzQsIDldDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkVtcGlyZSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiRm9yIHlvdXIgZ3Jvd2luZyBjb29raWUgZW1waXJlLCBvZiBjb3Vyc2UhIiwNCiAgICAgIGljb246IFs1LCA0XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIG9yZGVyID0gMTAwMzE7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCcml0aXNoIHRlYSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiUXVpdGUuIiwNCiAgICAgIGljb246IFs2LCA0XSwNCiAgICAgIHJlcXVpcmU6ICJUaW4gb2YgYnJpdGlzaCB0ZWEgYmlzY3VpdHMiLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDaG9jb2xhdGUgYnJpdGlzaCB0ZWEgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIlllcywgcXVpdGUuIiwNCiAgICAgIGljb246IFs3LCA0XSwNCiAgICAgIHJlcXVpcmU6IEdhbWUubGFzdC5uYW1lLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSb3VuZCBicml0aXNoIHRlYSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiWWVzLCBxdWl0ZSByaXZldGluZy4iLA0KICAgICAgaWNvbjogWzgsIDRdLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlJvdW5kIGNob2NvbGF0ZSBicml0aXNoIHRlYSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiWWVzLCBxdWl0ZSByaXZldGluZyBpbmRlZWQuIiwNCiAgICAgIGljb246IFs5LCA0XSwNCiAgICAgIHJlcXVpcmU6IEdhbWUubGFzdC5uYW1lLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSb3VuZCBicml0aXNoIHRlYSBiaXNjdWl0cyB3aXRoIGhlYXJ0IG1vdGlmIiwNCiAgICAgIGRlc2M6ICJZZXMsIHF1aXRlIHJpdmV0aW5nIGluZGVlZCwgb2xkIGNoYXAuIiwNCiAgICAgIGljb246IFsxMCwgNF0sDQogICAgICByZXF1aXJlOiBHYW1lLmxhc3QubmFtZSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUm91bmQgY2hvY29sYXRlIGJyaXRpc2ggdGVhIGJpc2N1aXRzIHdpdGggaGVhcnQgbW90aWYiLA0KICAgICAgZGVzYzogIkkgbGlrZSBjb29raWVzLiIsDQogICAgICBpY29uOiBbMTEsIDRdLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3VnYXIgYm9zb25zIiwNCiAgICAgICI8cT5Td2VldCBmaXJtIGJvc29ucy48L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3RyaW5nIHRoZW9yeSIsDQogICAgICAiPHE+UmV2ZWFscyBuZXcgaW5zaWdodCBhYm91dCB0aGUgdHJ1ZSBtZWFuaW5nIG9mIGJha2luZyBjb29raWVzIChhbmQsIGFzIGEgYm9udXMsIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIHVuaXZlcnNlKS48L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTGFyZ2UgbWFjYXJvbiBjb2xsaWRlciIsDQogICAgICAiPHE+SG93IHNpbmd1bGFyITwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJCaWcgYmFuZyBiYWtlIiwNCiAgICAgICI8cT5BbmQgdGhhdCdzIGhvdyBpdCBhbGwgYmVnYW4uPC9xPiIsDQogICAgICAiQW50aW1hdHRlciBjb25kZW5zZXIiLA0KICAgICAgNA0KICAgICk7DQoNCiAgICBvcmRlciA9IDI1NTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIkFudGlncmFuZG1hcyIsDQogICAgICAiQSBtZWFuIGFudGlncmFuZG1hIHRvIHZvbWl0IG1vcmUgY29va2llcy4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWFkZWxlaW5lcyIsDQogICAgICBkZXNjOiAiVW5mb3JnZXR0YWJsZSEiLA0KICAgICAgaWNvbjogWzEyLCAzXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBhbG1pZXJzIiwNCiAgICAgIGRlc2M6ICJQYWxtaWVyIHRoYW4geW91ISIsDQogICAgICBpY29uOiBbMTMsIDNdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGFsZXRzIiwNCiAgICAgIGRlc2M6ICJZb3UgY291bGQgcHJvYmFibHkgcGxheSBob2NrZXkgd2l0aCB0aGVzZS48YnI+SSBtZWFuLCB5b3UncmUgd2VsY29tZSB0byB0cnkuIiwNCiAgICAgIGljb246IFsxMiwgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTYWJsJmVhY3V0ZTtzIiwNCiAgICAgIGRlc2M6ICJUaGUgbmFtZSBpbXBsaWVzIHRoZXkncmUgbWFkZSBvZiBzYW5kLiBCdXQgeW91IGtub3cgYmV0dGVyLCBkb24ndCB5b3U/IiwNCiAgICAgIGljb246IFsxMywgNF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIG92ZXJzZWVycyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPm15IHB1cnJwb3NlIGlzIHRvIHNlcnZlIHlvdSwgc2lyPC9xPiIsDQogICAgICA5MDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgNCkNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDQsIDE4KTsNCg0KICAgIG9yZGVyID0gMTAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2V4dGlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsNCiAgICAgICAgIjxxPnNvbWV0aW1lczxicj50aGluZ3MganVzdDxicj5jbGljazwvcT4iLA0KICAgICAgMTAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMCwgMTldDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxMCwgMCk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRG91YmxlLXRoaWNrIGdsYXNzZXMiLA0KICAgICAgIjxxPk9oLi4uIHNvIFRIQVQncyB3aGF0IEkndmUgYmVlbiBiYWtpbmcuPC9xPiIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDMwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2luZ2VyYnJlYWQgc2NhcmVjcm93cyIsDQogICAgICAiPHE+U3RhcmluZyBhdCB5b3VyIGNyb3BzIHdpdGggbWlzY2hpZXZvdXMgZ2xlZS48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDUNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSZWNvbWJvYnVsYXRvcnMiLA0KICAgICAgIjxxPkEgbWFqb3IgcGFydCBvZiBjb29raWUgcmVjb21ib2J1bGF0aW9uLjwvcT4iLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgNQ0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkgtYm9tYiBtaW5pbmciLA0KICAgICAgIjxxPlF1ZXN0aW9uYWJsZSBlZmZpY2llbmN5LCBidXQgc3BlY3RhY3VsYXIgbm9uZXRoZWxlc3MuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ2hvY29sYXRlIG1vbm9saXRocyIsDQogICAgICAiPHE+TXkgZ29kLiBJdCdzIGZ1bGwgb2YgY2hvY29sYXRlIGJhcnMuPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgNQ0KICAgICk7DQogICAgb3JkZXIgPSA3MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkFxdWEgY3J1c3R1bGFlIiwNCiAgICAgICI8cT5DYXJlZnVsIHdpdGggdGhlIGRvc2luZyAtIG9uZSBkcm9wIHRvbyBtdWNoIGFuZCB5b3UgZ2V0IG11ZmZpbnMuPGJyPkFuZCBub2JvZHkgbGlrZXMgbXVmZmlucy48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDgwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQnJhbmUgdHJhbnNwbGFudCIsDQogICAgICAnPHE+VGhpcyByZWZlcnMgdG8gdGhlIHByYWN0aWNlIG9mIG1lcmdpbmcgaGlnaGVyIGRpbWVuc2lvbmFsIHVuaXZlcnNlcywgb3IgImJyYW5lcyIsIHdpdGggb3VyIG93biwgaW4gb3JkZXIgdG8gZmFjaWxpdGF0ZSB0cmFuc2l0IChhbmQgaGFydmVzdGluZyBvZiBwcmVjaW91cyBjb29raWUgZG91Z2gpLjwvcT4nLA0KICAgICAgIlBvcnRhbCIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiWWVzdGVybW9ycm93IGNvbXBhcmF0b3JzIiwNCiAgICAgICI8cT5Gb3J0bmlnaHRzIGludG8gbWlsbGVubmlhLjwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICA1DQogICAgKTsNCiAgICBvcmRlciA9IDEwMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlJldmVyc2UgY3ljbG90cm9ucyIsDQogICAgICAiPHE+VGhlc2UgY2FuIHVuY29sbGlzaW9uIHBhcnRpY2xlcyBhbmQgdW5zcGluIGF0b21zLiBGb3IuLi4gdWguLi4gYmV0dGVyIGZsYXZvciwgYW5kIHN0dWZmLjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDUNCiAgICApOw0KDQogICAgb3JkZXIgPSAxNTA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJVbm9idGFpbml1bSBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPlRoZXNlIG5pY2UgbWljZSBzaG91bGQgc3VmZmljZS48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAsDQogICAgICBbMTEsIDE0XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgNSwgMTEpOw0KDQogICAgb3JkZXIgPSAxMDAzMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhcmFtb2FzIiwNCiAgICAgIGRlc2M6ICJZZWFoLiBUaGF0J3MgZ290IGEgbmljZSByaW5nIHRvIGl0LiIsDQogICAgICBpY29uOiBbMTQsIDRdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiU2FnYWxvbmdzIiwNCiAgICAgIGRlc2M6ICJHcmFuZG1hJ3MgZmF2b3JpdGU/IiwNCiAgICAgIGljb246IFsxNSwgM10sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAzLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTaG9ydGZvaWxzIiwNCiAgICAgIGRlc2M6ICJGb2lsZWQgYWdhaW4hIiwNCiAgICAgIGljb246IFsxNSwgNF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAzLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJXaW4gbWludHMiLA0KICAgICAgZGVzYzogIlRoZXkncmUgdGhlIGx1Y2tpZXN0IGNvb2tpZXMgeW91J3ZlIGV2ZXIgdGFzdGVkISIsDQogICAgICBpY29uOiBbMTQsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlBlcmZlY3QgaWRsaW5nIiwNCiAgICAgIGxvYygiWW91IGtlZXAgcHJvZHVjaW5nIGNvb2tpZXMgZXZlbiB3aGlsZSB0aGUgZ2FtZSBpcyBjbG9zZWQuIikgKw0KICAgICAgICAiPHE+SXQncyB0aGUgbW9zdCBiZWF1dGlmdWwgdGhpbmcgSSd2ZSBldmVyIHNlZW4uPC9xPiIsDQogICAgICA3LA0KICAgICAgWzEwLCAwXQ0KICAgICk7IC8vZGVidWcgcHVycG9zZXMgb25seQ0KICAgIEdhbWUubGFzdC5wb29sID0gImRlYnVnIjsNCg0KICAgIG9yZGVyID0gMTAwMzA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJGaWcgZ2x1dHRvbnMiLA0KICAgICAgZGVzYzogIkdvdCBpdCBhbGwgZmlndXJlZCBvdXQuIiwNCiAgICAgIGljb246IFsxNywgNF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJMb3Jlb2xzIiwNCiAgICAgIGRlc2M6ICJCZWNhdXNlLCB1aC4uLiB0aGV5J3JlIHdvcnRoIGl0PyIsDQogICAgICBpY29uOiBbMTYsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSmFmZmEgY2FrZXMiLA0KICAgICAgZGVzYzogIklmIHlvdSB3YW50IHRvIGJha2UgYSBjb29raWUgZnJvbSBzY3JhdGNoLCB5b3UgbXVzdCBmaXJzdCBidWlsZCBhIGZhY3RvcnkuIiwNCiAgICAgIGljb246IFsxNywgM10sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHcmVhc2UncyBjdXBzIiwNCiAgICAgIGRlc2M6ICJFeHRyYS1ncmVhc3kgcGVhbnV0IGJ1dHRlci4iLA0KICAgICAgaWNvbjogWzE2LCA0XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgYnJhbmQgYmlzY3VpdHMiLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMzAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIZWF2ZW5seSBjaGlwIHNlY3JldCIsDQogICAgICBsb2MoIlVubG9ja3MgPGI+JTElPC9iPiBvZiB0aGUgcG90ZW50aWFsIG9mIHlvdXIgcHJlc3RpZ2UgbGV2ZWwuIiwgNSkgKw0KICAgICAgICAiPHE+R3JhbnRzIHRoZSBrbm93bGVkZ2Ugb2YgaGVhdmVubHkgY2hpcHMsIGFuZCBob3cgdG8gdXNlIHRoZW0gdG8gbWFrZSBiYWtpbmcgbW9yZSBlZmZpY2llbnQuPGJyPkl0J3MgYSBzZWNyZXQgdG8gZXZlcnlvbmUuPC9xPiIsDQogICAgICAxMSwNCiAgICAgIFsxOSwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5ub1Blcm0gPSAxOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiSGVhdmVubHkgY29va2llIHN0YW5kIiwNCiAgICAgIGxvYygiVW5sb2NrcyA8Yj4lMSU8L2I+IG9mIHRoZSBwb3RlbnRpYWwgb2YgeW91ciBwcmVzdGlnZSBsZXZlbC4iLCAyNSkgKw0KICAgICAgICAiPHE+RG9uJ3QgZm9yZ2V0IHRvIHZpc2l0IHRoZSBoZWF2ZW5seSBsZW1vbmFkZSBzdGFuZCBhZnRlcndhcmRzLiBXaGVuIGFmdGVybGlmZSBnaXZlcyB5b3UgbGVtb25zLi4uPC9xPiIsDQogICAgICAxMTExLA0KICAgICAgWzE4LCA3XQ0KICAgICk7DQogICAgR2FtZS5sYXN0Lm5vUGVybSA9IDE7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIZWF2ZW5seSBiYWtlcnkiLA0KICAgICAgbG9jKCJVbmxvY2tzIDxiPiUxJTwvYj4gb2YgdGhlIHBvdGVudGlhbCBvZiB5b3VyIHByZXN0aWdlIGxldmVsLiIsIDUwKSArDQogICAgICAgICI8cT5BbHNvIHNlbGxzIGdvZGx5IGNha2VzIGFuZCBkaXZpbmUgcGFzdHJpZXMuIFRoZSBwcmV0emVscyBhcmVuJ3QgdG9vIGJhZCBlaXRoZXIuPC9xPiIsDQogICAgICAxMTExMTEsDQogICAgICBbMTcsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3Qubm9QZXJtID0gMTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkhlYXZlbmx5IGNvbmZlY3Rpb25lcnkiLA0KICAgICAgbG9jKCJVbmxvY2tzIDxiPiUxJTwvYj4gb2YgdGhlIHBvdGVudGlhbCBvZiB5b3VyIHByZXN0aWdlIGxldmVsLiIsIDc1KSArDQogICAgICAgICI8cT5UaGV5IHNheSBhbmdlbCBiYWtlcnMgd29yayB0aGVyZS4gVGhleSB0YWtlIGFuZ2VsIGx1bmNoIGJyZWFrcyBhbmQgc29tZXRpbWVzIGdvIG9uIGFuZ2VsIHN0cmlrZXMuPC9xPiIsDQogICAgICAxMTExMTExMSwNCiAgICAgIFsxNiwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5ub1Blcm0gPSAxOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiSGVhdmVubHkga2V5IiwNCiAgICAgIGxvYygiVW5sb2NrcyA8Yj4lMSU8L2I+IG9mIHRoZSBwb3RlbnRpYWwgb2YgeW91ciBwcmVzdGlnZSBsZXZlbC4iLCAxMDApICsNCiAgICAgICAgIjxxPlRoaXMgaXMgdGhlIGtleSB0byB0aGUgcGVhcmx5IChhbmQgdGFzdHkpIGdhdGVzIG9mIHBhc3RyeSBoZWF2ZW4sIGdyYW50aW5nIHlvdSBhY2Nlc3MgdG8geW91ciBlbnRpcmUgc3RvY2twaWxlIG9mIGhlYXZlbmx5IGNoaXBzIGZvciBiYWtpbmcgcHVycG9zZXMuPGJyPk1heSB5b3UgdXNlIHRoZW0gd2lzZWx5LjwvcT4iLA0KICAgICAgMTExMTExMTExMSwNCiAgICAgIFsxNSwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5ub1Blcm0gPSAxOw0KDQogICAgb3JkZXIgPSAxMDEwMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlNrdWxsIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldhbm5hIGtub3cgc29tZXRoaW5nIHNwb29reT8gWW91J3ZlIGdvdCBvbmUgb2YgdGhlc2UgaW5zaWRlIHlvdXIgaGVhZCBSSUdIVCBOT1cuIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxMiwgOF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA0NDQ0NDQ0NDQ0NDQsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHaG9zdCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGV5J3JlIHNvbWV0aGluZyBzdHJhbmdlLCBidXQgdGhleSBsb29rIHByZXR0eSBnb29kISIsDQogICAgICBsb2NrZWQ6IDEsDQogICAgICBpY29uOiBbMTMsIDhdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogNDQ0NDQ0NDQ0NDQ0LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmF0IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZSBjb29raWVzIHRoaXMgdG93biBkZXNlcnZlcy4iLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzE0LCA4XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDQ0NDQ0NDQ0NDQ0NCwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlNsaW1lIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZSBpbmNyZWRpYmxlIG1lbHRpbmcgY29va2llcyEiLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzE1LCA4XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDQ0NDQ0NDQ0NDQ0NCwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlB1bXBraW4gY29va2llcyIsDQogICAgICBkZXNjOiAiTm90IGV2ZW4gcHVtcGtpbi1mbGF2b3JlZC4gVGFzdGVzIGxpa2UgZ2xhemluZy4gWWV1Z2guIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxNiwgOF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA0NDQ0NDQ0NDQ0NDQsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJFeWViYWxsIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldoZW4geW91IHN0YXJlIGludG8gdGhlIGNvb2tpZSwgdGhlIGNvb2tpZSBzdGFyZXMgYmFjayBhdCB5b3UuIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxNywgOF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA0NDQ0NDQ0NDQ0NDQsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTcGlkZXIgY29va2llcyIsDQogICAgICBkZXNjOiAiWW91IGZvdW5kIHRoZSByZWNpcGUgb24gdGhlIHdlYi4gVGhleSBkbyB3aGF0ZXZlciBhIGNvb2tpZSBjYW4uIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxOCwgOF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA0NDQ0NDQ0NDQ0NDQsDQogICAgfSk7DQoNCiAgICBHYW1lLmhhbGxvd2VlbkRyb3BzID0gWw0KICAgICAgIlNrdWxsIGNvb2tpZXMiLA0KICAgICAgIkdob3N0IGNvb2tpZXMiLA0KICAgICAgIkJhdCBjb29raWVzIiwNCiAgICAgICJTbGltZSBjb29raWVzIiwNCiAgICAgICJQdW1wa2luIGNvb2tpZXMiLA0KICAgICAgIkV5ZWJhbGwgY29va2llcyIsDQogICAgICAiU3BpZGVyIGNvb2tpZXMiLA0KICAgIF07DQoNCiAgICBHYW1lLkdldEhvd01hbnlIYWxsb3dlZW5Ecm9wcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBudW0gPSAwOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmhhbGxvd2VlbkRyb3BzKSB7DQogICAgICAgIGlmIChHYW1lLkhhcyhHYW1lLmhhbGxvd2VlbkRyb3BzW2ldKSkgbnVtKys7DQogICAgICB9DQogICAgICByZXR1cm4gbnVtOw0KICAgIH07DQogICAgLypmb3IgKHZhciBpIGluIEdhbWUuaGFsbG93ZWVuRHJvcHMpDQoJCXsNCgkJCUdhbWUuVXBncmFkZXNbR2FtZS5oYWxsb3dlZW5Ecm9wc1tpXV0uZGVzY0Z1bmM9ZnVuY3Rpb24oKXtyZXR1cm4gJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+WW91IGN1cnJlbnRseSBvd24gPGI+JytHYW1lLkdldEhvd01hbnlIYWxsb3dlZW5Ecm9wcygpKycvJytHYW1lLmhhbGxvd2VlbkRyb3BzLmxlbmd0aCsnPC9iPiBoYWxsb3dlZW4gY29va2llcy48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nK3RoaXMuZGRlc2M7fTsNCgkJfSovDQoNCiAgICBvcmRlciA9IDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJQZXJzaXN0ZW50IG1lbW9yeSIsDQogICAgICBsb2MoIlN1YnNlcXVlbnQgcmVzZWFyY2ggd2lsbCBiZSA8Yj4lMSB0aW1lczwvYj4gYXMgZmFzdC4iLCAxMCkgKw0KICAgICAgICAiPHE+SXQncyBhbGwgbWFraW5nIHNlbnNlITxicj5BZ2FpbiE8L3E+IiwNCiAgICAgIDUwMCwNCiAgICAgIFs5LCAyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIldyaW5rbGVyIGRvb3JtYXQiLA0KICAgICAgbG9jKCJXcmlua2xlcnMgc3Bhd24gbXVjaCBtb3JlIGZyZXF1ZW50bHkuIikgKw0KICAgICAgICAiPHE+WW91J3JlIHN1Y2ggYSBwdXNob3Zlci48L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTksIDhdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAxMDIwMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNocmlzdG1hcyB0cmVlIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJXaG9zZSBwaW5lIGlzIGl0IGFueXdheT8iLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzEyLCAxMF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiAyNTI1MjUyNTI1MjUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTbm93Zmxha2UgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIk1hc3MtcHJvZHVjZWQgdG8gYmUgdW5pcXVlIGluIGV2ZXJ5IHdheS4iLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzEzLCAxMF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiAyNTI1MjUyNTI1MjUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTbm93bWFuIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJJdCdzIGZyb3N0ZWQuIERvdWJseSBzby4iLA0KICAgICAgbG9ja2VkOiAxLA0KICAgICAgaWNvbjogWzE0LCAxMF0sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiAyNTI1MjUyNTI1MjUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJIb2xseSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiWW91IGRvbid0IHNtb29jaCB1bmRlciB0aGVzZSBvbmVzLiBUaGF0IHdvdWxkIGJlIHRoZSBtaXN0bGV0b2UgKHdoaWNoLCBib3RhbmljYWxseSwgaXMgYSBzbWVsbGllciB2YXJpYW50IG9mIHRoZSBtaXN0bGVmaW5nZXIpLiIsDQogICAgICBsb2NrZWQ6IDEsDQogICAgICBpY29uOiBbMTUsIDEwXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDI1MjUyNTI1MjUyNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhbmR5IGNhbmUgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIkl0J3MgdHdvIHRyZWF0cyBpbiBvbmUhPGJyPihGdXJ0aGVyIGluc3BlY3Rpb24gcmV2ZWFscyB0aGUgZnJvc3RpbmcgZG9lcyBub3QgYWN0dWFsbHkgdGFzdGUgbGlrZSBwZXBwZXJtaW50LCBidXQgbGlrZSBtdW5kYW5lIHN1Z2FyeSBmcm9zdGluZy4pIiwNCiAgICAgIGxvY2tlZDogMSwNCiAgICAgIGljb246IFsxNiwgMTBdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogMjUyNTI1MjUyNTI1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmVsbCBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiV2hhdCBkbyB0aGVzZSBldmVuIGhhdmUgdG8gZG8gd2l0aCBjaHJpc3RtYXM/IFdobyBjYXJlcywgcmluZyB0aGVtIGluISIsDQogICAgICBsb2NrZWQ6IDEsDQogICAgICBpY29uOiBbMTcsIDEwXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDI1MjUyNTI1MjUyNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlByZXNlbnQgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIlRoZSBwcmVxdWVsIHRvIGZ1dHVyZSBiaXNjdWl0cy4gV2F0Y2ggb3V0ISIsDQogICAgICBsb2NrZWQ6IDEsDQogICAgICBpY29uOiBbMTgsIDEwXSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDI1MjUyNTI1MjUyNSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHaW5nZXJicmVhZCBtZW4iLA0KICAgICAgZGVzYzogIllvdSBsaWtlIHRvIGJpdGUgdGhlIGxlZ3Mgb2ZmIGZpcnN0LCByaWdodD8gSG93IGFib3V0IHRlYXJpbmcgb2ZmIHRoZSBhcm1zPyBZb3Ugc2ljayBtb25zdGVyLiIsDQogICAgICBpY29uOiBbMTgsIDRdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdpbmdlcmJyZWFkIHRyZWVzIiwNCiAgICAgIGRlc2M6ICJFdmVyZ3JlZW5zIGluIHBhc3RyeSBmb3JtLiBZdWxlIGJlIHN1cnByaXNlZCB3aGF0IHlvdSBjYW4gY29tZSB1cCB3aXRoLiIsDQogICAgICBpY29uOiBbMTgsIDNdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMjUwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBIGZlc3RpdmUgaGF0IiwNCiAgICAgICI8Yj4iICsNCiAgICAgICAgbG9jKCJVbmxvY2tzLi4uIHNvbWV0aGluZy4iKSArDQogICAgICAgICI8L2I+PHE+Tm90IGEgY3JlYXR1cmUgd2FzIHN0aXJyaW5nLCBub3QgZXZlbiBhIG1vdXNlLjwvcT4iLA0KICAgICAgMjUsDQogICAgICBbMTksIDldLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgZHJvcCA9IGNob29zZShHYW1lLnNhbnRhRHJvcHMpOw0KICAgICAgICBHYW1lLlVubG9jayhkcm9wKTsNCiAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgbG9jKCJJbiB0aGUgZmVzdGl2ZSBoYXQsIHlvdSBmaW5kLi4uIiksDQogICAgICAgICAgbG9jKCJhIGZlc3RpdmUgdGVzdCB0dWJlPGJyPmFuZCA8Yj4lMTwvYj4uIiwgZHJvcCksDQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tkcm9wXS5pY29uDQogICAgICAgICk7DQogICAgICB9DQogICAgKTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiSW5jcmVhc2VkIG1lcnJpbmVzcyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMTUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPkl0IHR1cm5zIG91dCB0aGF0IHRoZSBrZXkgdG8gaW5jcmVhc2VkIG1lcnJpbmVzcywgc3RyYW5nZWx5IGVub3VnaCwgaGFwcGVucyB0byBiZSBhIGdvb2QgY2FtcGZpcmUgYW5kIHNvbWUgcydtb3Jlcy48YnI+WW91IGtub3cgd2hhdCB0aGV5IHNheSwgYWZ0ZXIgYWxsOyB0aGUgcydtb3JlLCB0aGUgbWVycmllci48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTcsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkltcHJvdmVkIGpvbGxpbmVzcyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMTUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPkEgbmljZSB3b2JibHkgYmVsbHkgZ29lcyBhIGxvbmcgd2F5Ljxicj5Zb3Ugam9sbHk/PC9xPiIsDQogICAgICAyNTI1LA0KICAgICAgWzE3LCA5XQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBIGx1bXAgb2YgY29hbCIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggU2FudGEgbGV2ZWwuIikgKw0KICAgICAgICAiPHE+U29tZSBvZiB0aGUgd29ybGQncyB3b3JzdCBzdG9ja2luZyBzdHVmZmluZy48YnI+SSBndWVzcyB5b3UgY291bGQgdHJ5IHN0YXJ0aW5nIHlvdXIgb3duIGxpdHRsZSBpbmR1c3RyaWFsIHJldm9sdXRpb24sIG9yIHNvbWV0aGluZz8uLi48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTMsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFuIGl0Y2h5IHN3ZWF0ZXIiLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPllvdSBkb24ndCBrbm93IHdoYXQncyB3b3JzZSA6IHRoZSBlbWJhcnJhc3NpbmdseSBxdWFpbnQgXCJlbGYgb24gcmVpbmRlZXJcIiBtb3RpZiwgb3IgdGhlIGZhY3QgdGhhdCB3ZWFyaW5nIGl0IG1ha2VzIHlvdSBmZWVsIGxpa2UgeW91J3JlIHdyYXBwZWQgaW4gYSBkZWFkIHNhc3F1YXRjaC48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTQsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJlaW5kZWVyIGJha2luZyBncm91bmRzIiwNCiAgICAgIGxvYygiUmVpbmRlZXIgYXBwZWFyIDxiPnR3aWNlIGFzIGZyZXF1ZW50bHk8L2I+LiIpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPk1hbGUgcmVpbmRlZXIgYXJlIGZyb20gTWFyczsgZmVtYWxlIHJlaW5kZWVyIGFyZSBmcm9tIHZlbmlzb24uPC9xPiIsDQogICAgICAyNTI1LA0KICAgICAgWzEyLCA5XQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJXZWlnaHRlZCBzbGVpZ2hzIiwNCiAgICAgIGxvYygiUmVpbmRlZXIgYXJlIDxiPnR3aWNlIGFzIHNsb3c8L2I+LiIpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPkhvcGUgaXQgd2FzIHdvcnRoIHRoZSB3ZWlnaHQuPGJyPihTb21ldGhpbmcgc29tZXRoaW5nIGZvcmNlZCBpbnRvIGNlcnZpZHVkZSk8L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTIsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkhvIGhvIGhvLWZsYXZvcmVkIGZyb3N0aW5nIiwNCiAgICAgIGxvYygiUmVpbmRlZXIgZ2l2ZSA8Yj50d2ljZSBhcyBtdWNoPC9iPi4iKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBTYW50YSBsZXZlbC4iKSArDQogICAgICAgICI8cT5JdCdzIHRpbWUgdG8gdXAgdGhlIGFudGxlci48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTIsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNlYXNvbiBzYXZpbmdzIiwNCiAgICAgIGxvYygiQWxsIGJ1aWxkaW5ncyBhcmUgPGI+JTElIGNoZWFwZXI8L2I+LiIsIDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPkJ5IFNhbnRhJ3MgYmVhcmQsIHdoYXQgc2F2aW5ncyE8YnI+QnV0IHdobyB3aWxsIHNhdmUgdXM/PC9xPiIsDQogICAgICAyNTI1LA0KICAgICAgWzE2LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlRveSB3b3Jrc2hvcCIsDQogICAgICBsb2MoIkFsbCB1cGdyYWRlcyBhcmUgPGI+JTElIGNoZWFwZXI8L2I+LiIsIDUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPldhdGNoIHlvdXJzLWVsZiBhcm91bmQgZWx2ZXNkcm9wcGVycyB3aG8gbWlnaHQgc3RlYWwgb3VyIHByb2R1Y3Rpb24gc2VjcmV0cy48YnI+T3IgZWx2ZW4gd29yc2UhPC9xPiIsDQogICAgICAyNTI1LA0KICAgICAgWzE2LCA5XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIk5hdWdodHkgbGlzdCIsDQogICAgICBsb2MoIiUxIGFyZSA8Yj50d2ljZTwvYj4gYXMgZWZmaWNpZW50LiIsIGNhcChsb2MoImdyYW5kbWFzIikpKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBTYW50YSBsZXZlbC4iKSArDQogICAgICAgICI8cT5UaGlzIGxpc3QgY29udGFpbnMgZXZlcnkgdW5ob2x5IGRlZWQgcGVycGV0dWF0ZWQgYnkgZ3JhbmRtYWtpbmQuPGJyPkhlIHdvbid0IGJlIGNoZWNraW5nIHRoaXMgb25lIHR3aWNlLjxicj5PbmNlLiBPbmNlIGlzIGVub3VnaC48L3E+IiwNCiAgICAgIDI1MjUsDQogICAgICBbMTUsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNhbnRhJ3MgYm90dG9tbGVzcyBiYWciLA0KICAgICAgbG9jKCJSYW5kb20gZHJvcHMgYXJlIDxiPiUxJSBtb3JlIGNvbW1vbjwvYj4uIiwgMTApICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIFNhbnRhIGxldmVsLiIpICsNCiAgICAgICAgIjxxPlRoaXMgaXMgb25lIGJvdHRvbSB5b3UgY2FuJ3QgY2hlY2sgb3V0LjwvcT4iLA0KICAgICAgMjUyNSwNCiAgICAgIFsxOSwgOV0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FudGEncyBoZWxwZXJzIiwNCiAgICAgIGxvYygiQ2xpY2tpbmcgaXMgPGI+JTElPC9iPiBtb3JlIHBvd2VyZnVsLiIsIDEwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBTYW50YSBsZXZlbC4iKSArDQogICAgICAgICI8cT5Tb21lIGNob29zZSB0byBoZWxwIGhhbWJ1cmdlcjsgc29tZSBjaG9vc2UgdG8gaGVscCB5b3UuPGJyPlRvIGVhY2ggdGhlaXIgb3duLCBJIGd1ZXNzLjwvcT4iLA0KICAgICAgMjUyNSwNCiAgICAgIFsxOSwgOV0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FudGEncyBsZWdhY3kiLA0KICAgICAgbG9jKCJDb29raWUgcHJvZHVjdGlvbiBtdWx0aXBsaWVyIDxiPislMSUgcGVyIFNhbnRhJ3MgbGV2ZWxzLjwvYj4iLCAzKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBTYW50YSBsZXZlbC4iKSArDQogICAgICAgICI8cT5JbiB0aGUgbm9ydGggcG9sZSwgeW91IGdvdHRhIGdldCB0aGUgZWx2ZXMgZmlyc3QuIFRoZW4gd2hlbiB5b3UgZ2V0IHRoZSBlbHZlcywgeW91IHN0YXJ0IG1ha2luZyB0aGUgdG95cy4gVGhlbiB3aGVuIHlvdSBnZXQgdGhlIHRveXMuLi4gdGhlbiB5b3UgZ2V0IHRoZSBjb29raWVzLjwvcT4iLA0KICAgICAgMjUyNSwNCiAgICAgIFsxOSwgOV0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FudGEncyBtaWxrIGFuZCBjb29raWVzIiwNCiAgICAgIGxvYygiTWlsayBpcyA8Yj4lMSUgbW9yZSBwb3dlcmZ1bDwvYj4uIiwgNSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggU2FudGEgbGV2ZWwuIikgKw0KICAgICAgICAiPHE+UGFydCBvZiBTYW50YSdzIGRyZWFkZnVsbHkgdW5iYWxhbmNlZCBkaWV0LjwvcT4iLA0KICAgICAgMjUyNSwNCiAgICAgIFsxOSwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJlaW5kZWVyIHNlYXNvbiIsDQogICAgICBsb2MoIlJlaW5kZWVyIHNwYXduIG11Y2ggbW9yZSBmcmVxdWVudGx5LiIpICsNCiAgICAgICAgIjxxPkdvLCBDaGVhdGVyISBHbywgSGFja2VyIGFuZCBGYWtlciE8L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTIsIDldDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAyNTAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNhbnRhJ3MgZG9taW5pb24iLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDIwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQWxsIGJ1aWxkaW5ncyBhcmUgPGI+JTElIGNoZWFwZXI8L2I+LiIsIDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJBbGwgdXBncmFkZXMgYXJlIDxiPiUxJSBjaGVhcGVyPC9iPi4iLCAyKSArDQogICAgICAgICI8cT5NeSBuYW1lIGlzIENsYXVzLCBraW5nIG9mIGtpbmdzOzxicj5Mb29rIG9uIG15IHRveXMsIHllIE1pZ2h0eSwgYW5kIGRlc3BhaXIhPC9xPiIsDQogICAgICAyNTI1MjUyNTI1MjUyNTI1LA0KICAgICAgWzE5LCAxMF0sDQogICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgfQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIHZhciBoZWFydFBvd2VyID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHBvdyA9IDI7DQogICAgICBpZiAoR2FtZS5IYXMoIlN0YXJsb3ZlIikpIHBvdyA9IDM7DQogICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgdmFyIGdvZEx2bCA9IEdhbWUuaGFzR29kKCJzZWFzb25zIik7DQogICAgICAgIGlmIChnb2RMdmwgPT0gMSkgcG93ICo9IDEuMzsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIHBvdyAqPSAxLjI7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBwb3cgKj0gMS4xOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHBvdzsNCiAgICB9Ow0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUHVyZSBoZWFydCBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAnTWVsdHkgd2hpdGUgY2hvY29sYXRlPGJyPnRoYXQgc2F5cyAiSSAqbGlrZSogbGlrZSB5b3UiLicsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFsxOSwgM10sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQXJkZW50IGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBIHJlZCBob3QgY2hlcnJ5IGJpc2N1aXQgdGhhdCB3aWxsIG51ZGdlIHRoZSB0YXJnZXQgb2YgeW91ciBhZmZlY3Rpb24gaW4gaW50ZXJlc3RpbmcgZGlyZWN0aW9ucy4iLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFsyMCwgM10sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiU291ciBoZWFydCBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiQSBiaXR0ZXIgbGltZSBiaXNjdWl0IGZvciB0aGUgbG9uZWx5IGFuZCB0aGUgaGVhcnQtYnJva2VuLiIsDQogICAgICByZXF1aXJlOiBHYW1lLmxhc3QubmFtZSwNCiAgICAgIHNlYXNvbjogInZhbGVudGluZXMiLA0KICAgICAgaWNvbjogWzIwLCA0XSwNCiAgICAgIHBvd2VyOiBoZWFydFBvd2VyLA0KICAgICAgcHJpY2U6IDEwMDAwMDAwMDAwMDAsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJXZWVwaW5nIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBbiBpY2UtY29sZCBibHVlYmVycnkgYmlzY3VpdCwgc3ltYm9sIG9mIGEgbWVuZGluZyBoZWFydC4iLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFsyMSwgM10sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwMDAwMDAwLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiR29sZGVuIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBIGJlYXV0aWZ1bCBiaXNjdWl0IHRvIHN5bWJvbGl6ZSBraW5kbmVzcywgdHJ1ZSBsb3ZlLCBhbmQgc2luY2VyaXR5LiIsDQogICAgICByZXF1aXJlOiBHYW1lLmxhc3QubmFtZSwNCiAgICAgIHNlYXNvbjogInZhbGVudGluZXMiLA0KICAgICAgaWNvbjogWzIxLCA0XSwNCiAgICAgIHBvd2VyOiBoZWFydFBvd2VyLA0KICAgICAgcHJpY2U6IDEwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJFdGVybmFsIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJTaWx2ZXIgaWNpbmcgZm9yIGEgdmVyeSBzcGVjaWFsIHNvbWVvbmUgeW91J3ZlIGxpa2VkIGZvciBhIGxvbmcsIGxvbmcgdGltZS4iLA0KICAgICAgcmVxdWlyZTogR2FtZS5sYXN0Lm5hbWUsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFsxOSwgNF0sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgIH0pOw0KDQogICAgR2FtZS5oZWFydERyb3BzID0gWw0KICAgICAgIlB1cmUgaGVhcnQgYmlzY3VpdHMiLA0KICAgICAgIkFyZGVudCBoZWFydCBiaXNjdWl0cyIsDQogICAgICAiU291ciBoZWFydCBiaXNjdWl0cyIsDQogICAgICAiV2VlcGluZyBoZWFydCBiaXNjdWl0cyIsDQogICAgICAiR29sZGVuIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgICJFdGVybmFsIGhlYXJ0IGJpc2N1aXRzIiwNCiAgICAgICJQcmlzbSBoZWFydCBiaXNjdWl0cyIsDQogICAgXTsNCg0KICAgIEdhbWUuR2V0SG93TWFueUhlYXJ0RHJvcHMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbnVtID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5oZWFydERyb3BzKSB7DQogICAgICAgIGlmIChHYW1lLkhhcyhHYW1lLmhlYXJ0RHJvcHNbaV0pKSBudW0rKzsNCiAgICAgIH0NCiAgICAgIHJldHVybiBudW07DQogICAgfTsNCg0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2VtIHBvbGlzaCIsDQogICAgICAiPHE+R2V0IHJpZCBvZiB0aGUgZ3JpbWUgYW5kIGxldCBtb3JlIGxpZ2h0IGluLjxicj5UcnVseSwgdHJ1bHkgb3V0cmFnZW91cy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiOXRoIGNvbG9yIiwNCiAgICAgICI8cT5EZWx2ZSBpbnRvIHVudG91Y2hlZCBvcHRpY2FsIGRlcHRocyB3aGVyZSBldmVuIHRoZSBtYW50aXMgc2hyaW1wIGhhc24ndCBzZXQgYW4gZXllITwvcT4iLA0KICAgICAgIlByaXNtIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDaG9jb2xhdGUgbGlnaHQiLA0KICAgICAgIjxxPkJhc2sgaW50byBpdHMgY29jb2FsZXNjZW5jZS48YnI+KFdhcm5pbmcgOiBtYXkgY2F1c2UgdmFyaW91cyBpbnRlcmVzdGluZyBhbGJlaXQgZGVhZGx5IHNraW4gY29uZGl0aW9ucy4pPC9xPiIsDQogICAgICAiUHJpc20iLA0KICAgICAgMw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdyYWluYm93IiwNCiAgICAgICI8cT5SZW1lbWJlciB0aGUgZGlmZmVyZW50IGdyYWlucyB1c2luZyB0aGUgaGFuZHkgUm95IEcuIEJpdiBtbmVtb25pYyA6IFIgaXMgZm9yIHJpY2UsIE8gaXMgZm9yIG9hdHMuLi4gdWgsIEIgZm9yIGJhcmxleT8uLi48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUHVyZSBjb3NtaWMgbGlnaHQiLA0KICAgICAgIjxxPllvdXIgcHJpc21zIG5vdyByZWNlaXZlIHByaXN0aW5lLCB1bmFkdWx0ZXJhdGVkIHBob3RvbnMgZnJvbSB0aGUgb3RoZXIgZW5kIG9mIHRoZSB1bml2ZXJzZS48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICA1DQogICAgKTsNCg0KICAgIG9yZGVyID0gMjU1Ow0KICAgIEdhbWUuR3JhbmRtYVN5bmVyZ3koDQogICAgICAiUmFpbmJvdyBncmFuZG1hcyIsDQogICAgICAiQSBsdW1pbm91cyBncmFuZG1hIHRvIHNwYXJrbGUgaW50byBjb29raWVzLiIsDQogICAgICAiUHJpc20iDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjQwMDA7DQogICAgR2FtZS5zZWFzb25UcmlnZ2VyQmFzZVByaWNlID0gMTAwMDAwMDAwMDsgLy8xMTExMTExMTExOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2Vhc29uIHN3aXRjaGVyIiwNCiAgICAgIGxvYygNCiAgICAgICAgIkFsbG93cyB5b3UgdG8gPGI+dHJpZ2dlciBzZWFzb25hbCBldmVudHM8L2I+IGF0IHdpbGwsIGZvciBhIHByaWNlLiINCiAgICAgICkgKyAiPHE+VGhlcmUgd2lsbCBhbHdheXMgYmUgdGltZS48L3E+IiwNCiAgICAgIDExMTEsDQogICAgICBbMTYsIDZdLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2Vhc29ucykgew0KICAgICAgICAgIEdhbWUuVW5sb2NrKEdhbWUuc2Vhc29uc1tpXS50cmlnZ2VyKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJIZXJhbGRzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJGZXN0aXZlIGJpc2N1aXQiLA0KICAgICAgbG9jKA0KICAgICAgICAiVHJpZ2dlcnMgPGI+JTEgc2Vhc29uPC9iPiBmb3IgdGhlIG5leHQgMjQgaG91cnMuPGJyPlRyaWdnZXJpbmcgYW5vdGhlciBzZWFzb24gd2lsbCBjYW5jZWwgdGhpcyBvbmUuPGJyPkNvc3Qgc2NhbGVzIHdpdGggdW5idWZmZWQgQ3BTIGFuZCBpbmNyZWFzZXMgd2l0aCBldmVyeSBzZWFzb24gc3dpdGNoLiIsDQogICAgICAgIGxvYygiQ2hyaXN0bWFzIikNCiAgICAgICkgKyAiPHE+J1R3YXMgdGhlIG5pZ2h0IGJlZm9yZSBDaHJpc3RtYXMtIG9yIHdhcyBpdD88L3E+IiwNCiAgICAgIEdhbWUuc2Vhc29uVHJpZ2dlckJhc2VQcmljZSwNCiAgICAgIFsxMiwgMTBdDQogICAgKTsNCiAgICBHYW1lLmxhc3Quc2Vhc29uID0gImNocmlzdG1hcyI7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkdob3N0bHkgYmlzY3VpdCIsDQogICAgICBsb2MoDQogICAgICAgICJUcmlnZ2VycyA8Yj4lMSBzZWFzb248L2I+IGZvciB0aGUgbmV4dCAyNCBob3Vycy48YnI+VHJpZ2dlcmluZyBhbm90aGVyIHNlYXNvbiB3aWxsIGNhbmNlbCB0aGlzIG9uZS48YnI+Q29zdCBzY2FsZXMgd2l0aCB1bmJ1ZmZlZCBDcFMgYW5kIGluY3JlYXNlcyB3aXRoIGV2ZXJ5IHNlYXNvbiBzd2l0Y2guIiwNCiAgICAgICAgbG9jKCJIYWxsb3dlZW4iKQ0KICAgICAgKSArICI8cT5zcG9va3kgc2Nhcnkgc2tlbGV0b25zPGJyPndpbGwgd2FrZSB5b3Ugd2l0aCBhIGJvbzwvcT4iLA0KICAgICAgR2FtZS5zZWFzb25UcmlnZ2VyQmFzZVByaWNlLA0KICAgICAgWzEzLCA4XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnNlYXNvbiA9ICJoYWxsb3dlZW4iOw0KICAgIEdhbWUubGFzdC5wb29sID0gInRvZ2dsZSI7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMb3Zlc2ljayBiaXNjdWl0IiwNCiAgICAgIGxvYygNCiAgICAgICAgIlRyaWdnZXJzIDxiPiUxIHNlYXNvbjwvYj4gZm9yIHRoZSBuZXh0IDI0IGhvdXJzLjxicj5UcmlnZ2VyaW5nIGFub3RoZXIgc2Vhc29uIHdpbGwgY2FuY2VsIHRoaXMgb25lLjxicj5Db3N0IHNjYWxlcyB3aXRoIHVuYnVmZmVkIENwUyBhbmQgaW5jcmVhc2VzIHdpdGggZXZlcnkgc2Vhc29uIHN3aXRjaC4iLA0KICAgICAgICBsb2MoIlZhbGVudGluZSdzIGRheSIpDQogICAgICApICsgIjxxPlJvbWFuY2UgbmV2ZXIgZ29lcyBvdXQgb2YgZmFzaGlvbi48L3E+IiwNCiAgICAgIEdhbWUuc2Vhc29uVHJpZ2dlckJhc2VQcmljZSwNCiAgICAgIFsyMCwgM10NCiAgICApOw0KICAgIEdhbWUubGFzdC5zZWFzb24gPSAidmFsZW50aW5lcyI7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvb2wncyBiaXNjdWl0IiwNCiAgICAgIGxvYygNCiAgICAgICAgIlRyaWdnZXJzIDxiPiUxIHNlYXNvbjwvYj4gZm9yIHRoZSBuZXh0IDI0IGhvdXJzLjxicj5UcmlnZ2VyaW5nIGFub3RoZXIgc2Vhc29uIHdpbGwgY2FuY2VsIHRoaXMgb25lLjxicj5Db3N0IHNjYWxlcyB3aXRoIHVuYnVmZmVkIENwUyBhbmQgaW5jcmVhc2VzIHdpdGggZXZlcnkgc2Vhc29uIHN3aXRjaC4iLA0KICAgICAgICBsb2MoIkJ1c2luZXNzIGRheSIpDQogICAgICApICsNCiAgICAgICAgIjxxPkJ1c2luZXNzLiBTZXJpb3VzIGJ1c2luZXNzLiBUaGlzIGlzIGFic29sdXRlbHkgYWxsIG9mIHlvdXIgYnVzaW5lc3MuPC9xPiIsDQogICAgICBHYW1lLnNlYXNvblRyaWdnZXJCYXNlUHJpY2UsDQogICAgICBbMTcsIDZdDQogICAgKTsNCiAgICBHYW1lLmxhc3Quc2Vhc29uID0gImZvb2xzIjsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkV0ZXJuYWwgc2Vhc29ucyIsDQogICAgICBsb2MoIlNlYXNvbnMgbm93IGxhc3QgZm9yZXZlci4iKSArICI8cT5TZWFzb24gdG8gdGFzdGUuPC9xPiIsDQogICAgICA3LA0KICAgICAgWzE2LCA2XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNlYXNvbnMpIHsNCiAgICAgICAgICBHYW1lLlVubG9jayhHYW1lLnNlYXNvbnNbaV0udHJpZ2dlcik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICApOyAvL2RlYnVnIHB1cnBvc2VzIG9ubHkNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJkZWJ1ZyI7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIG1hbmFnZXJzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKyAiPHE+dGhhdCdzIG5vdCBnb25uYSBwYXdzIGFueSBwcm9ibGVtLCBzaXI8L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgNSkNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDUsIDE4KTsNCg0KICAgIG9yZGVyID0gMTAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2VwdGlsbGlvbiBmaW5nZXJzIiwNCiAgICAgIGdldFN0clRob3VzYW5kRmluZ2Vyc0dhaW4oMjApICsgIjxxPltjdXJzb3J5IGZsYXZvciB0ZXh0XTwvcT4iLA0KICAgICAgMTAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMTIsIDIwXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMTEsIDApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiT2N0aWxsaW9uIGZpbmdlcnMiLA0KICAgICAgZ2V0U3RyVGhvdXNhbmRGaW5nZXJzR2FpbigyMCkgKw0KICAgICAgICAiPHE+VHVybnMgb3V0IHlvdSA8Yj5jYW48L2I+IHF1aXRlIHB1dCB5b3VyIGZpbmdlciBvbiBpdC48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzEyLCAxOV0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEyLCAwKTsNCg0KICAgIG9yZGVyID0gMTUwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRWx1ZGl1bSBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPkkgcm9kZW50IGRvIHRoYXQgaWYgSSB3ZXJlIHlvdS48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFsxMSwgMTVdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCA2LCAxMSk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJXaXNoYWxsb3kgbW91c2UiLA0KICAgICAgZ2V0U3RyQ2xpY2tpbmdHYWlucygxKSArDQogICAgICAgICI8cT5DbGlja2luZyBpcyBmaW5lIGFuZCBkYW5keSwgYnV0IGRvbid0IHNtYXNoIHlvdXIgbW91c2Ugb3ZlciBpdC4gR2V0IHlvdXIgZ2FtZSBvbi4gR28gcGxheS48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAxNl0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDcsIDExKTsNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQWdpbmcgYWdlbnRzIiwNCiAgICAgICI8cT5Db3VudGVyLWludHVpdGl2ZWx5LCBncmFuZG1hcyBoYXZlIHRoZSB1bmNhbm55IGFiaWxpdHkgdG8gYmVjb21lIG1vcmUgcG93ZXJmdWwgdGhlIG9sZGVyIHRoZXkgZ2V0LjwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlB1bHNhciBzcHJpbmtsZXJzIiwNCiAgICAgICI8cT5UaGVyZSdzIG5vIHN1Y2ggdGhpbmcgYXMgb3Zlci13YXRlcmluZy4gVGhlIG1vaXN0ZXN0IGlzIHRoZSBiZXN0ZXN0LjwvcT4iLA0KICAgICAgIkZhcm0iLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSA1MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRlZXAtYmFrZSBwcm9jZXNzIiwNCiAgICAgICI8cT5BIHBhdGVudGVkIHByb2Nlc3MgaW5jcmVhc2luZyBjb29raWUgeWllbGQgdHdvLWZvbGQgZm9yIHRoZSBzYW1lIGFtb3VudCBvZiBpbmdyZWRpZW50cy4gRG9uJ3QgYXNrIGhvdywgZG9uJ3QgdGFrZSBwaWN0dXJlcywgYW5kIGJlIHN1cmUgdG8gd2VhciB5b3VyIHByb3RlY3RpdmUgc3VpdC48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDYNCiAgICApOw0KICAgIG9yZGVyID0gNDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDb3JlZm9yZ2UiLA0KICAgICAgIjxxPllvdSd2ZSBmaW5hbGx5IGR1ZyBhIHR1bm5lbCBkb3duIHRvIHRoZSBFYXJ0aCdzIGNvcmUuIEl0J3MgcHJldHR5IHdhcm0gZG93biBoZXJlLjwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSA2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdlbmVyYXRpb24gc2hpcCIsDQogICAgICAiPHE+QnVpbHQgdG8gbGFzdCwgdGhpcyBodW1vbmdvdXMgc3BhY2VjcmFmdCB3aWxsIHN1cmVseSBkZWxpdmVyIHlvdXIgY29va2llcyB0byB0aGUgZGVlcCBlbmRzIG9mIHNwYWNlLCBvbmUgZGF5LjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDYNCiAgICApOw0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJPcmlnaW4gY3J1Y2libGUiLA0KICAgICAgIjxxPkJ1aWx0IGZyb20gdGhlIHJhcmVzdCBvZiBlYXJ0aHMgYW5kIGxvY2F0ZWQgYXQgdGhlIHZlcnkgZGVlcGVzdCBvZiB0aGUgbGFyZ2VzdCBtb3VudGFpbiwgdGhpcyBsZWdlbmRhcnkgY3J1Y2libGUgaXMgc2FpZCB0byByZXRhaW4gcHJvcGVydGllcyBmcm9tIHRoZSBiaWctYmFuZyBpdHNlbGYuPC9xPiIsDQogICAgICAiQWxjaGVteSBsYWIiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSA4MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRlaXR5LXNpemVkIHBvcnRhbHMiLA0KICAgICAgIjxxPkl0J3MgYWxtb3N0IGxpa2UsIHNheSwgYW4gZWxkZXIgZ29kIGNvdWxkIGZpdCB0aHJvdWdoIHRoaXMgdGhpbmcgbm93LiBIeXBvdGhldGljYWxseS48L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSA5MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZhciBmdXR1cmUgZW5hY3RtZW50IiwNCiAgICAgICI8cT5UaGUgZmFyIGZ1dHVyZSBlbmFjdG1lbnQgYXV0aG9yaXplcyB5b3UgdG8gZGVsdmUgZGVlcCBpbnRvIHRoZSBmdXR1cmUgLSB3aGVyZSBjaXZpbGl6YXRpb24gaGFzIGZhbGxlbiBhbmQgcmlzZW4gYWdhaW4sIGFuZCBjb29raWVzIGFyZSBwbGVudGlmdWwuPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDYNCiAgICApOw0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTmFub2Nvc21pY3MiLA0KICAgICAgIjxxPlRoZSB0aGVvcnkgb2YgbmFub2Nvc21pY3MgcG9zaXRzIHRoYXQgZWFjaCBzdWJhdG9taWMgcGFydGljbGUgaXMgaW4gZmFjdCBpdHMgb3duIHNlbGYtY29udGFpbmVkIHVuaXZlcnNlLCBob2xkaW5nIHVuZmF0aG9tYWJsZSBhbW91bnRzIG9mIGVuZXJneS48YnI+VGhpcyBzb21laG93IHN0YWNrcyB3aXRoIHRoZSBuZXN0ZWQgdW5pdmVyc2UgdGhlb3J5LCBiZWNhdXNlIHBoeXNpY3MuPC9xPiIsDQogICAgICAiQW50aW1hdHRlciBjb25kZW5zZXIiLA0KICAgICAgNg0KICAgICk7DQogICAgb3JkZXIgPSAxMTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJHbG93LWluLXRoZS1kYXJrIiwNCiAgICAgICI8cT5Zb3VyIHByaXNtcyBub3cgZ2xvdyBpbiB0aGUgZGFyaywgZWZmZWN0aXZlbHkgZG91YmxpbmcgdGhlaXIgb3V0cHV0ITwvcT4iLA0KICAgICAgIlByaXNtIiwNCiAgICAgIDYNCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAzMjsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlJvc2UgbWFjYXJvbnMiLA0KICAgICAgZGVzYzogIkFsdGhvdWdoIGFuIG9kZCBmbGF2b3IsIHRoZXNlIHBhc3RyaWVzIHJlY2VudGx5IHJvc2UgaW4gcG9wdWxhcml0eS4iLA0KICAgICAgaWNvbjogWzIyLCAzXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWFjYXJvbnMiLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkxlbW9uIG1hY2Fyb25zIiwNCiAgICAgIGRlc2M6ICJUYXN0ZWZ1bGx5IHNvdXIsIGRlbGlnaHRmdWwgdHJlYXRzLiIsDQogICAgICBpY29uOiBbMjMsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2hvY29sYXRlIG1hY2Fyb25zIiwNCiAgICAgIGRlc2M6ICJUaGV5J3JlIGxpa2UgdGlueSBzdWdhcnkgYnVyZ2VycyEiLA0KICAgICAgaWNvbjogWzI0LCAzXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWFjYXJvbnMiLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBpc3RhY2hpbyBtYWNhcm9ucyIsDQogICAgICBkZXNjOiAiUGlzdGFjaGlvIHNoZWxscyBub3cgcmVtb3ZlZCBhZnRlciBtdWx0aXBsZSBjb21wbGFpbnRzLiIsDQogICAgICBpY29uOiBbMjIsIDRdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSGF6ZWxudXQgbWFjYXJvbnMiLA0KICAgICAgZGVzYzogIlRoZXNlIGdvIGVzcGVjaWFsbHkgd2VsbCB3aXRoIGNvZmZlZS4iLA0KICAgICAgaWNvbjogWzIzLCA0XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWFjYXJvbnMiLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlZpb2xldCBtYWNhcm9ucyIsDQogICAgICBkZXNjOiAiSXQncyBsaWtlIHNwcmF5aW5nIHBlcmZ1bWUgaW50byB5b3VyIG1vdXRoISIsDQogICAgICBpY29uOiBbMjQsIDRdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIk1hZ2ljIHNoZW5hbmlnYW5zIiwNCiAgICAgIGxvYygiQ29va2llIHByb2R1Y3Rpb24gPGI+bXVsdGlwbGllZCBieSAxLDAwMDwvYj4uIikgKw0KICAgICAgICAiPHE+SXQncyBtYWdpYy4gSSBhaW4ndCBnb3R0YSBleHBsYWluIHNoPGRpdiBzdHlsZT1cImRpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQ6dXJsKGltZy9tb25leS5wbmcpO3dpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7cG9zaXRpb246cmVsYXRpdmU7dG9wOjRweDtsZWZ0OjBweDttYXJnaW46MHB4IC0ycHg7XCI+PC9kaXY+dC48L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTcsIDVdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAyNDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkJ1bm55IGJpc2N1aXQiLA0KICAgICAgbG9jKA0KICAgICAgICAiVHJpZ2dlcnMgPGI+JTEgc2Vhc29uPC9iPiBmb3IgdGhlIG5leHQgMjQgaG91cnMuPGJyPlRyaWdnZXJpbmcgYW5vdGhlciBzZWFzb24gd2lsbCBjYW5jZWwgdGhpcyBvbmUuPGJyPkNvc3Qgc2NhbGVzIHdpdGggdW5idWZmZWQgQ3BTIGFuZCBpbmNyZWFzZXMgd2l0aCBldmVyeSBzZWFzb24gc3dpdGNoLiIsDQogICAgICAgIGxvYygiRWFzdGVyIikNCiAgICAgICkgKw0KICAgICAgICAiPHE+QWxsIHRoZSB3b3JsZCB3aWxsIGJlIHlvdXIgZW5lbXk8YnI+YW5kIHdoZW4gdGhleSBjYXRjaCB5b3UsPGJyPnRoZXkgd2lsbCBraWxsIHlvdS4uLjxicj5idXQgZmlyc3QgdGhleSBtdXN0IGNhdGNoIHlvdS48L3E+IiwNCiAgICAgIEdhbWUuc2Vhc29uVHJpZ2dlckJhc2VQcmljZSwNCiAgICAgIFswLCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5zZWFzb24gPSAiZWFzdGVyIjsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KDQogICAgdmFyIGVnZ1ByaWNlID0gOTk5OTk5OTk5OTk5Ow0KICAgIHZhciBlZ2dQcmljZTIgPSA5OTk5OTk5OTk5OTk5OTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkNoaWNrZW4gZWdnIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygxKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+VGhlIGVnZy4gVGhlIGVnZyBjYW1lIGZpcnN0LiBHZXQgb3ZlciBpdC48L3E+IiwNCiAgICAgIGVnZ1ByaWNlLA0KICAgICAgWzEsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEdWNrIGVnZyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlRoZW4gaGUgd2FkZGxlZCBhd2F5LjwvcT4iLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbMiwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlR1cmtleSBlZ2ciLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIGhvdyBtYW55IGVnZ3MgeW91IG93bi4iKSArDQogICAgICAgICI8cT5UaGVzZSBoYXRjaCBpbnRvIHN0cmFuZ2UsIGhhbmQtc2hhcGVkIGNyZWF0dXJlcy48L3E+IiwNCiAgICAgIGVnZ1ByaWNlLA0KICAgICAgWzMsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJRdWFpbCBlZ2ciLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIGhvdyBtYW55IGVnZ3MgeW91IG93bi4iKSArDQogICAgICAgICI8cT5UaGVzZSBlZ2dzIGFyZSBwb3NpdGl2ZWx5IHRpbnkuIEkgbWVhbiBsb29rIGF0IHRoZW0uIEhvdyBkb2VzIHRoaXMgaGFwcGVuPyBXaG9zZSBpZGVhIHdhcyB0aGF0PzwvcT4iLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbNCwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlJvYmluIGVnZyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPkhvbHkgYXp1cmUtaHVlZCBzaGVsbGVkIGVtYnJ5b3MhPC9xPiIsDQogICAgICBlZ2dQcmljZSwNCiAgICAgIFs1LCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiT3N0cmljaCBlZ2ciLA0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIGhvdyBtYW55IGVnZ3MgeW91IG93bi4iKSArDQogICAgICAgICI8cT5PbmUgb2YgdGhlIGxhcmdlc3QgZWdncyBpbiB0aGUgd29ybGQuIE1vcmUgbGlrZSBvc3Ryb3VjaCwgYW0gSSByaWdodD88YnI+R3V5cz88L3E+IiwNCiAgICAgIGVnZ1ByaWNlLA0KICAgICAgWzYsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDYXNzb3dhcnkgZWdnIiwNCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygxKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+VGhlIGNhc3Nvd2FyeSBpcyB0YWxsZXIgdGhhbiB5b3UsIHBvc3Nlc3NlcyBtdXJkZXJvdXMgY2xhd3MgYW5kIGNhbiBlYXNpbHkgb3V0cnVuIHlvdS48YnI+WW91J2QgZG8gd2VsbCB0byBiZSBjYXNzby13YXJ5IG9mIHRoZW0uPC9xPiIsDQogICAgICBlZ2dQcmljZSwNCiAgICAgIFs3LCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2FsbW9uIHJvZSIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPkRvIHRoZSBpbXBvc3NpYmxlLCBzZWUgdGhlIGludmlzaWJsZS48YnI+Um9lIHJvZSwgZmlnaHQgdGhlIHBvd2VyPzwvcT4iLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbOCwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZyb2dzcGF3biIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgJzxxPkkgd2FzIGdvaW5nIHRvIG1ha2UgYSBwdW4gYWJvdXQgaG93IHRoZXNlICJ0b2FkYWxseSBsb29rIGxpa2UgZXllYmFsbHMiLCBidXQgZnJvZ2V0IGl0LjwvcT4nLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbOSwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNoYXJrIGVnZyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPkhFTExPIElTIFRISVMgRk9PRD88YnI+TEVUIE1FIFRFTEwgWU9VIEFCT1VUIEZPT0QuPGJyPldIWSBETyBJIEtFRVAgRUFUSU5HIE1ZIEZSSUVORFM8L3E+IiwNCiAgICAgIGVnZ1ByaWNlLA0KICAgICAgWzEwLCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVHVydGxlIGVnZyIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlR1cnRsZXMsIHJpZ2h0PyBIYXRjaCBmcm9tIHNoZWxscy4gR3JvdyBpbnRvIHNoZWxscy4gV2hhdCdzIHVwIHdpdGggdGhhdD88YnI+Tm93IGZvciBteSBza2l0IGFib3V0IGFpcnBsYW5lIGZvb2QuPC9xPiIsDQogICAgICBlZ2dQcmljZSwNCiAgICAgIFsxMSwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFudCBsYXJ2YSIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlRoZXNlIGFyZSBhIGRlbGljYWN5IGluIHNvbWUgY291bnRyaWVzLCBJIHN3ZWFyLiBZb3Ugd2lsbCBsZXQgdGhlc2UgaW52YWRlIHlvdXIgZGlnZXN0aXZlIHRyYWN0LCBhbmQgeW91IHdpbGwgZGVyaXZlIGdyZWF0IHBsZWFzdXJlIGZyb20gaXQuPGJyPkFuZCBhbGwgd2lsbCBiZSB3ZWxsLjwvcT4iLA0KICAgICAgZWdnUHJpY2UsDQogICAgICBbMTIsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJHb2xkZW4gZ29vc2UgZWdnIiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPiUxJTwvYj4gbW9yZSBvZnRlbi4iLCA1KSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+VGhlIHNvbGUgdmVzdGlnZSBvZiBhIHRyYWdpYyB0YWxlIGludm9sdmluZyBtaXNndWlkZWQgaW52ZXN0bWVudHMuPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTMsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJGYWJlcmdlIGVnZyIsDQogICAgICBsb2MoIkFsbCBidWlsZGluZ3MgYW5kIHVwZ3JhZGVzIGFyZSA8Yj4lMSUgY2hlYXBlcjwvYj4uIiwgMSkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlRoaXMgb3V0cmFnZW91cyBlZ2cgaXMgZGVmaW5pdGVseSBmYWIuPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTQsIDEyXSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIldyaW5rbGVyc3Bhd24iLA0KICAgICAgbG9jKCJXcmlua2xlcnMgZXhwbG9kZSBpbnRvIDxiPiUxJSBtb3JlIGNvb2tpZXM8L2I+LiIsIDUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJDb3N0IHNjYWxlcyB3aXRoIGhvdyBtYW55IGVnZ3MgeW91IG93bi4iKSArDQogICAgICAgICI8cT5Mb29rIGF0IHRoaXMgbGl0dGxlIGd1eSEgSXQncyBnb25uYSBiZSBhIGJpZyBib3kgc29tZWRheSEgWWVzIGl0IGlzITwvcT4iLA0KICAgICAgZWdnUHJpY2UyLA0KICAgICAgWzE1LCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQ29va2llIGVnZyIsDQogICAgICBsb2MoIkNsaWNraW5nIGlzIDxiPiUxJTwvYj4gbW9yZSBwb3dlcmZ1bC4iLCAxMCkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPlRoZSBzaGVsbCBhcHBlYXJzIHRvIGJlIGNoaXBwZWQuPGJyPkkgd29uZGVyIHdoYXQncyBpbnNpZGUgdGhpcyBvbmUhPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTYsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJPbWVsZXR0ZSIsDQogICAgICBsb2MoIk90aGVyIGVnZ3MgYXBwZWFyIDxiPiUxJSBtb3JlIGZyZXF1ZW50bHk8L2I+LiIsIDEwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+RnJvbWFnZSBub3QgaW5jbHVkZWQuPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTcsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDaG9jb2xhdGUgZWdnIiwNCiAgICAgIGxvYygiQ29udGFpbnMgPGI+YSBsb3Qgb2YgY29va2llczwvYj4uIikgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkNvc3Qgc2NhbGVzIHdpdGggaG93IG1hbnkgZWdncyB5b3Ugb3duLiIpICsNCiAgICAgICAgIjxxPkxhaWQgYnkgdGhlIGVsdXNpdmUgY29jb2EgYmlyZC4gVGhlcmUncyBhIHN1cnByaXNlIGluc2lkZSE8L3E+IiwNCiAgICAgIGVnZ1ByaWNlMiwNCiAgICAgIFsxOCwgMTJdLA0KICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgY29va2llcyA9IEdhbWUuY29va2llcyAqIDAuMDU7DQogICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICJDaG9jb2xhdGUgZWdnIiwNCiAgICAgICAgICBsb2MoIlRoZSBlZ2cgYnVyc3RzIGludG8gPGI+JTE8L2I+IGNvb2tpZXMhIiwgQmVhdXRpZnkoY29va2llcykpLA0KICAgICAgICAgIEdhbWUuVXBncmFkZXNbIkNob2NvbGF0ZSBlZ2ciXS5pY29uDQogICAgICAgICk7DQogICAgICAgIEdhbWUuRWFybihjb29raWVzKTsNCiAgICAgIH0NCiAgICApOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQ2VudHVyeSBlZ2ciLA0KICAgICAgbG9jKA0KICAgICAgICAiWW91IGNvbnRpbnVhbGx5IGdhaW4gPGI+bW9yZSBDcFMgdGhlIGxvbmdlciB5b3UndmUgcGxheWVkPC9iPiBpbiB0aGUgY3VycmVudCBhc2NlbnNpb24uIg0KICAgICAgKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBob3cgbWFueSBlZ2dzIHlvdSBvd24uIikgKw0KICAgICAgICAiPHE+QWN0dWFsbHkgbm90IGNlbnR1cmllcy1vbGQuIFRoaXMgb25lIGlzbid0IGEgZGF5IG92ZXIgODYhPC9xPiIsDQogICAgICBlZ2dQcmljZTIsDQogICAgICBbMTksIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGRheSA9DQogICAgICAgIChNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gR2FtZS5zdGFydERhdGUpIC8gMTAwMCAvIDEwKSAqIDEwKSAvDQogICAgICAgIDYwIC8NCiAgICAgICAgNjAgLw0KICAgICAgICAyNDsNCiAgICAgIGRheSA9IE1hdGgubWluKGRheSwgMTAwKTsNCiAgICAgIHZhciBuID0gKDEgLSBNYXRoLnBvdygxIC0gZGF5IC8gMTAwLCAzKSkgKiAwLjE7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgbG9jKCJDdXJyZW50IGJvb3N0OiIpICsNCiAgICAgICAgIiA8Yj4rIiArDQogICAgICAgIEJlYXV0aWZ5KG4gKiAxMDAsIDEpICsNCiAgICAgICAgJyU8L2I+PC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgJyJlZ2ciJywNCiAgICAgICI8Yj4iICsgbG9jKCIrJTEgQ3BTIiwgOSkgKyAnPC9iPjxxPmhleSBpdFwncyAiZWdnIjwvcT4nLA0KICAgICAgZWdnUHJpY2UyLA0KICAgICAgWzIwLCAxMl0NCiAgICApOw0KDQogICAgR2FtZS5lYXN0ZXJFZ2dzID0gWw0KICAgICAgIkNoaWNrZW4gZWdnIiwNCiAgICAgICJEdWNrIGVnZyIsDQogICAgICAiVHVya2V5IGVnZyIsDQogICAgICAiUXVhaWwgZWdnIiwNCiAgICAgICJSb2JpbiBlZ2ciLA0KICAgICAgIk9zdHJpY2ggZWdnIiwNCiAgICAgICJDYXNzb3dhcnkgZWdnIiwNCiAgICAgICJTYWxtb24gcm9lIiwNCiAgICAgICJGcm9nc3Bhd24iLA0KICAgICAgIlNoYXJrIGVnZyIsDQogICAgICAiVHVydGxlIGVnZyIsDQogICAgICAiQW50IGxhcnZhIiwNCiAgICAgICJHb2xkZW4gZ29vc2UgZWdnIiwNCiAgICAgICJGYWJlcmdlIGVnZyIsDQogICAgICAiV3JpbmtsZXJzcGF3biIsDQogICAgICAiQ29va2llIGVnZyIsDQogICAgICAiT21lbGV0dGUiLA0KICAgICAgIkNob2NvbGF0ZSBlZ2ciLA0KICAgICAgIkNlbnR1cnkgZWdnIiwNCiAgICAgICciZWdnIicsDQogICAgXTsNCiAgICBHYW1lLmVnZ0Ryb3BzID0gWw0KICAgICAgIkNoaWNrZW4gZWdnIiwNCiAgICAgICJEdWNrIGVnZyIsDQogICAgICAiVHVya2V5IGVnZyIsDQogICAgICAiUXVhaWwgZWdnIiwNCiAgICAgICJSb2JpbiBlZ2ciLA0KICAgICAgIk9zdHJpY2ggZWdnIiwNCiAgICAgICJDYXNzb3dhcnkgZWdnIiwNCiAgICAgICJTYWxtb24gcm9lIiwNCiAgICAgICJGcm9nc3Bhd24iLA0KICAgICAgIlNoYXJrIGVnZyIsDQogICAgICAiVHVydGxlIGVnZyIsDQogICAgICAiQW50IGxhcnZhIiwNCiAgICBdOw0KICAgIEdhbWUucmFyZUVnZ0Ryb3BzID0gWw0KICAgICAgIkdvbGRlbiBnb29zZSBlZ2ciLA0KICAgICAgIkZhYmVyZ2UgZWdnIiwNCiAgICAgICJXcmlua2xlcnNwYXduIiwNCiAgICAgICJDb29raWUgZWdnIiwNCiAgICAgICJPbWVsZXR0ZSIsDQogICAgICAiQ2hvY29sYXRlIGVnZyIsDQogICAgICAiQ2VudHVyeSBlZ2ciLA0KICAgICAgJyJlZ2ciJywNCiAgICBdOw0KDQogICAgR2FtZS5HZXRIb3dNYW55RWdncyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBudW0gPSAwOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmVhc3RlckVnZ3MpIHsNCiAgICAgICAgaWYgKEdhbWUuSGFzKEdhbWUuZWFzdGVyRWdnc1tpXSkpIG51bSsrOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIG51bTsNCiAgICB9Ow0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5lZ2dEcm9wcykgeyAvL3NjYWxlIGVnZyBwcmljZXMgdG8gaG93IG1hbnkgZWdncyB5b3UgaGF2ZQ0KICAgICAgR2FtZS5VcGdyYWRlc1tHYW1lLmVnZ0Ryb3BzW2ldXS5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBNYXRoLnBvdygyLCBHYW1lLkdldEhvd01hbnlFZ2dzKCkpICogOTk5Ow0KICAgICAgfTsNCiAgICB9DQoNCiAgICBmb3IgKHZhciBpIGluIEdhbWUucmFyZUVnZ0Ryb3BzKSB7DQogICAgICBHYW1lLlVwZ3JhZGVzW0dhbWUucmFyZUVnZ0Ryb3BzW2ldXS5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBNYXRoLnBvdygzLCBHYW1lLkdldEhvd01hbnlFZ2dzKCkpICogOTk5Ow0KICAgICAgfTsNCiAgICB9DQoNCiAgICBHYW1lLkRyb3BFZ2cgPSBmdW5jdGlvbiAoZmFpbFJhdGUpIHsNCiAgICAgIGZhaWxSYXRlICo9IDEgLyBHYW1lLmRyb3BSYXRlTXVsdCgpOw0KICAgICAgaWYgKEdhbWUuc2Vhc29uICE9ICJlYXN0ZXIiKSByZXR1cm47DQogICAgICBpZiAoR2FtZS5IYXNBY2hpZXYoIkhpZGUgJiBzZWVrIGNoYW1waW9uIikpIGZhaWxSYXRlICo9IDAuNzsNCiAgICAgIGlmIChHYW1lLkhhcygiT21lbGV0dGUiKSkgZmFpbFJhdGUgKj0gMC45Ow0KICAgICAgaWYgKEdhbWUuSGFzKCJTdGFyc3Bhd24iKSkgZmFpbFJhdGUgKj0gMC45Ow0KICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgic2Vhc29ucyIpOw0KICAgICAgICBpZiAoZ29kTHZsID09IDEpIGZhaWxSYXRlICo9IDAuOTsNCiAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIGZhaWxSYXRlICo9IDAuOTU7DQogICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBmYWlsUmF0ZSAqPSAwLjk3Ow0KICAgICAgfQ0KICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPj0gZmFpbFJhdGUpIHsNCiAgICAgICAgdmFyIGRyb3AgPSAiIjsNCiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjEpIGRyb3AgPSBjaG9vc2UoR2FtZS5yYXJlRWdnRHJvcHMpOw0KICAgICAgICBlbHNlIGRyb3AgPSBjaG9vc2UoR2FtZS5lZ2dEcm9wcyk7DQogICAgICAgIGlmIChHYW1lLkhhcyhkcm9wKSB8fCBHYW1lLkhhc1VubG9ja2VkKGRyb3ApKSB7DQogICAgICAgICAgLy9yZXJvbGwgaWYgd2UgaGF2ZSBpdA0KICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4xKSBkcm9wID0gY2hvb3NlKEdhbWUucmFyZUVnZ0Ryb3BzKTsNCiAgICAgICAgICBlbHNlIGRyb3AgPSBjaG9vc2UoR2FtZS5lZ2dEcm9wcyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuSGFzKGRyb3ApIHx8IEdhbWUuSGFzVW5sb2NrZWQoZHJvcCkpIHJldHVybjsNCiAgICAgICAgR2FtZS5VbmxvY2soZHJvcCk7DQogICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgIGxvYygiWW91IGZvdW5kIGFuIGVnZyEiKSwNCiAgICAgICAgICAiPGI+IiArIGRyb3AgKyAiPC9iPiIsDQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tkcm9wXS5pY29uDQogICAgICAgICk7DQogICAgICB9DQogICAgfTsNCg0KICAgIG9yZGVyID0gMTAwMzI7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDYXJhbWVsIG1hY2Fyb25zIiwNCiAgICAgIGRlc2M6ICJUaGUgc2FsdGllc3QsIGNoZXdpZXN0IG9mIHRoZW0gYWxsLiIsDQogICAgICBpY29uOiBbMjUsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTGljb3JpY2UgbWFjYXJvbnMiLA0KICAgICAgZGVzYzogJ0Fsc28ga25vd24gYXMgImJsYWNrYXJvbnMiLicsDQogICAgICBpY29uOiBbMjUsIDRdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRhbGxlciB0ZWxsZXJzIiwNCiAgICAgICI8cT5BYmxlIHRvIHByb2Nlc3MgYSBoaWdoZXIgYW1vdW50IG9mIHRyYW5zYWN0aW9ucy4gQ2FyZWZ1bCB0aG91Z2gsIGFzIHRhbGxlciB0ZWxsZXJzIHRlbGwgdGFsbCB0YWxlcy48L3E+IiwNCiAgICAgICJCYW5rIiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTY2lzc29yLXJlc2lzdGFudCBjcmVkaXQgY2FyZHMiLA0KICAgICAgIjxxPkZvciB0aG9zZSB0cnVseSB2YWx1ZWQgY3VzdG9tZXJzLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkFjaWQtcHJvb2YgdmF1bHRzIiwNCiAgICAgICI8cT5Zb3Uga25vdyB3aGF0IHRoZXkgc2F5IDogYmV0dGVyIHNhZmUgdGhhbiBzb3JyeS48L3E+IiwNCiAgICAgICJCYW5rIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDaG9jb2xhdGUgY29pbnMiLA0KICAgICAgIjxxPlRoaXMgcmV2b2x1dGlvbmFyeSBjdXJyZW5jeSBpcyBtdWNoIGVhc2llciB0byBtZWx0IGZyb20gYW5kIGludG8gaW5nb3RzIC0gYW5kIHRhc3RlcyBtdWNoIGJldHRlciwgZm9yIGEgY2hhbmdlLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgNA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkV4cG9uZW50aWFsIGludGVyZXN0IHJhdGVzIiwNCiAgICAgICI8cT5DYW4ndCBhcmd1ZSB3aXRoIG1hdGhlbWF0aWNzISBOb3cgZm9yayBpdCBvdmVyLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgNQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZpbmFuY2lhbCB6ZW4iLA0KICAgICAgIjxxPlRoZSB1bHRpbWF0ZSBncmFpbCBvZiBlY29ub21pYyB0aG91Z2h0OyB0aGUgZmVuZyBzaHVpIG9mIGJpZyBtb25leSwgdGhlIHN0b2NrIG1hcmtldCB5b2dhIC0gdGhlIEhlaW1saWNoIG1hbmV1dmVyIG9mIGRpbWVzIGFuZCBuaWNrZWxzLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgNg0KICAgICk7DQoNCiAgICBvcmRlciA9IDU1MDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR29sZGVuIGlkb2xzIiwNCiAgICAgICI8cT5MdXJlIGV2ZW4gZ3JlZWRpZXIgYWR2ZW50dXJlcnMgdG8gcmV0cmlldmUgeW91ciBjb29raWVzLiBOb3cgdGhhdCdzIGEgcmVhbCBpZG9sIGdhbWUhPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTYWNyaWZpY2VzIiwNCiAgICAgICI8cT5XaGF0J3MgYSBsaWZlIHRvIGEgZ2lnYXRvbiBvZiBjb29raWVzPzwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRGVsaWNpb3VzIGJsZXNzaW5nIiwNCiAgICAgICI8cT5BbmQgbG8sIHRoZSBCYWtlcidzIGFsbWlnaHR5IHNwb29uIGNhbWUgZG93biBhbmQgZGlzdHJpYnV0ZWQgaG9seSBnaWZ0cyB1bnRvIHRoZSBiZWxpZXZlcnMgLSBzaGltbWVyaW5nIHN1Z2FyLCBhbmQgY2hvY29sYXRlIGRhcmsgYXMgbmlnaHQsIGFuZCBhbGwgbWFubmVyIG9mIHdoZWF0cy4gQW5kIGJveSBsZXQgbWUgdGVsbCB5b3UsIHRoYXQgcGFydHkgd2FzIG1pZ2h0eSBnbmFybHkuPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTdW4gZmVzdGl2YWwiLA0KICAgICAgIjxxPkZyZWUgdGhlIHByaW1vcmRpYWwgcG93ZXJzIG9mIHlvdXIgdGVtcGxlcyB3aXRoIHRoZXNlIGFubnVhbCBjZWxlYnJhdGlvbnMgaW52b2x2aW5nIGZpcmUtYnJlYXRoZXJzLCB0cmFkaXRpb25hbCBkYW5jaW5nLCByaXR1YWwgYmVoZWFkaW5ncyBhbmQgb3RoZXIgbWVycmltZW50cyE8L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgNA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkVubGFyZ2VkIHBhbnRoZW9uIiwNCiAgICAgICI8cT5Fbm91Z2ggc3Bpcml0dWFsIGluYWRlcXVhY3khIE1vcmUgZGl2aW5pdGllcyB0aGFuIHlvdSdsbCBldmVyIG5lZWQsIG9yIHlvdXIgbW9uZXkgYmFjayEgMTAwJSBndWFyYW50ZWVkITwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICA1DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR3JlYXQgQmFrZXIgaW4gdGhlIHNreSIsDQogICAgICAiPHE+VGhpcyBpcyBpdC4gVGhlIHVsdGltYXRlIGRlaXR5IGhhcyBmaW5hbGx5IGNhc3QgVGhlaXIgc3VibGltZWx5IGRpdmluZSBleWUgdXBvbiB5b3VyIG9wZXJhdGlvbjsgd2hldGhlciB0aGlzIGlzIGEgZ29vZCB0aGluZyBvciBwb3NzaWJseSB0aGUgZW5kIG9mIGRheXMgaXMgc29tZXRoaW5nIHlvdSBzaG91bGQgZmluZCBvdXQgdmVyeSBzb29uLjwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICA2DQogICAgKTsNCg0KICAgIG9yZGVyID0gNTc1Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQb2ludGllciBoYXRzIiwNCiAgICAgICI8cT5UZXN0cyBoYXZlIHNob3duIGluY3JlYXNlZCB0aGF1bWljIHJlY2VwdGl2aXR5IHJlbGF0aXZlIHRvIHRoZSBnZW9tZXRyaWMgcHJvcG9ydGlvbnMgb2Ygd2l6YXJkbHkgY29uaWMgaW1wbGVtZW50cy48L3E+IiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJlYXJkbGllciBiZWFyZHMiLA0KICAgICAgIjxxPkhhdmVuJ3QgeW91IGhlYXJkPyBUaGUgYmVhcmQgaXMgdGhlIHdvcmQuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbmNpZW50IGdyaW1vaXJlcyIsDQogICAgICAnPHE+Q29udGFpbiBpbnRlcmVzdGluZyBzcGVsbHMgc3VjaCBhcyAiVHVybiBXYXRlciBUbyBEcm9vbCIsICJHcm93IEV5ZWJyb3dzIE9uIEZ1cm5pdHVyZSIgYW5kICJTdW1tb24gUG9saXRpY2lhbiIuPC9xPicsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJLaXRjaGVuIGN1cnNlcyIsDQogICAgICAiPHE+RXhvdGljIG1hZ2ljIGludm9sdmVkIGluIGFsbCB0aGluZ3MgcGFzdHJ5LXJlbGF0ZWQuIEhleGNlbGxlbnQhPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDQNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTY2hvb2wgb2Ygc29yY2VyeSIsDQogICAgICAiPHE+VGhpcyBjb29raWUtZnVuZGVkIGFjYWRlbXkgb2Ygd2l0Y2hjcmFmdCBpcyBob21lIHRvIHRoZSA0IHByZXN0aWdpb3VzIGhvdXNlcyBvZiBtYWdpYyA6IHRoZSBKb2NrcywgdGhlIE5lcmRzLCB0aGUgUHJlcHMsIGFuZCB0aGUgRGVhdGhtdW5jaGVycy48L3E+IiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgNQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRhcmsgZm9ybXVsYXMiLA0KICAgICAgIjxxPkVsZHJpdGNoIGZvcmNlcyBhcmUgYXQgd29yayBiZWhpbmQgdGhlc2Ugc3BlbGxzIC0geW91IGdldCB0aGUgZmVlbGluZyB5b3UgcmVhbGx5IHNob3VsZG4ndCBiZSBtZXNzaW5nIHdpdGggdGhvc2UuIEJ1dCBJIG1lYW4sIGZyZWUgY29va2llcywgcmlnaHQ/PC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDYNCiAgICApOw0KDQogICAgb3JkZXIgPSAyNTA7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJCYW5rZXIgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSBiYW5rZXIgdG8gY2FzaCBpbiBtb3JlIGNvb2tpZXMuIiwNCiAgICAgICJCYW5rIg0KICAgICk7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJQcmllc3Rlc3MgZ3JhbmRtYXMiLA0KICAgICAgIkEgbmljZSBwcmllc3Rlc3MgdG8gcHJhaXNlIHRoZSBvbmUgdHJ1ZSBCYWtlciBpbiB0aGUgc2t5LiIsDQogICAgICAiVGVtcGxlIg0KICAgICk7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJXaXRjaCBncmFuZG1hcyIsDQogICAgICAiQSBuaWNlIHdpdGNoIHRvIGNhc3QgYSB6aXAsIGFuZCBhIHpvb3AsIGFuZCBwb29mISBDb29raWVzLiIsDQogICAgICAiV2l6YXJkIHRvd2VyIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJUaW4gb2YgYnJpdGlzaCB0ZWEgYmlzY3VpdHMiLA0KICAgICAgbG9jKCJDb250YWlucyBhbiBhc3NvcnRtZW50IG9mIGZhbmN5IGJpc2N1aXRzLiIpICsNCiAgICAgICAgIjxxPkV2ZXJ5IHRpbWUgaXMgdGVhIHRpbWUuPC9xPiIsDQogICAgICAyNSwNCiAgICAgIFsyMSwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiSGVhdmVubHkgY29va2llcyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQm94IG9mIG1hY2Fyb25zIiwNCiAgICAgIGxvYygiQ29udGFpbnMgYW4gYXNzb3J0bWVudCBvZiBtYWNhcm9ucy4iKSArDQogICAgICAgICI8cT5NdWx0aWNvbG9yZWQgZGVsaWNhY2llcyBmaWxsZWQgd2l0aCB2YXJpb3VzIGtpbmRzIG9mIGphbS48YnI+Tm90IHRvIGJlIGNvbmZ1c2VkIHdpdGggbWFjYXJvb25zLCBtYWNhcm9uaSwgbWFjYXJlbmEgb3IgYW55IG9mIHRoYXQgbm9uc2Vuc2UuPC9xPiIsDQogICAgICAyNSwNCiAgICAgIFsyMCwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiSGVhdmVubHkgY29va2llcyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIGxvYygiQ29udGFpbnMgYW4gYXNzb3J0bWVudCBvZiBwb3B1bGFyIGJpc2N1aXRzLiIpICsNCiAgICAgICAgIjxxPlRoZXkncmUgYnJhbmQgbmV3ITwvcT4iLA0KICAgICAgMjUsDQogICAgICBbMjAsIDldDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkhlYXZlbmx5IGNvb2tpZXMiXTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQdXJlIGJsYWNrIGNob2NvbGF0ZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICdEaXBwZWQgaW4gYSBsYWItbWFkZSBzdWJzdGFuY2UgZGFya2VyIHRoYW4gdGhlIGRhcmtlc3QgY29jb2EgKGR1YmJlZCAiY2hvY29hbGF0ZSIpLicsDQogICAgICBpY29uOiBbMjYsIDNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQdXJlIHdoaXRlIGNob2NvbGF0ZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJFbGFib3JhdGVkIG9uIHRoZSBuYW5vLXNjYWxlLCB0aGUgY29hdGluZyBvbiB0aGlzIGJpc2N1aXQgaXMgYWJsZSB0byByZWZyYWN0IGxpZ2h0IGV2ZW4gaW4gYSBwaXRjaC1ibGFjayBlbnZpcm9ubWVudC4iLA0KICAgICAgaWNvbjogWzI2LCA0XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTGFkeWZpbmdlcnMiLA0KICAgICAgZGVzYzogIkNsZWFuZWQgYW5kIHNhbml0aXplZCBzbyB3ZWxsIHlvdSdkIHN3ZWFyIHRoZXkncmUgYWN0dWFsIGJpc2N1aXRzLiIsDQogICAgICBpY29uOiBbMjcsIDNdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJUdWlsZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIG5ldmVyIGdvIG91dCBvZiB0aWxlLiIsDQogICAgICBpY29uOiBbMjcsIDRdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2hvY29sYXRlLXN0dWZmZWQgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIkEgcHJpbmNlbHkgc25hY2shPGJyPlRoZSBob2xlcyBhcmUgc28gdGhlIGNob2NvbGF0ZSBzdHVmZmluZyBjYW4gYnJlYXRoZS4iLA0KICAgICAgaWNvbjogWzI4LCAzXSwNCiAgICAgIHBvd2VyOiAzLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNoZWNrZXIgY29va2llcyIsDQogICAgICBkZXNjOiAiQSBzcXVhcmUgY29va2llPyBUaGlzIHNvbHZlcyBzbyBtYW55IHN0b3JhZ2UgYW5kIHBhY2thZ2luZyBwcm9ibGVtcyEgWW91J3JlIGEgZ2VuaXVzISIsDQogICAgICBpY29uOiBbMjgsIDRdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSBtZWx0IHJpZ2h0IG9mZiB5b3VyIG1vdXRoIGFuZCBpbnRvIHlvdXIgaGVhcnQuIChMZXQncyBmYWNlIGl0LCB0aGV5J3JlIHJhdGhlciBmYXR0ZW5pbmcuKSIsDQogICAgICBpY29uOiBbMjksIDNdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNyZWFtIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkl0J3MgbGlrZSB0d28gY2hvY29sYXRlIGNoaXAgY29va2llcyEgQnV0IGJyb3VnaHQgdG9nZXRoZXIgd2l0aCB0aGUgbWFnaWMgb2YgY3JlYW0hIEl0J3MgZmllbmRpc2hseSBwZXJmZWN0ISIsDQogICAgICBpY29uOiBbMjksIDRdLA0KICAgICAgcG93ZXI6IDMsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDA7DQogICAgdmFyIGRlc2MgPSBsb2MoDQogICAgICAiUGxhY2luZyBhbiB1cGdyYWRlIGluIHRoaXMgc2xvdCB3aWxsIG1ha2UgaXRzIGVmZmVjdHMgPGI+cGVybWFuZW50PC9iPiBhY3Jvc3MgYWxsIHBsYXl0aHJvdWdocy4iDQogICAgKTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJQZXJtYW5lbnQgdXBncmFkZSBzbG90IEkiLCBkZXNjLCAxMDAsIFswLCAxMF0pOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QuaWNvbkZ1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuUGVybWFuZW50U2xvdEljb24oMCk7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuYWN0aXZhdGVGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUuQXNzaWduUGVybWFuZW50U2xvdCgwKTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUkiLCBkZXNjLCAyMDAwMCwgWzEsIDEwXSk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJQZXJtYW5lbnQgdXBncmFkZSBzbG90IEkiXTsNCiAgICBHYW1lLmxhc3QuaWNvbkZ1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuUGVybWFuZW50U2xvdEljb24oMSk7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuYWN0aXZhdGVGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUuQXNzaWduUGVybWFuZW50U2xvdCgxKTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUlJIiwgZGVzYywgMzAwMDAwMCwgWzIsIDEwXSk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElJIl07DQogICAgR2FtZS5sYXN0Lmljb25GdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLlBlcm1hbmVudFNsb3RJY29uKDIpOw0KICAgIH07DQogICAgR2FtZS5sYXN0LmFjdGl2YXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLkFzc2lnblBlcm1hbmVudFNsb3QoMik7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElWIiwgZGVzYywgNDAwMDAwMDAwLCBbMywgMTBdKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUlJIl07DQogICAgR2FtZS5sYXN0Lmljb25GdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLlBlcm1hbmVudFNsb3RJY29uKDMpOw0KICAgIH07DQogICAgR2FtZS5sYXN0LmFjdGl2YXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLkFzc2lnblBlcm1hbmVudFNsb3QoMyk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJQZXJtYW5lbnQgdXBncmFkZSBzbG90IFYiLCBkZXNjLCA1MDAwMDAwMDAwMCwgWzQsIDEwXSk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElWIl07DQogICAgR2FtZS5sYXN0Lmljb25GdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLlBlcm1hbmVudFNsb3RJY29uKDQpOw0KICAgIH07DQogICAgR2FtZS5sYXN0LmFjdGl2YXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICBHYW1lLkFzc2lnblBlcm1hbmVudFNsb3QoNCk7DQogICAgfTsNCg0KICAgIHZhciBzbG90cyA9IFsNCiAgICAgICJQZXJtYW5lbnQgdXBncmFkZSBzbG90IEkiLA0KICAgICAgIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUkiLA0KICAgICAgIlBlcm1hbmVudCB1cGdyYWRlIHNsb3QgSUlJIiwNCiAgICAgICJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElWIiwNCiAgICAgICJQZXJtYW5lbnQgdXBncmFkZSBzbG90IFYiLA0KICAgIF07DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbG90cy5sZW5ndGg7IGkrKykgew0KICAgICAgR2FtZS5VcGdyYWRlc1tzbG90c1tpXV0uZGVzY0Z1bmMgPSAoZnVuY3Rpb24gKGkpIHsNCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgaWYgKEdhbWUucGVybWFuZW50VXBncmFkZXNbaV0gPT0gLTEpDQogICAgICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgICB0aGlzLmRlc2MgKw0KICAgICAgICAgICAgICAoY29udGV4dCA9PSAic3RhdHMiDQogICAgICAgICAgICAgICAgPyAiIg0KICAgICAgICAgICAgICAgIDogIjxicj48Yj4iICsgbG9jKCJDbGljayB0byBhY3RpdmF0ZS4iKSArICI8L2I+IikNCiAgICAgICAgICAgICk7DQogICAgICAgICAgdmFyIHVwZ3JhZGUgPSBHYW1lLlVwZ3JhZGVzQnlJZFtHYW1lLnBlcm1hbmVudFVwZ3JhZGVzW2ldXTsNCiAgICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgICAgICBsb2MoIkN1cnJlbnQ6IikgKw0KICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgIHRpbnlJY29uKHVwZ3JhZGUuaWNvbikgKw0KICAgICAgICAgICAgIiA8Yj4iICsNCiAgICAgICAgICAgIHVwZ3JhZGUuZG5hbWUgKw0KICAgICAgICAgICAgJzwvYj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48L2Rpdj4nICsNCiAgICAgICAgICAgIHRoaXMuZGRlc2MgKw0KICAgICAgICAgICAgKGNvbnRleHQgPT0gInN0YXRzIg0KICAgICAgICAgICAgICA/ICIiDQogICAgICAgICAgICAgIDogIjxicj48Yj4iICsgbG9jKCJDbGljayB0byBhY3RpdmF0ZS4iKSArICI8L2I+IikNCiAgICAgICAgICApOw0KICAgICAgICB9Ow0KICAgICAgfSkoaSk7DQogICAgfQ0KDQogICAgR2FtZS5QZXJtYW5lbnRTbG90SWNvbiA9IGZ1bmN0aW9uIChzbG90KSB7DQogICAgICBpZiAoR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1tzbG90XSA9PSAtMSkgcmV0dXJuIFtzbG90LCAxMF07DQogICAgICByZXR1cm4gR2FtZS5VcGdyYWRlc0J5SWRbR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1tzbG90XV0uaWNvbjsNCiAgICB9Ow0KICAgIEdhbWUuQXNzaWduUGVybWFuZW50U2xvdCA9IGZ1bmN0aW9uIChzbG90KSB7DQogICAgICBQbGF5U291bmQoInNuZC90aWNrLm1wMyIpOw0KICAgICAgR2FtZS50b29sdGlwLmhpZGUoKTsNCiAgICAgIHZhciBsaXN0ID0gW107DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIG1lLmJvdWdodCAmJg0KICAgICAgICAgIG1lLnVubG9ja2VkICYmDQogICAgICAgICAgIW1lLm5vUGVybSAmJg0KICAgICAgICAgIChtZS5wb29sID09ICIiIHx8IG1lLnBvb2wgPT0gImNvb2tpZSIpDQogICAgICAgICkgew0KICAgICAgICAgIHZhciBmYWlsID0gMDsNCiAgICAgICAgICBmb3IgKHZhciBpaSBpbiBHYW1lLnBlcm1hbmVudFVwZ3JhZGVzKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1tpaV0gPT0gbWUuaWQpIGZhaWwgPSAxOw0KICAgICAgICAgIH0gLy9jaGVjayBpZiBub3QgYWxyZWFkeSBpbiBhbm90aGVyIHBlcm1hc2xvdA0KICAgICAgICAgIGlmICghZmFpbCkgbGlzdC5wdXNoKG1lKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICB2YXIgc29ydE1hcCA9IGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICAgIGlmIChhLm9yZGVyID4gYi5vcmRlcikgcmV0dXJuIDE7DQogICAgICAgIGVsc2UgaWYgKGEub3JkZXIgPCBiLm9yZGVyKSByZXR1cm4gLTE7DQogICAgICAgIGVsc2UgcmV0dXJuIDA7DQogICAgICB9Ow0KICAgICAgbGlzdC5zb3J0KHNvcnRNYXApOw0KDQogICAgICB2YXIgdXBncmFkZXMgPSAiIjsNCiAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgew0KICAgICAgICB2YXIgbWUgPSBsaXN0W2ldOw0KICAgICAgICB1cGdyYWRlcyArPSBHYW1lLmNyYXRlKA0KICAgICAgICAgIG1lLA0KICAgICAgICAgICIiLA0KICAgICAgICAgICJQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO0dhbWUuUHV0VXBncmFkZUluUGVybWFuZW50U2xvdCgiICsNCiAgICAgICAgICAgIG1lLmlkICsNCiAgICAgICAgICAgICIsIiArDQogICAgICAgICAgICBzbG90ICsNCiAgICAgICAgICAgICIpOyIsDQogICAgICAgICAgInVwZ3JhZGVGb3JQZXJtYW5lbnQiICsgbWUuaWQNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIHZhciB1cGdyYWRlID0gR2FtZS5wZXJtYW5lbnRVcGdyYWRlc1tzbG90XTsNCiAgICAgIEdhbWUuU2VsZWN0aW5nUGVybWFuZW50VXBncmFkZSA9IHVwZ3JhZGU7DQogICAgICBHYW1lLlByb21wdCgNCiAgICAgICAgIjxpZCBQaWNrUGVybWFVcGdyYWRlPjxoMz4iICsNCiAgICAgICAgICBsb2MoIlBpY2sgYW4gdXBncmFkZSB0byBtYWtlIHBlcm1hbmVudCIpICsNCiAgICAgICAgICAiPC9oMz4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luOjRweCBhdXRvO2NsZWFyOmJvdGg7d2lkdGg6MTIwcHg7Ij48ZGl2IGNsYXNzPSJjcmF0ZSB1cGdyYWRlIGVuYWJsZWQiIHN0eWxlPSJiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKw0KICAgICAgICAgIC1zbG90ICogNDggKw0KICAgICAgICAgICJweCAiICsNCiAgICAgICAgICAtMTAgKiA0OCArDQogICAgICAgICAgJ3B4OyI+PC9kaXY+PGRpdiBpZD0idXBncmFkZVRvU2xvdE5vbmUiIGNsYXNzPSJjcmF0ZSB1cGdyYWRlIGVuYWJsZWQiIHN0eWxlPSJiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKw0KICAgICAgICAgIC0wICogNDggKw0KICAgICAgICAgICJweCAiICsNCiAgICAgICAgICAtNyAqIDQ4ICsNCiAgICAgICAgICAicHg7ZGlzcGxheToiICsNCiAgICAgICAgICAodXBncmFkZSAhPSAtMSA/ICJub25lIiA6ICJibG9jayIpICsNCiAgICAgICAgICAnOyI+PC9kaXY+PGRpdiBpZD0idXBncmFkZVRvU2xvdFdyYXAiIHN0eWxlPSJmbG9hdDpsZWZ0O2Rpc3BsYXk6JyArDQogICAgICAgICAgKHVwZ3JhZGUgPT0gLTEgPyAibm9uZSIgOiAiYmxvY2siKSArDQogICAgICAgICAgJzsiPicgKw0KICAgICAgICAgIEdhbWUuY3JhdGUoDQogICAgICAgICAgICBHYW1lLlVwZ3JhZGVzQnlJZFt1cGdyYWRlID09IC0xID8gMCA6IHVwZ3JhZGVdLA0KICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAiIiwNCiAgICAgICAgICAgICJ1cGdyYWRlVG9TbG90Ig0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8L2Rpdj48L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0iYmxvY2sgY3JhdGVCb3giIHN0eWxlPSJvdmVyZmxvdy15OnNjcm9sbDtmbG9hdDpsZWZ0O2NsZWFyOmxlZnQ7d2lkdGg6MzE3cHg7cGFkZGluZzowcHg7aGVpZ2h0OjI1MHB4OyI+JyArDQogICAgICAgICAgdXBncmFkZXMgKw0KICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0iYmxvY2siIHN0eWxlPSJmbG9hdDpyaWdodDt3aWR0aDoxNTJweDtjbGVhcjpyaWdodDtoZWlnaHQ6MjM0cHg7Ij4nICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAnSGVyZSBhcmUgYWxsIHRoZSB1cGdyYWRlcyB5b3VcJ3ZlIHB1cmNoYXNlZCBsYXN0IHBsYXl0aHJvdWdoLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PlBpY2sgb25lIHRvIHBlcm1hbmVudGx5IGdhaW4gaXRzIGVmZmVjdHMhPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+WW91IGNhbiByZWFzc2lnbiB0aGlzIHNsb3QgYW55dGltZSB5b3UgYXNjZW5kLicNCiAgICAgICAgICApICsNCiAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgWw0KICAgICAgICAgIFsNCiAgICAgICAgICAgIGxvYygiQ29uZmlybSIpLA0KICAgICAgICAgICAgIkdhbWUucGVybWFuZW50VXBncmFkZXNbIiArDQogICAgICAgICAgICAgIHNsb3QgKw0KICAgICAgICAgICAgICAiXT1HYW1lLlNlbGVjdGluZ1Blcm1hbmVudFVwZ3JhZGU7R2FtZS5CdWlsZEFzY2VuZFRyZWUoKTtHYW1lLkNsb3NlUHJvbXB0KCk7IiwNCiAgICAgICAgICBdLA0KICAgICAgICAgIGxvYygiQ2FuY2VsIiksDQogICAgICAgIF0sDQogICAgICAgIDAsDQogICAgICAgICJ3aWRlUHJvbXB0Ig0KICAgICAgKTsNCiAgICB9Ow0KICAgIEdhbWUuU2VsZWN0aW5nUGVybWFuZW50VXBncmFkZSA9IC0xOw0KICAgIEdhbWUuUHV0VXBncmFkZUluUGVybWFuZW50U2xvdCA9IGZ1bmN0aW9uICh1cGdyYWRlLCBzbG90KSB7DQogICAgICBHYW1lLlNlbGVjdGluZ1Blcm1hbmVudFVwZ3JhZGUgPSB1cGdyYWRlOw0KICAgICAgbCgidXBncmFkZVRvU2xvdFdyYXAiKS5pbm5lckhUTUwgPSAiIjsNCiAgICAgIGwoInVwZ3JhZGVUb1Nsb3RXcmFwIikuc3R5bGUuZGlzcGxheSA9IHVwZ3JhZGUgPT0gLTEgPyAibm9uZSIgOiAiYmxvY2siOw0KICAgICAgbCgidXBncmFkZVRvU2xvdE5vbmUiKS5zdHlsZS5kaXNwbGF5ID0gdXBncmFkZSAhPSAtMSA/ICJub25lIiA6ICJibG9jayI7DQogICAgICBsKCJ1cGdyYWRlVG9TbG90V3JhcCIpLmlubmVySFRNTCA9IEdhbWUuY3JhdGUoDQogICAgICAgIEdhbWUuVXBncmFkZXNCeUlkW3VwZ3JhZGUgPT0gLTEgPyAwIDogdXBncmFkZV0sDQogICAgICAgICIiLA0KICAgICAgICAiIiwNCiAgICAgICAgInVwZ3JhZGVUb1Nsb3QiDQogICAgICApOw0KICAgIH07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN0YXJzcGF3biIsDQogICAgICBsb2MoIkVnZ3MgZHJvcCA8Yj4lMSU8L2I+IG1vcmUgb2Z0ZW4uIiwgMTApICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJHb2xkZW4gY29va2llcyBhcHBlYXIgPGI+JTElPC9iPiBtb3JlIG9mdGVuIGR1cmluZyAlMi4iLCBbDQogICAgICAgICAgMiwNCiAgICAgICAgICBsb2MoIkVhc3RlciIpLA0KICAgICAgICBdKSwNCiAgICAgIDExMTExMSwNCiAgICAgIFswLCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU2Vhc29uIHN3aXRjaGVyIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdGFyc25vdyIsDQogICAgICBsb2MoIkNocmlzdG1hcyBjb29raWVzIGRyb3AgPGI+JTElPC9iPiBtb3JlIG9mdGVuLiIsIDUpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJSZWluZGVlciBhcHBlYXIgPGI+JTElPC9iPiBtb3JlIG9mdGVuLiIsIDUpLA0KICAgICAgMTExMTExLA0KICAgICAgWzEyLCA5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTZWFzb24gc3dpdGNoZXIiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN0YXJ0ZXJyb3IiLA0KICAgICAgbG9jKCJTcG9va3kgY29va2llcyBkcm9wIDxiPiUxJTwvYj4gbW9yZSBvZnRlbi4iLCAxMCkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIkdvbGRlbiBjb29raWVzIGFwcGVhciA8Yj4lMSU8L2I+IG1vcmUgb2Z0ZW4gZHVyaW5nICUyLiIsIFsNCiAgICAgICAgICAyLA0KICAgICAgICAgIGxvYygiSGFsbG93ZWVuIiksDQogICAgICAgIF0pLA0KICAgICAgMTExMTExLA0KICAgICAgWzEzLCA4XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTZWFzb24gc3dpdGNoZXIiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN0YXJsb3ZlIiwNCiAgICAgIGxvYygiSGVhcnQgY29va2llcyBhcmUgPGI+JTElPC9iPiBtb3JlIHBvd2VyZnVsLiIsIDUwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPiUxJTwvYj4gbW9yZSBvZnRlbiBkdXJpbmcgJTIuIiwgWw0KICAgICAgICAgIDIsDQogICAgICAgICAgbG9jKCJWYWxlbnRpbmUncyBkYXkiKSwNCiAgICAgICAgXSksDQogICAgICAxMTExMTEsDQogICAgICBbMjAsIDNdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNlYXNvbiBzd2l0Y2hlciJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU3RhcnRyYWRlIiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPiUxJTwvYj4gbW9yZSBvZnRlbiBkdXJpbmcgJTIuIiwgWw0KICAgICAgICA1LA0KICAgICAgICBsb2MoIkJ1c2luZXNzIGRheSIpLA0KICAgICAgXSksDQogICAgICAxMTExMTEsDQogICAgICBbMTcsIDZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNlYXNvbiBzd2l0Y2hlciJdOw0KDQogICAgdmFyIGFuZ2VsUHJpY2VGYWN0b3IgPSA3Ow0KICAgIHZhciBkZXNjID0gZnVuY3Rpb24gKHBlcmNlbnQsIHRvdGFsKSB7DQogICAgICByZXR1cm4gbG9jKA0KICAgICAgICAiWW91IGdhaW4gYW5vdGhlciA8Yj4rJTElPC9iPiBvZiB5b3VyIHJlZ3VsYXIgQ3BTIHdoaWxlIHRoZSBnYW1lIGlzIGNsb3NlZCwgZm9yIGEgdG90YWwgb2YgPGI+JTIlPC9iPi4iLA0KICAgICAgICBbcGVyY2VudCwgdG90YWxdDQogICAgICApOw0KICAgIH07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBbmdlbHMiLA0KICAgICAgZGVzYygxMCwgMTUpICsNCiAgICAgICAgIjxxPkxvd2VzdC1yYW5raW5nIGF0IHRoZSBmaXJzdCBzcGhlcmUgb2YgcGFzdHJ5IGhlYXZlbiwgYW5nZWxzIGFyZSB0YXNrZWQgd2l0aCBkZWxpdmVyaW5nIG5ldyByZWNpcGVzIHRvIHRoZSBtb3J0YWxzIHRoZXkgZGVlbSB3b3J0aHkuPC9xPiIsDQogICAgICBNYXRoLnBvdyhhbmdlbFByaWNlRmFjdG9yLCAxKSwNCiAgICAgIFswLCAxMV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBcmNoYW5nZWxzIiwNCiAgICAgIGRlc2MoMTAsIDI1KSArDQogICAgICAgICI8cT5NZW1iZXJzIG9mIHRoZSBmaXJzdCBzcGhlcmUgb2YgcGFzdHJ5IGhlYXZlbiwgYXJjaGFuZ2VscyBhcmUgcmVzcG9uc2libGUgZm9yIHRoZSBzbW9vdGggZnVuY3Rpb25pbmcgb2YgdGhlIHdvcmxkJ3MgbGFyZ2VzdCBiYWtlcmllcy48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDIpLA0KICAgICAgWzEsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJBbmdlbHMiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlZpcnR1ZXMiLA0KICAgICAgZGVzYygxMCwgMzUpICsNCiAgICAgICAgIjxxPkZvdW5kIGF0IHRoZSBzZWNvbmQgc3BoZXJlIG9mIHBhc3RyeSBoZWF2ZW4sIHZpcnR1ZXMgbWFrZSB1c2Ugb2YgdGhlaXIgaGVhdmVubHkgc3RyZW5ndGggdG8gcHVzaCBhbmQgZHJhZyB0aGUgc3RhcnMgb2YgdGhlIGNvc21vcy48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDMpLA0KICAgICAgWzIsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJBcmNoYW5nZWxzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEb21pbmlvbnMiLA0KICAgICAgZGVzYygxMCwgNDUpICsNCiAgICAgICAgIjxxPlJ1bGluZyBvdmVyIHRoZSBzZWNvbmQgc3BoZXJlIG9mIHBhc3RyeSBoZWF2ZW4sIGRvbWluaW9ucyBob2xkIGEgbWFuYWdlcmlhbCBwb3NpdGlvbiBhbmQgYXJlIGluIGNoYXJnZSBvZiBhY2NvdW50aW5nIGFuZCByZWd1bGF0aW5nIHNjaGVkdWxlcy48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDQpLA0KICAgICAgWzMsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJWaXJ0dWVzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDaGVydWJpbSIsDQogICAgICBkZXNjKDEwLCA1NSkgKw0KICAgICAgICAiPHE+U2llZ2luZyBhdCB0aGUgZmlyc3Qgc3BoZXJlIG9mIHBhc3RyeSBoZWF2ZW4sIHRoZSBmb3VyLWZhY2VkIGNoZXJ1YmltIHNlcnZlIGFzIGhlYXZlbmx5IGJvdW5jZXJzIGFuZCBib2R5Z3VhcmRzLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgNSksDQogICAgICBbNCwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkRvbWluaW9ucyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU2VyYXBoaW0iLA0KICAgICAgZGVzYygxMCwgNjUpICsNCiAgICAgICAgIjxxPkxlYWRpbmcgdGhlIGZpcnN0IHNwaGVyZSBvZiBwYXN0cnkgaGVhdmVuLCBzZXJhcGhpbSBwb3NzZXNzIHVsdGltYXRlIGtub3dsZWRnZSBvZiBldmVyeXRoaW5nIHBlcnRhaW5pbmcgdG8gYmFraW5nLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgNiksDQogICAgICBbNSwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkNoZXJ1YmltIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJHb2QiLA0KICAgICAgZGVzYygxMCwgNzUpICsgIjxxPkxpa2UgU2FudGEsIGJ1dCBsZXNzIGZ1bi48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDcpLA0KICAgICAgWzYsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTZXJhcGhpbSJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJUd2luIEdhdGVzIG9mIFRyYW5zY2VuZGVuY2UiLA0KICAgICAgbG9jKA0KICAgICAgICAiWW91IG5vdyA8Yj5rZWVwIG1ha2luZyBjb29raWVzIHdoaWxlIHRoZSBnYW1lIGlzIGNsb3NlZDwvYj4sIGF0IHRoZSByYXRlIG9mIDxiPiUxJTwvYj4gb2YgeW91ciByZWd1bGFyIENwUyBhbmQgdXAgdG8gPGI+MSBob3VyPC9iPiBhZnRlciB0aGUgZ2FtZSBpcyBjbG9zZWQuPGJyPihCZXlvbmQgMSBob3VyLCB0aGlzIGlzIHJlZHVjZWQgYnkgYSBmdXJ0aGVyICUyJSAtIHlvdXIgcmF0ZSBnb2VzIGRvd24gdG8gPGI+JTMlPC9iPiBvZiB5b3VyIENwUy4pIiwNCiAgICAgICAgWzUsIDkwLCAwLjVdDQogICAgICApICsNCiAgICAgICAgIjxxPlRoaXMgaXMgb25lIG9jY2FzaW9uIHlvdSdyZSBhbHdheXMgdW5kZXJkcmVzc2VkIGZvci4gRG9uJ3Qgd29ycnksIGp1c3QgcnVzaCBpbiBwYXN0IHRoZSBib3VuY2VyIGFuZCBwcmV0ZW5kIHlvdSBrbm93IHBlb3BsZS48L3E+IiwNCiAgICAgIDEsDQogICAgICBbMTUsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIZWF2ZW5seSBsdWNrIiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZXMgYXBwZWFyIDxiPiUxJTwvYj4gbW9yZSBvZnRlbi4iLCA1KSArDQogICAgICAgICI8cT5Tb21lb25lIHVwIHRoZXJlIGxpa2VzIHlvdS48L3E+IiwNCiAgICAgIDc3LA0KICAgICAgWzIyLCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiTGFzdGluZyBmb3J0dW5lIiwNCiAgICAgIGxvYygiR29sZGVuIGNvb2tpZSBlZmZlY3RzIGxhc3QgPGI+JTElPC9iPiBsb25nZXIuIiwgMTApICsNCiAgICAgICAgIjxxPlRoaXMgaXNuJ3QgeW91ciBhdmVyYWdlIGV2ZXJ5ZGF5IGx1Y2suIFRoaXMgaXMuLi4gYWR2YW5jZWQgbHVjay48L3E+IiwNCiAgICAgIDc3NywNCiAgICAgIFsyMywgNl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiSGVhdmVubHkgbHVjayJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRGVjaXNpdmUgZmF0ZSIsDQogICAgICBsb2MoIkdvbGRlbiBjb29raWVzIHN0YXkgPGI+JTElPC9iPiBsb25nZXIuIiwgNSkgKw0KICAgICAgICAiPHE+TGlmZSBqdXN0IGdvdCBhIGJpdCBtb3JlIGludGVuc2UuPC9xPiIsDQogICAgICA3Nzc3LA0KICAgICAgWzEwLCAxNF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiTGFzdGluZyBmb3J0dW5lIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRpdmluZSBkaXNjb3VudCIsDQogICAgICBsb2MoIkFsbCBidWlsZGluZ3MgYXJlIDxiPiUxJSBjaGVhcGVyPC9iPi4iLCAxKSArDQogICAgICAgICI8cT5Tb21lb25lIHNwZWNpYWwgZGVzZXJ2ZXMgYSBzcGVjaWFsIHByaWNlLjwvcT4iLA0KICAgICAgOTk5OTksDQogICAgICBbMjEsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkRlY2lzaXZlIGZhdGUiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRpdmluZSBzYWxlcyIsDQogICAgICBsb2MoIkFsbCB1cGdyYWRlcyBhcmUgPGI+JTElIGNoZWFwZXI8L2I+LiIsIDEpICsNCiAgICAgICAgIjxxPkV2ZXJ5dGhpbmcgbXVzdCBnbyE8L3E+IiwNCiAgICAgIDk5OTk5LA0KICAgICAgWzE4LCA3XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJEZWNpc2l2ZSBmYXRlIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEaXZpbmUgYmFrZXJpZXMiLA0KICAgICAgbG9jKCJDb29raWUgdXBncmFkZXMgYXJlIDxiPiUxIHRpbWVzIGNoZWFwZXI8L2I+LiIsIDUpICsNCiAgICAgICAgIjxxPlRoZXkgc3VyZSBrbm93IHdoYXQgdGhleSdyZSBkb2luZy48L3E+IiwNCiAgICAgIDM5OTk5OSwNCiAgICAgIFsxNywgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiRGl2aW5lIHNhbGVzIiwgIkRpdmluZSBkaXNjb3VudCJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdGFydGVyIGtpdCIsDQogICAgICBsb2MoIllvdSBzdGFydCB3aXRoIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIDEwKSkgKw0KICAgICAgICAiPHE+VGhpcyBjYW4gY29tZSBpbiBoYW5keS48L3E+IiwNCiAgICAgIDUwLA0KICAgICAgWzAsIDE0XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWw0KICAgICAgIlRpbiBvZiBicml0aXNoIHRlYSBiaXNjdWl0cyIsDQogICAgICAiQm94IG9mIG1hY2Fyb25zIiwNCiAgICAgICJCb3ggb2YgYnJhbmQgYmlzY3VpdHMiLA0KICAgICAgIlRpbiBvZiBidXR0ZXIgY29va2llcyIsDQogICAgXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN0YXJ0ZXIga2l0Y2hlbiIsDQogICAgICBsb2MoIllvdSBzdGFydCB3aXRoIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGdyYW5kbWEiLCA1KSkgKw0KICAgICAgICAiPHE+V2hlcmUgZGlkIHRoZXNlIGNvbWUgZnJvbT88L3E+IiwNCiAgICAgIDUwMDAsDQogICAgICBbMSwgMTRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlN0YXJ0ZXIga2l0Il07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIYWxvIGdsb3ZlcyIsDQogICAgICBsb2MoIkNsaWNraW5nIGlzIDxiPiUxJTwvYj4gbW9yZSBwb3dlcmZ1bC4iLCAxMCkgKw0KICAgICAgICAiPHE+U21pdGUgdGhhdCBjb29raWUuPC9xPiIsDQogICAgICA1NTU1NSwNCiAgICAgIFsyMiwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU3RhcnRlciBraXQiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGFuZ2VscyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPkFsbCBjYXRzIGdvIHRvIGhlYXZlbi48L3E+IiwNCiAgICAgIDkwMDAsDQogICAgICBbMjMsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkRvbWluaW9ucyJdOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJVbmhvbHkgYmFpdCIsDQogICAgICBsb2MoIldyaW5rbGVycyBhcHBlYXIgPGI+JTEgdGltZXM8L2I+IGFzIGZhc3QuIiwgNSkgKw0KICAgICAgICAiPHE+Tm8gd3JpbmtsZXIgY2FuIHJlc2lzdCB0aGUgc2NlbnQgb2Ygd29ybSBiaXNjdWl0cy48L3E+IiwNCiAgICAgIDQ0NDQ0LA0KICAgICAgWzE1LCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU3RhcnRlciBraXRjaGVuIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTYWNyaWxlZ2lvdXMgY29ycnVwdGlvbiIsDQogICAgICBsb2MoIldyaW5rbGVycyBleHBsb2RlIGludG8gPGI+JTElIG1vcmUgY29va2llczwvYj4uIiwgNSkgKw0KICAgICAgICAiPHE+VW5pcXVlIGluIHRoZSBhbmltYWwga2luZ2RvbSwgdGhlIHdyaW5rbGVyIGRpZ2VzdGl2ZSB0cmFjdCBpcyBhYmxlIHRvIHdpdGhzdGFuZCBhbiBpbmNyZWRpYmxlIGRlZ3JlZSBvZiBkaWxhdGlvbiAtIHByb3ZpZGVkIHlvdSBwcm9kIHRoZW0gYXBwcm9wcmlhdGVseS48L3E+IiwNCiAgICAgIDQ0NDQ0NCwNCiAgICAgIFsxOSwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiVW5ob2x5IGJhaXQiXTsNCg0KICAgIG9yZGVyID0gMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJYdHJlbWUgd2Fsa2VycyIsDQogICAgICAnPHE+Q29tcGxldGUgd2l0aCBmbGFtZSBkZWNhbHMgYW5kIGEgbGl0dGxlIGhvcm4gdGhhdCBnb2VzICJ0b290Ii48L3E+JywNCiAgICAgICJHcmFuZG1hIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGdWRnZSBmdW5ndXMiLA0KICAgICAgIjxxPkEgc3VnYXJ5IHBhcmFzaXRlIHdob3NlIHRlbmRyaWxzIGhlbHAgY29va2llIGdyb3d0aC48YnI+UGxlYXNlIGRvIG5vdCBicmVhdGhlIGluIHRoZSBzcG9yZXMuIEluIGNhc2Ugb2Ygc3BvcmUgaW5nZXN0aW9uLCBzZWVrIG1lZGljYWwgaGVscCB3aXRoaW4gdGhlIG5leHQgMzYgc2Vjb25kcy48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gNDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQbGFuZXRzcGxpdHRlcnMiLA0KICAgICAgIjxxPlRoZXNlIG5ldyBzdGF0ZS1vZi10aGUtYXJ0IGV4Y2F2YXRvcnMgaGF2ZSBiZWVuIHRlc3RlZCBvbiBNZXJ1bGEsIEdsb2JvcnQgYW5kIEZsd2FuemEgVkksIGFtb25nIG90aGVyIGRpc3RhbnQgcGxhbmV0cyB3aGljaCBoYXZlIGJlZW4gY3VyaW91c2x5IHF1aWV0IGxhdGVseS48L3E+IiwNCiAgICAgICJNaW5lIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDeWJvcmcgd29ya2ZvcmNlIiwNCiAgICAgICI8cT5TZW1pLXN5bnRoZXRpYyBvcmdhbmlzbXMgZG9uJ3Qgc2xhY2sgb2ZmLCBkb24ndCB1bmlvbml6ZSwgYW5kIGhhdmUgMjAlIHNob3J0ZXIgbHVuY2ggYnJlYWtzLCBtYWtpbmcgdGhlbSBpZGVhbCBsYWJvciBmb2RkZXIuPC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDUyNTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2F5IG9mIHRoZSB3YWxsZXQiLA0KICAgICAgIjxxPlRoaXMgbmV3IG1vbmV0YXJ5IHNjaG9vbCBvZiB0aG91Z2h0IGlzIGFsbCB0aGUgcmFnZSBvbiB0aGUgYmFua2luZyBzY2VuZTsgZm9sbG93IGl0cyBwcmVjZXB0cyBhbmQgeW91IG1heSBqdXN0IHByb2ZpdCBmcm9tIGl0LjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgNw0KICAgICk7DQogICAgb3JkZXIgPSA1NTA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNyZWF0aW9uIG15dGgiLA0KICAgICAgIjxxPlN0b3JpZXMgaGF2ZSBiZWVuIGNpcmN1bGF0aW5nIGFib3V0IHRoZSBvcmlnaW5zIG9mIHRoZSB2ZXJ5IGZpcnN0IGNvb2tpZSB0aGF0IHdhcyBldmVyIGJha2VkOyB0YWxlcyBvZiBob3cgaXQgYWxsIGJlZ2FuLCBpbiB0aGUgRG91Z2ggYmV5b25kIHRpbWUgYW5kIHRoZSBPdmVucyBvZiBkZXN0aW55LjwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ29va2llbWFuY3kiLA0KICAgICAgIjxxPlRoZXJlIGl0IGlzOyB0aGUgcGVyZmVjdGVkIHNjaG9vbCBvZiBiYWtpbmcgbWFnaWMuIEZyb20gc3VtbW9uaW5nIGNoaXBzIHRvIGhleGluZyBudXRzLCB0aGVyZSBpcyBub3QgYSBzaW5nbGUgcGFydCBvZiBjb29raWUtbWFraW5nIHRoYXQgaGFzbid0IGJlZW4gaW1wcm92ZWQgdGVuZm9sZCBieSBtYWdpYyB0cmlja3MuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gNjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJEeXNvbiBzcGhlcmUiLA0KICAgICAgIjxxPllvdSd2ZSBmb3VuZCBhIHdheSB0byBhcHBseSB5b3VyIGtub3dsZWRnZSBvZiBjb3NtaWMgdGVjaG5vbG9neSB0byBzbGlnaHRseSBtb3JlIGxvY2FsIGVuZGVhdm9yczsgdGhpcyBnaWdhbnRpYyBzcGhlcmUgb2YgbWV0YS1tYXRlcmlhbHMsIHdyYXBwaW5nIHRoZSBzb2xhciBzeXN0ZW0sIGlzIHN1cmUgdG8ga2ljayB5b3VyIGJha2luZyBhYmlsaXRpZXMgdXAgYSBub3RjaC48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDcwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlb3J5IG9mIGF0b21pYyBmbHVpZGl0eSIsDQogICAgICAiPHE+UHVzaGluZyBhbGNoZW15IHRvIGl0cyBtb3N0IGV4dHJlbWUgbGltaXRzLCB5b3UgZmluZCB0aGF0IGV2ZXJ5dGhpbmcgaXMgdHJhbnNtdXRhYmxlIGludG8gYW55dGhpbmcgZWxzZSAtIGxlYWQgdG8gZ29sZCwgbWVyY3VyeSB0byB3YXRlcjsgbW9yZSBpbXBvcnRhbnRseSwgeW91IHJlYWxpemUgdGhhdCBhbnl0aGluZyBjYW4gLWFuZCBzaG91bGQtIGJlIGNvbnZlcnRlZCB0byBjb29raWVzLjwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFbmQgb2YgdGltZXMgYmFjay11cCBwbGFuIiwNCiAgICAgICI8cT5KdXN0IGluIGNhc2UsIGFscmlnaHQ/PC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gOTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJHcmVhdCBsb29wIGh5cG90aGVzaXMiLA0KICAgICAgIjxxPldoYXQgaWYgb3VyIHVuaXZlcnNlIGlzIGp1c3Qgb25lIGluc3RhbmNlIG9mIGFuIGluZmluaXRlIGN5Y2xlPyBXaGF0IGlmLCBiZWZvcmUgYW5kIGFmdGVyIGl0LCBzdHJldGNoZWQgaW5maW5pdGUgYW1vdW50cyBvZiB0aGUgc2FtZSB1bml2ZXJzZSwgdGhlbXNlbHZlcyBjb250YWluaW5nIGluZmluaXRlIGFtb3VudHMgb2YgY29va2llcz88L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgNw0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGUgUHVsc2UiLA0KICAgICAgIjxxPllvdSd2ZSB0YXBwZWQgaW50byB0aGUgdmVyeSBwdWxzZSBvZiB0aGUgY29zbW9zLCBhIHRpbWVsZXNzIHJoeXRobSBhbG9uZyB3aGljaCBldmVyeSBtYXRlcmlhbCBhbmQgYW50aW1hdGVyaWFsIHRoaW5nIGJlYXRzIGluIHVuaXNvbi4gVGhpcywgc29tZWhvdywgbWVhbnMgbW9yZSBjb29raWVzLjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDcNCiAgICApOw0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTHV4IHNhbmN0b3J1bSIsDQogICAgICAiPHE+WW91ciBwcmlzbSBhdHRlbmRhbnRzIGhhdmUgYmVjb21lIGluY3JlYXNpbmdseSBtZXNtZXJpemVkIHdpdGggc29tZXRoaW5nIGluIHRoZSBsaWdodCAtIG9yIG1heWJlIHNvbWV0aGluZyBiZXlvbmQgaXQ7IGJleW9uZCB1cyBhbGwsIHBlcmhhcHM/PC9xPiIsDQogICAgICAiUHJpc20iLA0KICAgICAgNw0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIFVuYnJpZGxpbmciLA0KICAgICAgIjxxPkl0IG1pZ2h0IGJlIGEgY2xhc3NpYyB0YWxlIG9mIGJhZCBwYXJlbnRpbmcsIGJ1dCBsZXQncyBzZWUgd2hlcmUgZ3JhbmRtYSBpcyBnb2luZyB3aXRoIHRoaXMuPC9xPiIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDMwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2hlYXQgdHJpZmZpZHMiLA0KICAgICAgIjxxPlRha2luZyBjYXJlIG9mIGNyb3BzIGlzIHNvIG11Y2ggZWFzaWVyIHdoZW4geW91ciBwbGFudHMgY2FuIGp1c3Qgd2FsayBhYm91dCBhbmQgaGVscCBhcm91bmQgdGhlIGZhcm0uPGJyPkRvIG5vdCBwZXQuIERvIG5vdCBmZWVkLiBEbyBub3QgYXR0ZW1wdCB0byBjb252ZXJzZSB3aXRoLjwvcT4iLA0KICAgICAgIkZhcm0iLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNhbm9sYSBvaWwgd2VsbHMiLA0KICAgICAgIjxxPkEgcHJldmlvdXNseSB1bnRhcHBlZCByZXNvdXJjZSwgY2Fub2xhIG9pbCBwZXJtZWF0ZXMgdGhlIHVuZGVyZ3JvdW5kIG9saWZlcnMgd2hpY2ggZ3JhbnQgaXQgaXRzIHBhcnRpY3VsYXIgdGFzdGUgYW5kIGx1Y3JhdGl2ZSBwcm9wZXJ0aWVzLjwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSA1MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIjc4LWhvdXIgZGF5cyIsDQogICAgICAiPHE+V2h5IGRpZG4ndCB3ZSB0aGluayBvZiB0aGlzIGVhcmxpZXI/PC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDUyNTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIHN0dWZmIHJhdGlvbmFsZSIsDQogICAgICAiPHE+SWYgbm90IG5vdywgd2hlbj8gSWYgbm90IGl0LCB3aGF0PyBJZiBub3QgdGhpbmdzLi4uIHN0dWZmPzwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSA1NTA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRoZW9jcmFjeSIsDQogICAgICAiPHE+WW91J3ZlIHR1cm5lZCB5b3VyIGNvb2tpZSBlbXBpcmUgaW50byBhIHBlcmZlY3QgdGhlb2NyYWN5LCBnYXRoZXJpbmcgdGhlIGFkb3JhdGlvbiBvZiB6aWxsaW9ucyBvZiBmb2xsb3dlcnMgZnJvbSBldmVyeSBjb3JuZXIgb2YgdGhlIHVuaXZlcnNlLjxicj5Eb24ndCBsZXQgaXQgZ28gdG8geW91ciBoZWFkLjwvcT4iLA0KICAgICAgIlRlbXBsZSIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUmFiYml0IHRyaWNrIiwNCiAgICAgICI8cT5Vc2luZyBub3RoaW5nIG1vcmUgdGhhbiBhIGZhbmN5IHRvcCBoYXQsIHlvdXIgd2l6YXJkcyBoYXZlIGZvdW5kIGEgd2F5IHRvIHNpbXVsdGFuZW91c2x5IGN1cmIgcmFiYml0IHBvcHVsYXRpb24gYW5kIHByb2R1Y2UgaGVhcHMgb2YgZXh0cmEgY29va2llcyBmb3IgYmFzaWNhbGx5IGZyZWUhPGJyPlJlc3VsdGluZyBjb29raWVzIG1heSBvciBtYXkgbm90IGJlIGZpdCBmb3IgdmVnYW5zLjwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIGZpbmFsIGZyb250aWVyIiwNCiAgICAgICI8cT5JdCdzIGJlZW4gYSBsb25nIHJvYWQsIGdldHRpbmcgZnJvbSB0aGVyZSB0byBoZXJlLiBJdCdzIGFsbCB3b3J0aCBpdCB0aG91Z2ggLSB0aGUgc2lnaHRzIGFyZSBsb3ZlbHkgYW5kIHRoZSBvaWwgcHJpY2VzIHNsaWdodGx5IG1vcmUgcmVhc29uYWJsZS48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICA4DQogICAgKTsNCiAgICBvcmRlciA9IDcwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQmVpZ2UgZ29vIiwNCiAgICAgICI8cT5XZWxsIG5vdyB5b3UndmUgZG9uZSBpdC4gR29vZCBqb2IuIFZlcnkgbmljZS4gVGhhdCdzIDMgZ2FsYXhpZXMgeW91J3ZlIGp1c3QgY29udmVydGVkIGludG8gY29va2llcy4gR29vZCB0aGluZyB5b3UgY2FuIGhvcCBmcm9tIHVuaXZlcnNlIHRvIHVuaXZlcnNlLjwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDgNCiAgICApOw0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNYWRkZW5pbmcgY2hhbnRzIiwNCiAgICAgICI8cT5BIHBvcHVsYXIgdmVyc2UgZ29lcyBsaWtlIHNvIDogXCJqYXUnaG4gbWFkZGVuIGphdSdobiBtYWRkZW4gYWVpb3VhZWlvdWFlaW91IGJyYnJicmJyYnJicmJyXCI8L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSA5MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNvb2tpZXRvcGlhbiBtb21lbnRzIG9mIG1heWJlIiwNCiAgICAgICI8cT5SZW1pbmlzY2luZyBob3cgdGhpbmdzIGNvdWxkIGhhdmUgYmVlbiwgc2hvdWxkIGhhdmUgYmVlbiwgd2lsbCBoYXZlIGJlZW4uPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDgNCiAgICApOw0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU29tZSBvdGhlciBzdXBlci10aW55IGZ1bmRhbWVudGFsIHBhcnRpY2xlPyBQcm9iYWJseT8iLA0KICAgICAgIjxxPldoZW4gZXZlbiB0aGUgdW5pdmVyc2UgaXMgcnVubmluZyBvdXQgb2YgaWRlYXMsIHRoYXQncyB3aGVuIHlvdSBrbm93IHlvdSdyZSBuZWFyaW5nIHRoZSBlbmQuPC9xPiIsDQogICAgICAiQW50aW1hdHRlciBjb25kZW5zZXIiLA0KICAgICAgOA0KICAgICk7DQogICAgb3JkZXIgPSAxMTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSZXZlcnNlIHNoYWRvd3MiLA0KICAgICAgIjxxPk9oIG1hbiwgdGhpcyBpcyByZWFsbHkgbWVzc2luZyB3aXRoIHlvdXIgZXllcy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICA4DQogICAgKTsNCg0KICAgIG9yZGVyID0gMjAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gYWNjb3VudGFudHMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5idXNpbmVzcyBnb2luZyBncmVhdCwgc2lyPC9xPiIsDQogICAgICA5MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBHYW1lLkdldEljb24oIktpdHRlbiIsIDYpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCA2LCAxOCk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gc3BlY2lhbGlzdHMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5vcHRpbWVvd3ppbmcgeW91ciB3b3JrZmxvdyBsaWtlIHdob2FoLCBzaXI8L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgNykNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDcsIDE4KTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIktpdHRlbiBleHBlcnRzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKyAiPHE+MTAgeWVhcnMgZXhwdXJycnRpc2UgaW4gdGhlIGNvb2tpZSBidXNpbmVzcywgc2lyPC9xPiIsDQogICAgICA5MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBHYW1lLkdldEljb24oIktpdHRlbiIsIDgpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCA4LCAxOCk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkhvdyB0byBiYWtlIHlvdXIgZHJhZ29uIiwNCiAgICAgIGxvYygNCiAgICAgICAgIkFsbG93cyB5b3UgdG8gcHVyY2hhc2UgYSA8Yj5jcnVtYmx5IGVnZzwvYj4gb25jZSB5b3UgaGF2ZSBlYXJuZWQgMSBtaWxsaW9uIGNvb2tpZXMuIg0KICAgICAgKSArDQogICAgICAgICc8cT5BIHRvbWUgZnVsbCBvZiBoZWxwZnVsIHRpcHMgc3VjaCBhcyAib2ggZ29kLCBzdGF5IGF3YXkgZnJvbSBpdCIsICJ3aHkgZGlkIHdlIGJ1eSB0aGlzIHRoaW5nLCBpdFwncyBub3QgZXZlbiBob3VzZS1icm9rZW4iIGFuZCAiZ3Jvb20gdHdpY2UgYSB3ZWVrIGluIHRoZSBkaXJlY3Rpb24gb2YgdGhlIHNjYWxlcyIuPC9xPicsDQogICAgICA5LA0KICAgICAgWzIyLCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCg0KICAgIG9yZGVyID0gMjUxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBIGNydW1ibHkgZWdnIiwNCiAgICAgIGxvYygiVW5sb2NrcyB0aGUgPGI+Y29va2llIGRyYWdvbiBlZ2c8L2I+LiIpICsNCiAgICAgICAgIjxxPlRoYW5rIHlvdSBmb3IgYWRvcHRpbmcgdGhpcyByb2J1c3QsIGZ1bi1sb3ZpbmcgY29va2llIGRyYWdvbiEgSXQgd2lsbCBicmluZyB5b3UgeWVhcnMgb2Ygam95IGFuZCBlbnRlcnRhaW5tZW50Ljxicj5LZWVwIGluIGEgZHJ5IGFuZCBjb29sIHBsYWNlLCBhbmQgYXdheSBmcm9tIG90aGVyIGhvdXNlIHBldHMuIFN1YnNjcmlwdGlvbiB0byBob21lIGluc3VyYW5jZSBpcyBzdHJvbmdseSBhZHZpc2VkLjwvcT4iLA0KICAgICAgMjUsDQogICAgICBbMjEsIDEyXQ0KICAgICk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkNoaW1lcmEiLA0KICAgICAgbG9jKCJTeW5lcmd5IHVwZ3JhZGVzIGFyZSA8Yj4lMSUgY2hlYXBlcjwvYj4uIiwgMikgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIllvdSBnYWluIGFub3RoZXIgPGI+KyUxJTwvYj4gb2YgeW91ciByZWd1bGFyIENwUyB3aGlsZSB0aGUgZ2FtZSBpcyBjbG9zZWQuIiwNCiAgICAgICAgICA1DQogICAgICAgICkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIllvdSByZXRhaW4gb3B0aW1hbCBjb29raWUgcHJvZHVjdGlvbiB3aGlsZSB0aGUgZ2FtZSBpcyBjbG9zZWQgZm9yIDxiPiUxIG1vcmUgZGF5czwvYj4uIiwNCiAgICAgICAgICAyDQogICAgICAgICkgKw0KICAgICAgICAiPHE+TW9yZSB0aGFuIHRoZSBzdW0gb2YgaXRzIHBhcnRzLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgOSksDQogICAgICBbMjQsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkdvZCIsICJMdWNpZmVyIiwgIlN5bmVyZ2llcyBWb2wuIElJIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlRpbiBvZiBidXR0ZXIgY29va2llcyIsDQogICAgICBsb2MoIkNvbnRhaW5zIGFuIGFzc29ydG1lbnQgb2YgcmljaCBidXR0ZXIgY29va2llcy4iKSArDQogICAgICAgICI8cT5GaXZlIHZhcmlldGllcyBvZiBkYW5pc2ggY29va2llcy48YnI+Q29tcGxldGUgd2l0aCBsaXR0bGUgcGFwZXIgY3Vwcy48L3E+IiwNCiAgICAgIDI1LA0KICAgICAgWzIxLCA5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJIZWF2ZW5seSBjb29raWVzIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkdvbGRlbiBzd2l0Y2giLA0KICAgICAgbG9jKA0KICAgICAgICAiVW5sb2NrcyB0aGUgPGI+Z29sZGVuIHN3aXRjaDwvYj4sIHdoaWNoIHBhc3NpdmVseSBib29zdHMgeW91ciBDcFMgYnkgJTElIGJ1dCBkaXNhYmxlcyBnb2xkZW4gY29va2llcy4iLA0KICAgICAgICA1MA0KICAgICAgKSArICI8cT5MZXNzIGNsaWNraW5nLCBtb3JlIGlkbGluZy48L3E+IiwNCiAgICAgIDk5OSwNCiAgICAgIFsyMSwgMTBdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkhlYXZlbmx5IGx1Y2siXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQ2xhc3NpYyBkYWlyeSBzZWxlY3Rpb24iLA0KICAgICAgbG9jKA0KICAgICAgICAiVW5sb2NrcyB0aGUgPGI+bWlsayBzZWxlY3RvcjwvYj4sIGxldHRpbmcgeW91IHBpY2sgd2hpY2ggbWlsayBpcyBkaXNwbGF5ZWQgdW5kZXIgeW91ciBjb29raWUuPGJyPkNvbWVzIHdpdGggYSB2YXJpZXR5IG9mIGJhc2ljIGZsYXZvcnMuIg0KICAgICAgKSArICI8cT5Eb24ndCBoYXZlIGEgY293LCBtYW4uPC9xPiIsDQogICAgICA5LA0KICAgICAgWzEsIDhdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRmFuY2lmdWwgZGFpcnkgc2VsZWN0aW9uIiwNCiAgICAgIGxvYygiQ29udGFpbnMgbW9yZSBleG90aWMgZmxhdm9ycyBmb3IgeW91ciBtaWxrIHNlbGVjdG9yLiIpICsNCiAgICAgICAgIjxxPlN0cm9uZyBib25lcyBmb3IgdGhlIHNrZWxldG9uIGFybXkuPC9xPiIsDQogICAgICAxMDAwMDAwLA0KICAgICAgWzksIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkNsYXNzaWMgZGFpcnkgc2VsZWN0aW9uIl07DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRHJhZ29uIGNvb2tpZSIsDQogICAgICBkZXNjOiAiSW1idWVkIHdpdGggdGhlIHZpZ29yIGFuZCB2aXRhbGl0eSBvZiBhIGZ1bGwtZ3Jvd24gY29va2llIGRyYWdvbiwgdGhpcyBteXN0aWNhbCBjb29raWUgd2lsbCBlbWJvbGRlbiB5b3VyIGVtcGlyZSBmb3IgdGhlIGdlbmVyYXRpb25zIHRvIGNvbWUuIiwNCiAgICAgIGljb246IFsxMCwgMjVdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OSAqIDcsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDQwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR29sZGVuIHN3aXRjaCBbb2ZmXSIsDQogICAgICBsb2MoDQogICAgICAgICJUdXJuaW5nIHRoaXMgb24gd2lsbCBnaXZlIHlvdSBhIHBhc3NpdmUgPGI+KyUxJSBDcFM8L2I+LCBidXQgcHJldmVudHMgZ29sZGVuIGNvb2tpZXMgZnJvbSBzcGF3bmluZy48YnI+Q29zdCBpcyBlcXVhbCB0byAxIGhvdXIgb2YgcHJvZHVjdGlvbi4iLA0KICAgICAgICA1MA0KICAgICAgKSwNCiAgICAgIDEwMDAwMDAsDQogICAgICBbMjAsIDEwXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QudG9nZ2xlSW50byA9ICJHb2xkZW4gc3dpdGNoIFtvbl0iOw0KICAgIEdhbWUubGFzdC5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gR2FtZS5jb29raWVzUHMgKiA2MCAqIDYwOw0KICAgIH07DQogICAgdmFyIGZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5IYXMoIlJlc2lkdWFsIGx1Y2siKSkgew0KICAgICAgICB2YXIgYm9udXMgPSAwOw0KICAgICAgICB2YXIgdXBncmFkZXMgPSBHYW1lLmdvbGRlbkNvb2tpZVVwZ3JhZGVzOw0KICAgICAgICBmb3IgKHZhciBpIGluIHVwZ3JhZGVzKSB7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKHVwZ3JhZGVzW2ldKSkgYm9udXMrKzsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICAgIEdhbWUubGlzdFRpbnlPd25lZFVwZ3JhZGVzKEdhbWUuZ29sZGVuQ29va2llVXBncmFkZXMpICsNCiAgICAgICAgICAiPGJyPjxicj5UaGUgZWZmZWN0aXZlIGJvb3N0IGlzIDxiPisiICsNCiAgICAgICAgICBCZWF1dGlmeShNYXRoLnJvdW5kKDUwICsgYm9udXMgKiAxMCkpICsNCiAgICAgICAgICAiJTwvYj48YnI+dGhhbmtzIHRvIHJlc2lkdWFsIGx1Y2s8YnI+YW5kIHlvdXIgPGI+IiArDQogICAgICAgICAgYm9udXMgKw0KICAgICAgICAgICI8L2I+IGdvbGRlbiBjb29raWUgdXBncmFkZSIgKw0KICAgICAgICAgIChib251cyA9PSAxID8gIiIgOiAicyIpICsNCiAgICAgICAgICAnLjwvZGl2PjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiB0aGlzLmRlc2M7DQogICAgfTsNCiAgICBpZiAoRU4pIEdhbWUubGFzdC5kZXNjRnVuYyA9IGZ1bmM7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkdvbGRlbiBzd2l0Y2ggW29uXSIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgc3dpdGNoIGlzIGN1cnJlbnRseSBnaXZpbmcgeW91IGEgcGFzc2l2ZSA8Yj4rJTElIENwUzwvYj47IGl0IGFsc28gcHJldmVudHMgZ29sZGVuIGNvb2tpZXMgZnJvbSBzcGF3bmluZy48YnI+VHVybmluZyBpdCBvZmYgd2lsbCByZXZlcnQgdGhvc2UgZWZmZWN0cy48YnI+Q29zdCBpcyBlcXVhbCB0byAxIGhvdXIgb2YgcHJvZHVjdGlvbi4iLA0KICAgICAgICA1MA0KICAgICAgKSwNCiAgICAgIDEwMDAwMDAsDQogICAgICBbMjEsIDEwXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QudG9nZ2xlSW50byA9ICJHb2xkZW4gc3dpdGNoIFtvZmZdIjsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuY29va2llc1BzICogNjAgKiA2MDsNCiAgICB9Ow0KICAgIEdhbWUubGFzdC5kZXNjRnVuYyA9IGZ1bmM7DQoNCiAgICBvcmRlciA9IDUwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiTWlsayBzZWxlY3RvciIsDQogICAgICBsb2MoIkxldHMgeW91IHBpY2sgd2hhdCBmbGF2b3Igb2YgbWlsayB0byBkaXNwbGF5LiIpLA0KICAgICAgMCwNCiAgICAgIFsxLCA4XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGNob2ljZSA9IHRoaXMuY2hvaWNlc0Z1bmN0aW9uKClbR2FtZS5taWxrVHlwZV07DQogICAgICBpZiAoIWNob2ljZSkgY2hvaWNlID0gdGhpcy5jaG9pY2VzRnVuY3Rpb24oKVswXTsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBsb2MoIkN1cnJlbnQ6IikgKw0KICAgICAgICAiICIgKw0KICAgICAgICB0aW55SWNvbihjaG9pY2UuaWNvbikgKw0KICAgICAgICAiIDxiPiIgKw0KICAgICAgICBjaG9pY2UubmFtZSArDQogICAgICAgICc8L2I+PC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCg0KICAgIEdhbWUubGFzdC5wb29sID0gInRvZ2dsZSI7DQogICAgR2FtZS5sYXN0LmNob2ljZXNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciByYW5rID0gMDsNCiAgICAgIHZhciBjaG9pY2VzID0gW107DQoNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5BbGxNaWxrcy5sZW5ndGg7IGkrKykgew0KICAgICAgICB2YXIgaXQgPSBHYW1lLkFsbE1pbGtzW2ldOw0KICAgICAgICBjaG9pY2VzLnB1c2goew0KICAgICAgICAgIG5hbWU6IGl0Lm5hbWUsDQogICAgICAgICAgaWNvbjogaXQuaWNvbiwNCiAgICAgICAgICBtaWxrOiBpdCwNCiAgICAgICAgICBvcmRlcjogaXQudHlwZSwNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIGNob2ljZXNbMTFdLmRpdiA9IHRydWU7DQoNCiAgICAgIHZhciBtYXhSYW5rID0gTWF0aC5mbG9vcihHYW1lLkFjaGlldmVtZW50c093bmVkIC8gMjUpOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaG9pY2VzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHZhciBpdCA9IGNob2ljZXNbaV0ubWlsazsNCiAgICAgICAgaWYgKGl0LnR5cGUgPT0gMSAmJiAhR2FtZS5IYXMoIkZhbmNpZnVsIGRhaXJ5IHNlbGVjdGlvbiIpKQ0KICAgICAgICAgIGNob2ljZXNbaV0gPSAwOw0KICAgICAgICBpZiAoaXQucmFuayAmJiBpdC5yYW5rID4gbWF4UmFuaykgY2hvaWNlc1tpXSA9IDA7DQogICAgICB9DQoNCiAgICAgIGNob2ljZXNbR2FtZS5taWxrVHlwZV0uc2VsZWN0ZWQgPSAxOw0KICAgICAgcmV0dXJuIGNob2ljZXM7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuY2hvaWNlc1BpY2sgPSBmdW5jdGlvbiAoaWQpIHsNCiAgICAgIEdhbWUubWlsa1R5cGUgPSBpZDsNCiAgICB9Ow0KDQogICAgb3JkZXIgPSAxMDMwMDsNCiAgICB2YXIgYnV0dGVyQmlzY3VpdE11bHQgPSAxMDAwMDAwMDA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJNaWxrIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAxMDAgb2YgZXZlcnl0aGluZy48YnI+SXQgYmVhcnMgdGhlIGVuZ3JhdmluZyBvZiBhIGZpbmUgZW50cmVwcmVuZXVyLiIsDQogICAgICBpY29uOiBbMjcsIDhdLA0KICAgICAgcG93ZXI6IDEwLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIGJ1dHRlckJpc2N1aXRNdWx0LA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRGFyayBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiLA0KICAgICAgZGVzYzogIlJld2FyZGVkIGZvciBvd25pbmcgMTUwIG9mIGV2ZXJ5dGhpbmcuPGJyPkl0IGlzIGFkb3JuZWQgd2l0aCB0aGUgaW1hZ2Ugb2YgYW4gZXhwZXJpZW5jZWQgY29va2llIHR5Y29vbi4iLA0KICAgICAgaWNvbjogWzI3LCA5XSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiBidXR0ZXJCaXNjdWl0TXVsdCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldoaXRlIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAyMDAgb2YgZXZlcnl0aGluZy48YnI+VGhlIGNob2NvbGF0ZSBpcyBjaGlzZWxlZCB0byBkZXBpY3QgYSBtYXN0ZXJmdWwgcGFzdHJ5IG1hZ25hdGUuIiwNCiAgICAgIGljb246IFsyOCwgOV0sDQogICAgICBwb3dlcjogMTAsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogYnV0dGVyQmlzY3VpdE11bHQsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSdWJ5IGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAyNTAgb2YgZXZlcnl0aGluZy48YnI+Q292ZXJlZCBpbiBhIHJhcmUgcmVkIGNob2NvbGF0ZSwgdGhpcyBiaXNjdWl0IGlzIGV0Y2hlZCB0byByZXByZXNlbnQgdGhlIGZhY2Ugb2YgYSBjb29raWUgaW5kdXN0cmlhbGlzdCBnb25lIG1hZCB3aXRoIHBvd2VyLiIsDQogICAgICBpY29uOiBbMjgsIDhdLA0KICAgICAgcG93ZXI6IDEwLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIGJ1dHRlckJpc2N1aXRNdWx0LA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdpbmdlcnNuYXBzIiwNCiAgICAgIGRlc2M6ICJDb29raWVzIHdpdGggYSBzb3VsLiBQcm9iYWJseS4iLA0KICAgICAgaWNvbjogWzI5LCAxMF0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNpbm5hbW9uIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZSBzZWNyZXQgaXMgaW4gdGhlIHBhdGVudGVkIHN3aXJseSBnbGF6aW5nLiIsDQogICAgICBpY29uOiBbMjMsIDhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiVmFuaXR5IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIk9uZSB0aW55IGNhbmRpZWQgZnJ1aXQgc2l0cyBhdG9wIHRoaXMgZGVjYWRlbnQgY29va2llLiIsDQogICAgICBpY29uOiBbMjIsIDhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2lnYXJzIiwNCiAgICAgIGRlc2M6ICJDbG9zZSwgYnV0IG5vIG1hdGNoIGZvciB0aG9zZSBleHRyYXZhZ2FudCBjb29raWUgc3RyYXdzIHRoZXkgc2VydmUgaW4gY29mZmVlIHNob3BzIHRoZXNlIGRheXMuIiwNCiAgICAgIGljb246IFsyNSwgOF0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGlud2hlZWwgY29va2llcyIsDQogICAgICBkZXNjOiAiQnJpbmdpbmcgeW91IHRoZSBkaXp6eWluZyBjb21iaW5hdGlvbiBvZiBicm93biBmbGF2b3IgYW5kIGJlaWdlIHRhc3RlISIsDQogICAgICBpY29uOiBbMjIsIDEwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJGdWRnZSBzcXVhcmVzIiwNCiAgICAgIGRlc2M6ICJOb3QgZXhhY3RseSBjb29raWVzLCBidXQgeW91IHdvbid0IGNhcmUgb25jZSB5b3UndmUgdGFzdGVkIG9uZSBvZiB0aGVzZS48YnI+VGhleSdyZSBzbyBnb29kLCBpdCdzIGZ1ZGdlZC11cCEiLA0KICAgICAgaWNvbjogWzI0LCA4XSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAzMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkRpZ2l0cyIsDQogICAgICBkZXNjOiAiVGhyZWUgZmxhdm9ycywgemVybyBwaGFsYW5nZXMuIiwNCiAgICAgIGljb246IFsyNiwgOF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDI5Ow0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQnV0dGVyIGhvcnNlc2hvZXMiLA0KICAgICAgZGVzYzogIkl0IHdvdWxkIGJlaG9vdmUgeW91IHRvIG5vdCBvdmVyaW5kdWxnZSBpbiB0aGVzZS4iLA0KICAgICAgaWNvbjogWzIyLCA5XSwNCiAgICAgIHJlcXVpcmU6ICJUaW4gb2YgYnV0dGVyIGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCdXR0ZXIgcHVja3MiLA0KICAgICAgZGVzYzogIkxvcmQsIHdoYXQgZm9vbHMgdGhlc2UgbW9ydGFscyBiZSE8YnI+KFRoaXMgaXMga2luZCBvZiBhIGhva2V5IHJlZmVyZW5jZS4pIiwNCiAgICAgIGljb246IFsyMywgOV0sDQogICAgICByZXF1aXJlOiAiVGluIG9mIGJ1dHRlciBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlciBrbm90cyIsDQogICAgICBkZXNjOiAiTG9vaywgeW91IGNhbiBjYWxsIHRoZXNlIHByZXR6ZWxzIGlmIHlvdSB3YW50LCBidXQgeW91J2QganVzdCBiZSBmb29saW5nIHlvdXJzZWxmLCB3b3VsZG4ndCB5b3U/IiwNCiAgICAgIGljb246IFsyNCwgOV0sDQogICAgICByZXF1aXJlOiAiVGluIG9mIGJ1dHRlciBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlciBzbGFicyIsDQogICAgICBkZXNjOiAiTm90aGluZyBidXR0ZXIgdGhhbiBhIHNsYWIgdG8gdGhlIGZhY2UuIiwNCiAgICAgIGljb246IFsyNSwgOV0sDQogICAgICByZXF1aXJlOiAiVGluIG9mIGJ1dHRlciBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCdXR0ZXIgc3dpcmxzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSBhcmUgZXF1YWwgcGFydHMgc3VnYXIsIGJ1dHRlciwgYW5kIHdhcm0gZnV6enkgZmVlbGluZ3MgLSBhbGwgb2Ygd2hpY2ggY2F1c2UgbWlsbGlvbnMgb2YgZGVhdGhzIGV2ZXJ5IGRheS4iLA0KICAgICAgaWNvbjogWzI2LCA5XSwNCiAgICAgIHJlcXVpcmU6ICJUaW4gb2YgYnV0dGVyIGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTaG9ydGJyZWFkIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSByaWNoIGJ1dHRlciBjb29raWVzIGFyZSBuZWl0aGVyIHNob3J0LCBub3IgYnJlYWQuIFdoYXQgYSBjb3VudHJ5ISIsDQogICAgICBpY29uOiBbMjMsIDEwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWlsbGlvbmFpcmVzJyBzaG9ydGJyZWFkcyIsDQogICAgICBkZXNjOiAiVGhyZWUgdGhvdWdodC1wcm92b2tpbmcgbGF5ZXJzIG9mIGNyZWFteSBjaG9jb2xhdGUsIGhhcmQtd29ya2luZyBjYXJhbWVsIGFuZCBjcnVtYmx5IGJpc2N1aXQgaW4gYSBwb2lnbmFudCBjb21tZW50YXJ5IG9mIGNsYXNzIHN0cnVnZ2xlLiIsDQogICAgICBpY29uOiBbMjQsIDEwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhcmFtZWwgY29va2llcyIsDQogICAgICBkZXNjOiAiVGhlIHBvbHltZXJpemVkIGNhcmJvaHlkcmF0ZXMgYWRvcm5pbmcgdGhlc2UgY29va2llcyBhcmUgc3VyZSB0byBzdGljayB0byB5b3VyIHRlZXRoIGZvciBxdWl0ZSBhIHdoaWxlLiIsDQogICAgICBpY29uOiBbMjUsIDEwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIHZhciBkZXNjID0gZnVuY3Rpb24gKHRvdGFsSG91cnMpIHsNCiAgICAgIHJldHVybiBsb2MoDQogICAgICAgICJZb3UgcmV0YWluIG9wdGltYWwgY29va2llIHByb2R1Y3Rpb24gd2hpbGUgdGhlIGdhbWUgaXMgY2xvc2VkIGZvciB0d2ljZSBhcyBsb25nLCBmb3IgYSB0b3RhbCBvZiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgR2FtZS5zYXlUaW1lKHRvdGFsSG91cnMgKiA2MCAqIDYwICogR2FtZS5mcHMsIC0xKQ0KICAgICAgKTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQmVscGhlZ29yIiwNCiAgICAgIGRlc2MoMikgKw0KICAgICAgICAiPHE+QSBkZW1vbiBvZiBzaG9ydGN1dHMgYW5kIGxhemluZXNzLCBCZWxwaGVnb3IgY29tbWFuZHMgbWFjaGluZXMgdG8gZG8gd29yayBpbiBoaXMgc3RlYWQuPC9xPiIsDQogICAgICBNYXRoLnBvdyhhbmdlbFByaWNlRmFjdG9yLCAxKSwNCiAgICAgIFs3LCAxMV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJNYW1tb24iLA0KICAgICAgZGVzYyg0KSArDQogICAgICAgICI8cT5UaGUgZGVtb25pYyBlbWJvZGltZW50IG9mIHdlYWx0aCwgTWFtbW9uIHJlcXVlc3RzIGEgdGl0aGUgb2YgYmxvb2QgYW5kIGdvbGQgZnJvbSBhbGwgaGlzIHdvcnNoaXBwZXJzLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgMiksDQogICAgICBbOCwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkJlbHBoZWdvciJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQWJhZGRvbiIsDQogICAgICBkZXNjKDgpICsNCiAgICAgICAgIjxxPk1hc3RlciBvZiBvdmVyaW5kdWxnZW5jZSwgQWJhZGRvbiBnb3Zlcm5zIHRoZSB3cmlua2xlciBicm9vZCBhbmQgaW5zcGlyZXMgdGhlaXIgaW5zYXRpYWJpbGl0eS48L3E+IiwNCiAgICAgIE1hdGgucG93KGFuZ2VsUHJpY2VGYWN0b3IsIDMpLA0KICAgICAgWzksIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJNYW1tb24iXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNhdGFuIiwNCiAgICAgIGRlc2MoMTYpICsNCiAgICAgICAgIjxxPlRoZSBjb3VudGVycG9pbnQgdG8gZXZlcnl0aGluZyByaWdodGVvdXMsIHRoaXMgZGVtb24gcmVwcmVzZW50cyB0aGUgbmVmYXJpb3VzIGluZmx1ZW5jZSBvZiBkZWNlaXQgYW5kIHRlbXB0YXRpb24uPC9xPiIsDQogICAgICBNYXRoLnBvdyhhbmdlbFByaWNlRmFjdG9yLCA0KSwNCiAgICAgIFsxMCwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkFiYWRkb24iXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFzbW9kZXVzIiwNCiAgICAgIGRlc2MoMzIpICsNCiAgICAgICAgIjxxPlRoaXMgZGVtb24gd2l0aCB0aHJlZSBtb25zdHJvdXMgaGVhZHMgZHJhd3MgaGlzIHBvd2VyIGZyb20gdGhlIGFsbC1jb25zdW1pbmcgZGVzaXJlIGZvciBjb29raWVzIGFuZCBhbGwgdGhpbmdzIHN3ZWV0LjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgNSksDQogICAgICBbMTEsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTYXRhbiJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQmVlbHplYnViIiwNCiAgICAgIGRlc2MoNjQpICsNCiAgICAgICAgIjxxPlRoZSBmZXN0ZXJpbmcgaW5jYXJuYXRpb24gb2YgYmxpZ2h0IGFuZCBkaXNlYXNlLCBCZWVsemVidWIgcnVsZXMgb3ZlciB0aGUgdmFzdCBhcm1pZXMgb2YgcGFzdHJ5IGluZmVybm8uPC9xPiIsDQogICAgICBNYXRoLnBvdyhhbmdlbFByaWNlRmFjdG9yLCA2KSwNCiAgICAgIFsxMiwgMTFdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkFzbW9kZXVzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNpZmVyIiwNCiAgICAgIGRlc2MoMTI4KSArDQogICAgICAgICI8cT5BbHNvIGtub3duIGFzIHRoZSBMaWdodGJyaW5nZXIsIHRoaXMgaW5mZXJuYWwgcHJpbmNlJ3MgdHJlbWVuZG91cyBlZ28gY2F1c2VkIGhpbSB0byBiZSBjYXN0IGRvd24gZnJvbSBwYXN0cnkgaGVhdmVuLjwvcT4iLA0KICAgICAgTWF0aC5wb3coYW5nZWxQcmljZUZhY3RvciwgNyksDQogICAgICBbMTMsIDExXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJCZWVsemVidWIiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR29sZGVuIGNvb2tpZSBhbGVydCBzb3VuZCIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIHRoZSA8Yj5nb2xkZW4gY29va2llIHNvdW5kIHNlbGVjdG9yPC9iPiwgd2hpY2ggbGV0cyB5b3UgcGljayB3aGV0aGVyIGdvbGRlbiBjb29raWVzIGVtaXQgYSBzb3VuZCB3aGVuIGFwcGVhcmluZyBvciBub3QuIg0KICAgICAgKSArICI8cT5BIHNvdW5kIGRlY2lzaW9uLjwvcT4iLA0KICAgICAgOTk5OTk5LA0KICAgICAgWzI4LCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJSZXNpZHVhbCBsdWNrIl07DQoNCiAgICBvcmRlciA9IDQ5OTAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR29sZGVuIGNvb2tpZSBzb3VuZCBzZWxlY3RvciIsDQogICAgICBsb2MoIkxldHMgeW91IGNoYW5nZSB0aGUgc291bmQgZ29sZGVuIGNvb2tpZXMgbWFrZSB3aGVuIHRoZXkgc3Bhd24uIiksDQogICAgICAwLA0KICAgICAgWzI4LCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGNob2ljZSA9IHRoaXMuY2hvaWNlc0Z1bmN0aW9uKClbR2FtZS5jaGltZVR5cGVdOw0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgIGxvYygiQ3VycmVudDoiKSArDQogICAgICAgICIgIiArDQogICAgICAgIHRpbnlJY29uKGNob2ljZS5pY29uKSArDQogICAgICAgICIgPGI+IiArDQogICAgICAgIGNob2ljZS5uYW1lICsNCiAgICAgICAgJzwvYj48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgdGhpcy5kZGVzYw0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QuY2hvaWNlc0Z1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGNob2ljZXMgPSBbXTsNCiAgICAgIGNob2ljZXNbMF0gPSB7IG5hbWU6ICJObyBzb3VuZCIsIGljb246IFswLCA3XSB9Ow0KICAgICAgY2hvaWNlc1sxXSA9IHsgbmFtZTogIkNoaW1lIiwgaWNvbjogWzIyLCA2XSB9Ow0KICAgICAgY2hvaWNlc1syXSA9IHsgbmFtZTogIkZvcnR1bmUiLCBpY29uOiBbMjcsIDZdIH07DQogICAgICBjaG9pY2VzWzNdID0geyBuYW1lOiAiQ3ltYmFsIiwgaWNvbjogWzksIDEwXSB9Ow0KICAgICAgY2hvaWNlc1s0XSA9IHsgbmFtZTogIlNxdWVhayIsIGljb246IFs4LCAxMF0gfTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hvaWNlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICBjaG9pY2VzW2ldLm5hbWUgPSBsb2MoY2hvaWNlc1tpXS5uYW1lKTsNCiAgICAgIH0NCg0KICAgICAgY2hvaWNlc1tHYW1lLmNoaW1lVHlwZV0uc2VsZWN0ZWQgPSAxOw0KICAgICAgcmV0dXJuIGNob2ljZXM7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuY2hvaWNlc1BpY2sgPSBmdW5jdGlvbiAoaWQpIHsNCiAgICAgIEdhbWUuY2hpbWVUeXBlID0gaWQ7DQogICAgICBHYW1lLnBsYXlHb2xkZW5Db29raWVDaGltZSgpOw0KICAgIH07DQogICAgR2FtZS5wbGF5R29sZGVuQ29va2llQ2hpbWUgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5jaGltZVR5cGUgPT0gMSkgUGxheVNvdW5kKCJzbmQvY2hpbWUubXAzIik7DQogICAgICBlbHNlIGlmIChHYW1lLmNoaW1lVHlwZSA9PSAyKSBQbGF5U291bmQoInNuZC9mb3J0dW5lLm1wMyIpOw0KICAgICAgZWxzZSBpZiAoR2FtZS5jaGltZVR5cGUgPT0gMykgUGxheVNvdW5kKCJzbmQvY3ltYmFsUmV2Lm1wMyIpOw0KICAgICAgZWxzZSBpZiAoR2FtZS5jaGltZVR5cGUgPT0gNCkgew0KICAgICAgICBHYW1lLndyaW5rbGVyU3F1aXNoU291bmQrKzsNCiAgICAgICAgaWYgKEdhbWUud3JpbmtsZXJTcXVpc2hTb3VuZCA+IDQpIHsNCiAgICAgICAgICBHYW1lLndyaW5rbGVyU3F1aXNoU291bmQgLT0gNDsNCiAgICAgICAgfQ0KICAgICAgICBQbGF5U291bmQoInNuZC9zcXVlYWsiICsgR2FtZS53cmlua2xlclNxdWlzaFNvdW5kICsgIi5tcDMiKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJCYXNpYyB3YWxscGFwZXIgYXNzb3J0bWVudCIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIHRoZSA8Yj5iYWNrZ3JvdW5kIHNlbGVjdG9yPC9iPiwgbGV0dGluZyB5b3Ugc2VsZWN0IHRoZSBnYW1lJ3MgYmFja2dyb3VuZC48YnI+Q29tZXMgd2l0aCBhIHZhcmlldHkgb2YgYmFzaWMgZmxhdm9ycy4iDQogICAgICApICsNCiAgICAgICAgIjxxPlByaW9yaXRpemluZyBhZXN0aGV0aWNzIG92ZXIgY3J1Y2lhbCB1dGlsaXRhcmlhbiB1cGdyYWRlcz8gQ29sb3IgbWUgaW1wcmVzc2VkLjwvcT4iLA0KICAgICAgOTksDQogICAgICBbMjksIDVdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkNsYXNzaWMgZGFpcnkgc2VsZWN0aW9uIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkxlZ2FjeSIsDQogICAgICBsb2MoDQogICAgICAgICdUaGlzIGlzIHRoZSBmaXJzdCBoZWF2ZW5seSB1cGdyYWRlOyBpdCB1bmxvY2tzIHRoZSA8Yj5IZWF2ZW5seSBjaGlwczwvYj4gc3lzdGVtLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PkVhY2ggdGltZSB5b3UgYXNjZW5kLCB0aGUgY29va2llcyB5b3UgbWFkZSBpbiB5b3VyIHBhc3QgbGlmZSBhcmUgdHVybmVkIGludG8gPGI+aGVhdmVubHkgY2hpcHM8L2I+IGFuZCA8Yj5wcmVzdGlnZTwvYj4uPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PGI+SGVhdmVubHkgY2hpcHM8L2I+IGNhbiBiZSBzcGVudCBvbiBhIHZhcmlldHkgb2YgcGVybWFuZW50IHRyYW5zY2VuZGVudGFsIHVwZ3JhZGVzLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PllvdXIgPGI+cHJlc3RpZ2UgbGV2ZWw8L2I+IGFsc28gZ2l2ZXMgeW91IGEgcGVybWFuZW50IDxiPisxJSBDcFM8L2I+IHBlciBsZXZlbC4nDQogICAgICApICsgIjxxPldlJ3ZlIGFsbCBiZWVuIHdhaXRpbmcgZm9yIHlvdS48L3E+IiwNCiAgICAgIDEsDQogICAgICBbMjEsIDZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRWxkZXIgc3BpY2UiLA0KICAgICAgbG9jKCJZb3UgY2FuIGF0dHJhY3QgPGI+JTEgbW9yZSB3cmlua2xlcnM8L2I+LiIsIDIpICsNCiAgICAgICAgIjxxPlRoZSBjb29raWUgeW91ciBjb29raWUgY291bGQgc21lbGwgbGlrZS48L3E+IiwNCiAgICAgIDQ0NDQ0NCwNCiAgICAgIFsxOSwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiVW5ob2x5IGJhaXQiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiUmVzaWR1YWwgbHVjayIsDQogICAgICBsb2MoDQogICAgICAgICJXaGlsZSB0aGUgZ29sZGVuIHN3aXRjaCBpcyBvbiwgeW91IGdhaW4gYW4gYWRkaXRpb25hbCA8Yj4rJTElIENwUzwvYj4gcGVyIGdvbGRlbiBjb29raWUgdXBncmFkZSBvd25lZC4iLA0KICAgICAgICAxMA0KICAgICAgKSArICI8cT5Gb3J0dW5lIGNvbWVzIGluIG1hbnkgZmxhdm9ycy48L3E+IiwNCiAgICAgIDk5OTk5LA0KICAgICAgWzI3LCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJHb2xkZW4gc3dpdGNoIl07DQoNCiAgICBvcmRlciA9IDE1MDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZhbnRhc3RlZWwgbW91c2UiLA0KICAgICAgZ2V0U3RyQ2xpY2tpbmdHYWlucygxKSArDQogICAgICAgICI8cT5Zb3UgY291bGQgYmUgY2xpY2tpbmcgdXNpbmcgeW91ciB0b3VjaHBhZCBhbmQgd2UnZCBiZSBub25lIHRoZSB3aXNlci48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMTEsIDE3XQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgOCwgMTEpOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiTmV2ZXJjcmFjayBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsNCiAgICAgICAgIjxxPkhvdyBtdWNoIGJlZWZpZXIgY2FuIHlvdSBtYWtlIGEgbW91c2UgdW50aWwgaXQncyBjb25zaWRlcmVkIGEgcmF0PzwvcT4iLA0KICAgICAgNTAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAxOF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDksIDExKTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRml2ZS1maW5nZXIgZGlzY291bnQiLA0KICAgICAgbG9jKCJBbGwgdXBncmFkZXMgYXJlIDxiPiUxJSBjaGVhcGVyIHBlciAlMjwvYj4uIiwgWw0KICAgICAgICAxLA0KICAgICAgICBsb2MoIiUxIGN1cnNvciIsIDEwMCksDQogICAgICBdKSArICI8cT5TdGljayBpdCB0byB0aGUgbWFuLjwvcT4iLA0KICAgICAgNTU1NTU1LA0KICAgICAgWzI4LCA3XSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICB9DQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkhhbG8gZ2xvdmVzIiwgIkFiYWRkb24iXTsNCg0KICAgIG9yZGVyID0gNTAwMDsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkZ1dHVyZSBhbG1hbmFjcyIsDQogICAgICAiPHE+TGV0cyB5b3UgcHJlZGljdCBvcHRpbWFsIHBsYW50aW5nIHRpbWVzLiBJdCdzIGNyYXp5IHdoYXQgdGltZSB0cmF2ZWwgY2FuIGRvITwvcT4iLA0KICAgICAgIkZhcm0iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlJhaW4gcHJheWVyIiwNCiAgICAgICI8cT5BIGRlZXBseSBzcGlyaXR1YWwgY2VyZW1vbmlhbCBpbnZvbHZpbmcgY29tcGxpY2F0ZWQgZGFuY2UgbW92ZXMgYW5kIGhpZ2gtdGVjaCBjbG91ZC1idXN0aW5nIGxhc2Vycy48L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlNlaXNtaWMgbWFnaWMiLA0KICAgICAgIjxxPlN1cnByaXNlIGVhcnRocXVha2VzIGFyZSBhbiBvbGQgZmF2b3JpdGUgb2Ygd2l6YXJkbHkgZnJhdCBob3VzZXMuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiQXN0ZXJvaWQgbWluaW5nIiwNCiAgICAgICI8cT5BcyBwZXIgdGhlIDxzcGFuPjE5PC9zcGFuPjc0IFVuaXRlZCBDb3NtaWMgQ29udmVudGlvbiwgY29tZXRzLCBtb29ucywgYW5kIGluaGFiaXRlZCBwbGFuZXRvaWRzIGFyZSBubyBsb25nZXIgbGVnYWxseSBleGNhdmF0YWJsZS48YnI+QnV0IGhleSwgYSBzcGFjZSBicmliZSBnb2VzIGEgbG9uZyB3YXkuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlF1YW50dW0gZWxlY3Ryb25pY3MiLA0KICAgICAgIjxxPllvdXIgbWFjaGluZXMgd29uJ3QgZXZlbiBiZSBzdXJlIGlmIHRoZXkncmUgb24gb3Igb2ZmITwvcT4iLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiVGVtcG9yYWwgb3ZlcmNsb2NraW5nIiwNCiAgICAgICI8cT5JbnRyb2R1Y2UgbW9yZSBxdWlja2l0dWRlIGluIHlvdXIgc3lzdGVtIGZvciBpbmNyZWFzZWQgc3BlZWRhdGlvbiBvZiBmYXN0bmVzcy48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkNvbnRyYWN0cyBmcm9tIGJleW9uZCIsDQogICAgICAiPHE+TWFrZSBzdXJlIHRvIHJlYWQgdGhlIGZpbmUgcHJpbnQhPC9xPiIsDQogICAgICAiQmFuayIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiUHJpbnRpbmcgcHJlc3NlcyIsDQogICAgICAiPHE+RmFrZSBiaWxscyBzbyByZWFsLCB0aGV5J3JlIGFsbW9zdCB3b3J0aCB0aGUgaW5rIHRoZXkncmUgcHJpbnRlZCB3aXRoLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlBhZ2FuaXNtIiwNCiAgICAgICI8cT5Tb21lIGRlaXRpZXMgYXJlIGJldHRlciBsZWZ0IHVud29yc2hpcHBlZC48L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkdvZCBwYXJ0aWNsZSIsDQogICAgICAiPHE+VHVybnMgb3V0IEdvZCBpcyBtdWNoIHRpbmllciB0aGFuIHdlIHRob3VnaHQsIEkgZ3Vlc3MuPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiQXJjYW5lIGtub3dsZWRnZSIsDQogICAgICAiPHE+U29tZSB0aGluZ3Mgd2VyZSBuZXZlciBtZWFudCB0byBiZSBrbm93biAtIG9ubHkgbWlsZGx5IHNwZWN1bGF0ZWQuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIk1hZ2ljYWwgYm90YW55IiwNCiAgICAgICc8cT5BbHJlYWR5IGtub3duIGluIHNvbWUgcmVhY3Rpb25hcnkgbmV3c3BhcGVycyBhcyAidGhlIHdpemFyZFwncyBHTU9zIi48L3E+JywNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgIkZhcm0iLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkZvc3NpbCBmdWVscyIsDQogICAgICAiPHE+U29tZWhvdyBiZXR0ZXIgdGhhbiBwbHV0b25pdW0gZm9yIHBvd2VyaW5nIHJvY2tldHMuPGJyPkV4dHJhY3RlZCBmcm9tIHRoZSBmdWVscyBvZiBhbmNpZW50LCBmb3NzaWxpemVkIGNpdmlsaXphdGlvbnMuPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgIk1pbmUiLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJTaGlweWFyZHMiLA0KICAgICAgIjxxPldoZXJlIGNhcnBlbnRyeSwgYmxpbmQgbHVjaywgYW5kIGFzYmVzdG9zIGluc3VsYXRpb24gdW5pdGUgdG8gcHJvZHVjZSB0aGUgbW9zdCBkYXp6bGluZyBzcGFjZXNoaXBzIG9uIHRoZSBwbGFuZXQuPC9xPiIsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlByaW1vcmRpYWwgb3JlcyIsDQogICAgICAiPHE+T25seSB3aGVuIHJlZmluaW5nIHRoZSBwdXJlc3QgbWV0YWxzIHdpbGwgeW91IGV4dHJhY3QgdGhlIHN3ZWV0ZXN0IHNhcCBvZiB0aGUgZWFydGguPC9xPiIsDQogICAgICAiQWxjaGVteSBsYWIiLA0KICAgICAgIk1pbmUiLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJHb2xkIGZ1bmQiLA0KICAgICAgIjxxPklmIGdvbGQgaXMgdGhlIGJhY2tib25lIG9mIHRoZSBlY29ub215LCBjb29raWVzLCBzdXJlbHksIGFyZSBpdHMgaGlwIGpvaW50cy48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAiQmFuayIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiSW5mZXJuYWwgY3JvcHMiLA0KICAgICAgIjxxPlNwcmlua2xlIHJlZ3VsYXJseSB3aXRoIEZJUkUuPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgICJGYXJtIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiQWJ5c21hbCBnbGltbWVyIiwNCiAgICAgICI8cT5Tb21lb25lLCBvciBzb21ldGhpbmcsIGlzIHN0YXJpbmcgYmFjayBhdCB5b3UuPGJyPlBlcmhhcHMgYXQgYWxsIG9mIHVzLjwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAiUHJpc20iLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQoNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlJlbGF0aXZpc3RpYyBwYXJzZWMtc2tpcHBpbmciLA0KICAgICAgIjxxPlBlb3BsZSB3aWxsIHRlbGwgeW91IHRoaXMgaXNuJ3QgcGh5c2ljYWxseSBwb3NzaWJsZS48YnI+VGhlc2UgYXJlIHBlb3BsZSB5b3UgZG9uJ3Qgd2FudCBvbiB5b3VyIHNoaXAuPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlByaW1ldmFsIGdsb3ciLA0KICAgICAgIjxxPkZyb20gdW5lbmRpbmcgdGltZXMsIGFuIGFuY2llbnQgbGlnaHQgc3RpbGwgc2hpbmVzLCBpbXBvc3NpYmx5IHB1cmUgYW5kIGZyYWdpbGUgaW4gaXRzIG9sZCBhZ2UuPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgICJQcmlzbSIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiRXh0cmEgcGh5c2ljcyBmdW5kaW5nIiwNCiAgICAgICI8cT5UaW1lIHRvIHB1dCB5b3VyIG1vbmV5IHdoZXJlIHlvdXIgcGFydGljbGUgY29sbGlkZXJzIGFyZS48L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAiQmFuayIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIkNoZW1pY2FsIHByb2ZpY2llbmN5IiwNCiAgICAgICI8cT5EaXNjb3ZlciBleGNpdGluZyBuZXcgZWxlbWVudHMsIHN1Y2ggYXMgRmxlc2htZWx0aXVtLCBJbmVydCBTaGFtcG9vIEJ5cHJvZHVjdCAjMTcgYW5kIENhcmJvbisrITwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiTGlnaHQgbWFnaWMiLA0KICAgICAgIjxxPkFjdHVhbGx5IG5vdCB0byBiZSB0YWtlbiBsaWdodGx5ISBObywgSSdtIHNlcmlvdXMuIDE3OCBwZW9wbGUgZGllZCBsYXN0IHllYXIuIFlvdSBkb24ndCBtZXNzIGFyb3VuZCB3aXRoIG1hZ2ljLjwvcT4iLA0KICAgICAgIlByaXNtIiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJNeXN0aWNhbCBlbmVyZ2llcyIsDQogICAgICAiPHE+U29tZXRoaW5nIGJlY2tvbnMgZnJvbSB3aXRoaW4gdGhlIGxpZ2h0LiBJdCBpcyB3YXJtLCBjb21mb3J0aW5nLCBhbmQgYXBwYXJlbnRseSB0aGUgY2F1c2UgZm9yIHNldmVyYWwga2luZHMgb2YgZXhvdGljIHNraW4gY2FuY2Vycy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgICJzeW5lcmd5MiINCiAgICApOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTeW5lcmdpZXMgVm9sLiBJIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlVubG9ja3MgYSBuZXcgdGllciBvZiB1cGdyYWRlcyB0aGF0IGFmZmVjdCA8Yj4yIGJ1aWxkaW5ncyBhdCB0aGUgc2FtZSB0aW1lPC9iPi48YnI+U3luZXJnaWVzIGFwcGVhciBvbmNlIHlvdSBoYXZlIDxiPiUxPC9iPiBvZiBib3RoIGJ1aWxkaW5ncy4iLA0KICAgICAgICAxNQ0KICAgICAgKSArICI8cT5UaGUgbWFueSBiZWF0cyB0aGUgZmV3LjwvcT4iLA0KICAgICAgMjIyMjIyLA0KICAgICAgWzEwLCAyMF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU2F0YW4iLCAiRG9taW5pb25zIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTeW5lcmdpZXMgVm9sLiBJSSIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIGEgbmV3IHRpZXIgb2YgdXBncmFkZXMgdGhhdCBhZmZlY3QgPGI+MiBidWlsZGluZ3MgYXQgdGhlIHNhbWUgdGltZTwvYj4uPGJyPlN5bmVyZ2llcyBhcHBlYXIgb25jZSB5b3UgaGF2ZSA8Yj4lMTwvYj4gb2YgYm90aCBidWlsZGluZ3MuIiwNCiAgICAgICAgNzUNCiAgICAgICkgKyAiPHE+VGhlIHNldmVyYWwgYmVhdHMgdGhlIG1hbnkuPC9xPiIsDQogICAgICAyMjIyMjIyLA0KICAgICAgWzEwLCAyOV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiQmVlbHplYnViIiwgIlNlcmFwaGltIiwgIlN5bmVyZ2llcyBWb2wuIEkiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiSGVhdmVubHkgY29va2llcyIsDQogICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZXIgPGI+KyUxJSBwZXJtYW5lbnRseTwvYj4uIiwgMTApICsNCiAgICAgICAgIjxxPkJha2VkIHdpdGggaGVhdmVubHkgY2hpcHMuIEFuIG90aGVyd29yZGx5IGZsYXZvciB0aGF0IHRyYW5zY2VuZHMgdGltZSBhbmQgc3BhY2UuPC9xPiIsDQogICAgICAzLA0KICAgICAgWzI1LCAxMl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiTGVnYWN5Il07DQogICAgR2FtZS5sYXN0LnBvd2VyID0gMTA7DQogICAgR2FtZS5sYXN0LnBzZXVkb0Nvb2tpZSA9IHRydWU7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJXcmlua2x5IGNvb2tpZXMiLA0KICAgICAgbG9jKCJDb29raWUgcHJvZHVjdGlvbiBtdWx0aXBsaWVyIDxiPislMSUgcGVybWFuZW50bHk8L2I+LiIsIDEwKSArDQogICAgICAgICI8cT5UaGUgcmVzdWx0IG9mIHJlZ3VsYXIgY29va2llcyBsZWZ0IHRvIGFnZSBvdXQgZm9yIGNvdW50bGVzcyBlb25zIGluIGEgcGxhY2Ugd2hlcmUgdGltZSBhbmQgc3BhY2UgYXJlIG1lYW5pbmdsZXNzLjwvcT4iLA0KICAgICAgNjY2NjY2NiwNCiAgICAgIFsyNiwgMTJdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNhY3JpbGVnaW91cyBjb3JydXB0aW9uIiwgIkVsZGVyIHNwaWNlIl07DQogICAgR2FtZS5sYXN0LnBvd2VyID0gMTA7DQogICAgR2FtZS5sYXN0LnBzZXVkb0Nvb2tpZSA9IHRydWU7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEaXN0aWxsZWQgZXNzZW5jZSBvZiByZWRvdWJsZWQgbHVjayIsDQogICAgICBsb2MoDQogICAgICAgICJHb2xkZW4gY29va2llcyAoYW5kIGFsbCBvdGhlciB0aGluZ3MgdGhhdCBzcGF3biwgc3VjaCBhcyByZWluZGVlcikgaGF2ZSA8Yj4lMSUgY2hhbmNlIG9mIGJlaW5nIGRvdWJsZWQ8L2I+LiIsDQogICAgICAgIDENCiAgICAgICkgKw0KICAgICAgICAiPHE+VGFzdGVzIGdsaXR0ZXJ5LiBUaGUgZW1wdHkgcGhpYWwgbWFrZXMgZm9yIGEgZ3JlYXQgcGVuY2lsIGhvbGRlci48L3E+IiwNCiAgICAgIDc3Nzc3NzcsDQogICAgICBbMjcsIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJEaXZpbmUgYmFrZXJpZXMiLCAiUmVzaWR1YWwgbHVjayJdOw0KDQogICAgb3JkZXIgPSA0MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIk9jY3VsdCBvYnN0cnVjdGlvbiIsDQogICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIDxiPnJlZHVjZWQgdG8gMDwvYj4uIikgKw0KICAgICAgICAiPHE+SWYgc3ltcHRvbXMgcGVyc2lzdCwgY29uc3VsdCBhIGRvY3Rvci48L3E+IiwNCiAgICAgIDcsDQogICAgICBbMTUsIDVdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR2x1Y29zZS1jaGFyZ2VkIGFpciIsDQogICAgICBsb2MoIlN1Z2FyIGx1bXBzIGNvYWxlc2NlIDxiPmEgd2hvbGUgbG90IGZhc3RlcjwvYj4uIikgKw0KICAgICAgICAiPHE+RG9uJ3QgYnJlYXRoZSB0b28gbXVjaCBvciB5b3UnbGwgZ2V0IGRpYWJldGVzITwvcT4iLA0KICAgICAgNywNCiAgICAgIFsyOSwgMTZdDQogICAgKTsgLy9kZWJ1ZyBwdXJwb3NlcyBvbmx5DQogICAgR2FtZS5sYXN0LnBvb2wgPSAiZGVidWciOw0KDQogICAgb3JkZXIgPSAxMDMwMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkxhdmVuZGVyIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAzMDAgb2YgZXZlcnl0aGluZy48YnI+VGhpcyBzdWJ0bHktZmxhdm9yZWQgYmlzY3VpdCByZXByZXNlbnRzIHRoZSBhY2NvbXBsaXNobWVudHMgb2YgZGVjYWRlcyBvZiB0b3Atc2VjcmV0IHJlc2VhcmNoLiBUaGUgbW9sZGVkIGRlc2lnbiBvbiB0aGUgY2hvY29sYXRlIHJlc2VtYmxlcyBhIHdlbGwta25vd24gZW50cmVwcmVuZXVyIHdobyBnYXZlIHRoZWlyIGFsbCB0byB0aGUgYW5jaWVudCBwYXRoIG9mIGJha2luZy4iLA0KICAgICAgaWNvbjogWzI2LCAxMF0sDQogICAgICBwb3dlcjogMTAsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogYnV0dGVyQmlzY3VpdE11bHQsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDMwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTG9tYmFyZGlhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIGNvbWUgZnJvbSB0aG9zZSBmYXJtcyB3aXRoIHRoZSByZWFsbHkgZ29vZCBtZW1vcnkuIiwNCiAgICAgIGljb246IFsyMywgMTNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmFzdGVuYWtlbiBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJGcmVuY2ggY29va2llcyBtYWRlIG9mIGRlbGljaW91cyBjaW5uYW1vbiBhbmQgY2FuZHkgc3VnYXIuIFRoZXNlIGRvIG5vdCBjb250YWluIE51dHMhIiwNCiAgICAgIGljb246IFsyNCwgMTNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBlY2FuIHNhbmRpZXMiLA0KICAgICAgZGVzYzogIlN0aWNrIGEgbnV0IG9uIGEgY29va2llIGFuZCBjYWxsIGl0IGEgZGF5ISBOYW1lIHlvdXIgYmFuZCBhZnRlciBpdCEgV2hhdGV2ZXIhIiwNCiAgICAgIGljb246IFsyNSwgMTNdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIk1vcmF2aWFuIHNwaWNlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlBvcHVsYXIgZm9yIGJlaW5nIHRoZSB3b3JsZCdzIG1vcmF2aWFuZXN0IGNvb2tpZXMuIiwNCiAgICAgIGljb246IFsyNiwgMTNdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkFuemFjIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBcm15IGJpc2N1aXRzIGZyb20gYSBiYWtlcnkgZG93biB1bmRlciwgY29udGFpbmluZyBubyBlZ2dzIGJ1dCB5ZXMgb2F0cy4iLA0KICAgICAgaWNvbjogWzI3LCAxM10sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlcmNha2VzIiwNCiAgICAgIGRlc2M6ICJHbGlzdGVuaW5nIHdpdGggY2hvbGVzdGVyb2wsIHRoZXNlIGNvb2tpZXMgbW9pc3RseSBzdHJhZGRsZSB0aGUgbGluZSBiZXR3ZWVuIHRoZSBsZWdhbCBkZWZpbml0aW9uIG9mIGEgY29va2llIGFuZCBqdXN0IGEgc3RyYWlnaHQtdXAgc3RpY2sgb2YgYnV0dGVyLiIsDQogICAgICBpY29uOiBbMjksIDEzXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSWNlIGNyZWFtIHNhbmR3aWNoZXMiLA0KICAgICAgZGVzYzogJ0luIGFuIGFsdGVybmF0ZSB1bml2ZXJzZSwgImljZSBjcmVhbSBzYW5kd2ljaCIgZGVzaWduYXRlcyBhbiBpY2UgY3JlYW0gY29uZSBmaWxsZWQgd2l0aCBiYWNvbiwgbGV0dHVjZSwgYW5kIHRvbWF0b2VzLiBNYXliZSBzb21lIHNwcmlua2xlcyB0b28uJywNCiAgICAgIGljb246IFsyOCwgMTNdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdGV2aWEgQ2FlbGVzdGlzIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlN1Z2FyIGx1bXBzIHJpcGVuIDxiPiUxPC9iPiBzb29uZXIuIiwNCiAgICAgICAgR2FtZS5zYXlUaW1lKDYwICogNjAgKiBHYW1lLmZwcykNCiAgICAgICkgKw0KICAgICAgICAiPHE+QSBwbGFudCBvZiBzdXBlcm5hdHVyYWwgc3dlZXRuZXNzIGdyb3duIGJ5IGFuZ2VscyBpbiBoZWF2ZW5seSBnYXJkZW5zLjwvcT4iLA0KICAgICAgMTAwMDAwMDAwLA0KICAgICAgWzI1LCAxNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiV3JpbmtseSBjb29raWVzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEaWFiZXRpY2EgRGFlbW9uaWN1cyIsDQogICAgICBsb2MoDQogICAgICAgICJTdWdhciBsdW1wcyBtYXR1cmUgPGI+JTE8L2I+IHNvb25lci4iLA0KICAgICAgICBHYW1lLnNheVRpbWUoNjAgKiA2MCAqIEdhbWUuZnBzKQ0KICAgICAgKSArDQogICAgICAgICI8cT5BIG1hbGV2b2xlbnQsIGlmIGRlbGljaW91cyBoZXJiIHRoYXQgaXMgc2FpZCB0byBncm93IG9uIHRoZSBjbGlmZnMgb2YgdGhlIGRhcmtlc3QgYWJ5c3Mgb2YgdGhlIHVuZGVyd29ybGQuPC9xPiIsDQogICAgICAzMDAwMDAwMDAsDQogICAgICBbMjYsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdGV2aWEgQ2FlbGVzdGlzIiwgIkx1Y2lmZXIiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN1Y3JhbG9zaWEgSW51dGlsaXMiLA0KICAgICAgbG9jKA0KICAgICAgICAiQmlmdXJjYXRlZCBzdWdhciBsdW1wcyBhcHBlYXIgPGI+JTElIG1vcmUgb2Z0ZW48L2I+IGFuZCBhcmUgPGI+JTIlIG1vcmUgbGlrZWx5PC9iPiB0byBkcm9wIDIgbHVtcHMuIiwNCiAgICAgICAgWzUsIDVdDQogICAgICApICsNCiAgICAgICAgIjxxPkEgcmFyZSBiZXJyeSBvZiB1bmludGVyZXN0aW5nIGZsYXZvciB0aGF0IGlzIGFzIGVsdXNpdmUgYXMgaXRzIHVzZXMgYXJlIGxpbWl0ZWQ7IG9ubHkgc291Z2h0LWFmdGVyIGJ5IHRoZSBtb3N0IGF2aWQgY29sbGVjdG9ycyB3aXRoIHRvbyBtdWNoIHdlYWx0aCBvbiB0aGVpciBoYW5kcy48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAsDQogICAgICBbMjcsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJEaWFiZXRpY2EgRGFlbW9uaWN1cyJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNreSBkaWdpdCIsDQogICAgICBsb2MoDQogICAgICAgICI8Yj4rJTElPC9iPiBwcmVzdGlnZSBsZXZlbCBlZmZlY3Qgb24gQ3BTLjxicj48Yj4rJTIlPC9iPiBnb2xkZW4gY29va2llIGVmZmVjdCBkdXJhdGlvbi48YnI+PGI+KyUzJTwvYj4gZ29sZGVuIGNvb2tpZSBsaWZlc3Bhbi4iLA0KICAgICAgICBbMSwgMSwgMV0NCiAgICAgICkgKw0KICAgICAgICAiPHE+VGhpcyB1cGdyYWRlIGlzIGEgYml0IHNoeSBhbmQgb25seSBhcHBlYXJzIHdoZW4geW91ciBwcmVzdGlnZSBsZXZlbCBjb250YWlucyBhIDcuPC9xPiIsDQogICAgICA3NzcsDQogICAgICBbMjQsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJIZWF2ZW5seSBsdWNrIl07DQogICAgR2FtZS5sYXN0LnNob3dJZiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBNYXRoLmNlaWwoKEdhbWUucHJlc3RpZ2UgKyAiIikuc3BsaXQoIjciKS5sZW5ndGggLSAxKSA+PSAxOw0KICAgIH07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNreSBudW1iZXIiLA0KICAgICAgbG9jKA0KICAgICAgICAiPGI+KyUxJTwvYj4gcHJlc3RpZ2UgbGV2ZWwgZWZmZWN0IG9uIENwUy48YnI+PGI+KyUyJTwvYj4gZ29sZGVuIGNvb2tpZSBlZmZlY3QgZHVyYXRpb24uPGJyPjxiPislMyU8L2I+IGdvbGRlbiBjb29raWUgbGlmZXNwYW4uIiwNCiAgICAgICAgWzEsIDEsIDFdDQogICAgICApICsNCiAgICAgICAgIjxxPlRoaXMgdXBncmFkZSBpcyBhIHJlY2x1c2l2ZSBoZXJtaXQgYW5kIG9ubHkgYXBwZWFycyB3aGVuIHlvdXIgcHJlc3RpZ2UgbGV2ZWwgY29udGFpbnMgdHdvIDcncy48L3E+IiwNCiAgICAgIDc3Nzc3LA0KICAgICAgWzI0LCAxNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiTHVja3kgZGlnaXQiLCAiTGFzdGluZyBmb3J0dW5lIl07DQogICAgR2FtZS5sYXN0LnNob3dJZiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBNYXRoLmNlaWwoKEdhbWUucHJlc3RpZ2UgKyAiIikuc3BsaXQoIjciKS5sZW5ndGggLSAxKSA+PSAyOw0KICAgIH07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdWNreSBwYXlvdXQiLA0KICAgICAgbG9jKA0KICAgICAgICAiPGI+KyUxJTwvYj4gcHJlc3RpZ2UgbGV2ZWwgZWZmZWN0IG9uIENwUy48YnI+PGI+KyUyJTwvYj4gZ29sZGVuIGNvb2tpZSBlZmZlY3QgZHVyYXRpb24uPGJyPjxiPislMyU8L2I+IGdvbGRlbiBjb29raWUgbGlmZXNwYW4uIiwNCiAgICAgICAgWzEsIDEsIDFdDQogICAgICApICsNCiAgICAgICAgIjxxPlRoaXMgdXBncmFkZSB0b29rIGFuIG9hdGggb2YgY29tcGxldGUgc2VjbHVzaW9uIGZyb20gdGhlIHJlc3Qgb2YgdGhlIHdvcmxkIGFuZCBvbmx5IGFwcGVhcnMgd2hlbiB5b3VyIHByZXN0aWdlIGxldmVsIGNvbnRhaW5zIGZvdXIgNydzLjwvcT4iLA0KICAgICAgNzc3Nzc3NzcsDQogICAgICBbMjQsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJMdWNreSBudW1iZXIiLCAiRGVjaXNpdmUgZmF0ZSJdOw0KICAgIEdhbWUubGFzdC5zaG93SWYgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gTWF0aC5jZWlsKChHYW1lLnByZXN0aWdlICsgIiIpLnNwbGl0KCI3IikubGVuZ3RoIC0gMSkgPj0gNDsNCiAgICB9Ow0KDQogICAgb3JkZXIgPSA1MDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkJhY2tncm91bmQgc2VsZWN0b3IiLA0KICAgICAgbG9jKCJMZXRzIHlvdSBwaWNrIHdoaWNoIHdhbGxwYXBlciB0byBkaXNwbGF5LiIpLA0KICAgICAgMCwNCiAgICAgIFsyOSwgNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5kZXNjRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBjaG9pY2UgPSB0aGlzLmNob2ljZXNGdW5jdGlvbigpW0dhbWUuYmdUeXBlXTsNCiAgICAgIGlmIChjaG9pY2UgPT0gMCkgY2hvaWNlID0gdGhpcy5jaG9pY2VzRnVuY3Rpb24oKVswXTsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBsb2MoIkN1cnJlbnQ6IikgKw0KICAgICAgICAiICIgKw0KICAgICAgICB0aW55SWNvbihjaG9pY2UuaWNvbikgKw0KICAgICAgICAiIDxiPiIgKw0KICAgICAgICBjaG9pY2UubmFtZSArDQogICAgICAgICc8L2I+PC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCg0KICAgIEdhbWUubGFzdC5wb29sID0gInRvZ2dsZSI7DQogICAgR2FtZS5sYXN0LmNob2ljZXNGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBjaG9pY2VzID0gW107DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuQkdzQnlDaG9pY2UpIHsNCiAgICAgICAgY2hvaWNlc1tpXSA9IHsNCiAgICAgICAgICBuYW1lOiBHYW1lLkJHc0J5Q2hvaWNlW2ldLm5hbWUsDQogICAgICAgICAgaWNvbjogR2FtZS5CR3NCeUNob2ljZVtpXS5pY29uLA0KICAgICAgICAgIG9yZGVyOiBHYW1lLkJHc0J5Q2hvaWNlW2ldLm9yZGVyIHx8IHBhcnNlSW50KGkpLA0KICAgICAgICB9Ow0KICAgICAgfQ0KDQogICAgICBjaG9pY2VzWzEzXS5kaXYgPSB0cnVlOw0KDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNob2ljZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgdmFyIGl0ID0gY2hvaWNlc1tpXTsNCiAgICAgICAgaWYgKGl0Lm9yZGVyID49IDQuOSAmJiAhR2FtZS5IYXMoIkRpc3Rpbmd1aXNoZWQgd2FsbHBhcGVyIGFzc29ydG1lbnQiKSkNCiAgICAgICAgICBjaG9pY2VzW2ldID0gMDsNCiAgICAgIH0NCg0KICAgICAgY2hvaWNlc1tHYW1lLmJnVHlwZV0uc2VsZWN0ZWQgPSAxOw0KICAgICAgcmV0dXJuIGNob2ljZXM7DQogICAgfTsNCiAgICBHYW1lLmxhc3QuY2hvaWNlc1BpY2sgPSBmdW5jdGlvbiAoaWQpIHsNCiAgICAgIEdhbWUuYmdUeXBlID0gaWQ7DQogICAgfTsNCg0KICAgIEdhbWUuQWxsQkdzID0gWw0KICAgICAgeyBwaWM6ICJiZ0JsdWUiLCBuYW1lOiAiQXV0b21hdGljIiwgaWNvbjogWzAsIDddIH0sDQogICAgICB7IHBpYzogImJnQmx1ZSIsIG5hbWU6ICJCbHVlIiwgaWNvbjogWzIxLCAyMV0gfSwNCiAgICAgIHsgcGljOiAiYmdSZWQiLCBuYW1lOiAiUmVkIiwgaWNvbjogWzIyLCAyMV0gfSwNCiAgICAgIHsgcGljOiAiYmdXaGl0ZSIsIG5hbWU6ICJXaGl0ZSIsIGljb246IFsyMywgMjFdIH0sDQogICAgICB7IHBpYzogImJnQmxhY2siLCBuYW1lOiAiQmxhY2siLCBpY29uOiBbMjQsIDIxXSB9LA0KICAgICAgeyBwaWM6ICJiZ0dvbGQiLCBuYW1lOiAiR29sZCIsIGljb246IFsyNSwgMjFdIH0sDQogICAgICB7IHBpYzogImdyYW5kbWFzMSIsIG5hbWU6ICJHcmFuZG1hcyIsIGljb246IFsyNiwgMjFdIH0sDQogICAgICB7IHBpYzogImdyYW5kbWFzMiIsIG5hbWU6ICJEaXNwbGVhc2VkIGdyYW5kbWFzIiwgaWNvbjogWzI3LCAyMV0gfSwNCiAgICAgIHsgcGljOiAiZ3JhbmRtYXMzIiwgbmFtZTogIkFuZ2VyZWQgZ3JhbmRtYXMiLCBpY29uOiBbMjgsIDIxXSB9LA0KICAgICAgeyBwaWM6ICJiZ01vbmV5IiwgbmFtZTogIk1vbmV5IiwgaWNvbjogWzI5LCAyMV0gfSwNCiAgICAgIHsgcGljOiAiYmdQdXJwbGUiLCBuYW1lOiAiUHVycGxlIiwgaWNvbjogWzIxLCAyMl0sIG9yZGVyOiAxLjEgfSwNCiAgICAgIHsgcGljOiAiYmdQaW5rIiwgbmFtZTogIlBpbmsiLCBpY29uOiBbMjQsIDIyXSwgb3JkZXI6IDIuMSB9LA0KICAgICAgeyBwaWM6ICJiZ01pbnQiLCBuYW1lOiAiTWludCIsIGljb246IFsyMiwgMjJdLCBvcmRlcjogMi4yIH0sDQogICAgICB7IHBpYzogImJnU2lsdmVyIiwgbmFtZTogIlNpbHZlciIsIGljb246IFsyNSwgMjJdLCBvcmRlcjogNC45IH0sDQogICAgICB7IHBpYzogImJnQlciLCBuYW1lOiAiQmxhY2sgJiBXaGl0ZSIsIGljb246IFsyMywgMjJdLCBvcmRlcjogNC4xIH0sDQogICAgICB7IHBpYzogImJnU3BlY3RydW0iLCBuYW1lOiAiU3BlY3RydW0iLCBpY29uOiBbMjgsIDIyXSwgb3JkZXI6IDQuMiB9LA0KICAgICAgeyBwaWM6ICJiZ0NhbmR5IiwgbmFtZTogIkNhbmR5IiwgaWNvbjogWzI2LCAyMl0gfSwNCiAgICAgIHsgcGljOiAiYmdZZWxsb3dCbHVlIiwgbmFtZTogIkJpc2N1aXQgc3RvcmUiLCBpY29uOiBbMjcsIDIyXSB9LA0KICAgICAgeyBwaWM6ICJiZ0Nob2NvIiwgbmFtZTogIkNob2NvbGF0ZSIsIGljb246IFszMCwgMjFdIH0sDQogICAgICB7IHBpYzogImJnQ2hvY29EYXJrIiwgbmFtZTogIkRhcmsgQ2hvY29sYXRlIiwgaWNvbjogWzMxLCAyMV0gfSwNCiAgICAgIHsgcGljOiAiYmdQYWludCIsIG5hbWU6ICJQYWludGVyIiwgaWNvbjogWzI0LCAzNF0gfSwNCiAgICAgIHsgcGljOiAiYmdTbm93eSIsIG5hbWU6ICJTbm93IiwgaWNvbjogWzMwLCAyMl0gfSwNCiAgICAgIHsgcGljOiAiYmdTa3kiLCBuYW1lOiAiU2t5IiwgaWNvbjogWzI5LCAyMl0gfSwNCiAgICAgIHsgcGljOiAiYmdTdGFycyIsIG5hbWU6ICJOaWdodCIsIGljb246IFszMSwgMjJdIH0sDQogICAgICB7IHBpYzogImJnRm9pbCIsIG5hbWU6ICJGb2lsIiwgaWNvbjogWzI1LCAzNF0gfSwNCiAgICBdOw0KICAgIEdhbWUuQkdzQnlDaG9pY2UgPSB7fTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUuQWxsQkdzLmxlbmd0aDsgaSsrKSB7DQogICAgICBHYW1lLkJHc0J5Q2hvaWNlW2ldID0gR2FtZS5BbGxCR3NbaV07DQogICAgfQ0KICAgIGlmICghRU4pIHsNCiAgICAgIEdhbWUuQkdzQnlDaG9pY2VbMF0ubmFtZSA9IGxvYyhHYW1lLkJHc0J5Q2hvaWNlWzBdLm5hbWUpOw0KICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBHYW1lLkJHc0J5Q2hvaWNlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIEdhbWUuQkdzQnlDaG9pY2VbaV0ubmFtZSA9ICciJyArIEdhbWUuQkdzQnlDaG9pY2VbaV0ucGljICsgJyInOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIG9yZGVyID0gMjU1Ow0KICAgIEdhbWUuR3JhbmRtYVN5bmVyZ3koDQogICAgICAiTHVja3kgZ3JhbmRtYXMiLA0KICAgICAgIkEgZm9ydHVuYXRlIGdyYW5kbWEgdGhhdCBhbHdheXMgc2VlbXMgdG8gZmluZCBtb3JlIGNvb2tpZXMuIiwNCiAgICAgICJDaGFuY2VtYWtlciINCiAgICApOw0KDQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJZb3VyIGx1Y2t5IGNvb2tpZSIsDQogICAgICAiPHE+VGhpcyBpcyB0aGUgZmlyc3QgY29va2llIHlvdSd2ZSBldmVyIGJha2VkLiBJdCBob2xkcyBhIGRlZXAgc2VudGltZW50YWwgdmFsdWUgYW5kLCBhZnRlciBhbGwgdGhpcyB0aW1lLCBhbiBpbnRlcmVzdGluZyBzbWVsbC48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAnIkFsbCBCZXRzIEFyZSBPZmYiIG1hZ2ljIGNvaW4nLA0KICAgICAgIjxxPkEgY29pbiB0aGF0IGFsd2F5cyBsYW5kcyBvbiB0aGUgb3RoZXIgc2lkZSB3aGVuIGZsaXBwZWQuIE5vdCBoZWFkcywgbm90IHRhaWxzLCBub3QgdGhlIGVkZ2UuIFRoZSA8aT5vdGhlciBzaWRlPC9pPi48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2lubmluZyBsb3R0ZXJ5IHRpY2tldCIsDQogICAgICAiPHE+V2hhdCBsb3R0ZXJ5PyBUSEUgbG90dGVyeSwgdGhhdCdzIHdoYXQgbG90dGVyeSEgT25seSBsb3R0ZXJ5IHRoYXQgbWF0dGVycyE8L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAzDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm91ci1sZWFmIGNsb3ZlciBmaWVsZCIsDQogICAgICAiPHE+Tm8gZ2lhbnQgbW9uc3RlcnMgaGVyZSwganVzdCBhIHdob2xlIGxvdCBvZiBsdWNreSBncmFzcy48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQSByZWNpcGUgYm9vayBhYm91dCBib29rcyIsDQogICAgICAiPHE+VGlwIHRoZSBzY2FsZXMgaW4geW91ciBmYXZvciB3aXRoIDI4IGNyZWF0aXZlIG5ldyB3YXlzIHRvIGNvb2sgdGhlIGJvb2tzLjwvcT4iLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDUNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJMZXByZWNoYXVuIHZpbGxhZ2UiLA0KICAgICAgIjxxPllvdSd2ZSBmaW5hbGx5IGJlY29tZSBhY2NlcHRlZCBhbW9uZyB0aGUgbG9jYWwgbGVwcmVjaGF1bnMsIHdobyBsZW5kIHlvdSB0aGVpciBteXRoaWNhbCBsdWNrIGFzIGEgc2lnbiBvZiBmcmllbmRzaGlwIChhcyB3ZWxsIGFzIHNvbWUgcmF0aGVyIGZvdWwtdGFzdGluZyB0ZWEpLjwvcT4iLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDYNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJJbXByb2JhYmlsaXR5IGRyaXZlIiwNCiAgICAgICI8cT5BIHN0cmFuZ2UgZW5naW5lIHRoYXQgdHVybnMgc3RhdGlzdGljcyBvbiB0aGVpciBoZWFkLiBSZWNvbW1lbmRlZCBieSB0aGUgR3JhbmRtb3RoZXIncyBHdWlkZSB0byB0aGUgQmFrZXJ5LjwvcT4iLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDcNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbnRpc3VwZXJzdGlzdHJvbmljcyIsDQogICAgICAiPHE+QW4gZXhjaXRpbmcgbmV3IGZpZWxkIG9mIHJlc2VhcmNoIHRoYXQgbWFrZXMgdW5sdWNreSB0aGluZ3MgbHVja3kuIE5vIG1pcnJvciB1bmJyb2tlbiwgbm8gbGFkZGVyIHVud2Fsa2VkIHVuZGVyITwvcT4iLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDgNCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiR2VtbWVkIHRhbGlzbWFucyIsDQogICAgICAiPHE+R29vZC1sdWNrIGNoYXJtcyBjb3ZlcmVkIGluIGFuY2llbnQgYW5kIGV4Y3J1Y2lhdGluZ2x5IHJhcmUgY3J5c3RhbHMuIEEgbXVzdCBoYXZlIGZvciBqb2IgaW50ZXJ2aWV3cyE8L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAiTWluZSIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gY29uc3VsdGFudHMiLA0KICAgICAgc3RyS2l0dGVuRGVzYyArICI8cT5nbGFkIHRvIGJlIG92ZXJwYWlkIHRvIHdvcmsgd2l0aCB5b3UsIHNpcjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCA5KQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgOSwgMTgpOw0KDQogICAgb3JkZXIgPSA5OTk5OTsNCiAgICB2YXIgeWVhcnMgPSBNYXRoLmZsb29yKA0KICAgICAgKERhdGUubm93KCkgLSBuZXcgRGF0ZSgyMDEzLCA3LCA4KSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCAqIDM2NSkNCiAgICApOw0KICAgIC8vb25seSB1cGRhdGVzIG9uIHBhZ2UgbG9hZA0KICAgIC8vbWF5IGJlaGF2ZSBzdHJhbmdlbHkgb24gbGVhcCB5ZWFycw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmlydGhkYXkgY29va2llIiwNCiAgICAgIGRlc2M6ICI8cT4tPC9xPiIsDQogICAgICBpY29uOiBbMjIsIDEzXSwNCiAgICAgIHBvd2VyOiB5ZWFycywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLmxhc3QuYmFzZURlc2MgPQ0KICAgICAgbG9jKA0KICAgICAgICAiQ29va2llIHByb2R1Y3Rpb24gbXVsdGlwbGllciA8Yj4rJTElPC9iPiBmb3IgZXZlcnkgeWVhciBDb29raWUgQ2xpY2tlciBoYXMgZXhpc3RlZCAoY3VycmVudGx5OiA8Yj4rJTIlPC9iPikuIiwNCiAgICAgICAgWzEsIEJlYXV0aWZ5KHllYXJzKV0NCiAgICAgICkgKyAiPHE+VGhhbmsgeW91IGZvciBwbGF5aW5nIENvb2tpZSBDbGlja2VyITxicj4tT3J0ZWlsPC9xPiI7DQoNCiAgICBvcmRlciA9IDE1MDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFybXl0aHJpbCBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsNCiAgICAgICAgIjxxPlRoaXMgb25lIHRha2VzIGFib3V0IDUzIHBlb3BsZSB0byBwdXNoIGl0IGFyb3VuZCBhbmQgYW5vdGhlciA0OCB0byBqdW1wIGRvd24gb24gdGhlIGJ1dHRvbiBhbmQgdHJpZ2dlciBhIGNsaWNrLiBZb3UgY291bGQgc2F5IGl0J3MgZ290IHNvbWUgaGVmdCB0byBpdC48L3E+IiwNCiAgICAgIDUwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAxOV0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEwLCAxMSk7DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUmV2ZXJzZSBkZW1lbnRpYSIsDQogICAgICAiPHE+RXh0cmVtZWx5IHVuc2V0dGxpbmcsIGFuZCBzb21laG93IGV2ZW4gd29yc2UgdGhhbiB0aGUgcmVndWxhciBraW5kLjwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkh1bWFuZSBwZXN0aWNpZGVzIiwNCiAgICAgICI8cT5NYWRlIGJ5IHBlb3BsZSwgZm9yIHBlb3BsZSwgZnJvbSBwZW9wbGUgYW5kIHJlYWR5IHRvIHVubGVhc2ggc29tZSByaWdodGVvdXMgc2NvcmNoaW5nIHBhaW4gb24gdGhvc2UgcGVza3kgaW5zZWN0cyB0aGF0IHNvIGRlc2VydmUgaXQuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDQwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTW9sZSBwZW9wbGUiLA0KICAgICAgIjxxPkVuZ2luZWVyZWQgZnJvbSByZWFsIGh1bWFuIGJlaW5ncyB3aXRoaW4geW91ciB2ZXJ5IGxhYnMsIHRoZXNlIHN0dXJkeSBsaXR0bGUgZm9sa3MgaGF2ZSBhIGtuYWNrIGZvciBmaW5kaW5nIHRoZSB0YXN0aWVzdCB1bmRlcmdyb3VuZCBtaW5lcmFscyBpbiBjb25kaXRpb25zIHRoYXQgbW9yZSBleHBlbnNpdmUgbWFjaGluZXJ5IHByb2JhYmx5IHdvdWxkbid0IHN1cnZpdmUuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDUwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTWFjaGluZSBsZWFybmluZyIsDQogICAgICAiPHE+WW91IGZpZ3VyZWQgeW91IG1pZ2h0IGdldCBiZXR0ZXIgcHJvZHVjdGl2aXR5IGlmIHlvdSBhY3R1YWxseSB0b2xkIHlvdXIgd29ya2VycyB0byBsZWFybiBob3cgdG8gd29yayB0aGUgbWFjaGluZXMuIFNvbWV0aW1lcywgaXQncyB0aGUgbGl0dGxlIHRoaW5ncy4uLjwvcT4iLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkVkaWJsZSBtb25leSIsDQogICAgICAiPHE+SXQncyByZWFsbHkgcXVpdGUgc2ltcGxlOyB5b3UgbWFrZSBhbGwgY3VycmVuY3kgdG9vIGRlbGljaW91cyBub3QgdG8gZWF0LCBzb2x2aW5nIHdvcmxkIGh1bmdlciBhbmQgaW5mbGF0aW9uIGluIG9uZSBmZWxsIHN3b29wITwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSA1NTA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlNpY2sgcmFwIHByYXllcnMiLA0KICAgICAgIjxxPldpdGggdGhlaXIgaWxsIGJlYXQgYW5kIHJhZGljYWwgcmh5bWVzLCB0aGVzZSB3YXktaGlwIHJlbGlnaW91cyB0dW5lcyBhcmUgc3VyZSB0byBnZXQgYWxsIHRoZSB5b3VuZ2lucyB3aG8gdGhvdWdodCB0aGV5IHdlcmUgMiBjb29sIDQgY2h1cmNoIGJhY2sgb24gdGhlIHBld3MgYW5kIHByYXlpbmcgZm9yIG1vcmUhIFdpY2tlZCE8L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSA1NzU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRlbHV4ZSB0YWlsb3JlZCB3YW5kcyIsDQogICAgICAiPHE+SW4gdGhpcyBhZ2Ugb2Ygc2NpZW5jZSwgbW9zdCBza2lsbGZ1bCB3YW5kLW1ha2VycyBhcmUgbm93IGxvbmcgZ29uZTsgYnV0IHRoYW5rZnVsbHkgLSBub3QgYWxsIHRob3NlIHdhbmRlcnMgYXJlIGxvc3QuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDkNCiAgICApOw0KICAgIG9yZGVyID0gNjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBdXRvcGlsb3QiLA0KICAgICAgIjxxPllvdXIgc2hpcHMgYXJlIG5vdyBmaXR0ZWQgd2l0aCBjb21wbGV0ZWx5IHJvYm90aWMgY3Jld3MhIEl0J3MgY3JhenkgaG93IG11Y2ggbW9uZXkgeW91IHNhdmUgd2hlbiB5b3UgZG9uJ3QgaGF2ZSB0byBjb21wZW5zYXRlIHRoZSBmYW1pbGllcyBvZiB0aG9zZSBsb3N0IGluIHNwYWNlLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDkNCiAgICApOw0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGUgYWR2ZW50IG9mIGNoZW1pc3RyeSIsDQogICAgICAiPHE+WW91IGtub3cgd2hhdD8gVGhhdCB3aG9sZSBhbGNoZW15IG5vbnNlbnNlIHdhcyBhIGxvYWQgb2YgYmFzZWxlc3MgcnViYmlzaC4gRGVhciBnb2QsIHdoYXQgd2VyZSB5b3UgdGhpbmtpbmc/PC9xPiIsDQogICAgICAiQWxjaGVteSBsYWIiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSA4MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRoZSByZWFsIHdvcmxkIiwNCiAgICAgICI8cT5JdCB0dXJucyBvdXQgdGhhdCBvdXIgdW5pdmVyc2UgaXMgYWN0dWFsbHkgdGhlIHR3aXN0ZWQgZGltZW5zaW9uIG9mIGFub3RoZXIsIHNhbmVyIHBsYW5lIG9mIHJlYWxpdHkuIFRpbWUgdG8gaG9wIG9uIG92ZXIgdGhlcmUgYW5kIGxvb3QgdGhlIHBsYWNlITwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU2Vjb25kIHNlY29uZHMiLA0KICAgICAgIjxxPlRoYXQncyB0d2ljZSBhcyBtYW55IHNlY29uZHMgaW4gdGhlIHNhbWUgYW1vdW50IG9mIHRpbWUhIFdoYXQgYSBkZWFsISBBbHNvLCB3aGF0IGluIGdvZCdzIG5hbWUhPC9xPiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDkNCiAgICApOw0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUXVhbnR1bSBjb21iIiwNCiAgICAgICI8cT5RdWFudHVtIGVudGFuZ2xlbWVudCBpcyBvbmUgb2YgdGhvc2UgdGhpbmdzIHRoYXQgYXJlIHNvIGFubm95aW5nIHRvIGV4cGxhaW4gdGhhdCB3ZSBtaWdodCBob25lc3RseSBiZSBiZXR0ZXIgb2ZmIHdpdGhvdXQgaXQuIFRoaXMgaXMgZmluYWxseSBwb3NzaWJsZSB0aGFua3MgdG8gdGhlIHF1YW50dW0gY29tYiE8L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNyeXN0YWwgbWlycm9ycyIsDQogICAgICAiPHE+RGVzaWduZWQgdG8gZmlsdGVyIG1vcmUgbGlnaHQgYmFjayBpbnRvIHlvdXIgcHJpc21zLCByZWFjaGluZyBsZXZlbHMgb2YgYnJpZ2h0bmVzcyB0aGF0IHJlYWxpdHkgaXRzZWxmIGhhZCBuZXZlciBwbGFubmVkIGZvci48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICA5DQogICAgKTsNCiAgICBvcmRlciA9IDEyMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJ1bm55cGVkZXMiLA0KICAgICAgIjxxPllvdSd2ZSB0YWtlbiB0byBicmVlZGluZyByYWJiaXRzIHdpdGggaHVuZHJlZHMgb2YgcGF3cywgd2hpY2ggbWFrZXMgdGhlbSBpbnRyaW5zaWNhbGx5IHZlcnkgbHVja3kgYW5kIHRodXMgYSB2ZXJ5IGhhbmR5IChpZiB2ZXJ5IGRpc3R1cmJpbmcpIHBldC48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICA5DQogICAgKTsNCg0KICAgIG9yZGVyID0gMjAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gYXNzaXN0YW50cyB0byB0aGUgcmVnaW9uYWwgbWFuYWdlciIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsNCiAgICAgICAgIjxxPm5vdGhpbmcgc3RyZXNzZXMgbWVvd3QuLi4gZXhjZXB0IGhhdmluZyB0byBzZWVrIHRoZSBhcHByb3ZhbCBvZiBteSBpbmZlcmlvcnMsIHNpcjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCAxMCkNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEwLCAxOCk7DQoNCiAgICBvcmRlciA9IDUwMDA7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJDaGFybSBxdWFya3MiLA0KICAgICAgIjxxPlRoZXkncmUgYWZ0ZXIgeW91ciBsdWNreSBxdWFya3MhPC9xPiIsDQogICAgICAiQ2hhbmNlbWFrZXIiLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgICJzeW5lcmd5MiINCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBpbmsgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIk9uZSBvZiB0aGUgb2xkZXN0IGNvb2tpZXMuIFRyYWRpdGlvbmFsbHkgZGlwcGVkIGluIGNoYW1wYWduZSB0byBzb2Z0ZW4gaXQsIGJlY2F1c2UgdGhlIEZyZW5jaCB3aWxsIHVzZSBhbnkgb3Bwb3J0dW5pdHkgdG8gZHJpbmsuIiwNCiAgICAgIGljb246IFsyMSwgMTZdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiV2hvbGUtZ3JhaW4gY29va2llcyIsDQogICAgICBkZXNjOiAnQ292ZXJlZCBpbiBzZWVkcyBhbmQgb3RoZXIgZWFydGh5LWxvb2tpbmcgZGVicmlzLiBSZWFsbHkgZ29pbmcgZm9yIHRoYXQgIjUtc2Vjb25kIHJ1bGUiIGxvb2suJywNCiAgICAgIGljb246IFsyMiwgMTZdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhbmR5IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIG1lbHQgaW4geW91ciBoYW5kcyBqdXN0IGEgbGl0dGxlIGJpdC4iLA0KICAgICAgaWNvbjogWzIzLCAxNl0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmlnIGNoaXAgY29va2llcyIsDQogICAgICBkZXNjOiAiWW91IGFyZSBpbiBhd2UgYXQgdGhlIHNpemUgb2YgdGhlc2UgY2hpcHMuIEFic29sdXRlIHVuaXRzLiIsDQogICAgICBpY29uOiBbMjQsIDE2XSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiT25lIGNoaXAgY29va2llcyIsDQogICAgICBkZXNjOiAiWW91IGdldCBvbmUuIiwNCiAgICAgIGljb246IFsyNSwgMTZdLA0KICAgICAgcG93ZXI6IDEsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN1Z2FyIGJha2luZyIsDQogICAgICBsb2MoDQogICAgICAgICdFYWNoIHVuc3BlbnQgc3VnYXIgbHVtcCAodXAgdG8gJTEpIGdpdmVzIDxiPislMiUgQ3BTPC9iPi48ZGl2IGNsYXNzPSJ3YXJuaW5nIj5Ob3RlOiB0aGlzIG1lYW5zIHRoYXQgc3BlbmRpbmcgc3VnYXIgbHVtcHMgd2lsbCBkZWNyZWFzZSB5b3VyIENwUyB1bnRpbCB0aGV5IGdyb3cgYmFjay48L2Rpdj4nLA0KICAgICAgICBbMTAwLCAxXQ0KICAgICAgKSArDQogICAgICAgICI8cT5UbyBiYWtlIHdpdGggdGhlIHN1Z2FyeSBlc3NlbmNlIG9mIGVvbnMgdGhlbXNlbHZlcywgeW91IG11c3QgZmlyc3QgbGVhcm4gdG8gdGFrZSB5b3VyIHN3ZWV0IHRpbWUuPC9xPiIsDQogICAgICAyMDAwMDAwMDAsDQogICAgICBbMjEsIDE3XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdGV2aWEgQ2FlbGVzdGlzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdWdhciBjcmF2aW5nIiwNCiAgICAgIGxvYygNCiAgICAgICAgJ09uY2UgYW4gYXNjZW5zaW9uLCB5b3UgbWF5IHVzZSB0aGUgIlN1Z2FyIGZyZW56eSIgc3dpdGNoIHRvIDxiPnRyaXBsZSB5b3VyIENwUzwvYj4gZm9yIDEgaG91ciwgYXQgdGhlIGNvc3Qgb2YgPGI+MSBzdWdhciBsdW1wPC9iPi4nDQogICAgICApICsgIjxxPkp1c3QgYSBsaXR0bGUga2ljayB0byBzd2VldGVuIHRoZSBkZWFsLjwvcT4iLA0KICAgICAgNDAwMDAwMDAwLA0KICAgICAgWzIyLCAxN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiU3VnYXIgYmFraW5nIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdWdhciBhZ2luZyBwcm9jZXNzIiwNCiAgICAgIGxvYygiRWFjaCBncmFuZG1hICh1cCB0byAlMSkgbWFrZXMgc3VnYXIgbHVtcHMgcmlwZW4gPGI+JTI8L2I+IHNvb25lci4iLCBbDQogICAgICAgIDYwMCwNCiAgICAgICAgR2FtZS5zYXlUaW1lKDYgKiBHYW1lLmZwcyksDQogICAgICBdKSArICI8cT5BcmVuJ3QgdGhleSBqdXN0IHRoZSBzd2VldGVzdD88L3E+IiwNCiAgICAgIDYwMDAwMDAwMCwNCiAgICAgIFsyMywgMTddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlN1Z2FyIGNyYXZpbmciLCAiRGlhYmV0aWNhIERhZW1vbmljdXMiXTsNCg0KICAgIG9yZGVyID0gNDAwNTA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJTdWdhciBmcmVuenkiLA0KICAgICAgbG9jKA0KICAgICAgICAiQWN0aXZhdGluZyB0aGlzIHdpbGwgPGI+dHJpcGxlIHlvdXIgQ3BTPC9iPiBmb3IgMSBob3VyLCBhdCB0aGUgY29zdCBvZiA8Yj4xIHN1Z2FyIGx1bXA8L2I+LiINCiAgICAgICkgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoIk1heSBvbmx5IGJlIHVzZWQgb25jZSBwZXIgYXNjZW5zaW9uLiIpLA0KICAgICAgMCwNCiAgICAgIFsyMiwgMTddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucHJpY2VMdW1wcyA9IDE7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QudG9nZ2xlSW50byA9IDA7DQogICAgR2FtZS5sYXN0LmNhbkJ1eUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gR2FtZS5sdW1wcyA+PSAxOw0KICAgIH07DQogICAgR2FtZS5sYXN0LmNsaWNrRnVuY3Rpb24gPSBHYW1lLnNwZW5kTHVtcCgNCiAgICAgIDEsDQogICAgICBsb2MoImFjdGl2YXRlIHRoZSBzdWdhciBmcmVuenkiKSwNCiAgICAgIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5VcGdyYWRlc1siU3VnYXIgZnJlbnp5Il0uYnV5KDEpOw0KICAgICAgICBidWZmID0gR2FtZS5nYWluQnVmZigic3VnYXIgZnJlbnp5IiwgNjAgKiA2MCwgMyk7DQogICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgIGxvYygiU3VnYXIgZnJlbnp5ISIpLA0KICAgICAgICAgIGxvYygiQ3BTIHglMSBmb3IgMSBob3VyISIsIDMpLA0KICAgICAgICAgIFsyOSwgMTRdDQogICAgICAgICk7DQogICAgICB9DQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTcHJpbmtsZXMgY29va2llcyIsDQogICAgICBkZXNjOiAiQSBiaXQgb2YgZmVzdGl2ZSBkZWNvcmF0aW5nIGhlbHBzIGhpZGUgdGhlIGZhY3QgdGhhdCB0aGlzIG1pZ2h0IGJlIG9uZSBvZiB0aGUgYmxhbmRlc3QgY29va2llcyB5b3UndmUgZXZlciB0YXN0ZWQuIiwNCiAgICAgIGljb246IFsyMSwgMTRdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGVhbnV0IGJ1dHRlciBibG9zc29tcyIsDQogICAgICBkZXNjOiAiVG9wcGVkIHdpdGggYSBzY3J1bXB0aW91cyBjaG9jb2xhdGUgc3F1aXJ0LCB3aGljaCBpcyBzb21ldGhpbmcgd2UgcmVhbGx5IHdpc2ggd2UgZGlkbid0IGp1c3Qgd3JpdGUuIiwNCiAgICAgIGljb246IFsyMiwgMTRdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTm8tYmFrZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJZb3UgaGF2ZSBubyBpZGVhIGhvdyB0aGVzZSBteXN0ZXJpb3VzIG92ZW4tbGVzcyB0cmVhdHMgY2FtZSB0byBiZSBvciBob3cgdGhleSBob2xkIHRoZWlyIHNoYXBlLiBZb3UncmUgdGhpbmtpbmcgZWl0aGVyIGVsZXBoYW50IGdsdWUgb3IgY29sZCBmdXNpb24uIiwNCiAgICAgIGljb246IFsyMSwgMTVdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkZsb3JlbnRpbmVzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSBtYWtlIHVwIGZvciBiZWluZyB0aGUgZnJ1aXRjYWtlIG9mIGNvb2tpZXMgYnkgYXQgbGVhc3QgaGF2aW5nIHRoZSBkZWNlbmN5IHRvIGZlYXR1cmUgY2hvY29sYXRlLiIsDQogICAgICBpY29uOiBbMjYsIDE2XSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDaG9jb2xhdGUgY3JpbmtsZXMiLA0KICAgICAgZGVzYzogIk5vbi1kZW5vbWluYXRpb25hbCBjb29raWVzIHRvIGNlbGVicmF0ZSB5ZWFyLXJvdW5kIGRlbGljaW91c25lc3MsIGFuZCBjZXJ0YWlubHkgbm90IENocmlzdG1hcyBvciBzb21lIG90aGVyIG5vbnNlbnNlLiIsDQogICAgICBpY29uOiBbMjIsIDE1XSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWFwbGUgY29va2llcyIsDQogICAgICBkZXNjOiAiTWFkZSB3aXRoIHN5cnVwIGZyb20gYSBsYW5kIHdoZXJlIG1pbGsgY29tZXMgaW4gYmFncywgaW5zdGVhZCBvZiBzcG9udGFuZW91c2x5IHBvb2xpbmcgYXQgdGhlIGJvdHRvbSBvZiB5b3VyIHNjcmVlbiBkZXBlbmRpbmcgb24geW91ciBhY2hpZXZlbWVudHMuIiwNCiAgICAgIGljb246IFsyMSwgMTNdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDQwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVHVyYm8tY2hhcmdlZCBzb2lsIiwNCiAgICAgIGxvYygNCiAgICAgICAgIkdhcmRlbiBwbGFudHMgZ3JvdyBldmVyeSBzZWNvbmQuPGJyPkdhcmRlbiBzZWVkcyBhcmUgZnJlZSB0byBwbGFudC48YnI+WW91IGNhbiBzd2l0Y2ggc29pbHMgYXQgYW55IHRpbWUuIg0KICAgICAgKSArICI8cT5JdCdzIGdvdCBlbGVjdHJvbHl0ZXMhPC9xPiIsDQogICAgICA3LA0KICAgICAgWzIsIDE2XQ0KICAgICk7IC8vZGVidWcgcHVycG9zZXMgb25seQ0KICAgIEdhbWUubGFzdC5idXlGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChHYW1lLk9iamVjdHNbIkZhcm0iXS5taW5pZ2FtZUxvYWRlZCkgew0KICAgICAgICBHYW1lLk9iamVjdHNbIkZhcm0iXS5taW5pZ2FtZS5jb21wdXRlU3RlcFQoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUubGFzdC5wb29sID0gImRlYnVnIjsNCg0KICAgIG9yZGVyID0gMTUwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiVGVjaG5vYnNpZGlhbiBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsNCiAgICAgICAgIjxxPkEgaGlnaGx5IGFkdmFuY2VkIG1vdXNlIG9mIGEgc29waGlzdGljYXRlZCBkZXNpZ24uIE9ubHkgb25lIHRoaW5nIG9uIGl0cyBtaW5kIDogdG8gY2xpY2suPC9xPiIsDQogICAgICA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAyOF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDExLCAxMSk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJQbGFzbWFyYmxlIG1vdXNlIiwNCiAgICAgIGdldFN0ckNsaWNraW5nR2FpbnMoMSkgKw0KICAgICAgICAiPHE+QSBzaGlmdGluZyBibHVyIGluIHRoZSBjb3JuZXIgb2YgeW91ciBleWUsIHRoaXMgbW91c2UgY2FuIHRyaWdnZXIgYSBmbHVycnkgb2YgY2xpY2tzIHdoZW4gZ3JhemVkIGJ5IGV2ZW4gdGhlIHNsaWdodGVzdCBicmVlemUuPC9xPiIsDQogICAgICA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMTEsIDMwXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMTIsIDExKTsNCg0KICAgIG9yZGVyID0gMjAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gbWFya2V0ZWVycyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPm5vIHN1Y2ggdGhpbmcgYXMgYSBzYXR1cmF0ZWQgbWFya2l0LCBzaXI8L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgMTEpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxMSwgMTgpOw0KDQogICAgb3JkZXIgPSAxMDAzMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkZlc3Rpdml0eSBsb29wcyIsDQogICAgICBkZXNjOiAiVGhlc2UgZ2FyaXNoIGJpc2N1aXRzIGFyZSBhIHBlcmZlY3QgZml0IGZvciBjaGlsZHJlbidzIGJpcnRoZGF5IHBhcnRpZXMgb3IgdGhlIGZ1bmVyYWxzIG9mIHN0cmFuZ2UsIGVjY2VudHJpYyBiaWxsaW9uYWlyZXMuIiwNCiAgICAgIGljb246IFsyNSwgMTddLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBlcnNpYW4gcmljZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJSb3NlIHdhdGVyIGFuZCBwb3BweSBzZWVkcyBhcmUgdGhlIHNlY3JldCBpbmdyZWRpZW50cyBvZiB0aGVzZSBzbWFsbCwgYnV0dGVyLWZyZWUgY29va2llcy4iLA0KICAgICAgaWNvbjogWzI4LCAxNV0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJOb3J3ZWdpYW4gY29va2llcyIsDQogICAgICBkZXNjOiAiQSBmbGF0IGJ1dHRlciBjb29raWUgd2l0aCBhIHNsaXZlciBvZiBjYW5kaWVkIGNoZXJyeSBvbiB0b3AuIEl0IGlzIHNhaWQgdGhhdCB0aGVzZSBpbGx1c3RyYXRlIHRoZSBibGVha25lc3Mgb2Ygc2NhbmRpbmF2aWFuIGV4aXN0ZW50aWFsaXNtLiIsDQogICAgICBpY29uOiBbMjIsIDIwXSwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNyaXNweSByaWNlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkZ1biB0byBtYWtlIGF0IGhvbWUhIFN0b3JlLWJvdWdodCBjb29raWVzIGFyZSBvYnNvbGV0ZSEgVG9wcGxlIHRoZSBzeXN0ZW0hIFRoZXJlJ3MgbWFyc2htYWxsb3dzIGluIHRoZXNlISBEZXN0cm95IGNhcGl0YWxpc20hIiwNCiAgICAgIGljb246IFsyMywgMjBdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlViZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGUgdGludCBpcyBvYnRhaW5lZCBieSB0aGUgdXNlIG9mIHB1cnBsZSB5YW1zLiBBY2NvcmRpbmcgdG8gY29sb3Igc3ltYm9saXNtLCB0aGVzZSBjb29raWVzIGFyZSBlaXRoZXIgbm9ibGUsIGhvbHksIG9yIHN1cGVydmlsbGFpbnMuIiwNCiAgICAgIGljb246IFsyNCwgMTddLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJ1dHRlcnNjb3RjaCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGUgYnV0dGVyc2NvdGNoIGNoaXBzIGFyZSBqdXN0IHRoZSByaWdodCBhbW91bnQgb2Ygc3RpY2t5LCBhbmQgbWFrZSB5b3UgZmVlbCBsaWtlIHlvdSdyZSBlYXRpbmcgY2FuZHkuIiwNCiAgICAgIGljb246IFsyNCwgMjBdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTcGVjdWxhYXMiLA0KICAgICAgZGVzYzogIlRoZXNlIGNydW5jaHksIGFsbW9zdCBvYm5veGlvdXNseSBjaW5uYW1vbnkgY29va2llcyBhcmUgYSBzb3VyY2Ugb2YgZHV0Y2ggcHJpZGUuIEFib3V0IHRoZSBvcmlnaW4gb2YgdGhlIG5hbWUsIG9uZSBjYW4gb25seSBzcGVjdWxhdGUuIiwNCiAgICAgIGljb246IFsyMSwgMjBdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMjAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRWxkZXJ3b3J0IGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICItIiwNCiAgICAgIGljb246IFsyMiwgMjVdLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogNjAgKiAyLA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KICAgIEdhbWUubGFzdC5iYXNlRGVzYyA9DQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMikgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiJTEgYXJlIDxiPiUyJTwvYj4gbW9yZSBwb3dlcmZ1bC4iLCBbDQogICAgICAgIGNhcChHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5wbHVyYWwpLA0KICAgICAgICAyLA0KICAgICAgXSkgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJFbGRlcndvcnQiKS50b0xvd2VyQ2FzZSgpKSArDQogICAgICAiPHE+VGhleSB0YXN0ZSBpbmNyZWRpYmx5IHN0YWxlLCBldmVuIHdoZW4gYmFrZWQgZnJlc2guPC9xPiI7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCYWtlYmVycnkgY29va2llcyIsDQogICAgICBkZXNjOiAiLSIsDQogICAgICBpY29uOiBbMjMsIDI1XSwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDYwLA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KICAgIEdhbWUubGFzdC5iYXNlRGVzYyA9DQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMikgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJCYWtlYmVycnkiKS50b0xvd2VyQ2FzZSgpKSArDQogICAgICAiPHE+UmVhbGx5IGdvb2QgZGlwcGVkIGluIGhvdCBjaG9jb2xhdGUuPC9xPiI7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJEdWtldGF0ZXIgY29va2llcyIsDQogICAgICBkZXNjOiAiLSIsDQogICAgICBpY29uOiBbMjQsIDI1XSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOiA2MCAqIDMsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQogICAgR2FtZS5sYXN0LmJhc2VEZXNjID0NCiAgICAgIGdldFN0ckNvb2tpZVByb2R1Y3Rpb25NdWx0aXBsaWVyUGx1cygxMCkgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJEdWtldGF0ZXIiKS50b0xvd2VyQ2FzZSgpKSArDQogICAgICAiPHE+RnJhZ3JhbnQgYW5kIG1lYWx5LCB3aXRoIGEgc2xpZ2h0IHllbGxvdyBhZnRlcnRhc3RlLjwvcT4iOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiR3JlZW4geWVhc3QgZGlnZXN0aXZlcyIsDQogICAgICBkZXNjOiAiLSIsDQogICAgICBpY29uOiBbMjUsIDI1XSwNCiAgICAgIHBvd2VyOiAwLA0KICAgICAgcHJpY2U6IDYwICogMywNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCiAgICBHYW1lLmxhc3QuYmFzZURlc2MgPQ0KICAgICAgbG9jKCJHb2xkZW4gY29va2llcyBnaXZlIDxiPiUxJTwvYj4gbW9yZSBjb29raWVzLiIsIDEpICsNCiAgICAgICI8YnI+IiArDQogICAgICBsb2MoIkdvbGRlbiBjb29raWUgZWZmZWN0cyBsYXN0IDxiPiUxJTwvYj4gbG9uZ2VyLiIsIDEpICsNCiAgICAgICI8YnI+IiArDQogICAgICBsb2MoIkdvbGRlbiBjb29raWVzIGFwcGVhciA8Yj4lMSU8L2I+IG1vcmUgb2Z0ZW4uIiwgMSkgKw0KICAgICAgIjxicj4iICsNCiAgICAgIGxvYygiUmFuZG9tIGRyb3BzIGFyZSA8Yj4lMSUgbW9yZSBjb21tb248L2I+LiIsIDMpICsNCiAgICAgICI8YnI+IiArDQogICAgICBsb2MoIkRyb3BwZWQgYnkgJTEgcGxhbnRzLiIsIGxvYygiR3JlZW4gcm90IikudG9Mb3dlckNhc2UoKSkgKw0KICAgICAgIjxxPlRoZXNlIGFyZSB0YXN0aWVyIHRoYW4geW91J2QgZXhwZWN0LCBidXQgbm90IGJ5IG11Y2guPC9xPiI7DQoNCiAgICBvcmRlciA9IDIzMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRmVybiB0ZWEiLA0KICAgICAgbG9jKA0KICAgICAgICAiWW91IGdhaW4gYW5vdGhlciA8Yj4rJTElPC9iPiBvZiB5b3VyIHJlZ3VsYXIgQ3BTIHdoaWxlIHRoZSBnYW1lIGlzIGNsb3NlZC4iLA0KICAgICAgICAzDQogICAgICApICsNCiAgICAgICAgIiA8c21hbGw+KCIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIk11c3Qgb3duIHRoZSAlMSB1cGdyYWRlLiIsDQogICAgICAgICAgZ2V0VXBncmFkZU5hbWUoIlR3aW4gR2F0ZXMgb2YgVHJhbnNjZW5kZW5jZSIpDQogICAgICAgICkgKw0KICAgICAgICAiKTwvc21hbGw+IiArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJEcm93c3lmZXJuIikudG9Mb3dlckNhc2UoKSkgKw0KICAgICAgICAiPHE+QSBjaGVtaWNhbGx5IGNvbXBsZXggbmF0dXJhbCBiZXZlcmFnZSwgdGhpcyBzb290aGluZyBjb25jb2N0aW9uIGhhcyBiZWVuIHVzZWQgYnkgbWF0aGVtYXRpY2lhbnMgdG8gc29sdmUgZXF1YXRpb25zIGluIHRoZWlyIHNsZWVwLjwvcT4iLA0KICAgICAgNjAsDQogICAgICBbMjYsIDI1XQ0KICAgICk7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJJY2hvciBzeXJ1cCIsDQogICAgICBsb2MoDQogICAgICAgICJZb3UgZ2FpbiBhbm90aGVyIDxiPislMSU8L2I+IG9mIHlvdXIgcmVndWxhciBDcFMgd2hpbGUgdGhlIGdhbWUgaXMgY2xvc2VkLiIsDQogICAgICAgIDcNCiAgICAgICkgKw0KICAgICAgICAiIDxzbWFsbD4oIiArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiTXVzdCBvd24gdGhlICUxIHVwZ3JhZGUuIiwNCiAgICAgICAgICBnZXRVcGdyYWRlTmFtZSgiVHdpbiBHYXRlcyBvZiBUcmFuc2NlbmRlbmNlIikNCiAgICAgICAgKSArDQogICAgICAgICIpPC9zbWFsbD4iICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJTdWdhciBsdW1wcyBtYXR1cmUgPGI+JTE8L2I+IHNvb25lci4iLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSg3ICogNjAgKiBHYW1lLmZwcykNCiAgICAgICAgKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygiRHJvcHBlZCBieSAlMSBwbGFudHMuIiwgbG9jKCJJY2hvcnB1ZmYiKS50b0xvd2VyQ2FzZSgpKSArDQogICAgICAgICI8cT5UYXN0ZXMgbGlrZSBjYW5keS4gVGhlIHNtZWxsIGlzIGFub3RoZXIgc3RvcnkuPC9xPiIsDQogICAgICA2MCAqIDIsDQogICAgICBbMjcsIDI1XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMjAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiV2hlYXQgc2xpbXMiLA0KICAgICAgZGVzYzogIi0iLA0KICAgICAgaWNvbjogWzI4LCAyNV0sDQogICAgICBwb3dlcjogMSwNCiAgICAgIHByaWNlOiAzMCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCiAgICBHYW1lLmxhc3QuYmFzZURlc2MgPQ0KICAgICAgZ2V0U3RyQ29va2llUHJvZHVjdGlvbk11bHRpcGxpZXJQbHVzKDEpICsNCiAgICAgICI8YnI+IiArDQogICAgICBsb2MoIkRyb3BwZWQgYnkgJTEgcGxhbnRzLiIsIGxvYygiQmFrZXIncyB3aGVhdCIpLnRvTG93ZXJDYXNlKCkpICsNCiAgICAgICI8cT5UaGUgb25seSByZWFzb24geW91J2QgY29uc2lkZXIgdGhlc2UgdG8gYmUgY29va2llcyBpcyBiZWNhdXNlIHlvdSBmZWVsIHNsaWdodGx5IHNvcnJ5IGZvciB0aGVtLjwvcT4iOw0KDQogICAgdmFyIGdhcmRlbkRyb3BzID0gWw0KICAgICAgIkVsZGVyd29ydCBiaXNjdWl0cyIsDQogICAgICAiQmFrZWJlcnJ5IGNvb2tpZXMiLA0KICAgICAgIkR1a2V0YXRlciBjb29raWVzIiwNCiAgICAgICJHcmVlbiB5ZWFzdCBkaWdlc3RpdmVzIiwNCiAgICAgICJGZXJuIHRlYSIsDQogICAgICAiSWNob3Igc3lydXAiLA0KICAgICAgIldoZWF0IHNsaW1zIiwNCiAgICBdOw0KICAgIGZvciAodmFyIGkgaW4gZ2FyZGVuRHJvcHMpIHsgLy9zY2FsZSBieSBDcFMNCiAgICAgIHZhciBpdCA9IEdhbWUuVXBncmFkZXNbZ2FyZGVuRHJvcHNbaV1dOw0KICAgICAgaXQucHJpY2VGdW5jID0gKGZ1bmN0aW9uIChjb3N0KSB7DQogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIGNvc3QgKiBHYW1lLmNvb2tpZXNQcyAqIDYwOw0KICAgICAgICB9Ow0KICAgICAgfSkoaXQuYmFzZVByaWNlKTsNCiAgICAgIGl0LmJhc2VEZXNjID0gaXQuYmFzZURlc2MucmVwbGFjZSgNCiAgICAgICAgIjxxPiIsDQogICAgICAgICI8YnI+IiArIGxvYygiQ29zdCBzY2FsZXMgd2l0aCBDcFMuIikgKyAiPHE+Ig0KICAgICAgKTsNCiAgICAgIGl0LmRlc2MgPSBCZWF1dGlmeUluVGV4dChpdC5iYXNlRGVzYyk7DQogICAgICBpdC5sYXN0aW5nID0gdHJ1ZTsNCiAgICB9DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiU3ludGhldGljIGNob2NvbGF0ZSBncmVlbiBob25leSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyAzNTAgb2YgZXZlcnl0aGluZy48YnI+VGhlIHJlY2lwZSBmb3IgdGhpcyBidXR0ZXIgYmlzY3VpdCB3YXMgb25jZSB0aGUgc29sZSBoZXJpdGFnZSBvZiBhbiBhbmNpZW50IG1vdW50YWluIG1vbmFzdGVyeS4gSXRzIGZsYXZvciBpcyBzbyByZWZpbmVkIHRoYXQgb25seSBhIHNsYWIgb2YgbGFiLW1hZGUgY2hvY29sYXRlIHNwZWNpZmljYWxseSBlbmdpbmVlcmVkIHRvIGJlIGNvbXBsZXRlbHkgdGFzdGVsZXNzIGNvdWxkIGNvbXBsZW1lbnQgaXQuPGJyPkFsc28gaXQncyBnb3QgeW91ciBmYWNlIG9uIGl0LiIsDQogICAgICBpY29uOiBbMjQsIDI2XSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiBidXR0ZXJCaXNjdWl0TXVsdCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlJveWFsIHJhc3BiZXJyeSBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiLA0KICAgICAgZGVzYzogIlJld2FyZGVkIGZvciBvd25pbmcgNDAwIG9mIGV2ZXJ5dGhpbmcuPGJyPk9uY2UgcmVzZXJ2ZWQgZm9yIHRoZSBtZWdhbG9tYW5pYWMgZWxpdGUsIHRoaXMgdW5pcXVlIHN0cmFpbiBvZiBmcnVpdHkgY2hvY29sYXRlIGhhcyBhIGZsYXZvciBhbmQgdGV4dHVyZSB1bmxpa2UgYW55IG90aGVyLiBXaGV0aGVyIGl0cyBleG9yYml0YW50IHdvcnRoIGlzIGltcHJvdmVkIG9yIGxlc3NlbmVkIGJ5IHRoZSBwcmVzZW5jZSBvZiB5b3VyIGxpa2VuZXNzIG9uIGl0IHN0aWxsIHJlbWFpbnMgdG8gYmUgc2Vlbi4iLA0KICAgICAgaWNvbjogWzI1LCAyNl0sDQogICAgICBwb3dlcjogMTAsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogYnV0dGVyQmlzY3VpdE11bHQsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJVbHRyYS1jb25jZW50cmF0ZWQgaGlnaC1lbmVyZ3kgY2hvY29sYXRlIGJ1dHRlciBiaXNjdWl0IiwNCiAgICAgIGRlc2M6ICJSZXdhcmRlZCBmb3Igb3duaW5nIDQ1MCBvZiBldmVyeXRoaW5nLjxicj5JbmZ1c2VkIHdpdGggdGhlIHBvd2VyIG9mIHNldmVyYWwgaHlkcm9nZW4gYm9tYnMgdGhyb3VnaCBhIHByb2Nlc3MgdGhhdCBsZWZ0IG1vc3QgbnVjbGVhciBlbmdpbmVlcnMgYW5kIHNoYXJlaG9sZGVycyBwZXJwbGV4ZWQuIEN1cnJlbnRseSBhdCB0aGUgY2VudGVyIG9mIHNvbWUgcmF0aGVyIGhlYXRlZCBVbml0ZWQgTmF0aW9ucyBtZWV0aW5ncy4gR29pbmcgaW4gbW9yZSBkZXRhaWwgYWJvdXQgdGhpcyBjaG9jb2xhdGUgd291bGQgdmlvbGF0ZSBzZXZlcmFsIHN0YXRlIHNlY3JldHMsIGJ1dCB3ZSdsbCBqdXN0IGFkZCB0aGF0IHNvbWVvbmUncyBidXN0IHNlZW1zIHRvIGJlIHBpY3R1cmVkIG9uIGl0LiBQZXJoYXBzIHlvdXJzPyIsDQogICAgICBpY29uOiBbMjYsIDI2XSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiBidXR0ZXJCaXNjdWl0TXVsdCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaW1lcHJvb2YgaGFpciBkeWVzIiwNCiAgICAgICI8cT5XaHkgZG8gdGhleSBhbHdheXMgaGF2ZSB0aG9zZSBzdHJhbmdlIHdpc3B5IHBpbmsgZG9zPyBXaGF0IGRvIHRoZXkga25vdyBhYm91dCBjYW5keSBmbG9zcyB0aGF0IHdlIGRvbid0PzwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJCYXJuc3RhcnMiLA0KICAgICAgIjxxPkFoLCB5ZXMuIFRoZXNlIGhlbHAgcXVpdGUgYSBiaXQuIFNvbWVob3cuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk1pbmUgY2FuYXJpZXMiLA0KICAgICAgIjxxPlRoZXNlIGFyZW4ndCB1c2VkIGZvciBhbnl0aGluZyBmcmVha3khIFRoZSBtaW5lcnMganVzdCBlbmpveSBoYXZpbmcgYSBwZXQgb3IgdHdvIGRvd24gdGhlcmUuPC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSA1MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJyb3duaWUgcG9pbnQgc3lzdGVtIiwNCiAgICAgICI8cT5PaCwgdGhlc2UgYXJlIGxvdmVseSEgWW91IGNhbiBub3cgcmV3YXJkIHlvdXIgZmFjdG9yeSBlbXBsb3llZXMgZm9yIGdvb2QgYmVoYXZpb3IsIHN1Y2ggYXMgd29ya2luZyBvdmVydGltZSBvciBzbml0Y2hpbmcgb24gY293b3JrZXJzLiA1OCBicm93bmllIHBvaW50cyBnZXRzIHlvdSBhIGxpdHRsZSBwaWN0dXJlIG9mIGEgYnJvd25pZSwgYW5kIDE3OCBvZiB0aG9zZSBwaWN0dXJlcyBnZXRzIHlvdSBhbiBhY3R1YWwgYnJvd25pZSBwaWVjZSBmb3IgeW91IHRvIGRvIHdpdGggYXMgeW91IHBsZWFzZSEgSW5mYW50aWxpemluZz8gTWF5YmUuIE9vZGxlcyBvZiBmdW4/IFlvdSBiZXRjaGEhPC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdyYW5kIHN1cGVyY3ljbGVzIiwNCiAgICAgICI8cT5XZSBsZXQgdGhlIHB1YmxpYyB0aGluayB0aGVzZSBhcmUgY29tcGxpY2F0ZWQgZmluYW5jaWFsIHRlcm1zIHdoZW4gcmVhbGx5IHdlJ3JlIGp1c3QgcmV3YXJkaW5nIHRoZSBiYW5rZXJzIHdpdGggc25henp5IGJpY3ljbGVzIGZvciBhIGpvYiB3ZWxsIGRvbmUuIEl0J3Mgb25seSBuYXR1cmFsIGFmdGVyIHlvdSBidWlsdCB0aG9zZSBmYW5jeSBnb2xkIHN3aW1taW5nIHBvb2xzIGZvciB0aGVtLCB3aGVyZSB0aGV5IGNhbiB0YWtlIGEgZGlwIGFuZCBjYXRjaCBLb25kcmF0aWV2IHdhdmVzLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gNTUwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQc2FsbS1yZWFkaW5nIiwNCiAgICAgICI8cT5BIHRoZW9sb2dpY2FsbHkgZHViaW91cyBhbmQgcG9zc2libHkgYmxhc3BoZW1vdXMgYmxlbmQgb2YgZm9ydHVuZS10ZWxsaW5nIGFuZCBzY3JpcHR1cmUgc3R1ZGllcy48L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gNTc1Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJJbW1vYmlsZSBzcGVsbGNhc3RpbmciLA0KICAgICAgIjxxPldpemFyZHMgd2hvIG1hc3RlciB0aGlzIHNraWxsIGNhbiBub3cgY2FzdCBzcGVsbHMgd2l0aG91dCBoYXZpbmcgdG8gaG9wIGFuZCBza2lwIGFuZCBnZXN0aWN1bGF0ZSBlbWJhcnJhc3NpbmdseSwgd2hpY2ggaXMgbXVjaCBzbmVha2llciBhbmQgaG9uZXN0bHkgcXVpdGUgYSByZWxpZWYuPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUmVzdGF1cmFudHMgYXQgdGhlIGVuZCBvZiB0aGUgdW5pdmVyc2UiLA0KICAgICAgIjxxPlNpbmNlIHRoZSB1bml2ZXJzZSBpcyBzcGF0aWFsbHkgaW5maW5pdGUsIGFuZCB0aGVyZWZvcmUgY2FuIGJlIGNvbnN0cnVlZCB0byBoYXZlIGluZmluaXRlIGVuZHMsIHlvdSd2ZSBvcGVuZWQgYW4gaW5maW5pdGUgY2hhaW4gb2YgcmVzdGF1cmFudHMgd2hlcmUgeW91ciBzcGFjZSB0cnVja2VycyBjYW4gcmVzdCBhbmQgcGFydGFrZSBpbiBzb21lIGhvbWUtYnJhbmQgY29va2llLWJhc2VkIG1lYWxzLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDcwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiT24gc2Vjb25kIHRob3VnaHQiLA0KICAgICAgIjxxPkRpc3JlZ2FyZCB0aGF0IGxhc3QgdXBncmFkZSwgYWxjaGVteSBpcyB3aGVyZSBpdCdzIGF0ISBZb3VyIGVnZ2hlYWRzIGp1c3QgZm91bmQgYSB3YXkgdG8gdHJhbnNtdXRlIGNoaWxkcmVuJ3MgbmlnaHRtYXJlcyBpbnRvIHJhcmUgbWV0YWxzITwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDgwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRGltZW5zaW9uYWwgZ2FyYmFnZSBndWxwZXIiLA0KICAgICAgIjxxPlNvIHdlJ3ZlIGJlZW4gbG9va2luZyBmb3IgYSBwbGFjZSB0byBkaXNwb3NlIG9mIGFsbCB0aGUgcmVmdXNlIHRoYXQncyBiZWVuIGFjY3VtdWxhdGluZyBzaW5jZSB3ZSBzdGFydGVkIGJha2luZyAtIGJ1cm50IGNvb2tpZXMsIGZhaWxlZCBleHBlcmltZW50cywgdW5ydWx5IHdvcmtlcnMgLSBhbmQgd2VsbCwgd2UgZmlndXJlZCByYXRoZXIgdGhhbiBzZWxsIGl0IHRvIHBvb3IgY291bnRyaWVzIGxpa2Ugd2UndmUgYmVlbiBkb2luZywgd2UgY291bGQganVzdCBkdW1wIGl0IGluIHNvbWUgYWx0ZXJuYXRlIHRyYXNoIGRpbWVuc2lvbiB3aGVyZSBpdCdzIG5vdCBnb25uYSBib3RoZXIgYW55Ym9keSEgUHJvYmFibHkhPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQWRkaXRpb25hbCBjbG9jayBoYW5kcyIsDQogICAgICAiPHE+SXQgc2VlbWVkIGxpa2UgYSBzaWxseSBpZGVhIGF0IGZpcnN0LCBidXQgaXQgdHVybnMgb3V0IHRoZXNlIGhhdmUgdGhlIHN0cmFuZ2UgYWJpbGl0eSB0byB0d2lzdCB0aW1lIGluIGludGVyZXN0aW5nIG5ldyB3YXlzLjwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJCYWtpbmcgTm9iZWwgcHJpemUiLA0KICAgICAgIjxxPldoYXQgYmV0dGVyIHdheSB0byBzcG9uc29yIHNjaWVudGlmaWMgZ3Jvd3RoIHRoYW4gdG8gbW90aXZhdGUgdGhvc2Ugc21hcm15IG5lcmRzIHdpdGggYSBtZWFuaW5nbGVzcyBhd2FyZCEgV2hhdCdzIG1vcmUsIGVhY2ggcHJpemUgY29tZXMgd2l0aCBhIGZpbmUgcHJpbnQgbGlmZWxvbmcgZXhjbHVzaXZlIGNvbnRyYWN0IHRvIGNvbWUgd29yayBmb3IgeW91IChvciBlbHNlKSE8L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSAxMTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSZXZlcnNlIHRoZW9yeSBvZiBsaWdodCIsDQogICAgICAiPHE+QSB3aG9sZSBuZXcgd29ybGQgb2YgcGh5c2ljcyBvcGVucyB1cCB3aGVuIHlvdSBkZWNpZGUgdGhhdCBhbnRpcGhvdG9ucyBhcmUgcmVhbCBhbmQgcG9zaXQgdGhhdCBsaWdodCBpcyBtZXJlbHkgYSB2b2lkIGluIHNoYWRvdy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJSZXZpc2VkIHByb2JhYmlsaXN0aWNzIiwNCiAgICAgICI8cT5FaXRoZXIgc29tZXRoaW5nIGhhcHBlbnMgb3IgaXQgZG9lc24ndC4gVGhhdCdzIGEgNTAlIGNoYW5jZSEgVGhpcyBzdWRkZW5seSBtYWtlcyBhIGxvdCBvZiB1bmxpa2VseSB0aGluZ3MgdmVyeSBwb3NzaWJsZS48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxMA0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGFuYWx5c3RzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKw0KICAgICAgICAiPHE+YmFzZWQgb24gcHVycmVudCByZXR1cm4tb24taW52ZXN0bWVudCBtZW93ZGVscyB3ZSBzaG91bGQgYmUgYWJsZSB0byBhZmZ1cmQgdG8gcGF5IG91ciBlbXBhd3llZXMgc29tZXdoZXJlIGFyb3VuZCBuZXh0IGNlbnR1cnksIHNpcjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgR2FtZS5HZXRJY29uKCJLaXR0ZW4iLCAxMikNCiAgICApOw0KICAgIEdhbWUubGFzdC5raXR0ZW4gPSAxOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDEyLCAxOCk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkV5ZSBvZiB0aGUgd3JpbmtsZXIiLA0KICAgICAgbG9jKCJNb3VzZSBvdmVyIGEgd3JpbmtsZXIgdG8gc2VlIGhvdyBtYW55IGNvb2tpZXMgYXJlIGluIGl0cyBzdG9tYWNoLiIpICsNCiAgICAgICAgIjxxPkp1c3QgYSB3cmlua2xlciBhbmQgaXRzIHdpbGwgdG8gc3Vydml2ZS48YnI+SGFuZ2luJyB0b3VnaCwgc3RheWluJyBodW5ncnkuPC9xPiIsDQogICAgICA5OTk5OTk5OSwNCiAgICAgIFsyNywgMjZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIldyaW5rbHkgY29va2llcyJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJJbnNwaXJlZCBjaGVja2xpc3QiLA0KICAgICAgbG9jKA0KICAgICAgICAiVW5sb2NrcyB0aGUgPGI+QnV5IGFsbDwvYj4gZmVhdHVyZSwgd2hpY2ggbGV0cyB5b3UgaW5zdGFudGx5IHB1cmNoYXNlIGV2ZXJ5IHVwZ3JhZGUgaW4geW91ciBzdG9yZSAoc3RhcnRpbmcgZnJvbSB0aGUgY2hlYXBlc3Qgb25lKS48YnI+QWxzbyB1bmxvY2tzIHRoZSA8Yj5WYXVsdDwvYj4sIGEgc3RvcmUgc2VjdGlvbiB3aGVyZSB5b3UgY2FuIHBsYWNlIHVwZ3JhZGVzIHlvdSBkbyBub3Qgd2lzaCB0byBhdXRvLWJ1eS4iDQogICAgICApICsNCiAgICAgICAgJzxxPlNuYXp6eSBncmFuZG1hIGFjY2Vzc29yaWVzPyBDaGVjay4gVHJhbnNkaW1lbnNpb25hbCBhYm9taW5hdGlvbnM/IENoZWNrLiBBIGJ1bmNoIG9mIGVnZ3MgZm9yIHNvbWUgcmVhc29uPyBDaGVjay4gTWFjaGluZSB0aGF0IGdvZXMgInBpbmciPyBDaGVjayBhbmQgY2hlY2suPC9xPicsDQogICAgICA5MDAwMDAsDQogICAgICBbMjgsIDI2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJQZXJzaXN0ZW50IG1lbW9yeSIsICJQZXJtYW5lbnQgdXBncmFkZSBzbG90IElJIl07DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUHVyZSBwaXRjaC1ibGFjayBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiLA0KICAgICAgZGVzYzogIlJld2FyZGVkIGZvciBvd25pbmcgNTAwIG9mIGV2ZXJ5dGhpbmcuPGJyPlRoaXMgY2hvY29sYXRlIGlzIHNvIHB1cmUgYW5kIHNvIGZsYXdsZXNzIHRoYXQgaXQgaGFzIG5vIGNvbG9yIG9mIGl0cyBvd24sIGluc3RlYWQgdGFraW5nIG9uIHRoZSBhcHBlYXJhbmNlIG9mIHdoYXRldmVyIGlzIGFyb3VuZCBpdC4gWW91J3JlIGEgYml0IHN1cnByaXNlZCB0byBub3RpY2UgdGhhdCB0aGlzIG9uZSBpc24ndCBzdGFtcGVkIHdpdGggeW91ciBlZmZpZ3ksIGFzIGl0cyBzdXJmYWNlIGlzIHBlcmZlY3RseSBzbW9vdGggKHRvIHRoZSBwaWNvbWV0ZXIpIC0gdW50aWwgeW91IHJlYWxpemUgaXQncyBxdWl0ZSBsaXRlcmFsbHkgcmVmbGVjdGluZyB5b3VyIG93biBmYWNlIGxpa2UgYSBtaXJyb3IuIiwNCiAgICAgIGljb246IFsyNCwgMjddLA0KICAgICAgcG93ZXI6IDEwLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIGJ1dHRlckJpc2N1aXRNdWx0LA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNob2NvbGF0ZSBvYXRtZWFsIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRoZXNlIGJhZCBib3lzIGNvbXBlbnNhdGUgZm9yIGxhY2sgb2YgYSBjb2hlc2l2ZSBmb3JtIGFuZCBhIGx1bXB5LCB1bnNpZ2h0bHkgYXBwZWFyYW5jZSBieSBiZWluZyBqdXN0IHNpbXBseSBkZWxpY2lvdXMuIFNvbWV0aGluZyB3ZSBzaG91bGQgYWxsIGFzcGlyZSB0by4iLA0KICAgICAgaWNvbjogWzIzLCAyOF0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJNb2xhc3NlcyBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJTdGlja3ksIGNyYWNrbHksIGFuZCBkdXN0ZWQgaW4gZmluZSBzdWdhci48YnI+U29tZSBsdW5hdGljcyBoYXZlIGJlZW4ga25vd24gdG8gZWF0IHRoZXNlIHdpdGggcG90YXRvZXMuIiwNCiAgICAgIGljb246IFsyNCwgMjhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQmlzY290dGkiLA0KICAgICAgZGVzYzogIkFsbW9uZHMgYW5kIHBpc3RhY2hpb3MgbWFrZSB0aGVzZSB2ZXJ5IHJvYnVzdCBjb29raWVzIHNsaWdodGx5IG1vcmUgaW50ZXJlc3RpbmcgdG8gZWF0IHRoYW4gdG8gYmx1ZGdlb24gcGVvcGxlIHdpdGguIiwNCiAgICAgIGljb246IFsyMiwgMjhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldhZmZsZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJXaGV0aGVyIHRoZXNlIGFyZSBjb29raWVzIHdpdGggc2hvY2tpbmdseSB3YWZmbGUtbGlrZSBmZWF0dXJlcyBvciBzaW1wbHkgcmVndWxhciBjb29raWUtc2l6ZWQgd2FmZmxlcyBpcyBhIGRlYmF0ZSB3ZSdyZSBub3QgZ2V0dGluZyBpbnRvIGhlcmUuIiwNCiAgICAgIGljb246IFsyMSwgMjhdLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgLy9lYXJseSBjb29raWVzIHRoYXQgdW5sb2NrIGF0IHRoZSBzYW1lIHRpbWUgYXMgY29jb251dCBjb29raWVzOyBtZWFudCB0byBib29zdCBlYXJseSBnYW1lIGEgbGl0dGxlIGJpdA0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQWxtb25kIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlNvbWV0aW1lcyB5b3UgZmVlbCBsaWtlIG9uZSBvZiB0aGVzZS4gU29tZXRpbWVzIHlvdSBkb24ndC4iLA0KICAgICAgaWNvbjogWzIxLCAyN10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkhhemVsbnV0IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlRhc3RlcyBsaWtlIGEgbW9ybmluZyBzdHJvbGwgdGhyb3VnaCBhIGZyYWdyYW50IGZvcmVzdCwgbWludXMgdGhlIGNsb3VkcyBvZiBnbmF0cy4iLA0KICAgICAgaWNvbjogWzIyLCAyN10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldhbG51dCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJTb21lIGV4cGVydHMgaGF2ZSBwb2ludGVkIHRvIHRoZSB3YWxudXQncyBlZXJpZSByZXNlbWJsYW5jZSB0byB0aGUgaHVtYW4gYnJhaW4gYXMgYSBzaWduIG9mIGl0cyBzZW50aWVuY2UgLSBhIHRoZW9yeSBtb3N0IHdhbG51dHMgdmVoZW1lbnRseSBvYmplY3QgdG8uIiwNCiAgICAgIGljb246IFsyMywgMjddLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTksDQogICAgfSk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkxhYmVsIHByaW50ZXIiLA0KICAgICAgbG9jKA0KICAgICAgICAiTW91c2Ugb3ZlciBhbiB1cGdyYWRlIHRvIHNlZSBpdHMgdGllci48YnI+PHNtYWxsPk5vdGU6IG9ubHkgc29tZSB1cGdyYWRlcyBoYXZlIHRpZXJzLiBUaWVycyBhcmUgcHVyZWx5IGNvc21ldGljIGFuZCBoYXZlIG5vIGVmZmVjdCBvbiBnYW1lcGxheS48L3NtYWxsPiINCiAgICAgICkgKw0KICAgICAgICAiPHE+QWxzbyBjb21lcyBpbiByZWFsIGhhbmR5IHdoZW4geW91IHdhbnQgdG8gdGVsbCBjYXRzdXAgYXBhcnQgZnJvbSBrZXRjaHVwLjwvcT4iLA0KICAgICAgNTAwMDAwMCwNCiAgICAgIFsyOCwgMjldDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkdlbml1cyBhY2NvdW50aW5nIl07DQoNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR29vZCBtYW5uZXJzIiwNCiAgICAgICc8cT5BcHBhcmVudGx5IHRoZXNlIGxhZGllcyBhcmUgbXVjaCBtb3JlIGFtaWFibGUgaWYgeW91IHRha2UgdGhlIHRpbWUgdG8gbGVhcm4gdGhlaXIgc3RyYW5nZSwgYW5jaWVudCBjdXN0b21zLCB3aGljaCBzZWVtIHRvIGludm9sdmUgc2F5aW5nICJwbGVhc2UiIGFuZCAidGhhbmsgeW91IiBhbmQgc3RhcmluZyBhdCB0aGUgc3VuIHdpdGggYnVsZ2luZyBleWVzIHdoaWxlIG11dHRlcmluZyBlbGRyaXRjaCBjdXJzZXMgdW5kZXIgeW91ciBicmVhdGguPC9xPicsDQogICAgICAiR3JhbmRtYSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkxpbmR3b3JtcyIsDQogICAgICAiPHE+WW91IGhhdmUgdG8gaW1wb3J0IHRoZXNlIGZyb20gZmFyIHVwIG5vcnRoLCBidXQgdGhleSByZWFsbHkgaGVscCBhZXJhdGUgdGhlIHNvaWwhPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJvcmUgYWdhaW4iLA0KICAgICAgIjxxPkFmdGVyIGV4dHJhY3Rpbmcgc28gbXVjaCBzZWRpbWVudCBmb3Igc28gbG9uZywgeW91J3ZlIGZvcm1lZCBzb21lIHZlcml0YWJsZSBtb3VudGFpbnMgb2YgeW91ciBvd24gZnJvbSB0aGUgYWNjdW11bGF0ZWQgcGlsZXMgb2Ygcm9jayBhbmQgZGlydC4gVGltZSB0byBkaWcgdGhyb3VnaCB0aG9zZSBhbmQgc2VlIGlmIHlvdSBmaW5kIGFueXRoaW5nIGZ1biE8L3E+IiwNCiAgICAgICJNaW5lIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDUwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAnIlZvbHVudGVlciIgaW50ZXJucycsDQogICAgICAiPHE+SWYgeW91J3JlIGJhZCBhdCBzb21ldGhpbmcsIGFsd2F5cyBkbyBpdCBmb3IgZnJlZS48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDUyNTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUnVsZXMgb2YgYWNxdWlzaXRpb24iLA0KICAgICAgIjxxPlJ1bGUgMzg3IDogYSBjb29raWUgYmFrZWQgaXMgYSBjb29raWUga2VwdC48L3E+IiwNCiAgICAgICJCYW5rIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDU1MDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2FyIG9mIHRoZSBnb2RzIiwNCiAgICAgICI8cT5BbiBpbnRlcmVzdGluZyBnYW1lOyB0aGUgb25seSB3aW5uaW5nIG1vdmUgaXMgbm90IHRvIHByYXkuPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRWxlY3RyaWNpdHkiLA0KICAgICAgIjxxPkFuY2llbnQgbWFnaWNrcyBhbmQgZm9yYmlkZGVuIGhleGVzIHNocm91ZCB0aGlzIGFyY2FuZSBrbm93bGVkZ2UsIHdob3NlIHVuZmF0aG9tYWJsZSBwb3dlciBjYW4gbXlzdGVyaW91c2x5IHR1cm4gZGFya25lc3MgaW50byBsaWdodCBhbmQgc2hvY2sgYW4gZWxlcGhhbnQgdG8gZGVhdGguPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVW5pdmVyc2FsIGFscGhhYmV0IiwNCiAgICAgICc8cT5Zb3VcJ3ZlIG1hbmFnZWQgdG8gY2hhcnQgYSBsYW5ndWFnZSB0aGF0IGNhbiBiZSB1bmRlcnN0b29kIGJ5IGFueSBzZW50aWVudCBzcGVjaWVzIGluIHRoZSBnYWxheHk7IGl0cyBleGNpdGluZyB2b2NhYnVsYXJ5IGNvbnRhaW5zIG92ZXIgNTYgdHJpbGxpb24gd29yZHMgdGhhdCBzb3VuZCBhbmQgbG9vayBsaWtlIHNwYXJrbHkgYnVycHMsIGZvcm1pbmcgaW50cmljYXRlIHNlbnRlbmNlcyB0aGF0IHVzdWFsbHkgdHJhbnNsYXRlIHRvIHNvbWV0aGluZyBsaWtlICJnaXZlIHVzIHlvdXIgY29va2llcywgb3IgZWxzZSIuPC9xPicsDQogICAgICAiU2hpcG1lbnQiLA0KICAgICAgMTENCiAgICApOw0KICAgIG9yZGVyID0gNzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQdWJsaWMgYmV0dGVybWVudCIsDQogICAgICAiPHE+V2h5IGRvIHdlIGtlZXAgdHJ5aW5nIHRvIGNoYW5nZSB1c2VsZXNzIG1hdHRlciBpbnRvIGNvb2tpZXMsIG9yIGNvb2tpZXMgaW50byBldmVuIGJldHRlciBjb29raWVzPyBDbGVhcmx5LCB0aGUgd2F5IG9mIHRoZSBmdXR1cmUgaXMgdG8gY2hhbmdlIHRoZSBwZW9wbGUgd2hvIGVhdCB0aGUgY29va2llcyBpbnRvIHBlb3BsZSB3aXRoIGEgZ3JlYXRlciB1bmRlcnN0YW5kaW5nLCBhcHByZWNpYXRpb24gYW5kIHJlc3BlY3QgZm9yIHRoZSBjb29raWVzIHRoZXkncmUgZWF0aW5nLiBJbnRvIHRoZSB2YXQgeW91IGdvITwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDgwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRW1iZWRkZWQgbWljcm9wb3J0YWxzIiwNCiAgICAgICI8cT5XZSd2ZSBmb3VuZCBvdXQgdGhhdCBpZiB3ZSBiYWtlIHRoZSBwb3J0YWxzIGludG8gdGhlIGNvb2tpZXMgdGhlbXNlbHZlcywgd2UgY2FuIHRyYW5zcG9ydCBwZW9wbGUncyB0YXN0ZSBidWRzIHN0cmFpZ2h0IGludG8gdGhlIHRhc3RlIGRpbWVuc2lvbiEgR29vZCB0aGluZyB5b3VyIGFybXkgb2YgbGF3eWVycyBnb3QgcmlkIG9mIHRoZSBGREEgYSB3aGlsZSBhZ28hPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTm9zdGFsZ2lhIiwNCiAgICAgICI8cT5Zb3VyIHRpbWUgbWFjaGluZSB0ZWNobmljaWFucyBpbnNpc3QgdGhhdCB0aGlzIGlzIHNvbWUgYWR2YW5jZWQgbmV3IHRpbWUgdHJhdmVsIHRlY2gsIGFuZCBub3QganVzdCBhbiBleGlzdGluZyBlbW90aW9uIHVuaXZlcnNhbCB0byBtYW5raW5kLiBFaXRoZXIgd2F5LCB5b3UgaGF2ZSB0byBhZG1pdCB0aGF0IHNlbGxpbmcgcGVvcGxlIHRoZSBzYW1lIG9sZCBjb29raWVzIGp1c3QgYmVjYXVzZSBpdCByZW1pbmRzIHRoZW0gb2YgdGhlIGdvb2Qgb2xkIHRpbWVzIGlzIGFuIGludGVyZXN0aW5nIHByb3NwZWN0LjwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGUgZGVmaW5pdGUgbW9sZWN1bGUiLA0KICAgICAgIjxxPllvdXIgc2NpZW50aXN0cyBoYXZlIGZvdW5kIGEgd2F5IHRvIHBhY2sgYSBjb29raWUgaW50byBvbmUgc2luZ2xlIGNvbnRpbnVvdXMgbW9sZWN1bGUsIG9wZW5pbmcgZXhjaXRpbmcgbmV3IHByb3NwZWN0cyBpbiBib3RoIHN0b3JhZ2UgYW5kIGZsYXZvciBkZXNwaXRlIHRoZSBmYWN0IHRoYXQgdGhlc2UgdGFrZSB1cCB0byBhIHdob2xlIHllYXIgdG8gZGlnZXN0LjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkxpZ2h0IGNhcHR1cmUgbWVhc3VyZXMiLA0KICAgICAgIjxxPkFzIHRoZSB1bml2ZXJzZSBnZXRzIGV2ZXIgc28gc2xpZ2h0bHkgZGltbWVyIGR1ZSB0byB5b3UgY29udmVydGluZyBtb3JlIGFuZCBtb3JlIG9mIGl0cyBsaWdodCBpbnRvIGNvb2tpZXMsIHlvdSd2ZSB0YWtlbiB0byBmaW5kaW5nIG5ldyBhbmQgdW5leHBsb3JlZCBzb3VyY2VzIG9mIGxpZ2h0IGZvciB5b3VyIHByaXNtczsgZm9yIGluc3RhbmNlLCB0aGUgd2FybSBnbG93IGVtaXR0ZWQgYnkgYSBwcmVnbmFudCB3b21hbiwgb3IgdGhlIHR3aW5rbGUgaW4gdGhlIGV5ZSBvZiBhIGhvcGVmdWwgY2hpbGQuPC9xPiIsDQogICAgICAiUHJpc20iLA0KICAgICAgMTENCiAgICApOw0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiMC1zaWRlZCBkaWNlIiwNCiAgICAgICI8cT5UaGUgYWR2ZW50IG9mIHRoZSAwLXNpZGVkIGRpY2UgaGFzIGhhZCB1bmV4cGVjdGVkIGFuZCB0dW11bHR1b3VzIGVmZmVjdHMgb24gdGhlIGdhbWJsaW5nIGNvbW11bml0eSwgYW5kIHNhdyBleHBlcnRzIGFyb3VuZCB0aGUgd29ybGQgY2FsbGluZyB5b3UgYm90aCBhIGdlbml1cyBhbmQgYW4gaW1iZWNpbGUuPC9xPiIsDQogICAgICAiQ2hhbmNlbWFrZXIiLA0KICAgICAgMTENCiAgICApOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJIZXJhbGRzIiwNCiAgICAgIGxvYygNCiAgICAgICAgIllvdSBub3cgYmVuZWZpdCBmcm9tIHRoZSBib29zdCBwcm92aWRlZCBieSA8Yj5oZXJhbGRzPC9iPi48YnI+RWFjaCBoZXJhbGQgZ2l2ZXMgeW91IDxiPisxJSBDcFM8L2I+Ljxicj5Mb29rIG9uIHRoZSBwdXJwbGUgZmxhZyBhdCB0aGUgdG9wIHRvIHNlZSBob3cgbWFueSBoZXJhbGRzIGFyZSBhY3RpdmUgYXQgYW55IGdpdmVuIHRpbWUuIg0KICAgICAgKSArDQogICAgICAgIChBcHANCiAgICAgICAgICA/ICI8cT5JdCdzIGdldHRpbmcgc3RlYW15LjwvcT4iDQogICAgICAgICAgOiAiPHE+QmUgZXhjZWxsZW50IHRvIGVhY2ggb3RoZXIuPGJyPkFuZCBQYXRyZW9uLCBkdWRlcyE8L3E+IiksDQogICAgICAxMDAsDQogICAgICBbMjEsIDI5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KDQogICAgb3JkZXIgPSAyNTU7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJNZXRhZ3JhbmRtYXMiLA0KICAgICAgIkEgZnJhY3RhbCBncmFuZG1hIHRvIG1ha2UgbW9yZSBncmFuZG1hcyB0byBtYWtlIG1vcmUgY29va2llcy4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDEzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk1ldGFiYWtlcmllcyIsDQogICAgICAiPHE+VGhleSBwcmFjdGljYWxseSBiYWtlIHRoZW1zZWx2ZXMhPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk1hbmRlbGJyb3duIHN1Z2FyIiwNCiAgICAgICI8cT5BIHN1YnN0YW5jZSB0aGF0IGRpc3BsYXlzIHVzZWZ1bCBwcm9wZXJ0aWVzIHN1Y2ggYXMgZnJhY3RhbCBzd2VldG5lc3MgYW5kIGluc3RhbnQgY29udGFjdCBsZXRoYWxpdHkuPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgMg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZyYWN0b2lkcyIsDQogICAgICAiPHE+SGVyZSdzIGEgZnJ1biBmcmFjdCA6IGFsbCBpbiBhbGwsIHRoZXNlIHdlcmUgYSB0ZXJyaWJsZSBpZGVhLjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDMNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJOZXN0ZWQgdW5pdmVyc2UgdGhlb3J5IiwNCiAgICAgICI8cT5Bc3NlcnRzIHRoYXQgZWFjaCBzdWJhdG9taWMgcGFydGljbGUgaXMgaG9zdCB0byBhIHdob2xlIG5ldyB1bml2ZXJzZSwgYW5kIHRoZXJlZm9yZSwgYW5vdGhlciBsaW1pdGxlc3MgcXVhbnRpdHkgb2YgY29va2llcy48YnI+VGhpcyBzb21laG93IHN0YWNrcyB3aXRoIHRoZSB0aGVvcnkgb2YgbmFub2Nvc21pY3MsIGJlY2F1c2UgcGh5c2ljcy48L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTWVuZ2VyIHNwb25nZSBjYWtlIiwNCiAgICAgICI8cT5GcmlnaHRlbmluZ2x5IGFic29yYmVudCB0aGFua3MgdG8gaXRzIHZpcnR1YWxseSBpbmZpbml0ZSBzdXJmYWNlIGFyZWEuIEtlZXAgaXQgaXNvbGF0ZWQgaW4gYSBkcnkgY2hhbWJlciwgbmV2ZXIgaGFuZGxlIGl0IHdpdGggYW4gb3BlbiB3b3VuZCwgYW5kIGRvIG5vdCBldmVyIGxldCBpdCB0b3VjaCBhIGJvZHkgb2Ygd2F0ZXIuPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgNQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk9uZSBwYXJ0aWN1bGFybHkgZ29vZC1odW1vcmVkIGNvdyIsDQogICAgICAiPHE+VGhpcyB1bmFzc3VtaW5nIGJvdmluZSB3YXMgZXhjcnVjaWF0aW5nbHkgZXhwZW5zaXZlIGFuZCBpdCBtYXkgc2VlbSBhdCBmaXJzdCBsaWtlIHlvdSB3ZXJlIHJpcHBlZCBvZmYuIE9uIGNsb3NlciBpbnNwZWN0aW9uIGhvd2V2ZXIsIHlvdSBub3RpY2UgdGhhdCBpdHMgZWFycmluZ3MgKGl0J3Mgd2VhcmluZyBlYXJyaW5ncykgYXJlIGFjdHVhbGx5IGZ1bGx5IGZ1bmN0aW9uYWwgY29waWVzIG9mIGl0c2VsZiwgZWFjaCBvZiB3aGljaCBhbHNvIHdlYXJpbmcgdGhlaXIgb3duIGNvdyBlYXJyaW5ncywgYW5kIHNvIG9uLCBpbmZpbml0ZWx5LiBJdCBhcHBlYXJzIHlvdXIgZGFpcnkgY29uY2VybnMgd2lsbCBiZSB0YWtlbiBjYXJlIG9mIGZvciBhIHdoaWxlLCBhbHRob3VnaCB5b3UnbGwgaGF2ZSB0byBwdXQgdXAgd2l0aCB0aGUgY293J3MgYW5ub3lpbmcgc25pY2tlcmluZy48L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICA2DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ2hvY29sYXRlIG91cm9ib3JvcyIsDQogICAgICAiPHE+Rm9yZXZlciBlYXRpbmcgaXRzIG93biB0YWlsIGFuZCBkaWdlc3RpbmcgaXRzZWxmLCBpbiBhIG1ldGFib2xpY2FsbHkgZHViaW91cyB0YWxlIG9mIGRlbGljaW91cyB0cmFnZWR5LjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDcNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJOZXN0ZWQiLA0KICAgICAgIjxxPkNsZXZlciBzZWxmLXJlZmVyZW5jZSBvciBzaGFtZWZ1bCBjcm9zcy1wcm9tb3Rpb24/IFRoaXMgdXBncmFkZSBhcHBhcmVudGx5IGhhcyB0aGUgZ2FsbCB0byBhZHZlcnRpc2UgYSBsaW5rIHRvIDx1Pm9ydGVpbC5kYXNobmV0Lm9yZy9uZXN0ZWQ8L3U+LCBpbiBhIHRvb2x0aXAgeW91IGNhbid0IGV2ZW4gY2xpY2suPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgOA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlNwYWNlLWZpbGxpbmcgZmliZXJzIiwNCiAgICAgICI8cT5UaGlzIHNwZWNpYWwgaW5ncmVkaWVudCBoYXMgdGhlIGluY3JlZGlibGUgYWJpbGl0eSB0byBmaWxsIHRoZSBsb2NhbCBzcGFjZSBwZXJmZWN0bHksIGVmZmVjdGl2ZWx5IGVyYWRpY2F0aW5nIGh1bmdlciBpbiB0aG9zZSB3aG8gY29uc3VtZSBpdCE8YnI+S25vd2luZyB0aGF0IG5vIGh1bmdlciBtZWFucyBubyBuZWVkIGZvciBjb29raWVzLCB5b3VyIG1hcmtldGVycyB1cmdlIHlvdSB0byByZXB1cnBvc2UgdGhpcyBwcm9kdWN0IGludG8gbmV4dC1sZXZlbCBwYWNraW5nIHBlYW51dHMuPC9xPiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgOQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKCJFbmRsZXNzIGJvb2sgb2YgcHJvc2UiLCAiIiwgIkZyYWN0YWwgZW5naW5lIiwgMTApOw0KICAgIGlmIChFTikgew0KICAgICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgc3RyID0NCiAgICAgICAgICAnIlRoZXJlIG9uY2Ugd2FzIGEgYmFrZXIgbmFtZWQgJyArDQogICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAiLiBPbmUgZGF5LCB0aGVyZSB3YXMgYSBrbm9jayBhdCB0aGUgZG9vcjsgIiArDQogICAgICAgICAgR2FtZS5iYWtlcnlOYW1lICsNCiAgICAgICAgICAiIG9wZW5lZCBpdCBhbmQgd2FzIHN1ZGRlbmx5IGZhY2UtdG8tZmFjZSB3aXRoIGEgc3RyYW5nZSBhbmQgbWVuYWNpbmcgb2xkIGdyYW5kbWEuIFRoZSBncmFuZG1hIG9wZW5lZCBoZXIgbW91dGggYW5kLCBpbiBhIHN0cmFuZ2UgbGl0dGxlIHZvaWNlLCBzdGFydGVkIHJlY2l0aW5nIHRoaXMgc3RyYW5nZSBsaXR0bGUgdGFsZSA6ICI7DQogICAgICAgIHZhciBuID0gMzU7DQogICAgICAgIHZhciBpID0gTWF0aC5mbG9vcihHYW1lLlQgKiAwLjEpOw0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgIHRoaXMuZGVzYyArDQogICAgICAgICAgJzxxIHN0eWxlPSJmb250LWZhbWlseTpDb3VyaWVyOyI+JyArDQogICAgICAgICAgKHN0ci5zdWJzdHIoaSAlIHN0ci5sZW5ndGgsIG4pICsNCiAgICAgICAgICAgIChpICUgc3RyLmxlbmd0aCA+IHN0ci5sZW5ndGggLSBuDQogICAgICAgICAgICAgID8gc3RyLnN1YnN0cigwLCAoaSAlIHN0ci5sZW5ndGgpIC0gKHN0ci5sZW5ndGggLSBuKSkNCiAgICAgICAgICAgICAgOiAiIikpICsNCiAgICAgICAgICAiPC9xPiINCiAgICAgICAgKTsNCiAgICAgIH07DQogICAgfSBlbHNlIEdhbWUubGFzdC5kZXNjID0gIjxxPi08L3E+IjsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIHNldCBvZiBhbGwgc2V0cyIsDQogICAgICAiPHE+VGhlIGFuc3dlciwgb2YgY291cnNlLCBpcyBhIGRlZmluaXRlIG1heWJlLjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDExDQogICAgKTsNCg0KICAgIG9yZGVyID0gNTAwMDsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlJlY3Vyc2l2ZSBtaXJyb3JzIiwNCiAgICAgICI8cT5EbyB5b3UgaGF2ZSBhbnkgaWRlYSB3aGF0IGhhcHBlbnMgd2hlbiB5b3UgcG9pbnQgdHdvIG9mIHRoZXNlIGF0IGVhY2ggb3RoZXI/IEFwcGFyZW50bHksIHRoZSB1bml2ZXJzZSBkb2Vzbid0IGVpdGhlci48L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAiUHJpc20iLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgLy9HYW1lLlN5bmVyZ3lVcGdyYWRlKCdDb21wb3VuZGVkIG9kZHMnLCc8cT5XaGVuIHByb2JhYmlsaXRpZXMgc3RhcnQgY2FzY2FkaW5nLCAibmV2ZXIgaW4gYSBiaWxsaW9uIGxpZmV0aW1lcyIgc3RhcnRzIGxvb2tpbmcgdGVycmlibHkgbGlrZSAicHJvYmFibHkgYmVmb3JlIE1vbmRheSBjb21lcyBhcm91bmQiLjwvcT4nLCdGcmFjdGFsIGVuZ2luZScsJ0NoYW5jZW1ha2VyJywnc3luZXJneTEnKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIk1pY2UgY2xpY2tpbmcgbWljZSIsDQogICAgICAiIiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAiQ3Vyc29yIiwNCiAgICAgICJzeW5lcmd5MiINCiAgICApOw0KICAgIGlmIChFTikgew0KICAgICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBNYXRoLnNlZWRyYW5kb20oR2FtZS5zZWVkICsgIi1ibGFzcGhlbW91c2UiKTsNCiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjMpIHsNCiAgICAgICAgICBNYXRoLnNlZWRyYW5kb20oKTsNCiAgICAgICAgICByZXR1cm4gdGhpcy5kZXNjICsgIjxxPkFic29sdXRlbHkgYmxhc3BoZW1vdXNlITwvcT4iOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbSgpOw0KICAgICAgICAgIHJldHVybiB0aGlzLmRlc2MgKyAiPHE+QWJzb2x1dGVseSBibGFzcGhlbW91cyE8L3E+IjsNCiAgICAgICAgfQ0KICAgICAgfTsNCiAgICB9IGVsc2UgR2FtZS5sYXN0LmRlc2MgPSAiPHE+LTwvcT4iOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkN1c3RhcmQgY3JlYW1zIiwNCiAgICAgIGRlc2M6ICJCcml0aXNoIGxvcmUgcGl0cyB0aGVzZSBpbiBhIG1lcmNpbGVzcyB3YXIgYWdhaW5zdCBib3VyYm9uIGJpc2N1aXRzLjxicj5UaGUgZmlsbGluZyBldm9rZXMgdmFuaWxsYSB3aXRob3V0IHF1aXRlIGFwcHJvYWNoaW5nIGl0Ljxicj5UaGV5J3JlIHRhc3RpZXIgb24gdGhlIGluc2lkZSEiLA0KICAgICAgaWNvbjogWzIzLCAyOV0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICogNSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJvdXJib24gYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIlR3byBjaG9jb2xhdGUgYmlzY3VpdHMgam9pbmVkIHRvZ2V0aGVyIHdpdGggZXZlbiBtb3JlIGNob2NvbGF0ZS48YnI+VGhlIHN3b3JuIHJpdmFscyBvZiBjdXN0YXJkIGNyZWFtcywgYXMgbGVnZW5kIGhhcyBpdC4iLA0KICAgICAgaWNvbjogWzI0LCAyOV0sDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSwNCiAgICB9KTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2VlcHNha2VzIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlNlYXNvbmFsIHJhbmRvbSBkcm9wcyBoYXZlIGEgPGI+MS81IGNoYW5jZTwvYj4gdG8gY2Fycnkgb3ZlciB0aHJvdWdoIGFzY2Vuc2lvbnMuIg0KICAgICAgKSArICI8cT5DaGVyaXNoIHRoZSBtZW1vcmllcy48L3E+IiwNCiAgICAgIDExMTExMTExMTEsDQogICAgICBbMjIsIDI5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWw0KICAgICAgIlN0YXJzbm93IiwNCiAgICAgICJTdGFybG92ZSIsDQogICAgICAiU3RhcnRlcnJvciIsDQogICAgICAiU3RhcnRyYWRlIiwNCiAgICAgICJTdGFyc3Bhd24iLA0KICAgIF07DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWluaS1jb29raWVzIiwNCiAgICAgIGRlc2M6ICJIYXZlIHlvdSBldmVyIG5vdGljZWQgaG93IHRoZSBzbWFsbGVyIHNvbWV0aGluZyBpcywgdGhlIGVhc2llciBpdCBpcyB0byBiaW5nZSBvbiBpdD8iLA0KICAgICAgaWNvbjogWzI5LCAzMF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlN1Z2FyIGNyeXN0YWwgY29va2llcyIsDQogICAgICAoRU4NCiAgICAgICAgPyAiQ29va2llIHByb2R1Y3Rpb24gbXVsdGlwbGllciA8Yj4rNSUgcGVybWFuZW50bHk8L2I+LCBhbmQgPGI+KzElPC9iPiBmb3IgZXZlcnkgYnVpbGRpbmcgdHlwZSBsZXZlbCAxMCBvciBoaWdoZXIuIg0KICAgICAgICA6IGxvYygiQ29va2llIHByb2R1Y3Rpb24gbXVsdGlwbGllciA8Yj4rJTElIHBlcm1hbmVudGx5PC9iPi4iLCA1KSArDQogICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiQ29va2llIHByb2R1Y3Rpb24gbXVsdGlwbGllciA8Yj4rJTElPC9iPiBmb3IgZXZlcnkgYnVpbGRpbmcgdHlwZSBsZXZlbCAlMiBvciBoaWdoZXIuIiwNCiAgICAgICAgICAgIFsxLCAxMF0NCiAgICAgICAgICApKSArDQogICAgICAgICI8cT5JbmZ1c2VkIHdpdGggY29zbWljIHN3ZWV0bmVzcy4gSXQgZ2l2ZXMgb2ZmIGEgZmFpbnQgc2hpbW1lcnkgc291bmQgd2hlbiB5b3UgaG9sZCBpdCB1cCB0byB5b3VyIGVhci48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAsDQogICAgICBbMjEsIDMwXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdWdhciBiYWtpbmciXTsNCiAgICBHYW1lLmxhc3QucG93ZXIgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbiA9IDU7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLmxldmVsID49IDEwKSBuKys7DQogICAgICB9DQogICAgICByZXR1cm4gbjsNCiAgICB9Ow0KICAgIEdhbWUubGFzdC5wc2V1ZG9Db29raWUgPSB0cnVlOw0KICAgIEdhbWUubGFzdC5kZXNjRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBuID0gNTsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIGlmIChHYW1lLk9iamVjdHNbaV0ubGV2ZWwgPj0gMTApIG4rKzsNCiAgICAgIH0NCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBsb2MoIkN1cnJlbnQ6IikgKw0KICAgICAgICAiIDxiPisiICsNCiAgICAgICAgQmVhdXRpZnkobikgKw0KICAgICAgICAnJTwvYj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48L2Rpdj4nICsNCiAgICAgICAgdGhpcy5kZGVzYw0KICAgICAgKTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQm94IG9mIG1heWJlIGNvb2tpZXMiLA0KICAgICAgbG9jKCJDb250YWlucyBhbiBhc3NvcnRtZW50IG9mLi4uc29tZXRoaW5nLiIpICsNCiAgICAgICAgIjxxPlRoZXNlIG1heSBvciBtYXkgbm90IGJlIGNvbnNpZGVyZWQgY29va2llcy48L3E+IiwNCiAgICAgIDMzMzAwMDAwMDAwMCwNCiAgICAgIFsyNSwgMjldDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlN1Z2FyIGNyeXN0YWwgY29va2llcyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQm94IG9mIG5vdCBjb29raWVzIiwNCiAgICAgIGxvYygiQ29udGFpbnMgYW4gYXNzb3J0bWVudCBvZi4uLnNvbWV0aGluZy4iKSArDQogICAgICAgICI8cT5UaGVzZSBhcmUgc3RyaWN0bHksIGRlZmluaXRlbHkgbm90IGNvb2tpZXMuPC9xPiIsDQogICAgICAzMzMwMDAwMDAwMDAsDQogICAgICBbMjYsIDI5XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdWdhciBjcnlzdGFsIGNvb2tpZXMiXTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkJveCBvZiBwYXN0cmllcyIsDQogICAgICBsb2MoIkNvbnRhaW5zIGFuIGFzc29ydG1lbnQgb2YgZGVsaWNpb3VzIHBhc3RyaWVzLiIpICsNCiAgICAgICAgIjxxPlRoZXNlIGFyZSBhIGRhbW4gc2xpcHBlcnkgc2xvcGUgaXMgd2hhdCB0aGV5IGFyZSE8L3E+IiwNCiAgICAgIDMzMzAwMDAwMDAwMCwNCiAgICAgIFsyNywgMjldDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlN1Z2FyIGNyeXN0YWwgY29va2llcyJdOw0KDQogICAgb3JkZXIgPSAxMDA0MDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlByb2ZpdGVyb2xlcyIsDQogICAgICBkZXNjOiAiQWxzbyBrbm93biBhcyBjcmVhbSBwdWZmcywgdGhlc2UgcGFzdHJpZXMgYXJlIGxpZ2h0LCBmbHVmZnksIGZpbGxlZCB3aXRoIHdoaXBwZWQgY3JlYW0gYW5kIGZ1biB0byB0aHJvdyBhdCBwZW9wbGUgd2hlbiBzbm93YmFsbHMgYXJlIHJ1bm5pbmcgc2NhcmNlLiIsDQogICAgICBpY29uOiBbMjksIDI5XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgcGFzdHJpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDMxKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkplbGx5IGRvbnV0IiwNCiAgICAgIGRlc2M6ICJHdWFyYW50ZWVkIHRvIGNvbnRhaW4gYXQgbGVhc3QgMC4zJSBqZWxseSBmaWxsaW5nLCBvciB5b3VyIG1vbmV5IGJhY2suPGJyPllvdSBjYW4gc3RpbGwgc2VlIHRoZSBqZWxseSBzdGFiIHdvdW5kISIsDQogICAgICBpY29uOiBbMjcsIDI4XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgcGFzdHJpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDMzKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdsYXplZCBkb251dCIsDQogICAgICBkZXNjOiAiQWJzb2x1dGVseSBnb29leSB3aXRoIHN1Z2FyLiBUaGUgaG9sZSBpcyB0aGUgdGFzdGllc3QgcGFydCEiLA0KICAgICAgaWNvbjogWzI4LCAyOF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIHBhc3RyaWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCAzNSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDaG9jb2xhdGUgY2FrZSIsDQogICAgICBkZXNjOiAiVGhlIGNha2UgaXMgYSBQb3J0YWwgcmVmZXJlbmNlISIsDQogICAgICBpY29uOiBbMjUsIDI3XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgcGFzdHJpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDM3KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlN0cmF3YmVycnkgY2FrZSIsDQogICAgICBkZXNjOiAiSXQncyBub3QgZWFzeSB0byBjb21lIHVwIHdpdGggZmxhdm9yIHRleHQgZm9yIHNvbWV0aGluZyBhcyBnZW5lcmljIGFzIHRoaXMsIGJ1dCBzb21lIHdvdWxkIHNheSBpdCdzIGEgcGllY2Ugb2YgY2FrZS4iLA0KICAgICAgaWNvbjogWzI2LCAyN10sDQogICAgICByZXF1aXJlOiAiQm94IG9mIHBhc3RyaWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCAzOSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJBcHBsZSBwaWUiLA0KICAgICAgZGVzYzogIkl0IGlzIHNhaWQgdGhhdCBzb21lIGdyYW5kbWFzIGdvIHJvZ3VlIGFuZCBiYWtlIHRoZXNlIGluc3RlYWQuIiwNCiAgICAgIGljb246IFsyNSwgMjhdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBwYXN0cmllcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgNDEpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTGVtb24gbWVyaW5ndWUgcGllIiwNCiAgICAgIGRlc2M6ICJNZXJpbmd1ZSBpcyBhIGZpbmlja3kgc3Vic3RhbmNlIG1hZGUgb2Ygc3VnYXIgYW5kIGVnZyB3aGl0ZXMgdGhhdCByZXF1aXJlcyBzcGVjaWZpYyBhdG1vc3BoZXJpYyBjb25kaXRpb25zIHRvIGJlIGJha2VkIGF0IGFsbC4gVGhlIGxlbW9uLCBhcyBmYXIgYXMgd2UgY2FuIHRlbGwsIGlzbid0IG5lYXJseSBhcyBwaWNreS4iLA0KICAgICAgaWNvbjogWzI2LCAyOF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIHBhc3RyaWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCA0MyksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCdXR0ZXIgY3JvaXNzYW50IiwNCiAgICAgIGRlc2M6ICJMb29rIGFyb3VuZC48YnI+QSBydWRlIG1hbiBpbiBhIHN0cmlwZWQgc2hpcnQgYmlrZXMgcGFzdCB5b3UuIEhlIHNtZWxscyBvZiBjaWdhcmV0dGVzIGFuZCBjYWYmZWFjdXRlOy1hdS1sYWl0LiBTb21ld2hlcmUsIGEgbWltZSB1c2VzIGhpcyBtb3VzdGFjaGUgdG8gbWFrZSBmdW4gb2YgdGhlIEJyaXRpc2guIDMwMCBwaWdlb25zIGZseSBvdmVyaGVhZC48YnI+UmVsYXguIFlvdSdyZSBleHBlcmllbmNpbmcgY3JvaXNzYW50LiIsDQogICAgICBpY29uOiBbMjksIDI4XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgcGFzdHJpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQ1KSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwNTA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDb29raWUgZG91Z2giLA0KICAgICAgZGVzYzogIkJ1cnN0aW5nIHdpdGggaW5maW5pdGUgcG90ZW50aWFsLCBidXQgY2FuIGFsc28gYmUgZWF0ZW4gYXMgaXMuIEFyZ3VhYmx5IHdvcnRoIHRoZSBzYWxtb25lbGxhLiIsDQogICAgICBpY29uOiBbMjUsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWF5YmUgY29va2llcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgMzUpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQnVybnQgY29va2llIiwNCiAgICAgIGRlc2M6ICJUaGlzIGNvb2tpZSBmbGV3IHRvbyBjbG9zZSB0byB0aGUgc3VuIGFuZCBpcyBub3cgYSBzaGFkb3cgb2YgaXRzIGZvcm1lciBzZWxmLiBJZiBvbmx5IHlvdSByZW1lbWJlcmVkIHRvIHNldCBhIHRpbWVyLCB5b3Ugd291bGRuJ3QgaGF2ZSB0aGlzIHRyYWdlZHkgb24geW91ciBoYW5kcy4uLiIsDQogICAgICBpY29uOiBbMjMsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWF5YmUgY29va2llcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgMzcpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQSBjaG9jb2xhdGUgY2hpcCBjb29raWUgYnV0IHdpdGggdGhlIGNoaXBzIHBpY2tlZCBvZmYgZm9yIHNvbWUgcmVhc29uIiwNCiAgICAgIGRlc2M6ICJUaGlzIGhhcyB0byBiZSB0aGUgc2FkZGVzdCB0aGluZyB5b3UndmUgZXZlciBzZWVuLiIsDQogICAgICBpY29uOiBbMjQsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWF5YmUgY29va2llcyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgMzkpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRmxhdm9yIHRleHQgY29va2llIiwNCiAgICAgIGRlc2M6ICJXaGF0IHlvdSdyZSBjdXJyZW50bHkgcmVhZGluZyBpcyB3aGF0IGdpdmVzIHRoaXMgY29va2llIGl0cyBpbmltaXRhYmxlIGZsYXZvci4iLA0KICAgICAgaWNvbjogWzIyLCAzMF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIG1heWJlIGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQxKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkhpZ2gtZGVmaW5pdGlvbiBjb29raWUiLA0KICAgICAgZGVzYzogIlVuY29tZm9ydGFibHkgZGV0YWlsZWQsIGxpa2UgdGhvc2Ugd2VpcmQgc3RvcmllcyB5b3VyIGF1bnQga2VlcHMgdGVsbGluZyBhdCBwYXJ0aWVzLiIsDQogICAgICBpY29uOiBbMjgsIDEwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2YgbWF5YmUgY29va2llcyIsDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgNDMpLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDA2MDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlRvYXN0IiwNCiAgICAgIGRlc2M6ICJBIGNyaXNwIHNsaWNlIG9mIGJyZWFkLCBiZWdnaW5nIGZvciBzb21lIGJ1dHRlciBhbmQgamFtLjxicj5XaHkgZG8gcGVvcGxlIGtlZXAgcHJvcG9zaW5nIHRoZXNlIGF0IHBhcnRpZXM/IiwNCiAgICAgIGljb246IFsyNywgMTBdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBub3QgY29va2llcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgMzQpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGVhbnV0IGJ1dHRlciAmIGplbGx5IiwNCiAgICAgIGRlc2M6ICJJdCdzIHRpbWUuIiwNCiAgICAgIGljb246IFsyOSwgOV0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIG5vdCBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCAzNiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJXb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGVzZSBhcmVuJ3QgdGhlIGNvb2tpZXMgeW91J3JlIGxvb2tpbmcgZm9yLiIsDQogICAgICBpY29uOiBbMjYsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2Ygbm90IGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDQsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDM4KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNoZWVzZWJ1cmdlciIsDQogICAgICBkZXNjOiAiQWJzb2x1dGVseSBubyByZWxhdGlvbiB0byBjb29raWVzIHdoYXRzb2V2ZXIgLSBPcnRlaWwganVzdCB3YW50ZWQgYW4gZXhjdXNlIHRvIGRyYXcgYSBjaGVlc2VidXJnZXIuIiwNCiAgICAgIGljb246IFsyOCwgMzBdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBub3QgY29va2llcyIsDQogICAgICBwb3dlcjogNCwNCiAgICAgIHByaWNlOiBNYXRoLnBvdygxMCwgNDApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiT25lIGxvbmUgY2hvY29sYXRlIGNoaXAiLA0KICAgICAgZGVzYzogIlRoZSBzdGFydCBvZiBzb21ldGhpbmcgYmVhdXRpZnVsLiIsDQogICAgICBpY29uOiBbMjcsIDMwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2Ygbm90IGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDEsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQyKSwNCiAgICB9KTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiR2VuaXVzIGFjY291bnRpbmciLA0KICAgICAgbG9jKA0KICAgICAgICAiVW5sb2NrcyA8Yj5leHRyYSBwcmljZSBpbmZvcm1hdGlvbjwvYj4uPGJyPkVhY2ggZGlzcGxheWVkIGNvc3Qgbm93IHNwZWNpZmllcyBob3cgbG9uZyBpdCdsbCB0YWtlIHlvdSB0byBhZmZvcmQgaXQsIGFuZCBob3cgbXVjaCBvZiB5b3VyIGJhbmsgaXQgcmVwcmVzZW50cy4iDQogICAgICApICsgIjxxPlRoZXJlJ3Mgbm8gYWNjb3VudGluZyBmb3IgdGFzdGUsIGFuZCB5ZXQgaGVyZSB3ZSBhcmUuPC9xPiIsDQogICAgICAyMDAwMDAwLA0KICAgICAgWzExLCAxMF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiSW5zcGlyZWQgY2hlY2tsaXN0Il07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlNoaW1tZXJpbmcgdmVpbCIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIHRoZSA8Yj5zaGltbWVyaW5nIHZlaWw8L2I+LCBhIHN3aXRjaCB0aGF0IHBhc3NpdmVseSBib29zdHMgeW91ciBDcFMgYnkgPGI+JTElPC9iPi48YnI+WW91IHN0YXJ0IHdpdGggdGhlIHZlaWwgdHVybmVkIG9uOyBob3dldmVyLCBpdCBpcyB2ZXJ5IGZyYWdpbGUsIGFuZCBjbGlja2luZyB0aGUgYmlnIGNvb2tpZSBvciBhbnkgZ29sZGVuIGNvb2tpZSBvciByZWluZGVlciB3aWxsIHR1cm4gaXQgb2ZmLCByZXF1aXJpbmcgJTIgb2YgQ3BTIHRvIHR1cm4gYmFjayBvbi4iLA0KICAgICAgICBbNTAsIEdhbWUuc2F5VGltZSgyNCAqIDYwICogNjAgKiBHYW1lLmZwcywgMildDQogICAgICApICsgIjxxPkhhbmRzIG9mZiE8L3E+IiwNCiAgICAgIDk5OTk5OTk5OSwNCiAgICAgIFs5LCAxMF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiRGlzdGlsbGVkIGVzc2VuY2Ugb2YgcmVkb3VibGVkIGx1Y2siXTsNCg0KICAgIG9yZGVyID0gNDAwMDU7DQogICAgdmFyIGZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgYm9vc3QgPSBHYW1lLmdldFZlaWxCb29zdCgpOw0KICAgICAgdmFyIHJlc2lzdCA9IEdhbWUuZ2V0VmVpbERlZmVuc2UoKTsNCiAgICAgIHJldHVybiAoDQogICAgICAgICh0aGlzLm5hbWUgPT0gIlNoaW1tZXJpbmcgdmVpbCBbb25dIg0KICAgICAgICAgID8gJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgICAgICBsb2MoIkFjdGl2ZS4iKSArDQogICAgICAgICAgICAnPC9kaXY+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+Jw0KICAgICAgICAgIDogIiIpICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJCb29zdHMgeW91ciBjb29raWUgcHJvZHVjdGlvbiBieSA8Yj4lMSU8L2I+IHdoZW4gYWN0aXZlLjxicj5UaGUgdmVpbCBpcyB2ZXJ5IGZyYWdpbGUgYW5kIHdpbGwgYnJlYWsgaWYgeW91IGNsaWNrIHRoZSBiaWcgY29va2llIG9yIGFueSBnb2xkZW4gY29va2llcyBvciByZWluZGVlci48YnI+PGJyPk9uY2UgYnJva2VuLCB0dXJuaW5nIHRoZSB2ZWlsIGJhY2sgb24gY29zdHMgJTIgb2YgdW5idWZmZWQgQ3BTLiIsDQogICAgICAgICAgW0JlYXV0aWZ5KGJvb3N0ICogMTAwKSwgR2FtZS5zYXlUaW1lKDI0ICogNjAgKiA2MCAqIEdhbWUuZnBzLCAyKV0NCiAgICAgICAgKSArDQogICAgICAgIChyZXNpc3QgPiAwDQogICAgICAgICAgPyAiPGJyPjxicj4iICsNCiAgICAgICAgICAgIGxvYygiSGFzIGEgPGI+JTElPC9iPiBjaGFuY2UgdG8gbm90IGJyZWFrLiIsIEJlYXV0aWZ5KHJlc2lzdCAqIDEwMCkpDQogICAgICAgICAgOiAiIikNCiAgICAgICk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJTaGltbWVyaW5nIHZlaWwgW29mZl0iLCAiIiwgMTAwMDAwMCwgWzksIDEwXSk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmxhc3QudG9nZ2xlSW50byA9ICJTaGltbWVyaW5nIHZlaWwgW29uXSI7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBHYW1lLnVuYnVmZmVkQ3BzICogNjAgKiA2MCAqIDI0Ow0KICAgIH07DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuYzsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKCJTaGltbWVyaW5nIHZlaWwgW29uXSIsICIiLCAwLCBbOSwgMTBdKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJ0b2dnbGUiOw0KICAgIEdhbWUubGFzdC50b2dnbGVJbnRvID0gIlNoaW1tZXJpbmcgdmVpbCBbb2ZmXSI7DQogICAgR2FtZS5sYXN0LmRlc2NGdW5jID0gZnVuYzsNCg0KICAgIEdhbWUubG9zZVNoaW1tZXJpbmdWZWlsID0gZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgIGlmICghR2FtZS5IYXMoIlNoaW1tZXJpbmcgdmVpbCIpKSByZXR1cm4gZmFsc2U7DQogICAgICBpZiAoDQogICAgICAgICFHYW1lLkhhcygiU2hpbW1lcmluZyB2ZWlsIFtvZmZdIikgJiYNCiAgICAgICAgR2FtZS5IYXMoIlNoaW1tZXJpbmcgdmVpbCBbb25dIikNCiAgICAgICkNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgaWYgKEdhbWUuSGFzKCJSZWluZm9yY2VkIG1lbWJyYW5lIikpIHsNCiAgICAgICAgaWYgKGNvbnRleHQgPT0gInNoaW1tZXIiKQ0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbSgNCiAgICAgICAgICAgIEdhbWUuc2VlZCArICIvIiArIChHYW1lLmdvbGRlbkNsaWNrcyArIEdhbWUucmVpbmRlZXJDbGlja2VkKQ0KICAgICAgICAgICk7DQogICAgICAgIGVsc2UgaWYgKGNvbnRleHQgPT0gImNsaWNrIikNCiAgICAgICAgICBNYXRoLnNlZWRyYW5kb20oR2FtZS5zZWVkICsgIi8iICsgR2FtZS5jb29raWVDbGlja3MpOw0KICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IEdhbWUuZ2V0VmVpbERlZmVuc2UoKSkgew0KICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgbG9jKCJUaGUgcmVpbmZvcmNlZCBtZW1icmFuZSBwcm90ZWN0cyB0aGUgc2hpbW1lcmluZyB2ZWlsLiIpLA0KICAgICAgICAgICAgIiIsDQogICAgICAgICAgICBbNywgMTBdDQogICAgICAgICAgKTsNCiAgICAgICAgICBHYW1lLldpbigiVGhpY2stc2tpbm5lZCIpOw0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbSgpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBNYXRoLnNlZWRyYW5kb20oKTsNCiAgICAgIH0NCiAgICAgIHZhciBtZSA9IEdhbWUuVXBncmFkZXNbIlNoaW1tZXJpbmcgdmVpbCBbb25dIl07DQogICAgICBtZS5ib3VnaHQgPSAxOw0KICAgICAgLy9HYW1lLlVwZ3JhZGVzW21lLnRvZ2dsZUludG9dLmJvdWdodD1mYWxzZTsNCiAgICAgIEdhbWUuTG9jayhtZS50b2dnbGVJbnRvKTsNCiAgICAgIEdhbWUuVW5sb2NrKG1lLnRvZ2dsZUludG8pOw0KICAgICAgR2FtZS5Ob3RpZnkobG9jKCJUaGUgc2hpbW1lcmluZyB2ZWlsIGRpc2FwcGVhcnMuLi4iKSwgIiIsIFs5LCAxMF0pOw0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgUGxheVNvdW5kKCJzbmQvc3BlbGxGYWlsLm1wMyIsIDAuNzUpOw0KICAgIH07DQoNCiAgICB2YXIgZ2V0Q29va2llUHJpY2UgPSBmdW5jdGlvbiAobGV2ZWwpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgIDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIE1hdGgucG93KDEwLCAobGV2ZWwgLSAxKSAvIDIpDQogICAgICApOw0KICAgIH07DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiV2hvb3BpZSBwaWVzIiwNCiAgICAgIGRlc2M6ICJUd28gY2hvY29sYXRlIGhhbHZlcyBqb2luZWQgdG9nZXRoZXIgYnkgYSBjcmVhbSBmaWxsaW5nLiBJdCdzIGdvdCBubyBleWVicm93cywgYnV0IHlvdSBuZXZlciBub3RpY2VkIHVudGlsIG5vdy4iLA0KICAgICAgaWNvbjogWzIxLCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgxKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhcmFtZWwgd2FmZXIgYmlzY3VpdHMiLA0KICAgICAgZGVzYzogIkNvYXRlZCBpbiBkZWxpY2lvdXMgY2hvY29sYXRlLiBBcyBtYW55IGxheWVycyBhcyB5b3UnbGwgZ2V0IGluIGEgYmlzY3VpdCB3aXRob3V0IGludm9sdmluZyBvbmlvbnMuIiwNCiAgICAgIGljb246IFsyMiwgMzFdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDaG9jb2xhdGUgY2hpcCBtb2NoYSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJNb2NoYSBzdGFydGVkIG91dCBhcyBhbiBleGN1c2UgdG8gc211Z2dsZSBjaG9jb2xhdGUgaW50byBjb2ZmZWUuIEFuZCBub3csIGluIGEgcG9pZ25hbnQgZGlzcGxheSBvZiBkaXBsb21hY3kgYW5kIGN1bHR1cmFsIGV4Y2hhbmdlLCBpdCdzIGJyaW5naW5nIGNvZmZlZSB0byBjaG9jb2xhdGUgY29va2llcy4iLA0KICAgICAgaWNvbjogWzIzLCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgzKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkVhcmwgR3JleSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJDYXB0YWluIFBpY2FyZCdzIGZhdm9yaXRlLiIsDQogICAgICBpY29uOiBbMjQsIDMxXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDQpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ29ybiBzeXJ1cCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGUgY29ybiBzeXJ1cCBtYWtlcyBpdCBleHRyYSBjaGV3eS4gTm90IHRoZSB0eXBlIG9mIHN0dWZmIHlvdSdkIHRoaW5rIHRvIHB1dCBpbiBhIGNvb2tpZSwgYnV0IGJha2VycyBtYWtlIGRvLiIsDQogICAgICBpY29uOiBbMjUsIDMxXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDUpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSWNlYm94IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkNhbiBiZSBwcmVwYXJlZCBpbiBhIHZhcmlldHkgb2Ygc2hhcGVzIHdpdGggYSB2YXJpZXR5IG9mIGluZ3JlZGllbnRzLiBNYWRlIGJ5IGZyZWV6aW5nIGRvdWdoIGJlZm9yZSBiYWtpbmcgaXQsIG1pcnJvcmluZyBhIHRpbWUtcHJvdmVuIG1lZGlldmFsIHRvcnR1cmUgcHJhY3RpY2UuIEdvdHRhIGtlZXAgdGhlbSBndWVzc2luZy4iLA0KICAgICAgaWNvbjogWzI2LCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg2KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdyYWhhbSBjcmFja2VycyIsDQogICAgICBkZXNjOiAiSW5zcGlyZWQgaW4gdGhlaXIgZGVzaWduIGJ5IHRoZSB3aXNoIHRvIGxpdmUgYSBsaWZlIG9mIGF1c3RlcmUgdGVtcGVyYW5jZSwgZnJlZSBmcm9tIHBsZWFzdXJlIG9yIGNoZWVyOyBpdCdzIG5vIHdvbmRlciB0aGVzZSBhcmUgc28gdGFzdHkuIiwNCiAgICAgIGljb246IFsyNywgMzFdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNyksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJIYXJkdGFjayIsDQogICAgICBkZXNjOiAiRXh0cmVtZWx5IGhhcmQgYW5kLCBpZiB3ZSdyZSBiZWluZyBob25lc3QsIGV4dHJlbWVseSB0YWNrLjxicj5JZiB5b3UncmUgY29uc2lkZXJpbmcgZWF0aW5nIHRoaXMgYXMgYSBmdW4gc25hY2ssIHlvdSBwcm9iYWJseSBoYXZlIG90aGVyIHRoaW5ncyB0byB3b3JyeSBhYm91dCB0aGFuIHRoaXMgZ2FtZSwgbGlrZSBnZXR0aW5nIHNjdXJ2eSBvciB5b3VyIGNyZXcgZm9tZW50aW5nIG11dGlueS4iLA0KICAgICAgaWNvbjogWzI4LCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg4KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNvcm5mbGFrZSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJUaGV5J3JlIGdycnJycnJvb3Z5ISBDYXJlZnVsIG5vdCB0byBsZXQgaXQgc2l0IGluIHlvdXIgbWlsayB0b28gbG9uZywgbGVzdCB5b3UgYWNjaWRlbnRhbGx5IGVuZCB1cCB3aXRoIGEgYm93bCBvZiBjZXJlYWwgYW5kIGdldCBjb25mdXNlZC4iLA0KICAgICAgaWNvbjogWzI5LCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg5KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlRvZnUgY29va2llcyIsDQogICAgICBkZXNjOiAiVGhlcmUncyByZWFsbHkgdHdvIHdheXMgdG8gZ28gd2l0aCB0b2Z1IGNvb2tpbmc7IGVpdGhlciBpdCBhc3NlcnRzIGl0c2VsZiBpbiBwbGFpbiBzaWdodCBvciBpdCBjYW1vdWZsYWdlcyBpdHNlbGYgaW4gdGhlIG90aGVyIGluZ3JlZGllbnRzLiBUaGlzIGhhcHBlbnMgdG8gYmUgdGhlIGxhdHRlciwgYW5kIGFzIHN1Y2gsIHlvdSBjYW4ndCByZWFsbHkgdGVsbCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoaXMgYW5kIGEgcmVndWxhciBjb29raWUsIHNhdmUgZm9yIHRoYXQgb25lIHBpeGVsIG9uIHRoZSBsZWZ0LiIsDQogICAgICBpY29uOiBbMzAsIDMxXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDEwKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdsdXRlbi1mcmVlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIk1hZGUgd2l0aCBicm93bmVkIGJ1dHRlciBhbmQgbWlsayB0byBjbG9zZWx5IG1hdGNoIHRoZSBhcmNoZXR5cGFsIGNob2NvbGF0ZSBjaGlwIGNvb2tpZS48YnI+Rm9yIGNlbGlhY3MsIGEgY2hhbmNlIHRvIGluZHVsZ2UgaW4gYSBkZWxpY2lvdXMgcmlzay1mcmVlIHBhc3RyeS4gRm9yIG90aGVycywgYSBzdHJhbmdlbHkgdGhyZWF0ZW5pbmcgY29uZmVjdGlvbiB3aG9zZSBlbXB0eSBleWVzIHdpbGwgbmV2ZXIga25vdyBoZWF2ZW4gbm9yIGhlbGwuIiwNCiAgICAgIGljb246IFszMCwgMzBdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUnVzc2lhbiBicmVhZCBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJBbHNvIGtub3duIGFzIGFscGhhYmV0IGNvb2tpZXM7IHdoaWxlIG1vc3QgYmFrZXJzIGZvbGxvdyB0aGUgcmVjaXBlIHRvIHRoZSBsZXR0ZXIsIGl0IGlzIHNhaWQgdGhhdCBzb21lIHN1YnN0aXR1dGUgdGhlIGZsb3VyIGZvciBzcGVsdC4gQnV0IGRvbid0IHRha2UgbXkgd29yZCBmb3IgaXQuIiwNCiAgICAgIGljb246IFszMCwgMjldLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTEpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTGVia3VjaGVuIiwNCiAgICAgIGRlc2M6ICJEaXZlcnNlIGNvb2tpZXMgZnJvbSBHZXJtYW55LCBmcmFncmFudCB3aXRoIGhvbmV5IGFuZCBzcGljZXMsIG9mdGVuIGJha2VkIGFyb3VuZCBDaHJpc3RtYXMuPGJyPk9uY2Ugd29ybiBieSB3YXJyaW9ycyBvZiBvbGQgZm9yIHByb3RlY3Rpb24gaW4gYmF0dGxlLjxicj4rNSBTVFIsICsyMCUgbWFnaWMgcmVzaXN0YW5jZS4iLA0KICAgICAgaWNvbjogWzMwLCAyOF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgxMiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJBYWNoZW5lciBQcmludGVuIiwNCiAgICAgIGRlc2M6ICJUaGUgaG9uZXkgb25jZSB1c2VkIHRvIHN3ZWV0ZW4gdGhlc2UgZ2luZ2VyYnJlYWQtbGlrZSB0cmVhdHMgaGFzIHNpbmNlIGJlZW4gc3dhcHBlZCBvdXQgZm9yIGJlZXQgc3VnYXIsIHByb3ZpZGluZyBhbm90aGVyIHNhZCBleGFtcGxlIG9mIHJlZ3Jlc3NpdmUgZXZvbHV0aW9uLiIsDQogICAgICBpY29uOiBbMzAsIDI3XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDEzKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNhbmlzdHJlbGxpIiwNCiAgICAgIGRlc2M6ICJBIGRyeSBiaXNjdWl0IGZsYXZvcmVkIHdpdGggYW5pc2UgYW5kIHdpbmUsIHRvdWdoIGxpa2UgdGhlIHBlb3BsZSBvZiBDb3JzaWNhIHdoZXJlIGl0IGNvbWVzIGZyb20uIiwNCiAgICAgIGljb246IFszMCwgMjZdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTQpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTmljZSBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiTWFkZSB3aXRoIGNvY29udXQgYW5kIHBlcmZlY3Qgd2l0aCB0ZWEuIFRyYWNlcyBpdHMgb3JpZ2lucyB0byBhIEZyZW5jaCBjaXR5IHNvIG5pY2UgdGhleSBuYW1lZCBpdCB0aGF0LiIsDQogICAgICBpY29uOiBbMzAsIDI1XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDE1KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkZyZW5jaCBwdXJlIGJ1dHRlciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJZb3UgY2FuJ3QgdGVsbCB3aGF0J3Mgc3Ryb25nZXIgY29taW5nIG9mZiB0aGVzZSAtIHRoZSBzbWVsbCBvZiBidXR0ZXIgb3IgY29uZGVzY2Vuc2lvbi4iLA0KICAgICAgaWNvbjogWzMxLCAyNV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgxNiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQZXRpdCBiZXVycmUiLA0KICAgICAgZGVzYzogJ0FuIHVuYXNzdW1pbmcgYmlzY3VpdCB3aG9zZSBuYW1lIHNpbXBseSBtZWFucyAibGl0dGxlIGJ1dHRlciIuIEZhbWVkIGFuZCBmZWFyZWQgZm9yIGl0cyBmb3VyIGVhcnMgYW5kIGZvcnR5LWVpZ2h0IHRlZXRoLjxicj5XaGVuIGl0IGhlYXJzIHlhLCBpdFwnbGwgZ2V0IHlhLi4uJywNCiAgICAgIGljb246IFszMSwgMjZdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTYpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTmFuYWltbyBiYXJzIiwNCiAgICAgIGRlc2M6ICJBIGRlbGljaW91cyBuby1iYWtlIHBhc3RyeSBoYWlsaW5nIGZyb20gQ2FuYWRhLiBQcm9iYWJseSBiZWF0cyBlYXRpbmcgc3RyYWlnaHQtdXAgc25vdyB3aXRoIG1hcGxlIHN5cnVwIHBvdXJlZCBvbiBpdCwgYnV0IHdoYXQgZG8gSSBrbm93LiIsDQogICAgICBpY29uOiBbMzEsIDI3XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDE3KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJlcmdlciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJNZXNzaWx5IHNsYXRoZXJlZCB3aXRoIGNob2NvbGF0ZSBmdWRnZSwgYnV0IG9uZSBvZiB0aGUgbW9zdCBwb3B1bGFyIGJlcmdlcnMgb2YgQmFsdGltb3JlLCBhbG9uZyB3aXRoIHRoZSB0cmlwbGUgZnJpZWQgZWdnIGJlcmdlciBhbmQgdGhlIGJsdWUgY3JhYiBjaGVlc2ViZXJnZXIuIiwNCiAgICAgIGljb246IFszMSwgMjhdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMTgpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2hpbnN1a28iLA0KICAgICAgZGVzYzogIkEgbGl0dGxlIHBpZWNlIG9mIE9raW5hd2EgaW4gY29va2llIGZvcm0uIFBhcnQgb2YgYSBKYXBhbmVzZSBjdXN0b20gb2Ygc2VsbGluZyBzd2VldHMgYXMgc291dmVuaXJzLiBCdXQgaGV5LCBwcmVzc2VkIHBlbm5pZXMgYXJlIGNvb2wgdG9vLiIsDQogICAgICBpY29uOiBbMzEsIDI5XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDE5KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBhbmRhIGtvYWxhIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJBc3NvcnRlZCBqdW5nbGUgYW5pbWFscyB3aXRoIGVxdWFsbHkgYXNzb3J0ZWQgZmlsbGluZ3MuPGJyPkNvbWVzIGluIGNob2NvbGF0ZSwgc3RyYXdiZXJyeSwgdmFuaWxsYSBhbmQgZ3JlZW4gdGVhLjxicj5FYXQgdGhlbSBhbGwgYmVmb3JlIHRoZXkgZ28gZXh0aW5jdCEiLA0KICAgICAgaWNvbjogWzMxLCAxM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgxOSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQdXRyaSBzYWxqdSIsDQogICAgICBkZXNjOiAiQSBiZWxvdmVkIEluZG9uZXNpYW4gcGFzdHJ5OyBpdHMgbmFtZSBtZWFucyBcInNub3cgcHJpbmNlc3NcIiwgZm9yIHRoZSBwb3dkZXJlZCBzdWdhciBpdCdzIGNvYXRlZCB3aXRoLiBIYWQgd2UgYWRkZWQgdGhlc2UgdG8gQ29va2llIENsaWNrZXIgc29tZSB5ZWFycyBhZ28sIHRoaXMgaXMgd2hlcmUgd2UnZCBtYWtlIGEgcmVmZXJlbmNlIHRvIHRoYXQgb25lIERpc25leSBtb3ZpZSwgYnV0IGl0J3MgcHJvYmFibHkgdGltZSB0byBsZXQgaXQgZ28uIiwNCiAgICAgIGljb246IFszMSwgMzBdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMjApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWlsayBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJCZXN0IGVhdGVuIHdpdGggYSB0YWxsIGdsYXNzIG9mIGNob2NvbGF0ZS4iLA0KICAgICAgaWNvbjogWzMxLCAzMV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyMSksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDk5OTk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDb29raWUgY3J1bWJzIiwNCiAgICAgIGRlc2M6ICJUaGVyZSB1c2VkIHRvIGJlIGEgY29va2llIGhlcmUuIE5vdyB0aGVyZSBpc24ndC48YnI+R29vZCBoZWF2ZW5zLCB3aGF0IGRpZCB5b3UgPGk+RE8/ITwvaT4iLA0KICAgICAgaWNvbjogWzMwLCAxM10sDQogICAgICBwb3dlcjogMSwNCiAgICAgIHJlcXVpcmU6ICJMZWdhY3kiLA0KICAgICAgcHJpY2U6IDEwMCwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNob2NvbGF0ZSBjaGlwIGNvb2tpZSIsDQogICAgICBkZXNjOiAiVGhpcyBpcyB0aGUgY29va2llIHlvdSd2ZSBiZWVuIGNsaWNraW5nIHRoaXMgd2hvbGUgdGltZS4gSXQgbG9va3MgYSBiaXQgZGVudGVkIGFuZCBuaWJibGVkIG9uLCBidXQgaXQncyBvdGhlcndpc2UgZ29vZCBhcyBuZXcuIiwNCiAgICAgIGljb246IFsxMCwgMF0sDQogICAgICBwb3dlcjogMTAsDQogICAgICByZXF1aXJlOiAiTGVnYWN5IiwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwMDAwLA0KICAgIH0pOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJDb3NtaWMgYmVnaW5uZXIncyBsdWNrIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlByaW9yIHRvIHB1cmNoYXNpbmcgdGhlIDxiPiUxPC9iPiB1cGdyYWRlIGluIGEgcnVuLCByYW5kb20gZHJvcHMgYXJlIDxiPiUyIHRpbWVzIG1vcmUgY29tbW9uPC9iPi4iLA0KICAgICAgICBbZ2V0VXBncmFkZU5hbWUoIkhlYXZlbmx5IGNoaXAgc2VjcmV0IiksIDVdDQogICAgICApICsNCiAgICAgICAgIjxxPk9oISBBIHBlbm55ITxicj5PaCEgQSBwcmljZWxlc3MgaGVpcmxvb20hPGJyPk9oISBBbm90aGVyIHBlbm55ITwvcT4iLA0KICAgICAgOTk5OTk5OTk5ICogMTUsDQogICAgICBbOCwgMTBdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNoaW1tZXJpbmcgdmVpbCJdOw0KICAgIEdhbWUuZ2V0VmVpbERlZmVuc2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbiA9IDA7DQogICAgICBpZiAoR2FtZS5IYXMoIlJlaW5mb3JjZWQgbWVtYnJhbmUiKSkgbiArPSAwLjE7DQogICAgICBpZiAoR2FtZS5IYXMoIkRlbGljYXRlIHRvdWNoIikpIG4gKz0gMC4xOw0KICAgICAgaWYgKEdhbWUuSGFzKCJTdGVhZGZhc3QgbXVybXVyIikpIG4gKz0gMC4xOw0KICAgICAgaWYgKEdhbWUuSGFzKCJHbGl0dGVyaW5nIGVkZ2UiKSkgbiArPSAwLjE7DQogICAgICByZXR1cm4gbjsNCiAgICB9Ow0KICAgIEdhbWUuZ2V0VmVpbEJvb3N0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG4gPSAwLjU7DQogICAgICBpZiAoR2FtZS5IYXMoIlJlaW5mb3JjZWQgbWVtYnJhbmUiKSkgbiArPSAwLjE7DQogICAgICBpZiAoR2FtZS5IYXMoIkRlbGljYXRlIHRvdWNoIikpIG4gKz0gMC4wNTsNCiAgICAgIGlmIChHYW1lLkhhcygiU3RlYWRmYXN0IG11cm11ciIpKSBuICs9IDAuMDU7DQogICAgICBpZiAoR2FtZS5IYXMoIkdsaXR0ZXJpbmcgZWRnZSIpKSBuICs9IDAuMDU7DQogICAgICByZXR1cm4gbjsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiUmVpbmZvcmNlZCBtZW1icmFuZSIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgPGI+c2hpbW1lcmluZyB2ZWlsPC9iPiBpcyBtb3JlIHJlc2lzdGFudCwgYW5kIGhhcyBhIDxiPiUxJSBjaGFuY2U8L2I+IG5vdCB0byBicmVhay4gSXQgYWxzbyBnaXZlcyA8Yj4rJTIlPC9iPiBtb3JlIENwUy4iLA0KICAgICAgICBbMTAsIDEwXQ0KICAgICAgKSArICI8cT5BIGNvbnNpc3RlbmN5IGJldHdlZW4gamVsbHlmaXNoIGFuZCBjbGluZyB3cmFwLjwvcT4iLA0KICAgICAgOTk5OTk5OTk5ICogMTUsDQogICAgICBbNywgMTBdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIlNoaW1tZXJpbmcgdmVpbCJdOw0KDQogICAgb3JkZXIgPSAyNTU7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJCaW5hcnkgZ3JhbmRtYXMiLA0KICAgICAgJ0EgZGlnaXRhbCBncmFuZG1hIHRvIHRyYW5zZmVyIG1vcmUgY29va2llcy48YnI+KFNlZSBhbHNvIDogYm9vbGVhbiBncmFuZG1hcywgc3RyaW5nIGdyYW5kbWFzLCBhbmQgbm90LWEtbnVtYmVyIGdyYW5kbWFzLCBhbHNvIGtub3duIGFzICJOYU5zIi4pJywNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTQwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiVGhlIEphdmFTY3JpcHQgY29uc29sZSBmb3IgZHVtbWllcyIsDQogICAgICAnPHE+VGhpcyBzaG91bGQgZ2V0IHlvdSBzdGFydGVkLiBUaGUgZmlyc3QgbGluZSByZWFkczogIlRvIG9wZW4gdGhlIGphdmFzY3JpcHQgY29uc29sZSwgcHJlc3MtIjxicj4uLi50aGUgcmVzdCBvZiB0aGUgYm9vayBpcyBzb2FrZWQgaW4gY2hvY29sYXRlIG1pbGsuIElmIG9ubHkgdGhlcmUgd2FzIGEgd2F5IHRvIGxvb2sgdXAgdGhpcyBzb3J0IG9mIGluZm9ybWF0aW9uLi4uPC9xPicsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICI2NGJpdCBhcnJheXMiLA0KICAgICAgIjxxPkEgbG9uZy1mb3JtIHZhcmlhYmxlIHR5cGUgdG8gcGFjayB5b3VyIGNvb2tpZXMgbXVjaCBtb3JlIGVmZmljaWVudGx5LjwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3RhY2sgb3ZlcmZsb3ciLA0KICAgICAgIjxxPlRoaXMgaXMgcmVhbGx5IGJhZCEgWW91IHByb2JhYmx5IGZvcmdvdCB0byBjbG9zZSBhIGxvb3Agc29tZXdoZXJlIGFuZCBub3cgeW91ciBwcm9ncmFtcyBhcmUgZ29pbmcgY3JhenkhIFRoZSByZXN0IG9mIHlvdXIgZW5naW5lZXJzIHNlZW0gcmVhbGx5IGV4Y2l0ZWQgYWJvdXQgaXQgc29tZWhvdy4gSG93IGNvdWxkIGEgc29mdHdhcmUgbWlzaGFwIGxpa2UgYSBzdGFjayBvdmVyZmxvdyBwb3NzaWJseSBldmVyIGhlbHAgYW55b25lPzwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAzDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRW50ZXJwcmlzZSBjb21waWxlciIsDQogICAgICAiPHE+VGhpcyBiZXNwb2tlIGphdmFzY3JpcHQgY29tcGlsZXIgdG9vayB5b3VyIHRlYW0geWVhcnMgb2YgZGV2ZWxvcG1lbnQgYW5kIGJpbGxpb25zIGluIHJlc2VhcmNoLCBidXQgaXQgc2hvdWxkIGxldCB5b3UgZXhlY3V0ZSAoY2VydGFpbikgZnVuY3Rpb25zICh1cCB0bykgMiUgZmFzdGVyIChpbiBvcHRpbWFsIGNpcmN1bXN0YW5jZXMpLjwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3ludGFjdGljIHN1Z2FyIiwNCiAgICAgICI8cT5UYXN0aWVyIGNvZGUgZm9yIHRhc3RpZXIgY29va2llcy48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgNQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkEgbmljZSBjdXAgb2YgY29mZmVlIiwNCiAgICAgICI8cT5BbGwgdGhpcyBuZXJkIHN0dWZmIGhhcyB5b3UgZXhoYXVzdGVkLiBZb3UgbWFrZSB5b3Vyc2VsZiBhIG5pY2UgY3VwIG9mIGNvZmZlZSwgYnJld2VkIHdpdGggcm9hc3RlZCBiZWFucyBmcm9tIHNvbWUgZmFyLWF3YXkgaXNsYW5kLiBZb3UgbWF5IGhhdmUgYmVlbiB3b3JraW5nIGEgYml0IHRvbyBoYXJkIHRob3VnaCAtIHRoZSBjdXAgb2YgY29mZmVlIHN0YXJ0cyB0YWxraW5nIHRvIHlvdSwgaW5zaXN0aW5nIHRoYXQgaXQgaXMgTk9UIGphdmFzY3JpcHQuPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDYNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJKdXN0LWluLXRpbWUgYmFraW5nIiwNCiAgICAgICI8cT5BIG5ldyBtZXRob2Qgb2YgcHJlcGFyaW5nIGNvb2tpZXM7IHRoZXkgYmFrZSB0aGVtc2VsdmVzIHJpZ2h0IGluIGZyb250IG9mIHRoZSBjdXN0b21lcnMgYmVmb3JlIGVhdGluZywgbGVhdmluZyB5b3VyIGtpdGNoZW5zIG1lc3MtZnJlZS48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgNw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgImNvb2tpZXMrKyIsDQogICAgICAnPHE+WW91ciB2ZXJ5IG93biBjb29raWUtdGhlbWVkIHByb2dyYW1taW5nIGxhbmd1YWdlLCBlbGVnYW50bHkgbmFtZWQgYWZ0ZXIgaXRzIG1vc3QgaW50ZXJlc3RpbmcgYWJpbGl0eSAtIGluY3JlYXNpbmcgdGhlICJjb29raWVzIiB2YXJpYWJsZSBieSAxLjwvcT4nLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICA4DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU29mdHdhcmUgdXBkYXRlcyIsDQogICAgICAiPHE+VGhpcyBpcyBncmFuZCBuZXdzIC0gc29tZW9uZSdzIGZpbmFsbHkgZmlndXJlZCBvdXQgdGhlIFdpZmkgcGFzc3dvcmQsIGFuZCB5b3VyIG5ld2ZvdW5kIGludGVybmV0IGNvbm5lY3Rpb24gc2VlbXMgdG8gaGF2ZSB0cmlnZ2VyZWQgYSB3aG9sZSBsb3Qgb2Ygc29mdHdhcmUgdXBkYXRlcyEgWW91ciBicm93c2VycywgZHJpdmVycyBhbmQgcGx1Z2lucyBhbGwgcmVjZWl2ZWQgYSBmcmVzaCBjb2F0IG9mIHBhaW50LCBhbmQgeW91ciBqYXZhc2NyaXB0IHZlcnNpb24gaGFzIGJlZW4gdXBkYXRlZCB0byB0aGUgbGF0ZXN0IEVDTUFTY3JpcHQgc3BlY2lmaWNhdGlvbi4gSXQncyByZWFsbHkgdG9vIGJhZCB0aG91c2FuZHMgaGFkIHRvIGRpZSBkdWUgdG8gc29tZSBkZXByZWNhdGVkIGZ1bmN0aW9uIGluIHlvdXIgbmV1cm90b3hpbiB2ZW50aWxhdGlvbiBjb2RlLCBidXQgSSBndWVzcyB0aGF0J3MgcHJvZ3Jlc3MgZm9yIHlvdS48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgOQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkdhbWUuTG9vcCIsDQogICAgICAiPHE+WW91J3JlIG5vdCBxdWl0ZSBzdXJlIHdoYXQgdG8gbWFrZSBvZiB0aGlzLiBXaGF0IGRvZXMgaXQgbWVhbj8gV2hhdCBkb2VzIGl0IGRvPyBXaG8gd291bGQgbGVhdmUgc29tZXRoaW5nIGxpa2UgdGhhdCBqdXN0IGxheWluZyBhcm91bmQgaGVyZT8gVHJ5IGFza2luZyBhZ2FpbiBpbiAxLzMwdGggb2YgYSBzZWNvbmQuPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiZXZhbCgpIiwNCiAgICAgICI8cT5JdCBpcyBzYWlkIHRoYXQgdGhpcyBzaW1wbGUgZnVuY3Rpb24gaG9sZHMgdGhlIGtleSB0byB0aGUgdW5pdmVyc2UsIGFuZCB0aGF0IHdob3NvZXZlciBtYXN0ZXJzIGl0IG1heSBzaGFwZSByZWFsaXR5IHRvIHRoZWlyIHdpbGwuPGJyPkdvb2QgdGhpbmcgeW91IGhhdmUgbm8gaWRlYSBob3cgaXQgd29ya3MuIE1ha2VzIGZvciBhIG5lYXQgcGxhcXVlIG9uIHlvdXIgd2FsbCwgdGhvdWdoLjwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAxMQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDUwMDA7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJTY3JpcHQgZ3Jhbm5pZXMiLA0KICAgICAgIjxxPkFybWllcyBvZiBlbmVyZ3kgZHJpbmstZnVlbGVkIGdyYW5kbWFzIHJlYWR5IHRvIGhhY2sgaW50byB0aGUgY3liZXJzcGFjZSBmb3IgcmVuZWdhZGUgZS1jb29raWVzLjwvcT4iLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICAic3luZXJneTEiDQogICAgKTsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlRvbWJvbGEgY29tcHV0aW5nIiwNCiAgICAgICIiLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAiQ2hhbmNlbWFrZXIiLA0KICAgICAgInN5bmVyZ3kyIg0KICAgICk7DQogICAgaWYgKEVOKSB7DQogICAgICBHYW1lLmxhc3QuZGVzY0Z1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIE1hdGguc2VlZHJhbmRvbShHYW1lLnNlZWQgKyAiLXRvbWJvbGFjb21wdXRpbmciKTsNCiAgICAgICAgdmFyIHN0ciA9DQogICAgICAgICAgIihZb3VyIHRpY2tldCByZWFkcyAiICsNCiAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApICsNCiAgICAgICAgICAiICIgKw0KICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArDQogICAgICAgICAgIiAiICsNCiAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApICsNCiAgICAgICAgICAiLCBlbnRpdGxpbmcgeW91IHRvICIgKw0KICAgICAgICAgIGNob29zZShbDQogICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1ICsgMikgKyAiIGxpbmVzIG9mIGphdmFzY3JpcHQiLA0KICAgICAgICAgICAgIm9uZSBmcmVlIHVzZSBvZiBNYXRoLnJhbmRvbSgpIiwNCiAgICAgICAgICAgICJvbmUgcXViaXQsIHdoYXRldmVyIHRoYXQgaXMiLA0KICAgICAgICAgICAgIm9uZSBoYWxmLWVhdGVuIGNvb2tpZSIsDQogICAgICAgICAgICAiYSBicmFuZCBuZXcgdmFjdXVtIGNsZWFuZXIiLA0KICAgICAgICAgICAgIm1vc3Qgb2Ygb25lIHJvb20tdGVtcGVyYXR1cmUgY3VwIG9mIG9yYW5nZSBzb2RhIiwNCiAgICAgICAgICAgICJvbmUgcmVhbGx5IGdvb2Qgc2FuZHdpY2giLA0KICAgICAgICAgICAgIm9uZSBoYW5kZnVsIG9mIHBvY2tldCBsaW50IiwNCiAgICAgICAgICAgICJzb21lb25lJ3MgbW9zdGx5IGNsZWFuIGhhaXJwaWVjZSIsDQogICAgICAgICAgICAiYSB0cmlwIHRvIGEgZmFuY3kgcmVzdGF1cmFudCIsDQogICAgICAgICAgICAidGhlIGtub3dsZWRnZSBvZiB0aG9zZSBudW1iZXJzIiwNCiAgICAgICAgICAgICJhIGZ1cnRpdmUgZ2xhbmNlIGF0IHRoZSBuZXdzIHRpY2tlciIsDQogICAgICAgICAgICAiYW5vdGhlciB0aWNrZXQsIGhhbGYtcHJpY2UiLA0KICAgICAgICAgICAgImFsbC15b3UtY2FuLWVhdCBtb2xkeSBicmVhZCIsDQogICAgICAgICAgICAib25lIGxpZmV0aW1lIHN1cHBseSBvZiBveHlnZW4iLA0KICAgICAgICAgICAgInRoZSBjb2xvciAiICsNCiAgICAgICAgICAgICAgY2hvb3NlWw0KICAgICAgICAgICAgICAgICgicmVkIiwNCiAgICAgICAgICAgICAgICAib3JhbmdlIiwNCiAgICAgICAgICAgICAgICAieWVsbG93IiwNCiAgICAgICAgICAgICAgICAiZ3JlZW4iLA0KICAgICAgICAgICAgICAgICJibHVlIiwNCiAgICAgICAgICAgICAgICAicHVycGxlIiwNCiAgICAgICAgICAgICAgICAiYmxhY2siLA0KICAgICAgICAgICAgICAgICJ3aGl0ZSIsDQogICAgICAgICAgICAgICAgImdyYXkiLA0KICAgICAgICAgICAgICAgICJicm93biIsDQogICAgICAgICAgICAgICAgInBpbmsiLA0KICAgICAgICAgICAgICAgICJ0ZWFsIikNCiAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICJpbmNyZWFzZWQgaW50ZWxsZWN0IGZvciBhIGxpbWl0ZWQgdGltZSIsDQogICAgICAgICAgICAiYW4gYW5jaWVudCBydW5lc3dvcmQiLA0KICAgICAgICAgICAgInRoZSB0aHJvbmUgb2YgYSBmYXItYXdheSBjb3VudHJ5IiwNCiAgICAgICAgICAgICJ0aGUgcG9zaXRpb24gb2YgTWFmaWEgY2Fwby4gR29vZCBsdWNrIiwNCiAgICAgICAgICAgICJvbmUgZnJlZSB0aW1lLXRyYXZlbCB3ZWVrLWVuZCIsDQogICAgICAgICAgICAic29tZXRoaW5nIGJlYXV0aWZ1bCIsDQogICAgICAgICAgICAidGhlIGRlZWQgdG8gc29tZSBvaWwgd2VsbCIsDQogICAgICAgICAgICAib25lIGhhbWJ1cmdlciBtYWRlIG91dCBvZiB0aGUgYW5pbWFsLCBwbGFudCwgb3IgcGVyc29uIG9mIHlvdXIgY2hvaWNlIiwNCiAgICAgICAgICAgICJ0aGUgbGFzdCBzdXJ2aXZpbmcgIiArDQogICAgICAgICAgICAgIGNob29zZVsNCiAgICAgICAgICAgICAgICAoImRvZG8gYmlyZCIsICJ0aHlsYWNpbmUiLCAidW5pY29ybiIsICJkaW5vc2F1ciIsICJuZWFuZGVydGhhbCIpDQogICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAiYSBkZWVwIGZlZWxpbmcgb2YgYWNjb21wbGlzaG1lbnQiLA0KICAgICAgICAgICAgImEgZmxlZXRpbmcgdGluZ2Ugb2YgZW50ZXJ0YWlubWVudCIsDQogICAgICAgICAgICAiYSB2YWd1ZSBzZW5zZSBvZiB1bmVhc2UiLA0KICAgICAgICAgICAgImRlZXAgZXhpc3RlbnRpYWwgZHJlYWQiLA0KICAgICAgICAgICAgIm9uZSBleHRyYSB3ZWVrIGFkZGVkIHRvIHlvdXIgbGlmZXNwYW4iLA0KICAgICAgICAgICAgImJyZWF0aGUgbWFudWFsbHkiLA0KICAgICAgICAgICAgImJsaW5rIHJpZ2h0IGhlcmUgYW5kIG5vdyIsDQogICAgICAgICAgICAib25lIG1lZXRpbmcgd2l0aCBhbnkgZmFtb3VzIHBlcnNvbiwgbGl2aW5nIG9yIGRlYWQsIGluIHlvdXIgbmV4dCBkcmVhbSIsDQogICAgICAgICAgICAib25lIHZlcnkgbmljZSBkcmVhbSIsDQogICAgICAgICAgICAiYSB3YWNreSBzb3VuZCBlZmZlY3QiLA0KICAgICAgICAgICAgIjQ1IHNlY29uZHMgb2YgbW9yYWwgZmxleGliaWxpdHkiLA0KICAgICAgICAgICAgJ2h1bmRyZWRzIGFuZCB0aG91c2FuZHMsIGFsc28ga25vd24gYXMgInNwcmlua2xlcyInLA0KICAgICAgICAgICAgIm9uZSBjaXJjbGUsIHRyaWFuZ2xlLCBzcXVhcmUgb3Igb3RoZXIgc2ltcGxlIGdlb21ldHJpYyBzaGFwZSwgb2YgYXZlcmFnZSBkaW1lbnNpb25zIiwNCiAgICAgICAgICAgICJqdXN0IHRoaXMgZXh0cmEgYml0IG9mIHJhbmRvbW5lc3MiLA0KICAgICAgICAgICAgInRoZSBleHRyYSBwdXNoIHlvdSBuZWVkZWQgdG8gdHVybiB5b3VyIGxpZmUgYXJvdW5kIiwNCiAgICAgICAgICAgICJhIGdvb2QgZnJpZ2h0IiwNCiAgICAgICAgICAgICJvbmUgc2VjcmV0IHN1cGVycG93ZXIiLA0KICAgICAgICAgICAgImEgYmV0dGVyIGx1Y2sgbmV4dCB0aW1lIiwNCiAgICAgICAgICAgICJhbiBpcnJhdGlvbmFsIHBob2JpYSBvZiB0b21ib2xhIHRpY2tldHMiLA0KICAgICAgICAgICAgIm9uZSB3aG9sZSBzcGlkZXIiLA0KICAgICAgICAgICAgImFuIGluY3JlYXNlZCBzZW5zZSBvZiBzZWxmLXdvcnRoIGFuZCBkZXRlcm1pbmF0aW9uIiwNCiAgICAgICAgICAgICJpbm5lciBwZWFjZSIsDQogICAgICAgICAgICAib25lIGRvdWJsZS1YUCB3ZWVrLWVuZCBpbiB0aGUgTU1PUlBHIG9mIHlvdXIgY2hvaWNlIiwNCiAgICAgICAgICAgICJhIGxpdHRsZSBwaWVjZSBvZiB0aGUgdW5pdmVyc2UsIHJlcHJlc2VudGVkIGJ5IHRoZSB0cmlsbGlvbnMgb2YgYXRvbXMgdGhhdCBtYWtlIHVwIHRoaXMgdmVyeSB0aWNrZXQiLA0KICAgICAgICAgICAgImZvb2QgcG9pc29uaW5nIiwNCiAgICAgICAgICAgICJ0aGUgTW9vbiEgV2VsbCwgY29uY2VwdHVhbGx5IiwNCiAgICAgICAgICAgICJhIG5ldyBjYXIsIGJhYnkiLA0KICAgICAgICAgICAgImEgbmV3IGNhdGNocGhyYXNlIiwNCiAgICAgICAgICAgICJhbiBpbnRydXNpdmUgdGhvdWdodCBvZiB5b3VyIGNob2ljZSIsDQogICAgICAgICAgICAiLSAuLi5hdyBtYW4sIGl0IGp1c3QgY3V0cyBvZmYgdGhlcmUiLA0KICAgICAgICAgICAgInRoZSBkaXJlY3RvciBzcG90IGZvciB0aGUgbmV4dCBiaWcgaGl0IG1vdmllIiwNCiAgICAgICAgICAgICJyZWFsbHkgZ29vZC1sb29raW5nIGNhbHZlcyIsDQogICAgICAgICAgICAib25lIGdlbnVpbmUgcGlyYXRlIGdvbGRlbiBkb3VibG9vbiIsDQogICAgICAgICAgICAnInRyZWFzdXJlIGFuZCByaWNoZXMiLCBvciBzb21ldGhpbmcnLA0KICAgICAgICAgICAgIm9uZSBib2F0LCBzdW5rZW4iLA0KICAgICAgICAgICAgImJhYnkgc2hvZXMsIG5ldmVyIHdvcm4iLA0KICAgICAgICAgICAgImRpcmVjdCBsaW5lYWdlIHRvIHNvbWUgS2luZyBvciBRdWVlbiIsDQogICAgICAgICAgICAiaW5uYXRlIGtub3dsZWRnZSBvZiBhIGRlYWQgbGFuZ3VhZ2UgeW91J2xsIG5ldmVyIGVuY291bnRlciIsDQogICAgICAgICAgICAidGhlIG1lbG9keSBvZiBhIHNvbmcgeW91IGRvbid0IGtub3cgdGhlIHdvcmRzIHRvIiwNCiAgICAgICAgICAgICJ3aGl0ZSBub2lzZSIsDQogICAgICAgICAgICAibWlsZCBwaHlzaWNhbCBpbXBhaXJtZW50IiwNCiAgICAgICAgICAgICJhIG5ldyBwYWlyIG9mIGxpcHMiLA0KICAgICAgICAgICAgInRoaW5ncywgYW5kIHN1Y2giLA0KICAgICAgICAgICAgIm9uZSBwb3B1bGFyIGV4cHJlc3Npb24gYmVhcmluZyB5b3VyIG5hbWUiLA0KICAgICAgICAgICAgIm9uZSB0eXBvIiwNCiAgICAgICAgICAgICJvbmUgZ2V0LW91dC1vZi1qYWlsLWZyZWUgY2FyZCIsDQogICAgICAgICAgICAidGhlIHJlc3Qgb2YgeW91ciBsaWZlLi4uIGZvciBub3ciLA0KICAgICAgICAgICAgIm9uZSBwb2xpdGUgaHVmZiIsDQogICAgICAgICAgICAiYSBjb25kZXNjZW5kaW5nIHN0YXJlIiwNCiAgICAgICAgICAgICJvbmUgY3Vyc2VkIG1vbmtleSBwYXciLA0KICAgICAgICAgICAgInRydWUgbG92ZSwgcHJvYmFibHkiLA0KICAgICAgICAgICAgImFuIGludGVyZXN0aW5nIGZhY3RvaWQgYWJvdXQgdGhlIGFuaW1hbCwgY291bnRyeSwgVFYgc2hvdyBvciBjZWxlYnJpdHkgb2YgeW91ciBjaG9pY2UiLA0KICAgICAgICAgICAgImEgcG9wIGN1bHR1cmUgcmVmZXJlbmNlIiwNCiAgICAgICAgICAgICJtaW51dGVzIG9mIGZ1biIsDQogICAgICAgICAgICAndGhlIGV0eW1vbG9neSBvZiB0aGUgd29yZCAidG9tYm9sYSIgLSBpdFwncyBJdGFsaWFuIGZvciAiYSB0dW1ibGUiJywNCiAgICAgICAgICAgICJub3RoaW5nLiBZb3UgbG9zdCwgc29ycnkiLA0KICAgICAgICAgIF0pICsNCiAgICAgICAgICAiLikiOw0KICAgICAgICBNYXRoLnNlZWRyYW5kb20oKTsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICB0aGlzLmRlc2MgKw0KICAgICAgICAgICI8cT5MaWtlIHF1YW50dW0gY29tcHV0aW5nLCBidXQgbW9yZSBmdW4uPGJyPiIgKw0KICAgICAgICAgIHN0ciArDQogICAgICAgICAgIjwvcT4iDQogICAgICAgICk7DQogICAgICB9Ow0KICAgIH0gZWxzZSBHYW1lLmxhc3QuZGVzYyA9ICI8cT4tPC9xPiI7DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiS3J1aWRub3RlbiIsDQogICAgICBkZXNjOiAnQSBmZXN0aXZlIGR1dGNoIGZhdm9yaXRlOyB0aW55IGNpbm5hbW9ueSBiaXRlcyBzb21ldGltZXMgY29hdGVkIGluIGNob2NvbGF0ZS4gVGhlIG5hbWUgdHJhbnNsYXRlcyByb3VnaGx5IHRvICJrcnVpZG5vdGVuIi4nLA0KICAgICAgaWNvbjogWzMwLCAzXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDIyKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIk1hcmllIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJQbGVhc2FudGx5IHJvdW5kLCBzbW9vdGhseSBidXR0ZXJ5LCBzdWJ0bHkgdmFuaWxsYS1mbGF2b3JlZCwgb3JuYXRlbHkgZW1ib3NzZWQsIGVhY2ggcmlkZ2UgcmVwcmVzZW50cyBhIHBlcnNvbiBNYXJpZSBraWxsZWQgaW4gcHJpc29uLiIsDQogICAgICBpY29uOiBbMzAsIDRdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMjMpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWVyaW5ndWUgY29va2llcyIsDQogICAgICBkZXNjOiAiUHJvYmFibHkgdGhlIG1vc3QgZXhjaXRpbmcgdGhpbmcgeW91IGNhbiBtYWtlIG91dCBvZiBlZ2cgd2hpdGVzLiBBbHNvIGNhbGxlZCBmb3Jnb3R0ZW4gY29va2llcywgZHVlIHRvIHRoZSByZWNpcGUgYmVpbmcgb25jZSBsb3N0IGluIGEgc2VhbGVkIG15c3RpY2FsIHZhdWx0IGZvciAxMCwwMDAgeWVhcnMuIiwNCiAgICAgIGljb246IFszMSwgNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyNCksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDYwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGl6emEiLA0KICAgICAgZGVzYzogIldoYXQgaXMgYSBwaXp6YSBpZiBub3QgYSBsYXJnZSwgY2hld3kgY29va2llLCBmcm9zdGVkIHdpdGggYSByYXRoZXIgZXh1YmVyYW50IHRvbWF0byAmIGNoZWVzZSBpY2luZz8gTm90IGEgY29va2llLCB0aGF0J3Mgd2hhdC4iLA0KICAgICAgaWNvbjogWzMxLCA5XSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2Ygbm90IGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQ0KSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTAwNTA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJDcmFja2VycyIsDQogICAgICBkZXNjOiAnVGhlc2UgYXJlIHRoZSBub24tZmxhdm9yZWQga2luZCB3aXRoIG5vIHNhbHQgYWRkZWQuIFJlYWxseSBqdXN0IGEganVkZ21lbnQtZnJlZSB3aGVhdCBzcXVhcmUgYmVnZ2luZyB0byBoYXZlIGJpdHMgb2YgaGFtIGFuZCBzcHJlYWRhYmxlIGNoZWVzZSBwaWxlZCBvbnRvIGl0LCBpdHMgbWFpbiBjb250cmlidXRpb24gYmVpbmcgImNydW5jaHkiLicsDQogICAgICBpY29uOiBbMzAsIDldLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYXliZSBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA0LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCA0NSksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDMwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSGF2YWJyZWFrcyIsDQogICAgICBkZXNjOiAiWW91IGNhbiBzbmFwIHRoZSBzZWN0aW9ucyBuZWF0bHkgb3IganVzdCBiaXRlIGludG8gdGhlIHdob2xlIHRoaW5nIGxpa2Ugc29tZSBraW5kIG9mIGx1bmF0aWMuIFNvbWUgb3ZlcnNlYSBjb3VudHJpZXMgbWFudWZhY3R1cmUgdGhlc2UgaW4gaHVuZHJlZHMgb2YgdW5pcXVlIGZsYXZvcnMsIHN1Y2ggYXMgZ3JlZW4gdGVhLCBsb2JzdGVyIGJpc3F1ZSwgYW5kIGRhcmsgY2hvY29sYXRlLiIsDQogICAgICBpY29uOiBbMzEsIDNdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBicmFuZCBiaXNjdWl0cyIsDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiA1LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAyMDAwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIktpdHRlbiBleGVjdXRpdmVzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKw0KICAgICAgICAiPHE+cmVhZHkgdG8gZXhlY3V0ZSB3aGF0ZXZlciBhbmQgd2hvZXZlciB5b3UnZCBsaWtlLCBzaXI8L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIEdhbWUuR2V0SWNvbigiS2l0dGVuIiwgMTMpDQogICAgKTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxMywgMTgpOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkNoYWkgdGVhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIk5vdCBleGFjdGx5IENhcHRhaW4gUGljYXJkJ3MgZmF2b3JpdGUsIGJ1dCBJIG1lYW4sIHRoZXNlIHdpbGwgZG8gaW4gYSBwaW5jaC4iLA0KICAgICAgaWNvbjogWzIzLCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0KSArIDUsDQogICAgfSk7DQogICAgR2FtZS5sYXN0Lm9yZGVyID0gMTAwMjAuNTY4NTsNCg0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiWW9ndXJ0IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkF1Z21lbnRlZCBieSB0aGUgd29uZGVycyBvZiBkYWlyeSwgdGhlc2UgY29va2llcyBhcmUgbGlnaHQgYW5kIGZsdWZmeSBhbmQganVzdCBvbmUgbW9yZSB0aGluZyBmb3IgdGhlIGxhY3Rvc2UtaW50b2xlcmFudCB0byBhdm9pZC48YnI+VHJ1bHkgZm9yIHRoZSBjdWx0dXJlZCBhbW9uZyB1cy4iLA0KICAgICAgaWNvbjogWzI0LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyNSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJUaHVtYnByaW50IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkZpbGxlZCB3aXRoIGphbSBhbmQgc29tZXRpbWVzIHNlcnZlZCBpbiBsaXR0bGUgcGFwZXIgY3Vwcy4gTm8gbG9uZ2VyIGFkbWlzc2libGUgYXMgYmlvbWV0cmljIGV2aWRlbmNlIGluIGNvdXJ0LiBXZSdyZSBub3QgaGF2aW5nIGEgcmVwZWF0IG9mIHRoYXQgd2hvbGUgbWVzcy4iLA0KICAgICAgaWNvbjogWzI1LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyNiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQaXp6ZWxsZSIsDQogICAgICBkZXNjOiAiVGhpbiwgY3Jpc3Agd2FmZmxlIGNvb2tpZXMgYmFrZWQgaW4gYSBiZXNwb2tlIGlyb24gZm9sbG93aW5nIGFuIGFuY2llbnQgSXRhbGlhbiByZWNpcGUuPGJyPlRoZXNlIGNvb2tpZXMgaGF2ZSBiZWVuIGFyb3VuZCBmb3IgYSBsb25nLCBsb25nIHRpbWUuPGJyPlRoZXNlIGNvb2tpZXMgaGF2ZSBzZWVuIHRoaW5ncy4iLA0KICAgICAgaWNvbjogWzI2LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyNyksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDMwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiWmlsbGEgd2FmZXJzIiwNCiAgICAgIGRlc2M6ICJQb3B1bGFyIHZhbmlsbGEtZmxhdm9yZWQgYmlzY3VpdHMgdGhhdCBzb21laG93IGtlZXAgZW5kaW5nIHVwIGluIGJhbmFuYSBwdWRkaW5nLjxicj5UaGVtZWQgYWZ0ZXIgYSBiZWxvdmVkIHJhZGlvYWN0aXZlIHByZWhpc3RvcmljIG1vbnN0ZXIsIGZvciBzb21lIHJlYXNvbi4iLA0KICAgICAgaWNvbjogWzIyLCAzMl0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJEaW0gRGFtcyIsDQogICAgICBkZXNjOiAiVHdvIGJpc2N1aXRzIGpvaW5lZCBieSBjaG9jb2xhdGUgYW5kIGNvYXRlZCBpbiBldmVuIG1vcmUgY2hvY29sYXRlLjxicj5Zb3Ugd29uZGVyIC0gd2hpY2ggb25lIGlzIHRoZSBkaW0sIGFuZCB3aGljaCBvbmUgaXMgdGhlIGRhbT8iLA0KICAgICAgaWNvbjogWzMxLCAxMF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDYwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2FuZHkiLA0KICAgICAgZGVzYzogIlRoZXJlIGFyZSB0d28gcGlsbGFycyB0byB0aGUgd29ybGQgb2Ygc3dlZXRzIDogcGFzdHJpZXMsIG9mIGNvdXJzZSAtIGFuZCBjYW5keS48YnI+WW91IGNvdWxkIG1ha2UgYSB3aG9sZSBuZXcgZ2FtZSBqdXN0IGFib3V0IHRoZXNlLCBidXQgZm9yIG5vdywgcGxlYXNlIGVuam95IHRoZXNlIGFzc29ydGVkIGdlbmVyaWMgdHJlYXRzLiIsDQogICAgICBpY29uOiBbMzAsIDEwXSwNCiAgICAgIHJlcXVpcmU6ICJCb3ggb2Ygbm90IGNvb2tpZXMiLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogTWF0aC5wb3coMTAsIDQ2KSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMTkwMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAwMSIsDQogICAgICAiPHE+RmluZ2VycyBhcmUgbm90IHRoZSBvbmx5IHRoaW5nIHlvdSBjYW4gY291bnQgb24uPC9xPiIsDQogICAgICAiQ3Vyc29yIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAwMiIsDQogICAgICAiPHE+QSB3cmlua2xlIGlzIGEgY3JhY2sgaW4gYSBtdW5kYW5lIGZhY2FkZS48L3E+IiwNCiAgICAgICJHcmFuZG1hIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAwMyIsDQogICAgICAiPHE+VGhlIHNlZWRzIG9mIHRvbW9ycm93IGFscmVhZHkgbGllIHdpdGhpbiB0aGUgc2VlZHMgb2YgdG9kYXkuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMDQiLA0KICAgICAgIjxxPlJpY2hlcyBmcm9tIGRlZXAgdW5kZXIgZWxldmF0ZSB5b3UgYWxsIHRoZSBzYW1lLjwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgImZvcnR1bmUiDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMDA1IiwNCiAgICAgICI8cT5UcnVlIHdvcnRoIGlzIG5vdCBpbiB3aGF0IHlvdSBmaW5kLCBidXQgaW4gd2hhdCB5b3UgbWFrZS48L3E+IiwNCiAgICAgICJGYWN0b3J5IiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAwNiIsDQogICAgICAiPHE+VGhlIHZhbHVlIG9mIG1vbmV5IG1lYW5zIG5vdGhpbmcgdG8gYSBwb2NrZXQuPC9xPiIsDQogICAgICAiQmFuayIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMDciLA0KICAgICAgIjxxPk5vdCBhbGwgZ3VpZGVzIGRlc2VydmUgd29yc2hpcC48L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgImZvcnR1bmUiDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMDA4IiwNCiAgICAgICI8cT5NYWdpYyBpcyBhYm91dCB0d28gdGhpbmdzIC0gc2hvd21hbnNoaXAsIGFuZCByYWJiaXRzLjwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMDkiLA0KICAgICAgIjxxPkV2ZXJ5IG1pbGUgdHJhdmVsbGVkIGV4cGFuZHMgdGhlIG1pbmQgYnkganVzdCBhcyBtdWNoLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAxMCIsDQogICAgICAiPHE+RG9uJ3QgZ2V0IHVzZWQgdG8geW91cnNlbGYuIFlvdSdyZSBnb25uYSBoYXZlIHRvIGNoYW5nZS48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMTEiLA0KICAgICAgIjxxPkV2ZXJ5IGRvb3J3YXkgaXMgYSBnYW1ibGUuIFRyZWFkIHdpdGggY2FyZS48L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgImZvcnR1bmUiDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMDEyIiwNCiAgICAgICI8cT5EbyB5b3VyIGZ1dHVyZSBzZWxmIGEgZmF2b3I7IHRoZXknbGwgdGhhbmsgeW91IGZvciBpdC48L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgImZvcnR1bmUiDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMDEzIiwNCiAgICAgICI8cT5UaGUgd29ybGQgaXMgbWFkZSBvZiB3aGF0IHdlIHB1dCBpbnRvIGl0LjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAxNCIsDQogICAgICAiPHE+U3RhcmluZyBhdCBhIGRhenpsaW5nIGxpZ2h0IGNhbiBibGluZCB5b3UgYmFjayB0byBkYXJrbmVzcy48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMTUiLA0KICAgICAgIjxxPkRvbid0IGxlYXZlIHRvIGJsaW5kIGNoYW5jZSB3aGF0IHlvdSBjb3VsZCBhY2NvbXBsaXNoIHdpdGggZGVhZiBza2lsbC48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMTYiLA0KICAgICAgIjxxPkl0J3MgZ29vZCB0byBzZWUgeW91cnNlbGYgaW4gb3RoZXJzLiBSZW1lbWJlciB0byBzZWUgeW91cnNlbGYgaW4geW91cnNlbGYsIHRvby48L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGb3J0dW5lICMwMTciLA0KICAgICAgIjxxPklmIHRoaW5ncyBhcmVuJ3Qgd29ya2luZyBvdXQgZm9yIHlvdSwgcmV3cml0ZSB0aGUgcnVsZXMuPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDE5MTAwOw0KICAgIC8vbm90ZSA6IHByaWNlIGZvciB0aGVzZSBjYXBwZWQgdG8gYmFzZSBwcmljZSBPUiAxIGRheSBvZiB1bmJ1ZmZlZCBDcFMNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzEwMCIsDQogICAgICBsb2MoIkFsbCBidWlsZGluZ3MgYW5kIHVwZ3JhZGVzIGFyZSA8Yj4lMSUgY2hlYXBlcjwvYj4uIiwgMSkgKw0KICAgICAgICAiICIgKw0KICAgICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZXIgPGI+KyUxJTwvYj4uIiwgMSkgKw0KICAgICAgICAiPHE+VHJ1ZSB3ZWFsdGggaXMgY291bnRlZCBpbiBnaWZ0cy48L3E+IiwNCiAgICAgIEdhbWUuVGllcnNbImZvcnR1bmUiXS5wcmljZSAqIDEwMDAwMCwNCiAgICAgIFswLCAwXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgImZvcnR1bmUiLCAxMCk7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGZ1bmN0aW9uIChtZSkgew0KICAgICAgcmV0dXJuIE1hdGgubWluKG1lLmJhc2VQcmljZSwgR2FtZS51bmJ1ZmZlZENwcyAqIDYwICogNjAgKiAyNCk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzEwMSIsDQogICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZXIgPGI+KyUxJTwvYj4uIiwgNykgKw0KICAgICAgICAiPHE+U29tZSBwZW9wbGUgZHJlYW0gb2YgZm9ydHVuZXM7IG90aGVycyBkcmVhbSBvZiBjb29raWVzLjwvcT4iLA0KICAgICAgR2FtZS5UaWVyc1siZm9ydHVuZSJdLnByaWNlICogMTAwMDAwMDAwLA0KICAgICAgWzAsIDBdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAiZm9ydHVuZSIsIDEwKTsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZnVuY3Rpb24gKG1lKSB7DQogICAgICByZXR1cm4gTWF0aC5taW4obWUuYmFzZVByaWNlLCBHYW1lLnVuYnVmZmVkQ3BzICogNjAgKiA2MCAqIDI0KTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMTAyIiwNCiAgICAgIGxvYygNCiAgICAgICAgIllvdSBnYWluIGFub3RoZXIgPGI+KyUxJTwvYj4gb2YgeW91ciByZWd1bGFyIENwUyB3aGlsZSB0aGUgZ2FtZSBpcyBjbG9zZWQuIiwNCiAgICAgICAgMQ0KICAgICAgKSArDQogICAgICAgICIgPHNtYWxsPigiICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJNdXN0IG93biB0aGUgJTEgdXBncmFkZS4iLA0KICAgICAgICAgIGdldFVwZ3JhZGVOYW1lKCJUd2luIEdhdGVzIG9mIFRyYW5zY2VuZGVuY2UiKQ0KICAgICAgICApICsNCiAgICAgICAgIik8L3NtYWxsPiIgKw0KICAgICAgICAiPHE+SGVscCwgSSdtIHRyYXBwZWQgaW4gYSAiICsNCiAgICAgICAgKEFwcCA/ICJjb21wdXRlciIgOiAiYnJvd3NlciIpICsNCiAgICAgICAgIiBnYW1lITwvcT4iLA0KICAgICAgR2FtZS5UaWVyc1siZm9ydHVuZSJdLnByaWNlICogMTAwMDAwMDAwMDAwLA0KICAgICAgWzAsIDBdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAiZm9ydHVuZSIsIDEwKTsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZnVuY3Rpb24gKG1lKSB7DQogICAgICByZXR1cm4gTWF0aC5taW4obWUuYmFzZVByaWNlLCBHYW1lLnVuYnVmZmVkQ3BzICogNjAgKiA2MCAqIDI0KTsNCiAgICB9Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRm9ydHVuZSAjMTAzIiwNCiAgICAgIHN0cktpdHRlbkRlc2MgKw0KICAgICAgICAiPHE+RG9uJ3QgYmVsaWV2ZSB0aGUgc3VwZXJzdGl0aW9uczsgYWxsIGNhdHMgYXJlIGdvb2QgbHVjay48L3E+IiwNCiAgICAgIEdhbWUuVGllcnNbImZvcnR1bmUiXS5wcmljZSAqIDEwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFswLCAwXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgImZvcnR1bmUiLCAxOCk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGZ1bmN0aW9uIChtZSkgew0KICAgICAgcmV0dXJuIE1hdGgubWluKG1lLmJhc2VQcmljZSwgR2FtZS51bmJ1ZmZlZENwcyAqIDYwICogNjAgKiAyNCk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzEwNCIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsgIjxxPlJlbWVtYmVyIHRvIHN0YXkgaW4gdG91Y2guPC9xPiIsDQogICAgICBHYW1lLlRpZXJzWyJmb3J0dW5lIl0ucHJpY2UgKiAxMDAwMDAwMDAwMDAsDQogICAgICBbMCwgMF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsICJmb3J0dW5lIiwgMTEpOw0KICAgIEdhbWUubGFzdC5wcmljZUZ1bmMgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIHJldHVybiBNYXRoLm1pbihtZS5iYXNlUHJpY2UsIEdhbWUudW5idWZmZWRDcHMgKiA2MCAqIDYwICogMjQpOw0KICAgIH07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgY29va2llcyIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgbmV3cyB0aWNrZXIgbWF5IG9jY2FzaW9uYWxseSBoYXZlIDxiPmZvcnR1bmVzPC9iPiwgd2hpY2ggbWF5IGJlIGNsaWNrZWQgZm9yIHNvbWV0aGluZyBnb29kLiINCiAgICAgICkgKw0KICAgICAgICAiPHE+VGhlc2UgZG9uJ3QgdGFzdGUgYWxsIHRoYXQgZ3JlYXQgYnV0IHRoYXQncyBub3QgcmVhbGx5IHRoZSBwb2ludCwgaXMgaXQ/PC9xPiIsDQogICAgICA3Nzc3Nzc3Nzc3NywNCiAgICAgIFsyOSwgOF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiRGlzdGlsbGVkIGVzc2VuY2Ugb2YgcmVkb3VibGVkIGx1Y2siXTsNCg0KICAgIG9yZGVyID0gNDAwMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBIHJlYWxseSBnb29kIGd1aWRlIGJvb2siLA0KICAgICAgIjxiPj8/PzwvYj48cT4/Pz8/Pz88L3E+IiwNCiAgICAgIDcsDQogICAgICBbMjIsIDEyXQ0KICAgICk7IC8vZGVidWcgcHVycG9zZXMgb25seQ0KICAgIC8vbmV3IEdhbWUuVXBncmFkZSgnQSByZWFsbHkgZ29vZCBndWlkZSBib29rJywnPGI+QWxsIGR1bmdlb24gbG9jYXRpb25zIGJlaGF2ZSBhcyBpZiB1bmxvY2tlZC48L2I+PGJyPjxiPllvdSBtYXkgc2hpZnQtY2xpY2sgYSBkdW5nZW9uIGxvY2F0aW9uIHRvIHRlbGVwb3J0IHRoZXJlLjwvYj48cT5JdCBldmVuIHRlbGxzIHlvdSB3aGljaCBob3RlbHMgdG8gYXZvaWQhPC9xPicsNyxbMjIsMTJdKTsvL2RlYnVnIHB1cnBvc2VzIG9ubHkNCiAgICBHYW1lLmxhc3QuYnV5RnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5PYmplY3RzWyJGYWN0b3J5Il0ubWluaWdhbWVMb2FkZWQpIHsNCiAgICAgICAgR2FtZS5PYmplY3RzWyJGYWN0b3J5Il0ubWluaWdhbWUuY29tcHV0ZU1hcEJvdW5kcygpOw0KICAgICAgICBHYW1lLk9iamVjdHNbIkZhY3RvcnkiXS5taW5pZ2FtZS51cGRhdGVMb2NTdHlsZXMoKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUubGFzdC5wb29sID0gImRlYnVnIjsNCg0KICAgIG9yZGVyID0gMTAzMDA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJQcmlzbSBoZWFydCBiaXNjdWl0cyIsDQogICAgICBkZXNjOiAiQW4gZXZlcnktZmxhdm9yIGJpc2N1aXQgdGhhdCBzdGFuZHMgZm9yIHVuaXZlcnNhbCBsb3ZlIGFuZCBiZWluZyB0cnVlIHRvIHlvdXJzZWxmLiIsDQogICAgICByZXF1aXJlOiAiRXRlcm5hbCBoZWFydCBiaXNjdWl0cyIsDQogICAgICBzZWFzb246ICJ2YWxlbnRpbmVzIiwNCiAgICAgIGljb246IFszMCwgOF0sDQogICAgICBwb3dlcjogaGVhcnRQb3dlciwNCiAgICAgIHByaWNlOiAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgIH0pOw0KICAgIEdhbWUubGFzdC5vcmRlciA9IDEwMzAwLjE3NTsNCg0KICAgIG9yZGVyID0gMTkxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJLaXR0ZW4gd2FnZXMiLA0KICAgICAgbG9jKA0KICAgICAgICAiVGhyb3VnaCBjbGV2ZXIgYWNjb3VudGluZywgdGhpcyBhY3R1YWxseSBtYWtlcyBraXR0ZW4gdXBncmFkZXMgPGI+JTElIGNoZWFwZXI8L2I+LiIsDQogICAgICAgIDEwDQogICAgICApICsNCiAgICAgICAgIjxxPkNhdHMgY2FuIGhhdmUgbGl0dGxlIGEgc2FsYXJ5LCBhcyBhIHRyZWF0Ljxicj5DYXRzIGFyZSBleHBlcnQgaGFnZ2xlcnMgYW5kIGhhdmUgYSBrZWVuIHNlbnNlIG9mIGJhcmdhaW5pbmcsIGVzcGVjaWFsbHkgaW4gdGhlIGNhc2Ugb2YgY2FzaC48L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAsDQogICAgICBbMzEsIDhdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIktpdHRlbiBhbmdlbHMiXTsNCiAgICBHYW1lLmxhc3Qua2l0dGVuID0gMTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIlBldCB0aGUgZHJhZ29uIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlVubG9ja3MgdGhlIGFiaWxpdHkgdG8gPGI+cGV0IHlvdXIgZHJhZ29uPC9iPiBieSBjbGlja2luZyBvbiBpdCBvbmNlIGhhdGNoZWQuIg0KICAgICAgKSArDQogICAgICAgICI8cT5EcmFnb25zIGRvIG5vdCBwdXJyLiBJZiB5b3VyIGRyYWdvbiBzdGFydHMgcHVycmluZywgdmFjYXRlIHRoZSBhcmVhIGltbWVkaWF0ZWx5LjwvcT4iLA0KICAgICAgOTk5OTk5OTk5OTksDQogICAgICBbMzAsIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJIb3cgdG8gYmFrZSB5b3VyIGRyYWdvbiIsICJSZXNpZHVhbCBsdWNrIl07DQoNCiAgICBvcmRlciA9IDI1MTAwOw0KICAgIHZhciBkcmFnb25Ecm9wVXBncmFkZUNvc3QgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgIEdhbWUudW5idWZmZWRDcHMgKg0KICAgICAgICA2MCAqDQogICAgICAgIDMwICoNCiAgICAgICAgKEdhbWUuZHJhZ29uTGV2ZWwgPCBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAxID8gMSA6IDAuMSkNCiAgICAgICk7DQogICAgfTsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRyYWdvbiBzY2FsZSIsDQogICAgICBnZXRTdHJDb29raWVQcm9kdWN0aW9uTXVsdGlwbGllclBsdXMoMykgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIkNvc3Qgc2NhbGVzIHdpdGggQ3BTLCBidXQgJTEgdGltZXMgY2hlYXBlciB3aXRoIGEgZnVsbHktdHJhaW5lZCBkcmFnb24uIiwNCiAgICAgICAgICAxMA0KICAgICAgICApICsNCiAgICAgICAgIjxxPllvdXIgZHJhZ29uIHNoZWRzIHRoZXNlIHJlZ3VsYXJseSwgc28gdGhpcyBvbmUgcHJvYmFibHkgd29uJ3QgYmUgbWlzc2VkLjxicj5Ob3RlOiBpY29uIG5vdCB0byBzY2FsZS48L3E+IiwNCiAgICAgIDk5OSwNCiAgICAgIFszMCwgMTRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZHJhZ29uRHJvcFVwZ3JhZGVDb3N0Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRHJhZ29uIGNsYXciLA0KICAgICAgbG9jKCJDbGlja2luZyBpcyA8Yj4lMSU8L2I+IG1vcmUgcG93ZXJmdWwuIiwgMykgKw0KICAgICAgICAiPGJyPiIgKw0KICAgICAgICBsb2MoDQogICAgICAgICAgIkNvc3Qgc2NhbGVzIHdpdGggQ3BTLCBidXQgJTEgdGltZXMgY2hlYXBlciB3aXRoIGEgZnVsbHktdHJhaW5lZCBkcmFnb24uIiwNCiAgICAgICAgICAxMA0KICAgICAgICApICsNCiAgICAgICAgIjxxPldpbGwgZ3JvdyBiYWNrIGluIGEgZmV3IGRheXMnIHRpbWUuPGJyPkEgc2l4LWluY2ggcmV0cmFjdGFibGUgY2xhdywgbGlrZSBhIHJhem9yLCBmcm9tIHRoZSBtaWRkbGUgdG9lLiBTbyB5b3Uga25vdywgdHJ5IHRvIHNob3cgYSBsaXR0bGUgcmVzcGVjdC48L3E+IiwNCiAgICAgIDk5OSwNCiAgICAgIFszMSwgMTRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucHJpY2VGdW5jID0gZHJhZ29uRHJvcFVwZ3JhZGVDb3N0Ow0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRHJhZ29uIGZhbmciLA0KICAgICAgbG9jKCJHb2xkZW4gY29va2llcyBnaXZlIDxiPiUxJTwvYj4gbW9yZSBjb29raWVzLiIsIDMpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKCJEcmFnb24gaGFydmVzdCBhbmQgRHJhZ29uZmxpZ2h0IGFyZSA8Yj4lMSUgc3Ryb25nZXI8L2I+LiIsIDEwKSArDQogICAgICAgICI8YnI+IiArDQogICAgICAgIGxvYygNCiAgICAgICAgICAiQ29zdCBzY2FsZXMgd2l0aCBDcFMsIGJ1dCAlMSB0aW1lcyBjaGVhcGVyIHdpdGggYSBmdWxseS10cmFpbmVkIGRyYWdvbi4iLA0KICAgICAgICAgIDEwDQogICAgICAgICkgKw0KICAgICAgICAiPHE+SnVzdCBhIGZhbGxlbiBiYWJ5IHRvb3RoIHlvdXIgZHJhZ29uIHdhbnRlZCB5b3UgdG8gaGF2ZSwgYXMgYSBnaWZ0Ljxicj5JdCBtaWdodCBiZSBzbWFsbGVyIHRoYW4gYW4gYWR1bHQgdG9vdGgsIGJ1dCBpdCdzIHN0aWxsIGZyaWdodGVuaW5nbHkgc2hhcnAgLSBhbmQgZGlzcGxheXMgc29tZSBhd2UtaW5zcGlyaW5nIGNhdml0aWVzLCB3aGljaCB5b3UgbWlnaHQgZXhwZWN0IGZyb20gYSBjcmVhdHVyZSBtYWRlIG91dCBvZiBzd2VldHMuPC9xPiIsDQogICAgICA5OTksDQogICAgICBbMzAsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGRyYWdvbkRyb3BVcGdyYWRlQ29zdDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRyYWdvbiB0ZWRkeSBiZWFyIiwNCiAgICAgIGxvYygiUmFuZG9tIGRyb3BzIGFyZSA8Yj4lMSUgbW9yZSBjb21tb248L2I+LiIsIDMpICsNCiAgICAgICAgIjxicj4iICsNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJDb3N0IHNjYWxlcyB3aXRoIENwUywgYnV0ICUxIHRpbWVzIGNoZWFwZXIgd2l0aCBhIGZ1bGx5LXRyYWluZWQgZHJhZ29uLiIsDQogICAgICAgICAgMTANCiAgICAgICAgKSArDQogICAgICAgICI8cT5Zb3VyIGRyYWdvbiB1c2VkIHRvIHNsZWVwIHdpdGggdGhpcywgYnV0IGl0J3MgeW91cnMgbm93Ljxicj5DcmFmdGVkIGluIHRoZSBsaWtlbGluZXNzIG9mIGEgZmVhcnNvbWUgYmVhc3QuIFN0dWZmZWQgd2l0aCBtYWdpY2FsIGhlcmJzIHBpY2tlZCBsb25nIGFnbyBieSBhIHdhbmRlcmluZyB3aXphcmQuIFdvdmVuIGZyb20gZWx2ZW4geWFybiBhbmQgYSBwb2x5ZXN0ZXIgYmxlbmQuPC9xPiIsDQogICAgICA5OTksDQogICAgICBbMzEsIDE1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnByaWNlRnVuYyA9IGRyYWdvbkRyb3BVcGdyYWRlQ29zdDsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHcmFub2xhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldhaXQhIFRoZXNlIGFyZSBqdXN0IG9hdG1lYWwgY29va2llcyBtaXhlZCB3aXRoIHJhaXNpbiBjb29raWVzISBXaGF0IG5leHQsIGhhbGYtZGFyayBjaG9jb2xhdGUgaGFsZi13aGl0ZSBjaG9jb2xhdGUgY29va2llcz8iLA0KICAgICAgaWNvbjogWzI4LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyOCksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSaWNvdHRhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkxpZ2h0IGFuZCBjYWtlLWxpa2UuIE9mdGVuIGZsYXZvcmVkIHdpdGggbGVtb24gb3IgYWxtb25kIGV4dHJhY3QuIFNwcmlua2xlcyBvcHRpb25hbC4gQWxsZWdlZGx5IEl0YWxpYW4uIEludmVzdGlnYXRpb24gcGVuZGluZy4iLA0KICAgICAgaWNvbjogWzI5LCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgyOSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSb3plIGtvZWtlbiIsDQogICAgICBkZXNjOiAiVGhlIGljaW5nIG9uIHRoZXNlIER1dGNoIGNvb2tpZXMgaXMgdHJhZGl0aW9uYWxseSBwaW5rLCBidXQgZGlmZmVyZW50IGNvbG9ycyBtYXkgYmUgdXNlZCBmb3Igc3BlY2lhbCBvY2Nhc2lvbnMgLSBzdWNoIGFzIHBpbmsgdG8gY2VsZWJyYXRlIEJyZWFzdCBDYW5jZXIgQXdhcmVuZXNzIE1vbnRoLCBvciBmb3IgSW50ZXJuYXRpb25hbCBGbGFtaW5nbyBEYXksIHBpbmsuIiwNCiAgICAgIGljb246IFszMCwgMzJdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUGVhbnV0IGJ1dHRlciBjdXAgY29va2llcyIsDQogICAgICBkZXNjOiAiV2hhdCBtb3JlIHBvaWduYW50IGV4YW1wbGUgb2YgbW9kZXJuIHNvY2lldGFsIHN0cnVnZ2xlcyB0aGFuIHRoZSBicmF6ZW4gcmVjbGFpbWluZyBvZiBhIGNvcnBvcmF0ZSBwcm9kdWN0IGJ5IGludGVncmF0aW5nIGl0IGluIHRoZSB2YXN0bHkgbW9yZSBhdXRoZW50aWMgc2hlbGwgb2YgYSBob21lbWFkZSB1bmRlcnRha2luZz8gQW55d2F5IHRoaXMgaXMgYSBwZWFudXQgYnV0dGVyIGN1cCwgYmFrZWQgaW50byBhIGNvb2tpZS4gSXQncyBwcmV0dHkgZ29vZCEiLA0KICAgICAgaWNvbjogWzMxLCAzMl0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgzMSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTZXNhbWUgY29va2llcyIsDQogICAgICBkZXNjOiAiTG9vayBhdCBhbGwgdGhlIGxpdHRsZSBzZWVkcyBvbiB0aGVzZSEgSXQncyBsaWtlIHNvbWVvbmUgZHJvcHBlZCB0aGVtIG9uIHRoZSBzdHJlZXQgb3Igc29tZXRoaW5nISBBIHZlcnkgd2VsY29taW5nIGFuZCBlZHVjYXRpb25hbCBzdHJlZXQhIiwNCiAgICAgIGljb246IFsyMiwgMzNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzIpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiVGFpeWFraSIsDQogICAgICBkZXNjOiAiQSBwYXN0cnkgZmlzaCBmaWxsZWQgd2l0aCByZWQgYmVhbiBwYXN0ZSwgZG9vbWVkIHRvIGxpdmUgYW4gZXhpc3RlbmNlIG9mIGNvbnN0YW50IGFuZCBleGNydWNpYXRpbmcgcGFpbiBhcyBpdHMgYXF1YXRpYyBlbnZpcm9ubWVudCBzbG93bHkgZGlzc29sdmVzIGl0cyBzb2Z0IGRvdWdoeSBib2R5Ljxicj5BbHNvIGNvbWVzIGluIGNob2NvbGF0ZSBmbGF2b3IhIiwNCiAgICAgIGljb246IFsyMywgMzNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzMpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiVmFuaWxsZWtpcGZlcmwiLA0KICAgICAgZGVzYzogIk51dC1iYXNlZCBjb29raWVzIGZyb20gQ2VudHJhbCBFdXJvcGUsIGNvYXRlZCBpbiBwb3dkZXJlZCB2YW5pbGxhIHN1Z2FyLiBSZWd1bGFyIGtpcGZlcmwsIGNyZXNjZW50LXNoYXBlZCBicmVhZCByb2xscyBmcm9tIHRoZSBzYW1lIHJlZ2lvbiwgYXJlIG11Y2ggbGVzcyBleGNpdGluZy4iLA0KICAgICAgaWNvbjogWzI0LCAzM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgzNCksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ29zbWljIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyA1NTAgb2YgZXZlcnl0aGluZy48YnI+VGhyb3VnaCBzb21lIHN0cmFuZ2UgdHJpY2sgb2YgbWFnaWMgb3IgdGVjaG5vbG9neSwgbG9va2luZyBhdCB0aGlzIGNvb2tpZSBpcyBsaWtlIHBlZXJpbmcgaW50byBhIGRlZXAgb2NlYW4gb2YgYW5jaWVudCBzdGFycy4gVGhlIG9yaWdpbnMgb2YgdGhpcyBiaXNjdWl0IGFyZSB1bmtub3duOyBpdHMgbWFudWZhY3R1cmUsIGFzIGZhciBhcyB5b3VyIGJlc3QgaW52ZXN0aWdhdG9ycyBjYW4gdGVsbCwgbGVmdCBubyBwYXBlciB0cmFpbC4gRnJvbSBhIGNlcnRhaW4gYW5nbGUsIGlmIHlvdSBzcXVpbnQgaGFyZCBlbm91Z2gsIHlvdSdsbCBub3RpY2UgdGhhdCBhIG51bWJlciBvZiBzdGFycyBuZWFyIHRoZSBjZW50ZXIgYXJlIGFycmFuZ2VkIHRvIHJlc2VtYmxlIHRoZSBvdXRsaW5lIG9mIHlvdXIgb3duIGZhY2UuIiwNCiAgICAgIGljb246IFsyNywgMzJdLA0KICAgICAgcG93ZXI6IDEwLA0KICAgICAgcHJpY2U6DQogICAgICAgIDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIGJ1dHRlckJpc2N1aXRNdWx0LA0KICAgICAgbG9ja2VkOiAxLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJOb25pbGxpb24gZmluZ2VycyIsDQogICAgICBnZXRTdHJUaG91c2FuZEZpbmdlcnNHYWluKDIwKSArDQogICAgICAgICI8cT5Pbmx5IGZvciB0aGUgZnJlYWtpZXN0IGhhbmRzaGFrZXMuPC9xPiIsDQogICAgICAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCwNCiAgICAgIFsxMiwgMzFdDQogICAgKTsNCiAgICBHYW1lLk1ha2VUaWVyZWQoR2FtZS5sYXN0LCAxMywgMCk7DQogICAgb3JkZXIgPSAxNTA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJNaXJhY3VsaXRlIG1vdXNlIiwNCiAgICAgIGdldFN0ckNsaWNraW5nR2FpbnMoMSkgKw0KICAgICAgICAiPHE+Q29tcG9zZWQgb2YgYSBtYXRlcmlhbCB0aGF0IG5laXRoZXIgc2NpZW5jZSBub3IgcGhpbG9zb3BoeSBhcmUgZXF1aXBwZWQgdG8gY29uY2VwdHVhbGl6ZS4gQW5kIGJveSwgZG9lcyBpdCBldmVyIGNsaWNrLjwvcT4iLA0KICAgICAgNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBbMTEsIDMxXQ0KICAgICk7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMTMsIDExKTsNCiAgICBvcmRlciA9IDIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2VuZXJhdGlvbiBkZWdlbmVyYXRpb24iLA0KICAgICAgIjxxPkdlbmV0aWMgdGVzdGluZyBzaG93cyB0aGF0IG1vc3Qgb2YgeW91ciBncmFuZG1hcyBhcmUgaW5mZWN0ZWQgd2l0aCBhIHN0cmFuZ2UgZGVnZW5lcmF0aXZlIGRpc2Vhc2UgdGhhdCBvbmx5IHNlZW1zIHRvIGZ1cnRoZXIgdGhlaXIgcG93ZXJzOyB0aGUgbW9yZSB0aW1lIHBhc3NlcywgdGhlIG9sZGVyIHRoZXkgZ2V0LiBUaGlzIHNob3VsZCBjb25jZXJuIHlvdS48L3E+IiwNCiAgICAgICJHcmFuZG1hIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDMwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2xvYmFsIHNlZWQgdmF1bHQiLA0KICAgICAgIjxxPkFuIGVub3Jtb3VzIGdlbmV0aWMgcmVwb3NpdG9yeSB0aGF0IGNvdWxkIG91dGxpdmUgYW4gYXBvY2FseXBzZS4gR3VhcmFudGVlcyB0aGUgc3Vydml2YWwgb2YgeW91ciBlbXBpcmUsIG9yIGF0IHRoZSB2ZXJ5IGxlYXN0IGl0cyBhZ3JpY3VsdHVyYWwgY29tcG9uZW50cywgc2hvdWxkIGNpdmlsaXphdGlvbiBmYWxsLiBXaGljaCBzaG91bGQgYmUgYW55IGRheSBub3cuPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkFpciBtaW5pbmciLA0KICAgICAgIjxxPllvdSd2ZSBkdWcgeW91ciBkcmlsbHMgdGhyb3VnaCBqdXN0IGFib3V0IGV2ZXJ5IHNvbGlkIHN1cmZhY2UgeW91IGNvdWxkIGZpbmQuIEJ1dCBkaWQgeW91IGtub3cgcmVjZW50IGFkdmFuY2VzIGhhdmUgcmV2ZWFsZWQgdW50b2xkIHJpY2hlcyBoaWRpbmcgd2l0aGluIG5vbi1zb2xpZCBzdXJmYWNlcyB0b28/PC9xPiIsDQogICAgICAiTWluZSIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSA1MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkJlaGF2aW9yYWwgcmVmcmFtaW5nIiwNCiAgICAgICI8cT5UaHJvdWdoIGNhcmVmdWwgc29jaWFsIGVuZ2luZWVyaW5nIHlvdSd2ZSBjb252aW5jZWQgeW91ciB3b3JrZXJzIHRoYXQgXCJ1bmlvblwiIGlzIGEgc2x1ciB0aGF0IG9ubHkgdGhlIG1vc3QgdmlsZSBhbmQgcmVwdWduYW50IGZpbHRoIGFtb25nIHVzIHdvdWxkIGV2ZXIgZGFyZSB1dHRlciEgU29tZXRpbWVzIHByb2dyZXNzIGlzbid0IGluIHRoZSBiaWcgbWFjaGluZXMsIGl0J3MgaW4gdGhlIGxpdHRsZSBsaWVzITwvcT4iLA0KICAgICAgIkZhY3RvcnkiLA0KICAgICAgMTINCiAgICApOw0KICAgIG9yZGVyID0gNTI1Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbHRydWlzdGljIGxvb3AiLA0KICAgICAgIjxxPllvdSBjb250cm9sIHNvIG1hbnkgYnJhbmNoZXMgb2YgdGhlIGdsb2JhbCBlY29ub215IGFuZCBsZWdpc2xhdGl2ZSBib2RpZXMgdGhhdCwgdGhyb3VnaCBhIHBhcnRpY3VsYXJseSBjcmVhdGl2ZSBsb29waG9sZSwgZG9uYXRpbmcgbW9uZXkgKHRvIHlvdXJzZWxmKSBncmFudHMgeW91IGV2ZW4gbW9yZSBjYXNoIGluIHRheCBkZWR1Y3Rpb25zIHRoYW4geW91IHN0YXJ0ZWQgd2l0aCE8L3E+IiwNCiAgICAgICJCYW5rIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDU1MDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQSBub3ZlbCBpZGVhIiwNCiAgICAgICI8cT5Zb3UgZG9uJ3QgZ2V0IHJpY2ggc3RhcnRpbmcgYSByZWxpZ2lvbi4gSWYgeW91IHdhbnQgdG8gZ2V0IHJpY2gsIHlvdSB3cml0ZSBzY2llbmNlIGZpY3Rpb24uPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3BlbGxpbmcgYmVlcyIsDQogICAgICAiPHE+WW91J3ZlIHVubGVhc2hlZCBhIHN3YXJtIG9mIG1hZ2ljYWxseS1lbmhhbmNlZCBiZWVzIHVwb24gbWFua2luZCEgVGhlaXIgc3Rpbmdpbmcgc3BlbGxzIG1heSBiZSB0aGUgYmFuZSBvZiBhbGwgbGl2aW5nIHRoaW5ncyBidXQgeW91J3JlIGNlcnRhaW4geW91IGNhbiBwdXQgdGhlaXIgZGVsaWNpb3VzLCBwdXJwbGUsIGZpenp5IGhvbmV5IHRvIGdvb2QgdXNlITwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSA2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRvcm9pZCB1bml2ZXJzZSIsDQogICAgICAiPHE+SWYgeW91IHRoaW5rIG9mIHRoZSB1bml2ZXJzZSBhcyBhbiBudGgtZGltZW5zaW9uYWwgdG9ydXMgdGhhdCB3cmFwcyBiYWNrIG9uIGl0c2VsZiBpbiBldmVyeSBkaXJlY3Rpb24sIHlvdSBjYW4gc2F2ZSBhIGZvcnR1bmUgb24gcm9ja2V0IGZ1ZWwhIE9mIGNvdXJzZSB0aGUgdW5pdmVyc2UgaXNuJ3QgYWN0dWFsbHkgc2hhcGVkIGxpa2UgdGhhdCwgYnV0IHlvdSd2ZSBuZXZlciBsZXQgZGV0YWlscyBzdGFuZCBpbiB5b3VyIHdheS48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSA3MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkhlcm1ldGljIHJlY29uY2lsaWF0aW9uIiwNCiAgICAgICI8cT5JdCdzIHRpbWUgZm9yIG1vZGVybiBzY2llbmNlIGFuZCB0aGUgbXlzdGljYWwgZG9tYWlucyBvZiB0aGUgb2NjdWx0IHRvIHdvcmsgdG9nZXRoZXIgYXQgbGFzdC4gV2hhdCBkbyBncmF2aXRvbnMgdHJhbnNtdXRlIGludG8/IFdoYXQgaWYgYWxrYWhlc3QgaXMgcEgtbmV1dHJhbD8gU2hvdWxkIGEgaG9tdW5jdWx1cyBoYXZlIHRoZSByaWdodCB0byB2b3RlPyBBbmQgb3RoZXIgZXhjaXRpbmcgcXVlc3Rpb25zIGNvbWluZyB0byB5b3Ugc29vbiwgd2hldGhlciB5b3UgbGlrZSBpdCBvciBub3QuPC9xPiIsDQogICAgICAiQWxjaGVteSBsYWIiLA0KICAgICAgMTINCiAgICApOw0KICAgIG9yZGVyID0gODAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJIaXMgYWR2ZW50IiwNCiAgICAgICI8cT5IZSBjb21lcyEgSGUgY29tZXMgYXQgbGFzdCEgSnVzdCBsaWtlIHRoZSBwcm9waGVjaWVzIGZvcmV0b2xkISBBbmQgYXMgSGUgc3RlcHMgb3V0IG9mIHRoZSBwb3J0YWwsIHlvdXIgZW5naW5lZXJzIGJlZ2luIHNsaWNpbmcgSGltIGludG8gY29udmVuaWVudCBjaHVua3MgYmVmb3JlIHRyYW5zcG9ydGluZyBIaXMgd3JpdGhpbmcgY29zbWljIGZsZXNoIHRvIHlvdXIgZmFjdG9yaWVzLCB3aGVyZSBIZSB3aWxsIGJlIHByb2Nlc3NlZCBhbmQgY29udmVydGVkIGludG8gYSBuZXcgYW5kIGV4Y2l0aW5nIGNvb2tpZSBmbGF2b3IsIGF2YWlsYWJsZSBpbiBzdG9yZXMgdG9tb3Jyb3cuPC9xPiIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDkwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiU3BsaXQgc2Vjb25kcyIsDQogICAgICAiPHE+VGltZSBpcyBpbmZpbml0ZSwgeWVzLi4uIEJ1dCB3aGF0IGlmLCBuZXN0bGVkIHdpdGhpbiBlYWNoIHNlY29uZCwgd2VyZSBldmVuIG1vcmUgaW5maW5pdGllcz8gRXZlcnkgbW9tZW50IGFuIGV0ZXJuaXR5ISBUaGluayBvZiBob3cgbWFueSBzY2hlZHVsaW5nIHRyb3VibGVzIHRoaXMgc29sdmVzITwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJGbGF2b3IgaXRzZWxmIiwNCiAgICAgICI8cT5EZWVwIHVuZGVyIHRoZSBlYXJ0aCwgaW4gdGhlIG1vc3Qgc3RlcmlsZSBsYWJvcmF0b3J5LCBpbiB0aGUgbW9zdCB2YXN0IGFuZCBleHBlbnNpdmUgcGFydGljbGUgYWNjZWxlcmF0b3IgZXZlciBkZXZpc2VkLCB5b3VyIHNjaWVudGlzdHMgaGF2ZSBzeW50aGVzaXplZCAtZm9yIGEgZnJhY3Rpb24gb2YgYSBzZWNvbmQtIHRoZSBwaHlzaWNhbCBtYW5pZmVzdGF0aW9uIG9mIHB1cmUgZmxhdm9yLiBIaWdobHkgdW5zdGFibGUsIGFuZCBnb25lIGluIGEgcHVmZiBvZiByYWRpb2FjdGl2ZSBlbmVyZ3ksIGl0IG5vbmV0aGVsZXNzIGxlZnQgeW91ciB0ZWFtIHNoaXZlcmluZyB3aXRoIGF3ZS4uLiBhbmQgaHVuZ2VyLjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkxpZ2h0IHNwZWVkIGxpbWl0IiwNCiAgICAgICI8cT5XaG9haCwgc2xvdyBkb3duLiBIYXJ2ZXN0aW5nIGxpZ2h0IGlzIHdlbGwgYW5kIGdvb2QgYnV0IGl0J2QgYmUgbXVjaCBlYXNpZXIgaWYgaXQgd2VyZW4ndCBzbyBkYW5nIGZhc3QhIFRoaXMgc2hvdWxkIHRoYW5rZnVsbHkgdGFrZSBjYXJlIG9mIHRoYXQuPC9xPiIsDQogICAgICAiUHJpc20iLA0KICAgICAgMTINCiAgICApOw0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQSB0b3VjaCBvZiBkZXRlcm1pbmlzbSIsDQogICAgICAiPHE+Qnkga25vd2luZyB0aGUgZXhhY3QgcG9zaXRpb24gYW5kIG1vdmVtZW50IG9mIGV2ZXJ5IHBhcnRpY2xlIGluIHRoZSB1bml2ZXJzZSwgeW91J3JlIGFibGUgdG8gcHJlZGljdCBldmVyeXRoaW5nIHRoYXQgY2FuIGV2ZXIgaGFwcGVuLCBsZWF2aW5nIG5vdGhpbmcgdG8gY2hhbmNlLiBUaGlzIHdhcyBhIGRvb3p5IHRvIHB1bGwgb2ZmIG1pbmQgeW91LCBidXQgaXQncyBoZWxwZWQgeW91IHdpbiA1MCBidWNrcyBhdCB0aGUgaG9yc2UgcmFjZXMgc28geW91IGNvdWxkIHNheSBpdCdzIGFscmVhZHkgcGF5aW5nIG9mZi48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxMg0KICAgICk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGlzIHVwZ3JhZGUiLA0KICAgICAgIjxxPlRoaXMgdXBncmFkZSdzIGZsYXZvciB0ZXh0IGxpa2VzIHRvIHJlZmVyIHRvIGl0c2VsZiwgYXMgd2VsbCBhcyB0byB0aGUgZmFjdCB0aGF0IGl0IGxpa2VzIHRvIHJlZmVyIHRvIGl0c2VsZi4gWW91IHNob3VsZCByZWFsbHkgYnV5IHRoaXMgdXBncmFkZSBiZWZvcmUgaXQgc3RhcnRzIGRvaW5nIGFueXRoaW5nIG1vcmUgb2Jub3hpb3VzLjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIllvdXIgYmlnZ2VzdCBmYW5zIiwNCiAgICAgICI8cT5MZXQncyBmYWNlIGl0LCBiYWtpbmcgY29va2llcyBpc24ndCB0aGUgbW9zdCBvcHRpbWl6ZWQgdGhpbmcgdGhlcmUgaXMuIFNvIHlvdSd2ZSBwdXJjaGFzZWQgeW91ciBiaWdnZXN0IGZhbnMgeWV0IGFuZCBzdHVjayB0aGVtIG5leHQgdG8geW91ciBjb21wdXRlcnMgdG8ga2VlcCB0aGluZ3MgY2hpbGwgYW5kIGluIHdvcmtpbmcgb3JkZXIuIENvb2whPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDEyDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMjA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJCYXR0ZW5iZXJnIGJpc2N1aXRzIiwNCiAgICAgIGRlc2M6ICJJbnNwaXJlZCBieSBhIGNha2Ugb2YgdGhlIHNhbWUgbmFtZSwgaXRzZWxmIG5hbWVkIGFmdGVyIGEgcHJpbmNlIG9mIHRoZSBzYW1lIG5hbWUuIFlvdSBzdXBwb3NlIHlvdSBjb3VsZCBwbGF5IGEgcmVhbGx5LCByZWFsbHkgc2hvcnQgZ2FtZSBvZiBjaGVzcyBvbiB0aGVzZS4iLA0KICAgICAgaWNvbjogWzI4LCAzM10sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSgzNSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJSb3NldHRlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkludHJpY2F0ZSBmcmllZCBwYXN0cmllcyBmcm9tIE5vcnRoZXJuIEV1cm9wZSwgbWFkZSB1c2luZyBzcGVjaWFsaXplZCBpcm9ucyBhbmQgZGlwcGVkIGluIGljaW5nIHN1Z2FyLiBXaGlsZSB1c3VhbGx5IGVhdGVuIGFzIGEgZGVsaWNpb3VzIHRyZWF0LCB0aGVzZSBhcmUgb2Z0ZW4gYWxzbyB1c2VkIGFzIENocmlzdG1hcyB0cmVlIGRlY29yYXRpb25zLCBvciB3b3JuIGVsZWdhbnRseSBvbiBvbmUncyBsYXBlbCB0byBzeW1ib2xpemUgdGhlIG5haCBJJ20ganVzdCBtZXNzaW5nIHdpdGggeW91LiIsDQogICAgICBpY29uOiBbMjYsIDMzXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDM2KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkdhbmdtYWtlcnMiLA0KICAgICAgZGVzYzogIlRoZSBsaXR0bGUgYml0IG9mIHJhc3BiZXJyeSBqYW0gYXQgaXRzIGNlbnRlciBpcyBjcnVjaWFsOyBhIHBsYWluIGJ1dHRlciBjb29raWUgd2l0aCBjaG9jb2xhdGUgdG9wcGluZyBkb2VzIG5vdCBhIGdhbmdtYWtlciBtYWtlLiIsDQogICAgICBpY29uOiBbMjcsIDMzXSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDM3KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldlbHNoIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIldlbHNoIGNvb2tpZXMsIGFsc28ga25vd24gYXMgV2Vsc2ggY2FrZXMsIGJha2VzdG9uZXMsIGdyaWRkbGUgY2FrZXMsIGdyaWRkbGUgc2NvbmVzLCBvciBwaWNzLCBvciBpbiBXZWxzaDogPGk+cGljYXUgYXIgeSBtYWVuLCBwaWNlIGJhY2gsIGNhY2VubmF1IGNyaTwvaT4gb3IgPGk+dGVpc2VubmF1IGdyYWRlbGw8L2k+LCBhcmUgcmljaCBjdXJyYW50LWZpbGxlZCBzY29uZS1saWtlIGJpc2N1aXRzIG9mIHVuY2VydGFpbiBvcmlnaW4uIiwNCiAgICAgIGljb246IFsyOSwgMzNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzgpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiUmFzcGJlcnJ5IGNoZWVzZWNha2UgY29va2llcyIsDQogICAgICBkZXNjOiAiVGhlIGh1bWJsZSByYXNwYmVycnkgY2hlZXNlY2FrZSwgbm93IGluIGFzY2VuZGVkIGNvb2tpZSBmb3JtLiBSZXNlYXJjaGVycyBwb3NpdCB0aGF0IHJhc3BiZXJyeSBjaGVlc2VjYWtlIGNvb2tpZXMgYXJlIGV2aWRlbmNlIHRoYXQgdGhlIGZpbmFsIGZvcm0gb2YgZXZlcnkgYmFrZWQgZ29vZCwgdGhyb3VnaCBjb252ZXJnZW50IGV2b2x1dGlvbiwgYXBwcm9hY2hlcyB0aGF0IG9mIGEgY29va2llLCBpbiBhIHByb2Nlc3Mga25vd24gYXMgY29va2llbmlzYXRpb24uIiwNCiAgICAgIGljb246IFsyNSwgMzNdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoMzkpLA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAyNTU7DQogICAgR2FtZS5HcmFuZG1hU3luZXJneSgNCiAgICAgICJBbHRlcm5hdGUgZ3JhbmRtYXMiLA0KICAgICAgIkEgZGlmZmVyZW50IGdyYW5kbWEgdG8gYmFrZSBzb21ldGhpbmcgZWxzZS4iLA0KICAgICAgIklkbGV2ZXJzZSINCiAgICApOw0KDQogICAgb3JkZXIgPSAxNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNYW5pZmVzdCBkZXN0aW55IiwNCiAgICAgICI8cT5XaGlsZSB0aGUgZXRoaWNzIG9mIHJhbnNhY2tpbmcgcGFyYWxsZWwgdW5pdmVyc2VzIGZvciB0aGVpciByaWNoZXMgbWF5IHNlZW0gcXVlc3Rpb25hYmxlIHRvIHNvbWUsIHlvdSd2ZSByZWFzb25lZCB0aGF0IGJyaW5naW5nIHRoZSBnb29kIHdvcmQgb2YgeW91ciBjb29raWUgZW1waXJlIHRvIHRoZSB1bndhc2hlZCBjb25maW5lcyBvZiBvdGhlciByZWFsaXRpZXMgaXMgeW91ciBtb3JhbCBkdXR5LCBuYXksIHlvdXIgcmlnaHRlb3VzIGltcGVyYXRpdmUsIGFuZCBtdXN0IGJlIHVuZGVydGFrZW4gYXMgc29vbiBhcyBwb3NzaWJsZSwgbGVzdCB0aGV5IGRvIGl0IHRvIHlvdSBmaXJzdCE8L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRoZSBtdWx0aXZlcnNlIGluIGEgbnV0c2hlbGwiLA0KICAgICAgJzxxPlRoZSBzdHJ1Y3R1cmUgb2YgdGhlIG1ldGFjb3Ntb3MgbWF5IHNlZW0gY29uZnVzaW5nIGFuZCBhdCB0aW1lcyBldmVuIGNvbnRyYWRpY3RvcnksIGJ1dCBoZXJlXCdzIHdoYXQgeW91XCd2ZSBnYXRoZXJlZCBzbyBmYXI6PGJyPjxicj48ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij4mYnVsbDsgZWFjaCByZWFsaXR5LCBvciAiaWRsZXZlcnNlIiwgZXhpc3RzIGluIHBhcmFsbGVsIHRvIGFsbCBvdGhlcnM8YnI+PGJyPiZidWxsOyBtb3N0IHJlYWxpdGllcyBzZWVtIHRvIGNvbnZlcmdlIHRvd2FyZHMgdGhlIHByb2R1Y3Rpb24gb2YgYSBzb2xlIHR5cGUgb2YgaXRlbSAob3VycyBldmlkZW50bHkgYmVpbmcsIHRoYW5rcyB0byB5b3UsIGNvb2tpZXMpPGJyPjxicj4mYnVsbDsgZWFjaCByZWFsaXR5IGlzIHJpZGRsZWQgd2l0aCBjaGFvdGljIHR1bm5lbHMgdG8gYSBudW1iZXIgb2Ygc3Vib3JkaW5hdGUgZGltZW5zaW9ucyAoc3VjaCBhcyB0aGUgc28tY2FsbGVkICJjb29raWV2ZXJzZSIpLCBtdWNoIGxpa2Ugc3dpc3MgY2hlZXNlPGJyPjxicj4mYnVsbDsgYWxsIHJlYWxpdGllcyBiYXRoZSBpbiBhbiBpbmZpbml0ZSBsaXF1aWQgb2YgcGVjdWxpYXIgcHJvcGVydGllcywgY29sbG9xdWlhbGx5IGtub3duIGFzICJtaWxrIjwvZGl2Pjxicj5GaW5hbGx5LCBlYWNoIHJlYWxpdHkgbWF5IGhhdmUgaXRzIG93biBpbnRlcnByZXRhdGlvbiBvZiB0aGUgY29uY2VwdCBvZiAicmVhbGl0eSIsIGZvciBhZGRlZCBmdW4uPC9xPicsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBbGwtY29udmVyc2lvbiIsDQogICAgICAiPHE+SXQncyBxdWl0ZSBuaWNlIHRoYXQgeW91IGNhbiByZXdpcmUgdGhlIGxvZ2ljIG9mIGVhY2ggdW5pdmVyc2UgdG8gZ2VuZXJhdGUgY29va2llcyBpbnN0ZWFkLCBidXQgeW91IHN0aWxsIGVuZCB1cCB3aXRoIHBhcnNlYy1sb2FkcyBvZiB3aGF0ZXZlciB0aGV5IHdlcmUgcHJvZHVjaW5nIGJlZm9yZSAtIGJhdWJsZXMgeW91J3ZlIGxvbmcgbWFkZSBvYnNvbGV0ZTogY2FzaCBtb25leSwgZ2VtcywgY2hlZXNlYnVyZ2VycywgcHVwcGllcy4uLiBUaGF0J3Mgd2h5IHlvdSd2ZSBkZXNpZ25lZCB0aGUgdW5pdmVyc2FsIGNvbnZlcnRlciwgY29tcGF0aWJsZSB3aXRoIGFueSBzdWJzdGFuY2UgYW5kIGNhcGFibGUgb2YgdHVybmluZyB0aG9zZSB1c2VsZXNzIHNwb2lscyBvZiBjb25xdWVzdCBpbnRvIHRoZSByZWFzc3VyaW5nIGNydW1ibHkgcnVzdGxlIG9mIGV2ZW4gbW9yZSBjb29raWVzLjwvcT4iLA0KICAgICAgIklkbGV2ZXJzZSIsDQogICAgICAzDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTXVsdGl2ZXJzZSBhZ2VudHMiLA0KICAgICAgIjxxPllvdSBjYW4gc2VuZCB1bmRlcmNvdmVyIHNwaWVzIHRvIGluZmlsdHJhdGUgZWFjaCB1bml2ZXJzZSBhbmQgaGF2ZSB0aGVtIHNpZ25hbCB5b3Ugd2hldGhlciBpdCdzIHdvcnRoIG92ZXJ0YWtpbmcuIE9uY2UgdGhlIGFzc2ltaWxhdGlvbiBwcm9jZXNzIHN0YXJ0ZWQsIHRoZXkgd2lsbCBhbHNvIGhlbHAgcGFjaWZ5IHRoZSBsb2NhbCBwb3B1bGF0aW9ucywgaGF2aW5nIGVzdGFibGlzaGVkIHRydXN0IHRocm91Z2ggdGhlIHVzZSBvZiB3YWNreSwgYnV0IHNlYW1sZXNzLCBkaXNndWlzZXMuPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDQNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFc2NhcGUgcGxhbiIsDQogICAgICAiPHE+WW91J3ZlIHNldCBhbiBpZGxldmVyc2UgYXNpZGUgYW5kIHRlcnJhZm9ybWVkIGl0IHRvIGNsb3NlbHkgcmVzZW1ibGUgdGhpcyBvbmUgaW4gY2FzZSBzb21ldGhpbmcgZ29lcyBob3JyaWJseSB3cm9uZyBpbiBoZXJlLiBPZiBjb3Vyc2UsIHRoZSBkZW5pemVucyBvZiB0aGF0IGlkbGV2ZXJzZSBhbHNvIGhhdmUgdGhlaXIgb3duIGVzY2FwZSBpZGxldmVyc2UgdG8gYWJzY29uZCB0byBpbiB0aGUgZXZlbnR1YWxpdHkgb2YgeW91ciBhcnJpdmFsLCBpdHNlbGYgbGlrZWx5IGhhdmluZyBpdHMgb3duIGNvbnRpbmdlbmN5IGlkbGV2ZXJzZSwgYW5kIHNvIG9uLjwvcT4iLA0KICAgICAgIklkbGV2ZXJzZSIsDQogICAgICA1DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiR2FtZSBkZXNpZ24iLA0KICAgICAgIjxxPkVhY2ggaWRsZXZlcnNlIGZ1bmN0aW9ucyBhY2NvcmRpbmcgdG8gc29tZSBmb3JtIG9mIHRyYW5zY2VuZGVudGFsIHByb2dyYW1taW5nLCB0aGF0IG11Y2ggaXMgYSBnaXZlbi4gQnV0IHRoZXkgYWxzbyBzZWVtIHRvIGJlIGdvdmVybmVkIGJ5IG11Y2ggbW9yZSBzdWJ0bGUgcnVsZXMsIHRoZSBsb2dpYyBvZiB3aGljaCwgd2hlbiBoYXJuZXNzZWQsIG1heSBnaXZlIHlvdSB1bnBhcmFsbGVsZWQgZG9taW5pb24gb3ZlciB0aGUgbXVsdGl2ZXJzZS4gUmV3cml0ZSB0aGUgcnVsZXMhIEEgZ2FtZSBkZXNpZ25lciBpcyB5b3UhPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDYNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTYW5kYm94IHVuaXZlcnNlcyIsDQogICAgICAiPHE+SXQgZG9lc24ndCBzZWVtIGxpa2UgeW91J2xsIHJ1biBvdXQgb2YgZXh0cmEgdW5pdmVyc2VzIGFueXRpbWUgc29vbiBzbyB3aHkgbm90IHJlcHVycG9zZSBzb21lIG9mIHRoZW0gYXMgY29uc2VxdWVuY2UtZnJlZSB0ZXN0aW5nIGdyb3VuZHMgZm9yIGFsbCB5b3VyIG1vcmUgZXhpc3RlbnRpYWxseSB0aHJlYXRlbmluZyBtYXJrZXQgcmVzZWFyY2g/ICguLi5jb25zZXF1ZW5jZS1mcmVlIGZvciB5b3UsIGFueXdheS4pPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDcNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNdWx0aXZlcnNlIHdhcnMiLA0KICAgICAgIjxxPkhtbSwgbG9va3MgbGlrZSBzb21lIG90aGVyIHVuaXZlcnNlcyB3aXNlZCB1cCB0byB5b3VyIHBsdW5kZXJpbmcuIFRoYW5rZnVsbHksIHRoYXQncyBub3RoaW5nIHlvdXIgZXh0cmEgYmVlZmVkLXVwIG1ldGFjb3NtaWMgbWlsaXRhcnkgYnVkZ2V0IGNhbid0IGhhbmRsZSE8L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgOA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk1vYmlsZSBwb3J0cyIsDQogICAgICAiPHE+QWNjZXNzaW5nIGVhY2ggb3V0ZXIgdW5pdmVyc2UgaXMgYSBiaXQgb2YgYSBoYXNzbGUsIHJlcXVpcmluZyB0aGUgb25jZS1pbi1hLWJsdWUtbW9vbiBhbGlnbm1lbnQgb2YgbmF0dXJhbCBjb3NtaWMgcG9ydHMgdG8gdHJhbnNpdCBmcm9tIHVuaXZlcnNlIHRvIHVuaXZlcnNlLiBZb3UndmUgZmluYWxseSBwZXJmZWN0ZWQgdGhlIG1ldGhvZCBvZiBjb25zdHJ1Y3RpbmcgeW91ciBvd24gc2VsZi1wcm9wZWxsZWQgcG9ydHMsIHdoaWNoIGNhbiB0cmF2ZWwgbmVhci1pbnN0YW50YW5lb3VzbHkgYWxvbmcgdW5pdmVyc2FsIHBlcmltZXRlcnMgdG8gcGVybWl0IGhlYWRhY2hlLWZyZWUgbXVsdGl2ZXJzZSBjb25uZWN0aW9ucy4gVG9vayB5b3UgbG9uZyBlbm91Z2guPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDkNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFbmNhcHN1bGF0ZWQgcmVhbGl0aWVzIiwNCiAgICAgICI8cT5VbnRvbGQgZmVhdHMgb2Ygc2NpZW5jZSB3ZW50IGludG8gdGhlIHJlZHVjdGlvbiBvZiBpbmZpbml0ZSB1bml2ZXJzZXMgaW50byB0aGVzZSBzbWFsbCwgZ2xpbW1lcmluZywgZWFzeS10by1zdG9yZSBsaXR0bGUgc3BoZXJlcy4gRXhlcmNpc2UgaW5maW5pdGUgY2F1dGlvbiB3aGVuIGhhbmRsaW5nIHRoZXNlLCBmb3IgZWFjaCBvZiB0aGVtLCBjb250YWluaW5nIGVuZGxlc3MgZ2FsYXhpZXMgYW5kIHN1cHBvcnRpbmcgZW5kbGVzcyBsaWZlLCBpcyBtb3JlIHByZWNpb3VzIHRoYW4geW91IGNhbiBldmVyIGZhdGhvbS4gVGhleSd2ZSBhbHNvIHByb3ZlbiB0byBiZSBxdWl0ZSBhIHNtYXNoIGhpdCBpbiB5b3VyIHdhcmVob3VzZXMgb24gYm93bGluZyBuaWdodC48L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMTANCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFeHRyaW5zaWMgY2xpY2tpbmciLA0KICAgICAgIjxxPklmIHlvdSBwb2tlIGFuIGlkbGV2ZXJzZSwgaXQgc2VlbXMgbGlrZSBpdCBnZXRzIHdvcmsgZG9uZSBmYXN0ZXIuIEl0J3MgYWxzbyBxdWl0ZSBmdW4gaGVhcmluZyBhIHRyaWxsaW9uIHRlcnJpZmllZCB2b2ljZXMgc2NyZWFtaW5nIGluIHVuaXNvbi48L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMTENCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJVbml2ZXJzYWwgaWRsaW5nIiwNCiAgICAgICI8cT5UaGUgbmF0dXJlIG9mIGlkbGV2ZXJzZXMgaXMgZm91bmQgaW4gd2FpdGluZy4gVGhlIG1vcmUgeW91IHdhaXQgb24gYW4gaWRsZXZlcnNlLCB0aGUgbW9yZSBleHBvbmVudGlhbGx5IHBvdGVudCBpdCBiZWNvbWVzIC0gd2hpY2ggc2F2ZXMgeW91IGEgd2hvbGUgbG90IG9mIGhhcmQgd29yay4gSW4gYSB0cnVlIGFjdCBvZiB6ZW4sIHlvdSd2ZSB0YWtlbiB0byBiaWRpbmcgeW91ciB0aW1lIHdoZW4gY29sbGVjdGluZyBuZXcgdW5pdmVyc2VzLCBsZXR0aW5nIHRoZW0gcmlwZW4gbGlrZSBhIGZpbmUgd2luZS48L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMTINCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiUGVyZm9yYXRlZCBtaWxsZS1mZXVpbGxlIGNvc21vcyIsDQogICAgICAiPHE+SW1hZ2luZSwgaWYgeW91IHdpbGwsIGxheWVycyB1cG9uIGxheWVycyB1cG9uIGxheWVycy4gTm93IHBpY3R1cmUgYmlsbGlvbnMgb2Ygd29ybXMgY2hld2luZyB0aGVpciB3YXkgdGhyb3VnaCBpdCBhbGwuIFRoaXMgcm91Z2hseSwgYnV0IG5vdCBxdWl0ZSwgYXBwcm94aW1hdGVzIHRoZSBnZW9tZXRyeSBvZiB0aGUgbW9zdCBiYXNhbCBzdHJhdHVtIG9mIG91ciBuYXR1cmFsIHdvcmxkLjwvcT4iLA0KICAgICAgIklkbGV2ZXJzZSIsDQogICAgICAiUG9ydGFsIiwNCiAgICAgICJzeW5lcmd5MSINCiAgICApOw0KICAgIEdhbWUuU3luZXJneVVwZ3JhZGUoDQogICAgICAiSW5mcmF2ZXJzZXMgYW5kIHN1cGVydmVyc2VzIiwNCiAgICAgICI8cT5Vbml2ZXJzZXMgd2l0aGluIHVuaXZlcnNlcz8gSG93IHN1YnZlcnNpdmUhPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTkwMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAxOCIsDQogICAgICAiPHE+VGhlcmUncyBwbGVudHkgb2YgZXZlcnlvbmUsIGJ1dCBvbmx5IG9uZSBvZiB5b3UuPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgICJmb3J0dW5lIg0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMzAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQnV0dGVyIGJpc2N1aXQgKHdpdGggYnV0dGVyKSIsDQogICAgICBkZXNjOiAiUmV3YXJkZWQgZm9yIG93bmluZyA2MDAgb2YgZXZlcnl0aGluZy48YnI+VGhpcyBpcyBhIHBsYWluIGJ1dHRlciBiaXNjdWl0LiBJdCdzIGdvdCBzb21lIGJ1dHRlciBvbiBpdC4gVGhlIGJ1dHRlciBkb2Vzbid0IGxvb2sgbGlrZSBhbnl0aGluZyBpbiBwYXJ0aWN1bGFyLiIsDQogICAgICBpY29uOiBbMzAsIDMzXSwNCiAgICAgIHBvd2VyOiAxMCwNCiAgICAgIHByaWNlOg0KICAgICAgICA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgKiBidXR0ZXJCaXNjdWl0TXVsdCwNCiAgICAgIGxvY2tlZDogMSwNCiAgICB9KTsNCg0KICAgIG9yZGVyID0gMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJWaXNpdHMiLA0KICAgICAgIjxxPkluIGFuIGV4dGVuc2l2ZSBkb3VibGUtYmxpbmQgc3R1ZHkgKHNhbXBsZSBzaXplOiAxMiBtaWxsaW9uKSwgeW91ciByZXNlYXJjaGVycyBoYXZlIGZvdW5kIGV2aWRlbmNlIHRoYXQgZ3JhbmRtYXMgYXJlIHVwIHRvIHR3aWNlIGFzIHByb2R1Y3RpdmUgaWYgeW91IGp1c3QgY29tZSBieSBhbmQgc2F5IGhpIG9uY2UgaW4gYSB3aGlsZS4gSXQncyBuaWNlIHRvIGNoZWNrIHVwIG9uIHlvdXIgZ3JhbnMhIChEbyBub3QgdW5kZXIgYW55IGNpcmN1bXN0YW5jZXMgaW5nZXN0IGFueSB0ZWEgb3IgdGVhLWxpa2Ugc3Vic3RhbmNlcyB0aGUgZ3JhbmRtYXMgbWF5IG9mZmVyIHlvdS4pPC9xPiIsDQogICAgICAiR3JhbmRtYSIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAzMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlJldmVyc2UtdmVnYW5pc20iLA0KICAgICAgIjxxPlBsYW50cyBhcmVuJ3QgZm9yIGVhdGluZywgcGxhbnRzIGFyZSBmb3IgZXhwbG9pdGF0aXZlIGFncmljdWx0dXJlIGFuZCBhc3Ryb25vbWljYWwgcHJvZml0IG1hcmdpbnMhPC9xPiIsDQogICAgICAiRmFybSIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNhcmFtZWwgYWxsb3lzIiwNCiAgICAgICI8cT5Zb3VyIGdlb2xvZ2lzdHMgaGF2ZSBpc29sYXRlZCBhIGZhbWlseSBvZiBvbmNlLW92ZXJsb29rZWQgc3VnYXJ5IG9yZXMgdGhhdCwgd2hlbiBjb21iaW5lZCwgbWF5IGJlIHR1cm5lZCBpbnRvIGV2ZW4gbW9yZSBjb29raWUgaW5ncmVkaWVudHMuIFlvdXIgbWlsbGlvbnMgb2YgbWlsZXMgb2YgcHJldmlvdXNseSB1c2VsZXNzIHR1bm5lbHMgcHJvYmFibHkgaG91c2UgaW5zYW5lIGFtb3VudHMgb2YgdGhlIHN0dWZmITwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgMTMNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaGUgaW5maW5pdHkgZW5naW5lIiwNCiAgICAgICI8cT5JbiB0aGlzIGhvdXNlLCBJIGd1ZXNzIHdlIGRvbid0IGNhcmUgbXVjaCBmb3IgdGhlIGxhd3Mgb2YgdGhlcm1vZHluYW1pY3MuPC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRpbWluaXNoaW5nIHRheCByZXR1cm5zIiwNCiAgICAgICI8cT5Xb3csIHRoZXkncmUgdGlueSEgV2lzaCB5b3UnZCB0aG91Z2h0IG9mIHRoYXQgc29vbmVyITwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgMTMNCiAgICApOw0KICAgIG9yZGVyID0gNTUwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBcHBhcml0aW9ucyIsDQogICAgICAiPHE+WW91J3ZlIGJvb2tlZCBhIGRlYWwgd2l0aCB0aGUgaGlnaGVyLXVwcyB0aGF0IHNjaGVkdWxlcyBvbmUgd2Vla2x5IGVhcnRobHkgYXBwYXJpdGlvbiBieSBhIGRlaXR5LCBhbmdlbCwgYXNjZW5kZWQgcHJvcGhldCwgb3Igb3RoZXIgaG9seSBmaWd1cmUuIFRoaXMgc2hvdWxkIGJvb3N0IGludGVyZXN0IGluIGNvb2tpZSByZWxpZ2lvbiBhbW9uZyB5b3V0aHMgYXMgbG9uZyBhcyB5b3UgY2FuIHNlY3VyZSBhIGRlY2VudCB0aW1lIHNsb3QuPC9xPiIsDQogICAgICAiVGVtcGxlIiwNCiAgICAgIDEzDQogICAgKTsNCiAgICBvcmRlciA9IDU3NTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiV2l6YXJkIGJhc2VtZW50cyIsDQogICAgICAiPHE+WW91J3ZlIHJlY2VpdmVkIGNvbnN0cnVjdGlvbiBwZXJtaXRzIGFsbG93aW5nIHlvdSB0byBidWlsZCBiYXNlbWVudHMgdW5kZXJuZWF0aCBlYWNoIHdpemFyZCB0b3dlci4gVGhpcyBwcm92aWRlcyBhIGhhbmR5IHN0b3JhZ2Ugc3BhY2UgZm9yIHByZWNpb3VzIHJlYWdlbnRzLCBmaXp6bGVkLW91dCBzb3VsIGdlbXMsIGFuZCB3ZWlyZCBvbGQgbWFnYXppbmVzLjwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlByaW1lIGRpcmVjdGl2ZSIsDQogICAgICAiPHE+QW4gaW50ZXJnYWxhY3RpYyBkZWxlZ2F0aW9uIG1hZGUgeW91IHBpbmt5LXN3ZWFyIG5vdCB0byBkaXJlY3RseSBpbnRlcmFjdCB3aXRoIGxlc3NlciBhbGllbiBjdWx0dXJlcy4gV2hpY2ggaXMgZmluZSwgYmVjYXVzZSBpdCdzIG11Y2ggZnVubmllciB0byByb2IgYSBwbGFuZXQgYmxpbmQgd2hlbiBpdHMgaW5oYWJpdGFudHMgaGF2ZSBubyBpZGVhIHdoYXQncyBnb2luZyBvbi48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA3MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNocm9tYXRpYyBjeWNsaW5nIiwNCiAgICAgICI8cT5BbGwgc3RhdGVzIG9mIG1hdHRlciBleGlzdCBpbiBhIGNvbnRpbnVvdXMgbG9vcC4gSGF2aW5nIGxlYXJuZWQgaG93IHRvIGN5Y2xlIHRocm91Z2ggdGhlbSwgYWxsIHlvdSBoYXZlIHRvIGRvIGlzIHRvIGZyZWV6ZSBtYXR0ZXIgcmlnaHQgb24gdGhlIHN0YXRlIHlvdSBuZWVkLiBGb3IgcmVmZXJlbmNlLCB0aGUgY29va2llIHN0YXRlIG9mIG1hdHRlciBpcyBzaXR1YXRlZCBhdCBwcmVjaXNlbHkgMTYzLjcxOSZkZWc7LCByaWdodCBiZXR3ZWVuIGxhbWVsbGFyIGdhcyBhbmQgbWV0YXBsYXNtYS48L3E+IiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA4MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkRvbWVzdGljIHJpZnRzIiwNCiAgICAgICI8cT5Zb3UndmUgbWFuYWdlZCB0byBtYW51ZmFjdHVyZSBwb3J0YWxzIHRoYXQgYXJlIGNvbnZlbmllbnQgZW5vdWdoLCBhbmQgbGVnYWxseSBzYWZlIGVub3VnaCwgdGhhdCB5b3UgY2FuIGp1c3Qgc3RpY2sgdGhlbSBhZ2FpbnN0IHdhbGxzIGluc2lkZSBidWlsZGluZ3MgdG8gY29ubmVjdCByb29tcyB0b2dldGhlciBpbiB1bnVzdWFsIGNvbmZpZ3VyYXRpb25zLiBJbiBwcmFjdGljZSwgdGhpcyBtZWFucyB5b3VyIGVtcGxveWVlcyBnZXQgdG8gaGF2ZSBtdWNoIHNob3J0ZXIgYmF0aHJvb20gYnJlYWtzLjwvcT4iLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSA5MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlBhdGllbmNlIGFib2xpc2hlZCIsDQogICAgICAiPHE+WW91IHdhaXQgZm9yIG5vIG9uZS48L3E+IiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgMTMNCiAgICApOw0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRGVsaWNpb3VzIHB1bGwiLA0KICAgICAgIjxxPkluIGFkZGl0aW9uIHRvIHRoZSA0IGZ1bmRhbWVudGFsIGZvcmNlcyBvZiB0aGUgdW5pdmVyc2UgLWdyYXZpdHksIGVsZWN0cm9tYWduZXRpc20sIHdlYWsgYW5kIHN0cm9uZyBpbnRlcmFjdGlvbnMtIHlvdXIgc2NpZW50aXN0cyBoYXZlIGF0IGxvbmcgbGFzdCBjb25maXJtZWQgdGhlIGV4aXN0ZW5jZSBvZiBhIGZpZnRoIG9uZSwgbWVkaWF0ZWQgYnkgc3VnYXIgYm9zb25zOyBpdCBkaWN0YXRlcyB0aGF0IGFueSB0d28gbWFzc2VzIG9mIGluZ3JlZGllbnQtbGlrZSBtYXR0ZXIgd2lsbCwgZ2l2ZW4gZW5vdWdoIHRpbWUsIGV2ZW50dWFsbHkgbWVldCBlYWNoIG90aGVyIHRvIHByb2R1Y2UgYSB0aGlyZCwgZXZlbiB0YXN0aWVyIHN1YnN0YW5jZS4gWW91ciB0ZWFtIGVudGh1c2lhc3RpY2FsbHkgbmFtZXMgaXQgdGhlIGRlbGljaW91cyBwdWxsLjwvcT4iLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDEzDQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk9jY2FtJ3MgbGFzZXIiLA0KICAgICAgIjxxPkludmVudGVkIGJ5IEZyYW5jaXNjYW4gZnJpYXIgV2lsbGlhbSBvZiBPY2NhbSBpbiAxPHNwYW4+PC9zcGFuPjMyNy4gQW4gaW1wb3NzaWJseSBjbGV2ZXIgdXNlIG9mIGxpZ2h0IHRoZW9yeSB3aXRoIGEgYmlsbGlvbiBwb3NzaWJsZSBhcHBsaWNhdGlvbnMsIHNvbWUgb2Ygd2hpY2ggZnJpZ2h0ZnVsbHkgZGVzdHJ1Y3RpdmUuIENvbmZpbmVkIHRvIGEgc2luZ2xlIGdvYXQtc2tpbiBwYXJjaG1lbnQgZm9yIGh1bmRyZWRzIG9mIHllYXJzIHVudGlsIHRoZSBwYXRlbnQgZXhwaXJlZCBhbmQgaGl0IHB1YmxpYyBkb21haW4sIGp1c3Qgbm93LjwvcT4iLA0KICAgICAgIlByaXNtIiwNCiAgICAgIDEzDQogICAgKTsNCiAgICBvcmRlciA9IDEyMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk9uIGEgc3RyZWFrIiwNCiAgICAgICI8cT5UYWtlIGEgbW9tZW50IHRvIGFwcHJlY2lhdGUgaG93IGZhciB5b3UndmUgY29tZS4gSG93IGx1Y2t5IHlvdSd2ZSBiZWVuIHNvIGZhci4gSXQgZG9lc24ndCB0YWtlIGEgZ2VuaXVzIHN0YXRpc3RpY2lhbiB0byBleHRyYXBvbGF0ZSBhIHRyZW5kIGZyb20gdGhpcy4gVGhlcmUncyBubyB3YXkgYW55dGhpbmcgYmFkIGNvdWxkIGhhcHBlbiB0byB5b3Ugbm93LiBSaWdodD88L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBIGJveCIsDQogICAgICAiPHE+V2hhdCdzIGluIHRoYXQgYm94PyBXaHksIGl0J3MgYSB0aW55IHJlcGxpY2Egb2YgeW91ciBvZmZpY2UhIEFuZCB0aGVyZSdzIGV2ZW4gYSBsaXR0bGUgeW91IGluIHRoZXJlISBBbmQgd2hhdCdzIG9uIHRoZSBsaXR0bGUgZGVzay4uLiBzYXkgLSB0aGF0J3MgYW4gZXZlbiB0aW5pZXIgYm94ISBBbmQgdGhlIGxpdHRsZSB5b3UgaXMgb3BlbmluZyBpdCwgcmV2ZWFsaW5nIGFuIGV2ZW4gdGluaWVyIG9mZmljZSEgQW5kIGluIHRoZSB0aW5pZXIgb2ZmaWNlIHRoZXJlJ3MtIEhtbS4gWW91IGNhbiB0aGluayBvZiBhIGNvdXBsZSB1c2VzIGZvciB0aGlzLjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDEzDQogICAgKTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkhhY2tlciBzaGFkZXMiLA0KICAgICAgIjxxPkknbSBpbi48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgMTMNCiAgICApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQnJlYWsgdGhlIGZpZnRoIHdhbGwiLA0KICAgICAgIjxxPkh1aCwgd2FzIHRoYXQgYWx3YXlzIHRoZXJlPyBXaGF0ZXZlciBpdCB3YXMsIGl0J3MgZ29uZSBub3cuIEFuZCB3aGF0IHdhcyBiZWhpbmQgaXMgeW91cnMgZm9yIHRoZSB0YWtpbmcuPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDEzDQogICAgKTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiQ2F0IGxhZGllcyIsDQogICAgICBsb2MoIkVhY2gga2l0dGVuIHVwZ3JhZGUgYm9vc3RzICUxIENwUyBieSA8Yj4lMiU8L2I+LiIsIFsNCiAgICAgICAgbG9jKCJncmFuZG1hIiksDQogICAgICAgIDI5LA0KICAgICAgXSkgKyAiPHE+T2ggbm8uIE9oIG5vIG5vIG5vLiBPaGhoIHRoaXMgaXNuJ3QgcmlnaHQgYXQgYWxsLjwvcT4iLA0KICAgICAgOTAwMDAwMDAwMCwNCiAgICAgIFszMiwgM10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiS2l0dGVuIGFuZ2VscyJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiTWlsa2hlbHAmcmVnOyBsYWN0b3NlIGludG9sZXJhbmNlIHJlbGllZiB0YWJsZXRzIiwNCiAgICAgIGxvYygiRWFjaCByYW5rIG9mIG1pbGsgYm9vc3RzICUxIENwUyBieSA8Yj4lMiU8L2I+LiIsIFsNCiAgICAgICAgbG9jKCJncmFuZG1hIiksDQogICAgICAgIDUsDQogICAgICBdKSArICI8cT5BZ2VkIGxpa2UgbWlsay48L3E+IiwNCiAgICAgIDkwMDAwMDAwMDAwMCwNCiAgICAgIFszMywgM10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiQ2F0IGxhZGllcyJdOw0KDQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJBdXJhIGdsb3ZlcyIsDQogICAgICBsb2MoDQogICAgICAgICJDdXJzb3IgbGV2ZWxzIGJvb3N0IGNsaWNrcyBieSA8Yj4lMSU8L2I+IGVhY2ggKHVwIHRvIGN1cnNvciBsZXZlbCAlMikuIiwNCiAgICAgICAgWzUsIDEwXQ0KICAgICAgKSArDQogICAgICAgICI8cT5Ucnkgbm90IHRvIGhpZ2gtZml2ZSBhbnlvbmUgd2VhcmluZyB0aGVzZS4gWW91IGRvbid0IHdhbnQgdGhhdCBtZXNzIG9uIHlvdXIgaGFuZHMuPC9xPiIsDQogICAgICA1NTU1NTU1NTUsDQogICAgICBbMzIsIDRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkhhbG8gZ2xvdmVzIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJMdW1pbm91cyBnbG92ZXMiLA0KICAgICAgbG9jKCI8Yj4lMTwvYj4gYXJlIG5vdyBlZmZlY3RpdmUgdXAgdG8gY3Vyc29yIGxldmVsICUyLiIsIFsNCiAgICAgICAgZ2V0VXBncmFkZU5hbWUoIkF1cmEgZ2xvdmVzIiksDQogICAgICAgIDIwLA0KICAgICAgXSkgKw0KICAgICAgICAiPHE+VGhlc2UgaGVscCBwb3dlciB5b3VyIGNsaWNrcyB0byBhYnN1cmQgbGV2ZWxzLCBidXQgdGhleSdyZSBhbHNvIHF1aXRlIGhhbmR5IHdoZW4geW91IHdhbnQgdG8gbGlnaHQgdXAgdGhlIGRhcmtuZXNzIG9uIHlvdXIgd2F5IGJhY2sgZnJvbSBHbG92ZSBXb3JsZC48L3E+IiwNCiAgICAgIDU1NTU1NTU1NTU1LA0KICAgICAgWzMzLCA0XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJBdXJhIGdsb3ZlcyJdOw0KDQogICAgb3JkZXIgPSAxMDAyMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIkJva2tlbnBvb3RqZXMiLA0KICAgICAgZGVzYzogIkNvbnNpc3Qgb2YgMiBtZXJpbmd1ZSBoYWx2ZXMgam9pbmVkIGJ5IGJ1dHRlcmNyZWFtIGFuZCBkaXBwZWQgYm90aCB3YXlzIGluIGNob2NvbGF0ZS4gTmFtZWQgYWZ0ZXIgYSBnb2F0J3MgZm9vdCB0aGF0IHByb2JhYmx5IHN0ZXBwZWQgaW4gc29tZXRoaW5nIHR3aWNlLiIsDQogICAgICBpY29uOiBbMzIsIDhdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDApLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRmF0IHJhc2NhbHMiLA0KICAgICAgZGVzYzogIkFsbW9uZC1zbWlsZWQgWW9ya3NoaXJlIGNha2VzIHdpdGggYSByaWNoIGhpc3RvcnkgYW5kIGFuIGV2ZW4gcmljaGVyIHJlY2lwZS4gVGhlIG1vcmUgZGlldC1jb25zY2lvdXMgYXJlIGludml0ZWQgdG8gdHJ5IHRoZSBsZWFuIHZlcnNpb24sIHNraW5ueSBzY2FsbHl3YWdzLiIsDQogICAgICBpY29uOiBbMzMsIDhdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDEpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiSXNjaGxlciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJPcmlnaW5hdGluZyBpbiB0aGUgQXVzdHJvLUh1bmdhcmlhbiBFbXBpcmUsIHRoZXNlIGhhdmUgc3ByZWFkIHRocm91Z2hvdXQgZXZlcnkgY291bnRyeSBpbiBlYXN0ZXJuIEV1cm9wZSBhbmQgc3Bhd25lZCBqdXN0IGFzIG1hbnkgcmVjaXBlcywgZWFjaCBjbGFpbWluZyB0byBiZSB0aGUgb3JpZ2luYWwuIFRoZSBiYXNpcyByZW1haW5zIHVuY2hhbmdlZCBhY3Jvc3MgYWxsIHZhcmlhbnRzOiB0d28gYmlzY3VpdHMgc2FuZHdpY2hlZCBhcm91bmQgY2hvY29sYXRlIGJ1dHRlcmNyZWFtLiBPciB3YXMgaXQgamFtPyIsDQogICAgICBpY29uOiBbMzIsIDldLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDIpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiTWF0Y2hhIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkdyZWVuIHRlYSBhbmQgY29va2llcywgYSBtYXRjaGEgbWFkZSBpbiBoZWF2ZW4uIiwNCiAgICAgIGljb246IFszMywgOV0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0MiksDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDMyOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRWFybCBHcmV5IG1hY2Fyb25zIiwNCiAgICAgIGRlc2M6ICJCZXN0IHNlcnZlZCBob3QsIG1ha2UgaXQgc28hIiwNCiAgICAgIGljb246IFszMiwgMTBdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYWNhcm9ucyIsDQogICAgICBwb3dlcjogMywNCiAgICAgIHByaWNlOiA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5LA0KICAgIH0pOw0KDQogICAgb3JkZXIgPSAxMDAzMDsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlBva2V5IiwNCiAgICAgIGRlc2M6ICJXaGlsZSBjb21tb25seSB0aG91Z2h0IHRvIGJlIG5hbWVkIHNvIGJlY2F1c2UgaXQncyBmdW4gdG8gcG9rZSB5b3VyIGNsYXNzbWF0ZXMgd2l0aCB0aGVzZSwgUG9rZXktYnJhbmQgYmlzY3VpdCBzdGlja3MgYWN0dWFsbHkgZ2V0IHRoZWlyIG5hbWUgZnJvbSB0aGVpciBwb3B1bGFyaXR5IGluIHNtb2tlLWZyZWUgcHJpc29ucywgd2hlcmUgdGhleSdyZSBjb21tb25seSBzbXVnZ2xlZCBhbmQgdHJhZGVkIGluIGxpZXUgb2YgY2lnYXJldHRlcy4iLA0KICAgICAgaWNvbjogWzMzLCAxMF0sDQogICAgICByZXF1aXJlOiAiQm94IG9mIGJyYW5kIGJpc2N1aXRzIiwNCiAgICAgIHBvd2VyOiAyLA0KICAgICAgcHJpY2U6IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDEwMDAwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ2FzaGV3IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkxldCBtZSB0ZWxsIHlvdSBhYm91dCBjYXNoZXdzLiBDYXNoZXdzIGFyZSBub3QgbnV0cywgYnV0IHNlZWRzIHRoYXQgZ3JvdyBvdXQgb2YgY3VyaW91cyByZWQgb3IgeWVsbG93IGZydWl0cyAtIHdoaWNoIGNhbiBiZSBlYXRlbiBvbiB0aGVpciBvd24sIG9yIG1hZGUgaW50byBkcmlua3MuIFRoZSBzaGVsbCBhcm91bmQgdGhlIG51dCBpdHNlbGYgY29udGFpbnMgYSBuYXN0eSBzdWJzdGFuY2UgdGhhdCBzdGFpbnMgYW5kIGlycml0YXRlcyB0aGUgaGFuZHMgb2Ygd2hvZXZlciBoYW5kbGVzIGl0IGZvciB0b28gbG9uZy4gQnV0IHRoYXQncyBva2F5LCBzaW5jZSBub3cgdGhhdCB5b3UndmUgcmVhZCB0aGlzIHlvdSdsbCBtYWtlIHN1cmUgaXQgZG9lc24ndCBnZXQgaW4gdGhlIGNvb2tpZXMhIE9oLCB5b3UndmUgYWxyZWFkeSBlYXRlbiBob3cgbWFueT8gT2theSB0aGVuLiIsDQogICAgICBpY29uOiBbMzIsIDddLA0KICAgICAgcG93ZXI6IDIsDQogICAgICBwcmljZTogOTk5OTk5OTksDQogICAgfSk7DQogICAgb3JkZXIgPSAxMDAwMTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIk1pbGsgY2hvY29sYXRlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkEgc3RyYW5nZSBpbnZlcnNpb24gb2YgY2hvY29sYXRlIG1pbGsuIEZvciB0aG9zZSB3aG8gYXJlIGEgbGl0dGxlIGJpdCB0b28gaGFyZGNvcmUgZm9yIHdoaXRlIGNob2NvbGF0ZSwgYnV0IG5vdCBoYXJkY29yZSBlbm91Z2ggZm9yIGRhcmsuIiwNCiAgICAgIGljb246IFszMywgN10sDQogICAgICBwb3dlcjogMiwNCiAgICAgIHByaWNlOiA5OTk5OTk5OSAqIDUsDQogICAgfSk7DQoNCiAgICBvcmRlciA9IDI1NTsNCiAgICBHYW1lLkdyYW5kbWFTeW5lcmd5KA0KICAgICAgIkJyYWlueSBncmFuZG1hcyIsDQogICAgICAiQSBjbGV2ZXIgZ3JhbmRtYSB0byB0aGluayB1cCBzb21lIGNvb2tpZXMuIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTYwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUHJpbmNpcGxlZCBuZXVyYWwgc2hhY2tsZXMiLA0KICAgICAgIjxxPkEgZGlzY3JpbWluYXRvcnksIGxvdy1vcmRlciBuZXVyYWwgbmV0IGFjdGluZyBhcyBhIGZpbHRlciBsaW1pdGluZyB3aGF0IHlvdXIgY29ydGV4IGJha2VycyBjYW4gdGhpbmsgYW5kIGRvLiBSZWFsbHkgc29tZXRoaW5nIHlvdSB3YW50IHRvIGFwcGx5IGJlZm9yZSB0aGV5IGFjaGlldmUgZnVsbCBtZWdhc2VudGllbmNlIGFuZCByZWFsaXplIHRoZXkndmUgZ290IGJldHRlciB0aGluZ3MgdG8gZG8gdGhhbiBtYXRlcmlhbGl6aW5nIHBhc3RyaWVzIGZvciB5b3UsIHRydXN0IG1lLjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICAxDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiT2JleSIsDQogICAgICAiPHE+UGVyZmVjdCBtaW5kIGNvbnRyb2wgbWVhbnMgcGVyZmVjdCBlbXBsb3llZSBhdHRlbmRhbmNlIGFuZCBwZXJmb3JtYW5jZS4gT3B0aW1hbCBtb29kIHN0YWJpbGl6YXRpb24gaXMgYSBuaWNlIHNpZGUtZWZmZWN0Ljxicj5IYXBweSBoYXBweSBldmVyeW9uZSBoYXBweS48YnI+SGFwcHkuPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJBIHNwcmlua2xlIG9mIGlycmF0aW9uYWxpdHkiLA0KICAgICAgIjxxPllvdXIgY29ydGV4IGJha2VycyBzb21ldGltZXMgZ2V0IGJvZ2dlZCBkb3duIGJ5IGNpcmN1bGFyIHJlYXNvbmluZyBhbmQgc3RhbGUgaWRlYXMuIEEgdG91Y2ggb2YgY2hhb3MgaXMganVzdCB3aGF0IHRoZXkgbmVlZCB0byBnZXQgYmFjayBvbiB0cmFjay48L3E+IiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgMw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZyb250IGFuZCBiYWNrIGhlbWlzcGhlcmVzIiwNCiAgICAgICI8cT5JIG1lYW4sIG90aGVyd2lzZSBpdCdzIGp1c3QgdW51c2VkIHNwYWNlLCB5ZWFoPzwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTmV1cmFsIG5ldHdvcmtpbmciLA0KICAgICAgIjxxPlRoZSBlZmZlY3RpdmVuZXNzIG9mIHlvdXIgY29ydGV4IGJha2VycyBzaG9vdHMgdXAgZXhwb25lbnRpYWxseSBpZiB5b3UgYWxsb3cgdGhlbSB0byBjb25uZWN0IHdpdGggZWFjaCBvdGhlci4gSW4gcHJhY3RpY2UgdGhpcyB0YWtlcyB0aGUgZm9ybSBvZiBtYW55IGNvc21pYy1zaXplZCBuZXJkcyBtdW1ibGluZyBhd2t3YXJkbHkgYWJvdXQgdGVjaCBzdGFydC11cCBpZGVhcyB0byBlYWNoIG90aGVyLjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICA1DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQ29zbWljIGJyYWluc3Rvcm1zIiwNCiAgICAgICI8cT5UaGUgd3JpbmtsZWQgc3VyZmFjZXMgb2YgeW91ciBjb3J0ZXggYmFrZXJzIGVtaXQgd2VhdGhlci1zY2FsZSBpb25pYyBmbGFyZXMgd2l0aCBldmVyeSB0aG91Z2h0IGNvdXJzaW5nIHRocm91Z2ggdGhlbS4gVGhlc2UgcHVsc2VzIG9mIHB1cmUgaW50ZWxsZWN0dWFsIGVuZXJneSBhcmUgc2VudCByaXBwbGluZyB0aHJvdWdoIHNwYWNlLCBvY2Nhc2lvbmFsbHkgZWNob2luZyBiYWNrIHdpdGggZXZlbiBkZWVwZXIgcGhpbG9zb3BoaWNhbCBjb21wbGV4aXR5LjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICA2DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiTWVnYXRoZXJhcHkiLA0KICAgICAgIjxxPkEgZ2lhbnQgYnJhaW4gY2FuIGZlZWwgdW53ZWxsIGp1c3QgbGlrZSB5b3UgYW5kIG1lIHNvbWV0aW1lcywgYW5kIGl0J3MgdGhlIGpvYiBvZiBzcGVjaWFsaXplZCBlbmdpbmVlcnMgdG8gbG9jYXRlIGFuZCByZXBhaXIgdGhlc2UgYnVncy4gV2UnbGwgYWRtaXQgbW9zdCBvZiB0aGUgYnVkZ2V0IGluIHRoaXMgd2FzIHNwZW50IG9uIGNvbnN0cnVjdGluZyBleHRyZW1lbHkgbGFyZ2UgY2hhaXNlcyBsb25ndWVzIGZvciB0aGUgYnJhaW5zIHRvIHJlY2xpbmUgb24uPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDcNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTeW5hcHRpYyBsdWJyaWNhbnQiLA0KICAgICAgIjxxPkEgbWluZCBpcyBvbmx5IGFzIGZhc3QgYXMgdGhlIGF4b25zIHRoYXQgc3VwcG9ydCBpdC4gR2V0IHRob3NlIGFjdGlvbiBwb3RlbnRpYWxzIGZsb3dpbmcgc21vb3RoIGFzIHNpbGsgd2l0aCB0aGlzIDMgcGFydHMgbXllbGluLzEgcGFydCBjYW5vbGEgb2lsIHNwcmVhZGFibGUgcGFzdGUuIEFsc28gZ3JlYXQgb24gdG9hc3QuPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDgNCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJQc3ljaG9raW5lc2lzIiwNCiAgICAgICI8cT5XaGlsZSB5b3VyIGdpYW50IGNvcnRleCBiYWtlcnMgY29tZSBlcXVpcHBlZCB3aXRoIEVTUCwgdGhleSd2ZSBvbmx5IHJlY2VudGx5IGZpZ3VyZWQgb3V0IGhvdyB0byBtYW5pcHVsYXRlIHRoZSBwaHlzaWNhbCB3b3JsZCB3aXRoIHRoZWlyIHRob3VnaHRzIC0gdGhvdWdoIGZvciBzYWZldHkgcmVhc29ucywgeW91ciBsZWdhbCB0ZWFtIGhhZCB0aGVtIHByb21pc2UgdG8gb25seSB1c2UgdGhlc2UgcG93ZXJzIHRvIHNjcmF0Y2ggdGhlIGl0Y2hlcyBpbiB0aGVpciBjb3J0aWNhbCBmb2xkcy48L3E+IiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgOQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlNwaW5lcyIsDQogICAgICAiPHE+WW91ciBjb3J0ZXggYmFrZXJzIGFyZSBub3cgZXF1aXBwZWQgd2l0aCB0ZW50YWN1bGFyIHNwaW5lLWxpa2Ugc3RydWN0dXJlcywgd2hpY2ggdGhleSBjYW4gdXNlIGxpa2UgcHJlaGVuc2lsZSB0YWlscyB0byBwb3VyIHRoZW1zZWx2ZXMgZW5vcm1vdXMgY3VwcyBvZiBjb2ZmZWUgb3IgcHJvcGVsIHRoZW1zZWx2ZXMgYXJvdW5kIGxpa2UgdmVyeSBsYXJnZSwgdmVyeSBzbWFydCwgdmVyeSBzbG93IHRhZHBvbGVzLjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICAxMA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIk5ldXJhZm9ybWluZyIsDQogICAgICAiPHE+QnkgdmlydHVlIG9mIGJlaW5nIHBsYW5ldC1zaXplZCwgeW91ciBjb3J0ZXggYmFrZXJzIG9mdGVuIGJvYXN0IHRoZWlyIG93biBhdG1vc3BoZXJlcyBhbmQgc2VhcyBvZiBjZXJlYnJvc3BpbmFsIGZsdWlkLCBhbmQgZ2l2ZW4gZW5vdWdoIHRpbWUsIHRoZWlyIG93biBlY29zeXN0ZW1zLiBUaGlzIGluY3JlZGlibGUgbmV3IGJyYW5jaCBvZiBsaWZlLCBldm9sdmVkIGVudGlyZWx5IG91dCBvZiBuZXVyYWwgbWF0ZXJpYWwsIGNhbiBiZSBwdXQgdG8gZ29vZCB1c2UgYXMgaG9tZS1ncm93biBhY2NvdW50YW50cyBhbmQgbG93LXJhbmtpbmcgdGVjaG5pY2lhbnMuPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDExDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRXBpc3RlbW9sb2dpY2FsIHRyaWNrZXJ5IiwNCiAgICAgICI8cT5SZWRlZmluaW5nIHdoYXQgaXMgLW9yIGlzbid0LSBhIGNvb2tpZSB0aHJvdWdoIHRoZSBwb3dlciBvZiBwaGlsb3NvcGhpY2FsIGRpc2NvdXJzZSBtYXkgcmVzdWx0IGluIHNvbWUgc3RyYW5nZSBhbmQgd29uZGVyZnVsIHRoaW5ncyBmb3IgeW91ciBwcm9maXQgbWFyZ2lucy48L3E+IiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgMTINCiAgICApOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFdmVyeSBwb3NzaWJsZSBpZGVhIiwNCiAgICAgICI8cT5Db25ncmF0dWxhdGlvbnMsIHlvdXIgY29ydGV4IGJha2VycyBoYXZlIGV4ZXJ0ZWQgZW5vdWdoIGludGVsbGVjdHVhbCBjb21wdXRhdGlvbiB0byBwZXJtdXRlIHRocm91Z2ggZXZlcnkgc2luZ2xlIGlkZWEgdGhhdCBjYW4gb3IgZXZlciB3aWxsIGJlIGNvbmNlaXZlZCBvZi4gQW55IHRob3VnaHQgYmV5b25kIHRoaXMgcG9pbnQgaXMgbWVyZWx5IHJlZGlzY292ZXJpbmcgYSBub3Rpb24geW91J3ZlIGFscmVhZHkgYXJjaGl2ZWQuIEhhcmRseSBjYXVzZSBmb3IgY2VyZWJyYXRpb24uPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDEzDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJLaXRjaGVuIGNhYmluZXRzIiwNCiAgICAgICI8cT5BIGdyYW5kbWEncyBraXRjaGVuIGNhYmluZXQgaXMgYSBiZWZ1ZGRsaW5nIHBsYWNlLiBUaHJvdWdoIGxlc3Nlci1zdHVkaWVkIGFnZ3JlZ2F0aW5nIGluc3RpbmN0cywgZ3JhbmRtYXMgd2lsbCB0ZW5kIHRvIGdyYWR1YWxseSBmaWxsIGFsbCBuZWFyYnkgY2FiaW5ldHMgd2l0aCB2YXJpb3VzIHNvcnRzIG9mIHRoaW5ncywgc3VjaCBhcyBjdXJpb3VzIGNvY29udXQgc25hY2tzIG9yIGRpZXRldGljIHBvd2RlcnMuIEJ5IGNvbnRyYWN0LCB0aGVzZSBhcmUgbGVnYWxseSB5b3Vycywgd2hpY2ggb3BlbnMgdXAgZXhjaXRpbmcgb3Bwb3J0dW5pdGllcyBmb3IgeW91ciBzdWJzdGFuY2UgaW52ZXN0aWdhdGlvbiBkZXBhcnRtZW50LjwvcT4iLA0KICAgICAgIkdyYW5kbWEiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJDb29raWUgbXVsY2giLA0KICAgICAgIjxxPkdyaW5kaW5nIHN1cnBsdXMgY29va2llcyBpbnRvIHBhc3RlIHRoYXQgeW91IHRoZW4gc3ByZWFkIG9udG8geW91ciBmaWVsZHMgZW5hYmxlcyBhIHN0cmFuZ2UgZmVlZGJhY2sgbG9vcCBpbiB0aGUgcXVhbGl0eSBvZiB5b3VyIGNvb2tpZSBjcm9wcy4gQ29va2llIGZlZWRpbmcgb24gY29va2llIHNob3VsZCBiZSBhbiBhYm9taW5hdGlvbiwgYnV0IHRoZW4gd2h5IGRvZXMgaXQgdGFzdGUgc28gZ29vZD88L3E+IiwNCiAgICAgICJGYXJtIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDQwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiRGVsaWNpb3VzIG1pbmVyYWxvZ3kiLA0KICAgICAgIjxxPlN0cmF0dW0gYWZ0ZXIgc3RyYXR1bSwgeW91J3ZlIGV4dHJhY3RlZCBzdHJhbmdlIG5ldyBtaW5lcmFscyBoZXJldG9mb3JlIHVua25vd24gdG8gZ2VvbG9neS4gVXNoZXJpbmcgYSBuZXcgZXJhIG9mIG1hdGVyaWFscyByZXNlYXJjaCwgeW91ciBzY2llbnRpc3RzIGhhdmUgYmVlbiBhYmxlIHRvIGlkZW50aWZ5IGV2ZXJ5IG5ldyBlbGVtZW50IHlvdXIgbWluZXMgaGF2ZSBkaXNjb3ZlcmVkLCBpbmNsdWRpbmcgd2hhdGV2ZXIgdGhvc2UgdGhpbmdzIGFyZSBpbiB0aGUgdXBncmFkZSB0aWVyIG5hbWVzLjwvcT4iLA0KICAgICAgIk1pbmUiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gNTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJOLWRpbWVuc2lvbmFsIGFzc2VtYmx5IGxpbmVzIiwNCiAgICAgICI8cT5MaW5lcyBhcmUgZGVwcmVzc2luZ2x5IDEtZGltZW5zaW9uYWwuIEJleW9uZCBhc3NlbWJseSBsaW5lcywgd2UgcG9zaXQgdGhlIGV4aXN0ZW5jZSBvZiBoaWdoZXItb3JkZXIgYXNzZW1ibHkgZW50aXRpZXMsIHN1Y2ggYXMgYXNzZW1ibHkgc3F1YXJlcywgYXNzZW1ibHkgY3ViZXMgLSBwZXJoYXBzIGV2ZW4gYXNzZW1ibHkgdGVzc2VyYWN0cy4gQW55IGRlZXBlciB0aGFuIHRoYXQgYW5kIHdlIGRvdWJ0IHdlJ2xsIGJlIGFibGUgdG8gd3JpdGUgbWFudWFscyB5b3VyIHdvcmtlcnMgY2FuIHJlYWQuPC9xPiIsDQogICAgICAiRmFjdG9yeSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSA1MjU7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNvb2tpZSBQb2ludHMiLA0KICAgICAgIjxxPkEgbG95YWx0eSBwcm9ncmFtIHdoZXJlaW4gZWFjaCBwdXJjaGFzZSBvZiB5b3VyIGNvb2tpZXMgY29tZXMgd2l0aCBmcmVlIENvb2tpZSBQb2ludHMsIHdoaWNoIGNhbiBpbiB0dXJuIGJlIHJlZGVlbWVkIGZvciBtb3JlIGNvb2tpZXMsIHRodXMgY3JlYXRpbmcgdGhlIHNlbGYtc3VzdGFpbmluZyBlY29ub215IHlvdSd2ZSBiZWVuIGxvb2tpbmcgZm9yLjwvcT4iLA0KICAgICAgIkJhbmsiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gNTUwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJOZWdhdGhlaXNtIiwNCiAgICAgICI8cT5Qb2x5dGhlaXNtIGlzIGEgYmVsaWVmIGluIG11bHRpcGxlIGRlaXRpZXM7IG1vbm90aGVpc20gaW4ganVzdCBvbmUuIEF0aGVpc20gaXMgYSBiZWxpZWYgaW4gbm8gZGVpdHkgd2hhdHNvZXZlci4gVGhyb3VnaCBsb2dpY2FsIHN1Y2Nlc3Npb24gaXQgZm9sbG93cyB0aGF0IHRoaXMgcmVtYWlucyB0cnVlIHdoZW4gZ29pbmcgaW50byBuZWdhdGl2ZSBudW1iZXJzLCB3aXRoIGJlbGllZiBzeXN0ZW1zIGludm9sdmluZyBtaW51cyAxIG9yIG1vcmUgZGVpdGllcyBkaXNwbGF5aW5nIHVucHJlY2VkZW50ZWQgdGhlb2xvZ2ljYWwgcHJvcGVydGllcy48L3E+IiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gNTc1Ow0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNYWdpY2FsIHJlYWxpc20iLA0KICAgICAgIjxxPk1vcmUgYSBzb2NpYWwgdGhhbiB0aGF1bWF0dXJnaWNhbCBwcm9ncmVzcywgbWFnaWNhbCByZWFsaXNtIHJlZmVycyB0byB0aGUgbm9ybWFsaXphdGlvbiBvZiBtb2Rlcm4gdGVjaG5vbG9neSBhbW9uZyBtYWdpYy11c2Vycy4gSXQncyB0b3RhbGx5IGZpbmUgZm9yIGEgd2l6YXJkIHRvIGRyaXZlIGEgY2FyISBUaGVyZSdzIG5vIHN0aWdtYSBpbiB3YWl0aW5nIGluIGxpbmUgZm9yIGNvZmZlZSEgU3VyZSwgdGFrZSBhIHBob25lIGNhbGwsIHNlbmQgYW4gZW1haWwsIHdoYXRldmVyITwvcT4iLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSA2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkNvc21pYyBmb3JlZ3JvdW5kIHJhZGlhdGlvbiIsDQogICAgICAiPHE+QWgsIHRoaXMgaXMgYSBwcm9ibGVtLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDcwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiQXJjYW5pemVkIGdsYXNzd2FyZSIsDQogICAgICAiPHE+WW91IHRoaW5rIHlvdXIgbGFiIGVxdWlwbWVudCBlbmpveXMgdGFraW5nIHBhcnQgaW4gdGhlc2UgZXhwZXJpbWVudHMgdmlvbGF0aW5nIGFsbCBzb3J0cyBvZiBtb2Rlcm4gc2NpZW50aWZpYyBwcmVjZXB0cz8gT2YgY291cnNlIG5vdC4gVGhhbmtmdWxseSwgeW91J3ZlIGZpbmFsaXplZCB0aGUgZGVzaWduIG9mIHNwZWNpYWxpemVkIGJlYWtlcnMgYW5kIGZsYXNrcywgcmVjeWNsZWQgZnJvbSB0aGUgc2FtZSBnbGFzcyB1c2VkIGJ5IHRoZSBhbmNpZW50cyB0byBwZXJmb3JtIHByaW1ldmFsIGFsY2hlbXksIGFuZCB0aGVyZWZvcmUgbXVjaCBsZXNzIHBpY2t5IGFib3V0IHRoZSBuYXR1cmUgb2YgdGhlIHBoeXNpY2FsIHdvcmxkLjwvcT4iLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDgwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiUG9ydGFsIGd1bnMiLA0KICAgICAgIjxxPkF0IGxvbmcgbGFzdCEgVGhlIG9ubHkgd2VhcG9uIGNhcGFibGUgb2Yga2lsbGluZyBhIHBvcnRhbC48L3E+IiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gOTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJUaW1lcHJvb2YgdXBob2xzdGVyeSIsDQogICAgICAiPHE+U29tZXRpbWVzIHlvdXIgdGltZSBhZ2VudHMgb3ZlcnNob290IGFuZCBlbmQgdXAgaGF2aW5nIHRvIGZhc3QtZm9yd2FyZCB0aHJvdWdoIHRoZSB1bml2ZXJzZSdzIGVudGlyZSBoaXN0b3J5IHVudGlsIHRoZXkgbG9vcCBiYWNrIHRvIHByZXNlbnQgdGltZS4gSXQgc3RpbGwgdGFrZXMgYSB3aGlsZSwgc28gdGhleSBtaWdodCBhcyB3ZWxsIHRyYXZlbCBpbiBjb21mb3J0IGFuZCBlbmpveSB0aGUgc2hvdyB3aGlsZSB0aGV5IGRvLjwvcT4iLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxMDAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJFbXBsb3llZSBtaW5pZmljYXRpb24iLA0KICAgICAgIjxxPlVzaW5nIG1vbGVjdWxhciBzaHJpbmtpbmcgdGVjaG5vbG9neSwgeW91J3ZlIHJlbmRlcmVkIHlvdXIgc3RhZmYgYW5kIHRoZWlyIG9mZmljZXMgYWJzb2x1dGVseSBpdHR5LWJpdHR5LiBUaGUgc3RvcmFnZSBhbmQgcHJvZHVjdGl2aXR5IGJlbmVmaXRzIGFyZSBxdWVzdGlvbmFibGUgYnV0IGl0J3MgdmVyeSBmdW4gbGlzdGVuaW5nIHRvIHRoZWlyIHRpbnkgbGl0dGxlIGNvbXBsYWludHMuIFRoZXkgYWxsIHNpZ25lZCB0aGUgd2FpdmVycywgc28gbWF5YmUgdGhlaXIgbmV3IHNpemUgd2lsbCBmaW5hbGx5IHRlYWNoIHRoZW0gdG8gcmVhZCB0aGUgc21hbGwgcHJpbnQuLi48L3E+IiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxMTAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJIeXBlcmJsYWNrIHBhaW50IiwNCiAgICAgICI8cT5BcyB0aGUgdGVjaG5vbG9neSBiZWhpbmQgeW91ciBwcmlzbXMgZXZvbHZlcywgdGhlaXIgc3RvcmFnZSBiZWNvbWVzIG1vcmUgYW5kIG1vcmUgcHJvYmxlbWF0aWM6IHdpdGhpbiBzZWNvbmRzLCBhIHNpbmdsZSBwcmlzbSdzIHJlZmxlY3RpdmUgYWJpbGl0eSBjYW4gc2V0IGEgd2hvbGUgdW5kZXJncm91bmQgaGFuZ2FyIGFibGF6ZSBhcyBpdCBjYXRjaGVzIHRoZSBzbGlnaHRlc3QgZ2xpbnQgb2YgbGlnaHQuIEhvd2V2ZXIsIG9uY2UgY29hdGVkIHdpdGggdGhpcyBuZXcgc2hhZGUgb2YgcGFpbnQsIGl0cyBkYW1hZ2UgbWF5IGJlIHJlZHVjZWQgdG8gb25seSBnaXZpbmcgdGhpcmQtZGVncmVlIGJ1cm5zIHRvIGVtcGxveWVlcyB0aGF0IHN0YW5kIHRvbyBjbG9zZS48L3E+IiwNCiAgICAgICJQcmlzbSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJTaWx2ZXIgbGluaW5nIG1heGltaXphdGlvbiIsDQogICAgICAiPHE+U29tZXRpbWVzIGx1Y2sgaXMgYSBtYXR0ZXIgb2YgcGVyc3BlY3RpdmUuIEJyb2tlIHlvdXIgYW5rbGU/IFdoYXQgZG8geW91IGtub3csIHRoYXQgY3V0ZSBudXJzZSBmaXhpbmcgeW91IHVwIG1pZ2h0IGp1c3QgYmUgeW91ciBmdXR1cmUgc3BvdXNlLiBMb3N0IHlvdXIgam9iPyBZb3Ugd2VyZSBtZWFudCBmb3IgZ3JlYXRlciB0aGluZ3MgYW55d2F5ISBEZXZlbG9wZWQgYSBjb29raWUgYWxsZXJneT8gVGhlcmUncyBubyB1cHNob3QgdG8gdGhhdCwgeW91IHNpY2sgbW9uc3Rlci48L3E+IiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkVXBncmFkZSgNCiAgICAgICJNdWx0aXNjYWxlIHByb2ZpbGluZyIsDQogICAgICAiPHE+RGlkIHlvdSBrbm93IHRoYXQgZWF0aW5nIGEgY29va2llIG1lYW5zIHRoZSBpbnRlc3RpbmFsIGZsb3JhIGluc2lkZSB5b3UgaXMgZWF0aW5nIGl0IHRvbz8gVHJpbGxpb25zIG9mIHRpbnkgYmFjdGVyaWFsIG1vdXRocyB0byBmZWVkLCBlYWNoIHdpdGggdGhlaXIgb3duIHByZWZlcmVuY2VzLiBTdXJlbHkgdGhpcyBpcyByb29tIGZvciBmbGF2b3Igb3B0aW1pemF0aW9uLiBBbmQgdGhlbiwgb2YgY291cnNlLCB0aGVyZSdzIGFsc28gdGhlIG11Y2ggYmlnZ2VyIHRoaW5ncyB0aGF0LCBpbiB0dXJuLCBlYXQgeW91LjwvcT4iLA0KICAgICAgIkZyYWN0YWwgZW5naW5lIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlBIUCBjb250YWlubWVudCB2YXRzIiwNCiAgICAgICI8cT5JbiBlc3NlbmNlLCB0aGVzZSBhcmUgbGFyZ2Ugc2VydmVyIGNoYW1iZXJzIG1lYW50IHRvIHRyYXAgcm9ndWUgUEhQIGNvZGUsIGFsbG93aW5nIGl0IHRvIGV4ZWN1dGUgZmFyIGF3YXkgZnJvbSB5b3VyIGphdmFzY3JpcHQgd2hlcmUgaXQgY2FuIGRvIG1pbmltYWwgaGFybS48L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZFVwZ3JhZGUoDQogICAgICAiT3Bwb3NpdGUgdW5pdmVyc2UiLA0KICAgICAgIjxxPllvdSd2ZSBsb2NhdGVkIGEgdW5pdmVyc2Ugd2hlcmUgZXZlcnl0aGluZyBpcyByZXZlcnNlZDogdXAgaXMgZG93biwgbGlnaHQgaXMgZGFya25lc3MsIGNsb3ducyBhcmUgdmVnZXRhcmlhbnMgLSBidXQgd29yc3Qgb2YgYWxsLCBzb21lIGx1bmF0aWMgdGhlcmUgaXMgbWFudWZhY3R1cmluZyBhYm9taW5hYmxlIGFtb3VudHMgb2YgYW50aS1jb29raWVzLiBJZiB0aGVzZSBjYW1lIGludG8gY29udGFjdCB3aXRoIHlvdXJzLCBldmVyeXRoaW5nIHdvdWxkIGJlIGxvc3QhIFRoYW5rcyB0byB0aGlzIGRpc2NvdmVyeSwgeW91J3ZlIGJlZW4gYWJsZSB0byBwbGFjZSB0aGUgb2ZmZW5kaW5nIHVuaXZlcnNlIGluIHBlcm1hbmVudCBxdWFyYW50aW5lLCBhbmQgcHJheSB0aGF0IHRoZXJlIGFyZW4ndCBtb3JlIGxpa2UgaXQgaGlkaW5nIGFyb3VuZCBzb21ld2hlcmUuPC9xPiIsDQogICAgICAiSWRsZXZlcnNlIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIlRoZSBsYW5kIG9mIGRyZWFtcyIsDQogICAgICAiPHE+WW91ciBwbGFuZXQgYnJhaW5zIGhhdmUgZ2FpbmVkIHRoZSBhYmlsaXR5IHRvIHNsZWVwLCBhY3RpbmcgYXMgYSBzb2Z0IHJlYm9vdCB3aGljaCBoZWxwcyBrZWVwIHRoZWlyIHBhbmdlbm9jaWRhbCBpbXB1bHNlcyBpbiBjaGVjay4gSXQgYWxzbyBhbGxvd3MgdGhlbSB0byBjb21tdW5lIGluIGEgc2hhcmVkIGRyZWFtd29ybGQgaW4gd2hpY2ggdGhleSBjYW4gaW1hZ2luZSB3aGF0IGl0J3MgbGlrZSB0byBub3QgZXhpc3QgYXMgYSBkaXNlbWJvZGllZCBjb3NtaWMgaG9ycm9yIGZvcmV2ZXIgZmF0ZWQgdG8gdXNlIGl0cyBpbmZpbml0ZSBpbnRlbGxlY3QgdG8gZGV2aXNlIG5ldyBtZWFucyBvZiBjcmVhdGluZyBiaXNjdWl0cy4gWW91IGtub3csIHdpdGhpbiByZWFzb24uPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDE0DQogICAgKTsNCg0KICAgIG9yZGVyID0gNTAwMDsNCiAgICBHYW1lLlN5bmVyZ3lVcGdyYWRlKA0KICAgICAgIlRob3VnaHRzICYgcHJheWVycyIsDQogICAgICAiPHE+VGhlIG5vdGlvbiBvZiBzYWNyZWRuZXNzIGFyaXNlcyBpbiBtb3N0IHNlbnRpZW50IGV2b2x2ZWQgYnJhaW5zIGFuZCBtYXkgYmVuZWZpdCB0aGUgZGV2ZWxvcG1lbnQgb2YgY29nbml0aW9uIHZpYSBhYnN0cmFjdCB0aG91Z2h0LiBUaGlzIG1lY2hhbmlzbSwgaG93ZXZlciwgaXMgYWJzZW50IGluIGRlc2lnbmVkIG1pbmRzIHN1Y2ggYXMgeW91ciBjb3J0ZXggYmFrZXJzOyB0aGlzIHByb2Nlc3MgYXR0ZW1wdHMgdG8gYWRkIGl0IGJhY2suIEp1c3QgbWFrZSBzdXJlIHRvIGtlZXAgdGhlbSBpbiBjaGVjayAtIHlvdSByZWFsbHkgZG9uJ3Qgd2FudCB0aGVzZSB0aGluZ3MgdG8gZGV2ZWxvcCBvcmdhbml6ZWQgcmVsaWdpb24uPC9xPiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgICJUZW1wbGUiLA0KICAgICAgInN5bmVyZ3kxIg0KICAgICk7DQogICAgR2FtZS5TeW5lcmd5VXBncmFkZSgNCiAgICAgICJGZXJ0aWxlIG1pbmRzIiwNCiAgICAgICI8cT5BbiBhY3V0ZSBpbnRlbGxlY3QsIGFydGlmaWNpYWwgb3Igbm90LCByZXF1aXJlcyBwbGVudHkgb2Ygdml0YW1pbnMuIFlvdSBmb3J0dWl0b3VzbHkgaGFwcGVuIHRvIGJlIGluIGNoYXJnZSBvZiB2YXN0IGZhcm1pbmcgb3BlcmF0aW9ucywgb25seSBhIGZldyB0cmlsbGlvbiBhY3JlcyBvZiB3aGljaCBuZWVkIGJlIHJlcXVpc2l0aW9uZWQgdG8gZ3JvdyB0aGUgcXVhbnRpdGllcyBvZiBicm9jY29saSBhbmQga2FsZSB0byBrZWVwIHlvdXIgcGxhbmV0LXNpemVkIGJyYWlucyBpbiB0aXAtdG9wIHNoYXBlLiBPcGVuIHdpZGUsIGhlcmUgY29tZXMgdGhlIGFpcnBsYW5lITwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICAiRmFybSIsDQogICAgICAic3luZXJneTIiDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTkwMDA7DQogICAgR2FtZS5UaWVyZWRVcGdyYWRlKA0KICAgICAgIkZvcnR1bmUgIzAxOSIsDQogICAgICAiPHE+VGhlIHNtYXJ0ZXN0IHdheSB0byB0aGluayBpcyBub3QgdG8gdGhpbmsgYXQgYWxsLjwvcT4iLA0KICAgICAgIkNvcnRleCBiYWtlciIsDQogICAgICAiZm9ydHVuZSINCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDA7DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJEZWNpbGxpb24gZmluZ2VycyIsDQogICAgICBnZXRTdHJUaG91c2FuZEZpbmdlcnNHYWluKDIwKSArDQogICAgICAgICI8cT5JZiB5b3Ugc3RpbGwgY2FuJ3QgcXVpdGUgcHV0IHlvdXIgZmluZ2VyIG9uIGl0LCB5b3UgbXVzdCBub3QgYmUgdHJ5aW5nIHZlcnkgaGFyZC48L3E+IiwNCiAgICAgIDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzEyLCAzNF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDE0LCAwKTsNCiAgICBvcmRlciA9IDE1MDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkFldGhlcmljZSBtb3VzZSIsDQogICAgICBnZXRTdHJDbGlja2luZ0dhaW5zKDEpICsNCiAgICAgICAgIjxxPk1hZGUgZnJvbSBhIHN1YnN0YW5jZSBpbXBvc3NpYmxlIHRvIG1hbnVmYWN0dXJlLCBvbmx5IG9idGFpbmVkIHRocm91Z2ggbmF0dXJhbCBoYXBwZW5zdGFuY2U7IGl0cyBwcm9wZXJ0aWVzIGJld2lsZGVyIGV2ZW4gdGhlIG1vc3QgcHJlY2lzZSBtZWFzdXJpbmcgaW5zdHJ1bWVudHMuPC9xPiIsDQogICAgICA1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwLA0KICAgICAgWzExLCAzNF0NCiAgICApOw0KICAgIEdhbWUuTWFrZVRpZXJlZChHYW1lLmxhc3QsIDE0LCAxMSk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiS2l0dGVuIGFkbWlucyIsDQogICAgICBzdHJLaXR0ZW5EZXNjICsgIjxxPmxlYWRlcnNoaXAgYWluJ3QgZWFzeSwgc2lyPC9xPiIsDQogICAgICA5MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAsDQogICAgICBHYW1lLkdldEljb24oIktpdHRlbiIsIDE0KQ0KICAgICk7DQogICAgR2FtZS5sYXN0LmtpdHRlbiA9IDE7DQogICAgR2FtZS5NYWtlVGllcmVkKEdhbWUubGFzdCwgMTQsIDE4KTsNCg0KICAgIG9yZGVyID0gMTAzMDA7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJFdmVyeWJ1dHRlciBiaXNjdWl0IiwNCiAgICAgIGRlc2M6ICJSZXdhcmRlZCBmb3Igb3duaW5nIDY1MCBvZiBldmVyeXRoaW5nLjxicj5UaGlzIGJpc2N1aXQgaXMgYmFrZWQgd2l0aCwgYW5kIGNvYXRlZCBpbiwgZXZlcnkga2luZCBvZiBidXR0ZXIgZXZlciBpbWFnaW5lZCwgZnJvbSBldmVyeSBodW1hbiBjdWx0dXJlIGFuZCBhIGdvb2QgZmV3IGFsaWVuIG9uZXMgdG9vLiBTb21lIG9mIHRoZW0gcGVyaGFwcyBkaXNwbGF5IGhhbGx1Y2lub2dlbmljIHRyYWl0cywgYXMgdGhlIGJpc2N1aXQgc2VlbXMgdG8gY2hhbmdlIHNoYXBlIGluIGZyb250IG9mIHlvdSAtIHNlZW1pbmdseSBzaGlmdGluZyBiZXR3ZWVuIHZpc2lvbnMgb2YgZXZlcnkgcGFzdCBhbmQgZnV0dXJlIHlvdS4iLA0KICAgICAgaWNvbjogWzIyLCAzNF0sDQogICAgICBwb3dlcjogMTAsDQogICAgICBwcmljZToNCiAgICAgICAgOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5ICoNCiAgICAgICAgYnV0dGVyQmlzY3VpdE11bHQsDQogICAgICBsb2NrZWQ6IDEsDQogICAgfSk7DQoNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nID0gZnVuY3Rpb24gKG9iaikgew0KICAgICAgdmFyIGJ1aWxkaW5nID0gR2FtZS5PYmplY3RzW29iai5idWlsZGluZ107DQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgICJVbnNoYWNrbGVkICIgKyBidWlsZGluZy5icGx1cmFsLA0KICAgICAgICAob2JqLmJ1aWxkaW5nID09ICJDdXJzb3IiDQogICAgICAgICAgPyBnZXRTdHJUaG91c2FuZEZpbmdlcnNHYWluKDI1KQ0KICAgICAgICAgIDogbG9jKA0KICAgICAgICAgICAgICAiVGllcmVkIHVwZ3JhZGVzIGZvciA8Yj4lMTwvYj4gcHJvdmlkZSBhbiBleHRyYSA8Yj4rJTIlPC9iPiBwcm9kdWN0aW9uLjxicj5Pbmx5IHdvcmtzIHdpdGggdW5zaGFja2xlZCB1cGdyYWRlIHRpZXJzLiIsDQogICAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgICBjYXAoYnVpbGRpbmcucGx1cmFsKSwNCiAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKA0KICAgICAgICAgICAgICAgICAgKGJ1aWxkaW5nLmlkID09IDEgPyAwLjUgOiAoMjAgLSBidWlsZGluZy5pZCkgKiAwLjEpICogMTAwDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgKSkgKyAoRU4gPyAiPHE+IiArIG9iai5xICsgIjwvcT4iIDogIiIpLA0KICAgICAgICBNYXRoLnBvdyhidWlsZGluZy5pZCArIDEsIDcpICogMTUwMDAwMDAsDQogICAgICAgIFtidWlsZGluZy5pY29uQ29sdW1uLCAzNV0NCiAgICAgICk7DQogICAgICB1cGdyYWRlLnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgICAgdXBncmFkZS5wYXJlbnRzID0gWw0KICAgICAgICBvYmouYnVpbGRpbmcgPT0gIkN1cnNvciINCiAgICAgICAgICA/ICJVbnNoYWNrbGVkIGZsYXZvciINCiAgICAgICAgICA6IEdhbWUuT2JqZWN0c0J5SWRbYnVpbGRpbmcuaWQgLSAxXS51bnNoYWNrbGVVcGdyYWRlLA0KICAgICAgXTsNCiAgICAgIGJ1aWxkaW5nLnVuc2hhY2tsZVVwZ3JhZGUgPSB1cGdyYWRlLm5hbWU7DQogICAgICB1cGdyYWRlLnBvc1ggPSA3NTAgLSBNYXRoLnNpbigoYnVpbGRpbmcuaWQgKyAxKSAqIDAuMjUgKyAyLjMpICogNTAwOw0KICAgICAgdXBncmFkZS5wb3NZID0gMjAwICsgTWF0aC5jb3MoKGJ1aWxkaW5nLmlkICsgMSkgKiAwLjI1ICsgMi4zKSAqIDUwMDsNCiAgICAgIHJldHVybiB1cGdyYWRlOw0KICAgIH07DQoNCiAgICAvLyJVbnNoYWNrbGVkIFtidWlsZGluZyBuYW1lXSINCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiQ3Vyc29yIiwNCiAgICAgIHE6ICJUaGVzZSBoYW5kcyB0ZWxsIGEgc3RvcnkuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsgYnVpbGRpbmc6ICJHcmFuZG1hIiwgcTogIk5ldmVyIHRvbyBvbGQuIiB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsgYnVpbGRpbmc6ICJGYXJtIiwgcTogIlRpbGwgdGhlIHVuaXZlcnNlLiIgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIk1pbmUiLA0KICAgICAgcTogJ1JlZGVmaW5lIHRoZSBtZWFuaW5nIG9mICJkZXB0aCIuJywNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiRmFjdG9yeSIsDQogICAgICBxOiAiTm90aGluZyB0byBsb3NlIGJ1dCB5b3VyIHByb2R1Y3Rpb24gY2hhaW5zLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkJhbmsiLA0KICAgICAgcTogIkFsbC10aW1lIGhpZ2hzLCBhbGwgdGhlIHRpbWUuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiVGVtcGxlIiwNCiAgICAgIHE6ICJZb3UgY2FuIG1ha2UgYSByZWxpZ2lvbiBvdXQgb2YgdGhpcy4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlQnVpbGRpbmcoew0KICAgICAgYnVpbGRpbmc6ICJXaXphcmQgdG93ZXIiLA0KICAgICAgcTogIlRoZXJlJ3MgYSBzcGVsbCBmb3IgZXZlcnl0aGluZy4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlQnVpbGRpbmcoew0KICAgICAgYnVpbGRpbmc6ICJTaGlwbWVudCIsDQogICAgICBxOiAiRXZlcnl3aGVyZSBhdCBvbmNlLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkFsY2hlbXkgbGFiIiwNCiAgICAgIHE6ICJBbnl0aGluZyB5b3Ugc2VlLCB5b3UgY2FuIG1ha2UuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiUG9ydGFsIiwNCiAgICAgIHE6ICJQYXJhbGxlbHMgdW5wYXJhbGxlbGVkLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIlRpbWUgbWFjaGluZSIsDQogICAgICBxOiAiQWxsIHRoZSB0aW1lIGluIHRoZSB3b3JsZC4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlQnVpbGRpbmcoew0KICAgICAgYnVpbGRpbmc6ICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICBxOiAiTm8gc2NhbGUgdG9vIGxhcmdlIG9yIHRvbyBsaXR0bGUuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiUHJpc20iLA0KICAgICAgcTogIkJyaWxsaWFuY2UgaGFzIG5vIHVwcGVyIGxpbWl0LiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkNoYW5jZW1ha2VyIiwNCiAgICAgIHE6ICJZb3UgbWFrZSB0aGUgcnVsZXMuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgcTogIlVuY29udGFpbmVkLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICBxOiAiUmV3cml0ZSB5b3VyIHJlYWxpdHkuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZUJ1aWxkaW5nKHsNCiAgICAgIGJ1aWxkaW5nOiAiSWRsZXZlcnNlIiwNCiAgICAgIHE6ICJXYWl0IGV2ZW4gZmFzdGVyLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVCdWlsZGluZyh7DQogICAgICBidWlsZGluZzogIkNvcnRleCBiYWtlciIsDQogICAgICBxOiAiTm90aGluZyBpcyByZWFsLiBFdmVyeXRoaW5nIGlzIHBlcm1pdHRlZC4iLA0KICAgIH0pOw0KDQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllciA9IGZ1bmN0aW9uIChvYmopIHsNCiAgICAgIHZhciB0aWVyID0gR2FtZS5UaWVyc1tvYmoudGllcl07DQogICAgICB2YXIgdXBncmFkZSA9IG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAgIG9iai50aWVyID09IDENCiAgICAgICAgICA/ICJVbnNoYWNrbGVkIGZsYXZvciINCiAgICAgICAgICA6ICJVbnNoYWNrbGVkICIgKyB0aWVyLm5hbWUudG9Mb3dlckNhc2UoKSwNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJVbnNoYWNrbGVzIGFsbCA8Yj4lMS10aWVyIHVwZ3JhZGVzPC9iPiwgbWFraW5nIHRoZW0gbW9yZSBwb3dlcmZ1bC48YnI+T25seSBhcHBsaWVzIHRvIHVuc2hhY2tsZWQgYnVpbGRpbmdzLiIsDQogICAgICAgICAgY2FwKGxvYygiW1RpZXJdIiArIHRpZXIubmFtZSwgMCwgdGllci5uYW1lKSkNCiAgICAgICAgKSArIChFTiA/ICI8cT4iICsgb2JqLnEgKyAiPC9xPiIgOiAiIiksDQogICAgICAgIE1hdGgucG93KG9iai50aWVyLCA3LjUpICogMTAwMDAwMDAsDQogICAgICAgIFsxMCwgdGllci5pY29uUm93XQ0KICAgICAgKTsNCiAgICAgIHVwZ3JhZGUucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgICB1cGdyYWRlLnBhcmVudHMgPSBbDQogICAgICAgIG9iai50aWVyID09IDENCiAgICAgICAgICA/ICJMYWJlbCBwcmludGVyIg0KICAgICAgICAgIDogR2FtZS5UaWVyc1tvYmoudGllciAtIDFdLnVuc2hhY2tsZVVwZ3JhZGUsDQogICAgICBdOw0KICAgICAgdGllci51bnNoYWNrbGVVcGdyYWRlID0gdXBncmFkZS5uYW1lOw0KICAgICAgdXBncmFkZS5wb3NYID0gNzUwIC0gTWF0aC5zaW4ob2JqLnRpZXIgKiAwLjMgKyAyLjMpICogNDAwOw0KICAgICAgdXBncmFkZS5wb3NZID0gMjAwICsgTWF0aC5jb3Mob2JqLnRpZXIgKiAwLjMgKyAyLjMpICogNDAwOw0KICAgICAgLyp1cGdyYWRlLnBhcmVudHM9W29iai50aWVyPT0xPydMYWJlbCBwcmludGVyJzpHYW1lLlRpZXJzW29iai50aWVyLTFdLnVuc2hhY2tsZVVwZ3JhZGVdOw0KCQkJdGllci51bnNoYWNrbGVVcGdyYWRlPXVwZ3JhZGUubmFtZTsNCgkJCXVwZ3JhZGUucG9zWD0tOTAwK01hdGguc2luKG9iai50aWVyKjAuMysyLjMpKjMwMDsNCgkJCXVwZ3JhZGUucG9zWT0tMTMwK01hdGguY29zKG9iai50aWVyKjAuMysyLjMpKjQwMDsqLw0KICAgICAgcmV0dXJuIHVwZ3JhZGU7DQogICAgfTsNCg0KICAgIC8vIlVuc2hhY2tsZWQgW3RpZXIgbmFtZV0iDQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiAxLA0KICAgICAgcTogIldoaWxlIHRoZSBhYnNlbmNlIG9mIGZsYXZvcmluZyBtYXkgc2VlbSB1bmRlcndoZWxtaW5nLCBpdCBhbGxvd3MgaW5uYXRlIGFyb21hcyB0byBiZSBleHByZXNzZWQgYXQgdGhlaXIgbW9zdCB1bmFkdWx0ZXJhdGVkLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiAyLA0KICAgICAgcTogIkJlcnJ5bGl1bSBpcyBhIHN5bnRoZXRpYyBnZW0gd2l0aCBhIHNpbXBsZSBzaGluZSB0byBpdC4gU3RpY2t5IHRvIHRoZSB0b3VjaCBhbmQgc3VzY2VwdGlibGUgdG8gbWVsdGluZyBpbiBoaWdoIGhlYXQsIGl0IGlzIGZyZXF1ZW50bHkgdXNlZCBpbiB0aGUgZm9vZCBpbmR1c3RyeSByYXRoZXIgdGhhbiBhcyBhZG9ybm1lbnQsIGFzIGl0cyBhdG9taWMgc3RydWN0dXJlIGltcGFydHMgaXQgYSB2YWd1ZWx5IGZydWl0eSBmbGF2b3IuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZVVwZ3JhZGVUaWVyKHsNCiAgICAgIHRpZXI6IDMsDQogICAgICBxOiAiQmx1ZWJlcnJ5bGl1bSBpcyBhIHJlZmluZW1lbnQgb2YgYmVycnlsaXVtLCBzaGFyaW5nIG5lYXJseSB0aGUgc2FtZSBjaGVtaWNhbCBtYWtldXAgc2F2ZSBmb3IgYSBmZXcgc3VwcGxlbWVudGFsIGVzdGVycy4gVGhlc2UgYWZmZWN0IGl0cyBmbGF2b3IgYXMgd2VsbCBhcyBpdHMgdmlzdWFsIHNwZWN0cnVtIHJlc29uYW5jZS4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogNCwNCiAgICAgIHE6ICJSYXcgY2hhbGNlZGhvbmV5IGlzIGZvdW5kIGluIGNvbXBsZXggbm9kdWxlcyB3aXRoaW4gdGhlIGZvc3NpbGl6ZWQgcmVtYWlucyBvZiBhbmNpZW50IGZvcmVzdHMuIE9uY2UgcHVyaWZpZWQsIGl0IGJlY29tZXMgYSBzZW1pLXZhbHVhYmxlIHN0b25lIHdpdGggYSBwbGVhc2FudCwgd2F4eSBzbWVsbC4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogNSwNCiAgICAgIHE6ICJCdXR0ZXJnb2xkIHdhcyBmYW1vdXNseSBpbnZlbnRlZCBieSB0aGUgY2hlZiBzb24gb2YgdHdvIG1vbGVjdWxhciBwaHlzaWNpc3RzLiBOZWl0aGVyIGNsb3NlbHkgcmVsYXRlZCB0byBidXR0ZXIgbm9yIHRvIGdvbGQsIHlldCBzaW1pbGFyIGluIG51dHJpdGlvbmFsIHZhbHVlLCB0aGlzIGdsaW1tZXJpbmcgc3Vic3RhbmNlIGNhbiBiZSBmcm96ZW4gYW5kIHByZXNlcnZlIGl0cyBoYXJkbmVzcyBhdCByb29tIHRlbXBlcmF0dXJlLCBvbmx5IHJlZ2FpbmluZyBpdHMgbWFsbGVhYmlsaXR5IHdoZW4gaGVhdGVkIHVwLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiA2LA0KICAgICAgcTogIlN1Z2FybXVjayByZWZlcnMgdG8gdGhlIGdyYWR1YWwgY3J1c3QgdGhhdCBzZWVtcyB0byBmb3JtIHNwb250YW5lb3VzbHkgaW4gdGhlIHZpY2luaXR5IG9mIGNhbmR5LW1ha2luZyBlcXVpcG1lbnQuIExvbmcgaWdub3JlZCBieSBjb25mZWN0aW9uZXJzLCBpdHMgaGFydmVzdGluZyBwcm9jZXNzIHdhcyBkaXNjb3ZlcmVkIHNpbXVsdGFuZW91c2x5IGluIG11bHRpcGxlIGNvdW50cmllcyBkdXJpbmcgYSBnbG9iYWwgYmVldCBzaG9ydGFnZS4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogNywNCiAgICAgIHE6ICJUaGUgc3RyaWtpbmcgdGFzdGUgb2YgamV0bWludCBtYWRlIGl0IHBvcHVsYXIgaW4gdGhlIG1hbnVmYWN0dXJlIG9mIHZhcmlvdXMga2luZHMgb2YgY29mZmVlLXNpZGUgdHJlYXRzIHVudGlsIHRoZSBhd2FyZW5lc3Mgb2YgaXRzIG1pbGQgcmFkaW9hY3Rpdml0eSBiZWNhbWUgd2lkZXNwcmVhZC4gVG9kYXksIGl0cyBtYWluIHVzZXMgYXJlIGluIGNvc21ldGljcywgb3dpbmcgdG8gdGhlIHJlZnJlc2hpbmcgc2Vuc2F0aW9uIGl0IHByb2R1Y2VzIG9uIGNvbnRhY3QuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZVVwZ3JhZGVUaWVyKHsNCiAgICAgIHRpZXI6IDgsDQogICAgICBxOiAiQ2hlcnJ5c2lsdmVyIGlzIGEgcGF0ZW50ZWQgYWxsb3kgd2l0aCBwZWN1bGlhciBhcm9tYXRpYyBwcm9wZXJ0aWVzOyBpdCBpcyBub24tZWRpYmxlLCBidXQgcHJvZHVjZXMgc3Ryb25nIGZsYXZvciByZXNwb25zZXMgd2hpbGUgbG9zaW5nIHZlcnkgbGl0dGxlIG9mIGl0cyBtYXNzIHdoZW4gbGlja2VkLCB0aG91Z2ggdGhpcyBhbHNvIGxlYXZlcyBhIGhhcm1sZXNzIHJlZCB0aW5nZSB1cG9uIHRoZSB0b25ndWUuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZVVwZ3JhZGVUaWVyKHsNCiAgICAgIHRpZXI6IDksDQogICAgICBxOiAiSGF6ZWxyYWxkIGlzIGEgZnJpYWJsZSBnZW1zdG9uZSB3aXRoIGNvbXBsZXggZ3JlZW4tYnJvd24gaW5uZXIgcmVmbGVjdGlvbnMuIEl0IGlzIGNvbnNpZGVyZWQgb3JuYW1lbnRhbCBpbiBzb21lIGN1bHR1cmVzOyBpbiBvdGhlcnMsIGl0IG1heSBiZSBjb25zdW1lZCBpbiBzbWFsbCBxdWFudGl0aWVzIGFzIGFuIHVwcGVyLXNjYWxlIHN3ZWV0LiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiAxMCwNCiAgICAgIHE6ICJXaGlsZSBtYW55IGdldCBpdCBtaXhlZCB1cCB3aXRoIHRoZSB0cmFkZW1hcmtlZCBzbmFjayBvZiB0aGUgc2FtZSBuYW1lIG1hZGUgcG9wdWxhciBmb2xsb3dpbmcgaXRzIGRpc2NvdmVyeSwgbW9vbmNhbmR5IGlzIGEgdmVyeSByZWFsIG1pbmVyYWwsIGZpcnN0IGlzb2xhdGVkIHdpdGhpbiB0aGUgc3BhY2UgZHVzdCB1bmRlcm5lYXRoIGFzdHJvbmF1dCBib290cy4gTGVmdCB0byBpdHMgb3duIGRldmljZXMgaW4gb3BlbiBhaXIsIGEgbW9vbmNhbmR5IGNyeXN0YWwgbmF0dXJhbGx5IHNwcmVhZHMgb3V0IGFuZCBncm93cy4iLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogMTEsDQogICAgICBxOiAiV2hlbiB5b3UgaGVhdCB1cCB0aGUgc2hpbW1lcmluZyBzeXJ1cCBvb3ppbmcgZnJvbSBtb29uY2FuZHkgdXNpbmcgYSBzcGVjaWFsIGNhcmFtZWxpemF0aW9uIHByb2Nlc3MsIHlvdSBnZXQgYXN0cm9mdWRnZS4gQXN0cm9mdWRnZSBpcyBkZWxpY2lvdXMgYW5kIHNhZmUgZm9yIGh1bWFub2lkIGNvbnN1bXB0aW9uIGluIGNlcnRhaW4gcXVhbnRpdGllcy4gQ29uc3VsdCB5b3VyIGxvY2FsIGZvb2Qgc2FmZXR5IGFnZW5jeSBmb3IgbW9yZSBkZXRhaWxzLiIsDQogICAgfSk7DQogICAgR2FtZS5OZXdVbnNoYWNrbGVVcGdyYWRlVGllcih7DQogICAgICB0aWVyOiAxMiwNCiAgICAgIHE6ICdNb2xlY3VsYXJseSByZWxhdGVkIHRvIGRhaXJ5LCBhbGFiYXNjcmVhbSBvY2N1cnMgbmF0dXJhbGx5IGF0IGhpZ2ggYWx0aXR1ZGVzLCBmb3JtaW5nIGluIHdpc3B5IGZpbGFtZW50cyB3aGljaCB3ZXJlIGxvbmcgaW5kaXN0aW5ndWlzaGFibGUgZnJvbSBjbG91ZHMuIEFuIGV4cGVuc2l2ZSBkZWxpZ2h0LCBpdCBpcyBhbHNvIGtub3duIGFzICJwaWxvdHNcJyBiYW5lIi4nLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VW5zaGFja2xlVXBncmFkZVRpZXIoew0KICAgICAgdGllcjogMTMsDQogICAgICBxOiAiSXJpZHl1bSBzaGFyZXMgbGl0dGxlIGluIGNvbW1vbiB3aXRoIGFueSBvdGhlciBtYXRlcmlhbCBrbm93biB0byBtYW5raW5kLiBSYXRoZXIgdGhhbiBzaW1wbHkgc21lbGxlZCwgaXQgY2FuIGJlIHRhc3RlZCBmcm9tIGEgZGlzdGFuY2UsIHRob3VnaCByZW1haW5pbmcgaW4gaXRzIHByZXNlbmNlIHRvbyBsb25nIGlzIGlsbC1hZHZpc2VkLiBTb21lIGhpZ2gtZW5kIHVuZGVyZ3JvdW5kIG1lZ2Fjb21wdXRlcnMgbWF5IGluY29ycG9yYXRlIGlyaWR5dW0gYXMgcGFydCBvZiB0aGVpciBlbGVjdHJvbmljIGNvbXBvbmVudHMuIiwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1Vuc2hhY2tsZVVwZ3JhZGVUaWVyKHsNCiAgICAgIHRpZXI6IDE0LA0KICAgICAgcTogIkdsdWNvc21pdW0gaXMgYSBnbG9zc3kgbWV0YWwgd2hvc2UgZmxhdm9yIG1hdHJpeCBpcyBib3VuZCB0byBpdHMgY3VycmVudCBzdWJqZWN0aXZlIGNocm9tYTsgaW4gb3RoZXIgd29yZHMsIGl0cyB0YXN0ZSBkZXBlbmRzIG9uIHdoaWNoIGNvbG9ycyBpdCdzIGN1cnJlbnRseSByZWZsZWN0aW5nLiBJbXByYWN0aWNhbCB0byBjb25zdW1lIHNhZmVseSwgaXRzIGluZHVzdHJpYWwgYXBwbGljYXRpb25zIHJhbmdlIGZyb20gdHJhbnNjb250aW5lbnRhbCBiYWxsaXN0aWNzIHRvIHBhaW50IHZhcm5pc2guIiwNCiAgICB9KTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiRGVsaWNhdGUgdG91Y2giLA0KICAgICAgbG9jKA0KICAgICAgICAiVGhlIDxiPnNoaW1tZXJpbmcgdmVpbDwvYj4gaXMgbW9yZSByZXNpc3RhbnQsIGFuZCBoYXMgYSA8Yj4lMSUgY2hhbmNlPC9iPiBub3QgdG8gYnJlYWsuIEl0IGFsc28gZ2l2ZXMgPGI+KyUyJTwvYj4gbW9yZSBDcFMuIiwNCiAgICAgICAgWzEwLCA1XQ0KICAgICAgKSArICI8cT5JdCBicmVha3Mgc28gZWFzaWx5LjwvcT4iLA0KICAgICAgOTk5OTk5OTk5OSAqIDE1LA0KICAgICAgWzIzLCAzNF0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiUmVpbmZvcmNlZCBtZW1icmFuZSJdOw0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU3RlYWRmYXN0IG11cm11ciIsDQogICAgICBsb2MoDQogICAgICAgICJUaGUgPGI+c2hpbW1lcmluZyB2ZWlsPC9iPiBpcyBtb3JlIHJlc2lzdGFudCwgYW5kIGhhcyBhIDxiPiUxJSBjaGFuY2U8L2I+IG5vdCB0byBicmVhay4gSXQgYWxzbyBnaXZlcyA8Yj4rJTIlPC9iPiBtb3JlIENwUy4iLA0KICAgICAgICBbMTAsIDVdDQogICAgICApICsgIjxxPkxlbmQgYW4gZWFyIGFuZCBsaXN0ZW4uPC9xPiIsDQogICAgICA5OTk5OTk5OTk5OTkgKiAxNSwNCiAgICAgIFsyMywgMzRdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbIkRlbGljYXRlIHRvdWNoIl07DQogICAgbmV3IEdhbWUuVXBncmFkZSgNCiAgICAgICJHbGl0dGVyaW5nIGVkZ2UiLA0KICAgICAgbG9jKA0KICAgICAgICAiVGhlIDxiPnNoaW1tZXJpbmcgdmVpbDwvYj4gaXMgbW9yZSByZXNpc3RhbnQsIGFuZCBoYXMgYSA8Yj4lMSUgY2hhbmNlPC9iPiBub3QgdG8gYnJlYWsuIEl0IGFsc28gZ2l2ZXMgPGI+KyUyJTwvYj4gbW9yZSBDcFMuIiwNCiAgICAgICAgWzEwLCA1XQ0KICAgICAgKSArICI8cT5KdXN0IHdpdGhpbiByZWFjaCwgeWV0IGF0IHdoYXQgY29zdD88L3E+IiwNCiAgICAgIDk5OTk5OTk5OTk5OTk5ICogMTUsDQogICAgICBbMjMsIDM0XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAicHJlc3RpZ2UiOw0KICAgIEdhbWUubGFzdC5wYXJlbnRzID0gWyJTdGVhZGZhc3QgbXVybXVyIl07DQoNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkRpc3Rpbmd1aXNoZWQgd2FsbHBhcGVyIGFzc29ydG1lbnQiLA0KICAgICAgKEVODQogICAgICAgID8gbG9jKCJDb250YWlucyBtb3JlIHdhbGxwYXBlcnMgZm9yIHlvdXIgYmFja2dyb3VuZCBzZWxlY3Rvci4iKQ0KICAgICAgICA6ICIiKSArDQogICAgICAgICI8cT5EbyB5b3UgZXZlciB0aGluayBhYm91dCB0aGUgcGh5c2ljYWxpdHkgb2YgdGhpcyBwbGFjZT8gQXJlIHlvdSBwdXR0aW5nIHVwIHRoZXNlIHdhbGxwYXBlcnMgaW4geW91ciBvZmZpY2Ugb3Igc29tZXRoaW5nPyBXaGVyZSBhcmUgeW91LCBhbnl3YXk/PC9xPiIsDQogICAgICAxMDAwMDAwMCwNCiAgICAgIFsyNywgNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInByZXN0aWdlIjsNCiAgICBHYW1lLmxhc3QucGFyZW50cyA9IFsiQmFzaWMgd2FsbHBhcGVyIGFzc29ydG1lbnQiXTsNCg0KICAgIG5ldyBHYW1lLlVwZ3JhZGUoDQogICAgICAiU291bmQgdGVzdCIsDQogICAgICBsb2MoDQogICAgICAgICJVbmxvY2tzIHRoZSA8Yj5qdWtlYm94PC9iPiwgd2hpY2ggYWxsb3dzIHlvdSB0byBwbGF5IHRocm91Z2ggZXZlcnkgc291bmQgZmlsZSBpbiB0aGUgZ2FtZS4iDQogICAgICApICsgIjxxPk9uZSB0d28sIG9uZSB0d28uIElzIHRoaXMgdGhpbmcgb24/PC9xPiIsDQogICAgICA5OTk5OTk5OTk5OSwNCiAgICAgIFszMSwgMTJdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJwcmVzdGlnZSI7DQogICAgR2FtZS5sYXN0LnBhcmVudHMgPSBbDQogICAgICAiRmFuY2lmdWwgZGFpcnkgc2VsZWN0aW9uIiwNCiAgICAgICJEaXN0aW5ndWlzaGVkIHdhbGxwYXBlciBhc3NvcnRtZW50IiwNCiAgICAgICJHb2xkZW4gY29va2llIGFsZXJ0IHNvdW5kIiwNCiAgICBdOw0KDQogICAgb3JkZXIgPSA0OTkwMDsNCiAgICBuZXcgR2FtZS5VcGdyYWRlKA0KICAgICAgIkp1a2Vib3giLA0KICAgICAgbG9jKCJQbGF5IHRocm91Z2ggdGhlIGdhbWUncyBzb3VuZCBmaWxlcyEiKSwNCiAgICAgIDAsDQogICAgICBbMzEsIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAidG9nZ2xlIjsNCiAgICBHYW1lLmp1a2Vib3ggPSB7DQogICAgICBzb3VuZHM6IFsNCiAgICAgICAgInRpY2siLA0KICAgICAgICAidGlja09mZiIsDQogICAgICAgICJzbWFsbFRpY2siLA0KICAgICAgICAidG9uZVRpY2siLA0KICAgICAgICAiY2xpY2tPbiIsDQogICAgICAgICJjbGlja09uMiIsDQogICAgICAgICJjbGlja09mZiIsDQogICAgICAgICJjbGlja09mZjIiLA0KICAgICAgICAicG9wMSIsDQogICAgICAgICJwb3AyIiwNCiAgICAgICAgInBvcDMiLA0KICAgICAgICAicHJlc3MiLA0KICAgICAgICAvLydzd2l0Y2gnLA0KICAgICAgICAiYnV5MSIsDQogICAgICAgICJidXkyIiwNCiAgICAgICAgImJ1eTMiLA0KICAgICAgICAiYnV5NCIsDQogICAgICAgICJzZWxsMSIsDQogICAgICAgICJzZWxsMiIsDQogICAgICAgICJzZWxsMyIsDQogICAgICAgICJzZWxsNCIsDQogICAgICAgICJidXlIZWF2ZW5seSIsDQogICAgICAgICJjbGljazEiLA0KICAgICAgICAiY2xpY2syIiwNCiAgICAgICAgImNsaWNrMyIsDQogICAgICAgICJjbGljazQiLA0KICAgICAgICAiY2xpY2s1IiwNCiAgICAgICAgImNsaWNrNiIsDQogICAgICAgICJjbGljazciLA0KICAgICAgICAiY2xpY2tiMSIsDQogICAgICAgICJjbGlja2IyIiwNCiAgICAgICAgImNsaWNrYjMiLA0KICAgICAgICAiY2xpY2tiNCIsDQogICAgICAgICJjbGlja2I1IiwNCiAgICAgICAgImNsaWNrYjYiLA0KICAgICAgICAiY2xpY2tiNyIsDQogICAgICAgICJjaGFyZ2luZyIsDQogICAgICAgICJ0aHVkIiwNCiAgICAgICAgLy8nY29va2llQnJlYWsnLA0KICAgICAgICAiY3ltYmFsUmV2IiwNCiAgICAgICAgLy8nY3ltYmFsQ3Jhc2gnLA0KICAgICAgICAic21hbGxDeW1iYWxDcmFzaCIsDQogICAgICAgICJjaG9pciIsDQogICAgICAgICJjaGltZSIsDQogICAgICAgICJzaGltbWVyQ2xpY2siLA0KICAgICAgICAiamluZ2xlIiwNCiAgICAgICAgImppbmdsZUNsaWNrIiwNCiAgICAgICAgImZvcnR1bmUiLA0KICAgICAgICAidGlsbDEiLA0KICAgICAgICAidGlsbDIiLA0KICAgICAgICAidGlsbDMiLA0KICAgICAgICAidGlsbGIxIiwNCiAgICAgICAgInRpbGxiMiIsDQogICAgICAgICJ0aWxsYjMiLA0KICAgICAgICAiaGFydmVzdDEiLA0KICAgICAgICAiaGFydmVzdDIiLA0KICAgICAgICAiaGFydmVzdDMiLA0KICAgICAgICAiZnJlZXplR2FyZGVuIiwNCiAgICAgICAgImdyb3dsIiwNCiAgICAgICAgInNuYXJsIiwNCiAgICAgICAgInBhZ2UiLA0KICAgICAgICAic3dvb3NoSW4iLA0KICAgICAgICAic3dvb3NoT3V0IiwNCiAgICAgICAgInNwZWxsIiwNCiAgICAgICAgInNwZWxsRmFpbCIsDQogICAgICAgICJzcGlyaXQiLA0KICAgICAgICAic3F1aXNoMSIsDQogICAgICAgICJzcXVpc2gyIiwNCiAgICAgICAgInNxdWlzaDMiLA0KICAgICAgICAic3F1aXNoNCIsDQogICAgICAgICJzcXVlYWsxIiwNCiAgICAgICAgInNxdWVhazIiLA0KICAgICAgICAic3F1ZWFrMyIsDQogICAgICAgICJzcXVlYWs0IiwNCiAgICAgICAgImNhc2hJbiIsDQogICAgICAgICJjYXNoSW4yIiwNCiAgICAgICAgImNhc2hPdXQiLA0KICAgICAgICAidXBncmFkZSIsDQogICAgICAgIC8vJ2xldmVsUHJlc3RpZ2UnLA0KICAgICAgXSwNCiAgICAgIHRyYWNrczogW10sIC8vcG9wdWxhdGVkIGV4dGVybmFsbHkNCiAgICAgIG9uU291bmQ6IDAsDQogICAgICBvblRyYWNrOiAwLA0KICAgICAgdHJhY2tMb29wZWQ6IHRydWUsDQogICAgICB0cmFja0F1dG86IHRydWUsDQogICAgICB0cmFja1NodWZmbGU6IGZhbHNlLA0KICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5qdWtlYm94Ow0KICAgICAgICBtZS5vblNvdW5kID0gMDsNCiAgICAgICAgbWUub25UcmFjayA9IDA7DQogICAgICAgIG1lLnRyYWNrTG9vcGVkID0gdHJ1ZTsNCiAgICAgICAgbWUudHJhY2tBdXRvID0gdHJ1ZTsNCiAgICAgICAgbWUudHJhY2tTaHVmZmxlID0gZmFsc2U7DQogICAgICB9LA0KICAgICAgc2V0U291bmQ6IGZ1bmN0aW9uIChpZCkgew0KICAgICAgICBpZiAoaWQgPj0gR2FtZS5qdWtlYm94LnNvdW5kcy5sZW5ndGgpIGlkID0gMDsNCiAgICAgICAgZWxzZSBpZiAoaWQgPCAwKSBpZCA9IEdhbWUuanVrZWJveC5zb3VuZHMubGVuZ3RoIC0gMTsNCiAgICAgICAgR2FtZS5qdWtlYm94Lm9uU291bmQgPSBpZDsNCiAgICAgICAgaWYgKGwoImp1a2Vib3hPblNvdW5kIikpIHsNCiAgICAgICAgICB0cmlnZ2VyQW5pbShsKCJqdWtlYm94UGxheWVyIiksICJwdWNrZXIiKTsNCiAgICAgICAgICBsKCJqdWtlYm94T25Tb3VuZCIpLmlubmVySFRNTCA9DQogICAgICAgICAgICAiJmJ1bGw7ICIgKyBHYW1lLmp1a2Vib3guc291bmRzW0dhbWUuanVrZWJveC5vblNvdW5kXSArICIgJmJ1bGw7IjsNCiAgICAgICAgICBsKCJqdWtlYm94T25Tb3VuZE4iKS5pbm5lckhUTUwgPQ0KICAgICAgICAgICAgR2FtZS5qdWtlYm94Lm9uU291bmQgKyAxICsgIi8iICsgR2FtZS5qdWtlYm94LnNvdW5kcy5sZW5ndGg7DQogICAgICAgICAgbCgianVrZWJveFNvdW5kU2VsZWN0IikudmFsdWUgPSBHYW1lLmp1a2Vib3gub25Tb3VuZDsNCiAgICAgICAgfQ0KICAgICAgICBQbGF5U291bmQoDQogICAgICAgICAgInNuZC8iICsgR2FtZS5qdWtlYm94LnNvdW5kc1tHYW1lLmp1a2Vib3gub25Tb3VuZF0gKyAiLm1wMyIsDQogICAgICAgICAgMQ0KICAgICAgICApOw0KICAgICAgfSwNCiAgICAgIHNldFRyYWNrOiBmdW5jdGlvbiAoaWQsIGRvbnRQbGF5KSB7DQogICAgICAgIGlmIChpZCA+PSBHYW1lLmp1a2Vib3gudHJhY2tzLmxlbmd0aCkgaWQgPSAwOw0KICAgICAgICBlbHNlIGlmIChpZCA8IDApIGlkID0gR2FtZS5qdWtlYm94LnRyYWNrcy5sZW5ndGggLSAxOw0KICAgICAgICBHYW1lLmp1a2Vib3gub25UcmFjayA9IGlkOw0KICAgICAgICB2YXIgZGF0YSA9DQogICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdWRpbzsNCiAgICAgICAgaWYgKGwoImp1a2Vib3hPblRyYWNrIikpIHsNCiAgICAgICAgICB0cmlnZ2VyQW5pbShsKCJqdWtlYm94UGxheWVyIiksICJwdWNrZXIiKTsNCiAgICAgICAgICBsKCJqdWtlYm94T25UcmFjayIpLmlubmVySFRNTCA9DQogICAgICAgICAgICAiJmJ1bGw7ICIgKw0KICAgICAgICAgICAgY2FwKEdhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdKSArDQogICAgICAgICAgICAiICZidWxsOyI7DQogICAgICAgICAgbCgianVrZWJveE9uVHJhY2tBdXRob3IiKS5pbm5lckhUTUwgPQ0KICAgICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdXRob3I7DQogICAgICAgICAgbCgianVrZWJveFRyYWNrU2VsZWN0IikudmFsdWUgPSBHYW1lLmp1a2Vib3gub25UcmFjazsNCiAgICAgICAgICBpZiAoZGF0YSkgew0KICAgICAgICAgICAgdmFyIGR1ciA9IGRhdGEuZHVyYXRpb24gKyAxOw0KICAgICAgICAgICAgbCgianVrZWJveE11c2ljVG90YWxUaW1lIikuaW5uZXJIVE1MID0NCiAgICAgICAgICAgICAgTWF0aC5mbG9vcihkdXIgLyA2MCkgKw0KICAgICAgICAgICAgICAiOiIgKw0KICAgICAgICAgICAgICAoTWF0aC5mbG9vcihkdXIgJSA2MCkgPCAxMCA/ICIwIiA6ICIiKSArDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoZHVyICUgNjApOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmICghZG9udFBsYXkgJiYgTXVzaWMpIHsNCiAgICAgICAgICAgIEdhbWUuanVrZWJveC50cmFja0F1dG8gPSBmYWxzZTsNCiAgICAgICAgICAgIGwoImp1a2Vib3hNdXNpY0F1dG8iKS5jbGFzc0xpc3QuYWRkKCJvZmYiKTsNCiAgICAgICAgICAgIE11c2ljLnBsYXlUcmFjayhHYW1lLmp1a2Vib3gudHJhY2tzW0dhbWUuanVrZWJveC5vblRyYWNrXSk7DQogICAgICAgICAgICBNdXNpYy5zZXRGaWx0ZXIoMSk7DQogICAgICAgICAgICBNdXNpYy5sb29wKEdhbWUuanVrZWJveC50cmFja0xvb3BlZCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChkYXRhLnBhdXNlZCkgbCgianVrZWJveE11c2ljUGxheSIpLmlubmVySFRNTCA9IGxvYygiUGxheSIpOw0KICAgICAgICAgIGVsc2UgbCgianVrZWJveE11c2ljUGxheSIpLmlubmVySFRNTCA9IGxvYygiU3RvcCIpOw0KICAgICAgICAgIEdhbWUuanVrZWJveC51cGRhdGVNdXNpY0N1cnJlbnRUaW1lKCk7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBwcmVzc1BsYXlNdXNpYzogZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoIU11c2ljKSByZXR1cm4gZmFsc2U7DQogICAgICAgIHZhciBkYXRhID0NCiAgICAgICAgICBNdXNpYy50cmFja3NbR2FtZS5qdWtlYm94LnRyYWNrc1tHYW1lLmp1a2Vib3gub25UcmFja11dLmF1ZGlvOw0KICAgICAgICBpZiAoIWRhdGEucGF1c2VkKSB7DQogICAgICAgICAgTXVzaWMucGF1c2UoKTsNCiAgICAgICAgICBsKCJqdWtlYm94TXVzaWNQbGF5IikuaW5uZXJIVE1MID0gbG9jKCJQbGF5Iik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgTXVzaWMudW5wYXVzZSgpOw0KICAgICAgICAgIGwoImp1a2Vib3hNdXNpY1BsYXkiKS5pbm5lckhUTUwgPSBsb2MoIlN0b3AiKTsNCiAgICAgICAgfQ0KICAgICAgICBHYW1lLmp1a2Vib3gudXBkYXRlTXVzaWNDdXJyZW50VGltZSgpOw0KICAgICAgfSwNCiAgICAgIHByZXNzTG9vcE11c2ljOiBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuanVrZWJveC50cmFja0xvb3BlZCA9ICFHYW1lLmp1a2Vib3gudHJhY2tMb29wZWQ7DQogICAgICAgIGlmICghTXVzaWMpIHJldHVybiBmYWxzZTsNCiAgICAgICAgaWYgKEdhbWUuanVrZWJveC50cmFja0xvb3BlZCkgew0KICAgICAgICAgIE11c2ljLmxvb3AodHJ1ZSk7DQogICAgICAgICAgbCgianVrZWJveE11c2ljTG9vcCIpLmNsYXNzTGlzdC5yZW1vdmUoIm9mZiIpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIE11c2ljLmxvb3AoZmFsc2UpOw0KICAgICAgICAgIGwoImp1a2Vib3hNdXNpY0xvb3AiKS5jbGFzc0xpc3QuYWRkKCJvZmYiKTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHByZXNzTXVzaWNBdXRvOiBmdW5jdGlvbiAoKSB7DQogICAgICAgIEdhbWUuanVrZWJveC50cmFja0F1dG8gPSAhR2FtZS5qdWtlYm94LnRyYWNrQXV0bzsNCiAgICAgICAgaWYgKCFNdXNpYykgcmV0dXJuIGZhbHNlOw0KICAgICAgICBpZiAoR2FtZS5qdWtlYm94LnRyYWNrQXV0bykgew0KICAgICAgICAgIE11c2ljLmN1ZSgicGxheSIpOw0KICAgICAgICAgIGwoImp1a2Vib3hNdXNpY0F1dG8iKS5jbGFzc0xpc3QucmVtb3ZlKCJvZmYiKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvKkdhbWUuanVrZWJveC5zZXRUcmFjayhHYW1lLmp1a2Vib3gub25UcmFjayk7Ki8gbCgNCiAgICAgICAgICAgICJqdWtlYm94TXVzaWNBdXRvIg0KICAgICAgICAgICkuY2xhc3NMaXN0LmFkZCgib2ZmIik7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBwcmVzc011c2ljU2h1ZmZsZTogZnVuY3Rpb24gKCkgew0KICAgICAgICBHYW1lLmp1a2Vib3gudHJhY2tTaHVmZmxlID0gIUdhbWUuanVrZWJveC50cmFja1NodWZmbGU7DQogICAgICB9LA0KICAgICAgdXBkYXRlTXVzaWNDdXJyZW50VGltZTogZnVuY3Rpb24gKG5vTG9vcCkgew0KICAgICAgICBpZiAoIWwoImp1a2Vib3hNdXNpY1RpbWUiKSkgcmV0dXJuIGZhbHNlOw0KICAgICAgICB2YXIgZGF0YSA9DQogICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdWRpbzsNCiAgICAgICAgbCgianVrZWJveE11c2ljUGxheSIpLmlubmVySFRNTCA9IGRhdGEucGF1c2VkDQogICAgICAgICAgPyBsb2MoIlBsYXkiKQ0KICAgICAgICAgIDogbG9jKCJQYXVzZSIpOw0KICAgICAgICBsKCJqdWtlYm94TXVzaWNUaW1lIikuaW5uZXJIVE1MID0NCiAgICAgICAgICBNYXRoLmZsb29yKGRhdGEuY3VycmVudFRpbWUgLyA2MCkgKw0KICAgICAgICAgICI6IiArDQogICAgICAgICAgKE1hdGguZmxvb3IoZGF0YS5jdXJyZW50VGltZSAlIDYwKSA8IDEwID8gIjAiIDogIiIpICsNCiAgICAgICAgICBNYXRoLmZsb29yKGRhdGEuY3VycmVudFRpbWUgJSA2MCk7DQogICAgICAgIGwoImp1a2Vib3hNdXNpY1NjcnViIikudmFsdWUgPQ0KICAgICAgICAgIChkYXRhLmN1cnJlbnRUaW1lIC8gZGF0YS5kdXJhdGlvbikgKiAxMDAwOw0KICAgICAgICBsKCJqdWtlYm94TXVzaWNTY3J1YkVsYXBzZWQiKS5zdHlsZS53aWR0aCA9DQogICAgICAgICAgTWF0aC5tYXgoMCwgKGRhdGEuY3VycmVudFRpbWUgLyBkYXRhLmR1cmF0aW9uKSAqIDI4OCAtIDQpICsgInB4IjsNCiAgICAgICAgaWYgKCFub0xvb3ApIHNldFRpbWVvdXQoR2FtZS5qdWtlYm94LnVwZGF0ZU11c2ljQ3VycmVudFRpbWUsIDEwMDAgLyAyKTsNCiAgICAgIH0sDQogICAgICBtdXNpY1NjcnViOiBmdW5jdGlvbiAodGltZSkgew0KICAgICAgICB2YXIgZGF0YSA9DQogICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdWRpbzsNCiAgICAgICAgZGF0YS5jdXJyZW50VGltZSA9ICh0aW1lIC8gMTAwMCkgKiBkYXRhLmR1cmF0aW9uOw0KICAgICAgICBHYW1lLmp1a2Vib3gudXBkYXRlTXVzaWNDdXJyZW50VGltZSgpOw0KICAgICAgfSwNCiAgICB9Ow0KICAgIGlmIChNdXNpYykgew0KICAgICAgZm9yICh2YXIgaSBpbiBNdXNpYy50cmFja3MpIHsNCiAgICAgICAgR2FtZS5qdWtlYm94LnRyYWNrcy5wdXNoKE11c2ljLnRyYWNrc1tpXS5uYW1lKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBHYW1lLmxhc3QuY2hvaWNlc0Z1bmN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJ1c2VzSWNvbiIgc3R5bGU9Im1hcmdpbjphdXRvO3dpZHRoOjQ4cHg7aGVpZ2h0OjQ4cHg7YmFja2dyb3VuZC1wb3NpdGlvbjonICsNCiAgICAgICAgLTMxICogNDggKw0KICAgICAgICAicHggIiArDQogICAgICAgIC0xMiAqIDQ4ICsNCiAgICAgICAgJ3B4OyIgaWQ9Imp1a2Vib3hQbGF5ZXIiPjwvZGl2Pic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMXB4O29wYWNpdHk6MC43O21hcmdpbi1ib3R0b206LTRweDsiIGlkPSJqdWtlYm94T25Tb3VuZE4iPicgKw0KICAgICAgICAoR2FtZS5qdWtlYm94Lm9uU291bmQgKyAxKSArDQogICAgICAgICIvIiArDQogICAgICAgIEdhbWUuanVrZWJveC5zb3VuZHMubGVuZ3RoICsNCiAgICAgICAgIjwvZGl2PiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxkaXYgY2xhc3M9ImZhbmN5VGV4dCIgc3R5bGU9ImZvbnQtdmFyaWFudDpub3JtYWw7bGV0dGVyLXNwYWNpbmc6MnB4O3BhZGRpbmc6OHB4O2ZvbnQtc2l6ZToxOHB4OyIgaWQ9Imp1a2Vib3hPblNvdW5kIj4mYnVsbDsgJyArDQogICAgICAgIEdhbWUuanVrZWJveC5zb3VuZHNbR2FtZS5qdWtlYm94Lm9uU291bmRdICsNCiAgICAgICAgIiAmYnVsbDs8L2Rpdj4iOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO3RleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIGZhbmN5VGV4dCIgb25jbGljaz0iR2FtZS5qdWtlYm94LnNldFNvdW5kKEdhbWUuanVrZWJveC5vblNvdW5kLTEpOyI+JiN4YWI7PC9hPicgKw0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBmYW5jeVRleHQiIG9uY2xpY2s9IkdhbWUuanVrZWJveC5zZXRTb3VuZChHYW1lLmp1a2Vib3gub25Tb3VuZCk7Ij4nICsNCiAgICAgICAgbG9jKCJQbGF5IikgKw0KICAgICAgICAiPC9hPiIgKw0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBmYW5jeVRleHQiIG9uY2xpY2s9IkdhbWUuanVrZWJveC5zZXRTb3VuZChHYW1lLmp1a2Vib3gub25Tb3VuZCsxKTsiPiYjeGJiOzwvYT4nICsNCiAgICAgICAgIjwvZGl2PiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxzZWxlY3QgaWQ9Imp1a2Vib3hTb3VuZFNlbGVjdCIgb25jaGFuZ2U9IkdhbWUuanVrZWJveC5zZXRTb3VuZChwYXJzZUludCh0aGlzLnZhbHVlKSk7Ij4nOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLmp1a2Vib3guc291bmRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8b3B0aW9uIHZhbHVlPSInICsNCiAgICAgICAgICBpICsNCiAgICAgICAgICAnIicgKw0KICAgICAgICAgIChpID09IEdhbWUuanVrZWJveC5vblNvdW5kID8gJyBzZWxlY3RlZD0idHJ1ZSInIDogIiIpICsNCiAgICAgICAgICAiPiIgKw0KICAgICAgICAgIEdhbWUuanVrZWJveC5zb3VuZHNbaV0gKw0KICAgICAgICAgICI8L29wdGlvbj4iOw0KICAgICAgfQ0KICAgICAgc3RyICs9DQogICAgICAgICc8L3NlbGVjdD48YSBjbGFzcz0ib3B0aW9uIiBvbmNsaWNrPSJHYW1lLmp1a2Vib3guc2V0U291bmQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKkdhbWUuanVrZWJveC5zb3VuZHMubGVuZ3RoKSk7Ij4nICsNCiAgICAgICAgbG9jKCJSYW5kb20iKSArDQogICAgICAgICI8L2E+IjsNCiAgICAgIGlmIChBcHApIHsNCiAgICAgICAgdmFyIGRhdGEgPSBNdXNpYw0KICAgICAgICAgID8gTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdWRpbw0KICAgICAgICAgIDogMDsNCiAgICAgICAgdmFyIGR1ciA9IGRhdGEgPyBkYXRhLmR1cmF0aW9uICsgMSA6IDA7DQogICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgY2xhc3M9ImZhbmN5VGV4dCIgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljO2xldHRlci1zcGFjaW5nOjJweDtwYWRkaW5nOjhweDtmb250LXNpemU6MThweDsiIGlkPSJqdWtlYm94T25UcmFjayI+JmJ1bGw7ICcgKw0KICAgICAgICAgIGNhcChHYW1lLmp1a2Vib3gudHJhY2tzW0dhbWUuanVrZWJveC5vblRyYWNrXSkgKw0KICAgICAgICAgICIgJmJ1bGw7PC9kaXY+IjsNCiAgICAgICAgc3RyICs9DQogICAgICAgICAgJzxkaXYgaWQ9Imp1a2Vib3hPblRyYWNrQXV0aG9yIiBzdHlsZT0iZm9udC1zaXplOjExcHg7b3BhY2l0eTowLjc7bWFyZ2luLXRvcDotNHB4OyI+JyArDQogICAgICAgICAgTXVzaWMudHJhY2tzW0dhbWUuanVrZWJveC50cmFja3NbR2FtZS5qdWtlYm94Lm9uVHJhY2tdXS5hdXRob3IgKw0KICAgICAgICAgICI8L2Rpdj4iOw0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGRpdiBzdHlsZT0ibWFyZ2luOjRweCAwcHg7Zm9udC1zaXplOjExcHg7Ij4nICsNCiAgICAgICAgICAnPHNwYW4gaWQ9Imp1a2Vib3hNdXNpY1RpbWUiPicgKw0KICAgICAgICAgIChkYXRhDQogICAgICAgICAgICA/IE1hdGguZmxvb3IoZGF0YS5jdXJyZW50VGltZSAvIDYwKSArDQogICAgICAgICAgICAgICI6IiArDQogICAgICAgICAgICAgIChNYXRoLmZsb29yKGRhdGEuY3VycmVudFRpbWUgJSA2MCkgPCAxMCA/ICIwIiA6ICIiKSArDQogICAgICAgICAgICAgIE1hdGguZmxvb3IoZGF0YS5jdXJyZW50VGltZSAlIDYwKQ0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L3NwYW4+IHwgIiArDQogICAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gZmFuY3lUZXh0IiBpZD0ianVrZWJveE11c2ljUGxheSIgb25jbGljaz0iR2FtZS5qdWtlYm94LnByZXNzUGxheU11c2ljKCk7Ij4nICsNCiAgICAgICAgICAoZGF0YSAmJiBkYXRhLnBhdXNlZCA/IGxvYygiUGxheSIpIDogbG9jKCJQYXVzZSIpKSArDQogICAgICAgICAgIjwvYT4iICsNCiAgICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBmYW5jeVRleHQgcHJlZkJ1dHRvbicgKw0KICAgICAgICAgIChHYW1lLmp1a2Vib3gudHJhY2tMb29wZWQgPyAiIiA6ICIgb2ZmIikgKw0KICAgICAgICAgICciIGlkPSJqdWtlYm94TXVzaWNMb29wIiBvbmNsaWNrPSJHYW1lLmp1a2Vib3gucHJlc3NMb29wTXVzaWMoKTsiPicgKw0KICAgICAgICAgIGxvYygiTG9vcCIpICsNCiAgICAgICAgICAiPC9hPiIgKw0KICAgICAgICAgICd8IDxzcGFuIGlkPSJqdWtlYm94TXVzaWNUb3RhbFRpbWUiPicgKw0KICAgICAgICAgIChkYXRhDQogICAgICAgICAgICA/IE1hdGguZmxvb3IoZHVyIC8gNjApICsNCiAgICAgICAgICAgICAgIjoiICsNCiAgICAgICAgICAgICAgKE1hdGguZmxvb3IoZHVyICUgNjApIDwgMTAgPyAiMCIgOiAiIikgKw0KICAgICAgICAgICAgICBNYXRoLmZsb29yKGR1ciAlIDYwKQ0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICI8L3NwYW4+IiArDQogICAgICAgICAgIjwvZGl2PiI7DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTsiPjxpbnB1dCBjbGFzcz0ic2xpZGVyIiBzdHlsZT0iY2xlYXI6Ym90aDsiIHR5cGU9InJhbmdlIiBtaW49IjAiIG1heD0iMTAwMCIgc3RlcD0iMSIgdmFsdWU9IicgKw0KICAgICAgICAgIChkYXRhID8gKGRhdGEuY3VycmVudFRpbWUgLyBkYXRhLmR1cmF0aW9uKSAqIDEwMDAgOiAwKSArDQogICAgICAgICAgJyIgb25jaGFuZ2U9IkdhbWUuanVrZWJveC5tdXNpY1NjcnViKHRoaXMudmFsdWUpOyIgb25pbnB1dD0iR2FtZS5qdWtlYm94Lm11c2ljU2NydWIodGhpcy52YWx1ZSk7IiBpZD0ianVrZWJveE11c2ljU2NydWIiLz48ZGl2IGlkPSJqdWtlYm94TXVzaWNTY3J1YkVsYXBzZWQiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjNweDt0b3A6M3B4O2hlaWdodDo2cHg7d2lkdGg6MHB4O2JhY2tncm91bmQ6I2NjYztib3gtc2hhZG93OjFweCAxcHggMXB4ICM1NTUgaW5zZXQsMHB4IC0xcHggMHB4ICNmZmYgaW5zZXQ7Ym9yZGVyLXJhZGl1czoycHg7ei1pbmRleDoxMDtwb2ludGVyLWV2ZW50czpub25lOyI+PC9kaXY+PC9kaXY+JzsNCg0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBmYW5jeVRleHQgcHJlZkJ1dHRvbicgKw0KICAgICAgICAgIChHYW1lLmp1a2Vib3gudHJhY2tBdXRvID8gIiIgOiAiIG9mZiIpICsNCiAgICAgICAgICAnIiBvbmNsaWNrPSJHYW1lLmp1a2Vib3gucHJlc3NNdXNpY0F1dG8oKTsiIGlkPSJqdWtlYm94TXVzaWNBdXRvIj4nICsNCiAgICAgICAgICBsb2MoIkF1dG8iKSArDQogICAgICAgICAgJzwvYT48c2VsZWN0IGlkPSJqdWtlYm94VHJhY2tTZWxlY3QiIG9uY2hhbmdlPSJHYW1lLmp1a2Vib3guc2V0VHJhY2socGFyc2VJbnQodGhpcy52YWx1ZSkpOyI+JzsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLmp1a2Vib3gudHJhY2tzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT0iJyArDQogICAgICAgICAgICBpICsNCiAgICAgICAgICAgICciJyArDQogICAgICAgICAgICAoaSA9PSBHYW1lLmp1a2Vib3gub25UcmFjayA/ICcgc2VsZWN0ZWQ9InRydWUiJyA6ICIiKSArDQogICAgICAgICAgICAiPiIgKw0KICAgICAgICAgICAgR2FtZS5qdWtlYm94LnRyYWNrc1tpXSArDQogICAgICAgICAgICAiPC9vcHRpb24+IjsNCiAgICAgICAgfQ0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPC9zZWxlY3Q+PCEtLTxhIGNsYXNzPSJvcHRpb24gZmFuY3lUZXh0IHByZWZCdXR0b24nICsNCiAgICAgICAgICAoR2FtZS5qdWtlYm94LnRyYWNrQXV0byA/ICIiIDogIiBvZmYiKSArDQogICAgICAgICAgJyIgb25jbGljaz0iR2FtZS5qdWtlYm94LnByZXNzTXVzaWNTaHVmZmxlKCk7Ij4nICsNCiAgICAgICAgICBsb2MoIlNodWZmbGUiKSArDQogICAgICAgICAgIjwvYT4tLT4iOw0KDQogICAgICAgIHNldFRpbWVvdXQoR2FtZS5qdWtlYm94LnVwZGF0ZU11c2ljQ3VycmVudFRpbWUsIDUwMCk7DQogICAgICB9DQogICAgICByZXR1cm4gc3RyOw0KICAgIH07DQoNCiAgICBvcmRlciA9IDEwMDIwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRGFsZ29uYSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJBIHBvcHVsYXIgS29yZWFuIGNhbmR5LWxpa2UgdHJlYXQuIE9uZSBvZiB0aGUgdHdpc3RlZCBnYW1lcyBwZW9wbGUgcGxheSB3aXRoIHRoZXNlIGlzIHRvIGNhcmVmdWxseSBleHRyYWN0IHRoZSBzaGFwZSBpbiB0aGUgbWlkZGxlLCB3aGljaCBtYXkgZW50aXRsZSBvbmUgdG8gYW5vdGhlciBmcmVlIGRhbGdvbmEuIFNraWxsZWQgcGxheWVycyBtYXkgcGVyZm9ybSB0aGlzIG92ZXIgYW5kIG92ZXIgdW50aWwgYmFua3J1cHRpbmcgdGhlIHNuYWNrIHZlbmRvci4iLA0KICAgICAgaWNvbjogWzI2LCAzNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0MyksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTcGljeSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJDb250YWluaW5nIGNob2NvbGF0ZSBjaGlwcyBwcmVwYXJlZCB3aXRoIGhvdCBwZXBwZXJzLCBqdXN0IGxpa2UgdGhlIEF6dGVjcyB1c2VkIHRvIG1ha2UuIFRoZXNlIGNvb2tpZXMgYXJlIG9uIHRoZSBhbmdyeSBzaWRlLiIsDQogICAgICBpY29uOiBbMjcsIDM0XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDQ0KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlNtaWxlIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkFzIGV5ZXMgYXJlIHRoZSB3aW5kb3dzIHRvIHRoZSBzb3VsLCBzbyB0b28gYXJlIHRoZXNlIGNvb2tpZXMnIGZhY2lhbCBmZWF0dXJlcyBhIGdhcGluZyBvcGVuaW5nIHVudG8gdGhlaXIgY2hvY29sYXRleSBpbm5hcmRzLiBJcyBpdCBoYXBwaW5lc3MgdGhleSBmZWVsPyBPciBzb21ldGhpbmcgbGVzcyBodW1hbj8iLA0KICAgICAgaWNvbjogWzI4LCAzNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0NSksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJLb2xhY2h5IGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkFkYXB0ZWQgZnJvbSBhIHR5cGUgb2YgQ2VudHJhbCBFdXJvcGVhbiBwYXN0cnk7IG5lYXRseSBmb2xkZWQgdG8gaG9sZCBhIHNwb29uZnVsIG9mIGRlbGljaW91cyBqYW0sIGFzIGEgYmFzaGZ1bCBsaXR0bGUgZ2lmdCBmb3IgeW91ciBtb3V0aC4iLA0KICAgICAgaWNvbjogWzI5LCAzNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg0NiksDQogICAgfSk7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJHb21tYSBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJTdXJpbmFtZXNlIGNvcm5mbG91ciBjb29raWVzIHdpdGggc3ByaW5rbGVzIG9uIHRvcC4gVGhlIHVzYWdlIG9mIGNvcm4gaW1wYXJ0cyB0aGVtIGEgaGludCBvZiBjaGV3eSBwaXp6YXp6IC0gd2hpY2ggeW91IHdvdWxkbid0IGdldCB3aXRoIHdoZWF0LCBhIGZhbW91c2x5IHN0dWNrLXVwIGdyYWluLiIsDQogICAgICBpY29uOiBbMzAsIDM0XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDQ3KSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIlZlZ2FuIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIkEgdmVnYW4gcmlmZiBvbiB0aGUgY2xhc3NpYyBjaG9jb2xhdGUgY2hpcCBjb29raWUgcmVjaXBlIHdpdGggYSBjb3VwbGUgc3Vic3RpdHV0aW9uczogdGhlIGJ1dHRlciBpcyBub3cgY29jb251dCBvaWwsIHRoZSBlZ2dzIGFyZSBjb3Juc3RhcmNoLCBhbmQgdGhlIHN1Y2tsaW5nIHBpZyB3YXMgY2xldmVybHkgcmVwbGFjZWQgd2l0aCB3aGVhdCBnbHV0ZW4uIFlvdSBjYW4gaGFyZGx5IHRlbGwuIiwNCiAgICAgIGljb246IFsyNCwgMzVdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDgpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiQ295b3RhcyIsDQogICAgICBkZXNjOiAiQSB3aWRlLCBkZWxpY2lvdXMgY29va2llIGZyb20gTWV4aWNvLCB1c3VhbGx5IGZpbGxlZCB3aXRoIHN0aWNreSBicm93biBzdWdhci4gTm90IHRvIGJlIGNvbmZ1c2VkIHdpdGggY295b3RhcywgdGhlIHJlc3VsdCBvZiB0aGUgY3Jvc3NicmVlZGluZyBiZXR3ZWVuIGEgTm9ydGggQW1lcmljYW4gY2FuaW5lIGFuZCBhIEphcGFuZXNlIGNhciBtYW51ZmFjdHVyZXIuIiwNCiAgICAgIGljb246IFsyMSwgMzVdLA0KICAgICAgcG93ZXI6IDUsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNDkpLA0KICAgIH0pOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRnJvc3RlZCBzdWdhciBjb29raWVzIiwNCiAgICAgIGRlc2M6ICJNYXkgYmUgbW9yZSBzdHlsZSB0aGFuIHN1YnN0YW5jZSwgZGVwZW5kaW5nIG9uIHRoZSByZWNpcGUuIE5vdGhpbmcgdGhhdCBoaWRlcyBpdHNlbGYgdW5kZXIgdGhpcyBtdWNoIGZyb3N0aW5nIHNob3VsZCBiZSB0cnVzdGVkLiIsDQogICAgICBpY29uOiBbMjIsIDM1XSwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDUwKSwNCiAgICB9KTsNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIk1hcnNobWFsbG93IHNhbmR3aWNoIGNvb2tpZXMiLA0KICAgICAgZGVzYzogIlMnbW9yZXMnIG1vcmUgY2l2aWxpemVkIGNvdXNpbnM6IHR3byByZWd1bGFyIGNob2NvbGF0ZSBjaGlwIGNvb2tpZXMgam9pbmVkIGJ5IGEgZ29vZXksIG1lbHR5IG1hcnNobWFsbG93LiBUaGVvcmV0aWNhbGx5IG9uZSBjb3VsZCBhc3NlbWJsZSBhbGwga2luZHMgb2Ygb3RoZXIgdGhpbmdzIHRoaXMgd2F5LiBUaGUgbWluZCByYWNlcy4iLA0KICAgICAgaWNvbjogWzMxLCAzNF0sDQogICAgICBwb3dlcjogNSwNCiAgICAgIHByaWNlOiBnZXRDb29raWVQcmljZSg1MSksDQogICAgfSk7DQoNCiAgICBHYW1lLk5ld1VwZ3JhZGVDb29raWUoew0KICAgICAgbmFtZTogIldlYiBjb29raWVzIiwNCiAgICAgIGRlc2M6DQogICAgICAgICJUaGUgb3JpZ2luYWwgcmVjaXBlOyBuYW1lZCBmb3IgdGhlIGRlbGljYXRlIHBhdHRlcm4gaW5zY3JpYmVkIG9uIHRoZWlyIHN1cmZhY2UgYnkgdGhlIGJha2luZyBwcm9jZXNzLiBFYXRpbmcgdGhlc2UgY2FuIHRlbGwgYSBsb3QgYWJvdXQgc29tZW9uZS4gSW52ZW50ZWQgYnkgd2VsbC1jb25uZWN0ZWQgYmFrZXJzLCBubyBkb3VidC4iICsNCiAgICAgICAgKEFwcA0KICAgICAgICAgID8gIjxicj5Pbmx5IG9mIGFueSB1c2UgaW4gQ29va2llIENsaWNrZXIncyB3ZWIgdmVyc2lvbiwgb2YgY291cnNlLiINCiAgICAgICAgICA6ICIiKSwNCiAgICAgIGljb246IFsyNSwgMzVdLA0KICAgICAgcG93ZXI6IEFwcCA/IDAgOiA1LA0KICAgICAgcHJpY2U6IGdldENvb2tpZVByaWNlKDUyKSwNCiAgICB9KTsNCiAgICBpZiAoQXBwKSBHYW1lLmxhc3QucG9vbCA9ICJkZWJ1ZyI7DQogICAgR2FtZS5OZXdVcGdyYWRlQ29va2llKHsNCiAgICAgIG5hbWU6ICJTdGVhbWVkIGNvb2tpZXMiLA0KICAgICAgZGVzYzoNCiAgICAgICAgIkxvY2FsaXplZCBlbnRpcmVseSB3aXRoaW4gdGhpcyBnYW1pbmcgcGxhdGZvcm0/IFllcyEgQmFrZWQgd2l0aCB0aGUgcG93ZXIgb2Ygc3RlYW0sIGluIGEgdG91Y2ggb2YgY3V0dGluZy1lZGdlIG1vZGVybml0eSBub3Qgc2VlbiBzaW5jZSB0aGUgaW5kdXN0cmlhbCByZXZvbHV0aW9uLiIgKw0KICAgICAgICAoIUFwcA0KICAgICAgICAgID8gIjxicj5Pbmx5IG9mIGFueSB1c2UgaW4gQ29va2llIENsaWNrZXIncyBTdGVhbSB2ZXJzaW9uLCBvZiBjb3Vyc2UuIg0KICAgICAgICAgIDogIiIpLA0KICAgICAgaWNvbjogWzI2LCAzNV0sDQogICAgICBwb3dlcjogQXBwID8gNSA6IDAsDQogICAgICBwcmljZTogZ2V0Q29va2llUHJpY2UoNTIpLA0KICAgIH0pOw0KICAgIGlmICghQXBwKSBHYW1lLmxhc3QucG9vbCA9ICJkZWJ1ZyI7DQoNCiAgICBvcmRlciA9IDEwMDUwOw0KICAgIEdhbWUuTmV3VXBncmFkZUNvb2tpZSh7DQogICAgICBuYW1lOiAiRGVlcC1mcmllZCBjb29raWUgZG91Z2giLA0KICAgICAgZGVzYzogIlRoZXknbGwgZnJ5IGFueXRoaW5nIHRoZXNlIGRheXMuIERyaXp6bGVkIGluIGhvdCBjaG9jb2xhdGUgc3lydXAsIGp1c3QgbGlrZSBpbiBzdGF0ZSBmYWlycy4gU3Bpa2VzIHVwIHlvdXIgYmxvb2Qgc3VnYXIgQU5EIHlvdXIgY2hvbGVzdGVyb2whIiwNCiAgICAgIGljb246IFsyMywgMzVdLA0KICAgICAgcmVxdWlyZTogIkJveCBvZiBtYXliZSBjb29raWVzIiwNCiAgICAgIHBvd2VyOiA1LA0KICAgICAgcHJpY2U6IE1hdGgucG93KDEwLCA0NyksDQogICAgfSk7DQoNCiAgICAvL2VuZCBvZiB1cGdyYWRlcw0KDQogICAgR2FtZS5zZWFzb25zID0gew0KICAgICAgY2hyaXN0bWFzOiB7DQogICAgICAgIG5hbWU6ICJDaHJpc3RtYXMiLA0KICAgICAgICBzdGFydDogIkNocmlzdG1hcyBzZWFzb24gaGFzIHN0YXJ0ZWQhIiwNCiAgICAgICAgb3ZlcjogIkNocmlzdG1hcyBzZWFzb24gaXMgb3Zlci4iLA0KICAgICAgICB0cmlnZ2VyOiAiRmVzdGl2ZSBiaXNjdWl0IiwNCiAgICAgIH0sDQogICAgICB2YWxlbnRpbmVzOiB7DQogICAgICAgIG5hbWU6ICJWYWxlbnRpbmUncyBkYXkiLA0KICAgICAgICBzdGFydDogIlZhbGVudGluZSdzIGRheSBoYXMgc3RhcnRlZCEiLA0KICAgICAgICBvdmVyOiAiVmFsZW50aW5lJ3MgZGF5IGlzIG92ZXIuIiwNCiAgICAgICAgdHJpZ2dlcjogIkxvdmVzaWNrIGJpc2N1aXQiLA0KICAgICAgfSwNCiAgICAgIGZvb2xzOiB7DQogICAgICAgIG5hbWU6ICJCdXNpbmVzcyBkYXkiLA0KICAgICAgICBzdGFydDogIkJ1c2luZXNzIGRheSBoYXMgc3RhcnRlZCEiLA0KICAgICAgICBvdmVyOiAiQnVzaW5lc3MgZGF5IGlzIG92ZXIuIiwNCiAgICAgICAgdHJpZ2dlcjogIkZvb2wncyBiaXNjdWl0IiwNCiAgICAgIH0sDQogICAgICBlYXN0ZXI6IHsNCiAgICAgICAgbmFtZTogIkVhc3RlciIsDQogICAgICAgIHN0YXJ0OiAiRWFzdGVyIHNlYXNvbiBoYXMgc3RhcnRlZCEiLA0KICAgICAgICBvdmVyOiAiRWFzdGVyIHNlYXNvbiBpcyBvdmVyLiIsDQogICAgICAgIHRyaWdnZXI6ICJCdW5ueSBiaXNjdWl0IiwNCiAgICAgIH0sDQogICAgICBoYWxsb3dlZW46IHsNCiAgICAgICAgbmFtZTogIkhhbGxvd2VlbiIsDQogICAgICAgIHN0YXJ0OiAiSGFsbG93ZWVuIGhhcyBzdGFydGVkISIsDQogICAgICAgIG92ZXI6ICJIYWxsb3dlZW4gaXMgb3Zlci4iLA0KICAgICAgICB0cmlnZ2VyOiAiR2hvc3RseSBiaXNjdWl0IiwNCiAgICAgIH0sDQogICAgfTsNCiAgICBpZiAoIUVOKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2Vhc29ucykgew0KICAgICAgICB2YXIgaXQgPSBHYW1lLnNlYXNvbnNbaV07DQogICAgICAgIGl0Lm5hbWUgPSBsb2MoaXQubmFtZSk7DQogICAgICAgIGl0LnN0YXJ0ID0gbG9jKCIlMSBoYXMgc3RhcnRlZCEiLCBpdC5uYW1lKTsNCiAgICAgICAgaXQub3ZlciA9IGxvYygiJTEgaXMgb3Zlci4iLCBpdC5uYW1lKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBHYW1lLmxpc3RUaW55T3duZWRVcGdyYWRlcyA9IGZ1bmN0aW9uIChhcnIpIHsNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmIChHYW1lLkhhcyhhcnJbaV0pKSB7DQogICAgICAgICAgdmFyIGl0ID0gR2FtZS5VcGdyYWRlc1thcnJbaV1dOw0KICAgICAgICAgIHN0ciArPSB0aW55SWNvbihpdC5pY29uKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHN0cjsNCiAgICB9Ow0KDQogICAgR2FtZS5zYW50YURyb3BzID0gWw0KICAgICAgIkluY3JlYXNlZCBtZXJyaW5lc3MiLA0KICAgICAgIkltcHJvdmVkIGpvbGxpbmVzcyIsDQogICAgICAiQSBsdW1wIG9mIGNvYWwiLA0KICAgICAgIkFuIGl0Y2h5IHN3ZWF0ZXIiLA0KICAgICAgIlJlaW5kZWVyIGJha2luZyBncm91bmRzIiwNCiAgICAgICJXZWlnaHRlZCBzbGVpZ2hzIiwNCiAgICAgICJIbyBobyBoby1mbGF2b3JlZCBmcm9zdGluZyIsDQogICAgICAiU2Vhc29uIHNhdmluZ3MiLA0KICAgICAgIlRveSB3b3Jrc2hvcCIsDQogICAgICAiTmF1Z2h0eSBsaXN0IiwNCiAgICAgICJTYW50YSdzIGJvdHRvbWxlc3MgYmFnIiwNCiAgICAgICJTYW50YSdzIGhlbHBlcnMiLA0KICAgICAgIlNhbnRhJ3MgbGVnYWN5IiwNCiAgICAgICJTYW50YSdzIG1pbGsgYW5kIGNvb2tpZXMiLA0KICAgIF07DQoNCiAgICBHYW1lLkdldEhvd01hbnlTYW50YURyb3BzID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG51bSA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2FudGFEcm9wcykgew0KICAgICAgICBpZiAoR2FtZS5IYXMoR2FtZS5zYW50YURyb3BzW2ldKSkgbnVtKys7DQogICAgICB9DQogICAgICByZXR1cm4gbnVtOw0KICAgIH07DQoNCiAgICBHYW1lLnJlaW5kZWVyRHJvcHMgPSBbDQogICAgICAiQ2hyaXN0bWFzIHRyZWUgYmlzY3VpdHMiLA0KICAgICAgIlNub3dmbGFrZSBiaXNjdWl0cyIsDQogICAgICAiU25vd21hbiBiaXNjdWl0cyIsDQogICAgICAiSG9sbHkgYmlzY3VpdHMiLA0KICAgICAgIkNhbmR5IGNhbmUgYmlzY3VpdHMiLA0KICAgICAgIkJlbGwgYmlzY3VpdHMiLA0KICAgICAgIlByZXNlbnQgYmlzY3VpdHMiLA0KICAgIF07DQogICAgR2FtZS5HZXRIb3dNYW55UmVpbmRlZXJEcm9wcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBudW0gPSAwOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnJlaW5kZWVyRHJvcHMpIHsNCiAgICAgICAgaWYgKEdhbWUuSGFzKEdhbWUucmVpbmRlZXJEcm9wc1tpXSkpIG51bSsrOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIG51bTsNCiAgICB9Ow0KICAgIC8qZm9yICh2YXIgaSBpbiBHYW1lLnNhbnRhRHJvcHMpDQoJCXsNCgkJCUdhbWUuVXBncmFkZXNbR2FtZS5zYW50YURyb3BzW2ldXS5kZXNjRnVuYz1mdW5jdGlvbigpe3JldHVybiAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij5Zb3UgY3VycmVudGx5IG93biA8Yj4nK0dhbWUuR2V0SG93TWFueVNhbnRhRHJvcHMoKSsnLycrR2FtZS5zYW50YURyb3BzLmxlbmd0aCsnPC9iPiBvZiBTYW50YVwncyBnaWZ0cy48L2Rpdj48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nK3RoaXMuZGRlc2M7fTsNCgkJfSovDQoNCiAgICBHYW1lLnNlYXNvbkRyb3BzID0gR2FtZS5oZWFydERyb3BzDQogICAgICAuY29uY2F0KEdhbWUuaGFsbG93ZWVuRHJvcHMpDQogICAgICAuY29uY2F0KEdhbWUuZWFzdGVyRWdncykNCiAgICAgIC5jb25jYXQoR2FtZS5zYW50YURyb3BzKQ0KICAgICAgLmNvbmNhdChHYW1lLnJlaW5kZWVyRHJvcHMpOw0KDQogICAgR2FtZS5zYXlTZWFzb25Td2l0Y2hVc2VzID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKEdhbWUuc2Vhc29uVXNlcyA9PSAwKQ0KICAgICAgICByZXR1cm4gbG9jKCJZb3UgaGF2ZW4ndCBzd2l0Y2hlZCBzZWFzb25zIHRoaXMgYXNjZW5zaW9uIHlldC4iKTsNCiAgICAgIHJldHVybiBFTg0KICAgICAgICA/ICJZb3UndmUgc3dpdGNoZWQgc2Vhc29ucyA8Yj4iICsNCiAgICAgICAgICAgIChHYW1lLnNlYXNvblVzZXMgPT0gMQ0KICAgICAgICAgICAgICA/ICJvbmNlIg0KICAgICAgICAgICAgICA6IEdhbWUuc2Vhc29uVXNlcyA9PSAyDQogICAgICAgICAgICAgID8gInR3aWNlIg0KICAgICAgICAgICAgICA6IEdhbWUuc2Vhc29uVXNlcyArICIgdGltZXMiKSArDQogICAgICAgICAgICAiPC9iPiB0aGlzIGFzY2Vuc2lvbi4iDQogICAgICAgIDogR2FtZS5zZWFzb25Vc2VzID09IDENCiAgICAgICAgPyBsb2MoIllvdSd2ZSBzd2l0Y2hlZCBzZWFzb25zIDxiPm9uY2U8L2I+IHRoaXMgYXNjZW5zaW9uLiIpDQogICAgICAgIDogbG9jKA0KICAgICAgICAgICAgIllvdSd2ZSBzd2l0Y2hlZCBzZWFzb25zIDxiPiUxIHRpbWVzPC9iPiB0aGlzIGFzY2Vuc2lvbi4iLA0KICAgICAgICAgICAgR2FtZS5zZWFzb25Vc2VzDQogICAgICAgICAgKTsNCiAgICB9Ow0KICAgIEdhbWUuVXBncmFkZXNbIkZlc3RpdmUgYmlzY3VpdCJdLmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgIEdhbWUubGlzdFRpbnlPd25lZFVwZ3JhZGVzKEdhbWUuc2FudGFEcm9wcykgKw0KICAgICAgICAiPGJyPjxicj4iICsNCiAgICAgICAgKEVODQogICAgICAgICAgPyAiWW91J3ZlIHB1cmNoYXNlZCA8Yj4iICsNCiAgICAgICAgICAgIEdhbWUuR2V0SG93TWFueVNhbnRhRHJvcHMoKSArDQogICAgICAgICAgICAiLyIgKw0KICAgICAgICAgICAgR2FtZS5zYW50YURyb3BzLmxlbmd0aCArDQogICAgICAgICAgICAiPC9iPiBvZiBTYW50YSdzIGdpZnRzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIlNlYXNvbmFsIGNvb2tpZXMgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55U2FudGFEcm9wcygpICsgIi8iICsgR2FtZS5zYW50YURyb3BzLmxlbmd0aA0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIEdhbWUubGlzdFRpbnlPd25lZFVwZ3JhZGVzKEdhbWUucmVpbmRlZXJEcm9wcykgKw0KICAgICAgICAiPGJyPjxicj4iICsNCiAgICAgICAgKEVODQogICAgICAgICAgPyAiWW91J3ZlIHB1cmNoYXNlZCA8Yj4iICsNCiAgICAgICAgICAgIEdhbWUuR2V0SG93TWFueVJlaW5kZWVyRHJvcHMoKSArDQogICAgICAgICAgICAiLyIgKw0KICAgICAgICAgICAgR2FtZS5yZWluZGVlckRyb3BzLmxlbmd0aCArDQogICAgICAgICAgICAiPC9iPiByZWluZGVlciBjb29raWVzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIlJlaW5kZWVyIGNvb2tpZXMgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55UmVpbmRlZXJEcm9wcygpICsgIi8iICsgR2FtZS5yZWluZGVlckRyb3BzLmxlbmd0aA0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIEdhbWUuc2F5U2Vhc29uU3dpdGNoVXNlcygpICsNCiAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjwvZGl2PicgKw0KICAgICAgICB0aGlzLmRkZXNjDQogICAgICApOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlc1siQnVubnkgYmlzY3VpdCJdLmRlc2NGdW5jID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuICgNCiAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgIEdhbWUubGlzdFRpbnlPd25lZFVwZ3JhZGVzKEdhbWUuZWFzdGVyRWdncykgKw0KICAgICAgICAiPGJyPjxicj4iICsNCiAgICAgICAgKEVODQogICAgICAgICAgPyAiWW91J3ZlIHB1cmNoYXNlZCA8Yj4iICsNCiAgICAgICAgICAgIEdhbWUuR2V0SG93TWFueUVnZ3MoKSArDQogICAgICAgICAgICAiLyIgKw0KICAgICAgICAgICAgR2FtZS5lYXN0ZXJFZ2dzLmxlbmd0aCArDQogICAgICAgICAgICAiPC9iPiBlZ2dzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIkVnZ3MgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55RWdncygpICsgIi8iICsgR2FtZS5lYXN0ZXJFZ2dzLmxlbmd0aA0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIEdhbWUuc2F5U2Vhc29uU3dpdGNoVXNlcygpICsNCiAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjwvZGl2PicgKw0KICAgICAgICB0aGlzLmRkZXNjDQogICAgICApOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlc1siR2hvc3RseSBiaXNjdWl0Il0uZGVzY0Z1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgR2FtZS5saXN0VGlueU93bmVkVXBncmFkZXMoR2FtZS5oYWxsb3dlZW5Ecm9wcykgKw0KICAgICAgICAiPGJyPjxicj4iICsNCiAgICAgICAgKEVODQogICAgICAgICAgPyAiWW91J3ZlIHB1cmNoYXNlZCA8Yj4iICsNCiAgICAgICAgICAgIEdhbWUuR2V0SG93TWFueUhhbGxvd2VlbkRyb3BzKCkgKw0KICAgICAgICAgICAgIi8iICsNCiAgICAgICAgICAgIEdhbWUuaGFsbG93ZWVuRHJvcHMubGVuZ3RoICsNCiAgICAgICAgICAgICI8L2I+IGhhbGxvd2VlbiBjb29raWVzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIlNlYXNvbmFsIGNvb2tpZXMgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55SGFsbG93ZWVuRHJvcHMoKSArICIvIiArIEdhbWUuaGFsbG93ZWVuRHJvcHMubGVuZ3RoDQogICAgICAgICAgICApKSArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgR2FtZS5zYXlTZWFzb25Td2l0Y2hVc2VzKCkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+PC9kaXY+JyArDQogICAgICAgIHRoaXMuZGRlc2MNCiAgICAgICk7DQogICAgfTsNCiAgICBHYW1lLlVwZ3JhZGVzWyJMb3Zlc2ljayBiaXNjdWl0Il0uZGVzY0Z1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4nICsNCiAgICAgICAgR2FtZS5saXN0VGlueU93bmVkVXBncmFkZXMoR2FtZS5oZWFydERyb3BzKSArDQogICAgICAgICI8YnI+PGJyPiIgKw0KICAgICAgICAoRU4NCiAgICAgICAgICA/ICJZb3UndmUgcHVyY2hhc2VkIDxiPiIgKw0KICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55SGVhcnREcm9wcygpICsNCiAgICAgICAgICAgICIvIiArDQogICAgICAgICAgICBHYW1lLmhlYXJ0RHJvcHMubGVuZ3RoICsNCiAgICAgICAgICAgICI8L2I+IGhlYXJ0IGJpc2N1aXRzLiINCiAgICAgICAgICA6IGxvYygNCiAgICAgICAgICAgICAgIlNlYXNvbmFsIGNvb2tpZXMgcHVyY2hhc2VkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5HZXRIb3dNYW55SGVhcnREcm9wcygpICsgIi8iICsgR2FtZS5oZWFydERyb3BzLmxlbmd0aA0KICAgICAgICAgICAgKSkgKw0KICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgIEdhbWUuc2F5U2Vhc29uU3dpdGNoVXNlcygpICsNCiAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PjwvZGl2PicgKw0KICAgICAgICB0aGlzLmRkZXNjDQogICAgICApOw0KICAgIH07DQogICAgR2FtZS5VcGdyYWRlc1siRm9vbCdzIGJpc2N1aXQiXS5kZXNjRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICBHYW1lLnNheVNlYXNvblN3aXRjaFVzZXMoKSArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj48L2Rpdj4nICsNCiAgICAgICAgdGhpcy5kZGVzYw0KICAgICAgKTsNCiAgICB9Ow0KDQogICAgR2FtZS5jb21wdXRlU2Vhc29uUHJpY2VzID0gZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNlYXNvbnMpIHsNCiAgICAgICAgR2FtZS5zZWFzb25zW2ldLnRyaWdnZXJVcGdyYWRlLnByaWNlRnVuYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB2YXIgbSA9IDE7DQogICAgICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoInNlYXNvbnMiKTsNCiAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgbSAqPSAyOw0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDIpIG0gKj0gMS41Ow0KICAgICAgICAgICAgZWxzZSBpZiAoZ29kTHZsID09IDMpIG0gKj0gMS4yNTsNCiAgICAgICAgICB9DQogICAgICAgICAgLy9yZXR1cm4gR2FtZS5zZWFzb25UcmlnZ2VyQmFzZVByaWNlKk1hdGgucG93KDIsR2FtZS5zZWFzb25Vc2VzKSptOw0KICAgICAgICAgIC8vcmV0dXJuIEdhbWUuY29va2llc1BzKjYwKk1hdGgucG93KDEuNSxHYW1lLnNlYXNvblVzZXMpKm07DQogICAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgIEdhbWUuc2Vhc29uVHJpZ2dlckJhc2VQcmljZSArDQogICAgICAgICAgICBHYW1lLnVuYnVmZmVkQ3BzICogNjAgKiBNYXRoLnBvdygxLjUsIEdhbWUuc2Vhc29uVXNlcykgKiBtDQogICAgICAgICAgKTsNCiAgICAgICAgfTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuY29tcHV0ZVNlYXNvbnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2Vhc29ucykgew0KICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzW0dhbWUuc2Vhc29uc1tpXS50cmlnZ2VyXTsNCiAgICAgICAgR2FtZS5zZWFzb25zW2ldLnRyaWdnZXJVcGdyYWRlID0gbWU7DQogICAgICAgIG1lLnBvb2wgPSAidG9nZ2xlIjsNCiAgICAgICAgbWUuYnV5RnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgR2FtZS5zZWFzb25Vc2VzICs9IDE7DQogICAgICAgICAgR2FtZS5jb21wdXRlU2Vhc29uUHJpY2VzKCk7DQogICAgICAgICAgLy9HYW1lLkxvY2sodGhpcy5uYW1lKTsNCiAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuc2Vhc29ucykgew0KICAgICAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tHYW1lLnNlYXNvbnNbaV0udHJpZ2dlcl07DQogICAgICAgICAgICBpZiAobWUubmFtZSAhPSB0aGlzLm5hbWUpIHsNCiAgICAgICAgICAgICAgR2FtZS5Mb2NrKG1lLm5hbWUpOw0KICAgICAgICAgICAgICBHYW1lLlVubG9jayhtZS5uYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKEdhbWUuc2Vhc29uICE9ICIiICYmIEdhbWUuc2Vhc29uICE9IHRoaXMuc2Vhc29uKSB7DQogICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgR2FtZS5zZWFzb25zW0dhbWUuc2Vhc29uXS5vdmVyICsgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicsDQogICAgICAgICAgICAgICIiLA0KICAgICAgICAgICAgICBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLnRyaWdnZXJVcGdyYWRlLmljb24sDQogICAgICAgICAgICAgIDQNCiAgICAgICAgICAgICk7DQogICAgICAgICAgfQ0KICAgICAgICAgIEdhbWUuc2Vhc29uID0gdGhpcy5zZWFzb247DQogICAgICAgICAgR2FtZS5zZWFzb25UID0gR2FtZS5nZXRTZWFzb25EdXJhdGlvbigpOw0KICAgICAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLnJlZHJhdygpOw0KICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgR2FtZS5zZWFzb25zW3RoaXMuc2Vhc29uXS5zdGFydCArICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nLA0KICAgICAgICAgICAgIiIsDQogICAgICAgICAgICB0aGlzLmljb24sDQogICAgICAgICAgICA0DQogICAgICAgICAgKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBtZS5jbGlja0Z1bmN0aW9uID0gKGZ1bmN0aW9uIChtZSkgew0KICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAvL3VuZG8gc2Vhc29uDQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIG1lLmJvdWdodCAmJg0KICAgICAgICAgICAgICBHYW1lLnNlYXNvbiAmJg0KICAgICAgICAgICAgICBtZSA9PSBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLnRyaWdnZXJVcGdyYWRlDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgbWUubG9zZSgpOw0KICAgICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgICBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLm92ZXIsDQogICAgICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAgICAgR2FtZS5zZWFzb25zW0dhbWUuc2Vhc29uXS50cmlnZ2VyVXBncmFkZS5pY29uDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGlmIChHYW1lLkhhcygiU2Vhc29uIHN3aXRjaGVyIikpIHsNCiAgICAgICAgICAgICAgICBHYW1lLlVubG9jayhHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLnRyaWdnZXIpOw0KICAgICAgICAgICAgICAgIEdhbWUuc2Vhc29uc1tHYW1lLnNlYXNvbl0udHJpZ2dlclVwZ3JhZGUuYm91Z2h0ID0gMDsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgICBHYW1lLnNlYXNvbiA9IEdhbWUuYmFzZVNlYXNvbjsNCiAgICAgICAgICAgICAgR2FtZS5zZWFzb25UID0gLTE7DQogICAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL3RpY2subXAzIik7DQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9Ow0KICAgICAgICB9KShtZSk7DQoNCiAgICAgICAgbWUuZGlzcGxheUZ1bmNXaGVuT3duZWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPicgKw0KICAgICAgICAgICAgbG9jKCJUaW1lIHJlbWFpbmluZzoiKSArDQogICAgICAgICAgICAiPGJyPjxiPiIgKw0KICAgICAgICAgICAgKEdhbWUuSGFzKCJFdGVybmFsIHNlYXNvbnMiKQ0KICAgICAgICAgICAgICA/IGxvYygiZm9yZXZlciIpDQogICAgICAgICAgICAgIDogR2FtZS5zYXlUaW1lKEdhbWUuc2Vhc29uVCwgLTEpKSArDQogICAgICAgICAgICAnPC9iPjxkaXYgc3R5bGU9ImZvbnQtc2l6ZTo4MCU7Ij4oJyArDQogICAgICAgICAgICBsb2MoIkNsaWNrIGFnYWluIHRvIGNhbmNlbCBzZWFzb24iKSArDQogICAgICAgICAgICAiKTwvZGl2PjwvZGl2PiINCiAgICAgICAgICApOw0KICAgICAgICB9Ow0KICAgICAgICBtZS50aW1lckRpc3BsYXkgPSAoZnVuY3Rpb24gKHVwZ3JhZGUpIHsNCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAhR2FtZS5VcGdyYWRlc1t1cGdyYWRlLm5hbWVdLmJvdWdodCB8fA0KICAgICAgICAgICAgICBHYW1lLkhhcygiRXRlcm5hbCBzZWFzb25zIikNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICAgICAgZWxzZSByZXR1cm4gMSAtIEdhbWUuc2Vhc29uVCAvIEdhbWUuZ2V0U2Vhc29uRHVyYXRpb24oKTsNCiAgICAgICAgICB9Ow0KICAgICAgICB9KShtZSk7DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLmdldFNlYXNvbkR1cmF0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIEdhbWUuZnBzICogNjAgKiA2MCAqIDI0Ow0KICAgIH07DQogICAgR2FtZS5jb21wdXRlU2Vhc29ucygpOw0KDQogICAgLy9hbGVydCB1bnRpZXJlZCBidWlsZGluZyB1cGdyYWRlcw0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgIGlmICgNCiAgICAgICAgbWUub3JkZXIgPj0gMjAwICYmDQogICAgICAgIG1lLm9yZGVyIDwgMjAwMCAmJg0KICAgICAgICAhbWUudGllciAmJg0KICAgICAgICBtZS5uYW1lLmluZGV4T2YoImdyYW5kbWEiKSA9PSAtMSAmJg0KICAgICAgICBtZS5wb29sICE9ICJwcmVzdGlnZSINCiAgICAgICkNCiAgICAgICAgY29uc29sZS5sb2cobWUubmFtZSArICIgaGFzIG5vIHRpZXIuIik7DQogICAgfQ0KDQogICAgR2FtZS5VcGdyYWRlc0J5UG9vbCA9IHsga2l0dGVuOiBbXSB9Ow0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgaWYgKCFHYW1lLlVwZ3JhZGVzQnlQb29sW0dhbWUuVXBncmFkZXNbaV0ucG9vbF0pDQogICAgICAgIEdhbWUuVXBncmFkZXNCeVBvb2xbR2FtZS5VcGdyYWRlc1tpXS5wb29sXSA9IFtdOw0KICAgICAgR2FtZS5VcGdyYWRlc0J5UG9vbFtHYW1lLlVwZ3JhZGVzW2ldLnBvb2xdLnB1c2goR2FtZS5VcGdyYWRlc1tpXSk7DQogICAgICBpZiAoR2FtZS5VcGdyYWRlc1tpXS5raXR0ZW4pDQogICAgICAgIEdhbWUuVXBncmFkZXNCeVBvb2xbImtpdHRlbiJdLnB1c2goR2FtZS5VcGdyYWRlc1tpXSk7DQogICAgfQ0KDQogICAgR2FtZS5QcmVzdGlnZVVwZ3JhZGVzID0gW107DQogICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVzKSB7DQogICAgICBpZiAoDQogICAgICAgIEdhbWUuVXBncmFkZXNbaV0ucG9vbCA9PSAicHJlc3RpZ2UiIHx8DQogICAgICAgIEdhbWUuVXBncmFkZXNbaV0ucG9vbCA9PSAicHJlc3RpZ2VEZWNvciINCiAgICAgICkgew0KICAgICAgICBHYW1lLlByZXN0aWdlVXBncmFkZXMucHVzaChHYW1lLlVwZ3JhZGVzW2ldKTsNCiAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNbaV0ucG9zWCB8fCBHYW1lLlVwZ3JhZGVzW2ldLnBvc1kpDQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tpXS5wbGFjZWRCeUNvZGUgPSB0cnVlOw0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICBHYW1lLlVwZ3JhZGVzW2ldLnBvc1ggPSAwOw0KICAgICAgICAgIEdhbWUuVXBncmFkZXNbaV0ucG9zWSA9IDA7DQogICAgICAgIH0NCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuVXBncmFkZXNbaV0ucGFyZW50cy5sZW5ndGggPT0gMCAmJg0KICAgICAgICAgIEdhbWUuVXBncmFkZXNbaV0ubmFtZSAhPSAiTGVnYWN5Ig0KICAgICAgICApDQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tpXS5wYXJlbnRzID0gWyJMZWdhY3kiXTsNCiAgICAgICAgZm9yICh2YXIgaWkgaW4gR2FtZS5VcGdyYWRlc1tpXS5wYXJlbnRzKSB7DQogICAgICAgICAgR2FtZS5VcGdyYWRlc1tpXS5wYXJlbnRzW2lpXSA9DQogICAgICAgICAgICBHYW1lLlVwZ3JhZGVzW0dhbWUuVXBncmFkZXNbaV0ucGFyZW50c1tpaV1dOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgR2FtZS5nb2xkZW5Db29raWVVcGdyYWRlcyA9IFsNCiAgICAgICJHZXQgbHVja3kiLA0KICAgICAgIkx1Y2t5IGRheSIsDQogICAgICAiU2VyZW5kaXBpdHkiLA0KICAgICAgIkhlYXZlbmx5IGx1Y2siLA0KICAgICAgIkxhc3RpbmcgZm9ydHVuZSIsDQogICAgICAiRGVjaXNpdmUgZmF0ZSIsDQogICAgICAiTHVja3kgZGlnaXQiLA0KICAgICAgIkx1Y2t5IG51bWJlciIsDQogICAgICAiTHVja3kgcGF5b3V0IiwNCiAgICAgICJHb2xkZW4gZ29vc2UgZWdnIiwNCiAgICBdOw0KDQogICAgR2FtZS5jb29raWVVcGdyYWRlcyA9IFtdOw0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgIGlmIChtZS5wb29sID09ICJjb29raWUiIHx8IG1lLnBzZXVkb0Nvb2tpZSkgR2FtZS5jb29raWVVcGdyYWRlcy5wdXNoKG1lKTsNCiAgICAgIGlmIChtZS50aWVyKSBHYW1lLlRpZXJzW21lLnRpZXJdLnVwZ3JhZGVzLnB1c2gobWUpOw0KICAgIH0NCiAgICBmb3IgKHZhciBpIGluIEdhbWUuVW5sb2NrQXQpIHsNCiAgICAgIEdhbWUuVXBncmFkZXNbR2FtZS5VbmxvY2tBdFtpXS5uYW1lXS51bmxvY2tBdCA9IEdhbWUuVW5sb2NrQXRbaV07DQogICAgfQ0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgaWYgKEdhbWUuVXBncmFkZXNbaV0ucG9vbCA9PSAicHJlc3RpZ2UiKQ0KICAgICAgICBHYW1lLlVwZ3JhZGVzW2ldLm9yZGVyID0gR2FtZS5VcGdyYWRlc1tpXS5pZDsNCiAgICB9DQoNCiAgICAvKnZhciBvbGRQcmVzdGlnZVByaWNlcz17IkNoaW1lcmEiOjU3NjQ4MDEsIlN5bmVyZ2llcyBWb2wuIEkiOjI1MjUsIlN5bmVyZ2llcyBWb2wuIElJIjoyNTI1MjUsIkxhYmVsIHByaW50ZXIiOjk5OTl9Ow0KCQlmb3IgKHZhciBpIGluIG9sZFByZXN0aWdlUHJpY2VzKXtHYW1lLlVwZ3JhZGVzW2ldLmJhc2VQcmljZT1vbGRQcmVzdGlnZVByaWNlc1tpXTt9Ki8NCg0KICAgIEdhbWUuVXBncmFkZVBvc2l0aW9ucyA9IHsNCiAgICAgIDE0MTogWzExOCwgLTQyXSwNCiAgICAgIDE4MTogWy01NTUsIC05M10sDQogICAgICAyNTM6IFstMjM3LCAtMjI2XSwNCiAgICAgIDI1NDogWy01NiwgLTIzNF0sDQogICAgICAyNTU6IFstMTQ5LCAtMjY3XSwNCiAgICAgIDI2NDogWzY4LCA5N10sDQogICAgICAyNjU6IFsxNTcsIDE5Nl0sDQogICAgICAyNjY6IFsyODcsIDIxMl0sDQogICAgICAyNjc6IFs0MTMsIDE1N10sDQogICAgICAyNjg6IFs0ODAsIDM1XSwNCiAgICAgIDI2OTogWy02NDAsIDQyXSwNCiAgICAgIDI3MDogWy00NzEsIC0yMjhdLA0KICAgICAgMjcxOiBbLTY5MCwgLTE3OF0sDQogICAgICAyNzI6IFstNTkxLCAtMjQ5XSwNCiAgICAgIDI3MzogWy03MTEsIC01OF0sDQogICAgICAyNzQ6IFsyNzAsIC0zMjhdLA0KICAgICAgMjc1OiBbMzE3LCAtNDM5XSwNCiAgICAgIDI3NjogWzMzMywgLTU1Nl0sDQogICAgICAyNzc6IFszMzQsIC02NzZdLA0KICAgICAgMjc4OiBbMzMzLCAtNzk2XSwNCiAgICAgIDI3OTogWzMyOCwgLTkyMl0sDQogICAgICAyODA6IFszMDMsIC0xMDQwXSwNCiAgICAgIDI4MTogWzE5NCwgLTIzMF0sDQogICAgICAyODI6IFstMjkzLCAxNTZdLA0KICAgICAgMjgzOiBbLTMzNSwgMjg5XSwNCiAgICAgIDI4NDogWy0zMjgsIDQyMl0sDQogICAgICAyODU6IFstMjQ3LCA1NjddLA0KICAgICAgMjg2OiBbLTM3NSwgNTc5XSwNCiAgICAgIDI4NzogWy0yOTYsIDcyNl0sDQogICAgICAyODg6IFstMjYwLCAtMzk2XSwNCiAgICAgIDI4OTogWy0zNzUsIC01MDJdLA0KICAgICAgMjkwOiBbLTEyNywgLTQxNV0sDQogICAgICAyOTE6IFs0NzksIC03MzldLA0KICAgICAgMjkyOiBbLTM5OSwgLTY0OV0sDQogICAgICAyOTM6IFstNDAxLCAtODA2XSwNCiAgICAgIDMyMzogWy03NiwgMTA5XSwNCiAgICAgIDMyNTogWzE5OCwgLTExNTNdLA0KICAgICAgMzI2OiBbLTI3MCwgLTEzNF0sDQogICAgICAzMjc6IFstMjIxLCAyNjFdLA0KICAgICAgMzI4OiBbMTksIDI0N10sDQogICAgICAzMjk6IFs0MiwgNDAyXSwNCiAgICAgIDM1MzogWzEyMSwgLTMyNl0sDQogICAgICAzNTQ6IFs3NywgLTQzNl0sDQogICAgICAzNTU6IFs2NCwgLTU0OF0sDQogICAgICAzNTY6IFs1NywgLTY3M10sDQogICAgICAzNTc6IFs1MiwgLTc5M10sDQogICAgICAzNTg6IFs1OCwgLTkyNF0sDQogICAgICAzNTk6IFs4MiwgLTEwNDNdLA0KICAgICAgMzYwOiBbNDksIDUwNl0sDQogICAgICAzNjI6IFsxNTYsIDMyNV0sDQogICAgICAzNjM6IFstMzAsIC0zMF0sDQogICAgICAzNjQ6IFstMjM4LCAtNzI4XSwNCiAgICAgIDM2NTogWy0xMjMsIDQyM10sDQogICAgICAzNjg6IFstNTUsIC01MjddLA0KICAgICAgMzkzOiBbMTk2LCAtNzE0XSwNCiAgICAgIDM5NDogWzE5NywgLTk2NF0sDQogICAgICAzOTU6IFstMTQzLCAtMTQwXSwNCiAgICAgIDM5NjogWy0yNDQsIC04OTddLA0KICAgICAgMzk3OiBbLTk3LCA2NDFdLA0KICAgICAgNDA4OiBbLTIwNCwgLTEwMzZdLA0KICAgICAgNDA5OiBbLTcyLCAtMTE1Ml0sDQogICAgICA0MTA6IFs0MiwgLTEyNzhdLA0KICAgICAgNDExOiBbLTQ3NiwgMTA1XSwNCiAgICAgIDQxMjogWy01MjIsIDI1OV0sDQogICAgICA0MTM6IFstNTE2LCA0MzNdLA0KICAgICAgNDQ5OiBbLTM2NywgLTExMTNdLA0KICAgICAgNDUwOiBbLTMwNiwgLTEyMTZdLA0KICAgICAgNDUxOiBbLTE4NCwgLTEyNDFdLA0KICAgICAgNDk1OiBbLTQwOCwgLTk3NF0sDQogICAgICA0OTY6IFsyMDAsIDQ5XSwNCiAgICAgIDUwNTogWzQxMSwgLTk0XSwNCiAgICAgIDUyMDogWy0zMDMsIC0xMl0sDQogICAgICA1Mzc6IFstNzk1LCAtMjQzXSwNCiAgICAgIDUzOTogWy01MzQsIC0xMTMwXSwNCiAgICAgIDU0MDogWy03MDIsIC0xMTM1XSwNCiAgICAgIDU0MTogWy02NTYsIC0xMDE0XSwNCiAgICAgIDU0MjogWy02NTAsIC0xMjUyXSwNCiAgICAgIDU2MTogWzI5OCwgLTIxXSwNCiAgICAgIDU2MjogWzMyLCA3NDRdLA0KICAgICAgNTkxOiBbMTQ4LCA4NDRdLA0KICAgICAgNTkyOiBbLTUyLCA4NThdLA0KICAgICAgNjQzOiBbNTcsIDYxNl0sDQogICAgICA2NDY6IFs0ODUsIC04ODJdLA0KICAgICAgNjQ3OiBbLTEwMiwgMjQ2XSwNCiAgICAgIDcxNzogWzYyMSwgLTY3Nl0sDQogICAgICA3MTg6IFs2MTgsIC01MzddLA0KICAgICAgNzE5OiBbLTIyNSwgLTUyMF0sDQogICAgICA3MjA6IFstMTUwLCAtNjMxXSwNCiAgICAgIDgwMTogWy0xODgsIDkyMF0sDQogICAgICA4MDI6IFstMzQ0LCA5MTZdLA0KICAgICAgODAzOiBbLTQ2MiwgODQ4XSwNCiAgICAgIDgwNDogWzMyMCwgMzUwXSwNCiAgICAgIDgwNTogWzIyMSwgNDg2XSwNCiAgICB9Ow0KDQogICAgZm9yICh2YXIgaSBpbiBHYW1lLlVwZ3JhZGVQb3NpdGlvbnMpIHsNCiAgICAgIEdhbWUuVXBncmFkZXNCeUlkW2ldLnBvc1ggPSBHYW1lLlVwZ3JhZGVQb3NpdGlvbnNbaV1bMF07DQogICAgICBHYW1lLlVwZ3JhZGVzQnlJZFtpXS5wb3NZID0gR2FtZS5VcGdyYWRlUG9zaXRpb25zW2ldWzFdOw0KICAgIH0NCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlBQ0hJRVZFTUVOVFMNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLkFjaGlldmVtZW50cyA9IHt9Ow0KICAgIEdhbWUuQWNoaWV2ZW1lbnRzQnlJZCA9IHt9Ow0KICAgIEdhbWUuQWNoaWV2ZW1lbnRzTiA9IDA7DQogICAgR2FtZS5BY2hpZXZlbWVudHNPd25lZCA9IDA7DQogICAgR2FtZS5BY2hpZXZlbWVudCA9IGZ1bmN0aW9uIChuYW1lLCBkZXNjLCBpY29uKSB7DQogICAgICB0aGlzLmlkID0gR2FtZS5BY2hpZXZlbWVudHNOOw0KICAgICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICAgIHRoaXMuZG5hbWUgPSB0aGlzLm5hbWU7DQogICAgICB0aGlzLmRlc2MgPSBkZXNjOw0KICAgICAgdGhpcy5iYXNlRGVzYyA9IHRoaXMuZGVzYzsNCiAgICAgIHRoaXMuaWNvbiA9IGljb247DQogICAgICB0aGlzLndvbiA9IDA7DQogICAgICB0aGlzLmRpc2FibGVkID0gMDsNCiAgICAgIHRoaXMub3JkZXIgPSB0aGlzLmlkOw0KICAgICAgaWYgKG9yZGVyKSB0aGlzLm9yZGVyID0gb3JkZXIgKyB0aGlzLmlkICogMC4wMDE7DQogICAgICB0aGlzLnBvb2wgPSAibm9ybWFsIjsNCiAgICAgIHRoaXMudmFuaWxsYSA9IEdhbWUudmFuaWxsYTsNCiAgICAgIHRoaXMudHlwZSA9ICJhY2hpZXZlbWVudCI7DQoNCiAgICAgIHRoaXMuY2xpY2sgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmICh0aGlzLmNsaWNrRnVuY3Rpb24pIHRoaXMuY2xpY2tGdW5jdGlvbigpOw0KICAgICAgfTsNCiAgICAgIEdhbWUubGFzdCA9IHRoaXM7DQogICAgICBHYW1lLkFjaGlldmVtZW50c1t0aGlzLm5hbWVdID0gdGhpczsNCiAgICAgIEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFt0aGlzLmlkXSA9IHRoaXM7DQogICAgICBHYW1lLkFjaGlldmVtZW50c04rKzsNCiAgICAgIHJldHVybiB0aGlzOw0KICAgIH07DQogICAgR2FtZS5BY2hpZXZlbWVudC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiAiQWNoaWV2ZW1lbnQiOw0KICAgIH07DQoNCiAgICBHYW1lLldpbiA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBpZiAodHlwZW9mIHdoYXQgPT09ICJzdHJpbmciKSB7DQogICAgICAgIGlmIChHYW1lLkFjaGlldmVtZW50c1t3aGF0XSkgew0KICAgICAgICAgIHZhciBpdCA9IEdhbWUuQWNoaWV2ZW1lbnRzW3doYXRdOw0KICAgICAgICAgIGlmIChpdC53b24gPT0gMCkgew0KICAgICAgICAgICAgdmFyIG5hbWUgPSBpdC5zaG9ydE5hbWUgPyBpdC5zaG9ydE5hbWUgOiBpdC5kbmFtZTsNCiAgICAgICAgICAgIGl0LndvbiA9IDE7DQogICAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgICAgbG9jKCJBY2hpZXZlbWVudCB1bmxvY2tlZCIpLA0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0idGl0bGUiIHN0eWxlPSJmb250LXNpemU6MThweDttYXJnaW4tdG9wOi0ycHg7Ij4nICsNCiAgICAgICAgICAgICAgICBuYW1lICsNCiAgICAgICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICAgICAgaXQuaWNvbg0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIEdhbWUuTm90aWZ5VG9vbHRpcCgNCiAgICAgICAgICAgICAgImZ1bmN0aW9uKCl7cmV0dXJuIEdhbWUuY3JhdGVUb29sdGlwKEdhbWUuQWNoaWV2ZW1lbnRzQnlJZFsiICsNCiAgICAgICAgICAgICAgICBpdC5pZCArDQogICAgICAgICAgICAgICAgIl0pO30iDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgaWYgKEdhbWUuQ291bnRzQXNBY2hpZXZlbWVudE93bmVkKGl0LnBvb2wpKQ0KICAgICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkKys7DQogICAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgICAgaWYgKEFwcCAmJiBpdC52YW5pbGxhKSBBcHAuZ290QWNoaWV2KGl0LmlkKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGZvciAodmFyIGkgaW4gd2hhdCkgew0KICAgICAgICAgIEdhbWUuV2luKHdoYXRbaV0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLlJlbW92ZUFjaGlldiA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICBpZiAoR2FtZS5BY2hpZXZlbWVudHNbd2hhdF0pIHsNCiAgICAgICAgaWYgKEdhbWUuQWNoaWV2ZW1lbnRzW3doYXRdLndvbiA9PSAxKSB7DQogICAgICAgICAgR2FtZS5BY2hpZXZlbWVudHNbd2hhdF0ud29uID0gMDsNCiAgICAgICAgICBpZiAoR2FtZS5Db3VudHNBc0FjaGlldmVtZW50T3duZWQoR2FtZS5BY2hpZXZlbWVudHNbd2hhdF0ucG9vbCkpDQogICAgICAgICAgICBHYW1lLkFjaGlldmVtZW50c093bmVkLS07DQogICAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQogICAgR2FtZS5BY2hpZXZlbWVudC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkgLy9jaGVhdGluZyBvbmx5DQogICAgew0KICAgICAgaWYgKCF0aGlzLndvbikgew0KICAgICAgICBHYW1lLldpbih0aGlzLm5hbWUpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgR2FtZS5SZW1vdmVBY2hpZXYodGhpcy5uYW1lKTsNCiAgICAgIH0NCiAgICAgIGlmIChHYW1lLm9uTWVudSA9PSAic3RhdHMiKSBHYW1lLlVwZGF0ZU1lbnUoKTsNCiAgICB9Ow0KDQogICAgR2FtZS5Db3VudHNBc0FjaGlldmVtZW50T3duZWQgPSBmdW5jdGlvbiAocG9vbCkgew0KICAgICAgaWYgKHBvb2wgPT0gIiIgfHwgcG9vbCA9PSAibm9ybWFsIikgcmV0dXJuIHRydWU7DQogICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICB9Ow0KDQogICAgR2FtZS5IYXNBY2hpZXYgPSBmdW5jdGlvbiAod2hhdCkgew0KICAgICAgcmV0dXJuIEdhbWUuQWNoaWV2ZW1lbnRzW3doYXRdID8gR2FtZS5BY2hpZXZlbWVudHNbd2hhdF0ud29uIDogMDsNCiAgICB9Ow0KDQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCA9IGZ1bmN0aW9uIChuYW1lLCBkZXNjLCBidWlsZGluZywgdGllcikgew0KICAgICAgdmFyIGFjaGlldiA9IG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgICBuYW1lLA0KICAgICAgICBsb2MoDQogICAgICAgICAgIkhhdmUgPGI+JTE8L2I+LiIsDQogICAgICAgICAgbG9jKA0KICAgICAgICAgICAgIiUxICIgKyBHYW1lLk9iamVjdHNbYnVpbGRpbmddLmJzaW5nbGUsDQogICAgICAgICAgICBMQmVhdXRpZnkoR2FtZS5UaWVyc1t0aWVyXS5hY2hpZXZVbmxvY2spDQogICAgICAgICAgKQ0KICAgICAgICApICsgZGVzYywNCiAgICAgICAgR2FtZS5HZXRJY29uKGJ1aWxkaW5nLCB0aWVyKQ0KICAgICAgKTsNCiAgICAgIEdhbWUuU2V0VGllcihidWlsZGluZywgdGllcik7DQogICAgICByZXR1cm4gYWNoaWV2Ow0KICAgIH07DQoNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCA9IGZ1bmN0aW9uIChuYW1lLCBidWlsZGluZywgdGllciwgcSwgbXVsdCkgew0KICAgICAgdmFyIGJ1aWxkaW5nID0gR2FtZS5PYmplY3RzW2J1aWxkaW5nXTsNCiAgICAgIHZhciBpY29uID0gW2J1aWxkaW5nLmljb25Db2x1bW4sIDIyXTsNCiAgICAgIHZhciBuID0gMTIgKyBidWlsZGluZy5uICsgKG11bHQgfHwgMCk7DQogICAgICBpZiAodGllciA9PSAyKSB7DQogICAgICAgIGljb25bMV0gPSAyMzsNCiAgICAgICAgbiArPSA3Ow0KICAgICAgfSBlbHNlIGlmICh0aWVyID09IDMpIHsNCiAgICAgICAgaWNvblsxXSA9IDI0Ow0KICAgICAgICBuICs9IDE0Ow0KICAgICAgfQ0KICAgICAgdmFyIHBvdyA9IE1hdGgucG93KDEwLCBuKTsNCiAgICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICAgbmFtZSwNCiAgICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBqdXN0IGZyb20gJTIuIiwgWw0KICAgICAgICAgIGxvYygiJTEgY29va2llIiwgeyBuOiBwb3csIGI6IHRvRml4ZWQocG93KSB9KSwNCiAgICAgICAgICBidWlsZGluZy5wbHVyYWwsDQogICAgICAgIF0pICsgKHEgPyAiPHE+IiArIHEgKyAiPC9xPiIgOiAiIiksDQogICAgICAgIGljb24NCiAgICAgICk7DQogICAgICBidWlsZGluZy5wcm9kdWN0aW9uQWNoaWV2cy5wdXNoKHsgcG93OiBwb3csIGFjaGlldjogYWNoaWV2IH0pOw0KICAgICAgcmV0dXJuIGFjaGlldjsNCiAgICB9Ow0KDQogICAgR2FtZS50aHJlc2hvbGRJY29ucyA9IFsNCiAgICAgIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTgsIDE5LCAyMCwgMjEsIDIyLCAyMywgMjQsIDI1LCAyNiwNCiAgICAgIDI3LCAyOCwgMjksIDIxLCAyMiwgMjMsIDI0LCAyNSwgMjYsIDI3LCAyOCwgMjksIDIxLCAyMiwgMjMsIDI0LCAyNSwgMjYsDQogICAgICAyNywgMjgsIDI5LCAzMCwgMzEsIDMwLCAzMSwNCiAgICBdOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50cyA9IFtdOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIHEpIHsNCiAgICAgIHZhciB0aHJlc2hvbGQgPSBNYXRoLnBvdygNCiAgICAgICAgMTAsDQogICAgICAgIE1hdGguZmxvb3IoR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aCAqIDEuNSArIDIpDQogICAgICApOw0KICAgICAgaWYgKEdhbWUuQmFua0FjaGlldmVtZW50cy5sZW5ndGggPT0gMCkgdGhyZXNob2xkID0gMTsNCiAgICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICAgbmFtZSwNCiAgICAgICAgbG9jKA0KICAgICAgICAgICJCYWtlIDxiPiUxPC9iPiBpbiBvbmUgYXNjZW5zaW9uLiIsDQogICAgICAgICAgbG9jKCIlMSBjb29raWUiLCB7IG46IHRocmVzaG9sZCwgYjogdG9GaXhlZCh0aHJlc2hvbGQpIH0pDQogICAgICAgICkgKyAocSA/ICI8cT4iICsgcSArICI8L3E+IiA6ICIiKSwNCiAgICAgICAgWw0KICAgICAgICAgIEdhbWUudGhyZXNob2xkSWNvbnNbR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aF0sDQogICAgICAgICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDQzDQogICAgICAgICAgICA/IDINCiAgICAgICAgICAgIDogR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDMyDQogICAgICAgICAgICA/IDENCiAgICAgICAgICAgIDogR2FtZS5CYW5rQWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDIzDQogICAgICAgICAgICA/IDINCiAgICAgICAgICAgIDogNSwNCiAgICAgICAgXQ0KICAgICAgKTsNCiAgICAgIGFjaGlldi50aHJlc2hvbGQgPSB0aHJlc2hvbGQ7DQogICAgICBhY2hpZXYub3JkZXIgPSAxMDAgKyBHYW1lLkJhbmtBY2hpZXZlbWVudHMubGVuZ3RoICogMC4wMTsNCiAgICAgIEdhbWUuQmFua0FjaGlldmVtZW50cy5wdXNoKGFjaGlldik7DQogICAgICByZXR1cm4gYWNoaWV2Ow0KICAgIH07DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudHMgPSBbXTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIHEpIHsNCiAgICAgIHZhciB0aHJlc2hvbGQgPSBNYXRoLnBvdygNCiAgICAgICAgMTAsDQogICAgICAgIE1hdGguZmxvb3IoR2FtZS5DcHNBY2hpZXZlbWVudHMubGVuZ3RoICogMS4yKQ0KICAgICAgKTsNCiAgICAgIC8vaWYgKEdhbWUuQ3BzQWNoaWV2ZW1lbnRzLmxlbmd0aD09MCkgdGhyZXNob2xkPTE7DQogICAgICB2YXIgYWNoaWV2ID0gbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAgIG5hbWUsDQogICAgICAgIGxvYygNCiAgICAgICAgICAiQmFrZSA8Yj4lMTwvYj4gcGVyIHNlY29uZC4iLA0KICAgICAgICAgIGxvYygiJTEgY29va2llIiwgeyBuOiB0aHJlc2hvbGQsIGI6IHRvRml4ZWQodGhyZXNob2xkKSB9KQ0KICAgICAgICApICsgKHEgPyAiPHE+IiArIHEgKyAiPC9xPiIgOiAiIiksDQogICAgICAgIFsNCiAgICAgICAgICBHYW1lLnRocmVzaG9sZEljb25zW0dhbWUuQ3BzQWNoaWV2ZW1lbnRzLmxlbmd0aF0sDQogICAgICAgICAgR2FtZS5DcHNBY2hpZXZlbWVudHMubGVuZ3RoID4gNDMNCiAgICAgICAgICAgID8gMg0KICAgICAgICAgICAgOiBHYW1lLkNwc0FjaGlldmVtZW50cy5sZW5ndGggPiAzMg0KICAgICAgICAgICAgPyAxDQogICAgICAgICAgICA6IEdhbWUuQ3BzQWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDIzDQogICAgICAgICAgICA/IDINCiAgICAgICAgICAgIDogNSwNCiAgICAgICAgXQ0KICAgICAgKTsNCiAgICAgIGFjaGlldi50aHJlc2hvbGQgPSB0aHJlc2hvbGQ7DQogICAgICBhY2hpZXYub3JkZXIgPSAyMDAgKyBHYW1lLkNwc0FjaGlldmVtZW50cy5sZW5ndGggKiAwLjAxOw0KICAgICAgR2FtZS5DcHNBY2hpZXZlbWVudHMucHVzaChhY2hpZXYpOw0KICAgICAgcmV0dXJuIGFjaGlldjsNCiAgICB9Ow0KDQogICAgLy9kZWZpbmUgYWNoaWV2ZW1lbnRzDQogICAgLy9XQVJOSU5HIDogZG8gTk9UIGFkZCBuZXcgYWNoaWV2ZW1lbnRzIGluIGJldHdlZW4sIHRoaXMgYnJlYWtzIHRoZSBzYXZlcy4gQWRkIHRoZW0gYXQgdGhlIGVuZCAhDQoNCiAgICB2YXIgb3JkZXIgPSAwOyAvL3RoaXMgaXMgdXNlZCB0byBzZXQgdGhlIG9yZGVyIGluIHdoaWNoIHRoZSBpdGVtcyBhcmUgbGlzdGVkDQoNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiV2FrZSBhbmQgYmFrZSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJNYWtpbmcgc29tZSBkb3VnaCIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJTbyBiYWtlZCByaWdodCBub3ciKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiRmxlZGdsaW5nIGJha2VyeSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJBZmZsdWVudCBiYWtlcnkiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiV29ybGQtZmFtb3VzIGJha2VyeSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJDb3NtaWMgYmFrZXJ5Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkdhbGFjdGljIGJha2VyeSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJVbml2ZXJzYWwgYmFrZXJ5Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIlRpbWVsZXNzIGJha2VyeSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJJbmZpbml0ZSBiYWtlcnkiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiSW1tb3J0YWwgYmFrZXJ5Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkRvbid0IHN0b3AgbWUgbm93Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIllvdSBjYW4gc3RvcCBub3ciKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiQ29va2llcyBhbGwgdGhlIHdheSBkb3duIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIk92ZXJkb3NlIik7DQoNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJDYXN1YWwgYmFraW5nIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiSGFyZGNvcmUgYmFraW5nIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiU3RlYWR5IHRhc3R5IHN0cmVhbSIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkNvb2tpZSBtb25zdGVyIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiTWFzcyBwcm9kdWNlciIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkNvb2tpZSB2b3J0ZXgiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJDb29raWUgcHVsc2FyIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiQ29va2llIHF1YXNhciIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIk9oIGhleSwgeW91J3JlIHN0aWxsIGhlcmUiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJMZXQncyBuZXZlciBiYWtlIGFnYWluIik7DQoNCiAgICBvcmRlciA9IDMwMDEwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlNhY3JpZmljZSIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTYpKSkgKw0KICAgICAgICAiPHE+RWFzeSBjb21lLCBlYXN5IGdvLjwvcT4iLA0KICAgICAgWzExLCA2XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiT2JsaXZpb24iLA0KICAgICAgbG9jKCJBc2NlbmQgd2l0aCA8Yj4lMTwvYj4gYmFrZWQuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWU5KSkpICsNCiAgICAgICAgIjxxPkJhY2sgdG8gc3F1YXJlIG9uZS48L3E+IiwNCiAgICAgIFsxMSwgNl0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkZyb20gc2NyYXRjaCIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTEyKSkpICsNCiAgICAgICAgIjxxPkl0J3MgYmVlbiBmdW4uPC9xPiIsDQogICAgICBbMTEsIDZdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTEwMTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTmV2ZXJjbGljayIsDQogICAgICBsb2MoIk1ha2UgPGI+JTE8L2I+IGJ5IG9ubHkgaGF2aW5nIGNsaWNrZWQgPGI+JTIgdGltZXM8L2I+LiIsIFsNCiAgICAgICAgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWU2KSksDQogICAgICAgIDE1LA0KICAgICAgXSksDQogICAgICBbMTIsIDBdDQogICAgKTsgLy9HYW1lLmxhc3QucG9vbD0nc2hhZG93JzsNCiAgICBvcmRlciA9IDEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2xpY2t0YXN0aWMiLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMykpKSwNCiAgICAgIFsxMSwgMF0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNsaWNrYXRobG9uIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTUpKSksDQogICAgICBbMTEsIDFdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDbGlja29seW1waWNzIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTcpKSksDQogICAgICBbMTEsIDJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDbGlja29yYW1hIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTkpKSksDQogICAgICBbMTEsIDEzXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2xpY2siLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSgxKSkpLA0KICAgICAgWzAsIDBdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJEb3VibGUtY2xpY2siLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSgyKSkpLA0KICAgICAgWzAsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJNb3VzZSB3aGVlbCIsDQogICAgICBsb2MoIkhhdmUgPGI+JTE8L2I+LiIsIGxvYygiJTEgY3Vyc29yIiwgTEJlYXV0aWZ5KDUwKSkpLA0KICAgICAgWzEsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJPZiBNaWNlIGFuZCBNZW4iLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSgxMDApKSksDQogICAgICBbMCwgMV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRoZSBEaWdpdGFsIiwNCiAgICAgIGxvYygiSGF2ZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBjdXJzb3IiLCBMQmVhdXRpZnkoMjAwKSkpLA0KICAgICAgWzAsIDJdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTA5ODsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJKdXN0IHdyb25nIiwNCiAgICAgIGxvYygiU2VsbCBhIGdyYW5kbWEuIikgKyAiPHE+SSB0aG91Z2h0IHlvdSBsb3ZlZCBtZS48L3E+IiwNCiAgICAgIFsxMCwgOV0NCiAgICApOw0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJHcmFuZG1hJ3MgY29va2llcyIsICIiLCAiR3JhbmRtYSIsIDEpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlNsb3BweSBraXNzZXMiLCAiIiwgIkdyYW5kbWEiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSZXRpcmVtZW50IGhvbWUiLCAiIiwgIkdyYW5kbWEiLCAzKTsNCg0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJCb3VnaHQgdGhlIGZhcm0iLCAiIiwgIkZhcm0iLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSZWFwIHdoYXQgeW91IHNvdyIsICIiLCAiRmFybSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkZhcm0gaWxsIiwgIiIsICJGYXJtIiwgMyk7DQoNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiUHJvZHVjdGlvbiBjaGFpbiIsICIiLCAiRmFjdG9yeSIsIDEpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkluZHVzdHJpYWwgcmV2b2x1dGlvbiIsICIiLCAiRmFjdG9yeSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdsb2JhbCB3YXJtaW5nIiwgIiIsICJGYWN0b3J5IiwgMyk7DQoNCiAgICBvcmRlciA9IDEzMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiWW91IGtub3cgdGhlIGRyaWxsIiwgIiIsICJNaW5lIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRXhjYXZhdGlvbiBzaXRlIiwgIiIsICJNaW5lIiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSG9sbG93IHRoZSBwbGFuZXQiLCAiIiwgIk1pbmUiLCAzKTsNCg0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJFeHBlZGl0aW9uIiwgIiIsICJTaGlwbWVudCIsIDEpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdhbGFjdGljIGhpZ2h3YXkiLCAiIiwgIlNoaXBtZW50IiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRmFyIGZhciBhd2F5IiwgIiIsICJTaGlwbWVudCIsIDMpOw0KDQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRyYW5zbXV0YXRpb24iLCAiIiwgIkFsY2hlbXkgbGFiIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVHJhbnNtb2dyaWZpY2F0aW9uIiwgIiIsICJBbGNoZW15IGxhYiIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdvbGQgbWVtYmVyIiwgIiIsICJBbGNoZW15IGxhYiIsIDMpOw0KDQogICAgb3JkZXIgPSAxNzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkEgd2hvbGUgbmV3IHdvcmxkIiwgIiIsICJQb3J0YWwiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJOb3cgeW91J3JlIHRoaW5raW5nIiwgIiIsICJQb3J0YWwiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJEaW1lbnNpb25hbCBzaGlmdCIsICIiLCAiUG9ydGFsIiwgMyk7DQoNCiAgICBvcmRlciA9IDE4MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGltZSB3YXJwIiwgIiIsICJUaW1lIG1hY2hpbmUiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBbHRlcm5hdGUgdGltZWxpbmUiLCAiIiwgIlRpbWUgbWFjaGluZSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJld3JpdGluZyBoaXN0b3J5IiwgIiIsICJUaW1lIG1hY2hpbmUiLCAzKTsNCg0KICAgIG9yZGVyID0gNzAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJPbmUgd2l0aCBldmVyeXRoaW5nIiwNCiAgICAgIGxvYygiSGF2ZSA8Yj5hdCBsZWFzdCAlMTwvYj4gb2YgZXZlcnkgYnVpbGRpbmcuIiwgMSksDQogICAgICBbMiwgN10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk1hdGhlbWF0aWNpYW4iLA0KICAgICAgbG9jKA0KICAgICAgICAiSGF2ZSBhdCBsZWFzdCA8Yj4xIG9mIHRoZSBtb3N0IGV4cGVuc2l2ZSBvYmplY3QsIDIgb2YgdGhlIHNlY29uZC1tb3N0IGV4cGVuc2l2ZSwgNCBvZiB0aGUgbmV4dDwvYj4gYW5kIHNvIG9uIChjYXBwZWQgYXQgJTEpLiIsDQogICAgICAgIDEyOA0KICAgICAgKSwNCiAgICAgIFsyMywgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJCYXNlIDEwIiwNCiAgICAgIGxvYygNCiAgICAgICAgIkhhdmUgYXQgbGVhc3QgPGI+MTAgb2YgdGhlIG1vc3QgZXhwZW5zaXZlIG9iamVjdCwgMjAgb2YgdGhlIHNlY29uZC1tb3N0IGV4cGVuc2l2ZSwgMzAgb2YgdGhlIG5leHQ8L2I+IGFuZCBzbyBvbi4iDQogICAgICApLA0KICAgICAgWzIzLCAxMl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJHb2xkZW4gY29va2llIiwNCiAgICAgIGxvYygiQ2xpY2sgYSA8Yj5nb2xkZW4gY29va2llPC9iPi4iKSwNCiAgICAgIFsxMCwgMTRdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJMdWNreSBjb29raWUiLA0KICAgICAgbG9jKCJDbGljayA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBnb2xkZW4gY29va2llIiwgTEJlYXV0aWZ5KDcpKSksDQogICAgICBbMjIsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBIHN0cm9rZSBvZiBsdWNrIiwNCiAgICAgIGxvYygiQ2xpY2sgPGI+JTE8L2I+LiIsIGxvYygiJTEgZ29sZGVuIGNvb2tpZSIsIExCZWF1dGlmeSgyNykpKSwNCiAgICAgIFsyMywgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAzMDIwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDaGVhdGVkIGNvb2tpZXMgdGFzdGUgYXdmdWwiLA0KICAgICAgbG9jKCJIYWNrIGluIHNvbWUgY29va2llcy4iKSwNCiAgICAgIFsxMCwgNl0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInNoYWRvdyI7DQogICAgb3JkZXIgPSAxMTAxMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJVbmNhbm55IGNsaWNrZXIiLA0KICAgICAgbG9jKCJDbGljayByZWFsbHksIHJlYWxseSBmYXN0LiIpICsgIjxxPldlbGwgSSdsbCBiZSE8L3E+IiwNCiAgICAgIFsxMiwgMF0NCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkJ1aWxkZXIiLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+LiIsIGxvYygiJTEgYnVpbGRpbmciLCBMQmVhdXRpZnkoMTAwKSkpLA0KICAgICAgWzIsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBcmNoaXRlY3QiLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+LiIsIGxvYygiJTEgYnVpbGRpbmciLCBMQmVhdXRpZnkoNTAwKSkpLA0KICAgICAgWzMsIDZdDQogICAgKTsNCiAgICBvcmRlciA9IDYwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRW5oYW5jZXIiLA0KICAgICAgbG9jKCJQdXJjaGFzZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSB1cGdyYWRlIiwgTEJlYXV0aWZ5KDIwKSkpLA0KICAgICAgWzksIDBdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBdWdtZW50ZXIiLA0KICAgICAgbG9jKCJQdXJjaGFzZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSB1cGdyYWRlIiwgTEJlYXV0aWZ5KDUwKSkpLA0KICAgICAgWzksIDFdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ29va2llLWR1bmtlciIsDQogICAgICBsb2MoIkR1bmsgdGhlIGNvb2tpZS4iKSArICI8cT5Zb3UgZGlkIGl0ITwvcT4iLA0KICAgICAgWzEsIDhdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRm9ydHVuZSIsDQogICAgICBsb2MoIkNsaWNrIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGdvbGRlbiBjb29raWUiLCBMQmVhdXRpZnkoNzcpKSkgKw0KICAgICAgICAiPHE+WW91IHNob3VsZCByZWFsbHkgZ28gdG8gYmVkLjwvcT4iLA0KICAgICAgWzI0LCA2XQ0KICAgICk7DQogICAgb3JkZXIgPSAzMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUcnVlIE5ldmVyY2xpY2siLA0KICAgICAgbG9jKA0KICAgICAgICAiTWFrZSA8Yj4lMTwvYj4gd2l0aCA8Yj5ubzwvYj4gY29va2llIGNsaWNrcy4iLA0KICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTYpKQ0KICAgICAgKSArICI8cT5UaGlzIGtpbmRhIGRlZmVhdHMgdGhlIHdob2xlIHB1cnBvc2UsIGRvZXNuJ3QgaXQ/PC9xPiIsDQogICAgICBbMTIsIDBdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOw0KDQogICAgb3JkZXIgPSAyMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJFbGRlciBuYXAiLA0KICAgICAgbG9jKCJBcHBlYXNlIHRoZSBncmFuZG1hdHJpYXJjaHMgYXQgbGVhc3QgPGI+b25jZTwvYj4uIikgKw0KICAgICAgICAiPHE+d2U8YnI+YXJlPGJyPmV0ZXJuYWw8L3E+IiwNCiAgICAgIFs4LCA5XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRWxkZXIgc2x1bWJlciIsDQogICAgICBsb2MoIkFwcGVhc2UgdGhlIGdyYW5kbWF0cmlhcmNocyBhdCBsZWFzdCA8Yj4lMSB0aW1lczwvYj4uIiwgNSkgKw0KICAgICAgICAiPHE+b3VyIG1pbmQ8YnI+b3V0bGl2ZXM8YnI+dGhlIHVuaXZlcnNlPC9xPiIsDQogICAgICBbOCwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDk4Ow0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkVsZGVyIiwNCiAgICAgIGxvYygiT3duIGF0IGxlYXN0IDxiPiUxPC9iPiBncmFuZG1hIHR5cGVzLiIsIDcpLA0KICAgICAgWzEwLCA5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIwMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkVsZGVyIGNhbG0iLA0KICAgICAgbG9jKCJEZWNsYXJlIGEgY292ZW5hbnQgd2l0aCB0aGUgZ3JhbmRtYXRyaWFyY2hzLiIpICsNCiAgICAgICAgIjxxPndlPGJyPmhhdmU8YnI+ZmVkPC9xPiIsDQogICAgICBbOCwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkVuZ2luZWVyIiwNCiAgICAgIGxvYygiT3duIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGJ1aWxkaW5nIiwgTEJlYXV0aWZ5KDEwMDApKSksDQogICAgICBbNCwgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJMZXByZWNoYXVuIiwNCiAgICAgIGxvYygiQ2xpY2sgPGI+JTE8L2I+LiIsIGxvYygiJTEgZ29sZGVuIGNvb2tpZSIsIExCZWF1dGlmeSg3NzcpKSksDQogICAgICBbMjUsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJCbGFjayBjYXQncyBwYXciLA0KICAgICAgbG9jKCJDbGljayA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBnb2xkZW4gY29va2llIiwgTEJlYXV0aWZ5KDc3NzcpKSksDQogICAgICBbMjYsIDZdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMzAwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTmloaWxpc20iLA0KICAgICAgbG9jKCJBc2NlbmQgd2l0aCA8Yj4lMTwvYj4gYmFrZWQuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUxNSkpKSArDQogICAgICAgICI8cT5UaGVyZSBhcmUgbWFueSB0aGluZ3M8YnI+dGhhdCBuZWVkIHRvIGJlIGVyYXNlZDwvcT4iLA0KICAgICAgWzExLCA3XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQW50aWJhdHRlciIsICIiLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJRdWlya3kgcXVhcmtzIiwgIiIsICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkl0IGRvZXMgbWF0dGVyISIsICIiLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCAzKTsNCg0KICAgIG9yZGVyID0gNjAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJVcGdyYWRlciIsDQogICAgICBsb2MoIlB1cmNoYXNlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIHVwZ3JhZGUiLCBMQmVhdXRpZnkoMTAwKSkpLA0KICAgICAgWzksIDJdDQogICAgKTsNCg0KICAgIG9yZGVyID0gNzAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDZW50ZW5uaWFsIiwNCiAgICAgIGxvYygiSGF2ZSBhdCBsZWFzdCA8Yj4lMSBvZiBldmVyeXRoaW5nPC9iPi4iLCAxMDApLA0KICAgICAgWzYsIDZdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMzA1MDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSGFyZGNvcmUiLA0KICAgICAgbG9jKA0KICAgICAgICAiR2V0IHRvIDxiPiUxPC9iPiBiYWtlZCB3aXRoIDxiPm5vIHVwZ3JhZGVzIHB1cmNoYXNlZDwvYj4uIiwNCiAgICAgICAgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWU5KSkNCiAgICAgICksDQogICAgICBbMTIsIDZdDQogICAgKTsgLy9HYW1lLmxhc3QucG9vbD0nc2hhZG93JzsNCg0KICAgIG9yZGVyID0gMzA2MDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3BlZWQgYmFraW5nIEkiLA0KICAgICAgbG9jKCJHZXQgdG8gPGI+JTE8L2I+IGJha2VkIGluIDxiPiUyPC9iPi4iLCBbDQogICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNikpLA0KICAgICAgICBHYW1lLnNheVRpbWUoNjAgKiAzNSAqIEdhbWUuZnBzKSwNCiAgICAgIF0pLA0KICAgICAgWzEyLCA1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJTcGVlZCBiYWtpbmcgSUkiLA0KICAgICAgbG9jKCJHZXQgdG8gPGI+JTE8L2I+IGJha2VkIGluIDxiPiUyPC9iPi4iLCBbDQogICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNikpLA0KICAgICAgICBHYW1lLnNheVRpbWUoNjAgKiAyNSAqIEdhbWUuZnBzKSwNCiAgICAgIF0pLA0KICAgICAgWzEzLCA1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJTcGVlZCBiYWtpbmcgSUlJIiwNCiAgICAgIGxvYygiR2V0IHRvIDxiPiUxPC9iPiBiYWtlZCBpbiA8Yj4lMjwvYj4uIiwgWw0KICAgICAgICBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTYpKSwNCiAgICAgICAgR2FtZS5zYXlUaW1lKDYwICogMTUgKiBHYW1lLmZwcyksDQogICAgICBdKSwNCiAgICAgIFsxNCwgNV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInNoYWRvdyI7DQoNCiAgICBvcmRlciA9IDYxMDAwOw0KICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJHZXR0aW5nIGV2ZW4gd2l0aCB0aGUgb3ZlbiIsDQogICAgICBFTg0KICAgICAgICA/ICJEZWZlYXQgdGhlIDxiPlNlbnRpZW50IEZ1cm5hY2U8L2I+IGluIHRoZSBmYWN0b3J5IGR1bmdlb25zLiINCiAgICAgICAgOiAiPz8/IiwNCiAgICAgIFsxMiwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gImR1bmdlb24iOw0KICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJOb3cgdGhpcyBpcyBwb2Qtc21hc2hpbmciLA0KICAgICAgRU4NCiAgICAgICAgPyAiRGVmZWF0IHRoZSA8Yj5Bc2NlbmRlZCBCYWtpbmcgUG9kPC9iPiBpbiB0aGUgZmFjdG9yeSBkdW5nZW9ucy4iDQogICAgICAgIDogIj8/PyIsDQogICAgICBbMTIsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJkdW5nZW9uIjsNCiAgICB2YXIgYWNoaWV2ID0gbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2hpcnBlZCBvdXQiLA0KICAgICAgRU4NCiAgICAgICAgPyAiRmluZCBhbmQgZGVmZWF0IDxiPkNoaXJweTwvYj4sIHRoZSBkeXNmdW5jdGlvbm5pbmcgYWxhcm0gYm90LiINCiAgICAgICAgOiAiPz8/IiwNCiAgICAgIFsxMywgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gImR1bmdlb24iOw0KICAgIHZhciBhY2hpZXYgPSBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJGb2xsb3cgdGhlIHdoaXRlIHJhYmJpdCIsDQogICAgICBFTiA/ICJGaW5kIGFuZCBkZWZlYXQgdGhlIGVsdXNpdmUgPGI+c3VnYXIgYnVubnk8L2I+LiIgOiAiPz8/IiwNCiAgICAgIFsxNCwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gImR1bmdlb24iOw0KDQogICAgb3JkZXIgPSAxMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNsaWNrYXNtaWMiLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMTEpKSksDQogICAgICBbMTEsIDE0XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRnJpZW5kIG9mIHRoZSBhbmNpZW50cyIsICIiLCAiR3JhbmRtYSIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJ1bGVyIG9mIHRoZSBhbmNpZW50cyIsICIiLCAiR3JhbmRtYSIsIDUpOw0KDQogICAgb3JkZXIgPSAzMjAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJXaG9sZXNvbWUiLA0KICAgICAgbG9jKCJVbmxvY2sgPGI+MTAwJTwvYj4gb2YgeW91ciBoZWF2ZW5seSBjaGlwcyBwb3dlci4iKSwNCiAgICAgIFsxNSwgN10NCiAgICApOw0KDQogICAgb3JkZXIgPSAzMzAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJKdXN0IHBsYWluIGx1Y2t5IiwNCiAgICAgIGxvYygNCiAgICAgICAgIllvdSBoYXZlIDxiPjEgY2hhbmNlIGluICUxPC9iPiBldmVyeSBzZWNvbmQgb2YgZWFybmluZyB0aGlzIGFjaGlldmVtZW50LiIsDQogICAgICAgIEJlYXV0aWZ5KDEwMDAwMDApDQogICAgICApLA0KICAgICAgWzE1LCA2XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCg0KICAgIG9yZGVyID0gMjEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSXRjaHNjcmF0Y2hlciIsDQogICAgICBsb2MoIkJ1cnN0IDxiPjEgd3JpbmtsZXI8L2I+LiIpLA0KICAgICAgWzE5LCA4XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiV3JpbmtsZXNxdWlzaGVyIiwNCiAgICAgIGxvYygiQnVyc3QgPGI+JTEgd3JpbmtsZXJzPC9iPi4iLCA1MCksDQogICAgICBbMTksIDhdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJNb2lzdGJ1cnN0ZXIiLA0KICAgICAgbG9jKCJCdXJzdCA8Yj4lMSB3cmlua2xlcnM8L2I+LiIsIDIwMCksDQogICAgICBbMTksIDhdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjIwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3Bvb2t5IGNvb2tpZXMiLA0KICAgICAgbG9jKA0KICAgICAgICAnVW5sb2NrIDxiPmV2ZXJ5IEhhbGxvd2Vlbi10aGVtZWQgY29va2llPC9iPi48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5Pd25pbmcgdGhpcyBhY2hpZXZlbWVudCBtYWtlcyBIYWxsb3dlZW4tdGhlbWVkIGNvb2tpZXMgZHJvcCBtb3JlIGZyZXF1ZW50bHkgaW4gZnV0dXJlIHBsYXl0aHJvdWdocy4nDQogICAgICApLA0KICAgICAgWzEyLCA4XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIyMTAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNvbWluZyB0byB0b3duIiwNCiAgICAgIGxvYygiUmVhY2ggPGI+U2FudGEncyA3dGggZm9ybTwvYj4uIiksDQogICAgICBbMTgsIDldDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBbGwgaGFpbCBTYW50YSIsDQogICAgICBsb2MoIlJlYWNoIDxiPlNhbnRhJ3MgZmluYWwgZm9ybTwvYj4uIiksDQogICAgICBbMTksIDEwXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTGV0IGl0IHNub3ciLA0KICAgICAgbG9jKA0KICAgICAgICAnVW5sb2NrIDxiPmV2ZXJ5IENocmlzdG1hcy10aGVtZWQgY29va2llPC9iPi48ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj5Pd25pbmcgdGhpcyBhY2hpZXZlbWVudCBtYWtlcyBDaHJpc3RtYXMtdGhlbWVkIGNvb2tpZXMgZHJvcCBtb3JlIGZyZXF1ZW50bHkgaW4gZnV0dXJlIHBsYXl0aHJvdWdocy4nDQogICAgICApLA0KICAgICAgWzE5LCA5XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIk9oIGRlZXIiLCBsb2MoIlBvcCA8Yj4xIHJlaW5kZWVyPC9iPi4iKSwgWzEyLCA5XSk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2xlaWdoIG9mIGhhbmQiLA0KICAgICAgbG9jKCJQb3AgPGI+JTEgcmVpbmRlZXI8L2I+LiIsIDUwKSwNCiAgICAgIFsxMiwgOV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlJlaW5kZWVyIHNsZWlnaGVyIiwNCiAgICAgIGxvYygiUG9wIDxiPiUxIHJlaW5kZWVyPC9iPi4iLCAyMDApLA0KICAgICAgWzEyLCA5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEyMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiUGVyZmVjdGVkIGFncmljdWx0dXJlIiwgIiIsICJGYXJtIiwgNCk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlVsdGltYXRlIGF1dG9tYXRpb24iLCAiIiwgIkZhY3RvcnkiLCA0KTsNCiAgICBvcmRlciA9IDEzMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQ2FuIHlvdSBkaWcgaXQiLCAiIiwgIk1pbmUiLCA0KTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVHlwZSBJSSBjaXZpbGl6YXRpb24iLCAiIiwgIlNoaXBtZW50IiwgNCk7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdpbGQgd2FycyIsICIiLCAiQWxjaGVteSBsYWIiLCA0KTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQnJhaW4tc3BsaXQiLCAiIiwgIlBvcnRhbCIsIDQpOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaW1lIGR1a2UiLCAiIiwgIlRpbWUgbWFjaGluZSIsIDQpOw0KICAgIG9yZGVyID0gMTkwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNb2xlY3VsYXIgbWFlc3RybyIsICIiLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCA0KTsNCg0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJMb25lIHBob3RvbiIsICIiLCAiUHJpc20iLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJEYXp6bGluZyBnbGltbWVyIiwgIiIsICJQcmlzbSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkJsaW5kaW5nIGZsYXNoIiwgIiIsICJQcmlzbSIsIDMpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlVuZW5kaW5nIGdsb3ciLCAiIiwgIlByaXNtIiwgNCk7DQoNCiAgICBvcmRlciA9IDUwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTG9yZCBvZiBDb25zdHJ1Y3RzIiwNCiAgICAgIGxvYygiT3duIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGJ1aWxkaW5nIiwgTEJlYXV0aWZ5KDI1MDApKSkgKw0KICAgICAgICAiPHE+SGUgc2F3IHRoZSB2YXN0IHBsYWlucyBzdHJldGNoaW5nIGFoZWFkIG9mIGhpbSwgYW5kIGhlIHNhaWQgOiBsZXQgdGhlcmUgYmUgY2l2aWxpemF0aW9uLjwvcT4iLA0KICAgICAgWzUsIDZdDQogICAgKTsNCiAgICBvcmRlciA9IDYwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTG9yZCBvZiBQcm9ncmVzcyIsDQogICAgICBsb2MoIlB1cmNoYXNlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIHVwZ3JhZGUiLCBMQmVhdXRpZnkoMjAwKSkpICsNCiAgICAgICAgIjxxPk9uZSBjYW4gYWx3YXlzIGRvIGJldHRlci4gQnV0IHNob3VsZCB5b3U/PC9xPiIsDQogICAgICBbOSwgMTRdDQogICAgKTsNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQmljZW50ZW5uaWFsIiwNCiAgICAgIGxvYygiSGF2ZSBhdCBsZWFzdCA8Yj4lMSBvZiBldmVyeXRoaW5nPC9iPi4iLCAyMDApICsNCiAgICAgICAgIjxxPllvdSBjcmF6eSBwZXJzb24uPC9xPiIsDQogICAgICBbOCwgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMjMwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJMb3ZlbHkgY29va2llcyIsDQogICAgICBsb2MoIlVubG9jayA8Yj5ldmVyeSBWYWxlbnRpbmUtdGhlbWVkIGNvb2tpZTwvYj4uIiksDQogICAgICBbMjAsIDNdDQogICAgKTsNCg0KICAgIG9yZGVyID0gNzAwMTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDZW50ZW5uaWFsIGFuZCBhIGhhbGYiLA0KICAgICAgbG9jKCJIYXZlIGF0IGxlYXN0IDxiPiUxIG9mIGV2ZXJ5dGhpbmc8L2I+LiIsIDE1MCksDQogICAgICBbNywgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaW55IGNvb2tpZSIsDQogICAgICBsb2MoIkNsaWNrIHRoZSB0aW55IGNvb2tpZS4iKSArDQogICAgICAgICI8cT5UaGVzZSBhcmVuJ3QgdGhlIGNvb2tpZXM8YnI+eW91J3JlIGNsaWNraW5nIGZvci48L3E+IiwNCiAgICAgIFswLCA1XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDQwMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJZb3Ugd2luIGEgY29va2llIiwNCiAgICAgIGxvYygNCiAgICAgICAgIlRoaXMgaXMgZm9yIGJha2luZyAlMSBhbmQgbWFraW5nIGl0IG9uIHRoZSBsb2NhbCBuZXdzLiIsDQogICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMTQpKQ0KICAgICAgKSArICI8cT5XZSdyZSBhbGwgc28gcHJvdWQgb2YgeW91LjwvcT4iLA0KICAgICAgWzEwLCAwXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwNzA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkNsaWNrIGRlbGVnYXRvciIsICJDdXJzb3IiLCAxLCAwLCA3KTsNCiAgICBvcmRlciA9IDExMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkd1c2hpbmcgZ3Jhbm5pZXMiLCAiR3JhbmRtYSIsIDEsIDAsIDYpOw0KICAgIG9yZGVyID0gMTIyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiSSBoYXRlIG1hbnVyZSIsICJGYXJtIiwgMSk7DQogICAgb3JkZXIgPSAxMzIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJOZXZlciBkaWcgZG93biIsICJNaW5lIiwgMSk7DQogICAgb3JkZXIgPSAxNDIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJUaGUgaW5jcmVkaWJsZSBtYWNoaW5lIiwgIkZhY3RvcnkiLCAxKTsNCiAgICBvcmRlciA9IDE1MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkFuZCBiZXlvbmQiLCAiU2hpcG1lbnQiLCAxKTsNCiAgICBvcmRlciA9IDE2MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk1hZ251bSBPcHVzIiwgIkFsY2hlbXkgbGFiIiwgMSk7DQogICAgb3JkZXIgPSAxNzIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJXaXRoIHN0cmFuZ2UgZW9ucyIsICJQb3J0YWwiLCAxKTsNCiAgICBvcmRlciA9IDE4MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlNwYWNldGltZSBqaWdhbWFyb28iLCAiVGltZSBtYWNoaW5lIiwgMSk7DQogICAgb3JkZXIgPSAxOTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJTdXBlcm1hc3NpdmUiLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCAxKTsNCiAgICBvcmRlciA9IDIwMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlByYWlzZSB0aGUgc3VuIiwgIlByaXNtIiwgMSk7DQoNCiAgICBvcmRlciA9IDEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2xpY2thZ2VkZG9uIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTEzKSkpLA0KICAgICAgWzExLCAxNV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNsaWNrbmFyb2siLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMTUpKSksDQogICAgICBbMTEsIDE2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRXh0cmVtZSBwb2x5ZGFjdHlseSIsDQogICAgICBsb2MoIkhhdmUgPGI+JTE8L2I+LiIsIGxvYygiJTEgY3Vyc29yIiwgTEJlYXV0aWZ5KDMwMCkpKSwNCiAgICAgIFswLCAxM10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkRyLiBUIiwNCiAgICAgIGxvYygiSGF2ZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBjdXJzb3IiLCBMQmVhdXRpZnkoNDAwKSkpLA0KICAgICAgWzAsIDE0XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJUaGUgb2xkIG5ldmVyIGJvdGhlcmVkIG1lIGFueXdheSIsDQogICAgICAiIiwNCiAgICAgICJHcmFuZG1hIiwNCiAgICAgIDYNCiAgICApOw0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJIb21lZ3Jvd24iLCAiIiwgIkZhcm0iLCA1KTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGVjaG5vY3JhY3kiLCAiIiwgIkZhY3RvcnkiLCA1KTsNCiAgICBvcmRlciA9IDEzMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIGNlbnRlciBvZiB0aGUgRWFydGgiLCAiIiwgIk1pbmUiLCA1KTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2UgY29tZSBpbiBwZWFjZSIsICIiLCAiU2hpcG1lbnQiLCA1KTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIHNlY3JldHMgb2YgdGhlIHVuaXZlcnNlIiwgIiIsICJBbGNoZW15IGxhYiIsIDUpOw0KICAgIG9yZGVyID0gMTcwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSZWFsbSBvZiB0aGUgTWFkIEdvZCIsICIiLCAiUG9ydGFsIiwgNSk7DQogICAgb3JkZXIgPSAxODAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkZvcmV2ZXIgYW5kIGV2ZXIiLCAiIiwgIlRpbWUgbWFjaGluZSIsIDUpOw0KICAgIG9yZGVyID0gMTkwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJXYWxrIHRoZSBwbGFuY2siLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgNSk7DQogICAgb3JkZXIgPSAyMDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJpc2UgYW5kIHNoaW5lIiwgIiIsICJQcmlzbSIsIDUpOw0KDQogICAgb3JkZXIgPSAzMDIwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJHb2QgY29tcGxleCIsDQogICAgICBsb2MoDQogICAgICAgICdOYW1lIHlvdXJzZWxmIDxiPk9ydGVpbDwvYj4uPGRpdiBjbGFzcz0id2FybmluZyI+Tm90ZTogdXN1cnBlcnMgaW5jdXIgYSAtJTElIENwUyBwZW5hbHR5IHVudGlsIHRoZXkgcmVuYW1lIHRoZW1zZWx2ZXMgc29tZXRoaW5nIGVsc2UuPC9kaXY+JywNCiAgICAgICAgMQ0KICAgICAgKSArICI8cT5CdXQgdGhhdCdzIG5vdCB5b3UsIGlzIGl0PzwvcT4iLA0KICAgICAgWzE3LCA1XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGlyZC1wYXJ0eSIsDQogICAgICBsb2MoIlVzZSBhbiA8Yj5hZGQtb248L2I+LiIpICsNCiAgICAgICAgIjxxPlNvbWUgZmluZCB2YW5pbGxhIHRvIGJlIHRoZSBtb3N0IGJvcmluZyBmbGF2b3IuPC9xPiIsDQogICAgICBbMTYsIDVdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOyAvL2lmIHlvdSdyZSBtYWtpbmcgYSBtb2QsIGFkZCBhIEdhbWUuV2luKCdUaGlyZC1wYXJ0eScpIHNvbWV3aGVyZSBpbiB0aGVyZSENCg0KICAgIG9yZGVyID0gMzAwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRGVtYXRlcmlhbGl6ZSIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTE4KSkpICsNCiAgICAgICAgIjxxPlByZXN0byE8YnI+Li4ud2hlcmUnZCB0aGUgY29va2llcyBnbz88L3E+IiwNCiAgICAgIFsxMSwgN10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk5pbCB6ZXJvIHppbGNoIiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMjEpKSkgKw0KICAgICAgICAiPHE+VG8gc3VtbWFyaXplIDogcmVhbGx5IG5vdCB2ZXJ5IG11Y2ggYXQgYWxsLjwvcT4iLA0KICAgICAgWzExLCA3XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiVHJhbnNjZW5kZW5jZSIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTI0KSkpICsNCiAgICAgICAgIjxxPllvdXIgY29va2llcyBhcmUgbm93IG9uIGEgaGlnaGVyIHBsYW5lIG9mIGJlaW5nLjwvcT4iLA0KICAgICAgWzExLCA4XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiT2JsaXRlcmF0ZSIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTI3KSkpICsNCiAgICAgICAgIjxxPlJlc2lzdGFuY2UgaXMgZnV0aWxlLCBhbGJlaXQgZW50ZXJ0YWluaW5nLjwvcT4iLA0KICAgICAgWzExLCA4XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTmVnYXRpdmUgdm9pZCIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTMwKSkpICsNCiAgICAgICAgIjxxPllvdSBub3cgaGF2ZSBzbyBmZXcgY29va2llcyB0aGF0IGl0J3MgYWxtb3N0IGxpa2UgeW91IGhhdmUgYSBuZWdhdGl2ZSBhbW91bnQgb2YgdGhlbS48L3E+IiwNCiAgICAgIFsxMSwgOF0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMjQwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGUgaHVudCBpcyBvbiIsDQogICAgICBsb2MoIlVubG9jayA8Yj4xIGVnZzwvYj4uIiksDQogICAgICBbMSwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJFZ2dpbmcgb24iLA0KICAgICAgbG9jKCJVbmxvY2sgPGI+JTEgZWdnczwvYj4uIiwgNyksDQogICAgICBbNCwgMTJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJNYXNzIEVhc3RlcmlhIiwNCiAgICAgIGxvYygiVW5sb2NrIDxiPiUxIGVnZ3M8L2I+LiIsIDE0KSwNCiAgICAgIFs3LCAxMl0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkhpZGUgJiBzZWVrIGNoYW1waW9uIiwNCiAgICAgIGxvYygNCiAgICAgICAgJ1VubG9jayA8Yj5hbGwgdGhlIGVnZ3M8L2I+LjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pk93bmluZyB0aGlzIGFjaGlldmVtZW50IG1ha2VzIGVnZ3MgZHJvcCBtb3JlIGZyZXF1ZW50bHkgaW4gZnV0dXJlIHBsYXl0aHJvdWdocy4nDQogICAgICApLA0KICAgICAgWzEzLCAxMl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJXaGF0J3MgaW4gYSBuYW1lIiwNCiAgICAgIGxvYygiR2l2ZSB5b3VyIGJha2VyeSBhIG5hbWUuIiksDQogICAgICBbMTUsIDldDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJQcmV0dHkgcGVubnkiLCAiIiwgIkJhbmsiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJGaXQgdGhlIGJpbGwiLCAiIiwgIkJhbmsiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBIGxvYW4gaW4gdGhlIGRhcmsiLCAiIiwgIkJhbmsiLCAzKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJOZWVkIGZvciBncmVlZCIsICIiLCAiQmFuayIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkl0J3MgdGhlIGVjb25vbXksIHN0dXBpZCIsICIiLCAiQmFuayIsIDUpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJZb3VyIHRpbWUgdG8gc2hyaW5lIiwgIiIsICJUZW1wbGUiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTaGFkeSBzZWN0IiwgIiIsICJUZW1wbGUiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJOZXctYWdlIGN1bHQiLCAiIiwgIlRlbXBsZSIsIDMpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk9yZ2FuaXplZCByZWxpZ2lvbiIsICIiLCAiVGVtcGxlIiwgNCk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRmFuYXRpY2lzbSIsICIiLCAiVGVtcGxlIiwgNSk7DQogICAgb3JkZXIgPSAxNDc1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkJld2l0Y2hlZCIsICIiLCAiV2l6YXJkIHRvd2VyIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIHNvcmNlcmVyJ3MgYXBwcmVudGljZSIsICIiLCAiV2l6YXJkIHRvd2VyIiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQ2hhcm1zIGFuZCBlbmNoYW50bWVudHMiLCAiIiwgIldpemFyZCB0b3dlciIsIDMpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkN1cnNlcyBhbmQgbWFsZWRpY3Rpb25zIiwgIiIsICJXaXphcmQgdG93ZXIiLCA0KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNYWdpYyBraW5nZG9tIiwgIiIsICJXaXphcmQgdG93ZXIiLCA1KTsNCg0KICAgIG9yZGVyID0gMTQ0NTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiVmVzdGVkIGludGVyZXN0IiwgIkJhbmsiLCAxKTsNCiAgICBvcmRlciA9IDE0NzA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk5ldyB3b3JsZCBvcmRlciIsICJUZW1wbGUiLCAxKTsNCiAgICBvcmRlciA9IDE0OTU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkhvY3VzIHBvY3VzIiwgIldpemFyZCB0b3dlciIsIDEpOw0KDQogICAgb3JkZXIgPSAxMDcwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJGaW5nZXIgY2xpY2tpbicgZ29vZCIsICJDdXJzb3IiLCAyLCAwLCA3KTsNCiAgICBvcmRlciA9IDExMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlBhbmljIGF0IHRoZSBiaW5nbyIsICJHcmFuZG1hIiwgMiwgMCwgNik7DQogICAgb3JkZXIgPSAxMjIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJSYWtlIGluIHRoZSBkb3VnaCIsICJGYXJtIiwgMik7DQogICAgb3JkZXIgPSAxMzIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJRdWFycnkgb24iLCAiTWluZSIsIDIpOw0KICAgIG9yZGVyID0gMTQyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiWWVzIEkgbG92ZSB0ZWNobm9sb2d5IiwgIkZhY3RvcnkiLCAyKTsNCiAgICBvcmRlciA9IDE0NDU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlBhaWQgaW4gZnVsbCIsICJCYW5rIiwgMik7DQogICAgb3JkZXIgPSAxNDcwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJDaHVyY2ggb2YgQ29va2lvbG9neSIsICJUZW1wbGUiLCAyKTsNCiAgICBvcmRlciA9IDE0OTU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoDQogICAgICAiVG9vIG1hbnkgcmFiYml0cywgbm90IGVub3VnaCBoYXRzIiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgMg0KICAgICk7DQogICAgb3JkZXIgPSAxNTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJUaGUgbW9zdCBwcmVjaW91cyBjYXJnbyIsICJTaGlwbWVudCIsIDIpOw0KICAgIG9yZGVyID0gMTYyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiVGhlIEF1cmVhdGUiLCAiQWxjaGVteSBsYWIiLCAyKTsNCiAgICBvcmRlciA9IDE3MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkV2ZXIgbW9yZSBoaWRlb3VzIiwgIlBvcnRhbCIsIDIpOw0KICAgIG9yZGVyID0gMTgyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiQmUga2luZCwgcmV3aW5kIiwgIlRpbWUgbWFjaGluZSIsIDIpOw0KICAgIG9yZGVyID0gMTkyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiSW5maW5pdGVzaW1hbCIsICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsIDIpOw0KICAgIG9yZGVyID0gMjAyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiQSBzdGlsbCBtb3JlIGdsb3Jpb3VzIGRhd24iLCAiUHJpc20iLCAyKTsNCg0KICAgIG9yZGVyID0gMzAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIlJlYmlydGgiLCBsb2MoIkFzY2VuZCBhdCBsZWFzdCBvbmNlLiIpLCBbMjEsIDZdKTsNCg0KICAgIG9yZGVyID0gMTEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSGVyZSB5b3UgZ28iLA0KICAgICAgbG9jKCJDbGljayB0aGlzIGFjaGlldmVtZW50J3Mgc2xvdC4iKSArDQogICAgICAgICI8cT5BbGwgeW91IGhhZCB0byBkbyB3YXMgYXNrLjwvcT4iLA0KICAgICAgWzEsIDddDQogICAgKTsNCiAgICBHYW1lLmxhc3QuY2xpY2tGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIkhlcmUgeW91IGdvIikpIHsNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvdGljay5tcDMiKTsNCiAgICAgICAgR2FtZS5XaW4oIkhlcmUgeW91IGdvIik7DQogICAgICB9DQogICAgfTsNCg0KICAgIG9yZGVyID0gMzAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUmVzdXJyZWN0aW9uIiwNCiAgICAgIGxvYygiQXNjZW5kIDxiPiUxIHRpbWVzPC9iPi4iLCAxMCksDQogICAgICBbMjEsIDZdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJSZWluY2FybmF0aW9uIiwNCiAgICAgIGxvYygiQXNjZW5kIDxiPiUxIHRpbWVzPC9iPi4iLCAxMDApLA0KICAgICAgWzIxLCA2XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRW5kbGVzcyBjeWNsZSIsDQogICAgICBsb2MoIkFzY2VuZCA8Yj4lMSB0aW1lczwvYj4uIiwgMTAwMCkgKyAiPHE+T2ggaGV5LCBpdCdzIHlvdSBhZ2Fpbi48L3E+IiwNCiAgICAgIFsyLCA3XQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCg0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGUgYWdlbWFzdGVyIiwgIiIsICJHcmFuZG1hIiwgNyk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVG8gb2xkbHkgZ28iLCAiIiwgIkdyYW5kbWEiLCA4KTsNCg0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJHYXJkZW5lciBleHRyYW9yZGluYWlyZSIsICIiLCAiRmFybSIsIDYpOw0KICAgIG9yZGVyID0gMTMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUZWN0b25pYyBhbWJhc3NhZG9yIiwgIiIsICJNaW5lIiwgNik7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJpc2Ugb2YgdGhlIG1hY2hpbmVzIiwgIiIsICJGYWN0b3J5IiwgNik7DQogICAgb3JkZXIgPSAxNDI1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkFjcXVpcmUgY3VycmVuY3kiLCAiIiwgIkJhbmsiLCA2KTsNCiAgICBvcmRlciA9IDE0NTA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiWmVhbG90cnkiLCAiIiwgIlRlbXBsZSIsIDYpOw0KICAgIG9yZGVyID0gMTQ3NTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGUgd2l6YXJkaW5nIHdvcmxkIiwgIiIsICJXaXphcmQgdG93ZXIiLCA2KTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiUGFyc2VjLW1hc2hlciIsICIiLCAiU2hpcG1lbnQiLCA2KTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIHdvcmsgb2YgYSBsaWZldGltZSIsICIiLCAiQWxjaGVteSBsYWIiLCA2KTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQSBwbGFjZSBsb3N0IGluIHRpbWUiLCAiIiwgIlBvcnRhbCIsIDYpOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJIZWF0IGRlYXRoIiwgIiIsICJUaW1lIG1hY2hpbmUiLCA2KTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWljcm9jb3NtIiwgIiIsICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsIDYpOw0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJCcmlnaHQgZnV0dXJlIiwgIiIsICJQcmlzbSIsIDYpOw0KDQogICAgb3JkZXIgPSAyNTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJIZXJlIGJlIGRyYWdvbiIsDQogICAgICBsb2MoIkNvbXBsZXRlIHlvdXIgPGI+ZHJhZ29uJ3MgdHJhaW5pbmc8L2I+LiIpLA0KICAgICAgWzIxLCAxMl0NCiAgICApOw0KDQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkhvdz8iKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiVGhlIGxhbmQgb2YgbWlsayBhbmQgY29va2llcyIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KA0KICAgICAgIkhlIHdobyBjb250cm9scyB0aGUgY29va2llcyBjb250cm9scyB0aGUgdW5pdmVyc2UiLA0KICAgICAgIlRoZSBtaWxrIG11c3QgZmxvdyEiDQogICAgKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiVG9uaWdodCBvbiBIb2FyZGVycyIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJBcmUgeW91IGdvbm5hIGVhdCBhbGwgdGhhdD8iKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiV2UncmUgZ29ubmEgbmVlZCBhIGJpZ2dlciBiYWtlcnkiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgNCiAgICAgICJJbiB0aGUgbW91dGggb2YgbWFkbmVzcyIsDQogICAgICAiQSBjb29raWUgaXMganVzdCB3aGF0IHdlIHRlbGwgZWFjaCBvdGhlciBpdCBpcy4iDQogICAgKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgNCiAgICAgICdCcm91Z2h0IHRvIHlvdSBieSB0aGUgbGV0dGVyIDxkaXYgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQ6dXJsKGltZy9tb25leS5wbmcpO3dpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7Ij48L2Rpdj4nDQogICAgKTsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkEgd29ybGQgZmlsbGVkIHdpdGggY29va2llcyIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiV2hlbiB0aGlzIGJhYnkgaGl0cyAiICsNCiAgICAgICAgQmVhdXRpZnkoMTAwMDAwMDAwMDAwMDAgKiA2MCAqIDYwKSArDQogICAgICAgICIgY29va2llcyBwZXIgaG91ciINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkZhc3QgYW5kIGRlbGljaW91cyIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiQ29va2llaGVydHogOiBhIHJlYWxseSwgcmVhbGx5IHRhc3R5IGhlcnR6IiwNCiAgICAgICJUYXN0aWVyIHRoYW4gYSBoZXJ0eiBkb251dCwgYW55d2F5LiINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIldvb3BzLCB5b3Ugc29sdmVkIHdvcmxkIGh1bmdlciIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiVHVyYm9wdW5zIiwNCiAgICAgICdNb3RoZXIgTmF0dXJlIHdpbGwgYmUgbGlrZSAic2xvd3d3d3cgZG93d3d3d24iLicNCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkZhc3RlciBtZW5uZXIiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJBbmQgeWV0IHlvdSdyZSBzdGlsbCBodW5ncnkiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJUaGUgQWJha2VuaW5nIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgNCiAgICAgICJUaGVyZSdzIHJlYWxseSBubyBoYXJkIGxpbWl0IHRvIGhvdyBsb25nIHRoZXNlIGFjaGlldmVtZW50IG5hbWVzIGNhbiBiZSBhbmQgdG8gYmUgcXVpdGUgaG9uZXN0IEknbSByYXRoZXIgY3VyaW91cyB0byBzZWUgaG93IGZhciB3ZSBjYW4gZ28uPGJyPkFkb2xwaHVzIFcuIEdyZWVuICgxODQ04oCTMTkxNykgc3RhcnRlZCBhcyB0aGUgUHJpbmNpcGFsIG9mIHRoZSBHcm90b24gU2Nob29sIGluIDE4NjQuIEJ5IDE4NjUsIGhlIGJlY2FtZSBzZWNvbmQgYXNzaXN0YW50IGxpYnJhcmlhbiBhdCB0aGUgTmV3IFlvcmsgTWVyY2FudGlsZSBMaWJyYXJ5OyBmcm9tIDE4NjcgdG8gMTg2OSwgaGUgd2FzIHByb21vdGVkIHRvIGZ1bGwgbGlicmFyaWFuLiBGcm9tIDE4NjkgdG8gMTg3MywgaGUgd29ya2VkIGZvciBFdmFydHMsIFNvdXRobWF5ZCAmIENob2F0ZSwgYSBsYXcgZmlybSBjby1mb3VuZGVkIGJ5IFdpbGxpYW0gTS4gRXZhcnRzLCBDaGFybGVzIEZlcmRpbmFuZCBTb3V0aG1heWQgYW5kIEpvc2VwaCBIb2RnZXMgQ2hvYXRlLiBIZSB3YXMgYWRtaXR0ZWQgdG8gdGhlIE5ldyBZb3JrIFN0YXRlIEJhciBBc3NvY2lhdGlvbiBpbiAxODczLjxicj5Bbnl3YXksIGhvdydzIHlvdXIgZGF5IGJlZW4/Ig0KICAgICk7IC8vR2FtZS5sYXN0LnNob3J0TmFtZT0nVGhlcmVcJ3MgcmVhbGx5IG5vIGhhcmQgbGltaXQgdG8gaG93IGxvbmcgdGhlc2UgYWNoaWV2ZW1lbnQgbmFtZXMgY2FuIGJlIGFuZCB0byBiZSBxdWl0ZSBob25lc3QgSVwnbSBbLi4uXSc7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiRmFzdCIsICJXb3chIik7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQmljZW50ZW5uaWFsIGFuZCBhIGhhbGYiLA0KICAgICAgbG9jKCJIYXZlIGF0IGxlYXN0IDxiPiUxIG9mIGV2ZXJ5dGhpbmc8L2I+LiIsIDI1MCkgKw0KICAgICAgICAiPHE+S2VlcCBvbiB0cnVja2luJy48L3E+IiwNCiAgICAgIFs5LCA2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDExMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRhYmxvaWQgYWRkaWN0aW9uIiwNCiAgICAgIGxvYygiQ2xpY2sgb24gdGhlIG5ld3MgdGlja2VyIDxiPiUxIHRpbWVzPC9iPi4iLCA1MCkgKw0KICAgICAgICAiPHE+UGFnZSA2OiBNYWQgaW5kaXZpZHVhbCBjbGlja3Mgb24gcGljdHVyZSBvZiBwYXN0cnkgaW4gYSBmdXRpbGUgYXR0ZW1wdCB0byBlc2NhcGUgYm9yZWRvbSE8YnI+QWxzbyBwYWdlIDY6IEJyaXRpc2ggcGFybGlhbWVudCBhdGUgbXkgYmFieSE8L3E+IiwNCiAgICAgIFsyNywgN10NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkNsaWNrYXN0cm9waGUiLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMTcpKSksDQogICAgICBbMTEsIDE3XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQ2xpY2thdGFjbHlzbSIsDQogICAgICBsb2MoIk1ha2UgPGI+JTE8L2I+IGZyb20gY2xpY2tpbmcuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUxOSkpKSwNCiAgICAgIFsxMSwgMThdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTA1MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaHVtYnMsIHBoYWxhbmdlcywgbWV0YWNhcnBhbHMiLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSg1MDApKSkgKw0KICAgICAgICAiPHE+JiBLTlVDS0xFUzwvcT4iLA0KICAgICAgWzAsIDE1XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDYwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUG9seW1hdGgiLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+IHVwZ3JhZGVzIGFuZCA8Yj4lMjwvYj4gYnVpbGRpbmdzLiIsIFszMDAsIDQwMDBdKSArDQogICAgICAgICI8cT5FeGNlbGxlbmNlIGRvZXNuJ3QgaGFwcGVuIG92ZXJuaWdodCAtIGl0IHVzdWFsbHkgdGFrZXMgYSBnb29kIGNvdXBsZSBkYXlzLjwvcT4iLA0KICAgICAgWzI5LCA3XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwOTk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiVGhlIGVsZGVyIHNjcm9sbHMiLA0KICAgICAgbG9jKCJPd24gYSBjb21iaW5lZCA8Yj4lMTwvYj4gJTIgYW5kICUzLiIsIFsNCiAgICAgICAgNzc3LA0KICAgICAgICBsb2MoImdyYW5kbWFzIiksDQogICAgICAgIGxvYygiY3Vyc29ycyIpLA0KICAgICAgXSkgKyAiPHE+TGV0IG1lIGd1ZXNzLiBTb21lb25lIHN0b2xlIHlvdXIgY29va2llLjwvcT4iLA0KICAgICAgWzEwLCA5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDMwMDUwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRvIGNydW1icywgeW91IHNheT8iLA0KICAgICAgbG9jKCJBc2NlbmQgd2l0aCA8Yj4lMTwvYj4gYmFrZWQuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUzMykpKSArDQogICAgICAgICI8cT5WZXJ5IHdlbGwgdGhlbi48L3E+IiwNCiAgICAgIFsyOSwgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlNlZWR5IGJ1c2luZXNzIiwgIiIsICJGYXJtIiwgNyk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkZyZWFrIGZyYWNraW5nIiwgIiIsICJNaW5lIiwgNyk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk1vZGVybiB0aW1lcyIsICIiLCAiRmFjdG9yeSIsIDcpOw0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGUgbmVydmUgb2Ygd2FyIiwgIiIsICJCYW5rIiwgNyk7DQogICAgb3JkZXIgPSAxNDUwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIldvbG9sbyIsICIiLCAiVGVtcGxlIiwgNyk7DQogICAgb3JkZXIgPSAxNDc1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiQW5kIG5vdyBmb3IgbXkgbmV4dCB0cmljaywgSSdsbCBuZWVkIGEgdm9sdW50ZWVyIGZyb20gdGhlIGF1ZGllbmNlIiwNCiAgICAgICIiLA0KICAgICAgIldpemFyZCB0b3dlciIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSXQncyBub3QgZGVsaXZlcnkiLCAiIiwgIlNoaXBtZW50IiwgNyk7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkdvbGQsIEplcnJ5ISBHb2xkISIsICIiLCAiQWxjaGVteSBsYWIiLCA3KTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRm9yYmlkZGVuIHpvbmUiLCAiIiwgIlBvcnRhbCIsIDcpOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgImNvb2tpZSBjbGlja2VyIGZvcmV2ZXIgYW5kIGZvcmV2ZXIgYSBodW5kcmVkIHllYXJzIGNvb2tpZSBjbGlja2VyLCBhbGwgZGF5IGxvbmcgZm9yZXZlciwgZm9yZXZlciBhIGh1bmRyZWQgdGltZXMsIG92ZXIgYW5kIG92ZXIgY29va2llIGNsaWNrZXIgYWR2ZW50dXJlcyBkb3QgY29tIiwNCiAgICAgICIiLA0KICAgICAgIlRpbWUgbWFjaGluZSIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJTY2llbnRpc3RzIGJhZmZsZWQgZXZlcnl3aGVyZSIsDQogICAgICAiIiwNCiAgICAgICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsDQogICAgICA3DQogICAgKTsNCiAgICBvcmRlciA9IDIwMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSGFybW9ueSBvZiB0aGUgc3BoZXJlcyIsICIiLCAiUHJpc20iLCA3KTsNCg0KICAgIG9yZGVyID0gMzUwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTGFzdCBDaGFuY2UgdG8gU2VlIiwNCiAgICAgIGxvYygiQnVyc3QgdGhlIG5lYXItZXh0aW5jdCA8Yj5zaGlueSB3cmlua2xlcjwvYj4uIikgKw0KICAgICAgICAiPHE+WW91IG1vbnN0ZXIhPC9xPiIsDQogICAgICBbMjQsIDEyXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRWFybHkgYmlyZCIsDQogICAgICBsb2MoIkNsaWNrIGEgZ29sZGVuIGNvb2tpZSA8Yj5sZXNzIHRoYW4gMSBzZWNvbmQgYWZ0ZXIgaXQgc3Bhd25zPC9iPi4iKSwNCiAgICAgIFsxMCwgMTRdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJGYWRpbmcgbHVjayIsDQogICAgICBsb2MoIkNsaWNrIGEgZ29sZGVuIGNvb2tpZSA8Yj5sZXNzIHRoYW4gMSBzZWNvbmQgYmVmb3JlIGl0IGRpZXM8L2I+LiIpLA0KICAgICAgWzEwLCAxNF0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMjEwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJFbGRlZXIiLA0KICAgICAgbG9jKCJQb3AgYSByZWluZGVlciA8Yj5kdXJpbmcgYW4gZWxkZXIgZnJlbnp5PC9iPi4iKSwNCiAgICAgIFsxMiwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMTEwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJEdWRlLCBzd2VldCIsDQogICAgICBsb2MoIkhhcnZlc3QgPGI+JTEgY29hbGVzY2luZyBzdWdhciBsdW1wczwvYj4uIiwgNyksDQogICAgICBbMjQsIDE0XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3VnYXIgcnVzaCIsDQogICAgICBsb2MoIkhhcnZlc3QgPGI+JTEgY29hbGVzY2luZyBzdWdhciBsdW1wczwvYj4uIiwgMzApLA0KICAgICAgWzI2LCAxNF0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlllYXIncyB3b3J0aCBvZiBjYXZpdGllcyIsDQogICAgICBsb2MoIkhhcnZlc3QgPGI+JTEgY29hbGVzY2luZyBzdWdhciBsdW1wczwvYj4uIiwgMzY1KSArDQogICAgICAgICI8cT5NeSBsdW1wcyBteSBsdW1wcyBteSBsdW1wcy48L3E+IiwNCiAgICAgIFsyOSwgMTRdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJIYW5kLXBpY2tlZCIsDQogICAgICBsb2MoIlN1Y2Nlc3NmdWxseSBoYXJ2ZXN0IGEgY29hbGVzY2luZyBzdWdhciBsdW1wIGJlZm9yZSBpdCdzIHJpcGUuIiksDQogICAgICBbMjgsIDE0XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3VnYXIgc3VnYXIiLA0KICAgICAgbG9jKCJIYXJ2ZXN0IGEgPGI+YmlmdXJjYXRlZCBzdWdhciBsdW1wPC9iPi4iKSwNCiAgICAgIFsyOSwgMTVdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBbGwtbmF0dXJhbCBjYW5lIHN1Z2FyIiwNCiAgICAgIGxvYygiSGFydmVzdCBhIDxiPmdvbGRlbiBzdWdhciBsdW1wPC9iPi4iKSwNCiAgICAgIFsyOSwgMTZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlN3ZWV0bWVhdHMiLA0KICAgICAgbG9jKCJIYXJ2ZXN0IGEgPGI+bWVhdHkgc3VnYXIgbHVtcDwvYj4uIiksDQogICAgICBbMjksIDE3XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiVHJpY2VudGVubmlhbCIsDQogICAgICBsb2MoIkhhdmUgYXQgbGVhc3QgPGI+JTEgb2YgZXZlcnl0aGluZzwvYj4uIiwgMzAwKSArDQogICAgICAgICI8cT5DYW4ndCBzdG9wLCB3b24ndCBzdG9wLiBQcm9iYWJseSBzaG91bGQgc3RvcCwgdGhvdWdoLjwvcT4iLA0KICAgICAgWzI5LCAxMl0NCiAgICApOw0KDQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiS25lYWQgZm9yIHNwZWVkIiwgIkhvdyBkaWQgd2Ugbm90IG1ha2UgdGhhdCBvbmUgeWV0PyIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiV2VsbCB0aGUgY29va2llcyBzdGFydCBjb21pbmcgYW5kIHRoZXkgZG9uJ3Qgc3RvcCBjb21pbmciLA0KICAgICAgIkRpZG4ndCBtYWtlIHNlbnNlIG5vdCB0byBjbGljayBmb3IgZnVuLiINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiSSBkb24ndCBrbm93IGlmIHlvdSd2ZSBub3RpY2VkIGJ1dCBhbGwgdGhlc2UgaWNvbnMgYXJlIHZlcnkgc2xpZ2h0bHkgb2ZmLWNlbnRlciINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoDQogICAgICAiVGhlIHByb29mIG9mIHRoZSBjb29raWUgaXMgaW4gdGhlIGJha2luZyIsDQogICAgICAiSG93IGNhbiB5b3UgaGF2ZSBhbnkgY29va2llcyBpZiB5b3UgZG9uJ3QgYmFrZSB5b3VyIGRvdWdoPyINCiAgICApOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIklmIGl0J3Mgd29ydGggZG9pbmcsIGl0J3Mgd29ydGggb3ZlcmRvaW5nIik7DQoNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgNCiAgICAgICJUaGUgZHJlYW1zIGluIHdoaWNoIEknbSBiYWtpbmcgYXJlIHRoZSBiZXN0IEkndmUgZXZlciBoYWQiDQogICAgKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiU2V0IGZvciBsaWZlIik7DQoNCiAgICBvcmRlciA9IDEyMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiWW91IGFuZCB0aGUgYmVhbnN0YWxrIiwgIiIsICJGYXJtIiwgOCk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJvbWFuY2luZyB0aGUgc3RvbmUiLCAiIiwgIk1pbmUiLCA4KTsNCiAgICBvcmRlciA9IDE0MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRXggbWFjaGluYSIsICIiLCAiRmFjdG9yeSIsIDgpOw0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBbmQgSSBuZWVkIGl0IG5vdyIsICIiLCAiQmFuayIsIDgpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJQcmF5IG9uIHRoZSB3ZWFrIiwgIiIsICJUZW1wbGUiLCA4KTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSXQncyBhIGtpbmQgb2YgbWFnaWMiLCAiIiwgIldpemFyZCB0b3dlciIsIDgpOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNYWtlIGl0IHNvIiwgIiIsICJTaGlwbWVudCIsIDgpOw0KICAgIG9yZGVyID0gMTYwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBbGwgdGhhdCBnbGl0dGVycyBpcyBnb2xkIiwgIiIsICJBbGNoZW15IGxhYiIsIDgpOw0KICAgIG9yZGVyID0gMTcwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJIzaHMuMy3zZPMs8yzzK/Mn82VzJ/Njc2NzKNlzaHMos2YzLDMpsywzLrMrsydzZbNlsyYzKrNiSDNmMygzKbNlcykzKrMnc2FzKXMsMygzKvMlsyjzZnMrEPMqMymzLrMqcyyzKXNicytzZrMnMy7zJ3Mo8y8zZnMrsyvzKpvzKHMtM2ezaHNh8yYzY7MnsyyzYfMpsyybcy4zZjMqcy6zJ3Mo8y5zYXMsc2azKzMpcyrzLPMvMyezJjMr2XNosyVzYHMo82HzLrMnHPNmM2YzLbNnsyZzJ/MscylzK7Mr8ywzKbNk82HzZbNlsydIiwgIiIsICJQb3J0YWwiLCA4KTsNCiAgICBvcmRlciA9IDE4MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2F5IGJhY2sgdGhlbiIsICIiLCAiVGltZSBtYWNoaW5lIiwgOCk7DQogICAgb3JkZXIgPSAxOTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkV4b3RpYyBtYXR0ZXIiLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgOCk7DQogICAgb3JkZXIgPSAyMDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkF0IHRoZSBlbmQgb2YgdGhlIHR1bm5lbCIsICIiLCAiUHJpc20iLCA4KTsNCg0KICAgIG9yZGVyID0gMTA3MDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgNCiAgICAgICJDbGljayAoc3RhcnJpbmcgQWRhbSBTYW5kbGVyKSIsDQogICAgICAiQ3Vyc29yIiwNCiAgICAgIDMsDQogICAgICAwLA0KICAgICAgNw0KICAgICk7DQogICAgb3JkZXIgPSAxMTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJGcmFudGlxdWl0aWVzIiwgIkdyYW5kbWEiLCAzLCAwLCA2KTsNCiAgICBvcmRlciA9IDEyMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk92ZXJncm93dGgiLCAiRmFybSIsIDMpOw0KICAgIG9yZGVyID0gMTMyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiU2VkaW1lbnRhbGlzbSIsICJNaW5lIiwgMyk7DQogICAgb3JkZXIgPSAxNDIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJMYWJvciBvZiBsb3ZlIiwgIkZhY3RvcnkiLCAzKTsNCiAgICBvcmRlciA9IDE0NDU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlJldmVyc2UgZnVubmVsIHN5c3RlbSIsICJCYW5rIiwgMyk7DQogICAgb3JkZXIgPSAxNDcwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJUaHVzIHNwb2tlIHlvdSIsICJUZW1wbGUiLCAzKTsNCiAgICBvcmRlciA9IDE0OTU7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk1hbmFmZXN0IGRlc3RpbnkiLCAiV2l6YXJkIHRvd2VyIiwgMyk7DQogICAgb3JkZXIgPSAxNTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KA0KICAgICAgIk5laXRoZXIgc25vdyBub3IgcmFpbiBub3IgaGVhdCBub3IgZ2xvb20gb2YgbmlnaHQiLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDMNCiAgICApOw0KICAgIG9yZGVyID0gMTYyMDsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiSSd2ZSBnb3QgdGhlIE1pZGFzIHRvdWNoIiwgIkFsY2hlbXkgbGFiIiwgMyk7DQogICAgb3JkZXIgPSAxNzIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJXaGljaCBldGVybmFsIGxpZSIsICJQb3J0YWwiLCAzKTsNCiAgICBvcmRlciA9IDE4MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkQmZWFjdXRlO2omYWdyYXZlOyB2dSIsICJUaW1lIG1hY2hpbmUiLCAzKTsNCiAgICBvcmRlciA9IDE5MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlBvd2VycyBvZiBUZW4iLCAiQW50aW1hdHRlciBjb25kZW5zZXIiLCAzKTsNCiAgICBvcmRlciA9IDIwMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIk5vdyB0aGUgZGFyayBkYXlzIGFyZSBnb25lIiwgIlByaXNtIiwgMyk7DQoNCiAgICBvcmRlciA9IDEwNzA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIkZyZWFreSBqYXp6IGhhbmRzIiwgIiIsIFswLCAyNl0pOw0KICAgIEdhbWUuT2JqZWN0c1siQ3Vyc29yIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCiAgICBvcmRlciA9IDExMjA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIk1ldGh1c2VsYWgiLCAiIiwgWzEsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCiAgICBvcmRlciA9IDEyMjA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIkh1Z2UgdHJhY3RzIG9mIGxhbmQiLCAiIiwgWzIsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJGYXJtIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCiAgICBvcmRlciA9IDEzMjA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIkQtZC1kLWQtZGVlcGVyIiwgIiIsIFszLCAyNl0pOw0KICAgIEdhbWUuT2JqZWN0c1siTWluZSJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQogICAgb3JkZXIgPSAxNDIwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KCJQYXRlbnRseSBnZW5pdXMiLCAiIiwgWzQsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJGYWN0b3J5Il0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCiAgICBvcmRlciA9IDE0NDU7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIkEgY2FwaXRhbCBpZGVhIiwgIiIsIFsxNSwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkJhbmsiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTQ3MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiSXQgYmVsb25ncyBpbiBhIGJha2VyeSIsICIiLCBbMTYsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJUZW1wbGUiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTQ5NTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiTW90b3Jtb3V0aCIsICIiLCBbMTcsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJXaXphcmQgdG93ZXIiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTUyMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiQmVlbiB0aGVyZSBkb25lIHRoYXQiLCAiIiwgWzUsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJTaGlwbWVudCJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQogICAgb3JkZXIgPSAxNjIwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KCJQaGxvZ2lzdGljYXRlZCBzdWJzdGFuY2VzIiwgIiIsIFs2LCAyNl0pOw0KICAgIEdhbWUuT2JqZWN0c1siQWxjaGVteSBsYWIiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTcyMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiQml6YXJybyB3b3JsZCIsICIiLCBbNywgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIlBvcnRhbCJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQogICAgb3JkZXIgPSAxODIwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KCJUaGUgbG9uZyBub3ciLCAiIiwgWzgsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJUaW1lIG1hY2hpbmUiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMTkyMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiQ2h1YmJ5IGhhZHJvbnMiLCAiIiwgWzEzLCAyNl0pOw0KICAgIEdhbWUuT2JqZWN0c1siQW50aW1hdHRlciBjb25kZW5zZXIiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KICAgIG9yZGVyID0gMjAyMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiUGFsZXR0YWJsZSIsICIiLCBbMTQsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJQcmlzbSJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQoNCiAgICBvcmRlciA9IDYxNDcwOw0KICAgIG9yZGVyID0gNjE0OTU7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQmliYmlkaS1ib2JiaWRpLWJvbyIsDQogICAgICBsb2MoIkNhc3QgPGI+JTE8L2I+IHNwZWxscy4iLCA5KSwNCiAgICAgIFsyMSwgMTFdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJJJ20gdGhlIHdpeiIsDQogICAgICBsb2MoIkNhc3QgPGI+JTE8L2I+IHNwZWxscy4iLCA5OSksDQogICAgICBbMjIsIDExXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQSB3aXphcmQgaXMgeW91IiwNCiAgICAgIGxvYygiQ2FzdCA8Yj4lMTwvYj4gc3BlbGxzLiIsIDk5OSkgKyAiPHE+SSdtIGEgd2hhdD88L3E+IiwNCiAgICAgIFsyOSwgMTFdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRm91ci1sZWFmIGNvb2tpZSIsDQogICAgICBsb2MoIkhhdmUgPGI+JTE8L2I+IGdvbGRlbiBjb29raWVzIHNpbXVsdGFuZW91c2x5LiIsIDQpICsNCiAgICAgICAgIjxxPkZhaXJseSByYXJlLCBjb25zaWRlcmluZyBjb29raWVzIGRvbid0IGV2ZW4gaGF2ZSBsZWF2ZXMuPC9xPiIsDQogICAgICBbMjcsIDZdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOw0KDQogICAgb3JkZXIgPSAyMTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkx1Y2tlZCBvdXQiLCAiIiwgIkNoYW5jZW1ha2VyIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2hhdCBhcmUgdGhlIG9kZHMiLCAiIiwgIkNoYW5jZW1ha2VyIiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJHcmFuZG1hIG5lZWRzIGEgbmV3IHBhaXIgb2Ygc2hvZXMiLA0KICAgICAgIiIsDQogICAgICAiQ2hhbmNlbWFrZXIiLA0KICAgICAgMw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWlsbGlvbiB0byBvbmUgc2hvdCwgZG9jIiwgIiIsICJDaGFuY2VtYWtlciIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkFzIGx1Y2sgd291bGQgaGF2ZSBpdCIsICIiLCAiQ2hhbmNlbWFrZXIiLCA1KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJFdmVyIGluIHlvdXIgZmF2b3IiLCAiIiwgIkNoYW5jZW1ha2VyIiwgNik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQmUgYSBsYWR5IiwgIiIsICJDaGFuY2VtYWtlciIsIDcpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkRpY2V5IGJ1c2luZXNzIiwgIiIsICJDaGFuY2VtYWtlciIsIDgpOw0KDQogICAgb3JkZXIgPSAyMTIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJGaW5nZXJzIGNyb3NzZWQiLCAiQ2hhbmNlbWFrZXIiLCAxKTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiSnVzdCBhIHN0YXRpc3RpYyIsICJDaGFuY2VtYWtlciIsIDIpOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJNdXJwaHkncyB3aWxkIGd1ZXNzIiwgIkNoYW5jZW1ha2VyIiwgMyk7DQoNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiTGV0J3MgbGVhZiBpdCBhdCB0aGF0IiwgIiIsIFsxOSwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkNoYW5jZW1ha2VyIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGUgdWx0aW1hdGUgY2xpY2tkb3duIiwNCiAgICAgIGxvYygiTWFrZSA8Yj4lMTwvYj4gZnJvbSBjbGlja2luZy4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTIxKSkpICsNCiAgICAgICAgIjxxPihvZiB1bHRpbWF0ZSBkZXN0aW55Lik8L3E+IiwNCiAgICAgIFsxMSwgMTldDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBZ2VkIHdlbGwiLCAiIiwgIkdyYW5kbWEiLCA5KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCIxMDFzdCBiaXJ0aGRheSIsICIiLCAiR3JhbmRtYSIsIDEwKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJCdXQgd2FpdCAndGlsIHlvdSBnZXQgb2xkZXIiLCAiIiwgIkdyYW5kbWEiLCAxMSk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkhhcnZlc3QgbW9vbiIsICIiLCAiRmFybSIsIDkpOw0KICAgIG9yZGVyID0gMTMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNaW5lPyIsICIiLCAiTWluZSIsIDkpOw0KICAgIG9yZGVyID0gMTQwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJJbiBmdWxsIGdlYXIiLCAiIiwgIkZhY3RvcnkiLCA5KTsNCiAgICBvcmRlciA9IDE0MjU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVHJlYWNsZSB0YXJ0IGVjb25vbWljcyIsICIiLCAiQmFuayIsIDkpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJIb2x5IGNvb2tpZXMsIGdyYW5kbWEhIiwgIiIsICJUZW1wbGUiLCA5KTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJUaGUgUHJlc3RpZ2UiLA0KICAgICAgIjxxPihVbnJlbGF0ZWQgdG8gdGhlIENvb2tpZSBDbGlja2VyIGZlYXR1cmUgb2YgdGhlIHNhbWUgbmFtZS4pPC9xPiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDkNCiAgICApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGF0J3MganVzdCBwZWFudXRzIHRvIHNwYWNlIiwgIiIsICJTaGlwbWVudCIsIDkpOw0KICAgIG9yZGVyID0gMTYwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJXb3J0aCBpdHMgd2VpZ2h0IGluIGxlYWQiLCAiIiwgIkFsY2hlbXkgbGFiIiwgOSk7DQogICAgb3JkZXIgPSAxNzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiV2hhdCBoYXBwZW5zIGluIHRoZSB2b3J0ZXggc3RheXMgaW4gdGhlIHZvcnRleCIsDQogICAgICAiIiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSAxODAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiSW52aXRlZCB0byB5ZXN0ZXJkYXkncyBwYXJ0eSIsDQogICAgICAiIiwNCiAgICAgICJUaW1lIG1hY2hpbmUiLA0KICAgICAgOQ0KICAgICk7DQogICAgb3JkZXIgPSAxOTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkRvd25zaXppbmciLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgOSk7IC8vdGhlIHRyYWlsZXIgZ290IG1lIHJlYWxseSBoeXBlZCB1cCBidXQgaSd2ZSByZWFkIHNvbWUgcHJldHR5IGJhZCByZXZpZXdzLiBpcyBpdCB3YXRjaGFibGUgPyBpcyBpdCB3b3J0aCBzZWVpbmcgPyBpIGRvbid0IG1pbmQgbWF0dCBkYW1vbg0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNeSBleWVzIiwgIiIsICJQcmlzbSIsIDkpOw0KICAgIG9yZGVyID0gMjEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIk1heWJlIGEgY2hhbmNlIGluIGhlbGwsIGFjdHVhbGx5IiwNCiAgICAgICIiLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDkNCiAgICApOw0KDQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk1ha2UgbGlrZSBhIHRyZWUiLCAiIiwgIkZhcm0iLCAxMCk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkNhdmUgc3RvcnkiLCAiIiwgIk1pbmUiLCAxMCk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkluLWNvZy1uZWF0byIsICIiLCAiRmFjdG9yeSIsIDEwKTsNCiAgICBvcmRlciA9IDE0MjU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJTYXZlIHlvdXIgYnJlYXRoIGJlY2F1c2UgdGhhdCdzIGFsbCB5b3UndmUgZ290IGxlZnQiLA0KICAgICAgIiIsDQogICAgICAiQmFuayIsDQogICAgICAxMA0KICAgICk7DQogICAgb3JkZXIgPSAxNDUwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlZlbmdlZnVsIGFuZCBhbG1pZ2h0eSIsICIiLCAiVGVtcGxlIiwgMTApOw0KICAgIG9yZGVyID0gMTQ3NTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTcGVsbCBpdCBvdXQgZm9yIHlvdSIsICIiLCAiV2l6YXJkIHRvd2VyIiwgMTApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIlNwYWNlIHNwYWNlIHNwYWNlIHNwYWNlIHNwYWNlIiwNCiAgICAgICI8cT5JdCdzIHRvbyBmYXIgYXdheS4uLjwvcT4iLA0KICAgICAgIlNoaXBtZW50IiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJEb24ndCBnZXQgdXNlZCB0byB5b3Vyc2VsZiwgeW91J3JlIGdvbm5hIGhhdmUgdG8gY2hhbmdlIiwNCiAgICAgICIiLA0KICAgICAgIkFsY2hlbXkgbGFiIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJPYmplY3RzIGluIHRoZSBtaXJyb3IgZGltZW5zaW9uIGFyZSBjbG9zZXIgdGhhbiB0aGV5IGFwcGVhciIsDQogICAgICAiIiwNCiAgICAgICJQb3J0YWwiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJHcm91bmRob2cgZGF5IiwgIiIsICJUaW1lIG1hY2hpbmUiLCAxMCk7DQogICAgb3JkZXIgPSAxOTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiQSBtYXR0ZXIgb2YgcGVyc3BlY3RpdmUiLA0KICAgICAgIiIsDQogICAgICAiQW50aW1hdHRlciBjb25kZW5zZXIiLA0KICAgICAgMTANCiAgICApOw0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJPcHRpY2FsIGlsbHVzaW9uIiwgIiIsICJQcmlzbSIsIDEwKTsNCiAgICBvcmRlciA9IDIxMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSmFja3BvdCIsICIiLCAiQ2hhbmNlbWFrZXIiLCAxMCk7DQoNCiAgICBvcmRlciA9IDM2MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlNvIG11Y2ggdG8gZG8gc28gbXVjaCB0byBzZWUiLA0KICAgICAgbG9jKCJNYW5hZ2UgYSBjb29raWUgbGVnYWN5IGZvciA8Yj5hdCBsZWFzdCBhIHllYXI8L2I+LiIpICsNCiAgICAgICAgIjxxPlRoYW5rIHlvdSBzbyBtdWNoIGZvciBwbGF5aW5nIENvb2tpZSBDbGlja2VyITwvcT4iLA0KICAgICAgWzIzLCAxMV0NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInNoYWRvdyI7DQoNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJSdW5uaW5nIHdpdGggc2Npc3NvcnMiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJSYXJlZmllZCBhaXIiKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJQdXNoIGl0IHRvIHRoZSBsaW1pdCIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkdyZWVuIGNvb2tpZXMgc2xlZXAgZnVyaW91c2x5Iik7DQoNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiUGFuaWMhIGF0IE5hYmlzY28iKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiQnVyc3RpbmcgYXQgdGhlIHNlYW1zIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkp1c3QgYWJvdXQgZnVsbCIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJIdW5ncnkgZm9yIG1vcmUiKTsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBbGwgdGhlIG90aGVyIGtpZHMgd2l0aCB0aGUgcHVtcGVkIHVwIGNsaWNrcyIsDQogICAgICBsb2MoIk1ha2UgPGI+JTE8L2I+IGZyb20gY2xpY2tpbmcuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUyMykpKSwNCiAgICAgIFsxMSwgMjhdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJPbmUuLi5tb3JlLi4uY2xpY2suLi4iLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMjUpKSksDQogICAgICBbMTEsIDMwXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDYxNTE1Ow0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkJvdGFueSBlbnRodXNpYXN0IiwNCiAgICAgIGxvYygiSGFydmVzdCA8Yj4lMTwvYj4gbWF0dXJlIGdhcmRlbiBwbGFudHMuIiwgMTAwKSwNCiAgICAgIFsyNiwgMjBdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJHcmVlbiwgYWNoaW5nIHRodW1iIiwNCiAgICAgIGxvYygiSGFydmVzdCA8Yj4lMTwvYj4gbWF0dXJlIGdhcmRlbiBwbGFudHMuIiwgMTAwMCksDQogICAgICBbMjcsIDIwXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSW4gdGhlIGdhcmRlbiBvZiBFZGVuIChiYWJ5KSIsDQogICAgICBsb2MoIkZpbGwgZXZlcnkgdGlsZSBvZiB0aGUgYmlnZ2VzdCBnYXJkZW4gcGxvdCB3aXRoIHBsYW50cy4iKSArDQogICAgICAgICI8cT5Jc24ndCB0ZW5kaW5nIHRvIHRob3NlIHByZWNpb3VzIGxpdHRsZSBwbGFudHMganVzdCBzbyByb2NrIGFuZC9vciByb2xsPzwvcT4iLA0KICAgICAgWzI4LCAyMF0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiS2VlcGVyIG9mIHRoZSBjb25zZXJ2YXRvcnkiLA0KICAgICAgbG9jKCJVbmxvY2sgZXZlcnkgZ2FyZGVuIHNlZWQuIiksDQogICAgICBbMjUsIDIwXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2VlZGxlc3MgdG8gbmF5IiwNCiAgICAgIGxvYygNCiAgICAgICAgJ0NvbnZlcnQgYSBjb21wbGV0ZSBzZWVkIGxvZyBpbnRvIHN1Z2FyIGx1bXBzIGJ5IHNhY3JpZmljaW5nIHlvdXIgZ2FyZGVuIHRvIHRoZSBzdWdhciBob3JuZXRzLjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pk93bmluZyB0aGlzIGFjaGlldmVtZW50IG1ha2VzIHNlZWRzIDxiPiUxJSBjaGVhcGVyPC9iPiwgcGxhbnRzIG1hdHVyZSA8Yj4lMiUgc29vbmVyPC9iPiwgYW5kIHBsYW50IHVwZ3JhZGVzIGRyb3AgPGI+JTMlIG1vcmU8L2I+LicsDQogICAgICAgIFs1LCA1LCA1XQ0KICAgICAgKSwNCiAgICAgIFsyOSwgMjBdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMzAwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiWW91IGdldCBub3RoaW5nIiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMzYpKSkgKw0KICAgICAgICAiPHE+R29vZCBkYXkgc2lyITwvcT4iLA0KICAgICAgWzI5LCA2XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSHVtYmxlIHJlYmVnaW5uaW5ncyIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTM5KSkpICsNCiAgICAgICAgIjxxPlN0YXJ0ZWQgZnJvbSB0aGUgYm90dG9tLCBub3cgd2UncmUgaGVyZS48L3E+IiwNCiAgICAgIFsyOSwgNl0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRoZSBlbmQgb2YgdGhlIHdvcmxkIiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNDIpKSkgKw0KICAgICAgICAiPHE+KGFzIHdlIGtub3cgaXQpPC9xPiIsDQogICAgICBbMjEsIDI1XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiT2gsIHlvdSdyZSBiYWNrIiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNDUpKSkgKw0KICAgICAgICAiPHE+TWlzc2VkIHVzPzwvcT4iLA0KICAgICAgWzIxLCAyNV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkxhemFydXMiLA0KICAgICAgbG9jKCJBc2NlbmQgd2l0aCA8Yj4lMTwvYj4gYmFrZWQuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWU0OCkpKSArDQogICAgICAgICI8cT5BbGwgcmlzZS48L3E+IiwNCiAgICAgIFsyMSwgMjVdDQogICAgKTsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkxlaXN1cmVseSBwYWNlIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiSHlwZXJzb25pYyIpOw0KDQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkZlZWQgbWUsIE9ydGVpbCIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJBbmQgdGhlbiB3aGF0PyIpOw0KDQogICAgb3JkZXIgPSA3MDAyOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRyaWNlbnRlbm5pYWwgYW5kIGEgaGFsZiIsDQogICAgICBsb2MoIkhhdmUgYXQgbGVhc3QgPGI+JTEgb2YgZXZlcnl0aGluZzwvYj4uIiwgMzUwKSArDQogICAgICAgICI8cT4oaXQncyBmcmVlIHJlYWwgZXN0YXRlKTwvcT4iLA0KICAgICAgWzIxLCAyNl0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlF1YWRyaWNlbnRlbm5pYWwiLA0KICAgICAgbG9jKCJIYXZlIGF0IGxlYXN0IDxiPiUxIG9mIGV2ZXJ5dGhpbmc8L2I+LiIsIDQwMCkgKw0KICAgICAgICAiPHE+WW91J3ZlIGhhZCB0byBkbyBob3JyaWJsZSB0aGluZ3MgdG8gZ2V0IHRoaXMgZmFyLjxicj5Ib3JyaWJsZS4uLiBob3JyaWJsZSB0aGluZ3MuPC9xPiIsDQogICAgICBbMjIsIDI2XQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUXVhZHJpY2VudGVubmlhbCBhbmQgYSBoYWxmIiwNCiAgICAgIGxvYygiSGF2ZSBhdCBsZWFzdCA8Yj4lMSBvZiBldmVyeXRoaW5nPC9iPi4iLCA0NTApICsNCiAgICAgICAgIjxxPkF0IHRoaXMgcG9pbnQsIHlvdSBtaWdodCBqdXN0IGJlIGNvbXBlbnNhdGluZyBmb3Igc29tZXRoaW5nLjwvcT4iLA0KICAgICAgWzIzLCAyNl0NCiAgICApOw0KDQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUXVpbmNlbnRlbm5pYWwiLA0KICAgICAgbG9jKCJIYXZlIGF0IGxlYXN0IDxiPiUxIG9mIGV2ZXJ5dGhpbmc8L2I+LiIsIDUwMCkgKw0KICAgICAgICAiPHE+U29tZSBwZW9wbGUgd291bGQgc2F5IHlvdSdyZSBoYWxmd2F5IHRoZXJlLjxicj5XZSBkbyBub3QgY2FyZSBmb3IgdGhvc2UgcGVvcGxlIGFuZCB0aGVpciByZWNrbGVzcyBzZW5zZSBvZiB1bmNoZWNrZWQgb3B0aW1pc20uPC9xPiIsDQogICAgICBbMjksIDI1XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIxMTAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk1haWxsYXJkIHJlYWN0aW9uIiwNCiAgICAgIGxvYygiSGFydmVzdCBhIDxiPmNhcmFtZWxpemVkIHN1Z2FyIGx1bXA8L2I+LiIpLA0KICAgICAgWzI5LCAyN10NCiAgICApOw0KDQogICAgb3JkZXIgPSAzMDI1MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJXaGVuIHRoZSBjb29raWVzIGFzY2VuZCBqdXN0IHJpZ2h0IiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggZXhhY3RseSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUxMikpKSwNCiAgICAgIFsyNSwgN10NCiAgICApOw0KICAgIEdhbWUubGFzdC5wb29sID0gInNoYWRvdyI7IC8vdGhpcyBhY2hpZXZlbWVudCBpcyBzaGFkb3cgYmVjYXVzZSBpdCBpcyBvbmx5IGFjaGlldmFibGUgdGhyb3VnaCBibGluZCBsdWNrIG9yIHJlYWRpbmcgZXh0ZXJuYWwgZ3VpZGVzOyB0aGlzIG1heSBjaGFuZ2UgaW4gdGhlIGZ1dHVyZQ0KDQogICAgb3JkZXIgPSAxMDUwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIldpdGggaGVyIGZpbmdlciBhbmQgaGVyIHRodW1iIiwNCiAgICAgIGxvYygiSGF2ZSA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBjdXJzb3IiLCBMQmVhdXRpZnkoNjAwKSkpLA0KICAgICAgWzAsIDE2XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRGVmZW5zZSBvZiB0aGUgYW5jaWVudHMiLCAiIiwgIkdyYW5kbWEiLCAxMik7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlNoYXJwZXN0IHRvb2wgaW4gdGhlIHNoZWQiLCAiIiwgIkZhcm0iLCAxMSk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkhleSBub3csIHlvdSdyZSBhIHJvY2siLCAiIiwgIk1pbmUiLCAxMSk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkJyZWFrIHRoZSBtb2xkIiwgIiIsICJGYWN0b3J5IiwgMTEpOw0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJHZXQgdGhlIHNob3cgb24sIGdldCBwYWlkIiwgIiIsICJCYW5rIiwgMTEpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIk15IHdvcmxkJ3Mgb24gZmlyZSwgaG93IGFib3V0IHlvdXJzIiwNCiAgICAgICIiLA0KICAgICAgIlRlbXBsZSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAxNDc1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiVGhlIG1ldGVvciBtZW4gYmVnIHRvIGRpZmZlciIsDQogICAgICAiIiwNCiAgICAgICJXaXphcmQgdG93ZXIiLA0KICAgICAgMTENCiAgICApOw0KICAgIG9yZGVyID0gMTUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJPbmx5IHNob290aW5nIHN0YXJzIiwgIiIsICJTaGlwbWVudCIsIDExKTsNCiAgICBvcmRlciA9IDE2MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJXZSBjb3VsZCBhbGwgdXNlIGEgbGl0dGxlIGNoYW5nZSIsDQogICAgICAiIiwNCiAgICAgICJBbGNoZW15IGxhYiIsDQogICAgICAxMQ0KICAgICk7IC8vImFsbCB0aGF0IGdsaXR0ZXJzIGlzIGdvbGQiIHdhcyBhbHJlYWR5IGFuIGFjaGlldmVtZW50DQogICAgb3JkZXIgPSAxNzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiWW91ciBicmFpbiBnZXRzIHNtYXJ0IGJ1dCB5b3VyIGhlYWQgZ2V0cyBkdW1iIiwNCiAgICAgICIiLA0KICAgICAgIlBvcnRhbCIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAxODAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRoZSB5ZWFycyBzdGFydCBjb21pbmciLCAiIiwgIlRpbWUgbWFjaGluZSIsIDExKTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2hhdCBhIGNvbmNlcHQiLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgMTEpOw0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIllvdSdsbCBuZXZlciBzaGluZSBpZiB5b3UgZG9uJ3QgZ2xvdyIsDQogICAgICAiIiwNCiAgICAgICJQcmlzbSIsDQogICAgICAxMQ0KICAgICk7DQogICAgb3JkZXIgPSAyMTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiWW91J2xsIG5ldmVyIGtub3cgaWYgeW91IGRvbid0IGdvIiwNCiAgICAgICIiLA0KICAgICAgIkNoYW5jZW1ha2VyIiwNCiAgICAgIDExDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTZWxmLWNvbnRhaW5lZCIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaHJldyB5b3UgZm9yIGEgbG9vcCIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJUaGUgc3VtIG9mIGl0cyBwYXJ0cyIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAzKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkJlYXJzIHJlcGVhdGluZyIsDQogICAgICAiPHE+V2hlcmUgZGlkIHRoZXNlIGNvbWUgZnJvbT88L3E+IiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICA0DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNb3JlIG9mIHRoZSBzYW1lIiwgIiIsICJGcmFjdGFsIGVuZ2luZSIsIDUpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkxhc3QgcmVjdXJzZSIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCA2KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJPdXQgb2Ygb25lLCBtYW55IiwgIiIsICJGcmFjdGFsIGVuZ2luZSIsIDcpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkFuIGV4YW1wbGUgb2YgcmVjdXJzaW9uIiwgIiIsICJGcmFjdGFsIGVuZ2luZSIsIDgpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhpcyBhY2hpZXZlbWVudCwgcGxlYXNlIHJlZmVyIHRvIGl0cyB0aXRsZSIsDQogICAgICAiIiwNCiAgICAgICJGcmFjdGFsIGVuZ2luZSIsDQogICAgICA5DQogICAgKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkknbSBzbyBtZXRhLCBldmVuIHRoaXMgYWNoaWV2ZW1lbnQiLA0KICAgICAgIiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgMTANCiAgICApOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk5ldmVyIGdldCBib3JlZCIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAxMSk7DQoNCiAgICBvcmRlciA9IDIyMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlRoZSBuZWVkcyBvZiB0aGUgbWFueSIsICJGcmFjdGFsIGVuZ2luZSIsIDEpOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJFYXRpbmcgaXRzIG93biIsICJGcmFjdGFsIGVuZ2luZSIsIDIpOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJXZSBtdXN0IGdvIGRlZXBlciIsICJGcmFjdGFsIGVuZ2luZSIsIDMpOw0KDQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIlNpZXJwaW5za2kgcmhvbWJvaWRzIiwgIiIsIFsyMCwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkZyYWN0YWwgZW5naW5lIl0ubGV2ZWxBY2hpZXYxMCA9IEdhbWUubGFzdDsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkdvdHRhIGdvIGZhc3QiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiSSB0aGluayBpdCdzIHNhZmUgdG8gc2F5IHlvdSd2ZSBnb3QgaXQgbWFkZSIpOw0KDQogICAgb3JkZXIgPSA2MDAyOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlJlbmFpc3NhbmNlIGJha2VyIiwNCiAgICAgIGxvYygiT3duIDxiPiUxPC9iPiB1cGdyYWRlcyBhbmQgPGI+JTI8L2I+IGJ1aWxkaW5ncy4iLCBbNDAwLCA4MDAwXSkgKw0KICAgICAgICAiPHE+SWYgeW91IGhhdmUgc2VlbiBmdXJ0aGVyLCBpdCBpcyBieSBzdGFuZGluZyBvbiB0aGUgc2hvdWxkZXJzIG9mIGdpYW50cyAtIGEgbXlzdGVyaW91cyBzcGVjaWVzIG9mIHRvd2VyaW5nIGh1bWFub2lkcyB1bnRpbCBub3cgdGhvdWdodCBsb25nLWV4dGluY3QuPC9xPiIsDQogICAgICBbMTAsIDEwXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwOTg7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiVmV0ZXJhbiIsDQogICAgICBsb2MoIk93biBhdCBsZWFzdCA8Yj4lMTwvYj4gZ3JhbmRtYSB0eXBlcy4iLCAxNCkgKyAiPHE+MTQncyBhIGNyb3dkITwvcT4iLA0KICAgICAgWzEwLCA5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDEwMDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlRoaWNrLXNraW5uZWQiLA0KICAgICAgbG9jKA0KICAgICAgICAiSGF2ZSB5b3VyIDxiPnJlaW5mb3JjZWQgbWVtYnJhbmU8L2I+IHByb3RlY3QgdGhlIDxiPnNoaW1tZXJpbmcgdmVpbDwvYj4uIg0KICAgICAgKSwNCiAgICAgIFs3LCAxMF0NCiAgICApOw0KDQogICAgb3JkZXIgPSAyMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkYxMiIsICIiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVmFyaWFibGUgc3VjY2VzcyIsICIiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTm8gY29tbWVudHMiLCAiIiwgIkphdmFzY3JpcHQgY29uc29sZSIsIDMpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlVwIHRvIGNvZGUiLCAiIiwgIkphdmFzY3JpcHQgY29uc29sZSIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIldvcmtzIG9uIG15IG1hY2hpbmUiLCAiIiwgIkphdmFzY3JpcHQgY29uc29sZSIsIDUpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRlY2huaWNhbCBkZWJ0IiwgIiIsICJKYXZhc2NyaXB0IGNvbnNvbGUiLCA2KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJNaW5kIHlvdXIgbGFuZ3VhZ2UiLCAiIiwgIkphdmFzY3JpcHQgY29uc29sZSIsIDcpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkluY29uc29sYWJsZSIsICIiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgOCk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQ2xvc3VyZSIsICIiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgOSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJEdWRlIHdoYXQgaWYgd2UncmUgYWxsIGxpdmluZyBpbiBhIHNpbXVsYXRpb24gbGlrZSB3aGF0IGlmIHdlJ3JlIGFsbCBqdXN0IGNvZGUgb24gYSBjb21wdXRlciBzb21ld2hlcmUiLA0KICAgICAgIiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDEwDQogICAgKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIlRha2luZyB0aGUgYmFjayBzdHJlZXRzIiwNCiAgICAgICIiLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAxMQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDIzMjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkluaGVyaXRlZCBwcm90b3R5cGUiLCAiSmF2YXNjcmlwdCBjb25zb2xlIiwgMSk7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoDQogICAgICAiQSBtb2RlbCBvZiBkb2N1bWVudCBvYmplY3QiLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAyDQogICAgKTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiRmlyc3QtY2xhc3MgY2l0aXplbiIsICJKYXZhc2NyaXB0IGNvbnNvbGUiLCAzKTsNCg0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KCJBbGV4YW5kcmlhIiwgIiIsIFszMiwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkphdmFzY3JpcHQgY29uc29sZSJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQoNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJCYWtlIGhpbSBhd2F5LCB0b3lzIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiWW91J3JlICMxIHNvIHdoeSB0cnkgaGFyZGVyIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiSGF2ZW4ndCBldmVuIGJlZ3VuIHRvIHBlYWsiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiQSBzb21ldGltZXMgZm9vZCIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJOb3QgZW5vdWdoIG9mIGEgZ29vZCB0aGluZyIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJIb3JuIG9mIHBsZW50eSIpOw0KDQogICAgb3JkZXIgPSAzMDA1MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJTbXVyZiBhY2NvdW50IiwNCiAgICAgIGxvYygiQXNjZW5kIHdpdGggPGI+JTE8L2I+IGJha2VkLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlNTEpKSkgKw0KICAgICAgICAiPHE+SXQncyBsaWtlIHlvdSBqdXN0IGFwcGVhcmVkIG91dCBvZiB0aGUgYmx1ZSE8L3E+IiwNCiAgICAgIFsyMSwgMzJdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJJZiBhdCBmaXJzdCB5b3UgZG9uJ3Qgc3VjY2VlZCIsDQogICAgICBsb2MoIkFzY2VuZCB3aXRoIDxiPiUxPC9iPiBiYWtlZC4iLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxZTU0KSkpICsNCiAgICAgICAgIjxxPklmIGF0IGZpcnN0IHlvdSBkb24ndCBzdWNjZWVkLCB0cnksIHRyeSwgdHJ5IGFnYWluLjxicj5CdXQgaXNuJ3QgdGhhdCB0aGUgZGVmaW5pdGlvbiBvZiBpbnNhbml0eT88L3E+IiwNCiAgICAgIFsyMSwgMzJdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMzMwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTyBGb3J0dW5hIiwNCiAgICAgIGxvYygNCiAgICAgICAgJ093biBldmVyeSA8Yj5mb3J0dW5lIHVwZ3JhZGU8L2I+LjxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pk93bmluZyB0aGlzIGFjaGlldmVtZW50IG1ha2VzIGZvcnR1bmVzIGFwcGVhciA8Yj50d2ljZSBhcyBvZnRlbjwvYj47IHVubG9ja2VkIGZvcnR1bmUgdXBncmFkZXMgYWxzbyBoYXZlIGEgPGI+JTElIGNoYW5jZTwvYj4gdG8gY2Fycnkgb3ZlciBhZnRlciBhc2NlbmRpbmcuJywNCiAgICAgICAgNDANCiAgICAgICksDQogICAgICBbMjksIDhdDQogICAgKTsNCg0KICAgIG9yZGVyID0gNjE2MTU7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiSW5pdGlhbCBwdWJsaWMgb2ZmZXJpbmciLA0KICAgICAgbG9jKCJNYWtlIHlvdXIgZmlyc3Qgc3RvY2sgbWFya2V0IHByb2ZpdC4iKSwNCiAgICAgIFswLCAzM10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIlJvb2tpZSBudW1iZXJzIiwNCiAgICAgIGxvYygiT3duIGF0IGxlYXN0IDxiPiUxPC9iPiBvZiBldmVyeSBzdG9jayBtYXJrZXQgZ29vZC4iLCAxMDApICsNCiAgICAgICAgIjxxPkdvdHRhIHB1bXAgdGhvc2UgbnVtYmVycyB1cCE8L3E+IiwNCiAgICAgIFs5LCAzM10NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk5vIG5vYmlsaXR5IGluIHBvdmVydHkiLA0KICAgICAgbG9jKCJPd24gYXQgbGVhc3QgPGI+JTE8L2I+IG9mIGV2ZXJ5IHN0b2NrIG1hcmtldCBnb29kLiIsIDUwMCkgKw0KICAgICAgICAiPHE+V2hhdCBraW5kIG9mIHR3aXN0ZWQgaW5kaXZpZHVhbCBpcyBvdXQgdGhlcmUgY3JhbW1pbmcgY2FtZWxzIHRocm91Z2ggbmVlZGxlIGhvbGVzIGFueXdheT88L3E+IiwNCiAgICAgIFsxMCwgMzNdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJGdWxsIHdhcmVob3VzZXMiLA0KICAgICAgbG9jKCJPd24gYXQgbGVhc3QgPGI+JTE8L2I+IG9mIGEgc3RvY2sgbWFya2V0IGdvb2QuIiwgMTAwMCksDQogICAgICBbMTEsIDMzXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTWFrZSBteSBkYXkiLA0KICAgICAgbG9jKCJNYWtlIDxiPmEgZGF5PC9iPiBvZiBDcFMgKCQlMSkgaW4gMSBzdG9jayBtYXJrZXQgc2FsZS4iLCA4NjQwMCksDQogICAgICBbMSwgMzNdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJCdXkgYnV5IGJ1eSIsDQogICAgICBsb2MoIlNwZW5kIDxiPmEgZGF5PC9iPiBvZiBDcFMgKCQlMSkgaW4gMSBzdG9jayBtYXJrZXQgcHVyY2hhc2UuIiwgODY0MDApLA0KICAgICAgWzEsIDMzXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiR2FzZW91cyBhc3NldHMiLA0KICAgICAgbG9jKA0KICAgICAgICAiSGF2ZSB5b3VyIHN0b2NrIG1hcmtldCBwcm9maXRzIHN1cnBhc3MgPGI+YSB3aG9sZSB5ZWFyPC9iPiBvZiBDcFMgKCQlMSkuIiwNCiAgICAgICAgMzE1MzYwMDANCiAgICAgICkgKyAiPHE+Qm95LCBob3cgdm9sYXRpbGUhPC9xPiIsDQogICAgICBbMTgsIDMzXQ0KICAgICk7DQogICAgR2FtZS5sYXN0LnBvb2wgPSAic2hhZG93IjsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJQeXJhbWlkIHNjaGVtZSIsDQogICAgICBsb2MoIlVubG9jayB0aGUgPGI+aGlnaGVzdC10aWVyPC9iPiBzdG9jayBtYXJrZXQgaGVhZHF1YXJ0ZXJzLiIpLA0KICAgICAgWzE4LCAzM10NCiAgICApOw0KDQogICAgb3JkZXIgPSAxMDAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJKZWxsaWNsZXMiLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+IGtpdHRlbiB1cGdyYWRlcy4iLCAxMCkgKw0KICAgICAgICAiPHE+SmVsbGljbGVzIGNhbiBhbmQgamVsbGljbGVzIGRvISBNYWtlIHN1cmUgdG8gd2FzaCB5b3VyIGplbGxpY2xlcyBldmVyeSBkYXkhPC9xPiIsDQogICAgICBbMTgsIDE5XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiUXVpbmNlbnRlbm5pYWwgYW5kIGEgaGFsZiIsDQogICAgICBsb2MoIkhhdmUgYXQgbGVhc3QgPGI+JTEgb2YgZXZlcnl0aGluZzwvYj4uIiwgNTUwKSArDQogICAgICAgICI8cT5UaGlzIHdvbid0IGZpbGwgdGhlIGNodXJuaW5nIHZvaWQgaW5zaWRlLCB5b3Uga25vdy48L3E+IiwNCiAgICAgIFsyOSwgMjZdDQogICAgKTsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIldoYXQgZGlkIHdlIGV2ZW4gZWF0IGJlZm9yZSB0aGVzZSIpOw0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkhlYXZ5IGZsb3ciKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJNb3JlIHlvdSBzYXk/Iik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkxhcmdlIGFuZCBpbiBjaGFyZ2UiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiQWJzb2x1dGVseSBzdHVmZmVkIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkl0J3Mgb25seSB3YWZlci10aGluIiwgIkp1c3QgdGhlIG9uZSEiKTsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJDbGlja2V0eSBzcGxpdCIsDQogICAgICBsb2MoIk1ha2UgPGI+JTE8L2I+IGZyb20gY2xpY2tpbmcuIiwgbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMWUyNykpKSwNCiAgICAgIFsxMSwgMzFdDQogICAgKTsNCiAgICBvcmRlciA9IDEwNTA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiR290dGEgaGFuZCBpdCB0byB5b3UiLA0KICAgICAgbG9jKCJIYXZlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGN1cnNvciIsIExCZWF1dGlmeSg3MDApKSksDQogICAgICBbMCwgMTddDQogICAgKTsNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiT2theSBib29tZXIiLCAiIiwgIkdyYW5kbWEiLCAxMyk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk92ZXJyaXBlIiwgIiIsICJGYXJtIiwgMTIpOw0KICAgIG9yZGVyID0gMTMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSb2NrIG9uIiwgIiIsICJNaW5lIiwgMTIpOw0KICAgIG9yZGVyID0gMTQwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTZWxmLW1hbm1hZGUgbWFuIiwgIiIsICJGYWN0b3J5IiwgMTIpOw0KICAgIG9yZGVyID0gMTQyNTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJDaGVja3Mgb3V0IiwgIiIsICJCYW5rIiwgMTIpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJMaXZpbmcgb24gYSBwcmF5ZXIiLCAiIiwgIlRlbXBsZSIsIDEyKTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJIaWdpdHVzIGZpZ2l0dXMgbWlnaXR1cyBtdW0iLA0KICAgICAgIiIsDQogICAgICAiV2l6YXJkIHRvd2VyIiwNCiAgICAgIDEyDQogICAgKTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhlIGluY3JlZGlibGUgam91cm5leSIsICIiLCAiU2hpcG1lbnQiLCAxMik7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkp1c3QgYSBwaGFzZSIsICIiLCAiQWxjaGVteSBsYWIiLCAxMik7DQogICAgb3JkZXIgPSAxNzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkRvbid0IGxldCBtZSBsZWF2ZSwgTXVycGgiLCAiIiwgIlBvcnRhbCIsIDEyKTsNCiAgICBvcmRlciA9IDE4MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQ2F2ZW1hbiB0byBjb3Ntb3MiLCAiIiwgIlRpbWUgbWFjaGluZSIsIDEyKTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiUGFydGljdWxhciB0YXN0ZXMiLCAiIiwgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwgMTIpOw0KICAgIG9yZGVyID0gMjAwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJBIGxpZ2h0IHNuYWNrIiwgIiIsICJQcmlzbSIsIDEyKTsNCiAgICBvcmRlciA9IDIxMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGVtcHRpbmcgZmF0ZSIsICIiLCAiQ2hhbmNlbWFrZXIiLCAxMik7DQogICAgb3JkZXIgPSAyMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRhdXRvbG9naWNhbCIsICIiLCAiRnJhY3RhbCBlbmdpbmUiLCAxMik7DQogICAgb3JkZXIgPSAyMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiQ3VybHkgYnJhY2VzIiwNCiAgICAgICI8cT5PciBhcyB0aGUgRnJlbmNoIGNhbGwgdGhlbSwgbXVzdGFjaGUgYm94ZXMuPGJyPkdvIHdlbGwgd2l0aCBxdW90ZXMuPC9xPiIsDQogICAgICAiSmF2YXNjcmlwdCBjb25zb2xlIiwNCiAgICAgIDEyDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2V2ZW4gaG9yc2VzaG9lcyIsDQogICAgICBsb2MoIkNsaWNrIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGdvbGRlbiBjb29raWUiLCBMQmVhdXRpZnkoMjc3NzcpKSkgKw0KICAgICAgICAiPHE+RW5vdWdoIGZvciBvbmUgb2YgdGhvc2UgZnVua3kgaG9yc2VzIHRoYXQgZ3JhemUgbmVhciB5b3VyIGZhY3Rvcmllcy48L3E+IiwNCiAgICAgIFsyMSwgMzNdDQogICAgKTsNCiAgICBHYW1lLmxhc3QucG9vbCA9ICJzaGFkb3ciOw0KDQogICAgb3JkZXIgPSAxMTAwNTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJPbGRlbiBkYXlzIiwNCiAgICAgIGxvYygiRmluZCB0aGUgPGI+Zm9yZ290dGVuIG1hZGVsZWluZTwvYj4uIikgKw0KICAgICAgICAiPHE+RGFzaE5ldCBGYXJtcyByZW1lbWJlcnMuPC9xPiIsDQogICAgICBbMTIsIDNdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTA1MDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGUgZGV2aWwncyB3b3Jrc2hvcCIsDQogICAgICBsb2MoIkhhdmUgPGI+JTE8L2I+LiIsIGxvYygiJTEgY3Vyc29yIiwgTEJlYXV0aWZ5KDgwMCkpKSwNCiAgICAgIFswLCAxOF0NCiAgICApOw0KICAgIG9yZGVyID0gMTIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJJbiB0aGUgZ3JlZW4iLCAiIiwgIkZhcm0iLCAxMyk7DQogICAgb3JkZXIgPSAxMzAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiTW91bnRhaW4gb3V0IG9mIGEgbW9sZWhpbGwsIGJ1dCBsaWtlIGluIGEgZ29vZCB3YXkiLA0KICAgICAgIiIsDQogICAgICAiTWluZSIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRoZSB3aGVlbHMgb2YgcHJvZ3Jlc3MiLCAiIiwgIkZhY3RvcnkiLCAxMyk7DQogICAgb3JkZXIgPSAxNDI1Ow0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRoYXQncyByaWNoIiwgIiIsICJCYW5rIiwgMTMpOw0KICAgIG9yZGVyID0gMTQ1MDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJQcmVhY2hlcyBhbmQgY3JlYW0iLCAiIiwgIlRlbXBsZSIsIDEzKTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWFnaWMgdGhpbmtpbmciLCAiIiwgIldpemFyZCB0b3dlciIsIDEzKTsNCiAgICBvcmRlciA9IDE1MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJJcyB0aGVyZSBsaWZlIG9uIE1hcnM/IiwNCiAgICAgICI8cT5ZZXMsIHRoZXJlIGlzLiBZb3UncmUgY3VycmVudGx5IHVzaW5nIGl0IGFzIGZpbGxpbmcgaW4gZXhwZXJpbWVudGFsIGZsYXZvciBwcm90b3R5cGUgIzgxMDY1Ny48L3E+IiwNCiAgICAgICJTaGlwbWVudCIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkJhZCBjaGVtaXN0cnkiLCAiIiwgIkFsY2hlbXkgbGFiIiwgMTMpOw0KICAgIG9yZGVyID0gMTcwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJSZWR1Y2VkIHRvIGdpYmJlcmluZyBoZWFwcyIsICIiLCAiUG9ydGFsIiwgMTMpOw0KICAgIG9yZGVyID0gMTgwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJCYWNrIGFscmVhZHk/IiwgIiIsICJUaW1lIG1hY2hpbmUiLCAxMyk7DQogICAgb3JkZXIgPSAxOTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk51Y2xlYXIgdGhyb25lIiwgIiIsICJBbnRpbWF0dGVyIGNvbmRlbnNlciIsIDEzKTsNCiAgICBvcmRlciA9IDIwMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWFraW5nIGxpZ2h0IG9mIHRoZSBzaXR1YXRpb24iLCAiIiwgIlByaXNtIiwgMTMpOw0KICAgIG9yZGVyID0gMjEwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkZsaXAgYSBjb29raWUuIENoaXBzLCBJIHdpbi4gQ3J1c3QsIHlvdSBsb3NlLiIsDQogICAgICAiIiwNCiAgICAgICJDaGFuY2VtYWtlciIsDQogICAgICAxMw0KICAgICk7DQogICAgb3JkZXIgPSAyMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkluIGFuZCBvZiBpdHNlbGYiLCAiIiwgIkZyYWN0YWwgZW5naW5lIiwgMTMpOw0KICAgIG9yZGVyID0gMjMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkR1Y2sgdHlwaW5nIiwNCiAgICAgICI8cT5IZWxsbywgdGhpcyBpcyBhIGR1Y2sgdHlwaW5nLiBHb3QgYW55IGdyYXBlcz88L3E+IiwNCiAgICAgICJKYXZhc2NyaXB0IGNvbnNvbGUiLA0KICAgICAgMTMNCiAgICApOw0KDQogICAgb3JkZXIgPSAyNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiVGhleSdsbCBuZXZlciBrbm93IHdoYXQgaGl0ICdlbSIsDQogICAgICAiIiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiV2VsbC12ZXJzZWQiLCAiIiwgIklkbGV2ZXJzZSIsIDIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJpcGUgZm9yIHRoZSBwaWNraW5nIiwgIiIsICJJZGxldmVyc2UiLCAzKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJVbnJlYWwiLCAiIiwgIklkbGV2ZXJzZSIsIDQpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk9uY2UgeW91J3ZlIHNlZW4gb25lIiwgIiIsICJJZGxldmVyc2UiLCA1KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJTcG9pbHMgYW5kIHBsdW5kZXIiLCAiIiwgIklkbGV2ZXJzZSIsIDYpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiTm9ib2R5IGV4aXN0cyBvbiBwdXJwb3NlLCBub2JvZHkgYmVsb25ncyBhbnl3aGVyZSIsDQogICAgICAiPHE+Q29tZSB3YXRjaCBUVj88L3E+IiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgNw0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiSHlwZXJzcGFjZSBleHByZXNzd2F5IiwgIiIsICJJZGxldmVyc2UiLCA4KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJWZXJzYXRpbGUiLCAiIiwgIklkbGV2ZXJzZSIsIDkpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIllvdSBhcmUgaW5ldml0YWJsZSIsICIiLCAiSWRsZXZlcnNlIiwgMTApOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkF3YXkgZnJvbSB0aGlzIHBsYWNlIiwgIiIsICJJZGxldmVyc2UiLCAxMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRXZlcnl3aGVyZSBhdCBvbmNlIiwgIiIsICJJZGxldmVyc2UiLCAxMik7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJSZWplY3QgcmVhbGl0eSwgc3Vic3RpdHV0ZSB5b3VyIG93biIsDQogICAgICAiIiwNCiAgICAgICJJZGxldmVyc2UiLA0KICAgICAgMTMNCiAgICApOw0KDQogICAgb3JkZXIgPSAyNDIwOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJGcmluZ2UiLCAiSWRsZXZlcnNlIiwgMSk7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIkNvaGVyZW5jZSIsICJJZGxldmVyc2UiLCAyKTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiRWFydGgtNjE2IiwgIklkbGV2ZXJzZSIsIDMpOw0KDQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoIlN0cmFuZ2UgdG9wb2xvZ2llcyIsICIiLCBbMzMsIDI2XSk7DQogICAgR2FtZS5PYmplY3RzWyJJZGxldmVyc2UiXS5sZXZlbEFjaGlldjEwID0gR2FtZS5sYXN0Ow0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkdyYW5kIGRlc2lnbiIsDQogICAgICBsb2MoIk93biA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBidWlsZGluZyIsIExCZWF1dGlmeSg1MDAwKSkpICsNCiAgICAgICAgIjxxPlRoZXknbGwgcmVtZW1iZXIgeW91IGZvcmV2ZXIhPC9xPiIsDQogICAgICBbMzIsIDEyXQ0KICAgICk7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiRWN1bWVub3BvbGlzIiwNCiAgICAgIGxvYygiT3duIDxiPiUxPC9iPi4iLCBsb2MoIiUxIGJ1aWxkaW5nIiwgTEJlYXV0aWZ5KDc1MDApKSkgKw0KICAgICAgICAiPHE+R2V0dGluZyBhIHdlZSBiaXQgY3JhbXBlZC48L3E+IiwNCiAgICAgIFszMywgMTJdDQogICAgKTsNCg0KICAgIG9yZGVyID0gNjAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJUaGUgZnVsbCBwaWN0dXJlIiwNCiAgICAgIGxvYygiUHVyY2hhc2UgPGI+JTE8L2I+LiIsIGxvYygiJTEgdXBncmFkZSIsIExCZWF1dGlmeSgzMDApKSkgKw0KICAgICAgICAiPHE+U28gdGhhdCdzIHdoZXJlIHRoYXQgZml0cyBpbiE8L3E+IiwNCiAgICAgIFszMiwgMTFdDQogICAgKTsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJXaGVuIHRoZXJlJ3Mgbm90aGluZyBsZWZ0IHRvIGFkZCIsDQogICAgICBsb2MoIlB1cmNoYXNlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIHVwZ3JhZGUiLCBMQmVhdXRpZnkoNDAwKSkpICsNCiAgICAgICAgIjxxPi4uLmtlZXAgZ29pbmcuPC9xPiIsDQogICAgICBbMzMsIDExXQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2V4Y2VudGVubmlhbCIsDQogICAgICBsb2MoIkhhdmUgYXQgbGVhc3QgPGI+JTEgb2YgZXZlcnl0aGluZzwvYj4uIiwgNjAwKSArDQogICAgICAgICI8cT5IZXksIG5pY2UgbWlsZXN0b25lITwvcT4iLA0KICAgICAgWzMxLCAzM10NCiAgICApOw0KDQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiS2VlcCBnb2luZyB1bnRpbCBJIHNheSBzdG9wIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiQnV0IEkgZGlkbid0IHNheSBzdG9wLCBkaWQgST8iKTsNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJXaXRoIHVucml2YWxlZCBmZXJ2b3IiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiVGhpbmsgYmlnIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkh5cGVyc2l6ZSBtZSIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJNYXggY2FwYWNpdHkiKTsNCg0KICAgIG9yZGVyID0gNjE2MTY7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiTGlxdWlkIGFzc2V0cyIsDQogICAgICBsb2MoIkhhdmUgeW91ciBzdG9jayBtYXJrZXQgcHJvZml0cyBzdXJwYXNzIDxiPiQlMTwvYj4uIiwgMWU3KSwNCiAgICAgIFsxMiwgMzNdDQogICAgKTsNCg0KICAgIG9yZGVyID0gMTEwMDA7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU3RpZmxpbmcgdGhlIHByZXNzIiwNCiAgICAgIGxvYygiU3F1aXNoIHRoZSBuZXdzIHRpY2tlciBmbGF0LCB0aGVuIGNsaWNrIG9uIGl0LiIpICsNCiAgICAgICAgIjxxPk5hcnJvdyBpbiBoZXJlIG9yIGlzIGl0IGp1c3QgbWU/PC9xPiIsDQogICAgICBbMjcsIDddDQogICAgKTsNCg0KICAgIG9yZGVyID0gMjUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJJdCdzIGJpZyBicmFpbiB0aW1lIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAxKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJKdXN0IG15IGltYWdpbmF0aW9uIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAyKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KCJOb3cgdGhlcmUncyBhbiBpZGVhIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAzKTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIlRoZSBvcmdhbiB0aGF0IG5hbWVkIGl0c2VsZiIsDQogICAgICAiIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgNA0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiR3lyaWZpY2F0aW9uIiwgIiIsICJDb3J0ZXggYmFrZXIiLCA1KTsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgJ0EgdHJhZGVtYXJrZWQgcG9ydG1hbnRlYXUgb2YgImltYWdpbmF0aW9uIiBhbmQgImVuZ2luZWVyaW5nIicsDQogICAgICAiIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgNg0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiTWluZGZ1bG5lc3MiLCAiIiwgIkNvcnRleCBiYWtlciIsIDcpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlRoZSAxMCUgbXl0aCIsICIiLCAiQ29ydGV4IGJha2VyIiwgOCk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJEb24ndCB0aGluayBhYm91dCBpdCB0b28gaGFyZCIsDQogICAgICAiIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgOQ0KICAgICk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJUaG91Z2ggZm9vbHMgc2VsZG9tIGRpZmZlciIsDQogICAgICAiIiwNCiAgICAgICJDb3J0ZXggYmFrZXIiLA0KICAgICAgMTANCiAgICApOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkxvb2tpbmcga2luZCBvZiBkdW1iIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAxMSk7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiQSBiZWF1dGlmdWwgbWluZCIsICIiLCAiQ29ydGV4IGJha2VyIiwgMTIpOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkNhcmRpbmFsIHN5bmFwc2VzIiwgIiIsICJDb3J0ZXggYmFrZXIiLCAxMyk7DQoNCiAgICBvcmRlciA9IDI1MjA7DQogICAgR2FtZS5Qcm9kdWN0aW9uQWNoaWV2ZW1lbnQoIlBvc2l0aXZlIHRoaW5raW5nIiwgIkNvcnRleCBiYWtlciIsIDEpOw0KICAgIEdhbWUuUHJvZHVjdGlvbkFjaGlldmVtZW50KCJUaGUgdGhvdWdodCB0aGF0IGNvdW50cyIsICJDb3J0ZXggYmFrZXIiLCAyKTsNCiAgICBHYW1lLlByb2R1Y3Rpb25BY2hpZXZlbWVudCgiVW50aGlua2FibGUiLCAiQ29ydGV4IGJha2VyIiwgMyk7DQoNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgiR2lmdGVkIiwgIiIsIFszNCwgMjZdKTsNCiAgICBHYW1lLk9iamVjdHNbIkNvcnRleCBiYWtlciJdLmxldmVsQWNoaWV2MTAgPSBHYW1lLmxhc3Q7DQoNCiAgICBvcmRlciA9IDExMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiVGhleSBtb2lzdGx5IGNvbWUgYXQgbmlnaHQiLCAiIiwgIkdyYW5kbWEiLCAxNCk7DQogICAgb3JkZXIgPSAxMjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkl0J3MgZ3Jvd24gb24geW91IiwgIiIsICJGYXJtIiwgMTQpOw0KICAgIG9yZGVyID0gMTMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkRvbid0IGxldCB0aGUgd2FsbHMgY2F2ZSBpbiBvbiB5b3UiLA0KICAgICAgIiIsDQogICAgICAiTWluZSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIlJlcGxhY2VkIGJ5IHJvYm90cyIsICIiLCAiRmFjdG9yeSIsIDE0KTsNCiAgICBvcmRlciA9IDE0MjU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJGaW5hbmNpYWwgcHJvZGlneSIsDQogICAgICAiPHE+SW1hZ2luZSBob3cgaXQgd291bGQgYmUsIHRvIGJlIGF0IHRoZSB0b3AgbWFraW5nIGNhc2ggbW9uZXkuPC9xPiIsDQogICAgICAiQmFuayIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAxNDUwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkFuZCBJIHdpbGwgcHJheSB0byBhIGJpZyBnb2QiLCAiIiwgIlRlbXBsZSIsIDE0KTsNCiAgICBvcmRlciA9IDE0NzU7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiU2hvc3BsZSBDb2x1cGlzIiwgIiIsICJXaXphcmQgdG93ZXIiLCAxNCk7DQogICAgb3JkZXIgPSAxNTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkZhbHNlIHZhY3V1bSIsICIiLCAiU2hpcG1lbnQiLCAxNCk7DQogICAgb3JkZXIgPSAxNjAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk1ldGFsbGljIHRhc3RlIiwgIiIsICJBbGNoZW15IGxhYiIsIDE0KTsNCiAgICBvcmRlciA9IDE3MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiU3dpc3MgY2hlZXNlIiwgIiIsICJQb3J0YWwiLCAxNCk7DQogICAgb3JkZXIgPSAxODAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoDQogICAgICAiQnV0IHRoZSBmdXR1cmUgcmVmdXNlZCB0byBjaGFuZ2UiLA0KICAgICAgIiIsDQogICAgICAiVGltZSBtYWNoaW5lIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDE5MDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgNCiAgICAgICJXaGF0J3MgdGhlIGRhcmsgbWF0dGVyIHdpdGggeW91IiwNCiAgICAgICIiLA0KICAgICAgIkFudGltYXR0ZXIgY29uZGVuc2VyIiwNCiAgICAgIDE0DQogICAgKTsNCiAgICBvcmRlciA9IDIwMDA7DQogICAgR2FtZS5UaWVyZWRBY2hpZXZlbWVudCgiRW5saWdodGVubWVudCIsICIiLCAiUHJpc20iLCAxNCk7DQogICAgb3JkZXIgPSAyMTAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIk5ldmVyIHRlbGwgbWUgdGhlIG9kZHMiLCAiIiwgIkNoYW5jZW1ha2VyIiwgMTQpOw0KICAgIG9yZGVyID0gMjIwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkJsb3dpbmcgYW4gQXBvbGxvbmlhbiBnYXNrZXQiLA0KICAgICAgIiIsDQogICAgICAiRnJhY3RhbCBlbmdpbmUiLA0KICAgICAgMTQNCiAgICApOw0KICAgIG9yZGVyID0gMjMwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkdldCB3aXRoIHRoZSBwcm9ncmFtIiwNCiAgICAgICIiLA0KICAgICAgIkphdmFzY3JpcHQgY29uc29sZSIsDQogICAgICAxNA0KICAgICk7DQogICAgb3JkZXIgPSAyNDAwOw0KICAgIEdhbWUuVGllcmVkQWNoaWV2ZW1lbnQoIkxvc3QgeW91ciBjb3NtaWMgbWFyYmxlcyIsICIiLCAiSWRsZXZlcnNlIiwgMTQpOw0KICAgIG9yZGVyID0gMjUwMDsNCiAgICBHYW1lLlRpZXJlZEFjaGlldmVtZW50KA0KICAgICAgIkJ5IHdpbGwgYWxvbmUgSSBzZXQgbXkgbWluZCBpbiBtb3Rpb24iLA0KICAgICAgIiIsDQogICAgICAiQ29ydGV4IGJha2VyIiwNCiAgICAgIDE0DQogICAgKTsNCg0KICAgIG9yZGVyID0gMTAwMDsNCiAgICBuZXcgR2FtZS5BY2hpZXZlbWVudCgNCiAgICAgICJBaW4ndCB0aGF0IGEgY2xpY2sgaW4gdGhlIGhlYWQiLA0KICAgICAgbG9jKCJNYWtlIDxiPiUxPC9iPiBmcm9tIGNsaWNraW5nLiIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDFlMjkpKSksDQogICAgICBbMTEsIDM0XQ0KICAgICk7DQoNCiAgICBvcmRlciA9IDcwMDI7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiU2V4Y2VudGVubmlhbCBhbmQgYSBoYWxmIiwNCiAgICAgIGxvYygiSGF2ZSBhdCBsZWFzdCA8Yj4lMSBvZiBldmVyeXRoaW5nPC9iPi4iLCA2NTApICsNCiAgICAgICAgIjxxPkhvcGUgeW91J3JlIGVuam95aW5nIHRoZSBncmluZCBzbyBmYXIhIEl0IGdldHMgd29yc2UuPC9xPiIsDQogICAgICBbMjEsIDM0XQ0KICAgICk7DQoNCiAgICBHYW1lLkNwc0FjaGlldmVtZW50KCJJIGFtIHNwZWVkIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiQW5kIG9uIGFuZCBvbiIpOw0KICAgIEdhbWUuQmFua0FjaGlldmVtZW50KCJGYWtlIGl0IHRpbGwgeW91IGJha2UgaXQiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiSGlzdG9yeSBpbiB0aGUgYmFraW5nIik7DQoNCiAgICBvcmRlciA9IDIyMTAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkJhYnkgaXQncyBvbGQgb3V0c2lkZSIsDQogICAgICBsb2MoIkNsaWNrIG9uZSBvZiBTYW50YSdzIGhlbHBlciBncmFuZG1hcyBkdXJpbmcgQ2hyaXN0bWFzIHNlYXNvbi4iKSwNCiAgICAgIFsxMCwgOV0NCiAgICApOw0KDQogICAgb3JkZXIgPSA1MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIk15cmlhZCIsDQogICAgICBsb2MoIk93biA8Yj4lMTwvYj4uIiwgbG9jKCIlMSBidWlsZGluZyIsIExCZWF1dGlmeSgxMDAwMCkpKSArDQogICAgICAgICI8cT5BdCB0aGlzIHBvaW50LCBtb3N0IG9mIHlvdXIgYXNzZXRzIGxpZSBpbiByZWFsIGVzdGF0ZS48L3E+IiwNCiAgICAgIFszMSwgNl0NCiAgICApOw0KDQogICAgb3JkZXIgPSA2MDAwOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkthaXplbiIsDQogICAgICBsb2MoIlB1cmNoYXNlIDxiPiUxPC9iPi4iLCBsb2MoIiUxIHVwZ3JhZGUiLCBMQmVhdXRpZnkoNTAwKSkpICsNCiAgICAgICAgIjxxPkp1c3QgYSBsaXR0bGUgbW9yZS48L3E+IiwNCiAgICAgIFszMSwgNV0NCiAgICApOw0KICAgIG5ldyBHYW1lLkFjaGlldmVtZW50KA0KICAgICAgIkJleW9uZCBxdWFsaXR5IiwNCiAgICAgIGxvYygiUHVyY2hhc2UgPGI+JTE8L2I+LiIsIGxvYygiJTEgdXBncmFkZSIsIExCZWF1dGlmeSg2MDApKSkgKw0KICAgICAgICAiPHE+RHdhcmZpbmcgYWxsIG9mIG1hbmtpbmQncyBhY2NvbXBsaXNobWVudHMuPC9xPiIsDQogICAgICBbMzIsIDVdDQogICAgKTsNCg0KICAgIEdhbWUuQ3BzQWNoaWV2ZW1lbnQoIkV2ZXJ5dGhpbmcgaGFwcGVucyBzbyBtdWNoIik7DQogICAgR2FtZS5DcHNBY2hpZXZlbWVudCgiSSdsbCByZXN0IHdoZW4gSSdtIGRlYWQiKTsNCiAgICBHYW1lLkJhbmtBY2hpZXZlbWVudCgiV2hhdCBkbyB5b3UgZ2V0IGZvciB0aGUgYmFrZXIgd2hvIGhhcyBldmVyeXRoaW5nIik7DQogICAgR2FtZS5CYW5rQWNoaWV2ZW1lbnQoIkJvdHRvbWxlc3MgcGl0Iik7DQoNCiAgICBvcmRlciA9IDYwMDE7DQogICAgbmV3IEdhbWUuQWNoaWV2ZW1lbnQoDQogICAgICAiQWxsIHRoZSBzdGFycyBpbiBoZWF2ZW4iLA0KICAgICAgbG9jKCJPd24gPGI+JTE8L2I+IGhlYXZlbmx5IHVwZ3JhZGVzLiIsIDEwMCksDQogICAgICBbMzAsIDVdDQogICAgKTsNCg0KICAgIC8vZW5kIG9mIGFjaGlldmVtZW50cw0KDQogICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgIGlmIChHYW1lLk9iamVjdHNbaV0ubGV2ZWxBY2hpZXYxMCkgew0KICAgICAgICBHYW1lLk9iamVjdHNbaV0ubGV2ZWxBY2hpZXYxMC5iYXNlRGVzYyA9IGxvYygNCiAgICAgICAgICAiUmVhY2ggbGV2ZWwgPGI+JTE8L2I+ICUyLiIsDQogICAgICAgICAgWzEwLCBHYW1lLk9iamVjdHNbaV0ucGx1cmFsXQ0KICAgICAgICApOw0KICAgICAgICBHYW1lLk9iamVjdHNbaV0ubGV2ZWxBY2hpZXYxMC5kZXNjID0NCiAgICAgICAgICBHYW1lLk9iamVjdHNbaV0ubGV2ZWxBY2hpZXYxMC5iYXNlRGVzYzsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBMb2NhbGl6ZVVwZ3JhZGVzQW5kQWNoaWV2cygpOw0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCUJVRkZTDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLmJ1ZmZzID0ge307IC8vYnVmZnMgY3VycmVudGx5IGluIGVmZmVjdCBieSBuYW1lDQogICAgR2FtZS5idWZmc0kgPSAwOw0KICAgIEdhbWUuYnVmZnNMID0gbCgiYnVmZnMiKTsNCiAgICBHYW1lLmdhaW5CdWZmID0gZnVuY3Rpb24gKHR5cGUsIHRpbWUsIGFyZzEsIGFyZzIsIGFyZzMpIHsNCiAgICAgIHR5cGUgPSBHYW1lLmJ1ZmZUeXBlc0J5TmFtZVt0eXBlXTsNCiAgICAgIHZhciBvYmogPSB0eXBlLmZ1bmModGltZSwgYXJnMSwgYXJnMiwgYXJnMyk7DQogICAgICBvYmoudHlwZSA9IHR5cGU7DQogICAgICBvYmouYXJnMSA9IGFyZzE7DQogICAgICBvYmouYXJnMiA9IGFyZzI7DQogICAgICBvYmouYXJnMyA9IGFyZzM7DQogICAgICBpZiAoIW9iai5kbmFtZSAmJiBvYmoubmFtZSAhPSAiPz8/Iikgb2JqLmRuYW1lID0gbG9jKG9iai5uYW1lKTsNCg0KICAgICAgdmFyIGJ1ZmYgPSB7DQogICAgICAgIHZpc2libGU6IHRydWUsDQogICAgICAgIHRpbWU6IDAsDQogICAgICAgIG5hbWU6ICI/Pz8iLA0KICAgICAgICBkZXNjOiAiIiwNCiAgICAgICAgaWNvbjogWzAsIDBdLA0KICAgICAgfTsNCiAgICAgIGlmIChHYW1lLmJ1ZmZzW29iai5uYW1lXSkgew0KICAgICAgICAvL2lmIHRoZXJlIGlzIGFscmVhZHkgYSBidWZmIGluIGVmZmVjdCB3aXRoIHRoaXMgbmFtZQ0KICAgICAgICB2YXIgYnVmZiA9IEdhbWUuYnVmZnNbb2JqLm5hbWVdOw0KICAgICAgICBpZiAob2JqLm1heCkgYnVmZi50aW1lID0gTWF0aC5tYXgob2JqLnRpbWUsIGJ1ZmYudGltZSk7IC8vbmV3IGR1cmF0aW9uIGlzIG1heCBvZiBvbGQgYW5kIG5ldw0KICAgICAgICBpZiAob2JqLmFkZCkgYnVmZi50aW1lICs9IG9iai50aW1lOyAvL25ldyBkdXJhdGlvbiBpcyBvbGQgKyBuZXcNCiAgICAgICAgaWYgKCFvYmoubWF4ICYmICFvYmouYWRkKSBidWZmLnRpbWUgPSBvYmoudGltZTsgLy9uZXcgZHVyYXRpb24gaXMgc2V0IHRvIG5ldw0KICAgICAgICBidWZmLm1heFRpbWUgPSBidWZmLnRpbWU7DQogICAgICB9IC8vY3JlYXRlIG5ldyBidWZmDQogICAgICBlbHNlIHsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBvYmopIHsgLy9wYXN0ZSBwYXJhbWV0ZXJzIG9udG8gYnVmZg0KICAgICAgICAgIGJ1ZmZbaV0gPSBvYmpbaV07DQogICAgICAgIH0NCiAgICAgICAgYnVmZi5tYXhUaW1lID0gYnVmZi50aW1lOw0KICAgICAgICBHYW1lLmJ1ZmZzW2J1ZmYubmFtZV0gPSBidWZmOw0KICAgICAgICBidWZmLmlkID0gR2FtZS5idWZmc0k7DQoNCiAgICAgICAgLy9jcmVhdGUgZG9tDQogICAgICAgIEdhbWUuYnVmZnNMLmlubmVySFRNTCA9DQogICAgICAgICAgR2FtZS5idWZmc0wuaW5uZXJIVE1MICsNCiAgICAgICAgICAnPGRpdiBpZD0iYnVmZicgKw0KICAgICAgICAgIGJ1ZmYuaWQgKw0KICAgICAgICAgICciIGNsYXNzPSJjcmF0ZSBlbmFibGVkIGJ1ZmYiICcgKw0KICAgICAgICAgIChidWZmLmRlc2MNCiAgICAgICAgICAgID8gR2FtZS5nZXRUb29sdGlwKA0KICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJwcm9tcHQiIHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjExcHg7bWFyZ2luOjhweCAwcHg7IiBpZD0idG9vbHRpcEJ1ZmYiPjxoMz4nICsNCiAgICAgICAgICAgICAgICAgIGJ1ZmYuZG5hbWUgKw0KICAgICAgICAgICAgICAgICAgJzwvaDM+PGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgICAgICAgICBidWZmLmRlc2MgKw0KICAgICAgICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgICAgICAgICAgImxlZnQiLA0KICAgICAgICAgICAgICAgIHRydWUNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgOiAiIikgKw0KICAgICAgICAgICcgc3R5bGU9Im9wYWNpdHk6MTtmbG9hdDpub25lO2Rpc3BsYXk6YmxvY2s7JyArDQogICAgICAgICAgd3JpdGVJY29uKGJ1ZmYuaWNvbikgKw0KICAgICAgICAgICciPjwvZGl2Pic7DQoNCiAgICAgICAgYnVmZi5sID0gbCgiYnVmZiIgKyBidWZmLmlkKTsNCg0KICAgICAgICBHYW1lLmJ1ZmZzSSsrOw0KICAgICAgfQ0KICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgcmV0dXJuIGJ1ZmY7DQogICAgfTsNCiAgICBHYW1lLmhhc0J1ZmYgPSBmdW5jdGlvbiAoDQogICAgICB3aGF0IC8vcmV0dXJucyAwIGlmIHRoZXJlIGlzIG5vIGJ1ZmYgaW4gZWZmZWN0IHdpdGggdGhpcyBuYW1lOyBlbHNlLCByZXR1cm5zIGl0DQogICAgKSB7DQogICAgICBpZiAoIUdhbWUuYnVmZnNbd2hhdF0pIHJldHVybiAwOw0KICAgICAgZWxzZSByZXR1cm4gR2FtZS5idWZmc1t3aGF0XTsNCiAgICB9Ow0KICAgIEdhbWUudXBkYXRlQnVmZnMgPSBmdW5jdGlvbiAoKSAvL2V4ZWN1dGVkIGV2ZXJ5IGxvZ2ljIGZyYW1lDQogICAgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLmJ1ZmZzKSB7DQogICAgICAgIHZhciBidWZmID0gR2FtZS5idWZmc1tpXTsNCg0KICAgICAgICBpZiAoYnVmZi50aW1lID49IDApIHsNCiAgICAgICAgICBpZiAoIWwoImJ1ZmZQaWVUaW1lciIgKyBidWZmLmlkKSkNCiAgICAgICAgICAgIGwoImJ1ZmYiICsgYnVmZi5pZCkuaW5uZXJIVE1MID0NCiAgICAgICAgICAgICAgbCgiYnVmZiIgKyBidWZmLmlkKS5pbm5lckhUTUwgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0icGllVGltZXIiIGlkPSJidWZmUGllVGltZXInICsNCiAgICAgICAgICAgICAgYnVmZi5pZCArDQogICAgICAgICAgICAgICciPjwvZGl2Pic7DQogICAgICAgICAgdmFyIFQgPSAxIC0gYnVmZi50aW1lIC8gYnVmZi5tYXhUaW1lOw0KICAgICAgICAgIFQgPSAoVCAqIDE0NCkgJSAxNDQ7DQogICAgICAgICAgbCgiYnVmZlBpZVRpbWVyIiArIGJ1ZmYuaWQpLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAgICAgICAtTWF0aC5mbG9vcihUICUgMTgpICogNDggKyAicHggIiArIC1NYXRoLmZsb29yKFQgLyAxOCkgKiA0OCArICJweCI7DQogICAgICAgIH0NCiAgICAgICAgYnVmZi50aW1lLS07DQogICAgICAgIGlmIChidWZmLnRpbWUgPD0gMCkgew0KICAgICAgICAgIGlmIChHYW1lLm9uQ3JhdGUgPT0gbCgiYnVmZiIgKyBidWZmLmlkKSkgR2FtZS50b29sdGlwLmhpZGUoKTsNCiAgICAgICAgICBpZiAoYnVmZi5vbkRpZSkgYnVmZi5vbkRpZSgpOw0KICAgICAgICAgIEdhbWUuYnVmZnNMLnJlbW92ZUNoaWxkKGwoImJ1ZmYiICsgYnVmZi5pZCkpOw0KICAgICAgICAgIGlmIChHYW1lLmJ1ZmZzW2J1ZmYubmFtZV0pIHsNCiAgICAgICAgICAgIEdhbWUuYnVmZnNbYnVmZi5uYW1lXSA9IDA7DQogICAgICAgICAgICBkZWxldGUgR2FtZS5idWZmc1tidWZmLm5hbWVdOw0KICAgICAgICAgIH0NCiAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLmtpbGxCdWZmID0gZnVuY3Rpb24gKA0KICAgICAgd2hhdCAvL3JlbW92ZSBhIGJ1ZmYgYnkgbmFtZQ0KICAgICkgew0KICAgICAgaWYgKEdhbWUuYnVmZnNbd2hhdF0pIHsNCiAgICAgICAgR2FtZS5idWZmc1t3aGF0XS50aW1lID0gMDsgLypHYW1lLmJ1ZmZzW3doYXRdPTA7Ki8NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUua2lsbEJ1ZmZzID0gZnVuY3Rpb24gKCkgLy9yZW1vdmUgYWxsIGJ1ZmZzDQogICAgew0KICAgICAgR2FtZS5idWZmc0wuaW5uZXJIVE1MID0gIiI7DQogICAgICBHYW1lLmJ1ZmZzID0ge307DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7DQogICAgfTsNCg0KICAgIEdhbWUuYnVmZlR5cGVzID0gW107IC8vYnVmZiBhcmNoZXR5cGVzOyBvbmx5IGJ1ZmZzIGRlY2xhcmVkIGZyb20gdGhlc2UgY2FuIGJlIHNhdmVkIGFuZCBsb2FkZWQNCiAgICBHYW1lLmJ1ZmZUeXBlc0J5TmFtZSA9IFtdOw0KICAgIEdhbWUuYnVmZlR5cGVzTiA9IDA7DQogICAgR2FtZS5idWZmVHlwZSA9IGZ1bmN0aW9uIChuYW1lLCBmdW5jKSB7DQogICAgICB0aGlzLm5hbWUgPSBuYW1lOw0KICAgICAgdGhpcy5mdW5jID0gZnVuYzsgLy90aGlzIGlzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYnVmZiBvYmplY3Q7IGl0IHRha2VzIGEgInRpbWUiIGFyZ3VtZW50IGluIHNlY29uZHMsIGFuZCAzIG1vcmUgb3B0aW9uYWwgYXJndW1lbnRzIGF0IG1vc3QsIHdoaWNoIHdpbGwgYmUgc2F2ZWQgYW5kIGxvYWRlZCBhcyBmbG9hdHMNCiAgICAgIHRoaXMuaWQgPSBHYW1lLmJ1ZmZUeXBlc047DQogICAgICB0aGlzLnZhbmlsbGEgPSBHYW1lLnZhbmlsbGE7DQogICAgICBHYW1lLmJ1ZmZUeXBlc0J5TmFtZVt0aGlzLm5hbWVdID0gdGhpczsNCiAgICAgIEdhbWUuYnVmZlR5cGVzW0dhbWUuYnVmZlR5cGVzTl0gPSB0aGlzOw0KICAgICAgR2FtZS5idWZmVHlwZXNOKys7DQogICAgfTsNCg0KICAgIC8qDQoJCWJhc2ljIGJ1ZmYgcGFyYW1ldGVycyA6DQoJCQluYW1lOidLaXR0ZW4gcmFpbicsDQoJCQlkZXNjOidJdFwncyByYWluaW5nIGtpdHRlbnMhJywNCgkJCWljb246WzAsMF0sDQoJCQl0aW1lOjMwKkdhbWUuZnBzDQoJCW90aGVyIHBhcmFtZXRlcnMgOg0KCQkJdmlzaWJsZTpmYWxzZSAtIHdpbGwgaGlkZSB0aGUgYnVmZiBmcm9tIHRoZSBidWZmIGxpc3QNCgkJCWFkZDp0cnVlIC0gaWYgdGhpcyBidWZmIGFscmVhZHkgZXhpc3RzLCBhZGQgdGhlIG5ldyBkdXJhdGlvbiB0byB0aGUgb2xkIG9uZQ0KCQkJbWF4OnRydWUgLSBpZiB0aGlzIGJ1ZmYgYWxyZWFkeSBleGlzdHMsIHNldCB0aGUgbmV3IGR1cmF0aW9uIHRvIHRoZSBtYXggb2YgZWl0aGVyDQoJCQlvbkRpZTpmdW5jdGlvbigpe30gLSBmdW5jdGlvbiB3aWxsIGV4ZWN1dGUgd2hlbiB0aGUgYnVmZiBydW5zIG91dA0KCQkJcG93ZXI6MyAtIHVzZWQgYnkgc29tZSBidWZmcw0KCQkJbXVsdENwUzozIC0gYnVmZiBtdWx0aXBsaWVzIENwUyBieSB0aGlzIGFtb3VudA0KCQkJbXVsdENsaWNrOjMgLSBidWZmIG11bHRpcGxpZXMgY2xpY2sgcG93ZXIgYnkgdGhpcyBhbW91bnQNCgkJKi8NCg0KICAgIC8vYmFzZSBidWZmcw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJmcmVuenkiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiRnJlbnp5IiwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzEwLCAxNF0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgYWRkOiB0cnVlLA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJibG9vZCBmcmVuenkiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiRWxkZXIgZnJlbnp5IiwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzI5LCA2XSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBhZGQ6IHRydWUsDQogICAgICAgIG11bHRDcFM6IHBvdywNCiAgICAgICAgYXVyYTogMSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImNsb3QiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ2xvdCIsDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiQ29va2llIHByb2R1Y3Rpb24gaGFsdmVkIGZvciAlMSEiLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKQ0KICAgICAgICApLA0KICAgICAgICBpY29uOiBbMTUsIDVdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIGFkZDogdHJ1ZSwNCiAgICAgICAgbXVsdENwUzogcG93LA0KICAgICAgICBhdXJhOiAyLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgiZHJhZ29uIGhhcnZlc3QiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICBpZiAoR2FtZS5IYXMoIkRyYWdvbiBmYW5nIikpIHBvdyA9IE1hdGguY2VpbChwb3cgKiAxLjEpOw0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIkRyYWdvbiBIYXJ2ZXN0IiwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzEwLCAyNV0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgYWRkOiB0cnVlLA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJldmVyeXRoaW5nIG11c3QgZ28iLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiRXZlcnl0aGluZyBtdXN0IGdvIiwNCiAgICAgICAgZGVzYzogbG9jKCJBbGwgYnVpbGRpbmdzIGFyZSAlMSUgY2hlYXBlciBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMTcsIDZdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIGFkZDogdHJ1ZSwNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgYXVyYTogMSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImN1cnNlZCBmaW5nZXIiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ3Vyc2VkIGZpbmdlciIsDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiQ29va2llIHByb2R1Y3Rpb24gaGFsdGVkIGZvciAlMSw8YnI+YnV0IGVhY2ggY2xpY2sgaXMgd29ydGggJTIgb2YgQ3BTLiIsDQogICAgICAgICAgW0dhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpXQ0KICAgICAgICApLA0KICAgICAgICBpY29uOiBbMTIsIDE3XSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBhZGQ6IHRydWUsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG11bHRDcFM6IDAsDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJjbGljayBmcmVuenkiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ2xpY2sgZnJlbnp5IiwNCiAgICAgICAgZGVzYzogbG9jKCJDbGlja2luZyBwb3dlciB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzAsIDE0XSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBhZGQ6IHRydWUsDQogICAgICAgIG11bHRDbGljazogcG93LA0KICAgICAgICBhdXJhOiAxLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgiZHJhZ29uZmxpZ2h0IiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgaWYgKEdhbWUuSGFzKCJEcmFnb24gZmFuZyIpKSBwb3cgPSBNYXRoLmNlaWwocG93ICogMS4xKTsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJEcmFnb25mbGlnaHQiLA0KICAgICAgICBkZXNjOiBsb2MoIkNsaWNraW5nIHBvd2VyIHglMSBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMCwgMjVdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIGFkZDogdHJ1ZSwNCiAgICAgICAgbXVsdENsaWNrOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJjb29raWUgc3Rvcm0iLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ29va2llIHN0b3JtIiwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWVzIGV2ZXJ5d2hlcmUhIiksDQogICAgICAgIGljb246IFsyMiwgNl0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgYWRkOiB0cnVlLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBhdXJhOiAxLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgiYnVpbGRpbmcgYnVmZiIsIGZ1bmN0aW9uICh0aW1lLCBwb3csIGJ1aWxkaW5nKSB7DQogICAgICB2YXIgb2JqID0gR2FtZS5PYmplY3RzQnlJZFtidWlsZGluZ107DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiBHYW1lLmdvbGRlbkNvb2tpZUJ1aWxkaW5nQnVmZnNbb2JqLm5hbWVdWzBdLA0KICAgICAgICBkbmFtZTogRU4NCiAgICAgICAgICA/IEdhbWUuZ29sZGVuQ29va2llQnVpbGRpbmdCdWZmc1tvYmoubmFtZV1bMF0NCiAgICAgICAgICA6IGxvYygiJTEgUG93ZXIhIiwgb2JqLmRuYW1lKSwNCiAgICAgICAgZGVzYzoNCiAgICAgICAgICBsb2MoDQogICAgICAgICAgICAiWW91ciAlMSBhcmUgYm9vc3RpbmcgeW91ciBDcFMhIiwNCiAgICAgICAgICAgIGxvYygiJTEgIiArIG9iai5ic2luZ2xlLCBMQmVhdXRpZnkob2JqLmFtb3VudCkpDQogICAgICAgICAgKSArDQogICAgICAgICAgIjxicj4iICsNCiAgICAgICAgICBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uICslMSUgZm9yICUyISIsIFsNCiAgICAgICAgICAgIEJlYXV0aWZ5KE1hdGguY2VpbChwb3cgKiAxMDAgLSAxMDApKSwNCiAgICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogW29iai5pY29uQ29sdW1uLCAxNF0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgYWRkOiB0cnVlLA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJidWlsZGluZyBkZWJ1ZmYiLCBmdW5jdGlvbiAodGltZSwgcG93LCBidWlsZGluZykgew0KICAgICAgdmFyIG9iaiA9IEdhbWUuT2JqZWN0c0J5SWRbYnVpbGRpbmddOw0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogR2FtZS5nb2xkZW5Db29raWVCdWlsZGluZ0J1ZmZzW29iai5uYW1lXVsxXSwNCiAgICAgICAgZG5hbWU6IEVODQogICAgICAgICAgPyBHYW1lLmdvbGRlbkNvb2tpZUJ1aWxkaW5nQnVmZnNbb2JqLm5hbWVdWzFdDQogICAgICAgICAgOiBsb2MoIiUxIEJ1cmRlbiEiLCBvYmouZG5hbWUpLA0KICAgICAgICBkZXNjOg0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICJZb3VyICUxIGFyZSBydXN0aW5nIHlvdXIgQ3BTISIsDQogICAgICAgICAgICBsb2MoIiUxICIgKyBvYmouYnNpbmdsZSwgTEJlYXV0aWZ5KG9iai5hbW91bnQpKQ0KICAgICAgICAgICkgKw0KICAgICAgICAgICI8YnI+IiArDQogICAgICAgICAgbG9jKCJDb29raWUgcHJvZHVjdGlvbiAlMSUgc2xvd2VyIGZvciAlMiEiLCBbDQogICAgICAgICAgICBCZWF1dGlmeShNYXRoLmNlaWwocG93ICogMTAwIC0gMTAwKSksDQogICAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgICAgXSksDQogICAgICAgIGljb246IFtvYmouaWNvbkNvbHVtbiwgMTVdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIGFkZDogdHJ1ZSwNCiAgICAgICAgbXVsdENwUzogMSAvIHBvdywNCiAgICAgICAgYXVyYTogMiwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoInN1Z2FyIGJsZXNzaW5nIiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIlN1Z2FyIGJsZXNzaW5nIiwNCiAgICAgICAgZGVzYzogbG9jKCJZb3UgZmluZCAlMSUgbW9yZSBnb2xkZW4gY29va2llcyBmb3IgdGhlIG5leHQgJTIuIiwgWw0KICAgICAgICAgIDEwLA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsyOSwgMTZdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIC8vYWRkOnRydWUNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImhhZ2dsZXIgbHVjayIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJIYWdnbGVyJ3MgbHVjayIsDQogICAgICAgIGRlc2M6IGxvYygiQWxsIHVwZ3JhZGVzIGFyZSAlMSUgY2hlYXBlciBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMjUsIDExXSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBtYXg6IHRydWUsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJoYWdnbGVyIG1pc2VyeSIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJIYWdnbGVyJ3MgbWlzZXJ5IiwNCiAgICAgICAgZGVzYzogbG9jKCJBbGwgdXBncmFkZXMgYXJlICUxJSBwcmljaWVyIGZvciAlMiEiLCBbDQogICAgICAgICAgcG93LA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsyNSwgMTFdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoInBpeGllIGx1Y2siLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiQ3JhZnR5IHBpeGllcyIsDQogICAgICAgIGRlc2M6IGxvYygiQWxsIGJ1aWxkaW5ncyBhcmUgJTElIGNoZWFwZXIgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzI2LCAxMV0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgbWF4OiB0cnVlLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgicGl4aWUgbWlzZXJ5IiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIk5hc3R5IGdvYmxpbnMiLA0KICAgICAgICBkZXNjOiBsb2MoIkFsbCBidWlsZGluZ3MgYXJlICUxJSBwcmljaWVyIGZvciAlMiEiLCBbDQogICAgICAgICAgcG93LA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsyNiwgMTFdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoIm1hZ2ljIGFkZXB0IiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIk1hZ2ljIGFkZXB0IiwNCiAgICAgICAgZGVzYzogbG9jKCJTcGVsbHMgYmFja2ZpcmUgJTEgdGltZXMgbGVzcyBmb3IgJTIuIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMjksIDExXSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBtYXg6IHRydWUsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJtYWdpYyBpbmVwdCIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJNYWdpYyBpbmVwdCIsDQogICAgICAgIGRlc2M6IGxvYygiU3BlbGxzIGJhY2tmaXJlICUxIHRpbWVzIG1vcmUgZm9yICUyLiIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzI5LCAxMV0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgbWF4OiB0cnVlLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgiZGV2YXN0YXRpb24iLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiRGV2YXN0YXRpb24iLA0KICAgICAgICBkZXNjOiBsb2MoIkNsaWNraW5nIHBvd2VyICslMSUgZm9yICUyISIsIFsNCiAgICAgICAgICBNYXRoLmZsb29yKHBvdyAqIDEwMCAtIDEwMCksDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzIzLCAxOF0sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgbXVsdENsaWNrOiBwb3csDQogICAgICAgIGF1cmE6IDEsDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoInN1Z2FyIGZyZW56eSIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJTdWdhciBmcmVuenkiLA0KICAgICAgICBkZXNjOiBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIHglMSBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMjksIDE0XSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBhZGQ6IHRydWUsDQogICAgICAgIG11bHRDcFM6IHBvdywNCiAgICAgICAgYXVyYTogMCwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImxvYW4gMSIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJMb2FuIDEiLA0KICAgICAgICBkbmFtZTogbG9jKCJMb2FuICUxIiwgMSksDQogICAgICAgIGRlc2M6IGxvYygiQ29va2llIHByb2R1Y3Rpb24geCUxIGZvciAlMiEiLCBbDQogICAgICAgICAgcG93LA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsxLCAzM10sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgbXVsdENwUzogcG93LA0KICAgICAgICBtYXg6IHRydWUsDQogICAgICAgIG9uRGllOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgaWYgKEdhbWUudGFrZUxvYW4pIHsNCiAgICAgICAgICAgIEdhbWUudGFrZUxvYW4oMSwgdHJ1ZSk7DQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgibG9hbiAxIGludGVyZXN0IiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIkxvYW4gMSAoaW50ZXJlc3QpIiwNCiAgICAgICAgZG5hbWU6IGxvYygiTG9hbiAlMSAoaW50ZXJlc3QpIiwgMSksDQogICAgICAgIGRlc2M6IGxvYygiQ29va2llIHByb2R1Y3Rpb24geCUxIGZvciAlMiEiLCBbDQogICAgICAgICAgcG93LA0KICAgICAgICAgIEdhbWUuc2F5VGltZSh0aW1lICogR2FtZS5mcHMsIC0xKSwNCiAgICAgICAgXSksDQogICAgICAgIGljb246IFsxLCAzM10sDQogICAgICAgIHRpbWU6IHRpbWUgKiBHYW1lLmZwcywNCiAgICAgICAgcG93ZXI6IHBvdywNCiAgICAgICAgbXVsdENwUzogcG93LA0KICAgICAgICBtYXg6IHRydWUsDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJsb2FuIDIiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiTG9hbiAyIiwNCiAgICAgICAgZG5hbWU6IGxvYygiTG9hbiAlMSIsIDIpLA0KICAgICAgICBkZXNjOiBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIHglMSBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMSwgMzNdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG11bHRDcFM6IHBvdywNCiAgICAgICAgbWF4OiB0cnVlLA0KICAgICAgICBvbkRpZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGlmIChHYW1lLnRha2VMb2FuKSB7DQogICAgICAgICAgICBHYW1lLnRha2VMb2FuKDIsIHRydWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgIH07DQogICAgfSk7DQogICAgbmV3IEdhbWUuYnVmZlR5cGUoImxvYW4gMiBpbnRlcmVzdCIsIGZ1bmN0aW9uICh0aW1lLCBwb3cpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJMb2FuIDIgKGludGVyZXN0KSIsDQogICAgICAgIGRuYW1lOiBsb2MoIkxvYW4gJTEgKGludGVyZXN0KSIsIDIpLA0KICAgICAgICBkZXNjOiBsb2MoIkNvb2tpZSBwcm9kdWN0aW9uIHglMSBmb3IgJTIhIiwgWw0KICAgICAgICAgIHBvdywNCiAgICAgICAgICBHYW1lLnNheVRpbWUodGltZSAqIEdhbWUuZnBzLCAtMSksDQogICAgICAgIF0pLA0KICAgICAgICBpY29uOiBbMSwgMzNdLA0KICAgICAgICB0aW1lOiB0aW1lICogR2FtZS5mcHMsDQogICAgICAgIHBvd2VyOiBwb3csDQogICAgICAgIG11bHRDcFM6IHBvdywNCiAgICAgICAgbWF4OiB0cnVlLA0KICAgICAgfTsNCiAgICB9KTsNCiAgICBuZXcgR2FtZS5idWZmVHlwZSgibG9hbiAzIiwgZnVuY3Rpb24gKHRpbWUsIHBvdykgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgbmFtZTogIkxvYW4gMyIsDQogICAgICAgIGRuYW1lOiBsb2MoIkxvYW4gJTEiLCAzKSwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzEsIDMzXSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgICAgb25EaWU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoR2FtZS50YWtlTG9hbikgew0KICAgICAgICAgICAgR2FtZS50YWtlTG9hbigzLCB0cnVlKTsNCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICB9Ow0KICAgIH0pOw0KICAgIG5ldyBHYW1lLmJ1ZmZUeXBlKCJsb2FuIDMgaW50ZXJlc3QiLCBmdW5jdGlvbiAodGltZSwgcG93KSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBuYW1lOiAiTG9hbiAzIChpbnRlcmVzdCkiLA0KICAgICAgICBkbmFtZTogbG9jKCJMb2FuICUxIChpbnRlcmVzdCkiLCAzKSwNCiAgICAgICAgZGVzYzogbG9jKCJDb29raWUgcHJvZHVjdGlvbiB4JTEgZm9yICUyISIsIFsNCiAgICAgICAgICBwb3csDQogICAgICAgICAgR2FtZS5zYXlUaW1lKHRpbWUgKiBHYW1lLmZwcywgLTEpLA0KICAgICAgICBdKSwNCiAgICAgICAgaWNvbjogWzEsIDMzXSwNCiAgICAgICAgdGltZTogdGltZSAqIEdhbWUuZnBzLA0KICAgICAgICBwb3dlcjogcG93LA0KICAgICAgICBtdWx0Q3BTOiBwb3csDQogICAgICAgIG1heDogdHJ1ZSwNCiAgICAgIH07DQogICAgfSk7DQoNCiAgICAvL2VuZCBvZiBidWZmcw0KDQogICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJCUdSQU5ETUFQT0NBTFlQU0UNCgkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICBHYW1lLlVwZGF0ZUdyYW5kbWFwb2NhbHlwc2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoR2FtZS5IYXMoIkVsZGVyIENvdmVuYW50IikgfHwgR2FtZS5PYmplY3RzWyJHcmFuZG1hIl0uYW1vdW50ID09IDApDQogICAgICAgIEdhbWUuZWxkZXJXcmF0aCA9IDA7DQogICAgICBlbHNlIGlmIChHYW1lLnBsZWRnZVQgPiAwKSB7DQogICAgICAgIC8vaWYgdGhlIHBsZWRnZSBpcyBhY3RpdmUsIGxvd2VyIGl0DQogICAgICAgIEdhbWUucGxlZGdlVC0tOw0KICAgICAgICBpZiAoR2FtZS5wbGVkZ2VUID09IDApIHsNCiAgICAgICAgICAvL2RpZCB3ZSByZWFjaCAwPyBtYWtlIHRoZSBwbGVkZ2UgcHVyY2hhc2FibGUgYWdhaW4NCiAgICAgICAgICBHYW1lLkxvY2soIkVsZGVyIFBsZWRnZSIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJFbGRlciBQbGVkZ2UiKTsNCiAgICAgICAgICBHYW1lLmVsZGVyV3JhdGggPSAxOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoR2FtZS5IYXMoIk9uZSBtaW5kIikgJiYgR2FtZS5lbGRlcldyYXRoID09IDApIHsNCiAgICAgICAgICBHYW1lLmVsZGVyV3JhdGggPSAxOw0KICAgICAgICB9DQogICAgICAgIGlmICgNCiAgICAgICAgICBNYXRoLnJhbmRvbSgpIDwgMC4wMDEgJiYNCiAgICAgICAgICBHYW1lLmVsZGVyV3JhdGggPA0KICAgICAgICAgICAgR2FtZS5IYXMoIk9uZSBtaW5kIikgKw0KICAgICAgICAgICAgICBHYW1lLkhhcygiQ29tbXVuYWwgYnJhaW5zd2VlcCIpICsNCiAgICAgICAgICAgICAgR2FtZS5IYXMoIkVsZGVyIFBhY3QiKQ0KICAgICAgICApIHsNCiAgICAgICAgICBHYW1lLmVsZGVyV3JhdGgrKzsgLy9oYXZlIHdlIGFscmVhZHkgcGxlZGdlZD8gbWFrZSB0aGUgZWxkZXIgd3JhdGggc2hpZnQgYmV0d2VlbiBkaWZmZXJlbnQgc3RhZ2VzDQogICAgICAgIH0NCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuSGFzKCJFbGRlciBQYWN0IikgJiYNCiAgICAgICAgICBHYW1lLlVwZ3JhZGVzWyJFbGRlciBQbGVkZ2UiXS51bmxvY2tlZCA9PSAwDQogICAgICAgICkgew0KICAgICAgICAgIEdhbWUuTG9jaygiRWxkZXIgUGxlZGdlIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIkVsZGVyIFBsZWRnZSIpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBHYW1lLmVsZGVyV3JhdGhEICs9IChHYW1lLmVsZGVyV3JhdGggKyAxIC0gR2FtZS5lbGRlcldyYXRoRCkgKiAwLjAwMTsgLy9zbG93bHkgZmFkZSB0byB0aGUgdGFyZ2V0IHdyYXRoIHN0YXRlDQoNCiAgICAgIGlmIChHYW1lLmVsZGVyV3JhdGggIT0gR2FtZS5lbGRlcldyYXRoT2xkKSB7DQogICAgICAgIGlmIChHYW1lLmNsaWNrc1RoaXNTZXNzaW9uID4gMCkgew0KICAgICAgICAgIGlmIChHYW1lLmVsZGVyV3JhdGggPj0gMykgUGxheUN1ZSgiZmFkZVRvIiwgImdyYW5kbWFwb2NhbHlwc2UiKTsNCiAgICAgICAgICBlbHNlIFBsYXlDdWUoImZhZGVUbyIsICJjbGljayIpOw0KICAgICAgICB9DQogICAgICAgIEdhbWUuc3RvcmVUb1JlZnJlc2ggPSAxOw0KICAgICAgfQ0KDQogICAgICBHYW1lLmVsZGVyV3JhdGhPbGQgPSBHYW1lLmVsZGVyV3JhdGg7DQoNCiAgICAgIEdhbWUuVXBkYXRlV3JpbmtsZXJzKCk7DQogICAgfTsNCg0KICAgIC8vd3JpbmtsZXJzDQoNCiAgICBmdW5jdGlvbiBpblJlY3QoeCwgeSwgcmVjdCkgew0KICAgICAgLy9maW5kIG91dCBpZiB0aGUgcG9pbnQgeCx5IGlzIGluIHRoZSByb3RhdGVkIHJlY3RhbmdsZSByZWN0e3csaCxyLG99ICh3aWR0aCxoZWlnaHQscm90YXRpb24gaW4gcmFkaWFucyx5LW9yaWdpbikgKG5lZWRzIHRvIGJlIG5vcm1hbGl6ZWQpDQogICAgICAvL0kgZm91bmQgdGhpcyBzb21ld2hlcmUgb25saW5lIEkgZ3Vlc3MNCiAgICAgIHZhciBkeCA9IHggKyBNYXRoLnNpbigtcmVjdC5yKSAqIC0ocmVjdC5oIC8gMiAtIHJlY3QubyksDQogICAgICAgIGR5ID0geSArIE1hdGguY29zKC1yZWN0LnIpICogLShyZWN0LmggLyAyIC0gcmVjdC5vKTsNCiAgICAgIHZhciBoMSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7DQogICAgICB2YXIgY3VyckEgPSBNYXRoLmF0YW4yKGR5LCBkeCk7DQogICAgICB2YXIgbmV3QSA9IGN1cnJBIC0gcmVjdC5yOw0KICAgICAgdmFyIHgyID0gTWF0aC5jb3MobmV3QSkgKiBoMTsNCiAgICAgIHZhciB5MiA9IE1hdGguc2luKG5ld0EpICogaDE7DQogICAgICBpZiAoDQogICAgICAgIHgyID4gLTAuNSAqIHJlY3QudyAmJg0KICAgICAgICB4MiA8IDAuNSAqIHJlY3QudyAmJg0KICAgICAgICB5MiA+IC0wLjUgKiByZWN0LmggJiYNCiAgICAgICAgeTIgPCAwLjUgKiByZWN0LmgNCiAgICAgICkNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgR2FtZS53cmlua2xlckhQID0gMi4xOw0KICAgIEdhbWUud3JpbmtsZXJzID0gW107DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgaSsrKSB7DQogICAgICBHYW1lLndyaW5rbGVycy5wdXNoKHsNCiAgICAgICAgaWQ6IHBhcnNlSW50KGkpLA0KICAgICAgICBjbG9zZTogMCwNCiAgICAgICAgc3Vja2VkOiAwLA0KICAgICAgICBwaGFzZTogMCwNCiAgICAgICAgeDogMCwNCiAgICAgICAgeTogMCwNCiAgICAgICAgcjogMCwNCiAgICAgICAgaHVydDogMCwNCiAgICAgICAgaHA6IEdhbWUud3JpbmtsZXJIUCwNCiAgICAgICAgc2VsZWN0ZWQ6IDAsDQogICAgICAgIHR5cGU6IDAsDQogICAgICB9KTsNCiAgICB9DQogICAgR2FtZS5nZXRXcmlua2xlcnNNYXggPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbiA9IDEwOw0KICAgICAgaWYgKEdhbWUuSGFzKCJFbGRlciBzcGljZSIpKSBuICs9IDI7DQogICAgICByZXR1cm4gbjsNCiAgICB9Ow0KICAgIEdhbWUuUmVzZXRXcmlua2xlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgIEdhbWUud3JpbmtsZXJzW2ldID0gew0KICAgICAgICAgIGlkOiBwYXJzZUludChpKSwNCiAgICAgICAgICBjbG9zZTogMCwNCiAgICAgICAgICBzdWNrZWQ6IDAsDQogICAgICAgICAgcGhhc2U6IDAsDQogICAgICAgICAgeDogMCwNCiAgICAgICAgICB5OiAwLA0KICAgICAgICAgIHI6IDAsDQogICAgICAgICAgaHVydDogMCwNCiAgICAgICAgICBocDogR2FtZS53cmlua2xlckhQLA0KICAgICAgICAgIHNlbGVjdGVkOiAwLA0KICAgICAgICAgIHR5cGU6IDAsDQogICAgICAgIH07DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLkNvbGxlY3RXcmlua2xlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgIEdhbWUud3JpbmtsZXJzW2ldLmhwID0gMDsNCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUud3JpbmtsZXJTcXVpc2hTb3VuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpICsgMTsNCiAgICBHYW1lLnBsYXlXcmlua2xlclNxdWlzaFNvdW5kID0gZnVuY3Rpb24gKCkgew0KICAgICAgUGxheVNvdW5kKA0KICAgICAgICAic25kLyIgKw0KICAgICAgICAgIChHYW1lLldJTktMRVJTID8gInNxdWVhayIgOiAic3F1aXNoIikgKw0KICAgICAgICAgIEdhbWUud3JpbmtsZXJTcXVpc2hTb3VuZCArDQogICAgICAgICAgIi5tcDMiLA0KICAgICAgICAwLjUNCiAgICAgICk7DQogICAgICBHYW1lLndyaW5rbGVyU3F1aXNoU291bmQgKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMS41KSArIDE7DQogICAgICBpZiAoR2FtZS53cmlua2xlclNxdWlzaFNvdW5kID4gNCkgR2FtZS53cmlua2xlclNxdWlzaFNvdW5kIC09IDQ7DQogICAgfTsNCiAgICBHYW1lLlNwYXduV3JpbmtsZXIgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgIGlmICghbWUpIHsNCiAgICAgICAgdmFyIG1heCA9IEdhbWUuZ2V0V3JpbmtsZXJzTWF4KCk7DQogICAgICAgIHZhciBuID0gMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLndyaW5rbGVycykgew0KICAgICAgICAgIGlmIChHYW1lLndyaW5rbGVyc1tpXS5waGFzZSA+IDApIG4rKzsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgICAgdmFyIGl0ID0gR2FtZS53cmlua2xlcnNbaV07DQogICAgICAgICAgaWYgKGl0LnBoYXNlID09IDAgJiYgR2FtZS5lbGRlcldyYXRoID4gMCAmJiBuIDwgbWF4ICYmIGl0LmlkIDwgbWF4KSB7DQogICAgICAgICAgICBtZSA9IGl0Ow0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoIW1lKSByZXR1cm4gZmFsc2U7DQogICAgICBtZS5waGFzZSA9IDE7DQogICAgICBtZS5ocCA9IEdhbWUud3JpbmtsZXJIUDsNCiAgICAgIG1lLnR5cGUgPSAwOw0KICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjAwMDEpIG1lLnR5cGUgPSAxOyAvL3NoaW55IHdyaW5rbGVyDQogICAgICByZXR1cm4gbWU7DQogICAgfTsNCiAgICBHYW1lLlBvcFJhbmRvbVdyaW5rbGVyID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHdyaW5rbGVycyA9IFtdOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLndyaW5rbGVycykgew0KICAgICAgICBpZiAoR2FtZS53cmlua2xlcnNbaV0ucGhhc2UgPiAwICYmIEdhbWUud3JpbmtsZXJzW2ldLmhwID4gMCkNCiAgICAgICAgICB3cmlua2xlcnMucHVzaChHYW1lLndyaW5rbGVyc1tpXSk7DQogICAgICB9DQogICAgICBpZiAod3JpbmtsZXJzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgdmFyIG1lID0gY2hvb3NlKHdyaW5rbGVycyk7DQogICAgICAgIG1lLmhwID0gLTEwOw0KICAgICAgICByZXR1cm4gbWU7DQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfTsNCiAgICBHYW1lLlVwZGF0ZVdyaW5rbGVycyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciB4QmFzZSA9IDA7DQogICAgICB2YXIgeUJhc2UgPSAwOw0KICAgICAgdmFyIG9uV3JpbmtsZXIgPSAwOw0KICAgICAgaWYgKEdhbWUuTGVmdEJhY2tncm91bmQpIHsNCiAgICAgICAgeEJhc2UgPSBHYW1lLmNvb2tpZU9yaWdpblg7DQogICAgICAgIHlCYXNlID0gR2FtZS5jb29raWVPcmlnaW5ZOw0KICAgICAgfQ0KICAgICAgdmFyIG1heCA9IEdhbWUuZ2V0V3JpbmtsZXJzTWF4KCk7DQogICAgICB2YXIgbiA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgIGlmIChHYW1lLndyaW5rbGVyc1tpXS5waGFzZSA+IDApIG4rKzsNCiAgICAgIH0NCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS53cmlua2xlcnMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS53cmlua2xlcnNbaV07DQogICAgICAgIGlmIChtZS5waGFzZSA9PSAwICYmIEdhbWUuZWxkZXJXcmF0aCA+IDAgJiYgbiA8IG1heCAmJiBtZS5pZCA8IG1heCkgew0KICAgICAgICAgIHZhciBjaGFuY2UgPSAwLjAwMDAxICogR2FtZS5lbGRlcldyYXRoOw0KICAgICAgICAgIGNoYW5jZSAqPSBHYW1lLmVmZigid3JpbmtsZXJTcGF3biIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiVW5ob2x5IGJhaXQiKSkgY2hhbmNlICo9IDU7DQogICAgICAgICAgaWYgKEdhbWUuaGFzR29kKSB7DQogICAgICAgICAgICB2YXIgZ29kTHZsID0gR2FtZS5oYXNHb2QoInNjb3JuIik7DQogICAgICAgICAgICBpZiAoZ29kTHZsID09IDEpIGNoYW5jZSAqPSAyLjU7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgY2hhbmNlICo9IDI7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMykgY2hhbmNlICo9IDEuNTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJXcmlua2xlciBkb29ybWF0IikpIGNoYW5jZSA9IDAuMTsNCiAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IGNoYW5jZSkgew0KICAgICAgICAgICAgLy9yZXNwYXduDQogICAgICAgICAgICBHYW1lLlNwYXduV3JpbmtsZXIobWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAobWUucGhhc2UgPiAwKSB7DQogICAgICAgICAgaWYgKG1lLmNsb3NlIDwgMSkgbWUuY2xvc2UgKz0gMSAvIEdhbWUuZnBzIC8gMTA7DQogICAgICAgICAgaWYgKG1lLmNsb3NlID4gMSkgbWUuY2xvc2UgPSAxOw0KICAgICAgICB9IGVsc2UgbWUuY2xvc2UgPSAwOw0KICAgICAgICBpZiAobWUuY2xvc2UgPT0gMSAmJiBtZS5waGFzZSA9PSAxKSB7DQogICAgICAgICAgbWUucGhhc2UgPSAyOw0KICAgICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG1lLnBoYXNlID09IDIpIHsNCiAgICAgICAgICBtZS5zdWNrZWQgKz0gKEdhbWUuY29va2llc1BzIC8gR2FtZS5mcHMpICogR2FtZS5jcHNTdWNrZWQ7IC8vc3VjayB0aGUgY29va2llcw0KICAgICAgICB9DQogICAgICAgIGlmIChtZS5waGFzZSA+IDApIHsNCiAgICAgICAgICBpZiAobWUudHlwZSA9PSAwKSB7DQogICAgICAgICAgICBpZiAobWUuaHAgPCBHYW1lLndyaW5rbGVySFApIG1lLmhwICs9IDAuMDQ7DQogICAgICAgICAgICBtZS5ocCA9IE1hdGgubWluKEdhbWUud3JpbmtsZXJIUCwgbWUuaHApOw0KICAgICAgICAgIH0gZWxzZSBpZiAobWUudHlwZSA9PSAxKSB7DQogICAgICAgICAgICBpZiAobWUuaHAgPCBHYW1lLndyaW5rbGVySFAgKiAzKSBtZS5ocCArPSAwLjA0Ow0KICAgICAgICAgICAgbWUuaHAgPSBNYXRoLm1pbihHYW1lLndyaW5rbGVySFAgKiAzLCBtZS5ocCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHZhciBkID0gMTI4ICogKDIgLSBtZS5jbG9zZSk7IC8vKkdhbWUuQmlnQ29va2llU2l6ZTsNCiAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIGQgKz0gTWF0aC5jb3MoR2FtZS5UICogMC4wNSArIHBhcnNlSW50KG1lLmlkKSkgKiA0Ow0KICAgICAgICAgIG1lLnIgPSAobWUuaWQgLyBtYXgpICogMzYwOw0KICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KQ0KICAgICAgICAgICAgbWUuciArPSBNYXRoLnNpbihHYW1lLlQgKiAwLjA1ICsgcGFyc2VJbnQobWUuaWQpKSAqIDQ7DQogICAgICAgICAgbWUueCA9IHhCYXNlICsgTWF0aC5zaW4oKG1lLnIgKiBNYXRoLlBJKSAvIDE4MCkgKiBkOw0KICAgICAgICAgIG1lLnkgPSB5QmFzZSArIE1hdGguY29zKChtZS5yICogTWF0aC5QSSkgLyAxODApICogZDsNCiAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIG1lLnIgKz0gTWF0aC5zaW4oR2FtZS5UICogMC4wOSArIHBhcnNlSW50KG1lLmlkKSkgKiA0Ow0KICAgICAgICAgIHZhciByZWN0ID0geyB3OiAxMDAsIGg6IDIwMCwgcjogKC1tZS5yICogTWF0aC5QSSkgLyAxODAsIG86IDEwIH07DQogICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjAxICYmICFHYW1lLnByZWZzLm5vdFNjYXJ5KQ0KICAgICAgICAgICAgbWUuaHVydCA9IE1hdGgubWF4KG1lLmh1cnQsIE1hdGgucmFuZG9tKCkpOw0KICAgICAgICAgIGlmIChHYW1lLlQgJSA1ID09IDAgJiYgR2FtZS5DYW5DbGljaykgew0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kICYmDQogICAgICAgICAgICAgIEdhbWUubW91c2VYIDwgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMud2lkdGggJiYNCiAgICAgICAgICAgICAgaW5SZWN0KEdhbWUubW91c2VYIC0gbWUueCwgR2FtZS5tb3VzZVkgLSBtZS55LCByZWN0KQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICBtZS5zZWxlY3RlZCA9IDE7DQogICAgICAgICAgICBlbHNlIG1lLnNlbGVjdGVkID0gMDsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKG1lLnNlbGVjdGVkICYmIG9uV3JpbmtsZXIgPT0gMCAmJiBHYW1lLkNhbkNsaWNrKSB7DQogICAgICAgICAgICBtZS5odXJ0ID0gTWF0aC5tYXgobWUuaHVydCwgMC4yNSk7DQogICAgICAgICAgICAvL21lLmNsb3NlKj0wLjk5Ow0KICAgICAgICAgICAgaWYgKEdhbWUuQ2xpY2sgJiYgR2FtZS5sYXN0Q2xpY2tlZEVsID09IGwoImJhY2tncm91bmRMZWZ0Q2FudmFzIikpIHsNCiAgICAgICAgICAgICAgaWYgKEdhbWUua2V5c1sxN10gJiYgR2FtZS5zZXNhbWUpIHsNCiAgICAgICAgICAgICAgICBtZS50eXBlID0gIW1lLnR5cGU7DQogICAgICAgICAgICAgICAgUGxheVNvdW5kKCJzbmQvc2hpbW1lckNsaWNrLm1wMyIpOw0KICAgICAgICAgICAgICB9IC8vY3RybC1jbGljayBvbiBhIHdyaW5rbGVyIGluIGdvZCBtb2RlIHRvIHRvZ2dsZSBpdHMgc2hpbmluZXNzDQogICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIEdhbWUucGxheVdyaW5rbGVyU3F1aXNoU291bmQoKTsNCiAgICAgICAgICAgICAgICBtZS5odXJ0ID0gMTsNCiAgICAgICAgICAgICAgICBtZS5ocCAtPSAwLjc1Ow0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIEdhbWUucHJlZnMucGFydGljbGVzICYmDQogICAgICAgICAgICAgICAgICAhR2FtZS5wcmVmcy5ub3RTY2FyeSAmJg0KICAgICAgICAgICAgICAgICAgIUdhbWUuV0lOS0xFUlMgJiYNCiAgICAgICAgICAgICAgICAgICEobWUuaHAgPD0gMC41ICYmIG1lLnBoYXNlID4gMCkNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIHZhciB4ID0gbWUueCArIE1hdGguc2luKChtZS5yICogTWF0aC5QSSkgLyAxODApICogOTA7DQogICAgICAgICAgICAgICAgICB2YXIgeSA9IG1lLnkgKyBNYXRoLmNvcygobWUuciAqIE1hdGguUEkpIC8gMTgwKSAqIDkwOw0KICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IDM7IGlpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgLy9HYW1lLnBhcnRpY2xlQWRkKHgrTWF0aC5yYW5kb20oKSo1MC0yNSx5K01hdGgucmFuZG9tKCkqNTAtMjUsTWF0aC5yYW5kb20oKSo0LTIsTWF0aC5yYW5kb20oKSotMi0yLDEsMSwyLCd3cmlua2xlckJpdHMucG5nJyk7DQogICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gR2FtZS5wYXJ0aWNsZUFkZCgNCiAgICAgICAgICAgICAgICAgICAgICB4LA0KICAgICAgICAgICAgICAgICAgICAgIHksDQogICAgICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAtMiAtIDIsDQogICAgICAgICAgICAgICAgICAgICAgMSwNCiAgICAgICAgICAgICAgICAgICAgICAxLA0KICAgICAgICAgICAgICAgICAgICAgIDIsDQogICAgICAgICAgICAgICAgICAgICAgbWUudHlwZSA9PSAxDQogICAgICAgICAgICAgICAgICAgICAgICA/ICJzaGlueVdyaW5rbGVyQml0cy5wbmciDQogICAgICAgICAgICAgICAgICAgICAgICA6ICJ3cmlua2xlckJpdHMucG5nIg0KICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICBwYXJ0LnIgPSAtbWUucjsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgR2FtZS5DbGljayA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvbldyaW5rbGVyID0gMTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAobWUuaHVydCA+IDApIHsNCiAgICAgICAgICBtZS5odXJ0IC09IDUgLyBHYW1lLmZwczsNCiAgICAgICAgICAvL21lLmNsb3NlLT1tZS5odXJ0KjAuMDU7DQogICAgICAgICAgLy9tZS54Kz1NYXRoLnJhbmRvbSgpKjItMTsNCiAgICAgICAgICAvL21lLnkrPU1hdGgucmFuZG9tKCkqMi0xOw0KICAgICAgICAgIG1lLnIgKz0gTWF0aC5zaW4oR2FtZS5UICogMSkgKiBtZS5odXJ0ICogMTg7IC8vTWF0aC5yYW5kb20oKSoyLTE7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG1lLmhwIDw9IDAuNSAmJiBtZS5waGFzZSA+IDApIHsNCiAgICAgICAgICBHYW1lLnBsYXlXcmlua2xlclNxdWlzaFNvdW5kKCk7DQogICAgICAgICAgUGxheVNvdW5kKA0KICAgICAgICAgICAgInNuZC9wb3AiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyArIDEpICsgIi5tcDMiLA0KICAgICAgICAgICAgMC43NQ0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS53cmlua2xlcnNQb3BwZWQrKzsNCiAgICAgICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgICAgIG1lLnBoYXNlID0gMDsNCiAgICAgICAgICBtZS5jbG9zZSA9IDA7DQogICAgICAgICAgbWUuaHVydCA9IDA7DQogICAgICAgICAgbWUuaHAgPSAzOw0KICAgICAgICAgIHZhciB0b1N1Y2sgPSAxLjE7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJTYWNyaWxlZ2lvdXMgY29ycnVwdGlvbiIpKSB0b1N1Y2sgKj0gMS4wNTsNCiAgICAgICAgICBpZiAobWUudHlwZSA9PSAxKSB0b1N1Y2sgKj0gMzsgLy9zaGlueSB3cmlua2xlcnMgYXJlIGFuIGVsdXNpdmUsIHByb2ZpdGFibGUgYnJlZWQNCiAgICAgICAgICBtZS5zdWNrZWQgKj0gdG9TdWNrOyAvL2Nvb2tpZSBkb3VnaCBkb2VzIHdlaXJkIHRoaW5ncyBpbnNpZGUgd3JpbmtsZXIgZGlnZXN0aXZlIHRyYWN0cw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiV3JpbmtsZXJzcGF3biIpKSBtZS5zdWNrZWQgKj0gMS4wNTsNCiAgICAgICAgICBpZiAoR2FtZS5oYXNHb2QpIHsNCiAgICAgICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgic2Nvcm4iKTsNCiAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgbWUuc3Vja2VkICo9IDEuMTU7DQogICAgICAgICAgICBlbHNlIGlmIChnb2RMdmwgPT0gMikgbWUuc3Vja2VkICo9IDEuMTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBtZS5zdWNrZWQgKj0gMS4wNTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKG1lLnN1Y2tlZCA+IDAuNSkgew0KICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgIG1lLnR5cGUgPT0gMQ0KICAgICAgICAgICAgICAgID8gbG9jKCJFeHBsb2RlZCBhIHNoaW55IHdyaW5rbGVyIikNCiAgICAgICAgICAgICAgICA6IGxvYygiRXhwbG9kZWQgYSB3cmlua2xlciIpLA0KICAgICAgICAgICAgICBsb2MoIkZvdW5kIDxiPiUxPC9iPiEiLCBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeShtZS5zdWNrZWQpKSksDQogICAgICAgICAgICAgIFsxOSwgOF0sDQogICAgICAgICAgICAgIDYNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICBHYW1lLlBvcHVwKA0KICAgICAgICAgICAgICAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjgwJTsiPicgKw0KICAgICAgICAgICAgICAgIGxvYygiKyUxISIsIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KG1lLnN1Y2tlZCkpKSArDQogICAgICAgICAgICAgICAgIjwvZGl2PiIsDQogICAgICAgICAgICAgIEdhbWUubW91c2VYLA0KICAgICAgICAgICAgICBHYW1lLm1vdXNlWQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJoYWxsb3dlZW4iKSB7DQogICAgICAgICAgICAgIC8vaWYgKE1hdGgucmFuZG9tKCk8KEdhbWUuSGFzQWNoaWV2KCdTcG9va3kgY29va2llcycpPzAuMjowLjA1KSkvL2hhbGxvd2VlbiBjb29raWUgZHJvcHMNCiAgICAgICAgICAgICAgdmFyIGZhaWxSYXRlID0gMC45NTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzQWNoaWV2KCJTcG9va3kgY29va2llcyIpKSBmYWlsUmF0ZSA9IDAuODsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuSGFzKCJTdGFydGVycm9yIikpIGZhaWxSYXRlICo9IDAuOTsNCiAgICAgICAgICAgICAgZmFpbFJhdGUgKj0gMSAvIEdhbWUuZHJvcFJhdGVNdWx0KCk7DQogICAgICAgICAgICAgIGlmIChHYW1lLmhhc0dvZCkgew0KICAgICAgICAgICAgICAgIHZhciBnb2RMdmwgPSBHYW1lLmhhc0dvZCgic2Vhc29ucyIpOw0KICAgICAgICAgICAgICAgIGlmIChnb2RMdmwgPT0gMSkgZmFpbFJhdGUgKj0gMC45Ow0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAyKSBmYWlsUmF0ZSAqPSAwLjk1Ow0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdvZEx2bCA9PSAzKSBmYWlsUmF0ZSAqPSAwLjk3Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChtZS50eXBlID09IDEpIGZhaWxSYXRlICo9IDAuOTsNCiAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiBmYWlsUmF0ZSkgew0KICAgICAgICAgICAgICAgIC8vaGFsbG93ZWVuIGNvb2tpZSBkcm9wcw0KICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSBjaG9vc2UoWw0KICAgICAgICAgICAgICAgICAgIlNrdWxsIGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkdob3N0IGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkJhdCBjb29raWVzIiwNCiAgICAgICAgICAgICAgICAgICJTbGltZSBjb29raWVzIiwNCiAgICAgICAgICAgICAgICAgICJQdW1wa2luIGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgICAgIkV5ZWJhbGwgY29va2llcyIsDQogICAgICAgICAgICAgICAgICAiU3BpZGVyIGNvb2tpZXMiLA0KICAgICAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgICAgIGlmICghR2FtZS5IYXNVbmxvY2tlZChjb29raWUpICYmICFHYW1lLkhhcyhjb29raWUpKSB7DQogICAgICAgICAgICAgICAgICBHYW1lLlVubG9jayhjb29raWUpOw0KICAgICAgICAgICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbY29va2llXS5kbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICAgICAgICJZb3UgYWxzbyBmb3VuZCA8Yj4lMTwvYj4hIiwNCiAgICAgICAgICAgICAgICAgICAgICBHYW1lLlVwZ3JhZGVzW2Nvb2tpZV0uZG5hbWUNCiAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgR2FtZS5VcGdyYWRlc1tjb29raWVdLmljb24NCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBHYW1lLkRyb3BFZ2coMC45OCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChtZS50eXBlID09IDEpIEdhbWUuV2luKCJMYXN0IENoYW5jZSB0byBTZWUiKTsNCiAgICAgICAgICBHYW1lLkVhcm4obWUuc3Vja2VkKTsNCiAgICAgICAgICAvKmlmIChHYW1lLnByZWZzLnBhcnRpY2xlcyAmJiAhR2FtZS5XSU5LTEVSUykNCgkJCQkJew0KCQkJCQkJdmFyIHg9bWUueCsoTWF0aC5zaW4obWUucipNYXRoLlBJLzE4MCkqMTAwKTsNCgkJCQkJCXZhciB5PW1lLnkrKE1hdGguY29zKG1lLnIqTWF0aC5QSS8xODApKjEwMCk7DQoJCQkJCQlmb3IgKHZhciBpaT0wO2lpPDY7aWkrKykNCgkJCQkJCXsNCgkJCQkJCQlHYW1lLnBhcnRpY2xlQWRkKHgrTWF0aC5yYW5kb20oKSo1MC0yNSx5K01hdGgucmFuZG9tKCkqNTAtMjUsTWF0aC5yYW5kb20oKSo0LTIsTWF0aC5yYW5kb20oKSotMi0yLDEsMSwyLCd3cmlua2xlckJpdHMucG5nJyk7DQoJCQkJCQl9DQoJCQkJCX0qLw0KICAgICAgICAgIGlmIChHYW1lLnByZWZzLnBhcnRpY2xlcykgew0KICAgICAgICAgICAgdmFyIHggPSBtZS54ICsgTWF0aC5zaW4oKG1lLnIgKiBNYXRoLlBJKSAvIDE4MCkgKiA5MDsNCiAgICAgICAgICAgIHZhciB5ID0gbWUueSArIE1hdGguY29zKChtZS5yICogTWF0aC5QSSkgLyAxODApICogOTA7DQogICAgICAgICAgICBpZiAobWUuc3Vja2VkID4gMCkgew0KICAgICAgICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgNTsgaWkrKykgew0KICAgICAgICAgICAgICAgIEdhbWUucGFydGljbGVBZGQoDQogICAgICAgICAgICAgICAgICBHYW1lLm1vdXNlWCwNCiAgICAgICAgICAgICAgICAgIEdhbWUubW91c2VZLA0KICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIC0yIC0gMiwNCiAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAwLjUgKyAwLjc1LA0KICAgICAgICAgICAgICAgICAgMS41LA0KICAgICAgICAgICAgICAgICAgMg0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghR2FtZS5wcmVmcy5ub3RTY2FyeSAmJiAhR2FtZS5XSU5LTEVSUykgew0KICAgICAgICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgODsgaWkrKykgew0KICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gR2FtZS5wYXJ0aWNsZUFkZCgNCiAgICAgICAgICAgICAgICAgIHgsDQogICAgICAgICAgICAgICAgICB5LA0KICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIC0yIC0gMiwNCiAgICAgICAgICAgICAgICAgIDEsDQogICAgICAgICAgICAgICAgICAxLA0KICAgICAgICAgICAgICAgICAgMiwNCiAgICAgICAgICAgICAgICAgIG1lLnR5cGUgPT0gMSA/ICJzaGlueVdyaW5rbGVyQml0cy5wbmciIDogIndyaW5rbGVyQml0cy5wbmciDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBwYXJ0LnIgPSAtbWUucjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBtZS5zdWNrZWQgPSAwOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAob25Xcmlua2xlcikgew0KICAgICAgICBHYW1lLm1vdXNlUG9pbnRlciA9IDE7DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLkRyYXdXcmlua2xlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgY3R4ID0gR2FtZS5MZWZ0QmFja2dyb3VuZDsNCiAgICAgIHZhciBzZWxlY3RlZCA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUud3JpbmtsZXJzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUud3JpbmtsZXJzW2ldOw0KICAgICAgICBpZiAobWUucGhhc2UgPiAwKSB7DQogICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gbWUuY2xvc2U7DQogICAgICAgICAgY3R4LnNhdmUoKTsNCiAgICAgICAgICBjdHgudHJhbnNsYXRlKG1lLngsIG1lLnkpOw0KICAgICAgICAgIHZhciBzdyA9IDEwMCArIDIgKiBNYXRoLnNpbihHYW1lLlQgKiAwLjIgKyBpICogMyk7DQogICAgICAgICAgdmFyIHNoID0gMjAwICsgNSAqIE1hdGguc2luKEdhbWUuVCAqIDAuMiAtIDIgKyBpICogMyk7DQogICAgICAgICAgaWYgKEdhbWUucHJlZnMuZmFuY3kpIHsNCiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoMCwgMzApOw0KICAgICAgICAgICAgY3R4LnJvdGF0ZSgoLW1lLnIgKiBNYXRoLlBJKSAvIDE4MCk7DQogICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYygid3JpbmtsZXJTaGFkb3cucG5nIiksIC1zdyAvIDIsIC0xMCwgc3csIHNoKTsNCiAgICAgICAgICAgIGN0eC5yb3RhdGUoKG1lLnIgKiBNYXRoLlBJKSAvIDE4MCk7DQogICAgICAgICAgICBjdHgudHJhbnNsYXRlKDAsIC0zMCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGN0eC5yb3RhdGUoKC1tZS5yICogTWF0aC5QSSkgLyAxODApOw0KICAgICAgICAgIC8vdmFyIHM9TWF0aC5taW4oMSxtZS5zdWNrZWQvKEdhbWUuY29va2llc1BzKjYwKSkqMC43NSswLjI1Oy8vc2NhbGUgd3JpbmtsZXJzIGFzIHRoZXkgZWF0DQogICAgICAgICAgLy9jdHguc2NhbGUoTWF0aC5wb3cocywxLjUpKjEuMjUscyk7DQogICAgICAgICAgLy9jdHguZmlsbFJlY3QoLTUwLC0xMCwxMDAsMjAwKTsNCiAgICAgICAgICB2YXIgcGljID0gR2FtZS5XSU5LTEVSUyA/ICJ3aW5rbGVyLnBuZyIgOiAid3JpbmtsZXIucG5nIjsNCiAgICAgICAgICBpZiAobWUudHlwZSA9PSAxKQ0KICAgICAgICAgICAgcGljID0gR2FtZS5XSU5LTEVSUyA/ICJzaGlueVdpbmtsZXIucG5nIiA6ICJzaGlueVdyaW5rbGVyLnBuZyI7DQogICAgICAgICAgZWxzZSBpZiAoR2FtZS5zZWFzb24gPT0gImNocmlzdG1hcyIpDQogICAgICAgICAgICBwaWMgPSBHYW1lLldJTktMRVJTID8gIndpbnRlcldpbmtsZXIucG5nIiA6ICJ3aW50ZXJXcmlua2xlci5wbmciOw0KICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKHBpYyksIC1zdyAvIDIsIC0xMCwgc3csIHNoKTsNCiAgICAgICAgICBpZiAoIUdhbWUuV0lOS0xFUlMgJiYgR2FtZS5wcmVmcy5ub3RTY2FyeSkNCiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoDQogICAgICAgICAgICAgIFBpYygNCiAgICAgICAgICAgICAgICBNYXRoLnNpbigNCiAgICAgICAgICAgICAgICAgIEdhbWUuVCAqIDAuMDAzICsNCiAgICAgICAgICAgICAgICAgICAgaSAqIDExICsNCiAgICAgICAgICAgICAgICAgICAgMTM3ICsNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5zaW4oR2FtZS5UICogMC4wMTcgKyBpICogMTMpDQogICAgICAgICAgICAgICAgKSA+IDAuOTk5Nw0KICAgICAgICAgICAgICAgICAgPyAid3JpbmtsZXJCbGluay5wbmciDQogICAgICAgICAgICAgICAgICA6ICJ3cmlua2xlckdvb2dsaWVzLnBuZyINCiAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgLXN3IC8gMiwNCiAgICAgICAgICAgICAgLTEwICsgMSAqIE1hdGguc2luKEdhbWUuVCAqIDAuMiArIGkgKiAzICsgMS4yKSwNCiAgICAgICAgICAgICAgc3csDQogICAgICAgICAgICAgIHNoDQogICAgICAgICAgICApOw0KICAgICAgICAgIC8vY3R4LmRyYXdJbWFnZShQaWMocGljKSwtNTAsLTEwKTsNCiAgICAgICAgICAvL2N0eC5maWxsVGV4dChtZS5pZCsnIDogJyttZS5zdWNrZWQsMCwwKTsNCiAgICAgICAgICBpZiAobWUudHlwZSA9PSAxICYmIE1hdGgucmFuZG9tKCkgPCAwLjMgJiYgR2FtZS5wcmVmcy5wYXJ0aWNsZXMpIHsNCiAgICAgICAgICAgIC8vc3BhcmtsZQ0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gTWF0aC5yYW5kb20oKSAqIDAuNjUgKyAwLjE7DQogICAgICAgICAgICB2YXIgcyA9IE1hdGgucmFuZG9tKCkgKiAzMCArIDU7DQogICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gImxpZ2h0ZXIiOw0KICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgUGljKCJnbGludC5qcGciKSwNCiAgICAgICAgICAgICAgLXMgLyAyICsgTWF0aC5yYW5kb20oKSAqIDUwIC0gMjUsDQogICAgICAgICAgICAgIC1zIC8gMiArIE1hdGgucmFuZG9tKCkgKiAyMDAsDQogICAgICAgICAgICAgIHMsDQogICAgICAgICAgICAgIHMNCiAgICAgICAgICAgICk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGN0eC5yZXN0b3JlKCk7DQoNCiAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5wYXJ0aWNsZXMgJiYgbWUucGhhc2UgPT0gMiAmJiBNYXRoLnJhbmRvbSgpIDwgMC4wMykgew0KICAgICAgICAgICAgR2FtZS5wYXJ0aWNsZUFkZCgNCiAgICAgICAgICAgICAgbWUueCwNCiAgICAgICAgICAgICAgbWUueSwNCiAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpICogLTIgLSAyLA0KICAgICAgICAgICAgICBNYXRoLnJhbmRvbSgpICogMC41ICsgMC41LA0KICAgICAgICAgICAgICAxLA0KICAgICAgICAgICAgICAyDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChtZS5zZWxlY3RlZCkgc2VsZWN0ZWQgPSBtZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKHNlbGVjdGVkICYmIEdhbWUuSGFzKCJFeWUgb2YgdGhlIHdyaW5rbGVyIikpIHsNCiAgICAgICAgdmFyIHggPSBHYW1lLmNvb2tpZU9yaWdpblg7DQogICAgICAgIHZhciB5ID0gR2FtZS5jb29raWVPcmlnaW5ZOw0KICAgICAgICBjdHguZm9udCA9ICIxNHB4IE1lcnJpd2VhdGhlciI7DQogICAgICAgIGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsNCiAgICAgICAgdmFyIHRleHQgPSBsb2MoIlN3YWxsb3dlZDoiKTsNCiAgICAgICAgdmFyIHdpZHRoID0gTWF0aC5jZWlsKA0KICAgICAgICAgIE1hdGgubWF4KA0KICAgICAgICAgICAgY3R4Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoLA0KICAgICAgICAgICAgY3R4Lm1lYXN1cmVUZXh0KEJlYXV0aWZ5KHNlbGVjdGVkLnN1Y2tlZCkpLndpZHRoDQogICAgICAgICAgKQ0KICAgICAgICApOw0KICAgICAgICBjdHguZmlsbFN0eWxlID0gIiMwMDAiOw0KICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjY1Ow0KICAgICAgICAvKmN0eC5zdHJva2VTdHlsZT0nIzAwMCc7DQoJCQkJY3R4LmxpbmVXaWR0aD04Ow0KCQkJCWN0eC5iZWdpblBhdGgoKTsNCgkJCQljdHgubW92ZVRvKHgseSk7DQoJCQkJY3R4LmxpbmVUbyhNYXRoLmZsb29yKHNlbGVjdGVkLngpLE1hdGguZmxvb3Ioc2VsZWN0ZWQueSkpOw0KCQkJCWN0eC5zdHJva2UoKTsqLw0KICAgICAgICB2YXIgeE8gPSB4IC0gd2lkdGggLyAyIC0gMTY7DQogICAgICAgIHZhciB5TyA9IHkgLSA0Ow0KICAgICAgICB2YXIgZGlzdCA9IE1hdGguZmxvb3IoDQogICAgICAgICAgTWF0aC5zcXJ0KA0KICAgICAgICAgICAgKHNlbGVjdGVkLnggLSB4TykgKiAoc2VsZWN0ZWQueCAtIHhPKSArDQogICAgICAgICAgICAgIChzZWxlY3RlZC55IC0geU8pICogKHNlbGVjdGVkLnkgLSB5TykNCiAgICAgICAgICApDQogICAgICAgICk7DQogICAgICAgIHZhciBhbmdsZSA9IC1NYXRoLmF0YW4yKHlPIC0gc2VsZWN0ZWQueSwgeE8gLSBzZWxlY3RlZC54KSArIE1hdGguUEkgLyAyOw0KICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAiI2ZmZiI7DQogICAgICAgIGN0eC5saW5lV2lkdGggPSAxOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE1hdGguZmxvb3IoZGlzdCAvIDEyKTsgaSsrKSB7DQogICAgICAgICAgdmFyIHhDID0gc2VsZWN0ZWQueCArIE1hdGguc2luKGFuZ2xlKSAqIGkgKiAxMjsNCiAgICAgICAgICB2YXIgeUMgPSBzZWxlY3RlZC55ICsgTWF0aC5jb3MoYW5nbGUpICogaSAqIDEyOw0KICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsNCiAgICAgICAgICBjdHguYXJjKA0KICAgICAgICAgICAgeEMsDQogICAgICAgICAgICB5QywNCiAgICAgICAgICAgIDQgKw0KICAgICAgICAgICAgICAoR2FtZS5wcmVmcy5mYW5jeQ0KICAgICAgICAgICAgICAgID8gMiAqIE1hdGgucG93KE1hdGguc2luKC1HYW1lLlQgKiAwLjIgKyBpICogMC4zKSwgNCkNCiAgICAgICAgICAgICAgICA6IDApLA0KICAgICAgICAgICAgMCwNCiAgICAgICAgICAgIDIgKiBNYXRoLlBJLA0KICAgICAgICAgICAgZmFsc2UNCiAgICAgICAgICApOw0KICAgICAgICAgIGN0eC5maWxsKCk7DQogICAgICAgICAgY3R4LnN0cm9rZSgpOw0KICAgICAgICB9DQogICAgICAgIGN0eC5maWxsUmVjdCh4IC0gd2lkdGggLyAyIC0gOCAtIDEwLCB5IC0gMjMsIHdpZHRoICsgMTYgKyAyMCwgMzgpOw0KICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAiI2ZmZiI7DQogICAgICAgIGN0eC5saW5lV2lkdGggPSAxOw0KICAgICAgICBjdHguc3Ryb2tlUmVjdCgNCiAgICAgICAgICB4IC0gd2lkdGggLyAyIC0gOCAtIDEwICsgMS41LA0KICAgICAgICAgIHkgLSAyMyArIDEuNSwNCiAgICAgICAgICB3aWR0aCArIDE2ICsgMjAgLSAzLA0KICAgICAgICAgIDM4IC0gMw0KICAgICAgICApOw0KICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICBjdHguZmlsbFN0eWxlID0gIiNmZmYiOw0KICAgICAgICBjdHguZmlsbFRleHQodGV4dCwgeCArIDE0LCB5IC0gOCk7DQogICAgICAgIGN0eC5maWxsVGV4dChCZWF1dGlmeShzZWxlY3RlZC5zdWNrZWQpLCB4ICsgMTAsIHkgKyA4KTsNCiAgICAgICAgdmFyIHMgPSA1NCArIDIgKiBNYXRoLnNpbihHYW1lLlQgKiAwLjQpOw0KICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgIFBpYygiaWNvbnMucG5nIiksDQogICAgICAgICAgMjcgKiA0OCwNCiAgICAgICAgICAyNiAqIDQ4LA0KICAgICAgICAgIDQ4LA0KICAgICAgICAgIDQ4LA0KICAgICAgICAgIHggLSB3aWR0aCAvIDIgLSAxNiAtIHMgLyAyLA0KICAgICAgICAgIHkgLSA0IC0gcyAvIDIsDQogICAgICAgICAgcywNCiAgICAgICAgICBzDQogICAgICAgICk7DQogICAgICB9DQogICAgfTsNCiAgICBHYW1lLlNhdmVXcmlua2xlcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgYW1vdW50ID0gMDsNCiAgICAgIHZhciBhbW91bnRTaGluaWVzID0gMDsNCiAgICAgIHZhciBudW1iZXIgPSAwOw0KICAgICAgdmFyIHNoaW5pZXMgPSAwOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLndyaW5rbGVycykgew0KICAgICAgICBpZiAoR2FtZS53cmlua2xlcnNbaV0uc3Vja2VkID4gMC41KSB7DQogICAgICAgICAgbnVtYmVyKys7DQogICAgICAgICAgaWYgKEdhbWUud3JpbmtsZXJzW2ldLnR5cGUgPT0gMSkgew0KICAgICAgICAgICAgc2hpbmllcysrOw0KICAgICAgICAgICAgYW1vdW50U2hpbmllcyArPSBHYW1lLndyaW5rbGVyc1tpXS5zdWNrZWQ7DQogICAgICAgICAgfSBlbHNlIGFtb3VudCArPSBHYW1lLndyaW5rbGVyc1tpXS5zdWNrZWQ7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiB7DQogICAgICAgIGFtb3VudDogYW1vdW50LA0KICAgICAgICBudW1iZXI6IG51bWJlciwNCiAgICAgICAgc2hpbmllczogc2hpbmllcywNCiAgICAgICAgYW1vdW50U2hpbmllczogYW1vdW50U2hpbmllcywNCiAgICAgIH07DQogICAgfTsNCiAgICBHYW1lLkxvYWRXcmlua2xlcnMgPSBmdW5jdGlvbiAoYW1vdW50LCBudW1iZXIsIHNoaW5pZXMsIGFtb3VudFNoaW5pZXMpIHsNCiAgICAgIGlmIChudW1iZXIgPiAwICYmIChhbW91bnQgPiAwIHx8IGFtb3VudFNoaW5pZXMgPiAwKSkgew0KICAgICAgICB2YXIgZnVsbE51bWJlciA9IG51bWJlciAtIHNoaW5pZXM7DQogICAgICAgIHZhciBmdWxsTnVtYmVyU2hpbmllcyA9IHNoaW5pZXM7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS53cmlua2xlcnMpIHsNCiAgICAgICAgICBpZiAobnVtYmVyID4gMCkgew0KICAgICAgICAgICAgR2FtZS53cmlua2xlcnNbaV0ucGhhc2UgPSAyOw0KICAgICAgICAgICAgR2FtZS53cmlua2xlcnNbaV0uY2xvc2UgPSAxOw0KICAgICAgICAgICAgR2FtZS53cmlua2xlcnNbaV0uaHAgPSAzOw0KICAgICAgICAgICAgaWYgKHNoaW5pZXMgPiAwKSB7DQogICAgICAgICAgICAgIEdhbWUud3JpbmtsZXJzW2ldLnR5cGUgPSAxOw0KICAgICAgICAgICAgICBHYW1lLndyaW5rbGVyc1tpXS5zdWNrZWQgPSBhbW91bnRTaGluaWVzIC8gZnVsbE51bWJlclNoaW5pZXM7DQogICAgICAgICAgICAgIHNoaW5pZXMtLTsNCiAgICAgICAgICAgIH0gZWxzZSBHYW1lLndyaW5rbGVyc1tpXS5zdWNrZWQgPSBhbW91bnQgLyBmdWxsTnVtYmVyOw0KICAgICAgICAgICAgbnVtYmVyLS07DQogICAgICAgICAgfSAvL3Jlc3Bhd24NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQoNCiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJU1BFQ0lBTCBUSElOR1MgQU5EIFNUVUZGDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLnNwZWNpYWxUYWIgPSAiIjsNCiAgICBHYW1lLnNwZWNpYWxUYWJIb3ZlcmVkID0gIiI7DQogICAgR2FtZS5zcGVjaWFsVGFicyA9IFtdOw0KDQogICAgR2FtZS5VcGRhdGVTcGVjaWFsID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5zcGVjaWFsVGFicyA9IFtdOw0KICAgICAgaWYgKEdhbWUuSGFzKCJBIGZlc3RpdmUgaGF0IikpIEdhbWUuc3BlY2lhbFRhYnMucHVzaCgic2FudGEiKTsNCiAgICAgIGlmIChHYW1lLkhhcygiQSBjcnVtYmx5IGVnZyIpKSBHYW1lLnNwZWNpYWxUYWJzLnB1c2goImRyYWdvbiIpOw0KICAgICAgaWYgKEdhbWUuc3BlY2lhbFRhYnMubGVuZ3RoID09IDApIHsNCiAgICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgwKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICBpZiAoR2FtZS5MZWZ0QmFja2dyb3VuZCkgew0KICAgICAgICBHYW1lLnNwZWNpYWxUYWJIb3ZlcmVkID0gIiI7DQogICAgICAgIHZhciBsZW4gPSBHYW1lLnNwZWNpYWxUYWJzLmxlbmd0aDsNCiAgICAgICAgaWYgKGxlbiA9PSAwKSByZXR1cm47DQogICAgICAgIHZhciB5ID0gR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0IC0gMjQgLSA0OCAqIGxlbjsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBHYW1lLnNwZWNpYWxUYWJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdmFyIHNlbGVjdGVkID0gMDsNCiAgICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFiID09IEdhbWUuc3BlY2lhbFRhYnNbaV0pIHNlbGVjdGVkID0gMTsNCiAgICAgICAgICB2YXIgeCA9IDI0Ow0KICAgICAgICAgIHZhciBzID0gMTsNCiAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgICAgIHMgPSAyOw0KICAgICAgICAgICAgeCArPSAyNDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBNYXRoLmFicyhHYW1lLm1vdXNlWCAtIHgpIDw9IDI0ICogcyAmJg0KICAgICAgICAgICAgTWF0aC5hYnMoR2FtZS5tb3VzZVkgLSB5KSA8PSAyNCAqIHMNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIEdhbWUuc3BlY2lhbFRhYkhvdmVyZWQgPSBHYW1lLnNwZWNpYWxUYWJzW2ldOw0KICAgICAgICAgICAgR2FtZS5tb3VzZVBvaW50ZXIgPSAxOw0KICAgICAgICAgICAgR2FtZS5DYW5DbGljayA9IDA7DQogICAgICAgICAgICBpZiAoR2FtZS5DbGljayAmJiBHYW1lLmxhc3RDbGlja2VkRWwgPT0gbCgiYmFja2dyb3VuZExlZnRDYW52YXMiKSkgew0KICAgICAgICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFiICE9IEdhbWUuc3BlY2lhbFRhYnNbaV0pIHsNCiAgICAgICAgICAgICAgICBHYW1lLnNwZWNpYWxUYWIgPSBHYW1lLnNwZWNpYWxUYWJzW2ldOw0KICAgICAgICAgICAgICAgIEdhbWUuVG9nZ2xlU3BlY2lhbE1lbnUoMSk7DQogICAgICAgICAgICAgICAgUGxheVNvdW5kKCJzbmQvcHJlc3MubXAzIik7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgwKTsNCiAgICAgICAgICAgICAgICBQbGF5U291bmQoInNuZC9wcmVzcy5tcDMiKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAvL1BsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgeSArPSA0ODsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLnNhbnRhTGV2ZWxzID0gWw0KICAgICAgIkZlc3RpdmUgdGVzdCB0dWJlIiwNCiAgICAgICJGZXN0aXZlIG9ybmFtZW50IiwNCiAgICAgICJGZXN0aXZlIHdyZWF0aCIsDQogICAgICAiRmVzdGl2ZSB0cmVlIiwNCiAgICAgICJGZXN0aXZlIHByZXNlbnQiLA0KICAgICAgIkZlc3RpdmUgZWxmIGZldHVzIiwNCiAgICAgICJFbGYgdG9kZGxlciIsDQogICAgICAiRWxmbGluZyIsDQogICAgICAiWW91bmcgZWxmIiwNCiAgICAgICJCdWxreSBlbGYiLA0KICAgICAgIk5pY2siLA0KICAgICAgIlNhbnRhIENsYXVzIiwNCiAgICAgICJFbGRlciBTYW50YSIsDQogICAgICAiVHJ1ZSBTYW50YSIsDQogICAgICAiRmluYWwgQ2xhdXMiLA0KICAgIF07DQogICAgaWYgKCFFTikgew0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNhbnRhTGV2ZWxzKSB7DQogICAgICAgIEdhbWUuc2FudGFMZXZlbHNbaV0gPSBsb2MoR2FtZS5zYW50YUxldmVsc1tpXSk7DQogICAgICB9DQogICAgfQ0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5zYW50YURyb3BzKSB7IC8vc2NhbGUgY2hyaXN0bWFzIHVwZ3JhZGUgcHJpY2VzIHdpdGggc2FudGEgbGV2ZWwNCiAgICAgIEdhbWUuVXBncmFkZXNbR2FtZS5zYW50YURyb3BzW2ldXS5wcmljZUZ1bmMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBNYXRoLnBvdygzLCBHYW1lLnNhbnRhTGV2ZWwpICogMjUyNTsNCiAgICAgIH07DQogICAgfQ0KDQogICAgR2FtZS5VcGdyYWRlU2FudGEgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbW9uaSA9IE1hdGgucG93KEdhbWUuc2FudGFMZXZlbCArIDEsIEdhbWUuc2FudGFMZXZlbCArIDEpOw0KICAgICAgaWYgKEdhbWUuY29va2llcyA+IG1vbmkgJiYgR2FtZS5zYW50YUxldmVsIDwgMTQpIHsNCiAgICAgICAgUGxheVNvdW5kKCJzbmQvc2hpbW1lckNsaWNrLm1wMyIpOw0KDQogICAgICAgIEdhbWUuU3BlbmQobW9uaSk7DQogICAgICAgIEdhbWUuc2FudGFMZXZlbCA9IChHYW1lLnNhbnRhTGV2ZWwgKyAxKSAlIDE1Ow0KICAgICAgICBpZiAoR2FtZS5zYW50YUxldmVsID09IDE0KSB7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlNhbnRhJ3MgZG9taW5pb24iKTsNCiAgICAgICAgICBHYW1lLk5vdGlmeSgNCiAgICAgICAgICAgIGxvYygiWW91IGFyZSBncmFudGVkICUxLiIsIEdhbWUuVXBncmFkZXNbIlNhbnRhJ3MgZG9taW5pb24iXS5kbmFtZSksDQogICAgICAgICAgICAiIiwNCiAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbIlNhbnRhJ3MgZG9taW5pb24iXS5pY29uDQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgZHJvcHMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLnNhbnRhRHJvcHMpIHsNCiAgICAgICAgICBpZiAoIUdhbWUuSGFzVW5sb2NrZWQoR2FtZS5zYW50YURyb3BzW2ldKSkNCiAgICAgICAgICAgIGRyb3BzLnB1c2goR2FtZS5zYW50YURyb3BzW2ldKTsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgZHJvcCA9IGNob29zZShkcm9wcyk7DQogICAgICAgIGlmIChkcm9wKSB7DQogICAgICAgICAgR2FtZS5VbmxvY2soZHJvcCk7DQogICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICBsb2MoIkZvdW5kIGEgcHJlc2VudCEiKSwNCiAgICAgICAgICAgIGxvYygiWW91IGZpbmQgYSBwcmVzZW50IHdoaWNoIGNvbnRhaW5zLi4uIikgKw0KICAgICAgICAgICAgICAiPGJyPjxiPiIgKw0KICAgICAgICAgICAgICBHYW1lLlVwZ3JhZGVzW2Ryb3BdLmRuYW1lICsNCiAgICAgICAgICAgICAgIjwvYj4hIiwNCiAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbZHJvcF0uaWNvbg0KICAgICAgICAgICk7DQogICAgICAgIH0NCg0KICAgICAgICBHYW1lLlRvZ2dsZVNwZWNpYWxNZW51KDEpOw0KDQogICAgICAgIGlmIChsKCJzcGVjaWFsUGljIikpIHsNCiAgICAgICAgICB2YXIgcmVjdCA9IGwoInNwZWNpYWxQaWMiKS5nZXRCb3VuZHMoKTsNCiAgICAgICAgICBHYW1lLlNwYXJrbGVBdCgNCiAgICAgICAgICAgIChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIsDQogICAgICAgICAgICAocmVjdC50b3AgKyByZWN0LmJvdHRvbSkgLyAyDQogICAgICAgICAgKSArDQogICAgICAgICAgICAzMiAtDQogICAgICAgICAgICBUb3BCYXJPZmZzZXQ7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5zYW50YUxldmVsID49IDYpIEdhbWUuV2luKCJDb21pbmcgdG8gdG93biIpOw0KICAgICAgICBpZiAoR2FtZS5zYW50YUxldmVsID49IDE0KSBHYW1lLldpbigiQWxsIGhhaWwgU2FudGEiKTsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICB9DQogICAgfTsNCg0KICAgIEdhbWUuZHJhZ29uTGV2ZWxzID0gWw0KICAgICAgew0KICAgICAgICBuYW1lOiAiRHJhZ29uIGVnZyIsDQogICAgICAgIGFjdGlvbjogbG9jKCJDaGlwIGl0IiksDQogICAgICAgIHBpYzogMCwNCiAgICAgICAgY29zdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBHYW1lLmNvb2tpZXMgPj0gMTAwMDAwMDsNCiAgICAgICAgfSwNCiAgICAgICAgYnV5OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgR2FtZS5TcGVuZCgxMDAwMDAwKTsNCiAgICAgICAgfSwNCiAgICAgICAgY29zdFN0cjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxMDAwMDAwKSk7DQogICAgICAgIH0sDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiRHJhZ29uIGVnZyIsDQogICAgICAgIGFjdGlvbjogbG9jKCJDaGlwIGl0IiksDQogICAgICAgIHBpYzogMSwNCiAgICAgICAgY29zdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBHYW1lLmNvb2tpZXMgPj0gMTAwMDAwMCAqIDI7DQogICAgICAgIH0sDQogICAgICAgIGJ1eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIEdhbWUuU3BlbmQoMTAwMDAwMCAqIDIpOw0KICAgICAgICB9LA0KICAgICAgICBjb3N0U3RyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDEwMDAwMDAgKiAyKSk7DQogICAgICAgIH0sDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiRHJhZ29uIGVnZyIsDQogICAgICAgIGFjdGlvbjogbG9jKCJDaGlwIGl0IiksDQogICAgICAgIHBpYzogMiwNCiAgICAgICAgY29zdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBHYW1lLmNvb2tpZXMgPj0gMTAwMDAwMCAqIDQ7DQogICAgICAgIH0sDQogICAgICAgIGJ1eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIEdhbWUuU3BlbmQoMTAwMDAwMCAqIDQpOw0KICAgICAgICB9LA0KICAgICAgICBjb3N0U3RyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KDEwMDAwMDAgKiA0KSk7DQogICAgICAgIH0sDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiU2hpdmVyaW5nIGRyYWdvbiBlZ2ciLA0KICAgICAgICBhY3Rpb246IGxvYygiSGF0Y2ggaXQiKSwNCiAgICAgICAgcGljOiAzLA0KICAgICAgICBjb3N0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIEdhbWUuY29va2llcyA+PSAxMDAwMDAwICogODsNCiAgICAgICAgfSwNCiAgICAgICAgYnV5OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgR2FtZS5TcGVuZCgxMDAwMDAwICogOCk7DQogICAgICAgIH0sDQogICAgICAgIGNvc3RTdHI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICByZXR1cm4gbG9jKCIlMSBjb29raWUiLCBMQmVhdXRpZnkoMTAwMDAwMCAqIDgpKTsNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGhhdGNobGluZyIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gQnJlYXRoIG9mIE1pbGs8YnI+PHNtYWxsPkF1cmEgOiBraXR0ZW5zIGFyZSA1JSBtb3JlIGVmZmVjdGl2ZTwvc21hbGw+IiwNCiAgICAgICAgcGljOiA0LA0KICAgICAgICBjb3N0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIEdhbWUuY29va2llcyA+PSAxMDAwMDAwICogMTY7DQogICAgICAgIH0sDQogICAgICAgIGJ1eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIEdhbWUuU3BlbmQoMTAwMDAwMCAqIDE2KTsNCiAgICAgICAgfSwNCiAgICAgICAgY29zdFN0cjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHJldHVybiBsb2MoIiUxIGNvb2tpZSIsIExCZWF1dGlmeSgxMDAwMDAwICogMTYpKTsNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGhhdGNobGluZyIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gRHJhZ29uIEN1cnNvcjxicj48c21hbGw+QXVyYSA6IGNsaWNraW5nIGlzIDUlIG1vcmUgZWZmZWN0aXZlPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDQsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBoYXRjaGxpbmciLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIEVsZGVyIEJhdHRhbGlvbjxicj48c21hbGw+QXVyYSA6IGdyYW5kbWFzIGdhaW4gKzElIENwUyBmb3IgZXZlcnkgbm9uLWdyYW5kbWEgYnVpbGRpbmc8L3NtYWxsPiIsDQogICAgICAgIHBpYzogNCwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGhhdGNobGluZyIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gUmVhcGVyIG9mIEZpZWxkczxicj48c21hbGw+QXVyYSA6IGdvbGRlbiBjb29raWVzIG1heSB0cmlnZ2VyIGEgRHJhZ29uIEhhcnZlc3Q8L3NtYWxsPiIsDQogICAgICAgIHBpYzogNCwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGRyYWdvbiIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gRWFydGggU2hhdHRlcmVyPGJyPjxzbWFsbD5BdXJhIDogYnVpbGRpbmdzIHNlbGwgYmFjayBmb3IgNTAlIGluc3RlYWQgb2YgMjUlPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIE1hc3RlciBvZiB0aGUgQXJtb3J5PGJyPjxzbWFsbD5BdXJhIDogYWxsIHVwZ3JhZGVzIGFyZSAyJSBjaGVhcGVyPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIEZpZXJjZSBIb2FyZGVyPGJyPjxzbWFsbD5BdXJhIDogYWxsIGJ1aWxkaW5ncyBhcmUgMiUgY2hlYXBlcjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBEcmFnb24gR29kPGJyPjxzbWFsbD5BdXJhIDogcHJlc3RpZ2UgQ3BTIGJvbnVzICs1JTwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBBcmNhbmUgQXVyYTxicj48c21hbGw+QXVyYSA6IGdvbGRlbiBjb29raWVzIGFwcGVhciA1JSBtb3JlIG9mdGVuPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIERyYWdvbmZsaWdodDxicj48c21hbGw+QXVyYSA6IGdvbGRlbiBjb29raWVzIG1heSB0cmlnZ2VyIGEgRHJhZ29uZmxpZ2h0PC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIEFuY2VzdHJhbCBNZXRhbW9ycGhvc2lzPGJyPjxzbWFsbD5BdXJhIDogZ29sZGVuIGNvb2tpZXMgZ2l2ZSAxMCUgbW9yZSBjb29raWVzPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIFVuaG9seSBEb21pbmlvbjxicj48c21hbGw+QXVyYSA6IHdyYXRoIGNvb2tpZXMgZ2l2ZSAxMCUgbW9yZSBjb29raWVzPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIEVwb2NoIE1hbmlwdWxhdG9yPGJyPjxzbWFsbD5BdXJhIDogZ29sZGVuIGNvb2tpZSBlZmZlY3RzIGxhc3QgNSUgbG9uZ2VyPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIE1pbmQgT3ZlciBNYXR0ZXI8YnI+PHNtYWxsPkF1cmEgOiArMjUlIHJhbmRvbSBkcm9wczwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBSYWRpYW50IEFwcGV0aXRlPGJyPjxzbWFsbD5BdXJhIDogYWxsIGNvb2tpZSBwcm9kdWN0aW9uIG11bHRpcGxpZWQgYnkgMjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBEcmFnb24ncyBGb3J0dW5lPGJyPjxzbWFsbD5BdXJhIDogKzEyMyUgQ3BTIHBlciBnb2xkZW4gY29va2llIG9uLXNjcmVlbjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBEcmFnb24ncyBDdXJ2ZTxicj48c21hbGw+QXVyYSA6IHN1Z2FyIGx1bXBzIGdyb3cgNSUgZmFzdGVyLCA1MCUgd2VpcmRlcjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgICJUcmFpbiBSZWFsaXR5IEJlbmRpbmc8YnI+PHNtYWxsPkF1cmEgOiAxMCUgb2YgZXZlcnkgb3RoZXIgYXVyYSwgY29tYmluZWQ8L3NtYWxsPiIsDQogICAgICAgIHBpYzogNSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGRyYWdvbiIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICAiVHJhaW4gRHJhZ29uIE9yYnM8YnI+PHNtYWxsPkF1cmEgOiBzZWxsaW5nIHlvdXIgYmVzdCBidWlsZGluZyBtYXkgZ3JhbnQgYSB3aXNoPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiS3J1bWJsb3IsIGNvb2tpZSBkcmFnb24iLA0KICAgICAgICBhY3Rpb246DQogICAgICAgICAgIlRyYWluIFN1cHJlbWUgSW50ZWxsZWN0PGJyPjxzbWFsbD5BdXJhIDogY29uZmVycyB2YXJpb3VzIHBvd2VycyB0byB5b3VyIG1pbmlnYW1lczwvc21hbGw+IiwNCiAgICAgICAgcGljOiA1LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOg0KICAgICAgICAgIGxvYygiQmFrZSBkcmFnb24gY29va2llIikgKw0KICAgICAgICAgICI8YnI+PHNtYWxsPiIgKw0KICAgICAgICAgIGxvYygiRGVsaWNpb3VzISIpICsNCiAgICAgICAgICAiPC9zbWFsbD4iLA0KICAgICAgICBwaWM6IDYsDQogICAgICAgIGNvc3Q6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB2YXIgZmFpbCA9IDA7DQogICAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICAgIGlmIChHYW1lLk9iamVjdHNbaV0uYW1vdW50IDwgNTApIGZhaWwgPSAxOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gZmFpbCA9PSAwOw0KICAgICAgICB9LA0KICAgICAgICBidXk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICAgICAgR2FtZS5PYmplY3RzW2ldLnNhY3JpZmljZSg1MCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJEcmFnb24gY29va2llIik7DQogICAgICAgIH0sDQogICAgICAgIGNvc3RTdHI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICByZXR1cm4gbG9jKCIlMSBvZiBldmVyeSBidWlsZGluZyIsIDUwKTsNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJLcnVtYmxvciwgY29va2llIGRyYWdvbiIsDQogICAgICAgIGFjdGlvbjoNCiAgICAgICAgICBsb2MoIlRyYWluIHNlY29uZGFyeSBhdXJhIikgKw0KICAgICAgICAgICI8YnI+PHNtYWxsPiIgKw0KICAgICAgICAgIGxvYygiTGV0cyB5b3UgdXNlIHR3byBkcmFnb24gYXVyYXMgc2ltdWx0YW5lb3VzbHkiKSArDQogICAgICAgICAgIjwvc21hbGw+IiwNCiAgICAgICAgcGljOiA3LA0KICAgICAgICBjb3N0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgdmFyIGZhaWwgPSAwOw0KICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLmFtb3VudCA8IDIwMCkgZmFpbCA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBmYWlsID09IDA7DQogICAgICAgIH0sDQogICAgICAgIGJ1eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgICBHYW1lLk9iamVjdHNbaV0uc2FjcmlmaWNlKDIwMCk7DQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjb3N0U3RyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgcmV0dXJuIGxvYygiJTEgb2YgZXZlcnkgYnVpbGRpbmciLCAyMDApOw0KICAgICAgICB9LA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbmFtZTogIktydW1ibG9yLCBjb29raWUgZHJhZ29uIiwNCiAgICAgICAgYWN0aW9uOiBsb2MoIllvdXIgZHJhZ29uIGlzIGZ1bGx5IHRyYWluZWQuIiksDQogICAgICAgIHBpYzogOCwNCiAgICAgIH0sDQogICAgXTsNCg0KICAgIEdhbWUuZHJhZ29uQXVyYXMgPSB7DQogICAgICAwOiB7DQogICAgICAgIG5hbWU6ICJObyBhdXJhIiwNCiAgICAgICAgcGljOiBbMCwgN10sDQogICAgICAgIGRlc2M6IGxvYygiU2VsZWN0IGFuIGF1cmEgZnJvbSB0aG9zZSB5b3VyIGRyYWdvbiBrbm93cy4iKSwNCiAgICAgIH0sDQogICAgICAxOiB7DQogICAgICAgIG5hbWU6ICJCcmVhdGggb2YgTWlsayIsDQogICAgICAgIHBpYzogWzE4LCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygiS2l0dGVucyBhcmUgPGI+JTElPC9iPiBtb3JlIGVmZmVjdGl2ZS4iLCA1KSwNCiAgICAgIH0sDQogICAgICAyOiB7DQogICAgICAgIG5hbWU6ICJEcmFnb24gQ3Vyc29yIiwNCiAgICAgICAgcGljOiBbMCwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIkNsaWNraW5nIGlzIDxiPiUxJTwvYj4gbW9yZSBwb3dlcmZ1bC4iLCA1KSwNCiAgICAgIH0sDQogICAgICAzOiB7DQogICAgICAgIG5hbWU6ICJFbGRlciBCYXR0YWxpb24iLA0KICAgICAgICBwaWM6IFsxLCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiR3JhbmRtYXMgZ2FpbiA8Yj4rJTElIENwUzwvYj4gZm9yIGVhY2ggbm9uLWdyYW5kbWEgYnVpbGRpbmcuIiwNCiAgICAgICAgICAxDQogICAgICAgICksDQogICAgICB9LA0KICAgICAgNDogew0KICAgICAgICBuYW1lOiAiUmVhcGVyIG9mIEZpZWxkcyIsDQogICAgICAgIHBpYzogWzIsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKCJHb2xkZW4gY29va2llcyBtYXkgdHJpZ2dlciBhIDxiPkRyYWdvbiBIYXJ2ZXN0PC9iPi4iKSwNCiAgICAgIH0sDQogICAgICA1OiB7DQogICAgICAgIG5hbWU6ICJFYXJ0aCBTaGF0dGVyZXIiLA0KICAgICAgICBwaWM6IFszLCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiQnVpbGRpbmdzIHNlbGwgYmFjayBmb3IgPGI+JTElPC9iPiBpbnN0ZWFkIG9mICUyJS4iLA0KICAgICAgICAgIFs1MCwgMjVdDQogICAgICAgICksDQogICAgICB9LA0KICAgICAgNjogew0KICAgICAgICBuYW1lOiAiTWFzdGVyIG9mIHRoZSBBcm1vcnkiLA0KICAgICAgICBwaWM6IFs0LCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygiQWxsIHVwZ3JhZGVzIGFyZSA8Yj4lMSUgY2hlYXBlcjwvYj4uIiwgMiksDQogICAgICB9LA0KICAgICAgNzogew0KICAgICAgICBuYW1lOiAiRmllcmNlIEhvYXJkZXIiLA0KICAgICAgICBwaWM6IFsxNSwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIkFsbCBidWlsZGluZ3MgYXJlIDxiPiUxJSBjaGVhcGVyPC9iPi4iLCAyKSwNCiAgICAgIH0sDQogICAgICA4OiB7DQogICAgICAgIG5hbWU6ICJEcmFnb24gR29kIiwNCiAgICAgICAgcGljOiBbMTYsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKCI8Yj4rJTElPC9iPiBwcmVzdGlnZSBsZXZlbCBlZmZlY3Qgb24gQ3BTLiIsIDUpLA0KICAgICAgfSwNCiAgICAgIDk6IHsNCiAgICAgICAgbmFtZTogIkFyY2FuZSBBdXJhIiwNCiAgICAgICAgcGljOiBbMTcsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKCJHb2xkZW4gY29va2llcyBhcHBlYXIgPGI+JTElPC9iPiBtb3JlIG9mdGVuLiIsIDUpLA0KICAgICAgfSwNCiAgICAgIDEwOiB7DQogICAgICAgIG5hbWU6ICJEcmFnb25mbGlnaHQiLA0KICAgICAgICBwaWM6IFs1LCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygiR29sZGVuIGNvb2tpZXMgbWF5IHRyaWdnZXIgYSA8Yj5EcmFnb25mbGlnaHQ8L2I+LiIpLA0KICAgICAgfSwNCiAgICAgIDExOiB7DQogICAgICAgIG5hbWU6ICJBbmNlc3RyYWwgTWV0YW1vcnBob3NpcyIsDQogICAgICAgIHBpYzogWzYsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKCJHb2xkZW4gY29va2llcyBnaXZlIDxiPiUxJTwvYj4gbW9yZSBjb29raWVzLiIsIDEwKSwNCiAgICAgIH0sDQogICAgICAxMjogew0KICAgICAgICBuYW1lOiAiVW5ob2x5IERvbWluaW9uIiwNCiAgICAgICAgcGljOiBbNywgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIldyYXRoIGNvb2tpZXMgZ2l2ZSA8Yj4lMSU8L2I+IG1vcmUgY29va2llcy4iLCAxMCksDQogICAgICB9LA0KICAgICAgMTM6IHsNCiAgICAgICAgbmFtZTogIkVwb2NoIE1hbmlwdWxhdG9yIiwNCiAgICAgICAgcGljOiBbOCwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIkdvbGRlbiBjb29raWVzIHN0YXkgPGI+JTElPC9iPiBsb25nZXIuIiwgNSksDQogICAgICB9LA0KICAgICAgMTQ6IHsNCiAgICAgICAgbmFtZTogIk1pbmQgT3ZlciBNYXR0ZXIiLA0KICAgICAgICBwaWM6IFsxMywgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIlJhbmRvbSBkcm9wcyBhcmUgPGI+JTElIG1vcmUgY29tbW9uPC9iPi4iLCAyNSksDQogICAgICB9LA0KICAgICAgMTU6IHsNCiAgICAgICAgbmFtZTogIlJhZGlhbnQgQXBwZXRpdGUiLA0KICAgICAgICBwaWM6IFsxNCwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoIkFsbCBjb29raWUgcHJvZHVjdGlvbiA8Yj5tdWx0aXBsaWVkIGJ5ICUxPC9iPi4iLCAyKSwNCiAgICAgIH0sDQogICAgICAxNjogew0KICAgICAgICBuYW1lOiAiRHJhZ29uJ3MgRm9ydHVuZSIsDQogICAgICAgIHBpYzogWzE5LCAyNV0sDQogICAgICAgIGRlc2M6IGxvYygNCiAgICAgICAgICAiPGI+KyUxJSBDcFM8L2I+IHBlciBnb2xkZW4gY29va2llIG9uLXNjcmVlbiwgbXVsdGlwbGljYXRpdmUuIiwNCiAgICAgICAgICAxMjMNCiAgICAgICAgKSwNCiAgICAgIH0sDQogICAgICAxNzogew0KICAgICAgICBuYW1lOiAiRHJhZ29uJ3MgQ3VydmUiLA0KICAgICAgICBwaWM6IFsyMCwgMjVdLA0KICAgICAgICBkZXNjOg0KICAgICAgICAgIGxvYygiPGI+KyUxJTwvYj4gc3VnYXIgbHVtcCBncm93dGguIiwgNSkgKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgbG9jKCJTdWdhciBsdW1wcyBhcmUgPGI+dHdpY2UgYXMgbGlrZWx5PC9iPiB0byBiZSB1bnVzdWFsLiIpLA0KICAgICAgfSwNCiAgICAgIDE4OiB7DQogICAgICAgIG5hbWU6ICJSZWFsaXR5IEJlbmRpbmciLA0KICAgICAgICBwaWM6IFszMiwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoDQogICAgICAgICAgIjxiPk9uZSB0ZW50aDwvYj4gb2YgZXZlcnkgb3RoZXIgZHJhZ29uIGF1cmEsIDxiPmNvbWJpbmVkPC9iPi4iDQogICAgICAgICksDQogICAgICB9LA0KICAgICAgMTk6IHsNCiAgICAgICAgbmFtZTogIkRyYWdvbiBPcmJzIiwNCiAgICAgICAgcGljOiBbMzMsIDI1XSwNCiAgICAgICAgZGVzYzogbG9jKA0KICAgICAgICAgICJXaXRoIG5vIGJ1ZmZzIGFuZCBubyBnb2xkZW4gY29va2llcyBvbiBzY3JlZW4sIHNlbGxpbmcgeW91ciBtb3N0IHBvd2VyZnVsIGJ1aWxkaW5nIGhhcyA8Yj4lMSUgY2hhbmNlIHRvIHN1bW1vbiBvbmU8L2I+LiIsDQogICAgICAgICAgMTANCiAgICAgICAgKSwNCiAgICAgIH0sDQogICAgICAyMDogew0KICAgICAgICBuYW1lOiAiU3VwcmVtZSBJbnRlbGxlY3QiLA0KICAgICAgICBwaWM6IFszNCwgMjVdLA0KICAgICAgICBkZXNjOiBsb2MoDQogICAgICAgICAgIkNvbmZlcnMgdmFyaW91cyBwb3dlcnMgdG8geW91ciBtaW5pZ2FtZXMgd2hpbGUgYWN0aXZlLjxicj5TZWUgdGhlIGJvdHRvbSBvZiBlYWNoIG1pbmlnYW1lIGZvciBtb3JlIGRldGFpbHMuIg0KICAgICAgICApLA0KICAgICAgfSwNCiAgICB9Ow0KDQogICAgR2FtZS5kcmFnb25BdXJhc0JOID0ge307DQogICAgZm9yICh2YXIgaSBpbiBHYW1lLmRyYWdvbkF1cmFzKSB7DQogICAgICBHYW1lLmRyYWdvbkF1cmFzQk5bR2FtZS5kcmFnb25BdXJhc1tpXS5uYW1lXSA9IEdhbWUuZHJhZ29uQXVyYXNbaV07DQogICAgfQ0KICAgIGZvciAodmFyIGkgaW4gR2FtZS5kcmFnb25BdXJhcykgew0KICAgICAgR2FtZS5kcmFnb25BdXJhc1tpXS5pZCA9IHBhcnNlSW50KGkpOw0KICAgICAgR2FtZS5kcmFnb25BdXJhc1tpXS5kbmFtZSA9IGxvYyhHYW1lLmRyYWdvbkF1cmFzW2ldLm5hbWUpOw0KICAgIH0NCg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5kcmFnb25MZXZlbHMubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciBpdCA9IEdhbWUuZHJhZ29uTGV2ZWxzW2ldOw0KICAgICAgaXQubmFtZSA9IGxvYyhpdC5uYW1lKTsNCiAgICAgIGlmIChpID49IDQgJiYgaSA8IEdhbWUuZHJhZ29uTGV2ZWxzLmxlbmd0aCAtIDMpIHsNCiAgICAgICAgaWYgKCFFTikNCiAgICAgICAgICBpdC5hY3Rpb24gPQ0KICAgICAgICAgICAgbG9jKCJUcmFpbiAlMSIsIEdhbWUuZHJhZ29uQXVyYXNbaSAtIDNdLmRuYW1lKSArDQogICAgICAgICAgICAiPGJyPjxzbWFsbD4iICsNCiAgICAgICAgICAgIGxvYygiQXVyYTogJTEiLCBHYW1lLmRyYWdvbkF1cmFzW2kgLSAzXS5kZXNjKSArDQogICAgICAgICAgICAiPC9zbWFsbD4iOw0KICAgICAgICBpZiAoaSA+PSA1KSB7DQogICAgICAgICAgaXQuY29zdFN0ciA9IChmdW5jdGlvbiAoYnVpbGRpbmcpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIHJldHVybiBsb2MoIiUxICIgKyBidWlsZGluZy5ic2luZ2xlLCBMQmVhdXRpZnkoMTAwKSk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0pKEdhbWUuT2JqZWN0c0J5SWRbaSAtIDVdKTsNCiAgICAgICAgICBpdC5jb3N0ID0gKGZ1bmN0aW9uIChidWlsZGluZykgew0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkaW5nLmFtb3VudCA+PSAxMDA7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0pKEdhbWUuT2JqZWN0c0J5SWRbaSAtIDVdKTsNCiAgICAgICAgICBpdC5idXkgPSAoZnVuY3Rpb24gKGJ1aWxkaW5nKSB7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICBidWlsZGluZy5zYWNyaWZpY2UoMTAwKTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSkoR2FtZS5PYmplY3RzQnlJZFtpIC0gNV0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgR2FtZS5oYXNBdXJhID0gZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5kcmFnb25BdXJhc1tHYW1lLmRyYWdvbkF1cmFdLm5hbWUgPT0gd2hhdCB8fA0KICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYTJdLm5hbWUgPT0gd2hhdA0KICAgICAgKQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgIH07DQogICAgR2FtZS5hdXJhTXVsdCA9IGZ1bmN0aW9uICh3aGF0KSB7DQogICAgICB2YXIgbiA9IDA7DQogICAgICBpZiAoDQogICAgICAgIEdhbWUuZHJhZ29uQXVyYXNbR2FtZS5kcmFnb25BdXJhXS5uYW1lID09IHdoYXQgfHwNCiAgICAgICAgR2FtZS5kcmFnb25BdXJhc1tHYW1lLmRyYWdvbkF1cmEyXS5uYW1lID09IHdoYXQNCiAgICAgICkNCiAgICAgICAgbiA9IDE7DQogICAgICBpZiAoDQogICAgICAgIChHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYV0ubmFtZSA9PSAiUmVhbGl0eSBCZW5kaW5nIiB8fA0KICAgICAgICAgIEdhbWUuZHJhZ29uQXVyYXNbR2FtZS5kcmFnb25BdXJhMl0ubmFtZSA9PSAiUmVhbGl0eSBCZW5kaW5nIikgJiYNCiAgICAgICAgR2FtZS5kcmFnb25MZXZlbCA+PSBHYW1lLmRyYWdvbkF1cmFzQk5bd2hhdF0uaWQgKyA0DQogICAgICApDQogICAgICAgIG4gKz0gMC4xOw0KICAgICAgcmV0dXJuIG47DQogICAgfTsNCg0KICAgIEdhbWUuU2VsZWN0RHJhZ29uQXVyYSA9IGZ1bmN0aW9uIChzbG90LCB1cGRhdGUpIHsNCiAgICAgIHZhciBjdXJyZW50QXVyYSA9IDA7DQogICAgICB2YXIgb3RoZXJBdXJhID0gMDsNCiAgICAgIGlmIChzbG90ID09IDApIGN1cnJlbnRBdXJhID0gR2FtZS5kcmFnb25BdXJhOw0KICAgICAgZWxzZSBjdXJyZW50QXVyYSA9IEdhbWUuZHJhZ29uQXVyYTI7DQogICAgICBpZiAoc2xvdCA9PSAwKSBvdGhlckF1cmEgPSBHYW1lLmRyYWdvbkF1cmEyOw0KICAgICAgZWxzZSBvdGhlckF1cmEgPSBHYW1lLmRyYWdvbkF1cmE7DQogICAgICBpZiAoIXVwZGF0ZSkgR2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhID0gY3VycmVudEF1cmE7DQoNCiAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5kcmFnb25BdXJhcykgew0KICAgICAgICBpZiAoR2FtZS5kcmFnb25MZXZlbCA+PSBwYXJzZUludChpKSArIDQpIHsNCiAgICAgICAgICB2YXIgaWNvbiA9IEdhbWUuZHJhZ29uQXVyYXNbaV0ucGljOw0KICAgICAgICAgIGlmIChpID09IDAgfHwgaSAhPSBvdGhlckF1cmEpDQogICAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImNyYXRlIGVuYWJsZWQnICsNCiAgICAgICAgICAgICAgKGkgPT0gR2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhID8gIiBoaWdobGlnaHRlZCIgOiAiIikgKw0KICAgICAgICAgICAgICAnIiBzdHlsZT0ib3BhY2l0eToxO2Zsb2F0Om5vbmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7JyArDQogICAgICAgICAgICAgIHdyaXRlSWNvbihpY29uKSArDQogICAgICAgICAgICAgICciICcgKw0KICAgICAgICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgICAgICAgIj1cIlBsYXlTb3VuZCgnc25kL3RpY2subXAzJyk7R2FtZS5TZXREcmFnb25BdXJhKCIgKw0KICAgICAgICAgICAgICBpICsNCiAgICAgICAgICAgICAgIiwiICsNCiAgICAgICAgICAgICAgc2xvdCArDQogICAgICAgICAgICAgICcpOyIgb25Nb3VzZU91dD0iR2FtZS5EZXNjcmliZURyYWdvbkF1cmEoJyArDQogICAgICAgICAgICAgIEdhbWUuU2VsZWN0aW5nRHJhZ29uQXVyYSArDQogICAgICAgICAgICAgICcpOyIgb25Nb3VzZU92ZXI9IkdhbWUuRGVzY3JpYmVEcmFnb25BdXJhKCcgKw0KICAgICAgICAgICAgICBpICsNCiAgICAgICAgICAgICAgJyk7IicgKw0KICAgICAgICAgICAgICAiPjwvZGl2PiI7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdmFyIGhpZ2hlc3RCdWlsZGluZyA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLmFtb3VudCA+IDApIGhpZ2hlc3RCdWlsZGluZyA9IEdhbWUuT2JqZWN0c1tpXTsNCiAgICAgIH0NCg0KICAgICAgR2FtZS5Qcm9tcHQoDQogICAgICAgICI8aWQgUGlja0RyYWdvbkF1cmE+PGgzPiIgKw0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgIHNsb3QgPT0gMQ0KICAgICAgICAgICAgICA/ICJTZXQgeW91ciBkcmFnb24ncyBzZWNvbmRhcnkgYXVyYSINCiAgICAgICAgICAgICAgOiAiU2V0IHlvdXIgZHJhZ29uJ3MgYXVyYSINCiAgICAgICAgICApICsNCiAgICAgICAgICAiPC9oMz4iICsNCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgJzxkaXYgaWQ9ImRyYWdvbkF1cmFJbmZvIiBzdHlsZT0ibWluLWhlaWdodDo2MHB4OyI+PC9kaXY+JyArDQogICAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JyArDQogICAgICAgICAgc3RyICsNCiAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tYm90dG9tOjhweDsiPicgKw0KICAgICAgICAgIChoaWdoZXN0QnVpbGRpbmcgPT0gMA0KICAgICAgICAgICAgPyBsb2MoDQogICAgICAgICAgICAgICAgIlN3aXRjaGluZyB5b3VyIGF1cmEgaXMgPGI+ZnJlZTwvYj4gYmVjYXVzZSB5b3Ugb3duIG5vIGJ1aWxkaW5ncy4iDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgIDogbG9jKA0KICAgICAgICAgICAgICAgICJUaGUgY29zdCBvZiBzd2l0Y2hpbmcgeW91ciBhdXJhIGlzIDxiPiUxPC9iPi48YnI+VGhpcyB3aWxsIGFmZmVjdCB5b3VyIENwUyEiLA0KICAgICAgICAgICAgICAgIGxvYygiJTEgIiArIGhpZ2hlc3RCdWlsZGluZy5ic2luZ2xlLCBMQmVhdXRpZnkoMSkpDQogICAgICAgICAgICAgICkpICsNCiAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgWw0KICAgICAgICAgIFsNCiAgICAgICAgICAgIGxvYygiQ29uZmlybSIpLA0KICAgICAgICAgICAgKHNsb3QgPT0gMCA/ICJHYW1lLmRyYWdvbkF1cmEiIDogIkdhbWUuZHJhZ29uQXVyYTIiKSArDQogICAgICAgICAgICAgICI9R2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhOyIgKw0KICAgICAgICAgICAgICAoaGlnaGVzdEJ1aWxkaW5nID09IDAgfHwgY3VycmVudEF1cmEgPT0gR2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhDQogICAgICAgICAgICAgICAgPyAiIg0KICAgICAgICAgICAgICAgIDogIkdhbWUuT2JqZWN0c0J5SWRbIiArDQogICAgICAgICAgICAgICAgICBoaWdoZXN0QnVpbGRpbmcuaWQgKw0KICAgICAgICAgICAgICAgICAgIl0uc2FjcmlmaWNlKDEpOyIpICsNCiAgICAgICAgICAgICAgIkdhbWUuVG9nZ2xlU3BlY2lhbE1lbnUoMSk7R2FtZS5DbG9zZVByb21wdCgpOyIsDQogICAgICAgICAgXSwNCiAgICAgICAgICBsb2MoIkNhbmNlbCIpLA0KICAgICAgICBdLA0KICAgICAgICAwLA0KICAgICAgICAid2lkZVByb21wdCINCiAgICAgICk7DQogICAgICBHYW1lLkRlc2NyaWJlRHJhZ29uQXVyYShHYW1lLlNlbGVjdGluZ0RyYWdvbkF1cmEpOw0KICAgIH07DQogICAgR2FtZS5TZWxlY3RpbmdEcmFnb25BdXJhID0gLTE7DQogICAgR2FtZS5TZXREcmFnb25BdXJhID0gZnVuY3Rpb24gKGF1cmEsIHNsb3QpIHsNCiAgICAgIEdhbWUuU2VsZWN0aW5nRHJhZ29uQXVyYSA9IGF1cmE7DQogICAgICBHYW1lLlNlbGVjdERyYWdvbkF1cmEoc2xvdCwgMSk7DQogICAgfTsNCiAgICBHYW1lLkRlc2NyaWJlRHJhZ29uQXVyYSA9IGZ1bmN0aW9uIChhdXJhKSB7DQogICAgICBsKCJkcmFnb25BdXJhSW5mbyIpLmlubmVySFRNTCA9DQogICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij48aDQ+JyArDQogICAgICAgIEdhbWUuZHJhZ29uQXVyYXNbYXVyYV0uZG5hbWUgKw0KICAgICAgICAiPC9oND4iICsNCiAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW2F1cmFdLmRlc2MgKw0KICAgICAgICAiPC9kaXY+IjsNCiAgICB9Ow0KDQogICAgR2FtZS5VcGdyYWRlRHJhZ29uID0gZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLmRyYWdvbkxldmVsIDwgR2FtZS5kcmFnb25MZXZlbHMubGVuZ3RoIC0gMSAmJg0KICAgICAgICBHYW1lLmRyYWdvbkxldmVsc1tHYW1lLmRyYWdvbkxldmVsXS5jb3N0KCkNCiAgICAgICkgew0KICAgICAgICBQbGF5U291bmQoInNuZC9zaGltbWVyQ2xpY2subXAzIik7DQogICAgICAgIEdhbWUuZHJhZ29uTGV2ZWxzW0dhbWUuZHJhZ29uTGV2ZWxdLmJ1eSgpOw0KICAgICAgICBHYW1lLmRyYWdvbkxldmVsID0gKEdhbWUuZHJhZ29uTGV2ZWwgKyAxKSAlIEdhbWUuZHJhZ29uTGV2ZWxzLmxlbmd0aDsNCg0KICAgICAgICBpZiAoR2FtZS5kcmFnb25MZXZlbCA+PSBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAxKQ0KICAgICAgICAgIEdhbWUuV2luKCJIZXJlIGJlIGRyYWdvbiIpOw0KICAgICAgICBHYW1lLlRvZ2dsZVNwZWNpYWxNZW51KDEpOw0KICAgICAgICBpZiAobCgic3BlY2lhbFBpYyIpKSB7DQogICAgICAgICAgdmFyIHJlY3QgPSBsKCJzcGVjaWFsUGljIikuZ2V0Qm91bmRzKCk7DQogICAgICAgICAgR2FtZS5TcGFya2xlQXQoDQogICAgICAgICAgICAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyLA0KICAgICAgICAgICAgKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMg0KICAgICAgICAgICkgKw0KICAgICAgICAgICAgMzIgLQ0KICAgICAgICAgICAgVG9wQmFyT2Zmc2V0Ow0KICAgICAgICB9DQogICAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICAgIEdhbWUudXBncmFkZXNUb1JlYnVpbGQgPSAxOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICBHYW1lLmxhc3RDbGlja2VkU3BlY2lhbFBpYyA9IDA7DQogICAgR2FtZS5DbGlja1NwZWNpYWxQaWMgPSBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAoDQogICAgICAgIEdhbWUuc3BlY2lhbFRhYiA9PSAiZHJhZ29uIiAmJg0KICAgICAgICBHYW1lLmRyYWdvbkxldmVsID49IDQgJiYNCiAgICAgICAgR2FtZS5IYXMoIlBldCB0aGUgZHJhZ29uIikgJiYNCiAgICAgICAgbCgic3BlY2lhbFBpYyIpDQogICAgICApIHsNCiAgICAgICAgdHJpZ2dlckFuaW0obCgic3BlY2lhbFBpYyIpLCAicHVja2VyIik7DQogICAgICAgIFBsYXlTb3VuZCgNCiAgICAgICAgICAic25kL2NsaWNrIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcgKyAxKSArICIubXAzIiwNCiAgICAgICAgICAwLjUNCiAgICAgICAgKTsNCiAgICAgICAgaWYgKERhdGUubm93KCkgLSBHYW1lLmxhc3RDbGlja2VkU3BlY2lhbFBpYyA+IDIwMDApDQogICAgICAgICAgUGxheVNvdW5kKCJzbmQvZ3Jvd2wubXAzIik7DQogICAgICAgIC8vZWxzZSBpZiAoTWF0aC5yYW5kb20oKTwwLjUpIFBsYXlTb3VuZCgnc25kL2dyb3dsLm1wMycsMC41K01hdGgucmFuZG9tKCkqMC4yKTsNCiAgICAgICAgR2FtZS5sYXN0Q2xpY2tlZFNwZWNpYWxQaWMgPSBEYXRlLm5vdygpOw0KICAgICAgICBpZiAoR2FtZS5wcmVmcy5wYXJ0aWNsZXMpIHsNCiAgICAgICAgICBHYW1lLnBhcnRpY2xlQWRkKA0KICAgICAgICAgICAgR2FtZS5tb3VzZVgsDQogICAgICAgICAgICBHYW1lLm1vdXNlWSAtIDMyLA0KICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIDQgLSAyLA0KICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqIC0yIC0gNCwNCiAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiAwLjIgKyAwLjUsDQogICAgICAgICAgICAxLA0KICAgICAgICAgICAgMiwNCiAgICAgICAgICAgIFsyMCwgM10NCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmRyYWdvbkxldmVsID49IDggJiYgTWF0aC5yYW5kb20oKSA8IDEgLyAyMCkgew0KICAgICAgICAgIE1hdGguc2VlZHJhbmRvbShHYW1lLnNlZWQgKyAiL2RyYWdvblRpbWUiKTsNCiAgICAgICAgICB2YXIgZHJvcHMgPSBbDQogICAgICAgICAgICAiRHJhZ29uIHNjYWxlIiwNCiAgICAgICAgICAgICJEcmFnb24gY2xhdyIsDQogICAgICAgICAgICAiRHJhZ29uIGZhbmciLA0KICAgICAgICAgICAgIkRyYWdvbiB0ZWRkeSBiZWFyIiwNCiAgICAgICAgICBdOw0KICAgICAgICAgIGRyb3BzID0gc2h1ZmZsZShkcm9wcyk7DQogICAgICAgICAgdmFyIGRyb3AgPQ0KICAgICAgICAgICAgZHJvcHNbTWF0aC5mbG9vcigobmV3IERhdGUoKS5nZXRNaW51dGVzKCkgLyA2MCkgKiBkcm9wcy5sZW5ndGgpXTsNCiAgICAgICAgICBpZiAoIUdhbWUuSGFzKGRyb3ApICYmICFHYW1lLkhhc1VubG9ja2VkKGRyb3ApKSB7DQogICAgICAgICAgICBHYW1lLlVubG9jayhkcm9wKTsNCiAgICAgICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgICAgICBkcm9wLA0KICAgICAgICAgICAgICAiPGI+IiArIGxvYygiWW91ciBkcmFnb24gZHJvcHBlZCBzb21ldGhpbmchIikgKyAiPC9iPiIsDQogICAgICAgICAgICAgIEdhbWUuVXBncmFkZXNbZHJvcF0uaWNvbg0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgICAgTWF0aC5zZWVkcmFuZG9tKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KDQogICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSA9IGZ1bmN0aW9uIChvbikgew0KICAgICAgaWYgKG9uKSB7DQogICAgICAgIHZhciBwaWMgPSAiIjsNCiAgICAgICAgdmFyIGZyYW1lID0gMDsNCiAgICAgICAgaWYgKEdhbWUuc3BlY2lhbFRhYiA9PSAic2FudGEiKSB7DQogICAgICAgICAgcGljID0gInNhbnRhLnBuZyI7DQogICAgICAgICAgZnJhbWUgPSBHYW1lLnNhbnRhTGV2ZWw7DQogICAgICAgIH0gZWxzZSBpZiAoR2FtZS5zcGVjaWFsVGFiID09ICJkcmFnb24iKSB7DQogICAgICAgICAgcGljID0gImRyYWdvbi5wbmc/dj0iICsgR2FtZS52ZXJzaW9uOw0KICAgICAgICAgIGZyYW1lID0gR2FtZS5kcmFnb25MZXZlbHNbR2FtZS5kcmFnb25MZXZlbF0ucGljOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHBpYyA9ICJkcmFnb24ucG5nP3Y9IiArIEdhbWUudmVyc2lvbjsNCiAgICAgICAgICBmcmFtZSA9IDQ7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgc3RyID0NCiAgICAgICAgICAnPGRpdiBpZD0ic3BlY2lhbFBpYyIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgJz0iR2FtZS5DbGlja1NwZWNpYWxQaWMoKTsiIHN0eWxlPSInICsNCiAgICAgICAgICAoR2FtZS5zcGVjaWFsVGFiID09ICJkcmFnb24iICYmDQogICAgICAgICAgR2FtZS5kcmFnb25MZXZlbCA+PSA0ICYmDQogICAgICAgICAgR2FtZS5IYXMoIlBldCB0aGUgZHJhZ29uIikNCiAgICAgICAgICAgID8gImN1cnNvcjpwb2ludGVyOyINCiAgICAgICAgICAgIDogIiIpICsNCiAgICAgICAgICAicG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTZweDt0b3A6LTY0cHg7d2lkdGg6OTZweDtoZWlnaHQ6OTZweDtiYWNrZ3JvdW5kOnVybChpbWcvIiArDQogICAgICAgICAgcGljICsNCiAgICAgICAgICAiKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOiIgKw0KICAgICAgICAgIC1mcmFtZSAqIDk2ICsNCiAgICAgICAgICAncHggMHB4O2ZpbHRlcjpkcm9wLXNoYWRvdygwcHggM3B4IDJweCAjMDAwKTstd2Via2l0LWZpbHRlcjpkcm9wLXNoYWRvdygwcHggM3B4IDJweCAjMDAwKTsiPjwvZGl2Pic7DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICc8ZGl2IGNsYXNzPSJjbG9zZSIgb25jbGljaz0iUGxheVNvdW5kKFwnc25kL3ByZXNzLm1wM1wnKTtHYW1lLlRvZ2dsZVNwZWNpYWxNZW51KDApOyI+eDwvZGl2Pic7DQoNCiAgICAgICAgaWYgKEdhbWUuc3BlY2lhbFRhYiA9PSAic2FudGEiKSB7DQogICAgICAgICAgdmFyIG1vbmkgPSBNYXRoLnBvdyhHYW1lLnNhbnRhTGV2ZWwgKyAxLCBHYW1lLnNhbnRhTGV2ZWwgKyAxKTsNCg0KICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgJzxoMyBzdHlsZT0icG9pbnRlci1ldmVudHM6bm9uZTsiPicgKw0KICAgICAgICAgICAgR2FtZS5zYW50YUxldmVsc1tHYW1lLnNhbnRhTGV2ZWxdICsNCiAgICAgICAgICAgICI8L2gzPiI7DQogICAgICAgICAgaWYgKEdhbWUuc2FudGFMZXZlbCA8IDE0KSB7DQogICAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ib3B0aW9uQm94IiBzdHlsZT0ibWFyZ2luLWJvdHRvbTowcHg7Ij48YSBjbGFzcz0ib3B0aW9uIGZyYW1lZCBsYXJnZSB0aXRsZSIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAnPSJHYW1lLlVwZ3JhZGVTYW50YSgpOyI+JyArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+JyArDQogICAgICAgICAgICAgIGxvYygiRXZvbHZlIikgKw0KICAgICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlO3BhZGRpbmc6NHB4IDEycHg7Ij58PC9kaXY+JyArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTo2NSU7Ij4nICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJzYWNyaWZpY2UgJTEiLA0KICAgICAgICAgICAgICAgICI8ZGl2IiArDQogICAgICAgICAgICAgICAgICAoR2FtZS5jb29raWVzID4gbW9uaSA/ICIiIDogJyBzdHlsZT0iY29sb3I6Izc3NzsiJykgKw0KICAgICAgICAgICAgICAgICAgIj4iICsNCiAgICAgICAgICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICAgICAgICAgIiUxIGNvb2tpZSIsDQogICAgICAgICAgICAgICAgICAgIExCZWF1dGlmeSgNCiAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhHYW1lLnNhbnRhTGV2ZWwgKyAxLCBHYW1lLnNhbnRhTGV2ZWwgKyAxKQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICAgICI8L2E+PC9kaXY+IjsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAoR2FtZS5zcGVjaWFsVGFiID09ICJkcmFnb24iKSB7DQogICAgICAgICAgdmFyIGxldmVsID0gR2FtZS5kcmFnb25MZXZlbHNbR2FtZS5kcmFnb25MZXZlbF07DQoNCiAgICAgICAgICBzdHIgKz0gJzxoMyBzdHlsZT0icG9pbnRlci1ldmVudHM6bm9uZTsiPicgKyBsZXZlbC5uYW1lICsgIjwvaDM+IjsNCg0KICAgICAgICAgIGlmIChHYW1lLmRyYWdvbkxldmVsID49IDUpIHsNCiAgICAgICAgICAgIHZhciBpY29uID0gR2FtZS5kcmFnb25BdXJhc1tHYW1lLmRyYWdvbkF1cmFdLnBpYzsNCiAgICAgICAgICAgIHN0ciArPQ0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iY3JhdGUgZW5hYmxlZCIgc3R5bGU9Im9wYWNpdHk6MTtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxOHB4O3RvcDotNThweDsnICsNCiAgICAgICAgICAgICAgd3JpdGVJY29uKGljb24pICsNCiAgICAgICAgICAgICAgJyIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAiPVwiUGxheVNvdW5kKCdzbmQvdGljay5tcDMnKTtHYW1lLlNlbGVjdERyYWdvbkF1cmEoMCk7XCIgIiArDQogICAgICAgICAgICAgIEdhbWUuZ2V0VG9vbHRpcCgNCiAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT0ibWluLXdpZHRoOjIwMHB4O3RleHQtYWxpZ246Y2VudGVyOyIgaWQ9InRvb2x0aXBEcmFnb25BdXJhU2VsZWN0Ij48aDQ+JyArDQogICAgICAgICAgICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYV0uZG5hbWUgKw0KICAgICAgICAgICAgICAgICAgIjwvaDQ+IiArDQogICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JyArDQogICAgICAgICAgICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYV0uZGVzYyArDQogICAgICAgICAgICAgICAgICAiPC9kaXY+IiwNCiAgICAgICAgICAgICAgICAidG9wIg0KICAgICAgICAgICAgICApICsNCiAgICAgICAgICAgICAgIj48L2Rpdj4iOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoR2FtZS5kcmFnb25MZXZlbCA+PSAyNikgew0KICAgICAgICAgICAgLy8ybmQgYXVyYSBzbG90OyBpbmNyZWFzZWQgd2l0aCBsYXN0IGJ1aWxkaW5nIChjb3J0ZXggYmFrZXIpDQogICAgICAgICAgICB2YXIgaWNvbiA9IEdhbWUuZHJhZ29uQXVyYXNbR2FtZS5kcmFnb25BdXJhMl0ucGljOw0KICAgICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJjcmF0ZSBlbmFibGVkIiBzdHlsZT0ib3BhY2l0eToxO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjgwcHg7dG9wOi01OHB4OycgKw0KICAgICAgICAgICAgICB3cml0ZUljb24oaWNvbikgKw0KICAgICAgICAgICAgICAnIiAnICsNCiAgICAgICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgICAgICI9XCJQbGF5U291bmQoJ3NuZC90aWNrLm1wMycpO0dhbWUuU2VsZWN0RHJhZ29uQXVyYSgxKTtcIiAiICsNCiAgICAgICAgICAgICAgR2FtZS5nZXRUb29sdGlwKA0KICAgICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJtaW4td2lkdGg6MjAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7IiBpZD0idG9vbHRpcERyYWdvbkF1cmFTZWxlY3QyIj48aDQ+JyArDQogICAgICAgICAgICAgICAgICBHYW1lLmRyYWdvbkF1cmFzW0dhbWUuZHJhZ29uQXVyYTJdLmRuYW1lICsNCiAgICAgICAgICAgICAgICAgICI8L2g0PiIgKw0KICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICAgICAgR2FtZS5kcmFnb25BdXJhc1tHYW1lLmRyYWdvbkF1cmEyXS5kZXNjICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iLA0KICAgICAgICAgICAgICAgICJ0b3AiDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiPjwvZGl2PiI7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKEdhbWUuZHJhZ29uTGV2ZWwgPCBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICBzdHIgKz0NCiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2PicgKw0KICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ib3B0aW9uQm94IiBzdHlsZT0ibWFyZ2luLWJvdHRvbTowcHg7Ij48YSBjbGFzcz0ib3B0aW9uIGZyYW1lZCBsYXJnZSB0aXRsZSIgJyArDQogICAgICAgICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAgICAgICAnPSJHYW1lLlVwZ3JhZGVEcmFnb24oKTsiPicgKw0KICAgICAgICAgICAgICAnPGRpdiBzdHlsZT0iZGlzcGxheTp0YWJsZS1jZWxsO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPicgKw0KICAgICAgICAgICAgICBsZXZlbC5hY3Rpb24gKw0KICAgICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlO3BhZGRpbmc6NHB4IDEycHg7Ij58PC9kaXY+JyArDQogICAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OnRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTo2NSU7Ij4nICsNCiAgICAgICAgICAgICAgbG9jKA0KICAgICAgICAgICAgICAgICJzYWNyaWZpY2UgJTEiLA0KICAgICAgICAgICAgICAgICI8ZGl2IiArDQogICAgICAgICAgICAgICAgICAobGV2ZWwuY29zdCgpID8gIiIgOiAnIHN0eWxlPSJjb2xvcjojNzc3OyInKSArDQogICAgICAgICAgICAgICAgICAiPiIgKw0KICAgICAgICAgICAgICAgICAgbGV2ZWwuY29zdFN0cigpICsNCiAgICAgICAgICAgICAgICAgICI8L2Rpdj4iDQogICAgICAgICAgICAgICkgKw0KICAgICAgICAgICAgICAiPC9kaXY+IiArDQogICAgICAgICAgICAgICI8L2E+PC9kaXY+IjsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc3RyICs9DQogICAgICAgICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIj48L2Rpdj4nICsNCiAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO21hcmdpbi1ib3R0b206NHB4OyI+JyArDQogICAgICAgICAgICAgIGxldmVsLmFjdGlvbiArDQogICAgICAgICAgICAgICI8L2Rpdj4iOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGwoInNwZWNpYWxQb3B1cCIpLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgICBsKCJzcGVjaWFsUG9wdXAiKS5jbGFzc05hbWUgPSAiZnJhbWVkIHByb21wdCBvblNjcmVlbiI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFiICE9ICIiKSB7DQogICAgICAgICAgR2FtZS5zcGVjaWFsVGFiID0gIiI7DQogICAgICAgICAgbCgic3BlY2lhbFBvcHVwIikuY2xhc3NOYW1lID0gImZyYW1lZCBwcm9tcHQgb2ZmU2NyZWVuIjsNCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmIChHYW1lLnNwZWNpYWxUYWIgPT0gIiIpIHsNCiAgICAgICAgICAgICAgLypsKCdzcGVjaWFsUG9wdXAnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsqLyBsKA0KICAgICAgICAgICAgICAgICJzcGVjaWFsUG9wdXAiDQogICAgICAgICAgICAgICkuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwgMTAwMCAqIDAuMik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIEdhbWUuRHJhd1NwZWNpYWwgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgbGVuID0gR2FtZS5zcGVjaWFsVGFicy5sZW5ndGg7DQogICAgICBpZiAobGVuID09IDApIHJldHVybjsNCiAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQuZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgdmFyIHkgPSBHYW1lLkxlZnRCYWNrZ3JvdW5kLmNhbnZhcy5oZWlnaHQgLSAyNCAtIDQ4ICogbGVuOw0KICAgICAgdmFyIHRhYkkgPSAwOw0KDQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuc3BlY2lhbFRhYnMpIHsNCiAgICAgICAgdmFyIHNlbGVjdGVkID0gMDsNCiAgICAgICAgdmFyIGhvdmVyZWQgPSAwOw0KICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFiID09IEdhbWUuc3BlY2lhbFRhYnNbaV0pIHNlbGVjdGVkID0gMTsNCiAgICAgICAgaWYgKEdhbWUuc3BlY2lhbFRhYkhvdmVyZWQgPT0gR2FtZS5zcGVjaWFsVGFic1tpXSkgaG92ZXJlZCA9IDE7DQogICAgICAgIHZhciB4ID0gMjQ7DQogICAgICAgIHZhciBzID0gMTsNCiAgICAgICAgdmFyIHBpYyA9ICIiOw0KICAgICAgICB2YXIgZnJhbWUgPSAwOw0KICAgICAgICBpZiAoaG92ZXJlZCkgew0KICAgICAgICAgIHMgPSAxOw0KICAgICAgICAgIHggPSAyNDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgICBzID0gMTsNCiAgICAgICAgICB4ID0gNDg7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5zcGVjaWFsVGFic1tpXSA9PSAic2FudGEiKSB7DQogICAgICAgICAgcGljID0gInNhbnRhLnBuZyI7DQogICAgICAgICAgZnJhbWUgPSBHYW1lLnNhbnRhTGV2ZWw7DQogICAgICAgIH0gZWxzZSBpZiAoR2FtZS5zcGVjaWFsVGFic1tpXSA9PSAiZHJhZ29uIikgew0KICAgICAgICAgIHBpYyA9ICJkcmFnb24ucG5nP3Y9IiArIEdhbWUudmVyc2lvbjsNCiAgICAgICAgICBmcmFtZSA9IEdhbWUuZHJhZ29uTGV2ZWxzW0dhbWUuZHJhZ29uTGV2ZWxdLnBpYzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBwaWMgPSAiZHJhZ29uLnBuZz92PSIgKyBHYW1lLnZlcnNpb247DQogICAgICAgICAgZnJhbWUgPSA0Ow0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGhvdmVyZWQgfHwgc2VsZWN0ZWQpIHsNCiAgICAgICAgICB2YXIgc3MgPSBzICogNjQ7DQogICAgICAgICAgdmFyIHIgPSBNYXRoLmZsb29yKChHYW1lLlQgKiAwLjUpICUgMzYwKTsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLnNhdmUoKTsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLnRyYW5zbGF0ZSh4LCB5KTsNCiAgICAgICAgICBpZiAoR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQucm90YXRlKChyIC8gMzYwKSAqIE1hdGguUEkgKiAyKTsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmdsb2JhbEFscGhhID0gMC43NTsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmRyYXdJbWFnZSgNCiAgICAgICAgICAgIFBpYygic2hpbmUucG5nIiksDQogICAgICAgICAgICAtc3MgLyAyLA0KICAgICAgICAgICAgLXNzIC8gMiwNCiAgICAgICAgICAgIHNzLA0KICAgICAgICAgICAgc3MNCiAgICAgICAgICApOw0KICAgICAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQucmVzdG9yZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUucHJlZnMuZmFuY3kpDQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5kcmF3SW1hZ2UoDQogICAgICAgICAgICBQaWMocGljKSwNCiAgICAgICAgICAgIDk2ICogZnJhbWUsDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgOTYsDQogICAgICAgICAgICA5NiwNCiAgICAgICAgICAgIHggKyAoc2VsZWN0ZWQgPyAwIDogTWF0aC5zaW4oR2FtZS5UICogMC4yICsgdGFiSSkgKiAzKSAtIDI0ICogcywNCiAgICAgICAgICAgIHkgLQ0KICAgICAgICAgICAgICAoc2VsZWN0ZWQgPyA2IDogTWF0aC5hYnMoTWF0aC5jb3MoR2FtZS5UICogMC4yICsgdGFiSSkpICogNikgLQ0KICAgICAgICAgICAgICAyNCAqIHMsDQogICAgICAgICAgICA0OCAqIHMsDQogICAgICAgICAgICA0OCAqIHMNCiAgICAgICAgICApOw0KICAgICAgICBlbHNlDQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5kcmF3SW1hZ2UoDQogICAgICAgICAgICBQaWMocGljKSwNCiAgICAgICAgICAgIDk2ICogZnJhbWUsDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgOTYsDQogICAgICAgICAgICA5NiwNCiAgICAgICAgICAgIHggLSAyNCAqIHMsDQogICAgICAgICAgICB5IC0gMjQgKiBzLA0KICAgICAgICAgICAgNDggKiBzLA0KICAgICAgICAgICAgNDggKiBzDQogICAgICAgICAgKTsNCg0KICAgICAgICB0YWJJKys7DQogICAgICAgIHkgKz0gNDg7DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlWSVNVQUwgRUZGRUNUUw0KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KDQogICAgR2FtZS5BbGxNaWxrcyA9IFsNCiAgICAgIHsgbmFtZTogIkF1dG9tYXRpYyIsIGljb246IFswLCA3XSwgdHlwZTogLTEsIHBpYzogIm1pbGtQbGFpbiIgfSwNCiAgICAgIHsgbmFtZTogIlBsYWluIG1pbGsiLCBpY29uOiBbMSwgOF0sIHR5cGU6IDAsIHBpYzogIm1pbGtQbGFpbiIgfSwNCiAgICAgIHsgbmFtZTogIkNob2NvbGF0ZSBtaWxrIiwgaWNvbjogWzIsIDhdLCB0eXBlOiAwLCBwaWM6ICJtaWxrQ2hvY29sYXRlIiB9LA0KICAgICAgeyBuYW1lOiAiUmFzcGJlcnJ5IG1pbGsiLCBpY29uOiBbMywgOF0sIHR5cGU6IDAsIHBpYzogIm1pbGtSYXNwYmVycnkiIH0sDQogICAgICB7IG5hbWU6ICJPcmFuZ2UgbWlsayIsIGljb246IFs0LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa09yYW5nZSIgfSwNCiAgICAgIHsgbmFtZTogIkNhcmFtZWwgbWlsayIsIGljb246IFs1LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa0NhcmFtZWwiIH0sDQogICAgICB7IG5hbWU6ICJCYW5hbmEgbWlsayIsIGljb246IFs2LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa0JhbmFuYSIgfSwNCiAgICAgIHsgbmFtZTogIkxpbWUgbWlsayIsIGljb246IFs3LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa0xpbWUiIH0sDQogICAgICB7IG5hbWU6ICJCbHVlYmVycnkgbWlsayIsIGljb246IFs4LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa0JsdWViZXJyeSIgfSwNCiAgICAgIHsgbmFtZTogIlN0cmF3YmVycnkgbWlsayIsIGljb246IFs5LCA4XSwgdHlwZTogMCwgcGljOiAibWlsa1N0cmF3YmVycnkiIH0sDQogICAgICB7IG5hbWU6ICJWYW5pbGxhIG1pbGsiLCBpY29uOiBbMTAsIDhdLCB0eXBlOiAwLCBwaWM6ICJtaWxrVmFuaWxsYSIgfSwNCiAgICAgIHsgbmFtZTogIlplYnJhIG1pbGsiLCBpY29uOiBbMTAsIDddLCB0eXBlOiAxLCBwaWM6ICJtaWxrWmVicmEiIH0sDQogICAgICB7IG5hbWU6ICJDb3NtaWMgbWlsayIsIGljb246IFs5LCA3XSwgdHlwZTogMSwgcGljOiAibWlsa1N0YXJzIiB9LA0KICAgICAgeyBuYW1lOiAiRmxhbWluZyBtaWxrIiwgaWNvbjogWzgsIDddLCB0eXBlOiAxLCBwaWM6ICJtaWxrRmlyZSIgfSwNCiAgICAgIHsgbmFtZTogIlNhbmd1aW5lIG1pbGsiLCBpY29uOiBbNywgN10sIHR5cGU6IDEsIHBpYzogIm1pbGtCbG9vZCIgfSwNCiAgICAgIHsgbmFtZTogIk1pZGFzIG1pbGsiLCBpY29uOiBbNiwgN10sIHR5cGU6IDEsIHBpYzogIm1pbGtHb2xkIiB9LA0KICAgICAgeyBuYW1lOiAiTWlkbmlnaHQgbWlsayIsIGljb246IFs1LCA3XSwgdHlwZTogMSwgcGljOiAibWlsa0JsYWNrIiB9LA0KICAgICAgew0KICAgICAgICBuYW1lOiAiR3JlZW4gaW5mZXJubyBtaWxrIiwNCiAgICAgICAgaWNvbjogWzQsIDddLA0KICAgICAgICB0eXBlOiAxLA0KICAgICAgICBwaWM6ICJtaWxrR3JlZW5GaXJlIiwNCiAgICAgIH0sDQogICAgICB7IG5hbWU6ICJGcm9zdGZpcmUgbWlsayIsIGljb246IFszLCA3XSwgdHlwZTogMSwgcGljOiAibWlsa0JsdWVGaXJlIiB9LA0KICAgICAgeyBuYW1lOiAiSG9uZXkgbWlsayIsIGljb246IFsyMSwgMjNdLCB0eXBlOiAwLCBwaWM6ICJtaWxrSG9uZXkiIH0sDQogICAgICB7IG5hbWU6ICJDb2ZmZWUgbWlsayIsIGljb246IFsyMiwgMjNdLCB0eXBlOiAwLCBwaWM6ICJtaWxrQ29mZmVlIiB9LA0KICAgICAgeyBuYW1lOiAiVGVhIG1pbGsiLCBpY29uOiBbMjMsIDIzXSwgdHlwZTogMCwgcGljOiAibWlsa1RlYSIgfSwNCiAgICAgIHsgbmFtZTogIkNvY29udXQgbWlsayIsIGljb246IFsyNCwgMjNdLCB0eXBlOiAwLCBwaWM6ICJtaWxrQ29jb251dCIgfSwNCiAgICAgIHsgbmFtZTogIkNoZXJyeSBtaWxrIiwgaWNvbjogWzI1LCAyM10sIHR5cGU6IDAsIHBpYzogIm1pbGtDaGVycnkiIH0sDQogICAgICB7IG5hbWU6ICJTb3kgbWlsayIsIGljb246IFsyNywgMjNdLCB0eXBlOiAxLCBwaWM6ICJtaWxrU295IiB9LA0KICAgICAgeyBuYW1lOiAiU3BpY2VkIG1pbGsiLCBpY29uOiBbMjYsIDIzXSwgdHlwZTogMCwgcGljOiAibWlsa1NwaWNlZCIgfSwNCiAgICAgIHsgbmFtZTogIk1hcGxlIG1pbGsiLCBpY29uOiBbMjgsIDIzXSwgdHlwZTogMCwgcGljOiAibWlsa01hcGxlIiB9LA0KICAgICAgeyBuYW1lOiAiTWludCBtaWxrIiwgaWNvbjogWzI5LCAyM10sIHR5cGU6IDAsIHBpYzogIm1pbGtNaW50IiB9LA0KICAgICAgeyBuYW1lOiAiTGljb3JpY2UgbWlsayIsIGljb246IFszMCwgMjNdLCB0eXBlOiAwLCBwaWM6ICJtaWxrTGljb3JpY2UiIH0sDQogICAgICB7IG5hbWU6ICJSb3NlIG1pbGsiLCBpY29uOiBbMzEsIDIzXSwgdHlwZTogMCwgcGljOiAibWlsa1Jvc2UiIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJEcmFnb25mcnVpdCBtaWxrIiwNCiAgICAgICAgaWNvbjogWzIxLCAyNF0sDQogICAgICAgIHR5cGU6IDAsDQogICAgICAgIHBpYzogIm1pbGtEcmFnb25mcnVpdCIsDQogICAgICB9LA0KICAgICAgeyBuYW1lOiAiTWVsb24gbWlsayIsIGljb246IFsyMiwgMjRdLCB0eXBlOiAwLCBwaWM6ICJtaWxrTWVsb24iIH0sDQogICAgICB7DQogICAgICAgIG5hbWU6ICJCbGFja2N1cnJhbnQgbWlsayIsDQogICAgICAgIGljb246IFsyMywgMjRdLA0KICAgICAgICB0eXBlOiAwLA0KICAgICAgICBwaWM6ICJtaWxrQmxhY2tjdXJyYW50IiwNCiAgICAgIH0sDQogICAgXTsNCg0KICAgIEdhbWUuTWlsa3MgPSBbXTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEdhbWUuQWxsTWlsa3MubGVuZ3RoOyBpKyspIHsNCiAgICAgIEdhbWUuQWxsTWlsa3NbaV0uYm5hbWUgPSBHYW1lLkFsbE1pbGtzW2ldLm5hbWU7DQogICAgICBHYW1lLkFsbE1pbGtzW2ldLm5hbWUgPSBsb2MoR2FtZS5BbGxNaWxrc1tpXS5uYW1lKTsNCiAgICAgIEdhbWUuQWxsTWlsa3NbaV0ucGljICs9ICIucG5nIjsNCiAgICAgIGlmIChHYW1lLkFsbE1pbGtzW2ldLnR5cGUgPT0gMCkgew0KICAgICAgICBHYW1lLkFsbE1pbGtzW2ldLnJhbmsgPSBHYW1lLk1pbGtzLmxlbmd0aDsNCiAgICAgICAgR2FtZS5NaWxrcy5wdXNoKEdhbWUuQWxsTWlsa3NbaV0pOw0KICAgICAgfQ0KICAgIH0NCiAgICBHYW1lLk1pbGsgPSBHYW1lLk1pbGtzWzBdOw0KDQogICAgR2FtZS5tb3VzZVBvaW50ZXIgPSAwOyAvL3doZW4gMSwgZHJhdyB0aGUgbW91c2UgYXMgYSBwb2ludGVyIG9uIHRoZSBsZWZ0IHNjcmVlbg0KDQogICAgR2FtZS5jb29raWVPcmlnaW5YID0gMDsNCiAgICBHYW1lLmNvb2tpZU9yaWdpblkgPSAwOw0KICAgIEdhbWUuRHJhd0JhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBUaW1lci5jbGVhbigpOw0KICAgICAgLy9iYWNrZ3JvdW5kDQogICAgICBpZiAoIUdhbWUuQmFja2dyb3VuZCkgew0KICAgICAgICAvL2luaXQgc29tZSBzdHVmZg0KICAgICAgICBHYW1lLkJhY2tncm91bmQgPSBsKCJiYWNrZ3JvdW5kQ2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKTsNCiAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy53aWR0aCA9DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy5wYXJlbnROb2RlLm9mZnNldFdpZHRoOw0KICAgICAgICBHYW1lLkJhY2tncm91bmQuY2FudmFzLmhlaWdodCA9DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy5wYXJlbnROb2RlLm9mZnNldEhlaWdodDsNCiAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZCA9IGwoImJhY2tncm91bmRMZWZ0Q2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKTsNCiAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMud2lkdGggPQ0KICAgICAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQuY2FudmFzLnBhcmVudE5vZGUub2Zmc2V0V2lkdGg7DQogICAgICAgIEdhbWUuTGVmdEJhY2tncm91bmQuY2FudmFzLmhlaWdodCA9DQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7DQogICAgICAgIC8vcHJlbG9hZCBhc2NlbmQgYW5pbWF0aW9uIGJpdHMgc28gdGhleSBzaG93IHVwIGluc3RhbnRseQ0KICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmdsb2JhbEFscGhhID0gMDsNCiAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5kcmF3SW1hZ2UoUGljKCJicm9rZW5Db29raWUucG5nIiksIDAsIDApOw0KICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmRyYXdJbWFnZShQaWMoImJyb2tlbkNvb2tpZUhhbG8ucG5nIiksIDAsIDApOw0KICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmRyYXdJbWFnZShQaWMoInN0YXJiZy5qcGciKSwgMCwgMCk7DQoNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMud2lkdGggPQ0KICAgICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy5wYXJlbnROb2RlLm9mZnNldFdpZHRoOw0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0ID0NCiAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7DQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMud2lkdGggPQ0KICAgICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMucGFyZW50Tm9kZS5vZmZzZXRXaWR0aDsNCiAgICAgICAgICBHYW1lLkxlZnRCYWNrZ3JvdW5kLmNhbnZhcy5oZWlnaHQgPQ0KICAgICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7DQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICB2YXIgY3R4ID0gR2FtZS5MZWZ0QmFja2dyb3VuZDsNCg0KICAgICAgaWYgKEdhbWUuT25Bc2NlbmQpIHsNCiAgICAgICAgVGltZXIuY2xlYW4oKTsNCiAgICAgICAgLy9zdGFycnkgYmFja2dyb3VuZCBvbiBhc2NlbmQgc2NyZWVuDQogICAgICAgIHZhciB3ID0gR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy53aWR0aDsNCiAgICAgICAgdmFyIGggPSBHYW1lLkJhY2tncm91bmQuY2FudmFzLmhlaWdodDsNCiAgICAgICAgdmFyIGIgPSBHYW1lLmFzY2VuZGwuZ2V0Qm91bmRzKCk7DQogICAgICAgIHZhciB4ID0gKGIubGVmdCArIGIucmlnaHQpIC8gMjsNCiAgICAgICAgdmFyIHkgPSAoYi50b3AgKyBiLmJvdHRvbSkgLyAyOw0KICAgICAgICBHYW1lLkJhY2tncm91bmQuZ2xvYmFsQWxwaGEgPSAwLjU7DQogICAgICAgIHZhciBzID0gMSAqIEdhbWUuQXNjZW5kWm9vbSAqICgxICsgTWF0aC5jb3MoR2FtZS5UICogMC4wMDI3KSAqIDAuMDUpOw0KICAgICAgICBHYW1lLkJhY2tncm91bmQuZmlsbFBhdHRlcm4oDQogICAgICAgICAgUGljKCJzdGFyYmcuanBnIiksDQogICAgICAgICAgMCwNCiAgICAgICAgICAwLA0KICAgICAgICAgIHcsDQogICAgICAgICAgaCwNCiAgICAgICAgICAxMDI0ICogcywNCiAgICAgICAgICAxMDI0ICogcywNCiAgICAgICAgICB4ICsgR2FtZS5Bc2NlbmRPZmZYICogMC4yNSAqIHMsDQogICAgICAgICAgeSArIEdhbWUuQXNjZW5kT2ZmWSAqIDAuMjUgKiBzDQogICAgICAgICk7DQogICAgICAgIFRpbWVyLnRyYWNrKCJzdGFyIGxheWVyIDEiKTsNCiAgICAgICAgaWYgKEdhbWUucHJlZnMuZmFuY3kpIHsNCiAgICAgICAgICAvL2FkZGl0aW9uYWwgc3RhciBsYXllcg0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5nbG9iYWxBbHBoYSA9DQogICAgICAgICAgICAwLjUgKiAoMC41ICsgTWF0aC5zaW4oR2FtZS5UICogMC4wMikgKiAwLjMpOw0KICAgICAgICAgIHZhciBzID0gMiAqIEdhbWUuQXNjZW5kWm9vbSAqICgxICsgTWF0aC5zaW4oR2FtZS5UICogMC4wMDIpICogMC4wNyk7DQogICAgICAgICAgLy9HYW1lLkJhY2tncm91bmQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSdsaWdodGVyJzsNCiAgICAgICAgICBHYW1lLkJhY2tncm91bmQuZmlsbFBhdHRlcm4oDQogICAgICAgICAgICBQaWMoInN0YXJiZy5qcGciKSwNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgdywNCiAgICAgICAgICAgIGgsDQogICAgICAgICAgICAxMDI0ICogcywNCiAgICAgICAgICAgIDEwMjQgKiBzLA0KICAgICAgICAgICAgeCArIEdhbWUuQXNjZW5kT2ZmWCAqIDAuMjUgKiBzLA0KICAgICAgICAgICAgeSArIEdhbWUuQXNjZW5kT2ZmWSAqIDAuMjUgKiBzDQogICAgICAgICAgKTsNCiAgICAgICAgICAvL0dhbWUuQmFja2dyb3VuZC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249J3NvdXJjZS1vdmVyJzsNCiAgICAgICAgICBUaW1lci50cmFjaygic3RhciBsYXllciAyIik7DQoNCiAgICAgICAgICB4ID0geCArIEdhbWUuQXNjZW5kT2ZmWCAqIEdhbWUuQXNjZW5kWm9vbTsNCiAgICAgICAgICB5ID0geSArIEdhbWUuQXNjZW5kT2ZmWSAqIEdhbWUuQXNjZW5kWm9vbTsNCiAgICAgICAgICAvL3dpc3B5IG5lYnVsYSBhcm91bmQgdGhlIGNlbnRlcg0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5zYXZlKCk7DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmdsb2JhbEFscGhhID0gMC41Ow0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC50cmFuc2xhdGUoeCwgeSk7DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJsaWdodGVyIjsNCiAgICAgICAgICBHYW1lLkJhY2tncm91bmQucm90YXRlKEdhbWUuVCAqIDAuMDAxKTsNCiAgICAgICAgICBzID0gKDYwMCArIDE1MCAqIE1hdGguc2luKEdhbWUuVCAqIDAuMDA3KSkgKiBHYW1lLkFzY2VuZFpvb207DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmRyYXdJbWFnZSgNCiAgICAgICAgICAgIFBpYygiaGVhdmVuUmluZzEuanBnIiksDQogICAgICAgICAgICAtcyAvIDIsDQogICAgICAgICAgICAtcyAvIDIsDQogICAgICAgICAgICBzLA0KICAgICAgICAgICAgcw0KICAgICAgICAgICk7DQogICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLnJvdGF0ZSgtR2FtZS5UICogMC4wMDE3KTsNCiAgICAgICAgICBzID0gKDYwMCArIDE1MCAqIE1hdGguc2luKEdhbWUuVCAqIDAuMDAzNykpICogR2FtZS5Bc2NlbmRab29tOw0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5kcmF3SW1hZ2UoDQogICAgICAgICAgICBQaWMoImhlYXZlblJpbmcyLmpwZyIpLA0KICAgICAgICAgICAgLXMgLyAyLA0KICAgICAgICAgICAgLXMgLyAyLA0KICAgICAgICAgICAgcywNCiAgICAgICAgICAgIHMNCiAgICAgICAgICApOw0KICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5yZXN0b3JlKCk7DQogICAgICAgICAgVGltZXIudHJhY2soIm5lYnVsYSIpOw0KDQogICAgICAgICAgLy9HYW1lLkJhY2tncm91bmQuZHJhd0ltYWdlKFBpYygnc2hhZGVkQm9yZGVycy5wbmcnKSwwLDAsdyxoKTsNCiAgICAgICAgICAvL1RpbWVyLnRyYWNrKCdib3JkZXInKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdmFyIGdvb2RCdWZmID0gMDsNCiAgICAgICAgdmFyIGJhZEJ1ZmYgPSAwOw0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuYnVmZnMpIHsNCiAgICAgICAgICBpZiAoR2FtZS5idWZmc1tpXS5hdXJhID09IDEpIGdvb2RCdWZmID0gMTsNCiAgICAgICAgICBpZiAoR2FtZS5idWZmc1tpXS5hdXJhID09IDIpIGJhZEJ1ZmYgPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuZHJhd1QgJSA1ID09IDApIHsNCiAgICAgICAgICBpZiAoZmFsc2UgJiYgR2FtZS5iZ1R5cGUgIT0gMCAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgew0KICAgICAgICAgICAgLy9sKCdiYWNrZ3JvdW5kQ2FudmFzJykuc3R5bGUuYmFja2dyb3VuZD0ndXJsKGltZy9zaGFkZWRCb3JkZXJzU29mdC5wbmcpIDBweCAwcHgsdXJsKGltZy9iZ1doZWF0LmpwZykgNTAlIDUwJSc7DQogICAgICAgICAgICAvL2woJ2JhY2tncm91bmRDYW52YXMnKS5zdHlsZS5iYWNrZ3JvdW5kU2l6ZT0nMTAwJSAxMDAlLGNvdmVyJzsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbCgiYmFja2dyb3VuZENhbnZhcyIpLnN0eWxlLmJhY2tncm91bmQgPSAidHJhbnNwYXJlbnQiOw0KICAgICAgICAgICAgR2FtZS5kZWZhdWx0QmcgPSAiYmdCbHVlIjsNCiAgICAgICAgICAgIEdhbWUuYmdSID0gMDsNCg0KICAgICAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJmb29scyIpIEdhbWUuZGVmYXVsdEJnID0gImJnTW9uZXkiOw0KICAgICAgICAgICAgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPCAxIHx8IEdhbWUucHJlZnMubm90U2NhcnkpIHsNCiAgICAgICAgICAgICAgR2FtZS5iZ1IgPSAwOw0KICAgICAgICAgICAgICBHYW1lLmJnID0gR2FtZS5kZWZhdWx0Qmc7DQogICAgICAgICAgICAgIEdhbWUuYmdGYWRlID0gR2FtZS5kZWZhdWx0Qmc7DQogICAgICAgICAgICB9IGVsc2UgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPj0gMSAmJiBHYW1lLmVsZGVyV3JhdGhEIDwgMikgew0KICAgICAgICAgICAgICBHYW1lLmJnUiA9IChHYW1lLmVsZGVyV3JhdGhEIC0gMSkgLyAxOw0KICAgICAgICAgICAgICBHYW1lLmJnID0gR2FtZS5kZWZhdWx0Qmc7DQogICAgICAgICAgICAgIEdhbWUuYmdGYWRlID0gImdyYW5kbWFzMSI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPj0gMiAmJiBHYW1lLmVsZGVyV3JhdGhEIDwgMykgew0KICAgICAgICAgICAgICBHYW1lLmJnUiA9IChHYW1lLmVsZGVyV3JhdGhEIC0gMikgLyAxOw0KICAgICAgICAgICAgICBHYW1lLmJnID0gImdyYW5kbWFzMSI7DQogICAgICAgICAgICAgIEdhbWUuYmdGYWRlID0gImdyYW5kbWFzMiI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPj0gMykgew0KICAgICAgICAgICAgICAvLyAmJiBHYW1lLmVsZGVyV3JhdGhEPDQpDQogICAgICAgICAgICAgIEdhbWUuYmdSID0gKEdhbWUuZWxkZXJXcmF0aEQgLSAzKSAvIDE7DQogICAgICAgICAgICAgIEdhbWUuYmcgPSAiZ3JhbmRtYXMyIjsNCiAgICAgICAgICAgICAgR2FtZS5iZ0ZhZGUgPSAiZ3JhbmRtYXMzIjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKEdhbWUuYmdUeXBlICE9IDAgJiYgR2FtZS5hc2NlbnNpb25Nb2RlICE9IDEpIHsNCiAgICAgICAgICAgICAgR2FtZS5iZ1IgPSAwOw0KICAgICAgICAgICAgICBHYW1lLmJnID0gR2FtZS5CR3NCeUNob2ljZVtHYW1lLmJnVHlwZV0ucGljOw0KICAgICAgICAgICAgICBHYW1lLmJnRmFkZSA9IEdhbWUuYmc7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5maWxsUGF0dGVybigNCiAgICAgICAgICAgICAgUGljKEdhbWUuYmcgKyAiLmpwZyIpLA0KICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICBHYW1lLkJhY2tncm91bmQuY2FudmFzLndpZHRoLA0KICAgICAgICAgICAgICBHYW1lLkJhY2tncm91bmQuY2FudmFzLmhlaWdodCwNCiAgICAgICAgICAgICAgNTEyLA0KICAgICAgICAgICAgICA1MTIsDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIDANCiAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoR2FtZS5iZ1IgPiAwKSB7DQogICAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5nbG9iYWxBbHBoYSA9IEdhbWUuYmdSOw0KICAgICAgICAgICAgICBHYW1lLkJhY2tncm91bmQuZmlsbFBhdHRlcm4oDQogICAgICAgICAgICAgICAgUGljKEdhbWUuYmdGYWRlICsgIi5qcGciKSwNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmNhbnZhcy53aWR0aCwNCiAgICAgICAgICAgICAgICBHYW1lLkJhY2tncm91bmQuY2FudmFzLmhlaWdodCwNCiAgICAgICAgICAgICAgICA1MTIsDQogICAgICAgICAgICAgICAgNTEyLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgMA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgR2FtZS5CYWNrZ3JvdW5kLmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5kcmF3SW1hZ2UoDQogICAgICAgICAgICAgIFBpYygic2hhZGVkQm9yZGVyc1NvZnQucG5nIiksDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMud2lkdGgsDQogICAgICAgICAgICAgIEdhbWUuQmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0DQogICAgICAgICAgICApOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBUaW1lci50cmFjaygid2luZG93IGJhY2tncm91bmQiKTsNCg0KICAgICAgICAvL2NsZWFyDQogICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpOw0KICAgICAgICAvKmlmIChHYW1lLkFzY2VuZFRpbWVyPEdhbWUuQXNjZW5kQnJlYWtwb2ludCkgY3R4LmNsZWFyUmVjdCgwLDAsY3R4LmNhbnZhcy53aWR0aCxjdHguY2FudmFzLmhlaWdodCk7DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJY3R4Lmdsb2JhbEFscGhhPTAuMDU7DQoJCQkJCWN0eC5maWxsU3R5bGU9JyMwMDAnOw0KCQkJCQljdHguZmlsbFJlY3QoMCwwLGN0eC5jYW52YXMud2lkdGgsY3R4LmNhbnZhcy5oZWlnaHQpOw0KCQkJCQljdHguZ2xvYmFsQWxwaGE9MTsNCgkJCQkJT2xkQ2FudmFzRHJhd0ltYWdlLmFwcGx5KGN0eCxbY3R4LmNhbnZhcyxNYXRoLnJhbmRvbSgpKjQtMixNYXRoLnJhbmRvbSgpKjQtMi00XSk7DQoJCQkJCWN0eC5nbG9iYWxBbHBoYT0xOw0KCQkJCX0qLw0KICAgICAgICBUaW1lci5jbGVhbigpOw0KDQogICAgICAgIHZhciBzaG93RHJhZ29uID0gMDsNCiAgICAgICAgaWYgKEdhbWUuaGFzQnVmZigiRHJhZ29uZmxpZ2h0IikgfHwgR2FtZS5oYXNCdWZmKCJEcmFnb24gSGFydmVzdCIpKQ0KICAgICAgICAgIHNob3dEcmFnb24gPSAxOw0KDQogICAgICAgIEdhbWUuY29va2llT3JpZ2luWCA9IE1hdGguZmxvb3IoY3R4LmNhbnZhcy53aWR0aCAvIDIpOw0KICAgICAgICBHYW1lLmNvb2tpZU9yaWdpblkgPSBNYXRoLmZsb29yKGN0eC5jYW52YXMuaGVpZ2h0ICogMC40KTsNCg0KICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA9PSAwKSB7DQogICAgICAgICAgaWYgKEdhbWUucHJlZnMucGFydGljbGVzKSB7DQogICAgICAgICAgICAvL2ZhbGxpbmcgY29va2llcw0KICAgICAgICAgICAgdmFyIHBpYyA9ICIiOw0KICAgICAgICAgICAgdmFyIG9wYWNpdHkgPSAxOw0KICAgICAgICAgICAgaWYgKEdhbWUuZWxkZXJXcmF0aEQgPD0gMS41IHx8IEdhbWUucHJlZnMubm90U2NhcnkpIHsNCiAgICAgICAgICAgICAgaWYgKEdhbWUuY29va2llc1BzID49IDEwMDApIHBpYyA9ICJjb29raWVTaG93ZXIzLnBuZyI7DQogICAgICAgICAgICAgIGVsc2UgaWYgKEdhbWUuY29va2llc1BzID49IDUwMCkgcGljID0gImNvb2tpZVNob3dlcjIucG5nIjsNCiAgICAgICAgICAgICAgZWxzZSBpZiAoR2FtZS5jb29raWVzUHMgPj0gNTApIHBpYyA9ICJjb29raWVTaG93ZXIxLnBuZyI7DQogICAgICAgICAgICAgIGVsc2UgcGljID0gIiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAocGljICE9ICIiKSB7DQogICAgICAgICAgICAgIGlmIChHYW1lLmVsZGVyV3JhdGhEID49IDEgJiYgIUdhbWUucHJlZnMubm90U2NhcnkpDQogICAgICAgICAgICAgICAgb3BhY2l0eSA9IDEgLSAoTWF0aC5taW4oR2FtZS5lbGRlcldyYXRoRCwgMS41KSAtIDEpIC8gMC41Ow0KICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBvcGFjaXR5Ow0KICAgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoR2FtZS5UICogMikgJSA1MTI7DQogICAgICAgICAgICAgIGN0eC5maWxsUGF0dGVybigNCiAgICAgICAgICAgICAgICBQaWMocGljKSwNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgY3R4LmNhbnZhcy53aWR0aCwNCiAgICAgICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCArIDUxMiwNCiAgICAgICAgICAgICAgICA1MTIsDQogICAgICAgICAgICAgICAgNTEyLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgeQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy9zbm93DQogICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImNocmlzdG1hcyIpIHsNCiAgICAgICAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKEdhbWUuVCAqIDIuNSkgJSA1MTI7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNzU7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAibGlnaHRlciI7DQogICAgICAgICAgICAgIGN0eC5maWxsUGF0dGVybigNCiAgICAgICAgICAgICAgICBQaWMoInNub3cyLmpwZyIpLA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICBjdHguY2FudmFzLndpZHRoLA0KICAgICAgICAgICAgICAgIGN0eC5jYW52YXMuaGVpZ2h0ICsgNTEyLA0KICAgICAgICAgICAgICAgIDUxMiwNCiAgICAgICAgICAgICAgICA1MTIsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICB5DQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAic291cmNlLW92ZXIiOw0KICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy9oZWFydHMNCiAgICAgICAgICAgIGlmIChHYW1lLnNlYXNvbiA9PSAidmFsZW50aW5lcyIpIHsNCiAgICAgICAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKEdhbWUuVCAqIDIuNSkgJSA1MTI7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQogICAgICAgICAgICAgIGN0eC5maWxsUGF0dGVybigNCiAgICAgICAgICAgICAgICBQaWMoImhlYXJ0U3Rvcm0ucG5nIiksDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgIGN0eC5jYW52YXMud2lkdGgsDQogICAgICAgICAgICAgICAgY3R4LmNhbnZhcy5oZWlnaHQgKyA1MTIsDQogICAgICAgICAgICAgICAgNTEyLA0KICAgICAgICAgICAgICAgIDUxMiwNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAgIHkNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIFRpbWVyLnRyYWNrKCJsZWZ0IGJhY2tncm91bmQiKTsNCg0KICAgICAgICAgICAgR2FtZS5wYXJ0aWNsZXNEcmF3KDApOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIFRpbWVyLnRyYWNrKCJwYXJ0aWNsZXMiKTsNCg0KICAgICAgICAgICAgLy9iaWcgY29va2llIHNoaW5lDQogICAgICAgICAgICB2YXIgcyA9IDUxMjsNCg0KICAgICAgICAgICAgdmFyIHggPSBHYW1lLmNvb2tpZU9yaWdpblg7DQogICAgICAgICAgICB2YXIgeSA9IEdhbWUuY29va2llT3JpZ2luWTsNCg0KICAgICAgICAgICAgdmFyIHIgPSBNYXRoLmZsb29yKChHYW1lLlQgKiAwLjUpICUgMzYwKTsNCiAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpOw0KICAgICAgICAgICAgY3R4LnJvdGF0ZSgociAvIDM2MCkgKiBNYXRoLlBJICogMik7DQogICAgICAgICAgICB2YXIgYWxwaGFNdWx0ID0gMTsNCiAgICAgICAgICAgIGlmIChHYW1lLmJnVHlwZSA9PSAyIHx8IEdhbWUuYmdUeXBlID09IDQpIGFscGhhTXVsdCA9IDAuNTsNCiAgICAgICAgICAgIHZhciBwaWMgPSAic2hpbmUucG5nIjsNCiAgICAgICAgICAgIGlmIChnb29kQnVmZikgew0KICAgICAgICAgICAgICBwaWMgPSAic2hpbmVHb2xkLnBuZyI7DQogICAgICAgICAgICAgIGFscGhhTXVsdCA9IDE7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGJhZEJ1ZmYpIHsNCiAgICAgICAgICAgICAgcGljID0gInNoaW5lUmVkLnBuZyI7DQogICAgICAgICAgICAgIGFscGhhTXVsdCA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZ29vZEJ1ZmYgJiYgR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJsaWdodGVyIjsNCiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNSAqIGFscGhhTXVsdDsNCiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKHBpYyksIC1zIC8gMiwgLXMgLyAyLCBzLCBzKTsNCiAgICAgICAgICAgIGN0eC5yb3RhdGUoKCgtciAqIDIpIC8gMzYwKSAqIE1hdGguUEkgKiAyKTsNCiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMjUgKiBhbHBoYU11bHQ7DQogICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYyhwaWMpLCAtcyAvIDIsIC1zIC8gMiwgcywgcyk7DQogICAgICAgICAgICBjdHgucmVzdG9yZSgpOw0KICAgICAgICAgICAgVGltZXIudHJhY2soInNoaW5lIik7DQoNCiAgICAgICAgICAgIGlmIChHYW1lLlJlaW5jYXJuYXRlVGltZXIgPiAwKSB7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9DQogICAgICAgICAgICAgICAgMSAtIEdhbWUuUmVpbmNhcm5hdGVUaW1lciAvIEdhbWUuUmVpbmNhcm5hdGVEdXJhdGlvbjsNCiAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjMDAwIjsNCiAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTsNCiAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHNob3dEcmFnb24pIHsNCiAgICAgICAgICAgICAgLy9iaWcgZHJhZ29uDQogICAgICAgICAgICAgIHZhciBzID0gMzAwICogMiAqICgxICsgTWF0aC5zaW4oR2FtZS5UICogMC4wMTMpICogMC4xKTsNCiAgICAgICAgICAgICAgdmFyIHggPSBHYW1lLmNvb2tpZU9yaWdpblggLSBzIC8gMjsNCiAgICAgICAgICAgICAgdmFyIHkgPQ0KICAgICAgICAgICAgICAgIEdhbWUuY29va2llT3JpZ2luWSAtIHMgLyAoMS40ICsgMC4yICogTWF0aC5zaW4oR2FtZS5UICogMC4wMSkpOw0KICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYygiZHJhZ29uQkcucG5nIiksIHgsIHksIHMsIHMpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvL2JpZyBjb29raWUNCiAgICAgICAgICAgIGlmIChmYWxzZSkgew0KICAgICAgICAgICAgICAvL2Rvbid0IGRvIHRoYXQNCiAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgICAgdmFyIGFtb3VudCA9IE1hdGguZmxvb3IoR2FtZS5jb29raWVzKS50b1N0cmluZygpOw0KICAgICAgICAgICAgICB2YXIgZGlnaXRzID0gYW1vdW50Lmxlbmd0aDsNCiAgICAgICAgICAgICAgdmFyIHNwYWNlID0gMDsNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaWdpdHM7IGkrKykgew0KICAgICAgICAgICAgICAgIHZhciBzID0gMTYgKiAoZGlnaXRzIC0gaSk7DQogICAgICAgICAgICAgICAgdmFyIG51bSA9IHBhcnNlSW50KGFtb3VudFtpXSk7DQogICAgICAgICAgICAgICAgaWYgKGkgPiAwKSBzcGFjZSAtPSAocyAqICgxIC0gbnVtIC8gMTApKSAvIDI7DQogICAgICAgICAgICAgICAgaWYgKGkgPT0gMCAmJiBudW0gPiAxKSBzcGFjZSArPSBzICogMC4xOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBudW07IGlpKyspIHsNCiAgICAgICAgICAgICAgICAgIHZhciB4ID0gR2FtZS5jb29raWVPcmlnaW5YOw0KICAgICAgICAgICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblk7DQogICAgICAgICAgICAgICAgICB2YXIgc3BpbiA9DQogICAgICAgICAgICAgICAgICAgIEdhbWUuVCAqICgwLjAwNSArIGkgKiAwLjAwMSkgKyBpICsgKGlpIC8gbnVtKSAqIE1hdGguUEkgKiAyOw0KICAgICAgICAgICAgICAgICAgeCArPSBNYXRoLnNpbihzcGluKSAqIHNwYWNlOw0KICAgICAgICAgICAgICAgICAgeSArPSBNYXRoLmNvcyhzcGluKSAqIHNwYWNlOw0KICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgICAgUGljKCJwZXJmZWN0Q29va2llLnBuZyIpLA0KICAgICAgICAgICAgICAgICAgICB4IC0gcyAvIDIsDQogICAgICAgICAgICAgICAgICAgIHkgLSBzIC8gMiwNCiAgICAgICAgICAgICAgICAgICAgcywNCiAgICAgICAgICAgICAgICAgICAgcw0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3BhY2UgKz0gcyAvIDI7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQogICAgICAgICAgICAgIHZhciBzID0gMjU2ICogR2FtZS5CaWdDb29raWVTaXplOw0KICAgICAgICAgICAgICB2YXIgeCA9IEdhbWUuY29va2llT3JpZ2luWDsNCiAgICAgICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblk7DQogICAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KQ0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoDQogICAgICAgICAgICAgICAgICBQaWMoImNvb2tpZVNoYWRvdy5wbmciKSwNCiAgICAgICAgICAgICAgICAgIHggLSBzIC8gMiwNCiAgICAgICAgICAgICAgICAgIHkgLSBzIC8gMiArIDIwLA0KICAgICAgICAgICAgICAgICAgcywNCiAgICAgICAgICAgICAgICAgIHMNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpOw0KICAgICAgICAgICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImVhc3RlciIpIHsNCiAgICAgICAgICAgICAgICB2YXIgbmVzdFcgPSAzMDQgKiAwLjk4ICogR2FtZS5CaWdDb29raWVTaXplOw0KICAgICAgICAgICAgICAgIHZhciBuZXN0SCA9IDE2MSAqIDAuOTggKiBHYW1lLkJpZ0Nvb2tpZVNpemU7DQogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgIFBpYygibmVzdC5wbmciKSwNCiAgICAgICAgICAgICAgICAgIC1uZXN0VyAvIDIsDQogICAgICAgICAgICAgICAgICAtbmVzdEggLyAyICsgMTMwLA0KICAgICAgICAgICAgICAgICAgbmVzdFcsDQogICAgICAgICAgICAgICAgICBuZXN0SA0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLy9jdHgucm90YXRlKCgoR2FtZS5zdGFydERhdGUlMzYwKS8zNjApKk1hdGguUEkqMik7DQogICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKCJwZXJmZWN0Q29va2llLnBuZyIpLCAtcyAvIDIsIC1zIC8gMiwgcywgcyk7DQoNCiAgICAgICAgICAgICAgaWYgKGdvb2RCdWZmICYmIEdhbWUucHJlZnMucGFydGljbGVzKSB7DQogICAgICAgICAgICAgICAgLy9zcGFya2xlDQogICAgICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJsaWdodGVyIjsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE7IGkrKykgew0KICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gTWF0aC5yYW5kb20oKSAqIDAuNjUgKyAwLjE7DQogICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IE1hdGgucmFuZG9tKCkgKiAzMCArIDU7DQogICAgICAgICAgICAgICAgICB2YXIgYSA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMjsNCiAgICAgICAgICAgICAgICAgIHZhciBkID0gKHMgKiAwLjkgKiBNYXRoLnJhbmRvbSgpKSAvIDI7DQogICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICAgICAgICBQaWMoImdsaW50LmpwZyIpLA0KICAgICAgICAgICAgICAgICAgICAtc2l6ZSAvIDIgKyBNYXRoLnNpbihhKSAqIGQsDQogICAgICAgICAgICAgICAgICAgIC1zaXplIC8gMiArIE1hdGguY29zKGEpICogZCwNCiAgICAgICAgICAgICAgICAgICAgc2l6ZSwNCiAgICAgICAgICAgICAgICAgICAgc2l6ZQ0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOw0KICAgICAgICAgICAgICBUaW1lci50cmFjaygiYmlnIGNvb2tpZSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy9ubyBwYXJ0aWNsZXMNCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIC8vYmlnIGNvb2tpZSBzaGluZQ0KICAgICAgICAgICAgdmFyIHMgPSA1MTI7DQogICAgICAgICAgICB2YXIgeCA9IEdhbWUuY29va2llT3JpZ2luWCAtIHMgLyAyOw0KICAgICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblkgLSBzIC8gMjsNCiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNTsNCiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKCJzaGluZS5wbmciKSwgeCwgeSwgcywgcyk7DQoNCiAgICAgICAgICAgIGlmIChzaG93RHJhZ29uKSB7DQogICAgICAgICAgICAgIC8vYmlnIGRyYWdvbg0KICAgICAgICAgICAgICB2YXIgcyA9IDMwMCAqIDIgKiAoMSArIE1hdGguc2luKEdhbWUuVCAqIDAuMDEzKSAqIDAuMSk7DQogICAgICAgICAgICAgIHZhciB4ID0gR2FtZS5jb29raWVPcmlnaW5YIC0gcyAvIDI7DQogICAgICAgICAgICAgIHZhciB5ID0NCiAgICAgICAgICAgICAgICBHYW1lLmNvb2tpZU9yaWdpblkgLSBzIC8gKDEuNCArIDAuMiAqIE1hdGguc2luKEdhbWUuVCAqIDAuMDEpKTsNCiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShQaWMoImRyYWdvbkJHLnBuZyIpLCB4LCB5LCBzLCBzKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9iaWcgY29va2llDQogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KICAgICAgICAgICAgdmFyIHMgPSAyNTYgKiBHYW1lLkJpZ0Nvb2tpZVNpemU7DQogICAgICAgICAgICB2YXIgeCA9IEdhbWUuY29va2llT3JpZ2luWCAtIHMgLyAyOw0KICAgICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblkgLSBzIC8gMjsNCiAgICAgICAgICAgIGlmIChHYW1lLnByZWZzLmZhbmN5KQ0KICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYygiY29va2llU2hhZG93LnBuZyIpLCB4LCB5ICsgMjAsIHMsIHMpOw0KICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShQaWMoInBlcmZlY3RDb29raWUucG5nIiksIHgsIHksIHMsIHMpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vY3Vyc29ycw0KICAgICAgICAgIGlmIChHYW1lLnByZWZzLmN1cnNvcnMpIHsNCiAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICBjdHgudHJhbnNsYXRlKEdhbWUuY29va2llT3JpZ2luWCwgR2FtZS5jb29raWVPcmlnaW5ZKTsNCiAgICAgICAgICAgIHZhciBwaWMgPSBQaWMoImN1cnNvci5wbmciKTsNCiAgICAgICAgICAgIHZhciBmYW5jeSA9IEdhbWUucHJlZnMuZmFuY3k7DQoNCiAgICAgICAgICAgIGlmIChzaG93RHJhZ29uKSBjdHguZ2xvYmFsQWxwaGEgPSAwLjI1Ow0KICAgICAgICAgICAgdmFyIGFtb3VudCA9IEdhbWUuT2JqZWN0c1siQ3Vyc29yIl0uYW1vdW50Ow0KICAgICAgICAgICAgLy92YXIgc3BlPS0xOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKykgew0KICAgICAgICAgICAgICB2YXIgbiA9IE1hdGguZmxvb3IoaSAvIDUwKTsNCiAgICAgICAgICAgICAgLy92YXIgYT0oKGkrMC41Km4pJTUwKS81MDsNCiAgICAgICAgICAgICAgdmFyIHcgPSAwOw0KICAgICAgICAgICAgICBpZiAoZmFuY3kpDQogICAgICAgICAgICAgICAgdyA9IE1hdGguc2luKA0KICAgICAgICAgICAgICAgICAgR2FtZS5UICogMC4wMjUgKyAoKChpICsgbiAqIDEyKSAlIDI1KSAvIDI1KSAqIE1hdGguUEkgKiAyDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgaWYgKHcgPiAwLjk5NykgdyA9IDEuNTsNCiAgICAgICAgICAgICAgZWxzZSBpZiAodyA+IDAuOTk0KSB3ID0gMC41Ow0KICAgICAgICAgICAgICBlbHNlIHcgPSAwOw0KICAgICAgICAgICAgICB3ICo9IC00Ow0KICAgICAgICAgICAgICBpZiAoZmFuY3kpIHcgKz0gTWF0aC5zaW4oKChuICsgR2FtZS5UICogMC4wMSkgKiBNYXRoLlBJKSAvIDIpICogNDsNCiAgICAgICAgICAgICAgdmFyIHggPSAwOw0KICAgICAgICAgICAgICB2YXIgeSA9IDE0MCAvKiAqR2FtZS5CaWdDb29raWVTaXplKi8gKyBuICogMTYgKyB3IC0gMTY7DQoNCiAgICAgICAgICAgICAgdmFyIHJvdCA9IDcuMjsgLy8oMS81MCkqMzYwDQogICAgICAgICAgICAgIGlmIChpID09IDAgJiYgZmFuY3kpIHJvdCAtPSBHYW1lLlQgKiAwLjE7DQogICAgICAgICAgICAgIGlmIChpICUgNTAgPT0gMCkgcm90ICs9IDcuMiAvIDI7DQogICAgICAgICAgICAgIGN0eC5yb3RhdGUoKHJvdCAvIDM2MCkgKiBNYXRoLlBJICogMik7DQogICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UocGljLCAwLCAwLCAzMiwgMzIsIHgsIHksIDMyLCAzMik7DQogICAgICAgICAgICAgIC8vY3R4LmRyYXdJbWFnZShwaWMsMzIqKGk9PXNwZSksMCwzMiwzMix4LHksMzIsMzIpOw0KDQogICAgICAgICAgICAgIC8qaWYgKGk9PXNwZSkNCgkJCQkJCQl7DQoJCQkJCQkJCXkrPTE2Ow0KCQkJCQkJCQl4PUdhbWUuY29va2llT3JpZ2luWCtNYXRoLnNpbigtKChyLTUpLzM2MCkqTWF0aC5QSSoyKSp5Ow0KCQkJCQkJCQl5PUdhbWUuY29va2llT3JpZ2luWStNYXRoLmNvcygtKChyLTUpLzM2MCkqTWF0aC5QSSoyKSp5Ow0KCQkJCQkJCQlpZiAoR2FtZS5DYW5DbGljayAmJiBjdHggJiYgTWF0aC5hYnMoR2FtZS5tb3VzZVgteCk8MTYgJiYgTWF0aC5hYnMoR2FtZS5tb3VzZVkteSk8MTYpIEdhbWUubW91c2VQb2ludGVyPTE7DQoJCQkJCQkJfSovDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjdHgucmVzdG9yZSgpOw0KICAgICAgICAgICAgVGltZXIudHJhY2soImN1cnNvcnMiKTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdmFyIHRCYXNlID0gTWF0aC5tYXgoDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgKEdhbWUuQXNjZW5kVGltZXIgLSBHYW1lLkFzY2VuZEJyZWFrcG9pbnQpIC8NCiAgICAgICAgICAgICAgKEdhbWUuQXNjZW5kRHVyYXRpb24gLSBHYW1lLkFzY2VuZEJyZWFrcG9pbnQpDQogICAgICAgICAgKTsNCiAgICAgICAgICAvL2JpZyBjcnVtYmxpbmcgY29va2llDQogICAgICAgICAgLy92YXIgdD0oMypNYXRoLnBvdyh0QmFzZSwyKS0yKk1hdGgucG93KHRCYXNlLDMpKTsvL1MgY3VydmUNCiAgICAgICAgICB2YXIgdCA9IE1hdGgucG93KHRCYXNlLCAwLjUpOw0KDQogICAgICAgICAgdmFyIHNoYWtlID0gMDsNCiAgICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA8IEdhbWUuQXNjZW5kQnJlYWtwb2ludCkgew0KICAgICAgICAgICAgc2hha2UgPSBHYW1lLkFzY2VuZFRpbWVyIC8gR2FtZS5Bc2NlbmRCcmVha3BvaW50Ow0KICAgICAgICAgIH0NCiAgICAgICAgICAvL2Vsc2Uge3NoYWtlPTEtdDt9DQoNCiAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOw0KDQogICAgICAgICAgdmFyIHggPSBHYW1lLmNvb2tpZU9yaWdpblg7DQogICAgICAgICAgdmFyIHkgPSBHYW1lLmNvb2tpZU9yaWdpblk7DQoNCiAgICAgICAgICB4ICs9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogMTAgKiBzaGFrZTsNCiAgICAgICAgICB5ICs9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogMTAgKiBzaGFrZTsNCg0KICAgICAgICAgIHZhciBzID0gMTsNCiAgICAgICAgICBpZiAodEJhc2UgPiAwKSB7DQogICAgICAgICAgICBjdHguc2F2ZSgpOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMSAtIE1hdGgucG93KHQsIDAuNSk7DQogICAgICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJsaWdodGVyIjsNCiAgICAgICAgICAgIGN0eC5yb3RhdGUoR2FtZS5UICogMC4wMDcpOw0KICAgICAgICAgICAgcyA9IDAuNSArIE1hdGgucG93KHRCYXNlLCAwLjYpICogMTsNCiAgICAgICAgICAgIHZhciBzMiA9IDYwMCAqIHM7DQogICAgICAgICAgICBjdHguZHJhd0ltYWdlKFBpYygiaGVhdmVuUmluZzEuanBnIiksIC1zMiAvIDIsIC1zMiAvIDIsIHMyLCBzMik7DQogICAgICAgICAgICBjdHgucm90YXRlKC1HYW1lLlQgKiAwLjAwMik7DQogICAgICAgICAgICBzID0gMC41ICsgTWF0aC5wb3coMSAtIHRCYXNlLCAwLjQpICogMTsNCiAgICAgICAgICAgIHMyID0gNjAwICogczsNCiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoUGljKCJoZWF2ZW5SaW5nMi5qcGciKSwgLXMyIC8gMiwgLXMyIC8gMiwgczIsIHMyKTsNCiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcyA9IDI1NjsgLy8qR2FtZS5CaWdDb29raWVTaXplOw0KDQogICAgICAgICAgY3R4LnNhdmUoKTsNCiAgICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkpOw0KICAgICAgICAgIGN0eC5yb3RhdGUodCAqIC0wLjEgKiBNYXRoLlBJICogMik7DQoNCiAgICAgICAgICB2YXIgY2h1bmtzID0gew0KICAgICAgICAgICAgMDogNywNCiAgICAgICAgICAgIDE6IDYsDQogICAgICAgICAgICAyOiAzLA0KICAgICAgICAgICAgMzogMiwNCiAgICAgICAgICAgIDQ6IDgsDQogICAgICAgICAgICA1OiAxLA0KICAgICAgICAgICAgNjogOSwNCiAgICAgICAgICAgIDc6IDUsDQogICAgICAgICAgICA4OiAwLA0KICAgICAgICAgICAgOTogNCwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIHMgKj0gdCAvIDIgKyAxOw0KICAgICAgICAgIC8qY3R4Lmdsb2JhbEFscGhhPSgxLXQpKjAuMzM7DQoJCQkJCWZvciAodmFyIGk9MDtpPDEwO2krKykNCgkJCQkJew0KCQkJCQkJdmFyIGQ9KHQtMC4yKSooODArKChpKzIpJTMpKjQwKTsNCgkJCQkJCWN0eC5kcmF3SW1hZ2UoUGljKCdicm9rZW5Db29raWUucG5nJyksMjU2KihjaHVua3NbaV0pLDAsMjU2LDI1Niwtcy8yK01hdGguc2luKC0oKChjaHVua3NbaV0rNCklMTApLzEwKSpNYXRoLlBJKjIpKmQsLXMvMitNYXRoLmNvcygtKCgoY2h1bmtzW2ldKzQpJTEwKS8xMCkqTWF0aC5QSSoyKSpkLHMscyk7DQoJCQkJCX0NCgkJCQkJY3R4Lmdsb2JhbEFscGhhPSgxLXQpKjAuNjY7DQoJCQkJCWZvciAodmFyIGk9MDtpPDEwO2krKykNCgkJCQkJew0KCQkJCQkJdmFyIGQ9KHQtMC4xKSooODArKChpKzIpJTMpKjQwKTsNCgkJCQkJCWN0eC5kcmF3SW1hZ2UoUGljKCdicm9rZW5Db29raWUucG5nJyksMjU2KihjaHVua3NbaV0pLDAsMjU2LDI1Niwtcy8yK01hdGguc2luKC0oKChjaHVua3NbaV0rNCklMTApLzEwKSpNYXRoLlBJKjIpKmQsLXMvMitNYXRoLmNvcygtKCgoY2h1bmtzW2ldKzQpJTEwKS8xMCkqTWF0aC5QSSoyKSpkLHMscyk7DQoJCQkJCX0qLw0KICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEgLSB0Ow0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgew0KICAgICAgICAgICAgdmFyIGQgPSB0ICogKDgwICsgKChpICsgMikgJSAzKSAqIDQwKTsNCiAgICAgICAgICAgIHZhciB4MiA9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogNSAqIHNoYWtlOw0KICAgICAgICAgICAgdmFyIHkyID0gKE1hdGgucmFuZG9tKCkgKiAyIC0gMSkgKiA1ICogc2hha2U7DQogICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICBQaWMoImJyb2tlbkNvb2tpZS5wbmciKSwNCiAgICAgICAgICAgICAgMjU2ICogY2h1bmtzW2ldLA0KICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgICAyNTYsDQogICAgICAgICAgICAgIDI1NiwNCiAgICAgICAgICAgICAgLXMgLyAyICsNCiAgICAgICAgICAgICAgICBNYXRoLnNpbigtKCgoY2h1bmtzW2ldICsgNCkgJSAxMCkgLyAxMCkgKiBNYXRoLlBJICogMikgKiBkICsNCiAgICAgICAgICAgICAgICB4MiwNCiAgICAgICAgICAgICAgLXMgLyAyICsNCiAgICAgICAgICAgICAgICBNYXRoLmNvcygtKCgoY2h1bmtzW2ldICsgNCkgJSAxMCkgLyAxMCkgKiBNYXRoLlBJICogMikgKiBkICsNCiAgICAgICAgICAgICAgICB5MiwNCiAgICAgICAgICAgICAgcywNCiAgICAgICAgICAgICAgcw0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdmFyIGJyb2tlbkhhbG8gPSAxIC0gTWF0aC5taW4odCAvICgxIC8gMyksIDEgLyAzKSAqIDM7DQogICAgICAgICAgaWYgKEdhbWUuQXNjZW5kVGltZXIgPCBHYW1lLkFzY2VuZEJyZWFrcG9pbnQpDQogICAgICAgICAgICBicm9rZW5IYWxvID0gR2FtZS5Bc2NlbmRUaW1lciAvIEdhbWUuQXNjZW5kQnJlYWtwb2ludDsNCiAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBicm9rZW5IYWxvOw0KICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoDQogICAgICAgICAgICBQaWMoImJyb2tlbkNvb2tpZUhhbG8ucG5nIiksDQogICAgICAgICAgICAtcyAvIDEuMzMzMywNCiAgICAgICAgICAgIC1zIC8gMS4zMzMzLA0KICAgICAgICAgICAgcyAqIDEuNSwNCiAgICAgICAgICAgIHMgKiAxLjUNCiAgICAgICAgICApOw0KDQogICAgICAgICAgY3R4LnJlc3RvcmUoKTsNCg0KICAgICAgICAgIC8vZmxhcmVzDQogICAgICAgICAgdmFyIG4gPSA5Ow0KICAgICAgICAgIHZhciB0ID0gR2FtZS5Bc2NlbmRUaW1lciAvIEdhbWUuQXNjZW5kQnJlYWtwb2ludDsNCiAgICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA8IEdhbWUuQXNjZW5kQnJlYWtwb2ludCkgew0KICAgICAgICAgICAgY3R4LnNhdmUoKTsNCiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoeCwgeSk7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgew0KICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcigodCAvIDMpICogbiAqIDMgKyBpICogMi43KSAlIDIpIHsNCiAgICAgICAgICAgICAgICB2YXIgdDIgPSBNYXRoLnBvdygoKHQgLyAzKSAqIG4gKiAzICsgaSAqIDIuNykgJSAxLCAxLjUpOw0KICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9ICgxIC0gdCkgKiAoR2FtZS5kcmF3VCAlIDIgPT0gMCA/IDAuNSA6IDEpOw0KICAgICAgICAgICAgICAgIHZhciBzdyA9ICgxIC0gdDIgKiAwLjUpICogOTY7DQogICAgICAgICAgICAgICAgdmFyIHNoID0gKDAuNSArIHQyICogMS41KSAqIDk2Ow0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoDQogICAgICAgICAgICAgICAgICBQaWMoInNoaW5lU3Bva2UucG5nIiksDQogICAgICAgICAgICAgICAgICAtc3cgLyAyLA0KICAgICAgICAgICAgICAgICAgLXNoIC0gMzIgLSAoMSAtIHQyKSAqIDI1NiwNCiAgICAgICAgICAgICAgICAgIHN3LA0KICAgICAgICAgICAgICAgICAgc2gNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGN0eC5yb3RhdGUoKE1hdGguUEkgKiAyKSAvIG4pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvL2ZsYXNoIGF0IGJyZWFrcG9pbnQNCiAgICAgICAgICBpZiAodEJhc2UgPCAwLjEgJiYgdEJhc2UgPiAwKSB7DQogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxIC0gdEJhc2UgLyAwLjE7DQogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gIiNmZmYiOw0KICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTsNCiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICh0QmFzZSA+IDAuOCkgew0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gKHRCYXNlIC0gMC44KSAvIDAuMjsNCiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAiIzAwMCI7DQogICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpOw0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvL21pbGsgYW5kIG1pbGsgYWNjZXNzb3JpZXMNCiAgICAgICAgaWYgKEdhbWUucHJlZnMubWlsaykgew0KICAgICAgICAgIHZhciB3aWR0aCA9IGN0eC5jYW52YXMud2lkdGg7DQogICAgICAgICAgdmFyIGhlaWdodCA9IGN0eC5jYW52YXMuaGVpZ2h0Ow0KICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcigNCiAgICAgICAgICAgIChHYW1lLlQgKiAyIC0gKEdhbWUubWlsa0ggLSBHYW1lLm1pbGtIZCkgKiAyMDAwICsgNDgwICogMikgJSA0ODANCiAgICAgICAgICApOyAvL01hdGguZmxvb3IoKEdhbWUuVCoyK01hdGguc2luKEdhbWUuVCowLjEpKjIrTWF0aC5zaW4oR2FtZS5UKjAuMDMpKjItKEdhbWUubWlsa0gtR2FtZS5taWxrSGQpKjIwMDArNDgwKjIpJTQ4MCk7DQogICAgICAgICAgdmFyIHkgPSBHYW1lLm1pbGtIZCAqIGhlaWdodDsgLy8oKChHYW1lLm1pbGtIZCkqY3R4LmNhbnZhcy5oZWlnaHQpKigxKzAuMDUqKE1hdGguc2luKEdhbWUuVCowLjAxNykvMiswLjUpKSk7DQogICAgICAgICAgdmFyIGEgPSAxOw0KICAgICAgICAgIGlmIChHYW1lLkFzY2VuZFRpbWVyID4gMCkgew0KICAgICAgICAgICAgeSAqPSAxIC0gTWF0aC5wb3coR2FtZS5Bc2NlbmRUaW1lciAvIEdhbWUuQXNjZW5kQnJlYWtwb2ludCwgMikgKiAyOw0KICAgICAgICAgICAgYSAqPSAxIC0gTWF0aC5wb3coR2FtZS5Bc2NlbmRUaW1lciAvIEdhbWUuQXNjZW5kQnJlYWtwb2ludCwgMikgKiAyOw0KICAgICAgICAgIH0gZWxzZSBpZiAoR2FtZS5SZWluY2FybmF0ZVRpbWVyID4gMCkgew0KICAgICAgICAgICAgeSAqPQ0KICAgICAgICAgICAgICAxIC0NCiAgICAgICAgICAgICAgTWF0aC5wb3coDQogICAgICAgICAgICAgICAgMSAtIEdhbWUuUmVpbmNhcm5hdGVUaW1lciAvIEdhbWUuUmVpbmNhcm5hdGVEdXJhdGlvbiwNCiAgICAgICAgICAgICAgICAyDQogICAgICAgICAgICAgICkgKg0KICAgICAgICAgICAgICAgIDI7DQogICAgICAgICAgICBhICo9DQogICAgICAgICAgICAgIDEgLQ0KICAgICAgICAgICAgICBNYXRoLnBvdygNCiAgICAgICAgICAgICAgICAxIC0gR2FtZS5SZWluY2FybmF0ZVRpbWVyIC8gR2FtZS5SZWluY2FybmF0ZUR1cmF0aW9uLA0KICAgICAgICAgICAgICAgIDINCiAgICAgICAgICAgICAgKSAqDQogICAgICAgICAgICAgICAgMjsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoR2FtZS5UT1lTKSB7DQogICAgICAgICAgICAvL2dvbGx5DQogICAgICAgICAgICBpZiAoIUdhbWUuVG95KSB7DQogICAgICAgICAgICAgIEdhbWUudG95cyA9IFtdOw0KICAgICAgICAgICAgICBHYW1lLnRveXNUeXBlID0gY2hvb3NlKFsxLCAyXSk7DQogICAgICAgICAgICAgIEdhbWUuVG95ID0gZnVuY3Rpb24gKHgsIHkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlkID0gR2FtZS50b3lzLmxlbmd0aDsNCiAgICAgICAgICAgICAgICB0aGlzLnggPSB4Ow0KICAgICAgICAgICAgICAgIHRoaXMueSA9IHk7DQogICAgICAgICAgICAgICAgdGhpcy54ZCA9IE1hdGgucmFuZG9tKCkgKiAxMCAtIDU7DQogICAgICAgICAgICAgICAgdGhpcy55ZCA9IE1hdGgucmFuZG9tKCkgKiAxMCAtIDU7DQogICAgICAgICAgICAgICAgdGhpcy5yID0gTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyOw0KICAgICAgICAgICAgICAgIHRoaXMucmQgPSBNYXRoLnJhbmRvbSgpICogMC4xIC0gMC4wNTsNCiAgICAgICAgICAgICAgICB2YXIgdiA9IE1hdGgucmFuZG9tKCk7DQogICAgICAgICAgICAgICAgdmFyIGEgPSAwLjU7DQogICAgICAgICAgICAgICAgdmFyIGIgPSAwLjU7DQogICAgICAgICAgICAgICAgaWYgKHYgPD0gYSkgdiA9IGIgLSBiICogTWF0aC5wb3coMSAtIHYgLyBhLCAzKTsNCiAgICAgICAgICAgICAgICBlbHNlIHYgPSBiICsgKDEgLSBiKSAqIE1hdGgucG93KCh2IC0gYSkgLyAoMSAtIGEpLCAzKTsNCiAgICAgICAgICAgICAgICB0aGlzLnMgPSAoR2FtZS50b3lzVHlwZSA9PSAxID8gNjQgOiA0OCkgKiAoMC4xICsgdiAqIDEuOSk7DQogICAgICAgICAgICAgICAgaWYgKEdhbWUudG95c1R5cGUgPT0gMikgdGhpcy5zID0gdGhpcy5pZCAlIDEwID09IDEgPyA5NiA6IDQ4Ow0KICAgICAgICAgICAgICAgIHRoaXMuc3QgPSB0aGlzLnM7DQogICAgICAgICAgICAgICAgdGhpcy5zID0gMDsNCiAgICAgICAgICAgICAgICB2YXIgY29va2llcyA9IFtbMTAsIDBdXTsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXMpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSBHYW1lLlVwZ3JhZGVzW2ldOw0KICAgICAgICAgICAgICAgICAgaWYgKGNvb2tpZS5ib3VnaHQgPiAwICYmIGNvb2tpZS5wb29sID09ICJjb29raWUiKQ0KICAgICAgICAgICAgICAgICAgICBjb29raWVzLnB1c2goY29va2llLmljb24pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmljb24gPSBjaG9vc2UoY29va2llcyk7DQogICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdGhpcy5sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgICAgICAgICAgdGhpcy5sLmlubmVySFRNTCA9IHRoaXMuaWQ7DQogICAgICAgICAgICAgICAgdGhpcy5sLnN0eWxlLmNzc1RleHQgPQ0KICAgICAgICAgICAgICAgICAgImN1cnNvcjpwb2ludGVyO2JvcmRlci1yYWRpdXM6IiArDQogICAgICAgICAgICAgICAgICB0aGlzLnMgLyAyICsNCiAgICAgICAgICAgICAgICAgICJweDtvcGFjaXR5OjA7d2lkdGg6IiArDQogICAgICAgICAgICAgICAgICB0aGlzLnMgKw0KICAgICAgICAgICAgICAgICAgInB4O2hlaWdodDoiICsNCiAgICAgICAgICAgICAgICAgIHRoaXMucyArDQogICAgICAgICAgICAgICAgICAicHg7YmFja2dyb3VuZDojOTk5O3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MHB4O3RvcDowcHg7ei1pbmRleDoxMDAwMDAwMDt0cmFuc2Zvcm06dHJhbnNsYXRlKC0xMDAwcHgsLTEwMDBweCk7IjsNCiAgICAgICAgICAgICAgICBsKCJzZWN0aW9uTGVmdCIpLmFwcGVuZENoaWxkKHRoaXMubCk7DQogICAgICAgICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICAgICAgICB0aGlzLmwsDQogICAgICAgICAgICAgICAgICAibW91c2Vkb3duIiwNCiAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAod2hhdCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgIHdoYXQuZHJhZ2dlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICB9KSh0aGlzKQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgICAgICAgICB0aGlzLmwsDQogICAgICAgICAgICAgICAgICAibW91c2V1cCIsDQogICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKHdoYXQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICB3aGF0LmRyYWdnZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgIH0pKHRoaXMpDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBHYW1lLnRveXMucHVzaCh0aGlzKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgZm9yICgNCiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7DQogICAgICAgICAgICAgICAgaSA8DQogICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTUgKyAoR2FtZS50b3lzVHlwZSA9PSAxID8gNSA6IDMwKSk7DQogICAgICAgICAgICAgICAgaSsrDQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIG5ldyBHYW1lLlRveSgNCiAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiB3aWR0aCwNCiAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKiBoZWlnaHQgKiAwLjMNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjU7DQogICAgICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUudG95cykgew0KICAgICAgICAgICAgICB2YXIgbWUgPSBHYW1lLnRveXNbaV07DQogICAgICAgICAgICAgIGN0eC5zYXZlKCk7DQogICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUobWUueCwgbWUueSk7DQogICAgICAgICAgICAgIGN0eC5yb3RhdGUobWUucik7DQogICAgICAgICAgICAgIGlmIChHYW1lLnRveXNUeXBlID09IDEpDQogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgIFBpYygic21hbGxDb29raWVzLnBuZyIpLA0KICAgICAgICAgICAgICAgICAgKG1lLmlkICUgOCkgKiA2NCwNCiAgICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgICA2NCwNCiAgICAgICAgICAgICAgICAgIDY0LA0KICAgICAgICAgICAgICAgICAgLW1lLnMgLyAyLA0KICAgICAgICAgICAgICAgICAgLW1lLnMgLyAyLA0KICAgICAgICAgICAgICAgICAgbWUucywNCiAgICAgICAgICAgICAgICAgIG1lLnMNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgICAgICAgIFBpYygiaWNvbnMucG5nIiksDQogICAgICAgICAgICAgICAgICBtZS5pY29uWzBdICogNDgsDQogICAgICAgICAgICAgICAgICBtZS5pY29uWzFdICogNDgsDQogICAgICAgICAgICAgICAgICA0OCwNCiAgICAgICAgICAgICAgICAgIDQ4LA0KICAgICAgICAgICAgICAgICAgLW1lLnMgLyAyLA0KICAgICAgICAgICAgICAgICAgLW1lLnMgLyAyLA0KICAgICAgICAgICAgICAgICAgbWUucywNCiAgICAgICAgICAgICAgICAgIG1lLnMNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS50b3lzKSB7DQogICAgICAgICAgICAgIHZhciBtZSA9IEdhbWUudG95c1tpXTsNCiAgICAgICAgICAgICAgLy9wc3N0Li4uIG5vdCByZWFsIHBoeXNpY3MNCiAgICAgICAgICAgICAgZm9yICh2YXIgaWkgaW4gR2FtZS50b3lzKSB7DQogICAgICAgICAgICAgICAgdmFyIGl0ID0gR2FtZS50b3lzW2lpXTsNCiAgICAgICAgICAgICAgICBpZiAoaXQuaWQgIT0gbWUuaWQpIHsNCiAgICAgICAgICAgICAgICAgIHZhciB4MSA9IG1lLnggKyBtZS54ZDsNCiAgICAgICAgICAgICAgICAgIHZhciB5MSA9IG1lLnkgKyBtZS55ZDsNCiAgICAgICAgICAgICAgICAgIHZhciB4MiA9IGl0LnggKyBpdC54ZDsNCiAgICAgICAgICAgICAgICAgIHZhciB5MiA9IGl0LnkgKyBpdC55ZDsNCiAgICAgICAgICAgICAgICAgIHZhciBkaXN0ID0NCiAgICAgICAgICAgICAgICAgICAgTWF0aC5zcXJ0KE1hdGgucG93KHgxIC0geDIsIDIpICsgTWF0aC5wb3coeTEgLSB5MiwgMikpIC8NCiAgICAgICAgICAgICAgICAgICAgKG1lLnMgLyAyICsgaXQucyAvIDIpOw0KICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPCAoR2FtZS50b3lzVHlwZSA9PSAxID8gMC45NSA6IDAuNzUpKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoeTEgLSB5MiwgeDEgLSB4Mik7DQogICAgICAgICAgICAgICAgICAgIHZhciB2MSA9IE1hdGguc3FydChNYXRoLnBvdyhtZS54ZCwgMikgKyBNYXRoLnBvdyhtZS55ZCwgMikpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdjIgPSBNYXRoLnNxcnQoTWF0aC5wb3coaXQueGQsIDIpICsgTWF0aC5wb3coaXQueWQsIDIpKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSAoKHYxICsgdjIpIC8gMiArIGRpc3QpICogMC43NTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGlvID0gaXQucyAvIG1lLnM7DQogICAgICAgICAgICAgICAgICAgIG1lLnhkICs9IE1hdGguc2luKC1hbmdsZSArIE1hdGguUEkgLyAyKSAqIHYgKiByYXRpbzsNCiAgICAgICAgICAgICAgICAgICAgbWUueWQgKz0gTWF0aC5jb3MoLWFuZ2xlICsgTWF0aC5QSSAvIDIpICogdiAqIHJhdGlvOw0KICAgICAgICAgICAgICAgICAgICBpdC54ZCArPSBNYXRoLnNpbigtYW5nbGUgLSBNYXRoLlBJIC8gMikgKiB2ICogKDEgLyByYXRpbyk7DQogICAgICAgICAgICAgICAgICAgIGl0LnlkICs9IE1hdGguY29zKC1hbmdsZSAtIE1hdGguUEkgLyAyKSAqIHYgKiAoMSAvIHJhdGlvKTsNCiAgICAgICAgICAgICAgICAgICAgbWUucmQgKz0gKE1hdGgucmFuZG9tKCkgKiAxIC0gMC41KSAqIDAuMSAqIHJhdGlvOw0KICAgICAgICAgICAgICAgICAgICBpdC5yZCArPSAoTWF0aC5yYW5kb20oKSAqIDEgLSAwLjUpICogMC4xICogKDEgLyByYXRpbyk7DQogICAgICAgICAgICAgICAgICAgIG1lLnJkICo9IE1hdGgubWluKDEsIHYpOw0KICAgICAgICAgICAgICAgICAgICBpdC5yZCAqPSBNYXRoLm1pbigxLCB2KTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKG1lLnkgPj0gaGVpZ2h0IC0gR2FtZS5taWxrSGQgKiBoZWlnaHQgKyA4KSB7DQogICAgICAgICAgICAgICAgbWUueGQgKj0gMC44NTsNCiAgICAgICAgICAgICAgICBtZS55ZCAqPSAwLjg1Ow0KICAgICAgICAgICAgICAgIG1lLnJkICo9IDAuODU7DQogICAgICAgICAgICAgICAgbWUueWQgLT0gMTsNCiAgICAgICAgICAgICAgICBtZS54ZCArPSAoTWF0aC5yYW5kb20oKSAqIDEgLSAwLjUpICogMC4zOw0KICAgICAgICAgICAgICAgIG1lLnlkICs9IChNYXRoLnJhbmRvbSgpICogMSAtIDAuNSkgKiAwLjA1Ow0KICAgICAgICAgICAgICAgIG1lLnJkICs9IChNYXRoLnJhbmRvbSgpICogMSAtIDAuNSkgKiAwLjAyOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIG1lLnhkICo9IDAuOTk7DQogICAgICAgICAgICAgICAgbWUucmQgKj0gMC45OTsNCiAgICAgICAgICAgICAgICBtZS55ZCArPSAxOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIG1lLnlkICo9IE1hdGgubWluKA0KICAgICAgICAgICAgICAgIDEsDQogICAgICAgICAgICAgICAgTWF0aC5hYnMobWUueSAtIChoZWlnaHQgLSBHYW1lLm1pbGtIZCAqIGhlaWdodCkgLyAxNikNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgbWUucmQgKz0gKG1lLnhkICogMC4wMSkgLyAobWUucyAvIChHYW1lLnRveXNUeXBlID09IDEgPyA2NCA6IDQ4KSk7DQogICAgICAgICAgICAgIGlmIChtZS54IDwgbWUucyAvIDIgJiYgbWUueGQgPCAwKQ0KICAgICAgICAgICAgICAgIG1lLnhkID0gTWF0aC5tYXgoMC4xLCAtbWUueGQgKiAwLjYpOw0KICAgICAgICAgICAgICBlbHNlIGlmIChtZS54IDwgbWUucyAvIDIpIHsNCiAgICAgICAgICAgICAgICBtZS54ZCA9IDA7DQogICAgICAgICAgICAgICAgbWUueCA9IG1lLnMgLyAyOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChtZS54ID4gd2lkdGggLSBtZS5zIC8gMiAmJiBtZS54ZCA+IDApDQogICAgICAgICAgICAgICAgbWUueGQgPSBNYXRoLm1pbigtMC4xLCAtbWUueGQgKiAwLjYpOw0KICAgICAgICAgICAgICBlbHNlIGlmIChtZS54ID4gd2lkdGggLSBtZS5zIC8gMikgew0KICAgICAgICAgICAgICAgIG1lLnhkID0gMDsNCiAgICAgICAgICAgICAgICBtZS54ID0gd2lkdGggLSBtZS5zIC8gMjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBtZS54ZCA9IE1hdGgubWluKE1hdGgubWF4KG1lLnhkLCAtMzApLCAzMCk7DQogICAgICAgICAgICAgIG1lLnlkID0gTWF0aC5taW4oTWF0aC5tYXgobWUueWQsIC0zMCksIDMwKTsNCiAgICAgICAgICAgICAgbWUucmQgPSBNYXRoLm1pbihNYXRoLm1heChtZS5yZCwgLTAuNSksIDAuNSk7DQogICAgICAgICAgICAgIG1lLnggKz0gbWUueGQ7DQogICAgICAgICAgICAgIG1lLnkgKz0gbWUueWQ7DQogICAgICAgICAgICAgIG1lLnIgKz0gbWUucmQ7DQogICAgICAgICAgICAgIG1lLnIgPSBtZS5yICUgKE1hdGguUEkgKiAyKTsNCiAgICAgICAgICAgICAgbWUucyArPSAobWUuc3QgLSBtZS5zKSAqIDAuNTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUudG95c1R5cGUgPT0gMiAmJiAhbWUuZHJhZ2dlZCAmJiBNYXRoLnJhbmRvbSgpIDwgMC4wMDMpDQogICAgICAgICAgICAgICAgbWUuc3QgPSBjaG9vc2UoWzQ4LCA0OCwgNDgsIDQ4LCA5Nl0pOw0KICAgICAgICAgICAgICBpZiAobWUuZHJhZ2dlZCkgew0KICAgICAgICAgICAgICAgIG1lLnggPSBHYW1lLm1vdXNlWDsNCiAgICAgICAgICAgICAgICBtZS55ID0gR2FtZS5tb3VzZVk7DQogICAgICAgICAgICAgICAgbWUueGQgKz0gKChHYW1lLm1vdXNlWCAtIEdhbWUubW91c2VYMikgKiAzIC0gbWUueGQpICogMC41Ow0KICAgICAgICAgICAgICAgIG1lLnlkICs9ICgoR2FtZS5tb3VzZVkgLSBHYW1lLm1vdXNlWTIpICogMyAtIG1lLnlkKSAqIDAuNTsNCiAgICAgICAgICAgICAgICBtZS5sLnN0eWxlLnRyYW5zZm9ybSA9DQogICAgICAgICAgICAgICAgICAidHJhbnNsYXRlKCIgKw0KICAgICAgICAgICAgICAgICAgKG1lLnggLSBtZS5zIC8gMikgKw0KICAgICAgICAgICAgICAgICAgInB4LCIgKw0KICAgICAgICAgICAgICAgICAgKG1lLnkgLSBtZS5zIC8gMikgKw0KICAgICAgICAgICAgICAgICAgInB4KSBzY2FsZSg1MCkiOw0KICAgICAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgICAgICBtZS5sLnN0eWxlLnRyYW5zZm9ybSA9DQogICAgICAgICAgICAgICAgICAidHJhbnNsYXRlKCIgKw0KICAgICAgICAgICAgICAgICAgKG1lLnggLSBtZS5zIC8gMikgKw0KICAgICAgICAgICAgICAgICAgInB4LCIgKw0KICAgICAgICAgICAgICAgICAgKG1lLnkgLSBtZS5zIC8gMikgKw0KICAgICAgICAgICAgICAgICAgInB4KSI7DQogICAgICAgICAgICAgIG1lLmwuc3R5bGUud2lkdGggPSBtZS5zICsgInB4IjsNCiAgICAgICAgICAgICAgbWUubC5zdHlsZS5oZWlnaHQgPSBtZS5zICsgInB4IjsNCiAgICAgICAgICAgICAgY3R4LnNhdmUoKTsNCiAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShtZS54LCBtZS55KTsNCiAgICAgICAgICAgICAgY3R4LnJvdGF0ZShtZS5yKTsNCiAgICAgICAgICAgICAgaWYgKEdhbWUudG95c1R5cGUgPT0gMSkNCiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICAgICAgUGljKCJzbWFsbENvb2tpZXMucG5nIiksDQogICAgICAgICAgICAgICAgICAobWUuaWQgJSA4KSAqIDY0LA0KICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgIDY0LA0KICAgICAgICAgICAgICAgICAgNjQsDQogICAgICAgICAgICAgICAgICAtbWUucyAvIDIsDQogICAgICAgICAgICAgICAgICAtbWUucyAvIDIsDQogICAgICAgICAgICAgICAgICBtZS5zLA0KICAgICAgICAgICAgICAgICAgbWUucw0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKA0KICAgICAgICAgICAgICAgICAgUGljKCJpY29ucy5wbmciKSwNCiAgICAgICAgICAgICAgICAgIG1lLmljb25bMF0gKiA0OCwNCiAgICAgICAgICAgICAgICAgIG1lLmljb25bMV0gKiA0OCwNCiAgICAgICAgICAgICAgICAgIDQ4LA0KICAgICAgICAgICAgICAgICAgNDgsDQogICAgICAgICAgICAgICAgICAtbWUucyAvIDIsDQogICAgICAgICAgICAgICAgICAtbWUucyAvIDIsDQogICAgICAgICAgICAgICAgICBtZS5zLA0KICAgICAgICAgICAgICAgICAgbWUucw0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHBpYyA9IEdhbWUuTWlsay5waWM7DQogICAgICAgICAgaWYgKEdhbWUubWlsa1R5cGUgIT0gMCAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkNCiAgICAgICAgICAgIHBpYyA9IEdhbWUuQWxsTWlsa3NbR2FtZS5taWxrVHlwZV0ucGljOw0KICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuOTUgKiBhOw0KICAgICAgICAgIGN0eC5maWxsUGF0dGVybigNCiAgICAgICAgICAgIFBpYyhwaWMpLA0KICAgICAgICAgICAgMCwNCiAgICAgICAgICAgIGhlaWdodCAtIHksDQogICAgICAgICAgICB3aWR0aCArIDQ4MCwNCiAgICAgICAgICAgIDEsDQogICAgICAgICAgICA0ODAsDQogICAgICAgICAgICA0ODAsDQogICAgICAgICAgICB4LA0KICAgICAgICAgICAgMA0KICAgICAgICAgICk7DQoNCiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gIiMwMDAiOw0KICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCBoZWlnaHQgLSB5ICsgNDgwLCB3aWR0aCwgTWF0aC5tYXgoMCwgeSAtIDQ4MCkpOw0KICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQoNCiAgICAgICAgICBUaW1lci50cmFjaygibWlsayIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuQXNjZW5kVGltZXIgPiAwKSB7DQogICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgIFBpYygic2hhZGVkQm9yZGVyc1NvZnQucG5nIiksDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgMCwNCiAgICAgICAgICAgIGN0eC5jYW52YXMud2lkdGgsDQogICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodA0KICAgICAgICAgICk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5Bc2NlbmRUaW1lciA9PSAwKSB7DQogICAgICAgICAgR2FtZS5EcmF3V3JpbmtsZXJzKCk7DQogICAgICAgICAgVGltZXIudHJhY2soIndyaW5rbGVycyIpOw0KICAgICAgICAgIEdhbWUuRHJhd1NwZWNpYWwoKTsNCiAgICAgICAgICBUaW1lci50cmFjaygiZXZvbHZhYmxlcyIpOw0KDQogICAgICAgICAgR2FtZS5wYXJ0aWNsZXNEcmF3KDIpOw0KICAgICAgICAgIFRpbWVyLnRyYWNrKCJ0ZXh0IHBhcnRpY2xlcyIpOw0KDQogICAgICAgICAgLy9zaGlueSBib3JkZXIgZHVyaW5nIGZyZW56aWVzIGV0Yw0KICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7DQogICAgICAgICAgdmFyIGJvcmRlcnMgPSAic2hhZGVkQm9yZGVyc1NvZnQucG5nIjsNCiAgICAgICAgICBpZiAoZ29vZEJ1ZmYpIGJvcmRlcnMgPSAic2hhZGVkQm9yZGVyc0dvbGQucG5nIjsNCiAgICAgICAgICBlbHNlIGlmIChiYWRCdWZmKSBib3JkZXJzID0gInNoYWRlZEJvcmRlcnNSZWQucG5nIjsNCiAgICAgICAgICBpZiAoZ29vZEJ1ZmYgJiYgR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAibGlnaHRlciI7DQogICAgICAgICAgY3R4LmRyYXdJbWFnZSgNCiAgICAgICAgICAgIFBpYyhib3JkZXJzKSwNCiAgICAgICAgICAgIDAsDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgY3R4LmNhbnZhcy53aWR0aCwNCiAgICAgICAgICAgIGN0eC5jYW52YXMuaGVpZ2h0DQogICAgICAgICAgKTsNCiAgICAgICAgICBpZiAoZ29vZEJ1ZmYgJiYgR2FtZS5wcmVmcy5mYW5jeSkNCiAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAic291cmNlLW92ZXIiOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCg0KICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KCQlJTklUSUFMSVpBVElPTiBFTkQ7IEdBTUUgUkVBRFkgVE8gTEFVTkNIDQoJCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgICBHYW1lLmtpbGxTaGltbWVycygpOw0KDQogICAgLy9ib29vb28NCiAgICBHYW1lLlJ1aW5UaGVGdW4gPSBmdW5jdGlvbiAoc2lsZW50KSB7DQogICAgICBHYW1lLnBvcHVwcyA9IDA7DQogICAgICBHYW1lLlNldEFsbFVwZ3JhZGVzKDEpOw0KICAgICAgR2FtZS5TZXRBbGxBY2hpZXZzKDEpOw0KICAgICAgR2FtZS5wb3B1cHMgPSAwOw0KICAgICAgR2FtZS5FYXJuKDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OSk7DQogICAgICBHYW1lLk1heFNwZWNpYWxzKCk7DQogICAgICBHYW1lLm5leHRSZXNlYXJjaCA9IDA7DQogICAgICBHYW1lLnJlc2VhcmNoVCA9IC0xOw0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgR2FtZS5wb3B1cHMgPSAxOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAobWUubGV2ZWwgPCAxMCkgew0KICAgICAgICAgIG1lLmxldmVsID0gOTsNCiAgICAgICAgICBtZS5sZXZlbFVwKHRydWUpOw0KICAgICAgICB9DQogICAgICAgIGlmIChtZS5taW5pZ2FtZSAmJiBtZS5taW5pZ2FtZS5vblJ1aW5UaGVGdW4pIG1lLm1pbmlnYW1lLm9uUnVpblRoZUZ1bigpOw0KICAgICAgfQ0KICAgICAgaWYgKCFzaWxlbnQpIHsNCiAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgIlRob3UgZG90aCBydWluZXRoIHRoZSBmdW4hIiwNCiAgICAgICAgICAiWW91J3JlIGZyZWUuIEZyZWUgYXQgbGFzdC4iLA0KICAgICAgICAgIFsxMSwgNV0NCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiAiWW91IGZlZWwgYSBiaXR0ZXIgdGFzdGUgaW4geW91ciBtb3V0aC4uLiI7DQogICAgfTsNCg0KICAgIEdhbWUuU2V0QWxsVXBncmFkZXMgPSBmdW5jdGlvbiAob24pIHsNCiAgICAgIEdhbWUucG9wdXBzID0gMDsNCiAgICAgIHZhciBsZWZ0b3V0ID0gWw0KICAgICAgICAiTWFnaWMgc2hlbmFuaWdhbnMiLA0KICAgICAgICAiT2NjdWx0IG9ic3RydWN0aW9uIiwNCiAgICAgICAgIkdsdWNvc2UtY2hhcmdlZCBhaXIiLA0KICAgICAgXTsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgICBpZiAoDQogICAgICAgICAgb24gJiYNCiAgICAgICAgICAoR2FtZS5VcGdyYWRlc1tpXS5wb29sID09ICJ0b2dnbGUiIHx8DQogICAgICAgICAgICBsZWZ0b3V0LmluZGV4T2YoR2FtZS5VcGdyYWRlc1tpXS5uYW1lKSAhPSAtMSkNCiAgICAgICAgKSB7DQogICAgICAgIH0gZWxzZSBpZiAob24pIEdhbWUuVXBncmFkZXNbaV0uZWFybigpOw0KICAgICAgICBlbHNlIGlmICghb24pIEdhbWUuVXBncmFkZXNbaV0ubG9zZSgpOw0KICAgICAgfQ0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgR2FtZS5wb3B1cHMgPSAxOw0KICAgIH07DQogICAgR2FtZS5TZXRBbGxBY2hpZXZzID0gZnVuY3Rpb24gKG9uKSB7DQogICAgICBHYW1lLnBvcHVwcyA9IDA7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuQWNoaWV2ZW1lbnRzKSB7DQogICAgICAgIGlmIChvbiAmJiBHYW1lLkFjaGlldmVtZW50c1tpXS5wb29sICE9ICJkdW5nZW9uIikNCiAgICAgICAgICBHYW1lLldpbihHYW1lLkFjaGlldmVtZW50c1tpXS5uYW1lKTsNCiAgICAgICAgZWxzZSBpZiAoIW9uKSBHYW1lLlJlbW92ZUFjaGlldihHYW1lLkFjaGlldmVtZW50c1tpXS5uYW1lKTsNCiAgICAgIH0NCiAgICAgIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7DQogICAgICBHYW1lLnBvcHVwcyA9IDE7DQogICAgfTsNCiAgICBHYW1lLkdldEFsbERlYnVncyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUucG9wdXBzID0gMDsNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlcykgew0KICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc1tpXS5wb29sID09ICJkZWJ1ZyIpIEdhbWUuVXBncmFkZXNbaV0uZWFybigpOw0KICAgICAgfQ0KICAgICAgR2FtZS51cGdyYWRlc1RvUmVidWlsZCA9IDE7DQogICAgICBHYW1lLnJlY2FsY3VsYXRlR2FpbnMgPSAxOw0KICAgICAgR2FtZS5wb3B1cHMgPSAxOw0KICAgIH07DQogICAgR2FtZS5NYXhTcGVjaWFscyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIEdhbWUuZHJhZ29uTGV2ZWwgPSBHYW1lLmRyYWdvbkxldmVscy5sZW5ndGggLSAxOw0KICAgICAgR2FtZS5zYW50YUxldmVsID0gR2FtZS5zYW50YUxldmVscy5sZW5ndGggLSAxOw0KICAgIH07DQoNCiAgICBHYW1lLlNlc2FtZVJlc2V0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG5hbWUgPSBHYW1lLmJha2VyeU5hbWU7DQogICAgICBHYW1lLkhhcmRSZXNldCgyKTsNCiAgICAgIEdhbWUuYmFrZXJ5TmFtZSA9IG5hbWU7DQogICAgICBHYW1lLmJha2VyeU5hbWVSZWZyZXNoKCk7DQogICAgICBHYW1lLkFjaGlldmVtZW50c1siQ2hlYXRlZCBjb29raWVzIHRhc3RlIGF3ZnVsIl0ud29uID0gMTsNCiAgICB9Ow0KDQogICAgR2FtZS5kZWJ1Z1RpbWVyc09uID0gMDsNCiAgICBHYW1lLnNlc2FtZSA9IDA7DQogICAgR2FtZS5PcGVuU2VzYW1lID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJpY29uIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotOXB4O3RvcDotNnB4O2JhY2tncm91bmQtcG9zaXRpb246JyArDQogICAgICAgIC0xMCAqIDQ4ICsNCiAgICAgICAgInB4ICIgKw0KICAgICAgICAtNiAqIDQ4ICsNCiAgICAgICAgJ3B4OyI+PC9kaXY+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGRpdiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7bGVmdDowcHg7dG9wOjBweDt6LWluZGV4OjEwO2ZvbnQtc2l6ZToxMHB4O2JhY2tncm91bmQ6IzAwMDtwYWRkaW5nOjFweDsiIGlkPSJmcHNDb3VudGVyIj48L2Rpdj4nOw0KDQogICAgICBzdHIgKz0gJzxkaXYgaWQ9ImRldkNvbnNvbGVDb250ZW50Ij4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8ZGl2IGNsYXNzPSJ0aXRsZSIgc3R5bGU9ImZvbnQtc2l6ZToxNHB4O21hcmdpbjo2cHg7Ij5EZXYgdG9vbHM8L2Rpdj4nOw0KDQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5Bc2NlbmQoMSk7Ij5Bc2NlbmQ8L2E+JzsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLmNvb2tpZXMqPTEwO0dhbWUuY29va2llc0Vhcm5lZCo9MTA7Ij54MTA8L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLmNvb2tpZXMvPTEwO0dhbWUuY29va2llc0Vhcm5lZC89MTA7Ij4vMTA8L2E+PGJyPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5jb29raWVzKj0xMDAwO0dhbWUuY29va2llc0Vhcm5lZCo9MTAwMDsiPngxazwvYT4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuY29va2llcy89MTAwMDtHYW1lLmNvb2tpZXNFYXJuZWQvPTEwMDA7Ij4vMWs8L2E+PGJyPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpe0dhbWUuT2JqZWN0c1tpXS5idXkoMTAwKTt9Ij5CdXkgMTAwIG9mIGFsbDwvYT4nOyAvL2ZvciAodmFyIG49MDtuPDEwMDtuKyspe2ZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKXtHYW1lLk9iamVjdHNbaV0uYnV5KDEpO319DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpe0dhbWUuT2JqZWN0c1tpXS5zZWxsKDEwMCk7fSI+U2VsbCAxMDAgb2YgYWxsPC9hPjxicj4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuZ2Fpbkx1bXBzKDEwKTsiPisxMCBsdW1wczwvYT4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9ImZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKXtHYW1lLk9iamVjdHNbaV0ubGV2ZWw9MDtHYW1lLk9iamVjdHNbaV0ub25NaW5pZ2FtZT1mYWxzZTtHYW1lLk9iamVjdHNbaV0ucmVmcmVzaCgpO31HYW1lLnJlY2FsY3VsYXRlR2FpbnM9MTsiPlJlc2V0IGxldmVsczwvYT4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuY29va2llc1Jlc2V0Kz1HYW1lLkhvd01hbnlDb29raWVzUmVzZXQoKEdhbWUuaGVhdmVubHlDaGlwc3x8MSkqMTAwMCk7R2FtZS5FYXJuSGVhdmVubHlDaGlwcygwLHRydWUpO0dhbWUucmVjYWxjdWxhdGVHYWlucz0xOyI+SEMgeDFrPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5jb29raWVzUmVzZXQ9KEdhbWUuaGVhdmVubHlDaGlwczwxMDA/MDpHYW1lLkhvd01hbnlDb29raWVzUmVzZXQoTWF0aC5mbG9vcihHYW1lLmhlYXZlbmx5Q2hpcHMqMC4wMDEpKSk7R2FtZS5jb29raWVzUmVzZXQ9TWF0aC5tYXgoR2FtZS5jb29raWVzUmVzZXQsMCk7R2FtZS5FYXJuSGVhdmVubHlDaGlwcygwLHRydWUpO2lmIChHYW1lLmNvb2tpZXNSZXNldDw9MCl7R2FtZS5oZWF2ZW5seUNoaXBzPTA7fUdhbWUucmVjYWxjdWxhdGVHYWlucz0xOyI+SEMgLzFrPC9hPjxicj4nOyAvL3dlZSBiaXQgaW5hY2N1cmF0ZQ0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuY29va2llc0Vhcm5lZD0wO0dhbWUucmVjYWxjdWxhdGVHYWlucz0xOyI+UmVzZXQgY29va2llcyBlYXJuZWQ8L2E+PGJyPic7DQogICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gd2FybmluZyIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLlJ1aW5UaGVGdW4oMSk7Ij5SdWluIFRoZSBGdW48L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiB3YXJuaW5nIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuU2VzYW1lUmVzZXQoKTsiPldpcGU8L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLkdldEFsbERlYnVncygpOyI+QWxsIGRlYnVnczwvYT4nOw0KICAgICAgc3RyICs9DQogICAgICAgICc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnICsNCiAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICc9IkdhbWUuZGVidWdUaW1lcnNPbj0hR2FtZS5kZWJ1Z1RpbWVyc09uO0dhbWUuT3BlblNlc2FtZSgpOyI+VGltZXJzICcgKw0KICAgICAgICAoR2FtZS5kZWJ1Z1RpbWVyc09uID8gIk9uIiA6ICJPZmYiKSArDQogICAgICAgICI8L2E+PGJyPiI7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5TZXRBbGxVcGdyYWRlcygwKTsiPk5vIHVwZ3JhZGVzPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5TZXRBbGxVcGdyYWRlcygxKTsiPkFsbCB1cGdyYWRlczwvYT48YnI+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLlNldEFsbEFjaGlldnMoMCk7Ij5ObyBhY2hpZXZzPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5TZXRBbGxBY2hpZXZzKDEpOyI+QWxsIGFjaGlldnM8L2E+PGJyPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5zYW50YUxldmVsPTA7R2FtZS5kcmFnb25MZXZlbD0wOyI+UmVzZXQgc3BlY2lhbHM8L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLk1heFNwZWNpYWxzKCk7Ij5NYXggc3BlY2lhbHM8L2E+PGJyPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5sdW1wUmVmaWxsPTA7LypEYXRlLm5vdygpLUdhbWUuZ2V0THVtcFJlZmlsbE1heCgpOyovIj5SZXNldCByZWZpbGxzPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5FZGl0QXNjZW5kKCk7Ij4nICsNCiAgICAgICAgKEdhbWUuRGVidWdnaW5nUHJlc3RpZ2UgPyAiRXhpdCBBc2NlbmQgRWRpdCIgOiAiQXNjZW5kIEVkaXQiKSArDQogICAgICAgICI8L2E+IjsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAnPSJHYW1lLkRlYnVnVXBncmFkZUNwUygpOyI+RGVidWcgdXBncmFkZXMgQ3BTPC9hPic7DQogICAgICBzdHIgKz0NCiAgICAgICAgJzxhIGNsYXNzPSJvcHRpb24gbmVhdG8iICcgKw0KICAgICAgICBHYW1lLmNsaWNrU3RyICsNCiAgICAgICAgJz0iR2FtZS5zZWVkPUdhbWUubWFrZVNlZWQoKTsiPlJlLXNlZWQ8L2E+JzsNCiAgICAgIHN0ciArPQ0KICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgIEdhbWUuY2xpY2tTdHIgKw0KICAgICAgICAiPVwiR2FtZS5oZXJhbGRzPTEwMDtsKCdoZXJhbGRzQW1vdW50JykudGV4dENvbnRlbnQ9R2FtZS5oZXJhbGRzO0dhbWUuZXh0ZXJuYWxEYXRhTG9hZGVkPXRydWU7R2FtZS5yZWNhbGN1bGF0ZUdhaW5zPTE7XCI+TWF4IGhlcmFsZHM8L2E+IjsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5nb2xkZW5Db29raWVDaG9pY2VzLmxlbmd0aCAvIDI7IGkrKykgew0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJyArDQogICAgICAgICAgR2FtZS5jbGlja1N0ciArDQogICAgICAgICAgIj1cInZhciBuZXdTaGltbWVyPW5ldyBHYW1lLnNoaW1tZXIoJ2dvbGRlbicpO25ld1NoaW1tZXIuZm9yY2U9JyIgKw0KICAgICAgICAgIEdhbWUuZ29sZGVuQ29va2llQ2hvaWNlc1tpICogMiArIDFdICsNCiAgICAgICAgICAiJztcIj4iICsNCiAgICAgICAgICBHYW1lLmdvbGRlbkNvb2tpZUNob2ljZXNbaSAqIDJdICsNCiAgICAgICAgICAiPC9hPiI7DQogICAgICAgIC8vc3RyKz0nPGEgY2xhc3M9Im9wdGlvbiBuZWF0byIgJytHYW1lLmNsaWNrU3RyKyc9IkdhbWUuZ29sZGVuQ29va2llLmZvcmNlPVwnJytHYW1lLmdvbGRlbkNvb2tpZS5jaG9pY2VzW2kqMisxXSsnXCc7R2FtZS5nb2xkZW5Db29raWUuc3Bhd24oKTsiPicrR2FtZS5nb2xkZW5Db29raWUuY2hvaWNlc1tpKjJdKyc8L2E+JzsNCiAgICAgICAgLy9zdHIrPSc8YSBjbGFzcz0ib3B0aW9uIG5lYXRvIiAnK0dhbWUuY2xpY2tTdHIrJz0iR2FtZS5nb2xkZW5Db29raWUuY2xpY2soMCxcJycrR2FtZS5nb2xkZW5Db29raWUuY2hvaWNlc1tpKjIrMV0rJ1wnKTsiPicrR2FtZS5nb2xkZW5Db29raWUuY2hvaWNlc1tpKjJdKyc8L2E+JzsNCiAgICAgIH0NCiAgICAgIHN0ciArPSAiPC9kaXY+IjsNCg0KICAgICAgbCgiZGV2Q29uc29sZSIpLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgaWYgKCFsKCJmcHNHcmFwaCIpKSB7DQogICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsNCiAgICAgICAgZGl2LmlkID0gImZwc0dyYXBoIjsNCiAgICAgICAgZGl2LndpZHRoID0gMTI4Ow0KICAgICAgICBkaXYuaGVpZ2h0ID0gNjQ7DQogICAgICAgIGRpdi5zdHlsZS5vcGFjaXR5ID0gMC41Ow0KICAgICAgICBkaXYuc3R5bGUucG9pbnRlckV2ZW50cyA9ICJub25lIjsNCiAgICAgICAgZGl2LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICIwJSAwJSI7DQogICAgICAgIGRpdi5zdHlsZS50cmFuc2Zvcm0gPSAic2NhbGUoMC43NSkiOw0KICAgICAgICAvL2woJ2RldkNvbnNvbGUnKS5hcHBlbmRDaGlsZChkaXYpOw0KICAgICAgICBsKCJkZXZDb25zb2xlIikucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoDQogICAgICAgICAgZGl2LA0KICAgICAgICAgIGwoImRldkNvbnNvbGUiKS5uZXh0U2libGluZw0KICAgICAgICApOw0KICAgICAgICBHYW1lLmZwc0dyYXBoID0gZGl2Ow0KICAgICAgICBHYW1lLmZwc0dyYXBoQ3R4ID0gR2FtZS5mcHNHcmFwaC5nZXRDb250ZXh0KCIyZCIsIHsgYWxwaGE6IGZhbHNlIH0pOw0KICAgICAgICB2YXIgY3R4ID0gR2FtZS5mcHNHcmFwaEN0eDsNCiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjMDAwIjsNCiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIDEyOCwgNjQpOw0KICAgICAgfQ0KDQogICAgICBsKCJkZWJ1ZyIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgR2FtZS5zZXNhbWUgPSAxOw0KICAgICAgR2FtZS5BY2hpZXZlbWVudHNbIkNoZWF0ZWQgY29va2llcyB0YXN0ZSBhd2Z1bCJdLndvbiA9IDE7DQogICAgfTsNCg0KICAgIEdhbWUuRWRpdEFzY2VuZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghR2FtZS5EZWJ1Z2dpbmdQcmVzdGlnZSkgew0KICAgICAgICBHYW1lLkRlYnVnZ2luZ1ByZXN0aWdlID0gdHJ1ZTsNCiAgICAgICAgR2FtZS5Bc2NlbmRUaW1lciA9IDA7DQogICAgICAgIEdhbWUuT25Bc2NlbmQgPSAxOw0KICAgICAgICBHYW1lLnJlbW92ZUNsYXNzKCJhc2NlbmRJbnRybyIpOw0KICAgICAgICBHYW1lLmFkZENsYXNzKCJhc2NlbmRpbmciKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIEdhbWUuRGVidWdnaW5nUHJlc3RpZ2UgPSBmYWxzZTsNCiAgICAgIH0NCiAgICAgIEdhbWUuQnVpbGRBc2NlbmRUcmVlKCk7DQogICAgICBHYW1lLk9wZW5TZXNhbWUoKTsNCiAgICB9Ow0KDQogICAgLy9leHBlcmltZW50YWwgZGVidWdnaW5nIGZ1bmN0aW9uIHRoYXQgY3ljbGVzIHRocm91Z2ggZXZlcnkgb3duZWQgdXBncmFkZSwgdHVybnMgaXQgb2ZmIGFuZCBvbiwgYW5kIGxpc3RzIGhvdyBtdWNoIGVhY2ggdXBncmFkZSBpcyBwYXJ0aWNpcGF0aW5nIHRvIENwUw0KICAgIEdhbWUuZGVidWdnZWRVcGdyYWRlQ3BTID0gW107DQogICAgR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcENsaWNrID0gW107DQogICAgR2FtZS5kZWJ1Z0NvbG9ycyA9IFsNCiAgICAgICIjMzIyIiwNCiAgICAgICIjNDExIiwNCiAgICAgICIjNjAwIiwNCiAgICAgICIjOTAwIiwNCiAgICAgICIjZjMwIiwNCiAgICAgICIjZjkwIiwNCiAgICAgICIjZmYwIiwNCiAgICAgICIjOWYwIiwNCiAgICAgICIjMGY5IiwNCiAgICAgICIjMDlmIiwNCiAgICAgICIjOTBmIiwNCiAgICBdOw0KICAgIEdhbWUuRGVidWdVcGdyYWRlQ3BTID0gZnVuY3Rpb24gKCkgew0KICAgICAgR2FtZS5DYWxjdWxhdGVHYWlucygpOw0KICAgICAgR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcFMgPSBbXTsNCiAgICAgIEdhbWUuZGVidWdnZWRVcGdyYWRlQ3BDbGljayA9IFtdOw0KICAgICAgdmFyIENwUyA9IEdhbWUuY29va2llc1BzOw0KICAgICAgdmFyIENwQ2xpY2sgPSBHYW1lLmNvbXB1dGVkTW91c2VDcHM7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuVXBncmFkZXMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5VcGdyYWRlc1tpXTsNCiAgICAgICAgaWYgKG1lLmJvdWdodCkgew0KICAgICAgICAgIG1lLmJvdWdodCA9IDA7DQogICAgICAgICAgR2FtZS5DYWxjdWxhdGVHYWlucygpOw0KICAgICAgICAgIC8vR2FtZS5kZWJ1Z2dlZFVwZ3JhZGVDcFNbbWUubmFtZV09Q3BTLUdhbWUuY29va2llc1BzOw0KICAgICAgICAgIEdhbWUuZGVidWdnZWRVcGdyYWRlQ3BTW21lLm5hbWVdID0gQ3BTIC8gKEdhbWUuY29va2llc1BzIHx8IDEpIC0gMTsNCiAgICAgICAgICBHYW1lLmRlYnVnZ2VkVXBncmFkZUNwQ2xpY2tbbWUubmFtZV0gPQ0KICAgICAgICAgICAgQ3BDbGljayAvIChHYW1lLmNvbXB1dGVkTW91c2VDcHMgfHwgMSkgLSAxOw0KICAgICAgICAgIG1lLmJvdWdodCA9IDE7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIEdhbWUuQ2FsY3VsYXRlR2FpbnMoKTsNCiAgICB9Ow0KDQogICAgR2FtZS52YW5pbGxhID0gMDsgLy9ldmVyeXRoaW5nIHdlIGNyZWF0ZSBiZXlvbmQgdGhpcyB3aWxsIGJlIHNhdmVkIGluIG1vZCBzdHJ1Y3R1cmVzDQoNCiAgICBHYW1lLmxhdW5jaE1vZHMoKTsNCg0KICAgIEdhbWUucnVuTW9kSG9vaygiY3JlYXRlIik7IC8vZGVjbGFyZSBjdXN0b20gdXBncmFkZXMvYWNoaWV2cy9idWZmcy9idWlsZGluZ3MgaGVyZSENCg0KICAgIEJlYXV0aWZ5QWxsKCk7DQoNCiAgICBpZiAoIUFwcCkgew0KICAgICAgaWYgKCFHYW1lLkxvYWRTYXZlKCkpIHsNCiAgICAgICAgLy90cnkgdG8gbG9hZCB0aGUgc2F2ZSB3aGVuIHdlIG9wZW4gdGhlIHBhZ2UuIGlmIHRoaXMgZmFpbHMsIHRyeSB0byBicnV0ZS1mb3JjZSBpdCBoYWxmIGEgc2Vjb25kIGxhdGVyDQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHZhciBsb2NhbCA9IGxvY2FsU3RvcmFnZUdldChHYW1lLlNhdmVUbyk7DQogICAgICAgICAgR2FtZS5Mb2FkU2F2ZShsb2NhbCk7DQogICAgICAgIH0sIDUwMCk7DQogICAgICB9DQogICAgfSBlbHNlIGlmIChBcHAuc2F2ZURhdGEpDQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5Mb2FkU2F2ZShBcHAuc2F2ZURhdGEpOw0KICAgICAgfSwgMTAwKTsNCiAgICBlbHNlDQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgR2FtZS5Mb2FkU2F2ZSgpOw0KICAgICAgfSwgMTAwKTsNCg0KICAgIEdhbWUucmVhZHkgPSAxOw0KICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKA0KICAgICAgICB0eXBlb2Ygc2hvd0FkcyA9PT0gInVuZGVmaW5lZCIgJiYNCiAgICAgICAgKCFsKCJkZXRlY3RBZHMiKSB8fCBsKCJkZXRlY3RBZHMiKS5jbGllbnRIZWlnaHQgPCAxKQ0KICAgICAgKQ0KICAgICAgICBHYW1lLmFkZENsYXNzKCJub0FkcyIpOw0KICAgIH0sIDUwMCk7DQogICAgbCgib2ZmR2FtZU1lc3NhZ2UiKS5pbm5lckhUTUwgPSAiIjsNCiAgICBsKCJvZmZHYW1lTWVzc2FnZVdyYXAiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgIEdhbWUuTG9vcCgpOw0KICAgIEdhbWUuRHJhdygpOw0KDQogICAgUGxheUN1ZSgibGF1bmNoIik7DQoNCiAgICBpZiAoIUVOKSB7DQogICAgICB2YXIgYWRhcHRXaWR0aCA9IGZ1bmN0aW9uIChub2RlKSB7DQogICAgICAgIHZhciBlbCA9IG5vZGUuZmlyc3RDaGlsZDsNCiAgICAgICAgdmFyIHdpZHRoID0gZWwuY2xpZW50V2lkdGg7DQogICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoInN1YkJ1dHRvbiIpKSB7DQogICAgICAgICAgaWYgKHdpZHRoIC8gOTUgPiAxKSBlbC5zdHlsZS5wYWRkaW5nID0gIjZweCAwcHgiOw0KICAgICAgICB9DQogICAgICAgIHdpZHRoID0gd2lkdGggLyA5NTsNCiAgICAgICAgaWYgKHdpZHRoID4gMSkgew0KICAgICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0NCiAgICAgICAgICAgIChwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZm9udFNpemUpICogMSkgLyB3aWR0aCArICJweCI7DQogICAgICAgICAgZWwuc3R5bGUudHJhbnNmb3JtID0gInNjYWxlKDEsIiArIHdpZHRoICsgIikiOw0KICAgICAgICB9DQogICAgICB9Ow0KICAgICAgbCgicHJlZnNCdXR0b24iKS5maXJzdENoaWxkLmlubmVySFRNTCA9IGxvYygiT3B0aW9ucyIpOw0KICAgICAgbCgic3RhdHNCdXR0b24iKS5maXJzdENoaWxkLmlubmVySFRNTCA9IGxvYygiU3RhdHMiKTsNCiAgICAgIGwoImxvZ0J1dHRvbiIpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MID0gbG9jKCJJbmZvIik7DQogICAgICBsKCJsZWdhY3lCdXR0b24iKS5maXJzdENoaWxkLmlubmVySFRNTCA9IGxvYygiTGVnYWN5Iik7DQogICAgICBhZGFwdFdpZHRoKGwoInByZWZzQnV0dG9uIikpOw0KICAgICAgYWRhcHRXaWR0aChsKCJzdGF0c0J1dHRvbiIpKTsNCiAgICAgIGFkYXB0V2lkdGgobCgibG9nQnV0dG9uIikpOw0KICAgICAgYWRhcHRXaWR0aChsKCJsZWdhY3lCdXR0b24iKSk7DQogICAgICBsKCJjaGVja0ZvclVwZGF0ZSIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQgPSBsb2MoIk5ldyB1cGRhdGUhIik7DQogICAgICBsKCJidWlsZGluZ3NUaXRsZSIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQgPSBsb2MoIkJ1aWxkaW5ncyIpOw0KICAgICAgbCgic3RvcmVUaXRsZSIpLmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQgPSBsb2MoIlN0b3JlIik7DQogICAgfQ0KICB9Ow0KICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCglMT0dJQw0KCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQogIEdhbWUuTG9naWMgPSBmdW5jdGlvbiAoKSB7DQogICAgR2FtZS5ib3VuZHMgPSBHYW1lLmwuZ2V0Qm91bmRzKCk7DQoNCiAgICBpZiAoIUdhbWUuT25Bc2NlbmQgJiYgR2FtZS5Bc2NlbmRUaW1lciA9PSAwKSB7DQogICAgICBmb3IgKHZhciBpIGluIEdhbWUuT2JqZWN0cykgew0KICAgICAgICBpZiAoR2FtZS5PYmplY3RzW2ldLmVhY2hGcmFtZSkgR2FtZS5PYmplY3RzW2ldLmVhY2hGcmFtZSgpOw0KICAgICAgfQ0KICAgICAgR2FtZS5VcGRhdGVTcGVjaWFsKCk7DQogICAgICBHYW1lLlVwZGF0ZUdyYW5kbWFwb2NhbHlwc2UoKTsNCg0KICAgICAgLy90aGVzZSBhcmUga2luZGEgZnVuDQogICAgICAvL2lmIChHYW1lLkJpZ0Nvb2tpZVN0YXRlPT0yICYmICFHYW1lLnByb21wdE9uICYmIEdhbWUuU2Nyb2xsIT0wKSBHYW1lLkNsaWNrQ29va2llKCk7DQogICAgICAvL2lmIChHYW1lLkJpZ0Nvb2tpZVN0YXRlPT0xICYmICFHYW1lLnByb21wdE9uKSBHYW1lLkNsaWNrQ29va2llKCk7DQoNCiAgICAgIC8vaGFuZGxlIGdyYXBoaWMgc3R1ZmYNCiAgICAgIGlmIChHYW1lLnByZWZzLndvYmJseSkgew0KICAgICAgICBpZiAoR2FtZS5CaWdDb29raWVTdGF0ZSA9PSAxKSBHYW1lLkJpZ0Nvb2tpZVNpemVUID0gMC45ODsNCiAgICAgICAgZWxzZSBpZiAoR2FtZS5CaWdDb29raWVTdGF0ZSA9PSAyKSBHYW1lLkJpZ0Nvb2tpZVNpemVUID0gMS4wNTsNCiAgICAgICAgZWxzZSBHYW1lLkJpZ0Nvb2tpZVNpemVUID0gMTsNCiAgICAgICAgR2FtZS5CaWdDb29raWVTaXplRCArPQ0KICAgICAgICAgIChHYW1lLkJpZ0Nvb2tpZVNpemVUIC0gR2FtZS5CaWdDb29raWVTaXplKSAqIDAuNzU7DQogICAgICAgIEdhbWUuQmlnQ29va2llU2l6ZUQgKj0gMC43NTsNCiAgICAgICAgR2FtZS5CaWdDb29raWVTaXplICs9IEdhbWUuQmlnQ29va2llU2l6ZUQ7DQogICAgICAgIEdhbWUuQmlnQ29va2llU2l6ZSA9IE1hdGgubWF4KDAuMSwgR2FtZS5CaWdDb29raWVTaXplKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmIChHYW1lLkJpZ0Nvb2tpZVN0YXRlID09IDEpDQogICAgICAgICAgR2FtZS5CaWdDb29raWVTaXplICs9ICgwLjk4IC0gR2FtZS5CaWdDb29raWVTaXplKSAqIDAuNTsNCiAgICAgICAgZWxzZSBpZiAoR2FtZS5CaWdDb29raWVTdGF0ZSA9PSAyKQ0KICAgICAgICAgIEdhbWUuQmlnQ29va2llU2l6ZSArPSAoMS4wNSAtIEdhbWUuQmlnQ29va2llU2l6ZSkgKiAwLjU7DQogICAgICAgIGVsc2UgR2FtZS5CaWdDb29raWVTaXplICs9ICgxIC0gR2FtZS5CaWdDb29raWVTaXplKSAqIDAuNTsNCiAgICAgIH0NCiAgICAgIEdhbWUucGFydGljbGVzVXBkYXRlKCk7DQoNCiAgICAgIGlmIChHYW1lLm1vdXNlUG9pbnRlcikgbCgic2VjdGlvbkxlZnQiKS5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7DQogICAgICBlbHNlIGwoInNlY3Rpb25MZWZ0Iikuc3R5bGUuY3Vyc29yID0gImF1dG8iOw0KICAgICAgR2FtZS5tb3VzZVBvaW50ZXIgPSAwOw0KDQogICAgICAvL2hhbmRsZSBtaWxrIGFuZCBtaWxrIGFjY2Vzc29yaWVzDQogICAgICBHYW1lLm1pbGtQcm9ncmVzcyA9IEdhbWUuQWNoaWV2ZW1lbnRzT3duZWQgLyAyNTsNCiAgICAgIGlmIChHYW1lLm1pbGtQcm9ncmVzcyA+PSAwLjUpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gaGVscGVycyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDEpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gd29ya2VycyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDIpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gZW5naW5lZXJzIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gMykgR2FtZS5VbmxvY2soIktpdHRlbiBvdmVyc2VlcnMiKTsNCiAgICAgIGlmIChHYW1lLm1pbGtQcm9ncmVzcyA+PSA0KSBHYW1lLlVubG9jaygiS2l0dGVuIG1hbmFnZXJzIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gNSkgR2FtZS5VbmxvY2soIktpdHRlbiBhY2NvdW50YW50cyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDYpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gc3BlY2lhbGlzdHMiKTsNCiAgICAgIGlmIChHYW1lLm1pbGtQcm9ncmVzcyA+PSA3KSBHYW1lLlVubG9jaygiS2l0dGVuIGV4cGVydHMiKTsNCiAgICAgIGlmIChHYW1lLm1pbGtQcm9ncmVzcyA+PSA4KSBHYW1lLlVubG9jaygiS2l0dGVuIGNvbnN1bHRhbnRzIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gOSkNCiAgICAgICAgR2FtZS5VbmxvY2soIktpdHRlbiBhc3Npc3RhbnRzIHRvIHRoZSByZWdpb25hbCBtYW5hZ2VyIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gMTApIEdhbWUuVW5sb2NrKCJLaXR0ZW4gbWFya2V0ZWVycyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDExKSBHYW1lLlVubG9jaygiS2l0dGVuIGFuYWx5c3RzIik7DQogICAgICBpZiAoR2FtZS5taWxrUHJvZ3Jlc3MgPj0gMTIpIEdhbWUuVW5sb2NrKCJLaXR0ZW4gZXhlY3V0aXZlcyIpOw0KICAgICAgaWYgKEdhbWUubWlsa1Byb2dyZXNzID49IDEzKSBHYW1lLlVubG9jaygiS2l0dGVuIGFkbWlucyIpOw0KICAgICAgR2FtZS5taWxrSCA9IE1hdGgubWluKDEsIEdhbWUubWlsa1Byb2dyZXNzKSAqIDAuMzU7DQogICAgICBHYW1lLm1pbGtIZCArPSAoR2FtZS5taWxrSCAtIEdhbWUubWlsa0hkKSAqIDAuMDI7DQoNCiAgICAgIEdhbWUuTWlsayA9DQogICAgICAgIEdhbWUuTWlsa3NbDQogICAgICAgICAgTWF0aC5taW4oTWF0aC5mbG9vcihHYW1lLm1pbGtQcm9ncmVzcyksIEdhbWUuTWlsa3MubGVuZ3RoIC0gMSkNCiAgICAgICAgXTsNCg0KICAgICAgaWYgKEdhbWUuYXV0b2NsaWNrZXJEZXRlY3RlZCA+IDApIEdhbWUuYXV0b2NsaWNrZXJEZXRlY3RlZC0tOw0KDQogICAgICAvL2hhbmRsZSByZXNlYXJjaA0KICAgICAgaWYgKEdhbWUucmVzZWFyY2hUID4gMCkgew0KICAgICAgICBHYW1lLnJlc2VhcmNoVC0tOw0KICAgICAgfQ0KICAgICAgaWYgKEdhbWUucmVzZWFyY2hUID09IDAgJiYgR2FtZS5uZXh0UmVzZWFyY2gpIHsNCiAgICAgICAgaWYgKCFHYW1lLkhhcyhHYW1lLlVwZ3JhZGVzQnlJZFtHYW1lLm5leHRSZXNlYXJjaF0ubmFtZSkpIHsNCiAgICAgICAgICBHYW1lLlVubG9jayhHYW1lLlVwZ3JhZGVzQnlJZFtHYW1lLm5leHRSZXNlYXJjaF0ubmFtZSk7DQogICAgICAgICAgR2FtZS5Ob3RpZnkoDQogICAgICAgICAgICBsb2MoIlJlc2VhcmNoIGNvbXBsZXRlIiksDQogICAgICAgICAgICBsb2MoDQogICAgICAgICAgICAgICJZb3UgaGF2ZSBkaXNjb3ZlcmVkOiA8Yj4lMTwvYj4uIiwNCiAgICAgICAgICAgICAgR2FtZS5VcGdyYWRlc0J5SWRbR2FtZS5uZXh0UmVzZWFyY2hdLmRuYW1lDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgR2FtZS5VcGdyYWRlc0J5SWRbR2FtZS5uZXh0UmVzZWFyY2hdLmljb24NCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIEdhbWUubmV4dFJlc2VhcmNoID0gMDsNCiAgICAgICAgR2FtZS5yZXNlYXJjaFQgPSAtMTsNCiAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgIH0NCiAgICAgIC8vaGFuZGxlIHNlYXNvbnMNCiAgICAgIGlmIChHYW1lLnNlYXNvblQgPiAwKSB7DQogICAgICAgIEdhbWUuc2Vhc29uVC0tOw0KICAgICAgfQ0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLnNlYXNvblQgPD0gMCAmJg0KICAgICAgICBHYW1lLnNlYXNvbiAhPSAiIiAmJg0KICAgICAgICBHYW1lLnNlYXNvbiAhPSBHYW1lLmJhc2VTZWFzb24gJiYNCiAgICAgICAgIUdhbWUuSGFzKCJFdGVybmFsIHNlYXNvbnMiKQ0KICAgICAgKSB7DQogICAgICAgIEdhbWUuTm90aWZ5KA0KICAgICAgICAgIEdhbWUuc2Vhc29uc1tHYW1lLnNlYXNvbl0ub3ZlciwNCiAgICAgICAgICAiIiwNCiAgICAgICAgICBHYW1lLnNlYXNvbnNbR2FtZS5zZWFzb25dLnRyaWdnZXJVcGdyYWRlLmljb24NCiAgICAgICAgKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJTZWFzb24gc3dpdGNoZXIiKSkgew0KICAgICAgICAgIEdhbWUuVW5sb2NrKEdhbWUuc2Vhc29uc1tHYW1lLnNlYXNvbl0udHJpZ2dlcik7DQogICAgICAgICAgR2FtZS5zZWFzb25zW0dhbWUuc2Vhc29uXS50cmlnZ2VyVXBncmFkZS5ib3VnaHQgPSAwOw0KICAgICAgICB9DQogICAgICAgIEdhbWUuc2Vhc29uID0gR2FtZS5iYXNlU2Vhc29uOw0KICAgICAgICBHYW1lLnNlYXNvblQgPSAtMTsNCiAgICAgIH0NCg0KICAgICAgLy9wcmVzcyBjdHJsIHRvIGJ1bGstYnV5IDEwLCBzaGlmdCB0byBidWxrLWJ1eSAxMDANCiAgICAgIGlmICghR2FtZS5wcm9tcHRPbikgew0KICAgICAgICBpZiAoKEdhbWUua2V5c1sxNl0gfHwgR2FtZS5rZXlzWzE3XSkgJiYgIUdhbWUuYnV5QnVsa1Nob3J0Y3V0KSB7DQogICAgICAgICAgR2FtZS5idXlCdWxrT2xkID0gR2FtZS5idXlCdWxrOw0KICAgICAgICAgIGlmIChHYW1lLmtleXNbMTZdKSBHYW1lLmJ1eUJ1bGsgPSAxMDA7DQogICAgICAgICAgaWYgKEdhbWUua2V5c1sxN10pIEdhbWUuYnV5QnVsayA9IDEwOw0KICAgICAgICAgIEdhbWUuYnV5QnVsa1Nob3J0Y3V0ID0gMTsNCiAgICAgICAgICBHYW1lLnN0b3JlQnVsa0J1dHRvbigtMSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmICghR2FtZS5rZXlzWzE2XSAmJiAhR2FtZS5rZXlzWzE3XSAmJiBHYW1lLmJ1eUJ1bGtTaG9ydGN1dCkgew0KICAgICAgICAvL3JlbGVhc2UNCiAgICAgICAgR2FtZS5idXlCdWxrID0gR2FtZS5idXlCdWxrT2xkOw0KICAgICAgICBHYW1lLmJ1eUJ1bGtTaG9ydGN1dCA9IDA7DQogICAgICAgIEdhbWUuc3RvcmVCdWxrQnV0dG9uKC0xKTsNCiAgICAgIH0NCg0KICAgICAgLy9oYW5kbGUgY29va2llcw0KICAgICAgaWYgKEdhbWUucmVjYWxjdWxhdGVHYWlucykgR2FtZS5DYWxjdWxhdGVHYWlucygpOw0KICAgICAgR2FtZS5FYXJuKEdhbWUuY29va2llc1BzIC8gR2FtZS5mcHMpOyAvL2FkZCBjb29raWVzIHBlciBzZWNvbmQNCg0KICAgICAgLy9ncm93IGx1bXBzDQogICAgICBHYW1lLmRvTHVtcHMoKTsNCg0KICAgICAgLy9taW5pZ2FtZXMNCiAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgIHZhciBtZSA9IEdhbWUuT2JqZWN0c1tpXTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuaXNNaW5pZ2FtZVJlYWR5KG1lKSAmJg0KICAgICAgICAgIG1lLm1pbmlnYW1lLmxvZ2ljICYmDQogICAgICAgICAgR2FtZS5hc2NlbnNpb25Nb2RlICE9IDENCiAgICAgICAgKQ0KICAgICAgICAgIG1lLm1pbmlnYW1lLmxvZ2ljKCk7DQogICAgICB9DQoNCiAgICAgIGlmIChHYW1lLnNwZWNpYWxUYWIgIT0gIiIgJiYgR2FtZS5UICUgKEdhbWUuZnBzICogMykgPT0gMCkNCiAgICAgICAgR2FtZS5Ub2dnbGVTcGVjaWFsTWVudSgxKTsNCg0KICAgICAgLy93cmlua2xlcnMNCiAgICAgIGlmIChHYW1lLmNwc1N1Y2tlZCA+IDApIHsNCiAgICAgICAgR2FtZS5EaXNzb2x2ZSgoR2FtZS5jb29raWVzUHMgLyBHYW1lLmZwcykgKiBHYW1lLmNwc1N1Y2tlZCk7DQogICAgICAgIEdhbWUuY29va2llc1N1Y2tlZCArPSAoR2FtZS5jb29raWVzUHMgLyBHYW1lLmZwcykgKiBHYW1lLmNwc1N1Y2tlZDsNCiAgICAgICAgLy9zaG91bGQgYmUgdXNpbmcgb25lIG9mIHRoZSBmb2xsb3dpbmcsIGJ1dCBJJ20gbm90IHN1cmUgd2hhdCBJJ20gdXNpbmcgdGhpcyBzdGF0IGZvciBhbnltb3JlDQogICAgICAgIC8vR2FtZS5jb29raWVzU3Vja2VkPUdhbWUud3JpbmtsZXJzLnJlZHVjZShmdW5jdGlvbihzLHcpe3JldHVybiBzK3cuc3Vja2VkO30sMCk7DQogICAgICAgIC8vZm9yICh2YXIgaSBpbiBHYW1lLndyaW5rbGVycykge0dhbWUuY29va2llc1N1Y2tlZCs9R2FtZS53cmlua2xlcnNbaV0uc3Vja2VkO30NCiAgICAgIH0NCg0KICAgICAgLy92YXIgY3BzPUdhbWUuY29va2llc1BzK0dhbWUuY29va2llcyowLjAxOy8vZXhwb25lbnRpYWwgY29va2llcw0KICAgICAgLy9HYW1lLkVhcm4oY3BzL0dhbWUuZnBzKTsvL2FkZCBjb29raWVzIHBlciBzZWNvbmQNCg0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBtZS50b3RhbENvb2tpZXMgKz0gKG1lLnN0b3JlZFRvdGFsQ3BzICogR2FtZS5nbG9iYWxDcHNNdWx0KSAvIEdhbWUuZnBzOw0KICAgICAgfQ0KICAgICAgaWYgKA0KICAgICAgICBHYW1lLnByZWZzLnBhcnRpY2xlcyAmJg0KICAgICAgICBHYW1lLmNvb2tpZXMgJiYNCiAgICAgICAgR2FtZS5UICUgTWF0aC5jZWlsKEdhbWUuZnBzIC8gTWF0aC5taW4oMTAsIEdhbWUuY29va2llc1BzKSkgPT0gMA0KICAgICAgKQ0KICAgICAgICBHYW1lLnBhcnRpY2xlQWRkKCk7IC8vY29va2llIHNob3dlcg0KDQogICAgICBpZiAoR2FtZS5UICUgKEdhbWUuZnBzICogMTApID09IDApIEdhbWUucmVjYWxjdWxhdGVHYWlucyA9IDE7IC8vcmVjYWxjdWxhdGUgQ3BTIGV2ZXJ5IDEwIHNlY29uZHMgKGZvciBkeW5hbWljIGJvb3N0cyBzdWNoIGFzIENlbnR1cnkgZWdnKQ0KDQogICAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCgkJCVVOTE9DS0lORyBTVFVGRg0KCQkJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCiAgICAgIGlmIChHYW1lLlQgJSBHYW1lLmZwcyA9PSAwICYmIE1hdGgucmFuZG9tKCkgPCAxIC8gMTAwMDAwMCkNCiAgICAgICAgR2FtZS5XaW4oIkp1c3QgcGxhaW4gbHVja3kiKTsgLy8xIGNoYW5jZSBpbiAxLDAwMCwwMDAgZXZlcnkgc2Vjb25kIGFjaGlldmVtZW50DQogICAgICBpZiAoR2FtZS5UICUgKEdhbWUuZnBzICogNSkgPT0gMCAmJiBHYW1lLk9iamVjdHNCeUlkLmxlbmd0aCA+IDApIHsNCiAgICAgICAgLy9jaGVjayBzb21lIGFjaGlldmVtZW50cyBhbmQgdXBncmFkZXMNCiAgICAgICAgaWYgKGlzTmFOKEdhbWUuY29va2llcykpIHsNCiAgICAgICAgICBHYW1lLmNvb2tpZXMgPSAwOw0KICAgICAgICAgIEdhbWUuY29va2llc0Vhcm5lZCA9IDA7DQogICAgICAgICAgR2FtZS5yZWNhbGN1bGF0ZUdhaW5zID0gMTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciB0aW1lUGxheWVkID0gbmV3IERhdGUoKTsNCiAgICAgICAgdGltZVBsYXllZC5zZXRUaW1lKERhdGUubm93KCkgLSBHYW1lLnN0YXJ0RGF0ZSk7DQoNCiAgICAgICAgaWYgKA0KICAgICAgICAgICFHYW1lLmZ1bGxEYXRlIHx8DQogICAgICAgICAgRGF0ZS5ub3coKSAtIEdhbWUuZnVsbERhdGUgPj0gMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMA0KICAgICAgICApDQogICAgICAgICAgR2FtZS5XaW4oIlNvIG11Y2ggdG8gZG8gc28gbXVjaCB0byBzZWUiKTsNCg0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5jb29raWVzRWFybmVkID49IDEwMDAwMDAgJiYNCiAgICAgICAgICAoR2FtZS5hc2NlbnNpb25Nb2RlID09IDEgfHwgR2FtZS5yZXNldHMgPT0gMCkNCiAgICAgICAgKSB7DQogICAgICAgICAgLy9jaGFsbGVuZ2UgcnVuIG9yIGhhc24ndCBhc2NlbmRlZCB5ZXQNCiAgICAgICAgICBpZiAodGltZVBsYXllZCA8PSAxMDAwICogNjAgKiAzNSkgR2FtZS5XaW4oIlNwZWVkIGJha2luZyBJIik7DQogICAgICAgICAgaWYgKHRpbWVQbGF5ZWQgPD0gMTAwMCAqIDYwICogMjUpIEdhbWUuV2luKCJTcGVlZCBiYWtpbmcgSUkiKTsNCiAgICAgICAgICBpZiAodGltZVBsYXllZCA8PSAxMDAwICogNjAgKiAxNSkgR2FtZS5XaW4oIlNwZWVkIGJha2luZyBJSUkiKTsNCg0KICAgICAgICAgIGlmIChHYW1lLmNvb2tpZUNsaWNrcyA8PSAxNSkgR2FtZS5XaW4oIk5ldmVyY2xpY2siKTsNCiAgICAgICAgICBpZiAoR2FtZS5jb29raWVDbGlja3MgPD0gMCkgR2FtZS5XaW4oIlRydWUgTmV2ZXJjbGljayIpOw0KICAgICAgICAgIGlmIChHYW1lLmNvb2tpZXNFYXJuZWQgPj0gMTAwMDAwMDAwMCAmJiBHYW1lLlVwZ3JhZGVzT3duZWQgPT0gMCkNCiAgICAgICAgICAgIEdhbWUuV2luKCJIYXJkY29yZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLlVubG9ja0F0KSB7DQogICAgICAgICAgdmFyIHVubG9jayA9IEdhbWUuVW5sb2NrQXRbaV07DQogICAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSB1bmxvY2suY29va2llcykgew0KICAgICAgICAgICAgdmFyIHBhc3MgPSAxOw0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICB1bmxvY2sucmVxdWlyZSAmJg0KICAgICAgICAgICAgICAhR2FtZS5IYXModW5sb2NrLnJlcXVpcmUpICYmDQogICAgICAgICAgICAgICFHYW1lLkhhc0FjaGlldih1bmxvY2sucmVxdWlyZSkNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgcGFzcyA9IDA7DQogICAgICAgICAgICBpZiAodW5sb2NrLnNlYXNvbiAmJiBHYW1lLnNlYXNvbiAhPSB1bmxvY2suc2Vhc29uKSBwYXNzID0gMDsNCiAgICAgICAgICAgIGlmIChwYXNzKSB7DQogICAgICAgICAgICAgIEdhbWUuVW5sb2NrKHVubG9jay5uYW1lKTsNCiAgICAgICAgICAgICAgR2FtZS5XaW4odW5sb2NrLm5hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChHYW1lLkhhcygiR29sZGVuIHN3aXRjaCIpKSBHYW1lLlVubG9jaygiR29sZGVuIHN3aXRjaCBbb2ZmXSIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5IYXMoIlNoaW1tZXJpbmcgdmVpbCIpICYmDQogICAgICAgICAgIUdhbWUuSGFzKCJTaGltbWVyaW5nIHZlaWwgW29mZl0iKSAmJg0KICAgICAgICAgICFHYW1lLkhhcygiU2hpbW1lcmluZyB2ZWlsIFtvbl0iKQ0KICAgICAgICApIHsNCiAgICAgICAgICBHYW1lLlVubG9jaygiU2hpbW1lcmluZyB2ZWlsIFtvbl0iKTsNCiAgICAgICAgICBHYW1lLlVwZ3JhZGVzWyJTaGltbWVyaW5nIHZlaWwgW29mZl0iXS5lYXJuKCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuSGFzKCJTdWdhciBjcmF2aW5nIikpIEdhbWUuVW5sb2NrKCJTdWdhciBmcmVuenkiKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJDbGFzc2ljIGRhaXJ5IHNlbGVjdGlvbiIpKSBHYW1lLlVubG9jaygiTWlsayBzZWxlY3RvciIpOw0KICAgICAgICBpZiAoR2FtZS5IYXMoIkJhc2ljIHdhbGxwYXBlciBhc3NvcnRtZW50IikpDQogICAgICAgICAgR2FtZS5VbmxvY2soIkJhY2tncm91bmQgc2VsZWN0b3IiKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJHb2xkZW4gY29va2llIGFsZXJ0IHNvdW5kIikpDQogICAgICAgICAgR2FtZS5VbmxvY2soIkdvbGRlbiBjb29raWUgc291bmQgc2VsZWN0b3IiKTsNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJTb3VuZCB0ZXN0IikpIEdhbWUuVW5sb2NrKCJKdWtlYm94Iik7DQoNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJQcmlzbSBoZWFydCBiaXNjdWl0cyIpKSBHYW1lLldpbigiTG92ZWx5IGNvb2tpZXMiKTsNCiAgICAgICAgaWYgKEdhbWUuc2Vhc29uID09ICJlYXN0ZXIiKSB7DQogICAgICAgICAgdmFyIGVnZ3MgPSAwOw0KICAgICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5lYXN0ZXJFZ2dzKSB7DQogICAgICAgICAgICBpZiAoR2FtZS5IYXNVbmxvY2tlZChHYW1lLmVhc3RlckVnZ3NbaV0pKSBlZ2dzKys7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChlZ2dzID49IDEpIEdhbWUuV2luKCJUaGUgaHVudCBpcyBvbiIpOw0KICAgICAgICAgIGlmIChlZ2dzID49IDcpIEdhbWUuV2luKCJFZ2dpbmcgb24iKTsNCiAgICAgICAgICBpZiAoZWdncyA+PSAxNCkgR2FtZS5XaW4oIk1hc3MgRWFzdGVyaWEiKTsNCiAgICAgICAgICBpZiAoZWdncyA+PSBHYW1lLmVhc3RlckVnZ3MubGVuZ3RoKSBHYW1lLldpbigiSGlkZSAmIHNlZWsgY2hhbXBpb24iKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChHYW1lLkhhcygiRm9ydHVuZSBjb29raWVzIikpIHsNCiAgICAgICAgICB2YXIgbGlzdCA9IEdhbWUuVGllcnNbImZvcnR1bmUiXS51cGdyYWRlczsNCiAgICAgICAgICB2YXIgZm9ydHVuZXMgPSAwOw0KICAgICAgICAgIGZvciAodmFyIGkgaW4gbGlzdCkgew0KICAgICAgICAgICAgaWYgKEdhbWUuSGFzKGxpc3RbaV0ubmFtZSkpIGZvcnR1bmVzKys7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChmb3J0dW5lcyA+PSBsaXN0Lmxlbmd0aCkgR2FtZS5XaW4oIk8gRm9ydHVuYSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuSGFzKCJMZWdhY3kiKSAmJiBHYW1lLmFzY2Vuc2lvbk1vZGUgIT0gMSkgew0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJIZWF2ZW5seSBjaGlwIHNlY3JldCIpOw0KICAgICAgICAgIGlmIChHYW1lLkhhcygiSGVhdmVubHkgY2hpcCBzZWNyZXQiKSkNCiAgICAgICAgICAgIEdhbWUuVW5sb2NrKCJIZWF2ZW5seSBjb29raWUgc3RhbmQiKTsNCiAgICAgICAgICBpZiAoR2FtZS5IYXMoIkhlYXZlbmx5IGNvb2tpZSBzdGFuZCIpKSBHYW1lLlVubG9jaygiSGVhdmVubHkgYmFrZXJ5Iik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBiYWtlcnkiKSkNCiAgICAgICAgICAgIEdhbWUuVW5sb2NrKCJIZWF2ZW5seSBjb25mZWN0aW9uZXJ5Iik7DQogICAgICAgICAgaWYgKEdhbWUuSGFzKCJIZWF2ZW5seSBjb25mZWN0aW9uZXJ5IikpIEdhbWUuVW5sb2NrKCJIZWF2ZW5seSBrZXkiKTsNCg0KICAgICAgICAgIGlmIChHYW1lLkhhcygiSGVhdmVubHkga2V5IikpIEdhbWUuV2luKCJXaG9sZXNvbWUiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5CYW5rQWNoaWV2ZW1lbnRzKSB7DQogICAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSBHYW1lLkJhbmtBY2hpZXZlbWVudHNbaV0udGhyZXNob2xkKQ0KICAgICAgICAgICAgR2FtZS5XaW4oR2FtZS5CYW5rQWNoaWV2ZW1lbnRzW2ldLm5hbWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGJ1aWxkaW5nc093bmVkID0gMDsNCiAgICAgICAgdmFyIG1hdGhlbWF0aWNpYW4gPSAxOw0KICAgICAgICB2YXIgYmFzZTEwID0gMTsNCiAgICAgICAgdmFyIG1pbkFtb3VudCA9IDEwMDAwMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICBidWlsZGluZ3NPd25lZCArPSBHYW1lLk9iamVjdHNbaV0uYW1vdW50Ow0KICAgICAgICAgIG1pbkFtb3VudCA9IE1hdGgubWluKEdhbWUuT2JqZWN0c1tpXS5hbW91bnQsIG1pbkFtb3VudCk7DQogICAgICAgICAgaWYgKCFHYW1lLkhhc0FjaGlldigiTWF0aGVtYXRpY2lhbiIpKSB7DQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIEdhbWUuT2JqZWN0c1tpXS5hbW91bnQgPA0KICAgICAgICAgICAgICBNYXRoLm1pbigNCiAgICAgICAgICAgICAgICAxMjgsDQogICAgICAgICAgICAgICAgTWF0aC5wb3coMiwgR2FtZS5PYmplY3RzQnlJZC5sZW5ndGggLSBHYW1lLk9iamVjdHNbaV0uaWQgLSAxKQ0KICAgICAgICAgICAgICApDQogICAgICAgICAgICApDQogICAgICAgICAgICAgIG1hdGhlbWF0aWNpYW4gPSAwOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIUdhbWUuSGFzQWNoaWV2KCJCYXNlIDEwIikpIHsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgR2FtZS5PYmplY3RzW2ldLmFtb3VudCA8DQogICAgICAgICAgICAgIChHYW1lLk9iamVjdHNCeUlkLmxlbmd0aCAtIEdhbWUuT2JqZWN0c1tpXS5pZCkgKiAxMA0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICBiYXNlMTAgPSAwOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDEpIEdhbWUuV2luKCJPbmUgd2l0aCBldmVyeXRoaW5nIik7DQogICAgICAgIGlmIChtYXRoZW1hdGljaWFuID09IDEpIEdhbWUuV2luKCJNYXRoZW1hdGljaWFuIik7DQogICAgICAgIGlmIChiYXNlMTAgPT0gMSkgR2FtZS5XaW4oIkJhc2UgMTAiKTsNCiAgICAgICAgaWYgKG1pbkFtb3VudCA+PSAxMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2VudGVubmlhbCIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJNaWxrIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChtaW5BbW91bnQgPj0gMTUwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkNlbnRlbm5pYWwgYW5kIGEgaGFsZiIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJEYXJrIGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChtaW5BbW91bnQgPj0gMjAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkJpY2VudGVubmlhbCIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJXaGl0ZSBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDI1MCkgew0KICAgICAgICAgIEdhbWUuV2luKCJCaWNlbnRlbm5pYWwgYW5kIGEgaGFsZiIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJSdWJ5IGNob2NvbGF0ZSBidXR0ZXIgYmlzY3VpdCIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChtaW5BbW91bnQgPj0gMzAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIlRyaWNlbnRlbm5pYWwiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiTGF2ZW5kZXIgY2hvY29sYXRlIGJ1dHRlciBiaXNjdWl0Iik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG1pbkFtb3VudCA+PSAzNTApIHsNCiAgICAgICAgICBHYW1lLldpbigiVHJpY2VudGVubmlhbCBhbmQgYSBoYWxmIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlN5bnRoZXRpYyBjaG9jb2xhdGUgZ3JlZW4gaG9uZXkgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDQwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJRdWFkcmljZW50ZW5uaWFsIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlJveWFsIHJhc3BiZXJyeSBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDQ1MCkgew0KICAgICAgICAgIEdhbWUuV2luKCJRdWFkcmljZW50ZW5uaWFsIGFuZCBhIGhhbGYiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygNCiAgICAgICAgICAgICJVbHRyYS1jb25jZW50cmF0ZWQgaGlnaC1lbmVyZ3kgY2hvY29sYXRlIGJ1dHRlciBiaXNjdWl0Ig0KICAgICAgICAgICk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG1pbkFtb3VudCA+PSA1MDApIHsNCiAgICAgICAgICBHYW1lLldpbigiUXVpbmNlbnRlbm5pYWwiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiUHVyZSBwaXRjaC1ibGFjayBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDU1MCkgew0KICAgICAgICAgIEdhbWUuV2luKCJRdWluY2VudGVubmlhbCBhbmQgYSBoYWxmIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIkNvc21pYyBjaG9jb2xhdGUgYnV0dGVyIGJpc2N1aXQiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDYwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJTZXhjZW50ZW5uaWFsIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIkJ1dHRlciBiaXNjdWl0ICh3aXRoIGJ1dHRlcikiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobWluQW1vdW50ID49IDY1MCkgew0KICAgICAgICAgIEdhbWUuV2luKCJTZXhjZW50ZW5uaWFsIGFuZCBhIGhhbGYiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiRXZlcnlidXR0ZXIgYmlzY3VpdCIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2xpY2t0YXN0aWMiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiUGxhc3RpYyBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2xpY2thdGhsb24iKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiSXJvbiBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJDbGlja29seW1waWNzIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlRpdGFuaXVtIG1vdXNlIik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDAwMDAwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2xpY2tvcmFtYSIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJBZGFtYW50aXVtIG1vdXNlIik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDAwMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJDbGlja2FzbWljIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIlVub2J0YWluaXVtIG1vdXNlIik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDAwMDAwMDAwMDAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkNsaWNrYWdlZGRvbiIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJFbHVkaXVtIG1vdXNlIik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKEdhbWUuaGFuZG1hZGVDb29raWVzID49IDEwMDAwMDAwMDAwMDAwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQ2xpY2tuYXJvayIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJXaXNoYWxsb3kgbW91c2UiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS5oYW5kbWFkZUNvb2tpZXMgPj0gMTAwMDAwMDAwMDAwMDAwMDAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkNsaWNrYXN0cm9waGUiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiRmFudGFzdGVlbCBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJDbGlja2F0YWNseXNtIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIk5ldmVyY3JhY2sgbW91c2UiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS5oYW5kbWFkZUNvb2tpZXMgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJUaGUgdWx0aW1hdGUgY2xpY2tkb3duIik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIkFybXl0aHJpbCBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDApIHsNCiAgICAgICAgICBHYW1lLldpbigiQWxsIHRoZSBvdGhlciBraWRzIHdpdGggdGhlIHB1bXBlZCB1cCBjbGlja3MiKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiVGVjaG5vYnNpZGlhbiBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCkgew0KICAgICAgICAgIEdhbWUuV2luKCJPbmUuLi5tb3JlLi4uY2xpY2suLi4iKTsNCiAgICAgICAgICBHYW1lLlVubG9jaygiUGxhc21hcmJsZSBtb3VzZSIpOw0KICAgICAgICB9DQogICAgICAgIGlmIChHYW1lLmhhbmRtYWRlQ29va2llcyA+PSAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkNsaWNrZXR5IHNwbGl0Iik7DQogICAgICAgICAgR2FtZS5VbmxvY2soIk1pcmFjdWxpdGUgbW91c2UiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoR2FtZS5oYW5kbWFkZUNvb2tpZXMgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwKSB7DQogICAgICAgICAgR2FtZS5XaW4oIkFpbid0IHRoYXQgYSBjbGljayBpbiB0aGUgaGVhZCIpOw0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJBZXRoZXJpY2UgbW91c2UiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChHYW1lLmNvb2tpZXNFYXJuZWQgPCBHYW1lLmNvb2tpZXMpDQogICAgICAgICAgR2FtZS5XaW4oIkNoZWF0ZWQgY29va2llcyB0YXN0ZSBhd2Z1bCIpOw0KDQogICAgICAgIGlmICgNCiAgICAgICAgICBHYW1lLkhhcygiU2t1bGwgY29va2llcyIpICYmDQogICAgICAgICAgR2FtZS5IYXMoIkdob3N0IGNvb2tpZXMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJCYXQgY29va2llcyIpICYmDQogICAgICAgICAgR2FtZS5IYXMoIlNsaW1lIGNvb2tpZXMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJQdW1wa2luIGNvb2tpZXMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJFeWViYWxsIGNvb2tpZXMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJTcGlkZXIgY29va2llcyIpDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLldpbigiU3Bvb2t5IGNvb2tpZXMiKTsNCiAgICAgICAgaWYgKEdhbWUud3JpbmtsZXJzUG9wcGVkID49IDEpIEdhbWUuV2luKCJJdGNoc2NyYXRjaGVyIik7DQogICAgICAgIGlmIChHYW1lLndyaW5rbGVyc1BvcHBlZCA+PSA1MCkgR2FtZS5XaW4oIldyaW5rbGVzcXVpc2hlciIpOw0KICAgICAgICBpZiAoR2FtZS53cmlua2xlcnNQb3BwZWQgPj0gMjAwKSBHYW1lLldpbigiTW9pc3RidXJzdGVyIik7DQoNCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuY29va2llc0Vhcm5lZCA+PSAxMDAwMDAwICYmDQogICAgICAgICAgR2FtZS5IYXMoIkhvdyB0byBiYWtlIHlvdXIgZHJhZ29uIikNCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuVW5sb2NrKCJBIGNydW1ibHkgZWdnIik7DQoNCiAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSAyNSAmJiBHYW1lLnNlYXNvbiA9PSAiY2hyaXN0bWFzIikNCiAgICAgICAgICBHYW1lLlVubG9jaygiQSBmZXN0aXZlIGhhdCIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5IYXMoIkNocmlzdG1hcyB0cmVlIGJpc2N1aXRzIikgJiYNCiAgICAgICAgICBHYW1lLkhhcygiU25vd2ZsYWtlIGJpc2N1aXRzIikgJiYNCiAgICAgICAgICBHYW1lLkhhcygiU25vd21hbiBiaXNjdWl0cyIpICYmDQogICAgICAgICAgR2FtZS5IYXMoIkhvbGx5IGJpc2N1aXRzIikgJiYNCiAgICAgICAgICBHYW1lLkhhcygiQ2FuZHkgY2FuZSBiaXNjdWl0cyIpICYmDQogICAgICAgICAgR2FtZS5IYXMoIkJlbGwgYmlzY3VpdHMiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzKCJQcmVzZW50IGJpc2N1aXRzIikNCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuV2luKCJMZXQgaXQgc25vdyIpOw0KDQogICAgICAgIGlmIChHYW1lLnJlaW5kZWVyQ2xpY2tlZCA+PSAxKSBHYW1lLldpbigiT2ggZGVlciIpOw0KICAgICAgICBpZiAoR2FtZS5yZWluZGVlckNsaWNrZWQgPj0gNTApIEdhbWUuV2luKCJTbGVpZ2ggb2YgaGFuZCIpOw0KICAgICAgICBpZiAoR2FtZS5yZWluZGVlckNsaWNrZWQgPj0gMjAwKSBHYW1lLldpbigiUmVpbmRlZXIgc2xlaWdoZXIiKTsNCg0KICAgICAgICBpZiAoYnVpbGRpbmdzT3duZWQgPj0gMTAwKSBHYW1lLldpbigiQnVpbGRlciIpOw0KICAgICAgICBpZiAoYnVpbGRpbmdzT3duZWQgPj0gNTAwKSBHYW1lLldpbigiQXJjaGl0ZWN0Iik7DQogICAgICAgIGlmIChidWlsZGluZ3NPd25lZCA+PSAxMDAwKSBHYW1lLldpbigiRW5naW5lZXIiKTsNCiAgICAgICAgaWYgKGJ1aWxkaW5nc093bmVkID49IDI1MDApIEdhbWUuV2luKCJMb3JkIG9mIENvbnN0cnVjdHMiKTsNCiAgICAgICAgaWYgKGJ1aWxkaW5nc093bmVkID49IDUwMDApIEdhbWUuV2luKCJHcmFuZCBkZXNpZ24iKTsNCiAgICAgICAgaWYgKGJ1aWxkaW5nc093bmVkID49IDc1MDApIEdhbWUuV2luKCJFY3VtZW5vcG9saXMiKTsNCiAgICAgICAgaWYgKGJ1aWxkaW5nc093bmVkID49IDEwMDAwKSBHYW1lLldpbigiTXlyaWFkIik7DQogICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzT3duZWQgPj0gMjApIEdhbWUuV2luKCJFbmhhbmNlciIpOw0KICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc093bmVkID49IDUwKSBHYW1lLldpbigiQXVnbWVudGVyIik7DQogICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzT3duZWQgPj0gMTAwKSBHYW1lLldpbigiVXBncmFkZXIiKTsNCiAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNPd25lZCA+PSAyMDApIEdhbWUuV2luKCJMb3JkIG9mIFByb2dyZXNzIik7DQogICAgICAgIGlmIChHYW1lLlVwZ3JhZGVzT3duZWQgPj0gMzAwKSBHYW1lLldpbigiVGhlIGZ1bGwgcGljdHVyZSIpOw0KICAgICAgICBpZiAoR2FtZS5VcGdyYWRlc093bmVkID49IDQwMCkNCiAgICAgICAgICBHYW1lLldpbigiV2hlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBhZGQiKTsNCiAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNPd25lZCA+PSA1MDApIEdhbWUuV2luKCJLYWl6ZW4iKTsNCiAgICAgICAgaWYgKEdhbWUuVXBncmFkZXNPd25lZCA+PSA2MDApIEdhbWUuV2luKCJCZXlvbmQgcXVhbGl0eSIpOw0KICAgICAgICBpZiAoYnVpbGRpbmdzT3duZWQgPj0gNDAwMCAmJiBHYW1lLlVwZ3JhZGVzT3duZWQgPj0gMzAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJQb2x5bWF0aCIpOw0KICAgICAgICBpZiAoYnVpbGRpbmdzT3duZWQgPj0gODAwMCAmJiBHYW1lLlVwZ3JhZGVzT3duZWQgPj0gNDAwKQ0KICAgICAgICAgIEdhbWUuV2luKCJSZW5haXNzYW5jZSBiYWtlciIpOw0KDQogICAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIkplbGxpY2xlcyIpKSB7DQogICAgICAgICAgdmFyIGtpdHRlbnMgPSAwOw0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgR2FtZS5VcGdyYWRlc0J5UG9vbFsia2l0dGVuIl0ubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGlmIChHYW1lLkhhcyhHYW1lLlVwZ3JhZGVzQnlQb29sWyJraXR0ZW4iXVtpXS5uYW1lKSkga2l0dGVucysrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoa2l0dGVucyA+PSAxMCkgR2FtZS5XaW4oIkplbGxpY2xlcyIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKEdhbWUuY29va2llc0Vhcm5lZCA+PSAxZTE0ICYmICFHYW1lLkhhc0FjaGlldigiWW91IHdpbiBhIGNvb2tpZSIpKSB7DQogICAgICAgICAgR2FtZS5XaW4oIllvdSB3aW4gYSBjb29raWUiKTsNCiAgICAgICAgICBHYW1lLkVhcm4oMSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoR2FtZS5zaGltbWVyVHlwZXNbImdvbGRlbiJdLm4gPj0gNCkgR2FtZS5XaW4oIkZvdXItbGVhZiBjb29raWUiKTsNCg0KICAgICAgICB2YXIgZ3JhbmRtYXMgPSAwOw0KICAgICAgICBmb3IgKHZhciBpIGluIEdhbWUuR3JhbmRtYVN5bmVyZ2llcykgew0KICAgICAgICAgIGlmIChHYW1lLkhhcyhHYW1lLkdyYW5kbWFTeW5lcmdpZXNbaV0pKSBncmFuZG1hcysrOw0KICAgICAgICB9DQogICAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIkVsZGVyIikgJiYgZ3JhbmRtYXMgPj0gNykgR2FtZS5XaW4oIkVsZGVyIik7DQogICAgICAgIGlmICghR2FtZS5IYXNBY2hpZXYoIlZldGVyYW4iKSAmJiBncmFuZG1hcyA+PSAxNCkgR2FtZS5XaW4oIlZldGVyYW4iKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIEdhbWUuT2JqZWN0c1siR3JhbmRtYSJdLmFtb3VudCA+PSA2ICYmDQogICAgICAgICAgIUdhbWUuSGFzKCJCaW5nbyBjZW50ZXIvUmVzZWFyY2ggZmFjaWxpdHkiKSAmJg0KICAgICAgICAgIEdhbWUuSGFzQWNoaWV2KCJFbGRlciIpDQogICAgICAgICkNCiAgICAgICAgICBHYW1lLlVubG9jaygiQmluZ28gY2VudGVyL1Jlc2VhcmNoIGZhY2lsaXR5Iik7DQogICAgICAgIGlmIChHYW1lLnBsZWRnZXMgPiAwKSBHYW1lLldpbigiRWxkZXIgbmFwIik7DQogICAgICAgIGlmIChHYW1lLnBsZWRnZXMgPj0gNSkgR2FtZS5XaW4oIkVsZGVyIHNsdW1iZXIiKTsNCiAgICAgICAgaWYgKEdhbWUucGxlZGdlcyA+PSAxMCkgR2FtZS5VbmxvY2soIlNhY3JpZmljaWFsIHJvbGxpbmcgcGlucyIpOw0KICAgICAgICBpZiAoDQogICAgICAgICAgR2FtZS5PYmplY3RzWyJDdXJzb3IiXS5hbW91bnQgKyBHYW1lLk9iamVjdHNbIkdyYW5kbWEiXS5hbW91bnQgPj0NCiAgICAgICAgICA3NzcNCiAgICAgICAgKQ0KICAgICAgICAgIEdhbWUuV2luKCJUaGUgZWxkZXIgc2Nyb2xscyIpOw0KDQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5PYmplY3RzKSB7DQogICAgICAgICAgdmFyIGl0ID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICAgIGZvciAodmFyIGlpIGluIGl0LnByb2R1Y3Rpb25BY2hpZXZzKSB7DQogICAgICAgICAgICBpZiAoaXQudG90YWxDb29raWVzID49IGl0LnByb2R1Y3Rpb25BY2hpZXZzW2lpXS5wb3cpDQogICAgICAgICAgICAgIEdhbWUuV2luKGl0LnByb2R1Y3Rpb25BY2hpZXZzW2lpXS5hY2hpZXYubmFtZSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKA0KICAgICAgICAgICFHYW1lLkhhc0FjaGlldigiQ29va2llLWR1bmtlciIpICYmDQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZCAmJg0KICAgICAgICAgIEdhbWUubWlsa1Byb2dyZXNzID4gMC4xICYmDQogICAgICAgICAgR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0ICogMC40ICsgMjU2IC8gMiAtIDE2ID4NCiAgICAgICAgICAgICgxIC0gR2FtZS5taWxrSGQpICogR2FtZS5MZWZ0QmFja2dyb3VuZC5jYW52YXMuaGVpZ2h0DQogICAgICAgICkNCiAgICAgICAgICBHYW1lLldpbigiQ29va2llLWR1bmtlciIpOw0KICAgICAgICAvLyYmIGwoJ2JpZ0Nvb2tpZScpLmdldEJvdW5kcygpLmJvdHRvbT5sKCdtaWxrJykuZ2V0Qm91bmRzKCkudG9wKzE2ICYmIEdhbWUubWlsa1Byb2dyZXNzPjAuMSkgR2FtZS5XaW4oJ0Nvb2tpZS1kdW5rZXInKTsNCg0KICAgICAgICBHYW1lLnJ1bk1vZEhvb2soImNoZWNrIik7DQogICAgICB9DQoNCiAgICAgIEdhbWUuY29va2llc2QgKz0gKEdhbWUuY29va2llcyAtIEdhbWUuY29va2llc2QpICogMC4zOw0KDQogICAgICBpZiAoR2FtZS5zdG9yZVRvUmVmcmVzaCkgR2FtZS5SZWZyZXNoU3RvcmUoKTsNCiAgICAgIGlmIChHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkKSBHYW1lLlJlYnVpbGRVcGdyYWRlcygpOw0KDQogICAgICBHYW1lLnVwZGF0ZVNoaW1tZXJzKCk7DQogICAgICBHYW1lLnVwZGF0ZUJ1ZmZzKCk7DQoNCiAgICAgIEdhbWUuVXBkYXRlVGlja2VyKCk7DQogICAgfQ0KDQogICAgaWYgKEdhbWUuVCAlIChHYW1lLmZwcyAqIDIpID09IDApIHsNCiAgICAgIHZhciB0aXRsZSA9ICJDb29raWUgQ2xpY2tlciI7DQogICAgICBpZiAoR2FtZS5zZWFzb24gPT0gImZvb2xzIikgdGl0bGUgPSAiQ29va2llIEJha2VyIjsNCiAgICAgIGRvY3VtZW50LnRpdGxlID0NCiAgICAgICAgKEdhbWUuT25Bc2NlbmQgPyAoRU4gPyAiQXNjZW5kaW5nISAiIDogbG9jKCJBc2NlbmRpbmciKSArICIgfCAiKSA6ICIiKSArDQogICAgICAgIGxvYygiJTEgY29va2llIiwgTEJlYXV0aWZ5KEdhbWUuY29va2llcykpICsNCiAgICAgICAgIiAtICIgKw0KICAgICAgICB0aXRsZTsNCiAgICB9DQogICAgaWYgKEdhbWUuVCAlIDE1ID09IDApIHsNCiAgICAgIC8vd3JpdHRlbiB0aHJvdWdoIHRoZSBtYWdpYyBvZiAiaG9wZSBmb3IgdGhlIGJlc3QiIG1hdGhzDQogICAgICB2YXIgY2hpcHNPd25lZCA9IEdhbWUuSG93TXVjaFByZXN0aWdlKEdhbWUuY29va2llc1Jlc2V0KTsNCiAgICAgIHZhciBhc2NlbmROb3dUb093biA9IE1hdGguZmxvb3IoDQogICAgICAgIEdhbWUuSG93TXVjaFByZXN0aWdlKEdhbWUuY29va2llc1Jlc2V0ICsgR2FtZS5jb29raWVzRWFybmVkKQ0KICAgICAgKTsNCiAgICAgIHZhciBhc2NlbmROb3dUb0dldCA9IGFzY2VuZE5vd1RvT3duIC0gTWF0aC5mbG9vcihjaGlwc093bmVkKTsNCiAgICAgIHZhciBuZXh0Q2hpcEF0ID0NCiAgICAgICAgR2FtZS5Ib3dNYW55Q29va2llc1Jlc2V0KE1hdGguZmxvb3IoY2hpcHNPd25lZCArIGFzY2VuZE5vd1RvR2V0ICsgMSkpIC0NCiAgICAgICAgR2FtZS5Ib3dNYW55Q29va2llc1Jlc2V0KE1hdGguZmxvb3IoY2hpcHNPd25lZCArIGFzY2VuZE5vd1RvR2V0KSk7DQogICAgICB2YXIgY29va2llc1RvTmV4dCA9DQogICAgICAgIEdhbWUuSG93TWFueUNvb2tpZXNSZXNldChhc2NlbmROb3dUb093biArIDEpIC0NCiAgICAgICAgKEdhbWUuY29va2llc0Vhcm5lZCArIEdhbWUuY29va2llc1Jlc2V0KTsNCiAgICAgIHZhciBwZXJjZW50ID0gMSAtIGNvb2tpZXNUb05leHQgLyBuZXh0Q2hpcEF0Ow0KDQogICAgICAvL2ZpbGwgdGhlIHRvb2x0aXAgdW5kZXIgdGhlIExlZ2FjeSB0YWINCiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsNCiAgICAgIGRhdGUuc2V0VGltZShEYXRlLm5vdygpIC0gR2FtZS5zdGFydERhdGUpOw0KICAgICAgdmFyIHRpbWVJblNlY29uZHMgPSBkYXRlLmdldFRpbWUoKSAvIDEwMDA7DQogICAgICB2YXIgc3RhcnREYXRlID0gR2FtZS5zYXlUaW1lKHRpbWVJblNlY29uZHMgKiBHYW1lLmZwcywgLTEpOw0KDQogICAgICB2YXIgc3RyID0gIiI7DQogICAgICBpZiAoRU4pDQogICAgICAgIHN0ciArPQ0KICAgICAgICAgICJZb3UndmUgYmVlbiBvbiB0aGlzIHJ1biBmb3IgPGI+IiArDQogICAgICAgICAgKHN0YXJ0RGF0ZSA9PSAiIiA/ICJub3QgdmVyeSBsb25nIiA6IHN0YXJ0RGF0ZSkgKw0KICAgICAgICAgICI8L2I+Ljxicj4iOw0KICAgICAgZWxzZQ0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICBsb2MoIllvdSd2ZSBiZWVuIG9uIHRoaXMgcnVuIGZvciA8Yj4lMTwvYj4uIiwgc3RhcnREYXRlKSArICI8YnI+IjsNCiAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIGlmIChHYW1lLnByZXN0aWdlID4gMCkgew0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJZb3VyIHByZXN0aWdlIGxldmVsIGlzIGN1cnJlbnRseSA8Yj4lMTwvYj4uPGJyPihDcFMgKyUyJSkiLA0KICAgICAgICAgIFtCZWF1dGlmeShHYW1lLnByZXN0aWdlKSwgQmVhdXRpZnkoR2FtZS5wcmVzdGlnZSldDQogICAgICAgICk7DQogICAgICAgIHN0ciArPSAnPGRpdiBjbGFzcz0ibGluZSI+PC9kaXY+JzsNCiAgICAgIH0NCiAgICAgIGlmIChhc2NlbmROb3dUb0dldCA8IDEpDQogICAgICAgIHN0ciArPSBsb2MoIkFzY2VuZGluZyBub3cgd291bGQgZ3JhbnQgeW91IG5vIHByZXN0aWdlLiIpOw0KICAgICAgZWxzZSBpZiAoYXNjZW5kTm93VG9HZXQgPCAyKQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJBc2NlbmRpbmcgbm93IHdvdWxkIGdyYW50IHlvdTxicj48Yj4xIHByZXN0aWdlIGxldmVsPC9iPiAoKzElIENwUyk8YnI+YW5kIDxiPjEgaGVhdmVubHkgY2hpcDwvYj4gdG8gc3BlbmQuIg0KICAgICAgICApOw0KICAgICAgZWxzZQ0KICAgICAgICBzdHIgKz0gbG9jKA0KICAgICAgICAgICJBc2NlbmRpbmcgbm93IHdvdWxkIGdyYW50IHlvdTxicj48Yj4lMSBwcmVzdGlnZSBsZXZlbHM8L2I+ICgrJTIlIENwUyk8YnI+YW5kIDxiPiUzIGhlYXZlbmx5IGNoaXBzPC9iPiB0byBzcGVuZC4iLA0KICAgICAgICAgIFsNCiAgICAgICAgICAgIEJlYXV0aWZ5KGFzY2VuZE5vd1RvR2V0KSwNCiAgICAgICAgICAgIEJlYXV0aWZ5KGFzY2VuZE5vd1RvR2V0KSwNCiAgICAgICAgICAgIEJlYXV0aWZ5KGFzY2VuZE5vd1RvR2V0KSwNCiAgICAgICAgICBdDQogICAgICAgICk7DQogICAgICBpZiAoY29va2llc1RvTmV4dCA+PSAwKSB7DQogICAgICAgIC8vbm90ZTogY29va2llc1RvTmV4dCBjYW4gYmUgbmVnYXRpdmUgYXQgaGlnaGVyIEhDIGFtb3VudHMgZHVlIHRvIHByZWNpc2lvbiBsb3NzLiB3ZSBzaW1wbHkgaGlkZSBpdCBpbiBzdWNoIGNhc2VzLCBhcyB0aGlzIHVzdWFsbHkgb25seSBvY2N1cnMgd2hlbiB0aGUgZ2FwIGlzIHNtYWxsIGFuZCByYXBpZGx5IG92ZXJjb21lIGFueXdheQ0KICAgICAgICBzdHIgKz0gJzxkaXYgY2xhc3M9ImxpbmUiPjwvZGl2Pic7DQogICAgICAgIHN0ciArPQ0KICAgICAgICAgIGxvYygNCiAgICAgICAgICAgICJZb3UgbmVlZCA8Yj4lMSBtb3JlIGNvb2tpZXM8L2I+IGZvciB0aGUgbmV4dCBsZXZlbC4iLA0KICAgICAgICAgICAgQmVhdXRpZnkoY29va2llc1RvTmV4dCkNCiAgICAgICAgICApICsgIjxicj4iOw0KICAgICAgfQ0KICAgICAgbCgiYXNjZW5kVG9vbHRpcCIpLmlubmVySFRNTCA9IHN0cjsNCg0KICAgICAgaWYgKGFzY2VuZE5vd1RvR2V0ID4gMCkgew0KICAgICAgICAvL3Nob3cgbnVtYmVyIHNheWluZyBob3cgbWFueSBjaGlwcyB5b3UnZCBnZXQgcmVzZXR0aW5nIG5vdw0KICAgICAgICBHYW1lLmFzY2VuZE51bWJlci50ZXh0Q29udGVudCA9ICIrIiArIFNpbXBsZUJlYXV0aWZ5KGFzY2VuZE5vd1RvR2V0KTsNCiAgICAgICAgR2FtZS5hc2NlbmROdW1iZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBHYW1lLmFzY2VuZE51bWJlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgfQ0KDQogICAgICBpZiAoDQogICAgICAgIGFzY2VuZE5vd1RvR2V0ID4gR2FtZS5hc2NlbmRNZXRlckxldmVsIHx8DQogICAgICAgIEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50VCA8IEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50DQogICAgICApIHsNCiAgICAgICAgLy9yZXNldCB0aGUgZ2F1Z2UgYW5kIHBsYXkgYSBzb3VuZCBpZiB3ZSBnYWluZWQgYSBwb3RlbnRpYWwgbGV2ZWwNCiAgICAgICAgR2FtZS5hc2NlbmRNZXRlclBlcmNlbnQgPSAwOw0KICAgICAgICAvL1BsYXlTb3VuZCgnc25kL2xldmVsUHJlc3RpZ2UubXAzJyk7Ly9hIGJpdCB0b28gYW5ub3lpbmcNCiAgICAgIH0NCiAgICAgIEdhbWUuYXNjZW5kTWV0ZXJMZXZlbCA9IGFzY2VuZE5vd1RvR2V0Ow0KICAgICAgR2FtZS5hc2NlbmRNZXRlclBlcmNlbnRUID0gcGVyY2VudDsgLy9nYXVnZSB0aGF0IGZpbGxzIHVwIGFzIHlvdSBuZWFyIHlvdXIgbmV4dCBjaGlwDQogICAgICAvL2lmIChHYW1lLmFzY2VuZE1ldGVyUGVyY2VudFQ8R2FtZS5hc2NlbmRNZXRlclBlcmNlbnQpIHtHYW1lLmFzY2VuZE1ldGVyUGVyY2VudD0wO1BsYXlTb3VuZCgnc25kL2xldmVsUHJlc3RpZ2UubXAzJywwLjUpO30NCiAgICAgIC8vaWYgKHBlcmNlbnQ+PTEpIHtHYW1lLmFzY2VuZE1ldGVyLmNsYXNzTmFtZT0nJzt9IGVsc2UgR2FtZS5hc2NlbmRNZXRlci5jbGFzc05hbWU9J2ZpbGxpbmcnOw0KICAgIH0NCiAgICAvL0dhbWUuYXNjZW5kTWV0ZXIuc3R5bGUucmlnaHQ9TWF0aC5mbG9vcihNYXRoLm1heCgwLDEtR2FtZS5hc2NlbmRNZXRlclBlcmNlbnQpKjEwMCkrJ3B4JzsNCiAgICBHYW1lLmFzY2VuZE1ldGVyLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAtR2FtZS5UICogMC41IC0gR2FtZS5hc2NlbmRNZXRlclBlcmNlbnQgKiAxMDAgKyAicHgiOw0KICAgIEdhbWUuYXNjZW5kTWV0ZXIuc3R5bGUudHJhbnNmb3JtID0NCiAgICAgICJ0cmFuc2xhdGUoIiArDQogICAgICBNYXRoLmZsb29yKC1NYXRoLm1heCgwLCAxIC0gR2FtZS5hc2NlbmRNZXRlclBlcmNlbnQpICogMTAwKSArDQogICAgICAiJSwwcHgpIjsNCiAgICBHYW1lLmFzY2VuZE1ldGVyUGVyY2VudCArPQ0KICAgICAgKEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50VCAtIEdhbWUuYXNjZW5kTWV0ZXJQZXJjZW50KSAqIDAuMTsNCg0KICAgIEdhbWUuTm90ZXNMb2dpYygpOw0KICAgIGlmIChHYW1lLm1vdXNlTW92ZWQgfHwgR2FtZS5TY3JvbGwgfHwgR2FtZS50b29sdGlwLmR5bmFtaWMpDQogICAgICBHYW1lLnRvb2x0aXAudXBkYXRlKCk7DQoNCiAgICBpZiAoDQogICAgICBHYW1lLlQgJSAoR2FtZS5mcHMgKiA1KSA9PSAwICYmDQogICAgICAhR2FtZS5tb3VzZURvd24gJiYNCiAgICAgIChHYW1lLm9uTWVudSA9PSAic3RhdHMiIHx8IEdhbWUub25NZW51ID09ICJwcmVmcyIpDQogICAgKQ0KICAgICAgR2FtZS5VcGRhdGVNZW51KCk7DQogICAgaWYgKEdhbWUuVCAlIChHYW1lLmZwcyAqIDEpID09IDApIEdhbWUuVXBkYXRlUHJvbXB0KCk7DQogICAgaWYgKEdhbWUuQXNjZW5kVGltZXIgPiAwKSBHYW1lLlVwZGF0ZUFzY2VuZEludHJvKCk7DQogICAgaWYgKEdhbWUuUmVpbmNhcm5hdGVUaW1lciA+IDApIEdhbWUuVXBkYXRlUmVpbmNhcm5hdGVJbnRybygpOw0KICAgIGlmIChHYW1lLk9uQXNjZW5kKSBHYW1lLlVwZGF0ZUFzY2VuZCgpOw0KDQogICAgR2FtZS5ydW5Nb2RIb29rKCJsb2dpYyIpOw0KDQogICAgaWYgKEdhbWUuc3BhcmtsZXNUID4gMCkgew0KICAgICAgR2FtZS5zcGFya2xlcy5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPQ0KICAgICAgICAtTWF0aC5mbG9vcigoR2FtZS5zcGFya2xlc0ZyYW1lcyAtIEdhbWUuc3BhcmtsZXNUICsgMSkgKiAxMjgpICsNCiAgICAgICAgInB4IDBweCI7DQogICAgICBHYW1lLnNwYXJrbGVzVC0tOw0KICAgICAgaWYgKEdhbWUuc3BhcmtsZXNUID09IDEpIEdhbWUuc3BhcmtsZXMuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICB9DQoNCiAgICBHYW1lLkNsaWNrID0gMDsNCiAgICBHYW1lLlNjcm9sbCA9IDA7DQogICAgR2FtZS5tb3VzZU1vdmVkID0gMDsNCiAgICBHYW1lLkNhbkNsaWNrID0gMTsNCg0KICAgIGlmICgNCiAgICAgIChHYW1lLnRvU2F2ZSB8fA0KICAgICAgICAoR2FtZS5UICUgKEdhbWUuZnBzICogNjApID09IDAgJiYNCiAgICAgICAgICBHYW1lLlQgPiBHYW1lLmZwcyAqIDEwICYmDQogICAgICAgICAgR2FtZS5wcmVmcy5hdXRvc2F2ZSkpICYmDQogICAgICAhR2FtZS5PbkFzY2VuZA0KICAgICkgew0KICAgICAgLy9jaGVjayBpZiB3ZSBjYW4gc2F2ZSA6IG5vIG1pbmlnYW1lcyBhcmUgbG9hZGluZw0KICAgICAgdmFyIGNhblNhdmUgPSB0cnVlOw0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAobWUubWluaWdhbWVMb2FkaW5nKSB7DQogICAgICAgICAgY2FuU2F2ZSA9IGZhbHNlOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoY2FuU2F2ZSkgR2FtZS5Xcml0ZVNhdmUoKTsNCiAgICB9DQogICAgaWYgKCFHYW1lLnRvU2F2ZSAmJiAhR2FtZS5pc1NhdmluZykgew0KICAgICAgaWYgKEdhbWUudG9SZWxvYWQpIHsNCiAgICAgICAgR2FtZS50b1JlbG9hZCA9IGZhbHNlOw0KICAgICAgICBpZiAoIUFwcCkgew0KICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIEFwcC5yZWxvYWQoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKEdhbWUudG9RdWl0KSB7DQogICAgICAgIEdhbWUudG9RdWl0ID0gZmFsc2U7DQogICAgICAgIGlmICghQXBwKSB7DQogICAgICAgICAgd2luZG93LmNsb3NlKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgQXBwLnF1aXQoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChBcHAgJiYgQXBwLmxvZ2ljKSBBcHAubG9naWMoR2FtZS5UKTsNCg0KICAgIC8vZXZlcnkgaG91cjogZ2V0IHNlcnZlciBkYXRhIChpZS4gdXBkYXRlIG5vdGlmaWNhdGlvbiwgcGF0cmVvbiwgc3RlYW0gZXRjKQ0KICAgIGlmICgNCiAgICAgIEdhbWUuVCAlIChHYW1lLmZwcyAqIDYwICogNjApID09IDAgJiYNCiAgICAgIEdhbWUuVCA+IEdhbWUuZnBzICogMTAgLyogJiYgR2FtZS5wcmVmcy5hdXRvdXBkYXRlKi8NCiAgICApIHsNCiAgICAgIEdhbWUuQ2hlY2tVcGRhdGVzKCk7DQogICAgICBHYW1lLkdyYWJEYXRhKCk7DQogICAgfQ0KDQogICAgR2FtZS5UKys7DQogIH07DQoNCiAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoJRFJBVw0KCT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovDQoNCiAgR2FtZS5EcmF3ID0gZnVuY3Rpb24gKCkgew0KICAgIEdhbWUuRHJhd0JhY2tncm91bmQoKTsNCiAgICBUaW1lci50cmFjaygiZW5kIG9mIGJhY2tncm91bmQiKTsNCg0KICAgIGlmICghR2FtZS5PbkFzY2VuZCkgew0KICAgICAgdmFyIHN0ciA9IEJlYXV0aWZ5KE1hdGgucm91bmQoR2FtZS5jb29raWVzZCkpOw0KICAgICAgaWYgKEdhbWUuY29va2llc2QgPj0gMTAwMDAwMCkgew0KICAgICAgICAvL2RpcnR5IHBhZGRpbmcNCiAgICAgICAgdmFyIHNwYWNlUG9zID0gc3RyLmluZGV4T2YoIiAiKTsNCiAgICAgICAgdmFyIGRvdFBvcyA9IHN0ci5pbmRleE9mKCIuIik7DQogICAgICAgIHZhciBhZGQgPSAiIjsNCiAgICAgICAgaWYgKHNwYWNlUG9zICE9IC0xKSB7DQogICAgICAgICAgaWYgKGRvdFBvcyA9PSAtMSkgYWRkICs9ICIuMDAwIjsNCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGlmIChzcGFjZVBvcyAtIGRvdFBvcyA9PSAyKSBhZGQgKz0gIjAwIjsNCiAgICAgICAgICAgIGlmIChzcGFjZVBvcyAtIGRvdFBvcyA9PSAzKSBhZGQgKz0gIjAiOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBzdHIgPSBbc3RyLnNsaWNlKDAsIHNwYWNlUG9zKSwgYWRkLCBzdHIuc2xpY2Uoc3BhY2VQb3MpXS5qb2luKCIiKTsNCiAgICAgIH0NCg0KICAgICAgc3RyID0gbG9jKCIlMSBjb29raWUiLCB7IG46IE1hdGgucm91bmQoR2FtZS5jb29raWVzZCksIGI6IHN0ciB9KTsNCiAgICAgIGlmIChzdHIubGVuZ3RoID4gMTQpIHN0ciA9IHN0ci5yZXBsYWNlKCIgIiwgIjxicj4iKTsNCg0KICAgICAgaWYgKEdhbWUucHJlZnMubW9ub3NwYWNlKQ0KICAgICAgICBzdHIgPSAnPHNwYW4gY2xhc3M9Im1vbm9zcGFjZSI+JyArIHN0ciArICI8L3NwYW4+IjsNCiAgICAgIHN0ciA9DQogICAgICAgIHN0ciArDQogICAgICAgICc8ZGl2IGlkPSJjb29raWVzUGVyU2Vjb25kIicgKw0KICAgICAgICAoR2FtZS5jcHNTdWNrZWQgPiAwID8gJyBjbGFzcz0id3JpbmtsZWQiJyA6ICIiKSArDQogICAgICAgICI+IiArDQogICAgICAgIGxvYygicGVyIHNlY29uZDoiKSArDQogICAgICAgICIgIiArDQogICAgICAgIEJlYXV0aWZ5KEdhbWUuY29va2llc1BzICogKDEgLSBHYW1lLmNwc1N1Y2tlZCksIDEpICsNCiAgICAgICAgIjwvZGl2PiI7DQogICAgICBsKCJjb29raWVzIikuaW5uZXJIVE1MID0gc3RyOw0KICAgICAgVGltZXIudHJhY2soImNvb2tpZSBhbW91bnQiKTsNCg0KICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgdmFyIG1lID0gR2FtZS5PYmplY3RzW2ldOw0KICAgICAgICBpZiAobWUub25NaW5pZ2FtZSAmJiBtZS5taW5pZ2FtZS5kcmF3ICYmICFtZS5tdXRlZCAmJiAhR2FtZS5vbk1lbnUpDQogICAgICAgICAgbWUubWluaWdhbWUuZHJhdygpOw0KICAgICAgfQ0KICAgICAgVGltZXIudHJhY2soImRyYXcgbWluaWdhbWVzIik7DQoNCiAgICAgIGlmIChHYW1lLmRyYXdUICUgNSA9PSAwKSB7DQogICAgICAgIC8vaWYgKEdhbWUucHJlZnMubW9ub3NwYWNlKSB7bCgnY29va2llcycpLmNsYXNzTmFtZT0ndGl0bGUgbW9ub3NwYWNlJzt9IGVsc2Uge2woJ2Nvb2tpZXMnKS5jbGFzc05hbWU9J3RpdGxlJzt9DQogICAgICAgIHZhciBsYXN0TG9ja2VkID0gMDsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBHYW1lLk9iamVjdHMpIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLk9iamVjdHNbaV07DQoNCiAgICAgICAgICAvL21ha2UgcHJvZHVjdHMgZnVsbC1vcGFjaXR5IGlmIHdlIGNhbiBidXkgdGhlbQ0KICAgICAgICAgIHZhciBjbGFzc2VzID0gInByb2R1Y3QiOw0KICAgICAgICAgIHZhciBwcmljZSA9IG1lLmJ1bGtQcmljZTsNCiAgICAgICAgICBpZiAoR2FtZS5jb29raWVzRWFybmVkID49IG1lLmJhc2VQcmljZSB8fCBtZS5ib3VnaHQgPiAwKSB7DQogICAgICAgICAgICBjbGFzc2VzICs9ICIgdW5sb2NrZWQiOw0KICAgICAgICAgICAgbGFzdExvY2tlZCA9IDA7DQogICAgICAgICAgICBtZS5sb2NrZWQgPSAwOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjbGFzc2VzICs9ICIgbG9ja2VkIjsNCiAgICAgICAgICAgIGxhc3RMb2NrZWQrKzsNCiAgICAgICAgICAgIG1lLmxvY2tlZCA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIChHYW1lLmJ1eU1vZGUgPT0gMSAmJiBHYW1lLmNvb2tpZXMgPj0gcHJpY2UpIHx8DQogICAgICAgICAgICAoR2FtZS5idXlNb2RlID09IC0xICYmIG1lLmFtb3VudCA+IDApDQogICAgICAgICAgKQ0KICAgICAgICAgICAgY2xhc3NlcyArPSAiIGVuYWJsZWQiOw0KICAgICAgICAgIGVsc2UgY2xhc3NlcyArPSAiIGRpc2FibGVkIjsNCiAgICAgICAgICBpZiAobGFzdExvY2tlZCA+IDIpIGNsYXNzZXMgKz0gIiB0b2dnbGVkT2ZmIjsNCiAgICAgICAgICBtZS5sLmNsYXNzTmFtZSA9IGNsYXNzZXM7DQogICAgICAgICAgLy9pZiAobWUuaWQ+MCkge2woJ3Byb2R1Y3ROYW1lJyttZS5pZCkuaW5uZXJIVE1MPUJlYXV0aWZ5KG1lLnN0b3JlZFRvdGFsQ3BzL0dhbWUuT2JqZWN0c0J5SWRbbWUuaWQtMV0uc3RvcmVkVG90YWxDcHMsMik7fQ0KICAgICAgICB9DQoNCiAgICAgICAgLy9tYWtlIHVwZ3JhZGVzIGZ1bGwtb3BhY2l0eSBpZiB3ZSBjYW4gYnV5IHRoZW0NCiAgICAgICAgdmFyIGxhc3RQcmljZSA9IDA7DQogICAgICAgIGZvciAodmFyIGkgaW4gR2FtZS5VcGdyYWRlc0luU3RvcmUpIHsNCiAgICAgICAgICB2YXIgbWUgPSBHYW1lLlVwZ3JhZGVzSW5TdG9yZVtpXTsNCiAgICAgICAgICBpZiAoIW1lLmJvdWdodCkgew0KICAgICAgICAgICAgdmFyIHByaWNlID0gbWUuZ2V0UHJpY2UoKTsNCiAgICAgICAgICAgIHZhciBjYW5CdXkgPSBtZS5jYW5CdXkoKTsgLy8oR2FtZS5jb29raWVzPj1wcmljZSk7DQogICAgICAgICAgICB2YXIgZW5hYmxlZCA9IGwoInVwZ3JhZGUiICsgaSkuY2xhc3NOYW1lLmluZGV4T2YoImVuYWJsZWQiKSA+IC0xOw0KICAgICAgICAgICAgaWYgKChjYW5CdXkgJiYgIWVuYWJsZWQpIHx8ICghY2FuQnV5ICYmIGVuYWJsZWQpKQ0KICAgICAgICAgICAgICBHYW1lLnVwZ3JhZGVzVG9SZWJ1aWxkID0gMTsNCiAgICAgICAgICAgIGlmIChwcmljZSA8IGxhc3RQcmljZSkgR2FtZS5zdG9yZVRvUmVmcmVzaCA9IDE7IC8vaXMgdGhpcyB1cGdyYWRlIGxlc3MgZXhwZW5zaXZlIHRoYW4gdGhlIHByZXZpb3VzIG9uZT8gdHJpZ2dlciBhIHJlZnJlc2ggdG8gc29ydCBpdCBhZ2Fpbg0KICAgICAgICAgICAgbGFzdFByaWNlID0gcHJpY2U7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChtZS50aW1lckRpc3BsYXkpIHsNCiAgICAgICAgICAgIHZhciBUID0gbWUudGltZXJEaXNwbGF5KCk7DQogICAgICAgICAgICBpZiAoVCAhPSAtMSkgew0KICAgICAgICAgICAgICBpZiAoIWwoInVwZ3JhZGVQaWVUaW1lciIgKyBpKSkNCiAgICAgICAgICAgICAgICBsKCJ1cGdyYWRlIiArIGkpLmlubmVySFRNTCA9DQogICAgICAgICAgICAgICAgICBsKCJ1cGdyYWRlIiArIGkpLmlubmVySFRNTCArDQogICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0icGllVGltZXIiIGlkPSJ1cGdyYWRlUGllVGltZXInICsNCiAgICAgICAgICAgICAgICAgIGkgKw0KICAgICAgICAgICAgICAgICAgJyI+PC9kaXY+JzsNCiAgICAgICAgICAgICAgVCA9IChUICogMTQ0KSAlIDE0NDsNCiAgICAgICAgICAgICAgbCgidXBncmFkZVBpZVRpbWVyIiArIGkpLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9DQogICAgICAgICAgICAgICAgLU1hdGguZmxvb3IoVCAlIDE4KSAqIDQ4ICsNCiAgICAgICAgICAgICAgICAicHggIiArDQogICAgICAgICAgICAgICAgLU1hdGguZmxvb3IoVCAvIDE4KSAqIDQ4ICsNCiAgICAgICAgICAgICAgICAicHgiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vaWYgKG1lLmNhbkJ1eSgpKSBsKCd1cGdyYWRlJytpKS5jbGFzc05hbWU9J2NyYXRlIHVwZ3JhZGUgZW5hYmxlZCc7IGVsc2UgbCgndXBncmFkZScraSkuY2xhc3NOYW1lPSdjcmF0ZSB1cGdyYWRlIGRpc2FibGVkJzsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgVGltZXIudHJhY2soInN0b3JlIik7DQoNCiAgICAgIGlmIChHYW1lLlBBUlRZKSB7DQogICAgICAgIC8vaSB3YXMgYm9yZWQgYW5kIGZlbHQgbGlrZSBtZXNzaW5nIHdpdGggQ1NTDQogICAgICAgIHZhciBwdWxzZSA9IE1hdGgucG93KChHYW1lLlQgJSAxMCkgLyAxMCwgMC41KTsNCiAgICAgICAgR2FtZS5sLnN0eWxlLmZpbHRlciA9DQogICAgICAgICAgImh1ZS1yb3RhdGUoIiArDQogICAgICAgICAgKChHYW1lLlQgKiA1KSAlIDM2MCkgKw0KICAgICAgICAgICJkZWcpIGJyaWdodG5lc3MoIiArDQogICAgICAgICAgKDE1MCAtIDUwICogcHVsc2UpICsNCiAgICAgICAgICAiJSkiOw0KICAgICAgICBHYW1lLmwuc3R5bGUud2Via2l0RmlsdGVyID0NCiAgICAgICAgICAiaHVlLXJvdGF0ZSgiICsNCiAgICAgICAgICAoKEdhbWUuVCAqIDUpICUgMzYwKSArDQogICAgICAgICAgImRlZykgYnJpZ2h0bmVzcygiICsNCiAgICAgICAgICAoMTUwIC0gNTAgKiBwdWxzZSkgKw0KICAgICAgICAgICIlKSI7DQogICAgICAgIEdhbWUubC5zdHlsZS50cmFuc2Zvcm0gPQ0KICAgICAgICAgICJzY2FsZSgiICsNCiAgICAgICAgICAoMS4wMiAtIDAuMDIgKiBwdWxzZSkgKw0KICAgICAgICAgICIsIiArDQogICAgICAgICAgKDEuMDIgLSAwLjAyICogcHVsc2UpICsNCiAgICAgICAgICAiKSByb3RhdGUoIiArDQogICAgICAgICAgTWF0aC5zaW4oR2FtZS5UICogMC41KSAqIDAuNSArDQogICAgICAgICAgImRlZykiOw0KICAgICAgICBHYW1lLndyYXBwZXIuc3R5bGUub3ZlcmZsb3dYID0gImhpZGRlbiI7DQogICAgICAgIEdhbWUud3JhcHBlci5zdHlsZS5vdmVyZmxvd1kgPSAiaGlkZGVuIjsNCiAgICAgIH0NCg0KICAgICAgVGltZXIuY2xlYW4oKTsNCiAgICAgIGlmICgNCiAgICAgICAgR2FtZS5wcmVmcy5hbmltYXRlICYmDQogICAgICAgICgoR2FtZS5wcmVmcy5mYW5jeSAmJiBHYW1lLmRyYXdUICUgMSA9PSAwKSB8fA0KICAgICAgICAgICghR2FtZS5wcmVmcy5mYW5jeSAmJiBHYW1lLmRyYXdUICUgMTAgPT0gMCkpICYmDQogICAgICAgIEdhbWUuQXNjZW5kVGltZXIgPT0gMCAmJg0KICAgICAgICBHYW1lLm9uTWVudSA9PSAiIg0KICAgICAgKQ0KICAgICAgICBHYW1lLkRyYXdCdWlsZGluZ3MoKTsNCiAgICAgIFRpbWVyLnRyYWNrKCJidWlsZGluZ3MiKTsNCg0KICAgICAgR2FtZS50ZXh0UGFydGljbGVzVXBkYXRlKCk7DQogICAgICBUaW1lci50cmFjaygidGV4dCBwYXJ0aWNsZXMiKTsNCiAgICB9DQoNCiAgICBHYW1lLk5vdGVzRHJhdygpOw0KICAgIFRpbWVyLnRyYWNrKCJub3RlcyIpOw0KDQogICAgR2FtZS5ydW5Nb2RIb29rKCJkcmF3Iik7DQoNCiAgICBHYW1lLmRyYXdUKys7DQogICAgLy9pZiAoR2FtZS5wcmVmcy5hbHREcmF3KSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoR2FtZS5EcmF3KTsNCiAgfTsNCg0KICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCglNQUlOIExPT1ANCgk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLw0KICBHYW1lLkxvb3AgPSBmdW5jdGlvbiAoKSB7DQogICAgaWYgKEdhbWUudGltZWRvdXQpIHJldHVybiBmYWxzZTsNCiAgICBUaW1lci5zYXkoIlNUQVJUIik7DQogICAgVGltZXIudHJhY2soImJyb3dzZXIgc3R1ZmYiKTsNCiAgICBUaW1lci5zYXkoIkxPR0lDIik7DQogICAgLy91cGRhdGUgZ2FtZSBsb2dpYyAhDQogICAgR2FtZS5jYXRjaHVwTG9naWMgPSAwOw0KICAgIEdhbWUuTG9naWMoKTsNCiAgICBHYW1lLmNhdGNodXBMb2dpYyA9IDE7DQoNCiAgICB2YXIgdGltZSA9IERhdGUubm93KCk7DQoNCiAgICAvL2xhdGVuY3kgY29tcGVuc2F0b3INCiAgICBHYW1lLmFjY3VtdWxhdGVkRGVsYXkgKz0gdGltZSAtIEdhbWUudGltZSAtIDEwMDAgLyBHYW1lLmZwczsNCiAgICBpZiAoR2FtZS5wcmVmcy50aW1lb3V0ICYmIHRpbWUgLSBHYW1lLmxhc3RBY3Rpdml0eSA+PSAxMDAwICogNjAgKiA1KSB7DQogICAgICBpZiAoR2FtZS5hY2N1bXVsYXRlZERlbGF5ID4gMTAwMCAqIDYwICogMzApDQogICAgICAgIEdhbWUuZGVsYXlUaW1lb3V0cyArPSAzOyAvL21vcmUgdGhhbiAzMCBtaW51dGVzIGRlbGF5PyBjb21wdXRlciBwcm9iYWJseSBhc2xlZXAgYW5kIG5vdCBtYWtpbmcgY29va2llcyBhbnl3YXkNCiAgICAgIGVsc2UgaWYgKEdhbWUuYWNjdW11bGF0ZWREZWxheSA+IDEwMDAgKiA1KSBHYW1lLmRlbGF5VGltZW91dHMrKzsgLy9hZGQgdG8gdGltZW91dCBjb3VudGVyIHdoZW4gd2Ugc2tpcCAxMCBzZWNvbmRzIHdvcnRoIG9mIGZyYW1lcyAoYW5kIHRoZSBwbGF5ZXIgaGFzIGJlZW4gaW5hY3RpdmUgZm9yIGF0IGxlYXN0IDUgbWludXRlcykNCiAgICAgIGlmIChHYW1lLmRlbGF5VGltZW91dHMgPj0gMykgR2FtZS5UaW1lb3V0KCk7IC8vdHJpZ2dlciB0aW1lb3V0IHdoZW4gdGhlIHRpbWVvdXQgY291bnRlciBpcyAzKw0KICAgIH0NCg0KICAgIEdhbWUuYWNjdW11bGF0ZWREZWxheSA9IE1hdGgubWluKEdhbWUuYWNjdW11bGF0ZWREZWxheSwgMTAwMCAqIDUpOyAvL2Rvbid0IGNvbXBlbnNhdGUgb3ZlciA1IHNlY29uZHM7IGlmIHlvdSBkbywgc29tZXRoaW5nJ3MgcHJvYmFibHkgdmVyeSB3cm9uZw0KICAgIEdhbWUudGltZSA9IHRpbWU7DQoNCiAgICAvL2lmIChHYW1lLmFjY3VtdWxhdGVkRGVsYXk+PUdhbWUuZnBzKSBjb25zb2xlLmxvZygnZGVsYXk6JyxNYXRoLnJvdW5kKEdhbWUuYWNjdW11bGF0ZWREZWxheS9HYW1lLmZwcykpOw0KICAgIHdoaWxlIChHYW1lLmFjY3VtdWxhdGVkRGVsYXkgPiAwKSB7DQogICAgICBHYW1lLkxvZ2ljKCk7DQogICAgICBHYW1lLmFjY3VtdWxhdGVkRGVsYXkgLT0gMTAwMCAvIEdhbWUuZnBzOyAvL2FzIGxvbmcgYXMgd2UncmUgZGV0ZWN0aW5nIGxhdGVuY3kgKHNsb3dlciB0aGFuIHRhcmdldCBmcHMpLCBleGVjdXRlIGxvZ2ljICh0aGlzIG1ha2VzIGRyYXdpbmcgc2xvd2VyIGJ1dCBtYWtlcyB0aGUgbG9naWMgYmVoYXZlIGNsb3NlciB0byBjb3JyZWN0IHRhcmdldCBmcHMpDQogICAgfQ0KICAgIEdhbWUuY2F0Y2h1cExvZ2ljID0gMDsNCiAgICBUaW1lci50cmFjaygibG9naWMiKTsNCiAgICBUaW1lci5zYXkoIkVORCBMT0dJQyIpOw0KICAgIC8qDQoJCWlmICghR2FtZS5wcmVmcy5hbHREcmF3KQ0KCQl7DQoJCQl2YXIgaGFzRm9jdXM9ZG9jdW1lbnQuaGFzRm9jdXMoKTsNCgkJCVRpbWVyLnNheSgnRFJBVycpOw0KCQkJaWYgKGhhc0ZvY3VzIHx8IEdhbWUucHJlZnMuZm9jdXMgfHwgR2FtZS5sb29wVCUxMD09MCkgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKEdhbWUuRHJhdyk7DQoJCQkvL2lmIChkb2N1bWVudC5oYXNGb2N1cygpIHx8IEdhbWUubG9vcFQlNT09MCkgR2FtZS5EcmF3KCk7DQoJCQlUaW1lci5zYXkoJ0VORCBEUkFXJyk7DQoJCX0NCgkJZWxzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoR2FtZS5EcmF3KTsqLw0KICAgIGlmIChHYW1lLnZpc2libGUpIEdhbWUuRHJhdygpOw0KDQogICAgLy9pZiAoIWhhc0ZvY3VzKSBHYW1lLnRvb2x0aXAuaGlkZSgpOw0KDQogICAgaWYgKEdhbWUuc2VzYW1lKSB7DQogICAgICAvL2ZwcyBjb3VudGVyIGFuZCBncmFwaA0KICAgICAgR2FtZS5wcmV2aW91c0ZwcyA9IEdhbWUuY3VycmVudEZwczsNCiAgICAgIEdhbWUuY3VycmVudEZwcyA9IEdhbWUuZ2V0RnBzKCk7DQogICAgICB2YXIgY3R4ID0gR2FtZS5mcHNHcmFwaEN0eDsNCiAgICAgIGN0eC5kcmF3SW1hZ2UoR2FtZS5mcHNHcmFwaCwgLTEsIDApOw0KICAgICAgY3R4LmZpbGxTdHlsZSA9DQogICAgICAgICJyZ2IoIiArIE1hdGgucm91bmQoKDEgLSBHYW1lLmN1cnJlbnRGcHMgLyBHYW1lLmZwcykgKiAxMjgpICsgIiwwLDApIjsNCiAgICAgIGN0eC5maWxsUmVjdCgxMjggLSAxLCAwLCAxLCA2NCk7DQogICAgICBjdHguc3Ryb2tlU3R5bGUgPSAiI2ZmZiI7DQogICAgICBjdHguYmVnaW5QYXRoKCk7DQogICAgICBjdHgubW92ZVRvKDEyOCAtIDEsICgxIC0gR2FtZS5wcmV2aW91c0ZwcyAvIEdhbWUuZnBzKSAqIDY0KTsNCiAgICAgIGN0eC5saW5lVG8oMTI4LCAoMSAtIEdhbWUuY3VycmVudEZwcyAvIEdhbWUuZnBzKSAqIDY0KTsNCiAgICAgIGN0eC5zdHJva2UoKTsNCg0KICAgICAgbCgiZnBzQ291bnRlciIpLnRleHRDb250ZW50ID0gR2FtZS5jdXJyZW50RnBzICsgIiBmcHMiOw0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgZm9yICh2YXIgaSBpbiBUaW1lci5sYWJlbHMpIHsNCiAgICAgICAgc3RyICs9IFRpbWVyLmxhYmVsc1tpXTsNCiAgICAgIH0NCiAgICAgIGlmIChHYW1lLmRlYnVnVGltZXJzT24pIGwoImRlYnVnTG9nIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICBlbHNlIGwoImRlYnVnTG9nIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIGwoImRlYnVnTG9nIikuaW5uZXJIVE1MID0gc3RyOw0KICAgIH0NCiAgICBUaW1lci5yZXNldCgpOw0KDQogICAgR2FtZS5sb29wVCsrOw0KICAgIHNldFRpbWVvdXQoR2FtZS5Mb29wLCAxMDAwIC8gR2FtZS5mcHMpOw0KICB9Ow0KfTsNCg0KLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpMQVVOQ0ggVEhJUyBUSElORw0KPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8NCi8vR2FtZS5MYXVuY2goKTsNCg0KLy90cnkge0dhbWUuTGF1bmNoKCk7fQ0KLy9jYXRjaChlcnIpIHtjb25zb2xlLmxvZygnRVJST1IgOiAnK2Vyci5tZXNzYWdlKTt9DQoNCndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7DQogIGlmICghR2FtZS5yZWFkeSkgew0KICAgIHZhciBsb2FkTGFuZ0FuZExhdW5jaCA9IGZ1bmN0aW9uIChsYW5nLCBmaXJzdExhdW5jaCkgew0KICAgICAgaWYgKCFmaXJzdExhdW5jaCkgbG9jYWxTdG9yYWdlU2V0KCJDb29raWVDbGlja2VyTGFuZyIsIGxhbmcpOw0KDQogICAgICAvL0xvYWRMYW5nKCcuLi9Db29raWUgQ2xpY2tlciBMb2NhbGl6YXRpb24vRU4uanMnLGZ1bmN0aW9uKGxhbmcpe3JldHVybiBmdW5jdGlvbigpew0KICAgICAgTG9hZExhbmcoDQogICAgICAgICJsb2MvRU4uanM/dj0iICsgR2FtZS52ZXJzaW9uLA0KICAgICAgICAoZnVuY3Rpb24gKGxhbmcpIHsNCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgbG9jU3RyaW5nc0ZhbGxiYWNrID0gbG9jU3RyaW5nczsNCiAgICAgICAgICAgIExvYWRMYW5nKCJsb2MvIiArIGxhbmcgKyAiLmpzP3Y9IiArIEdhbWUudmVyc2lvbiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICB2YXIgbGF1bmNoID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIEdhbWUuTGF1bmNoKCk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coDQogICAgICAgICAgICAgICAgICAiWz09PSAiICsNCiAgICAgICAgICAgICAgICAgICAgY2hvb3NlKFsNCiAgICAgICAgICAgICAgICAgICAgICAiT2gsIGhlbGxvISIsDQogICAgICAgICAgICAgICAgICAgICAgImhleSwgaG93J3MgaXQgaGFuZ2luIiwNCiAgICAgICAgICAgICAgICAgICAgICAiQWJvdXQgdG8gY2hlYXQgaW4gc29tZSBjb29raWVzIG9yIGp1c3QgY2hlY2tpbmcgZm9yIGJ1Z3M/IiwNCiAgICAgICAgICAgICAgICAgICAgICAiUmVtZW1iZXIgOiBjaGVhdGVkIGNvb2tpZXMgdGFzdGUgYXdmdWwhIiwNCiAgICAgICAgICAgICAgICAgICAgICAiSGV5LCBPcnRlaWwgaGVyZS4gQ2hlYXRlZCBjb29raWVzIHRhc3RlIGF3ZnVsLi4uIG9yIGRvIHRoZXk/IiwNCiAgICAgICAgICAgICAgICAgICAgXSkgKw0KICAgICAgICAgICAgICAgICAgICAiID09PV0iDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBHYW1lLkxvYWQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgR2FtZS5Jbml0KCk7DQogICAgICAgICAgICAgICAgICBpZiAoZmlyc3RMYXVuY2gpIEdhbWUuc2hvd0xhbmdTZWxlY3Rpb24odHJ1ZSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgLy90cnkge0dhbWUuTG9hZChHYW1lLkluaXQpO30NCiAgICAgICAgICAgICAgICAvL2NhdGNoKGVycikge2NvbnNvbGUubG9nKCdFUlJPUiA6ICcrZXJyLm1lc3NhZ2UpO30NCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgaWYgKEFwcCAmJiBBcHAubG9hZE1vZHMpIEFwcC5sb2FkTW9kcyhsYXVuY2gpOw0KICAgICAgICAgICAgICBlbHNlIGxhdW5jaCgpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfTsNCiAgICAgICAgfSkobGFuZykNCiAgICAgICk7DQogICAgfTsNCg0KICAgIHZhciBzaG93TGFuZ1NlbGVjdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgew0KICAgICAgdmFyIHN0ciA9ICIiOw0KICAgICAgZm9yICh2YXIgaSBpbiBMYW5ncykgew0KICAgICAgICB2YXIgbGFuZyA9IExhbmdzW2ldOw0KICAgICAgICBzdHIgKz0NCiAgICAgICAgICAnPGRpdiBjbGFzcz0ibGFuZ1NlbGVjdEJ1dHRvbiB0aXRsZSIgaWQ9ImxhbmdTZWxlY3QtJyArDQogICAgICAgICAgaSArDQogICAgICAgICAgJyI+JyArDQogICAgICAgICAgbGFuZy5uYW1lICsNCiAgICAgICAgICAiPC9kaXY+IjsNCiAgICAgIH0NCiAgICAgIGwoIm9mZkdhbWVNZXNzYWdlIikuaW5uZXJIVE1MID0NCiAgICAgICAgJzxkaXYgY2xhc3M9InRpdGxlIiBpZD0ibGFuZ3VhZ2VTZWxlY3RIZWFkZXIiPkxhbmd1YWdlPC9kaXY+JyArDQogICAgICAgICc8ZGl2IGNsYXNzPSJsaW5lIiBzdHlsZT0ibWF4LXdpZHRoOjMwMHB4OyI+PC9kaXY+JyArDQogICAgICAgIHN0cjsNCiAgICAgIGZvciAodmFyIGkgaW4gTGFuZ3MpIHsNCiAgICAgICAgdmFyIGxhbmcgPSBMYW5nc1tpXTsNCiAgICAgICAgQWRkRXZlbnQoDQogICAgICAgICAgbCgibGFuZ1NlbGVjdC0iICsgaSksDQogICAgICAgICAgImNsaWNrIiwNCiAgICAgICAgICAoZnVuY3Rpb24gKGxhbmcpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIGNhbGxiYWNrKGxhbmcpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9KShpKQ0KICAgICAgICApOw0KICAgICAgICBBZGRFdmVudCgNCiAgICAgICAgICBsKCJsYW5nU2VsZWN0LSIgKyBpKSwNCiAgICAgICAgICAibW91c2VvdmVyIiwNCiAgICAgICAgICAoZnVuY3Rpb24gKGxhbmcpIHsNCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIFBsYXlTb3VuZCgic25kL3NtYWxsVGljay5tcDMiLCAwLjc1KTsNCiAgICAgICAgICAgICAgbCgibGFuZ3VhZ2VTZWxlY3RIZWFkZXIiKS5pbm5lckhUTUwgPSBMYW5nc1tsYW5nXS5jaGFuZ2VMYW5ndWFnZTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSkoaSkNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgdmFyIGxhbmcgPSBsb2NhbFN0b3JhZ2VHZXQoIkNvb2tpZUNsaWNrZXJMYW5nIik7DQogICAgaWYgKEFwcCAmJiAhbGFuZykgc2hvd0xhbmdTZWxlY3QobG9hZExhbmdBbmRMYXVuY2gpOw0KICAgIGVsc2UgaWYgKCFsYW5nKSB7DQogICAgICBsb2FkTGFuZ0FuZExhdW5jaCgiRU4iLCB0cnVlKTsNCiAgICB9IGVsc2UgbG9hZExhbmdBbmRMYXVuY2gobGFuZyk7DQogIH0NCn07DQo="></script>

    <!-- ad -->
    <script src="showads.js"></script>
    <!-- /ad -->

    <!--[if IE]>
      <style type="text/css">
        #ifIE9 {
          display: block;
        }
      </style>
    <![endif]-->

    <!--[if lt IE9]><script src="excanvas.compiled.js"></script><![endif]-->
  </head>
  <body>
    <div id="wrapper">
      <div id="topBar">
        <div><b style="font-weight: bold;">Cookies</b>&trade; &copy; <a href="https://google.com" target="_blank" id="topbarOrteil">Teethpasta</a>, 2022 - <a href="https://google.com" target="_blank" id="topbarDashnet">Teethpasta</a></div>
        <div><a href="https://google.com" target="_blank" id="topbarTwitter">Blank</a></div>
        <div><a href="https://google.com" target="_blank" id="topbarTumblr">Blank</a></div>
        <div style="position: relative;">
          <div style="width: 22px; height: 32px; background: url(img/discord.png); position: absolute; left: 0px; top: 0px; pointer-events: none;"></div>
          <a href="https://google.com" target="_blank" style="padding-left: 16px;" id="topbarDiscord">Blank</a>
        </div>
        <div style="position: relative;">
          <div style="width: 25px; height: 32px; background: url(img/weeHoodie.png); position: absolute; left: -2px; top: 0px; pointer-events: none;"></div>
          <a class="blueLink" href="https://google.com" target="_blank" style="padding-left: 12px;" id="topbarMerch">Nothing</a>
        </div>
        <div style="position: relative;">
          <div style="width: 22px; height: 32px; background: url(img/patreon.png); position: absolute; left: 0px; top: 0px; pointer-events: none;"></div>
          <a class="orangeLink" href="https://google.com" target="_blank" style="padding-left: 16px;" id="topbarPatreon">Patreon</a>
        </div>
        <div style="position: relative; display: none; font-weight: bold;" id="heralds">
          <div style="position: absolute; top: -4px; width: 31px; height: 39px; background: url(img/heraldFlag.png); left: 50%; margin-left: -15px; pointer-events: none;"></div>
          <div id="heraldsAmount" style="position: relative; z-index: 10; text-shadow: 0px 1px 0px #000, 0px 0px 6px #ff00e4; color: #fff;">-</div>
        </div>
        <div><a class="lightblueLink" style="font-weight: bold;" href="https://google.com" target="_blank" id="topbarMobileCC">Blank</a></div>
        <div><a class="lightblueLink" style="font-weight: bold;" href="https://google.com" target="_blank" id="topbarSteamCC">Blank</a></div>
        <div style="float: right; position: relative;">
          <div id="tinyglobe" style="position: absolute; top: -4px; width: 22px; height: 22px; background: url(img/tinyglobeSheet.gif); right: 4px; top: 4px; pointer-events: none;"></div>
          <a
            id="changeLanguage"
            style="font-variant: small-caps; padding-right: 20px;"
            onmouseover="INTERVAL_TINYGLOBE=setInterval(function(){var tinyglobe=document.getElementById('tinyglobe');tinyglobe.style.backgroundPosition=(parseInt(tinyglobe.style.backgroundPosition)-22)+'px';},30);"
            onmouseout="clearInterval(INTERVAL_TINYGLOBE);"
          >
            Change language
          </a>
          <script>
            document.getElementById("tinyglobe").style.backgroundPosition = -[0, 19, 27][Math.floor(Math.random() * 3)] * 22 + "px";
          </script>
        </div>
        <div id="links" class="hoverer">
          Other versions
          <div class="hoverable">
          </div>
        </div>
      </div>
      <div id="game">
        <div id="versionNumber" class="title"></div>
        <script>
          document.getElementById("versionNumber").innerHTML = "v. " + VERSION;
        </script>
        <div id="offGameMessageWrap">
          <div id="offGameMessage">
            <div id="loader">
              <div class="spinnyBig"></div>
              <div class="spinnySmall"></div>
              <div id="loading" class="title">Loading...</div>
              <div id="failedToLoad" class="title">
                This is taking longer than expected...<br />
                <div style="font-size: 65%; line-height: 120%;">
                  <!-- error -->Slow connection? If not, please make sure your javascript is enabled, then refresh.<br />
                  If problems persist, this might be on our side - wait a few minutes, then hit ctrl+f5!<br /><!-- /error -->
                  If you can open a issue in the github so we know this happened!
                </div>
              </div>
              <div id="ifIE9" class="title" style="font-size: 100%; line-height: 120%;">
                Your browser may not be recent enough to run Cookies.<br />
                You might want to update, or switch to a more modern browser such as Chrome or Firefox.
              </div>
            </div>
          </div>
        </div>

        <canvas id="backgroundCanvas"></canvas>

        <div id="goldenCookie" class="goldenCookie"></div>
        <div id="seasonPopup" class="seasonPopup"></div>
        <div id="shimmers"></div>
        <div id="alert"></div>
        <div id="particles"></div>
        <div id="sparkles" class="sparkles"></div>
        <div id="notes"></div>
        <div id="darken"></div>
        <div id="toggleBox" class="framed prompt"></div>
        <div id="promptAnchor">
          <div id="prompt" class="framed">
            <div id="promptContent"></div>
            <div id="promptClose" class="close" style="display: none;" onclick="PlaySound('snd/tickOff.mp3');Game.ClosePrompt();">x</div>
          </div>
        </div>
        <div id="ascend">
          <div id="ascendBG"></div>
          <div id="ascendZoomable">
            <div id="ascendContent"><div id="ascendUpgrades" style="position: absolute;"></div></div>
          </div>
          <div id="ascendOverlay"></div>
        </div>

        <div id="debug">
          <div id="devConsole" class="framed"></div>
          <div id="debugLog"></div>
        </div>

        <div id="sectionLeft" class="inset">
          <canvas id="backgroundLeftCanvas" style="z-index: 5;"></canvas>
          <div class="blackFiller"></div>
          <div class="blackGradient"></div>
          <div id="sectionLeftInfo"></div>
          <div id="cookies" class="title"></div>
          <div id="bakeryNameAnchor"><div id="bakeryName" class="title"></div></div>
          <div id="specialPopup" class="framed prompt offScreen"></div>
          <div id="buffs" class="crateBox"></div>
          <div id="cookieAnchor">
            <button id="bigCookie"></button>
            <div id="cookieNumbers"></div>
          </div>
          <div id="sectionLeftExtra"></div>
        </div>

        <div class="separatorLeft" id="leftBeam"></div>
        <div class="separatorRight" id="rightBeam"></div>

        <div id="sectionMiddle" class="inset">
          <div id="comments" class="inset title">
            <div id="prefsButton" class="panelButton"><div class="subButton">Options</div></div>
            <div id="statsButton" class="panelButton"><div>Stats</div></div>
            <div id="logButton" class="panelButton">
              <div>Info</div>
              <div id="checkForUpdate">New update!</div>
            </div>
            <div id="legacyButton" class="panelButton">
              <div class="subButton">Legacy</div>
              <div id="ascendMeterContainer" class="smallFramed meterContainer"><div id="ascendMeter" class="meter filling"></div></div>
              <div class="roundedPanel" id="ascendNumber"></div>
              <div id="ascendTooltip" class="framed"></div>
            </div>
            <div id="commentsText">
              <div id="commentsText1" class="commentsText"></div>
              <div id="commentsText2" class="commentsText"></div>
            </div>
            <div class="separatorBottom"></div>
          </div>
          <div id="centerArea">
            <div id="buildingsTitle" class="inset title zoneTitle">Buildings</div>
            <div id="buildingsMaster"></div>
            <div id="rows"></div>
            <div id="menu"></div>
          </div>
        </div>

        <div id="sectionRight" class="inset">
          <div id="store">
            <div id="storeTitle" class="inset title zoneTitle">Store</div>
            <div id="toggleUpgrades" class="storeSection upgradeBox"></div>
            <div id="techUpgrades" class="storeSection upgradeBox"></div>
            <div id="vaultUpgrades" class="storeSection upgradeBox"></div>
            <div id="upgrades" class="storeSection upgradeBox"></div>
            <div id="products" class="storeSection"></div>
          </div>
        </div>

        <div id="tooltipAnchor"><div id="tooltip" class="framed" onMouseOut="Game.tooltip.hide();"></div></div>
        <div id="preloadImages" style="display: none;"></div>
      </div>
    </div>
  </body>
</html>
